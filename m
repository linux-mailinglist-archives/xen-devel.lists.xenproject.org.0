Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 51708FC6F2
	for <lists+xen-devel@lfdr.de>; Thu, 14 Nov 2019 14:09:28 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iVEqH-0007A7-Jd; Thu, 14 Nov 2019 13:07:21 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=KGQC=ZG=amazon.de=prvs=2141b557b=wipawel@srs-us1.protection.inumbo.net>)
 id 1iVEqG-00079w-D7
 for xen-devel@lists.xenproject.org; Thu, 14 Nov 2019 13:07:20 +0000
X-Inumbo-ID: afa6b130-06df-11ea-a24b-12813bfff9fa
Received: from smtp-fw-4101.amazon.com (unknown [72.21.198.25])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id afa6b130-06df-11ea-a24b-12813bfff9fa;
 Thu, 14 Nov 2019 13:07:18 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.de; i=@amazon.de; q=dns/txt; s=amazon201209;
 t=1573736838; x=1605272838;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=3tRw49h6hB5sPH1YXiG7Cn7dB4E8KdgRvfbKuNf8550=;
 b=TnNE05FkB6dd+20bXTA8zaC20BhGt2E5xuHJHkCXP1sJt6cwfBecSMWQ
 KtWrleIIGgBTnlVzXTCN9jEWS0hf5qEVXjlwXnKK/Tx8X9S7VZt0ZTwUT
 dZcuSVRX7fSGs3nHezmy6gZCY5WVf4ZRYrNv8pDuOiRs2kta5dbqVDE0J M=;
IronPort-SDR: ZcWIzVEfRnGcrtbRmcNn8793+ym8DCVmCh137761cJohnT5cJdAb28f85ack+vff/nM7e1EnQc
 MtuqS+MoRwCA==
X-IronPort-AV: E=Sophos;i="5.68,304,1569283200"; 
   d="scan'208";a="3871996"
Received: from iad6-co-svc-p1-lb1-vlan3.amazon.com (HELO
 email-inbound-relay-1e-a70de69e.us-east-1.amazon.com) ([10.124.125.6])
 by smtp-border-fw-out-4101.iad4.amazon.com with ESMTP;
 14 Nov 2019 13:07:18 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan3.iad.amazon.com [10.40.159.166])
 by email-inbound-relay-1e-a70de69e.us-east-1.amazon.com (Postfix) with ESMTPS
 id E20F0A27ED; Thu, 14 Nov 2019 13:07:14 +0000 (UTC)
Received: from EX13D05EUB002.ant.amazon.com (10.43.166.45) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.82) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Thu, 14 Nov 2019 13:07:13 +0000
Received: from EX13MTAUWA001.ant.amazon.com (10.43.160.58) by
 EX13D05EUB002.ant.amazon.com (10.43.166.45) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Thu, 14 Nov 2019 13:07:12 +0000
Received: from dev-dsk-wipawel-1a-0c4e6d58.eu-west-1.amazon.com (10.4.134.33)
 by mail-relay.amazon.com (10.43.160.118) with Microsoft SMTP Server
 id
 15.0.1367.3 via Frontend Transport; Thu, 14 Nov 2019 13:07:09 +0000
From: Pawel Wieczorkiewicz <wipawel@amazon.de>
To: <xen-devel@lists.xenproject.org>
Date: Thu, 14 Nov 2019 13:06:42 +0000
Message-ID: <20191114130653.51185-2-wipawel@amazon.de>
X-Mailer: git-send-email 2.16.5
In-Reply-To: <20191114130653.51185-1-wipawel@amazon.de>
References: <20191114130653.51185-1-wipawel@amazon.de>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH v5 01/12] livepatch: Always check hypervisor
 build ID upon livepatch upload
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>, Andrew
 Cooper <andrew.cooper3@citrix.com>, Ross Lagerwall <ross.lagerwall@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, mpohlack@amazon.com,
 Pawel Wieczorkiewicz <wipawel@amazon.de>, Jan Beulich <jbeulich@suse.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBjaGFuZ2UgaXMgcGFydCBvZiBhIGluZGVwZW5kYW50IHN0YWNrZWQgbGl2ZXBhdGNoIG1v
ZHVsZXMKZmVhdHVyZS4gVGhpcyBmZWF0dXJlIGFsbG93cyB0byBieXBhc3MgZGVwZW5kZW5jaWVz
IGJldHdlZW4gbW9kdWxlcwp1cG9uIGxvYWRpbmcsIGJ1dCBzdGlsbCB2ZXJpZmllcyBYZW4gYnVp
bGQgSUQgbWF0Y2hpbmcuCgpJbiBvcmRlciB0byBwcmV2ZW50ICh1cClsb2FkaW5nIGFueSBsaXZl
cGF0Y2hlcyBidWlsdCBmb3IgZGlmZmVyZW50Cmh5cGVydmlzb3IgdmVyc2lvbiBhcyBpbmRpY2F0
ZWQgYnkgdGhlIFhlbiBCdWlsZCBJRCwgYWRkIGNoZWNraW5nIGZvcgp0aGUgcGF5bG9hZCdzIHZz
IFhlbidzIGJ1aWxkIGlkIG1hdGNoLgoKVG8gYWNoaWV2ZSB0aGF0IGVtYmVkIGludG8gZXZlcnkg
bGl2ZXBhdGNoIGFub3RoZXIgc2VjdGlvbiB3aXRoIGEKZGVkaWNhdGVkIGh5cGVydmlzb3IgYnVp
bGQgaWQgaW4gaXQuIEFmdGVyIHRoZSBwYXlsb2FkIGlzIGxvYWRlZCBhbmQKdGhlIC5saXZlcGF0
Y2gueGVuX2RlcGVuZHMgc2VjdGlvbiBiZWNvbWVzIGF2YWlsYWJsZSwgcGVyZm9ybSB0aGUKY2hl
Y2sgYW5kIHJlamVjdCB0aGUgcGF5bG9hZCBpZiB0aGVyZSBpcyBubyBtYXRjaC4KClNpZ25lZC1v
ZmYtYnk6IFBhd2VsIFdpZWN6b3JraWV3aWN6IDx3aXBhd2VsQGFtYXpvbi5kZT4KUmV2aWV3ZWQt
Ynk6IEFuZHJhLUlyaW5hIFBhcmFzY2hpdiA8YW5kcmFwcnNAYW1hem9uLmNvbT4KUmV2aWV3ZWQt
Ynk6IEJqb2VybiBEb2ViZWwgPGRvZWJlbEBhbWF6b24uZGU+ClJldmlld2VkLWJ5OiBFc2xhbSBF
bG5pa2V0eSA8ZWxuaWtldHlAYW1hem9uLmRlPgpSZXZpZXdlZC1ieTogTWFydGluIFBvaGxhY2sg
PG1wb2hsYWNrQGFtYXpvbi5kZT4KU2lnbmVkLW9mZi1ieTogS29ucmFkIFJ6ZXN6dXRlayBXaWxr
IDxrb25yYWQud2lsa0BvcmFjbGUuY29tPgpSZXZpZXdlZC1ieTogUm9zcyBMYWdlcndhbGwgPHJv
c3MubGFnZXJ3YWxsQGNpdHJpeC5jb20+Ci0tLQpDaGFuZ2VkIHNpbmNlIHYzOgogICogcmVuYW1l
ZCBjaGVja194ZW5fYnVpbGRfaWQoKSB0byB4ZW5fYnVpbGRfaWRfZGVwKCkKCkNoYW5nZWQgc2lu
Y2UgdjE6CiAgKiBhbHdheXMgcHJpbnQgWEVOTE9HX0VSUiBtZXNzYWdlIGZyb20gY2hlY2tfeGVu
X2J1aWxkX2lkKCkKICAqIGZpeCB0eXBvIGluIHRlc3QvbGl2ZXBhdGNoL01ha2VmaWxlCi0tLQog
LmdpdGlnbm9yZSAgICAgICAgICAgICAgICAgIHwgIDEgKwogZG9jcy9taXNjL2xpdmVwYXRjaC5w
YW5kb2MgIHwgMjggKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tCiB4ZW4vY29tbW9uL2xpdmVw
YXRjaC5jICAgICAgfCA0NyArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysKIHhlbi9pbmNsdWRlL3hlbi9saXZlcGF0Y2guaCB8ICA3ICsrKystLS0KIHhlbi90ZXN0
L2xpdmVwYXRjaC9NYWtlZmlsZSB8IDMxICsrKysrKysrKysrKysrKysrKysrKysrKystLS0tLQog
NSBmaWxlcyBjaGFuZ2VkLCA5OCBpbnNlcnRpb25zKCspLCAxNiBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS8uZ2l0aWdub3JlIGIvLmdpdGlnbm9yZQppbmRleCAzYWRhMGM0ZjBiLi4yMjNiZWRj
ZDJiIDEwMDY0NAotLS0gYS8uZ2l0aWdub3JlCisrKyBiLy5naXRpZ25vcmUKQEAgLTMxMiw2ICsz
MTIsNyBAQCB4ZW4vdGVzdC9saXZlcGF0Y2gveGVuX2J5ZV93b3JsZC5saXZlcGF0Y2gKIHhlbi90
ZXN0L2xpdmVwYXRjaC94ZW5faGVsbG9fd29ybGQubGl2ZXBhdGNoCiB4ZW4vdGVzdC9saXZlcGF0
Y2gveGVuX25vcC5saXZlcGF0Y2gKIHhlbi90ZXN0L2xpdmVwYXRjaC94ZW5fcmVwbGFjZV93b3Js
ZC5saXZlcGF0Y2gKK3hlbi90ZXN0L2xpdmVwYXRjaC94ZW5fbm9feGVuX2J1aWxkaWQubGl2ZXBh
dGNoCiB4ZW4vdG9vbHMva2NvbmZpZy8udG1wX2d0a2NoZWNrCiB4ZW4vdG9vbHMva2NvbmZpZy8u
dG1wX3F0Y2hlY2sKIHhlbi90b29scy9zeW1ib2xzCmRpZmYgLS1naXQgYS9kb2NzL21pc2MvbGl2
ZXBhdGNoLnBhbmRvYyBiL2RvY3MvbWlzYy9saXZlcGF0Y2gucGFuZG9jCmluZGV4IDZkOWY3MmY0
OWIuLmZkMWY1ZDAxMjYgMTAwNjQ0Ci0tLSBhL2RvY3MvbWlzYy9saXZlcGF0Y2gucGFuZG9jCisr
KyBiL2RvY3MvbWlzYy9saXZlcGF0Y2gucGFuZG9jCkBAIC0yNzAsNiArMjcwLDggQEAgbGlrZSB3
aGF0IHRoZSBMaW51eCBrZXJuZWwgbW9kdWxlIGxvYWRlciBkb2VzLgogVGhlIHBheWxvYWQgY29u
dGFpbnMgYXQgbGVhc3QgdGhyZWUgc2VjdGlvbnM6CiAKICAqIGAubGl2ZXBhdGNoLmZ1bmNzYCAt
IHdoaWNoIGlzIGFuIGFycmF5IG9mIGxpdmVwYXRjaF9mdW5jIHN0cnVjdHVyZXMuCisgKiBgLmxp
dmVwYXRjaC54ZW5fZGVwZW5kc2AgLSB3aGljaCBpcyBhbiBFTEYgTm90ZSB0aGF0IGRlc2NyaWJl
cyB3aGF0IFhlbgorICAgIGJ1aWxkLWlkIHRoZSBwYXlsb2FkIGRlcGVuZHMgb24uICoqTVVTVCoq
IGhhdmUgb25lLgogICogYC5saXZlcGF0Y2guZGVwZW5kc2AgLSB3aGljaCBpcyBhbiBFTEYgTm90
ZSB0aGF0IGRlc2NyaWJlcyB3aGF0IHRoZSBwYXlsb2FkCiAgICAgZGVwZW5kcyBvbi4gKipNVVNU
KiogaGF2ZSBvbmUuCiAgKiAgYC5ub3RlLmdudS5idWlsZC1pZGAgLSB0aGUgYnVpbGQtaWQgb2Yg
dGhpcyBwYXlsb2FkLiAqKk1VU1QqKiBoYXZlIG9uZS4KQEAgLTM4MywxNiArMzg1LDE2IEBAIFRo
ZSB0eXBlIGRlZmluaXRpb24gb2YgdGhlIGZ1bmN0aW9uIGFyZSBhcyBmb2xsb3c6CiAgICAgdHlw
ZWRlZiB2b2lkICgqbGl2ZXBhdGNoX2xvYWRjYWxsX3QpKHZvaWQpOwogICAgIHR5cGVkZWYgdm9p
ZCAoKmxpdmVwYXRjaF91bmxvYWRjYWxsX3QpKHZvaWQpOwogCi0jIyMgLmxpdmVwYXRjaC5kZXBl
bmRzIGFuZCAubm90ZS5nbnUuYnVpbGQtaWQKKyMjIyAubGl2ZXBhdGNoLnhlbl9kZXBlbmRzLCAu
bGl2ZXBhdGNoLmRlcGVuZHMgYW5kIC5ub3RlLmdudS5idWlsZC1pZAogCiBUbyBzdXBwb3J0IGRl
cGVuZGVuY2llcyBjaGVja2luZyBhbmQgc2FmZSBsb2FkaW5nICh0byBsb2FkIHRoZQogYXBwcm9w
aWF0ZSBwYXlsb2FkIGFnYWluc3QgdGhlIHJpZ2h0IGh5cGVydmlzb3IpIHRoZXJlIGlzIGEgbmVl
ZAogdG8gZW1iYmVkIGFuIGJ1aWxkLWlkIGRlcGVuZGVuY3kuCiAKLVRoaXMgaXMgZG9uZSBieSB0
aGUgcGF5bG9hZCBjb250YWluaW5nIGFuIHNlY3Rpb24gYC5saXZlcGF0Y2guZGVwZW5kc2AKLXdo
aWNoIGZvbGxvd3MgdGhlIGZvcm1hdCBvZiBhbiBFTEYgTm90ZS4gVGhlIGNvbnRlbnRzIG9mIHRo
aXMKLShuYW1lLCBhbmQgZGVzY3JpcHRpb24pIGFyZSBzcGVjaWZpYyB0byB0aGUgbGlua2VyIHV0
aWxpemVkIHRvCi1idWlsZCB0aGUgaHlwZXZpc29yIGFuZCBwYXlsb2FkLgorVGhpcyBpcyBkb25l
IGJ5IHRoZSBwYXlsb2FkIGNvbnRhaW5pbmcgc2VjdGlvbnMgYC5saXZlcGF0Y2gueGVuX2RlcGVu
ZHNgCithbmQgYC5saXZlcGF0Y2guZGVwZW5kc2Agd2hpY2ggZm9sbG93IHRoZSBmb3JtYXQgb2Yg
YW4gRUxGIE5vdGUuCitUaGUgY29udGVudHMgb2YgdGhlc2UgKG5hbWUsIGFuZCBkZXNjcmlwdGlv
bikgYXJlIHNwZWNpZmljIHRvIHRoZSBsaW5rZXIKK3V0aWxpemVkIHRvIGJ1aWxkIHRoZSBoeXBl
dmlzb3IgYW5kIHBheWxvYWQuCiAKIElmIEdOVSBsaW5rZXIgaXMgdXNlZCB0aGVuIHRoZSBuYW1l
IGlzIGBHTlVgIGFuZCB0aGUgZGVzY3JpcHRpb24KIGlzIGEgTlRfR05VX0JVSUxEX0lEIHR5cGUg
SUQuIFRoZSBkZXNjcmlwdGlvbiBjYW4gYmUgYW4gU0hBMQpAQCAtNDAwLDYgKzQwMiwxMyBAQCBj
aGVja3N1bSwgTUQ1IGNoZWNrc3VtIG9yIGFueSB1bmlxdWUgdmFsdWUuCiAKIFRoZSBzaXplIG9m
IHRoZXNlIHN0cnVjdHVyZXMgdmFyaWVzIHdpdGggdGhlIGAtLWJ1aWxkLWlkYCBsaW5rZXIgb3B0
aW9uLgogCitUaGVyZSBhcmUgdHdvIGtpbmRzIG9mIGJ1aWxkLWlkIGRlcGVuZGVuY2llczoKKwor
ICogWGVuIGJ1aWxkLWlkIGRlcGVuZGVuY3kgKC5saXZlcGF0Y2gueGVuX2RlcGVuZHMgc2VjdGlv
bikKKyAqIHByZXZpb3VzIHBheWxvYWQgYnVpbGQtaWQgZGVwZW5kZW5jeSAoLmxpdmVwYXRjaC5k
ZXBlbmRzIHNlY3Rpb24pCisKK1NlZSAiTGl2ZSBwYXRjaCBpbnRlcmRlcGVuZGVuY2llcyIgZm9y
IG1vcmUgaW5mb3JtYXRpb24uCisKICMjIEh5cGVyY2FsbHMKIAogV2Ugd2lsbCBlbXBsb3kgdGhl
IHN1YiBvcGVyYXRpb25zIG9mIHRoZSBzeXN0ZW0gbWFuYWdlbWVudCBoeXBlcmNhbGwgKHN5c2N0
bCkuCkBAIC04OTQsMTMgKzkwMywxNiBAQCBidXQgaXMgbW9yZSBjb21wbGV4IHRvIGltcGxlbWVu
dC4KIFRoZSBzZWNvbmQgb3B0aW9uIHdoaWNoIHJlcXVpcmVzIGFuIGJ1aWxkLWlkIG9mIHRoZSBo
eXBlcnZpc29yCiBpcyBpbXBsZW1lbnRlZCBpbiB0aGUgWGVuIGh5cGVydmlzb3IuCiAKLVNwZWNp
ZmljYWxseSBlYWNoIHBheWxvYWQgaGFzIHR3byBidWlsZC1pZCBFTEYgbm90ZXM6CitTcGVjaWZp
Y2FsbHkgZWFjaCBwYXlsb2FkIGhhcyB0aHJlZSBidWlsZC1pZCBFTEYgbm90ZXM6CiAgKiBUaGUg
YnVpbGQtaWQgb2YgdGhlIHBheWxvYWQgaXRzZWxmIChnZW5lcmF0ZWQgdmlhIC0tYnVpbGQtaWQp
LgorICogVGhlIGJ1aWxkLWlkIG9mIHRoZSBYZW4gaHlwZXJ2aXNvciBpdCBkZXBlbmRzIG9uIChl
eHRyYWN0ZWQgZnJvbSB0aGUKKyAgIGh5cGVydmlzb3IgZHVyaW5nIGJ1aWxkIHRpbWUpLgogICog
VGhlIGJ1aWxkLWlkIG9mIHRoZSBwYXlsb2FkIGl0IGRlcGVuZHMgb24gKGV4dHJhY3RlZCBmcm9t
IHRoZQogICAgdGhlIHByZXZpb3VzIHBheWxvYWQgb3IgaHlwZXJ2aXNvciBkdXJpbmcgYnVpbGQg
dGltZSkuCiAKLVRoaXMgbWVhbnMgdGhhdCB0aGUgdmVyeSBmaXJzdCBwYXlsb2FkIGRlcGVuZHMg
b24gdGhlIGh5cGVydmlzb3IKLWJ1aWxkLWlkLgorVGhpcyBtZWFucyB0aGF0IGV2ZXJ5IHBheWxv
YWQgZGVwZW5kcyBvbiB0aGUgaHlwZXJ2aXNvciBidWlsZC1pZCBhbmQgb24KK3RoZSBidWlsZC1p
ZCBvZiB0aGUgcHJldmlvdXMgcGF5bG9hZCBpbiB0aGUgc3RhY2suCitUaGUgdmVyeSBmaXJzdCBw
YXlsb2FkIGRlcGVuZHMgb24gdGhlIGh5cGVydmlzb3IgYnVpbGQtaWQgb25seS4KIAogIyBOb3Qg
WWV0IERvbmUKIApkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9saXZlcGF0Y2guYyBiL3hlbi9jb21t
b24vbGl2ZXBhdGNoLmMKaW5kZXggN2NhYTMwYzIwMi4uMTYzYzljNzllYSAxMDA2NDQKLS0tIGEv
eGVuL2NvbW1vbi9saXZlcGF0Y2guYworKysgYi94ZW4vY29tbW9uL2xpdmVwYXRjaC5jCkBAIC03
NCw2ICs3NCw3IEBAIHN0cnVjdCBwYXlsb2FkIHsKICAgICB1bnNpZ25lZCBpbnQgbnN5bXM7ICAg
ICAgICAgICAgICAgICAgLyogTnIgb2YgZW50cmllcyBpbiAuc3RydGFiIGFuZCBzeW1ib2xzLiAq
LwogICAgIHN0cnVjdCBsaXZlcGF0Y2hfYnVpbGRfaWQgaWQ7ICAgICAgICAvKiBFTEZOT1RFX0RF
U0MoLm5vdGUuZ251LmJ1aWxkLWlkKSBvZiB0aGUgcGF5bG9hZC4gKi8KICAgICBzdHJ1Y3QgbGl2
ZXBhdGNoX2J1aWxkX2lkIGRlcDsgICAgICAgLyogRUxGTk9URV9ERVNDKC5saXZlcGF0Y2guZGVw
ZW5kcykuICovCisgICAgc3RydWN0IGxpdmVwYXRjaF9idWlsZF9pZCB4ZW5fZGVwOyAgIC8qIEVM
Rk5PVEVfREVTQygubGl2ZXBhdGNoLnhlbl9kZXBlbmRzKS4gKi8KICAgICBsaXZlcGF0Y2hfbG9h
ZGNhbGxfdCAqY29uc3QgKmxvYWRfZnVuY3M7ICAgLyogVGhlIGFycmF5IG9mIGZ1bmNzIHRvIGNh
bGwgYWZ0ZXIgKi8KICAgICBsaXZlcGF0Y2hfdW5sb2FkY2FsbF90ICpjb25zdCAqdW5sb2FkX2Z1
bmNzOy8qIGxvYWQgYW5kIHVubG9hZCBvZiB0aGUgcGF5bG9hZC4gKi8KICAgICB1bnNpZ25lZCBp
bnQgbl9sb2FkX2Z1bmNzOyAgICAgICAgICAgLyogTnIgb2YgdGhlIGZ1bmNzIHRvIGxvYWQgYW5k
IGV4ZWN1dGUuICovCkBAIC00NzYsMTEgKzQ3NywzNCBAQCBzdGF0aWMgYm9vbCBzZWN0aW9uX29r
KGNvbnN0IHN0cnVjdCBsaXZlcGF0Y2hfZWxmICplbGYsCiAgICAgcmV0dXJuIHRydWU7CiB9CiAK
K3N0YXRpYyBpbnQgeGVuX2J1aWxkX2lkX2RlcChjb25zdCBzdHJ1Y3QgcGF5bG9hZCAqcGF5bG9h
ZCkKK3sKKyAgICBjb25zdCB2b2lkICppZCA9IE5VTEw7CisgICAgdW5zaWduZWQgaW50IGxlbiA9
IDA7CisgICAgaW50IHJjOworCisgICAgQVNTRVJUKHBheWxvYWQtPnhlbl9kZXAubGVuKTsKKyAg
ICBBU1NFUlQocGF5bG9hZC0+eGVuX2RlcC5wKTsKKworICAgIHJjID0geGVuX2J1aWxkX2lkKCZp
ZCwgJmxlbik7CisgICAgaWYgKCByYyApCisgICAgICAgIHJldHVybiByYzsKKworICAgIGlmICgg
cGF5bG9hZC0+eGVuX2RlcC5sZW4gIT0gbGVuIHx8IG1lbWNtcChpZCwgcGF5bG9hZC0+eGVuX2Rl
cC5wLCBsZW4pICkgeworICAgICAgICBwcmludGsoWEVOTE9HX0VSUiBMSVZFUEFUQ0ggIiVzOiBj
aGVjayBhZ2FpbnN0IGh5cGVydmlzb3IgYnVpbGQtaWQgZmFpbGVkXG4iLAorICAgICAgICAgICAg
ICAgcGF5bG9hZC0+bmFtZSk7CisgICAgICAgIHJldHVybiAtRUlOVkFMOworICAgIH0KKworICAg
IHJldHVybiAwOworfQorCiBzdGF0aWMgaW50IGNoZWNrX3NwZWNpYWxfc2VjdGlvbnMoY29uc3Qg
c3RydWN0IGxpdmVwYXRjaF9lbGYgKmVsZikKIHsKICAgICB1bnNpZ25lZCBpbnQgaTsKICAgICBz
dGF0aWMgY29uc3QgY2hhciAqY29uc3QgbmFtZXNbXSA9IHsgRUxGX0xJVkVQQVRDSF9GVU5DLAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFTEZfTElWRVBBVENIX0RF
UEVORFMsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVMRl9MSVZF
UEFUQ0hfWEVOX0RFUEVORFMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIEVMRl9CVUlMRF9JRF9OT1RFfTsKICAgICBERUNMQVJFX0JJVE1BUChmb3VuZCwgQVJSQVlf
U0laRShuYW1lcykpID0geyAwIH07CiAKQEAgLTYzMiw2ICs2NTYsMjIgQEAgc3RhdGljIGludCBw
cmVwYXJlX3BheWxvYWQoc3RydWN0IHBheWxvYWQgKnBheWxvYWQsCiAgICAgICAgICAgICByZXR1
cm4gLUVJTlZBTDsKICAgICB9CiAKKyAgICBzZWMgPSBsaXZlcGF0Y2hfZWxmX3NlY19ieV9uYW1l
KGVsZiwgRUxGX0xJVkVQQVRDSF9YRU5fREVQRU5EUyk7CisgICAgaWYgKCBzZWMgKQorICAgIHsK
KyAgICAgICAgbiA9IHNlYy0+bG9hZF9hZGRyOworCisgICAgICAgIGlmICggc2VjLT5zZWMtPnNo
X3NpemUgPD0gc2l6ZW9mKCpuKSApCisgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKKworICAg
ICAgICBpZiAoIHhlbl9idWlsZF9pZF9jaGVjayhuLCBzZWMtPnNlYy0+c2hfc2l6ZSwKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgJnBheWxvYWQtPnhlbl9kZXAucCwgJnBheWxvYWQt
Pnhlbl9kZXAubGVuKSApCisgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKKworICAgICAgICBp
ZiAoICFwYXlsb2FkLT54ZW5fZGVwLmxlbiB8fCAhcGF5bG9hZC0+eGVuX2RlcC5wICkKKyAgICAg
ICAgICAgIHJldHVybiAtRUlOVkFMOworICAgIH0KKwogICAgIC8qIFNldHVwIHRoZSB2aXJ0dWFs
IHJlZ2lvbiB3aXRoIHByb3BlciBkYXRhLiAqLwogICAgIHJlZ2lvbiA9ICZwYXlsb2FkLT5yZWdp
b247CiAKQEAgLTg4Miw2ICs5MjIsMTAgQEAgc3RhdGljIGludCBsb2FkX3BheWxvYWRfZGF0YShz
dHJ1Y3QgcGF5bG9hZCAqcGF5bG9hZCwgdm9pZCAqcmF3LCBzaXplX3QgbGVuKQogICAgIGlmICgg
cmMgKQogICAgICAgICBnb3RvIG91dDsKIAorICAgIHJjID0geGVuX2J1aWxkX2lkX2RlcChwYXls
b2FkKTsKKyAgICBpZiAoIHJjICkKKyAgICAgICAgZ290byBvdXQ7CisKICAgICByYyA9IGJ1aWxk
X3N5bWJvbF90YWJsZShwYXlsb2FkLCAmZWxmKTsKICAgICBpZiAoIHJjICkKICAgICAgICAgZ290
byBvdXQ7CkBAIC0xNjU1LDYgKzE2OTksOSBAQCBzdGF0aWMgdm9pZCBsaXZlcGF0Y2hfcHJpbnRh
bGwodW5zaWduZWQgY2hhciBrZXkpCiAKICAgICAgICAgaWYgKCBkYXRhLT5kZXAubGVuICkKICAg
ICAgICAgICAgIHByaW50aygiZGVwZW5kLW9uPSUqcGhOXG4iLCBkYXRhLT5kZXAubGVuLCBkYXRh
LT5kZXAucCk7CisKKyAgICAgICAgaWYgKCBkYXRhLT54ZW5fZGVwLmxlbiApCisgICAgICAgICAg
ICBwcmludGsoImRlcGVuZC1vbi14ZW49JSpwaE5cbiIsIGRhdGEtPnhlbl9kZXAubGVuLCBkYXRh
LT54ZW5fZGVwLnApOwogICAgIH0KIAogICAgIHNwaW5fdW5sb2NrKCZwYXlsb2FkX2xvY2spOwpk
aWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL2xpdmVwYXRjaC5oIGIveGVuL2luY2x1ZGUveGVu
L2xpdmVwYXRjaC5oCmluZGV4IDFiMTgxN2NhMGQuLmVkOTk3YWE0Y2MgMTAwNjQ0Ci0tLSBhL3hl
bi9pbmNsdWRlL3hlbi9saXZlcGF0Y2guaAorKysgYi94ZW4vaW5jbHVkZS94ZW4vbGl2ZXBhdGNo
LmgKQEAgLTI5LDkgKzI5LDEwIEBAIHN0cnVjdCB4ZW5fc3lzY3RsX2xpdmVwYXRjaF9vcDsKIC8q
IENvbnZlbmllbmNlIGRlZmluZSBmb3IgcHJpbnRrLiAqLwogI2RlZmluZSBMSVZFUEFUQ0ggICAg
ICAgICAgICAgImxpdmVwYXRjaDogIgogLyogRUxGIHBheWxvYWQgc3BlY2lhbCBzZWN0aW9uIG5h
bWVzLiAqLwotI2RlZmluZSBFTEZfTElWRVBBVENIX0ZVTkMgICAgIi5saXZlcGF0Y2guZnVuY3Mi
Ci0jZGVmaW5lIEVMRl9MSVZFUEFUQ0hfREVQRU5EUyAiLmxpdmVwYXRjaC5kZXBlbmRzIgotI2Rl
ZmluZSBFTEZfQlVJTERfSURfTk9URSAgICAgICIubm90ZS5nbnUuYnVpbGQtaWQiCisjZGVmaW5l
IEVMRl9MSVZFUEFUQ0hfRlVOQyAgICAgICAgIi5saXZlcGF0Y2guZnVuY3MiCisjZGVmaW5lIEVM
Rl9MSVZFUEFUQ0hfREVQRU5EUyAgICAgIi5saXZlcGF0Y2guZGVwZW5kcyIKKyNkZWZpbmUgRUxG
X0xJVkVQQVRDSF9YRU5fREVQRU5EUyAiLmxpdmVwYXRjaC54ZW5fZGVwZW5kcyIKKyNkZWZpbmUg
RUxGX0JVSUxEX0lEX05PVEUgICAgICAgICAiLm5vdGUuZ251LmJ1aWxkLWlkIgogLyogQXJiaXRy
YXJ5IGxpbWl0IGZvciBwYXlsb2FkIHNpemUgYW5kIC5ic3Mgc2VjdGlvbiBzaXplLiAqLwogI2Rl
ZmluZSBMSVZFUEFUQ0hfTUFYX1NJWkUgICAgIE1CKDIpCiAKZGlmZiAtLWdpdCBhL3hlbi90ZXN0
L2xpdmVwYXRjaC9NYWtlZmlsZSBiL3hlbi90ZXN0L2xpdmVwYXRjaC9NYWtlZmlsZQppbmRleCA2
ODMxMzgzZGIxLi45MzhhZWUxN2VjIDEwMDY0NAotLS0gYS94ZW4vdGVzdC9saXZlcGF0Y2gvTWFr
ZWZpbGUKKysrIGIveGVuL3Rlc3QvbGl2ZXBhdGNoL01ha2VmaWxlCkBAIC0xOSwxMSArMTksMTMg
QEAgTElWRVBBVENIIDo9IHhlbl9oZWxsb193b3JsZC5saXZlcGF0Y2gKIExJVkVQQVRDSF9CWUUg
Oj0geGVuX2J5ZV93b3JsZC5saXZlcGF0Y2gKIExJVkVQQVRDSF9SRVBMQUNFIDo9IHhlbl9yZXBs
YWNlX3dvcmxkLmxpdmVwYXRjaAogTElWRVBBVENIX05PUCA6PSB4ZW5fbm9wLmxpdmVwYXRjaAor
TElWRVBBVENIX05PX1hFTl9CVUlMRElEIDo9IHhlbl9ub194ZW5fYnVpbGRpZC5saXZlcGF0Y2gK
IAogTElWRVBBVENIRVMgKz0gJChMSVZFUEFUQ0gpCiBMSVZFUEFUQ0hFUyArPSAkKExJVkVQQVRD
SF9CWUUpCiBMSVZFUEFUQ0hFUyArPSAkKExJVkVQQVRDSF9SRVBMQUNFKQogTElWRVBBVENIRVMg
Kz0gJChMSVZFUEFUQ0hfTk9QKQorTElWRVBBVENIRVMgKz0gJChMSVZFUEFUQ0hfTk9fWEVOX0JV
SUxESUQpCiAKIExJVkVQQVRDSF9ERUJVR19ESVIgPz0gJChERUJVR19ESVIpL3hlbi1saXZlcGF0
Y2gKIApAQCAtNTksNyArNjEsNyBAQCBjb25maWcuaDogeGVuX2hlbGxvX3dvcmxkX2Z1bmMubwog
eGVuX2hlbGxvX3dvcmxkLm86IGNvbmZpZy5oCiAKIC5QSE9OWTogJChMSVZFUEFUQ0gpCi0kKExJ
VkVQQVRDSCk6IHhlbl9oZWxsb193b3JsZF9mdW5jLm8geGVuX2hlbGxvX3dvcmxkLm8gbm90ZS5v
CiskKExJVkVQQVRDSCk6IHhlbl9oZWxsb193b3JsZF9mdW5jLm8geGVuX2hlbGxvX3dvcmxkLm8g
bm90ZS5vIHhlbl9ub3RlLm8KIAkkKExEKSAkKExERkxBR1MpICQoYnVpbGRfaWRfbGlua2VyKSAt
ciAtbyAkKExJVkVQQVRDSCkgJF4KIAogIwpAQCAtNzgsNiArODAsMTcgQEAgbm90ZS5vOgogCQkg
ICAtLXJlbmFtZS1zZWN0aW9uPS5kYXRhPS5saXZlcGF0Y2guZGVwZW5kcyxhbGxvYyxsb2FkLHJl
YWRvbmx5LGRhdGEsY29udGVudHMgLVMgJEAuYmluICRACiAJcm0gLWYgJEAuYmluCiAKKyMKKyMg
QXBwZW5kIC5saXZlcGF0Y2gueGVuX2RlcGVuZHMgc2VjdGlvbgorIyB3aXRoIFhlbiBidWlsZC1p
ZCBkZXJpdmVkIGZyb20geGVuLXN5bXMuCisjCisuUEhPTlk6IHhlbl9ub3RlLm8KK3hlbl9ub3Rl
Lm86CisJJChPQkpDT1BZKSAtTyBiaW5hcnkgLS1vbmx5LXNlY3Rpb249Lm5vdGUuZ251LmJ1aWxk
LWlkICQoQkFTRURJUikveGVuLXN5bXMgJEAuYmluCisJJChPQkpDT1BZKSAkKE9CSkNPUFlfTUFH
SUMpIFwKKwkJICAgLS1yZW5hbWUtc2VjdGlvbj0uZGF0YT0ubGl2ZXBhdGNoLnhlbl9kZXBlbmRz
LGFsbG9jLGxvYWQscmVhZG9ubHksZGF0YSxjb250ZW50cyAtUyAkQC5iaW4gJEAKKwlybSAtZiAk
QC5iaW4KKwogIwogIyBFeHRyYWN0IHRoZSBidWlsZC1pZCBvZiB0aGUgeGVuX2hlbGxvX3dvcmxk
LmxpdmVwYXRjaAogIyAod2hpY2ggeGVuX2J5ZV93b3JsZCB3aWxsIGRlcGVuZCBvbikuCkBAIC05
MiwyMCArMTA1LDI4IEBAIGhlbGxvX3dvcmxkX25vdGUubzogJChMSVZFUEFUQ0gpCiB4ZW5fYnll
X3dvcmxkLm86IGNvbmZpZy5oCiAKIC5QSE9OWTogJChMSVZFUEFUQ0hfQllFKQotJChMSVZFUEFU
Q0hfQllFKTogeGVuX2J5ZV93b3JsZF9mdW5jLm8geGVuX2J5ZV93b3JsZC5vIGhlbGxvX3dvcmxk
X25vdGUubworJChMSVZFUEFUQ0hfQllFKTogeGVuX2J5ZV93b3JsZF9mdW5jLm8geGVuX2J5ZV93
b3JsZC5vIGhlbGxvX3dvcmxkX25vdGUubyB4ZW5fbm90ZS5vCiAJJChMRCkgJChMREZMQUdTKSAk
KGJ1aWxkX2lkX2xpbmtlcikgLXIgLW8gJChMSVZFUEFUQ0hfQllFKSAkXgogCiB4ZW5fcmVwbGFj
ZV93b3JsZC5vOiBjb25maWcuaAogCiAuUEhPTlk6ICQoTElWRVBBVENIX1JFUExBQ0UpCi0kKExJ
VkVQQVRDSF9SRVBMQUNFKTogeGVuX3JlcGxhY2Vfd29ybGRfZnVuYy5vIHhlbl9yZXBsYWNlX3dv
cmxkLm8gbm90ZS5vCiskKExJVkVQQVRDSF9SRVBMQUNFKTogeGVuX3JlcGxhY2Vfd29ybGRfZnVu
Yy5vIHhlbl9yZXBsYWNlX3dvcmxkLm8gbm90ZS5vIHhlbl9ub3RlLm8KIAkkKExEKSAkKExERkxB
R1MpICQoYnVpbGRfaWRfbGlua2VyKSAtciAtbyAkKExJVkVQQVRDSF9SRVBMQUNFKSAkXgogCiB4
ZW5fbm9wLm86IGNvbmZpZy5oCiAKIC5QSE9OWTogJChMSVZFUEFUQ0hfTk9QKQotJChMSVZFUEFU
Q0hfTk9QKTogeGVuX25vcC5vIG5vdGUubworJChMSVZFUEFUQ0hfTk9QKTogeGVuX25vcC5vIG5v
dGUubyB4ZW5fbm90ZS5vCiAJJChMRCkgJChMREZMQUdTKSAkKGJ1aWxkX2lkX2xpbmtlcikgLXIg
LW8gJChMSVZFUEFUQ0hfTk9QKSAkXgogCisjIFRoaXMgb25lIGFsd2F5cyBmYWlscyB1cG9uIHVw
bG9hZCwgYmVjYXVzZSBpdCBkZWxpYmVyYXRlbHkKKyMgZG9lcyBub3QgaGF2ZSBhIC5saXZlcGF0
Y2gueGVuX2RlcGVuZHMgKHhlbl9ub3RlLm8pIHNlY3Rpb24uCit4ZW5fbm9feGVuX2J1aWxkaWQu
bzogY29uZmlnLmgKKworLlBIT05ZOiAkKExJVkVQQVRDSF9OT19YRU5fQlVJTERJRCkKKyQoTElW
RVBBVENIX05PX1hFTl9CVUlMRElEKTogeGVuX25vcC5vIG5vdGUubworCSQoTEQpICQoTERGTEFH
UykgJChidWlsZF9pZF9saW5rZXIpIC1yIC1vICQoTElWRVBBVENIX05PX1hFTl9CVUlMRElEKSAk
XgorCiAuUEhPTlk6IGxpdmVwYXRjaAotbGl2ZXBhdGNoOiAkKExJVkVQQVRDSCkgJChMSVZFUEFU
Q0hfQllFKSAkKExJVkVQQVRDSF9SRVBMQUNFKSAkKExJVkVQQVRDSF9OT1ApCitsaXZlcGF0Y2g6
ICQoTElWRVBBVENIKSAkKExJVkVQQVRDSF9CWUUpICQoTElWRVBBVENIX1JFUExBQ0UpICQoTElW
RVBBVENIX05PUCkgJChMSVZFUEFUQ0hfTk9fWEVOX0JVSUxESUQpCi0tIAoyLjE2LjUKCgoKCkFt
YXpvbiBEZXZlbG9wbWVudCBDZW50ZXIgR2VybWFueSBHbWJICktyYXVzZW5zdHIuIDM4CjEwMTE3
IEJlcmxpbgpHZXNjaGFlZnRzZnVlaHJ1bmc6IENocmlzdGlhbiBTY2hsYWVnZXIsIFJhbGYgSGVy
YnJpY2gKRWluZ2V0cmFnZW4gYW0gQW10c2dlcmljaHQgQ2hhcmxvdHRlbmJ1cmcgdW50ZXIgSFJC
IDE0OTE3MyBCClNpdHo6IEJlcmxpbgpVc3QtSUQ6IERFIDI4OSAyMzcgODc5CgoKCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGlu
ZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnBy
b2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

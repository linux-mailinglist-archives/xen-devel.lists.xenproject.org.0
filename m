Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 0BA2D256E1
	for <lists+xen-devel@lfdr.de>; Tue, 21 May 2019 19:41:03 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hT8i6-0007ZG-Oe; Tue, 21 May 2019 17:37:58 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=zIO+=TV=gmail.com=olekstysh@srs-us1.protection.inumbo.net>)
 id 1hT8i5-0007Z3-F4
 for xen-devel@lists.xenproject.org; Tue, 21 May 2019 17:37:57 +0000
X-Inumbo-ID: 2a6c73fb-7bef-11e9-8980-bc764e045a96
Received: from mail-lj1-x244.google.com (unknown [2a00:1450:4864:20::244])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 2a6c73fb-7bef-11e9-8980-bc764e045a96;
 Tue, 21 May 2019 17:37:55 +0000 (UTC)
Received: by mail-lj1-x244.google.com with SMTP id 14so589432ljj.5
 for <xen-devel@lists.xenproject.org>; Tue, 21 May 2019 10:37:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=8leobNo8c5zJn8nea1I3vKHELw8YOlIeOp8aiTKA0Y4=;
 b=QN+b2YPpag8Z1tfdsbHtSEYxbm+SV0AUNM0CWP+HbsBS7P3b6khyAK5iGQdHJXYzO/
 3nVLZsyl0YL5TSOnw6ca2tQzac97J0RqbvwcOnt0LcM3J5uxvBiSuwgJ7kFj3EbpbInr
 Co+wc1pQ1ie33qBJqCfMj63BlkepeDyRtO12TPXKv5cbMsbvj6522nddF02kk0CNGMLN
 K0KmZ+rXjJPynjoTan8mMbrMxCinVtUQWITB9RyoSCmEqxcdCJPKgbPo2owUCK1cLPZa
 ACe8zl9V9iVPCh2AQuDGe74KNZDDAnUS/A9BNqEPcKq4ZmC1YichQDJPZimPHdstghlE
 hqPw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=8leobNo8c5zJn8nea1I3vKHELw8YOlIeOp8aiTKA0Y4=;
 b=p2zWhntkvxVRLOiNKXDerhJUKTTLyj1SjGiCaNMIM8KYIYnfjdvuMj/pTD+MSWuyFK
 dUBOAQsB1Wtjxn6p2JhjrnZV4mxC/gTIZNd2ux0TS0OqhyqB3GQSm0hsVk713dymhNpI
 SmRZ9bWmZSnv7/1xa0xwzA2lEcIl3BRyMXOgbBoKxD0/knZL28tiMhTwZSdnYJyCa0ni
 2CeRtuq4PtRoNwQJtfL+p3DZgh6rj6zwGHSRJiSjYUGVH60WeEz+g9RmxqcsCZeRbpyp
 87vPjnA2XbbjzzGfNFMk2e2uynCLAfjycq7nRL62i1i1607a6BJRNsseM5FrpEd88udO
 LSyQ==
X-Gm-Message-State: APjAAAXBxOdhfT6vPUTbh3+Rm8dfTajT2EjWChj3FPCeFoqgIvF2xU1e
 HqIX+wl4BWqhdlRdFMhbzmKWmwfnLB0=
X-Google-Smtp-Source: APXvYqz0NpZ5kbWUvh/STWlpfeuve8l+qwDnEVqqHJRQ2fBYdHSUxflMTDO3eVvKfBqbsrj+IJJClA==
X-Received: by 2002:a2e:81cf:: with SMTP id s15mr41552994ljg.193.1558460274285; 
 Tue, 21 May 2019 10:37:54 -0700 (PDT)
Received: from otyshchenko.kyiv.epam.com (ll-74.141.223.85.sovam.net.ua.
 [85.223.141.74])
 by smtp.gmail.com with ESMTPSA id w19sm4827807lfk.56.2019.05.21.10.37.53
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
 Tue, 21 May 2019 10:37:53 -0700 (PDT)
From: Oleksandr Tyshchenko <olekstysh@gmail.com>
To: xen-devel@lists.xenproject.org
Date: Tue, 21 May 2019 20:37:34 +0300
Message-Id: <1558460254-7127-3-git-send-email-olekstysh@gmail.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1558460254-7127-1-git-send-email-olekstysh@gmail.com>
References: <1558460254-7127-1-git-send-email-olekstysh@gmail.com>
Subject: [Xen-devel] [PATCH V1 2/2] xen/device-tree: Add ability to handle
 nodes with interrupts-extended prop
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Oleksandr Tyshchenko <oleksandr_tyshchenko@epam.com>, julien.grall@arm.com,
 sstabellini@kernel.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogT2xla3NhbmRyIFR5c2hjaGVua28gPG9sZWtzYW5kcl90eXNoY2hlbmtvQGVwYW0uY29t
PgoKVGhlICJpbnRlcnJ1cHRzLWV4dGVuZGVkIiBwcm9wZXJ0eSBpcyBhIHNwZWNpYWwgZm9ybSBm
b3IgdXNlIHdoZW4KYSBub2RlIG5lZWRzIHRvIHJlZmVyZW5jZSBtdWx0aXBsZSBpbnRlcnJ1cHQg
cGFyZW50cy4KCkFjY29yZGluZyB0byB0aGU6CkxpbnV4L0RvY3VtZW50YXRpb24vZGV2aWNldHJl
ZS9iaW5kaW5ncy9pbnRlcnJ1cHQtY29udHJvbGxlci9pbnRlcnJ1cHRzLnR4dAoKQnV0LCB0aGVy
ZSBhcmUgY2FzZXMgd2hlbiAiaW50ZXJydXB0cy1leHRlbmRlZCIgcHJvcGVydHkgaXMgdXNlZCBm
b3IKIm91dHNpZGUgL3NvYyBub2RlIiB3aXRoIGEgc2luZ2xlIGludGVycnVwdCBwYXJlbnQgYXMg
YW4gZXF1aXZhbGVudCBvZgpwYWlycyAoImludGVycnVwdC1wYXJlbnQiICsgImludGVycnVwdHMi
KS4KClRoZSBnb29kIGV4YW1wbGUgaGVyZSBpcyBBUkNIIHRpbWVyIG5vZGUgZm9yIFItQ2FyIEdl
bjMvR2VuMiBmYW1pbHksCndoaWNoIGlzIG1hbmRhdG9yeSBkZXZpY2UgZm9yIFhlbiB1c2FnZSBv
biBBUk0uIEFuZCB3aXRob3V0IGFiaWxpdHkKdG8gaGFuZGxlIHN1Y2ggbm9kZXMsIFhlbiBmYWls
cyB0byBvcGVyYXRlLgoKU28sIHRoaXMgcGF0Y2ggYWRkcyByZXF1aXJlZCBzdXBwb3J0IGZvciBY
ZW4gdG8gYmUgYWJsZSB0byBoYW5kbGUKbm9kZXMgd2l0aCB0aGF0IHByb3BlcnR5LgoKU2lnbmVk
LW9mZi1ieTogT2xla3NhbmRyIFR5c2hjaGVua28gPG9sZWtzYW5kcl90eXNoY2hlbmtvQGVwYW0u
Y29tPgoKLS0tCiAgICBDaGFuZ2VzIFJGQyAtPiBWMToKICAgICAgICAtIEV4cGxhaW4gaW4gdGhl
IGNvbW1pdCBtZXNzYWdlIHJlZ2FyZGluZyBwcm9wZXJ0eSB1c2FnZSwgYWRkIGEgbGluawogICAg
ICAgICAgdG8gdGhlIGJpbmRpbmdzLgogICAgICAgIC0gRG9uJ3QgdHJ5IHRvIGxvb2sgZm9yICJp
bnRlcnJ1cHRzIiBwcm9wZXJ0eSBpZiAiaW50ZXJydXB0cy1leHRlbmRlZCIKICAgICAgICAgIHBy
b3BlcnR5IGlzIHByZXNlbnQsIGJ1dCBkb2Vzbid0IGNvbnRhaW4gYW55IGludGVycnVwdHMKICAg
ICAgICAgIChkdF9jb3VudF9waGFuZGxlX3dpdGhfYXJncyByZXR1cm5zIDApLgogICAgICAgIC0g
QWRkIG1lc3NhZ2VzIHRvIHRlbGwgd2hpY2ggcHJvcGVydHkgaXMgdXNlZC4KLS0tCiB4ZW4vY29t
bW9uL2RldmljZV90cmVlLmMgfCAzNiArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKyst
LS0KIDEgZmlsZSBjaGFuZ2VkLCAzMyBpbnNlcnRpb25zKCspLCAzIGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL3hlbi9jb21tb24vZGV2aWNlX3RyZWUuYyBiL3hlbi9jb21tb24vZGV2aWNlX3Ry
ZWUuYwppbmRleCA2NTg2MmI1Li5lMTA3YzZmIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL2Rldmlj
ZV90cmVlLmMKKysrIGIveGVuL2NvbW1vbi9kZXZpY2VfdHJlZS5jCkBAIC05ODcsMTUgKzk4Nywy
NyBAQCB1bnNpZ25lZCBpbnQgZHRfbnVtYmVyX29mX2lycShjb25zdCBzdHJ1Y3QgZHRfZGV2aWNl
X25vZGUgKmRldmljZSkKICAgICBjb25zdCBzdHJ1Y3QgZHRfZGV2aWNlX25vZGUgKnA7CiAgICAg
Y29uc3QgX19iZTMyICppbnRzcGVjLCAqdG1wOwogICAgIHUzMiBpbnRzaXplLCBpbnRsZW47Cisg
ICAgaW50IGludG51bTsKIAogICAgIGR0X2RwcmludGsoImR0X2lycV9udW1iZXI6IGRldj0lc1xu
IiwgZGV2aWNlLT5mdWxsX25hbWUpOwogCisgICAgLyogVHJ5IHRoZSBuZXctc3R5bGUgaW50ZXJy
dXB0cy1leHRlbmRlZCBmaXJzdCAqLworICAgIGludG51bSA9IGR0X2NvdW50X3BoYW5kbGVfd2l0
aF9hcmdzKGRldmljZSwgImludGVycnVwdHMtZXh0ZW5kZWQiLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICIjaW50ZXJydXB0LWNlbGxzIik7CisgICAgaWYgKCBpbnRu
dW0gPj0gMCApCisgICAgeworICAgICAgICBkdF9kcHJpbnRrKCIgdXNpbmcgJ2ludGVycnVwdHMt
ZXh0ZW5kZWQnIHByb3BlcnR5XG4iKTsKKyAgICAgICAgZHRfZHByaW50aygiIGludG51bT0lZFxu
IiwgaW50bnVtKTsKKyAgICAgICAgcmV0dXJuIGludG51bTsKKyAgICB9CisKICAgICAvKiBHZXQg
dGhlIGludGVycnVwdHMgcHJvcGVydHkgKi8KICAgICBpbnRzcGVjID0gZHRfZ2V0X3Byb3BlcnR5
KGRldmljZSwgImludGVycnVwdHMiLCAmaW50bGVuKTsKICAgICBpZiAoIGludHNwZWMgPT0gTlVM
TCApCiAgICAgICAgIHJldHVybiAwOwogICAgIGludGxlbiAvPSBzaXplb2YoKmludHNwZWMpOwog
CisgICAgZHRfZHByaW50aygiIHVzaW5nICdpbnRlcnJ1cHRzJyBwcm9wZXJ0eVxuIik7CiAgICAg
ZHRfZHByaW50aygiIGludHNwZWM9JWQgaW50bGVuPSVkXG4iLCBiZTMyX3RvX2NwdXAoaW50c3Bl
YyksIGludGxlbik7CiAKICAgICAvKiBMb29rIGZvciB0aGUgaW50ZXJydXB0IHBhcmVudC4gKi8K
QEAgLTE0MjAsMjEgKzE0MzIsMzkgQEAgaW50IGR0X2RldmljZV9nZXRfcmF3X2lycShjb25zdCBz
dHJ1Y3QgZHRfZGV2aWNlX25vZGUgKmRldmljZSwKICAgICBjb25zdCBfX2JlMzIgKmludHNwZWMs
ICp0bXAsICphZGRyOwogICAgIHUzMiBpbnRzaXplLCBpbnRsZW47CiAgICAgaW50IHJlcyA9IC1F
SU5WQUw7CisgICAgc3RydWN0IGR0X3BoYW5kbGVfYXJncyBhcmdzOworICAgIGludCBpOwogCiAg
ICAgZHRfZHByaW50aygiZHRfZGV2aWNlX2dldF9yYXdfaXJxOiBkZXY9JXMsIGluZGV4PSV1XG4i
LAogICAgICAgICAgICAgICAgZGV2aWNlLT5mdWxsX25hbWUsIGluZGV4KTsKIAorICAgIC8qIEdl
dCB0aGUgcmVnIHByb3BlcnR5IChpZiBhbnkpICovCisgICAgYWRkciA9IGR0X2dldF9wcm9wZXJ0
eShkZXZpY2UsICJyZWciLCBOVUxMKTsKKworICAgIC8qIFRyeSB0aGUgbmV3LXN0eWxlIGludGVy
cnVwdHMtZXh0ZW5kZWQgZmlyc3QgKi8KKyAgICByZXMgPSBkdF9wYXJzZV9waGFuZGxlX3dpdGhf
YXJncyhkZXZpY2UsICJpbnRlcnJ1cHRzLWV4dGVuZGVkIiwKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAiI2ludGVycnVwdC1jZWxscyIsIGluZGV4LCAmYXJncyk7CisgICAg
aWYgKCAhcmVzICkKKyAgICB7CisgICAgICAgIGR0X2RwcmludGsoIiB1c2luZyAnaW50ZXJydXB0
cy1leHRlbmRlZCcgcHJvcGVydHlcbiIpOworICAgICAgICBkdF9kcHJpbnRrKCIgaW50c3BlYz0l
ZCBpbnRzaXplPSVkXG4iLCBhcmdzLmFyZ3NbMF0sIGFyZ3MuYXJnc19jb3VudCk7CisKKyAgICAg
ICAgZm9yICggaSA9IDA7IGkgPCBhcmdzLmFyZ3NfY291bnQ7IGkrKyApCisgICAgICAgICAgICBh
cmdzLmFyZ3NbaV0gPSBjcHVfdG9fYmUzMihhcmdzLmFyZ3NbaV0pOworCisgICAgICAgIHJldHVy
biBkdF9pcnFfbWFwX3JhdyhhcmdzLm5wLCBhcmdzLmFyZ3MsIGFyZ3MuYXJnc19jb3VudCwKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHIsIG91dF9pcnEpOworICAgIH0KKwogICAg
IC8qIEdldCB0aGUgaW50ZXJydXB0cyBwcm9wZXJ0eSAqLwogICAgIGludHNwZWMgPSBkdF9nZXRf
cHJvcGVydHkoZGV2aWNlLCAiaW50ZXJydXB0cyIsICZpbnRsZW4pOwogICAgIGlmICggaW50c3Bl
YyA9PSBOVUxMICkKICAgICAgICAgcmV0dXJuIC1FSU5WQUw7CiAgICAgaW50bGVuIC89IHNpemVv
ZigqaW50c3BlYyk7CiAKKyAgICBkdF9kcHJpbnRrKCIgdXNpbmcgJ2ludGVycnVwdHMnIHByb3Bl
cnR5XG4iKTsKICAgICBkdF9kcHJpbnRrKCIgaW50c3BlYz0lZCBpbnRsZW49JWRcbiIsIGJlMzJf
dG9fY3B1cChpbnRzcGVjKSwgaW50bGVuKTsKIAotICAgIC8qIEdldCB0aGUgcmVnIHByb3BlcnR5
IChpZiBhbnkpICovCi0gICAgYWRkciA9IGR0X2dldF9wcm9wZXJ0eShkZXZpY2UsICJyZWciLCBO
VUxMKTsKLQogICAgIC8qIExvb2sgZm9yIHRoZSBpbnRlcnJ1cHQgcGFyZW50LiAqLwogICAgIHAg
PSBkdF9pcnFfZmluZF9wYXJlbnQoZGV2aWNlKTsKICAgICBpZiAoIHAgPT0gTlVMTCApCi0tIAoy
LjcuNAoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhl
bi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBz
Oi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

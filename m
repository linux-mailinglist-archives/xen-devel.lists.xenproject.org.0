Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 3A9A1BFFA6
	for <lists+xen-devel@lfdr.de>; Fri, 27 Sep 2019 09:04:58 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iDkFf-0003Cx-7t; Fri, 27 Sep 2019 07:01:15 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=Rbpq=XW=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1iDkFc-0003Be-Ok
 for xen-devel@lists.xenproject.org; Fri, 27 Sep 2019 07:01:12 +0000
X-Inumbo-ID: 8d602ee6-e0f4-11e9-b588-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by localhost (Halon) with ESMTPS
 id 8d602ee6-e0f4-11e9-b588-bc764e2007e4;
 Fri, 27 Sep 2019 07:00:56 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id A8D82AFBE;
 Fri, 27 Sep 2019 07:00:55 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Fri, 27 Sep 2019 09:00:09 +0200
Message-Id: <20190927070050.12405-6-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190927070050.12405-1-jgross@suse.com>
References: <20190927070050.12405-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH v4 05/46] xen/sched: let pick_cpu return a
 scheduler resource
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Tim Deegan <tim@xen.org>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 Robert VanVossen <robert.vanvossen@dornerworks.com>,
 Dario Faggioli <dfaggioli@suse.com>, Julien Grall <julien.grall@arm.com>,
 Josh Whitehead <josh.whitehead@dornerworks.com>,
 Meng Xu <mengxu@cis.upenn.edu>, Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SW5zdGVhZCBvZiByZXR1cm5pbmcgYSBwaHlzaWNhbCBjcHUgbnVtYmVyIGxldCBwaWNrX2NwdSgp
IHJldHVybiBhCnNjaGVkdWxlciByZXNvdXJjZSBpbnN0ZWFkLiBSZW5hbWUgcGlja19jcHUoKSB0
byBwaWNrX3Jlc291cmNlKCkgdG8KcmVmbGVjdCB0aGF0IGNoYW5nZS4KClNpZ25lZC1vZmYtYnk6
IEp1ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNvbT4KUmV2aWV3ZWQtYnk6IERhcmlvIEZhZ2dp
b2xpIDxkZmFnZ2lvbGlAc3VzZS5jb20+Ci0tLQpWMzoKLSBzdHlsZSBmaXggKEphbiBCZXVsaWNo
KQotLS0KIHhlbi9jb21tb24vc2NoZWRfYXJpbmM2NTMuYyAgfCAxMyArKysrKysrLS0tLS0tCiB4
ZW4vY29tbW9uL3NjaGVkX2NyZWRpdC5jICAgIHwgMTYgKysrKysrKystLS0tLS0tLQogeGVuL2Nv
bW1vbi9zY2hlZF9jcmVkaXQyLmMgICB8IDIyICsrKysrKysrKysrLS0tLS0tLS0tLS0KIHhlbi9j
b21tb24vc2NoZWRfbnVsbC5jICAgICAgfCAyMyArKysrKysrKysrKystLS0tLS0tLS0tLQogeGVu
L2NvbW1vbi9zY2hlZF9ydC5jICAgICAgICB8IDE4ICsrKysrKysrKy0tLS0tLS0tLQogeGVuL2Nv
bW1vbi9zY2hlZHVsZS5jICAgICAgICB8IDE4ICsrKysrKysrKystLS0tLS0tLQogeGVuL2luY2x1
ZGUveGVuL3BlcmZjX2RlZm4uaCB8ICAyICstCiB4ZW4vaW5jbHVkZS94ZW4vc2NoZWQtaWYuaCAg
IHwgMTAgKysrKystLS0tLQogOCBmaWxlcyBjaGFuZ2VkLCA2MyBpbnNlcnRpb25zKCspLCA1OSBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVkX2FyaW5jNjUzLmMgYi94
ZW4vY29tbW9uL3NjaGVkX2FyaW5jNjUzLmMKaW5kZXggNjcwMDlmMjM1ZC4uOWZhYTFjNDhjNCAx
MDA2NDQKLS0tIGEveGVuL2NvbW1vbi9zY2hlZF9hcmluYzY1My5jCisrKyBiL3hlbi9jb21tb24v
c2NoZWRfYXJpbmM2NTMuYwpAQCAtNjA3LDE1ICs2MDcsMTYgQEAgYTY1M3NjaGVkX2RvX3NjaGVk
dWxlKAogfQogCiAvKioKLSAqIFhlbiBzY2hlZHVsZXIgY2FsbGJhY2sgZnVuY3Rpb24gdG8gc2Vs
ZWN0IGEgQ1BVIGZvciB0aGUgVkNQVSB0byBydW4gb24KKyAqIFhlbiBzY2hlZHVsZXIgY2FsbGJh
Y2sgZnVuY3Rpb24gdG8gc2VsZWN0IGEgcmVzb3VyY2UgZm9yIHRoZSBWQ1BVIHRvIHJ1biBvbgog
ICoKICAqIEBwYXJhbSBvcHMgICAgICAgUG9pbnRlciB0byB0aGlzIGluc3RhbmNlIG9mIHRoZSBz
Y2hlZHVsZXIgc3RydWN0dXJlCiAgKiBAcGFyYW0gdW5pdCAgICAgIFBvaW50ZXIgdG8gc3RydWN0
IHNjaGVkX3VuaXQKICAqCi0gKiBAcmV0dXJuICAgICAgICAgIE51bWJlciBvZiBzZWxlY3RlZCBw
aHlzaWNhbCBDUFUKKyAqIEByZXR1cm4gICAgICAgICAgU2NoZWR1bGVyIHJlc291cmNlIHRvIHJ1
biBvbgogICovCi1zdGF0aWMgaW50Ci1hNjUzc2NoZWRfcGlja19jcHUoY29uc3Qgc3RydWN0IHNj
aGVkdWxlciAqb3BzLCBjb25zdCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkKK3N0YXRpYyBzdHJ1
Y3Qgc2NoZWRfcmVzb3VyY2UgKgorYTY1M3NjaGVkX3BpY2tfcmVzb3VyY2UoY29uc3Qgc3RydWN0
IHNjaGVkdWxlciAqb3BzLAorICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IHNj
aGVkX3VuaXQgKnVuaXQpCiB7CiAgICAgc3RydWN0IHZjcHUgKnZjID0gdW5pdC0+dmNwdV9saXN0
OwogICAgIGNwdW1hc2tfdCAqb25saW5lOwpAQCAtNjMzLDcgKzYzNCw3IEBAIGE2NTNzY2hlZF9w
aWNrX2NwdShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIGNvbnN0IHN0cnVjdCBzY2hlZF91
bml0ICp1bml0KQogICAgICAgICAgfHwgKGNwdSA+PSBucl9jcHVfaWRzKSApCiAgICAgICAgIGNw
dSA9IHZjLT5wcm9jZXNzb3I7CiAKLSAgICByZXR1cm4gY3B1OworICAgIHJldHVybiBnZXRfc2No
ZWRfcmVzKGNwdSk7CiB9CiAKIC8qKgpAQCAtNzI2LDcgKzcyNyw3IEBAIHN0YXRpYyBjb25zdCBz
dHJ1Y3Qgc2NoZWR1bGVyIHNjaGVkX2FyaW5jNjUzX2RlZiA9IHsKIAogICAgIC5kb19zY2hlZHVs
ZSAgICA9IGE2NTNzY2hlZF9kb19zY2hlZHVsZSwKIAotICAgIC5waWNrX2NwdSAgICAgICA9IGE2
NTNzY2hlZF9waWNrX2NwdSwKKyAgICAucGlja19yZXNvdXJjZSAgPSBhNjUzc2NoZWRfcGlja19y
ZXNvdXJjZSwKIAogICAgIC5zd2l0Y2hfc2NoZWQgICA9IGE2NTNfc3dpdGNoX3NjaGVkLAogCmRp
ZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdC5jIGIveGVuL2NvbW1vbi9zY2hlZF9j
cmVkaXQuYwppbmRleCA0YjRkNzAyMWRlLi5mYTczMDgxYjNjIDEwMDY0NAotLS0gYS94ZW4vY29t
bW9uL3NjaGVkX2NyZWRpdC5jCisrKyBiL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0LmMKQEAgLTg1
Myw4ICs4NTMsOCBAQCBfY3NjaGVkX2NwdV9waWNrKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9w
cywgc3RydWN0IHZjcHUgKnZjLCBib29sX3QgY29tbWl0KQogICAgIHJldHVybiBjcHU7CiB9CiAK
LXN0YXRpYyBpbnQKLWNzY2hlZF9jcHVfcGljayhjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMs
IGNvbnN0IHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQorc3RhdGljIHN0cnVjdCBzY2hlZF9yZXNv
dXJjZSAqCitjc2NoZWRfcmVzX3BpY2soY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBjb25z
dCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkKIHsKICAgICBzdHJ1Y3QgdmNwdSAqdmMgPSB1bml0
LT52Y3B1X2xpc3Q7CiAgICAgc3RydWN0IGNzY2hlZF92Y3B1ICpzdmMgPSBDU0NIRURfVkNQVSh2
Yyk7CkBAIC04NjcsNyArODY3LDcgQEAgY3NjaGVkX2NwdV9waWNrKGNvbnN0IHN0cnVjdCBzY2hl
ZHVsZXIgKm9wcywgY29uc3Qgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiAgICAgICogZ2V0IGJv
b3N0ZWQsIHdoaWNoIHdlIGRvbid0IGRlc2VydmUgYXMgd2UgYXJlICJvbmx5IiBtaWdyYXRpbmcu
CiAgICAgICovCiAgICAgc2V0X2JpdChDU0NIRURfRkxBR19WQ1BVX01JR1JBVElORywgJnN2Yy0+
ZmxhZ3MpOwotICAgIHJldHVybiBfY3NjaGVkX2NwdV9waWNrKG9wcywgdmMsIDEpOworICAgIHJl
dHVybiBnZXRfc2NoZWRfcmVzKF9jc2NoZWRfY3B1X3BpY2sob3BzLCB2YywgMSkpOwogfQogCiBz
dGF0aWMgaW5saW5lIHZvaWQKQEAgLTk2Nyw3ICs5NjcsNyBAQCBjc2NoZWRfdmNwdV9hY2N0KHN0
cnVjdCBjc2NoZWRfcHJpdmF0ZSAqcHJ2LCB1bnNpZ25lZCBpbnQgY3B1KQogICAgICAgICAvKgog
ICAgICAgICAgKiBJZiBpdCdzIGJlZW4gYWN0aXZlIGEgd2hpbGUsIGNoZWNrIGlmIHdlJ2QgYmUg
YmV0dGVyIG9mZgogICAgICAgICAgKiBtaWdyYXRpbmcgaXQgdG8gcnVuIGVsc2V3aGVyZSAoc2Vl
IG11bHRpLWNvcmUgYW5kIG11bHRpLXRocmVhZAotICAgICAgICAgKiBzdXBwb3J0IGluIGNzY2hl
ZF9jcHVfcGljaygpKS4KKyAgICAgICAgICogc3VwcG9ydCBpbiBjc2NoZWRfcmVzX3BpY2soKSku
CiAgICAgICAgICAqLwogICAgICAgICBuZXdfY3B1ID0gX2NzY2hlZF9jcHVfcGljayhvcHMsIGN1
cnJlbnQsIDApOwogCkBAIC0xMDIyLDExICsxMDIyLDExIEBAIGNzY2hlZF91bml0X2luc2VydChj
b25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQogCiAg
ICAgQlVHX09OKCBpc19pZGxlX3ZjcHUodmMpICk7CiAKLSAgICAvKiBjc2NoZWRfY3B1X3BpY2so
KSBsb29rcyBpbiB2Yy0+cHJvY2Vzc29yJ3MgcnVucSwgc28gd2UgbmVlZCB0aGUgbG9jay4gKi8K
KyAgICAvKiBjc2NoZWRfcmVzX3BpY2soKSBsb29rcyBpbiB2Yy0+cHJvY2Vzc29yJ3MgcnVucSwg
c28gd2UgbmVlZCB0aGUgbG9jay4gKi8KICAgICBsb2NrID0gdmNwdV9zY2hlZHVsZV9sb2NrX2ly
cSh2Yyk7CiAKLSAgICB2Yy0+cHJvY2Vzc29yID0gY3NjaGVkX2NwdV9waWNrKG9wcywgdW5pdCk7
Ci0gICAgdW5pdC0+cmVzID0gZ2V0X3NjaGVkX3Jlcyh2Yy0+cHJvY2Vzc29yKTsKKyAgICB1bml0
LT5yZXMgPSBjc2NoZWRfcmVzX3BpY2sob3BzLCB1bml0KTsKKyAgICB2Yy0+cHJvY2Vzc29yID0g
dW5pdC0+cmVzLT5tYXN0ZXJfY3B1OwogCiAgICAgc3Bpbl91bmxvY2tfaXJxKGxvY2spOwogCkBA
IC0yMjc4LDcgKzIyNzgsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNjaGVkdWxlciBzY2hlZF9j
cmVkaXRfZGVmID0gewogICAgIC5hZGp1c3RfYWZmaW5pdHk9IGNzY2hlZF9hZmZfY250bCwKICAg
ICAuYWRqdXN0X2dsb2JhbCAgPSBjc2NoZWRfc3lzX2NudGwsCiAKLSAgICAucGlja19jcHUgICAg
ICAgPSBjc2NoZWRfY3B1X3BpY2ssCisgICAgLnBpY2tfcmVzb3VyY2UgID0gY3NjaGVkX3Jlc19w
aWNrLAogICAgIC5kb19zY2hlZHVsZSAgICA9IGNzY2hlZF9zY2hlZHVsZSwKIAogICAgIC5kdW1w
X2NwdV9zdGF0ZSA9IGNzY2hlZF9kdW1wX3BjcHUsCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3Nj
aGVkX2NyZWRpdDIuYyBiL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0Mi5jCmluZGV4IDI5ODFkNjQy
YjAuLjM3MTkyZTY3MTMgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0Mi5jCisr
KyBiL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0Mi5jCkBAIC02MjYsOSArNjI2LDkgQEAgc3RhdGlj
IGlubGluZSBib29sIGhhc19jYXAoY29uc3Qgc3RydWN0IGNzY2hlZDJfdmNwdSAqc3ZjKQogICog
cnVucSwgX2Fsd2F5c18gaGFwcGVucyBieSBtZWFucyBvZiB0aWNrbGluZzoKICAqICAtIHdoZW4g
YSB2Y3B1IHdha2VzIHVwLCBpdCBjYWxscyBjc2NoZWQyX3VuaXRfd2FrZSgpLCB3aGljaCBjYWxs
cwogICogICAgcnVucV90aWNrbGUoKTsKLSAqICAtIHdoZW4gYSBtaWdyYXRpb24gaXMgaW5pdGlh
dGVkIGluIHNjaGVkdWxlLmMsIHdlIGNhbGwgY3NjaGVkMl9jcHVfcGljaygpLAorICogIC0gd2hl
biBhIG1pZ3JhdGlvbiBpcyBpbml0aWF0ZWQgaW4gc2NoZWR1bGUuYywgd2UgY2FsbCBjc2NoZWQy
X3Jlc19waWNrKCksCiAgKiAgICBjc2NoZWQyX3VuaXRfbWlncmF0ZSgpICh3aGljaCBjYWxscyBt
aWdyYXRlKCkpIGFuZCBjc2NoZWQyX3VuaXRfd2FrZSgpLgotICogICAgY3NjaGVkMl9jcHVfcGlj
aygpIGxvb2tzIGZvciB0aGUgbGVhc3QgbG9hZGVkIHJ1bnEgYW5kIHJldHVybiBqdXN0IGFueQor
ICogICAgY3NjaGVkMl9yZXNfcGljaygpIGxvb2tzIGZvciB0aGUgbGVhc3QgbG9hZGVkIHJ1bnEg
YW5kIHJldHVybiBqdXN0IGFueQogICogICAgb2YgaXRzIHByb2Nlc3NvcnMuIFRoZW4sIGNzY2hl
ZDJfdW5pdF9taWdyYXRlKCkganVzdCBtb3ZlcyB0aGUgdmNwdSB0bwogICogICAgdGhlIGNob3Nl
biBydW5xLCBhbmQgaXQgaXMgYWdhaW4gcnVucV90aWNrbGUoKSwgY2FsbGVkIGJ5CiAgKiAgICBj
c2NoZWQyX3VuaXRfd2FrZSgpIHRoYXQgYWN0dWFsbHkgZGVjaWRlcyB3aGF0IHBjcHUgdG8gdXNl
IHdpdGhpbiB0aGUKQEAgLTY3Nyw3ICs2NzcsNyBAQCB2b2lkIHNtdF9pZGxlX21hc2tfY2xlYXIo
dW5zaWduZWQgaW50IGNwdSwgY3B1bWFza190ICptYXNrKQogfQogCiAvKgotICogSW4gY3NjaGVk
Ml9jcHVfcGljaygpLCBpdCBtYXkgbm90IGJlIHBvc3NpYmxlIHRvIGFjdHVhbGx5IGxvb2sgYXQg
cmVtb3RlCisgKiBJbiBjc2NoZWQyX3Jlc19waWNrKCksIGl0IG1heSBub3QgYmUgcG9zc2libGUg
dG8gYWN0dWFsbHkgbG9vayBhdCByZW1vdGUKICAqIHJ1bnF1ZXVlcyAodGhlIHRyeWxvY2stcyBv
biB0aGVpciBzcGlubG9ja3MgY2FuIGZhaWwhKS4gSWYgdGhhdCBoYXBwZW5zLAogICogd2UgcGlj
aywgaW4gb3JkZXIgb2YgZGVjcmVhc2luZyBwcmVmZXJlbmNlOgogICogIDEpIHN2YydzIGN1cnJl
bnQgcGNwdSwgaWYgaXQgaXMgcGFydCBvZiBzdmMncyBzb2Z0IGFmZmluaXR5OwpAQCAtMjIwMiw4
ICsyMjAyLDggQEAgY3NjaGVkMl9jb250ZXh0X3NhdmVkKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIg
Km9wcywgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiB9CiAKICNkZWZpbmUgTUFYX0xPQUQgKFNU
SU1FX01BWCkKLXN0YXRpYyBpbnQKLWNzY2hlZDJfY3B1X3BpY2soY29uc3Qgc3RydWN0IHNjaGVk
dWxlciAqb3BzLCBjb25zdCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkKK3N0YXRpYyBzdHJ1Y3Qg
c2NoZWRfcmVzb3VyY2UgKgorY3NjaGVkMl9yZXNfcGljayhjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVy
ICpvcHMsIGNvbnN0IHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQogewogICAgIHN0cnVjdCBjc2No
ZWQyX3ByaXZhdGUgKnBydiA9IGNzY2hlZDJfcHJpdihvcHMpOwogICAgIHN0cnVjdCB2Y3B1ICp2
YyA9IHVuaXQtPnZjcHVfbGlzdDsKQEAgLTIyMTUsNyArMjIxNSw3IEBAIGNzY2hlZDJfY3B1X3Bp
Y2soY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBjb25zdCBzdHJ1Y3Qgc2NoZWRfdW5pdCAq
dW5pdCkKIAogICAgIEFTU0VSVCghY3B1bWFza19lbXB0eSgmcHJ2LT5hY3RpdmVfcXVldWVzKSk7
CiAKLSAgICBTQ0hFRF9TVEFUX0NSQU5LKHBpY2tfY3B1KTsKKyAgICBTQ0hFRF9TVEFUX0NSQU5L
KHBpY2tfcmVzb3VyY2UpOwogCiAgICAgLyogTG9ja2luZzoKICAgICAgKiAtIFJ1bnF1ZXVlIGxv
Y2sgb2YgdmMtPnByb2Nlc3NvciBpcyBhbHJlYWR5IGxvY2tlZApAQCAtMjQyNCw3ICsyNDI0LDcg
QEAgY3NjaGVkMl9jcHVfcGljayhjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIGNvbnN0IHN0
cnVjdCBzY2hlZF91bml0ICp1bml0KQogICAgICAgICAgICAgICAgICAgICAodW5zaWduZWQgY2hh
ciAqKSZkKTsKICAgICB9CiAKLSAgICByZXR1cm4gbmV3X2NwdTsKKyAgICByZXR1cm4gZ2V0X3Nj
aGVkX3JlcyhuZXdfY3B1KTsKIH0KIAogLyogV29ya2luZyBzdGF0ZSBvZiB0aGUgbG9hZC1iYWxh
bmNpbmcgYWxnb3JpdGhtICovCkBAIC0zMTIxLDExICszMTIxLDExIEBAIGNzY2hlZDJfdW5pdF9p
bnNlcnQoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5p
dCkKICAgICBBU1NFUlQoIWlzX2lkbGVfdmNwdSh2YykpOwogICAgIEFTU0VSVChsaXN0X2VtcHR5
KCZzdmMtPnJ1bnFfZWxlbSkpOwogCi0gICAgLyogY3NjaGVkMl9jcHVfcGljaygpIGV4cGVjdHMg
dGhlIHBjcHUgbG9jayB0byBiZSBoZWxkICovCisgICAgLyogY3NjaGVkMl9yZXNfcGljaygpIGV4
cGVjdHMgdGhlIHBjcHUgbG9jayB0byBiZSBoZWxkICovCiAgICAgbG9jayA9IHZjcHVfc2NoZWR1
bGVfbG9ja19pcnEodmMpOwogCi0gICAgdmMtPnByb2Nlc3NvciA9IGNzY2hlZDJfY3B1X3BpY2so
b3BzLCB1bml0KTsKLSAgICB1bml0LT5yZXMgPSBnZXRfc2NoZWRfcmVzKHZjLT5wcm9jZXNzb3Ip
OworICAgIHVuaXQtPnJlcyA9IGNzY2hlZDJfcmVzX3BpY2sob3BzLCB1bml0KTsKKyAgICB2Yy0+
cHJvY2Vzc29yID0gdW5pdC0+cmVzLT5tYXN0ZXJfY3B1OwogCiAgICAgc3Bpbl91bmxvY2tfaXJx
KGxvY2spOwogCkBAIC00MTEyLDcgKzQxMTIsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNjaGVk
dWxlciBzY2hlZF9jcmVkaXQyX2RlZiA9IHsKICAgICAuYWRqdXN0X2FmZmluaXR5PSBjc2NoZWQy
X2FmZl9jbnRsLAogICAgIC5hZGp1c3RfZ2xvYmFsICA9IGNzY2hlZDJfc3lzX2NudGwsCiAKLSAg
ICAucGlja19jcHUgICAgICAgPSBjc2NoZWQyX2NwdV9waWNrLAorICAgIC5waWNrX3Jlc291cmNl
ICA9IGNzY2hlZDJfcmVzX3BpY2ssCiAgICAgLm1pZ3JhdGUgICAgICAgID0gY3NjaGVkMl91bml0
X21pZ3JhdGUsCiAgICAgLmRvX3NjaGVkdWxlICAgID0gY3NjaGVkMl9zY2hlZHVsZSwKICAgICAu
Y29udGV4dF9zYXZlZCAgPSBjc2NoZWQyX2NvbnRleHRfc2F2ZWQsCmRpZmYgLS1naXQgYS94ZW4v
Y29tbW9uL3NjaGVkX251bGwuYyBiL3hlbi9jb21tb24vc2NoZWRfbnVsbC5jCmluZGV4IGNiNWUx
YjUyZGIuLmNiNDAwZjU1ZDAgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vc2NoZWRfbnVsbC5jCisr
KyBiL3hlbi9jb21tb24vc2NoZWRfbnVsbC5jCkBAIC0yNjEsOSArMjYxLDExIEBAIHN0YXRpYyB2
b2lkIG51bGxfZnJlZV9kb21kYXRhKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywgdm9pZCAq
ZGF0YSkKICAqCiAgKiBTbyB0aGlzIGlzIG5vdCBwYXJ0IG9mIGFueSBob3QgcGF0aC4KICAqLwot
c3RhdGljIHVuc2lnbmVkIGludCBwaWNrX2NwdShzdHJ1Y3QgbnVsbF9wcml2YXRlICpwcnYsIHN0
cnVjdCB2Y3B1ICp2KQorc3RhdGljIHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqCitwaWNrX3Jlcyhz
dHJ1Y3QgbnVsbF9wcml2YXRlICpwcnYsIGNvbnN0IHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQog
ewogICAgIHVuc2lnbmVkIGludCBiczsKKyAgICBzdHJ1Y3QgdmNwdSAqdiA9IHVuaXQtPnZjcHVf
bGlzdDsKICAgICB1bnNpZ25lZCBpbnQgY3B1ID0gdi0+cHJvY2Vzc29yLCBuZXdfY3B1OwogICAg
IGNwdW1hc2tfdCAqY3B1cyA9IGNwdXBvb2xfZG9tYWluX2NwdW1hc2sodi0+ZG9tYWluKTsKIApA
QCAtMzI3LDcgKzMyOSw3IEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgcGlja19jcHUoc3RydWN0IG51
bGxfcHJpdmF0ZSAqcHJ2LCBzdHJ1Y3QgdmNwdSAqdikKICAgICAgICAgX190cmFjZV92YXIoVFJD
X1NOVUxMX1BJQ0tFRF9DUFUsIDEsIHNpemVvZihkKSwgJmQpOwogICAgIH0KIAotICAgIHJldHVy
biBuZXdfY3B1OworICAgIHJldHVybiBnZXRfc2NoZWRfcmVzKG5ld19jcHUpOwogfQogCiBzdGF0
aWMgdm9pZCB2Y3B1X2Fzc2lnbihzdHJ1Y3QgbnVsbF9wcml2YXRlICpwcnYsIHN0cnVjdCB2Y3B1
ICp2LApAQCAtNDU3LDggKzQ1OSw4IEBAIHN0YXRpYyB2b2lkIG51bGxfdW5pdF9pbnNlcnQoY29u
c3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLAogICAgIH0KIAogIHJldHJ5OgotICAgIGNwdSA9IHYt
PnByb2Nlc3NvciA9IHBpY2tfY3B1KHBydiwgdik7Ci0gICAgdW5pdC0+cmVzID0gZ2V0X3NjaGVk
X3JlcyhjcHUpOworICAgIHVuaXQtPnJlcyA9IHBpY2tfcmVzKHBydiwgdW5pdCk7CisgICAgY3B1
ID0gdi0+cHJvY2Vzc29yID0gdW5pdC0+cmVzLT5tYXN0ZXJfY3B1OwogCiAgICAgc3Bpbl91bmxv
Y2sobG9jayk7CiAKQEAgLTU5OSw3ICs2MDEsNyBAQCBzdGF0aWMgdm9pZCBudWxsX3VuaXRfd2Fr
ZShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsCiAgICAgICAgICAqLwogICAgICAgICB3aGls
ZSAoIGNwdW1hc2tfaW50ZXJzZWN0cygmcHJ2LT5jcHVzX2ZyZWUsIGNwdW1hc2tfc2NyYXRjaF9j
cHUoY3B1KSkgKQogICAgICAgICB7Ci0gICAgICAgICAgICB1bnNpZ25lZCBpbnQgbmV3X2NwdSA9
IHBpY2tfY3B1KHBydiwgdik7CisgICAgICAgICAgICB1bnNpZ25lZCBpbnQgbmV3X2NwdSA9IHBp
Y2tfcmVzKHBydiwgdW5pdCktPm1hc3Rlcl9jcHU7CiAKICAgICAgICAgICAgIGlmICggdGVzdF9h
bmRfY2xlYXJfYml0KG5ld19jcHUsICZwcnYtPmNwdXNfZnJlZSkgKQogICAgICAgICAgICAgewpA
QCAtNjQ4LDEyICs2NTAsMTEgQEAgc3RhdGljIHZvaWQgbnVsbF91bml0X3NsZWVwKGNvbnN0IHN0
cnVjdCBzY2hlZHVsZXIgKm9wcywKICAgICBTQ0hFRF9TVEFUX0NSQU5LKHZjcHVfc2xlZXApOwog
fQogCi1zdGF0aWMgaW50IG51bGxfY3B1X3BpY2soY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3Bz
LAotICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBzY2hlZF91bml0ICp1bml0
KQorc3RhdGljIHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqCitudWxsX3Jlc19waWNrKGNvbnN0IHN0
cnVjdCBzY2hlZHVsZXIgKm9wcywgY29uc3Qgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiB7Ci0g
ICAgc3RydWN0IHZjcHUgKnYgPSB1bml0LT52Y3B1X2xpc3Q7Ci0gICAgQVNTRVJUKCFpc19pZGxl
X3ZjcHUodikpOwotICAgIHJldHVybiBwaWNrX2NwdShudWxsX3ByaXYob3BzKSwgdik7CisgICAg
QVNTRVJUKCFpc19pZGxlX3ZjcHUodW5pdC0+dmNwdV9saXN0KSk7CisgICAgcmV0dXJuIHBpY2tf
cmVzKG51bGxfcHJpdihvcHMpLCB1bml0KTsKIH0KIAogc3RhdGljIHZvaWQgbnVsbF91bml0X21p
Z3JhdGUoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLApAQCAtOTg1LDcgKzk4Niw3IEBAIHN0
YXRpYyBjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyIHNjaGVkX251bGxfZGVmID0gewogCiAgICAgLndh
a2UgICAgICAgICAgID0gbnVsbF91bml0X3dha2UsCiAgICAgLnNsZWVwICAgICAgICAgID0gbnVs
bF91bml0X3NsZWVwLAotICAgIC5waWNrX2NwdSAgICAgICA9IG51bGxfY3B1X3BpY2ssCisgICAg
LnBpY2tfcmVzb3VyY2UgID0gbnVsbF9yZXNfcGljaywKICAgICAubWlncmF0ZSAgICAgICAgPSBu
dWxsX3VuaXRfbWlncmF0ZSwKICAgICAuZG9fc2NoZWR1bGUgICAgPSBudWxsX3NjaGVkdWxlLAog
CmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVkX3J0LmMgYi94ZW4vY29tbW9uL3NjaGVkX3J0
LmMKaW5kZXggMDFlOTVmMzI3Ni4uNmNhNzkyZTY0MyAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9z
Y2hlZF9ydC5jCisrKyBiL3hlbi9jb21tb24vc2NoZWRfcnQuYwpAQCAtNjMxLDEyICs2MzEsMTIg
QEAgcmVwbHFfcmVpbnNlcnQoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3QgcnRf
dmNwdSAqc3ZjKQogfQogCiAvKgotICogUGljayBhIHZhbGlkIENQVSBmb3IgdGhlIHZjcHUgdmMK
LSAqIFZhbGlkIENQVSBvZiBhIHZjcHUgaXMgaW50ZXNlY3Rpb24gb2YgdmNwdSdzIGFmZmluaXR5
Ci0gKiBhbmQgYXZhaWxhYmxlIGNwdXMKKyAqIFBpY2sgYSB2YWxpZCByZXNvdXJjZSBmb3IgdGhl
IHZjcHUgdmMKKyAqIFZhbGlkIHJlc291cmNlIG9mIGEgdmNwdSBpcyBpbnRlc2VjdGlvbiBvZiB2
Y3B1J3MgYWZmaW5pdHkKKyAqIGFuZCBhdmFpbGFibGUgcmVzb3VyY2VzCiAgKi8KLXN0YXRpYyBp
bnQKLXJ0X2NwdV9waWNrKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywgY29uc3Qgc3RydWN0
IHNjaGVkX3VuaXQgKnVuaXQpCitzdGF0aWMgc3RydWN0IHNjaGVkX3Jlc291cmNlICoKK3J0X3Jl
c19waWNrKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywgY29uc3Qgc3RydWN0IHNjaGVkX3Vu
aXQgKnVuaXQpCiB7CiAgICAgc3RydWN0IHZjcHUgKnZjID0gdW5pdC0+dmNwdV9saXN0OwogICAg
IGNwdW1hc2tfdCBjcHVzOwpAQCAtNjUxLDcgKzY1MSw3IEBAIHJ0X2NwdV9waWNrKGNvbnN0IHN0
cnVjdCBzY2hlZHVsZXIgKm9wcywgY29uc3Qgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiAgICAg
ICAgICAgICA6IGNwdW1hc2tfY3ljbGUodmMtPnByb2Nlc3NvciwgJmNwdXMpOwogICAgIEFTU0VS
VCggIWNwdW1hc2tfZW1wdHkoJmNwdXMpICYmIGNwdW1hc2tfdGVzdF9jcHUoY3B1LCAmY3B1cykg
KTsKIAotICAgIHJldHVybiBjcHU7CisgICAgcmV0dXJuIGdldF9zY2hlZF9yZXMoY3B1KTsKIH0K
IAogLyoKQEAgLTg5Miw4ICs4OTIsOCBAQCBydF91bml0X2luc2VydChjb25zdCBzdHJ1Y3Qgc2No
ZWR1bGVyICpvcHMsIHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQogICAgIEJVR19PTiggaXNfaWRs
ZV92Y3B1KHZjKSApOwogCiAgICAgLyogVGhpcyBpcyBzYWZlIGJlY2F1c2UgdmMgaXNuJ3QgeWV0
IGJlaW5nIHNjaGVkdWxlZCAqLwotICAgIHZjLT5wcm9jZXNzb3IgPSBydF9jcHVfcGljayhvcHMs
IHVuaXQpOwotICAgIHVuaXQtPnJlcyA9IGdldF9zY2hlZF9yZXModmMtPnByb2Nlc3Nvcik7Cisg
ICAgdW5pdC0+cmVzID0gcnRfcmVzX3BpY2sob3BzLCB1bml0KTsKKyAgICB2Yy0+cHJvY2Vzc29y
ID0gdW5pdC0+cmVzLT5tYXN0ZXJfY3B1OwogCiAgICAgbG9jayA9IHZjcHVfc2NoZWR1bGVfbG9j
a19pcnEodmMpOwogCkBAIC0xNTYyLDcgKzE1NjIsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNj
aGVkdWxlciBzY2hlZF9ydGRzX2RlZiA9IHsKIAogICAgIC5hZGp1c3QgICAgICAgICA9IHJ0X2Rv
bV9jbnRsLAogCi0gICAgLnBpY2tfY3B1ICAgICAgID0gcnRfY3B1X3BpY2ssCisgICAgLnBpY2tf
cmVzb3VyY2UgID0gcnRfcmVzX3BpY2ssCiAgICAgLmRvX3NjaGVkdWxlICAgID0gcnRfc2NoZWR1
bGUsCiAgICAgLnNsZWVwICAgICAgICAgID0gcnRfdW5pdF9zbGVlcCwKICAgICAud2FrZSAgICAg
ICAgICAgPSBydF91bml0X3dha2UsCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVkdWxlLmMg
Yi94ZW4vY29tbW9uL3NjaGVkdWxlLmMKaW5kZXggNzc0ZjEyN2Q4OC4uOGJjYTMyZjVjNCAxMDA2
NDQKLS0tIGEveGVuL2NvbW1vbi9zY2hlZHVsZS5jCisrKyBiL3hlbi9jb21tb24vc2NoZWR1bGUu
YwpAQCAtODcsMTAgKzg3LDEwIEBAIHNjaGVkX2lkbGVfc3dpdGNoX3NjaGVkKHN0cnVjdCBzY2hl
ZHVsZXIgKm5ld19vcHMsIHVuc2lnbmVkIGludCBjcHUsCiAgICAgcmV0dXJuICZzY2hlZF9mcmVl
X2NwdV9sb2NrOwogfQogCi1zdGF0aWMgaW50Ci1zY2hlZF9pZGxlX2NwdV9waWNrKGNvbnN0IHN0
cnVjdCBzY2hlZHVsZXIgKm9wcywgY29uc3Qgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCitzdGF0
aWMgc3RydWN0IHNjaGVkX3Jlc291cmNlICoKK3NjaGVkX2lkbGVfcmVzX3BpY2soY29uc3Qgc3Ry
dWN0IHNjaGVkdWxlciAqb3BzLCBjb25zdCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkKIHsKLSAg
ICByZXR1cm4gdW5pdC0+cmVzLT5tYXN0ZXJfY3B1OworICAgIHJldHVybiB1bml0LT5yZXM7CiB9
CiAKIHN0YXRpYyB2b2lkICoKQEAgLTEyMiw3ICsxMjIsNyBAQCBzdGF0aWMgc3RydWN0IHNjaGVk
dWxlciBzY2hlZF9pZGxlX29wcyA9IHsKICAgICAub3B0X25hbWUgICAgICAgPSAiaWRsZSIsCiAg
ICAgLnNjaGVkX2RhdGEgICAgID0gTlVMTCwKIAotICAgIC5waWNrX2NwdSAgICAgICA9IHNjaGVk
X2lkbGVfY3B1X3BpY2ssCisgICAgLnBpY2tfcmVzb3VyY2UgID0gc2NoZWRfaWRsZV9yZXNfcGlj
aywKICAgICAuZG9fc2NoZWR1bGUgICAgPSBzY2hlZF9pZGxlX3NjaGVkdWxlLAogCiAgICAgLmFs
bG9jX3VkYXRhICAgID0gc2NoZWRfaWRsZV9hbGxvY191ZGF0YSwKQEAgLTc0Nyw3ICs3NDcsOCBA
QCBzdGF0aWMgdm9pZCB2Y3B1X21pZ3JhdGVfZmluaXNoKHN0cnVjdCB2Y3B1ICp2KQogICAgICAg
ICAgICAgICAgIGJyZWFrOwogCiAgICAgICAgICAgICAvKiBTZWxlY3QgYSBuZXcgQ1BVLiAqLwot
ICAgICAgICAgICAgbmV3X2NwdSA9IHNjaGVkX3BpY2tfY3B1KHZjcHVfc2NoZWR1bGVyKHYpLCB2
LT5zY2hlZF91bml0KTsKKyAgICAgICAgICAgIG5ld19jcHUgPSBzY2hlZF9waWNrX3Jlc291cmNl
KHZjcHVfc2NoZWR1bGVyKHYpLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdi0+c2NoZWRfdW5pdCktPm1hc3Rlcl9jcHU7CiAgICAgICAgICAgICBpZiAoIChuZXdf
bG9jayA9PSBwZXJfY3B1KHNjaGVkdWxlX2RhdGEsIG5ld19jcHUpLnNjaGVkdWxlX2xvY2spICYm
CiAgICAgICAgICAgICAgICAgIGNwdW1hc2tfdGVzdF9jcHUobmV3X2NwdSwgdi0+ZG9tYWluLT5j
cHVwb29sLT5jcHVfdmFsaWQpICkKICAgICAgICAgICAgICAgICBicmVhazsKQEAgLTg0MCw4ICs4
NDEsOSBAQCB2b2lkIHJlc3RvcmVfdmNwdV9hZmZpbml0eShzdHJ1Y3QgZG9tYWluICpkKQogCiAg
ICAgICAgIC8qIHYtPnByb2Nlc3NvciBtaWdodCBoYXZlIGNoYW5nZWQsIHNvIHJlYWNxdWlyZSB0
aGUgbG9jay4gKi8KICAgICAgICAgbG9jayA9IHZjcHVfc2NoZWR1bGVfbG9ja19pcnEodik7Ci0g
ICAgICAgIHYtPnByb2Nlc3NvciA9IHNjaGVkX3BpY2tfY3B1KHZjcHVfc2NoZWR1bGVyKHYpLCB2
LT5zY2hlZF91bml0KTsKLSAgICAgICAgdi0+c2NoZWRfdW5pdC0+cmVzID0gZ2V0X3NjaGVkX3Jl
cyh2LT5wcm9jZXNzb3IpOworICAgICAgICB2LT5zY2hlZF91bml0LT5yZXMgPSBzY2hlZF9waWNr
X3Jlc291cmNlKHZjcHVfc2NoZWR1bGVyKHYpLAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHYtPnNjaGVkX3VuaXQpOworICAgICAgICB2LT5wcm9jZXNz
b3IgPSB2LT5zY2hlZF91bml0LT5yZXMtPm1hc3Rlcl9jcHU7CiAgICAgICAgIHNwaW5fdW5sb2Nr
X2lycShsb2NrKTsKIAogICAgICAgICBpZiAoIG9sZF9jcHUgIT0gdi0+cHJvY2Vzc29yICkKQEAg
LTE4NTQsNyArMTg1Niw3IEBAIHZvaWQgX19pbml0IHNjaGVkdWxlcl9pbml0KHZvaWQpCiAKICAg
ICAgICAgc2NoZWRfdGVzdF9mdW5jKGluaXQpOwogICAgICAgICBzY2hlZF90ZXN0X2Z1bmMoZGVp
bml0KTsKLSAgICAgICAgc2NoZWRfdGVzdF9mdW5jKHBpY2tfY3B1KTsKKyAgICAgICAgc2NoZWRf
dGVzdF9mdW5jKHBpY2tfcmVzb3VyY2UpOwogICAgICAgICBzY2hlZF90ZXN0X2Z1bmMoYWxsb2Nf
dWRhdGEpOwogICAgICAgICBzY2hlZF90ZXN0X2Z1bmMoZnJlZV91ZGF0YSk7CiAgICAgICAgIHNj
aGVkX3Rlc3RfZnVuYyhzd2l0Y2hfc2NoZWQpOwpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveGVu
L3BlcmZjX2RlZm4uaCBiL3hlbi9pbmNsdWRlL3hlbi9wZXJmY19kZWZuLmgKaW5kZXggZWY2Zjg2
YjkxZS4uMWFkNDM4NDA4MCAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUveGVuL3BlcmZjX2RlZm4u
aAorKysgYi94ZW4vaW5jbHVkZS94ZW4vcGVyZmNfZGVmbi5oCkBAIC02OSw3ICs2OSw3IEBAIFBF
UkZDT1VOVEVSKG1pZ3JhdGVfb25fcnVucSwgICAgICAgICJjc2NoZWQyOiBtaWdyYXRlX29uX3J1
bnEiKQogUEVSRkNPVU5URVIobWlncmF0ZV9ub19ydW5xLCAgICAgICAgImNzY2hlZDI6IG1pZ3Jh
dGVfbm9fcnVucSIpCiBQRVJGQ09VTlRFUihydW50aW1lX21pbl90aW1lciwgICAgICAiY3NjaGVk
MjogcnVudGltZV9taW5fdGltZXIiKQogUEVSRkNPVU5URVIocnVudGltZV9tYXhfdGltZXIsICAg
ICAgImNzY2hlZDI6IHJ1bnRpbWVfbWF4X3RpbWVyIikKLVBFUkZDT1VOVEVSKHBpY2tfY3B1LCAg
ICAgICAgICAgICAgICJjc2NoZWQyOiBwaWNrX2NwdSIpCitQRVJGQ09VTlRFUihwaWNrX3Jlc291
cmNlLCAgICAgICAgICAiY3NjaGVkMjogcGlja19yZXNvdXJjZSIpCiBQRVJGQ09VTlRFUihuZWVk
X2ZhbGxiYWNrX2NwdSwgICAgICAiY3NjaGVkMjogbmVlZF9mYWxsYmFja19jcHUiKQogUEVSRkNP
VU5URVIobWlncmF0ZWQsICAgICAgICAgICAgICAgImNzY2hlZDI6IG1pZ3JhdGVkIikKIFBFUkZD
T1VOVEVSKG1pZ3JhdGVfcmVzaXN0ZWQsICAgICAgICJjc2NoZWQyOiBtaWdyYXRlX3Jlc2lzdGVk
IikKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oIGIveGVuL2luY2x1ZGUv
eGVuL3NjaGVkLWlmLmgKaW5kZXggNWM5YWMwNzU4Ny4uNGY2MWY2NTI4OCAxMDA2NDQKLS0tIGEv
eGVuL2luY2x1ZGUveGVuL3NjaGVkLWlmLmgKKysrIGIveGVuL2luY2x1ZGUveGVuL3NjaGVkLWlm
LmgKQEAgLTE4OSw4ICsxODksOCBAQCBzdHJ1Y3Qgc2NoZWR1bGVyIHsKICAgICBzdHJ1Y3QgdGFz
a19zbGljZSAoKmRvX3NjaGVkdWxlKSAoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqLCBzX3RpbWVf
dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbF90IHRhc2tsZXRf
d29ya19zY2hlZHVsZWQpOwogCi0gICAgaW50ICAgICAgICAgICgqcGlja19jcHUpICAgICAgIChj
b25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICosCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjb25zdCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqKTsKKyAgICBzdHJ1Y3Qgc2NoZWRfcmVzb3Vy
Y2UgKigqcGlja19yZXNvdXJjZSkoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqLAorICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3Qgc2NoZWRfdW5p
dCAqKTsKICAgICB2b2lkICAgICAgICAgKCptaWdyYXRlKSAgICAgICAgKGNvbnN0IHN0cnVjdCBz
Y2hlZHVsZXIgKiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBz
Y2hlZF91bml0ICosIHVuc2lnbmVkIGludCk7CiAgICAgaW50ICAgICAgICAgICgqYWRqdXN0KSAg
ICAgICAgIChjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICosIHN0cnVjdCBkb21haW4gKiwKQEAgLTM1
NSwxMCArMzU1LDEwIEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBzY2hlZF9taWdyYXRlKGNvbnN0IHN0
cnVjdCBzY2hlZHVsZXIgKnMsCiAgICAgfQogfQogCi1zdGF0aWMgaW5saW5lIGludCBzY2hlZF9w
aWNrX2NwdShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpzLAotICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgY29uc3Qgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCitzdGF0aWMgaW5saW5l
IHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqc2NoZWRfcGlja19yZXNvdXJjZSgKKyAgICBjb25zdCBz
dHJ1Y3Qgc2NoZWR1bGVyICpzLCBjb25zdCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkKIHsKLSAg
ICByZXR1cm4gcy0+cGlja19jcHUocywgdW5pdCk7CisgICAgcmV0dXJuIHMtPnBpY2tfcmVzb3Vy
Y2UocywgdW5pdCk7CiB9CiAKIHN0YXRpYyBpbmxpbmUgdm9pZCBzY2hlZF9hZGp1c3RfYWZmaW5p
dHkoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqcywKLS0gCjIuMTYuNAoKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QK
WGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5v
cmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

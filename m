Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 9D1652FD85
	for <lists+xen-devel@lfdr.de>; Thu, 30 May 2019 16:20:46 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hWLt1-00038V-QX; Thu, 30 May 2019 14:18:31 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=Fq1a=T6=bitdefender.com=ppircalabu@srs-us1.protection.inumbo.net>)
 id 1hWLsz-00036v-F8
 for xen-devel@lists.xenproject.org; Thu, 30 May 2019 14:18:29 +0000
X-Inumbo-ID: c9b316c8-82e5-11e9-8e3e-a371afae5c75
Received: from mx01.bbu.dsd.mx.bitdefender.com (unknown [91.199.104.161])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id c9b316c8-82e5-11e9-8e3e-a371afae5c75;
 Thu, 30 May 2019 14:18:26 +0000 (UTC)
Received: from smtp.bitdefender.com (smtp02.buh.bitdefender.net [10.17.80.76])
 by mx01.bbu.dsd.mx.bitdefender.com (Postfix) with ESMTPS id
 15FED305FFA1; Thu, 30 May 2019 17:18:25 +0300 (EEST)
Received: from bitdefender.com (unknown [195.189.155.70])
 by smtp.bitdefender.com (Postfix) with ESMTPSA id EE83D303442F;
 Thu, 30 May 2019 17:18:24 +0300 (EEST)
From: Petre Pircalabu <ppircalabu@bitdefender.com>
To: xen-devel@lists.xenproject.org
Date: Thu, 30 May 2019 17:18:15 +0300
Message-Id: <a7acd18a3c4bcd288338de12d13ce1cb9fb6d8b2.1559224640.git.ppircalabu@bitdefender.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <cover.1559224640.git.ppircalabu@bitdefender.com>
References: <cover.1559224640.git.ppircalabu@bitdefender.com>
In-Reply-To: <cover.1559224640.git.ppircalabu@bitdefender.com>
References: <cover.1559224640.git.ppircalabu@bitdefender.com>
Subject: [Xen-devel] [PATCH 1/9] tools/libxc: Consistent usage of
 xc_vm_event_* interface
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Petre Pircalabu <ppircalabu@bitdefender.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Wei Liu <wl@xen.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

TW9kaWZpZWQgeGNfbWVtX3BhZ2luZ19lbmFibGUgdG8gdXNlIGRpcmVjdGx5IHhjX3ZtX2V2ZW50
X2VuYWJsZSBhbmQKbW92ZWQgdGhlIHJpbmdfcGFnZSBoYW5kbGluZyBmcm9tIGNsaWVudCB0byBs
aWJ4YyAoeGVucGFnaW5nKS4KClJlc3RyaWN0ZWQgdm1fZXZlbnRfY29udHJvbCB1c2FnZSBvbmx5
IHRvIHNpbXBsZXN0IGRvbWN0bHMgd2hpY2ggZG8Kbm90IGV4cGVjdCBhbnkgcmV0dXJuIHZhbHVl
cyBhbmQgY2hhbmdlIHhjX3ZtX2V2ZW50X2VuYWJsZSB0byBjYWxsIGRvX2RvbWN0bApkaXJlY3Rs
eS4KClJlbW92ZWQgeGNfbWVtc2hyX3JpbmdfZW5hYmxlL2Rpc2FibGUgYW5kIHhjX21lbXNocl9k
b21haW5fcmVzdW1lLgoKU2lnbmVkLW9mZi1ieTogUGV0cmUgUGlyY2FsYWJ1IDxwcGlyY2FsYWJ1
QGJpdGRlZmVuZGVyLmNvbT4KLS0tCiB0b29scy9saWJ4Yy9pbmNsdWRlL3hlbmN0cmwuaCB8IDQ5
ICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogdG9vbHMvbGlieGMveGNfbWVtX3Bh
Z2luZy5jICAgfCAyMyArKysrKy0tLS0tLS0tLS0tCiB0b29scy9saWJ4Yy94Y19tZW1zaHIuYyAg
ICAgICB8IDM0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiB0b29scy9saWJ4Yy94Y19tb25pdG9y
LmMgICAgICB8IDMxICsrKysrKysrKysrKysrKysrLS0tLQogdG9vbHMvbGlieGMveGNfcHJpdmF0
ZS5oICAgICAgfCAgMiArLQogdG9vbHMvbGlieGMveGNfdm1fZXZlbnQuYyAgICAgfCA2NCArKysr
KysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiB0b29scy94ZW5wYWdpbmcv
eGVucGFnaW5nLmMgICB8IDQyICsrKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIDcgZmlsZXMg
Y2hhbmdlZCwgNjIgaW5zZXJ0aW9ucygrKSwgMTgzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L3Rvb2xzL2xpYnhjL2luY2x1ZGUveGVuY3RybC5oIGIvdG9vbHMvbGlieGMvaW5jbHVkZS94ZW5j
dHJsLmgKaW5kZXggNTM4MDA3YS4uMjhmZGJjMCAxMDA2NDQKLS0tIGEvdG9vbHMvbGlieGMvaW5j
bHVkZS94ZW5jdHJsLmgKKysrIGIvdG9vbHMvbGlieGMvaW5jbHVkZS94ZW5jdHJsLmgKQEAgLTE5
NDksNyArMTk0OSw3IEBAIGludCB4Y19hbHRwMm1fY2hhbmdlX2dmbih4Y19pbnRlcmZhY2UgKmhh
bmRsZSwgdWludDMyX3QgZG9taWQsCiAgKiBIYXJkd2FyZS1Bc3Npc3RlZCBQYWdpbmcgKGkuZS4g
SW50ZWwgRVBULCBBTUQgTlBUKS4gTW9yZW92ZXIsIEFNRCBOUFQKICAqIHN1cHBvcnQgaXMgY29u
c2lkZXJlZCBleHBlcmltZW50YWwuCiAgKi8KLWludCB4Y19tZW1fcGFnaW5nX2VuYWJsZSh4Y19p
bnRlcmZhY2UgKnhjaCwgdWludDMyX3QgZG9tYWluX2lkLCB1aW50MzJfdCAqcG9ydCk7Cit2b2lk
ICp4Y19tZW1fcGFnaW5nX2VuYWJsZSh4Y19pbnRlcmZhY2UgKnhjaCwgdWludDMyX3QgZG9tYWlu
X2lkLCB1aW50MzJfdCAqcG9ydCk7CiBpbnQgeGNfbWVtX3BhZ2luZ19kaXNhYmxlKHhjX2ludGVy
ZmFjZSAqeGNoLCB1aW50MzJfdCBkb21haW5faWQpOwogaW50IHhjX21lbV9wYWdpbmdfcmVzdW1l
KHhjX2ludGVyZmFjZSAqeGNoLCB1aW50MzJfdCBkb21haW5faWQpOwogaW50IHhjX21lbV9wYWdp
bmdfbm9taW5hdGUoeGNfaW50ZXJmYWNlICp4Y2gsIHVpbnQzMl90IGRvbWFpbl9pZCwKQEAgLTIw
ODIsNTMgKzIwODIsNiBAQCBpbnQgeGNfbWVtc2hyX2NvbnRyb2woeGNfaW50ZXJmYWNlICp4Y2gs
CiAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgZG9taWQsCiAgICAgICAgICAgICAgICAg
ICAgICAgaW50IGVuYWJsZSk7CiAKLS8qIENyZWF0ZSBhIGNvbW11bmljYXRpb24gcmluZyBpbiB3
aGljaCB0aGUgaHlwZXJ2aXNvciB3aWxsIHBsYWNlIEVOT01FTQotICogbm90aWZpY2F0aW9ucy4K
LSAqCi0gKiBFTk9NRU0gaGFwcGVucyB3aGVuIHVuc2hhcmluZyBwYWdlczogYSBDb3B5LW9uLVdy
aXRlIGR1cGxpY2F0ZSBuZWVkcyB0byBiZQotICogYWxsb2NhdGVkLCBhbmQgdGh1cyB0aGUgb3V0
LW9mLW1lbW9yeSBlcnJvciBvY2N1cnIuCi0gKgotICogRm9yIGNvbXBsZXRlIGV4YW1wbGVzIG9u
IGhvdyB0byBwbHVtYiBhIG5vdGlmaWNhdGlvbiByaW5nLCBsb29rIGludG8KLSAqIHhlbnBhZ2lu
ZyBvciB4ZW4tYWNjZXNzLgotICoKLSAqIE9uIHJlY2VpcHQgb2YgYSBub3RpZmljYXRpb24sIHRo
ZSBoZWxwZXIgc2hvdWxkIGVuc3VyZSB0aGVyZSBpcyBtZW1vcnkKLSAqIGF2YWlsYWJsZSB0byB0
aGUgZG9tYWluIGJlZm9yZSByZXRyeWluZy4KLSAqCi0gKiBJZiBhIGRvbWFpbiBlbmNvdW50ZXJz
IGFuIEVOT01FTSBjb25kaXRpb24gd2hlbiBzaGFyaW5nIGFuZCB0aGlzIHJpbmcKLSAqIGhhcyBu
b3QgYmVlbiBzZXQgdXAsIHRoZSBoeXBlcnZpc29yIHdpbGwgY3Jhc2ggdGhlIGRvbWFpbi4KLSAq
Ci0gKiBGYWlscyB3aXRoOgotICogIEVJTlZBTCBpZiBwb3J0IGlzIE5VTEwKLSAqICBFSU5WQUwg
aWYgdGhlIHNoYXJpbmcgcmluZyBoYXMgYWxyZWFkeSBiZWVuIGVuYWJsZWQKLSAqICBFTk9TWVMg
aWYgbm8gZ3Vlc3QgZ2ZuIGhhcyBiZWVuIHNwZWNpZmllZCB0byBob3N0IHRoZSByaW5nIHZpYSBh
biBodm0gcGFyYW0KLSAqICBFSU5WQUwgaWYgdGhlIGdmbiBmb3IgdGhlIHJpbmcgaGFzIG5vdCBi
ZWVuIHBvcHVsYXRlZAotICogIEVOT0VOVCBpZiB0aGUgZ2ZuIGZvciB0aGUgcmluZyBpcyBwYWdl
ZCBvdXQsIG9yIGNhbm5vdCBiZSB1bnNoYXJlZAotICogIEVJTlZBTCBpZiB0aGUgZ2ZuIGZvciB0
aGUgcmluZyBjYW5ub3QgYmUgd3JpdHRlbiB0bwotICogIEVJTlZBTCBpZiB0aGUgZG9tYWluIGlz
IGR5aW5nCi0gKiAgRU5PU1BDIGlmIGFuIGV2ZW50IGNoYW5uZWwgY2Fubm90IGJlIGFsbG9jYXRl
ZCBmb3IgdGhlIHJpbmcKLSAqICBFTk9NRU0gaWYgbWVtb3J5IGNhbm5vdCBiZSBhbGxvY2F0ZWQg
Zm9yIGludGVybmFsIGRhdGEgc3RydWN0dXJlcwotICogIEVJTlZBTCBvciBFQUNDRVNTIGlmIHRo
ZSByZXF1ZXN0IGlzIGRlbmllZCBieSB0aGUgc2VjdXJpdHkgcG9saWN5Ci0gKi8KLQotaW50IHhj
X21lbXNocl9yaW5nX2VuYWJsZSh4Y19pbnRlcmZhY2UgKnhjaCwgCi0gICAgICAgICAgICAgICAg
ICAgICAgICAgIHVpbnQzMl90IGRvbWlkLAotICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50
MzJfdCAqcG9ydCk7Ci0vKiBEaXNhYmxlIHRoZSByaW5nIGZvciBFTk9NRU0gY29tbXVuaWNhdGlv
bi4KLSAqIE1heSBmYWlsIHdpdGggRUlOVkFMIGlmIHRoZSByaW5nIHdhcyBub3QgZW5hYmxlZCBp
biB0aGUgZmlyc3QgcGxhY2UuCi0gKi8KLWludCB4Y19tZW1zaHJfcmluZ19kaXNhYmxlKHhjX2lu
dGVyZmFjZSAqeGNoLCAKLSAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IGRvbWlk
KTsKLQotLyoKLSAqIENhbGxzIGJlbG93IHJldHVybiBFSU5WQUwgaWYgc2hhcmluZyBoYXMgbm90
IGJlZW4gZW5hYmxlZCBmb3IgdGhlIGRvbWFpbgotICogQ2FsbHMgYmVsb3cgcmV0dXJuIEVJTlZB
TCBpZiB0aGUgZG9tYWluIGlzIGR5aW5nCi0gKi8KLS8qIE9uY2UgYSByZXBvbnNlIHRvIGFuIEVO
T01FTSBub3RpZmljYXRpb24gaXMgcHJlcGFyZWQsIHRoZSB0b29sIGNhbgotICogbm90aWZ5IHRo
ZSBoeXBlcnZpc29yIHRvIHJlLXNjaGVkdWxlIHRoZSBmYXVsdGluZyB2Y3B1IG9mIHRoZSBkb21h
aW4gd2l0aCBhbgotICogZXZlbnQgY2hhbm5lbCBraWNrIGFuZC9vciB0aGlzIGNhbGwuICovCi1p
bnQgeGNfbWVtc2hyX2RvbWFpbl9yZXN1bWUoeGNfaW50ZXJmYWNlICp4Y2gsCi0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdWludDMyX3QgZG9taWQpOwotCiAvKiBTZWxlY3QgYSBwYWdlIGZv
ciBzaGFyaW5nLiAKICAqCiAgKiBBIDY0IGJpdCBvcGFxdWUgaGFuZGxlIHdpbGwgYmUgc3RvcmVk
IGluIGhhbmRsZS4gIFRoZSBoeXBlcnZpc29yIGVuc3VyZXMKZGlmZiAtLWdpdCBhL3Rvb2xzL2xp
YnhjL3hjX21lbV9wYWdpbmcuYyBiL3Rvb2xzL2xpYnhjL3hjX21lbV9wYWdpbmcuYwppbmRleCBh
MDY3NzA2Li4wODQ2OGZiIDEwMDY0NAotLS0gYS90b29scy9saWJ4Yy94Y19tZW1fcGFnaW5nLmMK
KysrIGIvdG9vbHMvbGlieGMveGNfbWVtX3BhZ2luZy5jCkBAIC0zNywzNSArMzcsMjYgQEAgc3Rh
dGljIGludCB4Y19tZW1fcGFnaW5nX21lbW9wKHhjX2ludGVyZmFjZSAqeGNoLCB1aW50MzJfdCBk
b21haW5faWQsCiAgICAgcmV0dXJuIGRvX21lbW9yeV9vcCh4Y2gsIFhFTk1FTV9wYWdpbmdfb3As
ICZtcG8sIHNpemVvZihtcG8pKTsKIH0KIAotaW50IHhjX21lbV9wYWdpbmdfZW5hYmxlKHhjX2lu
dGVyZmFjZSAqeGNoLCB1aW50MzJfdCBkb21haW5faWQsCi0gICAgICAgICAgICAgICAgICAgICAg
ICAgdWludDMyX3QgKnBvcnQpCit2b2lkICp4Y19tZW1fcGFnaW5nX2VuYWJsZSh4Y19pbnRlcmZh
Y2UgKnhjaCwgdWludDMyX3QgZG9tYWluX2lkLAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
dWludDMyX3QgKnBvcnQpCiB7Ci0gICAgaWYgKCAhcG9ydCApCi0gICAgewotICAgICAgICBlcnJu
byA9IEVJTlZBTDsKLSAgICAgICAgcmV0dXJuIC0xOwotICAgIH0KLQotICAgIHJldHVybiB4Y192
bV9ldmVudF9jb250cm9sKHhjaCwgZG9tYWluX2lkLAotICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFhFTl9WTV9FVkVOVF9FTkFCTEUsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgWEVOX0RPTUNUTF9WTV9FVkVOVF9PUF9QQUdJTkcsCi0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcG9ydCk7CisgICAgcmV0dXJuIHhjX3ZtX2V2ZW50X2VuYWJsZSh4Y2gsIGRvbWFp
bl9pZCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhFTl9ET01DVExfVk1fRVZFTlRf
T1BfUEFHSU5HLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9ydCk7CiB9CiAKIGlu
dCB4Y19tZW1fcGFnaW5nX2Rpc2FibGUoeGNfaW50ZXJmYWNlICp4Y2gsIHVpbnQzMl90IGRvbWFp
bl9pZCkKIHsKICAgICByZXR1cm4geGNfdm1fZXZlbnRfY29udHJvbCh4Y2gsIGRvbWFpbl9pZCwK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYRU5fVk1fRVZFTlRfRElTQUJMRSwKLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYRU5fRE9NQ1RMX1ZNX0VWRU5UX09QX1BBR0lO
RywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOVUxMKTsKKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBYRU5fRE9NQ1RMX1ZNX0VWRU5UX09QX1BBR0lORyk7CiB9CiAKIGlu
dCB4Y19tZW1fcGFnaW5nX3Jlc3VtZSh4Y19pbnRlcmZhY2UgKnhjaCwgdWludDMyX3QgZG9tYWlu
X2lkKQogewogICAgIHJldHVybiB4Y192bV9ldmVudF9jb250cm9sKHhjaCwgZG9tYWluX2lkLAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhFTl9WTV9FVkVOVF9SRVNVTUUsCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgWEVOX0RPTUNUTF9WTV9FVkVOVF9PUF9QQUdJTkcs
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTlVMTCk7CisgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgWEVOX0RPTUNUTF9WTV9FVkVOVF9PUF9QQUdJTkcpOwogfQogCiBpbnQg
eGNfbWVtX3BhZ2luZ19ub21pbmF0ZSh4Y19pbnRlcmZhY2UgKnhjaCwgdWludDMyX3QgZG9tYWlu
X2lkLCB1aW50NjRfdCBnZm4pCmRpZmYgLS1naXQgYS90b29scy9saWJ4Yy94Y19tZW1zaHIuYyBi
L3Rvb2xzL2xpYnhjL3hjX21lbXNoci5jCmluZGV4IGQ1ZTEzNWUuLjA2ZjYxM2EgMTAwNjQ0Ci0t
LSBhL3Rvb2xzL2xpYnhjL3hjX21lbXNoci5jCisrKyBiL3Rvb2xzL2xpYnhjL3hjX21lbXNoci5j
CkBAIC00MSwzMSArNDEsNiBAQCBpbnQgeGNfbWVtc2hyX2NvbnRyb2woeGNfaW50ZXJmYWNlICp4
Y2gsCiAgICAgcmV0dXJuIGRvX2RvbWN0bCh4Y2gsICZkb21jdGwpOwogfQogCi1pbnQgeGNfbWVt
c2hyX3JpbmdfZW5hYmxlKHhjX2ludGVyZmFjZSAqeGNoLCAKLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgdWludDMyX3QgZG9taWQsCi0gICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90
ICpwb3J0KQotewotICAgIGlmICggIXBvcnQgKQotICAgIHsKLSAgICAgICAgZXJybm8gPSBFSU5W
QUw7Ci0gICAgICAgIHJldHVybiAtMTsKLSAgICB9Ci0KLSAgICByZXR1cm4geGNfdm1fZXZlbnRf
Y29udHJvbCh4Y2gsIGRvbWlkLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhFTl9W
TV9FVkVOVF9FTkFCTEUsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWEVOX0RPTUNU
TF9WTV9FVkVOVF9PUF9TSEFSSU5HLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBv
cnQpOwotfQotCi1pbnQgeGNfbWVtc2hyX3JpbmdfZGlzYWJsZSh4Y19pbnRlcmZhY2UgKnhjaCwg
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCBkb21pZCkKLXsKLSAgICByZXR1
cm4geGNfdm1fZXZlbnRfY29udHJvbCh4Y2gsIGRvbWlkLAotICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFhFTl9WTV9FVkVOVF9ESVNBQkxFLAotICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFhFTl9ET01DVExfVk1fRVZFTlRfT1BfU0hBUklORywKLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBOVUxMKTsKLX0KLQogc3RhdGljIGludCB4Y19tZW1zaHJfbWVtb3AoeGNf
aW50ZXJmYWNlICp4Y2gsIHVpbnQzMl90IGRvbWlkLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHhlbl9tZW1fc2hhcmluZ19vcF90ICptc28pCiB7CkBAIC0yMDAsMTUgKzE3NSw2IEBAIGlu
dCB4Y19tZW1zaHJfcmFuZ2Vfc2hhcmUoeGNfaW50ZXJmYWNlICp4Y2gsCiAgICAgcmV0dXJuIHhj
X21lbXNocl9tZW1vcCh4Y2gsIHNvdXJjZV9kb21haW4sICZtc28pOwogfQogCi1pbnQgeGNfbWVt
c2hyX2RvbWFpbl9yZXN1bWUoeGNfaW50ZXJmYWNlICp4Y2gsCi0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdWludDMyX3QgZG9taWQpCi17Ci0gICAgcmV0dXJuIHhjX3ZtX2V2ZW50X2NvbnRy
b2woeGNoLCBkb21pZCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYRU5fVk1fRVZF
TlRfUkVTVU1FLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhFTl9ET01DVExfVk1f
RVZFTlRfT1BfU0hBUklORywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOVUxMKTsK
LX0KLQogaW50IHhjX21lbXNocl9kZWJ1Z19nZm4oeGNfaW50ZXJmYWNlICp4Y2gsCiAgICAgICAg
ICAgICAgICAgICAgICAgICB1aW50MzJfdCBkb21pZCwKICAgICAgICAgICAgICAgICAgICAgICAg
IHVuc2lnbmVkIGxvbmcgZ2ZuKQpkaWZmIC0tZ2l0IGEvdG9vbHMvbGlieGMveGNfbW9uaXRvci5j
IGIvdG9vbHMvbGlieGMveGNfbW9uaXRvci5jCmluZGV4IDRhYzgyM2UuLmQxOTBjMjkgMTAwNjQ0
Ci0tLSBhL3Rvb2xzL2xpYnhjL3hjX21vbml0b3IuYworKysgYi90b29scy9saWJ4Yy94Y19tb25p
dG9yLmMKQEAgLTI0LDI0ICsyNCw0MyBAQAogCiB2b2lkICp4Y19tb25pdG9yX2VuYWJsZSh4Y19p
bnRlcmZhY2UgKnhjaCwgdWludDMyX3QgZG9tYWluX2lkLCB1aW50MzJfdCAqcG9ydCkKIHsKLSAg
ICByZXR1cm4geGNfdm1fZXZlbnRfZW5hYmxlKHhjaCwgZG9tYWluX2lkLCBIVk1fUEFSQU1fTU9O
SVRPUl9SSU5HX1BGTiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcnQpOworICAg
IHZvaWQgKmJ1ZmZlcjsKKyAgICBpbnQgc2F2ZWRfZXJybm87CisKKyAgICAvKiBQYXVzZSB0aGUg
ZG9tYWluIGZvciByaW5nIHBhZ2Ugc2V0dXAgKi8KKyAgICBpZiAoIHhjX2RvbWFpbl9wYXVzZSh4
Y2gsIGRvbWFpbl9pZCkgKQorICAgIHsKKyAgICAgICAgUEVSUk9SKCJVbmFibGUgdG8gcGF1c2Ug
ZG9tYWluXG4iKTsKKyAgICAgICAgcmV0dXJuIE5VTEw7CisgICAgfQorCisgICAgYnVmZmVyID0g
eGNfdm1fZXZlbnRfZW5hYmxlKHhjaCwgZG9tYWluX2lkLAorICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBIVk1fUEFSQU1fTU9OSVRPUl9SSU5HX1BGTiwKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgcG9ydCk7CisgICAgc2F2ZWRfZXJybm8gPSBlcnJubzsKKyAgICBpZiAo
IHhjX2RvbWFpbl91bnBhdXNlKHhjaCwgZG9tYWluX2lkKSApCisgICAgeworICAgICAgICBpZiAo
IGJ1ZmZlciApCisgICAgICAgICAgICBzYXZlZF9lcnJubyA9IGVycm5vOworICAgICAgICBQRVJS
T1IoIlVuYWJsZSB0byB1bnBhdXNlIGRvbWFpbiIpOworICAgIH0KKworICAgIGVycm5vID0gc2F2
ZWRfZXJybm87CisgICAgcmV0dXJuIGJ1ZmZlcjsKIH0KIAogaW50IHhjX21vbml0b3JfZGlzYWJs
ZSh4Y19pbnRlcmZhY2UgKnhjaCwgdWludDMyX3QgZG9tYWluX2lkKQogewogICAgIHJldHVybiB4
Y192bV9ldmVudF9jb250cm9sKHhjaCwgZG9tYWluX2lkLAogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFhFTl9WTV9FVkVOVF9ESVNBQkxFLAotICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFhFTl9ET01DVExfVk1fRVZFTlRfT1BfTU9OSVRPUiwKLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBOVUxMKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYRU5f
RE9NQ1RMX1ZNX0VWRU5UX09QX01PTklUT1IpOwogfQogCiBpbnQgeGNfbW9uaXRvcl9yZXN1bWUo
eGNfaW50ZXJmYWNlICp4Y2gsIHVpbnQzMl90IGRvbWFpbl9pZCkKIHsKICAgICByZXR1cm4geGNf
dm1fZXZlbnRfY29udHJvbCh4Y2gsIGRvbWFpbl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBYRU5fVk1fRVZFTlRfUkVTVU1FLAotICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIFhFTl9ET01DVExfVk1fRVZFTlRfT1BfTU9OSVRPUiwKLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBOVUxMKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYRU5fRE9N
Q1RMX1ZNX0VWRU5UX09QX01PTklUT1IpOwogfQogCiBpbnQgeGNfbW9uaXRvcl9nZXRfY2FwYWJp
bGl0aWVzKHhjX2ludGVyZmFjZSAqeGNoLCB1aW50MzJfdCBkb21haW5faWQsCmRpZmYgLS1naXQg
YS90b29scy9saWJ4Yy94Y19wcml2YXRlLmggYi90b29scy9saWJ4Yy94Y19wcml2YXRlLmgKaW5k
ZXggYWRjM2I2YS4uNjYzZTc4YiAxMDA2NDQKLS0tIGEvdG9vbHMvbGlieGMveGNfcHJpdmF0ZS5o
CisrKyBiL3Rvb2xzL2xpYnhjL3hjX3ByaXZhdGUuaApAQCAtNDEyLDcgKzQxMiw3IEBAIGludCB4
Y19mZnM2NCh1aW50NjRfdCB4KTsKICAqIHZtX2V2ZW50IG9wZXJhdGlvbnMuIEludGVybmFsIHVz
ZSBvbmx5LgogICovCiBpbnQgeGNfdm1fZXZlbnRfY29udHJvbCh4Y19pbnRlcmZhY2UgKnhjaCwg
dWludDMyX3QgZG9tYWluX2lkLCB1bnNpZ25lZCBpbnQgb3AsCi0gICAgICAgICAgICAgICAgICAg
ICAgICB1bnNpZ25lZCBpbnQgbW9kZSwgdWludDMyX3QgKnBvcnQpOworICAgICAgICAgICAgICAg
ICAgICAgICAgdW5zaWduZWQgaW50IG1vZGUpOwogLyoKICAqIEVuYWJsZXMgdm1fZXZlbnQgYW5k
IHJldHVybnMgdGhlIG1hcHBlZCByaW5nIHBhZ2UgaW5kaWNhdGVkIGJ5IHBhcmFtLgogICogcGFy
YW0gY2FuIGJlIEhWTV9QQVJBTV9QQUdJTkcvQUNDRVNTL1NIQVJJTkdfUklOR19QRk4KZGlmZiAt
LWdpdCBhL3Rvb2xzL2xpYnhjL3hjX3ZtX2V2ZW50LmMgYi90b29scy9saWJ4Yy94Y192bV9ldmVu
dC5jCmluZGV4IGE5N2M2MTUuLmVhMTAzNjYgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhjL3hjX3Zt
X2V2ZW50LmMKKysrIGIvdG9vbHMvbGlieGMveGNfdm1fZXZlbnQuYwpAQCAtMjMsMjAgKzIzLDE2
IEBACiAjaW5jbHVkZSAieGNfcHJpdmF0ZS5oIgogCiBpbnQgeGNfdm1fZXZlbnRfY29udHJvbCh4
Y19pbnRlcmZhY2UgKnhjaCwgdWludDMyX3QgZG9tYWluX2lkLCB1bnNpZ25lZCBpbnQgb3AsCi0g
ICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgbW9kZSwgdWludDMyX3QgKnBvcnQp
CisgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgbW9kZSkKIHsKICAgICBERUNM
QVJFX0RPTUNUTDsKLSAgICBpbnQgcmM7CiAKICAgICBkb21jdGwuY21kID0gWEVOX0RPTUNUTF92
bV9ldmVudF9vcDsKICAgICBkb21jdGwuZG9tYWluID0gZG9tYWluX2lkOwogICAgIGRvbWN0bC51
LnZtX2V2ZW50X29wLm9wID0gb3A7CiAgICAgZG9tY3RsLnUudm1fZXZlbnRfb3AubW9kZSA9IG1v
ZGU7CiAKLSAgICByYyA9IGRvX2RvbWN0bCh4Y2gsICZkb21jdGwpOwotICAgIGlmICggIXJjICYm
IHBvcnQgKQotICAgICAgICAqcG9ydCA9IGRvbWN0bC51LnZtX2V2ZW50X29wLnUuZW5hYmxlLnBv
cnQ7Ci0gICAgcmV0dXJuIHJjOworICAgIHJldHVybiBkb19kb21jdGwoeGNoLCAmZG9tY3RsKTsK
IH0KIAogdm9pZCAqeGNfdm1fZXZlbnRfZW5hYmxlKHhjX2ludGVyZmFjZSAqeGNoLCB1aW50MzJf
dCBkb21haW5faWQsIGludCBwYXJhbSwKQEAgLTQ2LDcgKzQyLDggQEAgdm9pZCAqeGNfdm1fZXZl
bnRfZW5hYmxlKHhjX2ludGVyZmFjZSAqeGNoLCB1aW50MzJfdCBkb21haW5faWQsIGludCBwYXJh
bSwKICAgICB1aW50NjRfdCBwZm47CiAgICAgeGVuX3Bmbl90IHJpbmdfcGZuLCBtbWFwX3BmbjsK
ICAgICB1bnNpZ25lZCBpbnQgb3AsIG1vZGU7Ci0gICAgaW50IHJjMSwgcmMyLCBzYXZlZF9lcnJu
bzsKKyAgICBpbnQgcmM7CisgICAgREVDTEFSRV9ET01DVEw7CiAKICAgICBpZiAoICFwb3J0ICkK
ICAgICB7CkBAIC01NCwxNyArNTEsOSBAQCB2b2lkICp4Y192bV9ldmVudF9lbmFibGUoeGNfaW50
ZXJmYWNlICp4Y2gsIHVpbnQzMl90IGRvbWFpbl9pZCwgaW50IHBhcmFtLAogICAgICAgICByZXR1
cm4gTlVMTDsKICAgICB9CiAKLSAgICAvKiBQYXVzZSB0aGUgZG9tYWluIGZvciByaW5nIHBhZ2Ug
c2V0dXAgKi8KLSAgICByYzEgPSB4Y19kb21haW5fcGF1c2UoeGNoLCBkb21haW5faWQpOwotICAg
IGlmICggcmMxICE9IDAgKQotICAgIHsKLSAgICAgICAgUEVSUk9SKCJVbmFibGUgdG8gcGF1c2Ug
ZG9tYWluXG4iKTsKLSAgICAgICAgcmV0dXJuIE5VTEw7Ci0gICAgfQotCiAgICAgLyogR2V0IHRo
ZSBwZm4gb2YgdGhlIHJpbmcgcGFnZSAqLwotICAgIHJjMSA9IHhjX2h2bV9wYXJhbV9nZXQoeGNo
LCBkb21haW5faWQsIHBhcmFtLCAmcGZuKTsKLSAgICBpZiAoIHJjMSAhPSAwICkKKyAgICByYyA9
IHhjX2h2bV9wYXJhbV9nZXQoeGNoLCBkb21haW5faWQsIHBhcmFtLCAmcGZuKTsKKyAgICBpZiAo
IHJjICE9IDAgKQogICAgIHsKICAgICAgICAgUEVSUk9SKCJGYWlsZWQgdG8gZ2V0IHBmbiBvZiBy
aW5nIHBhZ2VcbiIpOwogICAgICAgICBnb3RvIG91dDsKQEAgLTcyLDEzICs2MSwxMyBAQCB2b2lk
ICp4Y192bV9ldmVudF9lbmFibGUoeGNfaW50ZXJmYWNlICp4Y2gsIHVpbnQzMl90IGRvbWFpbl9p
ZCwgaW50IHBhcmFtLAogCiAgICAgcmluZ19wZm4gPSBwZm47CiAgICAgbW1hcF9wZm4gPSBwZm47
Ci0gICAgcmMxID0geGNfZ2V0X3Bmbl90eXBlX2JhdGNoKHhjaCwgZG9tYWluX2lkLCAxLCAmbW1h
cF9wZm4pOwotICAgIGlmICggcmMxIHx8IG1tYXBfcGZuICYgWEVOX0RPTUNUTF9QRklORk9fWFRB
QiApCisgICAgcmMgPSB4Y19nZXRfcGZuX3R5cGVfYmF0Y2goeGNoLCBkb21haW5faWQsIDEsICZt
bWFwX3Bmbik7CisgICAgaWYgKCByYyB8fCBtbWFwX3BmbiAmIFhFTl9ET01DVExfUEZJTkZPX1hU
QUIgKQogICAgIHsKICAgICAgICAgLyogUGFnZSBub3QgaW4gdGhlIHBoeXNtYXAsIHRyeSB0byBw
b3B1bGF0ZSBpdCAqLwotICAgICAgICByYzEgPSB4Y19kb21haW5fcG9wdWxhdGVfcGh5c21hcF9l
eGFjdCh4Y2gsIGRvbWFpbl9pZCwgMSwgMCwgMCwKKyAgICAgICAgcmMgPSB4Y19kb21haW5fcG9w
dWxhdGVfcGh5c21hcF9leGFjdCh4Y2gsIGRvbWFpbl9pZCwgMSwgMCwgMCwKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmcmluZ19wZm4pOwotICAgICAgICBp
ZiAoIHJjMSAhPSAwICkKKyAgICAgICAgaWYgKCByYyAhPSAwICkKICAgICAgICAgewogICAgICAg
ICAgICAgUEVSUk9SKCJGYWlsZWQgdG8gcG9wdWxhdGUgcmluZyBwZm5cbiIpOwogICAgICAgICAg
ICAgZ290byBvdXQ7CkBAIC04Nyw3ICs3Niw3IEBAIHZvaWQgKnhjX3ZtX2V2ZW50X2VuYWJsZSh4
Y19pbnRlcmZhY2UgKnhjaCwgdWludDMyX3QgZG9tYWluX2lkLCBpbnQgcGFyYW0sCiAKICAgICBt
bWFwX3BmbiA9IHJpbmdfcGZuOwogICAgIHJpbmdfcGFnZSA9IHhjX21hcF9mb3JlaWduX3BhZ2Vz
KHhjaCwgZG9tYWluX2lkLCBQUk9UX1JFQUQgfCBQUk9UX1dSSVRFLAotICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAmbW1hcF9wZm4sIDEpOworICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZtbWFwX3BmbiwgMSk7CiAgICAgaWYgKCAhcmluZ19wYWdl
ICkKICAgICB7CiAgICAgICAgIFBFUlJPUigiQ291bGQgbm90IG1hcCB0aGUgcmluZyBwYWdlXG4i
KTsKQEAgLTExNyw0MCArMTA2LDM1IEBAIHZvaWQgKnhjX3ZtX2V2ZW50X2VuYWJsZSh4Y19pbnRl
cmZhY2UgKnhjaCwgdWludDMyX3QgZG9tYWluX2lkLCBpbnQgcGFyYW0sCiAgICAgICovCiAgICAg
ZGVmYXVsdDoKICAgICAgICAgZXJybm8gPSBFSU5WQUw7Ci0gICAgICAgIHJjMSA9IC0xOworICAg
ICAgICByYyA9IC0xOwogICAgICAgICBnb3RvIG91dDsKICAgICB9CiAKLSAgICByYzEgPSB4Y192
bV9ldmVudF9jb250cm9sKHhjaCwgZG9tYWluX2lkLCBvcCwgbW9kZSwgcG9ydCk7Ci0gICAgaWYg
KCByYzEgIT0gMCApCisgICAgZG9tY3RsLmNtZCA9IFhFTl9ET01DVExfdm1fZXZlbnRfb3A7Cisg
ICAgZG9tY3RsLmRvbWFpbiA9IGRvbWFpbl9pZDsKKyAgICBkb21jdGwudS52bV9ldmVudF9vcC5v
cCA9IG9wOworICAgIGRvbWN0bC51LnZtX2V2ZW50X29wLm1vZGUgPSBtb2RlOworCisgICAgcmMg
PSBkb19kb21jdGwoeGNoLCAmZG9tY3RsKTsKKyAgICBpZiAoIHJjICE9IDAgKQogICAgIHsKICAg
ICAgICAgUEVSUk9SKCJGYWlsZWQgdG8gZW5hYmxlIHZtX2V2ZW50XG4iKTsKICAgICAgICAgZ290
byBvdXQ7CiAgICAgfQogCisgICAgKnBvcnQgPSBkb21jdGwudS52bV9ldmVudF9vcC51LmVuYWJs
ZS5wb3J0OworCiAgICAgLyogUmVtb3ZlIHRoZSByaW5nX3BmbiBmcm9tIHRoZSBndWVzdCdzIHBo
eXNtYXAgKi8KLSAgICByYzEgPSB4Y19kb21haW5fZGVjcmVhc2VfcmVzZXJ2YXRpb25fZXhhY3Qo
eGNoLCBkb21haW5faWQsIDEsIDAsICZyaW5nX3Bmbik7Ci0gICAgaWYgKCByYzEgIT0gMCApCisg
ICAgcmMgPSB4Y19kb21haW5fZGVjcmVhc2VfcmVzZXJ2YXRpb25fZXhhY3QoeGNoLCBkb21haW5f
aWQsIDEsIDAsICZyaW5nX3Bmbik7CisgICAgaWYgKCByYyAhPSAwICkKICAgICAgICAgUEVSUk9S
KCJGYWlsZWQgdG8gcmVtb3ZlIHJpbmcgcGFnZSBmcm9tIGd1ZXN0IHBoeXNtYXAiKTsKIAogIG91
dDoKLSAgICBzYXZlZF9lcnJubyA9IGVycm5vOwotCi0gICAgcmMyID0geGNfZG9tYWluX3VucGF1
c2UoeGNoLCBkb21haW5faWQpOwotICAgIGlmICggcmMxICE9IDAgfHwgcmMyICE9IDAgKQorICAg
IGlmICggcmMgIT0gMCApCiAgICAgewotICAgICAgICBpZiAoIHJjMiAhPSAwICkKLSAgICAgICAg
ewotICAgICAgICAgICAgaWYgKCByYzEgPT0gMCApCi0gICAgICAgICAgICAgICAgc2F2ZWRfZXJy
bm8gPSBlcnJubzsKLSAgICAgICAgICAgIFBFUlJPUigiVW5hYmxlIHRvIHVucGF1c2UgZG9tYWlu
Iik7Ci0gICAgICAgIH0KLQogICAgICAgICBpZiAoIHJpbmdfcGFnZSApCiAgICAgICAgICAgICB4
ZW5mb3JlaWdubWVtb3J5X3VubWFwKHhjaC0+Zm1lbSwgcmluZ19wYWdlLCAxKTsKICAgICAgICAg
cmluZ19wYWdlID0gTlVMTDsKLQotICAgICAgICBlcnJubyA9IHNhdmVkX2Vycm5vOwogICAgIH0K
IAogICAgIHJldHVybiByaW5nX3BhZ2U7CmRpZmYgLS1naXQgYS90b29scy94ZW5wYWdpbmcveGVu
cGFnaW5nLmMgYi90b29scy94ZW5wYWdpbmcveGVucGFnaW5nLmMKaW5kZXggZDA1NzFjYS4uYjRh
M2E1YyAxMDA2NDQKLS0tIGEvdG9vbHMveGVucGFnaW5nL3hlbnBhZ2luZy5jCisrKyBiL3Rvb2xz
L3hlbnBhZ2luZy94ZW5wYWdpbmcuYwpAQCAtMzM3LDQwICszMzcsMTEgQEAgc3RhdGljIHN0cnVj
dCB4ZW5wYWdpbmcgKnhlbnBhZ2luZ19pbml0KGludCBhcmdjLCBjaGFyICphcmd2W10pCiAgICAg
ICAgIGdvdG8gZXJyOwogICAgIH0KIAotICAgIC8qIE1hcCB0aGUgcmluZyBwYWdlICovCi0gICAg
eGNfZ2V0X2h2bV9wYXJhbSh4Y2gsIHBhZ2luZy0+dm1fZXZlbnQuZG9tYWluX2lkLCAKLSAgICAg
ICAgICAgICAgICAgICAgICAgIEhWTV9QQVJBTV9QQUdJTkdfUklOR19QRk4sICZyaW5nX3Bmbik7
Ci0gICAgbW1hcF9wZm4gPSByaW5nX3BmbjsKLSAgICBwYWdpbmctPnZtX2V2ZW50LnJpbmdfcGFn
ZSA9IAotICAgICAgICB4Y19tYXBfZm9yZWlnbl9wYWdlcyh4Y2gsIHBhZ2luZy0+dm1fZXZlbnQu
ZG9tYWluX2lkLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQUk9UX1JFQUQgfCBQUk9U
X1dSSVRFLCAmbW1hcF9wZm4sIDEpOwotICAgIGlmICggIXBhZ2luZy0+dm1fZXZlbnQucmluZ19w
YWdlICkKLSAgICB7Ci0gICAgICAgIC8qIE1hcCBmYWlsZWQsIHBvcHVsYXRlIHJpbmcgcGFnZSAq
LwotICAgICAgICByYyA9IHhjX2RvbWFpbl9wb3B1bGF0ZV9waHlzbWFwX2V4YWN0KHBhZ2luZy0+
eGNfaGFuZGxlLCAKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwYWdpbmctPnZtX2V2ZW50LmRvbWFpbl9pZCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAxLCAwLCAwLCAmcmluZ19wZm4pOwotICAgICAgICBpZiAoIHJj
ICE9IDAgKQotICAgICAgICB7Ci0gICAgICAgICAgICBQRVJST1IoIkZhaWxlZCB0byBwb3B1bGF0
ZSByaW5nIGdmblxuIik7Ci0gICAgICAgICAgICBnb3RvIGVycjsKLSAgICAgICAgfQotCi0gICAg
ICAgIHBhZ2luZy0+dm1fZXZlbnQucmluZ19wYWdlID0gCi0gICAgICAgICAgICB4Y19tYXBfZm9y
ZWlnbl9wYWdlcyh4Y2gsIHBhZ2luZy0+dm1fZXZlbnQuZG9tYWluX2lkLAotICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgUFJPVF9SRUFEIHwgUFJPVF9XUklURSwKLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZtbWFwX3BmbiwgMSk7Ci0gICAgICAgIGlmICggIXBhZ2lu
Zy0+dm1fZXZlbnQucmluZ19wYWdlICkKLSAgICAgICAgewotICAgICAgICAgICAgUEVSUk9SKCJD
b3VsZCBub3QgbWFwIHRoZSByaW5nIHBhZ2VcbiIpOwotICAgICAgICAgICAgZ290byBlcnI7Ci0g
ICAgICAgIH0KLSAgICB9Ci0gICAgCiAgICAgLyogSW5pdGlhbGlzZSBYZW4gKi8KLSAgICByYyA9
IHhjX21lbV9wYWdpbmdfZW5hYmxlKHhjaCwgcGFnaW5nLT52bV9ldmVudC5kb21haW5faWQsCi0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICZwYWdpbmctPnZtX2V2ZW50LmV2dGNobl9wb3J0
KTsKLSAgICBpZiAoIHJjICE9IDAgKQorICAgIHBhZ2luZy0+dm1fZXZlbnQucmluZ19wYWdlID0K
KyAgICAgICAgICAgIHhjX21lbV9wYWdpbmdfZW5hYmxlKHhjaCwgcGFnaW5nLT52bV9ldmVudC5k
b21haW5faWQsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmcGFnaW5nLT52bV9l
dmVudC5ldnRjaG5fcG9ydCk7CisgICAgaWYgKCBwYWdpbmctPnZtX2V2ZW50LnJpbmdfcGFnZSA9
PSBOVUxMICkKICAgICB7CiAgICAgICAgIHN3aXRjaCAoIGVycm5vICkgewogICAgICAgICAgICAg
Y2FzZSBFQlVTWToKQEAgLTQxOCwxMSArMzg5LDYgQEAgc3RhdGljIHN0cnVjdCB4ZW5wYWdpbmcg
KnhlbnBhZ2luZ19pbml0KGludCBhcmdjLCBjaGFyICphcmd2W10pCiAgICAgICAgICAgICAgICAg
ICAgKHZtX2V2ZW50X3NyaW5nX3QgKilwYWdpbmctPnZtX2V2ZW50LnJpbmdfcGFnZSwKICAgICAg
ICAgICAgICAgICAgICBQQUdFX1NJWkUpOwogCi0gICAgLyogTm93IHRoYXQgdGhlIHJpbmcgaXMg
c2V0LCByZW1vdmUgaXQgZnJvbSB0aGUgZ3Vlc3QncyBwaHlzbWFwICovCi0gICAgaWYgKCB4Y19k
b21haW5fZGVjcmVhc2VfcmVzZXJ2YXRpb25fZXhhY3QoeGNoLCAKLSAgICAgICAgICAgICAgICAg
ICAgcGFnaW5nLT52bV9ldmVudC5kb21haW5faWQsIDEsIDAsICZyaW5nX3BmbikgKQotICAgICAg
ICBQRVJST1IoIkZhaWxlZCB0byByZW1vdmUgcmluZyBmcm9tIGd1ZXN0IHBoeXNtYXAiKTsKLQog
ICAgIC8qIEdldCBtYXhfcGFnZXMgZnJvbSBndWVzdCBpZiBub3QgcHJvdmlkZWQgdmlhIGNtZGxp
bmUgKi8KICAgICBpZiAoICFwYWdpbmctPm1heF9wYWdlcyApCiAgICAgewotLSAKMi43LjQKCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwg
bWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3Rz
LnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

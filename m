Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id ED6A19749D
	for <lists+xen-devel@lfdr.de>; Wed, 21 Aug 2019 10:22:18 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i0Lqq-00080V-0z; Wed, 21 Aug 2019 08:20:16 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=BiIg=WR=amazon.de=prvs=129f3311c=wipawel@srs-us1.protection.inumbo.net>)
 id 1i0Lqp-00080I-7m
 for xen-devel@lists.xenproject.org; Wed, 21 Aug 2019 08:20:15 +0000
X-Inumbo-ID: 809b744c-c3ec-11e9-b95f-bc764e2007e4
Received: from smtp-fw-4101.amazon.com (unknown [72.21.198.25])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 809b744c-c3ec-11e9-b95f-bc764e2007e4;
 Wed, 21 Aug 2019 08:20:14 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.de; i=@amazon.de; q=dns/txt; s=amazon201209;
 t=1566375614; x=1597911614;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=CnbX1wDuqwsOIDTqfSPmgi15x7JFPFCyZA+MJm+f8/Q=;
 b=Tvr4PTJ6zO63TD/XGKW5kOVfCj/CnaMqVphcA8CMhNb2UG47+YLZQC6V
 ZE7S4Pel2HX+TtNz51NeBAE3PSdZDD84BzyfI8/fj/XRCrP5ogeW3ODC4
 /TVYJ1aE6hvrw+bdyPvkfcLhEH/p8aGv/mNiLm/31s5HiF6CUIJL5fpv+ A=;
X-IronPort-AV: E=Sophos;i="5.64,412,1559520000"; d="scan'208";a="780418881"
Received: from iad6-co-svc-p1-lb1-vlan3.amazon.com (HELO
 email-inbound-relay-2b-a7fdc47a.us-west-2.amazon.com) ([10.124.125.6])
 by smtp-border-fw-out-4101.iad4.amazon.com with ESMTP;
 21 Aug 2019 08:20:12 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (pdx4-ws-svc-p6-lb7-vlan2.pdx.amazon.com [10.170.41.162])
 by email-inbound-relay-2b-a7fdc47a.us-west-2.amazon.com (Postfix) with ESMTPS
 id BC36AC5DF6; Wed, 21 Aug 2019 08:20:11 +0000 (UTC)
Received: from EX13D03EUC002.ant.amazon.com (10.43.164.60) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.243) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Wed, 21 Aug 2019 08:19:58 +0000
Received: from EX13MTAUWB001.ant.amazon.com (10.43.161.207) by
 EX13D03EUC002.ant.amazon.com (10.43.164.60) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Wed, 21 Aug 2019 08:19:57 +0000
Received: from dev-dsk-wipawel-1a-0c4e6d58.eu-west-1.amazon.com (10.4.134.33)
 by mail-relay.amazon.com (10.43.161.249) with Microsoft SMTP Server
 id
 15.0.1367.3 via Frontend Transport; Wed, 21 Aug 2019 08:19:53 +0000
From: Pawel Wieczorkiewicz <wipawel@amazon.de>
To: <xen-devel@lists.xen.org>, <xen-devel@lists.xenproject.org>
Date: Wed, 21 Aug 2019 08:19:18 +0000
Message-ID: <20190821081931.90887-2-wipawel@amazon.de>
X-Mailer: git-send-email 2.16.5
In-Reply-To: <20190821081931.90887-1-wipawel@amazon.de>
References: <20190821081931.90887-1-wipawel@amazon.de>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH 01/14] livepatch: Always check hypervisor build
 ID upon hotpatch upload
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: wipawel@amazon.com, Stefano Stabellini <sstabellini@kernel.org>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ross Lagerwall <ross.lagerwall@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, mpohlack@amazon.com,
 Tim Deegan <tim@xen.org>, Pawel Wieczorkiewicz <wipawel@amazon.de>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBjaGFuZ2UgaXMgcGFydCBvZiBhIGluZGVwZW5kYW50IHN0YWNrZWQgaG90cGF0Y2ggbW9k
dWxlcwpmZWF0dXJlLiBUaGlzIGZlYXR1cmUgYWxsb3dzIHRvIGJ5cGFzcyBkZXBlbmRlbmNpZXMg
YmV0d2VlbiBtb2R1bGVzCnVwb24gbG9hZGluZywgYnV0IHN0aWxsIHZlcmlmaWVzIFhlbiBidWls
ZCBJRCBtYXRjaGluZy4KCkluIG9yZGVyIHRvIHByZXZlbnQgKHVwKWxvYWRpbmcgYW55IGhvdHBh
dGNoZXMgYnVpbHQgZm9yIGRpZmZlcmVudApoeXBlcnZpc29yIHZlcnNpb24gYXMgaW5kaWNhdGVk
IGJ5IHRoZSBYZW4gQnVpbGQgSUQsIGFkZCBjaGVja2luZyBmb3IKdGhlIHBheWxvYWQncyB2cyBY
ZW4ncyBidWlsZCBpZCBtYXRjaC4KClRvIGFjaGlldmUgdGhhdCBlbWJlZCBpbnRvIGV2ZXJ5IGhv
dHBhdGNoIGFub3RoZXIgc2VjdGlvbiB3aXRoIGEKZGVkaWNhdGVkIGh5cGVydmlzb3IgYnVpbGQg
aWQgaW4gaXQuIEFmdGVyIHRoZSBwYXlsb2FkIGlzIGxvYWRlZCBhbmQKdGhlIC5saXZlcGF0Y2gu
eGVuX2RlcGVuZHMgc2VjdGlvbiBiZWNvbWVzIGF2YWlsYWJsZSwgcGVyZm9ybSB0aGUKY2hlY2sg
YW5kIHJlamVjdCB0aGUgcGF5bG9hZCBpZiB0aGVyZSBpcyBubyBtYXRjaC4KClNpZ25lZC1vZmYt
Ynk6IFBhd2VsIFdpZWN6b3JraWV3aWN6IDx3aXBhd2VsQGFtYXpvbi5kZT4KUmV2aWV3ZWQtYnk6
IEFuZHJhLUlyaW5hIFBhcmFzY2hpdiA8YW5kcmFwcnNAYW1hem9uLmNvbT4KUmV2aWV3ZWQtYnk6
IEJqb2VybiBEb2ViZWwgPGRvZWJlbEBhbWF6b24uZGU+ClJldmlld2VkLWJ5OiBFc2xhbSBFbG5p
a2V0eSA8ZWxuaWtldHlAYW1hem9uLmRlPgpSZXZpZXdlZC1ieTogTWFydGluIFBvaGxhY2sgPG1w
b2hsYWNrQGFtYXpvbi5kZT4KLS0tCiAuZ2l0aWdub3JlICAgICAgICAgICAgICAgICAgfCAgMSAr
CiBkb2NzL21pc2MvbGl2ZXBhdGNoLnBhbmRvYyAgfCAyOCArKysrKysrKysrKysrKysrKysrLS0t
LS0tLS0KIHhlbi9jb21tb24vbGl2ZXBhdGNoLmMgICAgICB8IDQ3ICsrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKwogeGVuL2luY2x1ZGUveGVuL2xpdmVwYXRjaC5o
IHwgIDcgKysrKy0tLQogeGVuL3Rlc3QvbGl2ZXBhdGNoL01ha2VmaWxlIHwgMzEgKysrKysrKysr
KysrKysrKysrKysrKysrKy0tLS0tCiA1IGZpbGVzIGNoYW5nZWQsIDk4IGluc2VydGlvbnMoKyks
IDE2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhLy5naXRpZ25vcmUgYi8uZ2l0aWdub3JlCmlu
ZGV4IDNjOTQ3YWM5NDguLjZmODNmYzg3MjggMTAwNjQ0Ci0tLSBhLy5naXRpZ25vcmUKKysrIGIv
LmdpdGlnbm9yZQpAQCAtMzEyLDYgKzMxMiw3IEBAIHhlbi90ZXN0L2xpdmVwYXRjaC94ZW5fYnll
X3dvcmxkLmxpdmVwYXRjaAogeGVuL3Rlc3QvbGl2ZXBhdGNoL3hlbl9oZWxsb193b3JsZC5saXZl
cGF0Y2gKIHhlbi90ZXN0L2xpdmVwYXRjaC94ZW5fbm9wLmxpdmVwYXRjaAogeGVuL3Rlc3QvbGl2
ZXBhdGNoL3hlbl9yZXBsYWNlX3dvcmxkLmxpdmVwYXRjaAoreGVuL3Rlc3QvbGl2ZXBhdGNoL3hl
bl9ub194ZW5fYnVpbGRpZC5saXZlcGF0Y2gKIHhlbi90b29scy9rY29uZmlnLy50bXBfZ3RrY2hl
Y2sKIHhlbi90b29scy9rY29uZmlnLy50bXBfcXRjaGVjawogeGVuL3Rvb2xzL3N5bWJvbHMKZGlm
ZiAtLWdpdCBhL2RvY3MvbWlzYy9saXZlcGF0Y2gucGFuZG9jIGIvZG9jcy9taXNjL2xpdmVwYXRj
aC5wYW5kb2MKaW5kZXggNmQ5ZjcyZjQ5Yi4uZmQxZjVkMDEyNiAxMDA2NDQKLS0tIGEvZG9jcy9t
aXNjL2xpdmVwYXRjaC5wYW5kb2MKKysrIGIvZG9jcy9taXNjL2xpdmVwYXRjaC5wYW5kb2MKQEAg
LTI3MCw2ICsyNzAsOCBAQCBsaWtlIHdoYXQgdGhlIExpbnV4IGtlcm5lbCBtb2R1bGUgbG9hZGVy
IGRvZXMuCiBUaGUgcGF5bG9hZCBjb250YWlucyBhdCBsZWFzdCB0aHJlZSBzZWN0aW9uczoKIAog
ICogYC5saXZlcGF0Y2guZnVuY3NgIC0gd2hpY2ggaXMgYW4gYXJyYXkgb2YgbGl2ZXBhdGNoX2Z1
bmMgc3RydWN0dXJlcy4KKyAqIGAubGl2ZXBhdGNoLnhlbl9kZXBlbmRzYCAtIHdoaWNoIGlzIGFu
IEVMRiBOb3RlIHRoYXQgZGVzY3JpYmVzIHdoYXQgWGVuCisgICAgYnVpbGQtaWQgdGhlIHBheWxv
YWQgZGVwZW5kcyBvbi4gKipNVVNUKiogaGF2ZSBvbmUuCiAgKiBgLmxpdmVwYXRjaC5kZXBlbmRz
YCAtIHdoaWNoIGlzIGFuIEVMRiBOb3RlIHRoYXQgZGVzY3JpYmVzIHdoYXQgdGhlIHBheWxvYWQK
ICAgICBkZXBlbmRzIG9uLiAqKk1VU1QqKiBoYXZlIG9uZS4KICAqICBgLm5vdGUuZ251LmJ1aWxk
LWlkYCAtIHRoZSBidWlsZC1pZCBvZiB0aGlzIHBheWxvYWQuICoqTVVTVCoqIGhhdmUgb25lLgpA
QCAtMzgzLDE2ICszODUsMTYgQEAgVGhlIHR5cGUgZGVmaW5pdGlvbiBvZiB0aGUgZnVuY3Rpb24g
YXJlIGFzIGZvbGxvdzoKICAgICB0eXBlZGVmIHZvaWQgKCpsaXZlcGF0Y2hfbG9hZGNhbGxfdCko
dm9pZCk7CiAgICAgdHlwZWRlZiB2b2lkICgqbGl2ZXBhdGNoX3VubG9hZGNhbGxfdCkodm9pZCk7
CiAKLSMjIyAubGl2ZXBhdGNoLmRlcGVuZHMgYW5kIC5ub3RlLmdudS5idWlsZC1pZAorIyMjIC5s
aXZlcGF0Y2gueGVuX2RlcGVuZHMsIC5saXZlcGF0Y2guZGVwZW5kcyBhbmQgLm5vdGUuZ251LmJ1
aWxkLWlkCiAKIFRvIHN1cHBvcnQgZGVwZW5kZW5jaWVzIGNoZWNraW5nIGFuZCBzYWZlIGxvYWRp
bmcgKHRvIGxvYWQgdGhlCiBhcHByb3BpYXRlIHBheWxvYWQgYWdhaW5zdCB0aGUgcmlnaHQgaHlw
ZXJ2aXNvcikgdGhlcmUgaXMgYSBuZWVkCiB0byBlbWJiZWQgYW4gYnVpbGQtaWQgZGVwZW5kZW5j
eS4KIAotVGhpcyBpcyBkb25lIGJ5IHRoZSBwYXlsb2FkIGNvbnRhaW5pbmcgYW4gc2VjdGlvbiBg
LmxpdmVwYXRjaC5kZXBlbmRzYAotd2hpY2ggZm9sbG93cyB0aGUgZm9ybWF0IG9mIGFuIEVMRiBO
b3RlLiBUaGUgY29udGVudHMgb2YgdGhpcwotKG5hbWUsIGFuZCBkZXNjcmlwdGlvbikgYXJlIHNw
ZWNpZmljIHRvIHRoZSBsaW5rZXIgdXRpbGl6ZWQgdG8KLWJ1aWxkIHRoZSBoeXBldmlzb3IgYW5k
IHBheWxvYWQuCitUaGlzIGlzIGRvbmUgYnkgdGhlIHBheWxvYWQgY29udGFpbmluZyBzZWN0aW9u
cyBgLmxpdmVwYXRjaC54ZW5fZGVwZW5kc2AKK2FuZCBgLmxpdmVwYXRjaC5kZXBlbmRzYCB3aGlj
aCBmb2xsb3cgdGhlIGZvcm1hdCBvZiBhbiBFTEYgTm90ZS4KK1RoZSBjb250ZW50cyBvZiB0aGVz
ZSAobmFtZSwgYW5kIGRlc2NyaXB0aW9uKSBhcmUgc3BlY2lmaWMgdG8gdGhlIGxpbmtlcgordXRp
bGl6ZWQgdG8gYnVpbGQgdGhlIGh5cGV2aXNvciBhbmQgcGF5bG9hZC4KIAogSWYgR05VIGxpbmtl
ciBpcyB1c2VkIHRoZW4gdGhlIG5hbWUgaXMgYEdOVWAgYW5kIHRoZSBkZXNjcmlwdGlvbgogaXMg
YSBOVF9HTlVfQlVJTERfSUQgdHlwZSBJRC4gVGhlIGRlc2NyaXB0aW9uIGNhbiBiZSBhbiBTSEEx
CkBAIC00MDAsNiArNDAyLDEzIEBAIGNoZWNrc3VtLCBNRDUgY2hlY2tzdW0gb3IgYW55IHVuaXF1
ZSB2YWx1ZS4KIAogVGhlIHNpemUgb2YgdGhlc2Ugc3RydWN0dXJlcyB2YXJpZXMgd2l0aCB0aGUg
YC0tYnVpbGQtaWRgIGxpbmtlciBvcHRpb24uCiAKK1RoZXJlIGFyZSB0d28ga2luZHMgb2YgYnVp
bGQtaWQgZGVwZW5kZW5jaWVzOgorCisgKiBYZW4gYnVpbGQtaWQgZGVwZW5kZW5jeSAoLmxpdmVw
YXRjaC54ZW5fZGVwZW5kcyBzZWN0aW9uKQorICogcHJldmlvdXMgcGF5bG9hZCBidWlsZC1pZCBk
ZXBlbmRlbmN5ICgubGl2ZXBhdGNoLmRlcGVuZHMgc2VjdGlvbikKKworU2VlICJMaXZlIHBhdGNo
IGludGVyZGVwZW5kZW5jaWVzIiBmb3IgbW9yZSBpbmZvcm1hdGlvbi4KKwogIyMgSHlwZXJjYWxs
cwogCiBXZSB3aWxsIGVtcGxveSB0aGUgc3ViIG9wZXJhdGlvbnMgb2YgdGhlIHN5c3RlbSBtYW5h
Z2VtZW50IGh5cGVyY2FsbCAoc3lzY3RsKS4KQEAgLTg5NCwxMyArOTAzLDE2IEBAIGJ1dCBpcyBt
b3JlIGNvbXBsZXggdG8gaW1wbGVtZW50LgogVGhlIHNlY29uZCBvcHRpb24gd2hpY2ggcmVxdWly
ZXMgYW4gYnVpbGQtaWQgb2YgdGhlIGh5cGVydmlzb3IKIGlzIGltcGxlbWVudGVkIGluIHRoZSBY
ZW4gaHlwZXJ2aXNvci4KIAotU3BlY2lmaWNhbGx5IGVhY2ggcGF5bG9hZCBoYXMgdHdvIGJ1aWxk
LWlkIEVMRiBub3RlczoKK1NwZWNpZmljYWxseSBlYWNoIHBheWxvYWQgaGFzIHRocmVlIGJ1aWxk
LWlkIEVMRiBub3RlczoKICAqIFRoZSBidWlsZC1pZCBvZiB0aGUgcGF5bG9hZCBpdHNlbGYgKGdl
bmVyYXRlZCB2aWEgLS1idWlsZC1pZCkuCisgKiBUaGUgYnVpbGQtaWQgb2YgdGhlIFhlbiBoeXBl
cnZpc29yIGl0IGRlcGVuZHMgb24gKGV4dHJhY3RlZCBmcm9tIHRoZQorICAgaHlwZXJ2aXNvciBk
dXJpbmcgYnVpbGQgdGltZSkuCiAgKiBUaGUgYnVpbGQtaWQgb2YgdGhlIHBheWxvYWQgaXQgZGVw
ZW5kcyBvbiAoZXh0cmFjdGVkIGZyb20gdGhlCiAgICB0aGUgcHJldmlvdXMgcGF5bG9hZCBvciBo
eXBlcnZpc29yIGR1cmluZyBidWlsZCB0aW1lKS4KIAotVGhpcyBtZWFucyB0aGF0IHRoZSB2ZXJ5
IGZpcnN0IHBheWxvYWQgZGVwZW5kcyBvbiB0aGUgaHlwZXJ2aXNvcgotYnVpbGQtaWQuCitUaGlz
IG1lYW5zIHRoYXQgZXZlcnkgcGF5bG9hZCBkZXBlbmRzIG9uIHRoZSBoeXBlcnZpc29yIGJ1aWxk
LWlkIGFuZCBvbgordGhlIGJ1aWxkLWlkIG9mIHRoZSBwcmV2aW91cyBwYXlsb2FkIGluIHRoZSBz
dGFjay4KK1RoZSB2ZXJ5IGZpcnN0IHBheWxvYWQgZGVwZW5kcyBvbiB0aGUgaHlwZXJ2aXNvciBi
dWlsZC1pZCBvbmx5LgogCiAjIE5vdCBZZXQgRG9uZQogCmRpZmYgLS1naXQgYS94ZW4vY29tbW9u
L2xpdmVwYXRjaC5jIGIveGVuL2NvbW1vbi9saXZlcGF0Y2guYwppbmRleCBkNmVhYWU2ZDNiLi42
YTRhZjZjZTU3IDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL2xpdmVwYXRjaC5jCisrKyBiL3hlbi9j
b21tb24vbGl2ZXBhdGNoLmMKQEAgLTc0LDYgKzc0LDcgQEAgc3RydWN0IHBheWxvYWQgewogICAg
IHVuc2lnbmVkIGludCBuc3ltczsgICAgICAgICAgICAgICAgICAvKiBOciBvZiBlbnRyaWVzIGlu
IC5zdHJ0YWIgYW5kIHN5bWJvbHMuICovCiAgICAgc3RydWN0IGxpdmVwYXRjaF9idWlsZF9pZCBp
ZDsgICAgICAgIC8qIEVMRk5PVEVfREVTQygubm90ZS5nbnUuYnVpbGQtaWQpIG9mIHRoZSBwYXls
b2FkLiAqLwogICAgIHN0cnVjdCBsaXZlcGF0Y2hfYnVpbGRfaWQgZGVwOyAgICAgICAvKiBFTEZO
T1RFX0RFU0MoLmxpdmVwYXRjaC5kZXBlbmRzKS4gKi8KKyAgICBzdHJ1Y3QgbGl2ZXBhdGNoX2J1
aWxkX2lkIHhlbl9kZXA7ICAgLyogRUxGTk9URV9ERVNDKC5saXZlcGF0Y2gueGVuX2RlcGVuZHMp
LiAqLwogICAgIGxpdmVwYXRjaF9sb2FkY2FsbF90ICpjb25zdCAqbG9hZF9mdW5jczsgICAvKiBU
aGUgYXJyYXkgb2YgZnVuY3MgdG8gY2FsbCBhZnRlciAqLwogICAgIGxpdmVwYXRjaF91bmxvYWRj
YWxsX3QgKmNvbnN0ICp1bmxvYWRfZnVuY3M7LyogbG9hZCBhbmQgdW5sb2FkIG9mIHRoZSBwYXls
b2FkLiAqLwogICAgIHVuc2lnbmVkIGludCBuX2xvYWRfZnVuY3M7ICAgICAgICAgICAvKiBOciBv
ZiB0aGUgZnVuY3MgdG8gbG9hZCBhbmQgZXhlY3V0ZS4gKi8KQEAgLTQ3NiwxMSArNDc3LDM0IEBA
IHN0YXRpYyBib29sIHNlY3Rpb25fb2soY29uc3Qgc3RydWN0IGxpdmVwYXRjaF9lbGYgKmVsZiwK
ICAgICByZXR1cm4gdHJ1ZTsKIH0KIAorc3RhdGljIGludCBjaGVja194ZW5fYnVpbGRfaWQoY29u
c3Qgc3RydWN0IHBheWxvYWQgKnBheWxvYWQpCit7CisgICAgY29uc3Qgdm9pZCAqaWQgPSBOVUxM
OworICAgIHVuc2lnbmVkIGludCBsZW4gPSAwOworICAgIGludCByYzsKKworICAgIEFTU0VSVChw
YXlsb2FkLT54ZW5fZGVwLmxlbik7CisgICAgQVNTRVJUKHBheWxvYWQtPnhlbl9kZXAucCk7CisK
KyAgICByYyA9IHhlbl9idWlsZF9pZCgmaWQsICZsZW4pOworICAgIGlmICggcmMgKQorICAgICAg
ICByZXR1cm4gcmM7CisKKyAgICBpZiAoIHBheWxvYWQtPnhlbl9kZXAubGVuICE9IGxlbiB8fCBt
ZW1jbXAoaWQsIHBheWxvYWQtPnhlbl9kZXAucCwgbGVuKSApIHsKKyAgICAgICAgZHByaW50ayhY
RU5MT0dfRVJSLCAiJXMlczogY2hlY2sgYWdhaW5zdCBoeXBlcnZpc29yIGJ1aWxkLWlkIGZhaWxl
ZCFcbiIsCisgICAgICAgICAgICAgICAgTElWRVBBVENILCBwYXlsb2FkLT5uYW1lKTsKKyAgICAg
ICAgcmV0dXJuIC1FSU5WQUw7CisgICAgfQorCisgICAgcmV0dXJuIDA7Cit9CisKIHN0YXRpYyBp
bnQgY2hlY2tfc3BlY2lhbF9zZWN0aW9ucyhjb25zdCBzdHJ1Y3QgbGl2ZXBhdGNoX2VsZiAqZWxm
KQogewogICAgIHVuc2lnbmVkIGludCBpOwogICAgIHN0YXRpYyBjb25zdCBjaGFyICpjb25zdCBu
YW1lc1tdID0geyBFTEZfTElWRVBBVENIX0ZVTkMsCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIEVMRl9MSVZFUEFUQ0hfREVQRU5EUywKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgRUxGX0xJVkVQQVRDSF9YRU5fREVQRU5EUywKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRUxGX0JVSUxEX0lEX05PVEV9Owog
ICAgIERFQ0xBUkVfQklUTUFQKGZvdW5kLCBBUlJBWV9TSVpFKG5hbWVzKSkgPSB7IDAgfTsKIApA
QCAtNjMyLDYgKzY1NiwyMiBAQCBzdGF0aWMgaW50IHByZXBhcmVfcGF5bG9hZChzdHJ1Y3QgcGF5
bG9hZCAqcGF5bG9hZCwKICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwogICAgIH0KIAorICAg
IHNlYyA9IGxpdmVwYXRjaF9lbGZfc2VjX2J5X25hbWUoZWxmLCBFTEZfTElWRVBBVENIX1hFTl9E
RVBFTkRTKTsKKyAgICBpZiAoIHNlYyApCisgICAgeworICAgICAgICBuID0gc2VjLT5sb2FkX2Fk
ZHI7CisKKyAgICAgICAgaWYgKCBzZWMtPnNlYy0+c2hfc2l6ZSA8PSBzaXplb2YoKm4pICkKKyAg
ICAgICAgICAgIHJldHVybiAtRUlOVkFMOworCisgICAgICAgIGlmICggeGVuX2J1aWxkX2lkX2No
ZWNrKG4sIHNlYy0+c2VjLT5zaF9zaXplLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAmcGF5bG9hZC0+eGVuX2RlcC5wLCAmcGF5bG9hZC0+eGVuX2RlcC5sZW4pICkKKyAgICAgICAg
ICAgIHJldHVybiAtRUlOVkFMOworCisgICAgICAgIGlmICggIXBheWxvYWQtPnhlbl9kZXAubGVu
IHx8ICFwYXlsb2FkLT54ZW5fZGVwLnAgKQorICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cisg
ICAgfQorCiAgICAgLyogU2V0dXAgdGhlIHZpcnR1YWwgcmVnaW9uIHdpdGggcHJvcGVyIGRhdGEu
ICovCiAgICAgcmVnaW9uID0gJnBheWxvYWQtPnJlZ2lvbjsKIApAQCAtODgyLDYgKzkyMiwxMCBA
QCBzdGF0aWMgaW50IGxvYWRfcGF5bG9hZF9kYXRhKHN0cnVjdCBwYXlsb2FkICpwYXlsb2FkLCB2
b2lkICpyYXcsIHNpemVfdCBsZW4pCiAgICAgaWYgKCByYyApCiAgICAgICAgIGdvdG8gb3V0Owog
CisgICAgcmMgPSBjaGVja194ZW5fYnVpbGRfaWQocGF5bG9hZCk7CisgICAgaWYgKCByYyApCisg
ICAgICAgIGdvdG8gb3V0OworCiAgICAgcmMgPSBidWlsZF9zeW1ib2xfdGFibGUocGF5bG9hZCwg
JmVsZik7CiAgICAgaWYgKCByYyApCiAgICAgICAgIGdvdG8gb3V0OwpAQCAtMTY1NSw2ICsxNjk5
LDkgQEAgc3RhdGljIHZvaWQgbGl2ZXBhdGNoX3ByaW50YWxsKHVuc2lnbmVkIGNoYXIga2V5KQog
CiAgICAgICAgIGlmICggZGF0YS0+ZGVwLmxlbiApCiAgICAgICAgICAgICBwcmludGsoImRlcGVu
ZC1vbj0lKnBoTlxuIiwgZGF0YS0+ZGVwLmxlbiwgZGF0YS0+ZGVwLnApOworCisgICAgICAgIGlm
ICggZGF0YS0+eGVuX2RlcC5sZW4gKQorICAgICAgICAgICAgcHJpbnRrKCJkZXBlbmQtb24teGVu
PSUqcGhOXG4iLCBkYXRhLT54ZW5fZGVwLmxlbiwgZGF0YS0+eGVuX2RlcC5wKTsKICAgICB9CiAK
ICAgICBzcGluX3VubG9jaygmcGF5bG9hZF9sb2NrKTsKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRl
L3hlbi9saXZlcGF0Y2guaCBiL3hlbi9pbmNsdWRlL3hlbi9saXZlcGF0Y2guaAppbmRleCAxYjE4
MTdjYTBkLi5lZDk5N2FhNGNjIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vbGl2ZXBhdGNo
LmgKKysrIGIveGVuL2luY2x1ZGUveGVuL2xpdmVwYXRjaC5oCkBAIC0yOSw5ICsyOSwxMCBAQCBz
dHJ1Y3QgeGVuX3N5c2N0bF9saXZlcGF0Y2hfb3A7CiAvKiBDb252ZW5pZW5jZSBkZWZpbmUgZm9y
IHByaW50ay4gKi8KICNkZWZpbmUgTElWRVBBVENIICAgICAgICAgICAgICJsaXZlcGF0Y2g6ICIK
IC8qIEVMRiBwYXlsb2FkIHNwZWNpYWwgc2VjdGlvbiBuYW1lcy4gKi8KLSNkZWZpbmUgRUxGX0xJ
VkVQQVRDSF9GVU5DICAgICIubGl2ZXBhdGNoLmZ1bmNzIgotI2RlZmluZSBFTEZfTElWRVBBVENI
X0RFUEVORFMgIi5saXZlcGF0Y2guZGVwZW5kcyIKLSNkZWZpbmUgRUxGX0JVSUxEX0lEX05PVEUg
ICAgICAiLm5vdGUuZ251LmJ1aWxkLWlkIgorI2RlZmluZSBFTEZfTElWRVBBVENIX0ZVTkMgICAg
ICAgICIubGl2ZXBhdGNoLmZ1bmNzIgorI2RlZmluZSBFTEZfTElWRVBBVENIX0RFUEVORFMgICAg
ICIubGl2ZXBhdGNoLmRlcGVuZHMiCisjZGVmaW5lIEVMRl9MSVZFUEFUQ0hfWEVOX0RFUEVORFMg
Ii5saXZlcGF0Y2gueGVuX2RlcGVuZHMiCisjZGVmaW5lIEVMRl9CVUlMRF9JRF9OT1RFICAgICAg
ICAgIi5ub3RlLmdudS5idWlsZC1pZCIKIC8qIEFyYml0cmFyeSBsaW1pdCBmb3IgcGF5bG9hZCBz
aXplIGFuZCAuYnNzIHNlY3Rpb24gc2l6ZS4gKi8KICNkZWZpbmUgTElWRVBBVENIX01BWF9TSVpF
ICAgICBNQigyKQogCmRpZmYgLS1naXQgYS94ZW4vdGVzdC9saXZlcGF0Y2gvTWFrZWZpbGUgYi94
ZW4vdGVzdC9saXZlcGF0Y2gvTWFrZWZpbGUKaW5kZXggNjgzMTM4M2RiMS4uZmRiODI3ODJkMiAx
MDA2NDQKLS0tIGEveGVuL3Rlc3QvbGl2ZXBhdGNoL01ha2VmaWxlCisrKyBiL3hlbi90ZXN0L2xp
dmVwYXRjaC9NYWtlZmlsZQpAQCAtMTksMTEgKzE5LDEzIEBAIExJVkVQQVRDSCA6PSB4ZW5faGVs
bG9fd29ybGQubGl2ZXBhdGNoCiBMSVZFUEFUQ0hfQllFIDo9IHhlbl9ieWVfd29ybGQubGl2ZXBh
dGNoCiBMSVZFUEFUQ0hfUkVQTEFDRSA6PSB4ZW5fcmVwbGFjZV93b3JsZC5saXZlcGF0Y2gKIExJ
VkVQQVRDSF9OT1AgOj0geGVuX25vcC5saXZlcGF0Y2gKK0xJVkVQQVRDSF9OT19YRU5fQlVJTERJ
RCA6PSB4ZW5fbm9feGVuX2J1aWxkaWQubGl2ZXBhdGNoCiAKIExJVkVQQVRDSEVTICs9ICQoTElW
RVBBVENIKQogTElWRVBBVENIRVMgKz0gJChMSVZFUEFUQ0hfQllFKQogTElWRVBBVENIRVMgKz0g
JChMSVZFUEFUQ0hfUkVQTEFDRSkKIExJVkVQQVRDSEVTICs9ICQoTElWRVBBVENIX05PUCkKK0xJ
VkVQQVRDSEVTICs9ICQoTElWRVBBVENIX05PX1hFTl9CVUlMRElEKQogCiBMSVZFUEFUQ0hfREVC
VUdfRElSID89ICQoREVCVUdfRElSKS94ZW4tbGl2ZXBhdGNoCiAKQEAgLTU5LDcgKzYxLDcgQEAg
Y29uZmlnLmg6IHhlbl9oZWxsb193b3JsZF9mdW5jLm8KIHhlbl9oZWxsb193b3JsZC5vOiBjb25m
aWcuaAogCiAuUEhPTlk6ICQoTElWRVBBVENIKQotJChMSVZFUEFUQ0gpOiB4ZW5faGVsbG9fd29y
bGRfZnVuYy5vIHhlbl9oZWxsb193b3JsZC5vIG5vdGUubworJChMSVZFUEFUQ0gpOiB4ZW5faGVs
bG9fd29ybGRfZnVuYy5vIHhlbl9oZWxsb193b3JsZC5vIG5vdGUubyB4ZW5fbm90ZS5vCiAJJChM
RCkgJChMREZMQUdTKSAkKGJ1aWxkX2lkX2xpbmtlcikgLXIgLW8gJChMSVZFUEFUQ0gpICReCiAK
ICMKQEAgLTc4LDYgKzgwLDE3IEBAIG5vdGUubzoKIAkJICAgLS1yZW5hbWUtc2VjdGlvbj0uZGF0
YT0ubGl2ZXBhdGNoLmRlcGVuZHMsYWxsb2MsbG9hZCxyZWFkb25seSxkYXRhLGNvbnRlbnRzIC1T
ICRALmJpbiAkQAogCXJtIC1mICRALmJpbgogCisjCisjIEFwcGVuZCAubGl2ZXBhdGNoLnhlbl9k
ZXBlbmRzIHNlY3Rpb24KKyMgd2l0aCBYZW4gYnVpbGQtaWQgZGVyaXZlZCBmcm9tIHhlbi1zeW1z
LgorIworLlBIT05ZOiB4ZW5fbm90ZS5vCit4ZW5fbm90ZS5vOgorCSQoT0JKQ09QWSkgLU8gYmlu
YXJ5IC0tb25seS1zZWN0aW9uPS5ub3RlLmdudS5idWlsZC1pZCAkKEJBU0VESVIpL3hlbi1zeW1z
ICRALmJpbgorCSQoT0JKQ09QWSkgJChPQkpDT1BZX01BR0lDKSBcCisJCSAgIC0tcmVuYW1lLXNl
Y3Rpb249LmRhdGE9LmxpdmVwYXRjaC54ZW5fZGVwZW5kcyxhbGxvYyxsb2FkLHJlYWRvbmx5LGRh
dGEsY29udGVudHMgLVMgJEAuYmluICRACisJcm0gLWYgJEAuYmluCisKICMKICMgRXh0cmFjdCB0
aGUgYnVpbGQtaWQgb2YgdGhlIHhlbl9oZWxsb193b3JsZC5saXZlcGF0Y2gKICMgKHdoaWNoIHhl
bl9ieWVfd29ybGQgd2lsbCBkZXBlbmQgb24pLgpAQCAtOTIsMjAgKzEwNSwyOCBAQCBoZWxsb193
b3JsZF9ub3RlLm86ICQoTElWRVBBVENIKQogeGVuX2J5ZV93b3JsZC5vOiBjb25maWcuaAogCiAu
UEhPTlk6ICQoTElWRVBBVENIX0JZRSkKLSQoTElWRVBBVENIX0JZRSk6IHhlbl9ieWVfd29ybGRf
ZnVuYy5vIHhlbl9ieWVfd29ybGQubyBoZWxsb193b3JsZF9ub3RlLm8KKyQoTElWRVBBVENIX0JZ
RSk6IHhlbl9ieWVfd29ybGRfZnVuYy5vIHhlbl9ieWVfd29ybGQubyBoZWxsb193b3JsZF9ub3Rl
Lm8geGVuX25vdGUubwogCSQoTEQpICQoTERGTEFHUykgJChidWlsZF9pZF9saW5rZXIpIC1yIC1v
ICQoTElWRVBBVENIX0JZRSkgJF4KIAogeGVuX3JlcGxhY2Vfd29ybGQubzogY29uZmlnLmgKIAog
LlBIT05ZOiAkKExJVkVQQVRDSF9SRVBMQUNFKQotJChMSVZFUEFUQ0hfUkVQTEFDRSk6IHhlbl9y
ZXBsYWNlX3dvcmxkX2Z1bmMubyB4ZW5fcmVwbGFjZV93b3JsZC5vIG5vdGUubworJChMSVZFUEFU
Q0hfUkVQTEFDRSk6IHhlbl9yZXBsYWNlX3dvcmxkX2Z1bmMubyB4ZW5fcmVwbGFjZV93b3JsZC5v
IG5vdGUubyB4ZW5fbm90ZS5vCiAJJChMRCkgJChMREZMQUdTKSAkKGJ1aWxkX2lkX2xpbmtlcikg
LXIgLW8gJChMSVZFUEFUQ0hfUkVQTEFDRSkgJF4KIAogeGVuX25vcC5vOiBjb25maWcuaAogCiAu
UEhPTlk6ICQoTElWRVBBVENIX05PUCkKLSQoTElWRVBBVENIX05PUCk6IHhlbl9ub3AubyBub3Rl
Lm8KKyQoTElWRVBBVENIX05PUCk6IHhlbl9ub3AubyBub3RlLm8geGVuX25vdGUubwogCSQoTEQp
ICQoTERGTEFHUykgJChidWlsZF9pZF9saW5rZXIpIC1yIC1vICQoTElWRVBBVENIX05PUCkgJF4K
IAorIyBUaGlzIG9uZSBhbHdheXMgZmFpbHMgdXBvbiB1cGxvYWQsIGJlY2F1c2UgaXQgZGVsaWJl
cmV0ZWx5CisjIGRvZXMgbm90IGhhdmUgYSAubGl2ZXBhdGNoLnhlbl9kZXBlbmRzICh4ZW5fbm90
ZS5vKSBzZWN0aW9uLgoreGVuX25vX3hlbl9idWlsZGlkLm86IGNvbmZpZy5oCisKKy5QSE9OWTog
JChMSVZFUEFUQ0hfTk9fWEVOX0JVSUxESUQpCiskKExJVkVQQVRDSF9OT19YRU5fQlVJTERJRCk6
IHhlbl9ub3AubyBub3RlLm8KKwkkKExEKSAkKExERkxBR1MpICQoYnVpbGRfaWRfbGlua2VyKSAt
ciAtbyAkKExJVkVQQVRDSF9OT19YRU5fQlVJTERJRCkgJF4KKwogLlBIT05ZOiBsaXZlcGF0Y2gK
LWxpdmVwYXRjaDogJChMSVZFUEFUQ0gpICQoTElWRVBBVENIX0JZRSkgJChMSVZFUEFUQ0hfUkVQ
TEFDRSkgJChMSVZFUEFUQ0hfTk9QKQorbGl2ZXBhdGNoOiAkKExJVkVQQVRDSCkgJChMSVZFUEFU
Q0hfQllFKSAkKExJVkVQQVRDSF9SRVBMQUNFKSAkKExJVkVQQVRDSF9OT1ApICQoTElWRVBBVENI
X05PX1hFTl9CVUlMRElEKQotLSAKMi4xNi41CgoKCgpBbWF6b24gRGV2ZWxvcG1lbnQgQ2VudGVy
IEdlcm1hbnkgR21iSApLcmF1c2Vuc3RyLiAzOAoxMDExNyBCZXJsaW4KR2VzY2hhZWZ0c2Z1ZWhy
dW5nOiBDaHJpc3RpYW4gU2NobGFlZ2VyLCBSYWxmIEhlcmJyaWNoCkVpbmdldHJhZ2VuIGFtIEFt
dHNnZXJpY2h0IENoYXJsb3R0ZW5idXJnIHVudGVyIEhSQiAxNDkxNzMgQgpTaXR6OiBCZXJsaW4K
VXN0LUlEOiBERSAyODkgMjM3IDg3OQoKCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMu
eGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B96A9A32A3
	for <lists+xen-devel@lfdr.de>; Fri, 30 Aug 2019 10:32:39 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i3cIN-0006UM-ET; Fri, 30 Aug 2019 08:30:11 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=0MMg=W2=citrix.com=paul.durrant@srs-us1.protection.inumbo.net>)
 id 1i3cIL-0006RL-FZ
 for xen-devel@lists.xenproject.org; Fri, 30 Aug 2019 08:30:09 +0000
X-Inumbo-ID: 5ab57370-cb00-11e9-8980-bc764e2007e4
Received: from esa2.hc3370-68.iphmx.com (unknown [216.71.145.153])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 5ab57370-cb00-11e9-8980-bc764e2007e4;
 Fri, 30 Aug 2019 08:29:59 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1567153800;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=4Sv/ULLfqi382/Uhxwbm8wiEQRrhVG6AcjaTaRvhocs=;
 b=I0qqjOpPlNHySzbgdWcZYMdGnskJS5TVhShk/X6dSH3o7CagUVUZCdtv
 cknK/YBooC/AN45Qj0oburekxLEo8juDggaLPZbtUB6I8rFWU8UDlbikx
 8/EYjn4Qojg+L/xKJ8ziody07fgeqiAVzzsEz5oBl8zzzQsesDuG5ndSp s=;
Authentication-Results: esa2.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=paul.durrant@citrix.com;
 spf=Pass smtp.mailfrom=Paul.Durrant@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa2.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 paul.durrant@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa2.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="paul.durrant@citrix.com"; x-conformance=sidf_compatible
Received-SPF: Pass (esa2.hc3370-68.iphmx.com: domain of
 Paul.Durrant@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa2.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="Paul.Durrant@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83 ~all"
Received-SPF: None (esa2.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa2.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: kuoyxiXpljUBzcHezgKDQ4aKhX6N3CesuxJltSwZEZoo4FCvW+Qvk1vRjH0kaGgs95iqxssYY6
 spCRSiyRIhGKjhUpPgB9CPo1tBZA97no4Gmat82l2LdVPwnlY/Zn3+daKqHzy16L8+qm3zf5o3
 PNRYKlag9Ez0qjamvgaeSX6It2A+qqCxE/X2/3cQLoOG9rwwdFEm7i0Jps8fRMGq4Nua20Ar0x
 zr/nG3JNwrbCe61EqmP1HW1Y9ldBptbGquX3fZ81WNgg232tnlz+Il14u3rHOnQekWx27RcVpU
 VxU=
X-SBRS: 2.7
X-MesageID: 4925071
X-Ironport-Server: esa2.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.64,446,1559534400"; 
   d="scan'208";a="4925071"
From: Paul Durrant <paul.durrant@citrix.com>
To: <xen-devel@lists.xenproject.org>
Date: Fri, 30 Aug 2019 09:29:49 +0100
Message-ID: <20190830082953.2192-3-paul.durrant@citrix.com>
X-Mailer: git-send-email 2.20.1.2.gb21ebb671
In-Reply-To: <20190830082953.2192-1-paul.durrant@citrix.com>
References: <20190830082953.2192-1-paul.durrant@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v7 2/6] domain: introduce XEN_DOMCTL_CDF_iommu
 flag
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>, Paul Durrant <paul.durrant@citrix.com>,
 Christian Lindig <christian.lindig@citrix.com>,
 Jan Beulich <jbeulich@suse.com>, David Scott <dave@recoil.org>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBwYXRjaCBpbnRyb2R1Y2VzIGEgY29tbW9uIGRvbWFpbiBjcmVhdGlvbiBmbGFnIHRvIGRl
dGVybWluZSB3aGV0aGVyCnRoZSBkb21haW4gaXMgcGVybWl0dGVkIHRvIG1ha2UgdXNlIG9mIHRo
ZSBJT01NVS4gQ3VycmVudGx5IHRoZSBmbGFnIGlzCmFsd2F5cyBzZXQgKGZvciBib3RoIGRvbTAg
YW5kIGRvbVUpIGlmIHRoZSBJT01NVSBpcyBnbG9iYWxseSBlbmFibGVkCihpLmUuIGlvbW11X2Vu
YWJsZWQgPT0gMSkuIHNhbml0aXNlX2RvbWFpbl9jb25maWcoKSBpcyBtb2RpZmllZCB0byByZWpl
Y3QKdGhlIGZsYWcgaWYgIWlvbW11X2VuYWJsZWQuCgpBIG5ldyBoZWxwZXIgZnVuY3Rpb24sIGlz
X2lvbW11X2VuYWJsZWQoKSwgaXMgYWRkZWQgdG8gdGVzdCB0aGUgZmxhZyBhbmQKaW9tbXVfZG9t
YWluX2luaXQoKSB3aWxsIHJldHVybiBpbW1lZGlhdGVseSBpZiAhaXNfaW9tbXVfZW5hYmxlZCgp
LiBUaGlzIGlzCnNsaWdodGx5IGRpZmZlcmVudCB0byB0aGUgcHJldmlvdXMgYmVoYXZpb3VyIGJh
c2VkIG9uICFpb21tdV9lbmFibGVkIHdoZXJlCnRoZSBjYWxsIHRvIGFyY2hfaW9tbXVfZG9tYWlu
X2luaXQoKSB3YXMgbWFkZSByZWdhcmRsZXNzLCBob3dldmVyIGl0IGFwcGVhcnMKdGhhdCB0aGlz
IGNhbGwgd2FzIG9ubHkgbmVjZXNzYXJ5IHRvIGluaXRpYWxpemUgdGhlIGR0X2RldmljZXMgbGlz
dCBmb3IgQVJNCnN1Y2ggdGhhdCBpb21tdV9yZWxlYXNlX2R0X2RldmljZXMoKSBjYW4gYmUgY2Fs
bGVkIHVuY29uZGl0aW9uYWxseSBieQpkb21haW5fcmVsaW5xdWlzaF9yZXNvdXJjZXMoKS4gQWRk
aW5nIGEgc2ltcGxlIGNoZWNrIG9mIGlzX2lvbW11X2VuYWJsZWQoKQppbnRvIGlvbW11X3JlbGVh
c2VfZHRfZGV2aWNlcygpIGtlZXBzIHRoaXMgdW5jb25kaXRpb25hbCBjYWxsIHdvcmtpbmcuCgpO
byBmdW5jdGlvbmFsIGNoYW5nZSBzaG91bGQgYmUgb2JzZXJ2ZWQgd2l0aCB0aGlzIHBhdGNoIGFw
cGxpZWQuCgpTdWJzZXF1ZW50IHBhdGNoZXMgd2lsbCBhbGxvdyB0aGUgdG9vbHN0YWNrIHRvIGNv
bnRyb2wgd2hldGhlciB1c2Ugb2YgdGhlCklPTU1VIGlzIGVuYWJsZWQgZm9yIGEgZG9tYWluLgoK
Tk9URTogVGhlIGludHJvZHVjdGlvbiBvZiB0aGUgaXNfaW9tbXVfZW5hYmxlZCgpIGhlbHBlciBm
dW5jdGlvbiBtaWdodAogICAgICBzZWVtIGV4Y2Vzc2l2ZSBidXQgaXRzIHVzZSBpcyBleHBlY3Rl
ZCB0byBpbmNyZWFzZSB3aXRoIHN1YnNlcXVlbnQKICAgICAgcGF0Y2hlcy4gQWxzbywgaGF2aW5n
IGlvbW11X2RvbWFpbl9pbml0KCkgYmFpbCBiZWZvcmUgY2FsbGluZwogICAgICBhcmNoX2lvbW11
X2RvbWFpbl9pbml0KCkgaXMgbm90IHN0cmljdGx5IG5lY2Vzc2FyeSwgYnV0IEkgdGhpbmsgdGhl
CiAgICAgIGNvbnNlcXVlbnQgYWRkaXRpb24gb2YgdGhlIGNhbGwgdG8gaXNfaW9tbXVfZW5hYmxl
ZCgpIGluCiAgICAgIGlvbW11X3JlbGVhc2VfZHRfZGV2aWNlcygpIG1ha2VzIHRoZSBjb2RlIGNs
ZWFyZXIuCgpTaWduZWQtb2ZmLWJ5OiBQYXVsIER1cnJhbnQgPHBhdWwuZHVycmFudEBjaXRyaXgu
Y29tPgpSZXZpZXdlZC1ieTogIlJvZ2VyIFBhdSBNb25uw6kiIDxyb2dlci5wYXVAY2l0cml4LmNv
bT4KLS0tCkNjOiBDaHJpc3RpYW4gTGluZGlnIDxjaHJpc3RpYW4ubGluZGlnQGNpdHJpeC5jb20+
CkNjOiBEYXZpZCBTY290dCA8ZGF2ZUByZWNvaWwub3JnPgpDYzogSWFuIEphY2tzb24gPGlhbi5q
YWNrc29uQGV1LmNpdHJpeC5jb20+CkNjOiBXZWkgTGl1IDx3bEB4ZW4ub3JnPgpDYzogQW5kcmV3
IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KQ2M6IEdlb3JnZSBEdW5sYXAgPEdl
b3JnZS5EdW5sYXBAZXUuY2l0cml4LmNvbT4KQ2M6IEphbiBCZXVsaWNoIDxqYmV1bGljaEBzdXNl
LmNvbT4KQ2M6IEp1bGllbiBHcmFsbCA8anVsaWVuLmdyYWxsQGFybS5jb20+CkNjOiBLb25yYWQg
Unplc3p1dGVrIFdpbGsgPGtvbnJhZC53aWxrQG9yYWNsZS5jb20+CkNjOiBTdGVmYW5vIFN0YWJl
bGxpbmkgPHNzdGFiZWxsaW5pQGtlcm5lbC5vcmc+CkNjOiBUaW0gRGVlZ2FuIDx0aW1AeGVuLm9y
Zz4KQ2M6IFZvbG9keW15ciBCYWJjaHVrIDxWb2xvZHlteXJfQmFiY2h1a0BlcGFtLmNvbT4KClBy
ZXZpb3VzbHkgcGFydCBvZiBzZXJpZXMgaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9hcmNo
aXZlcy9odG1sL3hlbi1kZXZlbC8yMDE5LTA3L21zZzAyMjY3Lmh0bWwKCnY3OgogLSBBZGQgYSBj
aGVjayB0byB2ZXJpZnkgdGhhdCB0aGUgdG9vbHN0YWNrIGhhcyBub3Qgc2V0IFhFTl9ET01DVExf
Q0RGX2lvbW11CiAtIEFkZCBtaXNzaW5nIG9jYW1sIGJpbmRpbmcgY2hhbmdlcwoKdjY6CiAtIFJl
bW92ZSB0aGUgdG9vbHN0YWNrIHBhcnRzIGFzIHRoZXJlJ3Mgbm8gbmljZSBtZXRob2Qgb2YgdGVz
dGluZyB3aGV0aGVyCiAgIHRoZSBJT01NVSBpcyBlbmFibGVkIGluIGFuIGFyY2hpdGVjdHVyZS1u
ZXV0cmFsIHdheQoKdjU6CiAtIE1vdmUgaXNfaW9tbXVfZW5hYmxlZCgpIGNoZWNrIGludG8gaW9t
bXVfZG9tYWluX2luaXQoKQogLSBSZWplY3QgWEVOX0RPTUNUTF9DREZfaW9tbXUgaW4gc2FuaXRp
c2VfZG9tYWluX2NvbmZpZygpIGlmICFpb21tdV9lbmFibGVkCiAtIFVzZSBldmFsdWF0ZV9ub3Nw
ZWMoKSBpbiBkZWZpbnRpb24gb2YgaXNfaW9tbXVfZW5hYmxlZCgpCi0tLQogdG9vbHMvb2NhbWwv
bGlicy94Yy94ZW5jdHJsLm1sICAgICAgICB8ICA4ICsrKysrKystCiB0b29scy9vY2FtbC9saWJz
L3hjL3hlbmN0cmwubWxpICAgICAgIHwgIDggKysrKysrKy0KIHhlbi9hcmNoL2FybS9zZXR1cC5j
ICAgICAgICAgICAgICAgICAgfCAgMyArKysKIHhlbi9hcmNoL3g4Ni9zZXR1cC5jICAgICAgICAg
ICAgICAgICAgfCAgMyArKysKIHhlbi9jb21tb24vZG9tYWluLmMgICAgICAgICAgICAgICAgICAg
fCAgOSArKysrKysrKy0KIHhlbi9jb21tb24vZG9tY3RsLmMgICAgICAgICAgICAgICAgICAgfCAx
MyArKysrKysrKysrKysrCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9kZXZpY2VfdHJlZS5jIHwg
IDMgKysrCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5jICAgICAgIHwgIDYgKysrLS0t
CiB4ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmggICAgICAgICAgIHwgIDQgKysrKwogeGVuL2lu
Y2x1ZGUveGVuL3NjaGVkLmggICAgICAgICAgICAgICB8ICA1ICsrKysrCiAxMCBmaWxlcyBjaGFu
Z2VkLCA1NiBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Rvb2xz
L29jYW1sL2xpYnMveGMveGVuY3RybC5tbCBiL3Rvb2xzL29jYW1sL2xpYnMveGMveGVuY3RybC5t
bAppbmRleCAzNTk1OGI5NGQ1Li5iZGYzZjJlMzk1IDEwMDY0NAotLS0gYS90b29scy9vY2FtbC9s
aWJzL3hjL3hlbmN0cmwubWwKKysrIGIvdG9vbHMvb2NhbWwvbGlicy94Yy94ZW5jdHJsLm1sCkBA
IC01Niw3ICs1NiwxMyBAQCB0eXBlIGFyY2hfZG9tYWluY29uZmlnID0KIAl8IEFSTSBvZiB4ZW5f
YXJtX2FyY2hfZG9tYWluY29uZmlnCiAJfCBYODYgb2YgeGVuX3g4Nl9hcmNoX2RvbWFpbmNvbmZp
ZwogCi10eXBlIGRvbWFpbl9jcmVhdGVfZmxhZyA9IENERl9IVk0gfCBDREZfSEFQCit0eXBlIGRv
bWFpbl9jcmVhdGVfZmxhZyA9CisJfCBDREZfSFZNCisJfCBDREZfSEFQCisJfCBDREZfUzNfSU5U
RUdSSVRZCisJfCBDREZfT09TX09GRgorCXwgQ0RGX1hTX0RPTUFJTgorCXwgQ0RGX0lPTU1VCiAK
IHR5cGUgZG9tY3RsX2NyZWF0ZV9jb25maWcgPQogewpkaWZmIC0tZ2l0IGEvdG9vbHMvb2NhbWwv
bGlicy94Yy94ZW5jdHJsLm1saSBiL3Rvb2xzL29jYW1sL2xpYnMveGMveGVuY3RybC5tbGkKaW5k
ZXggNmM0MjY4ZDQ1My4uZmM0MDg4NTY3MSAxMDA2NDQKLS0tIGEvdG9vbHMvb2NhbWwvbGlicy94
Yy94ZW5jdHJsLm1saQorKysgYi90b29scy9vY2FtbC9saWJzL3hjL3hlbmN0cmwubWxpCkBAIC00
OSw3ICs0OSwxMyBAQCB0eXBlIGFyY2hfZG9tYWluY29uZmlnID0KICAgfCBBUk0gb2YgeGVuX2Fy
bV9hcmNoX2RvbWFpbmNvbmZpZwogICB8IFg4NiBvZiB4ZW5feDg2X2FyY2hfZG9tYWluY29uZmln
CiAKLXR5cGUgZG9tYWluX2NyZWF0ZV9mbGFnID0gQ0RGX0hWTSB8IENERl9IQVAKK3R5cGUgZG9t
YWluX2NyZWF0ZV9mbGFnID0KKyAgfCBDREZfSFZNCisgIHwgQ0RGX0hBUAorICB8IENERl9TM19J
TlRFR1JJVFkKKyAgfCBDREZfT09TX09GRgorICB8IENERl9YU19ET01BSU4KKyAgfCBDREZfSU9N
TVUKIAogdHlwZSBkb21jdGxfY3JlYXRlX2NvbmZpZyA9IHsKICAgc3NpZHJlZjogaW50MzI7CmRp
ZmYgLS1naXQgYS94ZW4vYXJjaC9hcm0vc2V0dXAuYyBiL3hlbi9hcmNoL2FybS9zZXR1cC5jCmlu
ZGV4IGZhNmMxMTBiMTEuLmRjMjY0MGY4YjkgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL2FybS9zZXR1
cC5jCisrKyBiL3hlbi9hcmNoL2FybS9zZXR1cC5jCkBAIC05NjEsNiArOTYxLDkgQEAgdm9pZCBf
X2luaXQgc3RhcnRfeGVuKHVuc2lnbmVkIGxvbmcgYm9vdF9waHlzX29mZnNldCwKICAgICBkb20w
X2NmZy5hcmNoLnRlZV90eXBlID0gdGVlX2dldF90eXBlKCk7CiAgICAgZG9tMF9jZmcubWF4X3Zj
cHVzID0gZG9tMF9tYXhfdmNwdXMoKTsKIAorICAgIGlmICggaW9tbXVfZW5hYmxlZCApCisgICAg
ICAgIGRvbTBfY2ZnLmZsYWdzIHw9IFhFTl9ET01DVExfQ0RGX2lvbW11OworCiAgICAgZG9tMCA9
IGRvbWFpbl9jcmVhdGUoMCwgJmRvbTBfY2ZnLCB0cnVlKTsKICAgICBpZiAoIElTX0VSUihkb20w
KSB8fCAoYWxsb2NfZG9tMF92Y3B1MChkb20wKSA9PSBOVUxMKSApCiAgICAgICAgIHBhbmljKCJF
cnJvciBjcmVhdGluZyBkb21haW4gMFxuIik7CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvc2V0
dXAuYyBiL3hlbi9hcmNoL3g4Ni9zZXR1cC5jCmluZGV4IGQwYjM1YjBjZTIuLmZhMjI2YTJiYWIg
MTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9zZXR1cC5jCisrKyBiL3hlbi9hcmNoL3g4Ni9zZXR1
cC5jCkBAIC0xNzMzLDYgKzE3MzMsOSBAQCB2b2lkIF9faW5pdCBub3JldHVybiBfX3N0YXJ0X3hl
bih1bnNpZ25lZCBsb25nIG1iaV9wKQogICAgIH0KICAgICBkb20wX2NmZy5tYXhfdmNwdXMgPSBk
b20wX21heF92Y3B1cygpOwogCisgICAgaWYgKCBpb21tdV9lbmFibGVkICkKKyAgICAgICAgZG9t
MF9jZmcuZmxhZ3MgfD0gWEVOX0RPTUNUTF9DREZfaW9tbXU7CisKICAgICAvKiBDcmVhdGUgaW5p
dGlhbCBkb21haW4gMC4gKi8KICAgICBkb20wID0gZG9tYWluX2NyZWF0ZShnZXRfaW5pdGlhbF9k
b21haW5faWQoKSwgJmRvbTBfY2ZnLCAhcHZfc2hpbSk7CiAgICAgaWYgKCBJU19FUlIoZG9tMCkg
fHwgKGFsbG9jX2RvbTBfdmNwdTAoZG9tMCkgPT0gTlVMTCkgKQpkaWZmIC0tZ2l0IGEveGVuL2Nv
bW1vbi9kb21haW4uYyBiL3hlbi9jb21tb24vZG9tYWluLmMKaW5kZXggZWIxMzgwN2FmOS4uYjJi
ZDZiNjBhMyAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9kb21haW4uYworKysgYi94ZW4vY29tbW9u
L2RvbWFpbi5jCkBAIC0zMDEsNyArMzAxLDggQEAgc3RhdGljIGludCBzYW5pdGlzZV9kb21haW5f
Y29uZmlnKHN0cnVjdCB4ZW5fZG9tY3RsX2NyZWF0ZWRvbWFpbiAqY29uZmlnKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgWEVOX0RPTUNUTF9DREZfaGFwIHwKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFhFTl9ET01DVExfQ0RGX3MzX2ludGVncml0eSB8CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBYRU5fRE9NQ1RMX0NERl9vb3Nfb2ZmIHwKLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFhFTl9ET01DVExfQ0RGX3hzX2RvbWFpbikgKQorICAgICAgICAgICAgICAgICAgICAg
ICAgICAgWEVOX0RPTUNUTF9DREZfeHNfZG9tYWluIHwKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgIFhFTl9ET01DVExfQ0RGX2lvbW11KSApCiAgICAgewogICAgICAgICBkcHJpbnRrKFhFTkxP
R19JTkZPLCAiVW5rbm93biBDREYgZmxhZ3MgJSN4XG4iLCBjb25maWctPmZsYWdzKTsKICAgICAg
ICAgcmV0dXJuIC1FSU5WQUw7CkBAIC0zMjgsNiArMzI5LDEyIEBAIHN0YXRpYyBpbnQgc2FuaXRp
c2VfZG9tYWluX2NvbmZpZyhzdHJ1Y3QgeGVuX2RvbWN0bF9jcmVhdGVkb21haW4gKmNvbmZpZykK
ICAgICAgICAgY29uZmlnLT5mbGFncyB8PSBYRU5fRE9NQ1RMX0NERl9vb3Nfb2ZmOwogICAgIH0K
IAorICAgIGlmICggKGNvbmZpZy0+ZmxhZ3MgJiBYRU5fRE9NQ1RMX0NERl9pb21tdSkgJiYgIWlv
bW11X2VuYWJsZWQgKQorICAgIHsKKyAgICAgICAgZHByaW50ayhYRU5MT0dfSU5GTywgIklPTU1V
IGlzIG5vdCBlbmFibGVkXG4iKTsKKyAgICAgICAgcmV0dXJuIC1FSU5WQUw7CisgICAgfQorCiAg
ICAgcmV0dXJuIGFyY2hfc2FuaXRpc2VfZG9tYWluX2NvbmZpZyhjb25maWcpOwogfQogCmRpZmYg
LS1naXQgYS94ZW4vY29tbW9uL2RvbWN0bC5jIGIveGVuL2NvbW1vbi9kb21jdGwuYwppbmRleCA2
ZTZlOWI5ODY2Li41ZGNmZTNjOGY2IDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL2RvbWN0bC5jCisr
KyBiL3hlbi9jb21tb24vZG9tY3RsLmMKQEAgLTUxNSw2ICs1MTUsMTkgQEAgbG9uZyBkb19kb21j
dGwoWEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh4ZW5fZG9tY3RsX3QpIHVfZG9tY3RsKQogICAgICAg
ICAgICAgcm92ZXIgPSBkb207CiAgICAgICAgIH0KIAorICAgICAgICAvKgorICAgICAgICAgKiBG
b3Igbm93LCBtYWtlIHN1cmUgdGhlIGNyZWF0ZWRvbWFpbiBJT01NVSBmbGFnIGlzIHNldCBpZiB0
aGUKKyAgICAgICAgICogSU9NTVUgaXMgZW5hYmxlZC4gV2hlbiB0aGUgZmxhZyBjb21lcyB1bmRl
ciB0b29sc3RhY2sgY29udHJvbAorICAgICAgICAgKiB0aGlzIGNhbiBnbyBhd2F5LgorICAgICAg
ICAgKi8KKyAgICAgICAgaWYgKCBvcC0+dS5jcmVhdGVkb21haW4uZmxhZ3MgJiBYRU5fRE9NQ1RM
X0NERl9pb21tdSApCisgICAgICAgIHsKKyAgICAgICAgICAgIEFTU0VSVF9VTlJFQUNIQUJMRSgp
OworICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7CisgICAgICAgIH0KKyAgICAgICAgaWYgKCBp
b21tdV9lbmFibGVkICkKKyAgICAgICAgICAgIG9wLT51LmNyZWF0ZWRvbWFpbi5mbGFncyB8PSBY
RU5fRE9NQ1RMX0NERl9pb21tdTsKKwogICAgICAgICBkID0gZG9tYWluX2NyZWF0ZShkb20sICZv
cC0+dS5jcmVhdGVkb21haW4sIGZhbHNlKTsKICAgICAgICAgaWYgKCBJU19FUlIoZCkgKQogICAg
ICAgICB7CmRpZmYgLS1naXQgYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9kZXZpY2VfdHJlZS5j
IGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvZGV2aWNlX3RyZWUuYwppbmRleCBiNmVhYWU3Mjgz
Li5kMzJiMTcyNjY0IDEwMDY0NAotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9kZXZpY2Vf
dHJlZS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2RldmljZV90cmVlLmMKQEAgLTEx
OSw2ICsxMTksOSBAQCBpbnQgaW9tbXVfcmVsZWFzZV9kdF9kZXZpY2VzKHN0cnVjdCBkb21haW4g
KmQpCiAgICAgc3RydWN0IGR0X2RldmljZV9ub2RlICpkZXYsICpfZGV2OwogICAgIGludCByYzsK
IAorICAgIGlmICggIWlzX2lvbW11X2VuYWJsZWQoZCkgKQorICAgICAgICByZXR1cm4gMDsKKwog
ICAgIGxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShkZXYsIF9kZXYsICZoZC0+ZHRfZGV2aWNlcywg
ZG9tYWluX2xpc3QpCiAgICAgewogICAgICAgICByYyA9IGlvbW11X2RlYXNzaWduX2R0X2Rldmlj
ZShkLCBkZXYpOwpkaWZmIC0tZ2l0IGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvaW9tbXUuYyBi
L3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2lvbW11LmMKaW5kZXggMzdlYjBmN2QwMS4uZTYxZDNk
MTM2OCAxMDA2NDQKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvaW9tbXUuYworKysgYi94
ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5jCkBAIC0xNTEsMTMgKzE1MSwxMyBAQCBpbnQg
aW9tbXVfZG9tYWluX2luaXQoc3RydWN0IGRvbWFpbiAqZCkKICAgICBzdHJ1Y3QgZG9tYWluX2lv
bW11ICpoZCA9IGRvbV9pb21tdShkKTsKICAgICBpbnQgcmV0ID0gMDsKIAorICAgIGlmICggIWlz
X2lvbW11X2VuYWJsZWQoZCkgKQorICAgICAgICByZXR1cm4gMDsKKwogICAgIHJldCA9IGFyY2hf
aW9tbXVfZG9tYWluX2luaXQoZCk7CiAgICAgaWYgKCByZXQgKQogICAgICAgICByZXR1cm4gcmV0
OwogCi0gICAgaWYgKCAhaW9tbXVfZW5hYmxlZCApCi0gICAgICAgIHJldHVybiAwOwotCiAgICAg
aGQtPnBsYXRmb3JtX29wcyA9IGlvbW11X2dldF9vcHMoKTsKICAgICByZXR1cm4gaGQtPnBsYXRm
b3JtX29wcy0+aW5pdChkKTsKIH0KZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3B1YmxpYy9kb21j
dGwuaCBiL3hlbi9pbmNsdWRlL3B1YmxpYy9kb21jdGwuaAppbmRleCA3MmQ1MTMzY2JhLi41ZjU1
YTJmNmUxIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmgKKysrIGIveGVu
L2luY2x1ZGUvcHVibGljL2RvbWN0bC5oCkBAIC02NCw2ICs2NCwxMCBAQCBzdHJ1Y3QgeGVuX2Rv
bWN0bF9jcmVhdGVkb21haW4gewogIC8qIElzIHRoaXMgYSB4ZW5zdG9yZSBkb21haW4/ICovCiAj
ZGVmaW5lIF9YRU5fRE9NQ1RMX0NERl94c19kb21haW4gICAgIDQKICNkZWZpbmUgWEVOX0RPTUNU
TF9DREZfeHNfZG9tYWluICAgICAgKDFVPDxfWEVOX0RPTUNUTF9DREZfeHNfZG9tYWluKQorIC8q
IFNob3VsZCB0aGlzIGRvbWFpbiBiZSBwZXJtaXR0ZWQgdG8gdXNlIHRoZSBJT01NVT8gKi8KKyNk
ZWZpbmUgX1hFTl9ET01DVExfQ0RGX2lvbW11ICAgICAgICAgNQorI2RlZmluZSBYRU5fRE9NQ1RM
X0NERl9pb21tdSAgICAgICAgICAoMVU8PF9YRU5fRE9NQ1RMX0NERl9pb21tdSkKKwogICAgIHVp
bnQzMl90IGZsYWdzOwogCiAgICAgLyoKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9zY2hl
ZC5oIGIveGVuL2luY2x1ZGUveGVuL3NjaGVkLmgKaW5kZXggZDJiYmUwM2JkOS4uM2MwZGI0MmI4
MiAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUveGVuL3NjaGVkLmgKKysrIGIveGVuL2luY2x1ZGUv
eGVuL3NjaGVkLmgKQEAgLTk4Myw2ICs5ODMsMTEgQEAgc3RhdGljIGlubGluZSBib29sIGlzX3hl
bnN0b3JlX2RvbWFpbihjb25zdCBzdHJ1Y3QgZG9tYWluICpkKQogICAgIHJldHVybiBkLT5vcHRp
b25zICYgWEVOX0RPTUNUTF9DREZfeHNfZG9tYWluOwogfQogCitzdGF0aWMgaW5saW5lIGJvb2wg
aXNfaW9tbXVfZW5hYmxlZChjb25zdCBzdHJ1Y3QgZG9tYWluICpkKQoreworICAgIHJldHVybiBl
dmFsdWF0ZV9ub3NwZWMoZC0+b3B0aW9ucyAmIFhFTl9ET01DVExfQ0RGX2lvbW11KTsKK30KKwog
ZXh0ZXJuIGJvb2wgc2NoZWRfc210X3Bvd2VyX3NhdmluZ3M7CiAKIGV4dGVybiBlbnVtIGNwdWZy
ZXFfY29udHJvbGxlciB7Ci0tIAoyLjIwLjEuMi5nYjIxZWJiNjcxCgoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApY
ZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

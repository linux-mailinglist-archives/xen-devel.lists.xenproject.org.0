Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B52E73495F7
	for <lists+xen-devel@lfdr.de>; Thu, 25 Mar 2021 16:47:48 +0100 (CET)
Received: from list by lists.xenproject.org with outflank-mailman.101431.194083 (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1lPSCy-0007vm-FR; Thu, 25 Mar 2021 15:47:40 +0000
X-Outflank-Mailman: Message body and most headers restored to incoming version
Received: by outflank-mailman (output) from mailman id 101431.194083; Thu, 25 Mar 2021 15:47:40 +0000
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1lPSCy-0007uk-AY; Thu, 25 Mar 2021 15:47:40 +0000
Received: by outflank-mailman (input) for mailman id 101431;
 Thu, 25 Mar 2021 15:47:38 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.92) (envelope-from
 <SRS0=cfrO=IX=citrix.com=anthony.perard@srs-us1.protection.inumbo.net>)
 id 1lPSCw-0007aB-FD
 for xen-devel@lists.xenproject.org; Thu, 25 Mar 2021 15:47:38 +0000
Received: from esa2.hc3370-68.iphmx.com (unknown [216.71.145.153])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 90e61a9d-c67b-48fb-ad67-314c0884c5f5;
 Thu, 25 Mar 2021 15:47:24 +0000 (UTC)
X-BeenThere: xen-devel@lists.xenproject.org
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Errors-To: xen-devel-bounces@lists.xenproject.org
Precedence: list
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>
X-Inumbo-ID: 90e61a9d-c67b-48fb-ad67-314c0884c5f5
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
  d=citrix.com; s=securemail; t=1616687244;
  h=from:to:cc:subject:date:message-id:in-reply-to:
   references:mime-version:content-transfer-encoding;
  bh=HuIUXo43JiGC6QHvcYLXvEgyMc8GCHFyAMB5JBDUT0U=;
  b=FRuRpojdVj5iOvEoW+dxlyMCODHl+a/a1WUbr1aAAH08GFtesLTcoDLI
   9/7rpVxsfRY/woWScGy3TK+SjfeIZbgWNlxC0tqtABY/wE00Q+NQuHn5J
   BqyAXrjAA7LhdZp06Djq4BKb72sRNVix3icQAKYhQTi6jLwTWjsKJa6hV
   A=;
Authentication-Results: esa2.hc3370-68.iphmx.com; dkim=none (message not signed) header.i=none
IronPort-SDR: d14wjqQx1UXoMjRctiLYpxhGJHIvK94eQ5c4s89qozIWZQl4KaUHiA3YgwQSaIndFMJzBguBbN
 9IzeDXGfoziG3zgZkF8T7Z6jXwxSvbHuNZteB7SBz0bD8wp9azfKqst/LXRuXFKCWHazbYvwIG
 qsNe2/fjTVOhnELAYg5oT5DoD8p+zOILaJwG0Ne31W+M1HtibMhGIOxAVUyFtTx/JHpWDlkIF7
 l3KUNFv5kNfZcFlNLtp5ZdLzN0xKEWDtkQohQm5UC9xNsp4tNbvdtuh+M/XOoc+0RzNGiHjBo4
 92E=
X-SBRS: 5.1
X-MesageID: 40144197
X-Ironport-Server: esa2.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
IronPort-HdrOrdr: A9a23:z3JXcq0XqT5hO2K8TIRbEQqjBZFyeYIsi2QD101hICF9WsaTm9
 my2NES0hHpgDgcMUtQ4uyoEoPoewK+ybde544NMbC+GCzvv2W1JI9vhLGSuQHIMSv46+JbyO
 NcY7FzYeeAfGRSoOTbxE2DE9gmyMSa66zAv4zj5lpkUA0CUdAG0y5XEQCee3cWeCBnAt4DGI
 OY9o57oVObCAwqR+ShAH49WfPf4+fnr/vdCyIuIz4CxE2wgSiz6Lj8eiLoris2dz9U278t/S
 zkvmXCl8Oemsq2wBPdyGPfhq4+8LaMpbV+LfeBhcQPJjLnhhzAXvUZZ5S4sC0ou+bq0V42kb
 D30mQdFv5u4HDcdHzdm2qO5yDc0S0j43Kn6ViUjWqLm72ceBsGCtFMjY8cTx3B60BIhqAY7I
 t32Qui16Z/PFflpmDd78KNfwx2nkC0yEBS7NI7vjh6a88iT5N/6aYY51hYFZ8cGjmS0vFaLM
 B+SMvb4O9fdkPyVQGmgkB/hNq2XnoyGR+aQk8N/syNugIm40xE8w==
X-IronPort-AV: E=Sophos;i="5.81,277,1610427600"; 
   d="scan'208";a="40144197"
From: Anthony PERARD <anthony.perard@citrix.com>
To: <devel@edk2.groups.io>
CC: <xen-devel@lists.xenproject.org>, Jordan Justen
	<jordan.l.justen@intel.com>, Anthony PERARD <anthony.perard@citrix.com>, "Ard
 Biesheuvel" <ard.biesheuvel@linaro.org>, Laszlo Ersek <lersek@redhat.com>,
	Julien Grall <julien@xen.org>
Subject: [PATCH v2 5/7] OvmfPkg/XenPlatformPei: Map extra physical address
Date: Thu, 25 Mar 2021 15:47:11 +0000
Message-ID: <20210325154713.670104-6-anthony.perard@citrix.com>
X-Mailer: git-send-email 2.31.0
In-Reply-To: <20210325154713.670104-1-anthony.perard@citrix.com>
References: <20210325154713.670104-1-anthony.perard@citrix.com>
MIME-Version: 1.0
Content-Transfer-Encoding: base64
Content-Type: text/plain

U29tZSBpbmZvcm1hdGlvbiBhdmFpbGFibGUgaW4gYSBYZW4gZ3Vlc3QgY2FuIGJlIG1hcHBlZCBh
bnl3aGVyZSBpbgp0aGUgcGh5c2ljYWwgYWRkcmVzcyBzcGFjZSBhbmQgdGhleSBkb24ndCBuZWVk
IHRvIGJlIGJhY2tlZCBieSBSQU0uCkZvciBleGFtcGxlLCB0aGUgc2hhcmVkIGluZm8gcGFnZS4K
CldoaWxlIGl0J3MgZWFzaWVyIHRvIHB1dCB0aG9zZSBwYWdlcyBhbnl3aGVyZSwgaXQgaXMgYmV0
dGVyIHRvIGF2b2lkCm1hcHBpbmcgaXQgd2hlcmUgdGhlIFJBTSBpcy4gSXQgbWlnaHQgc3BsaXQg
YSBuaWNlIDFHIGd1ZXN0IHBhZ2UgdGFibGUKaW50byA0ayBwYWdlcyBhbmQgdGh1cyByZWR1Y2lu
ZyBwZXJmb3JtYW5jZSBvZiB0aGUgZ3Vlc3Qgd2hlbiBpdAphY2Nlc3MgaXRzIG1lbW9yeS4gQWxz
byBtYXBwaW5nIGEgcGFnZSBsaWtlIHRoZSBzaGFyZWQgaW5mbyBwYWdlIGFuZAp0aGVuIHVubWFw
cGluZyBpdCBvciBtYXBwaW5nIGl0IHNvbWV3aGVyZSBlbHNlIHdvdWxkIGxpdmUgYSBob2xlIGlu
CnRoZSBSQU0gdGhhdCB0aGUgZ3Vlc3Qgd291bGQgcHJvcGFibHkgbm90IGJlZW4gYWJsZSB0byB1
c2UgYW55bW9yZS4KClNvIHRoZSBwYXRjaCBpbnRyb2R1Y2UgYSBuZXcgZnVuY3Rpb24gd2hpY2gg
Y2FuIGJlIHVzZWQgdG8gMToxCm1hcHBpbmcgb2YgZ3Vlc3QgcGh5c2ljYWwgbWVtb3J5IGFib3Zl
IDRHIGR1cmluZyB0aGUgUEVJIHBoYXNlIHNvIHdlCmNhbiBtYXAgdGhlIFhlbiBzaGFyZWQgcGFn
ZXMgb3V0c2lkZSBvZiBtZW1vcnkgdGhhdCBjYW4gYmUgdXNlZCBieQpndWVzdCwgYW5kIGFzIGhp
Z2ggYXMgcG9zc2libGUuCgpTaWduZWQtb2ZmLWJ5OiBBbnRob255IFBFUkFSRCA8YW50aG9ueS5w
ZXJhcmRAY2l0cml4LmNvbT4KLS0tCgpOb3RlczoKICAgIHYyOgogICAgLSBuZXcgcGF0Y2gKCiBP
dm1mUGtnL1hlblBsYXRmb3JtUGVpL1hlblBsYXRmb3JtUGVpLmluZiB8ICAxICsKIE92bWZQa2cv
WGVuUGxhdGZvcm1QZWkvUGxhdGZvcm0uaCAgICAgICAgIHwgIDUgKysKIE92bWZQa2cvWGVuUGxh
dGZvcm1QZWkvWGVuLmMgICAgICAgICAgICAgIHwgNzEgKysrKysrKysrKysrKysrKysrKysrKysK
IDMgZmlsZXMgY2hhbmdlZCwgNzcgaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL092bWZQa2cv
WGVuUGxhdGZvcm1QZWkvWGVuUGxhdGZvcm1QZWkuaW5mIGIvT3ZtZlBrZy9YZW5QbGF0Zm9ybVBl
aS9YZW5QbGF0Zm9ybVBlaS5pbmYKaW5kZXggMGVmNzdkYjkyYzAzLi44NzkwZDkwN2QzZWMgMTAw
NjQ0Ci0tLSBhL092bWZQa2cvWGVuUGxhdGZvcm1QZWkvWGVuUGxhdGZvcm1QZWkuaW5mCisrKyBi
L092bWZQa2cvWGVuUGxhdGZvcm1QZWkvWGVuUGxhdGZvcm1QZWkuaW5mCkBAIC02Niw2ICs2Niw3
IEBAIFtQY2RdCiAgIGdVZWZpT3ZtZlBrZ1Rva2VuU3BhY2VHdWlkLlBjZE92bWZQZWlNZW1GdlNp
emUNCiAgIGdVZWZpT3ZtZlBrZ1Rva2VuU3BhY2VHdWlkLlBjZE92bWZEeGVNZW1GdkJhc2UNCiAg
IGdVZWZpT3ZtZlBrZ1Rva2VuU3BhY2VHdWlkLlBjZE92bWZEeGVNZW1GdlNpemUNCisgIGdVZWZp
T3ZtZlBrZ1Rva2VuU3BhY2VHdWlkLlBjZE92bWZTZWNQYWdlVGFibGVzQmFzZQ0KICAgZ1VlZmlP
dm1mUGtnVG9rZW5TcGFjZUd1aWQuUGNkT3ZtZkxvY2tCb3hTdG9yYWdlQmFzZQ0KICAgZ1VlZmlP
dm1mUGtnVG9rZW5TcGFjZUd1aWQuUGNkT3ZtZkxvY2tCb3hTdG9yYWdlU2l6ZQ0KICAgZ1VlZmlP
dm1mUGtnVG9rZW5TcGFjZUd1aWQuUGNkT3ZtZkhvc3RCcmlkZ2VQY2lEZXZJZA0KZGlmZiAtLWdp
dCBhL092bWZQa2cvWGVuUGxhdGZvcm1QZWkvUGxhdGZvcm0uaCBiL092bWZQa2cvWGVuUGxhdGZv
cm1QZWkvUGxhdGZvcm0uaAppbmRleCA3NjYxZjRhOGRlMGEuLmU3MGNhNTgwNzhlYiAxMDA2NDQK
LS0tIGEvT3ZtZlBrZy9YZW5QbGF0Zm9ybVBlaS9QbGF0Zm9ybS5oCisrKyBiL092bWZQa2cvWGVu
UGxhdGZvcm1QZWkvUGxhdGZvcm0uaApAQCAtMTI3LDYgKzEyNywxMSBAQCBYZW5HZXRFODIwTWFw
ICgKICAgVUlOVDMyICpDb3VudA0KICAgKTsNCiANCitFRklfU1RBVFVTDQorUGh5c2ljYWxBZGRy
ZXNzSWRlbnRpdHlNYXBwaW5nICgNCisgIElOIEVGSV9QSFlTSUNBTF9BRERSRVNTIEFkZHJlc3NU
b01hcA0KKyAgKTsNCisNCiBleHRlcm4gRUZJX0JPT1RfTU9ERSBtQm9vdE1vZGU7DQogDQogZXh0
ZXJuIFVJTlQ4IG1QaHlzTWVtQWRkcmVzc1dpZHRoOw0KZGlmZiAtLWdpdCBhL092bWZQa2cvWGVu
UGxhdGZvcm1QZWkvWGVuLmMgYi9Pdm1mUGtnL1hlblBsYXRmb3JtUGVpL1hlbi5jCmluZGV4IGM0
MWZlY2RjNDg2ZS4uYjJhN2QxYzIxZGFjIDEwMDY0NAotLS0gYS9Pdm1mUGtnL1hlblBsYXRmb3Jt
UGVpL1hlbi5jCisrKyBiL092bWZQa2cvWGVuUGxhdGZvcm1QZWkvWGVuLmMKQEAgLTE3LDYgKzE3
LDggQEAKIC8vDQogLy8gVGhlIExpYnJhcnkgY2xhc3NlcyB0aGlzIG1vZHVsZSBjb25zdW1lcw0K
IC8vDQorI2luY2x1ZGUgPExpYnJhcnkvQmFzZU1lbW9yeUxpYi5oPg0KKyNpbmNsdWRlIDxMaWJy
YXJ5L0NwdUxpYi5oPg0KICNpbmNsdWRlIDxMaWJyYXJ5L0RlYnVnTGliLmg+DQogI2luY2x1ZGUg
PExpYnJhcnkvSG9iTGliLmg+DQogI2luY2x1ZGUgPExpYnJhcnkvTWVtb3J5QWxsb2NhdGlvbkxp
Yi5oPg0KQEAgLTI1LDYgKzI3LDcgQEAKICNpbmNsdWRlIDxJbmR1c3RyeVN0YW5kYXJkL0U4MjAu
aD4NCiAjaW5jbHVkZSA8TGlicmFyeS9SZXNvdXJjZVB1YmxpY2F0aW9uTGliLmg+DQogI2luY2x1
ZGUgPExpYnJhcnkvTXRyckxpYi5oPg0KKyNpbmNsdWRlIDxJbmR1c3RyeVN0YW5kYXJkL1BhZ2VU
YWJsZS5oPg0KICNpbmNsdWRlIDxJbmR1c3RyeVN0YW5kYXJkL1hlbi9hcmNoLXg4Ni9odm0vc3Rh
cnRfaW5mby5oPg0KICNpbmNsdWRlIDxMaWJyYXJ5L1hlbkh5cGVyY2FsbExpYi5oPg0KICNpbmNs
dWRlIDxJbmR1c3RyeVN0YW5kYXJkL1hlbi9tZW1vcnkuaD4NCkBAIC0zODYsMyArMzg5LDcxIEBA
IEluaXRpYWxpemVYZW4gKAogDQogICByZXR1cm4gRUZJX1NVQ0NFU1M7DQogfQ0KKw0KK0VGSV9T
VEFUVVMNCitQaHlzaWNhbEFkZHJlc3NJZGVudGl0eU1hcHBpbmcgKA0KKyAgSU4gRUZJX1BIWVNJ
Q0FMX0FERFJFU1MgICBBZGRyZXNzVG9NYXANCisgICkNCit7DQorICBJTlROICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIEluZGV4Ow0KKyAgUEFHRV9NQVBfQU5EX0RJUkVDVE9SWV9QT0lOVEVS
ICAqTDQsICpMMzsNCisgIFBBR0VfVEFCTEVfRU5UUlkgICAgICAgICAgICAgICAgKlBhZ2VUYWJs
ZTsNCisNCisgIERFQlVHICgoREVCVUdfSU5GTywgIk1hcHBpbmcgMToxIG9mIGFkZHJlc3MgMHgl
bHhcbiIsIChVSU5UNjQpQWRkcmVzc1RvTWFwKSk7DQorDQorICAvLyBMNCAvIFRvcCBsZXZlbCBQ
YWdlIERpcmVjdG9yeSBQb2ludGVycw0KKw0KKyAgTDQgPSAoVk9JRCopKFVJTlROKVBjZEdldDMy
IChQY2RPdm1mU2VjUGFnZVRhYmxlc0Jhc2UpOw0KKyAgSW5kZXggPSBQTUw0X09GRlNFVCAoQWRk
cmVzc1RvTWFwKTsNCisNCisgIGlmICghTDRbSW5kZXhdLkJpdHMuUHJlc2VudCkgew0KKyAgICBM
MyA9IEFsbG9jYXRlUGFnZXMgKDEpOw0KKyAgICBpZiAoTDMgPT0gTlVMTCkgew0KKyAgICAgIHJl
dHVybiBFRklfT1VUX09GX1JFU09VUkNFUzsNCisgICAgfQ0KKw0KKyAgICBaZXJvTWVtIChMMywg
RUZJX1BBR0VfU0laRSk7DQorDQorICAgIEw0W0luZGV4XS5CaXRzLlJlYWRXcml0ZSA9IDE7DQor
ICAgIEw0W0luZGV4XS5CaXRzLkFjY2Vzc2VkID0gMTsNCisgICAgTDRbSW5kZXhdLkJpdHMuUGFn
ZVRhYmxlQmFzZUFkZHJlc3MgPSAoRUZJX1BIWVNJQ0FMX0FERFJFU1MpTDMgPj4gMTI7DQorICAg
IEw0W0luZGV4XS5CaXRzLlByZXNlbnQgPSAxOw0KKyAgfQ0KKw0KKyAgLy8gTDMgLyBOZXh0IGxl
dmVsIFBhZ2UgRGlyZWN0b3J5IFBvaW50ZXJzDQorDQorICBMMyA9IChWT0lEKikoRUZJX1BIWVNJ
Q0FMX0FERFJFU1MpKEw0W0luZGV4XS5CaXRzLlBhZ2VUYWJsZUJhc2VBZGRyZXNzIDw8IDEyKTsN
CisgIEluZGV4ID0gUERQX09GRlNFVCAoQWRkcmVzc1RvTWFwKTsNCisNCisgIGlmICghTDNbSW5k
ZXhdLkJpdHMuUHJlc2VudCkgew0KKyAgICBQYWdlVGFibGUgPSBBbGxvY2F0ZVBhZ2VzICgxKTsN
CisgICAgaWYgKFBhZ2VUYWJsZSA9PSBOVUxMKSB7DQorICAgICAgcmV0dXJuIEVGSV9PVVRfT0Zf
UkVTT1VSQ0VTOw0KKyAgICB9DQorDQorICAgIFplcm9NZW0gKFBhZ2VUYWJsZSwgRUZJX1BBR0Vf
U0laRSk7DQorDQorICAgIEwzW0luZGV4XS5CaXRzLlJlYWRXcml0ZSA9IDE7DQorICAgIEwzW0lu
ZGV4XS5CaXRzLkFjY2Vzc2VkID0gMTsNCisgICAgTDNbSW5kZXhdLkJpdHMuUGFnZVRhYmxlQmFz
ZUFkZHJlc3MgPSAoRUZJX1BIWVNJQ0FMX0FERFJFU1MpUGFnZVRhYmxlID4+IDEyOw0KKyAgICBM
M1tJbmRleF0uQml0cy5QcmVzZW50ID0gMTsNCisgIH0NCisNCisgIC8vIEwyIC8gUGFnZSBUYWJs
ZSBFbnRyaWVzDQorDQorICBQYWdlVGFibGUgPSAoVk9JRCopKEVGSV9QSFlTSUNBTF9BRERSRVNT
KShMM1tJbmRleF0uQml0cy5QYWdlVGFibGVCYXNlQWRkcmVzcyA8PCAxMik7DQorICBJbmRleCA9
IFBERV9PRkZTRVQgKEFkZHJlc3NUb01hcCk7DQorDQorICBpZiAoIVBhZ2VUYWJsZVtJbmRleF0u
Qml0cy5QcmVzZW50KSB7DQorICAgIFBhZ2VUYWJsZVtJbmRleF0uQml0cy5SZWFkV3JpdGUgPSAx
Ow0KKyAgICBQYWdlVGFibGVbSW5kZXhdLkJpdHMuQWNjZXNzZWQgPSAxOw0KKyAgICBQYWdlVGFi
bGVbSW5kZXhdLkJpdHMuRGlydHkgPSAxOw0KKyAgICBQYWdlVGFibGVbSW5kZXhdLkJpdHMuTXVz
dEJlMSA9IDE7DQorICAgIFBhZ2VUYWJsZVtJbmRleF0uQml0cy5QYWdlVGFibGVCYXNlQWRkcmVz
cyA9IEFkZHJlc3NUb01hcCA+PiAyMTsNCisgICAgUGFnZVRhYmxlW0luZGV4XS5CaXRzLlByZXNl
bnQgPSAxOw0KKyAgfQ0KKw0KKyAgQ3B1Rmx1c2hUbGIgKCk7DQorDQorICByZXR1cm4gRUZJX1NV
Q0NFU1M7DQorfQ0KLS0gCkFudGhvbnkgUEVSQVJECgo=


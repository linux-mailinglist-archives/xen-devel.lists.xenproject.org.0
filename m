Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id C21DF12690D
	for <lists+xen-devel@lfdr.de>; Thu, 19 Dec 2019 19:27:24 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ii0U1-0002jF-Dj; Thu, 19 Dec 2019 18:25:09 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=tNyU=2J=citrix.com=andrew.cooper3@srs-us1.protection.inumbo.net>)
 id 1ii0U0-0002j9-1Z
 for xen-devel@lists.xenproject.org; Thu, 19 Dec 2019 18:25:08 +0000
X-Inumbo-ID: dcd6a07a-228c-11ea-88e7-bc764e2007e4
Received: from esa5.hc3370-68.iphmx.com (unknown [216.71.155.168])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id dcd6a07a-228c-11ea-88e7-bc764e2007e4;
 Thu, 19 Dec 2019 18:24:59 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1576779898;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=ybWoKu8my6CNmcAxCb7aCNtJrujasAhyxKL3lD6wVgg=;
 b=bCvmuFfAGBoASA6PD+7g+aHvByzE6OAlX6Tzv5N//WUObuK4KL+Z/8km
 ki/VDLr5qcapwjUWOH0aoeZ4WLcoiibK4zUibqiXKv4+xM3RBJ7IA8+3z
 i8qd9TGS4+QErEGIMaZvuLOy1Q2Kp0ZnELF6ben1t8tGxl7pVwfOQpUtM Q=;
Authentication-Results: esa5.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=andrew.cooper3@citrix.com;
 spf=Pass smtp.mailfrom=Andrew.Cooper3@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 andrew.cooper3@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="andrew.cooper3@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: Pass (esa5.hc3370-68.iphmx.com: domain of
 Andrew.Cooper3@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="Andrew.Cooper3@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83
 ip4:168.245.78.127 ~all"
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: Gr1f7jBvOle4n08JrqmSQDjjZWmDPpvl+s72su+LLTmdB4e2KKEXsrmHrRZiP63vJ38fbXYN8y
 7IFxuOpCC/MNQ3zlqZt/1jFetknG6cYz8Tay/fRKStRexWcwo0bv0Cx3H9MLzft4UyPyVLEBPS
 olpC7jbFJIN29QdByhO6HzyphqQmqTAGIG9lyaJ2HEAe2yN8kk5Tr7WrSfy8DW+WFr6gZPef4V
 86xH4cm065teB9/7fRSyJ2zgGSELQLCxRaB5xwlK4T+AY+fRfoy75kvSLX65SI+hLFHW2awkUU
 E48=
X-SBRS: 2.7
X-MesageID: 10318047
X-Ironport-Server: esa5.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.69,332,1571716800"; d="scan'208";a="10318047"
From: Andrew Cooper <andrew.cooper3@citrix.com>
To: Xen-devel <xen-devel@lists.xenproject.org>
Date: Thu, 19 Dec 2019 18:24:42 +0000
Message-ID: <20191219182442.7232-1-andrew.cooper3@citrix.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20191219140656.9906-1-andrew.cooper3@citrix.com>
References: <20191219140656.9906-1-andrew.cooper3@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH 2/1] libxc: Drop other examples of the 'goto x;
 } else if' antipattern
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>, Wei Liu <wl@xen.org>,
 Ian Jackson <Ian.Jackson@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Tm9uZSBvZiB0aGVzZSBhcmUgYnVnZ3ksIGJ1dCB0aGUgcmVzdWx0aW5nIGNvZGUgaXMgbW9yZSBy
b2J1c3QuCgpObyBmdW5jdGlvbmFsIGNoYW5nZS4KClNpZ25lZC1vZmYtYnk6IEFuZHJldyBDb29w
ZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+Ci0tLQpDQzogSWFuIEphY2tzb24gPElhbi5K
YWNrc29uQGNpdHJpeC5jb20+CkNDOiBXZWkgTGl1IDx3bEB4ZW4ub3JnPgotLS0KIHRvb2xzL2xp
YnhjL3hjX2RvbV9jb3JlLmMgICAgICAgICAgIHwgIDMgKystCiB0b29scy9saWJ4Yy94Y19taXNj
LmMgICAgICAgICAgICAgICB8ICAzICsrLQogdG9vbHMvbGlieGMveGNfcmVzb3VyY2UuYyAgICAg
ICAgICAgfCAgNyArKysrLS0tCiB0b29scy9saWJ4Yy94Y19zcl9jb21tb24uYyAgICAgICAgICB8
ICAzICsrLQogdG9vbHMvbGlieGMveGNfc3JfcmVzdG9yZS5jICAgICAgICAgfCAxOCArKysrKysr
KysrKystLS0tLS0KIHRvb2xzL2xpYnhjL3hjX3NyX3Jlc3RvcmVfeDg2X2h2bS5jIHwgIDQgKysr
LQogdG9vbHMvbGlieGMveGNfc3JfcmVzdG9yZV94ODZfcHYuYyAgfCAzMyArKysrKysrKysrKysr
KysrKystLS0tLS0tLS0tLS0tLS0KIDcgZmlsZXMgY2hhbmdlZCwgNDMgaW5zZXJ0aW9ucygrKSwg
MjggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvdG9vbHMvbGlieGMveGNfZG9tX2NvcmUuYyBi
L3Rvb2xzL2xpYnhjL3hjX2RvbV9jb3JlLmMKaW5kZXggOWJkMDRjYjJkNS4uNzNmZTA5ZmUxOCAx
MDA2NDQKLS0tIGEvdG9vbHMvbGlieGMveGNfZG9tX2NvcmUuYworKysgYi90b29scy9saWJ4Yy94
Y19kb21fY29yZS5jCkBAIC0yMjUsNyArMjI1LDggQEAgdm9pZCAqeGNfZG9tX21hbGxvY19maWxl
bWFwKHN0cnVjdCB4Y19kb21faW1hZ2UgKmRvbSwKICAgICAgICAgICAgICAgICAgICAgICJ0cmll
ZCB0byBtYXAgZmlsZSB3aGljaCBpcyB0b28gbGFyZ2UiKTsKICAgICAgICAgZ290byBlcnI7CiAg
ICAgfQotICAgIGVsc2UgaWYgKCAhKnNpemUgKQorCisgICAgaWYgKCAhKnNpemUgKQogICAgIHsK
ICAgICAgICAgeGNfZG9tX3BhbmljKGRvbS0+eGNoLCBYQ19JTlRFUk5BTF9FUlJPUiwKICAgICAg
ICAgICAgICAgICAgICAgICInJXMnOiB6ZXJvIGxlbmd0aCBmaWxlIiwgZmlsZW5hbWUpOwpkaWZm
IC0tZ2l0IGEvdG9vbHMvbGlieGMveGNfbWlzYy5jIGIvdG9vbHMvbGlieGMveGNfbWlzYy5jCmlu
ZGV4IDhlNjBiNmU5ZjAuLmI4ZWViZDkxZTQgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhjL3hjX21p
c2MuYworKysgYi90b29scy9saWJ4Yy94Y19taXNjLmMKQEAgLTc5NCw3ICs3OTQsOCBAQCBpbnQg
eGNfbGl2ZXBhdGNoX2xpc3QoeGNfaW50ZXJmYWNlICp4Y2gsIHVuc2lnbmVkIGludCBtYXgsIHVu
c2lnbmVkIGludCBzdGFydCwKICAgICAgICAgICAgIHhjX2h5cGVyY2FsbF9ib3VuY2VfcG9zdCh4
Y2gsIGxlbik7CiAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgfQotICAgICAgICBlbHNl
IGlmICggcmMgPCAwICkgLyogRm9yIGFsbCBvdGhlciBlcnJvcnMgd2UgYmFpbCBvdXQuICovCisK
KyAgICAgICAgaWYgKCByYyA8IDAgKSAvKiBGb3IgYWxsIG90aGVyIGVycm9ycyB3ZSBiYWlsIG91
dC4gKi8KICAgICAgICAgICAgIGJyZWFrOwogCiAgICAgICAgIGlmICggIXZlcnNpb24gKQpkaWZm
IC0tZ2l0IGEvdG9vbHMvbGlieGMveGNfcmVzb3VyY2UuYyBiL3Rvb2xzL2xpYnhjL3hjX3Jlc291
cmNlLmMKaW5kZXggM2FiYWRiZGNmYy4uMzM5NGNjMTgzMyAxMDA2NDQKLS0tIGEvdG9vbHMvbGli
eGMveGNfcmVzb3VyY2UuYworKysgYi90b29scy9saWJ4Yy94Y19yZXNvdXJjZS5jCkBAIC0xMzMs
MTAgKzEzMywxMSBAQCBpbnQgeGNfcmVzb3VyY2Vfb3AoeGNfaW50ZXJmYWNlICp4Y2gsIHVpbnQz
Ml90IG5yX29wcywgeGNfcmVzb3VyY2Vfb3BfdCAqb3BzKQogewogICAgIGlmICggbnJfb3BzID09
IDEgKQogICAgICAgICByZXR1cm4geGNfcmVzb3VyY2Vfb3Bfb25lKHhjaCwgb3BzKTsKLSAgICBl
bHNlIGlmICggbnJfb3BzID4gMSApCisKKyAgICBpZiAoIG5yX29wcyA+IDEgKQogICAgICAgICBy
ZXR1cm4geGNfcmVzb3VyY2Vfb3BfbXVsdGkoeGNoLCBucl9vcHMsIG9wcyk7Ci0gICAgZWxzZQot
ICAgICAgICByZXR1cm4gLTE7CisKKyAgICByZXR1cm4gLTE7CiB9CiAKIC8qCmRpZmYgLS1naXQg
YS90b29scy9saWJ4Yy94Y19zcl9jb21tb24uYyBiL3Rvb2xzL2xpYnhjL3hjX3NyX2NvbW1vbi5j
CmluZGV4IDc5YjljM2U5NDAuLjZiODg3YjMwNTMgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhjL3hj
X3NyX2NvbW1vbi5jCisrKyBiL3Rvb2xzL2xpYnhjL3hjX3NyX2NvbW1vbi5jCkBAIC0xMDIsNyAr
MTAyLDggQEAgaW50IHJlYWRfcmVjb3JkKHN0cnVjdCB4Y19zcl9jb250ZXh0ICpjdHgsIGludCBm
ZCwgc3RydWN0IHhjX3NyX3JlY29yZCAqcmVjKQogICAgICAgICBQRVJST1IoIkZhaWxlZCB0byBy
ZWFkIFJlY29yZCBIZWFkZXIgZnJvbSBzdHJlYW0iKTsKICAgICAgICAgcmV0dXJuIC0xOwogICAg
IH0KLSAgICBlbHNlIGlmICggcmhkci5sZW5ndGggPiBSRUNfTEVOR1RIX01BWCApCisKKyAgICBp
ZiAoIHJoZHIubGVuZ3RoID4gUkVDX0xFTkdUSF9NQVggKQogICAgIHsKICAgICAgICAgRVJST1Io
IlJlY29yZCAoMHglMDh4LCAlcykgbGVuZ3RoICUjeCBleGNlZWRzIG1heCAoJSN4KSIsIHJoZHIu
dHlwZSwKICAgICAgICAgICAgICAgcmVjX3R5cGVfdG9fc3RyKHJoZHIudHlwZSksIHJoZHIubGVu
Z3RoLCBSRUNfTEVOR1RIX01BWCk7CmRpZmYgLS1naXQgYS90b29scy9saWJ4Yy94Y19zcl9yZXN0
b3JlLmMgYi90b29scy9saWJ4Yy94Y19zcl9yZXN0b3JlLmMKaW5kZXggMWFjNDA0Yjk3Yi4uOTgw
MzgwOTZjNyAxMDA2NDQKLS0tIGEvdG9vbHMvbGlieGMveGNfc3JfcmVzdG9yZS5jCisrKyBiL3Rv
b2xzL2xpYnhjL3hjX3NyX3Jlc3RvcmUuYwpAQCAtMjgsMTggKzI4LDIxIEBAIHN0YXRpYyBpbnQg
cmVhZF9oZWFkZXJzKHN0cnVjdCB4Y19zcl9jb250ZXh0ICpjdHgpCiAgICAgICAgIEVSUk9SKCJJ
bnZhbGlkIG1hcmtlcjogR290IDB4JTAxNiJQUkl4NjQsIGloZHIubWFya2VyKTsKICAgICAgICAg
cmV0dXJuIC0xOwogICAgIH0KLSAgICBlbHNlIGlmICggaWhkci5pZCAhPSBJSERSX0lEICkKKwor
ICAgIGlmICggaWhkci5pZCAhPSBJSERSX0lEICkKICAgICB7CiAgICAgICAgIEVSUk9SKCJJbnZh
bGlkIElEOiBFeHBlY3RlZCAweCUwOHgsIEdvdCAweCUwOHgiLCBJSERSX0lELCBpaGRyLmlkKTsK
ICAgICAgICAgcmV0dXJuIC0xOwogICAgIH0KLSAgICBlbHNlIGlmICggaWhkci52ZXJzaW9uICE9
IElIRFJfVkVSU0lPTiApCisKKyAgICBpZiAoIGloZHIudmVyc2lvbiAhPSBJSERSX1ZFUlNJT04g
KQogICAgIHsKICAgICAgICAgRVJST1IoIkludmFsaWQgVmVyc2lvbjogRXhwZWN0ZWQgJWQsIEdv
dCAlZCIsCiAgICAgICAgICAgICAgIElIRFJfVkVSU0lPTiwgaWhkci52ZXJzaW9uKTsKICAgICAg
ICAgcmV0dXJuIC0xOwogICAgIH0KLSAgICBlbHNlIGlmICggaWhkci5vcHRpb25zICYgSUhEUl9P
UFRfQklHX0VORElBTiApCisKKyAgICBpZiAoIGloZHIub3B0aW9ucyAmIElIRFJfT1BUX0JJR19F
TkRJQU4gKQogICAgIHsKICAgICAgICAgRVJST1IoIlVuYWJsZSB0byBoYW5kbGUgYmlnIGVuZGlh
biBzdHJlYW1zIik7CiAgICAgICAgIHJldHVybiAtMTsKQEAgLTM0NSwxMiArMzQ4LDE0IEBAIHN0
YXRpYyBpbnQgaGFuZGxlX3BhZ2VfZGF0YShzdHJ1Y3QgeGNfc3JfY29udGV4dCAqY3R4LCBzdHJ1
Y3QgeGNfc3JfcmVjb3JkICpyZWMpCiAgICAgICAgICAgICAgIHJlYy0+bGVuZ3RoLCBzaXplb2Yo
KnBhZ2VzKSk7CiAgICAgICAgIGdvdG8gZXJyOwogICAgIH0KLSAgICBlbHNlIGlmICggcGFnZXMt
PmNvdW50IDwgMSApCisKKyAgICBpZiAoIHBhZ2VzLT5jb3VudCA8IDEgKQogICAgIHsKICAgICAg
ICAgRVJST1IoIkV4cGVjdGVkIGF0IGxlYXN0IDEgcGZuIGluIFBBR0VfREFUQSByZWNvcmQiKTsK
ICAgICAgICAgZ290byBlcnI7CiAgICAgfQotICAgIGVsc2UgaWYgKCByZWMtPmxlbmd0aCA8IHNp
emVvZigqcGFnZXMpICsgKHBhZ2VzLT5jb3VudCAqIHNpemVvZih1aW50NjRfdCkpICkKKworICAg
IGlmICggcmVjLT5sZW5ndGggPCBzaXplb2YoKnBhZ2VzKSArIChwYWdlcy0+Y291bnQgKiBzaXpl
b2YodWludDY0X3QpKSApCiAgICAgewogICAgICAgICBFUlJPUigiUEFHRV9EQVRBIHJlY29yZCAo
bGVuZ3RoICV1KSB0b28gc2hvcnQgdG8gY29udGFpbiAldSIKICAgICAgICAgICAgICAgIiBwZm5z
IHdvcnRoIG9mIGluZm9ybWF0aW9uIiwgcmVjLT5sZW5ndGgsIHBhZ2VzLT5jb3VudCk7CkBAIC0z
ODMsNyArMzg4LDggQEAgc3RhdGljIGludCBoYW5kbGVfcGFnZV9kYXRhKHN0cnVjdCB4Y19zcl9j
b250ZXh0ICpjdHgsIHN0cnVjdCB4Y19zcl9yZWNvcmQgKnJlYykKICAgICAgICAgICAgICAgICAg
IHR5cGUsIHBmbiwgaSk7CiAgICAgICAgICAgICBnb3RvIGVycjsKICAgICAgICAgfQotICAgICAg
ICBlbHNlIGlmICggdHlwZSA8IFhFTl9ET01DVExfUEZJTkZPX0JST0tFTiApCisKKyAgICAgICAg
aWYgKCB0eXBlIDwgWEVOX0RPTUNUTF9QRklORk9fQlJPS0VOICkKICAgICAgICAgICAgIC8qIE5P
VEFCIGFuZCBhbGwgTDEgdGhyb3VnaCBMNCB0YWJsZXMgKGluY2x1ZGluZyBwaW5uZWQpIHNob3Vs
ZAogICAgICAgICAgICAgICogaGF2ZSBhIHBhZ2Ugd29ydGggb2YgZGF0YSBpbiB0aGUgcmVjb3Jk
LiAqLwogICAgICAgICAgICAgcGFnZXNfb2ZfZGF0YSsrOwpkaWZmIC0tZ2l0IGEvdG9vbHMvbGli
eGMveGNfc3JfcmVzdG9yZV94ODZfaHZtLmMgYi90b29scy9saWJ4Yy94Y19zcl9yZXN0b3JlX3g4
Nl9odm0uYwppbmRleCA0NzY1YTUyZjMzLi45NzYzYWFhOGRjIDEwMDY0NAotLS0gYS90b29scy9s
aWJ4Yy94Y19zcl9yZXN0b3JlX3g4Nl9odm0uYworKysgYi90b29scy9saWJ4Yy94Y19zcl9yZXN0
b3JlX3g4Nl9odm0uYwpAQCAtMTQyLDEyICsxNDIsMTQgQEAgc3RhdGljIGludCB4ODZfaHZtX3Nl
dHVwKHN0cnVjdCB4Y19zcl9jb250ZXh0ICpjdHgpCiAgICAgICAgICAgICAgIGRoZHJfdHlwZV90
b19zdHIoY3R4LT5yZXN0b3JlLmd1ZXN0X3R5cGUpKTsKICAgICAgICAgcmV0dXJuIC0xOwogICAg
IH0KLSAgICBlbHNlIGlmICggY3R4LT5yZXN0b3JlLmd1ZXN0X3BhZ2Vfc2l6ZSAhPSBQQUdFX1NJ
WkUgKQorCisgICAgaWYgKCBjdHgtPnJlc3RvcmUuZ3Vlc3RfcGFnZV9zaXplICE9IFBBR0VfU0la
RSApCiAgICAgewogICAgICAgICBFUlJPUigiSW52YWxpZCBwYWdlIHNpemUgJXUgZm9yIHg4Nl9o
dm0gZG9tYWlucyIsCiAgICAgICAgICAgICAgIGN0eC0+cmVzdG9yZS5ndWVzdF9wYWdlX3NpemUp
OwogICAgICAgICByZXR1cm4gLTE7CiAgICAgfQorCiAjaWZkZWYgX19pMzg2X18KICAgICAvKiBW
ZXJ5IGxhcmdlIGRvbWFpbnMgKD4gMVRCKSB3aWxsIGV4aGF1c3QgdmlydHVhbCBhZGRyZXNzIHNw
YWNlLiAqLwogICAgIGlmICggY3R4LT5yZXN0b3JlLnAybV9zaXplID4gMHgwZmZmZmZmZiApCmRp
ZmYgLS1naXQgYS90b29scy9saWJ4Yy94Y19zcl9yZXN0b3JlX3g4Nl9wdi5jIGIvdG9vbHMvbGli
eGMveGNfc3JfcmVzdG9yZV94ODZfcHYuYwppbmRleCA5ZTlmZjMyZDQ3Li4yMzY3ZjJhOWVkIDEw
MDY0NAotLS0gYS90b29scy9saWJ4Yy94Y19zcl9yZXN0b3JlX3g4Nl9wdi5jCisrKyBiL3Rvb2xz
L2xpYnhjL3hjX3NyX3Jlc3RvcmVfeDg2X3B2LmMKQEAgLTE0NSw3ICsxNDUsOCBAQCBzdGF0aWMg
aW50IHByb2Nlc3Nfc3RhcnRfaW5mbyhzdHJ1Y3QgeGNfc3JfY29udGV4dCAqY3R4LAogICAgICAg
ICBFUlJPUigiU3RhcnQgSW5mbyBwZm4gJSNseCBvdXQgb2YgcmFuZ2UiLCBwZm4pOwogICAgICAg
ICBnb3RvIGVycjsKICAgICB9Ci0gICAgZWxzZSBpZiAoIGN0eC0+eDg2X3B2LnJlc3RvcmUucGZu
X3R5cGVzW3Bmbl0gIT0gWEVOX0RPTUNUTF9QRklORk9fTk9UQUIgKQorCisgICAgaWYgKCBjdHgt
Png4Nl9wdi5yZXN0b3JlLnBmbl90eXBlc1twZm5dICE9IFhFTl9ET01DVExfUEZJTkZPX05PVEFC
ICkKICAgICB7CiAgICAgICAgIEVSUk9SKCJTdGFydCBJbmZvIHBmbiAlI2x4IGhhcyBiYWQgdHlw
ZSAldSIsIHBmbiwKICAgICAgICAgICAgICAgKGN0eC0+eDg2X3B2LnJlc3RvcmUucGZuX3R5cGVz
W3Bmbl0gPj4KQEAgLTI3NSw4ICsyNzYsOCBAQCBzdGF0aWMgaW50IHByb2Nlc3NfdmNwdV9iYXNp
YyhzdHJ1Y3QgeGNfc3JfY29udGV4dCAqY3R4LAogICAgICAgICAgICAgRVJST1IoIkdEVCBmcmFt
ZSAldSAocGZuICUjbHgpIG91dCBvZiByYW5nZSIsIGksIHBmbik7CiAgICAgICAgICAgICBnb3Rv
IGVycjsKICAgICAgICAgfQotICAgICAgICBlbHNlIGlmICggKGN0eC0+eDg2X3B2LnJlc3RvcmUu
cGZuX3R5cGVzW3Bmbl0gIT0KLSAgICAgICAgICAgICAgICAgICBYRU5fRE9NQ1RMX1BGSU5GT19O
T1RBQikgKQorCisgICAgICAgIGlmICggKGN0eC0+eDg2X3B2LnJlc3RvcmUucGZuX3R5cGVzW3Bm
bl0gIT0gWEVOX0RPTUNUTF9QRklORk9fTk9UQUIpICkKICAgICAgICAgewogICAgICAgICAgICAg
RVJST1IoIkdEVCBmcmFtZSAldSAocGZuICUjbHgpIGhhcyBiYWQgdHlwZSAldSIsIGksIHBmbiwK
ICAgICAgICAgICAgICAgICAgIChjdHgtPng4Nl9wdi5yZXN0b3JlLnBmbl90eXBlc1twZm5dID4+
CkBAIC0zMDIsMTAgKzMwMywxMCBAQCBzdGF0aWMgaW50IHByb2Nlc3NfdmNwdV9iYXNpYyhzdHJ1
Y3QgeGNfc3JfY29udGV4dCAqY3R4LAogICAgICAgICBFUlJPUigiY3IzIChwZm4gJSNseCkgb3V0
IG9mIHJhbmdlIiwgcGZuKTsKICAgICAgICAgZ290byBlcnI7CiAgICAgfQotICAgIGVsc2UgaWYg
KCAoY3R4LT54ODZfcHYucmVzdG9yZS5wZm5fdHlwZXNbcGZuXSAmCi0gICAgICAgICAgICAgICAg
WEVOX0RPTUNUTF9QRklORk9fTFRBQlRZUEVfTUFTSykgIT0KLSAgICAgICAgICAgICAgKCgoeGVu
X3Bmbl90KWN0eC0+eDg2X3B2LmxldmVscykgPDwKLSAgICAgICAgICAgICAgIFhFTl9ET01DVExf
UEZJTkZPX0xUQUJfU0hJRlQpICkKKworICAgIGlmICggKGN0eC0+eDg2X3B2LnJlc3RvcmUucGZu
X3R5cGVzW3Bmbl0gJgorICAgICAgICAgIFhFTl9ET01DVExfUEZJTkZPX0xUQUJUWVBFX01BU0sp
ICE9CisgICAgICAgICAoKCh4ZW5fcGZuX3QpY3R4LT54ODZfcHYubGV2ZWxzKSA8PCBYRU5fRE9N
Q1RMX1BGSU5GT19MVEFCX1NISUZUKSApCiAgICAgewogICAgICAgICBFUlJPUigiY3IzIChwZm4g
JSNseCkgaGFzIGJhZCB0eXBlICV1LCBleHBlY3RlZCAldSIsIHBmbiwKICAgICAgICAgICAgICAg
KGN0eC0+eDg2X3B2LnJlc3RvcmUucGZuX3R5cGVzW3Bmbl0gPj4KQEAgLTMzNCwxMCArMzM1LDEw
IEBAIHN0YXRpYyBpbnQgcHJvY2Vzc192Y3B1X2Jhc2ljKHN0cnVjdCB4Y19zcl9jb250ZXh0ICpj
dHgsCiAgICAgICAgICAgICBFUlJPUigiY3IxIChwZm4gJSNseCkgb3V0IG9mIHJhbmdlIiwgcGZu
KTsKICAgICAgICAgICAgIGdvdG8gZXJyOwogICAgICAgICB9Ci0gICAgICAgIGVsc2UgaWYgKCAo
Y3R4LT54ODZfcHYucmVzdG9yZS5wZm5fdHlwZXNbcGZuXSAmCi0gICAgICAgICAgICAgICAgICAg
WEVOX0RPTUNUTF9QRklORk9fTFRBQlRZUEVfTUFTSykgIT0KLSAgICAgICAgICAgICAgICAgICgo
KHhlbl9wZm5fdCljdHgtPng4Nl9wdi5sZXZlbHMpIDw8Ci0gICAgICAgICAgICAgICAgICAgWEVO
X0RPTUNUTF9QRklORk9fTFRBQl9TSElGVCkgKQorCisgICAgICAgIGlmICggKGN0eC0+eDg2X3B2
LnJlc3RvcmUucGZuX3R5cGVzW3Bmbl0gJgorICAgICAgICAgICAgICBYRU5fRE9NQ1RMX1BGSU5G
T19MVEFCVFlQRV9NQVNLKSAhPQorICAgICAgICAgICAgICgoKHhlbl9wZm5fdCljdHgtPng4Nl9w
di5sZXZlbHMpIDw8IFhFTl9ET01DVExfUEZJTkZPX0xUQUJfU0hJRlQpICkKICAgICAgICAgewog
ICAgICAgICAgICAgRVJST1IoImNyMSAocGZuICUjbHgpIGhhcyBiYWQgdHlwZSAldSwgZXhwZWN0
ZWQgJXUiLCBwZm4sCiAgICAgICAgICAgICAgICAgICAoY3R4LT54ODZfcHYucmVzdG9yZS5wZm5f
dHlwZXNbcGZuXSA+PgpAQCAtNTQyLDggKzU0Myw4IEBAIHN0YXRpYyBpbnQgdXBkYXRlX2d1ZXN0
X3AybShzdHJ1Y3QgeGNfc3JfY29udGV4dCAqY3R4KQogICAgICAgICAgICAgICAgICAgcGZuLCBp
KTsKICAgICAgICAgICAgIGdvdG8gZXJyOwogICAgICAgICB9Ci0gICAgICAgIGVsc2UgaWYgKCAo
Y3R4LT54ODZfcHYucmVzdG9yZS5wZm5fdHlwZXNbcGZuXSAhPQotICAgICAgICAgICAgICAgICAg
IFhFTl9ET01DVExfUEZJTkZPX05PVEFCKSApCisKKyAgICAgICAgaWYgKCAoY3R4LT54ODZfcHYu
cmVzdG9yZS5wZm5fdHlwZXNbcGZuXSAhPSBYRU5fRE9NQ1RMX1BGSU5GT19OT1RBQikgKQogICAg
ICAgICB7CiAgICAgICAgICAgICBFUlJPUigicGZuICglI2x4KSBmb3IgcDJtX2ZyYW1lX2xpc3Rb
JXVdIGhhcyBiYWQgdHlwZSAldSIsIHBmbiwgaSwKICAgICAgICAgICAgICAgICAgIChjdHgtPng4
Nl9wdi5yZXN0b3JlLnBmbl90eXBlc1twZm5dID4+CkBAIC02OTIsNyArNjkzLDggQEAgc3RhdGlj
IGludCBoYW5kbGVfeDg2X3B2X3AybV9mcmFtZXMoc3RydWN0IHhjX3NyX2NvbnRleHQgKmN0eCwK
ICAgICAgICAgICAgICAgcmVjLT5sZW5ndGgsIHNpemVvZigqZGF0YSkgKyBzaXplb2YodWludDY0
X3QpKTsKICAgICAgICAgcmV0dXJuIC0xOwogICAgIH0KLSAgICBlbHNlIGlmICggZGF0YS0+c3Rh
cnRfcGZuID4gZGF0YS0+ZW5kX3BmbiApCisKKyAgICBpZiAoIGRhdGEtPnN0YXJ0X3BmbiA+IGRh
dGEtPmVuZF9wZm4gKQogICAgIHsKICAgICAgICAgRVJST1IoIkVuZCBwZm4gaW4gc3RyZWFtICgl
I3gpIGV4Y2VlZHMgU3RhcnQgKCUjeCkiLAogICAgICAgICAgICAgICBkYXRhLT5lbmRfcGZuLCBk
YXRhLT5zdGFydF9wZm4pOwpAQCAtMTAzOSw3ICsxMDQxLDggQEAgc3RhdGljIGludCB4ODZfcHZf
c2V0dXAoc3RydWN0IHhjX3NyX2NvbnRleHQgKmN0eCkKICAgICAgICAgICAgICAgZGhkcl90eXBl
X3RvX3N0cihjdHgtPnJlc3RvcmUuZ3Vlc3RfdHlwZSkpOwogICAgICAgICByZXR1cm4gLTE7CiAg
ICAgfQotICAgIGVsc2UgaWYgKCBjdHgtPnJlc3RvcmUuZ3Vlc3RfcGFnZV9zaXplICE9IFBBR0Vf
U0laRSApCisKKyAgICBpZiAoIGN0eC0+cmVzdG9yZS5ndWVzdF9wYWdlX3NpemUgIT0gUEFHRV9T
SVpFICkKICAgICB7CiAgICAgICAgIEVSUk9SKCJJbnZhbGlkIHBhZ2Ugc2l6ZSAlZCBmb3IgeDg2
X3B2IGRvbWFpbnMiLAogICAgICAgICAgICAgICBjdHgtPnJlc3RvcmUuZ3Vlc3RfcGFnZV9zaXpl
KTsKLS0gCjIuMTEuMAoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qu
b3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2
ZWw=

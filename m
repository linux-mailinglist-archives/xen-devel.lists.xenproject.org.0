Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id C432E87A2E
	for <lists+xen-devel@lfdr.de>; Fri,  9 Aug 2019 14:32:52 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hw41H-0002ig-U1; Fri, 09 Aug 2019 12:29:19 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=kmRG=WF=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hw41H-0002ib-0M
 for xen-devel@lists.xenproject.org; Fri, 09 Aug 2019 12:29:19 +0000
X-Inumbo-ID: 4d564600-baa1-11e9-8980-bc764e045a96
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 4d564600-baa1-11e9-8980-bc764e045a96;
 Fri, 09 Aug 2019 12:29:16 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 996BDADFE;
 Fri,  9 Aug 2019 12:29:15 +0000 (UTC)
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <d1ae0cb5-2dfb-7984-62ec-19f7f5a5abaf@suse.com>
Date: Fri, 9 Aug 2019 14:29:16 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="------------4B6578F639BBECA6681C860C"
Content-Language: en-US
Subject: [Xen-devel] [PATCH v4 0/2] x86/xpti: Don't leak TSS-adjacent percpu
 data via Meltdown
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>, Wei Liu <wl@xen.org>,
 =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

This is a multi-part message in MIME format.
--------------4B6578F639BBECA6681C860C
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

From: Andrew Cooper <andrew.cooper3@citrix.com>

1: xen/link: Introduce .bss.percpu.page_aligned
2: x86/xpti: Don't leak TSS-adjacent percpu data via Meltdown

Addressing my own v3 review comments, albeit in a slightly extended
form.

Jan

--------------4B6578F639BBECA6681C860C
Content-Type: text/plain; charset=UTF-8;
 name="bss-per-CPU-page-aligned.patch"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="bss-per-CPU-page-aligned.patch"

eGVuL2xpbms6IEludHJvZHVjZSAuYnNzLnBlcmNwdS5wYWdlX2FsaWduZWQKCkZ1dHVyZSBj
aGFuZ2VzIGFyZSBnb2luZyB0byBuZWVkIHRvIHBhZ2UgYWxpZ24gc29tZSBwZXJjcHUgZGF0
YS4KClNodWZmbGUgdGhlIGV4YWN0IGxpbmsgb3JkZXIgb2YgaXRlbXMgd2l0aGluIHRoZSBC
U1MgdG8gZ2l2ZQouYnNzLnBlcmNwdS5wYWdlX2FsaWduZWQgYXBwcm9wcmlhdGUgYWxpZ25t
ZW50LCBldmVuIG9uIENQVTAsIHdoaWNoIHVzZXMKLmJzcy5wZXJjcHUgaXRzZWxmLgoKSW5z
ZXJ0IGV4cGxpY2l0IGFsaWdubWVudCBzdWNoIHRoYXQgdGhlIHJlc3VsdCBpcyBzYWZlIGV2
ZW4gd2l0aCBvYmplY3RzCnNob3J0ZXIgdGhhbiBhIHBhZ2UgaW4gbGVuZ3RoLiAgVGhlIFBP
SU5URVJfQUxJR04gZm9yIF9fYnNzX2VuZCBpcyB0byBjb3Zlcgp0aGUgbGFjayBvZiBTTVBf
Q0FDSEVfQllURVMgYWxpZ25tZW50LCBhcyB0aGUgbG9vcHMgd2hpY2ggemVybyB0aGUgQlNT
IHVzZQpwb2ludGVyLXNpemVkIHN0b3JlcyBvbiBhbGwgYXJjaGl0ZWN0dXJlcy4KCkluIGFk
ZGl0aW9uLCB3ZSBuZWVkIHRvIGJlIGFibGUgdG8gc3BlY2lmeSBhbiBhbGlnbm1lbnQgYXR0
cmlidXRlIHRvCl9fREVGSU5FX1BFUl9DUFUoKS4gIFJld29yayBpdCBzbyB0aGUgY2FsbGVy
IHBhc3NlcyBpbiBhbGwgYXR0cmlidXRlcywgYW5kCmFkanVzdCBERUZJTkVfUEVSX0NQVXss
X1JFQURfTU9TVExZfSgpIHRvIG1hdGNoLiAgVGhpcyBoYXMgdGhlIGFkZGVkIGJvbnVzCnRo
YXQgaXQgaXMgbm93IHBvc3NpYmxlIHRvIGdyZXAgZm9yIC5ic3MucGVyY3B1IGFuZCBmaW5k
IGFsbCB0aGUgdXNlcnMuCgpGaW5hbGx5LCBpbnRyb2R1Y2UgREVGSU5FX1BFUl9DUFVfUEFH
RV9BTElHTkVEKCkgd2hpY2ggc3BlY2lmaWVzIHRoZQpzZWN0aW9uIGF0dHJpYnV0ZSBhbmQg
dmVyaWZpZXMgdGhlIHR5cGUncyBhbGlnbm1lbnQuCgpTaWduZWQtb2ZmLWJ5OiBBbmRyZXcg
Q29vcGVyIDxhbmRyZXcuY29vcGVyM0BjaXRyaXguY29tPgoKTWFrZSBERUZJTkVfUEVSX0NQ
VV9QQUdFX0FMSUdORUQoKSB2ZXJpZnkgdGhlIGFsaWdubWVudCByYXRoZXIgdGhhbgpzcGVj
aWZ5aW5nIGl0LiBJdCBpcyB0aGUgdW5kZXJseWluZyB0eXBlIHdoaWNoIHNob3VsZCBiZSBz
dWl0YWJseSBhbGlnbmVkLgoKU2lnbmVkLW9mZi1ieTogSmFuIEJldWxpY2ggPGpiZXVsaWNo
QHN1c2UuY29tPgpBY2tlZC1ieTogSnVsaWVuIEdyYWxsIDxqdWxpZW4uZ3JhbGxAYXJtLmNv
bT4KLS0tCkEgc2FtcGxlIGJ1aWxkIGluY2x1ZGluZyB0aGUgc3Vic2VxdWVudCBwYXRjaCBp
cyBub3c6CgpmZmZmODJkMDgwOTJkMDAwIEIgemVyb19wYWdlCmZmZmY4MmQwODA5MmUwMDAg
QiBwZXJfY3B1X19pbml0X3RzcwpmZmZmODJkMDgwOTJlMDAwIEIgX19wZXJfY3B1X3N0YXJ0
CmZmZmY4MmQwODA5MmYwMDAgQiBwZXJfY3B1X19jcHVwb29sCmZmZmY4MmQwODA5MmYwMDgg
YiBwZXJfY3B1X19jb250aW51ZV9pbmZvCmZmZmY4MmQwODA5MmYwMTAgYiBwZXJfY3B1X19n
cmFudF9yd2xvY2sKCndoaWNoIGRlbW9uc3RyYXRlcyB0aGUgY29ycmVjdCBhbGlnbm1lbnQg
b2YgZGF0YSBpbiAuYnNzLnBlcmNwdSBldmVuIHdoZW4KZm9sbG93aW5nIGEgbm9uLXBhZ2Ut
c2l6ZWQgb2JqZWN0IGluIC5ic3MucGVyY3B1LnBhZ2VfYWxpZ25lZC4KCnY0OgogKiBEcm9w
IHN0cmF5IHRyYWlsaW5nIEFMSUdOKCkuIE1ha2UgREVGSU5FX1BFUl9DUFVfUEFHRV9BTElH
TkVEKCkgdmVyaWZ5CiAgIHRoZSBhbGlnbm1lbnQgcmF0aGVyIHRoYW4gc3BlY2lmeWluZyBp
dC4KCnYzOgogKiBJbnNlcnQgZXhwbGljaXQgYWxpZ25tZW50LgogKiBSZWR1Y2UgX19ic3Nf
ZW5kJ3MgYWxpZ25tZW50IHRvIGp1c3QgUE9JTlRFUl9BTElHTi4KCnYyOgogKiBSZXdvcmsg
X19ERUZJTkVfUEVSX0NQVSgpIHRvIGFsbG93IGZvciBmdXJ0aGVyIGF0dHJpYnV0ZXMgdG8g
YmUgcGFzc2VkLgogKiBTcGVjaWZ5IF9fYWxpZ25lZChQQUdFX1NJWkUpIGFzIHBhcnQgb2Yg
REVGSU5FX1BFUl9DUFVfUEFHRV9BTElHTkVEKCkuCgotLS0gYS94ZW4vYXJjaC9hcm0veGVu
Lmxkcy5TCisrKyBiL3hlbi9hcmNoL2FybS94ZW4ubGRzLlMKQEAgLTIwMCwxNCArMjAwLDE2
IEBAIFNFQ1RJT05TCiAgICAgICAgKiguYnNzLnN0YWNrX2FsaWduZWQpCiAgICAgICAgLiA9
IEFMSUdOKFBBR0VfU0laRSk7CiAgICAgICAgKiguYnNzLnBhZ2VfYWxpZ25lZCkKLSAgICAg
ICAqKC5ic3MpCi0gICAgICAgLiA9IEFMSUdOKFNNUF9DQUNIRV9CWVRFUyk7CisgICAgICAg
LiA9IEFMSUdOKFBBR0VfU0laRSk7CiAgICAgICAgX19wZXJfY3B1X3N0YXJ0ID0gLjsKKyAg
ICAgICAqKC5ic3MucGVyY3B1LnBhZ2VfYWxpZ25lZCkKICAgICAgICAqKC5ic3MucGVyY3B1
KQogICAgICAgIC4gPSBBTElHTihTTVBfQ0FDSEVfQllURVMpOwogICAgICAgICooLmJzcy5w
ZXJjcHUucmVhZF9tb3N0bHkpCiAgICAgICAgLiA9IEFMSUdOKFNNUF9DQUNIRV9CWVRFUyk7
CiAgICAgICAgX19wZXJfY3B1X2RhdGFfZW5kID0gLjsKKyAgICAgICAqKC5ic3MpCisgICAg
ICAgLiA9IEFMSUdOKFBPSU5URVJfQUxJR04pOwogICAgICAgIF9fYnNzX2VuZCA9IC47CiAg
IH0gOnRleHQKICAgX2VuZCA9IC4gOwotLS0gYS94ZW4vYXJjaC94ODYveGVuLmxkcy5TCisr
KyBiL3hlbi9hcmNoL3g4Ni94ZW4ubGRzLlMKQEAgLTI5MiwxNCArMjkyLDE2IEBAIFNFQ1RJ
T05TCiAgICAgICAgX19ic3Nfc3RhcnQgPSAuOwogICAgICAgICooLmJzcy5zdGFja19hbGln
bmVkKQogICAgICAgICooLmJzcy5wYWdlX2FsaWduZWQqKQotICAgICAgICooLmJzcykKLSAg
ICAgICAuID0gQUxJR04oU01QX0NBQ0hFX0JZVEVTKTsKKyAgICAgICAuID0gQUxJR04oUEFH
RV9TSVpFKTsKICAgICAgICBfX3Blcl9jcHVfc3RhcnQgPSAuOworICAgICAgICooLmJzcy5w
ZXJjcHUucGFnZV9hbGlnbmVkKQogICAgICAgICooLmJzcy5wZXJjcHUpCiAgICAgICAgLiA9
IEFMSUdOKFNNUF9DQUNIRV9CWVRFUyk7CiAgICAgICAgKiguYnNzLnBlcmNwdS5yZWFkX21v
c3RseSkKICAgICAgICAuID0gQUxJR04oU01QX0NBQ0hFX0JZVEVTKTsKICAgICAgICBfX3Bl
cl9jcHVfZGF0YV9lbmQgPSAuOworICAgICAgICooLmJzcykKKyAgICAgICAuID0gQUxJR04o
UE9JTlRFUl9BTElHTik7CiAgICAgICAgX19ic3NfZW5kID0gLjsKICAgfSA6dGV4dAogICBf
ZW5kID0gLiA7Ci0tLSBhL3hlbi9pbmNsdWRlL2FzbS1hcm0vcGVyY3B1LmgKKysrIGIveGVu
L2luY2x1ZGUvYXNtLWFybS9wZXJjcHUuaApAQCAtMTAsMTAgKzEwLDggQEAgZXh0ZXJuIGNo
YXIgX19wZXJfY3B1X3N0YXJ0W10sIF9fcGVyX2NwdQogZXh0ZXJuIHVuc2lnbmVkIGxvbmcg
X19wZXJfY3B1X29mZnNldFtOUl9DUFVTXTsKIHZvaWQgcGVyY3B1X2luaXRfYXJlYXModm9p
ZCk7CiAKLS8qIFNlcGFyYXRlIG91dCB0aGUgdHlwZSwgc28gKGludFszXSwgZm9vKSB3b3Jr
cy4gKi8KLSNkZWZpbmUgX19ERUZJTkVfUEVSX0NQVSh0eXBlLCBuYW1lLCBzdWZmaXgpICAg
ICAgICAgICAgICAgICAgICBcCi0gICAgX19zZWN0aW9uKCIuYnNzLnBlcmNwdSIgI3N1ZmZp
eCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAotICAgIF9fdHlwZW9mX18odHlwZSkg
cGVyX2NwdV8jI25hbWUKKyNkZWZpbmUgX19ERUZJTkVfUEVSX0NQVShhdHRyLCB0eXBlLCBu
YW1lKSBcCisgICAgYXR0ciBfX3R5cGVvZl9fKHR5cGUpIHBlcl9jcHVfICMjIG5hbWUKIAog
I2RlZmluZSBwZXJfY3B1KHZhciwgY3B1KSAgXAogICAgICgqUkVMT0NfSElERSgmcGVyX2Nw
dV9fIyN2YXIsIF9fcGVyX2NwdV9vZmZzZXRbY3B1XSkpCi0tLSBhL3hlbi9pbmNsdWRlL2Fz
bS14ODYvcGVyY3B1LmgKKysrIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9wZXJjcHUuaApAQCAt
NywxMCArNyw4IEBAIGV4dGVybiB1bnNpZ25lZCBsb25nIF9fcGVyX2NwdV9vZmZzZXRbTlIK
IHZvaWQgcGVyY3B1X2luaXRfYXJlYXModm9pZCk7CiAjZW5kaWYKIAotLyogU2VwYXJhdGUg
b3V0IHRoZSB0eXBlLCBzbyAoaW50WzNdLCBmb28pIHdvcmtzLiAqLwotI2RlZmluZSBfX0RF
RklORV9QRVJfQ1BVKHR5cGUsIG5hbWUsIHN1ZmZpeCkgICAgICAgICAgICAgICAgICAgIFwK
LSAgICBfX3NlY3Rpb24oIi5ic3MucGVyY3B1IiAjc3VmZml4KSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBcCi0gICAgX190eXBlb2ZfXyh0eXBlKSBwZXJfY3B1XyMjbmFtZQorI2Rl
ZmluZSBfX0RFRklORV9QRVJfQ1BVKGF0dHIsIHR5cGUsIG5hbWUpIFwKKyAgICBhdHRyIF9f
dHlwZW9mX18odHlwZSkgcGVyX2NwdV8gIyMgbmFtZQogCiAvKiB2YXIgaXMgaW4gZGlzY2Fy
ZGVkIHJlZ2lvbjogb2Zmc2V0IHRvIHBhcnRpY3VsYXIgY29weSB3ZSB3YW50ICovCiAjZGVm
aW5lIHBlcl9jcHUodmFyLCBjcHUpICBcCi0tLSBhL3hlbi9pbmNsdWRlL3hlbi9wZXJjcHUu
aAorKysgYi94ZW4vaW5jbHVkZS94ZW4vcGVyY3B1LmgKQEAgLTksOSArOSwxNyBAQAogICog
VGhlIF8jI25hbWUgY29uY2F0ZW5hdGlvbiBpcyBiZWluZyB1c2VkIGhlcmUgdG8gcHJldmVu
dCAnbmFtZScgZnJvbSBnZXR0aW5nCiAgKiBtYWNybyBleHBhbmRlZCwgd2hpbGUgc3RpbGwg
YWxsb3dpbmcgYSBwZXItYXJjaGl0ZWN0dXJlIHN5bWJvbCBuYW1lIHByZWZpeC4KICAqLwot
I2RlZmluZSBERUZJTkVfUEVSX0NQVSh0eXBlLCBuYW1lKSBfX0RFRklORV9QRVJfQ1BVKHR5
cGUsIF8jI25hbWUsICkKKyNkZWZpbmUgREVGSU5FX1BFUl9DUFUodHlwZSwgbmFtZSkgXAor
ICAgIF9fREVGSU5FX1BFUl9DUFUoX19zZWN0aW9uKCIuYnNzLnBlcmNwdSIpLCB0eXBlLCBf
ICMjIG5hbWUpCisKKyNkZWZpbmUgREVGSU5FX1BFUl9DUFVfUEFHRV9BTElHTkVEKHR5cGUs
IG5hbWUpIFwKKyAgICB0eXBlZGVmIGNoYXIgbmFtZSAjIyBfY2hrX3RbQlVJTERfQlVHX09O
X1pFUk8oX19hbGlnbm9mKHR5cGUpICYgXAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAoUEFHRV9TSVpFIC0gMSkpXTsgXAorICAgIF9fREVG
SU5FX1BFUl9DUFUoX19zZWN0aW9uKCIuYnNzLnBlcmNwdS5wYWdlX2FsaWduZWQiKSwgXAor
ICAgICAgICAgICAgICAgICAgICAgdHlwZSwgXyAjIyBuYW1lKQorCiAjZGVmaW5lIERFRklO
RV9QRVJfQ1BVX1JFQURfTU9TVExZKHR5cGUsIG5hbWUpIFwKLQlfX0RFRklORV9QRVJfQ1BV
KHR5cGUsIF8jI25hbWUsIC5yZWFkX21vc3RseSkKKyAgICBfX0RFRklORV9QRVJfQ1BVKF9f
c2VjdGlvbigiLmJzcy5wZXJjcHUucmVhZF9tb3N0bHkiKSwgdHlwZSwgXyAjIyBuYW1lKQog
CiAjZGVmaW5lIGdldF9wZXJfY3B1X3Zhcih2YXIpICAocGVyX2NwdV9fIyN2YXIpCiAK
--------------4B6578F639BBECA6681C860C
Content-Type: text/plain; charset=UTF-8;
 name="x86-TSS-adjacent-leak.patch"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="x86-TSS-adjacent-leak.patch"

eDg2L3hwdGk6IERvbid0IGxlYWsgVFNTLWFkamFjZW50IHBlcmNwdSBkYXRhIHZpYSBNZWx0
ZG93bgoKVGhlIFhQVEkgd29yayByZXN0cmljdGVkIHRoZSB2aXNpYmlsaXR5IG9mIG1vc3Qg
b2YgbWVtb3J5LCBidXQgbWlzc2VkIGEgZmV3CmFzcGVjdHMgd2hlbiBpdCBjYW1lIHRvIHRo
ZSBUU1MuCgpHaXZlbiB0aGF0IHRoZSBUU1MgaXMganVzdCBhbiBvYmplY3QgaW4gcGVyY3B1
IGRhdGEsIHRoZSA0ayBtYXBwaW5nIGZvciBpdApjcmVhdGVkIGluIHNldHVwX2NwdV9yb290
X3BndCgpIG1hcHMgYWRqYWNlbnQgcGVyY3B1IGRhdGEsIG1ha2luZyBpdCBhbGwKbGVha2Fi
bGUgdmlhIE1lbHRkb3duLCBldmVuIHdoZW4gWFBUSSBpcyBpbiB1c2UuCgpGdXJ0aGVybW9y
ZSwgbm8gY2FyZSBpcyB0YWtlbiB0byBjaGVjayB0aGF0IHRoZSBUU1MgZG9lc24ndCBjcm9z
cyBhIHBhZ2UKYm91bmRhcnkuICBBcyBpdCB0dXJucyBvdXQsIHN0cnVjdCB0c3Nfc3RydWN0
IGlzIGFsaWduZWQgb24gaXRzIHNpemUgd2hpY2gKZG9lcyBwcmV2ZW50IGl0IHN0cmFkZGxp
bmcgYSBwYWdlIGJvdW5kYXJ5LgoKTW92ZSB0aGUgVFNTIGludG8gdGhlIHBhZ2UgYWxpZ25l
ZCBwZXJjcHUgYXJlYSwgc28gbm8gYWRqYWNlbnQgZGF0YSBjYW4gYmUKbGVha2VkLiAgTW92
ZSB0aGUgZGVmaW5pdGlvbiBmcm9tIHNldHVwLmMgdG8gdHJhcHMuYywgd2hpY2ggaXMgYSBt
b3JlCmFwcHJvcHJpYXRlIHBsYWNlIGZvciBpdCB0byBsaXZlLgoKU2lnbmVkLW9mZi1ieTog
QW5kcmV3IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KCkludHJvZHVjZSAv
IHVzZSBzdHJ1Y3QgdHNzX3BhZ2UuCgpTaWduZWQtb2ZmLWJ5OiBKYW4gQmV1bGljaCA8amJl
dWxpY2hAc3VzZS5jb20+Ci0tLQpUQkQ6IEVzcGVjaWFsbHkgd2l0aCBob3cgdGhlIHByZXZp
b3VzIHBhdGNoIG5vdyB3b3JrcyBJJ20gdW5jb252aW5jZWQgb2YKICAgICB0aGUgdXRpbGl0
eSBvZiB0aGUgbGlua2VyIHNjcmlwdCBhbGlnbm1lbnQgY2hlY2suIEl0IGluIHBhcnRpY3Vs
YXIKICAgICBkb2Vzbid0IGNoZWNrIHRoZSBwcm9wZXJ0eSB3ZSdyZSBhZnRlciBpbiB0aGlz
IHBhdGNoLCBpLmUuIHRoZSBmYWN0CiAgICAgdGhhdCB0aGVyZSdzIG5vdGhpbmcgZWxzZSBp
biB0aGUgc2FtZSBwYWdlLgpOQjogU2FkbHkgZ2V0X3Blcl9jcHVfdmFyKCkgY2FuJ3QgYWxz
byBiZSB1c2VkIG9uIHRoZSAibGVmdCIgc2lkZSBvZiBhCiAgICAjZGVmaW5lLgotLS0KdjQ6
CiAqIEludHJvZHVjZSAvIHVzZSBzdHJ1Y3QgdHNzX3BhZ2UuCgp2MzoKICogRHJvcCB0aGUg
cmVtYXJrIGFib3V0IENFVC4gIEl0IGlzIG5vIGxvbmdlciBhY2N1cmF0ZSBpbiB0aGUgbGF0
ZXN0IHZlcnNpb24KICAgb2YgdGhlIENFVCBzcGVjLgoKdjI6CiAqIFJlYmFzZSBvdmVyIGNo
YW5nZXMgdG8gaW5jbHVkZSBfX2FsaWduZWQoKSB3aXRoaW4KICAgREVGSU5FX1BFUl9DUFVf
UEFHRV9BTElHTkVEKCkKICogRHJvcCBub3ctdW51c2VkIHhlbi9wZXJjcHUuaCBmcm9tIHNl
dHVwLmMKCi0tLSBhL3hlbi9hcmNoL3g4Ni9zZXR1cC5jCisrKyBiL3hlbi9hcmNoL3g4Ni9z
ZXR1cC5jCkBAIC0xNiw3ICsxNiw2IEBACiAjaW5jbHVkZSA8eGVuL2RvbWFpbl9wYWdlLmg+
CiAjaW5jbHVkZSA8eGVuL3ZlcnNpb24uaD4KICNpbmNsdWRlIDx4ZW4vZ2Ric3R1Yi5oPgot
I2luY2x1ZGUgPHhlbi9wZXJjcHUuaD4KICNpbmNsdWRlIDx4ZW4vaHlwZXJjYWxsLmg+CiAj
aW5jbHVkZSA8eGVuL2tleWhhbmRsZXIuaD4KICNpbmNsdWRlIDx4ZW4vbnVtYS5oPgpAQCAt
MTAwLDggKzk5LDYgQEAgdW5zaWduZWQgbG9uZyBfX3JlYWRfbW9zdGx5IHhlbl9waHlzX3N0
YQogCiB1bnNpZ25lZCBsb25nIF9fcmVhZF9tb3N0bHkgeGVuX3ZpcnRfZW5kOwogCi1ERUZJ
TkVfUEVSX0NQVShzdHJ1Y3QgdHNzX3N0cnVjdCwgaW5pdF90c3MpOwotCiBjaGFyIF9fc2Vj
dGlvbigiLmJzcy5zdGFja19hbGlnbmVkIikgX19hbGlnbmVkKFNUQUNLX1NJWkUpCiAgICAg
Y3B1MF9zdGFja1tTVEFDS19TSVpFXTsKIAotLS0gYS94ZW4vYXJjaC94ODYvdHJhcHMuYwor
KysgYi94ZW4vYXJjaC94ODYvdHJhcHMuYwpAQCAtMTA4LDYgKzEwOCwxMiBAQCBpZHRfZW50
cnlfdCBfX3NlY3Rpb24oIi5ic3MucGFnZV9hbGlnbmVkCiAvKiBQb2ludGVyIHRvIHRoZSBJ
RFQgb2YgZXZlcnkgQ1BVLiAqLwogaWR0X2VudHJ5X3QgKmlkdF90YWJsZXNbTlJfQ1BVU10g
X19yZWFkX21vc3RseTsKIAorLyoKKyAqIFRoZSBUU1MgaXMgc21hbGxlciB0aGFuIGEgcGFn
ZSwgYnV0IHdlIGdpdmUgaXQgYSBmdWxsIHBhZ2UgdG8gYXZvaWQKKyAqIGFkamFjZW50IHBl
ci1jcHUgZGF0YSBsZWFraW5nIHZpYSBNZWx0ZG93biB3aGVuIFhQVEkgaXMgaW4gdXNlLgor
ICovCitERUZJTkVfUEVSX0NQVV9QQUdFX0FMSUdORUQoc3RydWN0IHRzc19wYWdlLCBpbml0
X3Rzc19wYWdlKTsKKwogYm9vbCAoKmlvZW11bF9oYW5kbGVfcXVpcmspKAogICAgIHU4IG9w
Y29kZSwgY2hhciAqaW9fZW11bF9zdHViLCBzdHJ1Y3QgY3B1X3VzZXJfcmVncyAqcmVncyk7
CiAKLS0tIGEveGVuL2FyY2gveDg2L3hlbi5sZHMuUworKysgYi94ZW4vYXJjaC94ODYveGVu
Lmxkcy5TCkBAIC0zNjgsNiArMzY4LDggQEAgQVNTRVJUKElTX0FMSUdORUQoX18yTV9yd2Rh
dGFfZW5kLCAgIFNFQwogCiBBU1NFUlQoSVNfQUxJR05FRChjcHUwX3N0YWNrLCBTVEFDS19T
SVpFKSwgImNwdTBfc3RhY2sgbWlzYWxpZ25lZCIpCiAKK0FTU0VSVChJU19BTElHTkVEKHBl
cl9jcHVfX2luaXRfdHNzX3BhZ2UsIFBBR0VfU0laRSksICJwZXJfY3B1KGluaXRfdHNzKSBt
aXNhbGlnbmVkIikKKwogQVNTRVJUKElTX0FMSUdORUQoX19pbml0X2JlZ2luLCBQQUdFX1NJ
WkUpLCAiX19pbml0X2JlZ2luIG1pc2FsaWduZWQiKQogQVNTRVJUKElTX0FMSUdORUQoX19p
bml0X2VuZCwgICBQQUdFX1NJWkUpLCAiX19pbml0X2VuZCBtaXNhbGlnbmVkIikKIAotLS0g
YS94ZW4vaW5jbHVkZS9hc20teDg2L3Byb2Nlc3Nvci5oCisrKyBiL3hlbi9pbmNsdWRlL2Fz
bS14ODYvcHJvY2Vzc29yLmgKQEAgLTQxMSw3ICs0MTEsNyBAQCBzdGF0aWMgYWx3YXlzX2lu
bGluZSB2b2lkIF9fbXdhaXQodW5zaWduCiAjZGVmaW5lIElPQk1QX0JZVEVTICAgICAgICAg
ICAgIDgxOTIKICNkZWZpbmUgSU9CTVBfSU5WQUxJRF9PRkZTRVQgICAgMHg4MDAwCiAKLXN0
cnVjdCBfX3BhY2tlZCBfX2NhY2hlbGluZV9hbGlnbmVkIHRzc19zdHJ1Y3Qgeworc3RydWN0
IF9fcGFja2VkIHRzc19zdHJ1Y3QgewogICAgIHVpbnQzMl90IDozMjsKICAgICB1aW50NjRf
dCByc3AwLCByc3AxLCByc3AyOwogICAgIHVpbnQ2NF90IDo2NDsKQEAgLTQyNSw2ICs0MjUs
MTEgQEAgc3RydWN0IF9fcGFja2VkIF9fY2FjaGVsaW5lX2FsaWduZWQgdHNzXwogICAgIC8q
IFBhZHMgdGhlIFRTUyB0byBiZSBjYWNoZWxpbmUtYWxpZ25lZCAodG90YWwgc2l6ZSBpcyAw
eDgwKS4gKi8KICAgICB1aW50OF90IF9fY2FjaGVsaW5lX2ZpbGxlclsyNF07CiB9Oworc3Ry
dWN0IHRzc19wYWdlIHsKKyAgICBzdHJ1Y3QgdHNzX3N0cnVjdCBfX2FsaWduZWQoUEFHRV9T
SVpFKSB0c3M7Cit9OworREVDTEFSRV9QRVJfQ1BVKHN0cnVjdCB0c3NfcGFnZSwgaW5pdF90
c3NfcGFnZSk7CisjZGVmaW5lIHBlcl9jcHVfX2luaXRfdHNzIGdldF9wZXJfY3B1X3Zhcihp
bml0X3Rzc19wYWdlLnRzcykKIAogI2RlZmluZSBJU1RfTk9ORSAwVUwKICNkZWZpbmUgSVNU
X0RGICAgMVVMCkBAIC00NjMsNyArNDY4LDYgQEAgc3RhdGljIGlubGluZSB2b2lkIGRpc2Fi
bGVfZWFjaF9pc3QoaWR0XwogZXh0ZXJuIGlkdF9lbnRyeV90IGlkdF90YWJsZVtdOwogZXh0
ZXJuIGlkdF9lbnRyeV90ICppZHRfdGFibGVzW107CiAKLURFQ0xBUkVfUEVSX0NQVShzdHJ1
Y3QgdHNzX3N0cnVjdCwgaW5pdF90c3MpOwogREVDTEFSRV9QRVJfQ1BVKHJvb3RfcGdlbnRy
eV90ICosIHJvb3RfcGd0KTsKIAogZXh0ZXJuIHZvaWQgd3JpdGVfcHRiYXNlKHN0cnVjdCB2
Y3B1ICp2KTsK
--------------4B6578F639BBECA6681C860C
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: base64
Content-Disposition: inline

X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVs
IG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0
cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

--------------4B6578F639BBECA6681C860C--


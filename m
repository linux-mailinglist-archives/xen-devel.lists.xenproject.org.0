Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B54C2A37EF
	for <lists+xen-devel@lfdr.de>; Fri, 30 Aug 2019 15:44:26 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i3hA3-0006JE-Tn; Fri, 30 Aug 2019 13:41:55 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=xdvb=W2=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1i3hA2-0006J7-DH
 for xen-devel@lists.xenproject.org; Fri, 30 Aug 2019 13:41:54 +0000
X-Inumbo-ID: ec62aa56-cb2b-11e9-ae8a-12813bfff9fa
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id ec62aa56-cb2b-11e9-ae8a-12813bfff9fa;
 Fri, 30 Aug 2019 13:41:52 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id E084DAF89;
 Fri, 30 Aug 2019 13:41:51 +0000 (UTC)
From: Jan Beulich <jbeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
References: <793a54c4-902f-ca02-357f-5080f938e0d6@suse.com>
Message-ID: <6aa3ae80-cb29-76a5-5ee0-dcc14b5c076b@suse.com>
Date: Fri, 30 Aug 2019 15:41:54 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <793a54c4-902f-ca02-357f-5080f938e0d6@suse.com>
Content-Language: en-US
Subject: [Xen-devel] [PATCH v2 2/3] x86: a little bit of 16-bit video mode
 setting code cleanup
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>, Wei Liu <wl@xen.org>,
 =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VG8gImNvbXBlbnNhdGUiIGZvciB0aGUgY29kZSBzaXplIGdyb3d0aCBieSBhbiBlYXJsaWVyIGNo
YW5nZToKLSBkcm9wICJ0cmFtcG9saW5lIiBsYWJlbHMgKGluIGFsbW9zdCBhbGwgY2FzZXMgdGhl
IHRhcmdldCBsYWJlbCBpcwogIHJlYWNoYWJsZSB3aXRoIGFuIDgtYml0LWRpc3BsYWNlbWVudCBi
cmFuY2ggYW55d2F5LCBhbmQgYSBzaW5nbGUgMTYtCiAgYml0LWRpc3BsYWNlbWVudCBicmFuY2gg
aXMgc3RpbGwgYmV0dGVyIHRoYW4gYSBwYWlyIG9mIHR3byBicmFuY2hlcykKLSBkcm9wIGFuIGVu
dGlyZWx5IGRlYWQgaW5zbiBmcm9tIHdha2V1cC5TOm1vZGVfc2V0dwotIHJlZHVjZSBjb2RlIHNp
emUgaW4gYSBmZXcgb3RoZXIgKG9idmlvdXMgSSBob3BlKSBjYXNlcywgYnkgbW9yZQogIHN1aXRh
YmxlIGluc24vb3BlcmFuZHMgc2VsZWN0aW9uCgpBbHNvIGRyb3AgcmVkdW5kYW50ICNkZWZpbmUt
cyAobW92ZSBzdWl0YWJsZSAjaW5jbHVkZSBhIGxpdHRsZSBlYXJsaWVyCmluc3RlYWQpIGFuZCBh
ZGQgdHdvIGFsaWdubWVudCBkaXJlY3RpdmVzLgoKU2lnbmVkLW9mZi1ieTogSmFuIEJldWxpY2gg
PGpiZXVsaWNoQHN1c2UuY29tPgotLS0KdjI6IE1pbm9yIGFkanVzdG1lbnQgdG8gZGVzY3JpcHRp
b24uIFJlLWJhc2UuCgotLS0gYS94ZW4vYXJjaC94ODYvYm9vdC90cmFtcG9saW5lLlMKKysrIGIv
eGVuL2FyY2gveDg2L2Jvb3QvdHJhbXBvbGluZS5TCkBAIC0xNzYsNiArMTc2LDcgQEAgc3RhcnQ2
NDoKIAogICAgICAgICBqbXBxICAgIColcmRpCiAKKyNpbmNsdWRlICJ2aWRlby5oIgogI2luY2x1
ZGUgIndha2V1cC5TIgogCiAgICAgICAgIC5iYWxpZ24gOApAQCAtMjgyLDggKzI4Myw2IEBAIHRy
YW1wb2xpbmVfYm9vdF9jcHVfZW50cnk6CiAgICAgICAgIC8qIEp1bXAgdG8gdGhlIGNvbW1vbiBi
b290c3RyYXAgZW50cnkgcG9pbnQuICovCiAgICAgICAgIGptcCAgICAgdHJhbXBvbGluZV9wcm90
bW9kZV9lbnRyeQogCi0jaW5jbHVkZSAidmlkZW8uaCIKLQogICAgICAgICAuYWxpZ24gIDIKIC8q
IEtlZXAgaW4gc3luYyB3aXRoIGNtZGxpbmUuYzplYXJseV9ib290X29wdHNfdCB0eXBlISAqLwog
ZWFybHlfYm9vdF9vcHRzOgotLS0gYS94ZW4vYXJjaC94ODYvYm9vdC92aWRlby5TCisrKyBiL3hl
bi9hcmNoL3g4Ni9ib290L3ZpZGVvLlMKQEAgLTM4NCw5ICszODQsNiBAQCBsbWJhZDogIGxlYXcg
ICAgYm9vdHN5bSh1bmtudCksICVzaQogICAgICAgICBqbXAgICAgIG1vZGVfbWVudQogbG1kZWY6
ICByZXQKIAotX3NldHJlYzogICAgam1wIHNldHJlYyAgICAgICAgICAgICAgICAgICMgVWdseS4u
LgotX3NldF84MHgyNTogam1wIHNldF84MHgyNQotCiAjIFNldHRpbmcgb2YgdXNlciBtb2RlIChB
WD1tb2RlIElEKSA9PiBDRj1zdWNjZXNzCiBtb2RlX3NldDoKICAgICAgICAgbW92dyAgICAlYXgs
IGJvb3RzeW0oYm9vdF92aWRfbW9kZSkKQEAgLTM5Niw3ICszOTMsNyBAQCBtb2RlX3NldDoKICAg
ICAgICAgamUgICAgICBzZXR2ZXNhYnlzaXplCiAKICAgICAgICAgdGVzdGIgICAkVklERU9fUkVD
QUxDPj44LCAlYWgKLSAgICAgICAgam56ICAgICBfc2V0cmVjCisgICAgICAgIGpueiAgICAgc2V0
cmVjCiAKICAgICAgICAgY21wYiAgICAkVklERU9fRklSU1RfU1BFQ0lBTD4+OCwgJWFoCiAgICAg
ICAgIGp6ICAgICAgc2V0c3BjCkBAIC00MjEsNyArNDE4LDcgQEAgc2V0c3BjOiB4b3JiICAgICVi
aCwgJWJoCiAKIHNldG1lbnU6CiAgICAgICAgIG9yYiAgICAgJWFsLCAlYWwgICAgICAgICAgICAg
ICAgIyA4MHgyNSBpcyBhbiBleGNlcHRpb24KLSAgICAgICAganogICAgICBfc2V0XzgweDI1Cisg
ICAgICAgIGp6ICAgICAgc2V0XzgweDI1CiAgICAgICAgIAogICAgICAgICBwdXNodyAgICVieCAg
ICAgICAgICAgICAgICAgICAgICMgU2V0IG1vZGUgY2hvc2VuIGZyb20gbWVudQogICAgICAgICBj
YWxsICAgIG1vZGVfdGFibGUgICAgICAgICAgICAgICMgQnVpbGQgdGhlIG1vZGUgdGFibGUKQEAg
LTQ0MSwzNiArNDM4LDMyIEBAIGNoZWNrX3Zlc2E6CiAgICAgICAgIGNtcHcgICAgJDB4MDA0Ziwg
JWF4CiAgICAgICAgIGpueiAgICAgc2V0YmFkCiAKLSAgICAgICAgbGVhdyAgICB2ZXNhX21vZGVf
aW5mbywgJWRpCi0gICAgICAgIHN1YmIgICAgJFZJREVPX0ZJUlNUX1ZFU0E+PjgsICViaAotICAg
ICAgICBtb3Z3ICAgICVieCwgJWN4ICAgICAgICAgICAgICAgICMgR2V0IG1vZGUgaW5mb3JtYXRp
b24gc3RydWN0dXJlCisgICAgICAgIGxlYXcgICAgdmVzYV9tb2RlX2luZm8sICVkaSAgICAgIyBH
ZXQgbW9kZSBpbmZvcm1hdGlvbiBzdHJ1Y3R1cmUKKyAgICAgICAgbGVhdyAgICAtVklERU9fRklS
U1RfVkVTQSglYngpLCAlY3gKICAgICAgICAgbW92dyAgICAkMHg0ZjAxLCAlYXgKICAgICAgICAg
aW50ICAgICAkMHgxMAotICAgICAgICBhZGRiICAgICRWSURFT19GSVJTVF9WRVNBPj44LCAlYmgK
ICAgICAgICAgY21wdyAgICAkMHgwMDRmLCAlYXgKICAgICAgICAgam56ICAgICBzZXRiYWQKIAog
ICAgICAgICBtb3ZiICAgICglZGkpLCAlYWwgICAgICAgICAgICAgICMgQ2hlY2sgbW9kZSBhdHRy
aWJ1dGVzLgogICAgICAgICBhbmRiICAgICQweDk5LCAlYWwKICAgICAgICAgY21wYiAgICAkMHg5
OSwgJWFsCi0gICAgICAgIGpueiAgICAgX3NldGJhZCAgICAgICAgICAgICAgICAgIyBEb2ghIE5v
IGxpbmVhciBmcmFtZSBidWZmZXIuCisgICAgICAgIGpueiAgICAgc2V0YmFkICAgICAgICAgICAg
ICAgICAgIyBEb2ghIE5vIGxpbmVhciBmcmFtZSBidWZmZXIuCiAKICAgICAgICAgcHVzaHcgICAl
YngKICAgICAgICAgc3ViYiAgICAkVklERU9fRklSU1RfVkVTQT4+OCwgJWJoCi0gICAgICAgIG9y
dyAgICAgJDB4NDAwMCwgJWJ4ICAgICAgICAgICAgIyBVc2UgbGluZWFyIGZyYW1lIGJ1ZmZlcgor
ICAgICAgICBvcmIgICAgICQweDQwLCAlYmggICAgICAgICAgICAgICMgVXNlIGxpbmVhciBmcmFt
ZSBidWZmZXIKICAgICAgICAgbW92dyAgICAkMHg0ZjAyLCAlYXggICAgICAgICAgICAjIFZFU0Eg
QklPUyBtb2RlIHNldCBjYWxsCiAgICAgICAgIGludCAgICAgJDB4MTAKICAgICAgICAgcG9wdyAg
ICAlYngKICAgICAgICAgY21wdyAgICAkMHgwMDRmLCAlYXggICAgICAgICAgICAjIEFMPTRmIGlm
IGltcGxlbWVudGVkCi0gICAgICAgIGpueiAgICAgX3NldGJhZCAgICAgICAgICAgICAgICAgIyBB
SD0wIGlmIE9LCisgICAgICAgIGpueiAgICAgc2V0YmFkICAgICAgICAgICAgICAgICAgIyBBSD0w
IGlmIE9LCiAKICAgICAgICAgbW92YiAgICAkMSwgYm9vdHN5bShncmFwaGljX21vZGUpICAjIGZs
YWcgZ3JhcGhpYyBtb2RlCiAgICAgICAgIG1vdncgICAgJWJ4LCBib290c3ltKHZpZGVvX21vZGUp
CiAgICAgICAgIHN0YwogICAgICAgICByZXQKIAotX3NldGJhZDogam1wICAgIHNldGJhZCAgICAg
ICAgICAgICAgICAgICMgVWdseS4uLgotCiAjIFJlY2FsY3VsYXRlIHZlcnRpY2FsIGRpc3BsYXkg
ZW5kIHJlZ2lzdGVycyAtLSB0aGlzIGZpeGVzIHZhcmlvdXMKICMgaW5jb25zaXN0ZW5jaWVzIG9m
IGV4dGVuZGVkIG1vZGVzIG9uIG1hbnkgYWRhcHRlcnMuIENhbGxlZCB3aGVuCiAjIHRoZSBWSURF
T19SRUNBTEMgZmxhZyBpcyBzZXQgaW4gdGhlIG1vZGUgSUQuCkBAIC01MTUsNyArNTA4LDcgQEAg
c2V0dmVzYWJ5c2l6ZToKICAgICAgICAgbGVhdyAgICBtb2RlbGlzdCwlc2kKIDE6ICAgICAgYWRk
ICAgICAkOCwlc2kKICAgICAgICAgY21wdyAgICAkQVNLX1ZHQSwtOCglc2kpICAgICAgICAjIEVu
ZD8KLSAgICAgICAgamUgICAgICBfc2V0YmFkCisgICAgICAgIGplICAgICAgc2V0YmFkCiAgICAg
ICAgIG1vdncgICAgLTYoJXNpKSwlYXgKICAgICAgICAgY21wdyAgICAlYXgsYm9vdHN5bSh2ZXNh
X3NpemUpKzAKICAgICAgICAgam5lICAgICAxYgpAQCAtOTQ4LDYgKzk0MSw3IEBAIHN0b3JlX2Vk
aWQ6CiAjZW5kaWYKICAgICAgICAgcmV0CiAKKyAgICAgICAgICAgICAgICAucDJhbGlnbiAxCiBt
dF9lbmQ6ICAgICAgICAgLndvcmQgICAwICAgICAgICMgRW5kIG9mIHZpZGVvIG1vZGUgdGFibGUg
aWYgYnVpbHQKIGVkaXRfYnVmOiAgICAgICAuc3BhY2UgIDYgICAgICAgIyBMaW5lIGVkaXRvciBi
dWZmZXIKIGNhcmRfbmFtZTogICAgICAud29yZCAgIDAgICAgICAgIyBQb2ludGVyIHRvIGFkYXB0
ZXIgbmFtZQpAQCAtOTkxLDYgKzk4NSw3IEBAIHZlc2FfbmFtZTogICAgICAuYXNjaXogICJWRVNB
IgogCiBuYW1lX2Jhbm46ICAgICAgLmFzY2l6ICAiVmlkZW8gYWRhcHRlcjogIgogCisgICAgICAg
ICAgICAgICAgLnAyYWxpZ24gMQogZm9yY2Vfc2l6ZTogICAgIC53b3JkICAgMCAgICAgICAjIFVz
ZSB0aGlzIHNpemUgaW5zdGVhZCBvZiB0aGUgb25lIGluIEJJT1MgdmFycwogCiBHTE9CQUwoYm9v
dF92aWRfaW5mbykKLS0tIGEveGVuL2FyY2gveDg2L2Jvb3Qvd2FrZXVwLlMKKysrIGIveGVuL2Fy
Y2gveDg2L2Jvb3Qvd2FrZXVwLlMKQEAgLTMwLDcgKzMwLDcgQEAgRU5UUlkod2FrZXVwX3N0YXJ0
KQogICAgICAgICBqbmUgICAgIGJvZ3VzX3JlYWxfbWFnaWMKIAogICAgICAgICAjIGZvciBhY3Bp
X3NsZWVwPXMzX2Jpb3MKLSAgICAgICAgdGVzdGwgICAkMSwgd2FrZXN5bSh2aWRlb19mbGFncykK
KyAgICAgICAgdGVzdGIgICAkMSwgd2FrZXN5bSh2aWRlb19mbGFncykKICAgICAgICAganogICAg
ICAxZgogICAgICAgICBsY2FsbCAgICQweGMwMDAsICQzCiAgICAgICAgIG1vdncgICAgJWNzLCAl
YXggICAgICAgICMgSW4gY2FzZSBtZXNzZWQgYnkgQklPUwpAQCAtMzgsOSArMzgsOSBAQCBFTlRS
WSh3YWtldXBfc3RhcnQpCiAgICAgICAgIG1vdncgICAgJWF4LCAlc3MgICAgICAgICMgTmVlZCB0
aGlzPyBIb3cgdG8gcmV0IGlmIGNsb2JiZXJlZD8KIAogMTogICAgICAjIGZvciBhY3BpX3NsZWVw
PXMzX21vZGUKLSAgICAgICAgdGVzdGwgICAkMiwgd2FrZXN5bSh2aWRlb19mbGFncykKKyAgICAg
ICAgdGVzdGIgICAkMiwgd2FrZXN5bSh2aWRlb19mbGFncykKICAgICAgICAganogICAgICAxZgot
ICAgICAgICBtb3ZsICAgIHdha2VzeW0odmlkZW9fbW9kZSksICVlYXgKKyAgICAgICAgbW92dyAg
ICB3YWtlc3ltKHZpZGVvX21vZGUpLCAlYXgKICAgICAgICAgY2FsbCAgICBtb2RlX3NldHcKIAog
MTogICAgICAjIFNob3cgc29tZSBwcm9ncmVzcyBpZiBWR0EgaXMgcmVzdW1lZApAQCAtNTYsNDgg
KzU2LDI2IEBAIEVOVFJZKHdha2V1cF9zdGFydCkKIAogICAgICAgICBsam1wbCAgICRCT09UX0NT
MzIsICRib290c3ltX3JlbCh3YWtldXBfMzIsIDYpCiAKLS8qIFRoaXMgY29kZSB1c2VzIGFuIGV4
dGVuZGVkIHNldCBvZiB2aWRlbyBtb2RlIG51bWJlcnMuIFRoZXNlIGluY2x1ZGU6Ci0gKiBBbGlh
c2VzIGZvciBzdGFuZGFyZCBtb2RlcwotICogICAgICBOT1JNQUxfVkdBICgtMSkKLSAqICAgICAg
RVhURU5ERURfVkdBICgtMikKLSAqICAgICAgQVNLX1ZHQSAoLTMpCi0gKiBWaWRlbyBtb2RlcyBu
dW1iZXJlZCBieSBtZW51IHBvc2l0aW9uIC0tIE5PVCBSRUNPTU1FTkRFRCBiZWNhdXNlIG9mIGxh
Y2sKLSAqIG9mIGNvbXBhdGliaWxpdHkgd2hlbiBleHRlbmRpbmcgdGhlIHRhYmxlLiBUaGVzZSBh
cmUgYmV0d2VlbiAweDAwIGFuZCAweGZmLgotICovCi0jZGVmaW5lIFZJREVPX0ZJUlNUX01FTlUg
MHgwMDAwCi0KLS8qIFN0YW5kYXJkIEJJT1MgdmlkZW8gbW9kZXMgKEJJT1MgbnVtYmVyICsgMHgw
MTAwKSAqLwotI2RlZmluZSBWSURFT19GSVJTVF9CSU9TIDB4MDEwMAotCi0vKiBWRVNBIEJJT1Mg
dmlkZW8gbW9kZXMgKFZFU0EgbnVtYmVyICsgMHgwMjAwKSAqLwotI2RlZmluZSBWSURFT19GSVJT
VF9WRVNBIDB4MDIwMAotCi0vKiBWaWRlbzcgc3BlY2lhbCBtb2RlcyAoQklPUyBudW1iZXIgKyAw
eDA5MDApICovCi0jZGVmaW5lIFZJREVPX0ZJUlNUX1Y3IDB4MDkwMAotCiAjIFNldHRpbmcgb2Yg
dXNlciBtb2RlIChBWD1tb2RlIElEKSA9PiBDRj1zdWNjZXNzCiBtb2RlX3NldHc6CiAgICAgICAg
IG1vdncgICAgJWF4LCAlYngKICAgICAgICAgY21wYiAgICAkVklERU9fRklSU1RfVkVTQT4+OCwg
JWFoCiAgICAgICAgIGpuYyAgICAgY2hlY2tfdmVzYXcKLSAgICAgICAgZGVjYiAgICAlYWgKIAog
c2V0YmFkdzogY2xjCiAgICAgICAgIHJldAogCiBjaGVja192ZXNhdzoKICAgICAgICAgc3ViYiAg
ICAkVklERU9fRklSU1RfVkVTQT4+OCwgJWJoCi0gICAgICAgIG9ydyAgICAgJDB4NDAwMCwgJWJ4
ICAgICAgICAgICAgICAgICAgICAjIFVzZSBsaW5lYXIgZnJhbWUgYnVmZmVyCisgICAgICAgIG9y
YiAgICAgJDB4NDAsICViaCAgICAgICAgICAgICAgICAgICAgICAjIFVzZSBsaW5lYXIgZnJhbWUg
YnVmZmVyCiAgICAgICAgIG1vdncgICAgJDB4NGYwMiwgJWF4ICAgICAgICAgICAgICAgICAgICAj
IFZFU0EgQklPUyBtb2RlIHNldCBjYWxsCiAgICAgICAgIGludCAgICAgJDB4MTAKICAgICAgICAg
Y21wdyAgICAkMHgwMDRmLCAlYXggICAgICAgICAgICAgICAgICAgICMgQUw9NGYgaWYgaW1wbGVt
ZW50ZWQKLSAgICAgICAgam56ICAgICBfc2V0YmFkdyAgICAgICAgICAgICAgICAgICAgICAgICMg
QUg9MCBpZiBPSworICAgICAgICBqbnogICAgIHNldGJhZHcgICAgICAgICAgICAgICAgICAgICAg
ICAgIyBBSD0wIGlmIE9LCiAKICAgICAgICAgc3RjCiAgICAgICAgIHJldAogCi1fc2V0YmFkdzog
am1wICAgIHNldGJhZHcKLQogYm9ndXNfcmVhbF9tYWdpYzoKICAgICAgICAgbW92dyAgICAkMHgw
ZTAwICsgJ0InLCAlZnM6KDB4MTIpCiAgICAgICAgIGptcCAgICAgYm9ndXNfcmVhbF9tYWdpYwoK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZl
bCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlz
dHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 61AEB8A494
	for <lists+xen-devel@lfdr.de>; Mon, 12 Aug 2019 19:33:01 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hxE9a-0006mC-0B; Mon, 12 Aug 2019 17:30:42 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=dIXR=WI=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hxE9Y-0006kA-5h
 for xen-devel@lists.xenproject.org; Mon, 12 Aug 2019 17:30:40 +0000
X-Inumbo-ID: e6f4937b-bd26-11e9-8980-bc764e045a96
Received: from foss.arm.com (unknown [217.140.110.172])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTP
 id e6f4937b-bd26-11e9-8980-bc764e045a96;
 Mon, 12 Aug 2019 17:30:39 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 144D115AB;
 Mon, 12 Aug 2019 10:30:39 -0700 (PDT)
Received: from e108454-lin.cambridge.arm.com (e108454-lin.cambridge.arm.com
 [10.1.196.50])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 62A153F706;
 Mon, 12 Aug 2019 10:30:38 -0700 (PDT)
From: Julien Grall <julien.grall@arm.com>
To: xen-devel@lists.xenproject.org
Date: Mon, 12 Aug 2019 18:30:04 +0100
Message-Id: <20190812173019.11956-14-julien.grall@arm.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20190812173019.11956-1-julien.grall@arm.com>
References: <20190812173019.11956-1-julien.grall@arm.com>
Subject: [Xen-devel] [PATCH v3 13/28] xen/arm32: head: Introduce distinct
 paths for the boot CPU and secondary CPUs
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Julien Grall <julien.grall@arm.com>,
 Stefano Stabellini <sstabellini@kernel.org>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlIGJvb3QgY29kZSBpcyBjdXJyZW50bHkgcXVpdGUgZGlmZmljdWx0IHRvIGdvIHRocm91Z2gg
YmVjYXVzZSBvZiB0aGUKbGFjayBvZiBkb2N1bWVudGF0aW9uIGFuZCBhIG51bWJlciBvZiBpbmRp
cmVjdGlvbiB0byBhdm9pZCBleGVjdXRpbmcKc29tZSBwYXRoIGluIGVpdGhlciB0aGUgYm9vdCBD
UFUgb3Igc2Vjb25kYXJ5IENQVXMuCgpJbiBhbiBhdHRlbXB0IHRvIG1ha2UgdGhlIGJvb3QgY29k
ZSBlYXNpZXIgdG8gZm9sbG93LCBlYWNoIHBhcnRzIG9mIHRoZQpib290IGFyZSBub3cgaW4gc2Vw
YXJhdGUgZnVuY3Rpb25zLiBGdXJ0aGVybW9yZSwgdGhlIHBhdGhzIGZvciB0aGUgYm9vdApDUFUg
YW5kIHNlY29uZGFyeSBDUFVzIGFyZSBub3cgZGlzdGluY3QgYW5kIGZvciBub3cgd2lsbCBjYWxs
IGVhY2gKZnVuY3Rpb25zLgoKRm9sbG93LXVwcyB3aWxsIHJlbW92ZSB1bm5lY2Vzc2FyeSBjYWxs
cyBhbmQgZG8gZnVydGhlciBpbXByb3ZlbWVudAooc3VjaCBhcyBhZGRpbmcgZG9jdW1lbnRhdGlv
biBhbmQgcmVzaHVmZmxpbmcpLgoKTm90ZSB0aGF0IHRoZSBzd2l0Y2ggZnJvbSB1c2luZyB0aGUg
SUQgbWFwcGluZyB0byB0aGUgcnVudGltZSBtYXBwaW5nCmlzIGR1cGxpY2F0ZWQgZm9yIGVhY2gg
cGF0aC4gVGhpcyBpcyBiZWNhdXNlIGluIHRoZSBmdXR1cmUgd2Ugd2lsbCBuZWVkCnRvIHN0YXkg
bG9uZ2VyIGluIHRoZSBJRCBtYXBwaW5nIGZvciB0aGUgYm9vdCBDUFUuCgpMYXN0bHksIGl0IGlz
IG5vdyByZXF1aXJlZCB0byBzYXZlIGxyIGluIGNwdV9pbml0KCkgYmVjYXVzd2UgdGhlCmZ1bmN0
aW9uIHdpbGwgY2FsbCBvdGhlciBmdW5jdGlvbnMgYW5kIHRoZXJlZm9yZSBjbG9iYmVyIGxyLgoK
U2lnbmVkLW9mZi1ieTogSnVsaWVuIEdyYWxsIDxqdWxpZW4uZ3JhbGxAYXJtLmNvbT4KCi0tLQog
ICAgQ2hhbmdlcyBpbiB2MzoKICAgICAgICAtIFJlbW92ZSBoYXJkIHRhYgogICAgICAgIC0gcy9J
RCBtYXAvMToxIG1hcHBpbmcvCgogICAgQ2hhbmdlcyBpbiB2MjoKICAgICAgICAtIFBhdGNoIGFk
ZGVkCi0tLQogeGVuL2FyY2gvYXJtL2FybTMyL2hlYWQuUyB8IDY1ICsrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgNTQgaW5zZXJ0
aW9ucygrKSwgMTEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL2FybTMy
L2hlYWQuUyBiL3hlbi9hcmNoL2FybS9hcm0zMi9oZWFkLlMKaW5kZXggYzRlZTA2YmE5My4uNDI4
NWY3NjQ2MyAxMDA2NDQKLS0tIGEveGVuL2FyY2gvYXJtL2FybTMyL2hlYWQuUworKysgYi94ZW4v
YXJjaC9hcm0vYXJtMzIvaGVhZC5TCkBAIC0xNDgsNyArMTQ4LDE5IEBAIHBhc3RfekltYWdlOgog
CiAgICAgICAgIG1vdiAgIHIxMiwgIzAgICAgICAgICAgICAgICAgLyogcjEyIDo9IGlzX3NlY29u
ZGFyeV9jcHUgKi8KIAotICAgICAgICBiICAgICBjb21tb25fc3RhcnQKKyAgICAgICAgYmwgICAg
Y2hlY2tfY3B1X21vZGUKKyAgICAgICAgYmwgICAgemVyb19ic3MKKyAgICAgICAgYmwgICAgY3B1
X2luaXQKKyAgICAgICAgYmwgICAgY3JlYXRlX3BhZ2VfdGFibGVzCisgICAgICAgIGJsICAgIGVu
YWJsZV9tbXUKKworICAgICAgICAvKiBXZSBhcmUgc3RpbGwgaW4gdGhlIDE6MSBtYXBwaW5nLiBK
dW1wIHRvIHRoZSBydW50aW1lIFZpcnR1YWwgQWRkcmVzcy4gKi8KKyAgICAgICAgbGRyICAgcjAs
ID1wcmltYXJ5X3N3aXRjaGVkCisgICAgICAgIG1vdiAgIHBjLCByMAorcHJpbWFyeV9zd2l0Y2hl
ZDoKKyAgICAgICAgYmwgICAgc2V0dXBfZml4bWFwCisgICAgICAgIGIgICAgIGxhdW5jaAorRU5E
UFJPQyhzdGFydCkKIAogR0xPQkFMKGluaXRfc2Vjb25kYXJ5KQogICAgICAgICBjcHNpZCBhaWYg
ICAgICAgICAgICAgICAgICAgIC8qIERpc2FibGUgYWxsIGludGVycnVwdHMgKi8KQEAgLTE3OSw4
ICsxOTEsMjIgQEAgR0xPQkFMKGluaXRfc2Vjb25kYXJ5KQogICAgICAgICBwcmludF9yZWcgcjcK
ICAgICAgICAgUFJJTlQoIiBib290aW5nIC1cclxuIikKICNlbmRpZgotCi1jb21tb25fc3RhcnQ6
CisgICAgICAgIGJsICAgIGNoZWNrX2NwdV9tb2RlCisgICAgICAgIGJsICAgIHplcm9fYnNzCisg
ICAgICAgIGJsICAgIGNwdV9pbml0CisgICAgICAgIGJsICAgIGNyZWF0ZV9wYWdlX3RhYmxlcwor
ICAgICAgICBibCAgICBlbmFibGVfbW11CisKKworICAgICAgICAvKiBXZSBhcmUgc3RpbGwgaW4g
dGhlIDE6MSBtYXBwaW5nLiBKdW1wIHRvIHRoZSBydW50aW1lIFZpcnR1YWwgQWRkcmVzcy4gKi8K
KyAgICAgICAgbGRyICAgcjAsID1zZWNvbmRhcnlfc3dpdGNoZWQKKyAgICAgICAgbW92ICAgcGMs
IHIwCitzZWNvbmRhcnlfc3dpdGNoZWQ6CisgICAgICAgIGJsICAgIHNldHVwX2ZpeG1hcAorICAg
ICAgICBiICAgICBsYXVuY2gKK0VORFBST0MoaW5pdF9zZWNvbmRhcnkpCisKK2NoZWNrX2NwdV9t
b2RlOgogICAgICAgICAvKiBDaGVjayB0aGF0IHRoaXMgQ1BVIGhhcyBIeXAgbW9kZSAqLwogICAg
ICAgICBtcmMgICBDUDMyKHIwLCBJRF9QRlIxKQogICAgICAgICBhbmQgICByMCwgcjAsICMweGYw
MDAgICAgICAgIC8qIEJpdHMgMTItMTUgZGVmaW5lIHZpcnQgZXh0ZW5zaW9ucyAqLwpAQCAtMjAy
LDcgKzIyOCwxMCBAQCBjb21tb25fc3RhcnQ6CiAgICAgICAgIGIgICAgIGZhaWwKIAogaHlwOiAg
ICBQUklOVCgiLSBYZW4gc3RhcnRpbmcgaW4gSHlwIG1vZGUgLVxyXG4iKQorICAgICAgICBtb3Yg
ICBwYywgbHIKK0VORFBST0MoY2hlY2tfY3B1X21vZGUpCiAKK3plcm9fYnNzOgogICAgICAgICAv
KiBaZXJvIEJTUyBPbiB0aGUgYm9vdCBDUFUgdG8gYXZvaWQgbmFzdHkgc3VycHJpc2VzICovCiAg
ICAgICAgIHRlcSAgIHIxMiwgIzAKICAgICAgICAgYm5lICAgc2tpcF9ic3MKQEAgLTIxOSw4ICsy
NDgsMTQgQEAgaHlwOiAgICBQUklOVCgiLSBYZW4gc3RhcnRpbmcgaW4gSHlwIG1vZGUgLVxyXG4i
KQogICAgICAgICBibG8gICAxYgogCiBza2lwX2JzczoKKyAgICAgICAgbW92ICAgcGMsIGxyCitF
TkRQUk9DKHplcm9fYnNzKQorCitjcHVfaW5pdDoKICAgICAgICAgUFJJTlQoIi0gU2V0dGluZyB1
cCBjb250cm9sIHJlZ2lzdGVycyAtXHJcbiIpCiAKKyAgICAgICAgbW92ICAgcjUsIGxyICAgICAg
ICAgICAgICAgICAgICAgICAvKiByNSA6PSByZXR1cm4gYWRkcmVzcyAqLworCiAgICAgICAgIC8q
IEdldCBwcm9jZXNzb3Igc3BlY2lmaWMgcHJvYyBpbmZvIGludG8gcjEgKi8KICAgICAgICAgYmwg
ICAgX19sb29rdXBfcHJvY2Vzc29yX3R5cGUKICAgICAgICAgdGVxICAgcjEsICMwCkBAIC0yMzEs
NyArMjY2LDYgQEAgc2tpcF9ic3M6CiAgICAgICAgIFBSSU5UKCIgLVxyXG4iKQogICAgICAgICBi
ICAgICBmYWlsCiAxOgotCiAgICAgICAgIC8qIEp1bXAgdG8gY3B1X2luaXQgKi8KICAgICAgICAg
bGRyICAgcjEsIFtyMSwgI1BST0NJTkZPX2NwdV9pbml0XSAgLyogcjEgOj0gdmFkZHIoaW5pdCBm
dW5jKSAqLwogICAgICAgICBhZHIgICBsciwgY3B1X2luaXRfZG9uZSAgICAgICAgICAgICAvKiBT
YXZlIHJldHVybiBhZGRyZXNzICovCkBAIC0yNTYsNiArMjkwLDEwIEBAIGNwdV9pbml0X2RvbmU6
CiAgICAgICAgIGxkciAgIHIwLCA9SFNDVExSX1NFVAogICAgICAgICBtY3IgICBDUDMyKHIwLCBI
U0NUTFIpCiAKKyAgICAgICAgbW92ICAgcGMsIHI1ICAgICAgICAgICAgICAgICAgICAgICAgLyog
UmV0dXJuIGFkZHJlc3MgaXMgaW4gcjUgKi8KK0VORFBST0MoY3B1X2luaXQpCisKK2NyZWF0ZV9w
YWdlX3RhYmxlczoKICAgICAgICAgLyoKICAgICAgICAgICogUmVidWlsZCB0aGUgYm9vdCBwYWdl
dGFibGUncyBmaXJzdC1sZXZlbCBlbnRyaWVzLiBUaGUgc3RydWN0dXJlCiAgICAgICAgICAqIGlz
IGRlc2NyaWJlZCBpbiBtbS5jLgpAQCAtMzU5LDE1ICszOTcsMTYgQEAgY3B1X2luaXRfZG9uZToK
ICAgICAgICAgLyogYm9vdCBwYWdldGFibGUgc2V0dXAgY29tcGxldGUgKi8KIAogICAgICAgICBj
bXAgICByNiwgIzEgICAgICAgICAgICAgICAgLyogRGlkIHdlIG1hbmFnZSB0byBjcmVhdGUgYW4g
aWRlbnRpdHkgbWFwcGluZyA/ICovCi0gICAgICAgIGJlcSAgIDFmCisgICAgICAgIG1vdmVxIHBj
LCBscgogICAgICAgICBQUklOVCgiVW5hYmxlIHRvIGJ1aWxkIGJvb3QgcGFnZSB0YWJsZXMgLSBG
YWlsZWQgdG8gaWRlbnRpdHkgbWFwIFhlbi5cclxuIikKICAgICAgICAgYiAgICAgZmFpbAogdmly
dHBoeXNfY2xhc2g6CiAgICAgICAgIC8qIElkZW50aXR5IG1hcCBjbGFzaGVzIHdpdGggYm9vdF90
aGlyZCwgd2hpY2ggd2UgY2Fubm90IGhhbmRsZSB5ZXQgKi8KICAgICAgICAgUFJJTlQoIi0gVW5h
YmxlIHRvIGJ1aWxkIGJvb3QgcGFnZSB0YWJsZXMgLSB2aXJ0IGFuZCBwaHlzIGFkZHJlc3NlcyBj
bGFzaC4gLVxyXG4iKQogICAgICAgICBiICAgICBmYWlsCitFTkRQUk9DKGNyZWF0ZV9wYWdlX3Rh
YmxlcykKIAotMToKK2VuYWJsZV9tbXU6CiAgICAgICAgIFBSSU5UKCItIFR1cm5pbmcgb24gcGFn
aW5nIC1cclxuIikKIAogICAgICAgICAvKgpAQCAtMzc3LDE2ICs0MTYsMTYgQEAgdmlydHBoeXNf
Y2xhc2g6CiAgICAgICAgIG1jciAgIENQMzIocjAsIFRMQklBTExIKSAgICAgLyogRmx1c2ggaHlw
ZXJ2aXNvciBUTEJzICovCiAgICAgICAgIGRzYiAgIG5zaAogCi0gICAgICAgIGxkciAgIHIxLCA9
cGFnaW5nICAgICAgICAgICAgLyogRXhwbGljaXQgdmFkZHIsIG5vdCBSSVAtcmVsYXRpdmUgKi8K
ICAgICAgICAgbXJjICAgQ1AzMihyMCwgSFNDVExSKQogICAgICAgICAvKiBFbmFibGUgTU1VIGFu
ZCBELWNhY2hlICovCiAgICAgICAgIG9yciAgIHIwLCByMCwgIyhTQ1RMUl9BeHhfRUx4X018U0NU
TFJfQXh4X0VMeF9DKQogICAgICAgICBkc2IgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEZs
dXNoIFBURSB3cml0ZXMgYW5kIGZpbmlzaCByZWFkcyAqLwogICAgICAgICBtY3IgICBDUDMyKHIw
LCBIU0NUTFIpICAgICAgIC8qIG5vdyBwYWdpbmcgaXMgZW5hYmxlZCAqLwogICAgICAgICBpc2Ig
ICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdywgZmx1c2ggdGhlIGljYWNoZSAqLwotICAg
ICAgICBtb3YgICBwYywgcjEgICAgICAgICAgICAgICAgIC8qIEdldCBhIHByb3BlciB2YWRkciBp
bnRvIFBDICovCi1wYWdpbmc6CisgICAgICAgIG1vdiAgIHBjLCBscgorRU5EUFJPQyhlbmFibGVf
bW11KQogCitzZXR1cF9maXhtYXA6CiAgICAgICAgIC8qCiAgICAgICAgICAqIE5vdyB3ZSBjYW4g
aW5zdGFsbCB0aGUgZml4bWFwIGFuZCBkdGIgbWFwcGluZ3MsIHNpbmNlIHdlCiAgICAgICAgICAq
IGRvbid0IG5lZWQgdGhlIDE6MSBtYXAgYW55IG1vcmUKQEAgLTQzNiwxMiArNDc1LDE1IEBAIHBh
Z2luZzoKICAgICAgICAgbWNyICAgQ1AzMihyMCwgVExCSUFMTEgpICAgICAvKiBGbHVzaCBoeXBl
cnZpc29yIFRMQiAqLwogICAgICAgICBkc2IgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEVu
c3VyZSBjb21wbGV0aW9uIG9mIFRMQiBmbHVzaCAqLwogICAgICAgICBpc2IKKyAgICAgICAgbW92
ICAgcGMsIGxyCitFTkRQUk9DKHNldHVwX2ZpeG1hcCkKIAorbGF1bmNoOgogICAgICAgICBQUklO
VCgiLSBSZWFkeSAtXHJcbiIpCiAKICAgICAgICAgLyogVGhlIGJvb3QgQ1BVIHNob3VsZCBnbyBz
dHJhaWdodCBpbnRvIEMgbm93ICovCiAgICAgICAgIHRlcSAgIHIxMiwgIzAKLSAgICAgICAgYmVx
ICAgbGF1bmNoCisgICAgICAgIGJlcSAgIDFmCiAKICAgICAgICAgLyoKICAgICAgICAgICogTm9u
LWJvb3QgQ1BVcyBuZWVkIHRvIG1vdmUgb24gdG8gdGhlIHByb3BlciBwYWdldGFibGVzLCB3aGlj
aCB3ZXJlCkBAIC00NjAsNyArNTAyLDcgQEAgcGFnaW5nOgogICAgICAgICBkc2IgICAgICAgICAg
ICAgICAgICAgICAgICAgIC8qIEVuc3VyZSBjb21wbGV0aW9uIG9mIFRMQitCUCBmbHVzaCAqLwog
ICAgICAgICBpc2IKIAotbGF1bmNoOgorMToKICAgICAgICAgbGRyICAgcjAsID1pbml0X2RhdGEK
ICAgICAgICAgYWRkICAgcjAsICNJTklUSU5GT19zdGFjayAgICAvKiBGaW5kIHRoZSBib290LXRp
bWUgc3RhY2sgKi8KICAgICAgICAgbGRyICAgc3AsIFtyMF0KQEAgLTQ3MSw2ICs1MTMsNyBAQCBs
YXVuY2g6CiAgICAgICAgIG1vdmVxIHIxLCByOCAgICAgICAgICAgICAgICAgLyogICAgICAgICAg
ICAgICAtIERUQiBhZGRyZXNzICovCiAgICAgICAgIGJlcSAgIHN0YXJ0X3hlbiAgICAgICAgICAg
ICAgLyogYW5kIGRpc2FwcGVhciBpbnRvIHRoZSBsYW5kIG9mIEMgKi8KICAgICAgICAgYiAgICAg
c3RhcnRfc2Vjb25kYXJ5ICAgICAgICAvKiAodG8gdGhlIGFwcHJvcHJpYXRlIGVudHJ5IHBvaW50
KSAqLworRU5EUFJPQyhsYXVuY2gpCiAKIC8qIEZhaWwtc3RvcCAqLwogZmFpbDogICBQUklOVCgi
LSBCb290IGZhaWxlZCAtXHJcbiIpCi0tIAoyLjExLjAKCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZl
bEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxt
YW4vbGlzdGluZm8veGVuLWRldmVs

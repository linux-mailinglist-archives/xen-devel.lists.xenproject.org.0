Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 163FC18F19
	for <lists+xen-devel@lfdr.de>; Thu,  9 May 2019 19:28:46 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hOmnk-0000es-No; Thu, 09 May 2019 17:25:48 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=fgKw=TJ=oracle.com=ankur.a.arora@srs-us1.protection.inumbo.net>)
 id 1hOmnj-0000dx-16
 for xen-devel@lists.xenproject.org; Thu, 09 May 2019 17:25:47 +0000
X-Inumbo-ID: 7a3a413c-727f-11e9-864d-1302ff61f656
Received: from userp2120.oracle.com (unknown [156.151.31.85])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 7a3a413c-727f-11e9-864d-1302ff61f656;
 Thu, 09 May 2019 17:25:45 +0000 (UTC)
Received: from pps.filterd (userp2120.oracle.com [127.0.0.1])
 by userp2120.oracle.com (8.16.0.27/8.16.0.27) with SMTP id x49HK1tB169783;
 Thu, 9 May 2019 17:25:42 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=oracle.com;
 h=from : to : cc :
 subject : date : message-id : in-reply-to : references : mime-version :
 content-transfer-encoding; s=corp-2018-07-02;
 bh=5+AicXrLgHpXctVt8cnc/EdJ5KuJS7IwnasckkiqbqI=;
 b=ODdi+BeCjUmOTqRFTQ20OkerBYSOw3szijBMBMkJEdwfVLvYNhh0aDMaLTVBaZfQRbe5
 gtx0vg55G24rR+MgEwDef/1Lm/h5drNye5oxe+xsVw19kWIVKAZzke889Lmc4PqMG3MN
 dYBAMRUBFtbnLCmuD7WnljTWsF35XAb77fgcAAT65B3V7OZTeEdl18MwZTKA0fTnifkM
 vnTqDL3lP8sx/g5jHeFAM9Cb2fEzQCaE6DuJGrzwi6IBC6Iw183ZUVaMQv8fTfOKmibe
 5uFHlDHWpkOq+vhp9veLn8+64hkEyS1eTVZI5919HwDLOoRDpqV+EfobwK9LBQWrsetF QQ== 
Received: from userp3030.oracle.com (userp3030.oracle.com [156.151.31.80])
 by userp2120.oracle.com with ESMTP id 2s94b14e31-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
 Thu, 09 May 2019 17:25:42 +0000
Received: from pps.filterd (userp3030.oracle.com [127.0.0.1])
 by userp3030.oracle.com (8.16.0.27/8.16.0.27) with SMTP id x49HNxdO109630;
 Thu, 9 May 2019 17:25:42 GMT
Received: from aserv0122.oracle.com (aserv0122.oracle.com [141.146.126.236])
 by userp3030.oracle.com with ESMTP id 2sagyvcg4y-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
 Thu, 09 May 2019 17:25:42 +0000
Received: from abhmp0008.oracle.com (abhmp0008.oracle.com [141.146.116.14])
 by aserv0122.oracle.com (8.14.4/8.14.4) with ESMTP id x49HPfic011094;
 Thu, 9 May 2019 17:25:41 GMT
Received: from aa1-ca-oracle-com.ca.oracle.com (/10.156.75.204)
 by default (Oracle Beehive Gateway v4.0)
 with ESMTP ; Thu, 09 May 2019 10:25:41 -0700
From: Ankur Arora <ankur.a.arora@oracle.com>
To: linux-kernel@vger.kernel.org, xen-devel@lists.xenproject.org
Date: Thu,  9 May 2019 10:25:32 -0700
Message-Id: <20190509172540.12398-9-ankur.a.arora@oracle.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190509172540.12398-1-ankur.a.arora@oracle.com>
References: <20190509172540.12398-1-ankur.a.arora@oracle.com>
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=nai engine=5900 definitions=9252
 signatures=668686
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 suspectscore=0
 malwarescore=0
 phishscore=0 bulkscore=0 spamscore=0 mlxscore=0 mlxlogscore=999
 adultscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.0.1-1810050000 definitions=main-1905090100
X-Proofpoint-Virus-Version: vendor=nai engine=5900 definitions=9252
 signatures=668686
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0
 priorityscore=1501 malwarescore=0
 suspectscore=0 phishscore=0 bulkscore=0 spamscore=0 clxscore=1015
 lowpriorityscore=0 mlxscore=0 impostorscore=0 mlxlogscore=999 adultscore=0
 classifier=spam adjust=0 reason=mlx scancount=1 engine=8.0.1-1810050000
 definitions=main-1905090100
Subject: [Xen-devel] [RFC PATCH 08/16] x86/xen: irq/upcall handling with
 multiple xenhosts
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: jgross@suse.com, sstabellini@kernel.org, konrad.wilk@oracle.com,
 ankur.a.arora@oracle.com, pbonzini@redhat.com, boris.ostrovsky@oracle.com,
 joao.m.martins@oracle.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Rm9yIGNvbmZpZ3VyYXRpb25zIHdpdGggbXVsdGlwbGUgeGVuaG9zdHMsIHdlIG5lZWQgdG8gaGFu
ZGxlIGV2ZW50cwpnZW5lcmF0ZWQgZnJvbSBtdWx0aXBsZSB4ZW5ob3N0cy4KCkhhdmluZyBtb3Jl
IHRoYW4gb25lIHVwY2FsbCBoYW5kbGVyIG1pZ2h0IGJlIHF1aXRlIGhhaXJ5LCBhbmQgaXQgd291
bGQKYmUgc2ltcGxlciBpZiB0aGUgY2FsbGJhY2sgZnJvbSBMMC1YZW4gY291bGQgYmUgYm91bmNl
ZCB2aWEgTDEtWGVuLgpUaGlzIHdpbGwgYWxzbyBtZWFuIHNpbXBsZXIgcHZfaXJxX29wcyBjb2Rl
IGJlY2F1c2Ugbm93IHRoZSBJRiBmbGFnCm1hcHMgb250byB0aGUgeGhfZGVmYXVsdC0+dmNwdV9p
bmZvLT5ldnRjaG5fdXBjYWxsX21hc2suCgpIb3dldmVyLCB3ZSBzdGlsbCB1cGRhdGUgdGhlIHho
X3JlbW90ZS0+dmNwdV9pbmZvLT5ldnRjaG5fdXBjYWxsX21hc2sKb24gYSBiZXN0IGVmZm9ydCBi
YXNpcyB0byBtaW5pbWl6ZSB1bm5lY2Vzc2FyeSB3b3JrIGluIHJlbW90ZSB4ZW5ob3N0LgoKVE9E
TzoKICAtIGRpcmVjdCBwdl9vcHMuaXJxIGFyZSBkaXNhYmxlZC4KClNpZ25lZC1vZmYtYnk6IEFu
a3VyIEFyb3JhIDxhbmt1ci5hLmFyb3JhQG9yYWNsZS5jb20+Ci0tLQogYXJjaC94ODYveGVuL01h
a2VmaWxlICAgICAgIHwgIDIgKy0KIGFyY2gveDg2L3hlbi9lbmxpZ2h0ZW5fcHYuYyB8ICA0ICsr
LQogYXJjaC94ODYveGVuL2lycS5jICAgICAgICAgIHwgNjkgKysrKysrKysrKysrKysrKysrKysr
KysrKysrKystLS0tLS0tLQogYXJjaC94ODYveGVuL3NtcF9wdi5jICAgICAgIHwgMTEgKysrKysr
CiA0IGZpbGVzIGNoYW5nZWQsIDcwIGluc2VydGlvbnMoKyksIDE2IGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL2FyY2gveDg2L3hlbi9NYWtlZmlsZSBiL2FyY2gveDg2L3hlbi9NYWtlZmlsZQpp
bmRleCA1NjRiNGRkZGJjMTUuLjNjNzA1NmFkMzUyMCAxMDA2NDQKLS0tIGEvYXJjaC94ODYveGVu
L01ha2VmaWxlCisrKyBiL2FyY2gveDg2L3hlbi9NYWtlZmlsZQpAQCAtMzQsNyArMzQsNyBAQCBv
YmotJChDT05GSUdfWEVOX1BWKQkJKz0gZW5saWdodGVuX3B2Lm8KIG9iai0kKENPTkZJR19YRU5f
UFYpCQkrPSBtbXVfcHYubwogb2JqLSQoQ09ORklHX1hFTl9QVikJCSs9IGlycS5vCiBvYmotJChD
T05GSUdfWEVOX1BWKQkJKz0gbXVsdGljYWxscy5vCi1vYmotJChDT05GSUdfWEVOX1BWKQkJKz0g
eGVuLWFzbS5vCitvYmotbgkJKz0geGVuLWFzbS5vCiBvYmotJChDT05GSUdfWEVOX1BWKQkJKz0g
eGVuLWFzbV8kKEJJVFMpLm8KIAogb2JqLSQoQ09ORklHX1hFTl9QVkgpCQkrPSBlbmxpZ2h0ZW5f
cHZoLm8KZGlmZiAtLWdpdCBhL2FyY2gveDg2L3hlbi9lbmxpZ2h0ZW5fcHYuYyBiL2FyY2gveDg2
L3hlbi9lbmxpZ2h0ZW5fcHYuYwppbmRleCA1ZjZhMTQ3NWVjMGMuLjc3YjFhMGQ0YWVmMiAxMDA2
NDQKLS0tIGEvYXJjaC94ODYveGVuL2VubGlnaHRlbl9wdi5jCisrKyBiL2FyY2gveDg2L3hlbi9l
bmxpZ2h0ZW5fcHYuYwpAQCAtOTk2LDggKzk5Niw5IEBAIHZvaWQgX19pbml0IHhlbl9zZXR1cF92
Y3B1X2luZm9fcGxhY2VtZW50KHZvaWQpCiAJICogeGVuX3ZjcHVfc2V0dXAgbWFuYWdlZCB0byBw
bGFjZSB0aGUgdmNwdV9pbmZvIHdpdGhpbiB0aGUKIAkgKiBwZXJjcHUgYXJlYSBmb3IgYWxsIGNw
dXMsIHNvIG1ha2UgdXNlIG9mIGl0LgogCSAqLworI2lmIDAKKwkvKiBEaXNhYmxlIGRpcmVjdCBh
Y2Nlc3MgZm9yIG5vdy4gKi8KIAlpZiAoeGVuX2hhdmVfdmNwdV9pbmZvX3BsYWNlbWVudCAmJiBm
YWxzZSkgewotCQkvKiBEaXNhYmxlIGRpcmVjdCBhY2Nlc3MgdW50aWwgd2UgaGF2ZSBwcm9wZXIg
cGNwdSBkYXRhIHN0cnVjdHVyZXMuICovCiAJCXB2X29wcy5pcnEuc2F2ZV9mbCA9IF9fUFZfSVNf
Q0FMTEVFX1NBVkUoeGVuX3NhdmVfZmxfZGlyZWN0KTsKIAkJcHZfb3BzLmlycS5yZXN0b3JlX2Zs
ID0KIAkJCV9fUFZfSVNfQ0FMTEVFX1NBVkUoeGVuX3Jlc3RvcmVfZmxfZGlyZWN0KTsKQEAgLTEw
MDcsNiArMTAwOCw3IEBAIHZvaWQgX19pbml0IHhlbl9zZXR1cF92Y3B1X2luZm9fcGxhY2VtZW50
KHZvaWQpCiAJCQlfX1BWX0lTX0NBTExFRV9TQVZFKHhlbl9pcnFfZW5hYmxlX2RpcmVjdCk7CiAJ
CXB2X29wcy5tbXUucmVhZF9jcjIgPSB4ZW5fcmVhZF9jcjJfZGlyZWN0OwogCX0KKyNlbmRpZgog
fQogCiBzdGF0aWMgY29uc3Qgc3RydWN0IHB2X2luZm8geGVuX2luZm8gX19pbml0Y29uc3QgPSB7
CmRpZmYgLS1naXQgYS9hcmNoL3g4Ni94ZW4vaXJxLmMgYi9hcmNoL3g4Ni94ZW4vaXJxLmMKaW5k
ZXggMzhhZDFhMWM0NzYzLi5mNzYwYTZhYmZiMWUgMTAwNjQ0Ci0tLSBhL2FyY2gveDg2L3hlbi9p
cnEuYworKysgYi9hcmNoL3g4Ni94ZW4vaXJxLmMKQEAgLTE5LDkgKzE5LDkgQEAKICAqIGNhbGxi
YWNrIG1hc2suIFdlIGRvIHRoaXMgaW4gYSB2ZXJ5IHNpbXBsZSBtYW5uZXIsIGJ5IG1ha2luZyBh
IGNhbGwKICAqIGRvd24gaW50byBYZW4uIFRoZSBwZW5kaW5nIGZsYWcgd2lsbCBiZSBjaGVja2Vk
IGJ5IFhlbiBvbiByZXR1cm4uCiAgKi8KLXZvaWQgeGVuX2ZvcmNlX2V2dGNobl9jYWxsYmFjayh2
b2lkKQordm9pZCB4ZW5fZm9yY2VfZXZ0Y2huX2NhbGxiYWNrKHhlbmhvc3RfdCAqeGgpCiB7Ci0J
KHZvaWQpSFlQRVJWSVNPUl94ZW5fdmVyc2lvbigwLCBOVUxMKTsKKwkodm9pZCloeXBlcnZpc29y
X3hlbl92ZXJzaW9uKHhoLCAwLCBOVUxMKTsKIH0KIAogYXNtbGlua2FnZSBfX3Zpc2libGUgdW5z
aWduZWQgbG9uZyB4ZW5fc2F2ZV9mbCh2b2lkKQpAQCAtMjksNiArMjksMjEgQEAgYXNtbGlua2Fn
ZSBfX3Zpc2libGUgdW5zaWduZWQgbG9uZyB4ZW5fc2F2ZV9mbCh2b2lkKQogCXN0cnVjdCB2Y3B1
X2luZm8gKnZjcHU7CiAJdW5zaWduZWQgbG9uZyBmbGFnczsKIAorCS8qCisJICogSW4gc2NlbmFy
aW9zIHdpdGggbW9yZSB0aGFuIG9uZSB4ZW5ob3N0LCB0aGUgcHJpbWFyeSB4ZW5ob3N0CisJICog
aXMgcmVzcG9uc2libGUgZm9yIGFsbCB0aGUgdXBjYWxscywgd2l0aCB0aGUgcmVtb3RlIHhlbmhv
c3QKKwkgKiBib3VuY2luZyBpdHMgdXBjYWxscyB0aHJvdWdoIGl0IChzZWUgY29tbWVudCBpbgor
CSAqIGNwdV9pbml0aWFsaXplX2NvbnRleHQoKS4pCisJICoKKwkgKiBUbyBtaW5pbWl6ZSB1bm5l
Y2Vzc2FyeSB1cGNhbGxzLCB0aGUgcmVtb3RlIHhlbmhvc3Qgc3RpbGwgbG9va3MgYXQKKwkgKiB0
aGUgdmFsdWUgb2YgdmNwdV9pbmZvLT5ldnRjaG5fdXBjYWxsX21hc2ssIHNvIHdlIHN0aWxsIHNl
dCBhbmQgcmVzZXQKKwkgKiB0aGF0LgorCSAqCisJICogVGhlIGZhY3QgdGhhdCB0aGUgdXBjYWxs
IGl0c2VsZiBpcyBnYXRlZCBieSB0aGUgZGVmYXVsdCB4ZW5ob3N0LAorCSAqIGFsc28gaGVscHMg
aW4gc2ltcGxpZnlpbmcgdGhlIGxvZ2ljIGhlcmUgYmVjYXVzZSB3ZSBkb24ndCBoYXZlIHRvCisJ
ICogd29ycnkgYWJvdXQgZ3VhcmFudGVlaW5nIGF0b21pY2l0eSB3aXRoIHVwZGF0ZXMgdG8KKwkg
KiB4aF9yZW1vdGUtPnZjcHVfaW5mby0+ZXZ0Y2huX3VwY2FsbF9tYXNrLgorCSAqLwogCXZjcHUg
PSB4aF9kZWZhdWx0LT54ZW5fdmNwdVtzbXBfcHJvY2Vzc29yX2lkKCldOwogCiAJLyogZmxhZyBo
YXMgb3Bwb3NpdGUgc2Vuc2Ugb2YgbWFzayAqLwpAQCAtMzgsMjYgKzUzLDM0IEBAIGFzbWxpbmth
Z2UgX192aXNpYmxlIHVuc2lnbmVkIGxvbmcgeGVuX3NhdmVfZmwodm9pZCkKIAkgICAtMCAtPiAw
eDAwMDAwMDAwCiAJICAgLTEgLT4gMHhmZmZmZmZmZgogCSovCi0JcmV0dXJuICgtZmxhZ3MpICYg
WDg2X0VGTEFHU19JRjsKKwlyZXR1cm4gKCgtZmxhZ3MpICYgWDg2X0VGTEFHU19JRik7CiB9CiBQ
Vl9DQUxMRUVfU0FWRV9SRUdTX1RIVU5LKHhlbl9zYXZlX2ZsKTsKIAogX192aXNpYmxlIHZvaWQg
eGVuX3Jlc3RvcmVfZmwodW5zaWduZWQgbG9uZyBmbGFncykKIHsKIAlzdHJ1Y3QgdmNwdV9pbmZv
ICp2Y3B1OworCXhlbmhvc3RfdCAqKnhoOwogCiAJLyogY29udmVydCBmcm9tIElGIHR5cGUgZmxh
ZyAqLwogCWZsYWdzID0gIShmbGFncyAmIFg4Nl9FRkxBR1NfSUYpOwogCiAJLyogU2VlIHhlbl9p
cnFfZW5hYmxlKCkgZm9yIHdoeSBwcmVlbXB0aW9uIG11c3QgYmUgZGlzYWJsZWQuICovCiAJcHJl
ZW1wdF9kaXNhYmxlKCk7Ci0JdmNwdSA9IHhoX2RlZmF1bHQtPnhlbl92Y3B1W3NtcF9wcm9jZXNz
b3JfaWQoKV07Ci0JdmNwdS0+ZXZ0Y2huX3VwY2FsbF9tYXNrID0gZmxhZ3M7CisJZm9yX2VhY2hf
eGVuaG9zdCh4aCkgeworCQl2Y3B1ID0gKCp4aCktPnhlbl92Y3B1W3NtcF9wcm9jZXNzb3JfaWQo
KV07CisJCXZjcHUtPmV2dGNobl91cGNhbGxfbWFzayA9IGZsYWdzOworCX0KIAogCWlmIChmbGFn
cyA9PSAwKSB7CiAJCWJhcnJpZXIoKTsgLyogdW5tYXNrIHRoZW4gY2hlY2sgKGF2b2lkIHJhY2Vz
KSAqLwotCQlpZiAodW5saWtlbHkodmNwdS0+ZXZ0Y2huX3VwY2FsbF9wZW5kaW5nKSkKLQkJCXhl
bl9mb3JjZV9ldnRjaG5fY2FsbGJhY2soKTsKKwkJZm9yX2VhY2hfeGVuaG9zdCh4aCkgeworCQkJ
LyogUHJlZW1wdGlvbiBpcyBkaXNhYmxlZCBzbyB3ZSBzaG91bGQgbm90IGhhdmUKKwkJCSAqIGdv
dHRlbiBtb3ZlZCB0byBhIGRpZmZlcmVudCBWQ1BVLiAqLworCQkJdmNwdSA9ICgqeGgpLT54ZW5f
dmNwdVtzbXBfcHJvY2Vzc29yX2lkKCldOworCQkJaWYgKHVubGlrZWx5KHZjcHUtPmV2dGNobl91
cGNhbGxfcGVuZGluZykpCisJCQkJeGVuX2ZvcmNlX2V2dGNobl9jYWxsYmFjaygqeGgpOworCQl9
CiAJCXByZWVtcHRfZW5hYmxlKCk7CiAJfSBlbHNlCiAJCXByZWVtcHRfZW5hYmxlX25vX3Jlc2No
ZWQoKTsKQEAgLTY2LDExICs4OSwxOSBAQCBQVl9DQUxMRUVfU0FWRV9SRUdTX1RIVU5LKHhlbl9y
ZXN0b3JlX2ZsKTsKIAogYXNtbGlua2FnZSBfX3Zpc2libGUgdm9pZCB4ZW5faXJxX2Rpc2FibGUo
dm9pZCkKIHsKKwl4ZW5ob3N0X3QgKip4aDsKKwogCS8qIFRoZXJlJ3MgYSBvbmUgaW5zdHJ1Y3Rp
b24gcHJlZW1wdCB3aW5kb3cgaGVyZS4gIFdlIG5lZWQgdG8KIAkgICBtYWtlIHN1cmUgd2UncmUg
ZG9uJ3Qgc3dpdGNoIENQVXMgYmV0d2VlbiBnZXR0aW5nIHRoZSB2Y3B1CiAJICAgcG9pbnRlciBh
bmQgdXBkYXRpbmcgdGhlIG1hc2suICovCiAJcHJlZW1wdF9kaXNhYmxlKCk7Ci0JeGhfZGVmYXVs
dC0+eGVuX3ZjcHVbc21wX3Byb2Nlc3Nvcl9pZCgpXS0+ZXZ0Y2huX3VwY2FsbF9tYXNrID0gMTsK
Kwlmb3JfZWFjaF94ZW5ob3N0KHhoKQorCQkvKgorCQkgKiBNYXNrIGV2ZW50cyBvbiB0aGlzIENQ
VSBmb3IgYm90aCB0aGUgeGVuaG9zdHMuICBBcyB0aGUKKwkJICogY29tbWVudCBhYm92ZSBtZW50
aW9ucywgZGlzYWJsaW5nIHByZWVtcHRpb24gbWVhbnMgd2UKKwkJICogY2FuIHNhZmVseSBkbyB0
aGF0LgorCQkgKi8KKwkJKCp4aCktPnhlbl92Y3B1W3NtcF9wcm9jZXNzb3JfaWQoKV0tPmV2dGNo
bl91cGNhbGxfbWFzayA9IDE7CiAJcHJlZW1wdF9lbmFibGVfbm9fcmVzY2hlZCgpOwogfQogUFZf
Q0FMTEVFX1NBVkVfUkVHU19USFVOSyh4ZW5faXJxX2Rpc2FibGUpOwpAQCAtNzgsNiArMTA5LDcg
QEAgUFZfQ0FMTEVFX1NBVkVfUkVHU19USFVOSyh4ZW5faXJxX2Rpc2FibGUpOwogYXNtbGlua2Fn
ZSBfX3Zpc2libGUgdm9pZCB4ZW5faXJxX2VuYWJsZSh2b2lkKQogewogCXN0cnVjdCB2Y3B1X2lu
Zm8gKnZjcHU7CisJeGVuaG9zdF90ICoqeGg7CiAKIAkvKgogCSAqIFdlIG1heSBiZSBwcmVlbXB0
ZWQgYXMgc29vbiBhcyB2Y3B1LT5ldnRjaG5fdXBjYWxsX21hc2sgaXMKQEAgLTg2LDE2ICsxMTgs
MjUgQEAgYXNtbGlua2FnZSBfX3Zpc2libGUgdm9pZCB4ZW5faXJxX2VuYWJsZSh2b2lkKQogCSAq
LwogCXByZWVtcHRfZGlzYWJsZSgpOwogCi0JdmNwdSA9IHhoX2RlZmF1bHQtPnhlbl92Y3B1W3Nt
cF9wcm9jZXNzb3JfaWQoKV07Ci0JdmNwdS0+ZXZ0Y2huX3VwY2FsbF9tYXNrID0gMDsKKwkvKiBH
aXZlbiB0aGF0IHRoZSBpbnRlcnJ1cHRzIGFyZSBnZW5lcmF0ZWQgZnJvbSB0aGUgZGVmYXVsdCB4
ZW5ob3N0LAorCSAqIHdlIHNob3VsZCBkbyB0aGlzIGluIHJldmVyc2Ugb3JkZXIuCisJICovCisJ
Zm9yX2VhY2hfeGVuaG9zdCh4aCkgeworCQl2Y3B1ID0gKCp4aCktPnhlbl92Y3B1W3NtcF9wcm9j
ZXNzb3JfaWQoKV07CisJCXZjcHUtPmV2dGNobl91cGNhbGxfbWFzayA9IDA7CiAKLQkvKiBEb2Vz
bid0IG1hdHRlciBpZiB3ZSBnZXQgcHJlZW1wdGVkIGhlcmUsIGJlY2F1c2UgYW55Ci0JICAgcGVu
ZGluZyBldmVudCB3aWxsIGdldCBkZWFsdCB3aXRoIGFueXdheS4gKi8KKwkJLyogV2UgY291bGQg
Z2V0IHByZWVtcHRlZCBieSBhbiBpbmNvbWluZyBpbnRlcnJ1cHQgaGVyZSB3aXRoIGEKKwkJICog
aGFsZiBlbmFibGVkIGlycSAoZm9yIHRoZSBmaXJzdCB4ZW5ob3N0LikKKwkJICovCisJfQogCiAJ
YmFycmllcigpOyAvKiB1bm1hc2sgdGhlbiBjaGVjayAoYXZvaWQgcmFjZXMpICovCi0JaWYgKHVu
bGlrZWx5KHZjcHUtPmV2dGNobl91cGNhbGxfcGVuZGluZykpCi0JCXhlbl9mb3JjZV9ldnRjaG5f
Y2FsbGJhY2soKTsKIAorCWZvcl9lYWNoX3hlbmhvc3QoeGgpIHsKKwkJdmNwdSA9ICgqeGgpLT54
ZW5fdmNwdVtzbXBfcHJvY2Vzc29yX2lkKCldOworCQlpZiAodW5saWtlbHkodmNwdS0+ZXZ0Y2hu
X3VwY2FsbF9wZW5kaW5nKSkKKwkJCXhlbl9mb3JjZV9ldnRjaG5fY2FsbGJhY2soKnhoKTsKKwl9
CiAJcHJlZW1wdF9lbmFibGUoKTsKIH0KIFBWX0NBTExFRV9TQVZFX1JFR1NfVEhVTksoeGVuX2ly
cV9lbmFibGUpOwpkaWZmIC0tZ2l0IGEvYXJjaC94ODYveGVuL3NtcF9wdi5jIGIvYXJjaC94ODYv
eGVuL3NtcF9wdi5jCmluZGV4IDZkOWMzZTY2MTFlZi4uZjRlYTllYWM4YjZhIDEwMDY0NAotLS0g
YS9hcmNoL3g4Ni94ZW4vc21wX3B2LmMKKysrIGIvYXJjaC94ODYveGVuL3NtcF9wdi5jCkBAIC0z
NDMsNiArMzQzLDE3IEBAIGNwdV9pbml0aWFsaXplX2NvbnRleHQodW5zaWduZWQgaW50IGNwdSwg
c3RydWN0IHRhc2tfc3RydWN0ICppZGxlKQogI2Vsc2UKIAljdHh0LT5nc19iYXNlX2tlcm5lbCA9
IHBlcl9jcHVfb2Zmc2V0KGNwdSk7CiAjZW5kaWYKKwkvKgorCSAqIFdlIHNldHVwIGFuIHVwY2Fs
bCBoYW5kbGVyIG9ubHkgZm9yIHRoZSBkZWZhdWx0IHhlbmhvc3QuIFRoZSByZW1vdGUKKwkgKiB4
ZW5ob3N0IHdpbGwgZ2VuZXJhdGUgZXZ0Y2huIGV2ZW50cywgYnV0IGFuIGFkZGl0aW9uYWwgY2Fs
bGJhY2sgd291bGQgYmUKKwkgKiBxdWl0ZSBoYWlyeSwgc2luY2Ugd2Ugd291bGQgaGF2ZSBWQ1BV
IHN0YXRlIGluaXRpYWxpc2VkIGluIG11bHRpcGxlCisJICogaHlwZXJ2aXNvcnMgYW5kIGlzc3Vl
cyBsaWtlIHJlLWVudHJhbmN5IG9mIHVwY2FsbHMuCisJICoKKwkgKiBJdCB3b3VsZCBiZSBzaW1w
bGVyIGlmIHRoZSBjYWxsYmFjayBmcm9tIEwwLVhlbiBjb3VsZCBiZSBib3VuY2VkCisJICogYm91
bmNlZCB2aWEgTDEtWGVuLiBUaGlzIGFsc28gc2ltcGxpZmllcyB0aGUgcHZfaXJxX29wcyBjb2Rl
CisJICogYmVjYXVzZSBub3cgdGhlIENQVSdzIElGIHByb2Nlc3Npbmcgb25seSBuZWVkcyB0byBo
YXBwZW4gb24KKwkgKiB4aF9kZWZhdWx0LT52Y3B1X2luZm8uCisJICovCiAJY3R4dC0+ZXZlbnRf
Y2FsbGJhY2tfZWlwICAgID0KIAkJKHVuc2lnbmVkIGxvbmcpeGVuX2h5cGVydmlzb3JfY2FsbGJh
Y2s7CiAJY3R4dC0+ZmFpbHNhZmVfY2FsbGJhY2tfZWlwID0KLS0gCjIuMjAuMQoKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5n
IGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJv
amVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

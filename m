Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 3481714A3D
	for <lists+xen-devel@lfdr.de>; Mon,  6 May 2019 14:51:36 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hNd38-0007a6-40; Mon, 06 May 2019 12:48:54 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=aYeK=TG=gmail.com=andrii.anisov@srs-us1.protection.inumbo.net>)
 id 1hNd36-0007ZM-7K
 for xen-devel@lists.xenproject.org; Mon, 06 May 2019 12:48:52 +0000
X-Inumbo-ID: 4baa48d4-6ffd-11e9-843c-bc764e045a96
Received: from mail-lj1-x244.google.com (unknown [2a00:1450:4864:20::244])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 4baa48d4-6ffd-11e9-843c-bc764e045a96;
 Mon, 06 May 2019 12:48:50 +0000 (UTC)
Received: by mail-lj1-x244.google.com with SMTP id u21so1828761lja.5
 for <xen-devel@lists.xenproject.org>; Mon, 06 May 2019 05:48:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=subject:to:cc:references:from:message-id:date:user-agent
 :mime-version:in-reply-to:content-language:content-transfer-encoding;
 bh=AGFXBsZqmWKbjZaTkosR1l+OtFqiVduy+Gc7SEmO+wk=;
 b=Uc4S77VdIaoQwfkeh+2eAxJYfnwDNKDqlOEawJv5yrFFQGVFjoZJSkXgGDeyTIWm87
 x43/iwkJzqr5jUcUsc0vAJlbETiYfttw97CN2MqFI9PsN5kHeu8K5/AXTWj67psv2eoU
 asyrpRwkgokoS0Eeri1GfOzVmQMwTfQ5oizlcAJt1N+CLgWs06qXk8cR8q0PPBPmirkY
 iTySy698JWBmkmJ7ti+E0O4mJryENB3bZW5Dx/4gLhIjkZN7dUtqx/IgSiiBLaKuxknx
 8iYIRvsFupyA4M6HNBkTEcwEokH8FakObwgSgk4sJanpXKb6BMy0Du21PnnFYNWlvO5o
 oeBg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-language
 :content-transfer-encoding;
 bh=AGFXBsZqmWKbjZaTkosR1l+OtFqiVduy+Gc7SEmO+wk=;
 b=m8OdS6WJ1ne0ihtuiAXFA85CEL8aeI9ygevY3l5YqfnJy8QnCJiMgHhthRJKtIf+xq
 BfhVmeM8fs7YyJvUqYGgHlxlIy7Zee2sq4l/e0a+jR24PoOS8Ku+//oPX0yqWmg604gn
 XoY1xlFHvrmkg8b1TyPuokQQNWRDW/5ftU0TljRIncq8/eDF9d5g8YgsQvMyE91hAUAk
 AppHOe7QQgPTsIBtk5RFHDFhbU7JWSJ1/Plt0fPr+HQraFDOwxgAcVTVB9a5jdbyov+I
 KM1XFH71Ung7EHULIBYaV4CKafG2OmD8gyZzmW4aliEdqvDfOG+lTCiF3SilgXYs1oAz
 nTxg==
X-Gm-Message-State: APjAAAVId5UDGd7cKyiAoxQV4Hc0w6OISyr3jqH74dF9Miyyldql0tRH
 QYFf6EoFZ5M2SrrEj8xXFZc=
X-Google-Smtp-Source: APXvYqzgRF2ckDFCajHJAWCft2OnVi6PBlodS2OShNhJYR/27DdweypAzEfR5JU/o/xN2UUTLiFDkQ==
X-Received: by 2002:a2e:9703:: with SMTP id r3mr4005225lji.37.1557146929297;
 Mon, 06 May 2019 05:48:49 -0700 (PDT)
Received: from [10.17.180.71] (ll-22.209.223.85.sovam.net.ua. [85.223.209.22])
 by smtp.gmail.com with ESMTPSA id
 l16sm2397848lfk.44.2019.05.06.05.48.48
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Mon, 06 May 2019 05:48:48 -0700 (PDT)
To: Julien Grall <julien.grall@arm.com>, xen-devel@lists.xenproject.org
References: <20190424165955.23718-1-julien.grall@arm.com>
 <20190424165955.23718-7-julien.grall@arm.com>
From: Andrii Anisov <andrii.anisov@gmail.com>
Message-ID: <7a6cb580-e4d7-7325-7797-d16ca0856c57@gmail.com>
Date: Mon, 6 May 2019 15:48:47 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20190424165955.23718-7-julien.grall@arm.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH 06/12] xen/arm: mm: Sanity check any update
 of Xen page tables
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Oleksandr_Tyshchenko@epam.com, sstabellini@kernel.org,
 Andrii_Anisov@epam.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGVsbG8gSnVsaWVuLAoKT24gMjQuMDQuMTkgMTk6NTksIEp1bGllbiBHcmFsbCB3cm90ZToKPiBU
aGUgY29kZSBoYW5kbGluZyBYZW4gUFQgdXBkYXRlIGhhcyBxdWl0ZSBhIGZldyByZXN0cmljdGlv
bnMgb24gd2hhdCBpdAo+IGNhbiBkby4gVGhpcyBpcyBub3QgYSBiYWQgdGhpbmcgYXMgaXQga2Vl
cHMgdGhlIGNvZGUgc2ltcGxlLgo+IAo+IFRoZXJlIGFyZSBhbHJlYWR5IGEgZmV3IGNoZWNrcyBz
Y2F0dGVyZWQgaW4gY3VycmVudCBwYWdlIHRhYmxlIGhhbmRsaW5nLgo+IEhvd2V2ZXIgdGhleSBh
cmUgbm90IHN1ZmZpY2llbnQgYXMgdGhleSBjb3VsZCBzdGlsbCBhbGxvdyB0bwo+IG1vZGlmeS9y
ZW1vdmUgZW50cnkgd2l0aCBjb250aWd1b3VzIGJpdCBzZXQuCj4gCj4gVGhlIGNoZWNrcyBhcmUg
ZGl2aWRlZCBpbiB0d28gc2V0czoKPiAgICAgIC0gcGVyIGVudHJ5IGNoZWNrOiBUaGV5IGFyZSBn
YXRoZXJlZCBpbiBhIG5ldyBmdW5jdGlvbiB0aGF0IHdpbGwKPiAgICAgIGNoZWNrIHdoZXRoZXIg
YW4gdXBkYXRlIGlzIHZhbGlkIGJhc2VkIG9uIHRoZSBmbGFncyBwYXNzZWQgYW5kIHRoZQo+ICAg
ICAgY3VycmVudCB2YWx1ZSBvZiBhbiBlbnRyeS4KPiAgICAgIC0gZ2xvYmFsIGNoZWNrOiBUaGV5
IGFyZSBzYW5pdHkgY2hlY2sgb24geGVuX3B0X3VwZGF0ZSgpIHBhcmFtZXRlcnMuCj4gCj4gQWRk
aXRpb25hbGx5IHRvIGNvbnRpZ3VvdXMgY2hlY2ssIHdlIGFsc28gbm93IGNoZWNrIHRoYXQgdGhl
IGNhbGxlciBpcwo+IG5vdCB0cnlpbmcgdG8gbW9kaWZ5IHRoZSBtZW1vcnkgYXR0cmlidXRlcyBv
ZiBhbiBlbnRyeS4KPiAKPiBMYXN0bHksIGl0IHdhcyBwcm9iYWJseSBhIGJpdCBvdmVyIHRoZSB0
b3AgdG8gZm9yYmlkIHJlbW92aW5nIGFuCj4gaW52YWxpZCBtYXBwaW5nLiBUaGlzIGNvdWxkIGp1
c3QgYmUgaWdub3JlZC4gVGhlIG5ldyBiZWhhdmlvciB3aWxsIGJlCj4gaGVscGZ1bCBpbiBmdXR1
cmUgY2hhbmdlcy4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBKdWxpZW4gR3JhbGwgPGp1bGllbi5ncmFs
bEBhcm0uY29tPgo+IC0tLQo+ICAgeGVuL2FyY2gvYXJtL21tLmMgfCAxMTUgKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tCj4gICAxIGZpbGUgY2hh
bmdlZCwgOTcgaW5zZXJ0aW9ucygrKSwgMTggZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBh
L3hlbi9hcmNoL2FybS9tbS5jIGIveGVuL2FyY2gvYXJtL21tLmMKPiBpbmRleCBlZWU3MTIyYzg4
Li41ZWI2ZjQ3ZDc0IDEwMDY0NAo+IC0tLSBhL3hlbi9hcmNoL2FybS9tbS5jCj4gKysrIGIveGVu
L2FyY2gvYXJtL21tLmMKPiBAQCAtNTAsNiArNTAsMTkgQEAgc3RydWN0IGRvbWFpbiAqZG9tX3hl
biwgKmRvbV9pbywgKmRvbV9jb3c7Cj4gICAjdW5kZWYgbWZuX3RvX3ZpcnQKPiAgICNkZWZpbmUg
bWZuX3RvX3ZpcnQobWZuKSBfX21mbl90b192aXJ0KG1mbl94KG1mbikpCj4gICAKPiArI2lmZGVm
IE5ERUJVRwo+ICtzdGF0aWMgaW5saW5lIHZvaWQKPiArX19hdHRyaWJ1dGVfXyAoKF9fZm9ybWF0
X18gKF9fcHJpbnRmX18sIDEsIDIpKSkKPiArbW1fcHJpbnRrKGNvbnN0IGNoYXIgKmZtdCwgLi4u
KSB7fQo+ICsjZWxzZQo+ICsjZGVmaW5lIG1tX3ByaW50ayhmbXQsIGFyZ3MuLi4pICAgICAgICAg
ICAgIFwKPiArICAgIGRvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCj4g
KyAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAo+ICsgICAgICAg
IGRwcmludGsoWEVOTE9HX0VSUiwgZm10LCAjIyBhcmdzKTsgIFwKPiArICAgICAgICBXQVJOKCk7
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCj4gKyAgICB9IHdoaWxlICgwKTsKPiArI2Vu
ZGlmCj4gKwo+ICAgLyogU3RhdGljIHN0YXJ0LW9mLWRheSBwYWdldGFibGVzIHRoYXQgd2UgdXNl
IGJlZm9yZSB0aGUgYWxsb2NhdG9ycwo+ICAgICogYXJlIHVwLiBUaGVzZSBhcmUgdXNlZCBieSBh
bGwgQ1BVcyBkdXJpbmcgYnJpbmd1cCBiZWZvcmUgc3dpdGNoaW5nCj4gICAgKiB0byB0aGUgQ1BV
cyBvd24gcGFnZXRhYmxlcy4KPiBAQCAtOTYzLDEyICs5NzYsNzQgQEAgZW51bSB4ZW5tYXBfb3Bl
cmF0aW9uIHsKPiAgICAgICBSRVNFUlZFCj4gICB9Owo+ICAgCj4gKy8qIFNhbml0eSBjaGVjayBv
ZiB0aGUgZW50cnkgKi8KPiArc3RhdGljIGJvb2wgeGVuX3B0X2NoZWNrX2VudHJ5KGxwYWVfdCBl
bnRyeSwgbWZuX3QgbWZuLCB1bnNpZ25lZCBpbnQgZmxhZ3MpCj4gK3sKPiArICAgIC8qIFNhbml0
eSBjaGVjayB3aGVuIG1vZGlmeWluZyBhIHBhZ2UuICovCj4gKyAgICBpZiAoIChmbGFncyAmIF9Q
QUdFX1BSRVNFTlQpICYmIG1mbl9lcShtZm4sIElOVkFMSURfTUZOKSApCj4gKyAgICB7Cj4gKyAg
ICAgICAgLyogV2UgZG9uJ3QgYWxsb3cgY2hhbmdpbmcgbWVtb3J5IGF0dHJpYnV0ZXMuICovCj4g
KyAgICAgICAgaWYgKCBlbnRyeS5wdC5haSAhPSBQQUdFX0FJX01BU0soZmxhZ3MpICkKPiArICAg
ICAgICB7Cj4gKyAgICAgICAgICAgIG1tX3ByaW50aygiTW9kaWZ5aW5nIG1lbW9yeSBhdHRyaWJ1
dGVzIGlzIG5vdCBhbGxvd2VkICgweCV4IC0+IDB4JXgpLlxuIiwKPiArICAgICAgICAgICAgICAg
ICAgICAgIGVudHJ5LnB0LmFpLCBQQUdFX0FJX01BU0soZmxhZ3MpKTsKPiArICAgICAgICAgICAg
cmV0dXJuIGZhbHNlOwo+ICsgICAgICAgIH0KPiArCj4gKyAgICAgICAgLyogV2UgZG9uJ3QgYWxs
b3cgbW9kaWZ5aW5nIGVudHJ5IHdpdGggY29udGlndW91cyBiaXQgc2V0LiAqLwo+ICsgICAgICAg
IGlmICggZW50cnkucHQuY29udGlnICkKPiArICAgICAgICB7Cj4gKyAgICAgICAgICAgIG1tX3By
aW50aygiTW9kaWZ5aW5nIGVudHJ5IHdpdGggY29udGlndW91cyBiaXQgc2V0IGlzIG5vdCBhbGxv
d2VkLlxuIik7Cj4gKyAgICAgICAgICAgIHJldHVybiBmYWxzZTsKPiArICAgICAgICB9Cj4gKyAg
ICB9Cj4gKyAgICAvKiBTYW5pdHkgY2hlY2sgd2hlbiBpbnNlcnRpbmcgYSBwYWdlICovCj4gKyAg
ICBlbHNlIGlmICggZmxhZ3MgJiBfUEFHRV9QUkVTRU5UICkKPiArICAgIHsKPiArICAgICAgICAv
KiBXZSBzaG91bGQgYmUgaGVyZSB3aXRoIGEgdmFsaWQgTUZOLiAqLwo+ICsgICAgICAgIEFTU0VS
VCghbWZuX2VxKG1mbiwgSU5WQUxJRF9NRk4pKTsKPiArCj4gKyAgICAgICAgLyogV2UgZG9uJ3Qg
YWxsb3cgcmVwbGFjaW5nIGFueSB2YWxpZCBlbnRyeS4gKi8KPiArICAgICAgICBpZiAoIGxwYWVf
aXNfdmFsaWQoZW50cnkpICkKPiArICAgICAgICB7Cj4gKyAgICAgICAgICAgIG1tX3ByaW50aygi
Q2hhbmdpbmcgTUZOIGZvciBhIHZhbGlkIGVudHJ5IGlzIG5vdCBhbGxvd2VkICglIyJQUklfbWZu
IiAtPiAlIyJQUklfbWZuIikuXG4iLAo+ICsgICAgICAgICAgICAgICAgICAgICAgbWZuX3gobHBh
ZV9nZXRfbWZuKGVudHJ5KSksIG1mbl94KG1mbikpOwo+ICsgICAgICAgICAgICByZXR1cm4gZmFs
c2U7Cj4gKyAgICAgICAgfQo+ICsgICAgfQo+ICsgICAgLyogU2FuaXR5IGNoZWNrIHdoZW4gcmVt
b3ZpbmcgYSBwYWdlLiAqLwo+ICsgICAgZWxzZSBpZiAoIChmbGFncyAmIChfUEFHRV9QUkVTRU5U
fF9QQUdFX1BPUFVMQVRFKSkgIT0gMCApCgpTaG91bGRuJ3QgaXQgYmUgYChmbGFncyAmIChfUEFH
RV9QUkVTRU5UfF9QQUdFX1BPUFVMQVRFKSkgPT0gMGAgPyBBcyBJIHVuZGVyc3RhbmQgZnJvbSB0
aGUgcGF0Y2ggMDQsIHdlIGRvIHJlbW92ZSBhIHBhZ2Ugd2hlbiB3ZSBkbyB1bnNldCBib3RoIGZs
YWdzLgoKQlRXLCBJIHdvdWxkIHN1Z2dlc3QgcGF0Y2hlcyByZW9yZGVyaW5nIGluIHRoaXMgc2Vy
aWVzLiBUaGlzIHBhdGNoIHNob3VsZCBnbyByaWdodCBhZnRlciB0aGUgcGF0Y2ggMDQsIHdoZXJl
IHlvdSBpbnRyb2R1Y2UgdGhvc2UgZmxhZ3MuIEJlY2F1c2UgaGVyZSB5b3UgaW1wbGVtZW50IHRo
ZWlyIHVzYWdlLiBCdXQgc29tZXdoeSB5b3UgaW5zZXJ0ZWQgYW4gdW5yZWxhdGVkIGNoYW5nZSBp
biBiZXR3ZWVuLgoKPiArICAgIHsKPiArICAgICAgICAvKiBXZSBzaG91bGQgYmUgaGVyZSB3aXRo
IGFuIGludmFsaWQgTUZOLiAqLwo+ICsgICAgICAgIEFTU0VSVChtZm5fZXEobWZuLCBJTlZBTElE
X01GTikpOwo+ICsKPiArICAgICAgICAvKiBXZSBkb24ndCBhbGxvdyByZW1vdmluZyBwYWdlIHdp
dGggY29udGlndW91cyBiaXQgc2V0LiAqLwo+ICsgICAgICAgIGlmICggZW50cnkucHQuY29udGln
ICkKPiArICAgICAgICB7Cj4gKyAgICAgICAgICAgIG1tX3ByaW50aygiUmVtb3ZpbmcgZW50cnkg
d2l0aCBjb250aWd1b3VzIGJpdCBzZXQgaXMgbm90IGFsbG93ZWQuXG4iKTsKPiArICAgICAgICAg
ICAgcmV0dXJuIGZhbHNlOwo+ICsgICAgICAgIH0KPiArICAgIH0KPiArICAgIC8qIFNhbml0eSBj
aGVjayB3aGVuIHBvcHVsYXRpbmcgdGhlIHBhZ2UtdGFibGUuIE5vIGNoZWNrIHNvIGZhci4gKi8K
PiArICAgIGVsc2UKPiArICAgIHsKPiArICAgICAgICBBU1NFUlQoIShmbGFncyAmIF9QQUdFX1BP
UFVMQVRFKSk7Cj4gKyAgICAgICAgLyogV2Ugc2hvdWxkIGJlIGhlcmUgd2l0aCBhbiBpbnZhbGlk
IE1GTiAqLwo+ICsgICAgICAgIEFTU0VSVChtZm5fZXEobWZuLCBJTlZBTElEX01GTikpOwo+ICsg
ICAgfQo+ICsKPiArICAgIHJldHVybiB0cnVlOwo+ICt9Cj4gKwo+ICAgc3RhdGljIGludCB4ZW5f
cHRfdXBkYXRlX2VudHJ5KGVudW0geGVubWFwX29wZXJhdGlvbiBvcCwgdW5zaWduZWQgbG9uZyBh
ZGRyLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mbl90IG1mbiwgdW5zaWdu
ZWQgaW50IGZsYWdzKQo+ICAgewo+ICAgICAgIGxwYWVfdCBwdGUsICplbnRyeTsKPiAgICAgICBs
cGFlX3QgKnRoaXJkID0gTlVMTDsKPiAgIAo+ICsgICAgLyogX1BBR0VfUE9QVUxBVEUgYW5kIF9Q
QUdFX1BSRVNFTlQgc2hvdWxkIG5ldmVyIGJlIHNldCB0b2dldGhlci4gKi8KPiArICAgIEFTU0VS
VCgoZmxhZ3MgJiAoX1BBR0VfUE9QVUxBVEV8X1BBR0VfUFJFU0VOVCkpICE9IChfUEFHRV9QT1BV
TEFURXxfUEFHRV9QUkVTRU5UKSk7Cj4gKwo+ICAgICAgIGVudHJ5ID0gJnhlbl9zZWNvbmRbc2Vj
b25kX2xpbmVhcl9vZmZzZXQoYWRkcildOwo+ICAgICAgIGlmICggIWxwYWVfaXNfdmFsaWQoKmVu
dHJ5KSB8fCAhbHBhZV9pc190YWJsZSgqZW50cnksIDIpICkKPiAgICAgICB7Cj4gQEAgLTk4NCwx
NSArMTA1OSwxMiBAQCBzdGF0aWMgaW50IHhlbl9wdF91cGRhdGVfZW50cnkoZW51bSB4ZW5tYXBf
b3BlcmF0aW9uIG9wLCB1bnNpZ25lZCBsb25nIGFkZHIsCj4gICAgICAgdGhpcmQgPSBtZm5fdG9f
dmlydChscGFlX2dldF9tZm4oKmVudHJ5KSk7Cj4gICAgICAgZW50cnkgPSAmdGhpcmRbdGhpcmRf
dGFibGVfb2Zmc2V0KGFkZHIpXTsKPiAgIAo+ICsgICAgaWYgKCAheGVuX3B0X2NoZWNrX2VudHJ5
KCplbnRyeSwgbWZuLCBmbGFncykgKQo+ICsgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ICsKPiAg
ICAgICBzd2l0Y2ggKCBvcCApIHsKPiAgICAgICAgICAgY2FzZSBJTlNFUlQ6Cj4gICAgICAgICAg
IGNhc2UgUkVTRVJWRToKPiAtICAgICAgICAgICAgaWYgKCBscGFlX2lzX3ZhbGlkKCplbnRyeSkg
KQo+IC0gICAgICAgICAgICB7Cj4gLSAgICAgICAgICAgICAgICBwcmludGsoIiVzOiB0cnlpbmcg
dG8gcmVwbGFjZSBhbiBleGlzdGluZyBtYXBwaW5nIGFkZHI9JWx4IG1mbj0lIlBSSV9tZm4iXG4i
LAo+IC0gICAgICAgICAgICAgICAgICAgICAgIF9fZnVuY19fLCBhZGRyLCBtZm5feChtZm4pKTsK
PiAtICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+IC0gICAgICAgICAgICB9Cj4gICAg
ICAgICAgICAgICBpZiAoIG9wID09IFJFU0VSVkUgKQo+ICAgICAgICAgICAgICAgICAgIGJyZWFr
Owo+ICAgICAgICAgICAgICAgcHRlID0gbWZuX3RvX3hlbl9lbnRyeShtZm4sIFBBR0VfQUlfTUFT
SyhmbGFncykpOwo+IEBAIC0xMDA0LDEyICsxMDc2LDYgQEAgc3RhdGljIGludCB4ZW5fcHRfdXBk
YXRlX2VudHJ5KGVudW0geGVubWFwX29wZXJhdGlvbiBvcCwgdW5zaWduZWQgbG9uZyBhZGRyLAo+
ICAgICAgICAgICAgICAgYnJlYWs7Cj4gICAgICAgICAgIGNhc2UgTU9ESUZZOgo+ICAgICAgICAg
ICBjYXNlIFJFTU9WRToKPiAtICAgICAgICAgICAgaWYgKCAhbHBhZV9pc192YWxpZCgqZW50cnkp
ICkKPiAtICAgICAgICAgICAgewo+IC0gICAgICAgICAgICAgICAgcHJpbnRrKCIlczogdHJ5aW5n
IHRvICVzIGEgbm9uLWV4aXN0aW5nIG1hcHBpbmcgYWRkcj0lbHhcbiIsCj4gLSAgICAgICAgICAg
ICAgICAgICAgICAgX19mdW5jX18sIG9wID09IFJFTU9WRSA/ICJyZW1vdmUiIDogIm1vZGlmeSIs
IGFkZHIpOwo+IC0gICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gLSAgICAgICAgICAg
IH0KPiAgICAgICAgICAgICAgIGlmICggb3AgPT0gUkVNT1ZFICkKPiAgICAgICAgICAgICAgICAg
ICBwdGUuYml0cyA9IDA7Cj4gICAgICAgICAgICAgICBlbHNlCj4gQEAgLTEwMTcsMTIgKzEwODMs
NiBAQCBzdGF0aWMgaW50IHhlbl9wdF91cGRhdGVfZW50cnkoZW51bSB4ZW5tYXBfb3BlcmF0aW9u
IG9wLCB1bnNpZ25lZCBsb25nIGFkZHIsCj4gICAgICAgICAgICAgICAgICAgcHRlID0gKmVudHJ5
Owo+ICAgICAgICAgICAgICAgICAgIHB0ZS5wdC5ybyA9IFBBR0VfUk9fTUFTSyhmbGFncyk7Cj4g
ICAgICAgICAgICAgICAgICAgcHRlLnB0LnhuID0gUEFHRV9YTl9NQVNLKGZsYWdzKTsKPiAtICAg
ICAgICAgICAgICAgIGlmICggIXB0ZS5wdC5ybyAmJiAhcHRlLnB0LnhuICkKPiAtICAgICAgICAg
ICAgICAgIHsKPiAtICAgICAgICAgICAgICAgICAgICBwcmludGsoIiVzOiBJbmNvcnJlY3QgY29t
YmluYXRpb24gZm9yIGFkZHI9JWx4XG4iLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICBf
X2Z1bmNfXywgYWRkcik7Cj4gLSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4g
LSAgICAgICAgICAgICAgICB9Cj4gICAgICAgICAgICAgICB9Cj4gICAgICAgICAgICAgICB3cml0
ZV9wdGUoZW50cnksIHB0ZSk7Cj4gICAgICAgICAgICAgICBicmVhazsKPiBAQCAtMTA0NCw2ICsx
MTA0LDI1IEBAIHN0YXRpYyBpbnQgeGVuX3B0X3VwZGF0ZShlbnVtIHhlbm1hcF9vcGVyYXRpb24g
b3AsCj4gICAgICAgaW50IHJjID0gMDsKPiAgICAgICB1bnNpZ25lZCBsb25nIGFkZHIgPSB2aXJ0
LCBhZGRyX2VuZCA9IGFkZHIgKyBucl9tZm5zICogUEFHRV9TSVpFOwo+ICAgCj4gKyAgICAvKgo+
ICsgICAgICogVGhlIGhhcmR3YXJlIHdhcyBjb25maWd1cmVkIHRvIGZvcmJpZCBtYXBwaW5nIGJv
dGggd3JpdGVhYmxlIGFuZAo+ICsgICAgICogZXhlY3V0YWJsZS4KPiArICAgICAqIFdoZW4gbW9k
aWZ5aW5nL2NyZWF0aW5nIG1hcHBpbmcgKGkuZSBfUEFHRV9QUkVTRU5UIGlzIHNldCksCj4gKyAg
ICAgKiBwcmV2ZW50IGFueSB1cGRhdGUgaWYgdGhpcyBoYXBwZW4uCj4gKyAgICAgKi8KPiArICAg
IGlmICggKGZsYWdzICYgX1BBR0VfUFJFU0VOVCkgJiYgIVBBR0VfUk9fTUFTSyhmbGFncykgJiYK
PiArICAgICAgICAgIVBBR0VfWE5fTUFTSyhmbGFncykgKQo+ICsgICAgewo+ICsgICAgICAgIG1t
X3ByaW50aygiTWFwcGluZ3Mgc2hvdWxkIG5vdCBiZSBib3RoIFdyaXRlYWJsZSBhbmQgRXhlY3V0
YWJsZS5cbiIpOwo+ICsgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ICsgICAgfQo+ICsKPiArICAg
IGlmICggIUlTX0FMSUdORUQodmlydCwgUEFHRV9TSVpFKSApCj4gKyAgICB7Cj4gKyAgICAgICAg
bW1fcHJpbnRrKCJUaGUgdmlydHVhbCBhZGRyZXNzIGlzIG5vdCBhbGlnbmVkIHRvIHRoZSBwYWdl
LXNpemUuXG4iKTsKPiArICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiArICAgIH0KPiArCj4gICAg
ICAgc3Bpbl9sb2NrKCZ4ZW5fcHRfbG9jayk7Cj4gICAKPiAgICAgICBmb3IoIDsgYWRkciA8IGFk
ZHJfZW5kOyBhZGRyICs9IFBBR0VfU0laRSApCj4gCgotLSAKU2luY2VyZWx5LApBbmRyaWkgQW5p
c292LgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVu
LWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6
Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B773989C16
	for <lists+xen-devel@lfdr.de>; Mon, 12 Aug 2019 12:58:12 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hx7zJ-00057e-Ky; Mon, 12 Aug 2019 10:55:41 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=Z6G0=WI=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hx7zI-00057Z-Km
 for xen-devel@lists.xenproject.org; Mon, 12 Aug 2019 10:55:40 +0000
X-Inumbo-ID: b79afaee-bcef-11e9-8980-bc764e045a96
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id b79afaee-bcef-11e9-8980-bc764e045a96;
 Mon, 12 Aug 2019 10:55:38 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id B419DAE91;
 Mon, 12 Aug 2019 10:55:36 +0000 (UTC)
To: David Woodhouse <dwmw2@infradead.org>
References: <cover.1565362089.git.dwmw@amazon.co.uk>
 <c0e531fc665c9ad7595d853e2ce631a13974c022.camel@infradead.org>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <5f867a0d-036f-9800-5347-7c4d109cce47@suse.com>
Date: Mon, 12 Aug 2019 12:55:35 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <c0e531fc665c9ad7595d853e2ce631a13974c022.camel@infradead.org>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v2 6/6] x86/boot: Do not use trampoline for
 no-real-mode boot paths
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: xen-devel <xen-devel@lists.xenproject.org>,
 =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>, Wei Liu <wl@xen.org>,
 Andrew Cooper <andrew.cooper3@citrix.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMDkuMDguMjAxOSAxNzowMiwgRGF2aWQgV29vZGhvdXNlIHdyb3RlOgo+IEZyb206IERhdmlk
IFdvb2Rob3VzZSA8ZHdtd0BhbWF6b24uY28udWs+Cj4gCj4gV2hlcmUgYm9vdGVkIGZyb20gRUZJ
IG9yIHdpdGggbm8tcmVhbC1tb2RlLCB0aGVyZSBpcyBubyBuZWVkIHRvIHN0b21wCj4gb24gbG93
IG1lbW9yeSB3aXRoIHRoZSAxNi1ib290IGNvZGUuIEluc3RlYWQsIGp1c3QgZ28gc3RyYWlnaHQg
dG8KPiB0cmFtcG9saW5lX3Byb3Rtb2RlX2VudHJ5KCkgYXQgaXRzIHBoeXNpY2FsIGxvY2F0aW9u
IHdpdGhpbiB0aGUgWGVuCj4gaW1hZ2UuCj4gCj4gRm9yIG5vdywgdGhlIGJvb3QgY29kZSAoaW5j
bHVkaW5nIHRoZSBFRkkgbG9hZGVyIHBhdGgpIHN0aWxsIGRldGVybWluZXMKPiB3aGF0IHRoZSB0
cmFtcG9saW5lX3BoeXMgYWRkcmVzcyBzaG91bGQgYmUuIFRoZSB0cmFtcG9saW5lIGlzIGFjdHVh
bGx5Cj4gcmVsb2NhdGVkIGZvciB0aGF0IGFkZHJlc3MgYW5kIGNvcGllZCBpbnRvIGxvdyBtZW1v
cnksIGZyb20gYQo+IHJlbG9jYXRlX3RyYW1wb2xpbmUoKSBjYWxsIG1hZGUgZnJvbSBfX3N0YXJ0
X3hlbigpLgoKSSBhc3N1bWUgdGhpcyB0YWxrcyBhYm91dCB0aGUgcmVhbCBtb2RlIHBhcnQgb2Yg
dGhlIHRyYW1wb2xpbmUsIGFzCm9wcG9zZWQgdG8gdGhlIG5leHQgcGFyYWdyYXBoPyBXb3VsZCBi
ZSBuaWNlIGlmIHlvdSBtYWRlIHRoaXMKZXhwbGljaXQuCgo+IEZvciBzdWJzZXF1ZW50IEFQIHN0
YXJ0dXAgYW5kIHdha2V1cCwgdGhlIDMyLWJpdCB0cmFtcG9saW5lIGNhbid0Cj4gdHJpdmlhbGx5
IGJlIHVzZWQgaW4tcGxhY2UgYXMgdGhhdCByZWdpb24gaXNuJ3QgbWFwcGVkLiBTbyBjb3B5IGl0
Cj4gZG93biB0byBsb3cgbWVtb3J5IHRvbywgaGF2aW5nIHJlbG9jYXRlZCBpdCAoYWdhaW4pIHRv
IHdvcmsgZnJvbQo+IHRoZXJlLgoKdHJhbXBvbGluZV9wcm90bW9kZV9lbnRyeSBnZXRzIGVudGVy
ZWQgd2l0aCBDUjAuUEc9MCwgaS5lLiBhdAp0aGF0IHBvaW50IHRoZXJlJ3Mgbm90IGV2ZW4gdGhl
IHF1ZXN0aW9uIHlldCBvZiB0aGVyZSBiZWluZyBhCm1hcHBpbmcuIFN1YnNlcXVlbnRseSBpZGxl
X3BnX3RhYmxlIGdldHMgbG9hZGVkIGludG8gQ1IzLiBJIHdvbmRlcgppZiwgcmF0aGVyIHRoYW4g
cmVsb2NhdGluZyB0aGUgMzItYml0IHBhcnQgb2YgdGhlIHRyYW1wb2xpbmUsIGl0CndvdWxkbid0
IGJlIGJldHRlciB0byBpbnN0YWxsIGEgMToxIG1hcHBpbmcgaW50byBpZGxlX3BnX3RhYmxlLgpT
dWNoIGEgbWFwcGluZyB3b3VsZCBuZWVkIHRvIGhhdmUgdGhlIEcgYml0cyBjbGVhciBpbiBvcmRl
ciB0bwpub3QgY29uZmxpY3Qgd2l0aCBQViBndWVzdCBtYXBwaW5ncyBvZiB0aGUgc2FtZSBsaW5l
YXIgYWRkcmVzc2VzLgoKPiAtLS0gYS94ZW4vYXJjaC94ODYvYWNwaS9wb3dlci5jCj4gKysrIGIv
eGVuL2FyY2gveDg2L2FjcGkvcG93ZXIuYwo+IEBAIC0xNTIsOSArMTUyLDkgQEAgc3RhdGljIHZv
aWQgYWNwaV9zbGVlcF9wcmVwYXJlKHUzMiBzdGF0ZSkKPiAgICAgICAgICAgcmV0dXJuOwo+ICAg
Cj4gICAgICAgaWYgKCBhY3BpX3NpbmZvLnZlY3Rvcl93aWR0aCA9PSAzMiApCj4gLSAgICAgICAg
Kih1aW50MzJfdCAqKXdha2V1cF92ZWN0b3JfdmEgPSBib290c3ltX3BoeXMod2FrZXVwX3N0YXJ0
KTsKPiArICAgICAgICAqKHVpbnQzMl90ICopd2FrZXVwX3ZlY3Rvcl92YSA9IHRyYW1wc3ltX3Bo
eXMod2FrZXVwX3N0YXJ0KTsKPiAgICAgICBlbHNlCj4gLSAgICAgICAgKih1aW50NjRfdCAqKXdh
a2V1cF92ZWN0b3JfdmEgPSBib290c3ltX3BoeXMod2FrZXVwX3N0YXJ0KTsKPiArICAgICAgICAq
KHVpbnQ2NF90ICopd2FrZXVwX3ZlY3Rvcl92YSA9IHRyYW1wc3ltX3BoeXMod2FrZXVwX3N0YXJ0
KTsKPiAgIH0KPiAgIAo+ICAgc3RhdGljIHZvaWQgYWNwaV9zbGVlcF9wb3N0KHUzMiBzdGF0ZSkg
e30KPiBAQCAtMzg4LDcgKzM4OCw3IEBAIHN0YXRpYyB2b2lkIHRib290X3NsZWVwKHU4IHNsZWVw
X3N0YXRlKQo+ICAgICAgIGdfdGJvb3Rfc2hhcmVkLT5hY3BpX3NpbmZvLndha2V1cF92ZWN0b3Ig
PSBhY3BpX3NpbmZvLndha2V1cF92ZWN0b3I7Cj4gICAgICAgZ190Ym9vdF9zaGFyZWQtPmFjcGlf
c2luZm8udmVjdG9yX3dpZHRoID0gYWNwaV9zaW5mby52ZWN0b3Jfd2lkdGg7Cj4gICAgICAgZ190
Ym9vdF9zaGFyZWQtPmFjcGlfc2luZm8ua2VybmVsX3MzX3Jlc3VtZV92ZWN0b3IgPQo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vdHN5bV9waHlzKHdh
a2V1cF9zdGFydCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB0cmFtcHN5bV9waHlzKHdha2V1cF9zdGFydCk7CgpTaG91bGRuJ3QgY2hhbmdlcyBsaWtl
IHRoZXNlIGhhdmUgaGFwcGVuZWQgZWFybGllciwgd2hlbiB5b3UKaW50cm9kdWNlIHRoZSAobG9n
aWNhbCBvbmx5IGF0IHRoYXQgcG9pbnQpIGRpc3RpbmN0aW9uIGJldHdlZW4KdHJhbXBvbGluZSBw
aWVjZXM/Cgo+IEBAIC05Nyw3ICsxMDAsNyBAQCBHTE9CQUwodHJhbXBvbGluZV9yZWFsbW9kZV9l
bnRyeSkKPiAgICAgICAgICBjbGQKPiAgICAgICAgICBjbGkKPiAgICAgICAgICBsaWR0ICAgIHRy
YW1wc3ltKGlkdF80OCkKPiAtICAgICAgICBsZ2R0ICAgIHRyYW1wc3ltKGdkdF80OCkKPiArICAg
ICAgICBsZ2R0bCAgIHRyYW1wc3ltKGdkdF80OCkKClN0cmF5IC8gdW5yZWxhdGVkIGNoYW5nZSAo
YW5kIGlmIG5lZWRlZCwgdGhlbiBhbHNvIGZvciBsaWR0KT8KCj4gQEAgLTIzNiwxMSArMjM5LDIz
IEBAIGdkdF80ODogLndvcmQgICA3KjgtMQo+ICAgCj4gICAvKiBUaGUgZmlyc3QgcGFnZSBvZiB0
cmFtcG9saW5lIGlzIHBlcm1hbmVudCwgdGhlIHJlc3QgYm9vdC10aW1lIG9ubHkuICovCj4gICAv
KiBSZXVzZSB0aGUgYm9vdCB0cmFtcG9saW5lIG9uIHRoZSAxc3QgdHJhbXBvbGluZSBwYWdlIGFz
IHN0YWNrIGZvciB3YWtldXAuICovCj4gLSAgICAgICAgLmVxdSAgICB3YWtldXBfc3RhY2ssIGJv
b3RfdHJhbXBvbGluZV9zdGFydCArIFBBR0VfU0laRQo+ICsgICAgICAgIC5lcXUgICAgd2FrZXVw
X3N0YWNrLCBwZXJtX3RyYW1wb2xpbmVfc3RhcnQgKyBQQUdFX1NJWkUKPiAgICAgICAgICAgLmds
b2JhbCB3YWtldXBfc3RhY2sKPiAgIAo+ICtFTlRSWShwZXJtX3RyYW1wb2xpbmVfZW5kKQo+ICsK
PiAgIC8qIEZyb20gaGVyZSBvbiBlYXJseSBib290IG9ubHkuICovCj4gICAKPiArRU5UUlkoYm9v
dF90cmFtcG9saW5lX3N0YXJ0KQo+ICsKPiArICAgICAgICAud29yZCAgIDAKPiArYm9vdDE2X2lk
dDoKPiArICAgICAgICAud29yZCAgIDAsIDAsIDAgIyBiYXNlID0gbGltaXQgPSAwCj4gKyAgICAg
ICAgLndvcmQgICAwCj4gK2Jvb3QxNl9nZHQ6Cj4gKyAgICAgICAgLndvcmQgICA3KjgtMQo+ICsg
ICAgICAgIC5sb25nICAgdHJhbXAzMnN5bV9yZWwodHJhbXBvbGluZV9nZHQsNCkKCkNhbiB3ZSBy
ZWFsbHkgbm90IGdldCBhd2F5IHdpdGhvdXQgYSBzZWNvbmQgY29weSBvZiB0aGVzZT8KCj4gQEAg
LTMwNCw4ICszMTksOCBAQCB0cmFtcG9saW5lX2Jvb3RfY3B1X2VudHJ5Ogo+ICAgICAgICAgICBj
bGkKPiAgIAo+ICAgICAgICAgICAvKiBSZXNldCBHRFQgYW5kIElEVC4gU29tZSBCSU9TZXMgY2xv
YmJlciBHRFRSLiAqLwo+IC0gICAgICAgIGxpZHQgICAgYm9vdHN5bShpZHRfNDgpCj4gLSAgICAg
ICAgbGdkdCAgICBib290c3ltKGdkdF80OCkKPiArICAgICAgICBsaWR0ICAgIGJvb3RzeW0oYm9v
dDE2X2lkdCkKPiArICAgICAgICBsZ2R0bCAgIGJvb3RzeW0oYm9vdDE2X2dkdCkKCkFzIGFib3Zl
IC0gZWl0aGVyIGJvdGggc2hvdWxkIGdhaW4gYSBzdWZmaXgsIG9yIG5laXRoZXIgb2YgdGhlbS4K
Cj4gLS0tIGEveGVuL2FyY2gveDg2L3NldHVwLmMKPiArKysgYi94ZW4vYXJjaC94ODYvc2V0dXAu
Ywo+IEBAIC02ODIsNiArNjgyLDQyIEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgX19pbml0IGNvcHlf
Ymlvc19lODIwKHN0cnVjdCBlODIwZW50cnkgKm1hcCwgdW5zaWduZWQgaW50IGxpCj4gICAgICAg
cmV0dXJuIG47Cj4gICB9Cj4gICAKPiArZXh0ZXJuIGNvbnN0IHMzMiBfX3RyYW1wb2xpbmVfcmVs
X3N0YXJ0W10sIF9fdHJhbXBvbGluZV9yZWxfc3RvcFtdOwo+ICtleHRlcm4gY29uc3QgczMyIF9f
dHJhbXBvbGluZTMyX3JlbF9zdGFydFtdLCBfX3RyYW1wb2xpbmUzMl9yZWxfc3RvcFtdOwo+ICsK
PiArc3RhdGljIHZvaWQgX19pbml0IHJlbG9jYXRlX3RyYW1wb2xpbmUodW5zaWduZWQgbG9uZyBw
aHlzKQo+ICt7Cj4gKyAgICBjb25zdCBzMzIgKnRyYW1wb2xpbmVfcHRyOwo+ICsgICAgdWludDMy
X3QgdHJhbXAzMl9kZWx0YSA9IDA7Cj4gKwo+ICsgICAgLyogQXBwbHkgcmVsb2NhdGlvbnMgdG8g
dHJhbXBvbGluZS4gKi8KPiArICAgIGZvciAoIHRyYW1wb2xpbmVfcHRyID0gX190cmFtcG9saW5l
X3JlbF9zdGFydDsKPiArICAgICAgICAgIHRyYW1wb2xpbmVfcHRyIDwgX190cmFtcG9saW5lX3Jl
bF9zdG9wOwo+ICsgICAgICAgICAgKyt0cmFtcG9saW5lX3B0ciApCj4gKyAgICAgICAgKih1MzIg
KikoKnRyYW1wb2xpbmVfcHRyICsgKGxvbmcpdHJhbXBvbGluZV9wdHIpICs9IHBoeXM7Cj4gKwo+
ICsgICAgdHJhbXAzMl9kZWx0YSA9IHBoeXM7CgpBbnkgcmVhc29uIHRoaXMgY2FuJ3QgYmUgdGhl
IGluaXRpYWxpemVyIG9mIHRoZSB2YXJpYWJsZSwgb3IgdGhlCnplcm8gaW5pdGlhbGl6ZXIgYWJv
dmUgY2FuJ3QgYmUgZHJvcHBlZD8KCj4gKyAgICBpZiAoIWVmaV9lbmFibGVkKEVGSV9MT0FERVIp
KSB7CgpTdHlsZSAobWlzc2luZyBibGFua3MgaW5zaWRlIHRoZSBwYXJlbnRoZXNlcywgYW5kIGJy
YWNlIHRvIGdvIG9uCml0cyBvd24gbGluZSkuCgo+IC0tLSBhL3hlbi9pbmNsdWRlL2FzbS14ODYv
Y29uZmlnLmgKPiArKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L2NvbmZpZy5oCj4gQEAgLTg5LDEy
ICs4OSwxMiBAQAo+ICAKPiAgI2lmbmRlZiBfX0FTU0VNQkxZX18KPiAgZXh0ZXJuIHVuc2lnbmVk
IGxvbmcgdHJhbXBvbGluZV9waHlzOwo+IC0jZGVmaW5lIGJvb3RzeW1fcGh5cyhzeW0pICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgXAo+IC0gICAgKCgodW5zaWduZWQgbG9uZykmKHN5
bSktKHVuc2lnbmVkIGxvbmcpJmJvb3RfdHJhbXBvbGluZV9zdGFydCkrdHJhbXBvbGluZV9waHlz
KQo+IC0jZGVmaW5lIGJvb3RzeW0oc3ltKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgXAo+ICsjZGVmaW5lIHRyYW1wc3ltX3BoeXMoc3ltKSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFwKPiArICAgICgoKHVuc2lnbmVkIGxvbmcpJihzeW0pLSh1bnNpZ25lZCBs
b25nKSZwZXJtX3RyYW1wb2xpbmVfc3RhcnQpK3RyYW1wb2xpbmVfcGh5cykKPiArI2RlZmluZSB0
cmFtcHN5bShzeW0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCj4gICAg
ICAoKlJFTE9DX0hJREUoKHR5cGVvZigmKHN5bSkpKV9fdmEoX19wYSgmKHN5bSkpKSwgICAgICBc
Cj4gLSAgICAgICAgICAgICAgICAgdHJhbXBvbGluZV9waHlzLV9fcGEoYm9vdF90cmFtcG9saW5l
X3N0YXJ0KSkpCj4gLWV4dGVybiBjaGFyIGJvb3RfdHJhbXBvbGluZV9zdGFydFtdLCBib290X3Ry
YW1wb2xpbmVfZW5kW107Cj4gKyAgICAgICAgICAgICAgICAgdHJhbXBvbGluZV9waHlzLV9fcGEo
cGVybV90cmFtcG9saW5lX3N0YXJ0KSkpCgpBcyB5b3UncmUgdG91Y2hpbmcgdGhlc2UsIGNvdWxk
IHlvdSBwbGVhc2UgYWxzbyBpbnNlcnQgdGhlIG1pc3NpbmcKYmxhbmtzIGFyb3VuZCB0aGUgYmlu
YXJ5ICsgYW5kIC0gPwoKSmFuCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9q
ZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVu
LWRldmVs

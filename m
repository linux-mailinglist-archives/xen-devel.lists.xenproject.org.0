Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 8BFE83507A
	for <lists+xen-devel@lfdr.de>; Tue,  4 Jun 2019 21:54:44 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hYFTQ-0006jo-Vl; Tue, 04 Jun 2019 19:51:56 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=KH14=UD=citrix.com=andrew.cooper3@srs-us1.protection.inumbo.net>)
 id 1hYFTP-0006jd-7L
 for xen-devel@lists.xenproject.org; Tue, 04 Jun 2019 19:51:55 +0000
X-Inumbo-ID: 32481a38-8702-11e9-8f52-c35970b4a334
Received: from esa5.hc3370-68.iphmx.com (unknown [216.71.155.168])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 32481a38-8702-11e9-8f52-c35970b4a334;
 Tue, 04 Jun 2019 19:51:52 +0000 (UTC)
Authentication-Results: esa5.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=andrew.cooper3@citrix.com;
 spf=Pass smtp.mailfrom=Andrew.Cooper3@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 andrew.cooper3@citrix.com) identity=pra;
 client-ip=23.29.105.83; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="andrew.cooper3@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: Pass (esa5.hc3370-68.iphmx.com: domain of
 Andrew.Cooper3@citrix.com designates 23.29.105.83 as
 permitted sender) identity=mailfrom; client-ip=23.29.105.83;
 receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="Andrew.Cooper3@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:23.29.105.83 ip4:162.221.156.50 ~all"
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=23.29.105.83; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: lieeOL98o9zQmSIBOyIrWPGW9fHf9AVjBGU+K34XjVdU6rzqgTN8nNjPrlRVTA9BKwGGaqMcVF
 OU8dEQA4/1PK9vC1z0LK5zdpQNlf6M+XjHFqFzzyiLx6QAyy5GT0KzpNCnmVs+RVh6AlfHZX2W
 iVehHIBwgqkn9kpCr8d5DZ16F+01kdqiGtG3MxCpZKoc8ASj6W4f+tCPvUCxOJ6p6DNWYuWpzR
 mLfskRje/cNzRD05yawAvw3dlA0arokKhstrJ9MtbNF4+jI5PX9cjv51DZWI+bn58uTm0+IW85
 eeU=
X-SBRS: 2.7
X-MesageID: 1292917
X-Ironport-Server: esa5.hc3370-68.iphmx.com
X-Remote-IP: 23.29.105.83
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.60,550,1549947600"; 
   d="scan'208";a="1292917"
From: Andrew Cooper <andrew.cooper3@citrix.com>
To: Xen-devel <xen-devel@lists.xenproject.org>
Date: Tue, 4 Jun 2019 20:51:25 +0100
Message-ID: <1559677885-10731-3-git-send-email-andrew.cooper3@citrix.com>
X-Mailer: git-send-email 2.1.4
In-Reply-To: <1559677885-10731-1-git-send-email-andrew.cooper3@citrix.com>
References: <1559677885-10731-1-git-send-email-andrew.cooper3@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH 2/2] tools/fuzz: Add a cpu-policy fuzzing harness
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 Sergey Dyasli <sergey.dyasli@citrix.com>, Wei Liu <wl@xen.org>,
 Jan Beulich <JBeulich@suse.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlcmUgaXMgbm93IGVub3VnaCBjb21wbGV4aXR5IHRoYXQgYSBmdXp6aW5nIGhhcm5lc3MgaXMg
YSBnb29kIGlkZWEsIGFuZAplbm91Z2ggc3VwcG9ydGluZyBsb2dpYyB0byBpbXBsZW1lbnQgb25l
IHdoaWNoIEFGTCBzZWVtcyBoYXBweSB3aXRoLgoKVGFrZSB0aGUgZXhpc3RpbmcgcmVjYWxjdWxh
dGVfc3ludGgoKSBoZWxwZXIgYW5kIGV4cG9ydCBpdCBhcwp4ODZfY3B1aWRfcG9saWN5X3JlY2Fs
Y19zeW50aCgpLCBhcyBpdCBpcyBuZWVkZWQgYnkgdGhlIGZ1enppbmcgaGFybmVzcy4KClNpZ25l
ZC1vZmYtYnk6IEFuZHJldyBDb29wZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+Ci0tLQpD
QzogSmFuIEJldWxpY2ggPEpCZXVsaWNoQHN1c2UuY29tPgpDQzogV2VpIExpdSA8d2xAeGVuLm9y
Zz4KQ0M6IFJvZ2VyIFBhdSBNb25uw6kgPHJvZ2VyLnBhdUBjaXRyaXguY29tPgpDQzogU2VyZ2V5
IER5YXNsaSA8c2VyZ2V5LmR5YXNsaUBjaXRyaXguY29tPgotLS0KIHRvb2xzL2Z1enovY3B1LXBv
bGljeS8uZ2l0aWdub3JlICAgICAgICAgIHwgICAxICsKIHRvb2xzL2Z1enovY3B1LXBvbGljeS9N
YWtlZmlsZSAgICAgICAgICAgIHwgIDI4ICsrKysrCiB0b29scy9mdXp6L2NwdS1wb2xpY3kvYWZs
LXBvbGljeS1mdXp6ZXIuYyB8IDE4NyArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIHhl
bi9pbmNsdWRlL3hlbi9saWIveDg2L2NwdWlkLmggICAgICAgICAgIHwgICA1ICsKIHhlbi9saWIv
eDg2L2NwdWlkLmMgICAgICAgICAgICAgICAgICAgICAgIHwgICA3ICstCiA1IGZpbGVzIGNoYW5n
ZWQsIDIyNCBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0
IHRvb2xzL2Z1enovY3B1LXBvbGljeS8uZ2l0aWdub3JlCiBjcmVhdGUgbW9kZSAxMDA2NDQgdG9v
bHMvZnV6ei9jcHUtcG9saWN5L01ha2VmaWxlCiBjcmVhdGUgbW9kZSAxMDA2NDQgdG9vbHMvZnV6
ei9jcHUtcG9saWN5L2FmbC1wb2xpY3ktZnV6emVyLmMKCmRpZmYgLS1naXQgYS90b29scy9mdXp6
L2NwdS1wb2xpY3kvLmdpdGlnbm9yZSBiL3Rvb2xzL2Z1enovY3B1LXBvbGljeS8uZ2l0aWdub3Jl
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLmIwZTBiZGYKLS0tIC9kZXYvbnVs
bAorKysgYi90b29scy9mdXp6L2NwdS1wb2xpY3kvLmdpdGlnbm9yZQpAQCAtMCwwICsxIEBACith
ZmwtcG9saWN5LWZ1enplcgpkaWZmIC0tZ2l0IGEvdG9vbHMvZnV6ei9jcHUtcG9saWN5L01ha2Vm
aWxlIGIvdG9vbHMvZnV6ei9jcHUtcG9saWN5L01ha2VmaWxlCm5ldyBmaWxlIG1vZGUgMTAwNjQ0
CmluZGV4IDAwMDAwMDAuLjQxYTIyMzAKLS0tIC9kZXYvbnVsbAorKysgYi90b29scy9mdXp6L2Nw
dS1wb2xpY3kvTWFrZWZpbGUKQEAgLTAsMCArMSwyOCBAQAorWEVOX1JPT1QgPSAkKENVUkRJUikv
Li4vLi4vLi4KK2luY2x1ZGUgJChYRU5fUk9PVCkvdG9vbHMvUnVsZXMubWsKKworLlBIT05ZOiBh
bGwKK2FsbDogYWZsLXBvbGljeS1mdXp6ZXIKKworLlBIT05ZOiBjbGVhbgorY2xlYW46CisJJChS
TSkgLWYgLS0gKi5vIC4qLmQgLiouZDIgYWZsLXBvbGljeS1mdXp6ZXIKKworLlBIT05ZOiBkaXN0
Y2xlYW4KK2Rpc3RjbGVhbjogY2xlYW4KKwkkKFJNKSAtZiAtLSAqfgorCisuUEhPTlk6IGluc3Rh
bGwKK2luc3RhbGw6IGFsbAorCisuUEhPTlk6IHVuaW5zdGFsbAorCitDRkxBR1MgKz0gLVdlcnJv
ciAkKENGTEFHU194ZW5pbmNsdWRlKSAtRF9fWEVOX1RPT0xTX18KK0NGTEFHUyArPSAkKEFQUEVO
RF9DRkxBR1MpIC1PZworCit2cGF0aCAlLmMgLi4vLi4vLi4veGVuL2xpYi94ODYKKworYWZsLXBv
bGljeS1mdXp6ZXI6IGFmbC1wb2xpY3ktZnV6emVyLm8gbXNyLm8gY3B1aWQubworCSQoQ0MpICQo
Q0ZMQUdTKSAkXiAtbyAkQAorCistaW5jbHVkZSAkKERFUFNfSU5DTFVERSkKZGlmZiAtLWdpdCBh
L3Rvb2xzL2Z1enovY3B1LXBvbGljeS9hZmwtcG9saWN5LWZ1enplci5jIGIvdG9vbHMvZnV6ei9j
cHUtcG9saWN5L2FmbC1wb2xpY3ktZnV6emVyLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXgg
MDAwMDAwMC4uYmMwY2VjZAotLS0gL2Rldi9udWxsCisrKyBiL3Rvb2xzL2Z1enovY3B1LXBvbGlj
eS9hZmwtcG9saWN5LWZ1enplci5jCkBAIC0wLDAgKzEsMTg3IEBACisjaW5jbHVkZSA8YXNzZXJ0
Lmg+CisjaW5jbHVkZSA8c3RkYm9vbC5oPgorI2luY2x1ZGUgPHN0ZGRlZi5oPgorI2luY2x1ZGUg
PHN0ZGludC5oPgorI2luY2x1ZGUgPHN0ZGlvLmg+CisjaW5jbHVkZSA8c3RkbGliLmg+CisjaW5j
bHVkZSA8c3RyaW5nLmg+CisKKyNpbmNsdWRlIDxnZXRvcHQuaD4KKworI2luY2x1ZGUgPHhlbi10
b29scy9saWJzLmg+CisjaW5jbHVkZSA8eGVuL2xpYi94ODYvY3B1aWQuaD4KKyNpbmNsdWRlIDx4
ZW4vbGliL3g4Ni9tc3IuaD4KKyNpbmNsdWRlIDx4ZW4vZG9tY3RsLmg+CisKK3N0YXRpYyBib29s
IGRlYnVnOworCisjZGVmaW5lIEVNUFRZX0xFQUYgKChzdHJ1Y3QgY3B1aWRfbGVhZil7fSkKKwor
c3RhdGljIHZvaWQgY2hlY2tfY3B1aWQoc3RydWN0IGNwdWlkX3BvbGljeSAqY3ApCit7CisgICAg
c3RydWN0IGNwdWlkX3BvbGljeSBuZXcgPSB7fTsKKyAgICBzaXplX3QgZGF0YV9lbmQ7CisgICAg
eGVuX2NwdWlkX2xlYWZfdCAqbGVhdmVzID0gbWFsbG9jKENQVUlEX01BWF9TRVJJQUxJU0VEX0xF
QVZFUyAqCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVvZih4ZW5f
Y3B1aWRfbGVhZl90KSk7CisgICAgdW5zaWduZWQgaW50IG5yID0gQ1BVSURfTUFYX1NFUklBTElT
RURfTEVBVkVTOworICAgIGludCByYzsKKworICAgIGlmICggIWxlYXZlcyApCisgICAgICAgIHJl
dHVybjsKKworICAgIC8qCisgICAgICogQ2xlYW4gdW51c2FibGUgbGVhdmVzLiAgVGhlc2UgY2Fu
J3QgYmUgYWNjZXNzZWQgdmlhIGFyY2hpdGVjdHVyYWwKKyAgICAgKiBtZWFucywgYnV0IG1heSBi
ZSBmaWxsZWQgYnkgdGhlIGZyZWFkKCkgYWNyb3NzIHRoZSBlbnRpcmUgc3RydWN0dXJlLgorICAg
ICAqIEFsc28gemVybyB0aGUgdHJhaWxpbmcgcGFkZGluZyAoaWYgYW55KS4KKyAgICAgKi8KKyAg
ICBjcC0+YmFzaWMucmF3WzRdID0gRU1QVFlfTEVBRjsKKyAgICBjcC0+YmFzaWMucmF3WzddID0g
RU1QVFlfTEVBRjsKKyAgICBjcC0+YmFzaWMucmF3WzB4Yl0gPSBFTVBUWV9MRUFGOworICAgIGNw
LT5iYXNpYy5yYXdbMHhkXSA9IEVNUFRZX0xFQUY7CisgICAgZGF0YV9lbmQgPSBvZmZzZXRvZih0
eXBlb2YoKmNwKSwgeDg2X3ZlbmRvcikgKyBzaXplb2YoY3AtPng4Nl92ZW5kb3IpOworICAgIGlm
ICggZGF0YV9lbmQgPCBzaXplb2YoKmNwKSApCisgICAgICAgIG1lbXNldCgodm9pZCAqKWNwICsg
ZGF0YV9lbmQsIDAsIHNpemVvZigqY3ApIC0gZGF0YV9lbmQpOworCisgICAgLyoKKyAgICAgKiBG
aXggdXAgdGhlIGRhdGEgaW4gdGhlIHNvdXJjZSBwb2xpY3kgd2hpY2ggaXNuJ3QgZXhwZWN0ZWQg
dG8gc3Vydml2ZQorICAgICAqIHNlcmlhbGlzYXRpb24uCisgICAgICovCisgICAgeDg2X2NwdWlk
X3BvbGljeV9jbGVhcl9vdXRfb2ZfcmFuZ2VfbGVhdmVzKGNwKTsKKyAgICB4ODZfY3B1aWRfcG9s
aWN5X3JlY2FsY19zeW50aChjcCk7CisKKyAgICAvKiBTZXJpYWxpc2UuLi4gKi8KKyAgICByYyA9
IHg4Nl9jcHVpZF9jb3B5X3RvX2J1ZmZlcihjcCwgbGVhdmVzLCAmbnIpOworICAgIGFzc2VydChy
YyA9PSAwKTsKKyAgICBhc3NlcnQobnIgPD0gQ1BVSURfTUFYX1NFUklBTElTRURfTEVBVkVTKTsK
KworICAgIC8qIC4uLiBhbmQgZGVzZXJpYWxpc2UuICovCisgICAgcmMgPSB4ODZfY3B1aWRfY29w
eV9mcm9tX2J1ZmZlcigmbmV3LCBsZWF2ZXMsIG5yLCBOVUxMLCBOVUxMKTsKKyAgICBhc3NlcnQo
cmMgPT0gMCk7CisKKyAgICAvKiBUaGUgcmVzdWx0IGFmdGVyIHNlcmlhbGlzYXRpb24vZGVzZXJp
YWxpc2Fpb24gc2hvdWxkIGJlIGlkZW50aWNhbC4uLiAqLworICAgIGlmICggbWVtY21wKGNwLCAm
bmV3LCBzaXplb2YoKmNwKSkgIT0gMCApCisgICAgeworICAgICAgICBpZiAoIGRlYnVnICkKKyAg
ICAgICAgeworICAgICAgICAgICAgdW5zaWduZWQgY2hhciAqbCA9ICh2b2lkICopY3AsICpyID0g
KHZvaWQgKikmbmV3OworCisgICAgICAgICAgICBmb3IgKCBzaXplX3QgaSA9IDA7IGkgPCBzaXpl
b2YoKmNwKTsgKytpICkKKyAgICAgICAgICAgICAgICBpZiAoIGxbaV0gIT0gcltpXSApCisgICAg
ICAgICAgICAgICAgICAgIHByaW50ZigiRGlmZmVyIGF0IG9mZnNldCAlenU6ICV1IHZzICV1XG4i
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgaSwgbFtpXSwgcltpXSk7CisgICAgICAgIH0K
KworICAgICAgICBhYm9ydCgpOworICAgIH0KKworICAgIGZyZWUobGVhdmVzKTsKK30KKworc3Rh
dGljIHZvaWQgY2hlY2tfbXNyKHN0cnVjdCBtc3JfcG9saWN5ICptcCkKK3sKKyAgICBzdHJ1Y3Qg
bXNyX3BvbGljeSBuZXcgPSB7fTsKKyAgICB4ZW5fbXNyX2VudHJ5X3QgKm1zcnMgPSBtYWxsb2Mo
TVNSX01BWF9TRVJJQUxJU0VEX0VOVFJJRVMgKgorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzaXplb2YoeGVuX21zcl9lbnRyeV90KSk7CisgICAgdW5zaWduZWQgaW50IG5yID0g
TVNSX01BWF9TRVJJQUxJU0VEX0VOVFJJRVM7CisgICAgaW50IHJjOworCisgICAgaWYgKCAhbXNy
cyApCisgICAgICAgIHJldHVybjsKKworICAgIHJjID0geDg2X21zcl9jb3B5X3RvX2J1ZmZlciht
cCwgbXNycywgJm5yKTsKKyAgICBhc3NlcnQocmMgPT0gMCk7CisgICAgYXNzZXJ0KG5yIDw9IE1T
Ul9NQVhfU0VSSUFMSVNFRF9FTlRSSUVTKTsKKworICAgIHJjID0geDg2X21zcl9jb3B5X2Zyb21f
YnVmZmVyKCZuZXcsIG1zcnMsIG5yLCBOVUxMKTsKKyAgICBhc3NlcnQocmMgPT0gMCk7CisgICAg
YXNzZXJ0KG1lbWNtcChtcCwgJm5ldywgc2l6ZW9mKCptcCkpID09IDApOworCisgICAgZnJlZSht
c3JzKTsKK30KKworaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKiphcmd2KQoreworICAgIEZJTEUg
KmZwID0gTlVMTDsKKworICAgIHNldGJ1ZihzdGRpbiwgTlVMTCk7CisgICAgc2V0YnVmKHN0ZG91
dCwgTlVMTCk7CisKKyAgICB3aGlsZSAoIHRydWUgKQorICAgIHsKKyAgICAgICAgc3RhdGljIGNv
bnN0IHN0cnVjdCBvcHRpb24gb3B0c1tdID0geworICAgICAgICAgICAgeyAiZGVidWciLCBub19h
cmd1bWVudCwgTlVMTCwgJ2QnIH0sCisgICAgICAgICAgICB7ICJoZWxwIiwgbm9fYXJndW1lbnQs
IE5VTEwsICdoJyB9LAorICAgICAgICAgICAge30sCisgICAgICAgIH07CisgICAgICAgIGludCBj
ID0gZ2V0b3B0X2xvbmcoYXJnYywgYXJndiwgImhkIiwgb3B0cywgTlVMTCk7CisKKyAgICAgICAg
aWYgKCBjID09IC0xICkKKyAgICAgICAgICAgIGJyZWFrOworCisgICAgICAgIHN3aXRjaCAoIGMg
KQorICAgICAgICB7CisgICAgICAgIGNhc2UgJ2QnOgorICAgICAgICAgICAgcHJpbnRmKCJFbmFi
bGluZyBkZWJ1Z1xuIik7CisgICAgICAgICAgICBkZWJ1ZyA9IHRydWU7CisgICAgICAgICAgICBi
cmVhazsKKworICAgICAgICBkZWZhdWx0OgorICAgICAgICAgICAgcHJpbnRmKCJCYWQgb3B0aW9u
ICVkICglYylcbiIsIGMsIGMpOworICAgICAgICAgICAgZXhpdCgtMSk7CisgICAgICAgICAgICBi
cmVhazsKKyAgICAgICAgfQorICAgIH0KKworICAgIGlmICggb3B0aW5kID09IGFyZ2MgKSAvKiBO
byBwb3NpdGlvbmFsIHBhcmFtZXRlcnMuICBVc2Ugc3RkaW4uICovCisgICAgeworICAgICAgICBw
cmludGYoIlVzaW5nIHN0ZGluXG4iKTsKKyAgICAgICAgZnAgPSBzdGRpbjsKKyAgICB9CisKKyNp
ZmRlZiBfX0FGTF9IQVZFX01BTlVBTF9DT05UUk9MCisgICAgX19BRkxfSU5JVCgpOworICAgIHdo
aWxlICggX19BRkxfTE9PUCgxMDAwKSApCisjZW5kaWYKKyAgICB7CisgICAgICAgIHN0cnVjdCBj
cHVpZF9wb2xpY3kgKmNwID0gTlVMTDsKKyAgICAgICAgc3RydWN0IG1zcl9wb2xpY3kgKm1wID0g
TlVMTDsKKworICAgICAgICBpZiAoIGZwICE9IHN0ZGluICkKKyAgICAgICAgeworICAgICAgICAg
ICAgcHJpbnRmKCJPcGVuaW5nIGZpbGUgJyVzJ1xuIiwgYXJndltvcHRpbmRdKTsKKyAgICAgICAg
ICAgIGZwID0gZm9wZW4oYXJndltvcHRpbmRdLCAicmIiKTsKKworICAgICAgICAgICAgaWYgKCAh
ZnAgKQorICAgICAgICAgICAgeworICAgICAgICAgICAgICAgIHBlcnJvcigiZm9wZW4iKTsKKyAg
ICAgICAgICAgICAgICBleGl0KC0xKTsKKyAgICAgICAgICAgIH0KKyAgICAgICAgfQorCisgICAg
ICAgIGNwID0gY2FsbG9jKDEsIHNpemVvZigqY3ApKTsKKyAgICAgICAgbXAgPSBjYWxsb2MoMSwg
c2l6ZW9mKCptcCkpOworICAgICAgICBpZiAoICFjcCB8fCAhbXAgKQorICAgICAgICAgICAgZ290
byBza2lwOworCisgICAgICAgIGZyZWFkKGNwLCBzaXplb2YoKmNwKSwgMSwgZnApOworICAgICAg
ICBmcmVhZChtcCwgc2l6ZW9mKCptcCksIDEsIGZwKTsKKworICAgICAgICBpZiAoICFmZW9mKGZw
KSApCisgICAgICAgICAgICBnb3RvIHNraXA7CisKKyAgICAgICAgY2hlY2tfY3B1aWQoY3ApOwor
ICAgICAgICBjaGVja19tc3IobXApOworCisgICAgc2tpcDoKKyAgICAgICAgZnJlZShjcCk7Cisg
ICAgICAgIGZyZWUobXApOworCisgICAgICAgIGlmICggZnAgIT0gc3RkaW4gKQorICAgICAgICB7
CisgICAgICAgICAgICBmY2xvc2UoZnApOworICAgICAgICAgICAgZnAgPSBOVUxMOworICAgICAg
ICB9CisgICAgfQorCisgICAgcmV0dXJuIDA7Cit9CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS94
ZW4vbGliL3g4Ni9jcHVpZC5oIGIveGVuL2luY2x1ZGUveGVuL2xpYi94ODYvY3B1aWQuaAppbmRl
eCAyNjE4NTk4Li5kZjU5NDZiIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vbGliL3g4Ni9j
cHVpZC5oCisrKyBiL3hlbi9pbmNsdWRlL3hlbi9saWIveDg2L2NwdWlkLmgKQEAgLTMyMyw2ICsz
MjMsMTEgQEAgc3RhdGljIGlubGluZSB1aW50NjRfdCBjcHVpZF9wb2xpY3lfeHN0YXRlcyhjb25z
dCBzdHJ1Y3QgY3B1aWRfcG9saWN5ICpwKQogY29uc3QgdWludDMyX3QgKng4Nl9jcHVpZF9sb29r
dXBfZGVlcF9kZXBzKHVpbnQzMl90IGZlYXR1cmUpOwogCiAvKioKKyAqIFJlY2FsY3VsYXRlIHRo
ZSBjb250ZW50IGluIGEgQ1BVSUQgcG9saWN5IHdoaWNoIGlzIGRlcml2ZWQgZnJvbSByYXcgZGF0
YS4KKyAqLwordm9pZCB4ODZfY3B1aWRfcG9saWN5X3JlY2FsY19zeW50aChzdHJ1Y3QgY3B1aWRf
cG9saWN5ICpwKTsKKworLyoqCiAgKiBGaWxsIGEgQ1BVSUQgcG9saWN5IHVzaW5nIHRoZSBuYXRp
dmUgQ1BVSUQgaW5zdHJ1Y3Rpb24uCiAgKgogICogTm8gc2FuaXRpc2F0aW9uIGlzIHBlcmZvcm1l
ZCwgYnV0IHN5bnRoZXNpc2VkIHZhbHVlcyBhcmUgY2FsY3VsYXRlZC4KZGlmZiAtLWdpdCBhL3hl
bi9saWIveDg2L2NwdWlkLmMgYi94ZW4vbGliL3g4Ni9jcHVpZC5jCmluZGV4IDBmOTlmY2IuLjI0
MDRmYTMgMTAwNjQ0Ci0tLSBhL3hlbi9saWIveDg2L2NwdWlkLmMKKysrIGIveGVuL2xpYi94ODYv
Y3B1aWQuYwpAQCAtNTMsOCArNTMsNyBAQCBjb25zdCBjaGFyICp4ODZfY3B1aWRfdmVuZG9yX3Rv
X3N0cih1bnNpZ25lZCBpbnQgdmVuZG9yKQogICAgIH0KIH0KIAotLyogUmVjYWxjdWxhdGUgdGhl
IGNvbnRlbnQgaW4gYSBDUFVJRCBwb2xpY3kgd2hpY2ggaXMgZGVyaXZlZCBmcm9tIHJhdyBkYXRh
LiAqLwotc3RhdGljIHZvaWQgcmVjYWxjdWxhdGVfc3ludGgoc3RydWN0IGNwdWlkX3BvbGljeSAq
cCkKK3ZvaWQgeDg2X2NwdWlkX3BvbGljeV9yZWNhbGNfc3ludGgoc3RydWN0IGNwdWlkX3BvbGlj
eSAqcCkKIHsKICAgICBwLT54ODZfdmVuZG9yID0geDg2X2NwdWlkX2xvb2t1cF92ZW5kb3IoCiAg
ICAgICAgIHAtPmJhc2ljLnZlbmRvcl9lYngsIHAtPmJhc2ljLnZlbmRvcl9lY3gsIHAtPmJhc2lj
LnZlbmRvcl9lZHgpOwpAQCAtMTY3LDcgKzE2Niw3IEBAIHZvaWQgeDg2X2NwdWlkX3BvbGljeV9m
aWxsX25hdGl2ZShzdHJ1Y3QgY3B1aWRfcG9saWN5ICpwKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgcC0+ZXh0ZC5tYXhfbGVhZiArIDEgLSAweDgwMDAwMDAwKTsgKytpICkKICAgICAgICAg
Y3B1aWRfbGVhZigweDgwMDAwMDAwICsgaSwgJnAtPmV4dGQucmF3W2ldKTsKIAotICAgIHJlY2Fs
Y3VsYXRlX3N5bnRoKHApOworICAgIHg4Nl9jcHVpZF9wb2xpY3lfcmVjYWxjX3N5bnRoKHApOwog
fQogCiB2b2lkIHg4Nl9jcHVpZF9wb2xpY3lfY2xlYXJfb3V0X29mX3JhbmdlX2xlYXZlcyhzdHJ1
Y3QgY3B1aWRfcG9saWN5ICpwKQpAQCAtNDYxLDcgKzQ2MCw3IEBAIGludCB4ODZfY3B1aWRfY29w
eV9mcm9tX2J1ZmZlcihzdHJ1Y3QgY3B1aWRfcG9saWN5ICpwLAogICAgICAgICB9CiAgICAgfQog
Ci0gICAgcmVjYWxjdWxhdGVfc3ludGgocCk7CisgICAgeDg2X2NwdWlkX3BvbGljeV9yZWNhbGNf
c3ludGgocCk7CiAKICAgICByZXR1cm4gMDsKIAotLSAKMi4xLjQKCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhl
bi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3Jn
L21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

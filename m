Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 0CB06AD646
	for <lists+xen-devel@lfdr.de>; Mon,  9 Sep 2019 12:05:37 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i7GUX-00016o-V1; Mon, 09 Sep 2019 10:01:49 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=cFqR=XE=bitdefender.com=aisaila@srs-us1.protection.inumbo.net>)
 id 1i7GUW-00016j-Oi
 for xen-devel@lists.xenproject.org; Mon, 09 Sep 2019 10:01:48 +0000
X-Inumbo-ID: d5a42cf8-d2e8-11e9-b76c-bc764e2007e4
Received: from EUR03-DB5-obe.outbound.protection.outlook.com (unknown
 [2a01:111:f400:fe0a::711])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id d5a42cf8-d2e8-11e9-b76c-bc764e2007e4;
 Mon, 09 Sep 2019 10:01:47 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=VaR4W27mrOqWmq8DaZMa7itxTgIvq6jO2odQyx+naLcCkPruz3Rg32RmNYJjomnfOk5wZgAPso9hy1MHSLR71PphK5UcNpiPOISajJWOtq8FLBfNBt5WZSGIPYVMZBLKQQggGyzr+1pkleHGqFqLAdPymz9wP0GdQxTYCZ0xS13VWTXZN6DOQDcftlXo13v7xun6g2KNhx1zENcwLudfRXIdo8GtRtBCHowN+RRDmvY1a+vR/nUh3gNV3GTrnwcc0mD4s/U4Amv8GorXZsR4FEU6eVWGhA7kCfSA4kx2jpCBVMn/cL3B9zU7kBxI5SjlaKJ2skc0m1PIIl5WGPC7cw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=APAe5SpKGpEyMGl06DYiWKd0yIX4zFcUQd5mnvwlyXg=;
 b=OeKFeofRCAM22HccTPoDGMotXkKBA7rgrpUffmHQjSsT2Byg3DPAKWkAcJTKwyAY6m2leISfuqNsrIfYG+NpJuBv5bkQNZc0U2IVZ7qSe979No9QWIoZfuKQux7otwBIhSVYxr4p1obZkCRC8s+qL+q9h30PwNtUlWUVcgwCZW8ugWF79C82woxIH6WJ/wmO3VyX6VniAD/XTl10rLS17Yl1juklPwgN7bQ5IfEWi2nT9BA1i/Bp/kk47c5JT58JotghD2gwOlXfRSixupndE/WQhwpUm8mjK2Q9Jpqq2zQszmzD2DHwM0vfYIe75jsH05mVyZsiTnDM8ChJ1gNvbA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=bitdefender.com; dmarc=pass action=none
 header.from=bitdefender.com; dkim=pass header.d=bitdefender.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=bitdefender.onmicrosoft.com; s=selector2-bitdefender-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=APAe5SpKGpEyMGl06DYiWKd0yIX4zFcUQd5mnvwlyXg=;
 b=wUI5sdKgsr8BOEmwZuS0IHL09TeOb4fEvDYE3yGe7sFqNlYQFlNlwp09x0t36PdX7q2TtuyAKcqwXHUyIKrTMt5zepVReRlL1V3RbjFu68Kin+jNe9XK9XeLw14+PilrqncsfgiBaxhZPfQwb4N08NI2XgOTVFw5M2UZ34PgHAM=
Received: from AM7PR02MB5750.eurprd02.prod.outlook.com (10.141.171.8) by
 AM7PR02MB5832.eurprd02.prod.outlook.com (10.141.173.7) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2241.18; Mon, 9 Sep 2019 10:01:45 +0000
Received: from AM7PR02MB5750.eurprd02.prod.outlook.com
 ([fe80::2d9b:67b0:d407:67b8]) by AM7PR02MB5750.eurprd02.prod.outlook.com
 ([fe80::2d9b:67b0:d407:67b8%2]) with mapi id 15.20.2241.018; Mon, 9 Sep 2019
 10:01:45 +0000
From: Alexandru Stefan ISAILA <aisaila@bitdefender.com>
To: Jan Beulich <jbeulich@suse.com>
Thread-Topic: [PATCH v8] x86/emulate: Send vm_event from emulate
Thread-Index: AQHVYmAUwzAuH5cfgUOJUZVAs8B/2acez52AgARWywA=
Date: Mon, 9 Sep 2019 10:01:45 +0000
Message-ID: <7fca65bb-8936-b8c9-80df-3be4675c7b42@bitdefender.com>
References: <20190903140112.18806-1-aisaila@bitdefender.com>
 <569c7674-4c6e-765a-4071-884bca7d0412@suse.com>
In-Reply-To: <569c7674-4c6e-765a-4071-884bca7d0412@suse.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: PR1PR01CA0033.eurprd01.prod.exchangelabs.com
 (2603:10a6:102::46) To AM7PR02MB5750.eurprd02.prod.outlook.com
 (2603:10a6:20b:102::8)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=aisaila@bitdefender.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [91.199.104.6]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: dd5942d2-91a9-4007-691f-08d7350cb8cf
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600166)(711020)(4605104)(1401327)(2017052603328)(7193020);
 SRVR:AM7PR02MB5832; 
x-ms-traffictypediagnostic: AM7PR02MB5832:|AM7PR02MB5832:|AM7PR02MB5832:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <AM7PR02MB5832F1FBC39ECC0B8377021CABB70@AM7PR02MB5832.eurprd02.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:9508;
x-forefront-prvs: 01559F388D
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(396003)(136003)(346002)(366004)(376002)(39860400002)(52314003)(189003)(199004)(54906003)(25786009)(478600001)(316002)(6486002)(8936002)(486006)(2906002)(11346002)(26005)(186003)(6116002)(3846002)(386003)(53936002)(305945005)(4326008)(256004)(229853002)(6246003)(6512007)(476003)(2616005)(6916009)(31686004)(53546011)(66446008)(71190400001)(64756008)(71200400001)(86362001)(6436002)(66556008)(66476007)(31696002)(6506007)(446003)(5660300002)(66066001)(81166006)(81156014)(7736002)(14444005)(102836004)(99286004)(14454004)(66946007)(8676002)(36756003)(52116002)(76176011)(309714004);
 DIR:OUT; SFP:1102; SCL:1; SRVR:AM7PR02MB5832;
 H:AM7PR02MB5750.eurprd02.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: bitdefender.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: Ev6QWxUqEN9t2HMW2lQqlKM5yYABg3yvsdqv8iQzG5VXW6/xbf0d/8sullmYOTmmFv6YNCjZq7rLOcNkdv2b3/vIG77YjZc1YlyMTXRMWPNTzst0eIz1DVmT7iaV4PCXflBVcfOOut00KoVyUHagx5m4VQnN9xyoX2Rr3cvTDZ1K6m17Mi0zb/R8CxzTSmCRKYY9Evrdn3U07SvyUPBrva3+ucTWmeQYY1qHDcqNh85KA3YwpKUv2EYRFPnqrv4jLPpV0s/SVg5fYl430e5sT91C+lVbzC58S6iM0UStA/IfX3mYkOWrpDaVCGOsDEAuh/5SuS7wyxLAbLQGctnyc5J6zHD8a/qMOhX2Y9yzqyy4E3qTQ1HRY2r70j79IXW1Zf5UWIhDqdy7uDNNkUq5ObFk9Cnhtuh1qlDbobEOiW8=
Content-ID: <1FE1A50B71FE8C4EAD43017693859089@eurprd02.prod.outlook.com>
MIME-Version: 1.0
X-OriginatorOrg: bitdefender.com
X-MS-Exchange-CrossTenant-Network-Message-Id: dd5942d2-91a9-4007-691f-08d7350cb8cf
X-MS-Exchange-CrossTenant-originalarrivaltime: 09 Sep 2019 10:01:45.4676 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 487baf29-f1da-469a-9221-243f830c36f3
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: VuIAiSrLGUKqa3tYdJUmeHmGyePJ/J3ayivKm/1AT9/IcTvMS15m7AhEi5rRVYNWm2BDr/7/8IfNR5TN4AEgRoCgrb6NT9uJiHavl3XAucI=
X-MS-Exchange-Transport-CrossTenantHeadersStamped: AM7PR02MB5832
Subject: Re: [Xen-devel] [PATCH v8] x86/emulate: Send vm_event from emulate
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Petre Ovidiu PIRCALABU <ppircalabu@bitdefender.com>,
 "tamas@tklengyel.com" <tamas@tklengyel.com>, "wl@xen.org" <wl@xen.org>,
 Razvan COJOCARU <rcojocaru@bitdefender.com>,
 "george.dunlap@eu.citrix.com" <george.dunlap@eu.citrix.com>,
 "andrew.cooper3@citrix.com" <andrew.cooper3@citrix.com>,
 "paul.durrant@citrix.com" <paul.durrant@citrix.com>,
 "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>,
 "roger.pau@citrix.com" <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

DQoNCk9uIDA2LjA5LjIwMTkgMTg6NDYsIEphbiBCZXVsaWNoIHdyb3RlOg0KPiBPbiAwMy4wOS4y
MDE5IDE2OjAxLCBBbGV4YW5kcnUgU3RlZmFuIElTQUlMQSB3cm90ZToNCj4+IEEvRCBiaXQgd3Jp
dGVzIChvbiBwYWdlIHdhbGtzKSBjYW4gYmUgY29uc2lkZXJlZCBiZW5pZ24gYnkgYW4gaW50cm9z
cGVjdGlvbg0KPj4gYWdlbnQsIHNvIHJlY2VpdmluZyB2bV9ldmVudHMgZm9yIHRoZW0gaXMgYSBw
ZXNzaW1pemF0aW9uLiBXZSB0cnkgaGVyZSB0bw0KPj4gb3B0aW1pemUgYnkgZmlsdGVyaW5nIHRo
ZXNlIGV2ZW50cyBvdXQuDQo+PiBDdXJyZW50bHksIHdlIGFyZSBmdWxseSBlbXVsYXRpbmcgdGhl
IGluc3RydWN0aW9uIGF0IFJJUCB3aGVuIHRoZSBoYXJkd2FyZSBzZWVzDQo+PiBhbiBFUFQgZmF1
bHQgd2l0aCBucGZlYy5raW5kICE9IG5wZmVjX2tpbmRfd2l0aF9nbGEuIFRoaXMgaXMsIGhvd2V2
ZXIsDQo+PiBpbmNvcnJlY3QsIGJlY2F1c2UgdGhlIGluc3RydWN0aW9uIGF0IFJJUCBtaWdodCBs
ZWdpdGltYXRlbHkgY2F1c2UgYW4NCj4+IEVQVCBmYXVsdCBvZiBpdHMgb3duIHdoaWxlIGFjY2Vz
c2luZyBhIF9kaWZmZXJlbnRfIHBhZ2UgZnJvbSB0aGUgb3JpZ2luYWwgb25lLA0KPj4gd2hlcmUg
QS9EIHdlcmUgc2V0Lg0KPj4gVGhlIHNvbHV0aW9uIGlzIHRvIHBlcmZvcm0gdGhlIHdob2xlIGVt
dWxhdGlvbiwgd2hpbGUgaWdub3JpbmcgRVBUIHJlc3RyaWN0aW9ucw0KPj4gZm9yIHRoZSB3YWxr
IHBhcnQsIGFuZCB0YWtpbmcgdGhlbSBpbnRvIGFjY291bnQgZm9yIHRoZSAiYWN0dWFsIiBlbXVs
YXRpbmcgb2YNCj4+IHRoZSBpbnN0cnVjdGlvbiBhdCBSSVAuIFdoZW4gd2Ugc2VuZCBvdXQgYSB2
bV9ldmVudCwgd2UgZG9uJ3Qgd2FudCB0aGUgZW11bGF0aW9uDQo+PiB0byBjb21wbGV0ZSwgc2lu
Y2UgaW4gdGhhdCBjYXNlIHdlIHdvbid0IGJlIGFibGUgdG8gdmV0byB3aGF0ZXZlciBpdCBpcyBk
b2luZy4NCj4+IFRoYXQgd291bGQgbWVhbiB0aGF0IHdlIGNhbid0IGFjdHVhbGx5IHByZXZlbnQg
YW55IG1hbGljaW91cyBhY3Rpdml0eSwgaW5zdGVhZA0KPj4gd2UnZCBvbmx5IGJlIGFibGUgdG8g
cmVwb3J0IG9uIGl0Lg0KPj4gV2hlbiB3ZSBzZWUgYSAic2VuZC12bV9ldmVudCIgY2FzZSB3aGls
ZSBlbXVsYXRpbmcsIHdlIG5lZWQgdG8gZmlyc3Qgc2VuZCB0aGUNCj4+IGV2ZW50IG91dCBhbmQg
dGhlbiBzdXNwZW5kIHRoZSBlbXVsYXRpb24gKHJldHVybiBYODZFTVVMX1JFVFJZKS4NCj4+IEFm
dGVyIHRoZSBlbXVsYXRpb24gc3RvcHMgd2UnbGwgY2FsbCBodm1fdm1fZXZlbnRfZG9fcmVzdW1l
KCkgYWdhaW4gYWZ0ZXIgdGhlDQo+PiBpbnRyb3NwZWN0aW9uIGFnZW50IHRyZWF0cyB0aGUgZXZl
bnQgYW5kIHJlc3VtZXMgdGhlIGd1ZXN0LiBUaGVyZSwgdGhlDQo+PiBpbnN0cnVjdGlvbiBhdCBS
SVAgd2lsbCBiZSBmdWxseSBlbXVsYXRlZCAod2l0aCB0aGUgRVBUIGlnbm9yZWQpIGlmIHRoZQ0K
Pj4gaW50cm9zcGVjdGlvbiBhcHBsaWNhdGlvbiBhbGxvd3MgaXQsIGFuZCB0aGUgZ3Vlc3Qgd2ls
bCBjb250aW51ZSB0byBydW4gcGFzdA0KPj4gdGhlIGluc3RydWN0aW9uLg0KPj4NCj4+IEEgY29t
bW9uIGV4YW1wbGUgaXMgaWYgdGhlIGhhcmR3YXJlIGV4aXRzIGJlY2F1c2Ugb2YgYW4gRVBUIGZh
dWx0IGNhdXNlZCBieSBhDQo+PiBwYWdlIHdhbGssIHAybV9tZW1fYWNjZXNzX2NoZWNrKCkgZGVj
aWRlcyBpZiBpdCBpcyBnb2luZyB0byBzZW5kIGEgdm1fZXZlbnQuDQo+PiBJZiB0aGUgdm1fZXZl
bnQgd2FzIHNlbnQgYW5kIGl0IHdvdWxkIGJlIHRyZWF0ZWQgc28gaXQgcnVucyB0aGUgaW5zdHJ1
Y3Rpb24NCj4+IGF0IFJJUCwgdGhhdCBpbnN0cnVjdGlvbiBtaWdodCBhbHNvIGhpdCBhIHByb3Rl
Y3RlZCBwYWdlIGFuZCBwcm92b2tlIGEgdm1fZXZlbnQuDQo+Pg0KPj4gTm93IGlmIG5wZmVjLmtp
bmQgIT0gbnBmZWNfa2luZF93aXRoX2dsYSBhbmQgZC0+YXJjaC5tb25pdG9yLmluZ3Vlc3RfcGFn
ZWZhdWx0X2Rpc2FibGVkDQo+PiBpcyB0cnVlIHRoZW4gd2UgYXJlIGluIHRoZSBwYWdlIHdhbGsg
Y2FzZSBhbmQgd2UgY2FuIGRvIHRoaXMgZW11bGF0aW9uIG9wdGltaXphdGlvbg0KPj4gYW5kIGVt
dWxhdGUgdGhlIHBhZ2Ugd2FsayB3aGlsZSBpZ25vcmluZyB0aGUgRVBULCBidXQgZG9uJ3QgaWdu
b3JlIHRoZSBFUFQgZm9yIHRoZQ0KPj4gZW11bGF0aW9uIG9mIHRoZSBhY3R1YWwgaW5zdHJ1Y3Rp
b24uDQo+IA0KPiBJbnN0ZWFkIG9mIGNvbXBhcmluZyBhZ2FpbnN0IG5wZmVjX2tpbmRfd2l0aF9n
bGEsIHdvdWxkbid0IHlvdQ0KPiBiZXR0ZXIgY29tcGFyZSBhZ2FpbnN0IG5wZmVjX2tpbmRfaW5f
Z3B0IHRvIHBvc2l0aXZlbHkgaWRlbnRpZnkNCj4gcGFnZSB0YWJsZSBhY2Nlc3NlcyBieSB0aGUg
Z3Vlc3Q/IEJvdGggVk1YIGFuZCBTVk0gbWF5IGxlYXZlIHRoZQ0KPiBmaWVsZCBhdCBucGZlY19r
aW5kX3Vua25vd24gYWZ0ZXIgYWxsLg0KDQpJIHRoaW5rIGl0IGlzIHNhZmVyIHRvIGNoZWNrIGFn
YWluc3QgbnBmZWNfa2luZF9pbl9ncHQuIEkgaGF2ZSB0byBydW4gDQpzb21lIHRlc3RzIHdpdGgg
dGhpcyBidXQgaXQgbG9va3MgZ29vZCBmcm9tIHRoZSBjb2RlLg0KDQo+IA0KPj4gSW4gdGhlIGZp
cnN0IGNhc2Ugd2Ugd291bGQgaGF2ZSAyIEVQVCBldmVudHMsIGluIHRoZSBzZWNvbmQgY2FzZSB3
ZSB3b3VsZCBoYXZlDQo+PiAxIEVQVCBldmVudCBpZiB0aGUgaW5zdHJ1Y3Rpb24gYXQgdGhlIFJJ
UCB0cmlnZ2VycyBhbiBFUFQgZXZlbnQuDQo+Pg0KPj4gV2UgdXNlIGh2bWVtdWxfbWFwX2xpbmVh
cl9hZGRyKCkgdG8gaW50ZXJjZXB0IHIvdyBhY2Nlc3MgYW5kDQo+PiBfX2h2bV9jb3B5KCkgdG8g
aW50ZXJjZXB0IGV4ZWMgYWNjZXNzLg0KPj4NCj4+IGh2bV9lbXVsYXRlX3NlbmRfdm1fZXZlbnQo
KSBjYW4gcmV0dXJuIGZhbHNlIGlmIHRoZXJlIHdhcyBubyB2aW9sYXRpb24sDQo+PiBpZiB0aGVy
ZSB3YXMgYW4gZXJyb3IgZnJvbSBtb25pdG9yX3RyYXBzKCkgb3IgcDJtX2dldF9tZW1fYWNjZXNz
KCkuDQo+PiBSZXR1cm5pbmcgZmFsc2UgaWYgcDJtX2dldF9tZW1fYWNjZXNzKCkgZmFpbHMgaWYg
dGhlIGVudHJ5IHdhcyBub3QgZm91bmQNCj4+IGluIHRoZSBFUFQgaW4gd2hpY2ggY2FzZSBpdCBp
cyB1bnJlc3RyaWN0ZWQuDQo+IA0KPiBJJ20gYWZyYWlkIEkgY2FuJ3QgaW50ZXJwcmV0IHdoYXQg
dGhlIHNlY29uZCBzZW50ZW5jZSBpcyBzdXBwb3NlZCB0bw0KPiBjbGFyaWZ5Lg0KDQpJdCB3YW50
cyB0byBjbGFyaWZ5IHdoeSByZXR1cm5pbmcgZmFsc2UsIGlmIHAybV9nZXRfbWVtX2FjY2Vzcygp
IGZhaWxzLCANCmlzIG5lZWRlZCBpbiBodm1fZW11bGF0ZV9zZW5kX3ZtX2V2ZW50KCkuIEl0IGlz
IHNvcnQgb2YgdW5jbGVhciBhbmQgaXQgDQpoYXMgdG8gYmUgcmVmb3JtdWxhdGVkIGxpa2UNCg0K
IlJldHVybmluZyBmYWxzZSBpZiBwMm1fZ2V0X21lbV9hY2Nlc3MoKSBmYWlscyBpcyBuZWVkZWQg
YmVjYXVzZSB0aGUgRVBUIA0KZW50cnkgd2lsbCBoYXZlIHJ3eCBtZW1vcnkgYWNjZXNzIHJpZ2h0
cy4iDQoNCj4gDQo+PiBAQCAtNTMxLDYgKzUzMyw3MiBAQCBzdGF0aWMgaW50IGh2bWVtdWxfZG9f
bW1pb19hZGRyKHBhZGRyX3QgbW1pb19ncGEsDQo+PiAgICAgICByZXR1cm4gaHZtZW11bF9kb19p
b19hZGRyKDEsIG1taW9fZ3BhLCByZXBzLCBzaXplLCBkaXIsIGRmLCByYW1fZ3BhKTsNCj4+ICAg
fQ0KPj4gICANCj4+ICsvKg0KPj4gKyAqIFNlbmQgbWVtb3J5IGFjY2VzcyB2bV9ldmVudHMgYmFz
ZWQgb24gcGZlYy4gUmV0dXJucyB0cnVlIGlmIHRoZSBldmVudCB3YXMNCj4+ICsgKiBzZW50IGFu
ZCBmYWxzZSBmb3IgcDJtX2dldF9tZW1fYWNjZXNzKCkgZXJyb3IsIG5vIHZpb2xhdGlvbiBhbmQg
ZXZlbnQgc2VuZA0KPj4gKyAqIGVycm9yLiBBc3N1bWVzIHRoZSBjYWxsZXIgd2lsbCBjaGVjayBh
cmNoLnZtX2V2ZW50LT5zZW5kX2V2ZW50Lg0KPj4gKyAqDQo+PiArICogTk9URTogcDJtX2dldF9t
ZW1fYWNjZXNzKCkgY2FuIGZhaWwgaWYgdGhlIGVudHJ5IHdhcyBub3QgZm91bmQgaW4gdGhlIEVQ
VA0KPj4gKyAqIChpbiB3aGljaCBjYXNlIGFjY2VzcyB0byBpdCBpcyB1bnJlc3RyaWN0ZWQsIHNv
IG5vIHZpb2xhdGlvbnMgY2FuIG9jY3VyKS4NCj4+ICsgKiBJbiB0aGlzIGNhc2VzIGl0IGlzIGZp
bmUgdG8gY29udGludWUgdGhlIGVtdWxhdGlvbi4NCj4+ICsgKi8NCj4+ICtib29sIGh2bV9lbXVs
YXRlX3NlbmRfdm1fZXZlbnQodW5zaWduZWQgbG9uZyBnbGEsIGdmbl90IGdmbiwNCj4+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgcGZlYykNCj4+ICt7DQo+PiArICAg
IHhlbm1lbV9hY2Nlc3NfdCBhY2Nlc3M7DQo+PiArICAgIHZtX2V2ZW50X3JlcXVlc3RfdCByZXEg
PSB7fTsNCj4+ICsgICAgcGFkZHJfdCBncGEgPSAoZ2ZuX3RvX2dhZGRyKGdmbikgfCAoZ2xhICYg
flBBR0VfTUFTSykpOw0KPj4gKw0KPj4gKyAgICBBU1NFUlQoY3VycmVudC0+YXJjaC52bV9ldmVu
dC0+c2VuZF9ldmVudCk7DQo+PiArDQo+PiArICAgIGN1cnJlbnQtPmFyY2gudm1fZXZlbnQtPnNl
bmRfZXZlbnQgPSBmYWxzZTsNCj4+ICsNCj4+ICsgICAgaWYgKCBwMm1fZ2V0X21lbV9hY2Nlc3Mo
Y3VycmVudC0+ZG9tYWluLCBnZm4sICZhY2Nlc3MsDQo+PiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGFsdHAybV92Y3B1X2lkeChjdXJyZW50KSkgIT0gMCApDQo+PiArICAgICAgICByZXR1
cm4gZmFsc2U7DQo+PiArDQo+PiArICAgIHN3aXRjaCAoIGFjY2VzcyApDQo+PiArICAgIHsNCj4+
ICsgICAgY2FzZSBYRU5NRU1fYWNjZXNzX3g6DQo+PiArICAgIGNhc2UgWEVOTUVNX2FjY2Vzc19y
eDoNCj4+ICsgICAgICAgIGlmICggcGZlYyAmIFBGRUNfd3JpdGVfYWNjZXNzICkNCj4+ICsgICAg
ICAgICAgICByZXEudS5tZW1fYWNjZXNzLmZsYWdzID0gTUVNX0FDQ0VTU19SIHwgTUVNX0FDQ0VT
U19XOw0KPj4gKyAgICAgICAgYnJlYWs7DQo+PiArDQo+PiArICAgIGNhc2UgWEVOTUVNX2FjY2Vz
c193Og0KPj4gKyAgICBjYXNlIFhFTk1FTV9hY2Nlc3Nfcnc6DQo+PiArICAgICAgICBpZiAoIHBm
ZWMgJiBQRkVDX2luc25fZmV0Y2ggKQ0KPj4gKyAgICAgICAgICAgIHJlcS51Lm1lbV9hY2Nlc3Mu
ZmxhZ3MgPSBNRU1fQUNDRVNTX1g7DQo+PiArICAgICAgICBicmVhazsNCj4+ICsNCj4+ICsgICAg
Y2FzZSBYRU5NRU1fYWNjZXNzX3I6DQo+PiArICAgIGNhc2UgWEVOTUVNX2FjY2Vzc19uOg0KPj4g
KyAgICAgICAgaWYgKCBwZmVjICYgUEZFQ193cml0ZV9hY2Nlc3MgKQ0KPj4gKyAgICAgICAgICAg
IHJlcS51Lm1lbV9hY2Nlc3MuZmxhZ3MgfD0gTUVNX0FDQ0VTU19SIHwgTUVNX0FDQ0VTU19XOw0K
Pj4gKyAgICAgICAgaWYgKCBwZmVjICYgUEZFQ19pbnNuX2ZldGNoICkNCj4+ICsgICAgICAgICAg
ICByZXEudS5tZW1fYWNjZXNzLmZsYWdzIHw9IE1FTV9BQ0NFU1NfWDsNCj4+ICsgICAgICAgIGJy
ZWFrOw0KPj4gKw0KPj4gKyAgICBjYXNlIFhFTk1FTV9hY2Nlc3Nfd3g6DQo+PiArICAgIGNhc2Ug
WEVOTUVNX2FjY2Vzc19yd3g6DQo+PiArICAgIGNhc2UgWEVOTUVNX2FjY2Vzc19yeDJydzoNCj4+
ICsgICAgY2FzZSBYRU5NRU1fYWNjZXNzX24ycnd4Og0KPj4gKyAgICBjYXNlIFhFTk1FTV9hY2Nl
c3NfZGVmYXVsdDoNCj4+ICsgICAgICAgIGJyZWFrOw0KPj4gKyAgICB9DQo+PiArDQo+PiArICAg
IGlmICggIXJlcS51Lm1lbV9hY2Nlc3MuZmxhZ3MgKQ0KPj4gKyAgICAgICAgcmV0dXJuIGZhbHNl
OyAvKiBubyB2aW9sYXRpb24gKi8NCj4+ICsNCj4+ICsgICAgcmVxLnJlYXNvbiA9IFZNX0VWRU5U
X1JFQVNPTl9NRU1fQUNDRVNTOw0KPj4gKyAgICByZXEudS5tZW1fYWNjZXNzLmdmbiA9IGdmbl94
KGdmbik7DQo+PiArICAgIHJlcS51Lm1lbV9hY2Nlc3MuZmxhZ3MgfD0gTUVNX0FDQ0VTU19GQVVM
VF9XSVRIX0dMQSB8IE1FTV9BQ0NFU1NfR0xBX1ZBTElEOw0KPj4gKyAgICByZXEudS5tZW1fYWNj
ZXNzLmdsYSA9IGdsYTsNCj4+ICsgICAgcmVxLnUubWVtX2FjY2Vzcy5vZmZzZXQgPSBncGEgJiB+
UEFHRV9NQVNLOw0KPj4gKw0KPj4gKyAgICByZXR1cm4gbW9uaXRvcl90cmFwcyhjdXJyZW50LCB0
cnVlLCAmcmVxKSA+PSAwOw0KPj4gK30NCj4gDQo+IFNpbmNlIGl0J3Mgbm9uLXN0YXRpYyBhbnl3
YXksIHdvdWxkbid0IHRoaXMgYmV0dGVyIGxpdmUgaW4NCj4gaHZtL3ZtX2V2ZW50LmMsIHB1dHRp
bmcgaXQgdW5kZXIgVk0gRVZFTlQgbWFpbnRhaW5lcnNoaXA/IEluIGFueQ0KPiBldmVudCBJIGRv
bid0IGZlZWwgcXVhbGlmaWVkIGV2ZW50dWFsbHkgZ2l2aW5nIGFuIGFjayBmb3IgdGhpcw0KPiBm
dW5jdGlvbi4NCg0KSSBhZ3JlZSwgSSB3aWxsIG1vdmUgaXQgaW4gdm1fZXZlbnQuYy4NCg0KPiAN
Cj4+IEBAIC01NDQsMTAgKzYxMiwxMSBAQCBzdGF0aWMgdm9pZCAqaHZtZW11bF9tYXBfbGluZWFy
X2FkZHIoDQo+PiAgICAgICBzdHJ1Y3QgaHZtX2VtdWxhdGVfY3R4dCAqaHZtZW11bF9jdHh0KQ0K
Pj4gICB7DQo+PiAgICAgICBzdHJ1Y3QgdmNwdSAqY3VyciA9IGN1cnJlbnQ7DQo+PiAtICAgIHZv
aWQgKmVyciwgKm1hcHBpbmc7DQo+PiArICAgIHZvaWQgKmVyciA9IE5VTEwsICptYXBwaW5nOw0K
Pj4gICAgICAgdW5zaWduZWQgaW50IG5yX2ZyYW1lcyA9ICgobGluZWFyICsgYnl0ZXMgLSAhIWJ5
dGVzKSA+PiBQQUdFX1NISUZUKSAtDQo+PiAgICAgICAgICAgKGxpbmVhciA+PiBQQUdFX1NISUZU
KSArIDE7DQo+PiAgICAgICB1bnNpZ25lZCBpbnQgaTsNCj4+ICsgICAgZ2ZuX3QgZ2ZuOw0KPj4g
ICANCj4+ICAgICAgIC8qDQo+PiAgICAgICAgKiBtZm4gcG9pbnRzIHRvIHRoZSBuZXh0IGZyZWUg
c2xvdC4gIEFsbCB1c2VkIHNsb3RzIGhhdmUgYSBwYWdlIHJlZmVyZW5jZQ0KPj4gQEAgLTU4Miw3
ICs2NTEsNyBAQCBzdGF0aWMgdm9pZCAqaHZtZW11bF9tYXBfbGluZWFyX2FkZHIoDQo+PiAgICAg
ICAgICAgQVNTRVJUKG1mbl94KCptZm4pID09IDApOw0KPj4gICANCj4+ICAgICAgICAgICByZXMg
PSBodm1fdHJhbnNsYXRlX2dldF9wYWdlKGN1cnIsIGFkZHIsIHRydWUsIHBmZWMsDQo+PiAtICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZwZmluZm8sICZwYWdlLCBOVUxMLCAm
cDJtdCk7DQo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZwZmluZm8s
ICZwYWdlLCAmZ2ZuLCAmcDJtdCk7DQo+PiAgIA0KPj4gICAgICAgICAgIHN3aXRjaCAoIHJlcyAp
DQo+PiAgICAgICAgICAgew0KPj4gQEAgLTU5Niw3ICs2NjUsNiBAQCBzdGF0aWMgdm9pZCAqaHZt
ZW11bF9tYXBfbGluZWFyX2FkZHIoDQo+PiAgICAgICAgICAgICAgIGdvdG8gb3V0Ow0KPj4gICAN
Cj4+ICAgICAgICAgICBjYXNlIEhWTVRSQU5TX2JhZF9nZm5fdG9fbWZuOg0KPj4gLSAgICAgICAg
ICAgIGVyciA9IE5VTEw7DQo+PiAgICAgICAgICAgICAgIGdvdG8gb3V0Ow0KPj4gICANCj4+ICAg
ICAgICAgICBjYXNlIEhWTVRSQU5TX2dmbl9wYWdlZF9vdXQ6DQo+PiBAQCAtNjE5LDE0ICs2ODcs
MTkgQEAgc3RhdGljIHZvaWQgKmh2bWVtdWxfbWFwX2xpbmVhcl9hZGRyKA0KPj4gICAgICAgICAg
ICAgICB9DQo+PiAgIA0KPj4gICAgICAgICAgICAgICBpZiAoIHAybXQgPT0gcDJtX2lvcmVxX3Nl
cnZlciApDQo+PiAtICAgICAgICAgICAgew0KPj4gLSAgICAgICAgICAgICAgICBlcnIgPSBOVUxM
Ow0KPj4gICAgICAgICAgICAgICAgICAgZ290byBvdXQ7DQo+PiAtICAgICAgICAgICAgfQ0KPj4g
ICANCj4+ICAgICAgICAgICAgICAgQVNTRVJUKHAybXQgPT0gcDJtX3JhbV9sb2dkaXJ0eSB8fCAh
cDJtX2lzX3JlYWRvbmx5KHAybXQpKTsNCj4+ICAgICAgICAgICB9DQo+PiArDQo+PiArICAgICAg
ICBpZiAoIGN1cnItPmFyY2gudm1fZXZlbnQgJiYNCj4gDQo+IEp1c3QgbGlrZSB5b3UgaGF2ZSBp
biBfX2h2bV9jb3B5KCksIG1heSBJIGFzayBmb3IgdW5saWtlbHkoKSBoZXJlPw0KDQpJIHdpbGwg
YWRkIHRoaXMuDQoNCj4gDQo+PiArICAgICAgICAgICAgIGN1cnItPmFyY2gudm1fZXZlbnQtPnNl
bmRfZXZlbnQgJiYNCj4+ICsgICAgICAgICAgICAgaHZtX2VtdWxhdGVfc2VuZF92bV9ldmVudChh
ZGRyLCBnZm4sIHBmZWMpICkNCj4+ICsgICAgICAgICAgICBlcnIgPSBFUlJfUFRSKH5YODZFTVVM
X1JFVFJZKTsNCj4gDQo+IEluIHRoZSBkZXNjcmlwdGlvbiB5b3Ugc2F5IHRoaXMgdGFrZXMgY2Fy
ZSBvZiByL3csIGFuZCBfX2h2bV9jb3B5KCkNCj4gdGFrZXMgY2FyZSBvZiBleGVjLCBidXQgdGhl
IGZ1bmN0aW9uIHdlJ3JlIGluIGRvZXNuJ3QgZ2V0IGNhbGxlZA0KPiBvbiB0aGUgcmVhZCBwYXRo
IChidXQgaXQgbWF5IGJlIGRvd24gdGhlIHJvYWQpLiBBZGRpdGlvbmFsbHkgdGhlDQo+IGZ1bmN0
aW9uIG5vdyBhbHNvIGdldHMgY2FsbGVkIGZyb20gaHZtZW11bF9jYWNoZV9vcCgpLCB3aGljaCBJ
J20NCj4gbm90IHN1cmUgeW91IGFjdHVhbGx5IHdhbnQgdG8gc2VuZCBldmVudHMgZm9yLg0KDQpJ
IHdhcyBhaW1pbmcgZm9yIGh2bWVtdWxfd3JpdGUvaHZtZW11bF9ybXcgYnV0IGlmIGEgYWNjZXNz
IGVycm9yIG9jY3VycyANCndoZW4gdGhlIG9wdGlvbiAoY3Vyci0+YXJjaC52bV9ldmVudC0+c2Vu
ZF9ldmVudCkgaXMgYWN0aXZlLCBJTU8gaXQgaXMgDQpvayB0byBzZW5kIGEgdm1fZXZlbnQuIERv
ZXNuJ3QgbWF0dGVyIHdoZXJlIGl0IG9yaWdpbmF0ZWQuDQoNCj4gDQo+PiAgICAgICB9DQo+PiAr
ICAgIC8qIENoZWNrIGlmIGVueSB2bV9ldmVudCB3YXMgc2VudCAqLw0KPiANCj4gImFueSIgYW5k
IHBsZWFzZSBhZGQgYmxhbmsgbGluZSBhaGVhZCBvZiB5b3VyIGFkZGl0aW9uLg0KDQpJIHdpbGwg
Y29ycmVjdCB0aGlzLg0KDQo+IA0KPj4gKyAgICBpZiAoIGVyciApDQo+PiArICAgICAgICBnb3Rv
IG91dDsNCj4gDQo+IEFuZCB3YWl0IC0gd2h5IGRvZXMgdGhpcyBzaXQgYWZ0ZXIgdGhlIGxvb3A/
IElzIHRoYXQgYSByZS1iYXNpbmcNCj4gbWlzdGFrZSBmcm9tIHdoZW4geW91IGhhZCBwdXQgb24g
dG9wIG9mIG15IHVuY29tbWl0dGVkIHBhdGNoPw0KDQpUaGlzIGlzIGRvbmUgdG8gc2tpcCB0aGUg
bWFwcGluZyBwYXJ0IGRvd24gdGhlIGxpbmUuIElmIHRoZXJlIGlzIGFuIA0KZXJyb3IgdGhlbiB3
ZSBoYXZlIHRvIHJldHVybiBfaXRfIGFuZCBub3QgdGhlIG1hcHBpbmcuDQoNCj4gDQo+PiAtLS0g
YS94ZW4vYXJjaC94ODYvaHZtL2h2bS5jDQo+PiArKysgYi94ZW4vYXJjaC94ODYvaHZtL2h2bS5j
DQo+PiBAQCAtMzIyNCw2ICszMjI0LDE0IEBAIHN0YXRpYyBlbnVtIGh2bV90cmFuc2xhdGlvbl9y
ZXN1bHQgX19odm1fY29weSgNCj4+ICAgICAgICAgICAgICAgcmV0dXJuIEhWTVRSQU5TX2JhZF9n
Zm5fdG9fbWZuOw0KPj4gICAgICAgICAgIH0NCj4+ICAgDQo+PiArICAgICAgICBpZiAoIHVubGlr
ZWx5KHYtPmFyY2gudm1fZXZlbnQpICYmDQo+PiArICAgICAgICAgICAgIHYtPmFyY2gudm1fZXZl
bnQtPnNlbmRfZXZlbnQgJiYNCj4+ICsgICAgICAgICAgICAgaHZtX2VtdWxhdGVfc2VuZF92bV9l
dmVudChhZGRyLCBnZm4sIHBmZWMpICkNCj4+ICsgICAgICAgIHsNCj4+ICsgICAgICAgICAgICBw
dXRfcGFnZShwYWdlKTsNCj4+ICsgICAgICAgICAgICByZXR1cm4gSFZNVFJBTlNfZ2ZuX3BhZ2Vk
X291dDsNCj4+ICsgICAgICAgIH0NCj4gDQo+IEknbSBwcmV0dHkgc3VyZSBJIGhhZCBwcmV2aW91
c2x5IGFza2VkIGZvciB0aGVyZSB0byBlaXRoZXIgYmUNCj4gYSBjaGFuZ2UgdG8gdGhlIHJldHVy
biB2YWx1ZSwgb3IgZm9yIHRoZXJlIHRvIGJlIGEgY29tbWVudA0KPiBqdXN0aWZ5aW5nIHRoZSAo
YXBwYXJlbnQpIGFidXNlIG9mIHRoZSBvbmUgdXNlZC4NCg0KU29ycnkgZm9yIG5vdCBjbGFyaWZ5
aW5nIHRoaXMgaW4gdGhlIGxhc3QgdmVyc2lvbi4gSSBsb29rZWQgbm93IGFuZCBJIA0KbWlzc2Vk
IHRvIHJlc3BvbmQuIEkgcmV0dXJuICBIVk1UUkFOU19nZm5fcGFnZWRfb3V0IHNvIHRoYXQgbGF0
ZXIgaXQgDQp3aWxsIGJlIHRyZWF0ZWQgYW5kIHJldHVybiBYODZFTVVMX1JFVFJZLg0KX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxp
bmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5w
cm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

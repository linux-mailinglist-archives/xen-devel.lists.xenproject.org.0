Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id E57BB2273D6
	for <lists+xen-devel@lfdr.de>; Tue, 21 Jul 2020 02:36:37 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jxgGB-00022E-Dx; Tue, 21 Jul 2020 00:35:55 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.92) (envelope-from
 <SRS0=Ynct=BA=gmail.com=rosbrookn@srs-us1.protection.inumbo.net>)
 id 1jxgGA-000229-29
 for xen-devel@lists.xenproject.org; Tue, 21 Jul 2020 00:35:54 +0000
X-Inumbo-ID: 21fdb0ac-caea-11ea-84d6-bc764e2007e4
Received: from mail-il1-x12b.google.com (unknown [2607:f8b0:4864:20::12b])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 21fdb0ac-caea-11ea-84d6-bc764e2007e4;
 Tue, 21 Jul 2020 00:35:53 +0000 (UTC)
Received: by mail-il1-x12b.google.com with SMTP id e18so14936120ilr.7
 for <xen-devel@lists.xenproject.org>; Mon, 20 Jul 2020 17:35:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=date:from:to:cc:subject:message-id:mime-version:content-disposition
 :user-agent; bh=uTQPS0B/n4Yh4+Qk46RF1Bz/u49XaDIC+VFbdKpKK1c=;
 b=A4XF5nTMvJxQ6C1Ph0NgG9veoLwV5SXUcvpvR9nrVozcsXqoPWA8W8a653kgRW7Z37
 MSiykVktkkV8hpQyln2DE8i1Z0mrkaxrsdBs507SrbHB87UUnD6M4K0R/14p5CEu+ROe
 GyyesWoviNpQkDtZI8azFi1V99IMmPlGYpgg55j63I8AG+VsQqaW5iO3D4URfT8RRIpU
 wmQW4wEXW07U/7mE9vmXDjEKihxUt5himc4OGtgqpPeKUikUUxFRJL6reqPeaABkfYlf
 bCqtkSzA1msM++0cZOGEl/INYmythaf1tN3KN9M6fdAkcr8IYlWcCbQnwQ0W9FMhveT4
 EgaA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:mime-version
 :content-disposition:user-agent;
 bh=uTQPS0B/n4Yh4+Qk46RF1Bz/u49XaDIC+VFbdKpKK1c=;
 b=RNr6H6rahHl+1eeaZj/lwN95GBbgXo48QVoQn6sfAtOcawal38dkBj1nqJZtt2ALQu
 P6quLZX0Dwv0osgOfPMXEmYrEwZtMrIh9dDIMcrxJRcRj4/tuVwaJaqhT13q1ibmh8zC
 KJx1T4G0dgwtxb6RvEo8C0Z4MRAURkQIXzCDsLGFUWxAW5+pRjRTv8JGAUnsIEakHyyd
 kRld5SSmUBA7RJONgMWAMvk+AmPuSC+Isry03DEV+lKNtpszbUMUqpZjxTiBsjqwDq/c
 ztWRZ+6xJQGRnVefe0pNaGIFPmKom4t3y6AixNtXmaOoZSBXTzmnBAznH0yfKlVSqWk9
 3OOw==
X-Gm-Message-State: AOAM533FRlRtQCVXG4UKttxTWFO3XWWEitTD0uLCc5RJNnZLjHuBnZF2
 3X/ADOyaq8x9pt4oDoMcWOBuZTMHEPA=
X-Google-Smtp-Source: ABdhPJyP3lG+aoAc09hvlGxI22W14Jp4RcKLPImmlW5rQIRp7ET8iVoyJh9yXIKDSrH3hvsXk9c3YQ==
X-Received: by 2002:a92:bac4:: with SMTP id t65mr27348514ill.138.1595291752280; 
 Mon, 20 Jul 2020 17:35:52 -0700 (PDT)
Received: from six (cpe-67-241-56-252.twcny.res.rr.com. [67.241.56.252])
 by smtp.gmail.com with ESMTPSA id v4sm9618467ilo.44.2020.07.20.17.35.50
 (version=TLS1_2 cipher=ECDHE-ECDSA-CHACHA20-POLY1305 bits=256/256);
 Mon, 20 Jul 2020 17:35:51 -0700 (PDT)
Date: Mon, 20 Jul 2020 20:35:48 -0400
From: Nick Rosbrook <rosbrookn@gmail.com>
To: xen-devel@lists.xenproject.org
Subject: Golang design session follow-up
Message-ID: <20200721003548.GA9581@six>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.9.4 (2018-02-28)
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: rosbrookn@ainfosec.com, ian.jackson@eu.citrix.com, george.dunlap@citrix.com
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Hello,

Here are the notes from the golang bindings design session at Xen Summit
earlier this month:

  Possible improvements: 
    - Expanding the IDL to have information about device add / remove functions
    
    Ian: It's important that the IDL generates the C prototypes as well.

    We could generate some man pages as well.
    
    "AO" functions need to be a separate thing, not just listed as arguments.
    
    How to distinguish between "easy to wrap" things vs "this is internal infrastructure"
  
    Idea: "Classes" in IDL: "Device add/remove function", &c

    Rust: Probably want two versions of the bindings; sync and async. Same thing for python.
  
  # Notification of events

    We don't want a golang wrapper for the sigchld callback

    Helper function to "do the domain shutdown thing"
  
  # Long-term home of the package
  
    Ian: Autogenerated stuff is becoming more annoying.

    Delete all the libxl auto-generated stuff from staging & master, and have "output branch".

    The reason we have these in-tree is that otherwise you can't build *from git* if you don't 
    have new enough versions of the right tools.

    Distribution: Make a repo on xenbits!

Our main focus for "improvements" was on expanding the libxl IDL to support
function prototypes so that wrappers could be easily generated. I
volunteered to work on this front, and have started some patches that I
will send in an RFC state soon (likely after 4.14 is released).

On "notification of events", I think we were just discussing what needs
to be done for the xenlight package to support domain
destruction/reaping. This is also something I will work on.

Finally, we came to the decision that the golang bindings should be
pushed to their own repo and tagged independently of xen.git. I think
tasks still need to be divvied up for this one.

If I missed anything important or made any mistakes, please let me know.

Thanks,
NR


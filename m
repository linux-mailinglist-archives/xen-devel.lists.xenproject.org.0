Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id A596D4AEAB
	for <lists+xen-devel@lfdr.de>; Wed, 19 Jun 2019 01:22:31 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hdNOt-0004sC-RC; Tue, 18 Jun 2019 23:20:27 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=PyOf=UR=kernel.org=sstabellini@srs-us1.protection.inumbo.net>)
 id 1hdNOr-0004rZ-Lt
 for xen-devel@lists.xenproject.org; Tue, 18 Jun 2019 23:20:25 +0000
X-Inumbo-ID: a652754a-921f-11e9-add7-5fd5842afd59
Received: from mail.kernel.org (unknown [198.145.29.99])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id a652754a-921f-11e9-add7-5fd5842afd59;
 Tue, 18 Jun 2019 23:20:24 +0000 (UTC)
Received: from sstabellini-ThinkPad-T480s.hsd1.ca.comcast.net
 (c-67-164-102-47.hsd1.ca.comcast.net [67.164.102.47])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id D935F20873;
 Tue, 18 Jun 2019 23:20:23 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=default; t=1560900024;
 bh=yVZQzkQok0gYAhrEXWpnxZitVqiKzT0k9xmVq1U4JHU=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=ZL6DeuNm+TuEG2Kkc5hgUWQcrYUc8CdNWKe5ErvmFgDF9eGWonMvQCGLdIG2G9jX/
 5nzGN6cg03O3NDf464QmA7eJM9MYXCwxdaWSP/z2tkoxq7nhIrN2d9+oqOhJluXLuN
 7rTIcPDgJJF3lFpXsm4lykJEo2W0nvLYAKaGPgck=
From: Stefano Stabellini <sstabellini@kernel.org>
To: xen-devel@lists.xenproject.org
Date: Tue, 18 Jun 2019 16:20:15 -0700
Message-Id: <20190618232019.26425-1-sstabellini@kernel.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <alpine.DEB.2.21.1906181618130.2072@sstabellini-ThinkPad-T480s>
References: <alpine.DEB.2.21.1906181618130.2072@sstabellini-ThinkPad-T480s>
Subject: [Xen-devel] [PATCH v3 1/5] xen: add a p2mt parameter to
 map_mmio_regions
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <stefanos@xilinx.com>, julien.grall@arm.com,
 sstabellini@kernel.org, JBeulich@suse.com, andrew.cooper3@citrix.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QWRkIGEgcDJtdCBwYXJhbWV0ZXIgdG8gbWFwX21taW9fcmVnaW9ucywgcGFzcyBwMm1fbW1pb19k
aXJlY3RfZGV2IG9uCkFSTSBhbmQgcDJtX21taW9fZGlyZWN0IG9uIHg4NiAtLSBubyBjaGFuZ2Vz
IGluIGJlaGF2aW9yLiBPbiB4ODYsCmludHJvZHVjZSBhIG1hY3JvIHRvIHN0cmlwIGF3YXkgdGhl
IGxhc3QgcGFyYW1ldGVyIGFuZCByZW5hbWUgdGhlCmV4aXN0aW5nIGltcGxlbWVudGF0aW9uIG9m
IG1hcF9tbWlvX3JlZ2lvbnMgdG8gX19tYXBfbW1pb19yZWdpb25zLgpVc2UgX19tYXBfbW1pb19y
ZWdpb25zIGluIHZwY2kgYXMgaXQgaXMgeDg2LW9ubHkgdG9kYXkuCgpPbiBBUk0sIGdpdmVuIHRo
ZSBzaW1pbGFyaXR5IGJldHdlZW4gbWFwX21taW9fcmVnaW9ucyBhZnRlciB0aGUgY2hhbmdlCmFu
ZCBtYXBfcmVnaW9uc19wMm10LCByZW1vdmUgdW4vbWFwX3JlZ2lvbnNfcDJtdC4gQWxzbyBhZGQg
YW4gQVNTRVJUIHRvCmNoZWNrIHRoYXQgb25seSBwMm1fbW1pb18qIHR5cGVzIGFyZSBwYXNzZWQg
dG8gaXQuCgpBbHNvIGZpeCB0aGUgc3R5bGUgb2YgdGhlIGNvbW1lbnQgb24gdG9wIG9mIG1hcF9t
bWlvX3JlZ2lvbnMgc2luY2Ugd2UKYXJlIGF0IGl0LgoKU2lnbmVkLW9mZi1ieTogU3RlZmFubyBT
dGFiZWxsaW5pIDxzdGVmYW5vc0B4aWxpbnguY29tPgpDQzogSkJldWxpY2hAc3VzZS5jb20KQ0M6
IGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20KLS0tCkNoYW5nZXMgaW4gdjM6Ci0gY29kZSBzdHls
ZQotIGludHJvZHVjZSBfX21hcF9tbWlvX3JlZ2lvbnMgb24geDg2Ci0gZml4IGNvbW1lbnQgc3R5
bGUgb24gdG9wIG9mIG1hcF9tbWlvX3JlZ2lvbnMKLSBhZGQgYW4gYXNzZXJ0IG9uIGFsbG93ZWQg
cDJtdCB0eXBlcyBpbiBtYXBfbW1pb19yZWdpb25zCgpDaGFuZ2VzIGluIHYyOgotIG5ldyBwYXRj
aAotLS0KIHhlbi9hcmNoL2FybS9hY3BpL2RvbWFpbl9idWlsZC5jIHwgIDQgKystLQogeGVuL2Fy
Y2gvYXJtL2RvbWFpbl9idWlsZC5jICAgICAgfCAgMiArLQogeGVuL2FyY2gvYXJtL2dpYy12Mi5j
ICAgICAgICAgICAgfCAgMyArKy0KIHhlbi9hcmNoL2FybS9wMm0uYyAgICAgICAgICAgICAgIHwg
MjEgKysrKy0tLS0tLS0tLS0tLS0tLS0tCiB4ZW4vYXJjaC9hcm0vcGxhdGZvcm1zL2V4eW5vczUu
YyB8ICA2ICsrKystLQogeGVuL2FyY2gvYXJtL3BsYXRmb3Jtcy9vbWFwNS5jICAgfCAxMiArKysr
KysrKy0tLS0KIHhlbi9hcmNoL2FybS90cmFwcy5jICAgICAgICAgICAgIHwgIDIgKy0KIHhlbi9h
cmNoL2FybS92Z2ljLXYyLmMgICAgICAgICAgIHwgIDIgKy0KIHhlbi9hcmNoL2FybS92Z2ljL3Zn
aWMtdjIuYyAgICAgIHwgIDIgKy0KIHhlbi9hcmNoL3g4Ni9odm0vZG9tMF9idWlsZC5jICAgIHwg
IDIgKy0KIHhlbi9hcmNoL3g4Ni9tbS9wMm0uYyAgICAgICAgICAgIHwgIDggKysrKy0tLS0KIHhl
bi9jb21tb24vZG9tY3RsLmMgICAgICAgICAgICAgIHwgIDcgKysrKysrLQogeGVuL2RyaXZlcnMv
dnBjaS9oZWFkZXIuYyAgICAgICAgfCAgMiArLQogeGVuL2luY2x1ZGUvYXNtLWFybS9wMm0uaCAg
ICAgICAgfCAxNSAtLS0tLS0tLS0tLS0tLS0KIHhlbi9pbmNsdWRlL2FzbS14ODYvcDJtLmggICAg
ICAgIHwgIDggKysrKysrKysKIHhlbi9pbmNsdWRlL3hlbi9wMm0tY29tbW9uLmggICAgIHwgMTEg
KysrKysrKy0tLS0KIDE2IGZpbGVzIGNoYW5nZWQsIDUxIGluc2VydGlvbnMoKyksIDU2IGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL2FybS9hY3BpL2RvbWFpbl9idWlsZC5jIGIv
eGVuL2FyY2gvYXJtL2FjcGkvZG9tYWluX2J1aWxkLmMKaW5kZXggNWFhZTMyYWMyMC4uZjRhYzkx
Y2RhYyAxMDA2NDQKLS0tIGEveGVuL2FyY2gvYXJtL2FjcGkvZG9tYWluX2J1aWxkLmMKKysrIGIv
eGVuL2FyY2gvYXJtL2FjcGkvZG9tYWluX2J1aWxkLmMKQEAgLTE5Myw3ICsxOTMsNyBAQCBzdGF0
aWMgdm9pZCBfX2luaXQgYWNwaV9tYXBfb3RoZXJfdGFibGVzKHN0cnVjdCBkb21haW4gKmQpCiAg
ICAgewogICAgICAgICBhZGRyID0gYWNwaV9nYmxfcm9vdF90YWJsZV9saXN0LnRhYmxlc1tpXS5h
ZGRyZXNzOwogICAgICAgICBzaXplID0gYWNwaV9nYmxfcm9vdF90YWJsZV9saXN0LnRhYmxlc1tp
XS5sZW5ndGg7Ci0gICAgICAgIHJlcyA9IG1hcF9yZWdpb25zX3AybXQoZCwKKyAgICAgICAgcmVz
ID0gbWFwX21taW9fcmVnaW9ucyhkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdh
ZGRyX3RvX2dmbihhZGRyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQRk5fVVAo
c2l6ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFkZHJfdG9fbWZuKGFkZHIp
LApAQCAtNTQ3LDcgKzU0Nyw3IEBAIGludCBfX2luaXQgcHJlcGFyZV9hY3BpKHN0cnVjdCBkb21h
aW4gKmQsIHN0cnVjdCBrZXJuZWxfaW5mbyAqa2luZm8pCiAgICAgYWNwaV9jcmVhdGVfZWZpX21t
YXBfdGFibGUoZCwgJmtpbmZvLT5tZW0sIHRibF9hZGQpOwogCiAgICAgLyogTWFwIHRoZSBFRkkg
YW5kIEFDUEkgdGFibGVzIHRvIERvbTAgKi8KLSAgICByYyA9IG1hcF9yZWdpb25zX3AybXQoZCwK
KyAgICByYyA9IG1hcF9tbWlvX3JlZ2lvbnMoZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAg
Z2FkZHJfdG9fZ2ZuKGQtPmFyY2guZWZpX2FjcGlfZ3BhKSwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgUEZOX1VQKGQtPmFyY2guZWZpX2FjcGlfbGVuKSwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdmlydF90b19tZm4oZC0+YXJjaC5lZmlfYWNwaV90YWJsZSksCmRpZmYgLS1naXQgYS94
ZW4vYXJjaC9hcm0vZG9tYWluX2J1aWxkLmMgYi94ZW4vYXJjaC9hcm0vZG9tYWluX2J1aWxkLmMK
aW5kZXggZDk4MzY3NzlkMS4uMWY4MDhiMmZmMSAxMDA2NDQKLS0tIGEveGVuL2FyY2gvYXJtL2Rv
bWFpbl9idWlsZC5jCisrKyBiL3hlbi9hcmNoL2FybS9kb21haW5fYnVpbGQuYwpAQCAtMTE3MSw3
ICsxMTcxLDcgQEAgc3RhdGljIGludCBfX2luaXQgbWFwX3JhbmdlX3RvX2RvbWFpbihjb25zdCBz
dHJ1Y3QgZHRfZGV2aWNlX25vZGUgKmRldiwKIAogICAgIGlmICggbmVlZF9tYXBwaW5nICkKICAg
ICB7Ci0gICAgICAgIHJlcyA9IG1hcF9yZWdpb25zX3AybXQoZCwKKyAgICAgICAgcmVzID0gbWFw
X21taW9fcmVnaW9ucyhkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhZGRyX3Rv
X2dmbihhZGRyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQRk5fVVAobGVuKSwK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWRkcl90b19tZm4oYWRkciksCmRpZmYg
LS1naXQgYS94ZW4vYXJjaC9hcm0vZ2ljLXYyLmMgYi94ZW4vYXJjaC9hcm0vZ2ljLXYyLmMKaW5k
ZXggMjU2OTg4YzY2NS4uZDJlZjM2MWZjNyAxMDA2NDQKLS0tIGEveGVuL2FyY2gvYXJtL2dpYy12
Mi5jCisrKyBiL3hlbi9hcmNoL2FybS9naWMtdjIuYwpAQCAtNzAxLDcgKzcwMSw4IEBAIHN0YXRp
YyBpbnQgZ2ljdjJfbWFwX2h3ZG93bl9leHRyYV9tYXBwaW5ncyhzdHJ1Y3QgZG9tYWluICpkKQog
CiAgICAgICAgIHJldCA9IG1hcF9tbWlvX3JlZ2lvbnMoZCwgZ2FkZHJfdG9fZ2ZuKHYybV9kYXRh
LT5hZGRyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQRk5fVVAodjJtX2RhdGEt
PnNpemUpLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hZGRyX3RvX21mbih2Mm1f
ZGF0YS0+YWRkcikpOworICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hZGRyX3RvX21m
bih2Mm1fZGF0YS0+YWRkciksCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcDJtX21t
aW9fZGlyZWN0X2Rldik7CiAgICAgICAgIGlmICggcmV0ICkKICAgICAgICAgewogICAgICAgICAg
ICAgcHJpbnRrKFhFTkxPR19FUlIgIkdJQ3YyOiBNYXAgdjJtIGZyYW1lIHRvIGQlZCBmYWlsZWQu
XG4iLApkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL3AybS5jIGIveGVuL2FyY2gvYXJtL3AybS5j
CmluZGV4IGUyOGVhMWM4NWEuLmQ4OGRmMTFlMDkgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL2FybS9w
Mm0uYworKysgYi94ZW4vYXJjaC9hcm0vcDJtLmMKQEAgLTEzMTAsMzEgKzEzMTAsMTggQEAgc3Rh
dGljIGlubGluZSBpbnQgcDJtX3JlbW92ZV9tYXBwaW5nKHN0cnVjdCBkb21haW4gKmQsCiAgICAg
cmV0dXJuIHJjOwogfQogCi1pbnQgbWFwX3JlZ2lvbnNfcDJtdChzdHJ1Y3QgZG9tYWluICpkLAor
aW50IG1hcF9tbWlvX3JlZ2lvbnMoc3RydWN0IGRvbWFpbiAqZCwKICAgICAgICAgICAgICAgICAg
ICAgIGdmbl90IGdmbiwKICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgbnIsCiAg
ICAgICAgICAgICAgICAgICAgICBtZm5fdCBtZm4sCiAgICAgICAgICAgICAgICAgICAgICBwMm1f
dHlwZV90IHAybXQpCiB7CisgICAgQVNTRVJUKCBwMm10ID09IHAybV9tbWlvX2RpcmVjdF9kZXYg
fHwKKyAgICAgICAgICAgIHAybXQgPT0gcDJtX21taW9fZGlyZWN0X25jIHx8CisgICAgICAgICAg
ICBwMm10ID09IHAybV9tbWlvX2RpcmVjdF9jICk7CiAgICAgcmV0dXJuIHAybV9pbnNlcnRfbWFw
cGluZyhkLCBnZm4sIG5yLCBtZm4sIHAybXQpOwogfQogCi1pbnQgdW5tYXBfcmVnaW9uc19wMm10
KHN0cnVjdCBkb21haW4gKmQsCi0gICAgICAgICAgICAgICAgICAgICAgIGdmbl90IGdmbiwKLSAg
ICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBuciwKLSAgICAgICAgICAgICAgICAg
ICAgICAgbWZuX3QgbWZuKQotewotICAgIHJldHVybiBwMm1fcmVtb3ZlX21hcHBpbmcoZCwgZ2Zu
LCBuciwgbWZuKTsKLX0KLQotaW50IG1hcF9tbWlvX3JlZ2lvbnMoc3RydWN0IGRvbWFpbiAqZCwK
LSAgICAgICAgICAgICAgICAgICAgIGdmbl90IHN0YXJ0X2dmbiwKLSAgICAgICAgICAgICAgICAg
ICAgIHVuc2lnbmVkIGxvbmcgbnIsCi0gICAgICAgICAgICAgICAgICAgICBtZm5fdCBtZm4pCi17
Ci0gICAgcmV0dXJuIHAybV9pbnNlcnRfbWFwcGluZyhkLCBzdGFydF9nZm4sIG5yLCBtZm4sIHAy
bV9tbWlvX2RpcmVjdF9kZXYpOwotfQotCiBpbnQgdW5tYXBfbW1pb19yZWdpb25zKHN0cnVjdCBk
b21haW4gKmQsCiAgICAgICAgICAgICAgICAgICAgICAgIGdmbl90IHN0YXJ0X2dmbiwKICAgICAg
ICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBuciwKZGlmZiAtLWdpdCBhL3hlbi9hcmNo
L2FybS9wbGF0Zm9ybXMvZXh5bm9zNS5jIGIveGVuL2FyY2gvYXJtL3BsYXRmb3Jtcy9leHlub3M1
LmMKaW5kZXggNjU2MDUwNzA5Mi4uOTdjZDA4MDc1OSAxMDA2NDQKLS0tIGEveGVuL2FyY2gvYXJt
L3BsYXRmb3Jtcy9leHlub3M1LmMKKysrIGIveGVuL2FyY2gvYXJtL3BsYXRmb3Jtcy9leHlub3M1
LmMKQEAgLTgzLDExICs4MywxMyBAQCBzdGF0aWMgaW50IGV4eW5vczUyNTBfc3BlY2lmaWNfbWFw
cGluZyhzdHJ1Y3QgZG9tYWluICpkKQogewogICAgIC8qIE1hcCB0aGUgY2hpcCBJRCAqLwogICAg
IG1hcF9tbWlvX3JlZ2lvbnMoZCwgZ2FkZHJfdG9fZ2ZuKEVYWU5PUzVfUEFfQ0hJUElEKSwgMSwK
LSAgICAgICAgICAgICAgICAgICAgIG1hZGRyX3RvX21mbihFWFlOT1M1X1BBX0NISVBJRCkpOwor
ICAgICAgICAgICAgICAgICAgICAgbWFkZHJfdG9fbWZuKEVYWU5PUzVfUEFfQ0hJUElEKSwKKyAg
ICAgICAgICAgICAgICAgICAgIHAybV9tbWlvX2RpcmVjdF9kZXYpOwogCiAgICAgLyogTWFwIHRo
ZSBQV00gcmVnaW9uICovCiAgICAgbWFwX21taW9fcmVnaW9ucyhkLCBnYWRkcl90b19nZm4oRVhZ
Tk9TNV9QQV9USU1FUiksIDIsCi0gICAgICAgICAgICAgICAgICAgICBtYWRkcl90b19tZm4oRVhZ
Tk9TNV9QQV9USU1FUikpOworICAgICAgICAgICAgICAgICAgICAgbWFkZHJfdG9fbWZuKEVYWU5P
UzVfUEFfVElNRVIpLAorICAgICAgICAgICAgICAgICAgICAgcDJtX21taW9fZGlyZWN0X2Rldik7
CiAKICAgICByZXR1cm4gMDsKIH0KZGlmZiAtLWdpdCBhL3hlbi9hcmNoL2FybS9wbGF0Zm9ybXMv
b21hcDUuYyBiL3hlbi9hcmNoL2FybS9wbGF0Zm9ybXMvb21hcDUuYwppbmRleCBhZWUyNGU0ZDI4
Li5jNTcwMWRmZDZjIDEwMDY0NAotLS0gYS94ZW4vYXJjaC9hcm0vcGxhdGZvcm1zL29tYXA1LmMK
KysrIGIveGVuL2FyY2gvYXJtL3BsYXRmb3Jtcy9vbWFwNS5jCkBAIC05OSwxOSArOTksMjMgQEAg
c3RhdGljIGludCBvbWFwNV9zcGVjaWZpY19tYXBwaW5nKHN0cnVjdCBkb21haW4gKmQpCiB7CiAg
ICAgLyogTWFwIHRoZSBQUk0gbW9kdWxlICovCiAgICAgbWFwX21taW9fcmVnaW9ucyhkLCBnYWRk
cl90b19nZm4oT01BUDVfUFJNX0JBU0UpLCAyLAotICAgICAgICAgICAgICAgICAgICAgbWFkZHJf
dG9fbWZuKE9NQVA1X1BSTV9CQVNFKSk7CisgICAgICAgICAgICAgICAgICAgICBtYWRkcl90b19t
Zm4oT01BUDVfUFJNX0JBU0UpLAorICAgICAgICAgICAgICAgICAgICAgcDJtX21taW9fZGlyZWN0
X2Rldik7CiAKICAgICAvKiBNYXAgdGhlIFBSTV9NUFUgKi8KICAgICBtYXBfbW1pb19yZWdpb25z
KGQsIGdhZGRyX3RvX2dmbihPTUFQNV9QUkNNX01QVV9CQVNFKSwgMSwKLSAgICAgICAgICAgICAg
ICAgICAgIG1hZGRyX3RvX21mbihPTUFQNV9QUkNNX01QVV9CQVNFKSk7CisgICAgICAgICAgICAg
ICAgICAgICBtYWRkcl90b19tZm4oT01BUDVfUFJDTV9NUFVfQkFTRSksCisgICAgICAgICAgICAg
ICAgICAgICBwMm1fbW1pb19kaXJlY3RfZGV2KTsKIAogICAgIC8qIE1hcCB0aGUgV2FrZXVwIEdl
biAqLwogICAgIG1hcF9tbWlvX3JlZ2lvbnMoZCwgZ2FkZHJfdG9fZ2ZuKE9NQVA1X1dLVVBHRU5f
QkFTRSksIDEsCi0gICAgICAgICAgICAgICAgICAgICBtYWRkcl90b19tZm4oT01BUDVfV0tVUEdF
Tl9CQVNFKSk7CisgICAgICAgICAgICAgICAgICAgICBtYWRkcl90b19tZm4oT01BUDVfV0tVUEdF
Tl9CQVNFKSwKKyAgICAgICAgICAgICAgICAgICAgIHAybV9tbWlvX2RpcmVjdF9kZXYpOwogCiAg
ICAgLyogTWFwIHRoZSBvbi1jaGlwIFNSQU0gKi8KICAgICBtYXBfbW1pb19yZWdpb25zKGQsIGdh
ZGRyX3RvX2dmbihPTUFQNV9TUkFNX1BBKSwgMzIsCi0gICAgICAgICAgICAgICAgICAgICBtYWRk
cl90b19tZm4oT01BUDVfU1JBTV9QQSkpOworICAgICAgICAgICAgICAgICAgICAgbWFkZHJfdG9f
bWZuKE9NQVA1X1NSQU1fUEEpLAorICAgICAgICAgICAgICAgICAgICAgcDJtX21taW9fZGlyZWN0
X2Rldik7CiAKICAgICByZXR1cm4gMDsKIH0KZGlmZiAtLWdpdCBhL3hlbi9hcmNoL2FybS90cmFw
cy5jIGIveGVuL2FyY2gvYXJtL3RyYXBzLmMKaW5kZXggMzEwMzYyMDMyMy4uZWMxMjVjZmQ0ZiAx
MDA2NDQKLS0tIGEveGVuL2FyY2gvYXJtL3RyYXBzLmMKKysrIGIveGVuL2FyY2gvYXJtL3RyYXBz
LmMKQEAgLTE4ODQsNyArMTg4NCw3IEBAIHN0YXRpYyBib29sIHRyeV9tYXBfbW1pbyhnZm5fdCBn
Zm4pCiAgICAgaWYgKCAhaW9tZW1fYWNjZXNzX3Blcm1pdHRlZChkLCBtZm5feChtZm4pLCBtZm5f
eChtZm4pICsgMSkgKQogICAgICAgICByZXR1cm4gZmFsc2U7CiAKLSAgICByZXR1cm4gIW1hcF9y
ZWdpb25zX3AybXQoZCwgZ2ZuLCAxLCBtZm4sIHAybV9tbWlvX2RpcmVjdF9jKTsKKyAgICByZXR1
cm4gIW1hcF9tbWlvX3JlZ2lvbnMoZCwgZ2ZuLCAxLCBtZm4sIHAybV9tbWlvX2RpcmVjdF9jKTsK
IH0KIAogc3RhdGljIHZvaWQgZG9fdHJhcF9zdGFnZTJfYWJvcnRfZ3Vlc3Qoc3RydWN0IGNwdV91
c2VyX3JlZ3MgKnJlZ3MsCmRpZmYgLS1naXQgYS94ZW4vYXJjaC9hcm0vdmdpYy12Mi5jIGIveGVu
L2FyY2gvYXJtL3ZnaWMtdjIuYwppbmRleCA2NGIxNDFmZWE1Li4xNTQzNjI1ZWE0IDEwMDY0NAot
LS0gYS94ZW4vYXJjaC9hcm0vdmdpYy12Mi5jCisrKyBiL3hlbi9hcmNoL2FybS92Z2ljLXYyLmMK
QEAgLTY5MSw3ICs2OTEsNyBAQCBzdGF0aWMgaW50IHZnaWNfdjJfZG9tYWluX2luaXQoc3RydWN0
IGRvbWFpbiAqZCkKICAgICAgKiByZWdpb24gb2YgdGhlIGd1ZXN0LgogICAgICAqLwogICAgIHJl
dCA9IG1hcF9tbWlvX3JlZ2lvbnMoZCwgZ2FkZHJfdG9fZ2ZuKGNiYXNlKSwgY3NpemUgLyBQQUdF
X1NJWkUsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICBtYWRkcl90b19tZm4odmJhc2UpKTsK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hZGRyX3RvX21mbih2YmFzZSksIHAybV9tbWlv
X2RpcmVjdF9kZXYpOwogICAgIGlmICggcmV0ICkKICAgICAgICAgcmV0dXJuIHJldDsKIApkaWZm
IC0tZ2l0IGEveGVuL2FyY2gvYXJtL3ZnaWMvdmdpYy12Mi5jIGIveGVuL2FyY2gvYXJtL3ZnaWMv
dmdpYy12Mi5jCmluZGV4IGI1YmE0YWNlODcuLjA0ZjM0ZGRhYjUgMTAwNjQ0Ci0tLSBhL3hlbi9h
cmNoL2FybS92Z2ljL3ZnaWMtdjIuYworKysgYi94ZW4vYXJjaC9hcm0vdmdpYy92Z2ljLXYyLmMK
QEAgLTMwOSw3ICszMDksNyBAQCBpbnQgdmdpY192Ml9tYXBfcmVzb3VyY2VzKHN0cnVjdCBkb21h
aW4gKmQpCiAgICAgICogcmVnaW9uIG9mIHRoZSBndWVzdC4KICAgICAgKi8KICAgICByZXQgPSBt
YXBfbW1pb19yZWdpb25zKGQsIGdhZGRyX3RvX2dmbihjYmFzZSksIGNzaXplIC8gUEFHRV9TSVpF
LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFkZHJfdG9fbWZuKHZiYXNlKSk7CisgICAg
ICAgICAgICAgICAgICAgICAgICAgICBtYWRkcl90b19tZm4odmJhc2UpLCBwMm1fbW1pb19kaXJl
Y3RfZGV2KTsKICAgICBpZiAoIHJldCApCiAgICAgewogICAgICAgICBnZHByaW50ayhYRU5MT0df
RVJSLCAiVW5hYmxlIHRvIHJlbWFwIFZHSUMgQ1BVIHRvIFZDUFVcbiIpOwpkaWZmIC0tZ2l0IGEv
eGVuL2FyY2gveDg2L2h2bS9kb20wX2J1aWxkLmMgYi94ZW4vYXJjaC94ODYvaHZtL2RvbTBfYnVp
bGQuYwppbmRleCA4ODQ1Mzk5YWU5Li4zYTQzMjM0ZjY5IDEwMDY0NAotLS0gYS94ZW4vYXJjaC94
ODYvaHZtL2RvbTBfYnVpbGQuYworKysgYi94ZW4vYXJjaC94ODYvaHZtL2RvbTBfYnVpbGQuYwpA
QCAtNzksNyArNzksNyBAQCBzdGF0aWMgaW50IF9faW5pdCBtb2RpZnlfaWRlbnRpdHlfbW1pbyhz
dHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBsb25nIHBmbiwKIAogICAgIGZvciAoIDsgOyApCiAg
ICAgewotICAgICAgICByYyA9IG1hcCA/ICAgbWFwX21taW9fcmVnaW9ucyhkLCBfZ2ZuKHBmbiks
IG5yX3BhZ2VzLCBfbWZuKHBmbikpCisgICAgICAgIHJjID0gbWFwID8gICBfX21hcF9tbWlvX3Jl
Z2lvbnMoZCwgX2dmbihwZm4pLCBucl9wYWdlcywgX21mbihwZm4pKQogICAgICAgICAgICAgICAg
ICA6IHVubWFwX21taW9fcmVnaW9ucyhkLCBfZ2ZuKHBmbiksIG5yX3BhZ2VzLCBfbWZuKHBmbikp
OwogICAgICAgICBpZiAoIHJjID09IDAgKQogICAgICAgICAgICAgYnJlYWs7CmRpZmYgLS1naXQg
YS94ZW4vYXJjaC94ODYvbW0vcDJtLmMgYi94ZW4vYXJjaC94ODYvbW0vcDJtLmMKaW5kZXggNGM5
OTU0ODY3Yy4uZTAwN2VlZTQyZiAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L21tL3AybS5jCisr
KyBiL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYwpAQCAtMjI3NiwxMCArMjI3NiwxMCBAQCBzdGF0aWMg
dW5zaWduZWQgaW50IG1taW9fb3JkZXIoY29uc3Qgc3RydWN0IGRvbWFpbiAqZCwKIAogI2RlZmlu
ZSBNQVBfTU1JT19NQVhfSVRFUiA2NCAvKiBwcmV0dHkgYXJiaXRyYXJ5ICovCiAKLWludCBtYXBf
bW1pb19yZWdpb25zKHN0cnVjdCBkb21haW4gKmQsCi0gICAgICAgICAgICAgICAgICAgICBnZm5f
dCBzdGFydF9nZm4sCi0gICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25nIG5yLAotICAg
ICAgICAgICAgICAgICAgICAgbWZuX3QgbWZuKQoraW50IF9fbWFwX21taW9fcmVnaW9ucyhzdHJ1
Y3QgZG9tYWluICpkLAorICAgICAgICAgICAgICAgICAgICAgICBnZm5fdCBzdGFydF9nZm4sCisg
ICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgbnIsCisgICAgICAgICAgICAgICAg
ICAgICAgIG1mbl90IG1mbikKIHsKICAgICBpbnQgcmV0ID0gMDsKICAgICB1bnNpZ25lZCBsb25n
IGk7CmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL2RvbWN0bC5jIGIveGVuL2NvbW1vbi9kb21jdGwu
YwppbmRleCA3MmE0NDk1M2QwLi5jNmZkODhkMjg1IDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL2Rv
bWN0bC5jCisrKyBiL3hlbi9jb21tb24vZG9tY3RsLmMKQEAgLTkyNyw2ICs5MjcsNyBAQCBsb25n
IGRvX2RvbWN0bChYRU5fR1VFU1RfSEFORExFX1BBUkFNKHhlbl9kb21jdGxfdCkgdV9kb21jdGwp
CiAgICAgICAgIHVuc2lnbmVkIGxvbmcgbnJfbWZucyA9IG9wLT51Lm1lbW9yeV9tYXBwaW5nLm5y
X21mbnM7CiAgICAgICAgIHVuc2lnbmVkIGxvbmcgbWZuX2VuZCA9IG1mbiArIG5yX21mbnMgLSAx
OwogICAgICAgICBpbnQgYWRkID0gb3AtPnUubWVtb3J5X21hcHBpbmcuYWRkX21hcHBpbmc7Cisg
ICAgICAgIHAybV90eXBlX3QgcDJtdDsKIAogICAgICAgICByZXQgPSAtRUlOVkFMOwogICAgICAg
ICBpZiAoIG1mbl9lbmQgPCBtZm4gfHwgLyogd3JhcD8gKi8KQEAgLTkzOSw2ICs5NDAsMTAgQEAg
bG9uZyBkb19kb21jdGwoWEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh4ZW5fZG9tY3RsX3QpIHVfZG9t
Y3RsKQogICAgICAgICAvKiBNdXN0IGJyZWFrIGh5cGVyY2FsbCB1cCBhcyB0aGlzIGNvdWxkIHRh
a2UgYSB3aGlsZS4gKi8KICAgICAgICAgaWYgKCBucl9tZm5zID4gNjQgKQogICAgICAgICAgICAg
YnJlYWs7CisKKyAgICAgICAgcDJtdCA9IHAybV9tbWlvX2RpcmVjdF9kZXY7CisjZWxzZQorICAg
ICAgICBwMm10ID0gcDJtX21taW9fZGlyZWN0OwogI2VuZGlmCiAKICAgICAgICAgcmV0ID0gLUVQ
RVJNOwpAQCAtOTU2LDcgKzk2MSw3IEBAIGxvbmcgZG9fZG9tY3RsKFhFTl9HVUVTVF9IQU5ETEVf
UEFSQU0oeGVuX2RvbWN0bF90KSB1X2RvbWN0bCkKICAgICAgICAgICAgICAgICAgICAibWVtb3J5
X21hcDphZGQ6IGRvbSVkIGdmbj0lbHggbWZuPSVseCBucj0lbHhcbiIsCiAgICAgICAgICAgICAg
ICAgICAgZC0+ZG9tYWluX2lkLCBnZm4sIG1mbiwgbnJfbWZucyk7CiAKLSAgICAgICAgICAgIHJl
dCA9IG1hcF9tbWlvX3JlZ2lvbnMoZCwgX2dmbihnZm4pLCBucl9tZm5zLCBfbWZuKG1mbikpOwor
ICAgICAgICAgICAgcmV0ID0gbWFwX21taW9fcmVnaW9ucyhkLCBfZ2ZuKGdmbiksIG5yX21mbnMs
IF9tZm4obWZuKSwgcDJtdCk7CiAgICAgICAgICAgICBpZiAoIHJldCA8IDAgKQogICAgICAgICAg
ICAgICAgIHByaW50ayhYRU5MT0dfR19XQVJOSU5HCiAgICAgICAgICAgICAgICAgICAgICAgICJt
ZW1vcnlfbWFwOmZhaWw6IGRvbSVkIGdmbj0lbHggbWZuPSVseCBucj0lbHggcmV0OiVsZFxuIiwK
ZGlmZiAtLWdpdCBhL3hlbi9kcml2ZXJzL3ZwY2kvaGVhZGVyLmMgYi94ZW4vZHJpdmVycy92cGNp
L2hlYWRlci5jCmluZGV4IDI1OGI5MWRlZWQuLmFkZTZkMTliNDUgMTAwNjQ0Ci0tLSBhL3hlbi9k
cml2ZXJzL3ZwY2kvaGVhZGVyLmMKKysrIGIveGVuL2RyaXZlcnMvdnBjaS9oZWFkZXIuYwpAQCAt
NTIsNyArNTIsNyBAQCBzdGF0aWMgaW50IG1hcF9yYW5nZSh1bnNpZ25lZCBsb25nIHMsIHVuc2ln
bmVkIGxvbmcgZSwgdm9pZCAqZGF0YSwKICAgICAgICAgICogLSB7dW59bWFwX21taW9fcmVnaW9u
cyBkb2Vzbid0IHN1cHBvcnQgcHJlZW1wdGlvbi4KICAgICAgICAgICovCiAKLSAgICAgICAgcmMg
PSBtYXAtPm1hcCA/IG1hcF9tbWlvX3JlZ2lvbnMobWFwLT5kLCBfZ2ZuKHMpLCBzaXplLCBfbWZu
KHMpKQorICAgICAgICByYyA9IG1hcC0+bWFwID8gX19tYXBfbW1pb19yZWdpb25zKG1hcC0+ZCwg
X2dmbihzKSwgc2l6ZSwgX21mbihzKSkKICAgICAgICAgICAgICAgICAgICAgICA6IHVubWFwX21t
aW9fcmVnaW9ucyhtYXAtPmQsIF9nZm4ocyksIHNpemUsIF9tZm4ocykpOwogICAgICAgICBpZiAo
IHJjID09IDAgKQogICAgICAgICB7CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9hc20tYXJtL3Ay
bS5oIGIveGVuL2luY2x1ZGUvYXNtLWFybS9wMm0uaAppbmRleCAyZjg5YmIwMGMzLi43NmFhZGMy
MTVkIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20tYXJtL3AybS5oCisrKyBiL3hlbi9pbmNs
dWRlL2FzbS1hcm0vcDJtLmgKQEAgLTI1MiwyMSArMjUyLDYgQEAgdm9pZCBwMm1fdG9nZ2xlX2Nh
Y2hlKHN0cnVjdCB2Y3B1ICp2LCBib29sIHdhc19lbmFibGVkKTsKIAogdm9pZCBwMm1fZmx1c2hf
dm0oc3RydWN0IHZjcHUgKnYpOwogCi0vKgotICogTWFwIGEgcmVnaW9uIGluIHRoZSBndWVzdCBw
Mm0gd2l0aCBhIHNwZWNpZmljIHAybSB0eXBlLgotICogVGhlIG1lbW9yeSBhdHRyaWJ1dGVzIHdp
bGwgYmUgZGVyaXZlZCBmcm9tIHRoZSBwMm0gdHlwZS4KLSAqLwotaW50IG1hcF9yZWdpb25zX3Ay
bXQoc3RydWN0IGRvbWFpbiAqZCwKLSAgICAgICAgICAgICAgICAgICAgIGdmbl90IGdmbiwKLSAg
ICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgbnIsCi0gICAgICAgICAgICAgICAgICAg
ICBtZm5fdCBtZm4sCi0gICAgICAgICAgICAgICAgICAgICBwMm1fdHlwZV90IHAybXQpOwotCi1p
bnQgdW5tYXBfcmVnaW9uc19wMm10KHN0cnVjdCBkb21haW4gKmQsCi0gICAgICAgICAgICAgICAg
ICAgICAgIGdmbl90IGdmbiwKLSAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBu
ciwKLSAgICAgICAgICAgICAgICAgICAgICAgbWZuX3QgbWZuKTsKLQogaW50IG1hcF9kZXZfbW1p
b19yZWdpb24oc3RydWN0IGRvbWFpbiAqZCwKICAgICAgICAgICAgICAgICAgICAgICAgIGdmbl90
IGdmbiwKICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgbnIsCmRpZmYgLS1n
aXQgYS94ZW4vaW5jbHVkZS9hc20teDg2L3AybS5oIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9wMm0u
aAppbmRleCAwOWVmN2UwMmZkLi44MzIxZGMxZjJhIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9h
c20teDg2L3AybS5oCisrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvcDJtLmgKQEAgLTEwMDAsNiAr
MTAwMCwxNCBAQCBzdGF0aWMgaW5saW5lIGludCBwMm1fZW50cnlfbW9kaWZ5KHN0cnVjdCBwMm1f
ZG9tYWluICpwMm0sIHAybV90eXBlX3QgbnQsCiAgICAgcmV0dXJuIDA7CiB9CiAKKy8qIHg4NiBk
b2Vzbid0IHVzZSB0aGUgcDJtdCBwYXJhbWV0ZXIsIGp1c3Qgc3RyaXAgaXQgYXdheSAqLworI2Rl
ZmluZSBtYXBfbW1pb19yZWdpb25zKGQsIHN0YXJ0X2dmbiwgbnIsIG1mbiwgcDJtdCkgXAorICAg
ICAgICAgICAgX19tYXBfbW1pb19yZWdpb25zKGQsIHN0YXJ0X2dmbiwgbnIsIG1mbikKK2ludCBf
X21hcF9tbWlvX3JlZ2lvbnMoc3RydWN0IGRvbWFpbiAqZCwKKyAgICAgICAgICAgICAgICAgICAg
ICAgZ2ZuX3Qgc3RhcnRfZ2ZuLAorICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25n
IG5yLAorICAgICAgICAgICAgICAgICAgICAgICBtZm5fdCBtZm4pOworCiAjZW5kaWYgLyogX1hF
Tl9BU01fWDg2X1AyTV9IICovCiAKIC8qCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS94ZW4vcDJt
LWNvbW1vbi5oIGIveGVuL2luY2x1ZGUveGVuL3AybS1jb21tb24uaAppbmRleCA1ODAzMWE2ZWE4
Li5lMjBiNDk3NGIwIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vcDJtLWNvbW1vbi5oCisr
KyBiL3hlbi9pbmNsdWRlL3hlbi9wMm0tY29tbW9uLmgKQEAgLTgsMTMgKzgsMTYgQEAgaW50IF9f
bXVzdF9jaGVjawogZ3Vlc3RfcGh5c21hcF9yZW1vdmVfcGFnZShzdHJ1Y3QgZG9tYWluICpkLCBn
Zm5fdCBnZm4sIG1mbl90IG1mbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQg
aW50IHBhZ2Vfb3JkZXIpOwogCi0vKiBNYXAgTU1JTyByZWdpb25zIGluIHRoZSBwMm06IHN0YXJ0
X2dmbiBhbmQgbnIgZGVzY3JpYmUgdGhlIHJhbmdlIGluCi0gKiAgKiB0aGUgZ3Vlc3QgcGh5c2lj
YWwgYWRkcmVzcyBzcGFjZSB0byBtYXAsIHN0YXJ0aW5nIGZyb20gdGhlIG1hY2hpbmUKLSAqICAg
KiBmcmFtZSBudW1iZXIgbWZuLiAqLworLyoKKyAqIE1hcCBNTUlPIHJlZ2lvbnMgaW4gdGhlIHAy
bTogc3RhcnRfZ2ZuIGFuZCBuciBkZXNjcmliZSB0aGUgcmFuZ2UgaW4KKyAqIHRoZSBndWVzdCBw
aHlzaWNhbCBhZGRyZXNzIHNwYWNlIHRvIG1hcCwgc3RhcnRpbmcgZnJvbSB0aGUgbWFjaGluZQor
ICogZnJhbWUgbnVtYmVyIG1mbi4KKyAqLwogaW50IG1hcF9tbWlvX3JlZ2lvbnMoc3RydWN0IGRv
bWFpbiAqZCwKICAgICAgICAgICAgICAgICAgICAgIGdmbl90IHN0YXJ0X2dmbiwKICAgICAgICAg
ICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgbnIsCi0gICAgICAgICAgICAgICAgICAgICBtZm5f
dCBtZm4pOworICAgICAgICAgICAgICAgICAgICAgbWZuX3QgbWZuLAorICAgICAgICAgICAgICAg
ICAgICAgcDJtX3R5cGVfdCBwMm10KTsKIGludCB1bm1hcF9tbWlvX3JlZ2lvbnMoc3RydWN0IGRv
bWFpbiAqZCwKICAgICAgICAgICAgICAgICAgICAgICAgZ2ZuX3Qgc3RhcnRfZ2ZuLAogICAgICAg
ICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25nIG5yLAotLSAKMi4xNy4xCgoKX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcg
bGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9q
ZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

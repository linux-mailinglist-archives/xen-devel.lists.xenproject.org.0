Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id EFC9B1254BB
	for <lists+xen-devel@lfdr.de>; Wed, 18 Dec 2019 22:33:07 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ihgt2-0001Po-Hj; Wed, 18 Dec 2019 21:29:40 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=kHBV=2I=gmail.com=julien.grall.oss@srs-us1.protection.inumbo.net>)
 id 1ihgt0-0001Pj-NU
 for xen-devel@lists.xenproject.org; Wed, 18 Dec 2019 21:29:38 +0000
X-Inumbo-ID: 794b2166-21dd-11ea-b6f1-bc764e2007e4
Received: from mail-wr1-f65.google.com (unknown [209.85.221.65])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 794b2166-21dd-11ea-b6f1-bc764e2007e4;
 Wed, 18 Dec 2019 21:29:29 +0000 (UTC)
Received: by mail-wr1-f65.google.com with SMTP id z3so3871949wru.3
 for <xen-devel@lists.xenproject.org>; Wed, 18 Dec 2019 13:29:29 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-language
 :content-transfer-encoding;
 bh=2GOizSZwjzdG9f8VGAPyIAEzC/ZJfmweOHIpMuSL7iU=;
 b=Hh1tgk97yumMXzBI4AJn1ouB5haLT5bT7aqcoRXq440vWb0lJkhKtDFEJhVnk1y8eD
 cBAmfmuFjL2+ZvsZPhGDPt4d+0VtUf1YaPYuwqce0XuVd6g6wHRKF/reaTdbExkEf2Os
 XT0M9GYFdaKKylPBjdaRwNyB0+mnCpIysUACK4ZM0B8q7y6h1j3NAR9f9MTGGsQRrNSh
 JPphG0eag6+HkbwAS3Yr2AbXT9oYEeMi0X7opek27LFRBWapgLTLr7RFgUar+eDzmy9m
 4XWC0UthBLiJgnMUymnxOFn3SAW0n0d/mY+9+Y1ZihHENhAz1GVGnfzu7XfY3i+tYX5n
 YFtw==
X-Gm-Message-State: APjAAAWcXDZosou6skQUU0d3y74MlUbWjuF8BA/WOSbAbIrxi8th+lCb
 1zf9PQA+D+lH7uKlDLo/TPQ=
X-Google-Smtp-Source: APXvYqwtkLkHfOQSydgibyZTtyKOIj1Vli2MnplCOFhHDdOfdW2WvxfeiiTJEFaO2cRE1MPu+Nir5g==
X-Received: by 2002:a5d:68c5:: with SMTP id p5mr5276379wrw.193.1576704568954; 
 Wed, 18 Dec 2019 13:29:28 -0800 (PST)
Received: from a483e7b01a66.ant.amazon.com
 (cpc91200-cmbg18-2-0-cust94.5-4.cable.virginm.net. [81.100.41.95])
 by smtp.gmail.com with ESMTPSA id n10sm3916965wrt.14.2019.12.18.13.29.27
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Wed, 18 Dec 2019 13:29:28 -0800 (PST)
To: Tamas K Lengyel <tamas.lengyel@intel.com>, xen-devel@lists.xenproject.org
References: <cover.1576697796.git.tamas.lengyel@intel.com>
 <88408b9bf706a28d8879edef61606f39a9df68b2.1576697796.git.tamas.lengyel@intel.com>
From: Julien Grall <julien@xen.org>
Message-ID: <1af4967f-5354-2746-ebcd-0bec3219df59@xen.org>
Date: Wed, 18 Dec 2019 21:29:26 +0000
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:68.0)
 Gecko/20100101 Thunderbird/68.3.0
MIME-Version: 1.0
In-Reply-To: <88408b9bf706a28d8879edef61606f39a9df68b2.1576697796.git.tamas.lengyel@intel.com>
Content-Language: en-GB
Subject: Re: [Xen-devel] [PATCH v2 11/20] x86/mem_sharing: Convert
 MEM_SHARING_DESTROY_GFN to a bool
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Tamas K Lengyel <tamas@tklengyel.com>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Jan Beulich <jbeulich@suse.com>,
 =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGkgVGFtYXMsCgpPbiAxOC8xMi8yMDE5IDE5OjQwLCBUYW1hcyBLIExlbmd5ZWwgd3JvdGU6Cj4g
TUVNX1NIQVJJTkdfREVTVFJPWV9HRk4gaXMgdXNlZCBvbiB0aGUgJ2ZsYWdzJyBiaXRmaWVsZCBk
dXJpbmcgdW5zaGFyaW5nLgo+IEhvd2V2ZXIsIHRoZSBiaXRmaWVsZCBpcyBub3QgdXNlZCBmb3Ig
YW55dGhpbmcgZWxzZSwgc28ganVzdCBjb252ZXJ0IGl0IHRvIGEKPiBib29sIGluc3RlYWQuCj4g
Cj4gU2lnbmVkLW9mZi1ieTogVGFtYXMgSyBMZW5neWVsIDx0YW1hcy5sZW5neWVsQGludGVsLmNv
bT4KPiAtLS0KPiAgIHhlbi9hcmNoL3g4Ni9tbS9tZW1fc2hhcmluZy5jICAgICB8IDcgKysrLS0t
LQo+ICAgeGVuL2FyY2gveDg2L21tL3AybS5jICAgICAgICAgICAgIHwgMSArCj4gICB4ZW4vY29t
bW9uL21lbW9yeS5jICAgICAgICAgICAgICAgfCAyICstCj4gICB4ZW4vaW5jbHVkZS9hc20teDg2
L21lbV9zaGFyaW5nLmggfCA1ICsrLS0tCj4gICA0IGZpbGVzIGNoYW5nZWQsIDcgaW5zZXJ0aW9u
cygrKSwgOCBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L21tL21l
bV9zaGFyaW5nLmMgYi94ZW4vYXJjaC94ODYvbW0vbWVtX3NoYXJpbmcuYwo+IGluZGV4IGZjMWQ4
YmUxZWIuLjZlODFlMWE4OTUgMTAwNjQ0Cj4gLS0tIGEveGVuL2FyY2gveDg2L21tL21lbV9zaGFy
aW5nLmMKPiArKysgYi94ZW4vYXJjaC94ODYvbW0vbWVtX3NoYXJpbmcuYwo+IEBAIC0xMTc1LDcg
KzExNzUsNyBAQCBlcnJfb3V0Ogo+ICAgICovCj4gICBpbnQgX19tZW1fc2hhcmluZ191bnNoYXJl
X3BhZ2Uoc3RydWN0IGRvbWFpbiAqZCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1bnNpZ25lZCBsb25nIGdmbiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVp
bnQxNl90IGZsYWdzKQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBkZXN0
cm95KQo+ICAgewo+ICAgICAgIHAybV90eXBlX3QgcDJtdDsKPiAgICAgICBtZm5fdCBtZm47Cj4g
QEAgLTEyMzEsNyArMTIzMSw3IEBAIGludCBfX21lbV9zaGFyaW5nX3Vuc2hhcmVfcGFnZShzdHJ1
Y3QgZG9tYWluICpkLAo+ICAgICAgICAqIElmIHRoZSBHRk4gaXMgZ2V0dGluZyBkZXN0cm95ZWQg
ZHJvcCB0aGUgcmVmZXJlbmNlcyB0byBNRk4KPiAgICAgICAgKiAocG9zc2libHkgZnJlZWluZyB0
aGUgcGFnZSksIGFuZCBleGl0IGVhcmx5Lgo+ICAgICAgICAqLwo+IC0gICAgaWYgKCBmbGFncyAm
IE1FTV9TSEFSSU5HX0RFU1RST1lfR0ZOICkKPiArICAgIGlmICggZGVzdHJveSApCj4gICAgICAg
ewo+ICAgICAgICAgICBpZiAoICFsYXN0X2dmbiApCj4gICAgICAgICAgICAgICBtZW1fc2hhcmlu
Z19nZm5fZGVzdHJveShwYWdlLCBkLCBnZm5faW5mbyk7Cj4gQEAgLTEzMjEsOCArMTMyMSw3IEBA
IGludCByZWxpbnF1aXNoX3NoYXJlZF9wYWdlcyhzdHJ1Y3QgZG9tYWluICpkKQo+ICAgICAgICAg
ICBpZiAoIG1mbl92YWxpZChtZm4pICYmIHAybV9pc19zaGFyZWQodCkgKQo+ICAgICAgICAgICB7
Cj4gICAgICAgICAgICAgICAvKiBEb2VzIG5vdCBmYWlsIHdpdGggRU5PTUVNIGdpdmVuIHRoZSBE
RVNUUk9ZIGZsYWcgKi8KPiAtICAgICAgICAgICAgQlVHX09OKF9fbWVtX3NoYXJpbmdfdW5zaGFy
ZV9wYWdlKGQsIGdmbiwKPiAtICAgICAgICAgICAgICAgICAgIE1FTV9TSEFSSU5HX0RFU1RST1lf
R0ZOKSk7Cj4gKyAgICAgICAgICAgIEJVR19PTihfX21lbV9zaGFyaW5nX3Vuc2hhcmVfcGFnZShk
LCBnZm4sIHRydWUpKTsKPiAgICAgICAgICAgICAgIC8qCj4gICAgICAgICAgICAgICAgKiBDbGVh
ciBvdXQgdGhlIHAybSBlbnRyeSBzbyBubyBvbmUgZWxzZSBtYXkgdHJ5IHRvCj4gICAgICAgICAg
ICAgICAgKiB1bnNoYXJlLiAgTXVzdCBzdWNjZWVkOiB3ZSBqdXN0IHJlYWQgdGhlIG9sZCBlbnRy
eSBhbmQKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L21tL3AybS5jIGIveGVuL2FyY2gveDg2
L21tL3AybS5jCj4gaW5kZXggYmFlYTYzMmFjYy4uNTNlYTQ0ZmUzYyAxMDA2NDQKPiAtLS0gYS94
ZW4vYXJjaC94ODYvbW0vcDJtLmMKPiArKysgYi94ZW4vYXJjaC94ODYvbW0vcDJtLmMKPiBAQCAt
NTE3LDYgKzUxNyw3IEBAIG1mbl90IF9fZ2V0X2dmbl90eXBlX2FjY2VzcyhzdHJ1Y3QgcDJtX2Rv
bWFpbiAqcDJtLCB1bnNpZ25lZCBsb25nIGdmbl9sLAo+ICAgICAgICAgICAgKi8KPiAgICAgICAg
ICAgaWYgKCBtZW1fc2hhcmluZ191bnNoYXJlX3BhZ2UocDJtLT5kb21haW4sIGdmbl9sKSA8IDAg
KQo+ICAgICAgICAgICAgICAgbWVtX3NoYXJpbmdfbm90aWZ5X2Vub21lbShwMm0tPmRvbWFpbiwg
Z2ZuX2wsIGZhbHNlKTsKPiArCgpUaGlzIGxpbmUgbG9va3Mgc3B1cmlvdXMuCgo+ICAgICAgICAg
ICBtZm4gPSBwMm0tPmdldF9lbnRyeShwMm0sIGdmbiwgdCwgYSwgcSwgcGFnZV9vcmRlciwgTlVM
TCk7Cj4gICAgICAgfQo+ICAgCj4gZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vbWVtb3J5LmMgYi94
ZW4vY29tbW9uL21lbW9yeS5jCj4gaW5kZXggMzA5ZTg3MmVkZi4uYzdkMmJhYzQ1MiAxMDA2NDQK
PiAtLS0gYS94ZW4vY29tbW9uL21lbW9yeS5jCj4gKysrIGIveGVuL2NvbW1vbi9tZW1vcnkuYwo+
IEBAIC0zNTIsNyArMzUyLDcgQEAgaW50IGd1ZXN0X3JlbW92ZV9wYWdlKHN0cnVjdCBkb21haW4g
KmQsIHVuc2lnbmVkIGxvbmcgZ21mbikKPiAgICAgICAgICAgICogbWlnaHQgYmUgdGhlIG9ubHkg
b25lIHVzaW5nIHRoaXMgc2hhcmVkIHBhZ2UsIGFuZCB3ZSBuZWVkIHRvCj4gICAgICAgICAgICAq
IHRyaWdnZXIgcHJvcGVyIGNsZWFudXAuIE9uY2UgZG9uZSwgdGhpcyBpcyBsaWtlIGFueSBvdGhl
ciBwYWdlLgo+ICAgICAgICAgICAgKi8KPiAtICAgICAgICByYyA9IG1lbV9zaGFyaW5nX3Vuc2hh
cmVfcGFnZShkLCBnbWZuLCAwKTsKPiArICAgICAgICByYyA9IG1lbV9zaGFyaW5nX3Vuc2hhcmVf
cGFnZShkLCBnbWZuKTsKCkFGQUlDVCwgdGhpcyBwYXRjaCBkb2VzIG5vdCByZWR1Y2UgdGhlIG51
bWJlciBvZiBwYXJhbWV0ZXJzIGZvciAKbWVtX3NoYXJpbmdfdW5zaGFyZV9wYWdlKCkuIERpZCB5
b3UgaW50ZW5kIHRvIG1ha2UgdGhpcyBjaGFuZ2UgaW4gCmFub3RoZXIgcGF0Y2g/Cgo+ICAgICAg
ICAgICBpZiAoIHJjICkKPiAgICAgICAgICAgewo+ICAgICAgICAgICAgICAgbWVtX3NoYXJpbmdf
bm90aWZ5X2Vub21lbShkLCBnbWZuLCBmYWxzZSk7Cj4gZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRl
L2FzbS14ODYvbWVtX3NoYXJpbmcuaCBiL3hlbi9pbmNsdWRlL2FzbS14ODYvbWVtX3NoYXJpbmcu
aAo+IGluZGV4IDg5Y2RhY2NlYTAuLjRiOTgyYTQ4MDMgMTAwNjQ0Cj4gLS0tIGEveGVuL2luY2x1
ZGUvYXNtLXg4Ni9tZW1fc2hhcmluZy5oCj4gKysrIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9tZW1f
c2hhcmluZy5oCj4gQEAgLTc2LDE3ICs3NiwxNiBAQCBzdHJ1Y3QgcGFnZV9zaGFyaW5nX2luZm8K
PiAgIHVuc2lnbmVkIGludCBtZW1fc2hhcmluZ19nZXRfbnJfc2F2ZWRfbWZucyh2b2lkKTsKPiAg
IHVuc2lnbmVkIGludCBtZW1fc2hhcmluZ19nZXRfbnJfc2hhcmVkX21mbnModm9pZCk7Cj4gICAK
PiAtI2RlZmluZSBNRU1fU0hBUklOR19ERVNUUk9ZX0dGTiAgICAgICAoMTw8MSkKPiAgIC8qIE9u
bHkgZmFpbHMgd2l0aCAtRU5PTUVNLiBFbmZvcmNlIGl0IHdpdGggYSBCVUdfT04gd3JhcHBlci4g
Ki8KPiAgIGludCBfX21lbV9zaGFyaW5nX3Vuc2hhcmVfcGFnZShzdHJ1Y3QgZG9tYWluICpkLAo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgZ2ZuLAo+IC0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDE2X3QgZmxhZ3MpOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBkZXN0cm95KTsKPiAgIAo+ICAgc3RhdGljIGlu
bGluZQo+ICAgaW50IG1lbV9zaGFyaW5nX3Vuc2hhcmVfcGFnZShzdHJ1Y3QgZG9tYWluICpkLAo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25nIGdmbikKPiAgIHsK
PiAtICAgIGludCByYyA9IF9fbWVtX3NoYXJpbmdfdW5zaGFyZV9wYWdlKGQsIGdmbiwgMCk7Cj4g
KyAgICBpbnQgcmMgPSBfX21lbV9zaGFyaW5nX3Vuc2hhcmVfcGFnZShkLCBnZm4sIGZhbHNlKTsK
PiAgICAgICBCVUdfT04ocmMgJiYgKHJjICE9IC1FTk9NRU0pKTsKPiAgICAgICByZXR1cm4gcmM7
Cj4gICB9Cj4gCgpDaGVlcnMsCgotLSAKSnVsaWVuIEdyYWxsCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1k
ZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21h
aWxtYW4vbGlzdGluZm8veGVuLWRldmVs

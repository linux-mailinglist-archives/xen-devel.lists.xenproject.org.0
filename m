Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 747BF1508B5
	for <lists+xen-devel@lfdr.de>; Mon,  3 Feb 2020 15:46:40 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iycxA-0006Eh-Av; Mon, 03 Feb 2020 14:43:56 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=ac3p=3X=citrix.com=andrew.cooper3@srs-us1.protection.inumbo.net>)
 id 1iycx9-0006EN-5m
 for xen-devel@lists.xenproject.org; Mon, 03 Feb 2020 14:43:55 +0000
X-Inumbo-ID: 94727aae-4693-11ea-8e6a-12813bfff9fa
Received: from esa6.hc3370-68.iphmx.com (unknown [216.71.155.175])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 94727aae-4693-11ea-8e6a-12813bfff9fa;
 Mon, 03 Feb 2020 14:43:45 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1580741025;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=ySpxWaYY87WscRywKVgyPixDepJAUhGcjKyYslrsji4=;
 b=FfXh1D4EOabDlb6l3pMmzBy6c6iQxokCs2g9oNlkPGQiCtFQ3O1YDb2r
 1V9HRvyYr44l6bnDefMivIq2e4XaR4AwfxIpRdkPEwRhX9Rg33dSMxlH8
 40kFXhRkkd9g6k00JVttJUcfbxT9HuQuELnpImSHlFZXd8OJFgPEeSIqY A=;
Authentication-Results: esa6.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=andrew.cooper3@citrix.com;
 spf=Pass smtp.mailfrom=Andrew.Cooper3@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa6.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 andrew.cooper3@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa6.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="andrew.cooper3@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: Pass (esa6.hc3370-68.iphmx.com: domain of
 Andrew.Cooper3@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa6.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="Andrew.Cooper3@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83
 ip4:168.245.78.127 ~all"
Received-SPF: None (esa6.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa6.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: o63/oPUJvIBOBAK2wgQzS+907ozI3iU36e9J33keAmOiRA6dNr2xHKGoNVKTaminORkPmaWxS8
 sq6KYtCr1diHZtkWbBkZrGdsy+9SwA+S8D7j15fBVb88nZYdT+Tyg3LYYxVMlhk0KTMe1xPAPx
 ie5non7kMv8mpKofs8NPEkAj2RelPBidZYXU8vbufuHjRHRonYlJKTbNV2iMPnaeGxlRDPDkg/
 QmGRfYtjdFBKOEmsPq53r5sNIcZGyb5l8pBfk2/Xs3NZuREJ28MeZ8RsrtPQUpl+nYShjbYjaW
 4XI=
X-SBRS: 2.7
X-MesageID: 12285435
X-Ironport-Server: esa6.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.70,398,1574139600"; d="scan'208";a="12285435"
From: Andrew Cooper <andrew.cooper3@citrix.com>
To: Xen-devel <xen-devel@lists.xenproject.org>
Date: Mon, 3 Feb 2020 14:43:38 +0000
Message-ID: <20200203144340.4614-3-andrew.cooper3@citrix.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20200203144340.4614-1-andrew.cooper3@citrix.com>
References: <20200203144340.4614-1-andrew.cooper3@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH 2/4] AMD/IOMMU: Delete iommu_{get, set,
 clear}_bit() helpers
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>, Wei Liu <wl@xen.org>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlc2UgYXJlIG9iZnVzY2F0aW9ucyBhcm91bmQgc2ltcGxlIGJpdCBvcGVyYXRpb25zLCBhbmQg
dGhlIGNvbXBpbGVyIHJlYWxseQpjYW4gZG8gYSBiZXR0ZXIgam9iIHdoZW4gaXQgY2FuIHNlZSB0
aGVtIG5vcm1hbGx5OgoKICBhZGQvcmVtb3ZlOiAwLzAgZ3Jvdy9zaHJpbms6IDAvNSB1cC9kb3du
OiAwLy0xODEgKC0xODEpCiAgRnVuY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgb2xkICAgICBuZXcgICBkZWx0YQogIGd1ZXN0X2lvbW11X2FkZF9wcHJfbG9nICAgICAg
ICAgICAgICAgICAgICAgIDI2NiAgICAgMjUxICAgICAtMTUKICBndWVzdF9pb21tdV9hZGRfZXZl
bnRfbG9nICAgICAgICAgICAgICAgICAgICAyNjYgICAgIDI1MSAgICAgLTE1CiAgaW9tbXVfcmVz
ZXRfbG9nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMjc0ICAgICAyNTAgICAgIC0yNAog
IGd1ZXN0X2lvbW11X3Byb2Nlc3NfY29tbWFuZCAgICAgICAgICAgICAgICAgMTYwMiAgICAxNTQ0
ICAgICAtNTgKICBndWVzdF9pb21tdV9tbWlvX3dyaXRlICAgICAgICAgICAgICAgICAgICAgIDEx
MjMgICAgMTA1NCAgICAgLTY5CiAgVG90YWw6IEJlZm9yZT0zMDE0MDk5LCBBZnRlcj0zMDEzOTE4
LCBjaGcgLTAuMDElCgpEcm9wIGFsbCBzdGF0dXMgcmVnaXN0ZXIgTUFTSy9TSElGVCBjb25zdGFu
dHMsIGFuZCBlbnVtZXJhdGUgdGhlIGJpdHMKbm9ybWFsbHkuICBSZW5hbWUgRVZFTlRfT1ZFUkZM
T1cgdG8gRVZFTlRfTE9HX09WRVJGTE9XIGZvciBjb25zaXN0ZW5jeS4gIChUaGUKZmllbGQgbmFt
ZSBpbiB0aGUgc3BlYyBpcyBpbmNvbnNpc3RlbnQsIGRlc3BpdGUgdGhlIGRlc2NyaXB0aW9uIHJl
ZmVycmluZyB0bwphbiBvdmVyZmxvdyBvZiB0aGUgZXZlbnQgbG9nLikKClRoZSBvbmx5IHNlbWFu
dGljIGNoYW5nZSBpcyBpbiBpb21tdV9yZXNldF9sb2coKSB3aGVyZSAncnVuX2JpdCcgY2hhbmdl
cyBmcm9tCmJlaW5nIGEgYml0IHBvc2l0aW9uIHRvIGJlaW5nIGEgc2luZ2xlLWJpdCBtYXNrLgoK
Tm8gZnVuY3Rpb25hbCBjaGFuZ2UuCgpTaWduZWQtb2ZmLWJ5OiBBbmRyZXcgQ29vcGVyIDxhbmRy
ZXcuY29vcGVyM0BjaXRyaXguY29tPgotLS0KQ0M6IEphbiBCZXVsaWNoIDxKQmV1bGljaEBzdXNl
LmNvbT4KQ0M6IFdlaSBMaXUgPHdsQHhlbi5vcmc+CkNDOiBSb2dlciBQYXUgTW9ubsOpIDxyb2dl
ci5wYXVAY2l0cml4LmNvbT4KLS0tCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXUt
ZGVmcy5oICB8IDM0ICsrKysrKysrKy0tLS0tLS0tLS0tLS0tLQogeGVuL2RyaXZlcnMvcGFzc3Ro
cm91Z2gvYW1kL2lvbW11LmggICAgICAgfCAxNSAtLS0tLS0tLS0tLQogeGVuL2RyaXZlcnMvcGFz
c3Rocm91Z2gvYW1kL2lvbW11X2NtZC5jICAgfCAgOCArKystLS0KIHhlbi9kcml2ZXJzL3Bhc3N0
aHJvdWdoL2FtZC9pb21tdV9ndWVzdC5jIHwgNDMgKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0t
LS0tLQogeGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2luaXQuYyAgfCAyMSArKysr
KysrLS0tLS0tLS0KIDUgZmlsZXMgY2hhbmdlZCwgNDMgaW5zZXJ0aW9ucygrKSwgNzggZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11LWRl
ZnMuaCBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdS1kZWZzLmgKaW5kZXggZjhi
NjJjYjAzMy4uOTYzMDA5ZGU2YSAxMDA2NDQKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gv
YW1kL2lvbW11LWRlZnMuaAorKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXUt
ZGVmcy5oCkBAIC00MzcsMjggKzQzNywxOCBAQCB1bmlvbiBhbWRfaW9tbXVfeDJhcGljX2NvbnRy
b2wgewogCiAvKiBTdGF0dXMgUmVnaXN0ZXIqLwogI2RlZmluZSBJT01NVV9TVEFUVVNfTU1JT19P
RkZTRVQJCTB4MjAyMAotI2RlZmluZSBJT01NVV9TVEFUVVNfRVZFTlRfT1ZFUkZMT1dfTUFTSwkw
eDAwMDAwMDAxCi0jZGVmaW5lIElPTU1VX1NUQVRVU19FVkVOVF9PVkVSRkxPV19TSElGVAkwCi0j
ZGVmaW5lIElPTU1VX1NUQVRVU19FVkVOVF9MT0dfSU5UX01BU0sJCTB4MDAwMDAwMDIKLSNkZWZp
bmUgSU9NTVVfU1RBVFVTX0VWRU5UX0xPR19JTlRfU0hJRlQJMQotI2RlZmluZSBJT01NVV9TVEFU
VVNfQ09NUF9XQUlUX0lOVF9NQVNLCQkweDAwMDAwMDA0Ci0jZGVmaW5lIElPTU1VX1NUQVRVU19D
T01QX1dBSVRfSU5UX1NISUZUCTIKLSNkZWZpbmUgSU9NTVVfU1RBVFVTX0VWRU5UX0xPR19SVU5f
TUFTSwkJMHgwMDAwMDAwOAotI2RlZmluZSBJT01NVV9TVEFUVVNfRVZFTlRfTE9HX1JVTl9TSElG
VAkzCi0jZGVmaW5lIElPTU1VX1NUQVRVU19DTURfQlVGRkVSX1JVTl9NQVNLCTB4MDAwMDAwMTAK
LSNkZWZpbmUgSU9NTVVfU1RBVFVTX0NNRF9CVUZGRVJfUlVOX1NISUZUCTQKLSNkZWZpbmUgSU9N
TVVfU1RBVFVTX1BQUl9MT0dfT1ZFUkZMT1dfTUFTSyAgICAgIDB4MDAwMDAwMjAKLSNkZWZpbmUg
SU9NTVVfU1RBVFVTX1BQUl9MT0dfT1ZFUkZMT1dfU0hJRlQgICAgIDUKLSNkZWZpbmUgSU9NTVVf
U1RBVFVTX1BQUl9MT0dfSU5UX01BU0sgICAgICAgICAgIDB4MDAwMDAwNDAKLSNkZWZpbmUgSU9N
TVVfU1RBVFVTX1BQUl9MT0dfSU5UX1NISUZUICAgICAgICAgIDYKLSNkZWZpbmUgSU9NTVVfU1RB
VFVTX1BQUl9MT0dfUlVOX01BU0sgICAgICAgICAgIDB4MDAwMDAwODAKLSNkZWZpbmUgSU9NTVVf
U1RBVFVTX1BQUl9MT0dfUlVOX1NISUZUICAgICAgICAgIDcKLSNkZWZpbmUgSU9NTVVfU1RBVFVT
X0dBUElDX0xPR19PVkVSRkxPV19NQVNLICAgIDB4MDAwMDAxMDAKLSNkZWZpbmUgSU9NTVVfU1RB
VFVTX0dBUElDX0xPR19PVkVSRkxPV19TSElGVCAgIDgKLSNkZWZpbmUgSU9NTVVfU1RBVFVTX0dB
UElDX0xPR19JTlRfTUFTSyAgICAgICAgIDB4MDAwMDAyMDAKLSNkZWZpbmUgSU9NTVVfU1RBVFVT
X0dBUElDX0xPR19JTlRfU0hJRlQgICAgICAgIDkKLSNkZWZpbmUgSU9NTVVfU1RBVFVTX0dBUElD
X0xPR19SVU5fTUFTSyAgICAgICAgIDB4MDAwMDA0MDAKLSNkZWZpbmUgSU9NTVVfU1RBVFVTX0dB
UElDX0xPR19SVU5fU0hJRlQgICAgICAgIDEwCisKKyNkZWZpbmUgSU9NTVVfU1RBVFVTX0VWRU5U
X0xPR19PVkVSRkxPVyAgIDB4MDAwMDAwMDEKKyNkZWZpbmUgSU9NTVVfU1RBVFVTX0VWRU5UX0xP
R19JTlQgICAgICAgIDB4MDAwMDAwMDIKKyNkZWZpbmUgSU9NTVVfU1RBVFVTX0NPTVBfV0FJVF9J
TlQgICAgICAgIDB4MDAwMDAwMDQKKyNkZWZpbmUgSU9NTVVfU1RBVFVTX0VWRU5UX0xPR19SVU4g
ICAgICAgIDB4MDAwMDAwMDgKKyNkZWZpbmUgSU9NTVVfU1RBVFVTX0NNRF9CVUZGRVJfUlVOICAg
ICAgIDB4MDAwMDAwMTAKKyNkZWZpbmUgSU9NTVVfU1RBVFVTX1BQUl9MT0dfT1ZFUkZMT1cgICAg
IDB4MDAwMDAwMjAKKyNkZWZpbmUgSU9NTVVfU1RBVFVTX1BQUl9MT0dfSU5UICAgICAgICAgIDB4
MDAwMDAwNDAKKyNkZWZpbmUgSU9NTVVfU1RBVFVTX1BQUl9MT0dfUlVOICAgICAgICAgIDB4MDAw
MDAwODAKKyNkZWZpbmUgSU9NTVVfU1RBVFVTX0dBUElDX0xPR19PVkVSRkxPVyAgIDB4MDAwMDAx
MDAKKyNkZWZpbmUgSU9NTVVfU1RBVFVTX0dBUElDX0xPR19JTlQgICAgICAgIDB4MDAwMDAyMDAK
KyNkZWZpbmUgSU9NTVVfU1RBVFVTX0dBUElDX0xPR19SVU4gICAgICAgIDB4MDAwMDA0MDAKIAog
LyogSS9PIFBhZ2UgVGFibGUgKi8KICNkZWZpbmUgSU9NTVVfUEFHRV9UQUJMRV9FTlRSWV9TSVpF
CTgKZGlmZiAtLWdpdCBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdS5oIGIveGVu
L2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11LmgKaW5kZXggZjU5MGRlOGNiZi4uODFiNjgx
MmQzYSAxMDA2NDQKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11LmgKKysr
IGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11LmgKQEAgLTM3NCwyMSArMzc0LDYg
QEAgc3RhdGljIGlubGluZSB2b2lkIF9fZnJlZV9hbWRfaW9tbXVfdGFibGVzKHZvaWQgKnRhYmxl
LCBpbnQgb3JkZXIpCiAgICAgZnJlZV94ZW5oZWFwX3BhZ2VzKHRhYmxlLCBvcmRlcik7CiB9CiAK
LXN0YXRpYyBpbmxpbmUgdm9pZCBpb21tdV9zZXRfYml0KHVpbnQzMl90ICpyZWcsIHVpbnQzMl90
IGJpdCkKLXsKLSAgICBzZXRfZmllbGRfaW5fcmVnX3UzMihJT01NVV9DT05UUk9MX0VOQUJMRUQs
ICpyZWcsIDFVIDw8IGJpdCwgYml0LCByZWcpOwotfQotCi1zdGF0aWMgaW5saW5lIHZvaWQgaW9t
bXVfY2xlYXJfYml0KHVpbnQzMl90ICpyZWcsIHVpbnQzMl90IGJpdCkKLXsKLSAgICBzZXRfZmll
bGRfaW5fcmVnX3UzMihJT01NVV9DT05UUk9MX0RJU0FCTEVELCAqcmVnLCAxVSA8PCBiaXQsIGJp
dCwgcmVnKTsKLX0KLQotc3RhdGljIGlubGluZSB1aW50MzJfdCBpb21tdV9nZXRfYml0KHVpbnQz
Ml90IHJlZywgdWludDMyX3QgYml0KQotewotICAgIHJldHVybiBnZXRfZmllbGRfZnJvbV9yZWdf
dTMyKHJlZywgMVUgPDwgYml0LCBiaXQpOwotfQotCiBzdGF0aWMgaW5saW5lIGludCBpb21tdV9o
YXNfY2FwKHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11LCB1aW50MzJfdCBiaXQpCiB7CiAgICAgcmV0
dXJuICEhKGlvbW11LT5jYXAuaGVhZGVyICYgKDF1IDw8IGJpdCkpOwpkaWZmIC0tZ2l0IGEveGVu
L2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2NtZC5jIGIveGVuL2RyaXZlcnMvcGFzc3Ro
cm91Z2gvYW1kL2lvbW11X2NtZC5jCmluZGV4IDkyZWFhYjQwN2IuLjE2NmYwZTcyNjMgMTAwNjQ0
Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9jbWQuYworKysgYi94ZW4v
ZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfY21kLmMKQEAgLTY4LDcgKzY4LDcgQEAgc3Rh
dGljIHZvaWQgZmx1c2hfY29tbWFuZF9idWZmZXIoc3RydWN0IGFtZF9pb21tdSAqaW9tbXUpCiAg
ICAgaW50IGxvb3BfY291bnQsIGNvbXBfd2FpdDsKIAogICAgIC8qIFJXMUMgJ0NvbVdhaXRJbnQn
IGluIHN0YXR1cyByZWdpc3RlciAqLwotICAgIHdyaXRlbChJT01NVV9TVEFUVVNfQ09NUF9XQUlU
X0lOVF9NQVNLLAorICAgIHdyaXRlbChJT01NVV9TVEFUVVNfQ09NUF9XQUlUX0lOVCwKICAgICAg
ICAgICAgaW9tbXUtPm1taW9fYmFzZSArIElPTU1VX1NUQVRVU19NTUlPX09GRlNFVCk7CiAKICAg
ICAvKiBzZW5kIGFuIGVtcHR5IENPTVBMRVRJT05fV0FJVCBjb21tYW5kIHRvIGZsdXNoIGNvbW1h
bmQgYnVmZmVyICovCkBAIC04NSwxNiArODUsMTQgQEAgc3RhdGljIHZvaWQgZmx1c2hfY29tbWFu
ZF9idWZmZXIoc3RydWN0IGFtZF9pb21tdSAqaW9tbXUpCiAgICAgbG9vcF9jb3VudCA9IDEwMDA7
CiAgICAgZG8gewogICAgICAgICBzdGF0dXMgPSByZWFkbChpb21tdS0+bW1pb19iYXNlICsgSU9N
TVVfU1RBVFVTX01NSU9fT0ZGU0VUKTsKLSAgICAgICAgY29tcF93YWl0ID0gZ2V0X2ZpZWxkX2Zy
b21fcmVnX3UzMihzdGF0dXMsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgSU9NTVVfU1RBVFVTX0NPTVBfV0FJVF9JTlRfTUFTSywKLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBJT01NVV9TVEFUVVNfQ09NUF9XQUlUX0lOVF9TSElG
VCk7CisgICAgICAgIGNvbXBfd2FpdCA9IHN0YXR1cyAmIElPTU1VX1NUQVRVU19DT01QX1dBSVRf
SU5UOwogICAgICAgICAtLWxvb3BfY291bnQ7CiAgICAgfSB3aGlsZSAoICFjb21wX3dhaXQgJiYg
bG9vcF9jb3VudCApOwogCiAgICAgaWYgKCBjb21wX3dhaXQgKQogICAgIHsKICAgICAgICAgLyog
UlcxQyAnQ29tV2FpdEludCcgaW4gc3RhdHVzIHJlZ2lzdGVyICovCi0gICAgICAgIHdyaXRlbChJ
T01NVV9TVEFUVVNfQ09NUF9XQUlUX0lOVF9NQVNLLAorICAgICAgICB3cml0ZWwoSU9NTVVfU1RB
VFVTX0NPTVBfV0FJVF9JTlQsCiAgICAgICAgICAgICAgICBpb21tdS0+bW1pb19iYXNlICsgSU9N
TVVfU1RBVFVTX01NSU9fT0ZGU0VUKTsKICAgICAgICAgcmV0dXJuOwogICAgIH0KZGlmZiAtLWdp
dCBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9ndWVzdC5jIGIveGVuL2RyaXZl
cnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2d1ZXN0LmMKaW5kZXggYWFmMTJmZTFjYi4uZDA1OTAx
ZDM0OCAxMDA2NDQKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2d1ZXN0
LmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2d1ZXN0LmMKQEAgLTMw
LDEyICszMCw2IEBACiAjZGVmaW5lIEdVRVNUX0FERFJFU1NfU0laRV82X0xFVkVMICAgICAgICAg
ICAgICAweDIKICNkZWZpbmUgSE9TVF9BRERSRVNTX1NJWkVfNl9MRVZFTCAgICAgICAgICAgICAg
IDB4MgogCi0jZGVmaW5lIGd1ZXN0X2lvbW11X3NldF9zdGF0dXMoaW9tbXUsIGJpdCkgXAotICAg
ICAgICBpb21tdV9zZXRfYml0KCYoKGlvbW11KS0+cmVnX3N0YXR1cy5sbyksIGJpdCkKLQotI2Rl
ZmluZSBndWVzdF9pb21tdV9jbGVhcl9zdGF0dXMoaW9tbXUsIGJpdCkgXAotICAgICAgICBpb21t
dV9jbGVhcl9iaXQoJigoaW9tbXUpLT5yZWdfc3RhdHVzLmxvKSwgYml0KQotCiAjZGVmaW5lIHJl
Z190b191NjQocmVnKSAoKCh1aW50NjRfdClyZWcuaGkgPDwgMzIpIHwgcmVnLmxvICkKICNkZWZp
bmUgdTY0X3RvX3JlZyhyZWcsIHZhbCkgXAogICAgIGRvIFwKQEAgLTE4Myw3ICsxNzcsNyBAQCB2
b2lkIGd1ZXN0X2lvbW11X2FkZF9wcHJfbG9nKHN0cnVjdCBkb21haW4gKmQsIHUzMiBlbnRyeVtd
KQogICAgIGlmICggKyt0YWlsID49IGlvbW11LT5wcHJfbG9nLmVudHJpZXMgKQogICAgIHsKICAg
ICAgICAgdGFpbCA9IDA7Ci0gICAgICAgIGd1ZXN0X2lvbW11X3NldF9zdGF0dXMoaW9tbXUsIElP
TU1VX1NUQVRVU19QUFJfTE9HX09WRVJGTE9XX1NISUZUKTsKKyAgICAgICAgaW9tbXUtPnJlZ19z
dGF0dXMubG8gfD0gSU9NTVVfU1RBVFVTX1BQUl9MT0dfT1ZFUkZMT1c7CiAgICAgfQogICAgIGlv
bW11X3NldF9yYl9wb2ludGVyKCZpb21tdS0+cHByX2xvZy5yZWdfdGFpbC5sbywgdGFpbCk7CiAg
ICAgdW5tYXBfZG9tYWluX3BhZ2UobG9nX2Jhc2UpOwpAQCAtMjMxLDcgKzIyNSw3IEBAIHZvaWQg
Z3Vlc3RfaW9tbXVfYWRkX2V2ZW50X2xvZyhzdHJ1Y3QgZG9tYWluICpkLCB1MzIgZW50cnlbXSkK
ICAgICBpZiAoICsrdGFpbCA+PSBpb21tdS0+ZXZlbnRfbG9nLmVudHJpZXMgKQogICAgIHsKICAg
ICAgICAgdGFpbCA9IDA7Ci0gICAgICAgIGd1ZXN0X2lvbW11X3NldF9zdGF0dXMoaW9tbXUsIElP
TU1VX1NUQVRVU19FVkVOVF9PVkVSRkxPV19TSElGVCk7CisgICAgICAgIGlvbW11LT5yZWdfc3Rh
dHVzLmxvIHw9IElPTU1VX1NUQVRVU19FVkVOVF9MT0dfT1ZFUkZMT1c7CiAgICAgfQogCiAgICAg
aW9tbXVfc2V0X3JiX3BvaW50ZXIoJmlvbW11LT5ldmVudF9sb2cucmVnX3RhaWwubG8sIHRhaWwp
OwpAQCAtMzIyLDExICszMTYsMTEgQEAgc3RhdGljIGludCBkb19jb21wbGV0aW9uX3dhaXQoc3Ry
dWN0IGRvbWFpbiAqZCwgY21kX2VudHJ5X3QgKmNtZCkKIAogICAgIGlvbW11ID0gZG9tYWluX2lv
bW11KGQpOwogCi0gICAgaSA9IGlvbW11X2dldF9iaXQoY21kLT5kYXRhWzBdLCBJT01NVV9DT01Q
X1dBSVRfSV9GTEFHX1NISUZUKTsKLSAgICBzID0gaW9tbXVfZ2V0X2JpdChjbWQtPmRhdGFbMF0s
IElPTU1VX0NPTVBfV0FJVF9TX0ZMQUdfU0hJRlQpOworICAgIGkgPSBjbWQtPmRhdGFbMF0gJiBJ
T01NVV9DT01QX1dBSVRfSV9GTEFHX01BU0s7CisgICAgcyA9IGNtZC0+ZGF0YVswXSAmIElPTU1V
X0NPTVBfV0FJVF9TX0ZMQUdfTUFTSzsKIAogICAgIGlmICggaSApCi0gICAgICAgIGd1ZXN0X2lv
bW11X3NldF9zdGF0dXMoaW9tbXUsIElPTU1VX1NUQVRVU19DT01QX1dBSVRfSU5UX1NISUZUKTsK
KyAgICAgICAgaW9tbXUtPnJlZ19zdGF0dXMubG8gfD0gSU9NTVVfU1RBVFVTX0NPTVBfV0FJVF9J
TlQ7CiAKICAgICBpZiAoIHMgKQogICAgIHsKQEAgLTM1Miw4ICszNDYsNyBAQCBzdGF0aWMgaW50
IGRvX2NvbXBsZXRpb25fd2FpdChzdHJ1Y3QgZG9tYWluICpkLCBjbWRfZW50cnlfdCAqY21kKQog
ICAgICAgICB1bm1hcF9kb21haW5fcGFnZSh2YWRkcik7CiAgICAgfQogCi0gICAgY29tX3dhaXRf
aW50ID0gaW9tbXVfZ2V0X2JpdChpb21tdS0+cmVnX3N0YXR1cy5sbywKLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIElPTU1VX1NUQVRVU19DT01QX1dBSVRfSU5UX1NISUZUKTsKKyAg
ICBjb21fd2FpdF9pbnQgPSBpb21tdS0+cmVnX3N0YXR1cy5sbyAmIElPTU1VX1NUQVRVU19DT01Q
X1dBSVRfSU5UOwogCiAgICAgaWYgKCBpb21tdS0+cmVnX2N0cmwuY29tX3dhaXRfaW50X2VuICYm
IGNvbV93YWl0X2ludCApCiAgICAgICAgIGd1ZXN0X2lvbW11X2RlbGl2ZXJfbXNpKGQpOwpAQCAt
NTM5LDE2ICs1MzIsMTYgQEAgc3RhdGljIGludCBndWVzdF9pb21tdV93cml0ZV9jdHJsKHN0cnVj
dCBndWVzdF9pb21tdSAqaW9tbXUsIHVpbnQ2NF90IHZhbCkKICAgICB7CiAgICAgICAgIGd1ZXN0
X2lvbW11X2VuYWJsZV9yaW5nX2J1ZmZlcihpb21tdSwgJmlvbW11LT5ldmVudF9sb2csCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YoZXZlbnRfZW50cnlfdCkp
OwotICAgICAgICBndWVzdF9pb21tdV9zZXRfc3RhdHVzKGlvbW11LCBJT01NVV9TVEFUVVNfRVZF
TlRfTE9HX1JVTl9TSElGVCk7Ci0gICAgICAgIGd1ZXN0X2lvbW11X2NsZWFyX3N0YXR1cyhpb21t
dSwgSU9NTVVfU1RBVFVTX0VWRU5UX09WRVJGTE9XX1NISUZUKTsKKyAgICAgICAgaW9tbXUtPnJl
Z19zdGF0dXMubG8gfD0gIElPTU1VX1NUQVRVU19FVkVOVF9MT0dfUlVOOworICAgICAgICBpb21t
dS0+cmVnX3N0YXR1cy5sbyAmPSB+SU9NTVVfU1RBVFVTX0VWRU5UX0xPR19PVkVSRkxPVzsKICAg
ICB9CiAKICAgICBpZiAoIG5ld2N0cmwuaW9tbXVfZW4gJiYgbmV3Y3RybC5wcHJfZW4gJiYgbmV3
Y3RybC5wcHJfbG9nX2VuICkKICAgICB7CiAgICAgICAgIGd1ZXN0X2lvbW11X2VuYWJsZV9yaW5n
X2J1ZmZlcihpb21tdSwgJmlvbW11LT5wcHJfbG9nLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2l6ZW9mKHBwcl9lbnRyeV90KSk7Ci0gICAgICAgIGd1ZXN0X2lvbW11
X3NldF9zdGF0dXMoaW9tbXUsIElPTU1VX1NUQVRVU19QUFJfTE9HX1JVTl9TSElGVCk7Ci0gICAg
ICAgIGd1ZXN0X2lvbW11X2NsZWFyX3N0YXR1cyhpb21tdSwgSU9NTVVfU1RBVFVTX1BQUl9MT0df
T1ZFUkZMT1dfU0hJRlQpOworICAgICAgICBpb21tdS0+cmVnX3N0YXR1cy5sbyB8PSAgSU9NTVVf
U1RBVFVTX1BQUl9MT0dfUlVOOworICAgICAgICBpb21tdS0+cmVnX3N0YXR1cy5sbyAmPSB+SU9N
TVVfU1RBVFVTX1BQUl9MT0dfT1ZFUkZMT1c7CiAgICAgfQogCiAgICAgaWYgKCBuZXdjdHJsLmlv
bW11X2VuICYmIGlvbW11LT5yZWdfY3RybC5jbWRfYnVmX2VuICYmCkBAIC01NTksNyArNTUyLDcg
QEAgc3RhdGljIGludCBndWVzdF9pb21tdV93cml0ZV9jdHJsKHN0cnVjdCBndWVzdF9pb21tdSAq
aW9tbXUsIHVpbnQ2NF90IHZhbCkKICAgICB9CiAKICAgICBpZiAoIGlvbW11LT5yZWdfY3RybC5l
dmVudF9sb2dfZW4gJiYgIW5ld2N0cmwuZXZlbnRfbG9nX2VuICkKLSAgICAgICAgZ3Vlc3RfaW9t
bXVfY2xlYXJfc3RhdHVzKGlvbW11LCBJT01NVV9TVEFUVVNfRVZFTlRfTE9HX1JVTl9TSElGVCk7
CisgICAgICAgIGlvbW11LT5yZWdfc3RhdHVzLmxvICY9IH5JT01NVV9TVEFUVVNfRVZFTlRfTE9H
X1JVTjsKIAogICAgIGlmICggaW9tbXUtPnJlZ19jdHJsLmlvbW11X2VuICYmICFuZXdjdHJsLmlv
bW11X2VuICkKICAgICAgICAgZ3Vlc3RfaW9tbXVfZGlzYWJsZShpb21tdSk7CkBAIC02OTgsMTMg
KzY5MSwxMyBAQCBzdGF0aWMgdm9pZCBndWVzdF9pb21tdV9tbWlvX3dyaXRlNjQoc3RydWN0IGd1
ZXN0X2lvbW11ICppb21tdSwKICAgICAgICAgdTY0X3RvX3JlZygmaW9tbXUtPnBwcl9sb2cucmVn
X3RhaWwsIHZhbCk7CiAgICAgICAgIGJyZWFrOwogICAgIGNhc2UgSU9NTVVfU1RBVFVTX01NSU9f
T0ZGU0VUOgotICAgICAgICB2YWwgJj0gSU9NTVVfU1RBVFVTX0VWRU5UX09WRVJGTE9XX01BU0sg
fAotICAgICAgICAgICAgICAgSU9NTVVfU1RBVFVTX0VWRU5UX0xPR19JTlRfTUFTSyB8Ci0gICAg
ICAgICAgICAgICBJT01NVV9TVEFUVVNfQ09NUF9XQUlUX0lOVF9NQVNLIHwKLSAgICAgICAgICAg
ICAgIElPTU1VX1NUQVRVU19QUFJfTE9HX09WRVJGTE9XX01BU0sgfAotICAgICAgICAgICAgICAg
SU9NTVVfU1RBVFVTX1BQUl9MT0dfSU5UX01BU0sgfAotICAgICAgICAgICAgICAgSU9NTVVfU1RB
VFVTX0dBUElDX0xPR19PVkVSRkxPV19NQVNLIHwKLSAgICAgICAgICAgICAgIElPTU1VX1NUQVRV
U19HQVBJQ19MT0dfSU5UX01BU0s7CisgICAgICAgIHZhbCAmPSBJT01NVV9TVEFUVVNfRVZFTlRf
TE9HX09WRVJGTE9XIHwKKyAgICAgICAgICAgICAgIElPTU1VX1NUQVRVU19FVkVOVF9MT0dfSU5U
IHwKKyAgICAgICAgICAgICAgIElPTU1VX1NUQVRVU19DT01QX1dBSVRfSU5UIHwKKyAgICAgICAg
ICAgICAgIElPTU1VX1NUQVRVU19QUFJfTE9HX09WRVJGTE9XIHwKKyAgICAgICAgICAgICAgIElP
TU1VX1NUQVRVU19QUFJfTE9HX0lOVCB8CisgICAgICAgICAgICAgICBJT01NVV9TVEFUVVNfR0FQ
SUNfTE9HX09WRVJGTE9XIHwKKyAgICAgICAgICAgICAgIElPTU1VX1NUQVRVU19HQVBJQ19MT0df
SU5UOwogICAgICAgICB1NjRfdG9fcmVnKCZpb21tdS0+cmVnX3N0YXR1cywgcmVnX3RvX3U2NChp
b21tdS0+cmVnX3N0YXR1cykgJiB+dmFsKTsKICAgICAgICAgYnJlYWs7CiAKZGlmZiAtLWdpdCBh
L3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0LmMgYi94ZW4vZHJpdmVycy9w
YXNzdGhyb3VnaC9hbWQvaW9tbXVfaW5pdC5jCmluZGV4IDBmZmM4M2E4NDMuLjdiZjZmZWYzZWUg
MTAwNjQ0Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0LmMKKysr
IGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2luaXQuYwpAQCAtMzUxLDEzICsz
NTEsMTIgQEAgc3RhdGljIHZvaWQgaW9tbXVfcmVzZXRfbG9nKHN0cnVjdCBhbWRfaW9tbXUgKmlv
bW11LAogICAgIEJVR19PTighaW9tbXUgfHwgKChsb2cgIT0gJmlvbW11LT5ldmVudF9sb2cpICYm
IChsb2cgIT0gJmlvbW11LT5wcHJfbG9nKSkpOwogCiAgICAgcnVuX2JpdCA9ICggbG9nID09ICZp
b21tdS0+ZXZlbnRfbG9nICkgPwotICAgICAgICBJT01NVV9TVEFUVVNfRVZFTlRfTE9HX1JVTl9T
SElGVCA6Ci0gICAgICAgIElPTU1VX1NUQVRVU19QUFJfTE9HX1JVTl9TSElGVDsKKyAgICAgICAg
SU9NTVVfU1RBVFVTX0VWRU5UX0xPR19SVU4gOiBJT01NVV9TVEFUVVNfUFBSX0xPR19SVU47CiAK
ICAgICAvKiB3YWl0IHVudGlsIEV2ZW50TG9nUnVuIGJpdCA9IDAgKi8KICAgICBkbyB7CiAgICAg
ICAgIGVudHJ5ID0gcmVhZGwoaW9tbXUtPm1taW9fYmFzZSArIElPTU1VX1NUQVRVU19NTUlPX09G
RlNFVCk7Ci0gICAgICAgIGxvZ19ydW4gPSBpb21tdV9nZXRfYml0KGVudHJ5LCBydW5fYml0KTsK
KyAgICAgICAgbG9nX3J1biA9IGVudHJ5ICYgcnVuX2JpdDsKICAgICAgICAgbG9vcF9jb3VudC0t
OwogICAgIH0gd2hpbGUgKCBsb2dfcnVuICYmIGxvb3BfY291bnQgKTsKIApAQCAtMzcxLDggKzM3
MCw4IEBAIHN0YXRpYyB2b2lkIGlvbW11X3Jlc2V0X2xvZyhzdHJ1Y3QgYW1kX2lvbW11ICppb21t
dSwKICAgICBjdHJsX2Z1bmMoaW9tbXUsIElPTU1VX0NPTlRST0xfRElTQUJMRUQpOwogCiAgICAg
LyogUlcxQyBvdmVyZmxvdyBiaXQgKi8KLSAgICB3cml0ZWwobG9nID09ICZpb21tdS0+ZXZlbnRf
bG9nID8gSU9NTVVfU1RBVFVTX0VWRU5UX09WRVJGTE9XX01BU0sKLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIDogSU9NTVVfU1RBVFVTX1BQUl9MT0dfT1ZFUkZMT1dfTUFTSywK
KyAgICB3cml0ZWwobG9nID09ICZpb21tdS0+ZXZlbnRfbG9nID8gSU9NTVVfU1RBVFVTX0VWRU5U
X0xPR19PVkVSRkxPVworICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBJT01N
VV9TVEFUVVNfUFBSX0xPR19PVkVSRkxPVywKICAgICAgICAgICAgaW9tbXUtPm1taW9fYmFzZSAr
IElPTU1VX1NUQVRVU19NTUlPX09GRlNFVCk7CiAKICAgICAvKnJlc2V0IGV2ZW50IGxvZyBiYXNl
IGFkZHJlc3MgKi8KQEAgLTU4OSw3ICs1ODgsNyBAQCBzdGF0aWMgdm9pZCBpb21tdV9jaGVja19l
dmVudF9sb2coc3RydWN0IGFtZF9pb21tdSAqaW9tbXUpCiAgICAgdW5zaWduZWQgbG9uZyBmbGFn
czsKIAogICAgIC8qIFJXMUMgaW50ZXJydXB0IHN0YXR1cyBiaXQgKi8KLSAgICB3cml0ZWwoSU9N
TVVfU1RBVFVTX0VWRU5UX0xPR19JTlRfTUFTSywKKyAgICB3cml0ZWwoSU9NTVVfU1RBVFVTX0VW
RU5UX0xPR19JTlQsCiAgICAgICAgICAgIGlvbW11LT5tbWlvX2Jhc2UgKyBJT01NVV9TVEFUVVNf
TU1JT19PRkZTRVQpOwogCiAgICAgaW9tbXVfcmVhZF9sb2coaW9tbXUsICZpb21tdS0+ZXZlbnRf
bG9nLApAQCAtNTk5LDcgKzU5OCw3IEBAIHN0YXRpYyB2b2lkIGlvbW11X2NoZWNrX2V2ZW50X2xv
ZyhzdHJ1Y3QgYW1kX2lvbW11ICppb21tdSkKICAgICAKICAgICAvKiBDaGVjayBldmVudCBvdmVy
Zmxvdy4gKi8KICAgICBlbnRyeSA9IHJlYWRsKGlvbW11LT5tbWlvX2Jhc2UgKyBJT01NVV9TVEFU
VVNfTU1JT19PRkZTRVQpOwotICAgIGlmICggaW9tbXVfZ2V0X2JpdChlbnRyeSwgSU9NTVVfU1RB
VFVTX0VWRU5UX09WRVJGTE9XX1NISUZUKSApCisgICAgaWYgKCBlbnRyeSAmIElPTU1VX1NUQVRV
U19FVkVOVF9MT0dfT1ZFUkZMT1cgKQogICAgICAgICBpb21tdV9yZXNldF9sb2coaW9tbXUsICZp
b21tdS0+ZXZlbnRfbG9nLCBzZXRfaW9tbXVfZXZlbnRfbG9nX2NvbnRyb2wpOwogICAgIGVsc2UK
ICAgICB7CkBAIC02MjEsNyArNjIwLDcgQEAgc3RhdGljIHZvaWQgaW9tbXVfY2hlY2tfZXZlbnRf
bG9nKHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11KQogICAgICAqIFJlLWNoZWNrIHRvIG1ha2Ugc3Vy
ZSB0aGUgYml0IGhhcyBiZWVuIGNsZWFyZWQuCiAgICAgICovCiAgICAgZW50cnkgPSByZWFkbChp
b21tdS0+bW1pb19iYXNlICsgSU9NTVVfU1RBVFVTX01NSU9fT0ZGU0VUKTsKLSAgICBpZiAoIGVu
dHJ5ICYgSU9NTVVfU1RBVFVTX0VWRU5UX0xPR19JTlRfTUFTSyApCisgICAgaWYgKCBlbnRyeSAm
IElPTU1VX1NUQVRVU19FVkVOVF9MT0dfSU5UICkKICAgICAgICAgdGFza2xldF9zY2hlZHVsZSgm
YW1kX2lvbW11X2lycV90YXNrbGV0KTsKIAogICAgIHNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmlv
bW11LT5sb2NrLCBmbGFncyk7CkBAIC02NzgsNyArNjc3LDcgQEAgc3RhdGljIHZvaWQgaW9tbXVf
Y2hlY2tfcHByX2xvZyhzdHJ1Y3QgYW1kX2lvbW11ICppb21tdSkKICAgICB1bnNpZ25lZCBsb25n
IGZsYWdzOwogCiAgICAgLyogUlcxQyBpbnRlcnJ1cHQgc3RhdHVzIGJpdCAqLwotICAgIHdyaXRl
bChJT01NVV9TVEFUVVNfUFBSX0xPR19JTlRfTUFTSywKKyAgICB3cml0ZWwoSU9NTVVfU1RBVFVT
X1BQUl9MT0dfSU5ULAogICAgICAgICAgICBpb21tdS0+bW1pb19iYXNlICsgSU9NTVVfU1RBVFVT
X01NSU9fT0ZGU0VUKTsKIAogICAgIGlvbW11X3JlYWRfbG9nKGlvbW11LCAmaW9tbXUtPnBwcl9s
b2csCkBAIC02ODgsNyArNjg3LDcgQEAgc3RhdGljIHZvaWQgaW9tbXVfY2hlY2tfcHByX2xvZyhz
dHJ1Y3QgYW1kX2lvbW11ICppb21tdSkKIAogICAgIC8qIENoZWNrIGV2ZW50IG92ZXJmbG93LiAq
LwogICAgIGVudHJ5ID0gcmVhZGwoaW9tbXUtPm1taW9fYmFzZSArIElPTU1VX1NUQVRVU19NTUlP
X09GRlNFVCk7Ci0gICAgaWYgKCBpb21tdV9nZXRfYml0KGVudHJ5LCBJT01NVV9TVEFUVVNfUFBS
X0xPR19PVkVSRkxPV19TSElGVCkgKQorICAgIGlmICggZW50cnkgJiBJT01NVV9TVEFUVVNfUFBS
X0xPR19PVkVSRkxPVyApCiAgICAgICAgIGlvbW11X3Jlc2V0X2xvZyhpb21tdSwgJmlvbW11LT5w
cHJfbG9nLCBzZXRfaW9tbXVfcHByX2xvZ19jb250cm9sKTsKICAgICBlbHNlCiAgICAgewpAQCAt
NzEwLDcgKzcwOSw3IEBAIHN0YXRpYyB2b2lkIGlvbW11X2NoZWNrX3Bwcl9sb2coc3RydWN0IGFt
ZF9pb21tdSAqaW9tbXUpCiAgICAgICogUmUtY2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBiaXQgaGFz
IGJlZW4gY2xlYXJlZC4KICAgICAgKi8KICAgICBlbnRyeSA9IHJlYWRsKGlvbW11LT5tbWlvX2Jh
c2UgKyBJT01NVV9TVEFUVVNfTU1JT19PRkZTRVQpOwotICAgIGlmICggZW50cnkgJiBJT01NVV9T
VEFUVVNfUFBSX0xPR19JTlRfTUFTSyApCisgICAgaWYgKCBlbnRyeSAmIElPTU1VX1NUQVRVU19Q
UFJfTE9HX0lOVCApCiAgICAgICAgIHRhc2tsZXRfc2NoZWR1bGUoJmFtZF9pb21tdV9pcnFfdGFz
a2xldCk7CiAKICAgICBzcGluX3VubG9ja19pcnFyZXN0b3JlKCZpb21tdS0+bG9jaywgZmxhZ3Mp
OwotLSAKMi4xMS4wCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5v
cmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZl
bA==

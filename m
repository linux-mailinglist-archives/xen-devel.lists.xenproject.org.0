Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id AC33D14389F
	for <lists+xen-devel@lfdr.de>; Tue, 21 Jan 2020 09:46:46 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1itp8e-0004Y1-EA; Tue, 21 Jan 2020 08:43:56 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=4mp0=3K=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1itp8c-0004X9-Lk
 for xen-devel@lists.xenproject.org; Tue, 21 Jan 2020 08:43:54 +0000
X-Inumbo-ID: 1ed0a51e-3c2a-11ea-8e9a-bc764e2007e4
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 1ed0a51e-3c2a-11ea-8e9a-bc764e2007e4;
 Tue, 21 Jan 2020 08:43:39 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id C3B3CB2C8;
 Tue, 21 Jan 2020 08:43:34 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Tue, 21 Jan 2020 09:43:27 +0100
Message-Id: <20200121084330.18309-7-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20200121084330.18309-1-jgross@suse.com>
References: <20200121084330.18309-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH v3 6/9] tools: add xenfs tool
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QWRkIHRoZSB4ZW5mcyB0b29sIGZvciBhY2Nlc3NpbmcgdGhlIGh5cGVydmlzb3IgZmlsZXN5c3Rl
bS4KClNpZ25lZC1vZmYtYnk6IEp1ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNvbT4KLS0tClYx
OgotIHJlbmFtZSB0byB4ZW5oeXBmcwotIGRvbid0IHVzZSAiLS0iIGZvciBzdWJjb21tYW5kcwot
IGFkZCB3cml0ZSBzdXBwb3J0CgpWMjoKLSBlc2NhcGUgbm9uLXByaW50YWJsZSBjaGFyYWN0ZXJz
IHBlciBkZWZhdWx0IHdpdGggY2F0IHN1YmNvbW1hbmQKICAoSWFuIEphY2tzb24pCi0gYWRkIC1i
IG9wdGlvbiB0byBjYXQgc3ViY29tbWFuZCAoSWFuIEphY2tzb24pCi0gYWRkIG1hbiBwYWdlCgpW
MzoKLSBhZGFwdCB0byBuZXcgaHlwZnMgaW50ZXJmYWNlCi0tLQogLmdpdGlnbm9yZSAgICAgICAg
ICAgICAgfCAgIDEgKwogZG9jcy9tYW4veGVuaHlwZnMuMS5wb2QgfCAgNjEgKysrKysrKysrKysr
KysrKwogdG9vbHMvbWlzYy9NYWtlZmlsZSAgICAgfCAgIDYgKysKIHRvb2xzL21pc2MveGVuaHlw
ZnMuYyAgIHwgMTg5ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKwogNCBmaWxlcyBjaGFuZ2VkLCAyNTcgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAw
NjQ0IGRvY3MvbWFuL3hlbmh5cGZzLjEucG9kCiBjcmVhdGUgbW9kZSAxMDA2NDQgdG9vbHMvbWlz
Yy94ZW5oeXBmcy5jCgpkaWZmIC0tZ2l0IGEvLmdpdGlnbm9yZSBiLy5naXRpZ25vcmUKaW5kZXgg
ZTk4YzNmMDU2ZC4uZmQ1NjEwNzE4ZCAxMDA2NDQKLS0tIGEvLmdpdGlnbm9yZQorKysgYi8uZ2l0
aWdub3JlCkBAIC0zNjcsNiArMzY3LDcgQEAgdG9vbHMvbGlieGwvdGVzdF90aW1lZGVyZWcKIHRv
b2xzL2xpYnhsL3Rlc3RfZmRkZXJlZ3JhY2UKIHRvb2xzL2Zpcm13YXJlL2V0aGVyYm9vdC9lYi1y
b21zLmgKIHRvb2xzL2Zpcm13YXJlL2V0aGVyYm9vdC9ncHhlLWdpdC1zbmFwc2hvdC50YXIuZ3oK
K3Rvb2xzL21pc2MveGVuaHlwZnMKIHRvb2xzL21pc2MveGVud2F0Y2hkb2dkCiB0b29scy9taXNj
L3hlbi1odm1jcmFzaAogdG9vbHMvbWlzYy94ZW4tbG93bWVtZApkaWZmIC0tZ2l0IGEvZG9jcy9t
YW4veGVuaHlwZnMuMS5wb2QgYi9kb2NzL21hbi94ZW5oeXBmcy4xLnBvZApuZXcgZmlsZSBtb2Rl
IDEwMDY0NAppbmRleCAwMDAwMDAwMDAwLi4zN2FhNDg4ZmNjCi0tLSAvZGV2L251bGwKKysrIGIv
ZG9jcy9tYW4veGVuaHlwZnMuMS5wb2QKQEAgLTAsMCArMSw2MSBAQAorPWhlYWQxIE5BTUUKKwor
eGVuaHlwZnMgLSBYZW4gdG9vbCB0byBhY2Nlc3MgWGVuIGh5cGVydmlzb3IgZmlsZSBzeXN0ZW0K
KworPWhlYWQxIFNZTk9QU0lTCisKK0I8eGVuaHlwZnM+IEk8c3ViY29tbWFuZD4gW0k8b3B0aW9u
cz5dIFtJPGFyZ3M+XQorCis9aGVhZDEgREVTQ1JJUFRJT04KKworVGhlIEI8eGVuaHlwZnM+IHBy
b2dyYW0gaXMgdXNlZCB0byBhY2Nlc3MgdGhlIFhlbiBoeXBlcnZpc29yIGZpbGUgc3lzdGVtLgor
SXQgY2FuIGJlIHVzZWQgdG8gc2hvdyB0aGUgYXZhaWxhYmxlIGVudHJpZXMsIHRvIHNob3cgdGhl
aXIgY29udGVudHMgYW5kCisoaWYgYWxsb3dlZCkgdG8gbW9kaWZ5IHRoZWlyIGNvbnRlbnRzLgor
Cis9aGVhZDEgU1VCQ09NTUFORFMKKworPW92ZXIgNAorCis9aXRlbSBCPGxzPiBJPHBhdGg+CisK
K0xpc3QgdGhlIGF2YWlsYWJsZSBlbnRyaWVzIGJlbG93IEk8cGF0aD4uCisKKz1pdGVtIEI8Y2F0
PiBbSTwtYj5dIEk8cGF0aD4KKworU2hvdyB0aGUgY29udGVudHMgb2YgdGhlIGVudHJ5IHNwZWNp
ZmllZCBieSBJPHBhdGg+LiBOb24tcHJpbnRhYmxlIGNoYXJhY3RlcnMKK290aGVyIHRoYW4gd2hp
dGUgc3BhY2UgY2hhcmFjdGVycyAobGlrZSB0YWIsIG5ldyBsaW5lKSB3aWxsIGJlIHNob3duIGFz
CitCPFx4bm4+IChCPG5uPiBiZWluZyBhIHR3byBkaWdpdCBoZXggbnVtYmVyKSB1bmxlc3MgdGhl
IG9wdGlvbiBCPC1iPiBpcworc3BlY2lmaWVkLgorCis9aXRlbSBCPHdyaXRlPiBJPHBhdGg+IEk8
dmFsdWU+CisKK1NldCB0aGUgY29udGVudHMgb2YgdGhlIGVudHJ5IHNwZWNpZmllZCBieSBJPHBh
dGg+IHRvIEk8dmFsdWU+LgorCis9aXRlbSBCPHRyZWU+CisKK1Nob3cgYWxsIHRoZSBlbnRyaWVz
IG9mIHRoZSBmaWxlIHN5c3RlbSBhcyBhIHRyZWUuCisKKz1iYWNrCisKKz1oZWFkMSBSRVRVUk4g
Q09ERVMKKworPW92ZXIgNAorCis9aXRlbSBCPDA+CisKK1N1Y2Nlc3MKKworPWl0ZW0gQjwxPgor
CitJbnZhbGlkIHVzYWdlIChlLmcuIHVua25vd24gc3ViY29tbWFuZCwgdW5rbm93biBvcHRpb24s
IG1pc3NpbmcgcGFyYW1ldGVyKS4KKworPWl0ZW0gQjwyPgorCitFbnRyeSBub3QgZm91bmQgd2hp
bGUgdHJhdmVyc2luZyB0aGUgdHJlZS4KKworPWl0ZW0gQjwzPgorCitBY2Nlc3MgcmlnaHQgdmlv
bGF0aW9uLgorCis9YmFjaworCmRpZmYgLS1naXQgYS90b29scy9taXNjL01ha2VmaWxlIGIvdG9v
bHMvbWlzYy9NYWtlZmlsZQppbmRleCA2Mzk0N2JmYWRjLi45ZmRiMTM1OTdmIDEwMDY0NAotLS0g
YS90b29scy9taXNjL01ha2VmaWxlCisrKyBiL3Rvb2xzL21pc2MvTWFrZWZpbGUKQEAgLTI0LDYg
KzI0LDcgQEAgSU5TVEFMTF9TQklOLSQoQ09ORklHX1g4NikgICAgICs9IHhlbi1sb3dtZW1kCiBJ
TlNUQUxMX1NCSU4tJChDT05GSUdfWDg2KSAgICAgKz0geGVuLW1mbmR1bXAKIElOU1RBTExfU0JJ
Ti0kKENPTkZJR19YODYpICAgICArPSB4ZW4tdWNvZGUKIElOU1RBTExfU0JJTiAgICAgICAgICAg
ICAgICAgICArPSB4ZW5jb3YKK0lOU1RBTExfU0JJTiAgICAgICAgICAgICAgICAgICArPSB4ZW5o
eXBmcwogSU5TVEFMTF9TQklOICAgICAgICAgICAgICAgICAgICs9IHhlbmxvY2twcm9mCiBJTlNU
QUxMX1NCSU4gICAgICAgICAgICAgICAgICAgKz0geGVucGVyZgogSU5TVEFMTF9TQklOICAgICAg
ICAgICAgICAgICAgICs9IHhlbnBtCkBAIC04Niw2ICs4Nyw5IEBAIHhlbnBlcmY6IHhlbnBlcmYu
bwogeGVucG06IHhlbnBtLm8KIAkkKENDKSAkKExERkxBR1MpIC1vICRAICQ8ICQoTERMSUJTX2xp
YnhlbmN0cmwpICQoQVBQRU5EX0xERkxBR1MpCiAKK3hlbmh5cGZzOiB4ZW5oeXBmcy5vCisJJChD
QykgJChMREZMQUdTKSAtbyAkQCAkPCAkKExETElCU19saWJ4ZW5oeXBmcykgJChBUFBFTkRfTERG
TEFHUykKKwogeGVubG9ja3Byb2Y6IHhlbmxvY2twcm9mLm8KIAkkKENDKSAkKExERkxBR1MpIC1v
ICRAICQ8ICQoTERMSUJTX2xpYnhlbmN0cmwpICQoQVBQRU5EX0xERkxBR1MpCiAKQEAgLTk0LDYg
Kzk4LDggQEAgeGVuLWhwdG9vbC5vOiBDRkxBR1MgKz0gLUkkKFhFTl9ST09UKS90b29scy9saWJ4
YyAkKENGTEFHU19saWJ4ZW5jYWxsKQogeGVuLWhwdG9vbDogeGVuLWhwdG9vbC5vCiAJJChDQykg
JChMREZMQUdTKSAtbyAkQCAkPCAkKExETElCU19saWJ4ZW5ldnRjaG4pICQoTERMSUJTX2xpYnhl
bmN0cmwpICQoTERMSUJTX2xpYnhlbmd1ZXN0KSAkKExETElCU19saWJ4ZW5zdG9yZSkgJChBUFBF
TkRfTERGTEFHUykKIAoreGVuaHlwZnMubzogQ0ZMQUdTICs9ICQoQ0ZMQUdTX2xpYnhlbmh5cGZz
KQorCiAjIHhlbi1tZm5kdW1wIGluY29ycmVjdGx5IHVzZXMgbGlieGMgaW50ZXJuYWxzCiB4ZW4t
bWZuZHVtcC5vOiBDRkxBR1MgKz0gLUkkKFhFTl9ST09UKS90b29scy9saWJ4YyAkKENGTEFHU19s
aWJ4ZW5jYWxsKQogeGVuLW1mbmR1bXA6IHhlbi1tZm5kdW1wLm8KZGlmZiAtLWdpdCBhL3Rvb2xz
L21pc2MveGVuaHlwZnMuYyBiL3Rvb2xzL21pc2MveGVuaHlwZnMuYwpuZXcgZmlsZSBtb2RlIDEw
MDY0NAppbmRleCAwMDAwMDAwMDAwLi4wYjgzNGJmNGZhCi0tLSAvZGV2L251bGwKKysrIGIvdG9v
bHMvbWlzYy94ZW5oeXBmcy5jCkBAIC0wLDAgKzEsMTg5IEBACisjZGVmaW5lIF9HTlVfU09VUkNF
CisjaW5jbHVkZSA8Y3R5cGUuaD4KKyNpbmNsdWRlIDxzdGRpby5oPgorI2luY2x1ZGUgPHN0ZGxp
Yi5oPgorI2luY2x1ZGUgPHN0cmluZy5oPgorI2luY2x1ZGUgPHhlbmh5cGZzLmg+CisKK3N0YXRp
YyBzdHJ1Y3QgeGVuaHlwZnNfaGFuZGxlICpoZGw7CisKK3N0YXRpYyBpbnQgdXNhZ2Uodm9pZCkK
K3sKKyAgICBmcHJpbnRmKHN0ZGVyciwgInVzYWdlOiB4ZW5oeXBmcyBscyA8cGF0aD5cbiIpOwor
ICAgIGZwcmludGYoc3RkZXJyLCAiICAgICAgIHhlbmh5cGZzIGNhdCBbLWJdIDxwYXRoPlxuIik7
CisgICAgZnByaW50ZihzdGRlcnIsICIgICAgICAgeGVuaHlwZnMgd3JpdGUgPHBhdGg+IDx2YWw+
XG4iKTsKKyAgICBmcHJpbnRmKHN0ZGVyciwgIiAgICAgICB4ZW5oeXBmcyB0cmVlXG4iKTsKKwor
ICAgIHJldHVybiAxOworfQorCitzdGF0aWMgdm9pZCB4ZW5oeXBmc19wcmludF9lc2NhcGVkKGNo
YXIgKnN0cmluZykKK3sKKyAgICBjaGFyICpjOworCisgICAgZm9yIChjID0gc3RyaW5nOyAqYzsg
YysrKSB7CisgICAgICAgIGlmIChpc2dyYXBoKCpjKSB8fCBpc3NwYWNlKCpjKSkKKyAgICAgICAg
ICAgIHByaW50ZigiJWMiLCAqYyk7CisgICAgICAgIGVsc2UKKyAgICAgICAgICAgIHByaW50Zigi
XFx4JTAyeCIsICpjKTsKKyAgICB9CisgICAgcHJpbnRmKCJcbiIpOworfQorCitzdGF0aWMgaW50
IHhlbmh5cGZzX2NhdChpbnQgYXJnYywgY2hhciAqYXJndltdKQoreworICAgIGludCByZXQgPSAw
OworICAgIGNoYXIgKnJlc3VsdDsKKyAgICBjaGFyICpwYXRoOworICAgIGJvb2wgYmluID0gZmFs
c2U7CisKKyAgICBzd2l0Y2ggKGFyZ2MpIHsKKyAgICBjYXNlIDE6CisgICAgICAgIHBhdGggPSBh
cmd2WzBdOworICAgICAgICBicmVhazsKKworICAgIGNhc2UgMjoKKyAgICAgICAgaWYgKHN0cmNt
cChhcmd2WzBdLCAiLWIiKSkKKyAgICAgICAgICAgIHJldHVybiB1c2FnZSgpOworICAgICAgICBi
aW4gPSB0cnVlOworICAgICAgICBwYXRoID0gYXJndlsxXTsKKyAgICAgICAgYnJlYWs7CisKKyAg
ICBkZWZhdWx0OgorICAgICAgICByZXR1cm4gdXNhZ2UoKTsKKyAgICB9CisKKyAgICByZXN1bHQg
PSB4ZW5oeXBmc19yZWFkKGhkbCwgcGF0aCk7CisgICAgaWYgKCFyZXN1bHQpIHsKKyAgICAgICAg
cGVycm9yKCJjb3VsZCBub3QgcmVhZCIpOworICAgICAgICByZXQgPSAzOworICAgIH0gZWxzZSB7
CisgICAgICAgIGlmICghYmluKQorICAgICAgICAgICAgcHJpbnRmKCIlc1xuIiwgcmVzdWx0KTsK
KyAgICAgICAgZWxzZQorICAgICAgICAgICAgeGVuaHlwZnNfcHJpbnRfZXNjYXBlZChyZXN1bHQp
OworICAgICAgICBmcmVlKHJlc3VsdCk7CisgICAgfQorCisgICAgcmV0dXJuIHJldDsKK30KKwor
c3RhdGljIGludCB4ZW5oeXBmc193cihjaGFyICpwYXRoLCBjaGFyICp2YWwpCit7CisgICAgaW50
IHJldDsKKworICAgIHJldCA9IHhlbmh5cGZzX3dyaXRlKGhkbCwgcGF0aCwgdmFsKTsKKyAgICBp
ZiAocmV0KSB7CisgICAgICAgIHBlcnJvcigiY291bGQgbm90IHdyaXRlIik7CisgICAgICAgIHJl
dCA9IDM7CisgICAgfQorCisgICAgcmV0dXJuIHJldDsKK30KKworc3RhdGljIGNoYXIgKnhlbmh5
cGZzX3R5cGUoc3RydWN0IHhlbmh5cGZzX2RpcmVudCAqZW50KQoreworICAgIGNoYXIgKnJlczsK
KworICAgIHN3aXRjaCAoZW50LT50eXBlKSB7CisgICAgY2FzZSB4ZW5oeXBmc190eXBlX2RpcjoK
KyAgICAgICAgcmVzID0gIjxkaXI+ICAgIjsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSB4ZW5o
eXBmc190eXBlX2Jsb2I6CisgICAgICAgIHJlcyA9ICI8YmxvYj4gICI7CisgICAgICAgIGJyZWFr
OworICAgIGNhc2UgeGVuaHlwZnNfdHlwZV9zdHJpbmc6CisgICAgICAgIHJlcyA9ICI8c3RyaW5n
PiI7CisgICAgICAgIGJyZWFrOworICAgIGNhc2UgeGVuaHlwZnNfdHlwZV91aW50OgorICAgICAg
ICByZXMgPSAiPHVpbnQ+ICAiOworICAgICAgICBicmVhazsKKyAgICBjYXNlIHhlbmh5cGZzX3R5
cGVfaW50OgorICAgICAgICByZXMgPSAiPGludD4gICAiOworICAgICAgICBicmVhazsKKyAgICBk
ZWZhdWx0OgorICAgICAgICByZXMgPSAiPFw/XD9cPz4gICAiOworICAgICAgICBicmVhazsKKyAg
ICB9CisKKyAgICByZXR1cm4gcmVzOworfQorCitzdGF0aWMgaW50IHhlbmh5cGZzX2xzKGNoYXIg
KnBhdGgpCit7CisgICAgc3RydWN0IHhlbmh5cGZzX2RpcmVudCAqZW50OworICAgIHVuc2lnbmVk
IGludCBuLCBpOworICAgIGludCByZXQgPSAwOworCisgICAgZW50ID0geGVuaHlwZnNfcmVhZGRp
cihoZGwsIHBhdGgsICZuKTsKKyAgICBpZiAoIWVudCkgeworICAgICAgICBwZXJyb3IoImNvdWxk
IG5vdCByZWFkIGRpciIpOworICAgICAgICByZXQgPSAzOworICAgIH0gZWxzZSB7CisgICAgICAg
IGZvciAoaSA9IDA7IGkgPCBuOyBpKyspCisgICAgICAgICAgICBwcmludGYoIiVzIHIlYyAlc1xu
IiwgeGVuaHlwZnNfdHlwZShlbnQgKyBpKSwKKyAgICAgICAgICAgICAgICAgICBlbnRbaV0uaXNf
d3JpdGFibGUgPyAndycgOiAnLScsIGVudFtpXS5uYW1lKTsKKworICAgICAgICBmcmVlKGVudCk7
CisgICAgfQorCisgICAgcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCB4ZW5oeXBmc190cmVl
X3N1YihjaGFyICpwYXRoLCB1bnNpZ25lZCBpbnQgZGVwdGgpCit7CisgICAgc3RydWN0IHhlbmh5
cGZzX2RpcmVudCAqZW50OworICAgIHVuc2lnbmVkIGludCBuLCBpOworICAgIGludCByZXQgPSAw
OworICAgIGNoYXIgKnA7CisKKyAgICBlbnQgPSB4ZW5oeXBmc19yZWFkZGlyKGhkbCwgcGF0aCwg
Jm4pOworICAgIGlmICghZW50KQorICAgICAgICByZXR1cm4gMjsKKworICAgIGZvciAoaSA9IDA7
IGkgPCBuOyBpKyspIHsKKyAgICAgICAgcHJpbnRmKCIlKnMlcyVzXG4iLCBkZXB0aCAqIDIsICIi
LCBlbnRbaV0ubmFtZSwKKyAgICAgICAgICAgICAgIGVudFtpXS50eXBlID09IHhlbmh5cGZzX3R5
cGVfZGlyID8gIi8iIDogIiIpOworICAgICAgICBpZiAoZW50W2ldLnR5cGUgPT0geGVuaHlwZnNf
dHlwZV9kaXIpIHsKKyAgICAgICAgICAgIGFzcHJpbnRmKCZwLCAiJXMlcyVzIiwgcGF0aCwgKGRl
cHRoID09IDEpID8gIiIgOiAiLyIsIGVudFtpXS5uYW1lKTsKKyAgICAgICAgICAgIGlmICh4ZW5o
eXBmc190cmVlX3N1YihwLCBkZXB0aCArIDEpKQorICAgICAgICAgICAgICAgIHJldCA9IDI7Cisg
ICAgICAgIH0KKyAgICB9CisKKyAgICBmcmVlKGVudCk7CisKKyAgICByZXR1cm4gcmV0OworfQor
CitzdGF0aWMgaW50IHhlbmh5cGZzX3RyZWUodm9pZCkKK3sKKyAgICBwcmludGYoIi9cbiIpOwor
CisgICAgcmV0dXJuIHhlbmh5cGZzX3RyZWVfc3ViKCIvIiwgMSk7Cit9CisKK2ludCBtYWluKGlu
dCBhcmdjLCBjaGFyICphcmd2W10pCit7CisgICAgaW50IHJldDsKKworICAgIGhkbCA9IHhlbmh5
cGZzX29wZW4oTlVMTCwgMCk7CisKKyAgICBpZiAoIWhkbCkgeworICAgICAgICBmcHJpbnRmKHN0
ZGVyciwgIkNvdWxkIG5vdCBvcGVuIGxpYnhlbmh5cGZzXG4iKTsKKyAgICAgICAgcmV0ID0gMjsK
KyAgICB9IGVsc2UgaWYgKGFyZ2MgPj0gMyAmJiAhc3RyY21wKGFyZ3ZbMV0sICJjYXQiKSkKKyAg
ICAgICAgcmV0ID0geGVuaHlwZnNfY2F0KGFyZ2MgLSAyLCBhcmd2ICsgMik7CisgICAgZWxzZSBp
ZiAoYXJnYyA9PSAzICYmICFzdHJjbXAoYXJndlsxXSwgImxzIikpCisgICAgICAgIHJldCA9IHhl
bmh5cGZzX2xzKGFyZ3ZbMl0pOworICAgIGVsc2UgaWYgKGFyZ2MgPT0gNCAmJiAhc3RyY21wKGFy
Z3ZbMV0sICJ3cml0ZSIpKQorICAgICAgICByZXQgPSB4ZW5oeXBmc193cihhcmd2WzJdLCBhcmd2
WzNdKTsKKyAgICBlbHNlIGlmIChhcmdjID09IDIgJiYgIXN0cmNtcChhcmd2WzFdLCAidHJlZSIp
KQorICAgICAgICByZXQgPSB4ZW5oeXBmc190cmVlKCk7CisgICAgZWxzZQorICAgICAgICByZXQg
PSB1c2FnZSgpOworCisgICAgeGVuaHlwZnNfY2xvc2UoaGRsKTsKKworICAgIHJldHVybiByZXQ7
Cit9Ci0tIAoyLjE2LjQKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0
Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRl
dmVs

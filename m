Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 66FC0B33B0
	for <lists+xen-devel@lfdr.de>; Mon, 16 Sep 2019 05:18:51 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i9hTm-0001rL-Hv; Mon, 16 Sep 2019 03:15:06 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=7FTx=XL=intel.com=chao.gao@srs-us1.protection.inumbo.net>)
 id 1i9hTk-0001rG-Gb
 for xen-devel@lists.xenproject.org; Mon, 16 Sep 2019 03:15:04 +0000
X-Inumbo-ID: 297d83a0-d830-11e9-95d4-12813bfff9fa
Received: from mga04.intel.com (unknown [192.55.52.120])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 297d83a0-d830-11e9-95d4-12813bfff9fa;
 Mon, 16 Sep 2019 03:14:58 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 15 Sep 2019 20:14:57 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,510,1559545200"; d="scan'208";a="185715744"
Received: from gao-cwp.sh.intel.com (HELO gao-cwp) ([10.239.159.26])
 by fmsmga008.fm.intel.com with ESMTP; 15 Sep 2019 20:14:54 -0700
Date: Mon, 16 Sep 2019 11:18:57 +0800
From: Chao Gao <chao.gao@intel.com>
To: Jan Beulich <jbeulich@suse.com>
Message-ID: <20190916031855.GA20697@gao-cwp>
References: <1568272949-1086-1-git-send-email-chao.gao@intel.com>
 <1568272949-1086-15-git-send-email-chao.gao@intel.com>
 <754c2336-d380-48ff-0e2e-185282256210@suse.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <754c2336-d380-48ff-0e2e-185282256210@suse.com>
User-Agent: Mutt/1.5.21 (2010-09-15)
Subject: Re: [Xen-devel] [PATCH v10 14/16] microcode: rendezvous CPUs in NMI
 handler and load ucode
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Sergey Dyasli <sergey.dyasli@citrix.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Ashok Raj <ashok.raj@intel.com>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>, xen-devel@lists.xenproject.org,
 Roger Pau =?iso-8859-1?Q?Monn=E9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gRnJpLCBTZXAgMTMsIDIwMTkgYXQgMTE6MTQ6NTlBTSArMDIwMCwgSmFuIEJldWxpY2ggd3Jv
dGU6Cj5PbiAxMi4wOS4yMDE5IDA5OjIyLCBDaGFvIEdhbyB3cm90ZToKPj4gV2hlbiBvbmUgY29y
ZSBpcyBsb2FkaW5nIHVjb2RlLCBoYW5kbGluZyBOTUkgb24gc2libGluZyB0aHJlYWRzIG9yCj4+
IG9uIG90aGVyIGNvcmVzIGluIHRoZSBzeXN0ZW0gbWlnaHQgYmUgcHJvYmxlbWF0aWMuIEJ5IHJl
bmRlenZvdXNpbmcKPj4gYWxsIENQVXMgaW4gTk1JIGhhbmRsZXIsIGl0IHByZXZlbnRzIE5NSSBh
Y2NlcHRhbmNlIGR1cmluZyB1Y29kZQo+PiBsb2FkaW5nLgo+PiAKPj4gQmFzaWNhbGx5LCBzb21l
IHdvcmsgcHJldmlvdXNseSBkb25lIGluIHN0b3BfbWFjaGluZSBjb250ZXh0IGlzCj4+IG1vdmVk
IHRvIE5NSSBoYW5kbGVyLiBQcmltYXJ5IHRocmVhZHMgY2FsbCBpbiBhbmQgbG9hZCB1Y29kZSBp
bgo+PiBOTUkgaGFuZGxlci4gU2Vjb25kYXJ5IHRocmVhZHMgd2FpdCBmb3IgdGhlIGNvbXBsZXRp
b24gb2YgdWNvZGUKPj4gbG9hZGluZyBvbiBhbGwgQ1BVIGNvcmVzLiBBbiBvcHRpb24gaXMgaW50
cm9kdWNlZCB0byBkaXNhYmxlIHRoaXMKPj4gYmVoYXZpb3IuCj4+IAo+PiBTaWduZWQtb2ZmLWJ5
OiBDaGFvIEdhbyA8Y2hhby5nYW9AaW50ZWwuY29tPgo+PiBTaWduZWQtb2ZmLWJ5OiBTZXJnZXkg
RHlhc2xpIDxzZXJnZXkuZHlhc2xpQGNpdHJpeC5jb20+Cj4KPgo+Cj4+IC0tLSBhL2RvY3MvbWlz
Yy94ZW4tY29tbWFuZC1saW5lLnBhbmRvYwo+PiArKysgYi9kb2NzL21pc2MveGVuLWNvbW1hbmQt
bGluZS5wYW5kb2MKPj4gQEAgLTIwNTYsNiArMjA1NiwxNiBAQCBtaWNyb2NvZGUgaW4gdGhlIGNw
aW8gbmFtZSBzcGFjZSBtdXN0IGJlOgo+PiAgICAtIG9uIEludGVsOiBrZXJuZWwveDg2L21pY3Jv
Y29kZS9HZW51aW5lSW50ZWwuYmluCj4+ICAgIC0gb24gQU1EICA6IGtlcm5lbC94ODYvbWljcm9j
b2RlL0F1dGhlbnRpY0FNRC5iaW4KPj4gIAo+PiArIyMjIHVjb2RlX2xvYWRpbmdfaW5fbm1pICh4
ODYpCj4+ICs+IGA9IDxib29sZWFuPmAKPj4gKwo+PiArPiBEZWZhdWx0OiBgdHJ1ZWAKPj4gKwo+
PiArV2hlbiBvbmUgQ1BVIGlzIGxvYWRpbmcgdWNvZGUsIGhhbmRsaW5nIE5NSXMgb24gc2libGlu
ZyB0aHJlYWRzIG9yIHRocmVhZHMgb24KPj4gK290aGVyIGNvcmVzIG1pZ2h0IGNhdXNlIHByb2Js
ZW1zLiBCeSBkZWZhdWx0LCBhbGwgQ1BVcyByZW5kZXp2b3VzIGluIE5NSSBoYW5kbGVyCj4+ICth
bmQgbG9hZCB1Y29kZS4gVGhpcyBvcHRpb24gcHJvdmlkZXMgYSB3YXkgdG8gZGlzYWJsZSBpdCBp
biBjYXNlIG9mIHNvbWUgQ1BVcwo+PiArZG9uJ3QgYWxsb3cgdWNvZGUgbG9hZGluZyBpbiBOTUkg
aGFuZGxlci4KPgo+V2UgYWxyZWFkeSBoYXZlICJ1Y29kZT0iLCB3aHkgZG9uJ3QgeW91IGV4dGVu
ZCBpdCB0byBhbGxvdyAidWNvZGU9bm1pIgo+YW5kICJ1Y29kZT1uby1ubWkiPyAoSW4gYW55IGV2
ZW50LCBwbGVhc2Ugbm8gdW5kZXJzY29yZXMgaW4gbmV3Cj5jb21tYW5kIGxpbmUgb3B0aW9ucyAt
IHVzZSBoeXBoZW5zIGlmIG5lY2Vzc2FyeS4pCgpPay4gV2lsbCBleHRlbmQgdGhlICJ1Y29kZSIg
cGFyYW1ldGVyLgoKPgo+PiBAQCAtMjMyLDYgKzIzNyw3IEBAIERFRklORV9QRVJfQ1BVKHN0cnVj
dCBjcHVfc2lnbmF0dXJlLCBjcHVfc2lnKTsKPj4gICAqLwo+PiAgc3RhdGljIGNwdW1hc2tfdCBj
cHVfY2FsbGluX21hcDsKPj4gIHN0YXRpYyBhdG9taWNfdCBjcHVfb3V0LCBjcHVfdXBkYXRlZDsK
Pj4gK2NvbnN0IHN0cnVjdCBtaWNyb2NvZGVfcGF0Y2ggKm5taV9wYXRjaDsKPgo+c3RhdGljCj4K
Pj4gQEAgLTM1NCw2ICszNjAsNTAgQEAgc3RhdGljIHZvaWQgc2V0X3N0YXRlKHVuc2lnbmVkIGlu
dCBzdGF0ZSkKPj4gICAgICBzbXBfd21iKCk7Cj4+ICB9Cj4+ICAKPj4gK3N0YXRpYyBpbnQgc2Vj
b25kYXJ5X3RocmVhZF93b3JrKHZvaWQpCj4+ICt7Cj4+ICsgICAgY3B1bWFza19zZXRfY3B1KHNt
cF9wcm9jZXNzb3JfaWQoKSwgJmNwdV9jYWxsaW5fbWFwKTsKPj4gKwo+PiArICAgIHJldHVybiB3
YWl0X2Zvcl9zdGF0ZShMT0FESU5HX0VYSVQpID8gMCA6IC1FQlVTWTsKPj4gK30KPj4gKwo+PiAr
c3RhdGljIGludCBwcmltYXJ5X3RocmVhZF93b3JrKGNvbnN0IHN0cnVjdCBtaWNyb2NvZGVfcGF0
Y2ggKnBhdGNoKQo+Cj5JIHRoaW5rIGl0IHdvdWxkIGJlIG5pY2UgaWYgYm90aCBmdW5jdGlvbnMg
Y2FycmllZCAibm1pIiBpbiB0aGVpcgo+bmFtZXMgLSBob3cgYWJvdXQge3ByaW1hcnksc2Vjb25k
YXJ5fV9ubWlfd29yaygpPyBPciB3YWl0IC0gdGhlCj5wcmltYXJ5IG9uZSBnZXRzIHVzZWQgb3V0
c2lkZSBvZiBOTUkgYXMgd2VsbCwgc28gSSdtIGZpbmUgd2l0aCBpdHMKPm5hbWUuCj5UaGUgc2Vj
b25kYXJ5IG9uZSwgb3RvaCwgaXMgTk1JLXNwZWNpZmljIGFuZCBhbHNvIGl0cyBvbmx5Cj5jYWxs
ZXIgZG9lc24ndCBjYXJlIGFib3V0IHRoZSByZXR1cm4gdmFsdWUsIHNvIEknZCBzdWdnZXN0IG1h
a2luZwo+aXQgcmV0dXJuIHZvaWQgYWxvbmdzaWRlIGFkZGluZyBzb21lIGZvcm0gb2YgIm5taSIg
dG8gaXRzIG5hbWUuIE9yLAoKV2lsbCBkby4KCj5wZXJoYXBzIGV2ZW4gYmV0dGVyLCBoYXZlIHNl
Y29uZGFyeV90aHJlYWRfZm4oKSBjYWxsIGl0LCBtb3ZpbmcgdGhlCj5jcHVfc2lnIHVwZGF0ZSBo
ZXJlIChhbmQgb2YgY291cnNlIHRoZW4gdGhlcmUgc2hvdWxkbid0IGJlIGFueQo+Im5taSIgYWRk
ZWQgdG8gaXRzIG5hbWUpLgoKRXZlbiB3aXRoICJ1Y29kZT1uby1ubWkiLCBzZWNvbmRhcnkgdGhy
ZWFkcyBoYXZlIHRvIGRvIGJ1c3ktbG9vcCBpbgpOTUkgaGFuZGxpbmcgdXRpbCBwcmltYXJ5IHRo
cmVhZHMgY29tcGxldGluZyB0aGUgdXBkYXRlLiBPdGhlcndpc2UsCml0IG1heSBhY2Nlc3MgTVNS
cyAobGlrZSBTUEVDX0NUUkwpIHdoaWNoIGlzIGNvbnNpZGVyZWQgdW5zYWZlLgoKPgo+PiArc3Rh
dGljIGludCBtaWNyb2NvZGVfbm1pX2NhbGxiYWNrKGNvbnN0IHN0cnVjdCBjcHVfdXNlcl9yZWdz
ICpyZWdzLCBpbnQgY3B1KQo+PiArewo+PiArICAgIHVuc2lnbmVkIGludCBwcmltYXJ5ID0gY3B1
bWFza19maXJzdCh0aGlzX2NwdShjcHVfc2libGluZ19tYXNrKSk7Cj4+ICsgICAgdW5zaWduZWQg
aW50IGNvbnRyb2xsZXIgPSBjcHVtYXNrX2ZpcnN0KCZjcHVfb25saW5lX21hcCk7Cj4+ICsKPj4g
KyAgICAvKiBTeXN0ZW0tZ2VuZXJhdGVkIE5NSSwgd2lsbCBiZSBpZ25vcmVkICovCj4+ICsgICAg
aWYgKCBsb2FkaW5nX3N0YXRlICE9IExPQURJTkdfQ0FMTElOICkKPj4gKyAgICAgICAgcmV0dXJu
IDA7Cj4KPkknbSBub3QgaGFwcHkgYXQgYWxsIHRvIHNlZSBOTUlzIGJlaW5nIGlnbm9yZWQuIEJ1
dCBieSByZXR1cm5pbmcKPnplcm8sIHlvdSBkbyBfbm90XyBpZ25vcmUgaXQuIERpZCB5b3UgcGVy
aGFwcyBtZWFuICJ3aWxsIGJlIGlnbm9yZWQKPmhlcmUiLCBpbiB3aGljaCBjYXNlIHBlcmhhcHMg
YmV0dGVyICJsZWF2ZSB0byBtYWluIGhhbmRsZXIiPyBBbmQKPmZvciB0aGUgY29tbWVudCB0byBl
eHRlbmQgdG8gdGhlIG90aGVyIHR3byBjb25kaXRpb25zIHJpZ2h0IGJlbG93LAo+SSB0aGluayBp
dCB3b3VsZCBiZSBiZXR0ZXIgdG8gY29tYmluZSB0aGVtIGFsbCBpbnRvIGEgc2luZ2xlIGlmKCku
Cj4KPkFsc28sIHRocm91Z2hvdXQgdGhlIHNlcmllcywgSSB0aGluayB5b3Ugd2FudCB0byBjb25z
aXN0ZW50bHkgdXNlCj5BQ0NFU1NfT05DRSgpIGZvciByZWFkcy93cml0ZXMgZnJvbS90byBsb2Fk
aW5nX3N0YXRlLgo+Cj4+ICsgICAgaWYgKCBjcHUgPT0gY29udHJvbGxlciB8fCAoIW9wdF91Y29k
ZV9sb2FkaW5nX2luX25taSAmJiBjcHUgPT0gcHJpbWFyeSkgKQo+PiArICAgICAgICByZXR1cm4g
MDsKPgo+V2h5IG5vdAoKQXMgSSBzYWlkIGFib3ZlLCBzZWNvbmRhcnkgdGhyZWFkcyBhcmUgZXhw
ZWN0ZWQgdG8gc3RheSBpbiBOTUkgaGFuZGxlcgpyZWdhcmRsZXNzIHRoZSBzZXR0aW5nIG9mIG9w
dF91Y29kZV9sb2FkaW5nX2luX25taS4KCj4+IC0tLSBhL3hlbi9hcmNoL3g4Ni90cmFwcy5jCj4+
ICsrKyBiL3hlbi9hcmNoL3g4Ni90cmFwcy5jCj4+IEBAIC0xMjYsNiArMTI2LDggQEAgYm9vbGVh
bl9wYXJhbSgibGVyIiwgb3B0X2xlcik7Cj4+ICAvKiBMYXN0RXhjZXB0aW9uRnJvbUlQIG9uIHRo
aXMgaGFyZHdhcmUuICBaZXJvIGlmIExFUiBpcyBub3QgaW4gdXNlLiAqLwo+PiAgdW5zaWduZWQg
aW50IF9fcmVhZF9tb3N0bHkgbGVyX21zcjsKPj4gIAo+PiArdW5zaWduZWQgaW50IF9fcmVhZF9t
b3N0bHkgbm1pX2NwdTsKPgo+U2luY2UgdGhpcyB2YXJpYWJsZSAoZm9yIG5vdykgaXMgbmV2ZXIg
d3JpdHRlbiB0byBpdCBzaG91bGQgZ2FpbiBhCj5jb21tZW50IHNheWluZyB3aHkgdGhpcyBpcywg
YW5kIHBlcmhhcHMgaXQgd291bGQgdGhlbiBhbHNvIGJldHRlciBiZQo+Y29uc3QgcmF0aGVyIHRo
YW4gX19yZWFkX21vc3RseS4KCkhvdyBhYm91dCB1c2UgdGhlIG1hY3JvIGJlbG93OgojZGVmaW5l
IE5NSV9DUFUgMAoKVGhhbmtzCkNoYW8KCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhl
bnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5m
by94ZW4tZGV2ZWw=

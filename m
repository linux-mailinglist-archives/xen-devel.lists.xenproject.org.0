Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 9361F17F029
	for <lists+xen-devel@lfdr.de>; Tue, 10 Mar 2020 06:35:05 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jBXTH-0008V4-99; Tue, 10 Mar 2020 05:30:27 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=pT5j=43=intel.com=kevin.tian@srs-us1.protection.inumbo.net>)
 id 1jBXTF-0008Uz-8j
 for xen-devel@lists.xenproject.org; Tue, 10 Mar 2020 05:30:25 +0000
X-Inumbo-ID: 3c1b7fb9-6290-11ea-ad04-12813bfff9fa
Received: from mga06.intel.com (unknown [134.134.136.31])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 3c1b7fb9-6290-11ea-ad04-12813bfff9fa;
 Tue, 10 Mar 2020 05:30:22 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga004.fm.intel.com ([10.253.24.48])
 by orsmga104.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Mar 2020 22:30:20 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,535,1574150400"; d="scan'208";a="265499355"
Received: from fmsmsx103.amr.corp.intel.com ([10.18.124.201])
 by fmsmga004.fm.intel.com with ESMTP; 09 Mar 2020 22:30:20 -0700
Received: from fmsmsx123.amr.corp.intel.com (10.18.125.38) by
 FMSMSX103.amr.corp.intel.com (10.18.124.201) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Mon, 9 Mar 2020 22:30:20 -0700
Received: from shsmsx154.ccr.corp.intel.com (10.239.6.54) by
 fmsmsx123.amr.corp.intel.com (10.18.125.38) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Mon, 9 Mar 2020 22:30:19 -0700
Received: from shsmsx104.ccr.corp.intel.com ([169.254.5.206]) by
 SHSMSX154.ccr.corp.intel.com ([169.254.7.145]) with mapi id 14.03.0439.000;
 Tue, 10 Mar 2020 13:30:17 +0800
From: "Tian, Kevin" <kevin.tian@intel.com>
To: Jan Beulich <jbeulich@suse.com>, "xen-devel@lists.xenproject.org"
 <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH v3] IOMMU: make DMA containment of quarantined devices
 optional
Thread-Index: AQHV9gMvA8DkILGx5UOf5iWNvNKXRqhBS9AQ
Date: Tue, 10 Mar 2020 05:30:17 +0000
Message-ID: <AADFC41AFE54684AB9EE6CBC0274A5D19D7C5DEC@SHSMSX104.ccr.corp.intel.com>
References: <83253657-b3b4-a045-b829-f8f4c4aeae28@suse.com>
In-Reply-To: <83253657-b3b4-a045-b829-f8f4c4aeae28@suse.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ctpclassification: CTP_NT
x-titus-metadata-40: eyJDYXRlZ29yeUxhYmVscyI6IiIsIk1ldGFkYXRhIjp7Im5zIjoiaHR0cDpcL1wvd3d3LnRpdHVzLmNvbVwvbnNcL0ludGVsMyIsImlkIjoiYmJiMTdhNTUtZTkzOS00N2Q0LWIwMGUtMTRjNTU0NmRhMjAzIiwicHJvcHMiOlt7Im4iOiJDVFBDbGFzc2lmaWNhdGlvbiIsInZhbHMiOlt7InZhbHVlIjoiQ1RQX05UIn1dfV19LCJTdWJqZWN0TGFiZWxzIjpbXSwiVE1DVmVyc2lvbiI6IjE3LjEwLjE4MDQuNDkiLCJUcnVzdGVkTGFiZWxIYXNoIjoiQVpHT0M4TUQzUmVSNXMzTzdFWEVrXC9XbzA2bk9qa3pBNE4wV1VGdXM0bFNjOHl6Yk03ZmhWaFlQNDV3TWFsMHAifQ==
dlp-product: dlpe-windows
dlp-version: 11.2.0.6
dlp-reaction: no-action
x-originating-ip: [10.239.127.40]
MIME-Version: 1.0
Subject: Re: [Xen-devel] [PATCH v3] IOMMU: make DMA containment of
 quarantined devices optional
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>, Paul Durrant <paul@xen.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

PiBGcm9tOiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+DQo+IFNlbnQ6IE1vbmRheSwg
TWFyY2ggOSwgMjAyMCA3OjA5IFBNDQo+IA0KPiBDb250YWluaW5nIHN0aWxsIGluIGZsaWdodCBE
TUEgd2FzIGludHJvZHVjZWQgdG8gd29yayBhcm91bmQgY2VydGFpbg0KPiBkZXZpY2VzIC8gc3lz
dGVtcyBoYW5naW5nIGhhcmQgdXBvbiBoaXR0aW5nIGEgIm5vdC1wcmVzZW50IiBJT01NVSBmYXVs
dC4NCj4gUGFzc2luZyB0aHJvdWdoIChzdWNoKSBkZXZpY2VzIChvbiBzdWNoIHN5c3RlbXMpIGlz
IGluaGVyZW50bHkgaW5zZWN1cmUNCj4gKGFzIGd1ZXN0cyBjb3VsZCBlYXNpbHkgYXJyYW5nZSBm
b3IgSU9NTVUgZmF1bHRzIG9mIGFueSBraW5kIHRvIG9jY3VyKS4NCj4gRGVmYXVsdGluZyB0byBh
IG1vZGUgd2hlcmUgYWRtaW5zIG1heSBub3QgZXZlbiBiZWNvbWUgYXdhcmUgb2YgaXNzdWVzDQo+
IHdpdGggZGV2aWNlcyBjYW4gYmUgY29uc2lkZXJlZCB1bmRlc2lyYWJsZS4gVGhlcmVmb3JlIGNv
bnZlcnQgdGhpcyBtb2RlDQo+IG9mIG9wZXJhdGlvbiB0byBhbiBvcHRpb25hbCBvbmUsIG5vdCBv
bmUgZW5hYmxlZCBieSBkZWZhdWx0Lg0KDQpIZXJlIGlzIGFub3RoZXIgdGhvdWdodC4gVGhlIHdo
b2xlIHBvaW50IG9mIHF1YXJhbnRpbmUgaXMgdG8gY29udGFpbg0KdGhlIGRldmljZSBhZnRlciBp
dCBpcyBkZWFzc2lnbmVkIGZyb20gdW50cnVzdGVkIGd1ZXN0LiBIb3dldmVyLCB0aGUNCnBhc3N0
aHJvdWdoIG9mIHN1Y2ggZGV2aWNlIGlzIGFscmVhZHkgaW5zZWN1cmUsIGFzIHlvdSBtZW50aW9u
ZWQuIA0KVGhlbiB3aHkgZG8gd2UgY2FyZSBhYm91dCBtYWtpbmcgZGVhc3NpZ25tZW50IG9mIHN1
Y2ggZGV2aWNlDQpzZWN1cmUgd2l0aG91dCBkb2luZyBhbnl0aGluZyB0byBzZWN1cmUgaXQgd2hl
biBpdCBpcyBhc3NpZ25lZCBhbmQgYmVpbmcNCnVzZWQgYnkgdW50cnVzdGVkIGd1ZXN0PyBJIGZl
ZWwgdGhhdCBvbmUgc2hvdWxkIHNpbXBseSBwdXQgc3VjaCBkZXZpY2UNCm91dCBvZiB0aGUgcXVh
cmFudGluZSBsaXN0IGluIHRoZSBmaXJzdCBwbGFjZSwgaS5lLiBzZXQgcXVhcmFudGluZT1mYWxz
ZSBhbmQNCnRoZW4gdXNlIHRvb2wgdG8gcXVhcmFudGluZSBhIHdoaXRlbGlzdCBvZiBkZXZpY2Vz
IGJ5IHNraXBwaW5nIHRoZSBiYWQgb25lLg0KDQo+IA0KPiBUaGlzIGludm9sdmVzIHJlc3VycmVj
dGluZyBjb2RlIGNvbW1pdCBlYTM4ODY3ODMxZGEgKCJ4ODYgLyBpb21tdTogc2V0DQo+IHVwIGEg
c2NyYXRjaCBwYWdlIGluIHRoZSBxdWFyYW50aW5lIGRvbWFpbiIpIGRpZCByZW1vdmUsIGluIGEg
c2xpZ2h0bHkNCj4gZXh0ZW5kZWQgYW5kIGFic3RyYWN0ZWQgZmFzaGlvbi4gSGVyZSwgaW5zdGVh
ZCBvZiByZWludHJvZHVjaW5nIGEgcHJldHR5DQo+IHBvaW50bGVzcyB1c2Ugb2YgImdvdG8iIGlu
IGRvbWFpbl9jb250ZXh0X3VubWFwKCksIGFuZCBpbnN0ZWFkIG9mIG1ha2luZw0KPiB0aGUgZnVu
Y3Rpb24gKGF0IGxlYXN0IHRlbXBvcmFyaWx5KSBpbmNvbnNpc3RlbnQsIHRha2UgdGhlIG9wcG9y
dHVuaXR5DQo+IGFuZCByZXBsYWNlIHRoZSBvdGhlciBzaW1pbGFybHkgcG9pbnRsZXNzICJnb3Rv
IiBhcyB3ZWxsLg0KPiANCj4gSW4gb3JkZXIgdG8ga2V5IHRoZSByZS1pbnN0YXRlZCBieXBhc3Nl
cyBvZmYgb2YgdGhlcmUgKG5vdCkgYmVpbmcgYSByb290DQo+IHBhZ2UgdGFibGUgdGhpcyBmdXJ0
aGVyIHJlcXVpcmVzIG1vdmluZyB0aGUgYWxsb2NhdGVfZG9tYWluX3Jlc291cmNlcygpDQo+IGlu
dm9jYXRpb24gZnJvbSByZWFzc2lnbl9kZXZpY2UoKSB0byBhbWRfaW9tbXVfc2V0dXBfZG9tYWlu
X2RldmljZSgpDQo+IChvcg0KPiBlbHNlIHJlYXNzaWduX2RldmljZSgpIHdvdWxkIGFsbG9jYXRl
IGEgcm9vdCBwYWdlIHRhYmxlIGFueXdheSk7IHRoaXMgaXMNCj4gYmVuaWduIHRvIHRoZSBzZWNv
bmQgY2FsbGVyIG9mIHRoZSBsYXR0ZXIgZnVuY3Rpb24uDQo+IA0KPiBUYWtlIHRoZSBvcHBvcnR1
bml0eSBhbmQgYWxzbyBsaW1pdCB0aGUgY29udHJvbCB0byBidWlsZHMgc3VwcG9ydGluZw0KPiBQ
Q0kuDQo+IA0KPiBTaWduZWQtb2ZmLWJ5OiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+
DQo+IC0tLQ0KPiBJJ20gaGFwcHkgdG8gdGFrZSBiZXR0ZXIgc3VnZ2VzdGlvbnMgdG8gcmVwbGFj
ZSB0aGUgImZ1bGwiIGNvbW1hbmQgbGluZQ0KPiBvcHRpb24gYW5kIEtjb25maWcgcHJvbXB0IHRv
a2Vucy4gSSBkb24ndCB0aGluayB0aG91Z2ggdGhhdCAiZmF1bHQiIGFuZA0KPiAid3JpdGUtZmF1
bHQiIGFyZSByZWFsbHkgc3VpdGFibGUgdGhlcmUuDQo+IC0tLQ0KPiBUaGlzIHBhdGNoIGNvbnRl
eHR1YWxseSBkZXBlbmRzIG9uICJbUEFUQ0ggdjIgMC81XSBJT01NVTogcmVzdHJpY3QNCj4gdmlz
aWJpbGl0eS9zY29wZSBpZiBjZXJ0YWluIHZhcmlhYmxlcyIuDQo+IC0tLQ0KPiB2MzogSU9NTVVf
cXVhcmFudGluZV9iYXNpYyAtPiBJT01NVV9xdWFyYW50aW5lX2ZhdWx0LA0KPiAgICAgSU9NTVVf
cXVhcmFudGluZV9mdWxsIC0+IElPTU1VX3F1YXJhbnRpbmVfd3JpdGVfZmF1bHQuIEtjb25maWcN
Cj4gICAgIG9wdGlvbiAoY2hvaWNlKSB0byBzZWxlY3QgZGVmYXVsdC4gTGltaXQgdG8gSEFTX1BD
SS4NCj4gdjI6IERvbid0IHVzZSB0cnVlL2ZhbHNlLiBJbnRyb2R1Y2UgUVVBUkFOVElORV9TS0lQ
KCkgKGFsYmVpdCBJJ20gbm90DQo+ICAgICByZWFsbHkgY29udmluY2VkIHRoaXMgaXMgYW4gaW1w
cm92ZW1lbnQpLiBBZGQgY29tbWVudC4NCj4gDQo+IC0tLSBhL2RvY3MvbWlzYy94ZW4tY29tbWFu
ZC1saW5lLnBhbmRvYw0KPiArKysgYi9kb2NzL21pc2MveGVuLWNvbW1hbmQtbGluZS5wYW5kb2MN
Cj4gQEAgLTEyMzgsNyArMTIzOCw3IEBAIGRldGVjdGlvbiBvZiBzeXN0ZW1zIGtub3duIHRvIG1p
c2JlaGF2ZQ0KPiAgPiBEZWZhdWx0OiBgbmV3YCB1bmxlc3MgZGlyZWN0ZWQtRU9JIGlzIHN1cHBv
cnRlZA0KPiANCj4gICMjIyBpb21tdQ0KPiAtICAgID0gTGlzdCBvZiBbIDxib29sPiwgdmVyYm9z
ZSwgZGVidWcsIGZvcmNlLCByZXF1aXJlZCwgcXVhcmFudGluZSwNCj4gKyAgICA9IExpc3Qgb2Yg
WyA8Ym9vbD4sIHZlcmJvc2UsIGRlYnVnLCBmb3JjZSwgcmVxdWlyZWQsIHF1YXJhbnRpbmVbPWZ1
bGxdLA0KPiAgICAgICAgICAgICAgICAgIHNoYXJlcHQsIGludHJlbWFwLCBpbnRwb3N0LCBjcmFz
aC1kaXNhYmxlLA0KPiAgICAgICAgICAgICAgICAgIHNub29wLCBxaW52YWwsIGlnZngsIGFtZC1p
b21tdS1wZXJkZXYtaW50cmVtYXAsDQo+ICAgICAgICAgICAgICAgICAgZG9tMC17cGFzc3Rocm91
Z2gsc3RyaWN0fSBdDQo+IEBAIC0xMjc2LDExICsxMjc2LDE1IEBAIGJvb2xlYW4gKGUuZy4gYGlv
bW11PW5vYCkgY2FuIG92ZXJyaWRlIHQNCj4gICAgICB3aWxsIHByZXZlbnQgWGVuIGZyb20gYm9v
dGluZyBpZiBJT01NVXMgYXJlbid0IGRpc2NvdmVyZWQgYW5kIGVuYWJsZWQNCj4gICAgICBzdWNj
ZXNzZnVsbHkuDQo+IA0KPiAtKiAgIFRoZSBgcXVhcmFudGluZWAgYm9vbGVhbiBjYW4gYmUgdXNl
ZCB0byBjb250cm9sIFhlbidzIGJlaGF2aW9yIHdoZW4NCj4gLSAgICBkZS1hc3NpZ25pbmcgZGV2
aWNlcyBmcm9tIGd1ZXN0cy4gIElmIGVuYWJsZWQgKHRoZSBkZWZhdWx0KSwgWGVuIGFsd2F5cw0K
PiAtICAgIHF1YXJhbnRpbmVzIHN1Y2ggZGV2aWNlczsgdGhleSBtdXN0IGJlIGV4cGxpY2l0bHkg
YXNzaWduZWQgYmFjayB0byBEb20wDQo+IC0gICAgYmVmb3JlIHRoZXkgY2FuIGJlIHVzZWQgdGhl
cmUgYWdhaW4uICBJZiBkaXNhYmxlZCwgWGVuIHdpbGwgb25seQ0KPiAtICAgIHF1YXJhbnRpbmUg
ZGV2aWNlcyB0aGUgdG9vbHN0YWNrIGhhc3MgYXJyYW5nZWQgZm9yIGdldHRpbmcgcXVhcmFudGlu
ZWQuDQo+ICsqICAgVGhlIGBxdWFyYW50aW5lYCBvcHRpb24gY2FuIGJlIHVzZWQgdG8gY29udHJv
bCBYZW4ncyBiZWhhdmlvciB3aGVuDQo+ICsgICAgZGUtYXNzaWduaW5nIGRldmljZXMgZnJvbSBn
dWVzdHMuICBJZiBzZXQgdG8gdHJ1ZSAodGhlIGRlZmF1bHQpLCBYZW4NCj4gKyAgICBhbHdheXMg
cXVhcmFudGluZXMgc3VjaCBkZXZpY2VzOyB0aGV5IG11c3QgYmUgZXhwbGljaXRseSBhc3NpZ25l
ZCBiYWNrDQo+ICsgICAgdG8gRG9tMCBiZWZvcmUgdGhleSBjYW4gYmUgdXNlZCB0aGVyZSBhZ2Fp
bi4gIElmIHNldCB0byAiZnVsbCIsIHN0aWxsDQo+ICsgICAgYWN0aXZlIERNQSB3aWxsIGFkZGl0
aW9uYWxseSBiZSBkaXJlY3RlZCB0byBhICJzaW5rIiBwYWdlLiAgSWYgc2V0IHRvDQo+ICsgICAg
ZmFsc2UsIFhlbiB3aWxsIG9ubHkgcXVhcmFudGluZSBkZXZpY2VzIHRoZSB0b29sc3RhY2sgaGFz
IGFycmFuZ2VkIGZvcg0KPiArICAgIGdldHRpbmcgcXVhcmFudGluZWQuDQo+ICsNCj4gKyAgICBU
aGlzIG9wdGlvbiBpcyBvbmx5IHZhbGlkIG9uIGJ1aWxkcyBzdXBwb3J0aW5nIFBDSS4NCj4gDQo+
ICAqICAgVGhlIGBzaGFyZXB0YCBib29sZWFuIGNvbnRyb2xzIHdoZXRoZXIgdGhlIElPTU1VIHBh
Z2V0YWJsZXMgYXJlDQo+IHNoYXJlZA0KPiAgICAgIHdpdGggdGhlIENQVS1zaWRlIEhBUCBwYWdl
dGFibGVzLCBvciBhbGxvY2F0ZWQgc2VwYXJhdGVseS4gIFNoYXJpbmcNCj4gLS0tIGEveGVuL2Ry
aXZlcnMvcGFzc3Rocm91Z2gvS2NvbmZpZw0KPiArKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3Vn
aC9LY29uZmlnDQo+IEBAIC0yOCwzICsyOCwzMSBAQCBlbmRpZg0KPiANCj4gIGNvbmZpZyBJT01N
VV9GT1JDRV9QVF9TSEFSRQ0KPiAgCWJvb2wNCj4gKw0KPiArY2hvaWNlDQo+ICsJcHJvbXB0ICJJ
T01NVSBkZXZpY2UgcXVhcmFudGluaW5nIGRlZmF1bHQgYmVoYXZpb3IiDQo+ICsJZGVwZW5kcyBv
biBIQVNfUENJDQo+ICsJZGVmYXVsdCBJT01NVV9RVUFSQU5USU5FX0JBU0lDDQo+ICsJLS0taGVs
cC0tLQ0KPiArCSAgV2hlbiBhIFBDSSBkZXZpY2UgaXMgYXNzaWduZWQgdG8gYW4gdW50cnVzdGVk
IGRvbWFpbiwgaXQgaXMgcG9zc2libGUNCj4gKwkgIGZvciB0aGF0IGRvbWFpbiB0byBwcm9ncmFt
IHRoZSBkZXZpY2UgdG8gRE1BIHRvIGFuIGFyYml0cmFyeQ0KPiBhZGRyZXNzLg0KPiArCSAgVGhl
IElPTU1VIGlzIHVzZWQgdG8gcHJvdGVjdCB0aGUgaG9zdCBmcm9tIG1hbGljaW91cyBETUEgYnkN
Cj4gbWFraW5nDQo+ICsJICBzdXJlIHRoYXQgdGhlIGRldmljZSBhZGRyZXNzZXMgY2FuIG9ubHkg
dGFyZ2V0IG1lbW9yeSBhc3NpZ25lZCB0bw0KPiB0aGUNCj4gKwkgIGd1ZXN0LiAgSG93ZXZlciwg
d2hlbiB0aGUgZ3Vlc3QgZG9tYWluIGlzIHRvcm4gZG93biwgYXNzaWduaW5nIHRoZQ0KPiArCSAg
ZGV2aWNlIGJhY2sgdG8gdGhlIGhhcmR3YXJlIGRvbWFpbiB3b3VsZCBhbGxvdyBhbnkgaW4tZmxp
Z2h0IERNQQ0KPiB0bw0KPiArCSAgcG90ZW50aWFsbHkgdGFyZ2V0IGNyaXRpY2FsIGhvc3QgZGF0
YS4gIFRvIGF2b2lkIHRoaXMsIHF1YXJhbnRpbmluZw0KPiArCSAgc2hvbGQgYmUgZW5hYmxlZC4g
IFF1YXJhbnRpbmluZyBjYW4gYmUgZG9uZSBpbiB0d28gd2F5czogSW4gaXRzDQo+IGJhc2ljDQo+
ICsJICBmb3JtLCBhbGwgaW4tZmxpZ2h0IERNQSB3aWxsIHNpbXBseSBiZSBmb3JjZWQgdG8gZW5j
b3VudGVyIElPTU1VDQo+ICsJICBmYXVsdHMuICBTaW5jZSB0aGVyZSBhcmUgc3lzdGVtcyB3aGVy
ZSBkb2luZyBzbyBjYW4gY2F1c2UgaG9zdA0KPiArCSAgbG9ja3VwLCBhbiBhbHRlcm5hdGl2ZSBm
b3JtIGlzIGF2YWlsYWJsZSB3aGVyZSB3cml0ZXMgdG8gbWVtb3J5IHdpbGwNCj4gKwkgIGJlIG1h
ZGUgZmF1bHQsIGJ1dCByZWFkcyB3aWxsIGJlIGRpcmVjdGVkIHRvIGEgZHVtbXkgcGFnZS4gIFRo
ZQ0KPiArCSAgaW1wbGljYXRpb24gaGVyZSBpcyB0aGF0IHN1Y2ggcmVhZHMgd2lsbCBnbyB1bm5v
dGljZWQsIGkuZS4gYW4gYWRtaW4NCj4gKwkgIG1heSBub3QgYmVjb21lIGF3YXJlIG9mIHRoZSB1
bmRlcmx5aW5nIHByb2JsZW0uDQo+ICsNCj4gKwljb25maWcgSU9NTVVfUVVBUkFOVElORV9OT05F
DQo+ICsJCWJvb2wgIm5vbmUiDQo+ICsJY29uZmlnIElPTU1VX1FVQVJBTlRJTkVfQkFTSUMNCj4g
KwkJYm9vbCAiYmFzaWMiDQo+ICsJY29uZmlnIElPTU1VX1FVQVJBTlRJTkVfRlVMTA0KPiArCQli
b29sICJmdWxsIg0KPiArZW5kY2hvaWNlDQo+IC0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdo
L2FtZC9wY2lfYW1kX2lvbW11LmMNCj4gKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1k
L3BjaV9hbWRfaW9tbXUuYw0KPiBAQCAtMjUsNiArMjUsOSBAQA0KPiAgI2luY2x1ZGUgImlvbW11
LmgiDQo+ICAjaW5jbHVkZSAiLi4vYXRzLmgiDQo+IA0KPiArLyogZG9tX2lvIGlzIHVzZWQgYXMg
YSBzZW50aW5lbCBmb3IgcXVhcmFudGluZWQgZGV2aWNlcyAqLw0KPiArI2RlZmluZSBRVUFSQU5U
SU5FX1NLSVAoZCkgKChkKSA9PSBkb21faW8gJiYgIWRvbV9pb21tdShkKS0NCj4gPmFyY2gucm9v
dF90YWJsZSkNCj4gKw0KPiAgc3RhdGljIGJvb2xfdCBfX3JlYWRfbW9zdGx5IGluaXRfZG9uZTsN
Cj4gDQo+ICBzdGF0aWMgY29uc3Qgc3RydWN0IGlvbW11X2luaXRfb3BzIF9pb21tdV9pbml0X29w
czsNCj4gQEAgLTgyLDE4ICs4NSwzNSBAQCBpbnQgZ2V0X2RtYV9yZXF1ZXN0b3JfaWQodWludDE2
X3Qgc2VnLCB1DQo+ICAgICAgcmV0dXJuIHJlcV9pZDsNCj4gIH0NCj4gDQo+IC1zdGF0aWMgdm9p
ZCBhbWRfaW9tbXVfc2V0dXBfZG9tYWluX2RldmljZSgNCj4gK3N0YXRpYyBpbnQgX19tdXN0X2No
ZWNrIGFsbG9jYXRlX2RvbWFpbl9yZXNvdXJjZXMoc3RydWN0IGRvbWFpbl9pb21tdQ0KPiAqaGQp
DQo+ICt7DQo+ICsgICAgaW50IHJjOw0KPiArDQo+ICsgICAgc3Bpbl9sb2NrKCZoZC0+YXJjaC5t
YXBwaW5nX2xvY2spOw0KPiArICAgIHJjID0gYW1kX2lvbW11X2FsbG9jX3Jvb3QoaGQpOw0KPiAr
ICAgIHNwaW5fdW5sb2NrKCZoZC0+YXJjaC5tYXBwaW5nX2xvY2spOw0KPiArDQo+ICsgICAgcmV0
dXJuIHJjOw0KPiArfQ0KPiArDQo+ICtzdGF0aWMgaW50IF9fbXVzdF9jaGVjayBhbWRfaW9tbXVf
c2V0dXBfZG9tYWluX2RldmljZSgNCj4gICAgICBzdHJ1Y3QgZG9tYWluICpkb21haW4sIHN0cnVj
dCBhbWRfaW9tbXUgKmlvbW11LA0KPiAgICAgIHVpbnQ4X3QgZGV2Zm4sIHN0cnVjdCBwY2lfZGV2
ICpwZGV2KQ0KPiAgew0KPiAgICAgIHN0cnVjdCBhbWRfaW9tbXVfZHRlICp0YWJsZSwgKmR0ZTsN
Cj4gICAgICB1bnNpZ25lZCBsb25nIGZsYWdzOw0KPiAtICAgIGludCByZXFfaWQsIHZhbGlkID0g
MTsNCj4gKyAgICBpbnQgcmVxX2lkLCB2YWxpZCA9IDEsIHJjOw0KPiAgICAgIHU4IGJ1cyA9IHBk
ZXYtPmJ1czsNCj4gLSAgICBjb25zdCBzdHJ1Y3QgZG9tYWluX2lvbW11ICpoZCA9IGRvbV9pb21t
dShkb21haW4pOw0KPiArICAgIHN0cnVjdCBkb21haW5faW9tbXUgKmhkID0gZG9tX2lvbW11KGRv
bWFpbik7DQo+ICsNCj4gKyAgICBpZiAoIFFVQVJBTlRJTkVfU0tJUChkb21haW4pICkNCj4gKyAg
ICAgICAgcmV0dXJuIDA7DQo+ICsNCj4gKyAgICBCVUdfT04oIWhkLT5hcmNoLnBhZ2luZ19tb2Rl
IHx8ICFpb21tdS0+ZGV2X3RhYmxlLmJ1ZmZlcik7DQo+IA0KPiAtICAgIEJVR19PTiggIWhkLT5h
cmNoLnJvb3RfdGFibGUgfHwgIWhkLT5hcmNoLnBhZ2luZ19tb2RlIHx8DQo+IC0gICAgICAgICAg
ICAhaW9tbXUtPmRldl90YWJsZS5idWZmZXIgKTsNCj4gKyAgICByYyA9IGFsbG9jYXRlX2RvbWFp
bl9yZXNvdXJjZXMoaGQpOw0KPiArICAgIGlmICggcmMgKQ0KPiArICAgICAgICByZXR1cm4gcmM7
DQo+IA0KPiAgICAgIGlmICggaW9tbXVfaHdkb21fcGFzc3Rocm91Z2ggJiYgaXNfaGFyZHdhcmVf
ZG9tYWluKGRvbWFpbikgKQ0KPiAgICAgICAgICB2YWxpZCA9IDA7DQo+IEBAIC0xNDgsNiArMTY4
LDggQEAgc3RhdGljIHZvaWQgYW1kX2lvbW11X3NldHVwX2RvbWFpbl9kZXZpYw0KPiANCj4gICAg
ICAgICAgYW1kX2lvbW11X2ZsdXNoX2lvdGxiKGRldmZuLCBwZGV2LA0KPiBJTlZfSU9NTVVfQUxM
X1BBR0VTX0FERFJFU1MsIDApOw0KPiAgICAgIH0NCj4gKw0KPiArICAgIHJldHVybiAwOw0KPiAg
fQ0KPiANCj4gIGludCBfX2luaXQgYWNwaV9pdnJzX2luaXQodm9pZCkNCj4gQEAgLTIxNywxNyAr
MjM5LDYgQEAgaW50IGFtZF9pb21tdV9hbGxvY19yb290KHN0cnVjdCBkb21haW5faQ0KPiAgICAg
IHJldHVybiAwOw0KPiAgfQ0KPiANCj4gLXN0YXRpYyBpbnQgX19tdXN0X2NoZWNrIGFsbG9jYXRl
X2RvbWFpbl9yZXNvdXJjZXMoc3RydWN0IGRvbWFpbl9pb21tdQ0KPiAqaGQpDQo+IC17DQo+IC0g
ICAgaW50IHJjOw0KPiAtDQo+IC0gICAgc3Bpbl9sb2NrKCZoZC0+YXJjaC5tYXBwaW5nX2xvY2sp
Ow0KPiAtICAgIHJjID0gYW1kX2lvbW11X2FsbG9jX3Jvb3QoaGQpOw0KPiAtICAgIHNwaW5fdW5s
b2NrKCZoZC0+YXJjaC5tYXBwaW5nX2xvY2spOw0KPiAtDQo+IC0gICAgcmV0dXJuIHJjOw0KPiAt
fQ0KPiAtDQo+ICBpbnQgYW1kX2lvbW11X2dldF9wYWdpbmdfbW9kZSh1bnNpZ25lZCBsb25nIGVu
dHJpZXMpDQo+ICB7DQo+ICAgICAgaW50IGxldmVsID0gMTsNCj4gQEAgLTI5MSw2ICszMDIsOSBA
QCBzdGF0aWMgdm9pZCBhbWRfaW9tbXVfZGlzYWJsZV9kb21haW5fZGV2DQo+ICAgICAgaW50IHJl
cV9pZDsNCj4gICAgICB1OCBidXMgPSBwZGV2LT5idXM7DQo+IA0KPiArICAgIGlmICggUVVBUkFO
VElORV9TS0lQKGRvbWFpbikgKQ0KPiArICAgICAgICByZXR1cm47DQo+ICsNCj4gICAgICBCVUdf
T04gKCBpb21tdS0+ZGV2X3RhYmxlLmJ1ZmZlciA9PSBOVUxMICk7DQo+ICAgICAgcmVxX2lkID0g
Z2V0X2RtYV9yZXF1ZXN0b3JfaWQoaW9tbXUtPnNlZywgUENJX0JERjIoYnVzLCBkZXZmbikpOw0K
PiAgICAgIHRhYmxlID0gaW9tbXUtPmRldl90YWJsZS5idWZmZXI7DQo+IEBAIC0zMzcsNyArMzUx
LDYgQEAgc3RhdGljIGludCByZWFzc2lnbl9kZXZpY2Uoc3RydWN0IGRvbWFpbg0KPiAgew0KPiAg
ICAgIHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11Ow0KPiAgICAgIGludCBiZGYsIHJjOw0KPiAtICAg
IHN0cnVjdCBkb21haW5faW9tbXUgKnQgPSBkb21faW9tbXUodGFyZ2V0KTsNCj4gDQo+ICAgICAg
YmRmID0gUENJX0JERjIocGRldi0+YnVzLCBwZGV2LT5kZXZmbik7DQo+ICAgICAgaW9tbXUgPSBm
aW5kX2lvbW11X2Zvcl9kZXZpY2UocGRldi0+c2VnLCBiZGYpOw0KPiBAQCAtMzU4LDExICszNzEs
MTAgQEAgc3RhdGljIGludCByZWFzc2lnbl9kZXZpY2Uoc3RydWN0IGRvbWFpbg0KPiAgICAgICAg
ICBwZGV2LT5kb21haW4gPSB0YXJnZXQ7DQo+ICAgICAgfQ0KPiANCj4gLSAgICByYyA9IGFsbG9j
YXRlX2RvbWFpbl9yZXNvdXJjZXModCk7DQo+ICsgICAgcmMgPSBhbWRfaW9tbXVfc2V0dXBfZG9t
YWluX2RldmljZSh0YXJnZXQsIGlvbW11LCBkZXZmbiwgcGRldik7DQo+ICAgICAgaWYgKCByYyAp
DQo+ICAgICAgICAgIHJldHVybiByYzsNCj4gDQo+IC0gICAgYW1kX2lvbW11X3NldHVwX2RvbWFp
bl9kZXZpY2UodGFyZ2V0LCBpb21tdSwgZGV2Zm4sIHBkZXYpOw0KPiAgICAgIEFNRF9JT01NVV9E
RUJVRygiUmUtYXNzaWduICUwNHg6JTAyeDolMDJ4LiV1IGZyb20gZG9tJWQgdG8NCj4gZG9tJWRc
biIsDQo+ICAgICAgICAgICAgICAgICAgICAgIHBkZXYtPnNlZywgcGRldi0+YnVzLCBQQ0lfU0xP
VChkZXZmbiksIFBDSV9GVU5DKGRldmZuKSwNCj4gICAgICAgICAgICAgICAgICAgICAgc291cmNl
LT5kb21haW5faWQsIHRhcmdldC0+ZG9tYWluX2lkKTsNCj4gQEAgLTUxOSw4ICs1MzEsNyBAQCBz
dGF0aWMgaW50IGFtZF9pb21tdV9hZGRfZGV2aWNlKHU4IGRldmZuDQo+ICAgICAgICAgIHNwaW5f
dW5sb2NrX2lycXJlc3RvcmUoJmlvbW11LT5sb2NrLCBmbGFncyk7DQo+ICAgICAgfQ0KPiANCj4g
LSAgICBhbWRfaW9tbXVfc2V0dXBfZG9tYWluX2RldmljZShwZGV2LT5kb21haW4sIGlvbW11LCBk
ZXZmbiwgcGRldik7DQo+IC0gICAgcmV0dXJuIDA7DQo+ICsgICAgcmV0dXJuIGFtZF9pb21tdV9z
ZXR1cF9kb21haW5fZGV2aWNlKHBkZXYtPmRvbWFpbiwgaW9tbXUsIGRldmZuLA0KPiBwZGV2KTsN
Cj4gIH0NCj4gDQo+ICBzdGF0aWMgaW50IGFtZF9pb21tdV9yZW1vdmVfZGV2aWNlKHU4IGRldmZu
LCBzdHJ1Y3QgcGNpX2RldiAqcGRldikNCj4gLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gv
aW9tbXUuYw0KPiArKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5jDQo+IEBAIC0z
MSw5ICszMSwyNCBAQCBib29sX3QgX19pbml0ZGF0YSBpb21tdV9lbmFibGUgPSAxOw0KPiAgYm9v
bF90IF9fcmVhZF9tb3N0bHkgaW9tbXVfZW5hYmxlZDsNCj4gIGJvb2xfdCBfX3JlYWRfbW9zdGx5
IGZvcmNlX2lvbW11Ow0KPiAgYm9vbF90IF9fcmVhZF9tb3N0bHkgaW9tbXVfdmVyYm9zZTsNCj4g
LWJvb2wgX19yZWFkX21vc3RseSBpb21tdV9xdWFyYW50aW5lID0gdHJ1ZTsNCj4gIGJvb2xfdCBf
X3JlYWRfbW9zdGx5IGlvbW11X2NyYXNoX2Rpc2FibGU7DQo+IA0KPiArI2RlZmluZSBJT01NVV9x
dWFyYW50aW5lX25vbmUgICAgICAgIDAgLyogYWthIGZhbHNlICovDQo+ICsjZGVmaW5lIElPTU1V
X3F1YXJhbnRpbmVfZmF1bHQgICAgICAgMSAvKiBha2EgdHJ1ZSAqLw0KPiArI2RlZmluZSBJT01N
VV9xdWFyYW50aW5lX3dyaXRlX2ZhdWx0IDINCj4gKyNpZmRlZiBDT05GSUdfSEFTX1BDSQ0KPiAr
dWludDhfdCBfX3JlYWRfbW9zdGx5IGlvbW11X3F1YXJhbnRpbmUgPQ0KPiArIyBpZiBkZWZpbmVk
KENPTkZJR19JT01NVV9RVUFSQU5USU5FX05PTkUpDQo+ICsgICAgSU9NTVVfcXVhcmFudGluZV9u
b25lOw0KPiArIyBlbGlmIGRlZmluZWQoQ09ORklHX0lPTU1VX1FVQVJBTlRJTkVfQkFTSUMpDQo+
ICsgICAgSU9NTVVfcXVhcmFudGluZV9mYXVsdDsNCj4gKyMgZWxpZiBkZWZpbmVkKENPTkZJR19J
T01NVV9RVUFSQU5USU5FX0ZVTEwpDQo+ICsgICAgSU9NTVVfcXVhcmFudGluZV93cml0ZV9mYXVs
dDsNCj4gKyMgZW5kaWYNCj4gKyNlbHNlDQo+ICsjIGRlZmluZSBpb21tdV9xdWFyYW50aW5lIElP
TU1VX3F1YXJhbnRpbmVfbm9uZQ0KPiArI2VuZGlmIC8qIENPTkZJR19IQVNfUENJICovDQo+ICsN
Cj4gIHN0YXRpYyBib29sIF9faHdkb21faW5pdGRhdGEgaW9tbXVfaHdkb21fbm9uZTsNCj4gIGJv
b2wgX19od2RvbV9pbml0ZGF0YSBpb21tdV9od2RvbV9zdHJpY3Q7DQo+ICBib29sIF9fcmVhZF9t
b3N0bHkgaW9tbXVfaHdkb21fcGFzc3Rocm91Z2g7DQo+IEBAIC02OCw4ICs4MywxMiBAQCBzdGF0
aWMgaW50IF9faW5pdCBwYXJzZV9pb21tdV9wYXJhbShjb25zDQo+ICAgICAgICAgIGVsc2UgaWYg
KCAodmFsID0gcGFyc2VfYm9vbGVhbigiZm9yY2UiLCBzLCBzcykpID49IDAgfHwNCj4gICAgICAg
ICAgICAgICAgICAgICh2YWwgPSBwYXJzZV9ib29sZWFuKCJyZXF1aXJlZCIsIHMsIHNzKSkgPj0g
MCApDQo+ICAgICAgICAgICAgICBmb3JjZV9pb21tdSA9IHZhbDsNCj4gKyNpZmRlZiBDT05GSUdf
SEFTX1BDSQ0KPiAgICAgICAgICBlbHNlIGlmICggKHZhbCA9IHBhcnNlX2Jvb2xlYW4oInF1YXJh
bnRpbmUiLCBzLCBzcykpID49IDAgKQ0KPiAgICAgICAgICAgICAgaW9tbXVfcXVhcmFudGluZSA9
IHZhbDsNCj4gKyAgICAgICAgZWxzZSBpZiAoIHNzID09IHMgKyAxNSAmJiAhc3RybmNtcChzLCAi
cXVhcmFudGluZT1mdWxsIiwgMTUpICkNCj4gKyAgICAgICAgICAgIGlvbW11X3F1YXJhbnRpbmUg
PSBJT01NVV9xdWFyYW50aW5lX3dyaXRlX2ZhdWx0Ow0KPiArI2VuZGlmDQo+ICAjaWZkZWYgQ09O
RklHX1g4Ng0KPiAgICAgICAgICBlbHNlIGlmICggKHZhbCA9IHBhcnNlX2Jvb2xlYW4oImlnZngi
LCBzLCBzcykpID49IDAgKQ0KPiAgICAgICAgICAgICAgaW9tbXVfaWdmeCA9IHZhbDsNCj4gQEAg
LTQ0OCw3ICs0NjcsNyBAQCBzdGF0aWMgaW50IF9faW5pdCBpb21tdV9xdWFyYW50aW5lX2luaXQo
DQo+ICAgICAgZG9tX2lvLT5vcHRpb25zIHw9IFhFTl9ET01DVExfQ0RGX2lvbW11Ow0KPiANCj4g
ICAgICByYyA9IGlvbW11X2RvbWFpbl9pbml0KGRvbV9pbywgMCk7DQo+IC0gICAgaWYgKCByYyAp
DQo+ICsgICAgaWYgKCByYyB8fCBpb21tdV9xdWFyYW50aW5lIDwgSU9NTVVfcXVhcmFudGluZV93
cml0ZV9mYXVsdCApDQo+ICAgICAgICAgIHJldHVybiByYzsNCj4gDQo+ICAgICAgaWYgKCAhaGQt
PnBsYXRmb3JtX29wcy0+cXVhcmFudGluZV9pbml0ICkNCj4gLS0tIGEveGVuL2RyaXZlcnMvcGFz
c3Rocm91Z2gvdnRkL2lvbW11LmMNCj4gKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvdnRk
L2lvbW11LmMNCj4gQEAgLTQxLDYgKzQxLDkgQEANCj4gICNpbmNsdWRlICJ2dGQuaCINCj4gICNp
bmNsdWRlICIuLi9hdHMuaCINCj4gDQo+ICsvKiBkb21faW8gaXMgdXNlZCBhcyBhIHNlbnRpbmVs
IGZvciBxdWFyYW50aW5lZCBkZXZpY2VzICovDQo+ICsjZGVmaW5lIFFVQVJBTlRJTkVfU0tJUChk
KSAoKGQpID09IGRvbV9pbyAmJiAhZG9tX2lvbW11KGQpLQ0KPiA+YXJjaC5wZ2RfbWFkZHIpDQo+
ICsNCj4gIHN0cnVjdCBtYXBwZWRfcm1yciB7DQo+ICAgICAgc3RydWN0IGxpc3RfaGVhZCBsaXN0
Ow0KPiAgICAgIHU2NCBiYXNlLCBlbmQ7DQo+IEBAIC0xMjk0LDYgKzEyOTcsOSBAQCBpbnQgZG9t
YWluX2NvbnRleHRfbWFwcGluZ19vbmUoDQo+ICAgICAgaW50IGFnYXcsIHJjLCByZXQ7DQo+ICAg
ICAgYm9vbF90IGZsdXNoX2Rldl9pb3RsYjsNCj4gDQo+ICsgICAgaWYgKCBRVUFSQU5USU5FX1NL
SVAoZG9tYWluKSApDQo+ICsgICAgICAgIHJldHVybiAwOw0KPiArDQo+ICAgICAgQVNTRVJUKHBj
aWRldnNfbG9ja2VkKCkpOw0KPiAgICAgIHNwaW5fbG9jaygmaW9tbXUtPmxvY2spOw0KPiAgICAg
IG1hZGRyID0gYnVzX3RvX2NvbnRleHRfbWFkZHIoaW9tbXUsIGJ1cyk7DQo+IEBAIC0xNTQ4LDYg
KzE1NTQsOSBAQCBpbnQgZG9tYWluX2NvbnRleHRfdW5tYXBfb25lKA0KPiAgICAgIGludCBpb21t
dV9kb21pZCwgcmMsIHJldDsNCj4gICAgICBib29sX3QgZmx1c2hfZGV2X2lvdGxiOw0KPiANCj4g
KyAgICBpZiAoIFFVQVJBTlRJTkVfU0tJUChkb21haW4pICkNCj4gKyAgICAgICAgcmV0dXJuIDA7
DQo+ICsNCj4gICAgICBBU1NFUlQocGNpZGV2c19sb2NrZWQoKSk7DQo+ICAgICAgc3Bpbl9sb2Nr
KCZpb21tdS0+bG9jayk7DQo+IA0KPiBAQCAtMTYwOSw3ICsxNjE4LDcgQEAgc3RhdGljIGludCBk
b21haW5fY29udGV4dF91bm1hcChzdHJ1Y3QgZA0KPiAgew0KPiAgICAgIHN0cnVjdCBhY3BpX2Ry
aGRfdW5pdCAqZHJoZDsNCj4gICAgICBzdHJ1Y3QgdnRkX2lvbW11ICppb21tdTsNCj4gLSAgICBp
bnQgcmV0ID0gMDsNCj4gKyAgICBpbnQgcmV0Ow0KPiAgICAgIHU4IHNlZyA9IHBkZXYtPnNlZywg
YnVzID0gcGRldi0+YnVzLCB0bXBfYnVzLCB0bXBfZGV2Zm4sIHNlY2J1czsNCj4gICAgICBpbnQg
Zm91bmQgPSAwOw0KPiANCj4gQEAgLTE2MjUsMTQgKzE2MzQsMTIgQEAgc3RhdGljIGludCBkb21h
aW5fY29udGV4dF91bm1hcChzdHJ1Y3QgZA0KPiAgICAgICAgICAgICAgcHJpbnRrKFZURFBSRUZJ
WCAiZCVkOkhvc3RicmlkZ2U6IHNraXAgJTA0eDolMDJ4OiUwMnguJXUNCj4gdW5tYXBcbiIsDQo+
ICAgICAgICAgICAgICAgICAgICAgZG9tYWluLT5kb21haW5faWQsIHNlZywgYnVzLA0KPiAgICAg
ICAgICAgICAgICAgICAgIFBDSV9TTE9UKGRldmZuKSwgUENJX0ZVTkMoZGV2Zm4pKTsNCj4gLSAg
ICAgICAgaWYgKCAhaXNfaGFyZHdhcmVfZG9tYWluKGRvbWFpbikgKQ0KPiAtICAgICAgICAgICAg
cmV0dXJuIC1FUEVSTTsNCj4gLSAgICAgICAgZ290byBvdXQ7DQo+ICsgICAgICAgIHJldHVybiBp
c19oYXJkd2FyZV9kb21haW4oZG9tYWluKSA/IDAgOiAtRVBFUk07DQo+IA0KPiAgICAgIGNhc2Ug
REVWX1RZUEVfUENJZV9CUklER0U6DQo+ICAgICAgY2FzZSBERVZfVFlQRV9QQ0llMlBDSV9CUklE
R0U6DQo+ICAgICAgY2FzZSBERVZfVFlQRV9MRUdBQ1lfUENJX0JSSURHRToNCj4gLSAgICAgICAg
Z290byBvdXQ7DQo+ICsgICAgICAgIHJldHVybiAwOw0KPiANCj4gICAgICBjYXNlIERFVl9UWVBF
X1BDSWVfRU5EUE9JTlQ6DQo+ICAgICAgICAgIGlmICggaW9tbXVfZGVidWcgKQ0KPiBAQCAtMTY3
NiwxMCArMTY4MywxMiBAQCBzdGF0aWMgaW50IGRvbWFpbl9jb250ZXh0X3VubWFwKHN0cnVjdCBk
DQo+ICAgICAgICAgIGRwcmludGsoWEVOTE9HX0VSUiBWVERQUkVGSVgsDQo+ICJkJWQ6dW5rbm93
bigldSk6ICUwNHg6JTAyeDolMDJ4LiV1XG4iLA0KPiAgICAgICAgICAgICAgICAgIGRvbWFpbi0+
ZG9tYWluX2lkLCBwZGV2LT50eXBlLA0KPiAgICAgICAgICAgICAgICAgIHNlZywgYnVzLCBQQ0lf
U0xPVChkZXZmbiksIFBDSV9GVU5DKGRldmZuKSk7DQo+IC0gICAgICAgIHJldCA9IC1FSU5WQUw7
DQo+IC0gICAgICAgIGdvdG8gb3V0Ow0KPiArICAgICAgICByZXR1cm4gLUVJTlZBTDsNCj4gICAg
ICB9DQo+IA0KPiArICAgIGlmICggUVVBUkFOVElORV9TS0lQKGRvbWFpbikgKQ0KPiArICAgICAg
ICByZXR1cm4gcmV0Ow0KPiArDQo+ICAgICAgLyoNCj4gICAgICAgKiBpZiBubyBvdGhlciBkZXZp
Y2VzIHVuZGVyIHRoZSBzYW1lIGlvbW11IG93bmVkIGJ5IHRoaXMgZG9tYWluLA0KPiAgICAgICAq
IGNsZWFyIGlvbW11IGluIGlvbW11X2JpdG1hcCBhbmQgY2xlYXIgZG9tYWluX2lkIGluIGRvbWlk
X2JpdG1wDQo+IEBAIC0xNzA1LDE2ICsxNzE0LDEyIEBAIHN0YXRpYyBpbnQgZG9tYWluX2NvbnRl
eHRfdW5tYXAoc3RydWN0IGQNCj4gDQo+ICAgICAgICAgIGlvbW11X2RvbWlkID0gZG9tYWluX2lv
bW11X2RvbWlkKGRvbWFpbiwgaW9tbXUpOw0KPiAgICAgICAgICBpZiAoIGlvbW11X2RvbWlkID09
IC0xICkNCj4gLSAgICAgICAgew0KPiAtICAgICAgICAgICAgcmV0ID0gLUVJTlZBTDsNCj4gLSAg
ICAgICAgICAgIGdvdG8gb3V0Ow0KPiAtICAgICAgICB9DQo+ICsgICAgICAgICAgICByZXR1cm4g
LUVJTlZBTDsNCj4gDQo+ICAgICAgICAgIGNsZWFyX2JpdChpb21tdV9kb21pZCwgaW9tbXUtPmRv
bWlkX2JpdG1hcCk7DQo+ICAgICAgICAgIGlvbW11LT5kb21pZF9tYXBbaW9tbXVfZG9taWRdID0g
MDsNCj4gICAgICB9DQo+IA0KPiAtb3V0Og0KPiAgICAgIHJldHVybiByZXQ7DQo+ICB9DQo+IA0K
PiAtLS0gYS94ZW4vaW5jbHVkZS94ZW4vaW9tbXUuaA0KPiArKysgYi94ZW4vaW5jbHVkZS94ZW4v
aW9tbXUuaA0KPiBAQCAtNTMsNyArNTMsOSBAQCBzdGF0aWMgaW5saW5lIGJvb2xfdCBkZm5fZXEo
ZGZuX3QgeCwgZGZuDQo+ICB9DQo+IA0KPiAgZXh0ZXJuIGJvb2xfdCBpb21tdV9lbmFibGUsIGlv
bW11X2VuYWJsZWQ7DQo+IC1leHRlcm4gYm9vbCBmb3JjZV9pb21tdSwgaW9tbXVfcXVhcmFudGlu
ZSwgaW9tbXVfdmVyYm9zZTsNCj4gK2V4dGVybiBib29sIGZvcmNlX2lvbW11LCBpb21tdV92ZXJi
b3NlOw0KPiArLyogQm9vbGVhbiBleGNlcHQgZm9yIHRoZSBzcGVjaWZpYyBwdXJwb3NlcyBvZg0K
PiBkcml2ZXJzL3Bhc3N0aHJvdWdoL2lvbW11LmMuICovDQo+ICtleHRlcm4gdWludDhfdCBpb21t
dV9xdWFyYW50aW5lOw0KPiANCj4gICNpZmRlZiBDT05GSUdfWDg2DQo+ICBleHRlcm4gZW51bSBf
X3BhY2tlZCBpb21tdV9pbnRyZW1hcCB7DQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54
ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGlu
Zm8veGVuLWRldmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 674A86B300
	for <lists+xen-devel@lfdr.de>; Wed, 17 Jul 2019 03:05:04 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hnYK4-000554-6B; Wed, 17 Jul 2019 01:01:32 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=o+Bt=VO=invisiblethingslab.com=marmarek@srs-us1.protection.inumbo.net>)
 id 1hnYK3-00054t-57
 for xen-devel@lists.xenproject.org; Wed, 17 Jul 2019 01:01:31 +0000
X-Inumbo-ID: 68650566-a82e-11e9-ac55-63be4eb0056e
Received: from new3-smtp.messagingengine.com (unknown [66.111.4.229])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 68650566-a82e-11e9-ac55-63be4eb0056e;
 Wed, 17 Jul 2019 01:01:28 +0000 (UTC)
Received: from compute7.internal (compute7.nyi.internal [10.202.2.47])
 by mailnew.nyi.internal (Postfix) with ESMTP id 678DD2818;
 Tue, 16 Jul 2019 21:01:28 -0400 (EDT)
Received: from mailfrontend2 ([10.202.2.163])
 by compute7.internal (MEProxy); Tue, 16 Jul 2019 21:01:28 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=
 messagingengine.com; h=cc:content-transfer-encoding:content-type
 :date:from:in-reply-to:message-id:mime-version:references
 :subject:to:x-me-proxy:x-me-proxy:x-me-sender:x-me-sender
 :x-sasl-enc; s=fm3; bh=oXw5SYpgWONCsQMlX8Tt0b6R78vNuA4o5rHtiIe0f
 38=; b=dzcZv2sh31pMfqrHX68hT8O0/s/4lkmZTBmgyf45IiQPtWLtfLr6qFzwk
 viO0bVYCX+T6hCB77CaO0dr+bK4TjvQq/pW1IiA+dgZHVEdxXZZ4i2BN1wmExxtv
 P6WVlxkB8xXnHWRjT/y4ovhenOUIFAo8pHuGsdJ4kAZuJdroiUOxMU9CJNysnMtg
 Ih6myif9KbTwybJb84E04kmkaj7AIRKgZ8QLow9JtdbqdDftCQDoka8Kc7VQh1VI
 Zz9HJX86hDcy/QkMovjYsQmTz3YwYbK1AjZ1Wo2ExXM+vckDflPYCX3mjMP+RjZS
 /eMiur+2BD/XShLIgLW9Y96ugmZKQ==
X-ME-Sender: <xms:aHMuXUPoh47euPRPrDoDGhaTBEXVPiW8HoIJtabKPXco1FcAAEbWNw>
X-ME-Proxy-Cause: gggruggvucftvghtrhhoucdtuddrgeduvddriedugdegvdcutefuodetggdotefrodftvf
 curfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfghnecu
 uegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenuc
 fjughrpefhvffufffkofgjfhggtgfgsehtkeertdertdejnecuhfhrohhmpeforghrvghk
 ucforghrtgiihihkohifshhkihdqifpkrhgvtghkihcuoehmrghrmhgrrhgvkhesihhnvh
 hishhisghlvghthhhinhhgshhlrggsrdgtohhmqeenucfkphepledurdeihedrfeegrdef
 feenucfrrghrrghmpehmrghilhhfrhhomhepmhgrrhhmrghrvghksehinhhvihhsihgslh
 gvthhhihhnghhslhgrsgdrtghomhenucevlhhushhtvghrufhiiigvpedu
X-ME-Proxy: <xmx:aHMuXeAXwzK9Vy2cLh4ObiYpGKQQJOOA_AWHUw5rR92jN4_f2mo6xA>
 <xmx:aHMuXV5CIoMR4eTKFPGOrzPi71z0DCx8BlBDd_8XCbvUXLzF50pvIg>
 <xmx:aHMuXY4t4SiDHjnKx-r8xfh_UMV_dGPyuJUHCNgAaZ1hX-5pPQLTow>
 <xmx:aHMuXZfSfZdyaQXMcjpDYgInFGPo75KBo1o947ovq---iYhCksIGkQ>
Received: from localhost.localdomain (ip5b412221.dynamic.kabel-deutschland.de
 [91.65.34.33])
 by mail.messagingengine.com (Postfix) with ESMTPA id 923C638008A;
 Tue, 16 Jul 2019 21:01:26 -0400 (EDT)
From: =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>
To: xen-devel@lists.xenproject.org
Date: Wed, 17 Jul 2019 03:00:43 +0200
Message-Id: <7280f16277aa9d7bdc9c2373277ef1b40459090b.1563325215.git-series.marmarek@invisiblethingslab.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.537da3804adbe71352bed871578f3e893e2210c5.1563325215.git-series.marmarek@invisiblethingslab.com>
References: <cover.537da3804adbe71352bed871578f3e893e2210c5.1563325215.git-series.marmarek@invisiblethingslab.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v5 5/6] xen/x86: add PHYSDEVOP_msi_control
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>,
 Daniel De Graaf <dgdegra@tycho.nsa.gov>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QWxsb3cgZGV2aWNlIG1vZGVsIHJ1bm5pbmcgaW4gc3R1YmRvbWFpbiB0byBlbmFibGUvZGlzYWJs
ZSBNU0koLVgpLApieXBhc3NpbmcgcGNpYmFjay4gV2hpbGUgcGNpYmFjayBpcyBzdGlsbCB1c2Vk
IHRvIGFjY2VzcyBjb25maWcgc3BhY2UKZnJvbSB3aXRoaW4gc3R1YmRvbWFpbiwgaXQgcmVmdXNl
IHRvIHdyaXRlIHRvClBDSV9NU0lfRkxBR1NfRU5BQkxFL1BDSV9NU0lYX0ZMQUdTX0VOQUJMRSBp
biBub24tcGVybWlzc2l2ZSBtb2RlLiBXaGljaAppcyB0aGUgcmlnaHQgdGhpbmcgdG8gZG8gZm9y
IFBWIGRvbWFpbiAodGhlIG1haW4gdXNlIGNhc2UgZm9yIHBjaWJhY2spLAphcyBQViBkb21haW4g
c2hvdWxkIHVzZSBYRU5fUENJX09QXyogY29tbWFuZHMgZm9yIHRoYXQuIFVuZm9ydHVuYXRlbHkK
dGhvc2UgY29tbWFuZHMgYXJlIG5vdCBnb29kIGZvciBzdHViZG9tYWluIHVzZSwgYXMgdGhleSBj
b25maWd1cmUgTVNJIGluCmRvbTAncyBrZXJuZWwgdG9vLCB3aGljaCBzaG91bGQgbm90IGhhcHBl
biBmb3IgSFZNIGRvbWFpbi4KClRoaXMgbmV3IHBoeXNkZXZvcCBpcyBhbGxvd2VkIG9ubHkgZm9y
IHN0dWJkb21haW4gY29udHJvbGxpbmcgdGhlIGRvbWFpbgp3aGljaCBvd24gdGhlIGRldmljZS4K
ClNpZ25lZC1vZmYtYnk6IE1hcmVrIE1hcmN6eWtvd3NraS1Hw7NyZWNraSA8bWFybWFyZWtAaW52
aXNpYmxldGhpbmdzbGFiLmNvbT4KLS0tCkNoYW5nZXMgaW4gdjM6CiAtIG5ldyBwYXRjaApDaGFu
Z2VzIGluIHY0OgogLSBhZGp1c3QgY29kZSBzdHlsZQogLSBzL21zaV9tc2l4L21zaS8KIC0gYWRk
IG1zaV9zZXRfZW5hYmxlIFhTTSBob29rCiAtIGZsYXR0ZW4gc3RydWN0IHBoeXNkZXZfbXNpX3Nl
dF9lbmFibGUKIC0gYWRkIHRvIGluY2x1ZGUveGxhdC5sc3QKQ2hhbmdlcyBpbiB2NToKIC0gcmVu
YW1lIHRvIFBIWVNERVZPUF9tc2lfY29udHJvbAogLSBjb21iaW5lICJtb2RlIiBhbmQgImVuYWJs
ZSIgaW50byAiZmxhZ3MiCiAtIHJlZnVzZSB0byBlbmFibGUgYm90aCBNU0kgYW5kIE1TSS1YLCBh
bmQgYWxzbyB0byBlbmFibGUgTVNJKC1YKSBvbgogICBpbmNhcGFibGUgZGV2aWNlCiAtIGRpc2Fi
bGUvZW5hYmxlIElOVHggd2hlbiBlbmFibGluZy9kaXNhYmxpbmcgTVNJICg/KQogLSByZWZ1c2Ug
aWYgIXVzZV9tc2kKIC0gYWRqdXN0IGZsYXNrIGhvb2sgdG8gbWFrZSBtb3JlIHNlbnNlIChyZXF1
aXJlICJzZXR1cCIgYWNjZXNzIG9uCiAgIGRldmljZSwgbm90IG9uIGRvbWFpbikKIC0gcmViYXNl
IG9uIG1hc3RlcgoKSSdtIG5vdCBzdXJlIGlmIFhTTSBwYXJ0IGlzIGNvcnJlY3QsIGNvbXBpbGUt
dGVzdGVkIG9ubHksIGFzIEknbSBub3QKc3VyZSBob3cgdG8gc2V0IHRoZSBwb2xpY3kuCi0tLQog
eGVuL2FyY2gveDg2L21zaS5jICAgICAgICAgICAgICAgICAgfCA0MiArKysrKysrKysrKysrKysr
KysrKysrKysrKysrKystCiB4ZW4vYXJjaC94ODYvcGh5c2Rldi5jICAgICAgICAgICAgICB8IDI1
ICsrKysrKysrKysrKysrKysrKy0KIHhlbi9hcmNoL3g4Ni94ODZfNjQvcGh5c2Rldi5jICAgICAg
IHwgIDQgKysrLQogeGVuL2luY2x1ZGUvYXNtLXg4Ni9tc2kuaCAgICAgICAgICAgfCAgMSArLQog
eGVuL2luY2x1ZGUvcHVibGljL3BoeXNkZXYuaCAgICAgICAgfCAxNiArKysrKysrKysrKy0KIHhl
bi9pbmNsdWRlL3hsYXQubHN0ICAgICAgICAgICAgICAgIHwgIDEgKy0KIHhlbi9pbmNsdWRlL3hz
bS9kdW1teS5oICAgICAgICAgICAgIHwgIDcgKysrKystCiB4ZW4vaW5jbHVkZS94c20veHNtLmgg
ICAgICAgICAgICAgICB8ICA2ICsrKystCiB4ZW4veHNtL2R1bW15LmMgICAgICAgICAgICAgICAg
ICAgICB8ICAxICstCiB4ZW4veHNtL2ZsYXNrL2hvb2tzLmMgICAgICAgICAgICAgICB8IDI0ICsr
KysrKysrKysrKysrKysrLQogeGVuL3hzbS9mbGFzay9wb2xpY3kvYWNjZXNzX3ZlY3RvcnMgfCAg
MSArLQogMTEgZmlsZXMgY2hhbmdlZCwgMTI4IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS94
ZW4vYXJjaC94ODYvbXNpLmMgYi94ZW4vYXJjaC94ODYvbXNpLmMKaW5kZXggODllNjExNi4uZmNh
MWQwNCAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L21zaS5jCisrKyBiL3hlbi9hcmNoL3g4Ni9t
c2kuYwpAQCAtMTQ3NSw2ICsxNDc1LDQ4IEBAIGludCBwY2lfcmVzdG9yZV9tc2lfc3RhdGUoc3Ry
dWN0IHBjaV9kZXYgKnBkZXYpCiAgICAgcmV0dXJuIDA7CiB9CiAKK2ludCBtc2lfY29udHJvbChz
dHJ1Y3QgcGNpX2RldiAqcGRldiwgYm9vbCBtc2l4LCBib29sIGVuYWJsZSkKK3sKKyAgICBpbnQg
cmV0OworICAgIHN0cnVjdCBtc2lfZGVzYyAqb2xkX2Rlc2M7CisKKyAgICBpZiAoICF1c2VfbXNp
ICkKKyAgICAgICAgcmV0dXJuIC1FT1BOT1RTVVBQOworCisgICAgcmV0ID0geHNtX21zaV9jb250
cm9sKFhTTV9ETV9QUklWLCBwZGV2LT5kb21haW4sIHBkZXYtPnNiZGYuc2JkZiwgbXNpeCwgZW5h
YmxlKTsKKyAgICBpZiAoIHJldCApCisgICAgICAgIHJldHVybiByZXQ7CisKKyAgICBpZiAoIG1z
aXggKQorICAgIHsKKyAgICAgICAgaWYgKCAhcGRldi0+bXNpeCApCisgICAgICAgICAgICByZXR1
cm4gLUVOT0RFVjsKKyAgICAgICAgb2xkX2Rlc2MgPSBmaW5kX21zaV9lbnRyeShwZGV2LCAtMSwg
UENJX0NBUF9JRF9NU0kpOworICAgICAgICBpZiAoIG9sZF9kZXNjICkKKyAgICAgICAgICAgIHJl
dHVybiAtRUJVU1k7CisgICAgICAgIGlmICggZW5hYmxlICkKKyAgICAgICAgICAgIHBjaV9pbnR4
KHBkZXYsIGZhbHNlKTsKKyAgICAgICAgbXNpeF9zZXRfZW5hYmxlKHBkZXYsIGVuYWJsZSk7Cisg
ICAgfQorICAgIGVsc2UKKyAgICB7CisgICAgICAgIGlmICggIXBjaV9maW5kX2NhcF9vZmZzZXQo
cGRldi0+c2VnLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkZXYtPmJ1cywK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQ0lfU0xPVChwZGV2LT5kZXZmbiks
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUENJX0ZVTkMocGRldi0+ZGV2Zm4p
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBDSV9DQVBfSURfTVNJKSApCisg
ICAgICAgICAgICByZXR1cm4gLUVOT0RFVjsKKyAgICAgICAgb2xkX2Rlc2MgPSBmaW5kX21zaV9l
bnRyeShwZGV2LCAtMSwgUENJX0NBUF9JRF9NU0lYKTsKKyAgICAgICAgaWYgKCBvbGRfZGVzYyAp
CisgICAgICAgICAgICByZXR1cm4gLUVCVVNZOworICAgICAgICBpZiAoIGVuYWJsZSApCisgICAg
ICAgICAgICBwY2lfaW50eChwZGV2LCBmYWxzZSk7CisgICAgICAgIG1zaV9zZXRfZW5hYmxlKHBk
ZXYsIGVuYWJsZSk7CisgICAgfQorCisgICAgcmV0dXJuIDA7Cit9CisKIHZvaWQgX19pbml0IGVh
cmx5X21zaV9pbml0KHZvaWQpCiB7CiAgICAgaWYgKCB1c2VfbXNpIDwgMCApCmRpZmYgLS1naXQg
YS94ZW4vYXJjaC94ODYvcGh5c2Rldi5jIGIveGVuL2FyY2gveDg2L3BoeXNkZXYuYwppbmRleCAz
YTNjMTU4Li41MDAwOTk4IDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvcGh5c2Rldi5jCisrKyBi
L3hlbi9hcmNoL3g4Ni9waHlzZGV2LmMKQEAgLTY2Miw2ICs2NjIsMzEgQEAgcmV0X3QgZG9fcGh5
c2Rldl9vcChpbnQgY21kLCBYRU5fR1VFU1RfSEFORExFX1BBUkFNKHZvaWQpIGFyZykKICAgICAg
ICAgYnJlYWs7CiAgICAgfQogCisgICAgY2FzZSBQSFlTREVWT1BfbXNpX2NvbnRyb2w6IHsKKyAg
ICAgICAgc3RydWN0IHBoeXNkZXZfbXNpX2NvbnRyb2wgb3A7CisgICAgICAgIHN0cnVjdCBwY2lf
ZGV2ICpwZGV2OworCisgICAgICAgIHJldCA9IC1FRkFVTFQ7CisgICAgICAgIGlmICggY29weV9m
cm9tX2d1ZXN0KCZvcCwgYXJnLCAxKSApCisgICAgICAgICAgICBicmVhazsKKworICAgICAgICBy
ZXQgPSAtRUlOVkFMOworICAgICAgICBpZiAoIG9wLmZsYWdzICYgfihQSFlTREVWT1BfTVNJX0NP
TlRST0xfTVNJWCB8IFBIWVNERVZPUF9NU0lfQ09OVFJPTF9FTkFCTEUpICkKKyAgICAgICAgICAg
IGJyZWFrOworCisgICAgICAgIHBjaWRldnNfbG9jaygpOworICAgICAgICBwZGV2ID0gcGNpX2dl
dF9wZGV2KG9wLnNlZywgb3AuYnVzLCBvcC5kZXZmbik7CisgICAgICAgIGlmICggcGRldiApCisg
ICAgICAgICAgICByZXQgPSBtc2lfY29udHJvbChwZGV2LAorICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgb3AuZmxhZ3MgJiBQSFlTREVWT1BfTVNJX0NPTlRST0xfTVNJWCwKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIG9wLmZsYWdzICYgUEhZU0RFVk9QX01TSV9DT05UUk9MX0VO
QUJMRSk7CisgICAgICAgIGVsc2UKKyAgICAgICAgICAgIHJldCA9IC1FTk9ERVY7CisgICAgICAg
IHBjaWRldnNfdW5sb2NrKCk7CisgICAgICAgIGJyZWFrOworCisgICAgfQorCiAgICAgZGVmYXVs
dDoKICAgICAgICAgcmV0ID0gLUVOT1NZUzsKICAgICAgICAgYnJlYWs7CmRpZmYgLS1naXQgYS94
ZW4vYXJjaC94ODYveDg2XzY0L3BoeXNkZXYuYyBiL3hlbi9hcmNoL3g4Ni94ODZfNjQvcGh5c2Rl
di5jCmluZGV4IGM1YTAwZWEuLjY5YjRjZTMgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni94ODZf
NjQvcGh5c2Rldi5jCisrKyBiL3hlbi9hcmNoL3g4Ni94ODZfNjQvcGh5c2Rldi5jCkBAIC03Niw2
ICs3NiwxMCBAQCBDSEVDS19waHlzZGV2X3BjaV9kZXZpY2VfYWRkCiBDSEVDS19waHlzZGV2X3Bj
aV9kZXZpY2UKICN1bmRlZiB4ZW5fcGh5c2Rldl9wY2lfZGV2aWNlCiAKKyNkZWZpbmUgeGVuX3Bo
eXNkZXZfbXNpX2NvbnRyb2wgcGh5c2Rldl9tc2lfY29udHJvbAorQ0hFQ0tfcGh5c2Rldl9tc2lf
Y29udHJvbAorI3VuZGVmIHhlbl9waHlzZGV2X21zaV9jb250cm9sCisKICNkZWZpbmUgQ09NUEFU
CiAjdW5kZWYgZ3Vlc3RfaGFuZGxlX29rYXkKICNkZWZpbmUgZ3Vlc3RfaGFuZGxlX29rYXkgICAg
ICAgICAgY29tcGF0X2hhbmRsZV9va2F5CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9hc20teDg2
L21zaS5oIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9tc2kuaAppbmRleCAxMDM4N2RjLi4wNTI5NmRl
IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L21zaS5oCisrKyBiL3hlbi9pbmNsdWRl
L2FzbS14ODYvbXNpLmgKQEAgLTI1Miw1ICsyNTIsNiBAQCB2b2lkIGd1ZXN0X21hc2tfbXNpX2ly
cShzdHJ1Y3QgaXJxX2Rlc2MgKiwgYm9vbCBtYXNrKTsKIHZvaWQgYWNrX25vbm1hc2thYmxlX21z
aV9pcnEoc3RydWN0IGlycV9kZXNjICopOwogdm9pZCBlbmRfbm9ubWFza2FibGVfbXNpX2lycShz
dHJ1Y3QgaXJxX2Rlc2MgKiwgdTggdmVjdG9yKTsKIHZvaWQgc2V0X21zaV9hZmZpbml0eShzdHJ1
Y3QgaXJxX2Rlc2MgKiwgY29uc3QgY3B1bWFza190ICopOworaW50IG1zaV9jb250cm9sKHN0cnVj
dCBwY2lfZGV2ICpwZGV2LCBib29sIG1zaXgsIGJvb2wgZW5hYmxlKTsKIAogI2VuZGlmIC8qIF9f
QVNNX01TSV9IICovCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9wdWJsaWMvcGh5c2Rldi5oIGIv
eGVuL2luY2x1ZGUvcHVibGljL3BoeXNkZXYuaAppbmRleCBiNmZhZjgzLi5mOWI3MjhmIDEwMDY0
NAotLS0gYS94ZW4vaW5jbHVkZS9wdWJsaWMvcGh5c2Rldi5oCisrKyBiL3hlbi9pbmNsdWRlL3B1
YmxpYy9waHlzZGV2LmgKQEAgLTM0NCw2ICszNDQsMjIgQEAgc3RydWN0IHBoeXNkZXZfZGJncF9v
cCB7CiB0eXBlZGVmIHN0cnVjdCBwaHlzZGV2X2RiZ3Bfb3AgcGh5c2Rldl9kYmdwX29wX3Q7CiBE
RUZJTkVfWEVOX0dVRVNUX0hBTkRMRShwaHlzZGV2X2RiZ3Bfb3BfdCk7CiAKKy8qIHdoZW4gUEhZ
U0RFVk9QX01TSV9DT05UUk9MX01TSVggbm90IHNldCwgY29udHJvbCBNU0kgKi8KKyNkZWZpbmUg
UEhZU0RFVk9QX01TSV9DT05UUk9MX01TSVggICAgMQorLyogd2hlbiBQSFlTREVWT1BfTVNJX0NP
TlRST0xfRU5BQkxFIG5vdCBzZXQsIGRpc2FibGUgKi8KKyNkZWZpbmUgUEhZU0RFVk9QX01TSV9D
T05UUk9MX0VOQUJMRSAgMgorCisjZGVmaW5lIFBIWVNERVZPUF9tc2lfY29udHJvbCAgIDMyCitz
dHJ1Y3QgcGh5c2Rldl9tc2lfY29udHJvbCB7CisgICAgLyogSU4gKi8KKyAgICB1aW50MTZfdCBz
ZWc7CisgICAgdWludDhfdCBidXM7CisgICAgdWludDhfdCBkZXZmbjsKKyAgICB1aW50OF90IGZs
YWdzOworfTsKK3R5cGVkZWYgc3RydWN0IHBoeXNkZXZfbXNpX2NvbnRyb2wgcGh5c2Rldl9tc2lf
Y29udHJvbF90OworREVGSU5FX1hFTl9HVUVTVF9IQU5ETEUocGh5c2Rldl9tc2lfY29udHJvbF90
KTsKKwogLyoKICAqIE5vdGlmeSB0aGF0IHNvbWUgUElSUS1ib3VuZCBldmVudCBjaGFubmVscyBo
YXZlIGJlZW4gdW5tYXNrZWQuCiAgKiAqKiBUaGlzIGNvbW1hbmQgaXMgb2Jzb2xldGUgc2luY2Ug
aW50ZXJmYWNlIHZlcnNpb24gMHgwMDAzMDIwMiBhbmQgaXMgKioKZGlmZiAtLWdpdCBhL3hlbi9p
bmNsdWRlL3hsYXQubHN0IGIveGVuL2luY2x1ZGUveGxhdC5sc3QKaW5kZXggOTVmNWU1NS4uMzA4
Mjc2MSAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUveGxhdC5sc3QKKysrIGIveGVuL2luY2x1ZGUv
eGxhdC5sc3QKQEAgLTEwOCw2ICsxMDgsNyBAQAogPwlwaHlzZGV2X2lycV9zdGF0dXNfcXVlcnkJ
cGh5c2Rldi5oCiA/CXBoeXNkZXZfbWFuYWdlX3BjaQkJcGh5c2Rldi5oCiA/CXBoeXNkZXZfbWFu
YWdlX3BjaV9leHQJCXBoeXNkZXYuaAorPwlwaHlzZGV2X21zaV9jb250cm9sCQlwaHlzZGV2LmgK
ID8JcGh5c2Rldl9wY2lfZGV2aWNlCQlwaHlzZGV2LmgKID8JcGh5c2Rldl9wY2lfZGV2aWNlX2Fk
ZAkJcGh5c2Rldi5oCiA/CXBoeXNkZXZfcGNpX21tY2ZnX3Jlc2VydmVkCXBoeXNkZXYuaApkaWZm
IC0tZ2l0IGEveGVuL2luY2x1ZGUveHNtL2R1bW15LmggYi94ZW4vaW5jbHVkZS94c20vZHVtbXku
aAppbmRleCAwMWQyODE0Li40ODAxODM4IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94c20vZHVt
bXkuaAorKysgYi94ZW4vaW5jbHVkZS94c20vZHVtbXkuaApAQCAtNTE0LDYgKzUxNCwxMyBAQCBz
dGF0aWMgWFNNX0lOTElORSBpbnQgeHNtX3BjaV9jb25maWdfcGVybWlzc2lvbihYU01fREVGQVVM
VF9BUkcgc3RydWN0IGRvbWFpbiAqZAogICAgIHJldHVybiB4c21fZGVmYXVsdF9hY3Rpb24oYWN0
aW9uLCBjdXJyZW50LT5kb21haW4sIGQpOwogfQogCitzdGF0aWMgWFNNX0lOTElORSBpbnQgeHNt
X21zaV9jb250cm9sKFhTTV9ERUZBVUxUX0FSRyBzdHJ1Y3QgZG9tYWluICpkLCB1aW50MzJfdCBt
YWNoaW5lX2JkZiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDhf
dCBtc2l4LCB1aW50OF90IGVuYWJsZSkKK3sKKyAgICBYU01fQVNTRVJUX0FDVElPTihYU01fRE1f
UFJJVik7CisgICAgcmV0dXJuIHhzbV9kZWZhdWx0X2FjdGlvbihhY3Rpb24sIGN1cnJlbnQtPmRv
bWFpbiwgZCk7Cit9CisKIHN0YXRpYyBYU01fSU5MSU5FIGludCB4c21fYWRkX3RvX3BoeXNtYXAo
WFNNX0RFRkFVTFRfQVJHIHN0cnVjdCBkb21haW4gKmQxLCBzdHJ1Y3QgZG9tYWluICpkMikKIHsK
ICAgICBYU01fQVNTRVJUX0FDVElPTihYU01fVEFSR0VUKTsKZGlmZiAtLWdpdCBhL3hlbi9pbmNs
dWRlL3hzbS94c20uaCBiL3hlbi9pbmNsdWRlL3hzbS94c20uaAppbmRleCBiNjE0MWY2Li5iZjM5
ZGJkIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94c20veHNtLmgKKysrIGIveGVuL2luY2x1ZGUv
eHNtL3hzbS5oCkBAIC0xMDYsNiArMTA2LDcgQEAgc3RydWN0IHhzbV9vcGVyYXRpb25zIHsKICAg
ICBpbnQgKCppb21lbV9wZXJtaXNzaW9uKSAoc3RydWN0IGRvbWFpbiAqZCwgdWludDY0X3Qgcywg
dWludDY0X3QgZSwgdWludDhfdCBhbGxvdyk7CiAgICAgaW50ICgqaW9tZW1fbWFwcGluZykgKHN0
cnVjdCBkb21haW4gKmQsIHVpbnQ2NF90IHMsIHVpbnQ2NF90IGUsIHVpbnQ4X3QgYWxsb3cpOwog
ICAgIGludCAoKnBjaV9jb25maWdfcGVybWlzc2lvbikgKHN0cnVjdCBkb21haW4gKmQsIHVpbnQz
Ml90IG1hY2hpbmVfYmRmLCB1aW50MTZfdCBzdGFydCwgdWludDE2X3QgZW5kLCB1aW50OF90IGFj
Y2Vzcyk7CisgICAgaW50ICgqbXNpX2NvbnRyb2wpIChzdHJ1Y3QgZG9tYWluICpkLCB1aW50MzJf
dCBtYWNoaW5lX2JkZiwgdWludDhfdCBtc2l4LCB1aW50OF90IGVuYWJsZSk7CiAKICNpZiBkZWZp
bmVkKENPTkZJR19IQVNfUEFTU1RIUk9VR0gpICYmIGRlZmluZWQoQ09ORklHX0hBU19QQ0kpCiAg
ICAgaW50ICgqZ2V0X2RldmljZV9ncm91cCkgKHVpbnQzMl90IG1hY2hpbmVfYmRmKTsKQEAgLTQ2
NCw2ICs0NjUsMTEgQEAgc3RhdGljIGlubGluZSBpbnQgeHNtX3BjaV9jb25maWdfcGVybWlzc2lv
biAoeHNtX2RlZmF1bHRfdCBkZWYsIHN0cnVjdCBkb21haW4gKmQKICAgICByZXR1cm4geHNtX29w
cy0+cGNpX2NvbmZpZ19wZXJtaXNzaW9uKGQsIG1hY2hpbmVfYmRmLCBzdGFydCwgZW5kLCBhY2Nl
c3MpOwogfQogCitzdGF0aWMgaW5saW5lIGludCB4c21fbXNpX2NvbnRyb2wgKHhzbV9kZWZhdWx0
X3QgZGVmLCBzdHJ1Y3QgZG9tYWluICpkLCB1aW50MzJfdCBtYWNoaW5lX2JkZiwgdWludDhfdCBt
c2l4LCB1aW50OF90IGVuYWJsZSkKK3sKKyAgICByZXR1cm4geHNtX29wcy0+bXNpX2NvbnRyb2wo
ZCwgbWFjaGluZV9iZGYsIG1zaXgsIGVuYWJsZSk7Cit9CisKICNpZiBkZWZpbmVkKENPTkZJR19I
QVNfUEFTU1RIUk9VR0gpICYmIGRlZmluZWQoQ09ORklHX0hBU19QQ0kpCiBzdGF0aWMgaW5saW5l
IGludCB4c21fZ2V0X2RldmljZV9ncm91cCh4c21fZGVmYXVsdF90IGRlZiwgdWludDMyX3QgbWFj
aGluZV9iZGYpCiB7CmRpZmYgLS1naXQgYS94ZW4veHNtL2R1bW15LmMgYi94ZW4veHNtL2R1bW15
LmMKaW5kZXggYzlhNTY2Zi4uODc4ZWVmZSAxMDA2NDQKLS0tIGEveGVuL3hzbS9kdW1teS5jCisr
KyBiL3hlbi94c20vZHVtbXkuYwpAQCAtODEsNiArODEsNyBAQCB2b2lkIF9faW5pdCB4c21fZml4
dXBfb3BzIChzdHJ1Y3QgeHNtX29wZXJhdGlvbnMgKm9wcykKICAgICBzZXRfdG9fZHVtbXlfaWZf
bnVsbChvcHMsIGlvbWVtX3Blcm1pc3Npb24pOwogICAgIHNldF90b19kdW1teV9pZl9udWxsKG9w
cywgaW9tZW1fbWFwcGluZyk7CiAgICAgc2V0X3RvX2R1bW15X2lmX251bGwob3BzLCBwY2lfY29u
ZmlnX3Blcm1pc3Npb24pOworICAgIHNldF90b19kdW1teV9pZl9udWxsKG9wcywgbXNpX2NvbnRy
b2wpOwogICAgIHNldF90b19kdW1teV9pZl9udWxsKG9wcywgZ2V0X3ZudW1haW5mbyk7CiAKICNp
ZiBkZWZpbmVkKENPTkZJR19IQVNfUEFTU1RIUk9VR0gpICYmIGRlZmluZWQoQ09ORklHX0hBU19Q
Q0kpCmRpZmYgLS1naXQgYS94ZW4veHNtL2ZsYXNrL2hvb2tzLmMgYi94ZW4veHNtL2ZsYXNrL2hv
b2tzLmMKaW5kZXggYTdkNjkwYS4uNWZiNzU1ZSAxMDA2NDQKLS0tIGEveGVuL3hzbS9mbGFzay9o
b29rcy5jCisrKyBiL3hlbi94c20vZmxhc2svaG9va3MuYwpAQCAtMTA4Myw2ICsxMDgzLDI5IEBA
IHN0YXRpYyBpbnQgZmxhc2tfcGNpX2NvbmZpZ19wZXJtaXNzaW9uKHN0cnVjdCBkb21haW4gKmQs
IHVpbnQzMl90IG1hY2hpbmVfYmRmLCB1CiAKIH0KIAorc3RhdGljIGludCBmbGFza19tc2lfY29u
dHJvbChzdHJ1Y3QgZG9tYWluICpkLCB1aW50MzJfdCBtYWNoaW5lX2JkZiwgdWludDhfdCBtc2l4
LCB1aW50OF90IGVuYWJsZSkKK3sKKyAgICB1aW50MzJfdCBkc2lkLCByc2lkOworICAgIGludCBy
YyA9IC1FUEVSTTsKKyAgICBzdHJ1Y3QgYXZjX2F1ZGl0X2RhdGEgYWQ7CisgICAgdWludDMyX3Qg
cGVybTsKKworICAgIEFWQ19BVURJVF9EQVRBX0lOSVQoJmFkLCBERVYpOworICAgIGFkLmRldmlj
ZSA9IG1hY2hpbmVfYmRmOworCisgICAgcmMgPSBzZWN1cml0eV9kZXZpY2Vfc2lkKG1hY2hpbmVf
YmRmLCAmcnNpZCk7CisgICAgaWYgKCByYyApCisgICAgICAgIHJldHVybiByYzsKKworICAgIHJj
ID0gYXZjX2N1cnJlbnRfaGFzX3Blcm0ocnNpZCwgU0VDQ0xBU1NfUkVTT1VSQ0UsIFJFU09VUkNF
X19TRVRVUCwgJmFkKTsKKyAgICBpZiAoIHJjICkKKyAgICAgICAgcmV0dXJuIHJjOworCisgICAg
cGVybSA9IGZsYXNrX2lvbW11X3Jlc291cmNlX3VzZV9wZXJtKCk7CisgICAgZHNpZCA9IGRvbWFp
bl9zaWQoZCk7CisgICAgcmV0dXJuIGF2Y19oYXNfcGVybShkc2lkLCByc2lkLCBTRUNDTEFTU19S
RVNPVVJDRSwgcGVybSwgJmFkKTsKK30KKwogc3RhdGljIGludCBmbGFza19yZXNvdXJjZV9wbHVn
X2NvcmUodm9pZCkKIHsKICAgICByZXR1cm4gYXZjX2N1cnJlbnRfaGFzX3Blcm0oU0VDSU5JVFNJ
RF9ET01YRU4sIFNFQ0NMQVNTX1JFU09VUkNFLCBSRVNPVVJDRV9fUExVRywgTlVMTCk7CkBAIC0x
ODAwLDYgKzE4MjMsNyBAQCBzdGF0aWMgc3RydWN0IHhzbV9vcGVyYXRpb25zIGZsYXNrX29wcyA9
IHsKICAgICAuaW9tZW1fcGVybWlzc2lvbiA9IGZsYXNrX2lvbWVtX3Blcm1pc3Npb24sCiAgICAg
LmlvbWVtX21hcHBpbmcgPSBmbGFza19pb21lbV9tYXBwaW5nLAogICAgIC5wY2lfY29uZmlnX3Bl
cm1pc3Npb24gPSBmbGFza19wY2lfY29uZmlnX3Blcm1pc3Npb24sCisgICAgLm1zaV9jb250cm9s
ID0gZmxhc2tfbXNpX2NvbnRyb2wsCiAKICAgICAucmVzb3VyY2VfcGx1Z19jb3JlID0gZmxhc2tf
cmVzb3VyY2VfcGx1Z19jb3JlLAogICAgIC5yZXNvdXJjZV91bnBsdWdfY29yZSA9IGZsYXNrX3Jl
c291cmNlX3VucGx1Z19jb3JlLApkaWZmIC0tZ2l0IGEveGVuL3hzbS9mbGFzay9wb2xpY3kvYWNj
ZXNzX3ZlY3RvcnMgYi94ZW4veHNtL2ZsYXNrL3BvbGljeS9hY2Nlc3NfdmVjdG9ycwppbmRleCAx
OTRkNzQzLi4wZGRmYzkxIDEwMDY0NAotLS0gYS94ZW4veHNtL2ZsYXNrL3BvbGljeS9hY2Nlc3Nf
dmVjdG9ycworKysgYi94ZW4veHNtL2ZsYXNrL3BvbGljeS9hY2Nlc3NfdmVjdG9ycwpAQCAtNDY2
LDYgKzQ2Niw3IEBAIGNsYXNzIHJlc291cmNlCiAjIGNoZWNrZWQgZm9yIFBIWVNERVZPUF9yZXN0
b3JlX21zaSogKHRhcmdldCBQQ0kgZGV2aWNlKQogIyBjaGVja2VkIGZvciBQSFlTREVWT1Bfc2V0
dXBfZ3NpICh0YXJnZXQgSVJRKQogIyBjaGVja2VkIGZvciBQSFlTREVWT1BfcGNpX21tY2ZnX3Jl
c2VydmVkICh0YXJnZXQgeGVuX3QpCisjIGNoZWNrZWQgZm9yIFBIWVNERVZPUF9tc2lfY29udHJv
bCAodGFyZ2V0IFBDSSBkZXZpY2UpCiAgICAgc2V0dXAKIH0KIAotLSAKZ2l0LXNlcmllcyAwLjku
MQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRl
dmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9s
aXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

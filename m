Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 4715AE291F
	for <lists+xen-devel@lfdr.de>; Thu, 24 Oct 2019 05:49:07 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iNU3t-0003fY-EF; Thu, 24 Oct 2019 03:45:21 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=zRGa=YR=invisiblethingslab.com=marmarek@srs-us1.protection.inumbo.net>)
 id 1iNU3s-0003fO-AJ
 for xen-devel@lists.xenproject.org; Thu, 24 Oct 2019 03:45:20 +0000
X-Inumbo-ID: b07bc210-f610-11e9-beca-bc764e2007e4
Received: from new2-smtp.messagingengine.com (unknown [66.111.4.224])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id b07bc210-f610-11e9-beca-bc764e2007e4;
 Thu, 24 Oct 2019 03:45:15 +0000 (UTC)
Received: from compute7.internal (compute7.nyi.internal [10.202.2.47])
 by mailnew.nyi.internal (Postfix) with ESMTP id 29D34708B;
 Wed, 23 Oct 2019 23:45:15 -0400 (EDT)
Received: from mailfrontend1 ([10.202.2.162])
 by compute7.internal (MEProxy); Wed, 23 Oct 2019 23:45:15 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=
 messagingengine.com; h=cc:content-transfer-encoding:content-type
 :date:from:in-reply-to:message-id:mime-version:references
 :subject:to:x-me-proxy:x-me-proxy:x-me-sender:x-me-sender
 :x-sasl-enc; s=fm1; bh=Rnf1HlA5KdCns/sgMtkx8jI7lpGa2YVdg56M8DgBw
 kM=; b=G9WBXuaRcqtifHlZUdiJbMKYcp39rPr89G1QUIVwDdILbf/6oxUD6UUVw
 CtBhz42tqDs/rJ+W0MP7Isrxd8xJmoYbseGdKpChmj+QCZihkUGBeCLoqMvoQ8pr
 2koYt9sRcd2RJ9/tqInHD3IczzD0fnLSE2h/ua0s/G6I66sZ+AdmW+ZYXDd/sBx6
 iruOuVCAGn2LdDSfCv9vnf5NUL2w70BRA8mDq2Oi7mtvIvnO3sa9qH9rvLm+dM8I
 t9esZUz3fUvQ5jP9I7CFzO3BXDjOJ2tAAZu39zX0clwSChtQQUVOcNP0RGXwpYDa
 IhpfTPHNgZNg2cl1e1irq/CDNeBTA==
X-ME-Sender: <xms:Sh6xXX-5hdF9TsAKyUGerCqJpXSC2hYI2wseSs4ET3qx2q3l2L-yNw>
X-ME-Proxy-Cause: gggruggvucftvghtrhhoucdtuddrgedufedrledtgdejvdcutefuodetggdotefrodftvf
 curfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfghnecu
 uegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenuc
 fjughrpefhvffufffkofgjfhggtgfgsehtkeertdertdejnecuhfhrohhmpeforghrvghk
 ucforghrtgiihihkohifshhkihdqifpkrhgvtghkihcuoehmrghrmhgrrhgvkhesihhnvh
 hishhisghlvghthhhinhhgshhlrggsrdgtohhmqeenucfkphepledurdeihedrfeegrdef
 feenucfrrghrrghmpehmrghilhhfrhhomhepmhgrrhhmrghrvghksehinhhvihhsihgslh
 gvthhhihhnghhslhgrsgdrtghomhenucevlhhushhtvghrufhiiigvpedt
X-ME-Proxy: <xmx:Sx6xXULLTY9ClMpc_QuSiZBbiCd63FOr5LCTFueZ60PScVVKjNlOaA>
 <xmx:Sx6xXVvTm04vfjkUBuJFYwHx7yhFA1r1ka1GbreT1X4jxtfN6eUBNg>
 <xmx:Sx6xXbCm7LHQ7nkU26P6HyJnmZrwLd82nmweucUxbsAfwgiNtQpBIA>
 <xmx:Sx6xXTSwaRmSGe5FtBDw9UQijyQDhtYL9OHZPrWRf1WlY6zspEyf-w>
Received: from localhost.localdomain (ip5b412221.dynamic.kabel-deutschland.de
 [91.65.34.33])
 by mail.messagingengine.com (Postfix) with ESMTPA id 930C880066;
 Wed, 23 Oct 2019 23:45:13 -0400 (EDT)
From: =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>
To: xen-devel@lists.xenproject.org
Date: Thu, 24 Oct 2019 05:45:04 +0200
Message-Id: <db4793665d03513d06ffd6b3d4a52c8a699ccb0b.1571888583.git-series.marmarek@invisiblethingslab.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.d9b2d7d69cc351a30963d653b1d459c878356e4e.1571888583.git-series.marmarek@invisiblethingslab.com>
References: <cover.d9b2d7d69cc351a30963d653b1d459c878356e4e.1571888583.git-series.marmarek@invisiblethingslab.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v4 2/3] xen/efi: optionally call
 SetVirtualAddressMap()
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

U29tZSBVRUZJIGltcGxlbWVudGF0aW9ucyBhcmUgbm90IGhhcHB5IGFib3V0IGxhY2sgb2YKU2V0
VmlydHVhbEFkZHJlc3NNYXAoKSBjYWxsLiBMaWtlbHkgYWJ1c2UgdGhlIGFkZHJlc3MgbWFwIGNo
YW5nZQpub3RpZmljYXRpb24gdG8gZG8gdGhpbmdzIGJleW9uZCB0aGUgbmVjZXNzYXJ5IENvbnZl
cnRQb2ludGVyKCkgY2FsbHMuClNwZWNpZmljYWxseSwgd2lodG91dCB0aGUgU2V0VmlydHVhbEFk
ZHJlc3NNYXAoKSBjYWxsLCBzb21lIGFjY2VzcwpFZmlCb290U2VydmljZXN7Q29kZSxEYXRhfSwg
b3IgZXZlbiB0b3RhbGx5IHVubWFwcGVkIGFyZWFzLiBFeGFtcGxlCmNyYXNoIG9mIEdldFZhcmlh
YmxlKCkgY2FsbCBvbiBUaGlua3BhZCBXNTQwOgoKICAgIFhlbiBjYWxsIHRyYWNlOgogICAgICAg
WzwwMDAwMDAwMDAwMDAwMDgwPl0gMDAwMDAwMDAwMDAwMDA4MAogICAgICAgWzw4YzJiMDM5OGUw
MDAwZGFhPl0gOGMyYjAzOThlMDAwMGRhYQoKICAgIFBhZ2V0YWJsZSB3YWxrIGZyb20gZmZmZmZm
ZmY4NTg0ODNhMToKICAgICAgIEw0WzB4MWZmXSA9IDAwMDAwMDAwMDAwMDAwMDAgZmZmZmZmZmZm
ZmZmZmZmZgoKICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAg
IFBhbmljIG9uIENQVSAwOgogICAgRkFUQUwgUEFHRSBGQVVMVAogICAgW2Vycm9yX2NvZGU9MDAw
Ml0KICAgIEZhdWx0aW5nIGxpbmVhciBhZGRyZXNzOiBmZmZmZmZmZjg1ODQ4M2ExCiAgICAqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgpGaXggdGhpcyBieSBjYWxsaW5n
IFNldFZpcnR1YWxBZGRyZXNzTWFwKCkgcnVudGltZSBzZXJ2aWNlLCBnaXZpbmcgaXQKMToxIG1h
cCBmb3IgYXJlYXMgbWFya2VkIGFzIG5lZWRlZCBkdXJpbmcgcnVudGltZS4gVGhlIGFkZHJlc3Mg
c3BhY2UgaW4Kd2hpY2ggRUZJIHJ1bnRpbWUgc2VydmljZXMgYXJlIGNhbGxlZCBpcyB1bmNoYW5n
ZWQsIGJ1dCBVRUZJIHZpZXcgb2YgaXQKbWF5IGJlLgpTaW5jZSBpdCdzIGZhaXJseSBsYXRlIGlu
IFhlbiA0LjEzIGRldmVsb3BtZW50IGN5Y2xlLCBkaXNhYmxlIGl0CmJ5IGRlZmF1bHQgYW5kIGhp
ZGUgYmVoaW5kIEVYUEVSVC4KClNpZ25lZC1vZmYtYnk6IE1hcmVrIE1hcmN6eWtvd3NraS1Hw7Ny
ZWNraSA8bWFybWFyZWtAaW52aXNpYmxldGhpbmdzbGFiLmNvbT4KLS0tCkNoYW5nZXMgaW4gdjI6
CiAtIGNhbGwgIFNldFZpcnR1YWxBZGRyZXNzTWFwKCkgYmVmb3JlIGFkanVzdGluZyBlZmkgcG9p
bnRlcnM7IGVzcGVjaWFsbHkKICAgZWZpX21lbW1hcCBhdCB0aGlzIHBvaW50IHN0aWxsIG5lZWRz
IHRvIHVzZSBwaHlzaWNhbCBhZGRyZXNzLCBub3QgYQogICBkaXJlY3RtYXAgb25lCkNoYW5nZXMg
aW4gdjM6CiAtIGNsYXJpZnkgaW1wYWN0IChvciByYXRoZXI6IGxhY2sgb2YgaXQpIG9uIGtleGVj
LCBkcm9wICFLRVhFQwogICBkZXBlbmRlbmN5LgpDaGFuZ2VzIGluIHY0OgogLSB1cGRhdGUgY29t
bWl0IG1lc3NhZ2UKIC0gYWRqdXN0IGNvbW1lbnQKIC0gcmVuYW1lIGNvbmZpZyBvcHRpb24gdG8g
YWRkIEVGSV8gcHJlZml4Ci0tLQogeGVuL2NvbW1vbi9LY29uZmlnICAgIHwgMTAgKysrKysrKysr
KwogeGVuL2NvbW1vbi9lZmkvYm9vdC5jIHwgMzMgKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrLS0tCiAyIGZpbGVzIGNoYW5nZWQsIDQwIGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0p
CgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9LY29uZmlnIGIveGVuL2NvbW1vbi9LY29uZmlnCmlu
ZGV4IDE2ODI5ZjYuLjU0OWE3ZDUgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vS2NvbmZpZworKysg
Yi94ZW4vY29tbW9uL0tjb25maWcKQEAgLTg4LDYgKzg4LDE2IEBAIGNvbmZpZyBLRVhFQwogCiAJ
ICBJZiB1bnN1cmUsIHNheSBZLgogCitjb25maWcgRUZJX1NFVF9WSVJUVUFMX0FERFJFU1NfTUFQ
CisgICAgYm9vbCAiRUZJOiBjYWxsIFNldFZpcnR1YWxBZGRyZXNzTWFwKCkiIGlmIEVYUEVSVCA9
ICJ5IgorICAgIC0tLWhlbHAtLS0KKyAgICAgIENhbGwgRUZJIFNldFZpcnR1YWxBZGRyZXNzTWFw
KCkgcnVudGltZSBzZXJ2aWNlIHRvIHNldHVwIG1lbW9yeSBtYXAgZm9yCisgICAgICBmdXJ0aGVy
IHJ1bnRpbWUgc2VydmljZXMuIEFjY29yZGluZyB0byBVRUZJIHNwZWMsIGl0IGlzbid0IHN0cmlj
dGx5CisgICAgICBuZWNlc3NhcnksIGJ1dCBtYW55IFVFRkkgaW1wbGVtZW50YXRpb25zIG1pc2Jl
aGF2ZSB3aGVuIHRoaXMgY2FsbCBpcworICAgICAgbWlzc2luZy4KKworICAgICAgSWYgdW5zdXJl
LCBzYXkgTi4KKwogY29uZmlnIFhFTk9QUk9GCiAJZGVmX2Jvb2wgeQogCXByb21wdCAiWGVuIE9w
cm9maWxlIFN1cHBvcnQiIGlmIEVYUEVSVCA9ICJ5IgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9l
ZmkvYm9vdC5jIGIveGVuL2NvbW1vbi9lZmkvYm9vdC5jCmluZGV4IGNkZGYzZGUuLjlkZWJjNWIg
MTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vZWZpL2Jvb3QuYworKysgYi94ZW4vY29tbW9uL2VmaS9i
b290LmMKQEAgLTEwNTYsMTEgKzEwNTYsMTcgQEAgc3RhdGljIHZvaWQgX19pbml0IGVmaV9zZXRf
Z29wX21vZGUoRUZJX0dSQVBISUNTX09VVFBVVF9QUk9UT0NPTCAqZ29wLCBVSU5UTiBnb3AKICAg
ICAgICAgZWZpX2FyY2hfdmlkZW9faW5pdChnb3AsIGluZm9fc2l6ZSwgbW9kZV9pbmZvKTsKIH0K
IAorI2RlZmluZSBJTlZBTElEX1ZJUlRVQUxfQUREUkVTUyAoMHhCQUFBRFVMIDw8IFwKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIChFRklfUEFHRV9TSElGVCArIEJJVFNfUEVSX0xP
TkcgLSAzMikpCisKIHN0YXRpYyB2b2lkIF9faW5pdCBlZmlfZXhpdF9ib290KEVGSV9IQU5ETEUg
SW1hZ2VIYW5kbGUsIEVGSV9TWVNURU1fVEFCTEUgKlN5c3RlbVRhYmxlKQogewogICAgIEVGSV9T
VEFUVVMgc3RhdHVzOwogICAgIFVJTlROIGluZm9fc2l6ZSA9IDAsIG1hcF9rZXk7CiAgICAgYm9v
bCByZXRyeTsKKyNpZmRlZiBDT05GSUdfRUZJX1NFVF9WSVJUVUFMX0FERFJFU1NfTUFQCisgICAg
dW5zaWduZWQgaW50IGk7CisjZW5kaWYKIAogICAgIGVmaV9icy0+R2V0TWVtb3J5TWFwKCZpbmZv
X3NpemUsIE5VTEwsICZtYXBfa2V5LAogICAgICAgICAgICAgICAgICAgICAgICAgICZlZmlfbWRl
c2Nfc2l6ZSwgJm1kZXNjX3Zlcik7CkBAIC0xMDk0LDYgKzExMDAsMjYgQEAgc3RhdGljIHZvaWQg
X19pbml0IGVmaV9leGl0X2Jvb3QoRUZJX0hBTkRMRSBJbWFnZUhhbmRsZSwgRUZJX1NZU1RFTV9U
QUJMRSAqU3lzdGUKICAgICBpZiAoIEVGSV9FUlJPUihzdGF0dXMpICkKICAgICAgICAgUHJpbnRF
cnJNZXNnKEwiQ2Fubm90IGV4aXQgYm9vdCBzZXJ2aWNlcyIsIHN0YXR1cyk7CiAKKyNpZmRlZiBD
T05GSUdfRUZJX1NFVF9WSVJUVUFMX0FERFJFU1NfTUFQCisgICAgZm9yICggaSA9IDA7IGkgPCBl
ZmlfbWVtbWFwX3NpemU7IGkgKz0gZWZpX21kZXNjX3NpemUgKQorICAgIHsKKyAgICAgICAgRUZJ
X01FTU9SWV9ERVNDUklQVE9SICpkZXNjID0gZWZpX21lbW1hcCArIGk7CisKKyAgICAgICAgaWYg
KCBkZXNjLT5BdHRyaWJ1dGUgJiBFRklfTUVNT1JZX1JVTlRJTUUgKQorICAgICAgICAgICAgZGVz
Yy0+VmlydHVhbFN0YXJ0ID0gZGVzYy0+UGh5c2ljYWxTdGFydDsKKyAgICAgICAgZWxzZQorICAg
ICAgICAgICAgZGVzYy0+VmlydHVhbFN0YXJ0ID0gSU5WQUxJRF9WSVJUVUFMX0FERFJFU1M7Cisg
ICAgfQorICAgIHN0YXR1cyA9IGVmaV9ycy0+U2V0VmlydHVhbEFkZHJlc3NNYXAoZWZpX21lbW1h
cF9zaXplLCBlZmlfbWRlc2Nfc2l6ZSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG1kZXNjX3ZlciwgZWZpX21lbW1hcCk7CisgICAgaWYgKCBzdGF0dXMgIT0gRUZJ
X1NVQ0NFU1MgKQorICAgIHsKKyAgICAgICAgcHJpbnRrKFhFTkxPR19FUlIgIkVGSTogU2V0Vmly
dHVhbEFkZHJlc3NNYXAoKSBmYWlsZWQgKCUjbHgpLCBkaXNhYmxpbmcgcnVudGltZSBzZXJ2aWNl
c1xuIiwKKyAgICAgICAgICAgICAgIHN0YXR1cyk7CisgICAgICAgIF9fY2xlYXJfYml0KEVGSV9S
UywgJmVmaV9mbGFncyk7CisgICAgfQorI2VuZGlmCisKICAgICAvKiBBZGp1c3QgcG9pbnRlcnMg
aW50byBFRkkuICovCiAgICAgZWZpX2N0ID0gKHZvaWQgKillZmlfY3QgKyBESVJFQ1RNQVBfVklS
VF9TVEFSVDsKICAgICBlZmlfbWVtbWFwID0gKHZvaWQgKillZmlfbWVtbWFwICsgRElSRUNUTUFQ
X1ZJUlRfU1RBUlQ7CkBAIC0xNDYwLDggKzE0ODYsNiBAQCBzdGF0aWMgYm9vbCBfX2luaXQgcnRf
cmFuZ2VfdmFsaWQodW5zaWduZWQgbG9uZyBzbWZuLCB1bnNpZ25lZCBsb25nIGVtZm4pCiAgICAg
cmV0dXJuIHRydWU7CiB9CiAKLSNkZWZpbmUgSU5WQUxJRF9WSVJUVUFMX0FERFJFU1MgKDB4QkFB
QURVTCA8PCBcCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoRUZJX1BBR0VfU0hJ
RlQgKyBCSVRTX1BFUl9MT05HIC0gMzIpKQogCiB2b2lkIF9faW5pdCBlZmlfaW5pdF9tZW1vcnko
dm9pZCkKIHsKQEAgLTE1NzYsNyArMTYwMCwxMCBAQCB2b2lkIF9faW5pdCBlZmlfaW5pdF9tZW1v
cnkodm9pZCkKICAgICAgICAgcmV0dXJuOwogICAgIH0KIAotICAgIC8qIFNldCB1cCAxOjEgcGFn
ZSB0YWJsZXMgdG8gZG8gcnVudGltZSBjYWxscyBpbiAicGh5c2ljYWwiIG1vZGUuICovCisgICAg
LyoKKyAgICAgKiBTZXQgdXAgMToxIHBhZ2UgdGFibGVzIGZvciBydW50aW1lIGNhbGxzLiBTZWUg
U2V0VmlydHVhbEFkZHJlc3NNYXAoKSBpbgorICAgICAqIGVmaV9leGl0X2Jvb3QoKS4KKyAgICAg
Ki8KICAgICBlZmlfbDRfcGd0YWJsZSA9IGFsbG9jX3hlbl9wYWdldGFibGUoKTsKICAgICBCVUdf
T04oIWVmaV9sNF9wZ3RhYmxlKTsKICAgICBjbGVhcl9wYWdlKGVmaV9sNF9wZ3RhYmxlKTsKLS0g
CmdpdC1zZXJpZXMgMC45LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2pl
Y3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4t
ZGV2ZWw=

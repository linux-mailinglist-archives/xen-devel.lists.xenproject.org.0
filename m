Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 225A018C239
	for <lists+xen-devel@lfdr.de>; Thu, 19 Mar 2020 22:24:08 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jF2c1-00028D-SN; Thu, 19 Mar 2020 21:21:57 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=iZ0u=5E=merlin.srs.infradead.org=batv+64936dbce1487ac6d779+6052+infradead.org+dwmw2@srs-us1.protection.inumbo.net>)
 id 1jF2c0-000287-36
 for xen-devel@lists.xenproject.org; Thu, 19 Mar 2020 21:21:56 +0000
X-Inumbo-ID: a6e0fde8-6a27-11ea-b34e-bc764e2007e4
Received: from merlin.infradead.org (unknown [2001:8b0:10b:1231::1])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id a6e0fde8-6a27-11ea-b34e-bc764e2007e4;
 Thu, 19 Mar 2020 21:21:53 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
 d=infradead.org; s=merlin.20170209; h=Sender:Content-Transfer-Encoding:
 Content-Type:MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:
 To:From:Reply-To:Content-ID:Content-Description;
 bh=6YDfu/Ovc+xaBsSLNmp5v6ek59X09jJH8RVuM5OuFpI=; b=GY3wX8SxVLFms/UfYcV/TnzD2e
 8b5CqOkgvMmybaD+dRWOEVs/r7M8EmfCgptCJddtd4rQEiyRcA3jr8qxVOfo/zZ/yKolL9yRDxoyc
 ijy+cd2F9007p8KUCFgO+EZqmiuksfMGiMIWHN6WUkL/RGb/F8MHgxSBOjFf5eahfO+L6fPBj7TLF
 hOE+yDM5je+paAcA684iez5FtyhXBUSYu7c/ZPbv9i+T5Q3OgUVlNwBJlkHp9dkjglGcVMdwDWrsU
 FXgOKXpsY9LKHCYpMWC+8fyCyf/OimIeB5kSaHXWPOvRRYJa85LMyin+O5Q6B/1iNMzbBVvHzMxgd
 nXGUgzxg==;
Received: from i7.infradead.org ([2001:8b0:10b:1:21e:67ff:fecb:7a92])
 by merlin.infradead.org with esmtpsa (Exim 4.92.3 #3 (Red Hat Linux))
 id 1jF2bv-0000nU-Ew; Thu, 19 Mar 2020 21:21:51 +0000
Received: from dwoodhou by i7.infradead.org with local (Exim 4.92 #3 (Red Hat
 Linux)) id 1jF2bu-00B7lZ-K3; Thu, 19 Mar 2020 21:21:50 +0000
From: David Woodhouse <dwmw2@infradead.org>
To: xen-devel@lists.xenproject.org
Date: Thu, 19 Mar 2020 21:21:50 +0000
Message-Id: <20200319212150.2651419-2-dwmw2@infradead.org>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20200319212150.2651419-1-dwmw2@infradead.org>
References: <759b48cc361af1136e3cf1658f3dcb1d2937db9c.camel@infradead.org>
 <20200319212150.2651419-1-dwmw2@infradead.org>
MIME-Version: 1.0
X-SRS-Rewrite: SMTP reverse-path rewritten from <dwmw2@infradead.org> by
 merlin.infradead.org. See http://www.infradead.org/rpr.html
Subject: [Xen-devel] [PATCH 2/2] xen/mm: Introduce PGC_state_uninitialised
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 George Dunlap <george.dunlap@citrix.com>, hongyxia@amazon.com,
 Jan Beulich <jbeulich@suse.com>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogRGF2aWQgV29vZGhvdXNlIDxkd213QGFtYXpvbi5jby51az4KCkl0IGlzIHBvc3NpYmxl
IGZvciBwYWdlcyB0byBlbnRlciBnZW5lcmFsIGNpcmN1bGF0aW9uIHdpdGhvdXQgZXZlcgpiZWlu
ZyBwcm9jZXNzIGJ5IGluaXRfaGVhcF9wYWdlcygpLgoKRm9yIGV4YW1wbGUsIHBhZ2VzIG9mIHRo
ZSBtdWx0aWJvb3QgbW9kdWxlIGNvbnRhaW5pbmcgdGhlIGluaXRyYW1mcyBtYXkKYmUgYXNzaWdu
ZWQgdmlhIGFzc2lnbl9wYWdlcygpIHRvIGRvbTAgYXMgaXQgaXMgY3JlYXRlZC4gQW5kIHNvbWUg
Y29kZQppbmNsdWRpbmcgbWFwX3BhZ2VzX3RvX3hlbigpIGhhcyBjaGVja3Mgb24gJ3N5c3RlbV9z
dGF0ZScgdG8gZGV0ZXJtaW5lCndoZXRoZXIgdG8gdXNlIHRoZSBib290IG9yIHRoZSBoZWFwIGFs
bG9jYXRvciwgYnV0IGl0IHNlZW1zIGltcG9zc2libGUKdG8gcHJvdmUgdGhhdCBwYWdlcyBhbGxv
Y2F0ZWQgYnkgdGhlIGJvb3QgYWxsb2NhdG9yIGFyZSBub3Qgc3Vic2VxdWVudGx5CmZyZWVkIHdp
dGggZnJlZV9oZWFwX3BhZ2VzKCkuCgpUaGlzIGFjdHVhbGx5IHdvcmtzIGZpbmUgaW4gdGhlIG1h
am9yaXR5IG9mIGNhc2VzOyB0aGVyZSBhcmUgb25seSBhIGZldwplc290ZXJpYyBjb3JuZXIgY2Fz
ZXMgd2hpY2ggaW5pdF9oZWFwX3BhZ2VzKCkgaGFuZGxlcyBiZWZvcmUgaGFuZGluZyB0aGUKcGFn
ZSByYW5nZSBvZmYgdG8gZnJlZV9oZWFwX3BhZ2VzKCk6CiDigKIgRXhjbHVkaW5nIE1GTiAjMCB0
byBhdm9pZCBpbmFwcHJvcHJpYXRlIGNyb3NzLXpvbmUgbWVyZ2luZy4KIOKAoiBFbnN1cmluZyB0
aGF0IHRoZSBub2RlIGluZm9ybWF0aW9uIHN0cnVjdHVyZXMgZXhpc3QsIHdoZW4gdGhlIGZpcnN0
CiAgIHBhZ2Uocykgb2YgYSBnaXZlbiBub2RlIGFyZSBoYW5kbGVkLgog4oCiIEhpZ2ggb3JkZXIg
YWxsb2NhdGlvbnMgY3Jvc3NpbmcgZnJvbSBvbmUgbm9kZSB0byBhbm90aGVyLgoKVG8gaGFuZGxl
IHRoaXMgY2FzZSwgc2hpZnQgUEdfc3RhdGVfaW51c2UgZnJvbSBpdHMgY3VycmVudCB2YWx1ZSBv
Zgp6ZXJvLCB0byBhbm90aGVyIHZhbHVlLiBVc2UgemVybywgd2hpY2ggaXMgdGhlIGluaXRpYWwg
c3RhdGUgb2YgdGhlCmVudGlyZSBmcmFtZSB0YWJsZSwgYXMgUEdfc3RhdGVfdW5pbml0aWFsaXNl
ZC4KCkZpeCBhIGNvdXBsZSBvZiBhc3NlcnRpb25zIHdoaWNoIHdlcmUgYXNzdW1pbmcgdGhhdCBQ
R19zdGF0ZV9pbnVzZSBpcwp6ZXJvLCBhbmQgbWFrZSB0aGVtIGNvcGUgd2l0aCB0aGUgUEdfc3Rh
dGVfdW5pbml0aWFsaXNlZCBjYXNlIHRvbyB3aGVyZQphcHBvcHJpYXRlLgoKRmluYWxseSwgbWFr
ZSBmcmVlX2hlYXBfcGFnZXMoKSBjYWxsIHRocm91Z2ggdG8gaW5pdF9oZWFwX3BhZ2VzKCkgd2hl
bgpnaXZlbiBhIHBhZ2UgcmFuZ2Ugd2hpY2ggaGFzIG5vdCBiZWVuIGluaXRpYWxpc2VkLiBUaGlz
IGNhbm5vdCBrZWVwCnJlY3Vyc2luZyBiZWNhdXNlIGluaXRfaGVhcF9wYWdlcygpIHdpbGwgc2V0
IGVhY2ggcGFnZSBzdGF0ZSB0bwpQR0Nfc3RhdGVfaW51c2UgYmVmb3JlIHBhc3NpbmcgaXQgYmFj
ayB0byBmcmVlX2hlYXBfcGFnZXMoKSBmb3IgdGhlCnNlY29uZCB0aW1lLgoKU2lnbmVkLW9mZi1i
eTogRGF2aWQgV29vZGhvdXNlIDxkd213QGFtYXpvbi5jby51az4KLS0tCiB4ZW4vYXJjaC94ODYv
bW0uYyAgICAgICAgfCAgMyArKy0KIHhlbi9jb21tb24vcGFnZV9hbGxvYy5jICB8IDQ0ICsrKysr
KysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0KIHhlbi9pbmNsdWRlL2FzbS1hcm0v
bW0uaCB8ICAzICsrLQogeGVuL2luY2x1ZGUvYXNtLXg4Ni9tbS5oIHwgIDMgKystCiA0IGZpbGVz
IGNoYW5nZWQsIDM4IGluc2VydGlvbnMoKyksIDE1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L3hlbi9hcmNoL3g4Ni9tbS5jIGIveGVuL2FyY2gveDg2L21tLmMKaW5kZXggNjI1MDdjYTY1MS4u
NWYwNTgxYzA3MiAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L21tLmMKKysrIGIveGVuL2FyY2gv
eDg2L21tLmMKQEAgLTQ5MSw3ICs0OTEsOCBAQCB2b2lkIHNoYXJlX3hlbl9wYWdlX3dpdGhfZ3Vl
c3Qoc3RydWN0IHBhZ2VfaW5mbyAqcGFnZSwgc3RydWN0IGRvbWFpbiAqZCwKIAogICAgIHBhZ2Vf
c2V0X293bmVyKHBhZ2UsIGQpOwogICAgIHNtcF93bWIoKTsgLyogaW5zdGFsbCB2YWxpZCBkb21h
aW4gcHRyIGJlZm9yZSB1cGRhdGluZyByZWZjbnQuICovCi0gICAgQVNTRVJUKChwYWdlLT5jb3Vu
dF9pbmZvICYgflBHQ194ZW5faGVhcCkgPT0gMCk7CisgICAgQVNTRVJUKChwYWdlLT5jb3VudF9p
bmZvICYgflBHQ194ZW5faGVhcCkgPT0gUEdDX3N0YXRlX2ludXNlIHx8CisgICAgICAgICAgIChw
YWdlLT5jb3VudF9pbmZvICYgflBHQ194ZW5faGVhcCkgPT0gUEdDX3N0YXRlX3VuaW5pdGlhbGlz
ZWQpOwogCiAgICAgLyogT25seSBhZGQgdG8gdGhlIGFsbG9jYXRpb24gbGlzdCBpZiB0aGUgZG9t
YWluIGlzbid0IGR5aW5nLiAqLwogICAgIGlmICggIWQtPmlzX2R5aW5nICkKZGlmZiAtLWdpdCBh
L3hlbi9jb21tb24vcGFnZV9hbGxvYy5jIGIveGVuL2NvbW1vbi9wYWdlX2FsbG9jLmMKaW5kZXgg
OGQ3MmE2NGY0ZS4uNGY3OTcxZjJhMSAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9wYWdlX2FsbG9j
LmMKKysrIGIveGVuL2NvbW1vbi9wYWdlX2FsbG9jLmMKQEAgLTI1Miw2ICsyNTIsOCBAQCBzdHJ1
Y3QgYm9vdG1lbV9yZWdpb24gewogc3RhdGljIHN0cnVjdCBib290bWVtX3JlZ2lvbiBfX2luaXRk
YXRhCiAgICAgYm9vdG1lbV9yZWdpb25fbGlzdFtQQUdFX1NJWkUgLyBzaXplb2Yoc3RydWN0IGJv
b3RtZW1fcmVnaW9uKV07CiBzdGF0aWMgdW5zaWduZWQgaW50IF9faW5pdGRhdGEgbnJfYm9vdG1l
bV9yZWdpb25zOworc3RhdGljIHZvaWQgaW5pdF9oZWFwX3BhZ2VzKHN0cnVjdCBwYWdlX2luZm8g
KnBnLCB1bnNpZ25lZCBsb25nIG5yX3BhZ2VzLAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGJvb2wgc2NydWIpOwogCiBzdHJ1Y3Qgc2NydWJfcmVnaW9uIHsKICAgICB1bnNpZ25lZCBsb25n
IG9mZnNldDsKQEAgLTEzOTAsNiArMTM5MiwxNyBAQCBzdGF0aWMgdm9pZCBmcmVlX2hlYXBfcGFn
ZXMoCiAgICAgQVNTRVJUKG9yZGVyIDw9IE1BWF9PUkRFUik7CiAgICAgQVNTRVJUKG5vZGUgPj0g
MCk7CiAKKyAgICBpZiAoIHBhZ2Vfc3RhdGVfaXMocGcsIHVuaW5pdGlhbGlzZWQpICkKKyAgICB7
CisgICAgICAgIGluaXRfaGVhcF9wYWdlcyhwZywgMSA8PCBvcmRlciwgbmVlZF9zY3J1Yik7Cisg
ICAgICAgIC8qCisgICAgICAgICAqIGluaXRfaGVhcF9wYWdlcygpIHdpbGwgY2FsbCBiYWNrIGlu
dG8gZnJlZV9oZWFwX3BhZ2VzKCkgZm9yCisgICAgICAgICAqIGVhY2ggcGFnZSBidXQgY2Fubm90
IGtlZXAgcmVjdXJzaW5nIGJlY2F1c2UgZWFjaCBwYWdlIHdpbGwKKyAgICAgICAgICogYmUgc2V0
IHRvIFBHQ19zdGF0ZV9pbnVzZSBmaXJzdC4KKyAgICAgICAgICovCisgICAgICAgIHJldHVybjsK
KyAgICB9CisKICAgICBzcGluX2xvY2soJmhlYXBfbG9jayk7CiAKICAgICBmb3IgKCBpID0gMDsg
aSA8ICgxIDw8IG9yZGVyKTsgaSsrICkKQEAgLTE3NzEsMTEgKzE3ODQsMTAgQEAgaW50IHF1ZXJ5
X3BhZ2Vfb2ZmbGluZShtZm5fdCBtZm4sIHVpbnQzMl90ICpzdGF0dXMpCiAgKiBsYXR0ZXIgaXMg
bm90IG9uIGEgTUFYX09SREVSIGJvdW5kYXJ5LCB0aGVuIHdlIHJlc2VydmUgdGhlIHBhZ2UgYnkK
ICAqIG5vdCBmcmVlaW5nIGl0IHRvIHRoZSBidWRkeSBhbGxvY2F0b3IuCiAgKi8KLXN0YXRpYyB2
b2lkIGluaXRfaGVhcF9wYWdlcygKLSAgICBzdHJ1Y3QgcGFnZV9pbmZvICpwZywgdW5zaWduZWQg
bG9uZyBucl9wYWdlcykKK3N0YXRpYyB2b2lkIGluaXRfaGVhcF9wYWdlcyhzdHJ1Y3QgcGFnZV9p
bmZvICpwZywgdW5zaWduZWQgbG9uZyBucl9wYWdlcywKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBib29sIHNjcnViKQogewogICAgIHVuc2lnbmVkIGxvbmcgaTsKLSAgICBib29sIGlkbGVf
c2NydWIgPSBmYWxzZTsKIAogICAgIC8qCiAgICAgICogS2VlcCBNRk4gMCBhd2F5IGZyb20gdGhl
IGJ1ZGR5IGFsbG9jYXRvciB0byBhdm9pZCBjcm9zc2luZyB6b25lCkBAIC0xODAwLDcgKzE4MTIs
NyBAQCBzdGF0aWMgdm9pZCBpbml0X2hlYXBfcGFnZXMoCiAgICAgc3Bpbl91bmxvY2soJmhlYXBf
bG9jayk7CiAKICAgICBpZiAoIHN5c3RlbV9zdGF0ZSA8IFNZU19TVEFURV9hY3RpdmUgJiYgb3B0
X2Jvb3RzY3J1YiA9PSBCT09UU0NSVUJfSURMRSApCi0gICAgICAgIGlkbGVfc2NydWIgPSB0cnVl
OworICAgICAgICBzY3J1YiA9IHRydWU7CiAKICAgICBmb3IgKCBpID0gMDsgaSA8IG5yX3BhZ2Vz
OyBpKysgKQogICAgIHsKQEAgLTE4MjgsNyArMTg0MCw4IEBAIHN0YXRpYyB2b2lkIGluaXRfaGVh
cF9wYWdlcygKICAgICAgICAgICAgIG5yX3BhZ2VzIC09IG47CiAgICAgICAgIH0KIAotICAgICAg
ICBmcmVlX2hlYXBfcGFnZXMocGcgKyBpLCAwLCBzY3J1Yl9kZWJ1ZyB8fCBpZGxlX3NjcnViKTsK
KyAgICAgICAgcGdbaV0uY291bnRfaW5mbyA9IFBHQ19zdGF0ZV9pbnVzZTsKKyAgICAgICAgZnJl
ZV9oZWFwX3BhZ2VzKHBnICsgaSwgMCwgc2NydWJfZGVidWcgfHwgc2NydWIpOwogICAgIH0KIH0K
IApAQCAtMTg2NCw3ICsxODc3LDcgQEAgdm9pZCBfX2luaXQgZW5kX2Jvb3RfYWxsb2NhdG9yKHZv
aWQpCiAgICAgICAgIGlmICggKHItPnMgPCByLT5lKSAmJgogICAgICAgICAgICAgIChwaHlzX3Rv
X25pZChwZm5fdG9fcGFkZHIoci0+cykpID09IGNwdV90b19ub2RlKDApKSApCiAgICAgICAgIHsK
LSAgICAgICAgICAgIGluaXRfaGVhcF9wYWdlcyhtZm5fdG9fcGFnZShfbWZuKHItPnMpKSwgci0+
ZSAtIHItPnMpOworICAgICAgICAgICAgaW5pdF9oZWFwX3BhZ2VzKG1mbl90b19wYWdlKF9tZm4o
ci0+cykpLCByLT5lIC0gci0+cywgZmFsc2UpOwogICAgICAgICAgICAgci0+ZSA9IHItPnM7CiAg
ICAgICAgICAgICBicmVhazsKICAgICAgICAgfQpAQCAtMTg3Myw3ICsxODg2LDcgQEAgdm9pZCBf
X2luaXQgZW5kX2Jvb3RfYWxsb2NhdG9yKHZvaWQpCiAgICAgewogICAgICAgICBzdHJ1Y3QgYm9v
dG1lbV9yZWdpb24gKnIgPSAmYm9vdG1lbV9yZWdpb25fbGlzdFtpXTsKICAgICAgICAgaWYgKCBy
LT5zIDwgci0+ZSApCi0gICAgICAgICAgICBpbml0X2hlYXBfcGFnZXMobWZuX3RvX3BhZ2UoX21m
bihyLT5zKSksIHItPmUgLSByLT5zKTsKKyAgICAgICAgICAgIGluaXRfaGVhcF9wYWdlcyhtZm5f
dG9fcGFnZShfbWZuKHItPnMpKSwgci0+ZSAtIHItPnMsIGZhbHNlKTsKICAgICB9CiAgICAgbnJf
Ym9vdG1lbV9yZWdpb25zID0gMDsKIApAQCAtMjE0Miw3ICsyMTU1LDcgQEAgdm9pZCBpbml0X3hl
bmhlYXBfcGFnZXMocGFkZHJfdCBwcywgcGFkZHJfdCBwZSkKIAogICAgIG1lbWd1YXJkX2d1YXJk
X3JhbmdlKG1hZGRyX3RvX3ZpcnQocHMpLCBwZSAtIHBzKTsKIAotICAgIGluaXRfaGVhcF9wYWdl
cyhtYWRkcl90b19wYWdlKHBzKSwgKHBlIC0gcHMpID4+IFBBR0VfU0hJRlQpOworICAgIGluaXRf
aGVhcF9wYWdlcyhtYWRkcl90b19wYWdlKHBzKSwgKHBlIC0gcHMpID4+IFBBR0VfU0hJRlQsIGZh
bHNlKTsKIH0KIAogCkBAIC0yMjUxLDcgKzIyNjQsNyBAQCB2b2lkIGluaXRfZG9taGVhcF9wYWdl
cyhwYWRkcl90IHBzLCBwYWRkcl90IHBlKQogICAgIGlmICggbWZuX3goZW1mbikgPD0gbWZuX3go
c21mbikgKQogICAgICAgICByZXR1cm47CiAKLSAgICBpbml0X2hlYXBfcGFnZXMobWZuX3RvX3Bh
Z2Uoc21mbiksIG1mbl94KGVtZm4pIC0gbWZuX3goc21mbikpOworICAgIGluaXRfaGVhcF9wYWdl
cyhtZm5fdG9fcGFnZShzbWZuKSwgbWZuX3goZW1mbikgLSBtZm5feChzbWZuKSwgZmFsc2UpOwog
fQogCiAKQEAgLTIyODAsNyArMjI5Myw4IEBAIGludCBhc3NpZ25fcGFnZXMoCiAKICAgICAgICAg
Zm9yICggaSA9IDA7IGkgPCAoMXVsIDw8IG9yZGVyKTsgaSsrICkKICAgICAgICAgewotICAgICAg
ICAgICAgQVNTRVJUKCEocGdbaV0uY291bnRfaW5mbyAmIH5QR0NfZXh0cmEpKTsKKyAgICAgICAg
ICAgIEFTU0VSVCgocGdbaV0uY291bnRfaW5mbyAmIH5QR0NfZXh0cmEpID09IFBHQ19zdGF0ZV9p
bnVzZSB8fAorICAgICAgICAgICAgICAgICAgIChwZ1tpXS5jb3VudF9pbmZvICYgflBHQ19leHRy
YSkgPT0gUEdDX3N0YXRlX3VuaW5pdGlhbGlzZWQpOwogICAgICAgICAgICAgaWYgKCBwZ1tpXS5j
b3VudF9pbmZvICYgUEdDX2V4dHJhICkKICAgICAgICAgICAgICAgICBleHRyYV9wYWdlcysrOwog
ICAgICAgICB9CkBAIC0yMzE2LDEwICsyMzMwLDE2IEBAIGludCBhc3NpZ25fcGFnZXMoCiAgICAg
Zm9yICggaSA9IDA7IGkgPCAoMSA8PCBvcmRlcik7IGkrKyApCiAgICAgewogICAgICAgICBBU1NF
UlQocGFnZV9nZXRfb3duZXIoJnBnW2ldKSA9PSBOVUxMKTsKKyAgICAgICAgLyoKKyAgICAgICAg
ICogTm90ZTogTm90IHVzaW5nIHBhZ2Vfc3RhdGVfaXMoKSBoZXJlLiBUaGUgQVNTRVJUIHJlcXVp
cmVzIHRoYXQKKyAgICAgICAgICogYWxsIG90aGVyIGJpdHMgaW4gY291bnRfaW5mbyBhcmUgemVy
bywgaW4gYWRkaXRpb24gdG8gUEdDX3N0YXRlCisgICAgICAgICAqIGJlaW5nIGFwcHJvcHJpYXRl
LgorICAgICAgICAgKi8KKyAgICAgICAgQVNTRVJUKChwZ1tpXS5jb3VudF9pbmZvICYgflBHQ19l
eHRyYSkgPT0gUEdDX3N0YXRlX2ludXNlIHx8CisgICAgICAgICAgICAgICAocGdbaV0uY291bnRf
aW5mbyAmIH5QR0NfZXh0cmEpID09IFBHQ19zdGF0ZV91bmluaXRpYWxpc2VkKTsKICAgICAgICAg
cGFnZV9zZXRfb3duZXIoJnBnW2ldLCBkKTsKICAgICAgICAgc21wX3dtYigpOyAvKiBEb21haW4g
cG9pbnRlciBtdXN0IGJlIHZpc2libGUgYmVmb3JlIHVwZGF0aW5nIHJlZmNudC4gKi8KLSAgICAg
ICAgcGdbaV0uY291bnRfaW5mbyA9Ci0gICAgICAgICAgICAocGdbaV0uY291bnRfaW5mbyAmIFBH
Q19leHRyYSkgfCBQR0NfYWxsb2NhdGVkIHwgMTsKKyAgICAgICAgcGdbaV0uY291bnRfaW5mbyA9
IChwZ1tpXS5jb3VudF9pbmZvICYgUEdDX3N0YXRlKSB8IFBHQ19hbGxvY2F0ZWQgfCAxOwogICAg
ICAgICBwYWdlX2xpc3RfYWRkX3RhaWwoJnBnW2ldLCAmZC0+cGFnZV9saXN0KTsKICAgICB9CiAK
ZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL2FzbS1hcm0vbW0uaCBiL3hlbi9pbmNsdWRlL2FzbS1h
cm0vbW0uaAppbmRleCBhODc3NzkxZDFjLi40OTY2M2ZhOThhIDEwMDY0NAotLS0gYS94ZW4vaW5j
bHVkZS9hc20tYXJtL21tLmgKKysrIGIveGVuL2luY2x1ZGUvYXNtLWFybS9tbS5oCkBAIC0xMTMs
MTIgKzExMywxMyBAQCBzdHJ1Y3QgcGFnZV9pbmZvCiAgICogeyBpbnVzZSwgb2ZmbGluaW5nLCBv
ZmZsaW5lZCwgZnJlZSwgYnJva2VuX29mZmxpbmluZywgYnJva2VuIH0KICAgKi8KICNkZWZpbmUg
UEdDX3N0YXRlICAgICAgICAgICAgICAgICAgUEdfbWFzayg3LCA5KQotI2RlZmluZSBQR0Nfc3Rh
dGVfaW51c2UgICAgICAgICAgICBQR19tYXNrKDAsIDkpCisjZGVmaW5lIFBHQ19zdGF0ZV91bmlu
aXRpYWxpc2VkICAgIFBHX21hc2soMCwgOSkKICNkZWZpbmUgUEdDX3N0YXRlX29mZmxpbmluZyAg
ICAgICAgUEdfbWFzaygxLCA5KQogI2RlZmluZSBQR0Nfc3RhdGVfb2ZmbGluZWQgICAgICAgICBQ
R19tYXNrKDIsIDkpCiAjZGVmaW5lIFBHQ19zdGF0ZV9mcmVlICAgICAgICAgICAgIFBHX21hc2so
MywgOSkKICNkZWZpbmUgUEdDX3N0YXRlX2Jyb2tlbl9vZmZsaW5pbmcgUEdfbWFzayg0LCA5KSAv
KiBCcm9rZW4gYW5kIG9mZmxpbmluZyAqLwogI2RlZmluZSBQR0Nfc3RhdGVfYnJva2VuICAgICAg
ICAgICBQR19tYXNrKDUsIDkpIC8qIEJyb2tlbiBhbmQgb2ZmbGluZWQgKi8KKyNkZWZpbmUgUEdD
X3N0YXRlX2ludXNlICAgICAgICAgICAgUEdfbWFzayg2LCA5KQogCiAjZGVmaW5lIHBnY19pcyhw
Z2MsIHN0KSAgICAgICAgICAgICgoKHBnYykgJiBQR0Nfc3RhdGUpID09IFBHQ19zdGF0ZV8jI3N0
KQogI2RlZmluZSBwYWdlX3N0YXRlX2lzKHBnLCBzdCkgICAgICAgcGdjX2lzKChwZyktPmNvdW50
X2luZm8sIHN0KQpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9tbS5oIGIveGVuL2lu
Y2x1ZGUvYXNtLXg4Ni9tbS5oCmluZGV4IDEyMDNmMWIxNzkuLjVmYmJjYTVmMDUgMTAwNjQ0Ci0t
LSBhL3hlbi9pbmNsdWRlL2FzbS14ODYvbW0uaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L21t
LmgKQEAgLTcyLDEyICs3MiwxMyBAQAogICAqIHsgaW51c2UsIG9mZmxpbmluZywgb2ZmbGluZWQs
IGZyZWUsIGJyb2tlbl9vZmZsaW5pbmcsIGJyb2tlbiB9CiAgICovCiAjZGVmaW5lIFBHQ19zdGF0
ZSAgICAgICAgICAgICAgICAgIFBHX21hc2soNywgOSkKLSNkZWZpbmUgUEdDX3N0YXRlX2ludXNl
ICAgICAgICAgICAgUEdfbWFzaygwLCA5KQorI2RlZmluZSBQR0Nfc3RhdGVfdW5pbml0aWFsaXNl
ZCAgICBQR19tYXNrKDAsIDkpCiAjZGVmaW5lIFBHQ19zdGF0ZV9vZmZsaW5pbmcgICAgICAgIFBH
X21hc2soMSwgOSkKICNkZWZpbmUgUEdDX3N0YXRlX29mZmxpbmVkICAgICAgICAgUEdfbWFzaygy
LCA5KQogI2RlZmluZSBQR0Nfc3RhdGVfZnJlZSAgICAgICAgICAgICBQR19tYXNrKDMsIDkpCiAj
ZGVmaW5lIFBHQ19zdGF0ZV9icm9rZW5fb2ZmbGluaW5nIFBHX21hc2soNCwgOSkgLyogQnJva2Vu
IGFuZCBvZmZsaW5pbmcgKi8KICNkZWZpbmUgUEdDX3N0YXRlX2Jyb2tlbiAgICAgICAgICAgUEdf
bWFzayg1LCA5KSAvKiBCcm9rZW4gYW5kIG9mZmxpbmVkICovCisjZGVmaW5lIFBHQ19zdGF0ZV9p
bnVzZSAgICAgICAgICAgIFBHX21hc2soNiwgOSkKIAogI2RlZmluZSBwZ2NfaXMocGdjLCBzdCkg
ICAgICAgICAgICAoKChwZ2MpICYgUEdDX3N0YXRlKSA9PSBQR0Nfc3RhdGVfIyNzdCkKICNkZWZp
bmUgcGFnZV9zdGF0ZV9pcyhwZywgc3QpICAgICAgIHBnY19pcygocGcpLT5jb3VudF9pbmZvLCBz
dCkKLS0gCjIuMjEuMAoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qu
b3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2
ZWw=

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 9AE7017DD7E
	for <lists+xen-devel@lfdr.de>; Mon,  9 Mar 2020 11:27:10 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jBFZA-00007L-BT; Mon, 09 Mar 2020 10:23:20 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=eS/D=42=xen.org=prvs=330d716a0=paul@srs-us1.protection.inumbo.net>)
 id 1jBFZ8-00006s-R8
 for xen-devel@lists.xenproject.org; Mon, 09 Mar 2020 10:23:18 +0000
X-Inumbo-ID: fc79b866-61ef-11ea-abfc-12813bfff9fa
Received: from smtp-fw-6002.amazon.com (unknown [52.95.49.90])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id fc79b866-61ef-11ea-abfc-12813bfff9fa;
 Mon, 09 Mar 2020 10:23:14 +0000 (UTC)
IronPort-SDR: s8UF+Wj2nigT6Wsgp3RSu08//8JShpjVgxh1awaeEYqikL51NjXVE2L7mqBVaYM0PrK4MG2yKp
 H07R3wRumIcQ==
X-IronPort-AV: E=Sophos;i="5.70,532,1574121600"; d="scan'208";a="20188976"
Received: from iad12-co-svc-p1-lb1-vlan3.amazon.com (HELO
 email-inbound-relay-1d-37fd6b3d.us-east-1.amazon.com) ([10.43.8.6])
 by smtp-border-fw-out-6002.iad6.amazon.com with ESMTP;
 09 Mar 2020 10:23:14 +0000
Received: from EX13MTAUEA002.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan2.iad.amazon.com [10.40.159.162])
 by email-inbound-relay-1d-37fd6b3d.us-east-1.amazon.com (Postfix) with ESMTPS
 id B43092850D7; Mon,  9 Mar 2020 10:23:10 +0000 (UTC)
Received: from EX13D32EUC004.ant.amazon.com (10.43.164.121) by
 EX13MTAUEA002.ant.amazon.com (10.43.61.77) with Microsoft SMTP Server (TLS)
 id 15.0.1236.3; Mon, 9 Mar 2020 10:23:10 +0000
Received: from EX13MTAUEA002.ant.amazon.com (10.43.61.77) by
 EX13D32EUC004.ant.amazon.com (10.43.164.121) with Microsoft SMTP Server (TLS)
 id 15.0.1497.2; Mon, 9 Mar 2020 10:23:09 +0000
Received: from u2f063a87eabd5f.cbg10.amazon.com (10.125.106.135) by
 mail-relay.amazon.com (10.43.61.169) with Microsoft SMTP Server id
 15.0.1236.3 via Frontend Transport; Mon, 9 Mar 2020 10:23:07 +0000
From: <paul@xen.org>
To: <xen-devel@lists.xenproject.org>
Date: Mon, 9 Mar 2020 10:22:59 +0000
Message-ID: <20200309102304.1251-2-paul@xen.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20200309102304.1251-1-paul@xen.org>
References: <20200309102304.1251-1-paul@xen.org>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH v5 1/6] domain: introduce
 alloc/free_shared_info() helpers...
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Julien
 Grall <julien@xen.org>, Wei Liu <wl@xen.org>, Paul Durrant <paul@xen.org>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Paul Durrant <pdurrant@amazon.com>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>, Ian
 Jackson <ian.jackson@eu.citrix.com>, George Dunlap <george.dunlap@citrix.com>,
 Hongyan Xia <hongyxia@amazon.com>, Jan Beulich <jbeulich@suse.com>, Volodymyr
 Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogUGF1bCBEdXJyYW50IDxwZHVycmFudEBhbWF6b24uY29tPgoKLi4uIGFuZCBzYXZlIHRo
ZSBNRk4uCgpUaGlzIHBhdGNoIG1vZGlmaWVzIHRoZSAnc2hhcmVkX2luZm8nIGZpZWxkIG9mIHN0
cnVjdCBkb21haW4gdG8gYmUKYSBzdHJ1Y3R1cmUgY29tcHJpc2luZyBhbiBNRk4gYW5kIGEgdmly
dHVhbCBhZGRyZXNzLiBBbGxvY2F0aW9ucyBhcmUKc3RpbGwgZG9uZSBmcm9tIHhlbmhlYXAsIHNv
IHRoZSB2aXJ0dWFsIGFkZHJlc3Mgc3RpbGwgZXF1YXRlcyB0bwp2aXJ0X3RvX21mbigpIGNhbGxl
ZCBvbiB0aGUgTUZOIGJ1dCBzdWJzZXF1ZW50IHBhdGNoIHdpbGwgY2hhbmdlIHRoaXMuCkhlbmNl
IHRoZSBuZWVkIHRvIHNhdmUgdGhlIE1GTi4KCk5PVEU6IFdoaXN0IGRlZmluaW5nIHRoZSBuZXcg
aGVscGVycywgdmlydF90b19tZm4oKSBpbiBjb21tb24vZG9tYWluLmMKICAgICAgaXMgbWFkZSB0
eXBlIHNhZmUuCiAgICAgIFRoZSBkZWZpbml0aW9uIG9mIG5taV9yZWFzb24oKSBpbiBhc20teDg2
L3NoYXJlZC5oIGlzIGFsc28gcmUtCiAgICAgIGZsb3dlZCB0byBhdm9pZCBvdmVybHkgbG9uZyBs
aW5lcy4KClNpZ25lZC1vZmYtYnk6IFBhdWwgRHVycmFudCA8cGF1bEB4ZW4ub3JnPgpSZXZpZXdl
ZC1ieTogSnVsaWVuIEdyYWxsIDxqdWxpZW5AeGVuLm9yZz4KUmV2aWV3ZWQtYnk6IEhvbmd5YW4g
WGlhIDxob25neXhpYUBhbWF6b24uY29tPgpBY2tlZC1ieTogSmFuIEJldWxpY2ggPGpiZXVsaWNo
QHN1c2UuY29tPgotLS0KQ2M6IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3N0YWJlbGxpbmlAa2VybmVs
Lm9yZz4KQ2M6IFZvbG9keW15ciBCYWJjaHVrIDxWb2xvZHlteXJfQmFiY2h1a0BlcGFtLmNvbT4K
Q2M6IEFuZHJldyBDb29wZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+CkNjOiBHZW9yZ2Ug
RHVubGFwIDxnZW9yZ2UuZHVubGFwQGNpdHJpeC5jb20+CkNjOiBJYW4gSmFja3NvbiA8aWFuLmph
Y2tzb25AZXUuY2l0cml4LmNvbT4KQ2M6IEtvbnJhZCBSemVzenV0ZWsgV2lsayA8a29ucmFkLndp
bGtAb3JhY2xlLmNvbT4KQ2M6IFdlaSBMaXUgPHdsQHhlbi5vcmc+CkNjOiAiUm9nZXIgUGF1IE1v
bm7DqSIgPHJvZ2VyLnBhdUBjaXRyaXguY29tPgotLS0KIHhlbi9hcmNoL2FybS9kb21haW4uYyAg
ICAgICAgfCAgOCArKy0tLS0tLQogeGVuL2FyY2gvYXJtL21tLmMgICAgICAgICAgICB8ICAyICst
CiB4ZW4vYXJjaC94ODYvZG9tYWluLmMgICAgICAgIHwgMTEgKysrKy0tLS0tLS0KIHhlbi9hcmNo
L3g4Ni9tbS5jICAgICAgICAgICAgfCAgMiArLQogeGVuL2FyY2gveDg2L3B2L2RvbTBfYnVpbGQu
YyB8ICAyICstCiB4ZW4vYXJjaC94ODYvcHYvc2hpbS5jICAgICAgIHwgIDIgKy0KIHhlbi9jb21t
b24vZG9tYWluLmMgICAgICAgICAgfCAyNiArKysrKysrKysrKysrKysrKysrKysrKysrKwogeGVu
L2NvbW1vbi9kb21jdGwuYyAgICAgICAgICB8ICAyICstCiB4ZW4vY29tbW9uL3RpbWUuYyAgICAg
ICAgICAgIHwgIDQgKystLQogeGVuL2luY2x1ZGUvYXNtLXg4Ni9zaGFyZWQuaCB8IDE1ICsrKysr
KysrLS0tLS0tLQogeGVuL2luY2x1ZGUveGVuL2RvbWFpbi5oICAgICB8ICAzICsrKwogeGVuL2lu
Y2x1ZGUveGVuL3NjaGVkLmggICAgICB8ICA1ICsrKystCiB4ZW4vaW5jbHVkZS94ZW4vc2hhcmVk
LmggICAgIHwgIDIgKy0KIDEzIGZpbGVzIGNoYW5nZWQsIDU1IGluc2VydGlvbnMoKyksIDI5IGRl
bGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL2FybS9kb21haW4uYyBiL3hlbi9hcmNo
L2FybS9kb21haW4uYwppbmRleCA2NjI3YmUyOTIyLi41Mjk4ZDgwYmQyIDEwMDY0NAotLS0gYS94
ZW4vYXJjaC9hcm0vZG9tYWluLmMKKysrIGIveGVuL2FyY2gvYXJtL2RvbWFpbi5jCkBAIC02ODks
MTMgKzY4OSw5IEBAIGludCBhcmNoX2RvbWFpbl9jcmVhdGUoc3RydWN0IGRvbWFpbiAqZCwKICAg
ICBpZiAoIChyYyA9IHAybV9pbml0KGQpKSAhPSAwICkKICAgICAgICAgZ290byBmYWlsOwogCi0g
ICAgcmMgPSAtRU5PTUVNOwotICAgIGlmICggKGQtPnNoYXJlZF9pbmZvID0gYWxsb2NfeGVuaGVh
cF9wYWdlcygwLCAwKSkgPT0gTlVMTCApCisgICAgaWYgKCAocmMgPSBhbGxvY19zaGFyZWRfaW5m
byhkLCAwKSkgIT0gMCApCiAgICAgICAgIGdvdG8gZmFpbDsKIAotICAgIGNsZWFyX3BhZ2UoZC0+
c2hhcmVkX2luZm8pOwotICAgIHNoYXJlX3hlbl9wYWdlX3dpdGhfZ3Vlc3QodmlydF90b19wYWdl
KGQtPnNoYXJlZF9pbmZvKSwgZCwgU0hBUkVfcncpOwotCiAgICAgc3dpdGNoICggY29uZmlnLT5h
cmNoLmdpY192ZXJzaW9uICkKICAgICB7CiAgICAgY2FzZSBYRU5fRE9NQ1RMX0NPTkZJR19HSUNf
VjI6CkBAIC03NjYsNyArNzYyLDcgQEAgdm9pZCBhcmNoX2RvbWFpbl9kZXN0cm95KHN0cnVjdCBk
b21haW4gKmQpCiAgICAgcDJtX3RlYXJkb3duKGQpOwogICAgIGRvbWFpbl92Z2ljX2ZyZWUoZCk7
CiAgICAgZG9tYWluX3Z1YXJ0X2ZyZWUoZCk7Ci0gICAgZnJlZV94ZW5oZWFwX3BhZ2UoZC0+c2hh
cmVkX2luZm8pOworICAgIGZyZWVfc2hhcmVkX2luZm8oZCk7CiAjaWZkZWYgQ09ORklHX0FDUEkK
ICAgICBmcmVlX3hlbmhlYXBfcGFnZXMoZC0+YXJjaC5lZmlfYWNwaV90YWJsZSwKICAgICAgICAg
ICAgICAgICAgICAgICAgZ2V0X29yZGVyX2Zyb21fYnl0ZXMoZC0+YXJjaC5lZmlfYWNwaV9sZW4p
KTsKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL2FybS9tbS5jIGIveGVuL2FyY2gvYXJtL21tLmMKaW5k
ZXggNzI3MTA3ZWVmYS4uMmJiNTkyMTAxZCAxMDA2NDQKLS0tIGEveGVuL2FyY2gvYXJtL21tLmMK
KysrIGIveGVuL2FyY2gvYXJtL21tLmMKQEAgLTE0MjQsNyArMTQyNCw3IEBAIGludCB4ZW5tZW1f
YWRkX3RvX3BoeXNtYXBfb25lKAogICAgICAgICBpZiAoIGlkeCAhPSAwICkKICAgICAgICAgICAg
IHJldHVybiAtRUlOVkFMOwogCi0gICAgICAgIG1mbiA9IHZpcnRfdG9fbWZuKGQtPnNoYXJlZF9p
bmZvKTsKKyAgICAgICAgbWZuID0gZC0+c2hhcmVkX2luZm8ubWZuOwogICAgICAgICB0ID0gcDJt
X3JhbV9ydzsKIAogICAgICAgICBicmVhazsKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9kb21h
aW4uYyBiL3hlbi9hcmNoL3g4Ni9kb21haW4uYwppbmRleCBjYWYyZWNhZDdlLi5iZGNjMGQ5NzJh
IDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvZG9tYWluLmMKKysrIGIveGVuL2FyY2gveDg2L2Rv
bWFpbi5jCkBAIC02MTEsMTIgKzYxMSw5IEBAIGludCBhcmNoX2RvbWFpbl9jcmVhdGUoc3RydWN0
IGRvbWFpbiAqZCwKICAgICAgKiBUaGUgc2hhcmVkX2luZm8gbWFjaGluZSBhZGRyZXNzIG11c3Qg
Zml0IGluIGEgMzItYml0IGZpZWxkIHdpdGhpbiBhCiAgICAgICogMzItYml0IGd1ZXN0J3Mgc3Rh
cnRfaW5mbyBzdHJ1Y3R1cmUuIEhlbmNlIHdlIHNwZWNpZnkgTUVNRl9iaXRzKDMyKS4KICAgICAg
Ki8KLSAgICBpZiAoIChkLT5zaGFyZWRfaW5mbyA9IGFsbG9jX3hlbmhlYXBfcGFnZXMoMCwgTUVN
Rl9iaXRzKDMyKSkpID09IE5VTEwgKQorICAgIGlmICggKHJjID0gYWxsb2Nfc2hhcmVkX2luZm8o
ZCwgTUVNRl9iaXRzKDMyKSkpICE9IDAgKQogICAgICAgICBnb3RvIGZhaWw7CiAKLSAgICBjbGVh
cl9wYWdlKGQtPnNoYXJlZF9pbmZvKTsKLSAgICBzaGFyZV94ZW5fcGFnZV93aXRoX2d1ZXN0KHZp
cnRfdG9fcGFnZShkLT5zaGFyZWRfaW5mbyksIGQsIFNIQVJFX3J3KTsKLQogICAgIGlmICggKHJj
ID0gaW5pdF9kb21haW5faXJxX21hcHBpbmcoZCkpICE9IDAgKQogICAgICAgICBnb3RvIGZhaWw7
CiAKQEAgLTY2NCw3ICs2NjEsNyBAQCBpbnQgYXJjaF9kb21haW5fY3JlYXRlKHN0cnVjdCBkb21h
aW4gKmQsCiAgICAgcHNyX2RvbWFpbl9mcmVlKGQpOwogICAgIGlvbW11X2RvbWFpbl9kZXN0cm95
KGQpOwogICAgIGNsZWFudXBfZG9tYWluX2lycV9tYXBwaW5nKGQpOwotICAgIGZyZWVfeGVuaGVh
cF9wYWdlKGQtPnNoYXJlZF9pbmZvKTsKKyAgICBmcmVlX3NoYXJlZF9pbmZvKGQpOwogICAgIHhm
cmVlKGQtPmFyY2guY3B1aWQpOwogICAgIHhmcmVlKGQtPmFyY2gubXNyKTsKICAgICBpZiAoIHBh
Z2luZ19pbml0aWFsaXNlZCApCkBAIC02OTMsNyArNjkwLDcgQEAgdm9pZCBhcmNoX2RvbWFpbl9k
ZXN0cm95KHN0cnVjdCBkb21haW4gKmQpCiAgICAgICAgIHB2X2RvbWFpbl9kZXN0cm95KGQpOwog
ICAgIGZyZWVfcGVyZG9tYWluX21hcHBpbmdzKGQpOwogCi0gICAgZnJlZV94ZW5oZWFwX3BhZ2Uo
ZC0+c2hhcmVkX2luZm8pOworICAgIGZyZWVfc2hhcmVkX2luZm8oZCk7CiAgICAgY2xlYW51cF9k
b21haW5faXJxX21hcHBpbmcoZCk7CiAKICAgICBwc3JfZG9tYWluX2ZyZWUoZCk7CkBAIC03MTks
NyArNzE2LDcgQEAgdm9pZCBhcmNoX2RvbWFpbl91bnBhdXNlKHN0cnVjdCBkb21haW4gKmQpCiAK
IGludCBhcmNoX2RvbWFpbl9zb2Z0X3Jlc2V0KHN0cnVjdCBkb21haW4gKmQpCiB7Ci0gICAgc3Ry
dWN0IHBhZ2VfaW5mbyAqcGFnZSA9IHZpcnRfdG9fcGFnZShkLT5zaGFyZWRfaW5mbyksICpuZXdf
cGFnZTsKKyAgICBzdHJ1Y3QgcGFnZV9pbmZvICpwYWdlID0gbWZuX3RvX3BhZ2UoZC0+c2hhcmVk
X2luZm8ubWZuKSwgKm5ld19wYWdlOwogICAgIGludCByZXQgPSAwOwogICAgIHN0cnVjdCBkb21h
aW4gKm93bmVyOwogICAgIG1mbl90IG1mbjsKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9tbS5j
IGIveGVuL2FyY2gveDg2L21tLmMKaW5kZXggNjI1MDdjYTY1MS4uYmE3NTYzZWQzYyAxMDA2NDQK
LS0tIGEveGVuL2FyY2gveDg2L21tLmMKKysrIGIveGVuL2FyY2gveDg2L21tLmMKQEAgLTQ1NDAs
NyArNDU0MCw3IEBAIGludCB4ZW5tZW1fYWRkX3RvX3BoeXNtYXBfb25lKAogICAgIHsKICAgICAg
ICAgY2FzZSBYRU5NQVBTUEFDRV9zaGFyZWRfaW5mbzoKICAgICAgICAgICAgIGlmICggaWR4ID09
IDAgKQotICAgICAgICAgICAgICAgIG1mbiA9IHZpcnRfdG9fbWZuKGQtPnNoYXJlZF9pbmZvKTsK
KyAgICAgICAgICAgICAgICBtZm4gPSBkLT5zaGFyZWRfaW5mby5tZm47CiAgICAgICAgICAgICBi
cmVhazsKICAgICAgICAgY2FzZSBYRU5NQVBTUEFDRV9ncmFudF90YWJsZToKICAgICAgICAgICAg
IHJjID0gZ250dGFiX21hcF9mcmFtZShkLCBpZHgsIGdwZm4sICZtZm4pOwpkaWZmIC0tZ2l0IGEv
eGVuL2FyY2gveDg2L3B2L2RvbTBfYnVpbGQuYyBiL3hlbi9hcmNoL3g4Ni9wdi9kb20wX2J1aWxk
LmMKaW5kZXggNTY3OGRhNzgyZC4uZGMxNmVmMmU3OSAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2
L3B2L2RvbTBfYnVpbGQuYworKysgYi94ZW4vYXJjaC94ODYvcHYvZG9tMF9idWlsZC5jCkBAIC03
NDMsNyArNzQzLDcgQEAgaW50IF9faW5pdCBkb20wX2NvbnN0cnVjdF9wdihzdHJ1Y3QgZG9tYWlu
ICpkLAogICAgIGNsZWFyX3BhZ2Uoc2kpOwogICAgIHNpLT5ucl9wYWdlcyA9IG5yX3BhZ2VzOwog
Ci0gICAgc2ktPnNoYXJlZF9pbmZvID0gdmlydF90b19tYWRkcihkLT5zaGFyZWRfaW5mbyk7Cisg
ICAgc2ktPnNoYXJlZF9pbmZvID0gbWZuX3RvX21hZGRyKGQtPnNoYXJlZF9pbmZvLm1mbik7CiAK
ICAgICBpZiAoICFwdl9zaGltICkKICAgICAgICAgc2ktPmZsYWdzICAgID0gU0lGX1BSSVZJTEVH
RUQgfCBTSUZfSU5JVERPTUFJTjsKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9wdi9zaGltLmMg
Yi94ZW4vYXJjaC94ODYvcHYvc2hpbS5jCmluZGV4IGQ4NmUyZGUxMTguLmY1MTI4MDlkYWQgMTAw
NjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9wdi9zaGltLmMKKysrIGIveGVuL2FyY2gveDg2L3B2L3No
aW0uYwpAQCAtMjgyLDcgKzI4Miw3IEBAIHN0YXRpYyB2b2lkIHdyaXRlX3N0YXJ0X2luZm8oc3Ry
dWN0IGRvbWFpbiAqZCkKICAgICBzbnByaW50ZihzaS0+bWFnaWMsIHNpemVvZihzaS0+bWFnaWMp
LCAieGVuLTMuMC14ODZfJXMiLAogICAgICAgICAgICAgIGlzX3B2XzMyYml0X2RvbWFpbihkKSA/
ICIzMnAiIDogIjY0Iik7CiAgICAgc2ktPm5yX3BhZ2VzID0gZG9tYWluX3RvdF9wYWdlcyhkKTsK
LSAgICBzaS0+c2hhcmVkX2luZm8gPSB2aXJ0X3RvX21hZGRyKGQtPnNoYXJlZF9pbmZvKTsKKyAg
ICBzaS0+c2hhcmVkX2luZm8gPSBtZm5fdG9fbWFkZHIoZC0+c2hhcmVkX2luZm8ubWZuKTsKICAg
ICBzaS0+ZmxhZ3MgPSAwOwogICAgIEJVR19PTih4ZW5faHlwZXJjYWxsX2h2bV9nZXRfcGFyYW0o
SFZNX1BBUkFNX1NUT1JFX1BGTiwgJnNpLT5zdG9yZV9tZm4pKTsKICAgICBCVUdfT04oeGVuX2h5
cGVyY2FsbF9odm1fZ2V0X3BhcmFtKEhWTV9QQVJBTV9TVE9SRV9FVlRDSE4sICZwYXJhbSkpOwpk
aWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9kb21haW4uYyBiL3hlbi9jb21tb24vZG9tYWluLmMKaW5k
ZXggNmFkNDU4ZmE2Yi4uYmE3YTkwNTI1OCAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9kb21haW4u
YworKysgYi94ZW4vY29tbW9uL2RvbWFpbi5jCkBAIC00Nyw2ICs0NywxMCBAQAogI2luY2x1ZGUg
PGFzbS9ndWVzdC5oPgogI2VuZGlmCiAKKy8qIE92ZXJyaWRlIG1hY3JvcyBmcm9tIGFzbS9wYWdl
LmggdG8gbWFrZSB0aGVtIHdvcmsgd2l0aCBtZm5fdCAqLworI3VuZGVmIHZpcnRfdG9fbWZuCisj
ZGVmaW5lIHZpcnRfdG9fbWZuKHYpIF9tZm4oX192aXJ0X3RvX21mbih2KSkKKwogLyogTGludXgg
Y29uZmlnIG9wdGlvbjogcHJvcGFnZXRlZCB0byBkb21haW4wICovCiAvKiB4ZW5fcHJvY2Vzc29y
X3BtYml0czogeGVuIGNvbnRyb2wgQ3gsIFB4LCAuLi4gKi8KIHVuc2lnbmVkIGludCB4ZW5fcHJv
Y2Vzc29yX3BtYml0cyA9IFhFTl9QUk9DRVNTT1JfUE1fUFg7CkBAIC0xNjQ0LDYgKzE2NDgsMjgg
QEAgaW50IGNvbnRpbnVlX2h5cGVyY2FsbF9vbl9jcHUoCiAgICAgcmV0dXJuIDA7CiB9CiAKK2lu
dCBhbGxvY19zaGFyZWRfaW5mbyhzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBpbnQgbWVtZmxh
Z3MpCit7CisgICAgaWYgKCAoZC0+c2hhcmVkX2luZm8udmlydCA9IGFsbG9jX3hlbmhlYXBfcGFn
ZXMoMCwgbWVtZmxhZ3MpKSA9PSBOVUxMICkKKyAgICAgICAgcmV0dXJuIC1FTk9NRU07CisKKyAg
ICBkLT5zaGFyZWRfaW5mby5tZm4gPSB2aXJ0X3RvX21mbihkLT5zaGFyZWRfaW5mby52aXJ0KTsK
KworICAgIGNsZWFyX3BhZ2UoZC0+c2hhcmVkX2luZm8udmlydCk7CisgICAgc2hhcmVfeGVuX3Bh
Z2Vfd2l0aF9ndWVzdChtZm5fdG9fcGFnZShkLT5zaGFyZWRfaW5mby5tZm4pLCBkLCBTSEFSRV9y
dyk7CisKKyAgICByZXR1cm4gMDsKK30KKwordm9pZCBmcmVlX3NoYXJlZF9pbmZvKHN0cnVjdCBk
b21haW4gKmQpCit7CisgICAgaWYgKCAhZC0+c2hhcmVkX2luZm8udmlydCApCisgICAgICAgIHJl
dHVybjsKKworICAgIGZyZWVfeGVuaGVhcF9wYWdlKGQtPnNoYXJlZF9pbmZvLnZpcnQpOworICAg
IGQtPnNoYXJlZF9pbmZvLnZpcnQgPSBOVUxMOworfQorCiAvKgogICogTG9jYWwgdmFyaWFibGVz
OgogICogbW9kZTogQwpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9kb21jdGwuYyBiL3hlbi9jb21t
b24vZG9tY3RsLmMKaW5kZXggYTY5YjNiNTlhOC4uODFmMThlNjNhNyAxMDA2NDQKLS0tIGEveGVu
L2NvbW1vbi9kb21jdGwuYworKysgYi94ZW4vY29tbW9uL2RvbWN0bC5jCkBAIC0xOTYsNyArMTk2
LDcgQEAgdm9pZCBnZXRkb21haW5pbmZvKHN0cnVjdCBkb21haW4gKmQsIHN0cnVjdCB4ZW5fZG9t
Y3RsX2dldGRvbWFpbmluZm8gKmluZm8pCiAgICAgaW5mby0+b3V0c3RhbmRpbmdfcGFnZXMgPSBk
LT5vdXRzdGFuZGluZ19wYWdlczsKICAgICBpbmZvLT5zaHJfcGFnZXMgICAgICAgICA9IGF0b21p
Y19yZWFkKCZkLT5zaHJfcGFnZXMpOwogICAgIGluZm8tPnBhZ2VkX3BhZ2VzICAgICAgID0gYXRv
bWljX3JlYWQoJmQtPnBhZ2VkX3BhZ2VzKTsKLSAgICBpbmZvLT5zaGFyZWRfaW5mb19mcmFtZSA9
IG1mbl90b19nbWZuKGQsIHZpcnRfdG9fbWZuKGQtPnNoYXJlZF9pbmZvKSk7CisgICAgaW5mby0+
c2hhcmVkX2luZm9fZnJhbWUgPSBtZm5fdG9fZ21mbihkLCBtZm5feChkLT5zaGFyZWRfaW5mby5t
Zm4pKTsKICAgICBCVUdfT04oU0hBUkVEX00yUChpbmZvLT5zaGFyZWRfaW5mb19mcmFtZSkpOwog
CiAgICAgaW5mby0+Y3B1cG9vbCA9IGNwdXBvb2xfZ2V0X2lkKGQpOwpkaWZmIC0tZ2l0IGEveGVu
L2NvbW1vbi90aW1lLmMgYi94ZW4vY29tbW9uL3RpbWUuYwppbmRleCA4MjMzNmUyZDVhLi41OGZh
OWFiYzQwIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3RpbWUuYworKysgYi94ZW4vY29tbW9uL3Rp
bWUuYwpAQCAtMTEwLDkgKzExMCw5IEBAIHZvaWQgdXBkYXRlX2RvbWFpbl93YWxsY2xvY2tfdGlt
ZShzdHJ1Y3QgZG9tYWluICpkKQogICAgIHNoYXJlZF9pbmZvKGQsIHdjX25zZWMpICAgPSB3Y19u
c2VjOwogI2lmZGVmIENPTkZJR19YODYKICAgICBpZiAoIGxpa2VseSghaGFzXzMyYml0X3NoaW5m
byhkKSkgKQotICAgICAgICBkLT5zaGFyZWRfaW5mby0+bmF0aXZlLndjX3NlY19oaSA9IHNlYyA+
PiAzMjsKKyAgICAgICAgZC0+c2hhcmVkX2luZm8udmlydC0+bmF0aXZlLndjX3NlY19oaSA9IHNl
YyA+PiAzMjsKICAgICBlbHNlCi0gICAgICAgIGQtPnNoYXJlZF9pbmZvLT5jb21wYXQuYXJjaC53
Y19zZWNfaGkgPSBzZWMgPj4gMzI7CisgICAgICAgIGQtPnNoYXJlZF9pbmZvLnZpcnQtPmNvbXBh
dC5hcmNoLndjX3NlY19oaSA9IHNlYyA+PiAzMjsKICNlbHNlCiAgICAgc2hhcmVkX2luZm8oZCwg
d2Nfc2VjX2hpKSA9IHNlYyA+PiAzMjsKICNlbmRpZgpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUv
YXNtLXg4Ni9zaGFyZWQuaCBiL3hlbi9pbmNsdWRlL2FzbS14ODYvc2hhcmVkLmgKaW5kZXggYWY1
ZDk1OWQwNC4uZDQ1ODhlMDhhNiAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9zaGFy
ZWQuaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L3NoYXJlZC5oCkBAIC0xLDI0ICsxLDI1IEBA
CiAjaWZuZGVmIF9fWEVOX1g4Nl9TSEFSRURfSF9fCiAjZGVmaW5lIF9fWEVOX1g4Nl9TSEFSRURf
SF9fCiAKLSNkZWZpbmUgbm1pX3JlYXNvbihkKSAoIWhhc18zMmJpdF9zaGluZm8oZCkgPyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgXAotICAgICAgICAgICAgICAgICAgICAgICAodTMyICop
JihkKS0+c2hhcmVkX2luZm8tPm5hdGl2ZS5hcmNoLm5taV9yZWFzb24gOiBcCi0gICAgICAgICAg
ICAgICAgICAgICAgICh1MzIgKikmKGQpLT5zaGFyZWRfaW5mby0+Y29tcGF0LmFyY2gubm1pX3Jl
YXNvbikKKyNkZWZpbmUgbm1pX3JlYXNvbihkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBcCisgICAgKCFoYXNfMzJiaXRfc2hpbmZvKGQpID8gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgXAorICAgICAodTMyICopJihkKS0+c2hhcmVkX2luZm8u
dmlydC0+bmF0aXZlLmFyY2gubm1pX3JlYXNvbiA6ICAgIFwKKyAgICAgKHUzMiAqKSYoZCktPnNo
YXJlZF9pbmZvLnZpcnQtPmNvbXBhdC5hcmNoLm5taV9yZWFzb24pCiAKICNkZWZpbmUgR0VUX1NF
VF9TSEFSRUQodHlwZSwgZmllbGQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiBzdGF0
aWMgaW5saW5lIHR5cGUgYXJjaF9nZXRfIyNmaWVsZChjb25zdCBzdHJ1Y3QgZG9tYWluICpkKSAg
ICAgXAogeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFwKICAgICByZXR1cm4gIWhhc18zMmJpdF9zaGluZm8oZCkgPyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBcCi0gICAgICAgICAgIGQtPnNoYXJlZF9pbmZvLT5uYXRp
dmUuYXJjaC5maWVsZCA6ICAgICAgICAgICAgICAgICAgXAotICAgICAgICAgICBkLT5zaGFyZWRf
aW5mby0+Y29tcGF0LmFyY2guZmllbGQ7ICAgICAgICAgICAgICAgICAgIFwKKyAgICAgICAgICAg
ZC0+c2hhcmVkX2luZm8udmlydC0+bmF0aXZlLmFyY2guZmllbGQgOiAgICAgICAgICAgICBcCisg
ICAgICAgICAgIGQtPnNoYXJlZF9pbmZvLnZpcnQtPmNvbXBhdC5hcmNoLmZpZWxkOyAgICAgICAg
ICAgICAgXAogfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFwKIHN0YXRpYyBpbmxpbmUgdm9pZCBhcmNoX3NldF8jI2ZpZWxkKHN0
cnVjdCBkb21haW4gKmQsICAgICAgICAgICBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB0eXBlIHZhbCkgICAgICAgICAgICAgICAgICAgXAogeyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICAgICBpZiAo
ICFoYXNfMzJiaXRfc2hpbmZvKGQpICkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBc
Ci0gICAgICAgIGQtPnNoYXJlZF9pbmZvLT5uYXRpdmUuYXJjaC5maWVsZCA9IHZhbDsgICAgICAg
ICAgICAgICAgXAorICAgICAgICBkLT5zaGFyZWRfaW5mby52aXJ0LT5uYXRpdmUuYXJjaC5maWVs
ZCA9IHZhbDsgICAgICAgICAgIFwKICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCi0gICAgICAgIGQtPnNoYXJlZF9pbmZvLT5j
b21wYXQuYXJjaC5maWVsZCA9IHZhbDsgICAgICAgICAgICAgICAgXAorICAgICAgICBkLT5zaGFy
ZWRfaW5mby52aXJ0LT5jb21wYXQuYXJjaC5maWVsZCA9IHZhbDsgICAgICAgICAgIFwKIH0KIAog
I2RlZmluZSBHRVRfU0VUX1ZDUFUodHlwZSwgZmllbGQpICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFwKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9kb21haW4uaCBiL3hlbi9pbmNs
dWRlL3hlbi9kb21haW4uaAppbmRleCA3ZTUxZDM2MWRlLi43NDBlMjAzMmFkIDEwMDY0NAotLS0g
YS94ZW4vaW5jbHVkZS94ZW4vZG9tYWluLmgKKysrIGIveGVuL2luY2x1ZGUveGVuL2RvbWFpbi5o
CkBAIC0xMzAsNCArMTMwLDcgQEAgc3RydWN0IHZudW1hX2luZm8gewogCiB2b2lkIHZudW1hX2Rl
c3Ryb3koc3RydWN0IHZudW1hX2luZm8gKnZudW1hKTsKIAoraW50IGFsbG9jX3NoYXJlZF9pbmZv
KHN0cnVjdCBkb21haW4gKmQsIHVuc2lnbmVkIGludCBtZW1mbGFncyk7Cit2b2lkIGZyZWVfc2hh
cmVkX2luZm8oc3RydWN0IGRvbWFpbiAqZCk7CisKICNlbmRpZiAvKiBfX1hFTl9ET01BSU5fSF9f
ICovCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS94ZW4vc2NoZWQuaCBiL3hlbi9pbmNsdWRlL3hl
bi9zY2hlZC5oCmluZGV4IDNhNGY0MzA5OGMuLmY0MWQwYWQyYTAgMTAwNjQ0Ci0tLSBhL3hlbi9p
bmNsdWRlL3hlbi9zY2hlZC5oCisrKyBiL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC5oCkBAIC0zNDYs
NyArMzQ2LDEwIEBAIHN0cnVjdCBkb21haW4KICAgICB1bnNpZ25lZCBpbnQgICAgIG1heF92Y3B1
czsKICAgICBzdHJ1Y3QgdmNwdSAgICAqKnZjcHU7CiAKLSAgICBzaGFyZWRfaW5mb190ICAgKnNo
YXJlZF9pbmZvOyAgICAgLyogc2hhcmVkIGRhdGEgYXJlYSAqLworICAgIHN0cnVjdCB7CisgICAg
ICAgIG1mbl90IG1mbjsKKyAgICAgICAgc2hhcmVkX2luZm9fdCAqdmlydDsKKyAgICB9IHNoYXJl
ZF9pbmZvOyAvKiBzaGFyZWQgZGF0YSBhcmVhICovCiAKICAgICBzcGlubG9ja190ICAgICAgIGRv
bWFpbl9sb2NrOwogCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS94ZW4vc2hhcmVkLmggYi94ZW4v
aW5jbHVkZS94ZW4vc2hhcmVkLmgKaW5kZXggYTQxMWE4YTNlMy4uNTdiMmZmMWUzNCAxMDA2NDQK
LS0tIGEveGVuL2luY2x1ZGUveGVuL3NoYXJlZC5oCisrKyBiL3hlbi9pbmNsdWRlL3hlbi9zaGFy
ZWQuaApAQCAtNDMsNyArNDMsNyBAQCB0eXBlZGVmIHN0cnVjdCB2Y3B1X2luZm8gdmNwdV9pbmZv
X3Q7CiAKIGV4dGVybiB2Y3B1X2luZm9fdCBkdW1teV92Y3B1X2luZm87CiAKLSNkZWZpbmUgc2hh
cmVkX2luZm8oZCwgZmllbGQpICAgICAgX19zaGFyZWRfaW5mbyhkLCAoZCktPnNoYXJlZF9pbmZv
LCBmaWVsZCkKKyNkZWZpbmUgc2hhcmVkX2luZm8oZCwgZmllbGQpICAgICAgX19zaGFyZWRfaW5m
byhkLCAoZCktPnNoYXJlZF9pbmZvLnZpcnQsIGZpZWxkKQogI2RlZmluZSB2Y3B1X2luZm8odiwg
ZmllbGQpICAgICAgICBfX3ZjcHVfaW5mbyh2LCAodiktPnZjcHVfaW5mbywgZmllbGQpCiAKICNl
bmRpZiAvKiBfX1hFTl9TSEFSRURfSF9fICovCi0tIAoyLjIwLjEKCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhl
bi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3Jn
L21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

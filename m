Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id A3B33B2392
	for <lists+xen-devel@lfdr.de>; Fri, 13 Sep 2019 17:39:11 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i8ncU-00026b-Aq; Fri, 13 Sep 2019 15:36:22 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=QaHn=XI=gmail.com=olekstysh@srs-us1.protection.inumbo.net>)
 id 1i8ncS-000263-Iv
 for xen-devel@lists.xenproject.org; Fri, 13 Sep 2019 15:36:20 +0000
X-Inumbo-ID: 31382f28-d63c-11e9-a337-bc764e2007e4
Received: from mail-lf1-x142.google.com (unknown [2a00:1450:4864:20::142])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 31382f28-d63c-11e9-a337-bc764e2007e4;
 Fri, 13 Sep 2019 15:36:03 +0000 (UTC)
Received: by mail-lf1-x142.google.com with SMTP id u26so4744040lfg.6
 for <xen-devel@lists.xenproject.org>; Fri, 13 Sep 2019 08:36:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=fxkUwvoksIjfYu4eian3tL19eiy5Yg+x1AYWMg4u2XA=;
 b=ZBRi1lQu0ritDJ/l/dX+iDK3BGJIUufjL+WgelMJj9hGVPxlDJM6eCP8iNTJEFqpSJ
 KizAP4qb/K/vYKBn2nN4x3CdRXtQ7oSE+PhFSpvVmW9aFYYpTBkiPNwWfJuBCnKI1YWA
 nXegucSLKrKOJvFkSoMhKGg6wdmN6blLcWpCSSEjOeB2MGLbrvUARHgMkrepkA627WvQ
 XDDsRkZZYgOgXfkxuDD5IeeaRpDe8512mAcho8FeF+yXdyhOWJh6jK4bYeWUHeK+bhHs
 Gknt7+srDMIfDvdKcl/E85uw6aRxEQGRPcSgqZHmQvbLcQSnYrrlxjInpoQ4sNJP7+RI
 0EuQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=fxkUwvoksIjfYu4eian3tL19eiy5Yg+x1AYWMg4u2XA=;
 b=BqeNlmg5kHRBmHftcAETbOg/5OfkTRaKWQccLXji0AYbiKIxlHMSC0/KkqaxFKJsKM
 w4K6sPMCFc6lRJnal+yiDkwy/IDhzdiErbUh6rW5pwYBVXK/3lsBbCyMfaUkGvqjOG6j
 0rpPECPJYoR23p3bL9m4n+3b/GlEf25fUV+5AsW+CuuxFDT8x4Jcw227fytABnsueUmQ
 VvsxUuseh+SjmohQJJgZYYrnATUehfrQHWaBNeZYz7xSKMH2DnBdxcAPRDcpDrE9aZ1W
 Nt3dChcls1lCkQAS/obDwCqyJyQhRd9lcsvLwD8DNV8oPyz8IbaGBsaZh5aMlRBEsfTt
 vmWA==
X-Gm-Message-State: APjAAAUPBo8Ipz3SNcjlj9JAcEmbUQUwSoa9yN6GTO3lJ5VsUDGTGnmc
 g9xMDT5ef+/P1WSpdsefQkAzGSK7veM=
X-Google-Smtp-Source: APXvYqzU/46uM4euSQhBERxnWDhTa5hWmHlPJcvgQbdIajOZkir1FD52opNeoYuWztbFALKGZFugow==
X-Received: by 2002:ac2:4424:: with SMTP id w4mr31369679lfl.65.1568388961835; 
 Fri, 13 Sep 2019 08:36:01 -0700 (PDT)
Received: from otyshchenko.kyiv.epam.com (ll-74.141.223.85.sovam.net.ua.
 [85.223.141.74])
 by smtp.gmail.com with ESMTPSA id c16sm6969765lfj.8.2019.09.13.08.36.00
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
 Fri, 13 Sep 2019 08:36:01 -0700 (PDT)
From: Oleksandr Tyshchenko <olekstysh@gmail.com>
To: xen-devel@lists.xenproject.org
Date: Fri, 13 Sep 2019 18:35:13 +0300
Message-Id: <1568388917-7287-5-git-send-email-olekstysh@gmail.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1568388917-7287-1-git-send-email-olekstysh@gmail.com>
References: <1568388917-7287-1-git-send-email-olekstysh@gmail.com>
Subject: [Xen-devel] [PATCH V4 4/8] xen/common: Introduce _xrealloc function
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: sstabellini@kernel.org, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Oleksandr Tyshchenko <oleksandr_tyshchenko@epam.com>, julien.grall@arm.com,
 Paul Durrant <paul.durrant@citrix.com>, Jan Beulich <jbeulich@suse.com>,
 Volodymyr_Babchuk@epam.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogT2xla3NhbmRyIFR5c2hjaGVua28gPG9sZWtzYW5kcl90eXNoY2hlbmtvQGVwYW0uY29t
PgoKVGhpcyBwYXRjaCBpbnRyb2R1Y2VzIHR5cGUtdW5zYWZlIGZ1bmN0aW9uIHdoaWNoIGJlc2lk
ZXMKcmUtYWxsb2NhdGlvbiBoYW5kbGVzIHRoZSBmb2xsb3dpbmcgY29ybmVyIGNhc2VzOgoxLiBp
ZiByZXF1ZXN0ZWQgc2l6ZSBpcyB6ZXJvLCBpdCB3aWxsIGJlaGF2ZSBsaWtlIHhmcmVlCjIuIGlm
IGluY29taW5nIHBvaW50ZXIgaXMgbm90IHZhbGlkIChOVUxMIG9yIFpFUk9fQkxPQ0tfUFRSKSwK
ICAgaXQgd2lsbCBiZWhhdmUgbGlrZSB4bWFsbG9jCgpJZiBib3RoIHBvaW50ZXIgYW5kIHNpemUg
YXJlIHZhbGlkIHRoZSBmdW5jdGlvbiB3aWxsIHJlLWFsbG9jYXRlIGFuZApjb3B5IG9ubHkgaWYg
cmVxdWVzdGVkIHNpemUgYW5kIGFsaWdubWVudCBkb24ndCBmaXQgaW4gYWxyZWFkeQphbGxvY2F0
ZWQgc3BhY2UuCgpTdWJzZXF1ZW50IHBhdGNoIHdpbGwgYWRkIHR5cGUtc2FmZSBoZWxwZXIgbWFj
cm9zLgoKU2lnbmVkLW9mZi1ieTogT2xla3NhbmRyIFR5c2hjaGVua28gPG9sZWtzYW5kcl90eXNo
Y2hlbmtvQGVwYW0uY29tPgpDQzogQW5kcmV3IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4
LmNvbT4KQ0M6IEdlb3JnZSBEdW5sYXAgPEdlb3JnZS5EdW5sYXBAZXUuY2l0cml4LmNvbT4KQ0M6
IElhbiBKYWNrc29uIDxpYW4uamFja3NvbkBldS5jaXRyaXguY29tPgpDQzogSmFuIEJldWxpY2gg
PGpiZXVsaWNoQHN1c2UuY29tPgpDQzogSnVsaWVuIEdyYWxsIDxqdWxpZW4uZ3JhbGxAYXJtLmNv
bT4KQ0M6IEtvbnJhZCBSemVzenV0ZWsgV2lsayA8a29ucmFkLndpbGtAb3JhY2xlLmNvbT4KQ0M6
IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3N0YWJlbGxpbmlAa2VybmVsLm9yZz4KQ0M6IFRpbSBEZWVn
YW4gPHRpbUB4ZW4ub3JnPgpDQzogV2VpIExpdSA8d2xAeGVuLm9yZz4KQ0M6IFBhdWwgRHVycmFu
dCA8cGF1bC5kdXJyYW50QGNpdHJpeC5jb20+CgotLS0KQ2hhbmdlcyBWMyAtPiBWNDoKICAgIC0g
YWRkIGNoZWNrIGZvciB0aGUgYWxpZ25tZW50IGNvbXBhdGliaWxpdHkKICAgIC0gcHJvcGVybHkg
ZGV0ZWN0IGN1cnJlbnQgc2l6ZSAodGFrZSBpbnRvIHRoZSBhY2NvdW50IGEgcG9zc2libGUKICAg
ICAgZmFrZSBhbGlnbm1lbnQgaGVhZGVyKQogICAgLSB1cGRhdGUgY29tbWVudCBpbiBjb2RlL3Bh
dGNoIGRlc2NyaXB0aW9uCgpDaGFuZ2VzIFJGQyAtPiBWMzoKICAgIC0gYmVoYXZlIGxpa2UgeG1h
bGxvYyBpZiBpbmNvbWluZyBwb2ludGVyIGlzIFpFUk9fQkxPQ0tfUFRSIG9yIE5VTEwKICAgIC0g
cmV0dXJuIFpFUk9fQkxPQ0tfUFRSIGFmdGVyIHhmcmVlIGlmIHJlcXVlc3RlZCBzaXplIGlzIHpl
cm8KICAgIC0gYWRkIHBhdGNoIGRlc2NyaXB0aW9uCiAgICAtIHVzZSBhbGxvY2F0b3IgaW50ZXJu
YWxzIHRvIHJlY29nbml6ZSBjdXJyZW50IHNpemUgb2YKICAgICAgdGhlIGluY29taW5nIHBvaW50
ZXIKICAgIC0gZG8gbm90IHJlLWFsbG9jYXRlIGFuZCBjb3B5IGlmIHJlcXVlc3RlZCBzaXplIGZp
dHMgaW4gYWxyZWFkeQogICAgICBhbGxvY2F0ZWQgc3BhY2UKCiAgIC4uLgoKICAgT3JpZ2luYWwg
cGF0Y2ggd2FzIGluaXRpYWxseSBwb3N0ZWQgYnkgU2FtZWVyIEdvZWw6CiAgIGh0dHBzOi8vbGlz
dHMueGVuLm9yZy9hcmNoaXZlcy9odG1sL3hlbi1kZXZlbC8yMDE3LTA2L21zZzAwODU4Lmh0bWwK
CiAgIFRoaXMgY291bGQgYmUgY29uc2lkZXJlZCBhcyBhbm90aGVyIGF0dGVtcHQgdG8gYWRkIGl0
OgogICBodHRwczovL3d3dy5tYWlsLWFyY2hpdmUuY29tL2tleGVjQGxpc3RzLmluZnJhZGVhZC5v
cmcvbXNnMjEzMzUuaHRtbAoKICAgW0FzIGl0IHdhcyBwcmV2aW91c2x5IGRpc2N1c3NlZCB3aXRo
IEp1bGllbiBpbiBJUkNdCgogICBUaGUgcmVhc29uIGZvciB0aGlzIHBhdGNoIHRvIGJlIGFuIFJG
QyBpcyB0aGF0IHBhdGNoIGl0c2VsZiBpcyBub3QKICAgY29tcGxldGVseSBjb3JyZWN0IGFuZCBJ
IGRvbid0IGZ1bGx5IHVuZGVyc3RhbmQgd2hhdC9ob3cgc2hvdWxkCiAgIGJlIGRvbmUgZm9yIHRo
aXMgcGF0Y2ggdG8gYmUgYWNjZXB0ZWQuIE9yIHdoZXRoZXIgY29tbXVuaXR5IGV2ZW4KICAgd2Fu
dHMgdGhpcyB0byBnbyBpbi4gU28sIHRvIGF2b2lkIGJpa2Ugc2hlZGRpbmcsIHRoZSBmaXJzdCB0
YXJnZXQgaXMKICAgdG8gY29sbGVjdCBmZWVkYmFjay4KCiAgIEZvciBldmVyeW9uZSB3aG8gd2Fu
dHMgbW9yZSBkZXRhaWxzIHdoeSB0aGlzIGlzIG5lZWRlZCBhbmQKICAgd2hlcmUgdXNlZCwgcGxl
YXNlIHNlZSBuZXh0IHBhdGNoIG9mIHRoaXMgdGhyZWFkOgogICAiaW9tbXUvYXJtOiBBZGQgbGln
aHR3ZWlnaHQgaW9tbXVfZndzcGVjIHN1cHBvcnQiCgogICBJbiBhIG51dHNoZWxsLCB0aGUgdXBj
b21pbmcgImlvbW11X2Z3c3BlYyIgc3VwcG9ydCBvbiBBUk0KICAgaXMgZ29pbmcgdG8gdXNlIHhy
ZWFsbG9jIHRvIGV4cGFuZCBhbiBhcnJheSBmb3IgZGV2aWNlIElEcy4KICAgV2UgcmVhbGx5IHdh
bnQgdG8gaGF2ZSAiaW9tbXVfZndzcGVjIiBzdXBwb3J0IHdoaWNoIHdpbGwgZ2l2ZSB1cwogICBh
IGdlbmVyaWMgYWJzdHJhY3Qgd2F5IHRvIGFkZCBuZXcgZGV2aWNlIHRvIHRoZSBJT01NVSBiYXNl
ZCBvbgogICB0aGUgZ2VuZXJpYyBJT01NVSBEVCBiaW5kaW5nLgotLS0KIHhlbi9jb21tb24veG1h
bGxvY190bHNmLmMgfCA1MiArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKwogeGVuL2luY2x1ZGUveGVuL3htYWxsb2MuaCB8ICAxICsKIDIgZmlsZXMgY2hhbmdl
ZCwgNTMgaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24veG1hbGxvY190bHNm
LmMgYi94ZW4vY29tbW9uL3htYWxsb2NfdGxzZi5jCmluZGV4IGU5OGFkNjUuLjJiMjQwYjEgMTAw
NjQ0Ci0tLSBhL3hlbi9jb21tb24veG1hbGxvY190bHNmLmMKKysrIGIveGVuL2NvbW1vbi94bWFs
bG9jX3Rsc2YuYwpAQCAtNTk4LDYgKzU5OCw1OCBAQCB2b2lkICpfeHphbGxvYyh1bnNpZ25lZCBs
b25nIHNpemUsIHVuc2lnbmVkIGxvbmcgYWxpZ24pCiAgICAgcmV0dXJuIHAgPyBtZW1zZXQocCwg
MCwgc2l6ZSkgOiBwOwogfQogCit2b2lkICpfeHJlYWxsb2Modm9pZCAqcHRyLCB1bnNpZ25lZCBs
b25nIHNpemUsIHVuc2lnbmVkIGxvbmcgYWxpZ24pCit7CisgICAgdW5zaWduZWQgbG9uZyBjdXJy
X3NpemUsIHRtcF9zaXplOworICAgIHZvaWQgKnA7CisKKyAgICBpZiAoICFzaXplICkKKyAgICB7
CisgICAgICAgIHhmcmVlKHB0cik7CisgICAgICAgIHJldHVybiBaRVJPX0JMT0NLX1BUUjsKKyAg
ICB9CisKKyAgICBpZiAoIHB0ciA9PSBOVUxMIHx8IHB0ciA9PSBaRVJPX0JMT0NLX1BUUiApCisg
ICAgICAgIHJldHVybiBfeG1hbGxvYyhzaXplLCBhbGlnbik7CisKKyAgICBpZiAoICEoKHVuc2ln
bmVkIGxvbmcpcHRyICYgKFBBR0VfU0laRSAtIDEpKSApCisgICAgICAgIGN1cnJfc2l6ZSA9IFBG
Tl9PUkRFUih2aXJ0X3RvX3BhZ2UocHRyKSkgPDwgUEFHRV9TSElGVDsKKyAgICBlbHNlCisgICAg
eworICAgICAgICBzdHJ1Y3QgYmhkciAqYiA9IChzdHJ1Y3QgYmhkciAqKSgoY2hhciAqKXB0ciAt
IEJIRFJfT1ZFUkhFQUQpOworCisgICAgICAgIGlmICggYi0+c2l6ZSAmIEZSRUVfQkxPQ0sgKQor
ICAgICAgICB7CisgICAgICAgICAgICBwID0gKGNoYXIgKilwdHIgLSAoYi0+c2l6ZSAmIH5GUkVF
X0JMT0NLKTsKKyAgICAgICAgICAgIGIgPSAoc3RydWN0IGJoZHIgKikoKGNoYXIgKilwIC0gQkhE
Ul9PVkVSSEVBRCk7CisgICAgICAgICAgICBBU1NFUlQoIShiLT5zaXplICYgRlJFRV9CTE9DSykp
OworICAgICAgICB9CisKKyAgICAgICAgY3Vycl9zaXplID0gYi0+c2l6ZSAmIEJMT0NLX1NJWkVf
TUFTSzsKKyAgICB9CisKKyAgICBBU1NFUlQoKGFsaWduICYgKGFsaWduIC0gMSkpID09IDApOwor
ICAgIGlmICggYWxpZ24gPCBNRU1fQUxJR04gKQorICAgICAgICBhbGlnbiA9IE1FTV9BTElHTjsK
KyAgICB0bXBfc2l6ZSA9IHNpemUgKyBhbGlnbiAtIE1FTV9BTElHTjsKKworICAgIGlmICggdG1w
X3NpemUgPCBQQUdFX1NJWkUgKQorICAgICAgICB0bXBfc2l6ZSA9ICggdG1wX3NpemUgPCBNSU5f
QkxPQ0tfU0laRSApID8gTUlOX0JMT0NLX1NJWkUgOgorICAgICAgICAgICAgUk9VTkRVUF9TSVpF
KHRtcF9zaXplKTsKKworICAgIGlmICggdG1wX3NpemUgPD0gY3Vycl9zaXplICYmICgodW5zaWdu
ZWQgbG9uZylwdHIgJiAoYWxpZ24gLSAxKSkgPT0gMCApCisgICAgICAgIHJldHVybiBwdHI7IC8q
IHRoZSBzaXplIGFuZCBhbGlnbm1lbnQgZml0IGluIGFscmVhZHkgYWxsb2NhdGVkIHNwYWNlICov
CisKKyAgICBwID0gX3htYWxsb2Moc2l6ZSwgYWxpZ24pOworICAgIGlmICggcCApCisgICAgewor
ICAgICAgICBtZW1jcHkocCwgcHRyLCBtaW4oY3Vycl9zaXplLCBzaXplKSk7CisgICAgICAgIHhm
cmVlKHB0cik7CisgICAgfQorCisgICAgcmV0dXJuIHA7Cit9CisKIHZvaWQgeGZyZWUodm9pZCAq
cCkKIHsKICAgICBzdHJ1Y3QgYmhkciAqYjsKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi94
bWFsbG9jLmggYi94ZW4vaW5jbHVkZS94ZW4veG1hbGxvYy5oCmluZGV4IGYwNzVkMmQuLjgzMTE1
MmYgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hlbi94bWFsbG9jLmgKKysrIGIveGVuL2luY2x1
ZGUveGVuL3htYWxsb2MuaApAQCAtNTEsNiArNTEsNyBAQCBleHRlcm4gdm9pZCB4ZnJlZSh2b2lk
ICopOwogLyogVW5kZXJseWluZyBmdW5jdGlvbnMgKi8KIGV4dGVybiB2b2lkICpfeG1hbGxvYyh1
bnNpZ25lZCBsb25nIHNpemUsIHVuc2lnbmVkIGxvbmcgYWxpZ24pOwogZXh0ZXJuIHZvaWQgKl94
emFsbG9jKHVuc2lnbmVkIGxvbmcgc2l6ZSwgdW5zaWduZWQgbG9uZyBhbGlnbik7CitleHRlcm4g
dm9pZCAqX3hyZWFsbG9jKHZvaWQgKnB0ciwgdW5zaWduZWQgbG9uZyBzaXplLCB1bnNpZ25lZCBs
b25nIGFsaWduKTsKIAogc3RhdGljIGlubGluZSB2b2lkICpfeG1hbGxvY19hcnJheSgKICAgICB1
bnNpZ25lZCBsb25nIHNpemUsIHVuc2lnbmVkIGxvbmcgYWxpZ24sIHVuc2lnbmVkIGxvbmcgbnVt
KQotLSAKMi43LjQKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9y
ZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

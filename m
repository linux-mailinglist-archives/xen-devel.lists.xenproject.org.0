Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id D9D96B7894
	for <lists+xen-devel@lfdr.de>; Thu, 19 Sep 2019 13:38:36 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iAuit-00025A-UB; Thu, 19 Sep 2019 11:35:43 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=Ts4K=XO=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1iAuis-00024l-PQ
 for xen-devel@lists.xenproject.org; Thu, 19 Sep 2019 11:35:42 +0000
X-Inumbo-ID: 9b2d9e7e-dad1-11e9-978d-bc764e2007e4
Received: from foss.arm.com (unknown [217.140.110.172])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTP
 id 9b2d9e7e-dad1-11e9-978d-bc764e2007e4;
 Thu, 19 Sep 2019 11:35:39 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 8BCAD28;
 Thu, 19 Sep 2019 04:35:39 -0700 (PDT)
Received: from [10.1.196.50] (e108454-lin.cambridge.arm.com [10.1.196.50])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id BA75A3F67D;
 Thu, 19 Sep 2019 04:35:38 -0700 (PDT)
To: Oleksandr Tyshchenko <olekstysh@gmail.com>, xen-devel@lists.xenproject.org
References: <1568388917-7287-1-git-send-email-olekstysh@gmail.com>
 <1568388917-7287-8-git-send-email-olekstysh@gmail.com>
From: Julien Grall <julien.grall@arm.com>
Message-ID: <631c94fe-d3ac-002b-0e1d-30b9b03158d1@arm.com>
Date: Thu, 19 Sep 2019 12:35:37 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <1568388917-7287-8-git-send-email-olekstysh@gmail.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH V4 7/8] iommu/arm: Introduce
 iommu_add_dt_device API
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Oleksandr Tyshchenko <oleksandr_tyshchenko@epam.com>,
 sstabellini@kernel.org, Volodymyr_Babchuk@epam.com,
 Jan Beulich <jbeulich@suse.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGkgT2xla3NhbmRyLAoKT24gMTMvMDkvMjAxOSAxNjozNSwgT2xla3NhbmRyIFR5c2hjaGVua28g
d3JvdGU6Cj4gRnJvbTogT2xla3NhbmRyIFR5c2hjaGVua28gPG9sZWtzYW5kcl90eXNoY2hlbmtv
QGVwYW0uY29tPgo+IAo+IFRoZSBtYWluIHB1cHJvc2Ugb2YgdGhpcyBwYXRjaCBpcyB0byBhZGQg
YSB3YXkgdG8gcmVnaXN0ZXIgRFQgZGV2aWNlCj4gKHdoaWNoIGlzIGJlaGluZCB0aGUgSU9NTVUp
IHVzaW5nIHRoZSBnZW5lcmljIElPTU1VIERUIGJpbmRpbmdzIFsxXQo+IGJlZm9yZSBhc3NpZ25p
bmcgdGhhdCBkZXZpY2UgdG8gYSBkb21haW4uCj4gCj4gU28sIHRoaXMgcGF0Y2ggYWRkcyBuZXcg
ImlvbW11X2FkZF9kdF9kZXZpY2UiIEFQSSBmb3IgYWRkaW5nIERUIGRldmljZQo+IHRvIHRoZSBJ
T01NVSB1c2luZyBnZW5lcmljIElPTU1VIERUIGJpbmRpbmdzIGFuZCBwcmV2aW91c2x5IGFkZGVk
Cj4gImlvbW11X2Z3c3BlYyIgc3VwcG9ydC4gSXQgaXMgY2FsbGVkIHdoZW4gY29uc3RydWN0aW5n
IERvbTAgc2luY2UKPiAiaW9tbXVfYXNzaWduX2R0X2RldmljZSIgY2FuIGJlIGNhbGxlZCBmb3Ig
RG9tMCBhbHNvLgoKVGhlIGxhc3Qgc2VudGVuY2UgaXMgbWlzbGVhZGluZy4gWWVzIHNvbWUgZGV2
aWNlcyBtYXkgYmUgYXNzaWduZWQgdG8gdGhlIApoYXJkd2FyZSBkb21haW4gKGFrYSBkb20wKSBi
dXQgb3RoZXIgbWF5IGJlIGFzc2lnbmVkIHRvIG90aGVyIGRvbWFpbnMuCgpIZXJlIHlvdSBhcmUg
KGFiKXVzaW5nIHRoZSBjb25zdHJ1Y3Rpb24gb2YgdGhlIGhhcmR3YXJlIGRvbWFpbiB0byBhZGQg
YWxsIHRoZSAKZGV2aWNlcyB0byB0aGUgSU9NTVUuIFRoaXMgd29ya3MgZmluZSBub3cgYmVjYXVz
ZSB0aGUgaGFyZHdhcmUgZG9tYWluIHdpbGwgCmFsd2F5cyBiZSB0aGUgZmlyc3QgZG9tYWluIHRv
IGJlIGluaXRpYWxpemVkLiBCdXQgSSBhbSBub3Qgc3VyZSB0aGF0IHdoZXRoZXIgCnRoaXMgaXMg
Y29ycmVjdCB0byBkbyBsb25nIHRlcm0uCgpBcyBtZW50aW9uZWQgZWFybGllciwgbXkgcHJlZmVy
ZW5jZSBpcyB0byBrZWVwICJhZGQiIGFuZCAiYXNzaWduIiBzZXBhcmF0ZWQuIFNvIAptYXliZSB3
aGF0IHdlIHdhbnQgdG8gZG8gaXM6CgppZiAoIG5lZWRfbWFwcGluZyApCnsKICAgIGlvbW11X2Fk
ZF9kdF9kZXZpY2UoZCwgZGV2KTsKICAgIGlmICggZHRfZGV2aWNlX2lzX3Byb3RlY3RlZChkKSAp
CiAgICB7CiAgICAgIHJlcyA9IGlvbW11X2Fzc2lnbl9kdF9kZXZpY2UoLi4uKTsKICAgICAgaWYg
KCByZXMgKQogICAgICAgIC8qIGVycm9yICovCiAgICB9Cn0KCldlIHdvdWxkIG5lZWQgc2ltaWxh
ciBjb2RlIGluIGlvbW11X2RvX2R0X2RvbWN0bC4gQWx0aG91Z2gsIGRldmljZSBzaG91bGQgYWx3
YXkgCmJlIHByb3RlY3RlZCBpbiB0aGlzIGNhc2UuCgo+IAo+IEJlc2lkZXMgdGhhdCwgdGhpcyBw
YXRjaCBhZGRzIG5ldyAiZHRfeGxhdGUiIGNhbGxiYWNrIChib3Jyb3dlZCBmcm9tCj4gTGludXgg
Im9mX3hsYXRlIikgZm9yIHByb3ZpZGluZyB0aGUgZHJpdmVyIHdpdGggRFQgSU9NTVUgc3BlY2lm
aWVyCj4gd2hpY2ggZGVzY3JpYmVzIHRoZSBJT01NVSBtYXN0ZXIgaW50ZXJmYWNlcyBvZiB0aGF0
IGRldmljZSAoZGV2aWNlIElEcywgZXRjKS4KPiBBY2NvcmRpbmcgdG8gdGhlIGdlbmVyaWMgSU9N
TVUgRFQgYmluZGluZ3MgdGhlIGNvbnRleHQgb2YgcmVxdWlyZWQKPiBwcm9wZXJ0aWVzIGZvciBJ
T01NVSBkZXZpY2UvbWFzdGVyIG5vZGUgKCNpb21tdS1jZWxscywgaW9tbXVzKSBkZXBlbmRzCj4g
b24gbWFueSBmYWN0b3JzIGFuZCBpcyByZWFsbHkgZHJpdmVyIGRlcGVuZGVkIHRoaW5nLgo+IAo+
IFBsZWFzZSBub3RlLCBhbGwgSU9NTVUgZHJpdmVycyB3aGljaCBzdXBwb3J0IGdlbmVyaWMgSU9N
TVUgRFQgYmluZGluZ3MKPiBzaG91bGQgdXNlICJkdF94bGF0ZSIgYW5kICJhZGRfZGV2aWNlIiBj
YWxsYmFja3MuCj4gCj4gWzFdIGh0dHBzOi8vd3d3Lmtlcm5lbC5vcmcvZG9jL0RvY3VtZW50YXRp
b24vZGV2aWNldHJlZS9iaW5kaW5ncy9pb21tdS9pb21tdS50eHQKPiAKPiBTaWduZWQtb2ZmLWJ5
OiBPbGVrc2FuZHIgVHlzaGNoZW5rbyA8b2xla3NhbmRyX3R5c2hjaGVua29AZXBhbS5jb20+Cj4g
Q0M6IEp1bGllbiBHcmFsbCA8anVsaWVuLmdyYWxsQGFybS5jb20+Cj4gQ0M6IEphbiBCZXVsaWNo
IDxqYmV1bGljaEBzdXNlLmNvbT4KPiAKPiAtLS0KPiBDaGFuZ2VzIFYzIC0+IFY0Ogo+ICAgICAg
IC0gc3F1YXNoZWQgd2l0aCAiaW9tbXU6IEFkZCBvZl94bGF0ZSBjYWxsYmFjayIgcGF0Y2gKPiAg
ICAgICAtIHJlbmFtZWQgIm9mX3hsYXRlIiB0byAiZHRfeGxhdGUiCj4gICAgICAgLSByZXdvcmtl
ZCBwYXRjaCBkZXNjcmlwdGlvbgo+ICAgICAgIC0gY2xhcmlmaWVkIGNvbW1lbnRzIGluIGNvZGUs
IHJlbW92ZWQgY29uZnVzaW5nIHdvcmQKPiAgICAgICAgICJpbml0aWFsaXplIGRldmljZSIsIGV0
Ywo+ICAgICAgIC0gdXBkYXRlZCBkZWJ1ZyBtZXNzYWdlIGluIGhhbmRsZV9kZXZpY2UoKQo+ICAg
ICAgIC0gbW9kaWZpZWQgdG8gY2hlY2sgb3BzLT5vZl94bGF0ZSBhbmQgb3BzLT5hZGRfZGV2aWNl
Cj4gICAgICAgICBvbmx5IGlmICJpb21tdXMiIHByb3BlcnR5IGlzIGV4aXN0cwo+IAo+IENoYW5n
ZXMgVjIgLT4gVjM6Cj4gICAgICAtIGNsYXJpZmllZCBwYXRjaCBkZXNjcmlwdGlvbgo+ICAgICAg
LSBjbGFyaWZpZWQgY29tbWVudHMgaW4gY29kZQo+ICAgICAgLSBtb2RpZmllZCB0byBwcm92aWRl
IERUIElPTU1VIHNwZWNpZmllciB0byB0aGUgZHJpdmVyCj4gICAgICAgIHVzaW5nICJvZl94bGF0
ZSIgY2FsbGJhY2sKPiAgICAgIC0gZG9jdW1lbnRlZCBmdW5jdGlvbiB1c2FnZQo+ICAgICAgLSBt
b2RpZmllZCB0byByZXR1cm4gYW4gZXJyb3IgaWYgb3BzIGlzIG5vdCBwcmVzZW50L2ltcGxlbWVu
dGVkLAo+ICAgICAgLSBhZGRlZCBhYmlsaXR5IHRvIHJldHVybiBhIHBvc3NpdGl2ZSB2YWx1ZSB0
byBpbmRpY2F0ZQo+ICAgICAgICB0aGF0IGRldmljZSBkb2Vzbid0IG5lZWQgdG8gYmUgcHJvdGVj
dGVkCj4gICAgICAtIHJlbW92ZWQgY2hlY2sgZm9yIHRoZSAiaW9tbXUiIHByb3BlcnR5IHByZXNl
bmNlCj4gICAgICAgIGluIHRoZSBjb21tb24gY29kZQo+ICAgICAgLSBpbmNsdWRlZCA8YXNtL2lv
bW11X2Z3c3BlYy5oPiBkaXJlY3RseQo+IC0tLQo+ICAgeGVuL2FyY2gvYXJtL2RvbWFpbl9idWls
ZC5jICAgICAgICAgfCAxMiArKysrKysrCj4gICB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0v
aW9tbXUuYyB8IDYzICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKPiAgIHhl
bi9pbmNsdWRlL2FzbS1hcm0vaW9tbXUuaCAgICAgICAgIHwgMTEgKysrKysrKwo+ICAgeGVuL2lu
Y2x1ZGUveGVuL2lvbW11LmggICAgICAgICAgICAgfCAxMCArKysrKysKPiAgIDQgZmlsZXMgY2hh
bmdlZCwgOTYgaW5zZXJ0aW9ucygrKQo+IAo+IGRpZmYgLS1naXQgYS94ZW4vYXJjaC9hcm0vZG9t
YWluX2J1aWxkLmMgYi94ZW4vYXJjaC9hcm0vZG9tYWluX2J1aWxkLmMKPiBpbmRleCBhMGZlZTFl
Li4wZDc5MTgyIDEwMDY0NAo+IC0tLSBhL3hlbi9hcmNoL2FybS9kb21haW5fYnVpbGQuYwo+ICsr
KyBiL3hlbi9hcmNoL2FybS9kb21haW5fYnVpbGQuYwo+IEBAIC0xMjQwLDYgKzEyNDAsNyBAQCBz
dGF0aWMgaW50IF9faW5pdCBtYXBfZGV2aWNlX2NoaWxkcmVuKHN0cnVjdCBkb21haW4gKmQsCj4g
ICAKPiAgIC8qCj4gICAgKiBGb3IgYSBnaXZlbiBkZXZpY2Ugbm9kZToKPiArICogIC0gVHJ5IHRv
IGNhbGwgaW9tbXVfYWRkX2R0X2RldmljZSB0byBwcm90ZWN0IHRoZSBkZXZpY2UgYnkgYW4gSU9N
TVUKPiAgICAqICAtIEdpdmUgcGVybWlzc2lvbiB0byB0aGUgZ3Vlc3QgdG8gbWFuYWdlIElSUSBh
bmQgTU1JTyByYW5nZQo+ICAgICogIC0gUmV0cmlldmUgdGhlIElSUSBjb25maWd1cmF0aW9uIChp
LmUgZWRnZS9sZXZlbCkgZnJvbSBkZXZpY2UgdHJlZQo+ICAgICogV2hlbiB0aGUgZGV2aWNlIGlz
IG5vdCBtYXJrZWQgZm9yIGd1ZXN0IHBhc3N0aHJvdWdoOgo+IEBAIC0xMjU3LDYgKzEyNTgsMTcg
QEAgc3RhdGljIGludCBfX2luaXQgaGFuZGxlX2RldmljZShzdHJ1Y3QgZG9tYWluICpkLCBzdHJ1
Y3QgZHRfZGV2aWNlX25vZGUgKmRldiwKPiAgICAgICB1NjQgYWRkciwgc2l6ZTsKPiAgICAgICBi
b29sIG5lZWRfbWFwcGluZyA9ICFkdF9kZXZpY2VfZm9yX3Bhc3N0aHJvdWdoKGRldik7Cj4gICAK
PiArICAgIGR0X2RwcmludGsoIkNoZWNrIGlmICVzIGlzIGJlaGluZCB0aGUgSU9NTVUgYW5kIGFk
ZCBpdFxuIiwKPiArICAgICAgICAgICAgICAgZHRfbm9kZV9mdWxsX25hbWUoZGV2KSk7Cj4gKwo+
ICsgICAgcmVzID0gaW9tbXVfYWRkX2R0X2RldmljZShkZXYpOwo+ICsgICAgaWYgKCByZXMgPCAw
ICkKPiArICAgIHsKPiArICAgICAgICBwcmludGsoWEVOTE9HX0VSUiAiRmFpbGVkIHRvIGFkZCAl
cyB0byB0aGUgSU9NTVVcbiIsCj4gKyAgICAgICAgICAgICAgIGR0X25vZGVfZnVsbF9uYW1lKGRl
dikpOwo+ICsgICAgICAgIHJldHVybiByZXM7Cj4gKyAgICB9Cj4gKwo+ICAgICAgIG5pcnEgPSBk
dF9udW1iZXJfb2ZfaXJxKGRldik7Cj4gICAgICAgbmFkZHIgPSBkdF9udW1iZXJfb2ZfYWRkcmVz
cyhkZXYpOwo+ICAgCj4gZGlmZiAtLWdpdCBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FybS9p
b21tdS5jIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYXJtL2lvbW11LmMKPiBpbmRleCA1YTNk
MWQ1Li5kZWE3OWVkIDEwMDY0NAo+IC0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FybS9p
b21tdS5jCj4gKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYXJtL2lvbW11LmMKPiBAQCAt
MjAsNiArMjAsNyBAQAo+ICAgI2luY2x1ZGUgPHhlbi9saWIuaD4KPiAgIAo+ICAgI2luY2x1ZGUg
PGFzbS9kZXZpY2UuaD4KPiArI2luY2x1ZGUgPGFzbS9pb21tdV9md3NwZWMuaD4KPiAgIAo+ICAg
LyoKPiAgICAqIERlZmVycmVkIHByb2JlIGxpc3QgaXMgdXNlZCB0byBrZWVwIHRyYWNrIG9mIGRl
dmljZXMgZm9yIHdoaWNoIGRyaXZlcgo+IEBAIC0xNDEsMyArMTQyLDY1IEBAIGludCBhcmNoX2lv
bW11X3BvcHVsYXRlX3BhZ2VfdGFibGUoc3RydWN0IGRvbWFpbiAqZCkKPiAgIHZvaWQgX19od2Rv
bV9pbml0IGFyY2hfaW9tbXVfaHdkb21faW5pdChzdHJ1Y3QgZG9tYWluICpkKQo+ICAgewo+ICAg
fQo+ICsKPiAraW50IF9faW5pdCBpb21tdV9hZGRfZHRfZGV2aWNlKHN0cnVjdCBkdF9kZXZpY2Vf
bm9kZSAqbnApCgpTb3JyeSB0byBvbmx5IHJlYWxpc2UgaXQgbm93LiBXb3VsZCBpdCBtYWtlIHNl
bnNlIHRvIGhhdmUgdGhpcyBmdW5jdGlvbiAKaW1wbGVtZW50ZWQgaW4geGVuL3Bhc3N0aHJvdWdo
L2RldmljZV90cmVlLmM/IFRoaXMgd291bGQgYWxsb3cgdG8ga2VlcCAKYXJtL2lvbW11LmMgYXMg
ZmlybXdhcmUgYWdub3N0aWMgYXMgcG9zc2libGUuCgo+ICt7Cj4gKyAgICBjb25zdCBzdHJ1Y3Qg
aW9tbXVfb3BzICpvcHMgPSBpb21tdV9nZXRfb3BzKCk7Cj4gKyAgICBzdHJ1Y3QgZHRfcGhhbmRs
ZV9hcmdzIGlvbW11X3NwZWM7Cj4gKyAgICBzdHJ1Y3QgZGV2aWNlICpkZXYgPSBkdF90b19kZXYo
bnApOwo+ICsgICAgaW50IHJjID0gMSwgaW5kZXggPSAwOwo+ICsKPiArICAgIGlmICggIWlvbW11
X2VuYWJsZWQgKQo+ICsgICAgICAgIHJldHVybiAxOwo+ICsKPiArICAgIGlmICggIW9wcyApCj4g
KyAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsgICAgaWYgKCBkZXZfaW9tbXVfZndzcGVj
X2dldChkZXYpICkKPiArICAgICAgICByZXR1cm4gLUVFWElTVDsKPiArCj4gKyAgICAvKgo+ICsg
ICAgICogQWNjb3JkaW5nIHRvIHRoZSBEb2N1bWVudGF0aW9uL2RldmljZXRyZWUvYmluZGluZ3Mv
aW9tbXUvaW9tbXUudHh0Cj4gKyAgICAgKiBmcm9tIExpbnV4Lgo+ICsgICAgICovCj4gKyAgICB3
aGlsZSAoICFkdF9wYXJzZV9waGFuZGxlX3dpdGhfYXJncyhucCwgImlvbW11cyIsICIjaW9tbXUt
Y2VsbHMiLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgs
ICZpb21tdV9zcGVjKSApCj4gKyAgICB7Cj4gKyAgICAgICAgLyoKPiArICAgICAgICAgKiBUaGUg
ZHJpdmVyIHdoaWNoIHN1cHBvcnRzIGdlbmVyaWMgSU9NTVUgRFQgYmluZGluZ3MgbXVzdCBoYXZl
Cj4gKyAgICAgICAgICogdGhlc2UgY2FsbGJhY2sgaW1wbGVtZW50ZWQuCj4gKyAgICAgICAgICov
Cj4gKyAgICAgICAgaWYgKCAhb3BzLT5hZGRfZGV2aWNlIHx8ICFvcHMtPmR0X3hsYXRlICkKPiAr
ICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsgICAgICAgIGlmICggIWR0X2Rldmlj
ZV9pc19hdmFpbGFibGUoaW9tbXVfc3BlYy5ucCkgKQo+ICsgICAgICAgICAgICBicmVhazsKPiAr
Cj4gKyAgICAgICAgcmMgPSBpb21tdV9md3NwZWNfaW5pdChkZXYsICZpb21tdV9zcGVjLm5wLT5k
ZXYpOwo+ICsgICAgICAgIGlmICggcmMgKQo+ICsgICAgICAgICAgICBicmVhazsKPiArCj4gKyAg
ICAgICAgLyoKPiArICAgICAgICAgKiBQcm92aWRlIERUIElPTU1VIHNwZWNpZmllciB3aGljaCBk
ZXNjcmliZXMgdGhlIElPTU1VIG1hc3Rlcgo+ICsgICAgICAgICAqIGludGVyZmFjZXMgb2YgdGhh
dCBkZXZpY2UgKGRldmljZSBJRHMsIGV0YykgdG8gdGhlIGRyaXZlci4KPiArICAgICAgICAgKiBU
aGUgZHJpdmVyIGlzIHJlc3BvbnNpYmxlIHRvIGRlY2lkZSBob3cgdG8gaW50ZXJwcmV0IHRoZW0u
Cj4gKyAgICAgICAgICovCj4gKyAgICAgICAgcmMgPSBvcHMtPmR0X3hsYXRlKGRldiwgJmlvbW11
X3NwZWMpOwo+ICsgICAgICAgIGlmICggcmMgKQo+ICsgICAgICAgICAgICBicmVhazsKPiArCj4g
KyAgICAgICAgaW5kZXgrKzsKPiArICAgIH0KPiArCj4gKyAgICAvKgo+ICsgICAgICogQWRkIG1h
c3RlciBkZXZpY2UgdG8gdGhlIElPTU1VIGlmIGxhdHRlciBpcyBwcmVzZW50IGFuZCBhdmFpbGFi
bGUuCj4gKyAgICAgKiBUaGUgZHJpdmVyIGlzIHJlc3BvbnNpYmxlIHRvIG1hcmsgdGhhdCBkZXZp
Y2UgYXMgcHJvdGVjdGVkLgo+ICsgICAgICovCj4gKyAgICBpZiAoICFyYyApCj4gKyAgICAgICAg
cmMgPSBvcHMtPmFkZF9kZXZpY2UoMCwgZGV2KTsKPiArCj4gKyAgICBpZiAoIHJjIDwgMCApCj4g
KyAgICAgICAgaW9tbXVfZndzcGVjX2ZyZWUoZGV2KTsKPiArCj4gKyAgICByZXR1cm4gcmM7Cj4g
K30KPiBkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLWFybS9pb21tdS5oIGIveGVuL2luY2x1
ZGUvYXNtLWFybS9pb21tdS5oCj4gaW5kZXggMTFkZWRiYS4uMDRmMjFhMiAxMDA2NDQKPiAtLS0g
YS94ZW4vaW5jbHVkZS9hc20tYXJtL2lvbW11LmgKPiArKysgYi94ZW4vaW5jbHVkZS9hc20tYXJt
L2lvbW11LmgKPiBAQCAtMjcsNiArMjcsMTcgQEAgY29uc3Qgc3RydWN0IGlvbW11X29wcyAqaW9t
bXVfZ2V0X29wcyh2b2lkKTsKPiAgIHZvaWQgaW9tbXVfc2V0X29wcyhjb25zdCBzdHJ1Y3QgaW9t
bXVfb3BzICpvcHMpOwo+ICAgCj4gICAvKgo+ICsgKiBIZWxwZXIgdG8gYWRkIG1hc3RlciBkZXZp
Y2UgdG8gdGhlIElPTU1VIHVzaW5nIGdlbmVyaWMgSU9NTVUgRFQgYmluZGluZ3MuCj4gKyAqCj4g
KyAqIFJldHVybiB2YWx1ZXM6Cj4gKyAqICAwIDogZGV2aWNlIGlzIHByb3RlY3RlZCBieSBhbiBJ
T01NVQo+ICsgKiA8MCA6IGRldmljZSBpcyBub3QgcHJvdGVjdGVkIGJ5IGFuIElPTU1VLCBidXQg
bXVzdCBiZSAoZXJyb3IgY29uZGl0aW9uKQo+ICsgKiA+MCA6IGRldmljZSBkb2Vzbid0IG5lZWQg
dG8gYmUgcHJvdGVjdGVkIGJ5IGFuIElPTU1VCj4gKyAqICAgICAgKElPTU1VIGlzIG5vdCBlbmFi
bGVkL3ByZXNlbnQgb3IgZGV2aWNlIGlzIG5vdCBjb25uZWN0ZWQgdG8gaXQpLgo+ICsgKi8KPiAr
aW50IGlvbW11X2FkZF9kdF9kZXZpY2Uoc3RydWN0IGR0X2RldmljZV9ub2RlICpucCk7Cj4gKwo+
ICsvKgo+ICAgICogVGhlIG1hcHBpbmcgaGVscGVycyBiZWxvdyBzaG91bGQgb25seSBiZSB1c2Vk
IGlmIFAyTSBUYWJsZSBpcyBzaGFyZWQKPiAgICAqIGJldHdlZW4gdGhlIENQVSBhbmQgdGhlIElP
TU1VLgo+ICAgICovCj4gZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9pb21tdS5oIGIveGVu
L2luY2x1ZGUveGVuL2lvbW11LmgKPiBpbmRleCBhYjI1OGI4Li41OWEyY2VlIDEwMDY0NAo+IC0t
LSBhL3hlbi9pbmNsdWRlL3hlbi9pb21tdS5oCj4gKysrIGIveGVuL2luY2x1ZGUveGVuL2lvbW11
LmgKPiBAQCAtMjM5LDYgKzIzOSwxNiBAQCBzdHJ1Y3QgaW9tbXVfb3BzIHsKPiAgICAgICBpbnQg
X19tdXN0X2NoZWNrICgqaW90bGJfZmx1c2hfYWxsKShzdHJ1Y3QgZG9tYWluICpkKTsKPiAgICAg
ICBpbnQgKCpnZXRfcmVzZXJ2ZWRfZGV2aWNlX21lbW9yeSkoaW9tbXVfZ3JkbV90ICosIHZvaWQg
Kik7Cj4gICAgICAgdm9pZCAoKmR1bXBfcDJtX3RhYmxlKShzdHJ1Y3QgZG9tYWluICpkKTsKPiAr
Cj4gKyNpZmRlZiBDT05GSUdfSEFTX0RFVklDRV9UUkVFCj4gKyAgICAvKgo+ICsgICAgICogQWxs
IElPTU1VIGRyaXZlcnMgd2hpY2ggc3VwcG9ydCBnZW5lcmljIElPTU1VIERUIGJpbmRpbmdzIHNo
b3VsZCB1c2UKPiArICAgICAqIHRoaXMgY2FsbGJhY2suIFRoaXMgaXMgYSB3YXkgZm9yIHRoZSBm
cmFtZXdvcmsgdG8gcHJvdmlkZSB0aGUgZHJpdmVyCj4gKyAgICAgKiB3aXRoIERUIElPTU1VIHNw
ZWNpZmllciB3aGljaCBkZXNjcmliZXMgdGhlIElPTU1VIG1hc3RlciBpbnRlcmZhY2VzIG9mCj4g
KyAgICAgKiB0aGF0IGRldmljZSAoZGV2aWNlIElEcywgZXRjKS4KPiArICAgICAqLwo+ICsgICAg
aW50ICgqZHRfeGxhdGUpKGRldmljZV90ICpkZXYsIHN0cnVjdCBkdF9waGFuZGxlX2FyZ3MgKmFy
Z3MpOwo+ICsjZW5kaWYKPiAgIH07Cj4gICAKPiAgICNpbmNsdWRlIDxhc20vaW9tbXUuaD4KPiAK
CkNoZWVycywKCi0tIApKdWxpZW4gR3JhbGwKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3Rz
LnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0
aW5mby94ZW4tZGV2ZWw=

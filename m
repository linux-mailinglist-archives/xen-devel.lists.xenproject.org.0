Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B973DB1DC4
	for <lists+xen-devel@lfdr.de>; Fri, 13 Sep 2019 14:36:58 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i8klV-0001nN-Ta; Fri, 13 Sep 2019 12:33:29 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=mE8E=XI=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1i8klU-0001nI-Od
 for xen-devel@lists.xenproject.org; Fri, 13 Sep 2019 12:33:28 +0000
X-Inumbo-ID: aef8b8ac-d622-11e9-95aa-12813bfff9fa
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id aef8b8ac-d622-11e9-95aa-12813bfff9fa;
 Fri, 13 Sep 2019 12:33:26 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 0CED8AB91;
 Fri, 13 Sep 2019 12:33:26 +0000 (UTC)
To: Jan Beulich <jbeulich@suse.com>
References: <20190809145833.1020-1-jgross@suse.com>
 <20190809145833.1020-28-jgross@suse.com>
 <a33b4012-bef8-531f-6ddc-583ec76449a1@suse.com>
From: Juergen Gross <jgross@suse.com>
Message-ID: <4224edef-ad3f-0b32-62e3-be3b90a40e85@suse.com>
Date: Fri, 13 Sep 2019 14:33:25 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <a33b4012-bef8-531f-6ddc-583ec76449a1@suse.com>
Content-Language: de-DE
Subject: Re: [Xen-devel] [PATCH v2 27/48] xen/sched: Change vcpu_migrate_*()
 to operate on schedule unit
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: George Dunlap <george.dunlap@eu.citrix.com>, xen-devel@lists.xenproject.org,
 Dario Faggioli <dfaggioli@suse.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMTAuMDkuMTkgMTc6MTEsIEphbiBCZXVsaWNoIHdyb3RlOgo+IE9uIDA5LjA4LjIwMTkgMTY6
NTgsIEp1ZXJnZW4gR3Jvc3Mgd3JvdGU6Cj4+IC0tLSBhL3hlbi9jb21tb24vc2NoZWR1bGUuYwo+
PiArKysgYi94ZW4vY29tbW9uL3NjaGVkdWxlLmMKPj4gQEAgLTczMywzNSArNzMzLDQwIEBAIHZv
aWQgdmNwdV91bmJsb2NrKHN0cnVjdCB2Y3B1ICp2KQo+PiAgIH0KPj4gICAKPj4gICAvKgo+PiAt
ICogRG8gdGhlIGFjdHVhbCBtb3ZlbWVudCBvZiBhIHZjcHUgZnJvbSBvbGQgdG8gbmV3IENQVS4g
TG9ja3MgZm9yICpib3RoKgo+PiArICogRG8gdGhlIGFjdHVhbCBtb3ZlbWVudCBvZiBhbiB1bml0
IGZyb20gb2xkIHRvIG5ldyBDUFUuIExvY2tzIGZvciAqYm90aCoKPj4gICAgKiBDUFVzIG5lZWRz
IHRvIGhhdmUgYmVlbiB0YWtlbiBhbHJlYWR5IHdoZW4gY2FsbGluZyB0aGlzIQo+PiAgICAqLwo+
PiAtc3RhdGljIHZvaWQgdmNwdV9tb3ZlX2xvY2tlZChzdHJ1Y3QgdmNwdSAqdiwgdW5zaWduZWQg
aW50IG5ld19jcHUpCj4+ICtzdGF0aWMgdm9pZCBzY2hlZF91bml0X21vdmVfbG9ja2VkKHN0cnVj
dCBzY2hlZF91bml0ICp1bml0LAo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1bnNpZ25lZCBpbnQgbmV3X2NwdSkKPj4gICB7Cj4+IC0gICAgdW5zaWduZWQgaW50IG9sZF9j
cHUgPSB2LT5wcm9jZXNzb3I7Cj4+ICsgICAgdW5zaWduZWQgaW50IG9sZF9jcHUgPSB1bml0LT5y
ZXMtPnByb2Nlc3NvcjsKPj4gKyAgICBzdHJ1Y3QgdmNwdSAqdjsKPj4gICAKPj4gICAgICAgLyoK
Pj4gICAgICAgICogVHJhbnNmZXIgdXJnZW5jeSBzdGF0dXMgdG8gbmV3IENQVSBiZWZvcmUgc3dp
dGNoaW5nIENQVXMsIGFzCj4+ICAgICAgICAqIG9uY2UgdGhlIHN3aXRjaCBvY2N1cnMsIHYtPmlz
X3VyZ2VudCBpcyBubyBsb25nZXIgcHJvdGVjdGVkIGJ5Cj4+ICAgICAgICAqIHRoZSBwZXItQ1BV
IHNjaGVkdWxlciBsb2NrIHdlIGFyZSBob2xkaW5nLgo+PiAgICAgICAgKi8KPj4gLSAgICBpZiAo
IHVubGlrZWx5KHYtPmlzX3VyZ2VudCkgJiYgKG9sZF9jcHUgIT0gbmV3X2NwdSkgKQo+PiArICAg
IGZvcl9lYWNoX3NjaGVkX3VuaXRfdmNwdSAoIHVuaXQsIHYgKQo+PiAgICAgICB7Cj4+IC0gICAg
ICAgIGF0b21pY19pbmMoJmdldF9zY2hlZF9yZXMobmV3X2NwdSktPnVyZ2VudF9jb3VudCk7Cj4+
IC0gICAgICAgIGF0b21pY19kZWMoJmdldF9zY2hlZF9yZXMob2xkX2NwdSktPnVyZ2VudF9jb3Vu
dCk7Cj4+ICsgICAgICAgIGlmICggdW5saWtlbHkodi0+aXNfdXJnZW50KSAmJiAob2xkX2NwdSAh
PSBuZXdfY3B1KSApCj4+ICsgICAgICAgIHsKPj4gKyAgICAgICAgICAgIGF0b21pY19pbmMoJmdl
dF9zY2hlZF9yZXMobmV3X2NwdSktPnVyZ2VudF9jb3VudCk7Cj4+ICsgICAgICAgICAgICBhdG9t
aWNfZGVjKCZnZXRfc2NoZWRfcmVzKG9sZF9jcHUpLT51cmdlbnRfY291bnQpOwo+PiArICAgICAg
ICB9Cj4+ICAgICAgIH0KPiAKPiBTaG91bGRuJ3QgaXNfdXJnZW50IGJlY29tZSBhbiBhdHRyaWJ1
dGUgb2YgdW5pdCByYXRoZXIgdGhhbiBhIHZDUFUsCj4gdG9vLCBlbGltaW5hdGluZyB0aGUgbmVl
ZCBmb3IgYSBsb29wIGhlcmU/IEkgY2FuJ3Qgc2VlIGEgcmVhc29uCj4gd2h5IG5vdCwgc2VlaW5n
IHRoaXMgY29sbGFwc2luZyBpbnRvIGEgc2luZ2xlIHVyZ2VudF9jb3VudC4KCldpdGggbW92aW5n
IHVyZ2VudF9jb3VudCB0byBhIHBlcmNwdSB2YXJpYWJsZSB0aGlzIG5vIGxvbmdlciBhcHBsaWVz
LgoKPiAKPiBUaGVuIGFnYWluIHRoZSBxdWVzdGlvbiByZW1haW5zIHdoZXRoZXIgdGhlIG5vbi1k
ZWVwIHNsZWVwaW5nIGFzCj4gYSByZXN1bHQgb2YgYSBub24temVybyB1cmdlbnRfY291bnQgc2hv
dWxkIGluZGVlZCBiZSBkaXN0cmlidXRlZAo+IHRvIGFsbCBjb25zdGl0dWVudHMgb2YgYSB1bml0
LiBJIGNhbiBzZWUgYXJndW1lbnRzIGJvdGggaW4gZmF2b3IKPiBhbmQgYWdhaW5zdC4KCkFnYWlu
c3QgaGFzIHdvbi4gOi0pCgo+IAo+PiAtc3RhdGljIHZvaWQgdmNwdV9taWdyYXRlX2ZpbmlzaChz
dHJ1Y3QgdmNwdSAqdikKPj4gK3N0YXRpYyB2b2lkIHNjaGVkX3VuaXRfbWlncmF0ZV9maW5pc2go
c3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCj4+ICAgewo+PiAgICAgICB1bnNpZ25lZCBsb25nIGZs
YWdzOwo+PiAgICAgICB1bnNpZ25lZCBpbnQgb2xkX2NwdSwgbmV3X2NwdTsKPj4gICAgICAgc3Bp
bmxvY2tfdCAqb2xkX2xvY2ssICpuZXdfbG9jazsKPj4gICAgICAgYm9vbF90IHBpY2tfY2FsbGVk
ID0gMDsKPj4gKyAgICBzdHJ1Y3QgdmNwdSAqdjsKPj4gICAKPj4gICAgICAgLyoKPj4gLSAgICAg
KiBJZiB0aGUgdmNwdSBpcyBjdXJyZW50bHkgcnVubmluZywgdGhpcyB3aWxsIGJlIGhhbmRsZWQg
YnkKPj4gKyAgICAgKiBJZiB0aGUgdW5pdCBpcyBjdXJyZW50bHkgcnVubmluZywgdGhpcyB3aWxs
IGJlIGhhbmRsZWQgYnkKPj4gICAgICAgICogY29udGV4dF9zYXZlZCgpOyBhbmQgaW4gYW55IGNh
c2UsIGlmIHRoZSBiaXQgaXMgY2xlYXJlZCwgdGhlbgo+PiAgICAgICAgKiBzb21lb25lIGVsc2Ug
aGFzIGFscmVhZHkgZG9uZSB0aGUgd29yayBzbyB3ZSBkb24ndCBuZWVkIHRvLgo+PiAgICAgICAg
Ki8KPj4gLSAgICBpZiAoIHYtPnNjaGVkX3VuaXQtPmlzX3J1bm5pbmcgfHwKPj4gLSAgICAgICAg
ICF0ZXN0X2JpdChfVlBGX21pZ3JhdGluZywgJnYtPnBhdXNlX2ZsYWdzKSApCj4+IC0gICAgICAg
IHJldHVybjsKPj4gKyAgICBmb3JfZWFjaF9zY2hlZF91bml0X3ZjcHUgKCB1bml0LCB2ICkKPj4g
KyAgICB7Cj4+ICsgICAgICAgIGlmICggdW5pdC0+aXNfcnVubmluZyB8fCAhdGVzdF9iaXQoX1ZQ
Rl9taWdyYXRpbmcsICZ2LT5wYXVzZV9mbGFncykgKQo+PiArICAgICAgICAgICAgcmV0dXJuOwo+
PiArICAgIH0KPiAKPiBEbyB5b3UgcmVhbGx5IG5lZWQgdGhlIGxvb3AgaW52YXJpYW50IHVuaXQt
PmlzX3J1bm5pbmcgdG8gYmUgZXZhbHVhdGVkCj4gb25jZSBwZXIgbG9vcCBpdGVyYXRpb24/IChT
YW1lIGFnYWluIGZ1cnRoZXIgZG93biBhdCBsZWFzdCBvbmNlLikKCk5vLCBJIHNob3VsZCB0ZXN0
IHRoYXQgYmVmb3JlIGVudGVyaW5nIHRoZSBsb29wLgoKPiAKPiBGdXJ0aGVybW9yZSBJIHdvbmRl
ciBpZiBWUEZfbWlncmF0aW5nIHNob3VsZG4ndCBiZWNvbWUgYSBwZXItdW5pdAo+IGF0dHJpYnV0
ZS4KClRoaXMgd291bGQgbWFrZSB2Y3B1X3J1bm5hYmxlKCkgbXVjaCBtb3JlIGNvbXBsaWNhdGVk
LiBJIGRvbid0IHRoaW5rCnRoYXQgaXMgd29ydGggaXQuCgo+IAo+PiBAQCAtODU4LDIyICs4NzEs
MzAgQEAgc3RhdGljIHZvaWQgdmNwdV9taWdyYXRlX2ZpbmlzaChzdHJ1Y3QgdmNwdSAqdikKPj4g
ICAgICAgICogYmVjYXVzZSB0aGV5IGJvdGggaGFwcGVuIGluIChkaWZmZXJlbnQpIHNwaW5sb2Nr
IHJlZ2lvbnMsIGFuZCB0aG9zZQo+PiAgICAgICAgKiByZWdpb25zIGFyZSBzdHJpY3RseSBzZXJp
YWxpc2VkLgo+PiAgICAgICAgKi8KPj4gLSAgICBpZiAoIHYtPnNjaGVkX3VuaXQtPmlzX3J1bm5p
bmcgfHwKPj4gLSAgICAgICAgICF0ZXN0X2FuZF9jbGVhcl9iaXQoX1ZQRl9taWdyYXRpbmcsICZ2
LT5wYXVzZV9mbGFncykgKQo+PiArICAgIGZvcl9lYWNoX3NjaGVkX3VuaXRfdmNwdSAoIHVuaXQs
IHYgKQo+PiAgICAgICB7Cj4+IC0gICAgICAgIHNjaGVkX3NwaW5fdW5sb2NrX2RvdWJsZShvbGRf
bG9jaywgbmV3X2xvY2ssIGZsYWdzKTsKPj4gLSAgICAgICAgcmV0dXJuOwo+PiArICAgICAgICBp
ZiAoIHVuaXQtPmlzX3J1bm5pbmcgfHwKPj4gKyAgICAgICAgICAgICAhdGVzdF9hbmRfY2xlYXJf
Yml0KF9WUEZfbWlncmF0aW5nLCAmdi0+cGF1c2VfZmxhZ3MpICkKPj4gKyAgICAgICAgewo+PiAr
ICAgICAgICAgICAgc2NoZWRfc3Bpbl91bmxvY2tfZG91YmxlKG9sZF9sb2NrLCBuZXdfbG9jaywg
ZmxhZ3MpOwo+PiArICAgICAgICAgICAgcmV0dXJuOwo+PiArICAgICAgICB9Cj4+ICAgICAgIH0K
Pj4gICAKPj4gLSAgICB2Y3B1X21vdmVfbG9ja2VkKHYsIG5ld19jcHUpOwo+PiArICAgIHNjaGVk
X3VuaXRfbW92ZV9sb2NrZWQodW5pdCwgbmV3X2NwdSk7Cj4+ICAgCj4+ICAgICAgIHNjaGVkX3Nw
aW5fdW5sb2NrX2RvdWJsZShvbGRfbG9jaywgbmV3X2xvY2ssIGZsYWdzKTsKPj4gICAKPj4gICAg
ICAgaWYgKCBvbGRfY3B1ICE9IG5ld19jcHUgKQo+PiAtICAgICAgICBzY2hlZF9tb3ZlX2lycXMo
di0+c2NoZWRfdW5pdCk7Cj4+ICsgICAgewo+PiArICAgICAgICBmb3JfZWFjaF9zY2hlZF91bml0
X3ZjcHUgKCB1bml0LCB2ICkKPj4gKyAgICAgICAgICAgIHN5bmNfdmNwdV9leGVjc3RhdGUodik7
Cj4gCj4gVGhpcyBpcyBuZXcgd2l0aG91dCBiZWluZyBleHBsYWluZWQgYW55d2hlcmUuIE9yIHdh
aXQsIGl0IGlzIG1lbnRpb25lZAo+ICh3aXRoIHRoZSB3cm9uZyBmdW5jdGlvbiBuYW1lLCB3aGlj
aCBpcyB3aHkgaW5pdGlhbGx5IC0gYnkgc2VhcmNoaW5nIC0KPiBJIGRpZG4ndCBzcG90IGl0KSwg
YnV0IG9ubHkgd2l0aCBhIGp1c3RpZmljYXRpb24gb2YgIm5lZWRlZCBhbnl3YXkiLgoKSSdsbCBj
b3JyZWN0IGl0IGFuZCBtYWtlIGl0IG1vcmUgdmVyYm9zZS4KCj4gCj4+IEBAIC0xNzk0LDcgKzE4
MTQsNyBAQCB2b2lkIGNvbnRleHRfc2F2ZWQoc3RydWN0IHZjcHUgKnByZXYpCj4+ICAgCj4+ICAg
ICAgIHNjaGVkX2NvbnRleHRfc2F2ZWQodmNwdV9zY2hlZHVsZXIocHJldiksIHByZXYtPnNjaGVk
X3VuaXQpOwo+PiAgIAo+PiAtICAgIHZjcHVfbWlncmF0ZV9maW5pc2gocHJldik7Cj4+ICsgICAg
c2NoZWRfdW5pdF9taWdyYXRlX2ZpbmlzaChwcmV2LT5zY2hlZF91bml0KTsKPj4gICB9Cj4gCj4g
QnkgdGhlIGVuZCBvZiB0aGUgc2VyaWVzIGNvbnRleHRfc2F2ZWQoKSBzdGlsbCBhY3RzIG9uIHZD
UFUtcywgbm90Cj4gdW5pdHMuIFdoYXQgaXMgdGhlIG1lYW5pbmcvZWZmZWN0IG9mIG11bHRpcGxl
IHNjaGVkX3VuaXRfbWlncmF0ZV8qKCk/CgpUaGF0J3MgY29ycmVjdGVkIGluIFYzIGJ5IGhhdmlu
ZyBzcGxpdCBjb250ZXh0X3NhdmVkKCkgaW50byBhIHZjcHUtIGFuZAphIHVuaXQtcGFydC4KCgpK
dWVyZ2VuCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpY
ZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRw
czovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 1BFD6154575
	for <lists+xen-devel@lfdr.de>; Thu,  6 Feb 2020 14:52:44 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1izhXJ-00056v-Ay; Thu, 06 Feb 2020 13:49:41 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=I8Ts=32=xen.org=wl@srs-us1.protection.inumbo.net>)
 id 1izhXH-00056p-O5
 for xen-devel@lists.xenproject.org; Thu, 06 Feb 2020 13:49:39 +0000
X-Inumbo-ID: 84b36168-48e7-11ea-af8c-12813bfff9fa
Received: from mail.xenproject.org (unknown [104.130.215.37])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 84b36168-48e7-11ea-af8c-12813bfff9fa;
 Thu, 06 Feb 2020 13:49:39 +0000 (UTC)
Received: from xenbits.xenproject.org ([104.239.192.120])
 by mail.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <wl@xen.org>)
 id 1izhXG-0003uV-CF; Thu, 06 Feb 2020 13:49:38 +0000
Received: from 41.142.6.51.dyn.plus.net ([51.6.142.41] helo=debian)
 by xenbits.xenproject.org with esmtpsa
 (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.89)
 (envelope-from <wl@xen.org>)
 id 1izhXG-0000KH-2l; Thu, 06 Feb 2020 13:49:38 +0000
Date: Thu, 6 Feb 2020 13:49:35 +0000
From: Wei Liu <wl@xen.org>
To: Roger Pau Monne <roger.pau@citrix.com>
Message-ID: <20200206134935.x4eonkizd4ybln6r@debian>
References: <20200127181115.82709-1-roger.pau@citrix.com>
 <20200127181115.82709-8-roger.pau@citrix.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20200127181115.82709-8-roger.pau@citrix.com>
User-Agent: NeoMutt/20180716
Subject: Re: [Xen-devel] [PATCH v3 7/7] x86/tlb: use Xen L0 assisted TLB
 flush when available
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: xen-devel@lists.xenproject.org, Wei Liu <wl@xen.org>,
 Jan Beulich <jbeulich@suse.com>, Andrew Cooper <andrew.cooper3@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gTW9uLCBKYW4gMjcsIDIwMjAgYXQgMDc6MTE6MTVQTSArMDEwMCwgUm9nZXIgUGF1IE1vbm5l
IHdyb3RlOgo+IFVzZSBYZW4ncyBMMCBIVk1PUF9mbHVzaF90bGJzIGh5cGVyY2FsbCBpbiBvcmRl
ciB0byBwZXJmb3JtIGZsdXNoZXMuCj4gVGhpcyBncmVhdGx5IGluY3JlYXNlcyB0aGUgcGVyZm9y
bWFuY2Ugb2YgVExCIGZsdXNoZXMgd2hlbiBydW5uaW5nCj4gd2l0aCBhIGhpZ2ggYW1vdW50IG9m
IHZDUFVzIGFzIGEgWGVuIGd1ZXN0LCBhbmQgaXMgc3BlY2lhbGx5IGltcG9ydGFudAo+IHdoZW4g
cnVubmluZyBpbiBzaGltIG1vZGUuCj4gCj4gVGhlIGZvbGxvd2luZyBmaWd1cmVzIGFyZSBmcm9t
IGEgUFYgZ3Vlc3QgcnVubmluZyBgbWFrZSAtajMyIHhlbmAgaW4KPiBzaGltIG1vZGUgd2l0aCAz
MiB2Q1BVcyBhbmQgSEFQLgo+IAo+IFVzaW5nIHgyQVBJQyBhbmQgQUxMQlVUIHNob3J0aGFuZDoK
PiByZWFsCTRtMzUuOTczcwo+IHVzZXIJNG0zNS4xMTBzCj4gc3lzCTM2bTI0LjExN3MKPiAKPiBV
c2luZyBMMCBhc3Npc3RlZCBmbHVzaDoKPiByZWFsICAgIDFtMi41OTZzCj4gdXNlciAgICA0bTM0
LjgxOHMKPiBzeXMgICAgIDVtMTYuMzc0cwo+IAo+IFRoZSBpbXBsZW1lbnRhdGlvbiBhZGRzIGEg
bmV3IGhvb2sgdG8gaHlwZXJ2aXNvcl9vcHMgc28gb3RoZXIKPiBlbmxpZ2h0ZW5tZW50cyBjYW4g
YWxzbyBpbXBsZW1lbnQgc3VjaCBhc3Npc3RlZCBmbHVzaCBqdXN0IGJ5IGZpbGxpbmcKPiB0aGUg
aG9vay4gTm90ZSB0aGF0IHRoZSBYZW4gaW1wbGVtZW50YXRpb24gY29tcGxldGVseSBpZ25vcmVz
IHRoZQo+IGRpcnR5IENQVSBtYXNrIGFuZCB0aGUgbGluZWFyIGFkZHJlc3MgcGFzc2VkIGluLCBh
bmQgYWx3YXlzIHBlcmZvcm1zIGEKPiBnbG9iYWwgVExCIGZsdXNoIG9uIGFsbCB2Q1BVcy4KPiAK
PiBTaWduZWQtb2ZmLWJ5OiBSb2dlciBQYXUgTW9ubsOpIDxyb2dlci5wYXVAY2l0cml4LmNvbT4K
PiAtLS0KPiBDaGFuZ2VzIHNpbmNlIHYxOgo+ICAtIEFkZCBhIEwwIGFzc2lzdGVkIGhvb2sgdG8g
aHlwZXJ2aXNvciBvcHMuCj4gLS0tCj4gIHhlbi9hcmNoL3g4Ni9ndWVzdC9oeXBlcnZpc29yLmMg
ICAgICAgIHwgMTAgKysrKysrKysrKwo+ICB4ZW4vYXJjaC94ODYvZ3Vlc3QveGVuL3hlbi5jICAg
ICAgICAgICB8ICA2ICsrKysrKwo+ICB4ZW4vYXJjaC94ODYvc21wLmMgICAgICAgICAgICAgICAg
ICAgICB8IDExICsrKysrKysrKysrCj4gIHhlbi9pbmNsdWRlL2FzbS14ODYvZ3Vlc3QvaHlwZXJ2
aXNvci5oIHwgMTcgKysrKysrKysrKysrKysrKysKPiAgNCBmaWxlcyBjaGFuZ2VkLCA0NCBpbnNl
cnRpb25zKCspCj4gCj4gZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9ndWVzdC9oeXBlcnZpc29y
LmMgYi94ZW4vYXJjaC94ODYvZ3Vlc3QvaHlwZXJ2aXNvci5jCj4gaW5kZXggNGYyN2I5ODc0MC4u
NDA4NWIxOTczNCAxMDA2NDQKPiAtLS0gYS94ZW4vYXJjaC94ODYvZ3Vlc3QvaHlwZXJ2aXNvci5j
Cj4gKysrIGIveGVuL2FyY2gveDg2L2d1ZXN0L2h5cGVydmlzb3IuYwo+IEBAIC0xOCw2ICsxOCw3
IEBACj4gICAqCj4gICAqIENvcHlyaWdodCAoYykgMjAxOSBNaWNyb3NvZnQuCj4gICAqLwo+ICsj
aW5jbHVkZSA8eGVuL2NwdW1hc2suaD4KPiAgI2luY2x1ZGUgPHhlbi9pbml0Lmg+Cj4gICNpbmNs
dWRlIDx4ZW4vdHlwZXMuaD4KPiAgCj4gQEAgLTY0LDYgKzY1LDE1IEBAIHZvaWQgaHlwZXJ2aXNv
cl9yZXN1bWUodm9pZCkKPiAgICAgICAgICBvcHMtPnJlc3VtZSgpOwo+ICB9Cj4gIAo+ICtpbnQg
aHlwZXJ2aXNvcl9mbHVzaF90bGIoY29uc3QgY3B1bWFza190ICptYXNrLCBjb25zdCB2b2lkICp2
YSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBvcmRlcikKPiArewo+
ICsgICAgaWYgKCBvcHMgJiYgb3BzLT5mbHVzaF90bGIgKQo+ICsgICAgICAgIHJldHVybiBvcHMt
PmZsdXNoX3RsYihtYXNrLCB2YSwgb3JkZXIpOwo+ICsKCklzIHRoZXJlIGEgd2F5IHRvIG1ha2Ug
dGhpcyBhbiBhbHRlcm5hdGl2ZSBjYWxsPyBJIGNvbnNpZGVyIHRsYiBmbHVzaCBhCmZyZXF1ZW50
IG9wZXJhdGlvbiB3aGljaCBjYW4gdXNlIHNvbWUgb3B0aW1pc2F0aW9uLgoKVGhpcyBjYW4gYmUg
ZG9uZSBhcyBhIGxhdGVyIGltcHJvdmVtZW50IGlmIGl0IGlzIHRvbyBkaWZmaWN1bHQgdGhvdWdo
LgpUaGlzIHBhdGNoIGFscmVhZHkgaGFzIHNvbWUgc3Vic3RhbnRpYWwgaW1wcm92ZW1lbnQuCgo+
ICsgICAgcmV0dXJuIC1FTk9TWVM7Cj4gK30KPiArCj4gIC8qCj4gICAqIExvY2FsIHZhcmlhYmxl
czoKPiAgICogbW9kZTogQwo+IGRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvZ3Vlc3QveGVuL3hl
bi5jIGIveGVuL2FyY2gveDg2L2d1ZXN0L3hlbi94ZW4uYwo+IGluZGV4IDZkYmM1Zjk1M2YuLjYz
OWEyYTRiMzIgMTAwNjQ0Cj4gLS0tIGEveGVuL2FyY2gveDg2L2d1ZXN0L3hlbi94ZW4uYwo+ICsr
KyBiL3hlbi9hcmNoL3g4Ni9ndWVzdC94ZW4veGVuLmMKPiBAQCAtMzEwLDExICszMTAsMTcgQEAg
c3RhdGljIHZvaWQgcmVzdW1lKHZvaWQpCj4gICAgICAgICAgcHZfY29uc29sZV9pbml0KCk7Cj4g
IH0KPiAgCj4gK3N0YXRpYyBpbnQgZmx1c2hfdGxiKGNvbnN0IGNwdW1hc2tfdCAqbWFzaywgY29u
c3Qgdm9pZCAqdmEsIHVuc2lnbmVkIGludCBvcmRlcikKPiArewo+ICsgICAgcmV0dXJuIHhlbl9o
eXBlcmNhbGxfaHZtX29wKEhWTU9QX2ZsdXNoX3RsYnMsIE5VTEwpOwo+ICt9Cj4gKwo+ICBzdGF0
aWMgY29uc3Qgc3RydWN0IGh5cGVydmlzb3Jfb3BzIG9wcyA9IHsKPiAgICAgIC5uYW1lID0gIlhl
biIsCj4gICAgICAuc2V0dXAgPSBzZXR1cCwKPiAgICAgIC5hcF9zZXR1cCA9IGFwX3NldHVwLAo+
ICAgICAgLnJlc3VtZSA9IHJlc3VtZSwKPiArICAgIC5mbHVzaF90bGIgPSBmbHVzaF90bGIsCj4g
IH07Cj4gIAo+ICBjb25zdCBzdHJ1Y3QgaHlwZXJ2aXNvcl9vcHMgKl9faW5pdCB4Z19wcm9iZSh2
b2lkKQo+IGRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvc21wLmMgYi94ZW4vYXJjaC94ODYvc21w
LmMKPiBpbmRleCA2NWViN2NiZGE4Li45YmM5MjU2MTZhIDEwMDY0NAo+IC0tLSBhL3hlbi9hcmNo
L3g4Ni9zbXAuYwo+ICsrKyBiL3hlbi9hcmNoL3g4Ni9zbXAuYwo+IEBAIC0xNSw2ICsxNSw3IEBA
Cj4gICNpbmNsdWRlIDx4ZW4vcGVyZmMuaD4KPiAgI2luY2x1ZGUgPHhlbi9zcGlubG9jay5oPgo+
ICAjaW5jbHVkZSA8YXNtL2N1cnJlbnQuaD4KPiArI2luY2x1ZGUgPGFzbS9ndWVzdC5oPgo+ICAj
aW5jbHVkZSA8YXNtL3NtcC5oPgo+ICAjaW5jbHVkZSA8YXNtL21jMTQ2ODE4cnRjLmg+Cj4gICNp
bmNsdWRlIDxhc20vZmx1c2h0bGIuaD4KPiBAQCAtMjU2LDYgKzI1NywxNiBAQCB2b2lkIGZsdXNo
X2FyZWFfbWFzayhjb25zdCBjcHVtYXNrX3QgKm1hc2ssIGNvbnN0IHZvaWQgKnZhLCB1bnNpZ25l
ZCBpbnQgZmxhZ3MpCj4gICAgICBpZiAoIChmbGFncyAmIH5GTFVTSF9PUkRFUl9NQVNLKSAmJgo+
ICAgICAgICAgICAhY3B1bWFza19zdWJzZXQobWFzaywgY3B1bWFza19vZihjcHUpKSApCj4gICAg
ICB7Cj4gKyAgICAgICAgaWYgKCBjcHVfaGFzX2h5cGVydmlzb3IgJiYKPiArICAgICAgICAgICAg
ICEoZmxhZ3MgJiB+KEZMVVNIX1RMQiB8IEZMVVNIX1RMQl9HTE9CQUwgfCBGTFVTSF9WQV9WQUxJ
RCB8Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICBGTFVTSF9PUkRFUl9NQVNLKSkgJiYKPiAr
ICAgICAgICAgICAgICFoeXBlcnZpc29yX2ZsdXNoX3RsYihtYXNrLCB2YSwgZmxhZ3MgJiBGTFVT
SF9PUkRFUl9NQVNLKSApCj4gKyAgICAgICAgewo+ICsgICAgICAgICAgICBpZiAoIHRsYl9jbGtf
ZW5hYmxlZCApCj4gKyAgICAgICAgICAgICAgICB0bGJfY2xrX2VuYWJsZWQgPSBmYWxzZTsKPiAr
ICAgICAgICAgICAgcmV0dXJuOwo+ICsgICAgICAgIH0KPiArCgpQZXIgbXkgdW5kZXJzdGFuZGlu
Zywgbm90IHR1cm5pbmcgdGxiX2Nsa19lbmFibGVkIGJhY2sgdG8gdHJ1ZSBhZnRlciBhbgphc3Np
c3RlZCBmbHVzaCBmYWlscyBpcyBva2F5LCBiZWNhdXNlIHRoZSBlZmZlY3Qgb2YgdGxiX2Nsa19l
bmFibGVkCmJlaW5nIGZhbHNlIGlzIHRvIGFsd2F5cyBtYWtlIE5FRURfRkxVU0ggcmV0dXJuIHRy
dWUuIFRoYXQgY2F1c2VzCmV4Y2Vzc2l2ZSBmbHVzaGluZywgYnV0IGl0IGlzIG9rYXkgaW4gdGVy
bXMgb2YgY29ycmVjdG5lc3MuIERvIEkKdW5kZXJzdGFuZCBpdCBjb3JyZWN0bHk/CgpXZWkuCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwg
bWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3Rz
LnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

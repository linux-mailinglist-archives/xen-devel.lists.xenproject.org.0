Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 284E7130479
	for <lists+xen-devel@lfdr.de>; Sat,  4 Jan 2020 22:04:04 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1inqYB-0003I2-DN; Sat, 04 Jan 2020 21:01:35 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=vM5p=2Z=gmail.com=rosbrookn@srs-us1.protection.inumbo.net>)
 id 1inqY9-0003HX-FA
 for xen-devel@lists.xenproject.org; Sat, 04 Jan 2020 21:01:33 +0000
X-Inumbo-ID: 5cbfff66-2f35-11ea-88e7-bc764e2007e4
Received: from mail-yw1-xc42.google.com (unknown [2607:f8b0:4864:20::c42])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 5cbfff66-2f35-11ea-88e7-bc764e2007e4;
 Sat, 04 Jan 2020 21:01:22 +0000 (UTC)
Received: by mail-yw1-xc42.google.com with SMTP id i190so20186903ywc.2
 for <xen-devel@lists.xenproject.org>; Sat, 04 Jan 2020 13:01:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :in-reply-to:references;
 bh=8uEa99M9x2wXbhHwsjyTaxsFQhy/l7dJJ1L/b7JvTTQ=;
 b=pIqVdiPOtq69gMSnewi5m7PtVmTPuREHyfNFAiMI5GRAhc5N+7K+osHPpIp0eV6WDY
 dVuzL9KQ+qE8qScQkxTJeiYQUEP8pel0dFj6aAEX10/iQ5phqoocj3vEGK5o9YAThQAn
 8wwrRldLX4/OORkZLYJ+KlCNvnzZFJctJ7yi8EDJog3P7ndQA+IAMGJUoLsRSu09p1oo
 h46Mnc+OTt5RHAXuu2CElu3IJQrBHgnm8rnHsCRcSBldBCEYioOAClnxj1RdSXhGVubZ
 Q4TOTNugPq75M8ahdaLtk9eIJIDIyH4X9wRouwkwTCjXMGIZLO8+L5c4HxOsQHrtPQ+J
 Gbqg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:in-reply-to:references;
 bh=8uEa99M9x2wXbhHwsjyTaxsFQhy/l7dJJ1L/b7JvTTQ=;
 b=XeCUO8rbUgpme9dgwhTnHSP7vrwCECWHWBEb3rpbya4S7yZdX1lv4fPJQNx0db5DJH
 W+PUUIkftwfed6eyFRSBaKBzG3yF/oXtXyNUf58I99jSrGwDszaDiICNDGbqgEhLf0Gg
 Ag1cPGRn98wDdTwBSuMGGJLgi9X/Eg6poc3tCj34Pzj8LvW9FPXuWg84IWHUG3Y6tY7P
 IVwzBxbIBWfeWtrdvbdCBQ9eGUyUmY9KJMpkxMrsOuCdZdp9gDrGBAro9w7Zvr6K8jTj
 bMWyYpKguZevVEwOmO7AnbEfjBvnQvsLRmItjNPb0DnpVO69K/pVZ8+SHVyOYhVaf67w
 0TPw==
X-Gm-Message-State: APjAAAUo4kImaVnbTEruWx0DBPMInBd3qiGPIOhN7TF9HzCqzAUgXKs3
 BXzebTcEqtQAng8LTfXwQU5wZ3es
X-Google-Smtp-Source: APXvYqxqi1DuhR4qat4wegzsreBqDvyClcMp6nbzpvbYHia0Ee5tao75rkuq0eaoE0j23q0UuXxhrw==
X-Received: by 2002:a81:6d91:: with SMTP id
 i139mr74255773ywc.401.1578171681459; 
 Sat, 04 Jan 2020 13:01:21 -0800 (PST)
Received: from four.lan (cpe-67-241-56-252.twcny.res.rr.com. [67.241.56.252])
 by smtp.gmail.com with ESMTPSA id
 r10sm26366714ywr.97.2020.01.04.13.01.20
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Sat, 04 Jan 2020 13:01:20 -0800 (PST)
From: Nick Rosbrook <rosbrookn@gmail.com>
X-Google-Original-From: Nick Rosbrook <rosbrookn@ainfosec.com>
To: xen-devel@lists.xenproject.org
Date: Sat,  4 Jan 2020 16:00:53 -0500
Message-Id: <5bf5727f88e00adb9c973e2b884292d369d1b3e9.1578170151.git.rosbrookn@ainfosec.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <cover.1578170151.git.rosbrookn@ainfosec.com>
References: <cover.1578170151.git.rosbrookn@ainfosec.com>
In-Reply-To: <cover.1578170151.git.rosbrookn@ainfosec.com>
References: <cover.1578170151.git.rosbrookn@ainfosec.com>
Subject: [Xen-devel] [PATCH v5 3/3] golang/xenlight: implement array Go to C
 marshaling
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Nick Rosbrook <rosbrookn@ainfosec.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 George Dunlap <george.dunlap@citrix.com>, Wei Liu <wl@xen.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

U2lnbmVkLW9mZi1ieTogTmljayBSb3Nicm9vayA8cm9zYnJvb2tuQGFpbmZvc2VjLmNvbT4KLS0t
CkNoYW5nZXMgaW4gdjU6Ci0gUmVtb3ZlIGRpc3Bvc2VfZm4gZnJvbSBwYXJhbWV0ZXIgbGlzdCBp
biB4ZW5saWdodF9nb2xhbmdfYXJyYXlfdG9fQwogIHNpbmNlIGl0J3Mgbm8gbG9uZ2VyIG5lZWRl
ZC4KLSBVcGRhdGUgY2FsbCB0byB0b0MgZm9yIGVsZW1lbnRzIG9mIGFycmF5cyBvZiBzdHJ1Y3Rz
IHNvIHRoYXQgaXQKICBtYXRjaGVzIHRoZSBuZXcgZnVuY3Rpb24gc2lnbmF0dXJlIG9mIHRvQy4K
LSBEbyBub3QgdHJ5IHRvIG1hcnNoYWwgemVyby1sZW5ndGggYXJyYXlzLgotLS0KIHRvb2xzL2dv
bGFuZy94ZW5saWdodC9nZW5nb3R5cGVzLnB5ICB8ICA0MSArKystCiB0b29scy9nb2xhbmcveGVu
bGlnaHQvaGVscGVycy5nZW4uZ28gfCAzMTEgKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAy
IGZpbGVzIGNoYW5nZWQsIDM1MSBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCgpkaWZmIC0t
Z2l0IGEvdG9vbHMvZ29sYW5nL3hlbmxpZ2h0L2dlbmdvdHlwZXMucHkgYi90b29scy9nb2xhbmcv
eGVubGlnaHQvZ2VuZ290eXBlcy5weQppbmRleCA4YWI2NzY4ZTYxLi4yN2VkZjY2MjQxIDEwMDY0
NAotLS0gYS90b29scy9nb2xhbmcveGVubGlnaHQvZ2VuZ290eXBlcy5weQorKysgYi90b29scy9n
b2xhbmcveGVubGlnaHQvZ2VuZ290eXBlcy5weQpAQCAtNDU0LDcgKzQ1NCw3IEBAIGRlZiB4ZW5s
aWdodF9nb2xhbmdfZGVmaW5lX3RvX0ModHkgPSBOb25lLCB0eXBlbmFtZSA9IE5vbmUsIG5lc3Rl
ZCA9IEZhbHNlKToKICAgICBmb3IgZiBpbiB0eS5maWVsZHM6CiAgICAgICAgIGlmIGYudHlwZS50
eXBlbmFtZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZi50eXBlLCBp
ZGwuQXJyYXkpOgotICAgICAgICAgICAgICAgICMgVE9ETworICAgICAgICAgICAgICAgIGJvZHkg
Kz0geGVubGlnaHRfZ29sYW5nX2FycmF5X3RvX0MoZikKICAgICAgICAgICAgICAgICBjb250aW51
ZQogCiAgICAgICAgICAgICBib2R5ICs9IHhlbmxpZ2h0X2dvbGFuZ19jb252ZXJ0X3RvX0MoZikK
QEAgLTU4MCw2ICs1ODAsNDUgQEAgZGVmIHhlbmxpZ2h0X2dvbGFuZ191bmlvbl90b19DKHR5ID0g
Tm9uZSwgdW5pb25fbmFtZSA9ICcnLAogCiAgICAgcmV0dXJuIHMKIAorZGVmIHhlbmxpZ2h0X2dv
bGFuZ19hcnJheV90b19DKHR5ID0gTm9uZSk6CisgICAgcyA9ICcnCisKKyAgICBnb3R5cGVuYW1l
ID0geGVubGlnaHRfZ29sYW5nX2ZtdF9uYW1lKHR5LnR5cGUuZWxlbV90eXBlLnR5cGVuYW1lKQor
ICAgIGdvbmFtZSAgICAgPSB4ZW5saWdodF9nb2xhbmdfZm10X25hbWUodHkubmFtZSkKKyAgICBj
dHlwZW5hbWUgID0gdHkudHlwZS5lbGVtX3R5cGUudHlwZW5hbWUKKyAgICBjbmFtZSAgICAgID0g
dHkubmFtZQorICAgIGNsZW52YXIgICAgPSB0eS50eXBlLmxlbnZhci5uYW1lCisgICAgZ29sZW52
YXIgICA9IHhlbmxpZ2h0X2dvbGFuZ19mbXRfbmFtZShjbGVudmFyLGV4cG9ydGVkPUZhbHNlKQor
CisgICAgaXNfZW51bSA9IGlzaW5zdGFuY2UodHkudHlwZS5lbGVtX3R5cGUsaWRsLkVudW1lcmF0
aW9uKQorICAgIGlmIGdvdHlwZW5hbWUgaW4gZ29fYnVpbHRpbl90eXBlcyBvciBpc19lbnVtOgor
ICAgICAgICBzICs9ICdpZiB7fSA6PSBsZW4oeC57fSk7IHt9ID4gMCB7e1xuJy5mb3JtYXQoZ29s
ZW52YXIsZ29uYW1lLGdvbGVudmFyKQorICAgICAgICBzICs9ICd4Yy57fSA9ICgqQy57fSkoQy5t
YWxsb2MoQy5zaXplX3Qoe30qe30pKSlcbicuZm9ybWF0KGNuYW1lLGN0eXBlbmFtZSwKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBnb2xlbnZhcixnb2xlbnZhcikKKyAgICAgICAgcyArPSAneGMue30gPSBDLmludCh7fSlc
bicuZm9ybWF0KGNsZW52YXIsZ29sZW52YXIpCisgICAgICAgIHMgKz0gJ2N7fSA6PSAoKlsxPDwy
OF1DLnt9KSh1bnNhZmUuUG9pbnRlcih4Yy57fSkpWzp7fTp7fV1cbicuZm9ybWF0KGdvbmFtZSwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjdHlwZW5hbWUsY25hbWUsCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29sZW52YXIsZ29s
ZW52YXIpCisgICAgICAgIHMgKz0gJ2ZvciBpLHYgOj0gcmFuZ2UgeC57fSB7e1xuJy5mb3JtYXQo
Z29uYW1lKQorICAgICAgICBzICs9ICdje31baV0gPSBDLnt9KHYpXG4nLmZvcm1hdChnb25hbWUs
Y3R5cGVuYW1lKQorICAgICAgICBzICs9ICd9XG59XG4nCisKKyAgICAgICAgcmV0dXJuIHMKKwor
ICAgIHMgKz0gJ2lmIHt9IDo9IGxlbih4Lnt9KTsge30gPiAwIHt7XG4nLmZvcm1hdChnb2xlbnZh
cixnb25hbWUsZ29sZW52YXIpCisgICAgcyArPSAneGMue30gPSAoKkMue30pKEMubWFsbG9jKEMu
dWxvbmcoe30pKkMuc2l6ZW9mX3t9KSlcbicuZm9ybWF0KGNuYW1lLGN0eXBlbmFtZSwKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBnb2xlbnZhcixjdHlwZW5hbWUpCisgICAgcyArPSAneGMue30gPSBDLmludCh7fSlcbicu
Zm9ybWF0KGNsZW52YXIsZ29sZW52YXIpCisgICAgcyArPSAnY3t9IDo9ICgqWzE8PDI4XUMue30p
KHVuc2FmZS5Qb2ludGVyKHhjLnt9KSlbOnt9Ont9XVxuJy5mb3JtYXQoZ29uYW1lLAorICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGN0eXBlbmFtZSxjbmFtZSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb2xlbnZhcixnb2xl
bnZhcikKKyAgICBzICs9ICdmb3IgaSx2IDo9IHJhbmdlIHgue30ge3tcbicuZm9ybWF0KGdvbmFt
ZSkKKyAgICBzICs9ICdpZiBlcnIgOj0gdi50b0MoJmN7fVtpXSk7IGVyciAhPSBuaWwge3tcbicu
Zm9ybWF0KGdvbmFtZSkKKyAgICBzICs9ICdyZXR1cm4gZXJyXG4nCisgICAgcyArPSAnfVxufVxu
fVxuJworCisgICAgcmV0dXJuIHMKKwogZGVmIHhlbmxpZ2h0X2dvbGFuZ19mbXRfbmFtZShuYW1l
LCBleHBvcnRlZCA9IFRydWUpOgogICAgICIiIgogICAgIFRha2UgYSBnaXZlbiB0eXBlIG5hbWUg
YW5kIHJldHVybiBhbgpkaWZmIC0tZ2l0IGEvdG9vbHMvZ29sYW5nL3hlbmxpZ2h0L2hlbHBlcnMu
Z2VuLmdvIGIvdG9vbHMvZ29sYW5nL3hlbmxpZ2h0L2hlbHBlcnMuZ2VuLmdvCmluZGV4IDBiZjJi
MGRkZWYuLmI5YTdlODI4YTAgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2dvbGFuZy94ZW5saWdodC9oZWxw
ZXJzLmdlbi5nbworKysgYi90b29scy9nb2xhbmcveGVubGlnaHQvaGVscGVycy5nZW4uZ28KQEAg
LTY0Myw2ICs2NDMsMTYgQEAgZnVuYyAoeCAqVmNwdVNjaGVkUGFyYW1zKSB0b0MoeGMgKkMubGli
eGxfdmNwdV9zY2hlZF9wYXJhbXMpIChlcnIgZXJyb3IpIHsKIAl9KCkKIAogCXhjLnNjaGVkID0g
Qy5saWJ4bF9zY2hlZHVsZXIoeC5TY2hlZCkKKwlpZiBudW1WY3B1cyA6PSBsZW4oeC5WY3B1cyk7
IG51bVZjcHVzID4gMCB7CisJCXhjLnZjcHVzID0gKCpDLmxpYnhsX3NjaGVkX3BhcmFtcykoQy5t
YWxsb2MoQy51bG9uZyhudW1WY3B1cykgKiBDLnNpemVvZl9saWJ4bF9zY2hlZF9wYXJhbXMpKQor
CQl4Yy5udW1fdmNwdXMgPSBDLmludChudW1WY3B1cykKKwkJY1ZjcHVzIDo9ICgqWzEgPDwgMjhd
Qy5saWJ4bF9zY2hlZF9wYXJhbXMpKHVuc2FmZS5Qb2ludGVyKHhjLnZjcHVzKSlbOm51bVZjcHVz
Om51bVZjcHVzXQorCQlmb3IgaSwgdiA6PSByYW5nZSB4LlZjcHVzIHsKKwkJCWlmIGVyciA6PSB2
LnRvQygmY1ZjcHVzW2ldKTsgZXJyICE9IG5pbCB7CisJCQkJcmV0dXJuIGVycgorCQkJfQorCQl9
CisJfQogCiAJcmV0dXJuIG5pbAogfQpAQCAtNzAzLDYgKzcxMywxNCBAQCBmdW5jICh4ICpWbm9k
ZUluZm8pIHRvQyh4YyAqQy5saWJ4bF92bm9kZV9pbmZvKSAoZXJyIGVycm9yKSB7CiAJfSgpCiAK
IAl4Yy5tZW1rYiA9IEMudWludDY0X3QoeC5NZW1rYikKKwlpZiBudW1EaXN0YW5jZXMgOj0gbGVu
KHguRGlzdGFuY2VzKTsgbnVtRGlzdGFuY2VzID4gMCB7CisJCXhjLmRpc3RhbmNlcyA9ICgqQy51
aW50MzJfdCkoQy5tYWxsb2MoQy5zaXplX3QobnVtRGlzdGFuY2VzICogbnVtRGlzdGFuY2VzKSkp
CisJCXhjLm51bV9kaXN0YW5jZXMgPSBDLmludChudW1EaXN0YW5jZXMpCisJCWNEaXN0YW5jZXMg
Oj0gKCpbMSA8PCAyOF1DLnVpbnQzMl90KSh1bnNhZmUuUG9pbnRlcih4Yy5kaXN0YW5jZXMpKVs6
bnVtRGlzdGFuY2VzOm51bURpc3RhbmNlc10KKwkJZm9yIGksIHYgOj0gcmFuZ2UgeC5EaXN0YW5j
ZXMgeworCQkJY0Rpc3RhbmNlc1tpXSA9IEMudWludDMyX3QodikKKwkJfQorCX0KIAl4Yy5wbm9k
ZSA9IEMudWludDMyX3QoeC5Qbm9kZSkKIAlpZiBlcnIgOj0geC5WY3B1cy50b0MoJnhjLnZjcHVz
KTsgZXJyICE9IG5pbCB7CiAJCXJldHVybiBlcnIKQEAgLTEwNTAsNiArMTA2OCwyNiBAQCBmdW5j
ICh4ICpEb21haW5CdWlsZEluZm8pIHRvQyh4YyAqQy5saWJ4bF9kb21haW5fYnVpbGRfaW5mbykg
KGVyciBlcnJvcikgewogCWlmIGVyciA6PSB4Lk5vZGVtYXAudG9DKCZ4Yy5ub2RlbWFwKTsgZXJy
ICE9IG5pbCB7CiAJCXJldHVybiBlcnIKIAl9CisJaWYgbnVtVmNwdUhhcmRBZmZpbml0eSA6PSBs
ZW4oeC5WY3B1SGFyZEFmZmluaXR5KTsgbnVtVmNwdUhhcmRBZmZpbml0eSA+IDAgeworCQl4Yy52
Y3B1X2hhcmRfYWZmaW5pdHkgPSAoKkMubGlieGxfYml0bWFwKShDLm1hbGxvYyhDLnVsb25nKG51
bVZjcHVIYXJkQWZmaW5pdHkpICogQy5zaXplb2ZfbGlieGxfYml0bWFwKSkKKwkJeGMubnVtX3Zj
cHVfaGFyZF9hZmZpbml0eSA9IEMuaW50KG51bVZjcHVIYXJkQWZmaW5pdHkpCisJCWNWY3B1SGFy
ZEFmZmluaXR5IDo9ICgqWzEgPDwgMjhdQy5saWJ4bF9iaXRtYXApKHVuc2FmZS5Qb2ludGVyKHhj
LnZjcHVfaGFyZF9hZmZpbml0eSkpWzpudW1WY3B1SGFyZEFmZmluaXR5Om51bVZjcHVIYXJkQWZm
aW5pdHldCisJCWZvciBpLCB2IDo9IHJhbmdlIHguVmNwdUhhcmRBZmZpbml0eSB7CisJCQlpZiBl
cnIgOj0gdi50b0MoJmNWY3B1SGFyZEFmZmluaXR5W2ldKTsgZXJyICE9IG5pbCB7CisJCQkJcmV0
dXJuIGVycgorCQkJfQorCQl9CisJfQorCWlmIG51bVZjcHVTb2Z0QWZmaW5pdHkgOj0gbGVuKHgu
VmNwdVNvZnRBZmZpbml0eSk7IG51bVZjcHVTb2Z0QWZmaW5pdHkgPiAwIHsKKwkJeGMudmNwdV9z
b2Z0X2FmZmluaXR5ID0gKCpDLmxpYnhsX2JpdG1hcCkoQy5tYWxsb2MoQy51bG9uZyhudW1WY3B1
U29mdEFmZmluaXR5KSAqIEMuc2l6ZW9mX2xpYnhsX2JpdG1hcCkpCisJCXhjLm51bV92Y3B1X3Nv
ZnRfYWZmaW5pdHkgPSBDLmludChudW1WY3B1U29mdEFmZmluaXR5KQorCQljVmNwdVNvZnRBZmZp
bml0eSA6PSAoKlsxIDw8IDI4XUMubGlieGxfYml0bWFwKSh1bnNhZmUuUG9pbnRlcih4Yy52Y3B1
X3NvZnRfYWZmaW5pdHkpKVs6bnVtVmNwdVNvZnRBZmZpbml0eTpudW1WY3B1U29mdEFmZmluaXR5
XQorCQlmb3IgaSwgdiA6PSByYW5nZSB4LlZjcHVTb2Z0QWZmaW5pdHkgeworCQkJaWYgZXJyIDo9
IHYudG9DKCZjVmNwdVNvZnRBZmZpbml0eVtpXSk7IGVyciAhPSBuaWwgeworCQkJCXJldHVybiBl
cnIKKwkJCX0KKwkJfQorCX0KIAlpZiBlcnIgOj0geC5OdW1hUGxhY2VtZW50LnRvQygmeGMubnVt
YV9wbGFjZW1lbnQpOyBlcnIgIT0gbmlsIHsKIAkJcmV0dXJuIGVycgogCX0KQEAgLTEwNzYsNiAr
MTExNCwxNiBAQCBmdW5jICh4ICpEb21haW5CdWlsZEluZm8pIHRvQyh4YyAqQy5saWJ4bF9kb21h
aW5fYnVpbGRfaW5mbykgKGVyciBlcnJvcikgewogCWlmIHguQmxrZGV2U3RhcnQgIT0gIiIgewog
CQl4Yy5ibGtkZXZfc3RhcnQgPSBDLkNTdHJpbmcoeC5CbGtkZXZTdGFydCkKIAl9CisJaWYgbnVt
Vm51bWFOb2RlcyA6PSBsZW4oeC5WbnVtYU5vZGVzKTsgbnVtVm51bWFOb2RlcyA+IDAgeworCQl4
Yy52bnVtYV9ub2RlcyA9ICgqQy5saWJ4bF92bm9kZV9pbmZvKShDLm1hbGxvYyhDLnVsb25nKG51
bVZudW1hTm9kZXMpICogQy5zaXplb2ZfbGlieGxfdm5vZGVfaW5mbykpCisJCXhjLm51bV92bnVt
YV9ub2RlcyA9IEMuaW50KG51bVZudW1hTm9kZXMpCisJCWNWbnVtYU5vZGVzIDo9ICgqWzEgPDwg
MjhdQy5saWJ4bF92bm9kZV9pbmZvKSh1bnNhZmUuUG9pbnRlcih4Yy52bnVtYV9ub2RlcykpWzpu
dW1WbnVtYU5vZGVzOm51bVZudW1hTm9kZXNdCisJCWZvciBpLCB2IDo9IHJhbmdlIHguVm51bWFO
b2RlcyB7CisJCQlpZiBlcnIgOj0gdi50b0MoJmNWbnVtYU5vZGVzW2ldKTsgZXJyICE9IG5pbCB7
CisJCQkJcmV0dXJuIGVycgorCQkJfQorCQl9CisJfQogCXhjLm1heF9ncmFudF9mcmFtZXMgPSBD
LnVpbnQzMl90KHguTWF4R3JhbnRGcmFtZXMpCiAJeGMubWF4X21hcHRyYWNrX2ZyYW1lcyA9IEMu
dWludDMyX3QoeC5NYXhNYXB0cmFja0ZyYW1lcykKIAl4Yy5kZXZpY2VfbW9kZWxfdmVyc2lvbiA9
IEMubGlieGxfZGV2aWNlX21vZGVsX3ZlcnNpb24oeC5EZXZpY2VNb2RlbFZlcnNpb24pCkBAIC0x
MTA0LDYgKzExNTIsMzQgQEAgZnVuYyAoeCAqRG9tYWluQnVpbGRJbmZvKSB0b0MoeGMgKkMubGli
eGxfZG9tYWluX2J1aWxkX2luZm8pIChlcnIgZXJyb3IpIHsKIAlpZiBlcnIgOj0geC5TY2hlZFBh
cmFtcy50b0MoJnhjLnNjaGVkX3BhcmFtcyk7IGVyciAhPSBuaWwgewogCQlyZXR1cm4gZXJyCiAJ
fQorCWlmIG51bUlvcG9ydHMgOj0gbGVuKHguSW9wb3J0cyk7IG51bUlvcG9ydHMgPiAwIHsKKwkJ
eGMuaW9wb3J0cyA9ICgqQy5saWJ4bF9pb3BvcnRfcmFuZ2UpKEMubWFsbG9jKEMudWxvbmcobnVt
SW9wb3J0cykgKiBDLnNpemVvZl9saWJ4bF9pb3BvcnRfcmFuZ2UpKQorCQl4Yy5udW1faW9wb3J0
cyA9IEMuaW50KG51bUlvcG9ydHMpCisJCWNJb3BvcnRzIDo9ICgqWzEgPDwgMjhdQy5saWJ4bF9p
b3BvcnRfcmFuZ2UpKHVuc2FmZS5Qb2ludGVyKHhjLmlvcG9ydHMpKVs6bnVtSW9wb3J0czpudW1J
b3BvcnRzXQorCQlmb3IgaSwgdiA6PSByYW5nZSB4LklvcG9ydHMgeworCQkJaWYgZXJyIDo9IHYu
dG9DKCZjSW9wb3J0c1tpXSk7IGVyciAhPSBuaWwgeworCQkJCXJldHVybiBlcnIKKwkJCX0KKwkJ
fQorCX0KKwlpZiBudW1JcnFzIDo9IGxlbih4LklycXMpOyBudW1JcnFzID4gMCB7CisJCXhjLmly
cXMgPSAoKkMudWludDMyX3QpKEMubWFsbG9jKEMuc2l6ZV90KG51bUlycXMgKiBudW1JcnFzKSkp
CisJCXhjLm51bV9pcnFzID0gQy5pbnQobnVtSXJxcykKKwkJY0lycXMgOj0gKCpbMSA8PCAyOF1D
LnVpbnQzMl90KSh1bnNhZmUuUG9pbnRlcih4Yy5pcnFzKSlbOm51bUlycXM6bnVtSXJxc10KKwkJ
Zm9yIGksIHYgOj0gcmFuZ2UgeC5JcnFzIHsKKwkJCWNJcnFzW2ldID0gQy51aW50MzJfdCh2KQor
CQl9CisJfQorCWlmIG51bUlvbWVtIDo9IGxlbih4LklvbWVtKTsgbnVtSW9tZW0gPiAwIHsKKwkJ
eGMuaW9tZW0gPSAoKkMubGlieGxfaW9tZW1fcmFuZ2UpKEMubWFsbG9jKEMudWxvbmcobnVtSW9t
ZW0pICogQy5zaXplb2ZfbGlieGxfaW9tZW1fcmFuZ2UpKQorCQl4Yy5udW1faW9tZW0gPSBDLmlu
dChudW1Jb21lbSkKKwkJY0lvbWVtIDo9ICgqWzEgPDwgMjhdQy5saWJ4bF9pb21lbV9yYW5nZSko
dW5zYWZlLlBvaW50ZXIoeGMuaW9tZW0pKVs6bnVtSW9tZW06bnVtSW9tZW1dCisJCWZvciBpLCB2
IDo9IHJhbmdlIHguSW9tZW0geworCQkJaWYgZXJyIDo9IHYudG9DKCZjSW9tZW1baV0pOyBlcnIg
IT0gbmlsIHsKKwkJCQlyZXR1cm4gZXJyCisJCQl9CisJCX0KKwl9CiAJaWYgZXJyIDo9IHguQ2xh
aW1Nb2RlLnRvQygmeGMuY2xhaW1fbW9kZSk7IGVyciAhPSBuaWwgewogCQlyZXR1cm4gZXJyCiAJ
fQpAQCAtMjEzNiw2ICsyMjEyLDE2IEBAIGZ1bmMgKHggKkRldmljZVZkaXNwbCkgdG9DKHhjICpD
LmxpYnhsX2RldmljZV92ZGlzcGwpIChlcnIgZXJyb3IpIHsKIAl9CiAJeGMuZGV2aWQgPSBDLmxp
YnhsX2RldmlkKHguRGV2aWQpCiAJeGMuYmVfYWxsb2MgPSBDLmJvb2woeC5CZUFsbG9jKQorCWlm
IG51bUNvbm5lY3RvcnMgOj0gbGVuKHguQ29ubmVjdG9ycyk7IG51bUNvbm5lY3RvcnMgPiAwIHsK
KwkJeGMuY29ubmVjdG9ycyA9ICgqQy5saWJ4bF9jb25uZWN0b3JfcGFyYW0pKEMubWFsbG9jKEMu
dWxvbmcobnVtQ29ubmVjdG9ycykgKiBDLnNpemVvZl9saWJ4bF9jb25uZWN0b3JfcGFyYW0pKQor
CQl4Yy5udW1fY29ubmVjdG9ycyA9IEMuaW50KG51bUNvbm5lY3RvcnMpCisJCWNDb25uZWN0b3Jz
IDo9ICgqWzEgPDwgMjhdQy5saWJ4bF9jb25uZWN0b3JfcGFyYW0pKHVuc2FmZS5Qb2ludGVyKHhj
LmNvbm5lY3RvcnMpKVs6bnVtQ29ubmVjdG9yczpudW1Db25uZWN0b3JzXQorCQlmb3IgaSwgdiA6
PSByYW5nZSB4LkNvbm5lY3RvcnMgeworCQkJaWYgZXJyIDo9IHYudG9DKCZjQ29ubmVjdG9yc1tp
XSk7IGVyciAhPSBuaWwgeworCQkJCXJldHVybiBlcnIKKwkJCX0KKwkJfQorCX0KIAogCXJldHVy
biBuaWwKIH0KQEAgLTIxNjcsNiArMjI1MywyMiBAQCBmdW5jICh4ICpWc25kUGFyYW1zKSB0b0Mo
eGMgKkMubGlieGxfdnNuZF9wYXJhbXMpIChlcnIgZXJyb3IpIHsKIAkJfQogCX0oKQogCisJaWYg
bnVtU2FtcGxlUmF0ZXMgOj0gbGVuKHguU2FtcGxlUmF0ZXMpOyBudW1TYW1wbGVSYXRlcyA+IDAg
eworCQl4Yy5zYW1wbGVfcmF0ZXMgPSAoKkMudWludDMyX3QpKEMubWFsbG9jKEMuc2l6ZV90KG51
bVNhbXBsZVJhdGVzICogbnVtU2FtcGxlUmF0ZXMpKSkKKwkJeGMubnVtX3NhbXBsZV9yYXRlcyA9
IEMuaW50KG51bVNhbXBsZVJhdGVzKQorCQljU2FtcGxlUmF0ZXMgOj0gKCpbMSA8PCAyOF1DLnVp
bnQzMl90KSh1bnNhZmUuUG9pbnRlcih4Yy5zYW1wbGVfcmF0ZXMpKVs6bnVtU2FtcGxlUmF0ZXM6
bnVtU2FtcGxlUmF0ZXNdCisJCWZvciBpLCB2IDo9IHJhbmdlIHguU2FtcGxlUmF0ZXMgeworCQkJ
Y1NhbXBsZVJhdGVzW2ldID0gQy51aW50MzJfdCh2KQorCQl9CisJfQorCWlmIG51bVNhbXBsZUZv
cm1hdHMgOj0gbGVuKHguU2FtcGxlRm9ybWF0cyk7IG51bVNhbXBsZUZvcm1hdHMgPiAwIHsKKwkJ
eGMuc2FtcGxlX2Zvcm1hdHMgPSAoKkMubGlieGxfdnNuZF9wY21fZm9ybWF0KShDLm1hbGxvYyhD
LnNpemVfdChudW1TYW1wbGVGb3JtYXRzICogbnVtU2FtcGxlRm9ybWF0cykpKQorCQl4Yy5udW1f
c2FtcGxlX2Zvcm1hdHMgPSBDLmludChudW1TYW1wbGVGb3JtYXRzKQorCQljU2FtcGxlRm9ybWF0
cyA6PSAoKlsxIDw8IDI4XUMubGlieGxfdnNuZF9wY21fZm9ybWF0KSh1bnNhZmUuUG9pbnRlcih4
Yy5zYW1wbGVfZm9ybWF0cykpWzpudW1TYW1wbGVGb3JtYXRzOm51bVNhbXBsZUZvcm1hdHNdCisJ
CWZvciBpLCB2IDo9IHJhbmdlIHguU2FtcGxlRm9ybWF0cyB7CisJCQljU2FtcGxlRm9ybWF0c1tp
XSA9IEMubGlieGxfdnNuZF9wY21fZm9ybWF0KHYpCisJCX0KKwl9CiAJeGMuY2hhbm5lbHNfbWlu
ID0gQy51aW50MzJfdCh4LkNoYW5uZWxzTWluKQogCXhjLmNoYW5uZWxzX21heCA9IEMudWludDMy
X3QoeC5DaGFubmVsc01heCkKIAl4Yy5idWZmZXJfc2l6ZSA9IEMudWludDMyX3QoeC5CdWZmZXJT
aXplKQpAQCAtMjIzMiw2ICsyMzM0LDE2IEBAIGZ1bmMgKHggKlZzbmRQY20pIHRvQyh4YyAqQy5s
aWJ4bF92c25kX3BjbSkgKGVyciBlcnJvcikgewogCWlmIGVyciA6PSB4LlBhcmFtcy50b0MoJnhj
LnBhcmFtcyk7IGVyciAhPSBuaWwgewogCQlyZXR1cm4gZXJyCiAJfQorCWlmIG51bVZzbmRTdHJl
YW1zIDo9IGxlbih4LlN0cmVhbXMpOyBudW1Wc25kU3RyZWFtcyA+IDAgeworCQl4Yy5zdHJlYW1z
ID0gKCpDLmxpYnhsX3ZzbmRfc3RyZWFtKShDLm1hbGxvYyhDLnVsb25nKG51bVZzbmRTdHJlYW1z
KSAqIEMuc2l6ZW9mX2xpYnhsX3ZzbmRfc3RyZWFtKSkKKwkJeGMubnVtX3ZzbmRfc3RyZWFtcyA9
IEMuaW50KG51bVZzbmRTdHJlYW1zKQorCQljU3RyZWFtcyA6PSAoKlsxIDw8IDI4XUMubGlieGxf
dnNuZF9zdHJlYW0pKHVuc2FmZS5Qb2ludGVyKHhjLnN0cmVhbXMpKVs6bnVtVnNuZFN0cmVhbXM6
bnVtVnNuZFN0cmVhbXNdCisJCWZvciBpLCB2IDo9IHJhbmdlIHguU3RyZWFtcyB7CisJCQlpZiBl
cnIgOj0gdi50b0MoJmNTdHJlYW1zW2ldKTsgZXJyICE9IG5pbCB7CisJCQkJcmV0dXJuIGVycgor
CQkJfQorCQl9CisJfQogCiAJcmV0dXJuIG5pbAogfQpAQCAtMjI3OCw2ICsyMzkwLDE2IEBAIGZ1
bmMgKHggKkRldmljZVZzbmQpIHRvQyh4YyAqQy5saWJ4bF9kZXZpY2VfdnNuZCkgKGVyciBlcnJv
cikgewogCWlmIGVyciA6PSB4LlBhcmFtcy50b0MoJnhjLnBhcmFtcyk7IGVyciAhPSBuaWwgewog
CQlyZXR1cm4gZXJyCiAJfQorCWlmIG51bVZzbmRQY21zIDo9IGxlbih4LlBjbXMpOyBudW1Wc25k
UGNtcyA+IDAgeworCQl4Yy5wY21zID0gKCpDLmxpYnhsX3ZzbmRfcGNtKShDLm1hbGxvYyhDLnVs
b25nKG51bVZzbmRQY21zKSAqIEMuc2l6ZW9mX2xpYnhsX3ZzbmRfcGNtKSkKKwkJeGMubnVtX3Zz
bmRfcGNtcyA9IEMuaW50KG51bVZzbmRQY21zKQorCQljUGNtcyA6PSAoKlsxIDw8IDI4XUMubGli
eGxfdnNuZF9wY20pKHVuc2FmZS5Qb2ludGVyKHhjLnBjbXMpKVs6bnVtVnNuZFBjbXM6bnVtVnNu
ZFBjbXNdCisJCWZvciBpLCB2IDo9IHJhbmdlIHguUGNtcyB7CisJCQlpZiBlcnIgOj0gdi50b0Mo
JmNQY21zW2ldKTsgZXJyICE9IG5pbCB7CisJCQkJcmV0dXJuIGVycgorCQkJfQorCQl9CisJfQog
CiAJcmV0dXJuIG5pbAogfQpAQCAtMjQzMSw2ICsyNTUzLDE1NiBAQCBmdW5jICh4ICpEb21haW5D
b25maWcpIHRvQyh4YyAqQy5saWJ4bF9kb21haW5fY29uZmlnKSAoZXJyIGVycm9yKSB7CiAJaWYg
ZXJyIDo9IHguQkluZm8udG9DKCZ4Yy5iX2luZm8pOyBlcnIgIT0gbmlsIHsKIAkJcmV0dXJuIGVy
cgogCX0KKwlpZiBudW1EaXNrcyA6PSBsZW4oeC5EaXNrcyk7IG51bURpc2tzID4gMCB7CisJCXhj
LmRpc2tzID0gKCpDLmxpYnhsX2RldmljZV9kaXNrKShDLm1hbGxvYyhDLnVsb25nKG51bURpc2tz
KSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV9kaXNrKSkKKwkJeGMubnVtX2Rpc2tzID0gQy5pbnQo
bnVtRGlza3MpCisJCWNEaXNrcyA6PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX2Rpc2spKHVu
c2FmZS5Qb2ludGVyKHhjLmRpc2tzKSlbOm51bURpc2tzOm51bURpc2tzXQorCQlmb3IgaSwgdiA6
PSByYW5nZSB4LkRpc2tzIHsKKwkJCWlmIGVyciA6PSB2LnRvQygmY0Rpc2tzW2ldKTsgZXJyICE9
IG5pbCB7CisJCQkJcmV0dXJuIGVycgorCQkJfQorCQl9CisJfQorCWlmIG51bU5pY3MgOj0gbGVu
KHguTmljcyk7IG51bU5pY3MgPiAwIHsKKwkJeGMubmljcyA9ICgqQy5saWJ4bF9kZXZpY2Vfbmlj
KShDLm1hbGxvYyhDLnVsb25nKG51bU5pY3MpICogQy5zaXplb2ZfbGlieGxfZGV2aWNlX25pYykp
CisJCXhjLm51bV9uaWNzID0gQy5pbnQobnVtTmljcykKKwkJY05pY3MgOj0gKCpbMSA8PCAyOF1D
LmxpYnhsX2RldmljZV9uaWMpKHVuc2FmZS5Qb2ludGVyKHhjLm5pY3MpKVs6bnVtTmljczpudW1O
aWNzXQorCQlmb3IgaSwgdiA6PSByYW5nZSB4Lk5pY3MgeworCQkJaWYgZXJyIDo9IHYudG9DKCZj
Tmljc1tpXSk7IGVyciAhPSBuaWwgeworCQkJCXJldHVybiBlcnIKKwkJCX0KKwkJfQorCX0KKwlp
ZiBudW1QY2lkZXZzIDo9IGxlbih4LlBjaWRldnMpOyBudW1QY2lkZXZzID4gMCB7CisJCXhjLnBj
aWRldnMgPSAoKkMubGlieGxfZGV2aWNlX3BjaSkoQy5tYWxsb2MoQy51bG9uZyhudW1QY2lkZXZz
KSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV9wY2kpKQorCQl4Yy5udW1fcGNpZGV2cyA9IEMuaW50
KG51bVBjaWRldnMpCisJCWNQY2lkZXZzIDo9ICgqWzEgPDwgMjhdQy5saWJ4bF9kZXZpY2VfcGNp
KSh1bnNhZmUuUG9pbnRlcih4Yy5wY2lkZXZzKSlbOm51bVBjaWRldnM6bnVtUGNpZGV2c10KKwkJ
Zm9yIGksIHYgOj0gcmFuZ2UgeC5QY2lkZXZzIHsKKwkJCWlmIGVyciA6PSB2LnRvQygmY1BjaWRl
dnNbaV0pOyBlcnIgIT0gbmlsIHsKKwkJCQlyZXR1cm4gZXJyCisJCQl9CisJCX0KKwl9CisJaWYg
bnVtUmRtcyA6PSBsZW4oeC5SZG1zKTsgbnVtUmRtcyA+IDAgeworCQl4Yy5yZG1zID0gKCpDLmxp
YnhsX2RldmljZV9yZG0pKEMubWFsbG9jKEMudWxvbmcobnVtUmRtcykgKiBDLnNpemVvZl9saWJ4
bF9kZXZpY2VfcmRtKSkKKwkJeGMubnVtX3JkbXMgPSBDLmludChudW1SZG1zKQorCQljUmRtcyA6
PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX3JkbSkodW5zYWZlLlBvaW50ZXIoeGMucmRtcykp
WzpudW1SZG1zOm51bVJkbXNdCisJCWZvciBpLCB2IDo9IHJhbmdlIHguUmRtcyB7CisJCQlpZiBl
cnIgOj0gdi50b0MoJmNSZG1zW2ldKTsgZXJyICE9IG5pbCB7CisJCQkJcmV0dXJuIGVycgorCQkJ
fQorCQl9CisJfQorCWlmIG51bUR0ZGV2cyA6PSBsZW4oeC5EdGRldnMpOyBudW1EdGRldnMgPiAw
IHsKKwkJeGMuZHRkZXZzID0gKCpDLmxpYnhsX2RldmljZV9kdGRldikoQy5tYWxsb2MoQy51bG9u
ZyhudW1EdGRldnMpICogQy5zaXplb2ZfbGlieGxfZGV2aWNlX2R0ZGV2KSkKKwkJeGMubnVtX2R0
ZGV2cyA9IEMuaW50KG51bUR0ZGV2cykKKwkJY0R0ZGV2cyA6PSAoKlsxIDw8IDI4XUMubGlieGxf
ZGV2aWNlX2R0ZGV2KSh1bnNhZmUuUG9pbnRlcih4Yy5kdGRldnMpKVs6bnVtRHRkZXZzOm51bUR0
ZGV2c10KKwkJZm9yIGksIHYgOj0gcmFuZ2UgeC5EdGRldnMgeworCQkJaWYgZXJyIDo9IHYudG9D
KCZjRHRkZXZzW2ldKTsgZXJyICE9IG5pbCB7CisJCQkJcmV0dXJuIGVycgorCQkJfQorCQl9CisJ
fQorCWlmIG51bVZmYnMgOj0gbGVuKHguVmZicyk7IG51bVZmYnMgPiAwIHsKKwkJeGMudmZicyA9
ICgqQy5saWJ4bF9kZXZpY2VfdmZiKShDLm1hbGxvYyhDLnVsb25nKG51bVZmYnMpICogQy5zaXpl
b2ZfbGlieGxfZGV2aWNlX3ZmYikpCisJCXhjLm51bV92ZmJzID0gQy5pbnQobnVtVmZicykKKwkJ
Y1ZmYnMgOj0gKCpbMSA8PCAyOF1DLmxpYnhsX2RldmljZV92ZmIpKHVuc2FmZS5Qb2ludGVyKHhj
LnZmYnMpKVs6bnVtVmZiczpudW1WZmJzXQorCQlmb3IgaSwgdiA6PSByYW5nZSB4LlZmYnMgewor
CQkJaWYgZXJyIDo9IHYudG9DKCZjVmZic1tpXSk7IGVyciAhPSBuaWwgeworCQkJCXJldHVybiBl
cnIKKwkJCX0KKwkJfQorCX0KKwlpZiBudW1Wa2JzIDo9IGxlbih4LlZrYnMpOyBudW1Wa2JzID4g
MCB7CisJCXhjLnZrYnMgPSAoKkMubGlieGxfZGV2aWNlX3ZrYikoQy5tYWxsb2MoQy51bG9uZyhu
dW1Wa2JzKSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV92a2IpKQorCQl4Yy5udW1fdmticyA9IEMu
aW50KG51bVZrYnMpCisJCWNWa2JzIDo9ICgqWzEgPDwgMjhdQy5saWJ4bF9kZXZpY2VfdmtiKSh1
bnNhZmUuUG9pbnRlcih4Yy52a2JzKSlbOm51bVZrYnM6bnVtVmtic10KKwkJZm9yIGksIHYgOj0g
cmFuZ2UgeC5Wa2JzIHsKKwkJCWlmIGVyciA6PSB2LnRvQygmY1ZrYnNbaV0pOyBlcnIgIT0gbmls
IHsKKwkJCQlyZXR1cm4gZXJyCisJCQl9CisJCX0KKwl9CisJaWYgbnVtVnRwbXMgOj0gbGVuKHgu
VnRwbXMpOyBudW1WdHBtcyA+IDAgeworCQl4Yy52dHBtcyA9ICgqQy5saWJ4bF9kZXZpY2VfdnRw
bSkoQy5tYWxsb2MoQy51bG9uZyhudW1WdHBtcykgKiBDLnNpemVvZl9saWJ4bF9kZXZpY2VfdnRw
bSkpCisJCXhjLm51bV92dHBtcyA9IEMuaW50KG51bVZ0cG1zKQorCQljVnRwbXMgOj0gKCpbMSA8
PCAyOF1DLmxpYnhsX2RldmljZV92dHBtKSh1bnNhZmUuUG9pbnRlcih4Yy52dHBtcykpWzpudW1W
dHBtczpudW1WdHBtc10KKwkJZm9yIGksIHYgOj0gcmFuZ2UgeC5WdHBtcyB7CisJCQlpZiBlcnIg
Oj0gdi50b0MoJmNWdHBtc1tpXSk7IGVyciAhPSBuaWwgeworCQkJCXJldHVybiBlcnIKKwkJCX0K
KwkJfQorCX0KKwlpZiBudW1QOVMgOj0gbGVuKHguUDlTKTsgbnVtUDlTID4gMCB7CisJCXhjLnA5
cyA9ICgqQy5saWJ4bF9kZXZpY2VfcDkpKEMubWFsbG9jKEMudWxvbmcobnVtUDlTKSAqIEMuc2l6
ZW9mX2xpYnhsX2RldmljZV9wOSkpCisJCXhjLm51bV9wOXMgPSBDLmludChudW1QOVMpCisJCWNQ
OVMgOj0gKCpbMSA8PCAyOF1DLmxpYnhsX2RldmljZV9wOSkodW5zYWZlLlBvaW50ZXIoeGMucDlz
KSlbOm51bVA5UzpudW1QOVNdCisJCWZvciBpLCB2IDo9IHJhbmdlIHguUDlTIHsKKwkJCWlmIGVy
ciA6PSB2LnRvQygmY1A5U1tpXSk7IGVyciAhPSBuaWwgeworCQkJCXJldHVybiBlcnIKKwkJCX0K
KwkJfQorCX0KKwlpZiBudW1QdmNhbGxzaWZzIDo9IGxlbih4LlB2Y2FsbHNpZnMpOyBudW1QdmNh
bGxzaWZzID4gMCB7CisJCXhjLnB2Y2FsbHNpZnMgPSAoKkMubGlieGxfZGV2aWNlX3B2Y2FsbHNp
ZikoQy5tYWxsb2MoQy51bG9uZyhudW1QdmNhbGxzaWZzKSAqIEMuc2l6ZW9mX2xpYnhsX2Rldmlj
ZV9wdmNhbGxzaWYpKQorCQl4Yy5udW1fcHZjYWxsc2lmcyA9IEMuaW50KG51bVB2Y2FsbHNpZnMp
CisJCWNQdmNhbGxzaWZzIDo9ICgqWzEgPDwgMjhdQy5saWJ4bF9kZXZpY2VfcHZjYWxsc2lmKSh1
bnNhZmUuUG9pbnRlcih4Yy5wdmNhbGxzaWZzKSlbOm51bVB2Y2FsbHNpZnM6bnVtUHZjYWxsc2lm
c10KKwkJZm9yIGksIHYgOj0gcmFuZ2UgeC5QdmNhbGxzaWZzIHsKKwkJCWlmIGVyciA6PSB2LnRv
QygmY1B2Y2FsbHNpZnNbaV0pOyBlcnIgIT0gbmlsIHsKKwkJCQlyZXR1cm4gZXJyCisJCQl9CisJ
CX0KKwl9CisJaWYgbnVtVmRpc3BscyA6PSBsZW4oeC5WZGlzcGxzKTsgbnVtVmRpc3BscyA+IDAg
eworCQl4Yy52ZGlzcGxzID0gKCpDLmxpYnhsX2RldmljZV92ZGlzcGwpKEMubWFsbG9jKEMudWxv
bmcobnVtVmRpc3BscykgKiBDLnNpemVvZl9saWJ4bF9kZXZpY2VfdmRpc3BsKSkKKwkJeGMubnVt
X3ZkaXNwbHMgPSBDLmludChudW1WZGlzcGxzKQorCQljVmRpc3BscyA6PSAoKlsxIDw8IDI4XUMu
bGlieGxfZGV2aWNlX3ZkaXNwbCkodW5zYWZlLlBvaW50ZXIoeGMudmRpc3BscykpWzpudW1WZGlz
cGxzOm51bVZkaXNwbHNdCisJCWZvciBpLCB2IDo9IHJhbmdlIHguVmRpc3BscyB7CisJCQlpZiBl
cnIgOj0gdi50b0MoJmNWZGlzcGxzW2ldKTsgZXJyICE9IG5pbCB7CisJCQkJcmV0dXJuIGVycgor
CQkJfQorCQl9CisJfQorCWlmIG51bVZzbmRzIDo9IGxlbih4LlZzbmRzKTsgbnVtVnNuZHMgPiAw
IHsKKwkJeGMudnNuZHMgPSAoKkMubGlieGxfZGV2aWNlX3ZzbmQpKEMubWFsbG9jKEMudWxvbmco
bnVtVnNuZHMpICogQy5zaXplb2ZfbGlieGxfZGV2aWNlX3ZzbmQpKQorCQl4Yy5udW1fdnNuZHMg
PSBDLmludChudW1Wc25kcykKKwkJY1ZzbmRzIDo9ICgqWzEgPDwgMjhdQy5saWJ4bF9kZXZpY2Vf
dnNuZCkodW5zYWZlLlBvaW50ZXIoeGMudnNuZHMpKVs6bnVtVnNuZHM6bnVtVnNuZHNdCisJCWZv
ciBpLCB2IDo9IHJhbmdlIHguVnNuZHMgeworCQkJaWYgZXJyIDo9IHYudG9DKCZjVnNuZHNbaV0p
OyBlcnIgIT0gbmlsIHsKKwkJCQlyZXR1cm4gZXJyCisJCQl9CisJCX0KKwl9CisJaWYgbnVtQ2hh
bm5lbHMgOj0gbGVuKHguQ2hhbm5lbHMpOyBudW1DaGFubmVscyA+IDAgeworCQl4Yy5jaGFubmVs
cyA9ICgqQy5saWJ4bF9kZXZpY2VfY2hhbm5lbCkoQy5tYWxsb2MoQy51bG9uZyhudW1DaGFubmVs
cykgKiBDLnNpemVvZl9saWJ4bF9kZXZpY2VfY2hhbm5lbCkpCisJCXhjLm51bV9jaGFubmVscyA9
IEMuaW50KG51bUNoYW5uZWxzKQorCQljQ2hhbm5lbHMgOj0gKCpbMSA8PCAyOF1DLmxpYnhsX2Rl
dmljZV9jaGFubmVsKSh1bnNhZmUuUG9pbnRlcih4Yy5jaGFubmVscykpWzpudW1DaGFubmVsczpu
dW1DaGFubmVsc10KKwkJZm9yIGksIHYgOj0gcmFuZ2UgeC5DaGFubmVscyB7CisJCQlpZiBlcnIg
Oj0gdi50b0MoJmNDaGFubmVsc1tpXSk7IGVyciAhPSBuaWwgeworCQkJCXJldHVybiBlcnIKKwkJ
CX0KKwkJfQorCX0KKwlpZiBudW1Vc2JjdHJscyA6PSBsZW4oeC5Vc2JjdHJscyk7IG51bVVzYmN0
cmxzID4gMCB7CisJCXhjLnVzYmN0cmxzID0gKCpDLmxpYnhsX2RldmljZV91c2JjdHJsKShDLm1h
bGxvYyhDLnVsb25nKG51bVVzYmN0cmxzKSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV91c2JjdHJs
KSkKKwkJeGMubnVtX3VzYmN0cmxzID0gQy5pbnQobnVtVXNiY3RybHMpCisJCWNVc2JjdHJscyA6
PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX3VzYmN0cmwpKHVuc2FmZS5Qb2ludGVyKHhjLnVz
YmN0cmxzKSlbOm51bVVzYmN0cmxzOm51bVVzYmN0cmxzXQorCQlmb3IgaSwgdiA6PSByYW5nZSB4
LlVzYmN0cmxzIHsKKwkJCWlmIGVyciA6PSB2LnRvQygmY1VzYmN0cmxzW2ldKTsgZXJyICE9IG5p
bCB7CisJCQkJcmV0dXJuIGVycgorCQkJfQorCQl9CisJfQorCWlmIG51bVVzYmRldnMgOj0gbGVu
KHguVXNiZGV2cyk7IG51bVVzYmRldnMgPiAwIHsKKwkJeGMudXNiZGV2cyA9ICgqQy5saWJ4bF9k
ZXZpY2VfdXNiZGV2KShDLm1hbGxvYyhDLnVsb25nKG51bVVzYmRldnMpICogQy5zaXplb2ZfbGli
eGxfZGV2aWNlX3VzYmRldikpCisJCXhjLm51bV91c2JkZXZzID0gQy5pbnQobnVtVXNiZGV2cykK
KwkJY1VzYmRldnMgOj0gKCpbMSA8PCAyOF1DLmxpYnhsX2RldmljZV91c2JkZXYpKHVuc2FmZS5Q
b2ludGVyKHhjLnVzYmRldnMpKVs6bnVtVXNiZGV2czpudW1Vc2JkZXZzXQorCQlmb3IgaSwgdiA6
PSByYW5nZSB4LlVzYmRldnMgeworCQkJaWYgZXJyIDo9IHYudG9DKCZjVXNiZGV2c1tpXSk7IGVy
ciAhPSBuaWwgeworCQkJCXJldHVybiBlcnIKKwkJCX0KKwkJfQorCX0KIAl4Yy5vbl9wb3dlcm9m
ZiA9IEMubGlieGxfYWN0aW9uX29uX3NodXRkb3duKHguT25Qb3dlcm9mZikKIAl4Yy5vbl9yZWJv
b3QgPSBDLmxpYnhsX2FjdGlvbl9vbl9zaHV0ZG93bih4Lk9uUmVib290KQogCXhjLm9uX3dhdGNo
ZG9nID0gQy5saWJ4bF9hY3Rpb25fb25fc2h1dGRvd24oeC5PbldhdGNoZG9nKQpAQCAtMjc3MCw2
ICszMDQyLDE2IEBAIGZ1bmMgKHggKlZkaXNwbGluZm8pIHRvQyh4YyAqQy5saWJ4bF92ZGlzcGxp
bmZvKSAoZXJyIGVycm9yKSB7CiAJeGMuZGV2aWQgPSBDLmxpYnhsX2RldmlkKHguRGV2aWQpCiAJ
eGMuc3RhdGUgPSBDLmludCh4LlN0YXRlKQogCXhjLmJlX2FsbG9jID0gQy5ib29sKHguQmVBbGxv
YykKKwlpZiBudW1Db25uZWN0b3JzIDo9IGxlbih4LkNvbm5lY3RvcnMpOyBudW1Db25uZWN0b3Jz
ID4gMCB7CisJCXhjLmNvbm5lY3RvcnMgPSAoKkMubGlieGxfY29ubmVjdG9yaW5mbykoQy5tYWxs
b2MoQy51bG9uZyhudW1Db25uZWN0b3JzKSAqIEMuc2l6ZW9mX2xpYnhsX2Nvbm5lY3RvcmluZm8p
KQorCQl4Yy5udW1fY29ubmVjdG9ycyA9IEMuaW50KG51bUNvbm5lY3RvcnMpCisJCWNDb25uZWN0
b3JzIDo9ICgqWzEgPDwgMjhdQy5saWJ4bF9jb25uZWN0b3JpbmZvKSh1bnNhZmUuUG9pbnRlcih4
Yy5jb25uZWN0b3JzKSlbOm51bUNvbm5lY3RvcnM6bnVtQ29ubmVjdG9yc10KKwkJZm9yIGksIHYg
Oj0gcmFuZ2UgeC5Db25uZWN0b3JzIHsKKwkJCWlmIGVyciA6PSB2LnRvQygmY0Nvbm5lY3RvcnNb
aV0pOyBlcnIgIT0gbmlsIHsKKwkJCQlyZXR1cm4gZXJyCisJCQl9CisJCX0KKwl9CiAKIAlyZXR1
cm4gbmlsCiB9CkBAIC0yODE0LDYgKzMwOTYsMTcgQEAgZnVuYyAoeCAqUGNtaW5mbykgdG9DKHhj
ICpDLmxpYnhsX3BjbWluZm8pIChlcnIgZXJyb3IpIHsKIAkJfQogCX0oKQogCisJaWYgbnVtVnNu
ZFN0cmVhbXMgOj0gbGVuKHguU3RyZWFtcyk7IG51bVZzbmRTdHJlYW1zID4gMCB7CisJCXhjLnN0
cmVhbXMgPSAoKkMubGlieGxfc3RyZWFtaW5mbykoQy5tYWxsb2MoQy51bG9uZyhudW1Wc25kU3Ry
ZWFtcykgKiBDLnNpemVvZl9saWJ4bF9zdHJlYW1pbmZvKSkKKwkJeGMubnVtX3ZzbmRfc3RyZWFt
cyA9IEMuaW50KG51bVZzbmRTdHJlYW1zKQorCQljU3RyZWFtcyA6PSAoKlsxIDw8IDI4XUMubGli
eGxfc3RyZWFtaW5mbykodW5zYWZlLlBvaW50ZXIoeGMuc3RyZWFtcykpWzpudW1Wc25kU3RyZWFt
czpudW1Wc25kU3RyZWFtc10KKwkJZm9yIGksIHYgOj0gcmFuZ2UgeC5TdHJlYW1zIHsKKwkJCWlm
IGVyciA6PSB2LnRvQygmY1N0cmVhbXNbaV0pOyBlcnIgIT0gbmlsIHsKKwkJCQlyZXR1cm4gZXJy
CisJCQl9CisJCX0KKwl9CisKIAlyZXR1cm4gbmlsCiB9CiAKQEAgLTI4NTMsNiArMzE0NiwxNiBA
QCBmdW5jICh4ICpWc25kaW5mbykgdG9DKHhjICpDLmxpYnhsX3ZzbmRpbmZvKSAoZXJyIGVycm9y
KSB7CiAJeGMuZnJvbnRlbmRfaWQgPSBDLnVpbnQzMl90KHguRnJvbnRlbmRJZCkKIAl4Yy5kZXZp
ZCA9IEMubGlieGxfZGV2aWQoeC5EZXZpZCkKIAl4Yy5zdGF0ZSA9IEMuaW50KHguU3RhdGUpCisJ
aWYgbnVtVnNuZFBjbXMgOj0gbGVuKHguUGNtcyk7IG51bVZzbmRQY21zID4gMCB7CisJCXhjLnBj
bXMgPSAoKkMubGlieGxfcGNtaW5mbykoQy5tYWxsb2MoQy51bG9uZyhudW1Wc25kUGNtcykgKiBD
LnNpemVvZl9saWJ4bF9wY21pbmZvKSkKKwkJeGMubnVtX3ZzbmRfcGNtcyA9IEMuaW50KG51bVZz
bmRQY21zKQorCQljUGNtcyA6PSAoKlsxIDw8IDI4XUMubGlieGxfcGNtaW5mbykodW5zYWZlLlBv
aW50ZXIoeGMucGNtcykpWzpudW1Wc25kUGNtczpudW1Wc25kUGNtc10KKwkJZm9yIGksIHYgOj0g
cmFuZ2UgeC5QY21zIHsKKwkJCWlmIGVyciA6PSB2LnRvQygmY1BjbXNbaV0pOyBlcnIgIT0gbmls
IHsKKwkJCQlyZXR1cm4gZXJyCisJCQl9CisJCX0KKwl9CiAKIAlyZXR1cm4gbmlsCiB9CkBAIC0y
OTE1LDYgKzMyMTgsMTQgQEAgZnVuYyAoeCAqTnVtYWluZm8pIHRvQyh4YyAqQy5saWJ4bF9udW1h
aW5mbykgKGVyciBlcnJvcikgewogCiAJeGMuc2l6ZSA9IEMudWludDY0X3QoeC5TaXplKQogCXhj
LmZyZWUgPSBDLnVpbnQ2NF90KHguRnJlZSkKKwlpZiBudW1EaXN0cyA6PSBsZW4oeC5EaXN0cyk7
IG51bURpc3RzID4gMCB7CisJCXhjLmRpc3RzID0gKCpDLnVpbnQzMl90KShDLm1hbGxvYyhDLnNp
emVfdChudW1EaXN0cyAqIG51bURpc3RzKSkpCisJCXhjLm51bV9kaXN0cyA9IEMuaW50KG51bURp
c3RzKQorCQljRGlzdHMgOj0gKCpbMSA8PCAyOF1DLnVpbnQzMl90KSh1bnNhZmUuUG9pbnRlcih4
Yy5kaXN0cykpWzpudW1EaXN0czpudW1EaXN0c10KKwkJZm9yIGksIHYgOj0gcmFuZ2UgeC5EaXN0
cyB7CisJCQljRGlzdHNbaV0gPSBDLnVpbnQzMl90KHYpCisJCX0KKwl9CiAKIAlyZXR1cm4gbmls
CiB9Ci0tIAoyLjE3LjEKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0
Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRl
dmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id A3E06E1D89
	for <lists+xen-devel@lfdr.de>; Wed, 23 Oct 2019 16:00:55 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iNH9y-0004tX-DA; Wed, 23 Oct 2019 13:58:46 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=xo40=YQ=citrix.com=andrew.cooper3@srs-us1.protection.inumbo.net>)
 id 1iNH9w-0004ss-OD
 for xen-devel@lists.xenproject.org; Wed, 23 Oct 2019 13:58:44 +0000
X-Inumbo-ID: 2d076042-f59d-11e9-947f-12813bfff9fa
Received: from esa5.hc3370-68.iphmx.com (unknown [216.71.155.168])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 2d076042-f59d-11e9-947f-12813bfff9fa;
 Wed, 23 Oct 2019 13:58:22 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1571839102;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=yxQ5/6HF4S6wOWP4cNN9AgpK/s9kaLRvodHnGyLG7ww=;
 b=WG7ldNNgccKJFbQL0Y0+y1iQwGOHE/tZG3qm8lMjTS4mPvYi9PVPQFYj
 vMpDJH6I2kg9wcekrRMzOOo3CMmDKrWwEfi4p1IPwJz0IrDbT3JSvdG9z
 LgLdoWeqOUiaYgyw12OAOqXURXrSTt6zlzsWKnknkqa+L2xbiX5ETFB9I Y=;
Authentication-Results: esa5.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=andrew.cooper3@citrix.com;
 spf=Pass smtp.mailfrom=Andrew.Cooper3@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 andrew.cooper3@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="andrew.cooper3@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: Pass (esa5.hc3370-68.iphmx.com: domain of
 Andrew.Cooper3@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="Andrew.Cooper3@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83
 ip4:168.245.78.127 ~all"
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: iUc6/qyRMrU/WRyqUPfDBT/HPnw0sDcE7Gs1kFLR1r9QxEoOzCsUPqba067dIZhqhv5MmicEzw
 Jx2rE2uFFT/eahXhaMe9mRJuXTRzP/r3+MZLAcK8TIEGsDCQ83z73FT2WBlK//w6gbJ6AtHX4K
 19KVvze8P8gN3LD9cS7emsVGY00tVma/bCzWiEXJ9x1jQPko31iM2wRG2MJTzFfHwQ4bP/7mWC
 D+WXFoddYeD3KI3aawlgzXYZkwHDi2N7iCCxKdDmYYJvHB4GTrLM+sie0t6n1SwaX5qwx3WQtS
 ng0=
X-SBRS: 2.7
X-MesageID: 7627993
X-Ironport-Server: esa5.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.68,221,1569297600"; 
   d="scan'208";a="7627993"
From: Andrew Cooper <andrew.cooper3@citrix.com>
To: Xen-devel <xen-devel@lists.xenproject.org>
Date: Wed, 23 Oct 2019 14:58:07 +0100
Message-ID: <20191023135812.21348-3-andrew.cooper3@citrix.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20191023135812.21348-1-andrew.cooper3@citrix.com>
References: <20191023135812.21348-1-andrew.cooper3@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v3 2/7] xen/nospec: Use always_inline to fix
 code gen for evaluate_nospec
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien
 Grall <julien@xen.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Jan
 Beulich <JBeulich@suse.com>, Ian Jackson <ian.jackson@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

ZXZhbHVhdGVfbm9zcGVjKCkgaXMgaW5jcmVkaWJseSBmcmFnaWxlLCBhbmQgdGhpcyBpcyBvbmUg
Z2lhbnQgYm9kZ2UuCgpUbyBjb3JyZWN0bHkgcHJvdGVjdCBqdW1wcywgdGhlIGdlbmVyYXRlZCBj
b2RlIG5lZWRzIHRvIGJlIG9mIHRoZSBmb3JtOgoKICAgIGNtcC90ZXN0IDxjb25kPgogICAgamNj
IDFmCiAgICBsZmVuY2UKICAgIC4uLgogMTogbGZlbmNlCiAgICAuLi4KCkNyaXRpY2FsbHksIHRo
ZSBsZmVuY2UgbXVzdCBiZSBhdCB0aGUgaGVhZCBvZiBib3RoIGJhc2ljIGJsb2NrcywgbGF0ZXIg
aW4gdGhlCmluc3RydWN0aW9uIHN0cmVhbSB0aGFuIHRoZSBjb25kaXRpb25hbCBqdW1wIGluIG5l
ZWQgb2YgcHJvdGVjdGlvbi4KCldoZW4gYSBzdGF0aWMgaW5saW5lIGlzIGludm9sdmVkLCB0aGUg
b3B0aW1pc2VyIGRlY2lkZXMgdG8gYmUgY2xldmVyIGFuZApyZWFycmFuZ2VzIHRoZSBjb2RlIGFz
OgoKIHByZWQ6CiAgICBsZmVuY2UKICAgIDxjYWxjdWxhdGUgY29uZD4KICAgIHJldAoKICAgIGNh
bGwgcHJlZAogICAgY21wICQwLCAlZWF4CiAgICBqY2MgMWYKICAgIC4uLgogMTogLi4uCgp3aGlj
aCBicmVha3MgdGhlIHNwZWN1bGF0aXZlIHNhZmV0eS4KCkFueSB1c2Ugb2YgZXZhbHVhdGVfbm9z
cGVjKCkgbmVlZHMgYWxsIHN0YXRpYyBpbmxpbmUgcHJlZGljYXRlcyB3aGljaCB1c2UgaXQKdG8g
YmUgZGVjbGFyZWQgYWx3YXlzX2lubGluZSB0byBwcmV2ZW50IHRoZSBvcHRpbWlzZXIgaGF2aW5n
IHRoZSBmbGV4aWJpbGl0eQp0byBnZW5lcmF0ZSB1bnNhZmUgY29kZS4KClNpZ25lZC1vZmYtYnk6
IEFuZHJldyBDb29wZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+Ci0tLQpDQzogR2Vvcmdl
IER1bmxhcCA8R2VvcmdlLkR1bmxhcEBldS5jaXRyaXguY29tPgpDQzogSWFuIEphY2tzb24gPGlh
bi5qYWNrc29uQGNpdHJpeC5jb20+CkNDOiBKYW4gQmV1bGljaCA8SkJldWxpY2hAc3VzZS5jb20+
CkNDOiBLb25yYWQgUnplc3p1dGVrIFdpbGsgPGtvbnJhZC53aWxrQG9yYWNsZS5jb20+CkNDOiBT
dGVmYW5vIFN0YWJlbGxpbmkgPHNzdGFiZWxsaW5pQGtlcm5lbC5vcmc+CkNDOiBXZWkgTGl1IDx3
bEB4ZW4ub3JnPgpDQzogSnVsaWVuIEdyYWxsIDxqdWxpZW5AeGVuLm9yZz4KQ0M6IEp1ZXJnZW4g
R3Jvc3MgPGpncm9zc0BzdXNlLmNvbT4KClRoaXMgaXMgdGhlIHRyYW5zaXRpdmUgc2V0IG9mIHBy
ZWRpY2F0ZXMgd2hpY2ggSSBjYW4gc3BvdCB3aGljaCBuZWVkCnByb3RlY3RpbmcuICBUaGVyZSBh
cmUgcHJvYmFibHkgb25lcyBJJ3ZlIG1pc3NlZC4gIFBlcnNvbmFsbHksIEknbSAtMSBmb3IgdGhp
cwphcHByb2FjaCwgYnV0IHRoZSBvbmx5IG90aGVyIG9wdGlvbiBmb3IgNC4xMyBpcyB0byByZXZl
cnQgaXQgYWxsIHRvIHVuYnJlYWsKbGl2ZXBhdGNoaW5nLgoKdjM6CiAqIE5ldwotLS0KIHhlbi9h
cmNoL3g4Ni9kb21haW4uYyAgICAgICAgICAgICAgIHwgIDIgKy0KIHhlbi9hcmNoL3g4Ni9wdi9t
bS5oICAgICAgICAgICAgICAgIHwgMTIgKysrKysrLS0tLS0tCiB4ZW4vaW5jbHVkZS9hc20teDg2
L2V2ZW50LmggICAgICAgICB8ICAyICstCiB4ZW4vaW5jbHVkZS9hc20teDg2L2d1ZXN0X3B0Lmgg
ICAgICB8IDI4ICsrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0KIHhlbi9pbmNsdWRlL2FzbS14
ODYvaHZtL25lc3RlZGh2bS5oIHwgIDIgKy0KIHhlbi9pbmNsdWRlL2FzbS14ODYvcGFnaW5nLmgg
ICAgICAgIHwgIDIgKy0KIHhlbi9pbmNsdWRlL3hlbi9zY2hlZC5oICAgICAgICAgICAgIHwgMjAg
KysrKysrKysrKy0tLS0tLS0tLS0KIDcgZmlsZXMgY2hhbmdlZCwgMzYgaW5zZXJ0aW9ucygrKSwg
MzIgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L2RvbWFpbi5jIGIveGVu
L2FyY2gveDg2L2RvbWFpbi5jCmluZGV4IGM4ZDdmNDkxZWEuLjFiODhjYzJkNjggMTAwNjQ0Ci0t
LSBhL3hlbi9hcmNoL3g4Ni9kb21haW4uYworKysgYi94ZW4vYXJjaC94ODYvZG9tYWluLmMKQEAg
LTE2OTksNyArMTY5OSw3IEBAIHN0YXRpYyB2b2lkIF91cGRhdGVfcnVuc3RhdGVfYXJlYShzdHJ1
Y3QgdmNwdSAqdikKICAqIHJlZ3VsYXIgcGVyLUNQVSBHRFQgZnJhbWUgdG8gYXBwZWFyIHdpdGgg
c2VsZWN0b3JzIGF0IHRoZSBhcHByb3ByaWF0ZQogICogb2Zmc2V0LgogICovCi1zdGF0aWMgaW5s
aW5lIGJvb2wgbmVlZF9mdWxsX2dkdChjb25zdCBzdHJ1Y3QgZG9tYWluICpkKQorc3RhdGljIGFs
d2F5c19pbmxpbmUgYm9vbCBuZWVkX2Z1bGxfZ2R0KGNvbnN0IHN0cnVjdCBkb21haW4gKmQpCiB7
CiAgICAgcmV0dXJuIGlzX3B2X2RvbWFpbihkKSAmJiAhaXNfaWRsZV9kb21haW4oZCk7CiB9CmRp
ZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvcHYvbW0uaCBiL3hlbi9hcmNoL3g4Ni9wdi9tbS5oCmlu
ZGV4IDJkNDI3YjQxOGQuLmExYmQ0NzNiMjkgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9wdi9t
bS5oCisrKyBiL3hlbi9hcmNoL3g4Ni9wdi9tbS5oCkBAIC04OCw4ICs4OCw4IEBAIHN0YXRpYyBp
bmxpbmUgYm9vbCB1cGRhdGVfaW50cHRlKGludHB0ZV90ICpwLCBpbnRwdGVfdCBvbGQsIGludHB0
ZV90IG5ldywKICAgICAgICAgICAgICAgICAgIF90ICMjIGVfZ2V0X2ludHB0ZShfbyksIF90ICMj
IGVfZ2V0X2ludHB0ZShfbiksICAgXAogICAgICAgICAgICAgICAgICAgKF9tKSwgKF92KSwgKF9h
ZCkpCiAKLXN0YXRpYyBpbmxpbmUgbDFfcGdlbnRyeV90IGFkanVzdF9ndWVzdF9sMWUobDFfcGdl
bnRyeV90IGwxZSwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
Y29uc3Qgc3RydWN0IGRvbWFpbiAqZCkKK3N0YXRpYyBhbHdheXNfaW5saW5lIGwxX3BnZW50cnlf
dCBhZGp1c3RfZ3Vlc3RfbDFlKGwxX3BnZW50cnlfdCBsMWUsCisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgZG9tYWluICpkKQog
ewogICAgIGlmICggbGlrZWx5KGwxZV9nZXRfZmxhZ3MobDFlKSAmIF9QQUdFX1BSRVNFTlQpICYm
CiAgICAgICAgICBsaWtlbHkoIWlzX3B2XzMyYml0X2RvbWFpbihkKSkgKQpAQCAtMTIwLDggKzEy
MCw4IEBAIHN0YXRpYyBpbmxpbmUgbDJfcGdlbnRyeV90IGFkanVzdF9ndWVzdF9sMmUobDJfcGdl
bnRyeV90IGwyZSwKICAgICByZXR1cm4gbDJlOwogfQogCi1zdGF0aWMgaW5saW5lIGwzX3BnZW50
cnlfdCBhZGp1c3RfZ3Vlc3RfbDNlKGwzX3BnZW50cnlfdCBsM2UsCi0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBkb21haW4gKmQpCitzdGF0
aWMgYWx3YXlzX2lubGluZSBsM19wZ2VudHJ5X3QgYWRqdXN0X2d1ZXN0X2wzZShsM19wZ2VudHJ5
X3QgbDNlLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgY29uc3Qgc3RydWN0IGRvbWFpbiAqZCkKIHsKICAgICBpZiAoIGxpa2VseShsM2VfZ2V0X2Zs
YWdzKGwzZSkgJiBfUEFHRV9QUkVTRU5UKSApCiAgICAgICAgIGwzZV9hZGRfZmxhZ3MobDNlLCAo
bGlrZWx5KCFpc19wdl8zMmJpdF9kb21haW4oZCkpCkBAIC0xNDAsOCArMTQwLDggQEAgc3RhdGlj
IGlubGluZSBsM19wZ2VudHJ5X3QgdW5hZGp1c3RfZ3Vlc3RfbDNlKGwzX3BnZW50cnlfdCBsM2Us
CiAgICAgcmV0dXJuIGwzZTsKIH0KIAotc3RhdGljIGlubGluZSBsNF9wZ2VudHJ5X3QgYWRqdXN0
X2d1ZXN0X2w0ZShsNF9wZ2VudHJ5X3QgbDRlLAotICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgZG9tYWluICpkKQorc3RhdGljIGFsd2F5c19p
bmxpbmUgbDRfcGdlbnRyeV90IGFkanVzdF9ndWVzdF9sNGUobDRfcGdlbnRyeV90IGw0ZSwKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0
cnVjdCBkb21haW4gKmQpCiB7CiAgICAgLyoKICAgICAgKiBXaGVuIHNoYWRvd2luZyBhbiBMNCBi
ZWhpbmQgdGhlIGd1ZXN0cyBiYWNrIChlLmcuIGZvciBwZXItcGNwdQpkaWZmIC0tZ2l0IGEveGVu
L2luY2x1ZGUvYXNtLXg4Ni9ldmVudC5oIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9ldmVudC5oCmlu
ZGV4IDJmNmVhNTRiY2IuLjk4YTg1MjMzY2IgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL2FzbS14
ODYvZXZlbnQuaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L2V2ZW50LmgKQEAgLTIwLDcgKzIw
LDcgQEAgc3RhdGljIGlubGluZSBpbnQgdmNwdV9ldmVudF9kZWxpdmVyeV9pc19lbmFibGVkKHN0
cnVjdCB2Y3B1ICp2KQogfQogCiBpbnQgaHZtX2xvY2FsX2V2ZW50c19uZWVkX2RlbGl2ZXJ5KHN0
cnVjdCB2Y3B1ICp2KTsKLXN0YXRpYyBpbmxpbmUgaW50IGxvY2FsX2V2ZW50c19uZWVkX2RlbGl2
ZXJ5KHZvaWQpCitzdGF0aWMgYWx3YXlzX2lubGluZSBib29sIGxvY2FsX2V2ZW50c19uZWVkX2Rl
bGl2ZXJ5KHZvaWQpCiB7CiAgICAgc3RydWN0IHZjcHUgKnYgPSBjdXJyZW50OwogCmRpZmYgLS1n
aXQgYS94ZW4vaW5jbHVkZS9hc20teDg2L2d1ZXN0X3B0LmggYi94ZW4vaW5jbHVkZS9hc20teDg2
L2d1ZXN0X3B0LmgKaW5kZXggODY4NGI4M2ZkNi4uNmFiMjA0MWU0OCAxMDA2NDQKLS0tIGEveGVu
L2luY2x1ZGUvYXNtLXg4Ni9ndWVzdF9wdC5oCisrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvZ3Vl
c3RfcHQuaApAQCAtMjAyLDcgKzIwMiw3IEBAIHN0YXRpYyBpbmxpbmUgZ3Vlc3RfbDRlX3QgZ3Vl
c3RfbDRlX2Zyb21fZ2ZuKGdmbl90IGdmbiwgdTMyIGZsYWdzKQogCiAvKiBXaGljaCBwYWdldGFi
bGUgZmVhdHVyZXMgYXJlIHN1cHBvcnRlZCBvbiB0aGlzIHZjcHU/ICovCiAKLXN0YXRpYyBpbmxp
bmUgYm9vbCBndWVzdF9jYW5fdXNlX2wyX3N1cGVycGFnZXMoY29uc3Qgc3RydWN0IHZjcHUgKnYp
CitzdGF0aWMgYWx3YXlzX2lubGluZSBib29sIGd1ZXN0X2Nhbl91c2VfbDJfc3VwZXJwYWdlcyhj
b25zdCBzdHJ1Y3QgdmNwdSAqdikKIHsKICAgICAvKgogICAgICAqIFBWIGd1ZXN0cyB1c2UgWGVu
J3MgcGFnaW5nIHNldHRpbmdzLiAgQmVpbmcgNC1sZXZlbCwgMk0KQEAgLTIxOCw3ICsyMTgsNyBA
QCBzdGF0aWMgaW5saW5lIGJvb2wgZ3Vlc3RfY2FuX3VzZV9sMl9zdXBlcnBhZ2VzKGNvbnN0IHN0
cnVjdCB2Y3B1ICp2KQogICAgICAgICAgICAgKHYtPmFyY2guaHZtLmd1ZXN0X2NyWzRdICYgWDg2
X0NSNF9QU0UpKTsKIH0KIAotc3RhdGljIGlubGluZSBib29sIGd1ZXN0X2Nhbl91c2VfbDNfc3Vw
ZXJwYWdlcyhjb25zdCBzdHJ1Y3QgZG9tYWluICpkKQorc3RhdGljIGFsd2F5c19pbmxpbmUgYm9v
bCBndWVzdF9jYW5fdXNlX2wzX3N1cGVycGFnZXMoY29uc3Qgc3RydWN0IGRvbWFpbiAqZCkKIHsK
ICAgICAvKgogICAgICAqIFRoZXJlIGFyZSBubyBjb250cm9sIHJlZ2lzdGVyIHNldHRpbmdzIGZv
ciB0aGUgaGFyZHdhcmUgcGFnZXdhbGsgb24gdGhlCkBAIC0yNTIsNyArMjUyLDcgQEAgc3RhdGlj
IGlubGluZSBib29sIGd1ZXN0X2Nhbl91c2VfcHNlMzYoY29uc3Qgc3RydWN0IGRvbWFpbiAqZCkK
ICAgICByZXR1cm4gcGFnaW5nX21vZGVfaGFwKGQpICYmIGNwdV9oYXNfcHNlMzY7CiB9CiAKLXN0
YXRpYyBpbmxpbmUgYm9vbCBndWVzdF9ueF9lbmFibGVkKGNvbnN0IHN0cnVjdCB2Y3B1ICp2KQor
c3RhdGljIGFsd2F5c19pbmxpbmUgYm9vbCBndWVzdF9ueF9lbmFibGVkKGNvbnN0IHN0cnVjdCB2
Y3B1ICp2KQogewogICAgIGlmICggR1VFU1RfUEFHSU5HX0xFVkVMUyA9PSAyICkgLyogTlggaGFz
IG5vIGVmZmVjdCB3aXRvdXQgQ1I0LlBBRS4gKi8KICAgICAgICAgcmV0dXJuIGZhbHNlOwpAQCAt
MjYxLDIzICsyNjEsMjMgQEAgc3RhdGljIGlubGluZSBib29sIGd1ZXN0X254X2VuYWJsZWQoY29u
c3Qgc3RydWN0IHZjcHUgKnYpCiAgICAgcmV0dXJuIGlzX3B2X3ZjcHUodikgPyBjcHVfaGFzX254
IDogaHZtX254X2VuYWJsZWQodik7CiB9CiAKLXN0YXRpYyBpbmxpbmUgYm9vbCBndWVzdF93cF9l
bmFibGVkKGNvbnN0IHN0cnVjdCB2Y3B1ICp2KQorc3RhdGljIGFsd2F5c19pbmxpbmUgYm9vbCBn
dWVzdF93cF9lbmFibGVkKGNvbnN0IHN0cnVjdCB2Y3B1ICp2KQogewogICAgIC8qIFBWIGd1ZXN0
cyBjYW4ndCBjb250cm9sIENSMC5XUCwgYW5kIGl0IGlzIHVuY29uZGl0aW9uYWxseSBzZXQgYnkg
WGVuLiAqLwogICAgIHJldHVybiBpc19wdl92Y3B1KHYpIHx8IGh2bV93cF9lbmFibGVkKHYpOwog
fQogCi1zdGF0aWMgaW5saW5lIGJvb2wgZ3Vlc3Rfc21lcF9lbmFibGVkKGNvbnN0IHN0cnVjdCB2
Y3B1ICp2KQorc3RhdGljIGFsd2F5c19pbmxpbmUgYm9vbCBndWVzdF9zbWVwX2VuYWJsZWQoY29u
c3Qgc3RydWN0IHZjcHUgKnYpCiB7CiAgICAgcmV0dXJuICFpc19wdl92Y3B1KHYpICYmIGh2bV9z
bWVwX2VuYWJsZWQodik7CiB9CiAKLXN0YXRpYyBpbmxpbmUgYm9vbCBndWVzdF9zbWFwX2VuYWJs
ZWQoY29uc3Qgc3RydWN0IHZjcHUgKnYpCitzdGF0aWMgYWx3YXlzX2lubGluZSBib29sIGd1ZXN0
X3NtYXBfZW5hYmxlZChjb25zdCBzdHJ1Y3QgdmNwdSAqdikKIHsKICAgICByZXR1cm4gIWlzX3B2
X3ZjcHUodikgJiYgaHZtX3NtYXBfZW5hYmxlZCh2KTsKIH0KIAotc3RhdGljIGlubGluZSBib29s
IGd1ZXN0X3BrdV9lbmFibGVkKGNvbnN0IHN0cnVjdCB2Y3B1ICp2KQorc3RhdGljIGFsd2F5c19p
bmxpbmUgYm9vbCBndWVzdF9wa3VfZW5hYmxlZChjb25zdCBzdHJ1Y3QgdmNwdSAqdikKIHsKICAg
ICByZXR1cm4gIWlzX3B2X3ZjcHUodikgJiYgaHZtX3BrdV9lbmFibGVkKHYpOwogfQpAQCAtMjg1
LDE5ICsyODUsMjEgQEAgc3RhdGljIGlubGluZSBib29sIGd1ZXN0X3BrdV9lbmFibGVkKGNvbnN0
IHN0cnVjdCB2Y3B1ICp2KQogLyogSGVscGVycyBmb3IgaWRlbnRpZnlpbmcgd2hldGhlciBndWVz
dCBlbnRyaWVzIGhhdmUgcmVzZXJ2ZWQgYml0cyBzZXQuICovCiAKIC8qIEJpdHMgcmVzZXJ2ZWQg
YmVjYXVzZSBvZiBtYXhwaHlzYWRkciwgYW5kIChsYWNrIG9mKSBFRkVSLk5YICovCi1zdGF0aWMg
aW5saW5lIHVpbnQ2NF90IGd1ZXN0X3JzdmRfYml0cyhjb25zdCBzdHJ1Y3QgdmNwdSAqdikKK3N0
YXRpYyBhbHdheXNfaW5saW5lIHVpbnQ2NF90IGd1ZXN0X3JzdmRfYml0cyhjb25zdCBzdHJ1Y3Qg
dmNwdSAqdikKIHsKICAgICByZXR1cm4gKChQQUREUl9NQVNLICYKICAgICAgICAgICAgICB+KCgx
dWwgPDwgdi0+ZG9tYWluLT5hcmNoLmNwdWlkLT5leHRkLm1heHBoeXNhZGRyKSAtIDEpKSB8CiAg
ICAgICAgICAgICAoZ3Vlc3RfbnhfZW5hYmxlZCh2KSA/IDAgOiBwdXRfcHRlX2ZsYWdzKF9QQUdF
X05YX0JJVCkpKTsKIH0KIAotc3RhdGljIGlubGluZSBib29sIGd1ZXN0X2wxZV9yc3ZkX2JpdHMo
Y29uc3Qgc3RydWN0IHZjcHUgKnYsIGd1ZXN0X2wxZV90IGwxZSkKK3N0YXRpYyBhbHdheXNfaW5s
aW5lIGJvb2wgZ3Vlc3RfbDFlX3JzdmRfYml0cyhjb25zdCBzdHJ1Y3QgdmNwdSAqdiwKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWVzdF9sMWVfdCBsMWUp
CiB7CiAgICAgcmV0dXJuIGwxZS5sMSAmIChndWVzdF9yc3ZkX2JpdHModikgfCBHVUVTVF9MMV9Q
QUdFVEFCTEVfUlNWRCk7CiB9CiAKLXN0YXRpYyBpbmxpbmUgYm9vbCBndWVzdF9sMmVfcnN2ZF9i
aXRzKGNvbnN0IHN0cnVjdCB2Y3B1ICp2LCBndWVzdF9sMmVfdCBsMmUpCitzdGF0aWMgYWx3YXlz
X2lubGluZSBib29sIGd1ZXN0X2wyZV9yc3ZkX2JpdHMoY29uc3Qgc3RydWN0IHZjcHUgKnYsCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3Vlc3RfbDJlX3Qg
bDJlKQogewogICAgIHVpbnQ2NF90IHJzdmRfYml0cyA9IGd1ZXN0X3JzdmRfYml0cyh2KTsKIApA
QCAtMzExLDcgKzMxMyw4IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBndWVzdF9sMmVfcnN2ZF9iaXRz
KGNvbnN0IHN0cnVjdCB2Y3B1ICp2LCBndWVzdF9sMmVfdCBsMmUpCiB9CiAKICNpZiBHVUVTVF9Q
QUdJTkdfTEVWRUxTID49IDMKLXN0YXRpYyBpbmxpbmUgYm9vbCBndWVzdF9sM2VfcnN2ZF9iaXRz
KGNvbnN0IHN0cnVjdCB2Y3B1ICp2LCBndWVzdF9sM2VfdCBsM2UpCitzdGF0aWMgYWx3YXlzX2lu
bGluZSBib29sIGd1ZXN0X2wzZV9yc3ZkX2JpdHMoY29uc3Qgc3RydWN0IHZjcHUgKnYsCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3Vlc3RfbDNlX3QgbDNl
KQogewogICAgIHJldHVybiAoKGwzZS5sMyAmIChndWVzdF9yc3ZkX2JpdHModikgfCBHVUVTVF9M
M19QQUdFVEFCTEVfUlNWRCB8CiAgICAgICAgICAgICAgICAgICAgICAgIChndWVzdF9jYW5fdXNl
X2wzX3N1cGVycGFnZXModi0+ZG9tYWluKSA/IDAgOiBfUEFHRV9QU0UpKSkgfHwKQEAgLTMyMCw3
ICszMjMsOCBAQCBzdGF0aWMgaW5saW5lIGJvb2wgZ3Vlc3RfbDNlX3JzdmRfYml0cyhjb25zdCBz
dHJ1Y3QgdmNwdSAqdiwgZ3Vlc3RfbDNlX3QgbDNlKQogfQogCiAjaWYgR1VFU1RfUEFHSU5HX0xF
VkVMUyA+PSA0Ci1zdGF0aWMgaW5saW5lIGJvb2wgZ3Vlc3RfbDRlX3JzdmRfYml0cyhjb25zdCBz
dHJ1Y3QgdmNwdSAqdiwgZ3Vlc3RfbDRlX3QgbDRlKQorc3RhdGljIGFsd2F5c19pbmxpbmUgYm9v
bCBndWVzdF9sNGVfcnN2ZF9iaXRzKGNvbnN0IHN0cnVjdCB2Y3B1ICp2LAorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1ZXN0X2w0ZV90IGw0ZSkKIHsKICAg
ICByZXR1cm4gbDRlLmw0ICYgKGd1ZXN0X3JzdmRfYml0cyh2KSB8IEdVRVNUX0w0X1BBR0VUQUJM
RV9SU1ZEIHwKICAgICAgICAgICAgICAgICAgICAgICgodi0+ZG9tYWluLT5hcmNoLmNwdWlkLT54
ODZfdmVuZG9yID09IFg4Nl9WRU5ET1JfQU1EKQpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNt
LXg4Ni9odm0vbmVzdGVkaHZtLmggYi94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9uZXN0ZWRodm0u
aAppbmRleCBlMDlmYTlkNDdkLi4yNTZmZWQ3MzNhIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9h
c20teDg2L2h2bS9uZXN0ZWRodm0uaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9uZXN0
ZWRodm0uaApAQCAtMzMsNyArMzMsNyBAQCBlbnVtIG5lc3RlZGh2bV92bWV4aXRzIHsKIH07CiAK
IC8qIE5lc3RlZCBIVk0gb24vb2ZmIHBlciBkb21haW4gKi8KLXN0YXRpYyBpbmxpbmUgYm9vbCBu
ZXN0ZWRodm1fZW5hYmxlZChjb25zdCBzdHJ1Y3QgZG9tYWluICpkKQorc3RhdGljIGFsd2F5c19p
bmxpbmUgYm9vbCBuZXN0ZWRodm1fZW5hYmxlZChjb25zdCBzdHJ1Y3QgZG9tYWluICpkKQogewog
ICAgIHJldHVybiBpc19odm1fZG9tYWluKGQpICYmIGQtPmFyY2guaHZtLnBhcmFtcyAmJgogICAg
ICAgICBkLT5hcmNoLmh2bS5wYXJhbXNbSFZNX1BBUkFNX05FU1RFREhWTV07CmRpZmYgLS1naXQg
YS94ZW4vaW5jbHVkZS9hc20teDg2L3BhZ2luZy5oIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9wYWdp
bmcuaAppbmRleCA4YzIwMjdjNzkxLi43NTQ0ZjczMTIxIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVk
ZS9hc20teDg2L3BhZ2luZy5oCisrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvcGFnaW5nLmgKQEAg
LTM4Myw3ICszODMsNyBAQCBzdGF0aWMgaW5saW5lIGJvb2wgZ2ZuX3ZhbGlkKGNvbnN0IHN0cnVj
dCBkb21haW4gKmQsIGdmbl90IGdmbikKIH0KIAogLyogTWF4cGh5c2FkZHIgc3VwcG9ydGFibGUg
YnkgdGhlIHBhZ2luZyBpbmZyYXN0cnVjdHVyZS4gKi8KLXN0YXRpYyBpbmxpbmUgdW5zaWduZWQg
aW50IHBhZ2luZ19tYXhfcGFkZHJfYml0cyhjb25zdCBzdHJ1Y3QgZG9tYWluICpkKQorc3RhdGlj
IGFsd2F5c19pbmxpbmUgdW5zaWduZWQgaW50IHBhZ2luZ19tYXhfcGFkZHJfYml0cyhjb25zdCBz
dHJ1Y3QgZG9tYWluICpkKQogewogICAgIHVuc2lnbmVkIGludCBiaXRzID0gcGFnaW5nX21vZGVf
aGFwKGQpID8gaGFwX3BhZGRyX2JpdHMgOiBwYWRkcl9iaXRzOwogCmRpZmYgLS1naXQgYS94ZW4v
aW5jbHVkZS94ZW4vc2NoZWQuaCBiL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC5oCmluZGV4IDYyOWE0
YzUyZTAuLjlmN2JjNjkyOTMgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC5oCisr
KyBiL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC5oCkBAIC05NjgsNTAgKzk2OCw1MCBAQCB2b2lkIHdh
dGNoZG9nX2RvbWFpbl9kZXN0cm95KHN0cnVjdCBkb21haW4gKmQpOwogCiAjZGVmaW5lIFZNX0FT
U0lTVChkLCB0KSAodGVzdF9iaXQoVk1BU1NUX1RZUEVfICMjIHQsICYoZCktPnZtX2Fzc2lzdCkp
CiAKLXN0YXRpYyBpbmxpbmUgYm9vbCBpc19wdl9kb21haW4oY29uc3Qgc3RydWN0IGRvbWFpbiAq
ZCkKK3N0YXRpYyBhbHdheXNfaW5saW5lIGJvb2wgaXNfcHZfZG9tYWluKGNvbnN0IHN0cnVjdCBk
b21haW4gKmQpCiB7CiAgICAgcmV0dXJuIElTX0VOQUJMRUQoQ09ORklHX1BWKSAmJgogICAgICAg
ICBldmFsdWF0ZV9ub3NwZWMoIShkLT5vcHRpb25zICYgWEVOX0RPTUNUTF9DREZfaHZtKSk7CiB9
CiAKLXN0YXRpYyBpbmxpbmUgYm9vbCBpc19wdl92Y3B1KGNvbnN0IHN0cnVjdCB2Y3B1ICp2KQor
c3RhdGljIGFsd2F5c19pbmxpbmUgYm9vbCBpc19wdl92Y3B1KGNvbnN0IHN0cnVjdCB2Y3B1ICp2
KQogewogICAgIHJldHVybiBpc19wdl9kb21haW4odi0+ZG9tYWluKTsKIH0KIAogI2lmZGVmIENP
TkZJR19DT01QQVQKLXN0YXRpYyBpbmxpbmUgYm9vbCBpc19wdl8zMmJpdF9kb21haW4oY29uc3Qg
c3RydWN0IGRvbWFpbiAqZCkKK3N0YXRpYyBhbHdheXNfaW5saW5lIGJvb2wgaXNfcHZfMzJiaXRf
ZG9tYWluKGNvbnN0IHN0cnVjdCBkb21haW4gKmQpCiB7CiAgICAgcmV0dXJuIGlzX3B2X2RvbWFp
bihkKSAmJiBkLT5hcmNoLmlzXzMyYml0X3B2OwogfQogCi1zdGF0aWMgaW5saW5lIGJvb2wgaXNf
cHZfMzJiaXRfdmNwdShjb25zdCBzdHJ1Y3QgdmNwdSAqdikKK3N0YXRpYyBhbHdheXNfaW5saW5l
IGJvb2wgaXNfcHZfMzJiaXRfdmNwdShjb25zdCBzdHJ1Y3QgdmNwdSAqdikKIHsKICAgICByZXR1
cm4gaXNfcHZfMzJiaXRfZG9tYWluKHYtPmRvbWFpbik7CiB9CiAKLXN0YXRpYyBpbmxpbmUgYm9v
bCBpc19wdl82NGJpdF9kb21haW4oY29uc3Qgc3RydWN0IGRvbWFpbiAqZCkKK3N0YXRpYyBhbHdh
eXNfaW5saW5lIGJvb2wgaXNfcHZfNjRiaXRfZG9tYWluKGNvbnN0IHN0cnVjdCBkb21haW4gKmQp
CiB7CiAgICAgcmV0dXJuIGlzX3B2X2RvbWFpbihkKSAmJiAhZC0+YXJjaC5pc18zMmJpdF9wdjsK
IH0KIAotc3RhdGljIGlubGluZSBib29sIGlzX3B2XzY0Yml0X3ZjcHUoY29uc3Qgc3RydWN0IHZj
cHUgKnYpCitzdGF0aWMgYWx3YXlzX2lubGluZSBib29sIGlzX3B2XzY0Yml0X3ZjcHUoY29uc3Qg
c3RydWN0IHZjcHUgKnYpCiB7CiAgICAgcmV0dXJuIGlzX3B2XzY0Yml0X2RvbWFpbih2LT5kb21h
aW4pOwogfQogI2VuZGlmCi1zdGF0aWMgaW5saW5lIGJvb2wgaXNfaHZtX2RvbWFpbihjb25zdCBz
dHJ1Y3QgZG9tYWluICpkKQorc3RhdGljIGFsd2F5c19pbmxpbmUgYm9vbCBpc19odm1fZG9tYWlu
KGNvbnN0IHN0cnVjdCBkb21haW4gKmQpCiB7CiAgICAgcmV0dXJuIElTX0VOQUJMRUQoQ09ORklH
X0hWTSkgJiYKICAgICAgICAgZXZhbHVhdGVfbm9zcGVjKGQtPm9wdGlvbnMgJiBYRU5fRE9NQ1RM
X0NERl9odm0pOwogfQogCi1zdGF0aWMgaW5saW5lIGJvb2wgaXNfaHZtX3ZjcHUoY29uc3Qgc3Ry
dWN0IHZjcHUgKnYpCitzdGF0aWMgYWx3YXlzX2lubGluZSBib29sIGlzX2h2bV92Y3B1KGNvbnN0
IHN0cnVjdCB2Y3B1ICp2KQogewogICAgIHJldHVybiBpc19odm1fZG9tYWluKHYtPmRvbWFpbik7
CiB9CiAKLXN0YXRpYyBpbmxpbmUgYm9vbCBoYXBfZW5hYmxlZChjb25zdCBzdHJ1Y3QgZG9tYWlu
ICpkKQorc3RhdGljIGFsd2F5c19pbmxpbmUgYm9vbCBoYXBfZW5hYmxlZChjb25zdCBzdHJ1Y3Qg
ZG9tYWluICpkKQogewogICAgIC8qIHNhbml0aXNlX2RvbWFpbl9jb25maWcoKSByZWplY3RzIEhB
UCAmJiAhSFZNICovCiAgICAgcmV0dXJuIElTX0VOQUJMRUQoQ09ORklHX0hWTSkgJiYKQEAgLTEw
MzQsNyArMTAzNCw3IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBpc194ZW5zdG9yZV9kb21haW4oY29u
c3Qgc3RydWN0IGRvbWFpbiAqZCkKICAgICByZXR1cm4gZC0+b3B0aW9ucyAmIFhFTl9ET01DVExf
Q0RGX3hzX2RvbWFpbjsKIH0KIAotc3RhdGljIGlubGluZSBib29sIGlzX2lvbW11X2VuYWJsZWQo
Y29uc3Qgc3RydWN0IGRvbWFpbiAqZCkKK3N0YXRpYyBhbHdheXNfaW5saW5lIGJvb2wgaXNfaW9t
bXVfZW5hYmxlZChjb25zdCBzdHJ1Y3QgZG9tYWluICpkKQogewogICAgIHJldHVybiBldmFsdWF0
ZV9ub3NwZWMoZC0+b3B0aW9ucyAmIFhFTl9ET01DVExfQ0RGX2lvbW11KTsKIH0KLS0gCjIuMTEu
MAoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1k
ZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8v
bGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

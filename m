Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 8092E178E57
	for <lists+xen-devel@lfdr.de>; Wed,  4 Mar 2020 11:28:41 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j9RDj-0005vR-4m; Wed, 04 Mar 2020 10:25:43 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=bsO7=4V=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1j9RDg-0005uh-OK
 for xen-devel@lists.xenproject.org; Wed, 04 Mar 2020 10:25:40 +0000
X-Inumbo-ID: 7e827ca4-5e02-11ea-b52f-bc764e2007e4
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 7e827ca4-5e02-11ea-b52f-bc764e2007e4;
 Wed, 04 Mar 2020 10:25:39 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id 9196DAC23;
 Wed,  4 Mar 2020 10:25:38 +0000 (UTC)
To: Andrew Cooper <andrew.cooper3@citrix.com>
References: <20200303182447.15469-1-andrew.cooper3@citrix.com>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <b2dc100f-b28e-c977-fe87-968e0d26c7cb@suse.com>
Date: Wed, 4 Mar 2020 11:25:39 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.5.0
MIME-Version: 1.0
In-Reply-To: <20200303182447.15469-1-andrew.cooper3@citrix.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH] x86/cpuid: Untangle Invariant TSC handling
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Anthony PERARD <anthony.perard@citrix.com>,
 Xen-devel <xen-devel@lists.xenproject.org>,
 Ian Jackson <Ian.Jackson@citrix.com>, Wei Liu <wl@xen.org>,
 =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMDMuMDMuMjAyMCAxOToyNCwgQW5kcmV3IENvb3BlciB3cm90ZToKPiBJVFNDIGJlaW5nIHZp
c2libGUgdG8gdGhlIGd1ZXN0IGlzIGN1cnJlbnRseSBpbXBsaWNpdCB3aXRoIHRoZSB0b29sc3Rh
Y2sKPiB1bmNvbmRpdGlvbmFsbHkgYXNraW5nIGZvciBpdCwgYW5kIFhlbiBjbGlwcGluZyBpdCBi
YXNlZCBvbiB0aGUgdlRTQyBhbmQvb3IKPiBYRU5fRE9NQ1RMX2Rpc2FibGVfbWlncmF0ZSBzZXR0
aW5ncy4KPiAKPiBUaGlzIGlzIHByb2JsZW1hdGljIGZvciBzZXZlcmFsIHJlYXNvbnMuCj4gCj4g
Rmlyc3QsIHRoZSBpbXBsaWNpdCB2VFNDIGJlaGF2aW91ciBtYW5pZmVzdHMgYXMgYSByZWFsIGJ1
ZyBvbiBtaWdyYXRpb24gdG8gYQo+IGhvc3Qgd2l0aCBhIGRpZmZlcmVudCBmcmVxdWVuY3ksIHdp
dGggSVRTQyBidXQgd2l0aG91dCBUU0Mgc2NhbGluZwo+IGNhcGFiaWxpdGllcywgd2hlcmVieSB0
aGUgSVRTQyBmZWF0dXJlIGJlY29tZXMgYWR2ZXJ0aXNlZCB0byB0aGUgZ3Vlc3QuICBJVFNDCj4g
d2lsbCBkaXNhcHBlYXIgYWdhaW4gaWYgdGhlIGd1ZXN0IG1pZ3JhdGVzIHRvIHNlcnZlciB3aXRo
IHRoZSBzYW1lIGZyZXF1ZW5jeQo+IGFzIHRoZSBvcmlnaW5hbCwgb3IgdG8gb25lIHdpdGggVFND
IHNjYWxpbmcgc3VwcG9ydC4KPiAKPiBTZWNvbmRseSwgZGlzYWxsb3dpbmcgSVRTQyB1bmxlc3Mg
dGhlIGd1ZXN0IGRvZXNuJ3QgbWlncmF0ZSBpcyBjb25jZXB0dWFsbHkKPiB3cm9uZy4gIEl0IGlz
IGNvbW1vbiB0byBoYXZlIG1pZ3JhdGlvbiBwb29scyBvZiBpZGVudGljYWwgaGFyZHdhcmUsIGF0
IHdoaWNoCj4gcG9pbnQgdGhlIFRTQyBmcmVxdWVuY3kgaXMgdGhlIHNhbWUsCgpUaGlzIHN0YXRl
bWVudCBpcyB0b28gYnJvYWQ6IFBvb2xzIG9mIGlkZW50aWNhbCBoYXJkd2FyZSBtYXkgaGF2ZSB0
aGUgc2FtZQpub21pbmFsIGZyZXF1ZW5jaWVzLCBidXQgdHdvIGRpc3RpbmN0IHN5c3RlbXMgYXJl
IGhhcmRseSBldmVyIGdvaW5nIHRvIGhhdmUKdGhlIGV4YWN0IHNhbWUgYWN0dWFsIChtZWFzdXJl
ZCBvciBldmVuIHJlYWwpIGZyZXF1ZW5jaWVzLiBSZWNhbGwgT2xhZidzCnZUU0MtdG9sZXJhbmNl
IHBhdGNoIHRoYXQgc3RpbGwgaGFzbid0IGxhbmRlZCBhbnl3aGVyZT8KCj4gYW5kIG1vcmUgbW9k
ZXJuIGhhcmR3YXJlIGhhcyBUU0Mgc2NhbGluZwo+IHN1cHBvcnQgYW55d2F5LiAgSW4gYm90aCBj
YXNlcywgaXQgaXMgc2FmZSB0byBhZHZlcnRpc2UgSVRTQyBhbmQgbWlncmF0ZSB0aGUKPiBndWVz
dC4KPiAKPiBSZW1vdmUgYWxsIGltcGxpY2l0IGxvZ2ljIGxvZ2ljIGluIFhlbiwgYW5kIG1ha2Ug
SVRTQyBwYXJ0IG9mIHRoZSBtYXggQ1BVSUQKPiBwb2xpY2llcyBmb3IgZ3Vlc3RzLiAgUGx1bWIg
YW4gaXRzYyBwYXJhbWV0ZXIgaW50byB4Y19jcHVpZF9hcHBseV9wb2xpY3koKSBhbmQKPiBoYXZl
IGxpYnhsX19jcHVpZF9sZWdhY3koKSBmaWxsIGluIHRoZSB0d28gY2FzZXMgd2hlcmUgaXQgY2Fu
IHJlYXNvbmFibHkKPiBleHBlY3QgSVRTQyB0byBiZSBzYWZlIGZvciB0aGUgZ3Vlc3QgdG8gc2Vl
Lgo+IAo+IFRoaXMgaXMgYSBiZWhhdmlvdXIgY2hhbmdlIGZvciBUU0NfTU9ERV9OQVRJVkUsIHdo
ZXJlIHRoZSBJVFNDIHdpbGwgbm93Cj4gcmVsaWFibHkgbm90IGFwcGVhciwgYW5kIGZvciB0aGUg
Y2FzZSB3aGVyZSB0aGUgdXNlciBleHBsaWNpdGx5IHJlcXVlc3RzIElUU0MsCj4gaW4gd2hpY2gg
Y2FzZSBpdCB3aWxsIGFwcGVhciBldmVuIGlmIHRoZSBndWVzdCBpc24ndCBtYXJrZWQgYXMgbm9t
aWdyYXRlLgoKSG93IHNlbnNpYmxlIGlzIGl0IHRvIGFsbG93IHRoZSB1c2VyIHRvIHJlcXVlc3Qg
c29tZXRoaW5nIGxpa2UgSVRTQyB3aXRoCm5vIHJlc3BlY3RpdmUgc3VwcG9ydCB1bmRlcm5lYXRo
PyBTaG91bGRuJ3Qgd2UgdHJhbnNsYXRlIHN1Y2ggYSByZXF1ZXN0CmludG8gZW5hYmxpbmcgdlRT
QyBpZiB0aGVyZSdzIG5vIElUU0Mgb24gdGhlIHBsYXRmb3JtPyBBY3R1YWxseSBsb29raW5nCmF0
IHRoZSBjaGFuZ2UgdG8gbGlieGxfX2NwdWlkX2xlZ2FjeSgpIEkgd29uZGVyIHdoZXRoZXIgeW91
IGRvbid0IGluc3RlYWQKbWVhbiAicmVxdWVzdHMgdlRTQyIgaGVyZS4KCj4gU2lnbmVkLW9mZi1i
eTogQW5kcmV3IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KCkFzc3VtaW5nIEkg
dW5kZXJzdGFuZCB0aGUgdG9vbHMgc2lkZSBjaGFuZ2VzIGNvcnJlY3RseSwgaHlwZXJ2aXNvcgpz
aWRlClJldmlld2VkLWJ5OiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+Cgo+IC0tLSBh
L3Rvb2xzL2xpYnhsL2xpYnhsX2NwdWlkLmMKPiArKysgYi90b29scy9saWJ4bC9saWJ4bF9jcHVp
ZC5jCj4gQEAgLTQxOCw2ICs0MTgsNyBAQCB2b2lkIGxpYnhsX19jcHVpZF9sZWdhY3kobGlieGxf
Y3R4ICpjdHgsIHVpbnQzMl90IGRvbWlkLAo+ICAgICAgaW50IGk7Cj4gICAgICBjaGFyICpjcHVp
ZF9yZXNbNF07Cj4gICAgICBib29sIHBhZSA9IHRydWU7Cj4gKyAgICBib29sIGl0c2M7Cj4gIAo+
ICAgICAgLyoKPiAgICAgICAqIEZvciBQViBndWVzdHMsIFBBRSBpcyBYZW4tY29udHJvbGxlZCAo
aXQgaXMgdGhlICdwJyB0aGF0IGRpZmZlcmVudGlhdGVzCj4gQEAgLTQzMiw3ICs0MzMsMjIgQEAg
dm9pZCBsaWJ4bF9fY3B1aWRfbGVnYWN5KGxpYnhsX2N0eCAqY3R4LCB1aW50MzJfdCBkb21pZCwK
PiAgICAgIGlmIChpbmZvLT50eXBlID09IExJQlhMX0RPTUFJTl9UWVBFX0hWTSkKPiAgICAgICAg
ICBwYWUgPSBsaWJ4bF9kZWZib29sX3ZhbChpbmZvLT51Lmh2bS5wYWUpOwo+ICAKPiAtICAgIHhj
X2NwdWlkX2FwcGx5X3BvbGljeShjdHgtPnhjaCwgZG9taWQsIE5VTEwsIDAsIHBhZSk7Cj4gKyAg
ICAvKgo+ICsgICAgICogQWR2ZXJ0aXNpbmcgSW52YXJpYW50IFRTQyB0byBhIGd1ZXN0IG1lYW5z
IHRoYXQgdGhlIFRTQyBmcmVxdWVuY3kgd29uJ3QKPiArICAgICAqIGNoYW5nZSBhdCBhbnkgcG9p
bnQgaW4gdGhlIGZ1dHVyZS4KPiArICAgICAqCj4gKyAgICAgKiBXZSBkbyBub3QgaGF2ZSBlbm91
Z2ggaW5mb3JtYXRpb24gYWJvdXQgcG90ZW50aWFsIG1pZ3JhdGlvbgo+ICsgICAgICogZGVzdGlu
YXRpb25zIHRvIGtub3cgd2hldGhlciBhZHZlcnRpc2luZyBJVFNDIGlzIHNhZmUsIGJ1dCBpZiB0
aGUgZ3Vlc3QKPiArICAgICAqIGlzbid0IGdvaW5nIHRvIG1pZ3JhdGUsIHRoZW4gdGhlIGN1cnJl
bnQgaGFyZHdhcmUgaXMgYWxsIHRoYXQgbWF0dGVycy4KPiArICAgICAqCj4gKyAgICAgKiBBbHRl
cm5hdGl2ZWx5LCBhbiBpbnRlcm5hbCBwcm9wZXJ0eSBvZiB2VFNDIGlzIHRoYXQgdGhlIHZhbHVl
cyByZWFkIGFyZQo+ICsgICAgICogaW52YXJpYW50LiAgQWR2ZXJ0aXNlIElUU0Mgd2hlbiB3ZSBr
bm93IHRoZSBkb21haW4gd2lsbCBoYXZlIGVtdWFsdGVkCj4gKyAgICAgKiBUU0MgZXZlcnl3aGVy
ZSBpdCBnb2VzLgo+ICsgICAgICovCj4gKyAgICBpdHNjID0gKGxpYnhsX2RlZmJvb2xfdmFsKGlu
Zm8tPmRpc2FibGVfbWlncmF0ZSkgfHwKPiArICAgICAgICAgICAgaW5mby0+dHNjX21vZGUgPT0g
TElCWExfVFNDX01PREVfQUxXQVlTX0VNVUxBVEUpOwo+ICsKPiArICAgIHhjX2NwdWlkX2FwcGx5
X3BvbGljeShjdHgtPnhjaCwgZG9taWQsIE5VTEwsIDAsIHBhZSwgaXRzYyk7CgpXaGF0J3MgdGhl
IGltcGxpY2F0aW9uIG9mIHRoaXMgb24gbm9uLSBvciBwYXJ0bHktbGlieGwtYmFzZWQgdG9vbApz
dGFja3M/IFdvbid0IGEgY2hhbmdlIGxpa2UgdGhpcyBiZSBuZWVkZWQgdGhlcmUsIHRvbz8gSW4K
cGFydGljdWxhciwgaXMgbGlidmlydCB1c2luZyB0aGlzIGZ1bmN0aW9uLCBzdWNoIHRoYXQgd2Ug
d29uJ3QKaGF2ZSBhIHBlcmNlaXZlZCByZWdyZXNzaW9uIGFnYWluPwoKSmFuCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBs
aXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2pl
Y3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

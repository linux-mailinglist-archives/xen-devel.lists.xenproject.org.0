Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 1B7D1F1A26
	for <lists+xen-devel@lfdr.de>; Wed,  6 Nov 2019 16:37:57 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iSNKs-0005g1-KV; Wed, 06 Nov 2019 15:35:06 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=4agi=Y6=bitdefender.com=aisaila@srs-us1.protection.inumbo.net>)
 id 1iSNKq-0005fv-SG
 for xen-devel@lists.xenproject.org; Wed, 06 Nov 2019 15:35:04 +0000
X-Inumbo-ID: 001e113e-00ab-11ea-9631-bc764e2007e4
Received: from EUR04-VI1-obe.outbound.protection.outlook.com (unknown
 [40.107.8.117]) by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 001e113e-00ab-11ea-9631-bc764e2007e4;
 Wed, 06 Nov 2019 15:35:03 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=gT9qQHjQnDbH5vutipgDJBUhNPkqckYw3qsVp8ATNIt+dKVaHuBpCYYUnMfCI4/dvEOlXEgBZ6wrOFBA/0kt+onP4aCpggWDQxg4vhgHlFmMu9TIlP5HyV4IEhlyMhhBxHSqSJ9PIhvs838huxzmxz2wn7DB8xFowpf1QQTxRTkCyAXlDcSIYMXNUACv4128k+hkN7yYTMq4QrKHg1ZU8K1e8oiF2H5pGJg4n1G6VPk32y2y7FN0cQnVpWvjJ3laHggdggmij08Ntyo1O+ypUzmNPiU+sl5ROia54vrDIVcMQXoTXNq1x1u9QPQKnvtjpuvQEsTTBuzMtYAI+L1ACg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=hkQP+B8wCPT0iUGKIDmKlXk0NJnRPGX2rzhBinZpGuo=;
 b=Qo834bKLsdaqhh8rv/tRIBCtBKZPzuIL6HSGjP0MlVb7I0jBy/37rguyXbyN5lyYqH6w5sPPF7o6rYaMl9lGK4wfTwF58jT+w4cy74KYMkGt/cHcnSAJSiHEiMxNnYj2BdN3fwxgG8AVwqezrEphwfNRmDtzL6cjEG/2RmZbluUVIN6mQ0cSDtN22VGcO4ad35eWFfW0h0YAlzVR0LTb4h5AGwJMNnYeybp5euXRFkuV11NYpeGJ0GGMuQVe95S8qRRtxlnTFdFZRI3P6Bdkl0O8nMPnQXjotQiYgxHs5ca2SRFFnXOFuMW2fZ6wchKDI5RJ1DW35pVAphVpc26xRQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=bitdefender.com; dmarc=pass action=none
 header.from=bitdefender.com; dkim=pass header.d=bitdefender.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=bitdefender.onmicrosoft.com; s=selector2-bitdefender-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=hkQP+B8wCPT0iUGKIDmKlXk0NJnRPGX2rzhBinZpGuo=;
 b=j6qTXB7/ovX26vkJH4rmOQejITbWytDPUuEs772Hk8cMYdHf8Z3L/wIJq6TsB3kSGGCF8G5UbJpMUk0Xmi0PL47MEfktyq8MkGoV1PHRC9yUAVmrM6g2JqLk/QwRMc62nwZQcTi6NcfIDZFjjnevv6PGccJvOg9zmBP77fe0GWo=
Received: from AM6PR0202MB3413.eurprd02.prod.outlook.com (52.133.30.28) by
 AM6PR0202MB3287.eurprd02.prod.outlook.com (52.133.30.13) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2408.24; Wed, 6 Nov 2019 15:35:02 +0000
Received: from AM6PR0202MB3413.eurprd02.prod.outlook.com
 ([fe80::a569:5be5:9861:577d]) by AM6PR0202MB3413.eurprd02.prod.outlook.com
 ([fe80::a569:5be5:9861:577d%5]) with mapi id 15.20.2408.025; Wed, 6 Nov 2019
 15:35:01 +0000
From: Alexandru Stefan ISAILA <aisaila@bitdefender.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH V2 1/2] x86/altp2m: Add hypercall to set a range of sve
 bits
Thread-Index: AQHVlLfBrDM8T0M9gEmymLFobxrGFA==
Date: Wed, 6 Nov 2019 15:35:01 +0000
Message-ID: <20191106153442.12776-1-aisaila@bitdefender.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: AM0PR0102CA0056.eurprd01.prod.exchangelabs.com
 (2603:10a6:208::33) To AM6PR0202MB3413.eurprd02.prod.outlook.com
 (2603:10a6:209:1c::28)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=aisaila@bitdefender.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [91.199.104.6]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: d6988609-822f-4beb-b98c-08d762cee36d
x-ms-traffictypediagnostic: AM6PR0202MB3287:|AM6PR0202MB3287:|AM6PR0202MB3287:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <AM6PR0202MB328781F3BA73AE997F30C6F5AB790@AM6PR0202MB3287.eurprd02.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:626;
x-forefront-prvs: 02135EB356
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(979002)(346002)(376002)(366004)(396003)(136003)(39860400002)(199004)(189003)(3846002)(2501003)(6116002)(6916009)(2906002)(1076003)(14454004)(5660300002)(305945005)(25786009)(7736002)(478600001)(7416002)(6512007)(86362001)(107886003)(5640700003)(486006)(8676002)(36756003)(6486002)(2616005)(50226002)(6436002)(476003)(316002)(52116002)(99286004)(186003)(26005)(4326008)(54906003)(386003)(102836004)(6506007)(71200400001)(64756008)(66556008)(66476007)(71190400001)(66446008)(66946007)(2351001)(8936002)(81166006)(81156014)(14444005)(256004)(66066001)(969003)(989001)(999001)(1009001)(1019001);
 DIR:OUT; SFP:1102; SCL:1; SRVR:AM6PR0202MB3287;
 H:AM6PR0202MB3413.eurprd02.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: bitdefender.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: 4t9JgMvG8WLrbTSLplOuuM6Y+IFVupmB2lnWGtp0tMogtFb/v8Gb0ns3q3TJeiMFj3ZR4fSrPIPwEvzRf8b/ymM2VrVCCbMTtkIbaZMmJXpKvHqwo8vaszddP8rEO6wXgDBmPMGR9/Bk1/P4g8yAc/EFuDCYEuwiUF1/P460ZXQDXHdo1zOOggNtk9eVKLaAVGdZIsL5OLshyEsNKsIlLeeHXEkbdv0xpXrUeAH+irGjNZ2f83OX6BmmO8g/iB73sdLrtrO6xPaKdquq/Soj3vmDEWMz3Q2hxb7TvoQDKXiHVYYpUF9K9ThOCnnauql1Y02rF+g1IsEMSdYa0UWg99HYMMWQ7QAu3MCAmTg31LE8zWjHP3oNSXfv8vTlwHJ9Ue2hVPhzswXcGQporiADXoAo9D6dan3b+114OSZ5+94uZDdhJk7KtiRnI4ryMAP6
MIME-Version: 1.0
X-OriginatorOrg: bitdefender.com
X-MS-Exchange-CrossTenant-Network-Message-Id: d6988609-822f-4beb-b98c-08d762cee36d
X-MS-Exchange-CrossTenant-originalarrivaltime: 06 Nov 2019 15:35:01.6497 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 487baf29-f1da-469a-9221-243f830c36f3
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: 6t+yLDIcach9o/aXBPcUzNkoHgW5uaBmyRw+Od4VVfYpAwXsSZNFKBNb+9K+BBwfriCp6uQUO2Dm362QwFBw7W0paLTQuQ2MJSYE7wfXjog=
X-MS-Exchange-Transport-CrossTenantHeadersStamped: AM6PR0202MB3287
Subject: [Xen-devel] [PATCH V2 1/2] x86/altp2m: Add hypercall to set a range
 of sve bits
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Petre Ovidiu PIRCALABU <ppircalabu@bitdefender.com>,
 "sstabellini@kernel.org" <sstabellini@kernel.org>,
 "julien@xen.org" <julien@xen.org>, Razvan COJOCARU <rcojocaru@bitdefender.com>,
 "wl@xen.org" <wl@xen.org>, "konrad.wilk@oracle.com" <konrad.wilk@oracle.com>,
 "george.dunlap@eu.citrix.com" <george.dunlap@eu.citrix.com>,
 "andrew.cooper3@citrix.com" <andrew.cooper3@citrix.com>,
 "ian.jackson@eu.citrix.com" <ian.jackson@eu.citrix.com>,
 "tamas@tklengyel.com" <tamas@tklengyel.com>,
 "jbeulich@suse.com" <jbeulich@suse.com>,
 Alexandru Stefan ISAILA <aisaila@bitdefender.com>,
 "roger.pau@citrix.com" <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QnkgZGVmYXVsdCB0aGUgc3ZlIGJpdHMgYXJlIG5vdCBzZXQuClRoaXMgcGF0Y2ggYWRkcyBhIG5l
dyBoeXBlcmNhbGwsIHhjX2FsdHAybV9zZXRfc3VwcmVzc192ZV9tdWx0aSgpLAp0byBzZXQgYSBy
YW5nZSBvZiBzdmUgYml0cy4KVGhlIGNvcmUgZnVuY3Rpb24sIHAybV9zZXRfc3VwcHJlc3NfdmVf
bXVsdGkoKSwgZG9lcyBub3QgYnJha2UgaW4gY2FzZQpvZiBhIGVycm9yIGFuZCBpdCBpcyBkb2lu
ZyBhIGJlc3QgZWZmb3J0IGZvciBzZXR0aW5nIHRoZSBiaXRzIGluIHRoZQpnaXZlbiByYW5nZS4g
QSBjaGVjayBmb3IgY29udGludWF0aW9uIGlzIG1hZGUgaW4gb3JkZXIgdG8gaGF2ZQpwcmVlbXB0
aW9uIG9uIGJpZyByYW5nZXMuCgpTaWduZWQtb2ZmLWJ5OiBBbGV4YW5kcnUgSXNhaWxhIDxhaXNh
aWxhQGJpdGRlZmVuZGVyLmNvbT4KCi0tLQpDaGFuZ2VzIHNpbmNlIFYxOgoJLSBSZW1vdmUgImNv
bnRpbnVlIgoJLSBBZGQgYSBuZXcgZmllbGQgaW4geGVuX2h2bV9hbHRwMm1fc3VwcHJlc3NfdmUg
dG8gc3RvcmUgdGhlCmNvbnRpbnVhdGlvbiB2YWx1ZQoJLSBIYXZlIHAybV9zZXRfc3VwcHJlc3Nf
dmVfbXVsdGkoKSB0YWtlCnhlbl9odm1fYWx0cDJtX3N1cHByZXNzX3ZlIGFzIGEgcGFyYW0uCi0t
LQogdG9vbHMvbGlieGMvaW5jbHVkZS94ZW5jdHJsLmggICB8ICAzICsrCiB0b29scy9saWJ4Yy94
Y19hbHRwMm0uYyAgICAgICAgIHwgMjUgKysrKysrKysrKysrKysKIHhlbi9hcmNoL3g4Ni9odm0v
aHZtLmMgICAgICAgICAgfCAyMCArKysrKysrKysrLS0KIHhlbi9hcmNoL3g4Ni9tbS9wMm0uYyAg
ICAgICAgICAgfCA1OCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIHhlbi9pbmNs
dWRlL3B1YmxpYy9odm0vaHZtX29wLmggfCAgNSArKy0KIHhlbi9pbmNsdWRlL3hlbi9tZW1fYWNj
ZXNzLmggICAgfCAgMyArKwogNiBmaWxlcyBjaGFuZ2VkLCAxMTEgaW5zZXJ0aW9ucygrKSwgMyBk
ZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS90b29scy9saWJ4Yy9pbmNsdWRlL3hlbmN0cmwuaCBi
L3Rvb2xzL2xpYnhjL2luY2x1ZGUveGVuY3RybC5oCmluZGV4IGY0NDMxNjg3YjMuLjIxYjY0NGY0
NTkgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhjL2luY2x1ZGUveGVuY3RybC5oCisrKyBiL3Rvb2xz
L2xpYnhjL2luY2x1ZGUveGVuY3RybC5oCkBAIC0xOTIzLDYgKzE5MjMsOSBAQCBpbnQgeGNfYWx0
cDJtX3N3aXRjaF90b192aWV3KHhjX2ludGVyZmFjZSAqaGFuZGxlLCB1aW50MzJfdCBkb21pZCwK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDE2X3Qgdmlld19pZCk7CiBpbnQgeGNf
YWx0cDJtX3NldF9zdXBwcmVzc192ZSh4Y19pbnRlcmZhY2UgKmhhbmRsZSwgdWludDMyX3QgZG9t
aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MTZfdCB2aWV3X2lkLCB4ZW5f
cGZuX3QgZ2ZuLCBib29sIHN2ZSk7CitpbnQgeGNfYWx0cDJtX3NldF9zdXByZXNzX3ZlX211bHRp
KHhjX2ludGVyZmFjZSAqaGFuZGxlLCB1aW50MzJfdCBkb21pZCwKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdWludDE2X3Qgdmlld19pZCwgeGVuX3Bmbl90IHN0YXJ0X2dmbiwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgbnIsIGJvb2wgc3Zl
KTsKIGludCB4Y19hbHRwMm1fZ2V0X3N1cHByZXNzX3ZlKHhjX2ludGVyZmFjZSAqaGFuZGxlLCB1
aW50MzJfdCBkb21pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQxNl90IHZp
ZXdfaWQsIHhlbl9wZm5fdCBnZm4sIGJvb2wgKnN2ZSk7CiBpbnQgeGNfYWx0cDJtX3NldF9tZW1f
YWNjZXNzKHhjX2ludGVyZmFjZSAqaGFuZGxlLCB1aW50MzJfdCBkb21pZCwKZGlmZiAtLWdpdCBh
L3Rvb2xzL2xpYnhjL3hjX2FsdHAybS5jIGIvdG9vbHMvbGlieGMveGNfYWx0cDJtLmMKaW5kZXgg
MDlkYWQwMzU1ZS4uNjYwNWQ5YWJiZSAxMDA2NDQKLS0tIGEvdG9vbHMvbGlieGMveGNfYWx0cDJt
LmMKKysrIGIvdG9vbHMvbGlieGMveGNfYWx0cDJtLmMKQEAgLTIzNCw2ICsyMzQsMzEgQEAgaW50
IHhjX2FsdHAybV9zZXRfc3VwcHJlc3NfdmUoeGNfaW50ZXJmYWNlICpoYW5kbGUsIHVpbnQzMl90
IGRvbWlkLAogICAgIHJldHVybiByYzsKIH0KIAoraW50IHhjX2FsdHAybV9zZXRfc3VwcmVzc192
ZV9tdWx0aSh4Y19pbnRlcmZhY2UgKmhhbmRsZSwgdWludDMyX3QgZG9taWQsCisgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQxNl90IHZpZXdfaWQsIHhlbl9wZm5fdCBzdGFy
dF9nZm4sCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IG5yLCBi
b29sIHN2ZSkKK3sKKyAgICBpbnQgcmM7CisgICAgREVDTEFSRV9IWVBFUkNBTExfQlVGRkVSKHhl
bl9odm1fYWx0cDJtX29wX3QsIGFyZyk7CisKKyAgICBhcmcgPSB4Y19oeXBlcmNhbGxfYnVmZmVy
X2FsbG9jKGhhbmRsZSwgYXJnLCBzaXplb2YoKmFyZykpOworICAgIGlmICggYXJnID09IE5VTEwg
KQorICAgICAgICByZXR1cm4gLTE7CisKKyAgICBhcmctPnZlcnNpb24gPSBIVk1PUF9BTFRQMk1f
SU5URVJGQUNFX1ZFUlNJT047CisgICAgYXJnLT5jbWQgPSBIVk1PUF9hbHRwMm1fc2V0X3N1cHBy
ZXNzX3ZlX211bHRpOworICAgIGFyZy0+ZG9tYWluID0gZG9taWQ7CisgICAgYXJnLT51LnN1cHBy
ZXNzX3ZlLnZpZXcgPSB2aWV3X2lkOworICAgIGFyZy0+dS5zdXBwcmVzc192ZS5nZm4gPSBzdGFy
dF9nZm47CisgICAgYXJnLT51LnN1cHByZXNzX3ZlLnN1cHByZXNzX3ZlID0gc3ZlOworICAgIGFy
Zy0+dS5zdXBwcmVzc192ZS5uciA9IG5yOworCisgICAgcmMgPSB4ZW5jYWxsMihoYW5kbGUtPnhj
YWxsLCBfX0hZUEVSVklTT1JfaHZtX29wLCBIVk1PUF9hbHRwMm0sCisgICAgICAgICAgICAgICAg
ICBIWVBFUkNBTExfQlVGRkVSX0FTX0FSRyhhcmcpKTsKKyAgICB4Y19oeXBlcmNhbGxfYnVmZmVy
X2ZyZWUoaGFuZGxlLCBhcmcpOworICAgIHJldHVybiByYzsKK30KKwogaW50IHhjX2FsdHAybV9z
ZXRfbWVtX2FjY2Vzcyh4Y19pbnRlcmZhY2UgKmhhbmRsZSwgdWludDMyX3QgZG9taWQsCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQxNl90IHZpZXdfaWQsIHhlbl9wZm5fdCBnZm4s
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhlbm1lbV9hY2Nlc3NfdCBhY2Nlc3MpCmRp
ZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvaHZtL2h2bS5jIGIveGVuL2FyY2gveDg2L2h2bS9odm0u
YwppbmRleCAwNmE3YjQwMTA3Li42NmVkOGI4ZTNlIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYv
aHZtL2h2bS5jCisrKyBiL3hlbi9hcmNoL3g4Ni9odm0vaHZtLmMKQEAgLTQ1MzUsNiArNDUzNSw3
IEBAIHN0YXRpYyBpbnQgZG9fYWx0cDJtX29wKAogICAgIGNhc2UgSFZNT1BfYWx0cDJtX2Rlc3Ry
b3lfcDJtOgogICAgIGNhc2UgSFZNT1BfYWx0cDJtX3N3aXRjaF9wMm06CiAgICAgY2FzZSBIVk1P
UF9hbHRwMm1fc2V0X3N1cHByZXNzX3ZlOgorICAgIGNhc2UgSFZNT1BfYWx0cDJtX3NldF9zdXBw
cmVzc192ZV9tdWx0aToKICAgICBjYXNlIEhWTU9QX2FsdHAybV9nZXRfc3VwcHJlc3NfdmU6CiAg
ICAgY2FzZSBIVk1PUF9hbHRwMm1fc2V0X21lbV9hY2Nlc3M6CiAgICAgY2FzZSBIVk1PUF9hbHRw
Mm1fc2V0X21lbV9hY2Nlc3NfbXVsdGk6CkBAIC00NjgxLDcgKzQ2ODIsNyBAQCBzdGF0aWMgaW50
IGRvX2FsdHAybV9vcCgKICAgICAgICAgYnJlYWs7CiAKICAgICBjYXNlIEhWTU9QX2FsdHAybV9z
ZXRfc3VwcHJlc3NfdmU6Ci0gICAgICAgIGlmICggYS51LnN1cHByZXNzX3ZlLnBhZDEgfHwgYS51
LnN1cHByZXNzX3ZlLnBhZDIgKQorICAgICAgICBpZiAoIGEudS5zdXBwcmVzc192ZS5wYWQxICkK
ICAgICAgICAgICAgIHJjID0gLUVJTlZBTDsKICAgICAgICAgZWxzZQogICAgICAgICB7CkBAIC00
NjkzLDggKzQ2OTQsMjMgQEAgc3RhdGljIGludCBkb19hbHRwMm1fb3AoCiAgICAgICAgIH0KICAg
ICAgICAgYnJlYWs7CiAKKyAgICBjYXNlIEhWTU9QX2FsdHAybV9zZXRfc3VwcHJlc3NfdmVfbXVs
dGk6CisgICAgICAgIGlmICggYS51LnN1cHByZXNzX3ZlLnBhZDEgfHwgIWEudS5zdXBwcmVzc192
ZS5uciApCisgICAgICAgICAgICByYyA9IC1FSU5WQUw7CisgICAgICAgIGVsc2UKKyAgICAgICAg
eworICAgICAgICAgICAgcmMgPSBwMm1fc2V0X3N1cHByZXNzX3ZlX211bHRpKGQsICZhLnUuc3Vw
cHJlc3NfdmUpOworCisgICAgICAgICAgICBpZiAoIHJjID09IC1FUkVTVEFSVCApCisgICAgICAg
ICAgICAgICAgaWYgKCBfX2NvcHlfZmllbGRfdG9fZ3Vlc3QoZ3Vlc3RfaGFuZGxlX2Nhc3QoYXJn
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhlbl9odm1fYWx0
cDJtX29wX3QpLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZh
LCB1LnN1cHByZXNzX3ZlLm9wYXF1ZSkgKQorICAgICAgICAgICAgICAgICAgICByYyA9IC1FRkFV
TFQ7CisgICAgICAgIH0KKyAgICAgICAgYnJlYWs7CisKICAgICBjYXNlIEhWTU9QX2FsdHAybV9n
ZXRfc3VwcHJlc3NfdmU6Ci0gICAgICAgIGlmICggYS51LnN1cHByZXNzX3ZlLnBhZDEgfHwgYS51
LnN1cHByZXNzX3ZlLnBhZDIgKQorICAgICAgICBpZiAoIGEudS5zdXBwcmVzc192ZS5wYWQxICkK
ICAgICAgICAgICAgIHJjID0gLUVJTlZBTDsKICAgICAgICAgZWxzZQogICAgICAgICB7CmRpZmYg
LS1naXQgYS94ZW4vYXJjaC94ODYvbW0vcDJtLmMgYi94ZW4vYXJjaC94ODYvbW0vcDJtLmMKaW5k
ZXggZTVlNDM0OWRlYS4uOWUxMzM1MDY1ZCAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L21tL3Ay
bS5jCisrKyBiL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYwpAQCAtMzA1NCw2ICszMDU0LDY0IEBAIG91
dDoKICAgICByZXR1cm4gcmM7CiB9CiAKKy8qCisgKiBTZXQvY2xlYXIgdGhlICNWRSBzdXBwcmVz
cyBiaXQgZm9yIG11bHRpcGxlIHBhZ2VzLiAgT25seSBhdmFpbGFibGUgb24gVk1YLgorICovCitp
bnQgcDJtX3NldF9zdXBwcmVzc192ZV9tdWx0aShzdHJ1Y3QgZG9tYWluICpkLAorICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHhlbl9odm1fYWx0cDJtX3N1cHByZXNzX3ZlKiBz
dmUpCit7CisgICAgc3RydWN0IHAybV9kb21haW4gKmhvc3RfcDJtID0gcDJtX2dldF9ob3N0cDJt
KGQpOworICAgIHN0cnVjdCBwMm1fZG9tYWluICphcDJtID0gTlVMTDsKKyAgICBzdHJ1Y3QgcDJt
X2RvbWFpbiAqcDJtOworICAgIHVpbnQ2NF90IHN0YXJ0ID0gc3ZlLT5vcGFxdWUgPzogc3ZlLT5n
Zm47CisgICAgaW50IHJjID0gMDsKKworICAgIGlmICggc3ZlLT52aWV3ID4gMCApCisgICAgewor
ICAgICAgICBpZiAoIHN2ZS0+dmlldyA+PSBNQVhfQUxUUDJNIHx8CisgICAgICAgICAgICAgZC0+
YXJjaC5hbHRwMm1fZXB0cFtzdmUtPnZpZXddID09IG1mbl94KElOVkFMSURfTUZOKSApCisgICAg
ICAgICAgICByZXR1cm4gLUVJTlZBTDsKKworICAgICAgICBwMm0gPSBhcDJtID0gZC0+YXJjaC5h
bHRwMm1fcDJtW3N2ZS0+dmlld107CisgICAgfQorICAgIGVsc2UKKyAgICAgICAgcDJtID0gaG9z
dF9wMm07CisKKyAgICBwMm1fbG9jayhob3N0X3AybSk7CisKKyAgICBpZiAoIGFwMm0gKQorICAg
ICAgICBwMm1fbG9jayhhcDJtKTsKKworCisgICAgd2hpbGUgKCBzdGFydCA8IHN2ZS0+bnIgKQor
ICAgIHsKKyAgICAgICAgcDJtX2FjY2Vzc190IGE7CisgICAgICAgIHAybV90eXBlX3QgdDsKKyAg
ICAgICAgbWZuX3QgbWZuOworCisgICAgICAgIGlmICggYWx0cDJtX2dldF9lZmZlY3RpdmVfZW50
cnkocDJtLCBfZ2ZuKHN0YXJ0KSwgJm1mbiwgJnQsICZhLCBBUDJNR0VUX3F1ZXJ5KSApCisgICAg
ICAgICAgICBhID0gcDJtLT5kZWZhdWx0X2FjY2VzczsKKworICAgICAgICBwMm0tPnNldF9lbnRy
eShwMm0sIF9nZm4oc3RhcnQpLCBtZm4sIFBBR0VfT1JERVJfNEssIHQsIGEsIHN2ZS0+c3VwcHJl
c3NfdmUpOworCisgICAgICAgIC8qIENoZWNrIGZvciBjb250aW51YXRpb24gaWYgaXQncyBub3Qg
dGhlIGxhc3QgaXRlcmF0aW9uLiAqLworICAgICAgICBpZiAoIHN2ZS0+bnIgPiArK3N0YXJ0ICYm
IGh5cGVyY2FsbF9wcmVlbXB0X2NoZWNrKCkgKQorICAgICAgICB7CisgICAgICAgICAgICByYyA9
IC1FUkVTVEFSVDsKKyAgICAgICAgICAgIGJyZWFrOworICAgICAgICB9CisgICAgfQorCisgICAg
c3ZlLT5vcGFxdWUgPSBzdGFydDsKKworICAgIGlmICggYXAybSApCisgICAgICAgIHAybV91bmxv
Y2soYXAybSk7CisKKyAgICBwMm1fdW5sb2NrKGhvc3RfcDJtKTsKKworICAgIHJldHVybiByYzsK
K30KKwogaW50IHAybV9nZXRfc3VwcHJlc3NfdmUoc3RydWN0IGRvbWFpbiAqZCwgZ2ZuX3QgZ2Zu
LCBib29sICpzdXBwcmVzc192ZSwKICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGlu
dCBhbHRwMm1faWR4KQogewpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvcHVibGljL2h2bS9odm1f
b3AuaCBiL3hlbi9pbmNsdWRlL3B1YmxpYy9odm0vaHZtX29wLmgKaW5kZXggMzUzZjgwMzRkOS4u
OTgzNGNlMGFlYSAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUvcHVibGljL2h2bS9odm1fb3AuaAor
KysgYi94ZW4vaW5jbHVkZS9wdWJsaWMvaHZtL2h2bV9vcC5oCkBAIC00Miw4ICs0Miw5IEBAIHN0
cnVjdCB4ZW5faHZtX2FsdHAybV9zdXBwcmVzc192ZSB7CiAgICAgdWludDE2X3QgdmlldzsKICAg
ICB1aW50OF90IHN1cHByZXNzX3ZlOyAvKiBCb29sZWFuIHR5cGUuICovCiAgICAgdWludDhfdCBw
YWQxOwotICAgIHVpbnQzMl90IHBhZDI7CisgICAgdWludDMyX3QgbnI7CiAgICAgdWludDY0X3Qg
Z2ZuOworICAgIHVpbnQ2NF90IG9wYXF1ZTsKIH07CiAKICNpZiBfX1hFTl9JTlRFUkZBQ0VfVkVS
U0lPTl9fIDwgMHgwMDA0MDkwMApAQCAtMzM5LDYgKzM0MCw4IEBAIHN0cnVjdCB4ZW5faHZtX2Fs
dHAybV9vcCB7CiAjZGVmaW5lIEhWTU9QX2FsdHAybV92Y3B1X2Rpc2FibGVfbm90aWZ5ICAxMwog
LyogR2V0IHRoZSBhY3RpdmUgdmNwdSBwMm0gaW5kZXggKi8KICNkZWZpbmUgSFZNT1BfYWx0cDJt
X2dldF9wMm1faWR4ICAgICAgICAgIDE0CisvKiBTZXQgdGhlICJTdXByZXNzICNWRSIgYml0IGZv
ciBhIHJhbmdlIG9mIHBhZ2VzICovCisjZGVmaW5lIEhWTU9QX2FsdHAybV9zZXRfc3VwcHJlc3Nf
dmVfbXVsdGkgMTUKICAgICBkb21pZF90IGRvbWFpbjsKICAgICB1aW50MTZfdCBwYWQxOwogICAg
IHVpbnQzMl90IHBhZDI7CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS94ZW4vbWVtX2FjY2Vzcy5o
IGIveGVuL2luY2x1ZGUveGVuL21lbV9hY2Nlc3MuaAppbmRleCBlNGQyNDUwMmUwLi5mZmVjZDI2
NTBlIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vbWVtX2FjY2Vzcy5oCisrKyBiL3hlbi9p
bmNsdWRlL3hlbi9tZW1fYWNjZXNzLmgKQEAgLTc1LDYgKzc1LDkgQEAgbG9uZyBwMm1fc2V0X21l
bV9hY2Nlc3NfbXVsdGkoc3RydWN0IGRvbWFpbiAqZCwKIGludCBwMm1fc2V0X3N1cHByZXNzX3Zl
KHN0cnVjdCBkb21haW4gKmQsIGdmbl90IGdmbiwgYm9vbCBzdXBwcmVzc192ZSwKICAgICAgICAg
ICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBhbHRwMm1faWR4KTsKIAoraW50IHAybV9zZXRf
c3VwcHJlc3NfdmVfbXVsdGkoc3RydWN0IGRvbWFpbiAqZCwKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN0cnVjdCB4ZW5faHZtX2FsdHAybV9zdXBwcmVzc192ZSogc3VwcHJlc3NfdmUp
OworCiBpbnQgcDJtX2dldF9zdXBwcmVzc192ZShzdHJ1Y3QgZG9tYWluICpkLCBnZm5fdCBnZm4s
IGJvb2wgKnN1cHByZXNzX3ZlLAogICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50
IGFsdHAybV9pZHgpOwogCi0tIAoyLjE3LjEKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0
cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlz
dGluZm8veGVuLWRldmVs

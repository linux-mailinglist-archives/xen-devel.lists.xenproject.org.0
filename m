Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 84696173734
	for <lists+xen-devel@lfdr.de>; Fri, 28 Feb 2020 13:29:47 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j7ejm-0000bQ-42; Fri, 28 Feb 2020 12:27:26 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=F9pE=4Q=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1j7ejl-0000bA-9k
 for xen-devel@lists.xenproject.org; Fri, 28 Feb 2020 12:27:25 +0000
X-Inumbo-ID: ac70ccf0-5a25-11ea-991c-12813bfff9fa
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id ac70ccf0-5a25-11ea-991c-12813bfff9fa;
 Fri, 28 Feb 2020 12:27:24 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id A1FF4AF33;
 Fri, 28 Feb 2020 12:27:23 +0000 (UTC)
From: Jan Beulich <jbeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
References: <e53b3573-9c9a-734c-df67-6f6da7fd8ef4@suse.com>
Message-ID: <a3703073-0c24-5129-faab-34a3bbb3f3a0@suse.com>
Date: Fri, 28 Feb 2020 13:27:33 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.5.0
MIME-Version: 1.0
In-Reply-To: <e53b3573-9c9a-734c-df67-6f6da7fd8ef4@suse.com>
Content-Language: en-US
Subject: [Xen-devel] [PATCH 5/5] IOMMU: iommu_snoop is x86/HVM-only
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Kevin Tian <kevin.tian@intel.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Konrad Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SW4gZmFjdCBpdCdzIFZULWQgc3BlY2lmaWMsIGJ1dCB3ZSBkb24ndCBoYXZlIGEgd2F5IHlldCB0
byBidWlsZCBjb2RlCmZvciBqdXN0IG9uZSB2ZW5kb3IuIFByb3ZpZGUgYSAjZGVmaW5lIGZvciBh
bGwgb3RoZXIgY2FzZXMuCgpTaWduZWQtb2ZmLWJ5OiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3Vz
ZS5jb20+CgotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5jCisrKyBiL3hlbi9k
cml2ZXJzL3Bhc3N0aHJvdWdoL2lvbW11LmMKQEAgLTMyLDcgKzMyLDYgQEAgYm9vbF90IF9fcmVh
ZF9tb3N0bHkgaW9tbXVfZW5hYmxlZDsKIGJvb2xfdCBfX3JlYWRfbW9zdGx5IGZvcmNlX2lvbW11
OwogYm9vbF90IF9fcmVhZF9tb3N0bHkgaW9tbXVfdmVyYm9zZTsKIGJvb2wgX19yZWFkX21vc3Rs
eSBpb21tdV9xdWFyYW50aW5lID0gdHJ1ZTsKLWJvb2xfdCBfX3JlYWRfbW9zdGx5IGlvbW11X3Nu
b29wID0gMTsKIGJvb2xfdCBfX3JlYWRfbW9zdGx5IGlvbW11X2NyYXNoX2Rpc2FibGU7CiAKIHN0
YXRpYyBib29sIF9faHdkb21faW5pdGRhdGEgaW9tbXVfaHdkb21fbm9uZTsKQEAgLTc5LDggKzc4
LDEwIEBAIHN0YXRpYyBpbnQgX19pbml0IHBhcnNlX2lvbW11X3BhcmFtKGNvbnMKICNlbmRpZgog
ICAgICAgICBlbHNlIGlmICggKHZhbCA9IHBhcnNlX2Jvb2xlYW4oInZlcmJvc2UiLCBzLCBzcykp
ID49IDAgKQogICAgICAgICAgICAgaW9tbXVfdmVyYm9zZSA9IHZhbDsKKyNpZm5kZWYgaW9tbXVf
c25vb3AKICAgICAgICAgZWxzZSBpZiAoICh2YWwgPSBwYXJzZV9ib29sZWFuKCJzbm9vcCIsIHMs
IHNzKSkgPj0gMCApCiAgICAgICAgICAgICBpb21tdV9zbm9vcCA9IHZhbDsKKyNlbmRpZgogI2lm
bmRlZiBpb21tdV9pbnRyZW1hcAogICAgICAgICBlbHNlIGlmICggKHZhbCA9IHBhcnNlX2Jvb2xl
YW4oImludHJlbWFwIiwgcywgc3MpKSA+PSAwICkKICAgICAgICAgICAgIGlvbW11X2ludHJlbWFw
ID0gdmFsID8gaW9tbXVfaW50cmVtYXBfZnVsbCA6IGlvbW11X2ludHJlbWFwX29mZjsKQEAgLTQ4
OCw3ICs0ODksOSBAQCBpbnQgX19pbml0IGlvbW11X3NldHVwKHZvaWQpCiAgICAgcHJpbnRrKCJJ
L08gdmlydHVhbGlzYXRpb24gJXNhYmxlZFxuIiwgaW9tbXVfZW5hYmxlZCA/ICJlbiIgOiAiZGlz
Iik7CiAgICAgaWYgKCAhaW9tbXVfZW5hYmxlZCApCiAgICAgewotICAgICAgICBpb21tdV9zbm9v
cCA9IDA7CisjaWZuZGVmIGlvbW11X3Nub29wCisgICAgICAgIGlvbW11X3Nub29wID0gZmFsc2U7
CisjZW5kaWYKICAgICAgICAgaW9tbXVfaHdkb21fcGFzc3Rocm91Z2ggPSBmYWxzZTsKICAgICAg
ICAgaW9tbXVfaHdkb21fc3RyaWN0ID0gZmFsc2U7CiAgICAgfQotLS0gYS94ZW4vZHJpdmVycy9w
YXNzdGhyb3VnaC92dGQvaW9tbXUuYworKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC92dGQv
aW9tbXUuYwpAQCAtNTIsNiArNTIsOSBAQCBib29sIF9fcmVhZF9tb3N0bHkgdW50cnVzdGVkX21z
aTsKIAogYm9vbCBfX3JlYWRfbW9zdGx5IGlvbW11X2lnZnggPSB0cnVlOwogYm9vbCBfX3JlYWRf
bW9zdGx5IGlvbW11X3FpbnZhbCA9IHRydWU7CisjaWZuZGVmIGlvbW11X3Nub29wCitib29sIF9f
cmVhZF9tb3N0bHkgaW9tbXVfc25vb3AgPSB0cnVlOworI2VuZGlmCiAKIGludCBucl9pb21tdXM7
CiAKQEAgLTIyODgsOCArMjI5MSwxMCBAQCBzdGF0aWMgaW50IF9faW5pdCB2dGRfc2V0dXAodm9p
ZCkKICAgICAgICAgICAgICAgIGNhcF9zcHNfMm1iKGlvbW11LT5jYXApID8gIiwgMk1CIiA6ICIi
LAogICAgICAgICAgICAgICAgY2FwX3Nwc18xZ2IoaW9tbXUtPmNhcCkgPyAiLCAxR0IiIDogIiIp
OwogCisjaWZuZGVmIGlvbW11X3Nub29wCiAgICAgICAgIGlmICggaW9tbXVfc25vb3AgJiYgIWVj
YXBfc25wX2N0bChpb21tdS0+ZWNhcCkgKQotICAgICAgICAgICAgaW9tbXVfc25vb3AgPSAwOwor
ICAgICAgICAgICAgaW9tbXVfc25vb3AgPSBmYWxzZTsKKyNlbmRpZgogCiAgICAgICAgIGlmICgg
aW9tbXVfaHdkb21fcGFzc3Rocm91Z2ggJiYgIWVjYXBfcGFzc190aHJ1KGlvbW11LT5lY2FwKSAp
CiAgICAgICAgICAgICBpb21tdV9od2RvbV9wYXNzdGhyb3VnaCA9IGZhbHNlOwpAQCAtMjMzMSw3
ICsyMzM2LDkgQEAgc3RhdGljIGludCBfX2luaXQgdnRkX3NldHVwKHZvaWQpCiAgICAgfQogCiAj
ZGVmaW5lIFAocCxzKSBwcmludGsoIkludGVsIFZULWQgJXMgJXNlbmFibGVkLlxuIiwgcywgKHAp
PyAiIiA6ICJub3QgIikKKyNpZm5kZWYgaW9tbXVfc25vb3AKICAgICBQKGlvbW11X3Nub29wLCAi
U25vb3AgQ29udHJvbCIpOworI2VuZGlmCiAgICAgUChpb21tdV9od2RvbV9wYXNzdGhyb3VnaCwg
IkRvbTAgRE1BIFBhc3N0aHJvdWdoIik7CiAgICAgUChpb21tdV9xaW52YWwsICJRdWV1ZWQgSW52
YWxpZGF0aW9uIik7CiAgICAgUChpb21tdV9pbnRyZW1hcCwgIkludGVycnVwdCBSZW1hcHBpbmci
KTsKQEAgLTIzNTEsNyArMjM1OCw5IEBAIHN0YXRpYyBpbnQgX19pbml0IHZ0ZF9zZXR1cCh2b2lk
KQogCiAgZXJyb3I6CiAgICAgaW9tbXVfZW5hYmxlZCA9IDA7Ci0gICAgaW9tbXVfc25vb3AgPSAw
OworI2lmbmRlZiBpb21tdV9zbm9vcAorICAgIGlvbW11X3Nub29wID0gZmFsc2U7CisjZW5kaWYK
ICAgICBpb21tdV9od2RvbV9wYXNzdGhyb3VnaCA9IGZhbHNlOwogICAgIGlvbW11X3FpbnZhbCA9
IDA7CiAgICAgaW9tbXVfaW50cmVtYXAgPSBpb21tdV9pbnRyZW1hcF9vZmY7Ci0tLSBhL3hlbi9p
bmNsdWRlL3hlbi9pb21tdS5oCisrKyBiL3hlbi9pbmNsdWRlL3hlbi9pb21tdS5oCkBAIC01NCw3
ICs1NCw2IEBAIHN0YXRpYyBpbmxpbmUgYm9vbF90IGRmbl9lcShkZm5fdCB4LCBkZm4KIAogZXh0
ZXJuIGJvb2xfdCBpb21tdV9lbmFibGUsIGlvbW11X2VuYWJsZWQ7CiBleHRlcm4gYm9vbCBmb3Jj
ZV9pb21tdSwgaW9tbXVfcXVhcmFudGluZSwgaW9tbXVfdmVyYm9zZTsKLWV4dGVybiBib29sX3Qg
aW9tbXVfc25vb3A7CiAKICNpZmRlZiBDT05GSUdfWDg2CiBleHRlcm4gZW51bSBfX3BhY2tlZCBp
b21tdV9pbnRyZW1hcCB7CkBAIC03Miw5ICs3MSwxMCBAQCBleHRlcm4gYm9vbCBpb21tdV9pZ2Z4
LCBpb21tdV9xaW52YWw7CiAjZW5kaWYKIAogI2lmIGRlZmluZWQoQ09ORklHX1g4NikgJiYgZGVm
aW5lZChDT05GSUdfSFZNKQotZXh0ZXJuIGJvb2wgaW9tbXVfaW50cG9zdDsKK2V4dGVybiBib29s
IGlvbW11X2ludHBvc3QsIGlvbW11X3Nub29wOwogI2Vsc2UKICMgZGVmaW5lIGlvbW11X2ludHBv
c3QgZmFsc2UKKyMgZGVmaW5lIGlvbW11X3Nub29wIGZhbHNlCiAjZW5kaWYKIAogI2lmIGRlZmlu
ZWQoQ09ORklHX0lPTU1VX0ZPUkNFX1BUX1NIQVJFKQoKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVs
QGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1h
bi9saXN0aW5mby94ZW4tZGV2ZWw=

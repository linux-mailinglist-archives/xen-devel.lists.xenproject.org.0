Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 72BD7D52FF
	for <lists+xen-devel@lfdr.de>; Sun, 13 Oct 2019 00:15:53 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iJPc8-0004h0-K8; Sat, 12 Oct 2019 22:11:52 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=QqvL=YF=invisiblethingslab.com=marmarek@srs-us1.protection.inumbo.net>)
 id 1iJPc7-0004gv-Jb
 for xen-devel@lists.xenproject.org; Sat, 12 Oct 2019 22:11:51 +0000
X-Inumbo-ID: 49b2a796-ed3d-11e9-9357-12813bfff9fa
Received: from new4-smtp.messagingengine.com (unknown [66.111.4.230])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 49b2a796-ed3d-11e9-9357-12813bfff9fa;
 Sat, 12 Oct 2019 22:11:49 +0000 (UTC)
Received: from compute7.internal (compute7.nyi.internal [10.202.2.47])
 by mailnew.nyi.internal (Postfix) with ESMTP id 8E71545DD;
 Sat, 12 Oct 2019 18:11:49 -0400 (EDT)
Received: from mailfrontend1 ([10.202.2.162])
 by compute7.internal (MEProxy); Sat, 12 Oct 2019 18:11:49 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=
 messagingengine.com; h=cc:content-transfer-encoding:content-type
 :date:from:in-reply-to:message-id:mime-version:references
 :subject:to:x-me-proxy:x-me-proxy:x-me-sender:x-me-sender
 :x-sasl-enc; s=fm1; bh=dhN9XLWymbZetMZiecRlUKc2O4wr65xVEnMfSsVMK
 HU=; b=eGhq1WzelRP2T4I3K6/NrdYKOC/yudbYR2pYo7ASaMAGAEU2ZHv+B4Ggm
 AsRND9m7vzHMOXkqONynz1YgogDzpDfFRkufUKIR0mTQ+8EE6SnRrC/yZIMR9J6C
 XBmxc2bKQo2i2AOuzf92vm7jBrAGoaXSAWVt+cXYWV1avpmq5w8NxSs99lrT2ocS
 99/U0/POusOzNrOoxRD9S1zq2U73iH7V4q/t5H2kJqKz5LW43CpQwga7hSrkHS52
 u+odzFAb3Bx7HhLC7EadgqRdO0pDUGG8PdaXHe8MvcWeTJts7pgOT5ydFc5HtZah
 mNLlRfh0kGix7/GY4Zj8AUnNSX52A==
X-ME-Sender: <xms:pU-iXSsrYjON66r9HgUxA89MrgIFX4ZVg0NkxhOKH5zYllGVqTXBXQ>
X-ME-Proxy-Cause: gggruggvucftvghtrhhoucdtuddrgedufedrieekgddtjecutefuodetggdotefrodftvf
 curfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfghnecu
 uegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenuc
 fjughrpefhvffufffkofgjfhggtgfgsehtkeertdertdejnecuhfhrohhmpeforghrvghk
 ucforghrtgiihihkohifshhkihdqifpkrhgvtghkihcuoehmrghrmhgrrhgvkhesihhnvh
 hishhisghlvghthhhinhhgshhlrggsrdgtohhmqeenucfkphepledurdeihedrfeegrdef
 feenucfrrghrrghmpehmrghilhhfrhhomhepmhgrrhhmrghrvghksehinhhvihhsihgslh
 gvthhhihhnghhslhgrsgdrtghomhenucevlhhushhtvghrufhiiigvpedu
X-ME-Proxy: <xmx:pU-iXcX2iSullHQwMAilcNUW4bupSP9MWQHvXTRMU43kXUBiP283jw>
 <xmx:pU-iXbUgOymdtR85rJGQ6xbQfBbjnQze9jOEgmp9uudXSMgHBQSMrg>
 <xmx:pU-iXfRaDte2Dm0FBY4yEs8QWdWHt1W_3Excrfz3w335A0UK4xyNrw>
 <xmx:pU-iXbGrctqSSBNRiQp4C4Wo9ijoogX1GosNVEQFyQz3fvP4loUUIw>
Received: from localhost.localdomain (ip5b412221.dynamic.kabel-deutschland.de
 [91.65.34.33])
 by mail.messagingengine.com (Postfix) with ESMTPA id E7A1980059;
 Sat, 12 Oct 2019 18:11:47 -0400 (EDT)
From: =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>
To: xen-devel@lists.xenproject.org
Date: Sun, 13 Oct 2019 00:11:39 +0200
Message-Id: <aedda92afd26caac474870d44504074d3b2ff6d0.1570918263.git-series.marmarek@invisiblethingslab.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.b80738fa53144bc6e5e32c048ccf4e4b95355844.1570918263.git-series.marmarek@invisiblethingslab.com>
References: <cover.b80738fa53144bc6e5e32c048ccf4e4b95355844.1570918263.git-series.marmarek@invisiblethingslab.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v3 2/2] xen/efi: optionally call
 SetVirtualAddressMap()
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

U29tZSBVRUZJIGltcGxlbWVudGF0aW9ucyBhcmUgbm90IGhhcHB5IGFib3V0IHJ1bm5pbmcgaW4g
MToxIGFkZHJlc3NpbmcsCmJ1dCByZWFsbHkgdmlydHVhbCBhZGRyZXNzIHNwYWNlLiBTcGVjaWZp
Y2FsbHksIHNvbWUgYWNjZXNzCkVmaUJvb3RTZXJ2aWNlc3tDb2RlLERhdGF9LCBvciBldmVuIHRv
dGFsbHkgdW5tYXBwZWQgYXJlYXMuIEV4YW1wbGUKY3Jhc2ggb2YgR2V0VmFyaWFibGUoKSBjYWxs
IG9uIFRoaW5rcGFkIFc1NDA6CgogICAgWGVuIGNhbGwgdHJhY2U6CiAgICAgICBbPDAwMDAwMDAw
MDAwMDAwODA+XSAwMDAwMDAwMDAwMDAwMDgwCiAgICAgICBbPDhjMmIwMzk4ZTAwMDBkYWE+XSA4
YzJiMDM5OGUwMDAwZGFhCgogICAgUGFnZXRhYmxlIHdhbGsgZnJvbSBmZmZmZmZmZjg1ODQ4M2Ex
OgogICAgICAgTDRbMHgxZmZdID0gMDAwMDAwMDAwMDAwMDAwMCBmZmZmZmZmZmZmZmZmZmZmCgog
ICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgUGFuaWMgb24g
Q1BVIDA6CiAgICBGQVRBTCBQQUdFIEZBVUxUCiAgICBbZXJyb3JfY29kZT0wMDAyXQogICAgRmF1
bHRpbmcgbGluZWFyIGFkZHJlc3M6IGZmZmZmZmZmODU4NDgzYTEKICAgICoqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioKCkZpeCB0aGlzIGJ5IGNhbGxpbmcgU2V0VmlydHVh
bEFkZHJlc3NNYXAoKSBydW50aW1lIHNlcnZpY2UsIGdpdmluZyBpdAoxOjEgbWFwIGZvciBhcmVh
cyBtYXJrZWQgYXMgbmVlZGVkIGR1cmluZyBydW50aW1lLiBUaGUgYWRkcmVzcyBzcGFjZSBpbgp3
aGljaCBFRkkgcnVudGltZSBzZXJ2aWNlcyBhcmUgY2FsbGVkIGlzIHVuY2hhbmdlZCwgYnV0IFVF
RkkgdmlldyBvZiBpdAptYXkgYmUuClNldFZpcnR1YWxBZGRyZXNzTWFwKCkgY2FuIGJlIGNhbGxl
ZCBvbmx5IG9uY2UsIHNvIGl0IG1pZ2h0IG1ha2UKZnV0dXJlIGtleGVjIEVGSSBwbHVtYmluZyBt
b3JlIGNvbXBsZXggb3IgaW5jb21wYXRpYmxlIHdpdGggdGhpcyBvcHRpb24uClNpbmNlIGl0J3Mg
ZmFpcmx5IGxhdGUgaW4gWGVuIDQuMTMgZGV2ZWxvcG1lbnQgY3ljbGUsIGRpc2FibGUgaXQKYnkg
ZGVmYXVsdCBhbmQgaGlkZSBiZWhpbmQgRVhQRVJULgoKU2lnbmVkLW9mZi1ieTogTWFyZWsgTWFy
Y3p5a293c2tpLUfDs3JlY2tpIDxtYXJtYXJla0BpbnZpc2libGV0aGluZ3NsYWIuY29tPgotLS0K
Q2hhbmdlcyBpbiB2MjoKIC0gY2FsbCAgU2V0VmlydHVhbEFkZHJlc3NNYXAoKSBiZWZvcmUgYWRq
dXN0aW5nIGVmaSBwb2ludGVyczsgZXNwZWNpYWxseQogICBlZmlfbWVtbWFwIGF0IHRoaXMgcG9p
bnQgc3RpbGwgbmVlZHMgdG8gdXNlIHBoeXNpY2FsIGFkZHJlc3MsIG5vdCBhCiAgIGRpcmVjdG1h
cCBvbmUKQ2hhbmdlcyBpbiB2MzoKIC0gY2xhcmlmeSBpbXBhY3QgKG9yIHJhdGhlcjogbGFjayBv
ZiBpdCkgb24ga2V4ZWMsIGRyb3AgIUtFWEVDCiAgIGRlcGVuZGVuY3kuCi0tLQogeGVuL2NvbW1v
bi9LY29uZmlnICAgIHwgMTMgKysrKysrKysrKysrKwogeGVuL2NvbW1vbi9lZmkvYm9vdC5jIHwg
MjggKysrKysrKysrKysrKysrKysrKysrKysrKystLQogMiBmaWxlcyBjaGFuZ2VkLCAzOSBpbnNl
cnRpb25zKCspLCAyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vS2NvbmZp
ZyBiL3hlbi9jb21tb24vS2NvbmZpZwppbmRleCAxNjgyOWY2Li40YWQ0NTM0IDEwMDY0NAotLS0g
YS94ZW4vY29tbW9uL0tjb25maWcKKysrIGIveGVuL2NvbW1vbi9LY29uZmlnCkBAIC04OCw2ICs4
OCwxOSBAQCBjb25maWcgS0VYRUMKIAogCSAgSWYgdW5zdXJlLCBzYXkgWS4KIAorY29uZmlnIFNF
VF9WSVJUVUFMX0FERFJFU1NfTUFQCisgICAgYm9vbCAiRUZJOiBjYWxsIFNldFZpcnR1YWxBZGRy
ZXNzTWFwKCkiIGlmIEVYUEVSVCA9ICJ5IgorICAgIGRlZmF1bHQgbgorICAgIC0tLWhlbHAtLS0K
KyAgICAgIENhbGwgRUZJIFNldFZpcnR1YWxBZGRyZXNzTWFwKCkgcnVudGltZSBzZXJ2aWNlIHRv
IHNldHVwIG1lbW9yeSBtYXAgZm9yCisgICAgICBmdXJ0aGVyIHJ1bnRpbWUgc2VydmljZXMuIEFj
Y29yZGluZyB0byBVRUZJIHNwZWMsIGl0IGlzbid0IHN0cmljdGx5CisgICAgICBuZWNlc3Nhcnks
IGJ1dCBtYW55IFVFRkkgaW1wbGVtZW50YXRpb25zIG1pc2JlaGF2ZSB3aGVuIHRoaXMgY2FsbCBp
cworICAgICAgbWlzc2luZy4gT24gdGhlIG90aGVyIGhhbmQsIHRoaXMgY2FsbCBjYW4gYmUgbWFk
ZSBvbmx5IG9uY2UsIHdoaWNoIG1pZ2h0CisgICAgICBiZSBpbmNvbXBhdGlibGUgd2l0aCBmdXR1
cmUgRUZJIHN1cHBvcnQgaW4gWGVuJ3Mga2V4ZWMuIEtleGVjIGFiaWxpdHkKKyAgICAgIGluIHRo
ZSBjdXJyZW50IGZvcm0gaXMgbm90IGFmZmVjdGVkLgorCisgICAgICBJZiB1bnN1cmUsIHNheSBO
LgorCiBjb25maWcgWEVOT1BST0YKIAlkZWZfYm9vbCB5CiAJcHJvbXB0ICJYZW4gT3Byb2ZpbGUg
U3VwcG9ydCIgaWYgRVhQRVJUID0gInkiCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL2VmaS9ib290
LmMgYi94ZW4vY29tbW9uL2VmaS9ib290LmMKaW5kZXggY2RkZjNkZS4uNmVhYWJkNCAxMDA2NDQK
LS0tIGEveGVuL2NvbW1vbi9lZmkvYm9vdC5jCisrKyBiL3hlbi9jb21tb24vZWZpL2Jvb3QuYwpA
QCAtMTA1NiwxMSArMTA1NiwxNyBAQCBzdGF0aWMgdm9pZCBfX2luaXQgZWZpX3NldF9nb3BfbW9k
ZShFRklfR1JBUEhJQ1NfT1VUUFVUX1BST1RPQ09MICpnb3AsIFVJTlROIGdvcAogICAgICAgICBl
ZmlfYXJjaF92aWRlb19pbml0KGdvcCwgaW5mb19zaXplLCBtb2RlX2luZm8pOwogfQogCisjZGVm
aW5lIElOVkFMSURfVklSVFVBTF9BRERSRVNTICgweEJBQUFEVUwgPDwgXAorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgKEVGSV9QQUdFX1NISUZUICsgQklUU19QRVJfTE9ORyAtIDMy
KSkKKwogc3RhdGljIHZvaWQgX19pbml0IGVmaV9leGl0X2Jvb3QoRUZJX0hBTkRMRSBJbWFnZUhh
bmRsZSwgRUZJX1NZU1RFTV9UQUJMRSAqU3lzdGVtVGFibGUpCiB7CiAgICAgRUZJX1NUQVRVUyBz
dGF0dXM7CiAgICAgVUlOVE4gaW5mb19zaXplID0gMCwgbWFwX2tleTsKICAgICBib29sIHJldHJ5
OworI2lmZGVmIENPTkZJR19TRVRfVklSVFVBTF9BRERSRVNTX01BUAorICAgIHVuc2lnbmVkIGlu
dCBpOworI2VuZGlmCiAKICAgICBlZmlfYnMtPkdldE1lbW9yeU1hcCgmaW5mb19zaXplLCBOVUxM
LCAmbWFwX2tleSwKICAgICAgICAgICAgICAgICAgICAgICAgICAmZWZpX21kZXNjX3NpemUsICZt
ZGVzY192ZXIpOwpAQCAtMTA5NCw2ICsxMTAwLDI2IEBAIHN0YXRpYyB2b2lkIF9faW5pdCBlZmlf
ZXhpdF9ib290KEVGSV9IQU5ETEUgSW1hZ2VIYW5kbGUsIEVGSV9TWVNURU1fVEFCTEUgKlN5c3Rl
CiAgICAgaWYgKCBFRklfRVJST1Ioc3RhdHVzKSApCiAgICAgICAgIFByaW50RXJyTWVzZyhMIkNh
bm5vdCBleGl0IGJvb3Qgc2VydmljZXMiLCBzdGF0dXMpOwogCisjaWZkZWYgQ09ORklHX1NFVF9W
SVJUVUFMX0FERFJFU1NfTUFQCisgICAgZm9yICggaSA9IDA7IGkgPCBlZmlfbWVtbWFwX3NpemU7
IGkgKz0gZWZpX21kZXNjX3NpemUgKQorICAgIHsKKyAgICAgICAgRUZJX01FTU9SWV9ERVNDUklQ
VE9SICpkZXNjID0gZWZpX21lbW1hcCArIGk7CisKKyAgICAgICAgaWYgKCBkZXNjLT5BdHRyaWJ1
dGUgJiBFRklfTUVNT1JZX1JVTlRJTUUgKQorICAgICAgICAgICAgZGVzYy0+VmlydHVhbFN0YXJ0
ID0gZGVzYy0+UGh5c2ljYWxTdGFydDsKKyAgICAgICAgZWxzZQorICAgICAgICAgICAgZGVzYy0+
VmlydHVhbFN0YXJ0ID0gSU5WQUxJRF9WSVJUVUFMX0FERFJFU1M7CisgICAgfQorICAgIHN0YXR1
cyA9IGVmaV9ycy0+U2V0VmlydHVhbEFkZHJlc3NNYXAoZWZpX21lbW1hcF9zaXplLCBlZmlfbWRl
c2Nfc2l6ZSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1kZXNj
X3ZlciwgZWZpX21lbW1hcCk7CisgICAgaWYgKCBzdGF0dXMgIT0gRUZJX1NVQ0NFU1MgKQorICAg
IHsKKyAgICAgICAgcHJpbnRrKFhFTkxPR19FUlIgIkVGSTogU2V0VmlydHVhbEFkZHJlc3NNYXAo
KSBmYWlsZWQgKCUjbHgpLCBkaXNhYmxpbmcgcnVudGltZSBzZXJ2aWNlc1xuIiwKKyAgICAgICAg
ICAgICAgIHN0YXR1cyk7CisgICAgICAgIF9fY2xlYXJfYml0KEVGSV9SUywgJmVmaV9mbGFncyk7
CisgICAgfQorI2VuZGlmCisKICAgICAvKiBBZGp1c3QgcG9pbnRlcnMgaW50byBFRkkuICovCiAg
ICAgZWZpX2N0ID0gKHZvaWQgKillZmlfY3QgKyBESVJFQ1RNQVBfVklSVF9TVEFSVDsKICAgICBl
ZmlfbWVtbWFwID0gKHZvaWQgKillZmlfbWVtbWFwICsgRElSRUNUTUFQX1ZJUlRfU1RBUlQ7CkBA
IC0xNDYwLDggKzE0ODYsNiBAQCBzdGF0aWMgYm9vbCBfX2luaXQgcnRfcmFuZ2VfdmFsaWQodW5z
aWduZWQgbG9uZyBzbWZuLCB1bnNpZ25lZCBsb25nIGVtZm4pCiAgICAgcmV0dXJuIHRydWU7CiB9
CiAKLSNkZWZpbmUgSU5WQUxJRF9WSVJUVUFMX0FERFJFU1MgKDB4QkFBQURVTCA8PCBcCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoRUZJX1BBR0VfU0hJRlQgKyBCSVRTX1BFUl9M
T05HIC0gMzIpKQogCiB2b2lkIF9faW5pdCBlZmlfaW5pdF9tZW1vcnkodm9pZCkKIHsKLS0gCmdp
dC1zZXJpZXMgMC45LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qu
b3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2
ZWw=

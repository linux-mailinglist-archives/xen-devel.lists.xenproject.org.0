Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 85B57AB67A
	for <lists+xen-devel@lfdr.de>; Fri,  6 Sep 2019 12:56:16 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i6BqZ-00052Q-EC; Fri, 06 Sep 2019 10:52:07 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=ai1O=XB=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1i6BqY-00052L-5S
 for xen-devel@lists.xenproject.org; Fri, 06 Sep 2019 10:52:06 +0000
X-Inumbo-ID: 5c55c664-d094-11e9-abed-12813bfff9fa
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 5c55c664-d094-11e9-abed-12813bfff9fa;
 Fri, 06 Sep 2019 10:52:03 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 9B041B643;
 Fri,  6 Sep 2019 10:52:02 +0000 (UTC)
To: =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>
References: <ac7a20e8-9e5e-f664-1d7f-d59105f90223@suse.com>
 <20190906093707.wn5zn4nzqxrffwo3@Air-de-Roger>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <b3ad1cbb-a45b-612c-28b1-e5c203b24676@suse.com>
Date: Fri, 6 Sep 2019 12:52:11 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190906093707.wn5zn4nzqxrffwo3@Air-de-Roger>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v3] IOMMU/x86: make page type checks
 consistent when mapping pages
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: GeorgeDunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMDYuMDkuMjAxOSAxMTozNywgUm9nZXIgUGF1IE1vbm7DqSAgd3JvdGU6Cj4gT24gV2VkLCBK
dWwgMDMsIDIwMTkgYXQgMTI6MTg6NDVQTSArMDAwMCwgSmFuIEJldWxpY2ggd3JvdGU6Cj4+IC0t
LSBhL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYwo+PiArKysgYi94ZW4vYXJjaC94ODYvbW0vcDJtLmMK
Pj4gQEAgLTgyOSwxMyArODI5LDEzIEBAIGd1ZXN0X3BoeXNtYXBfYWRkX3BhZ2Uoc3RydWN0IGRv
bWFpbiAqZCwKPj4gICAgICAgICAgICAqCj4+ICAgICAgICAgICAgKiBSZXRhaW4gdGhpcyBwcm9w
ZXJ0eSBieSBncmFiYmluZyBhIHdyaXRhYmxlIHR5cGUgcmVmIGFuZCB0aGVuCj4+ICAgICAgICAg
ICAgKiBkcm9wcGluZyBpdCBpbW1lZGlhdGVseS4gIFRoZSByZXN1bHQgd2lsbCBiZSBwYWdlcyB0
aGF0IGhhdmUgYQo+PiAtICAgICAgICAgKiB3cml0YWJsZSB0eXBlIChhbmQgYW4gSU9NTVUgZW50
cnkpLCBidXQgYSBjb3VudCBvZiAwIChzdWNoIHRoYXQKPj4gLSAgICAgICAgICogYW55IGd1ZXN0
LXJlcXVlc3RlZCB0eXBlIGNoYW5nZXMgc3VjY2VlZCBhbmQgcmVtb3ZlIHRoZSBJT01NVQo+PiAt
ICAgICAgICAgKiBlbnRyeSkuCj4+ICsgICAgICAgICAqIHdyaXRhYmxlIHR5cGUgKGFuZCBhbiBJ
T01NVSBlbnRyeSBpZiBuZWNlc3NhcnkpLCBidXQgYSBjb3VudCBvZiAwCj4+ICsgICAgICAgICAq
IChzdWNoIHRoYXQgYW55IGd1ZXN0LXJlcXVlc3RlZCB0eXBlIGNoYW5nZXMgc3VjY2VlZCBhbmQg
cmVtb3ZlIHRoZQo+PiArICAgICAgICAgKiBJT01NVSBlbnRyeSkuCj4+ICAgICAgICAgICAgKi8K
Pj4gICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgKDFVTCA8PCBwYWdlX29yZGVyKTsgKytpLCAr
K3BhZ2UgKQo+PiAgICAgICAgICAgewo+PiAtICAgICAgICAgICAgaWYgKCAhbmVlZF9pb21tdV9w
dF9zeW5jKGQpICkKPj4gKyAgICAgICAgICAgIGlmICggIWlvbW11X2VuYWJsZWQgKQo+IAo+IFRo
YXQncyBraW5kIG9mIGEgc3Ryb25nIGNoZWNrIGZvciBhIGRvbWFpbiB0aGF0IG1pZ2h0IG5ldmVy
IHVzZSB0aGUKPiBpb21tdSBhdCBhbGwuIElzbid0IGl0IGZpbmUgdG8ganVzdCByZWx5IG9uCj4g
YXJjaF9pb21tdV9wb3B1bGF0ZV9wYWdlX3RhYmxlIGZpbmRpbmcgbm9uLXdyaXRhYmxlIHBhZ2Vz
IGFuZCB0aHVzIG5vdAo+IGFkZGluZyB0aGVtIHRvIHRoZSBpb21tdSBwYWdlLXRhYmxlcz8KCk5v
IC0gdGhlIGNvZGUgY2hhbmdlIGhlcmUgaXMgdG8gdGFrZSBjYXJlIG9mIHBhZ2UgYWRkaXRpb25z
IHRvCnRoZSBkb21haW4gYWZ0ZXIgaXQgaGFzIGJvb3RlZC4KCj4+IC0tLSBhL3hlbi9kcml2ZXJz
L3Bhc3N0aHJvdWdoL2lvbW11LmMKPj4gKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvaW9t
bXUuYwo+PiBAQCAtMTkyLDI4ICsxOTIsNDYgQEAgdm9pZCBfX2h3ZG9tX2luaXQgaW9tbXVfaHdk
b21faW5pdChzdHJ1Ywo+PiAgICAgICAgICAgdW5zaWduZWQgaW50IGkgPSAwLCBmbHVzaF9mbGFn
cyA9IDA7Cj4+ICAgICAgICAgICBpbnQgcmMgPSAwOwo+PiAgIAo+PiArICAgICAgICB0aGlzX2Nw
dShpb21tdV9kb250X2ZsdXNoX2lvdGxiKSA9IHRydWU7Cj4+ICsKPj4gICAgICAgICAgIHBhZ2Vf
bGlzdF9mb3JfZWFjaCAoIHBhZ2UsICZkLT5wYWdlX2xpc3QgKQo+PiAgICAgICAgICAgewo+PiAt
ICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBtZm4gPSBtZm5feChwYWdlX3RvX21mbihwYWdlKSk7
Cj4+IC0gICAgICAgICAgICB1bnNpZ25lZCBsb25nIGRmbiA9IG1mbl90b19nbWZuKGQsIG1mbik7
Cj4+IC0gICAgICAgICAgICB1bnNpZ25lZCBpbnQgbWFwcGluZyA9IElPTU1VRl9yZWFkYWJsZTsK
Pj4gLSAgICAgICAgICAgIGludCByZXQ7Cj4+IC0KPj4gLSAgICAgICAgICAgIGlmICggKChwYWdl
LT51LmludXNlLnR5cGVfaW5mbyAmIFBHVF9jb3VudF9tYXNrKSA9PSAwKSB8fAo+PiAtICAgICAg
ICAgICAgICAgICAoKHBhZ2UtPnUuaW51c2UudHlwZV9pbmZvICYgUEdUX3R5cGVfbWFzaykKPj4g
LSAgICAgICAgICAgICAgICAgID09IFBHVF93cml0YWJsZV9wYWdlKSApCj4+IC0gICAgICAgICAg
ICAgICAgbWFwcGluZyB8PSBJT01NVUZfd3JpdGFibGU7Cj4+IC0KPj4gLSAgICAgICAgICAgIHJl
dCA9IGlvbW11X21hcChkLCBfZGZuKGRmbiksIF9tZm4obWZuKSwgMCwgbWFwcGluZywKPj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAmZmx1c2hfZmxhZ3MpOwo+PiAtCj4+IC0gICAgICAg
ICAgICBpZiAoICFyYyApCj4+IC0gICAgICAgICAgICAgICAgcmMgPSByZXQ7Cj4+ICsgICAgICAg
ICAgICBzd2l0Y2ggKCBwYWdlLT51LmludXNlLnR5cGVfaW5mbyAmIFBHVF90eXBlX21hc2sgKQo+
PiArICAgICAgICAgICAgewo+PiArICAgICAgICAgICAgY2FzZSBQR1Rfbm9uZToKPj4gKyAgICAg
ICAgICAgICAgICBpZiAoIGlzX3B2X2RvbWFpbihkKSApCj4+ICsgICAgICAgICAgICAgICAgewo+
PiArICAgICAgICAgICAgICAgICAgICBBU1NFUlQoIShwYWdlLT51LmludXNlLnR5cGVfaW5mbyAm
IFBHVF9jb3VudF9tYXNrKSk7Cj4+ICsgICAgICAgICAgICAgICAgICAgIGlmICggZ2V0X3BhZ2Vf
YW5kX3R5cGUocGFnZSwgZCwgUEdUX3dyaXRhYmxlX3BhZ2UpICkKPiAKPiBDb3VsZCB5b3UgYWRk
IGEgY29tbWVudCB0aGF0IGdldF9wYWdlX2FuZF90eXBlIHdpbGwgYWRkIGFuIGlvbW11Cj4gZW50
cnkgaWYgc3VjY2VlZGluZz8KCldlbGwsIHllcywgSSBjb3VsZCwgYnV0IHRoaXMgd291bGQganVz
dCByZS1zdGF0ZSB3aGF0IHRoZSByZXNwZWN0aXZlCnNlY3Rpb24gb2YgdGhlIGJpZyBjb21tZW50
IGF0IHRoZSB0b3Agb2YgbW0uYyBlZmZlY3RpdmVseSBzYXlzLgoKQW55d2F5IC0gYXMgbG9uZyBh
cyBQYXVsJ3MgInJlbW92ZSBsYXRlIChvbi1kZW1hbmQpIGNvbnN0cnVjdGlvbiBvZgpJT01NVSBw
YWdlIHRhYmxlcyIgd291bGQgZ28gaW4gYW55IHRpbWUgc29vbiwgdGhpcyB3aWxsIGFsbCBiZWNv
bWUKdW5uZWNlc3NhcnkgYW55d2F5LgoKPj4gKyAgICAgICAgICAgICAgICAgICAgewo+PiArICAg
ICAgICAgICAgICAgICAgICAgICAgcHV0X3BhZ2VfYW5kX3R5cGUocGFnZSk7Cj4+ICsgICAgICAg
ICAgICAgICAgICAgICAgICBmbHVzaF9mbGFncyB8PSBJT01NVUZfcmVhZGFibGUgfCBJT01NVUZf
d3JpdGFibGU7Cj4+ICsgICAgICAgICAgICAgICAgICAgIH0KPj4gKyAgICAgICAgICAgICAgICAg
ICAgZWxzZSBpZiAoICFyYyApCj4+ICsgICAgICAgICAgICAgICAgICAgICAgICByYyA9IC1FQlVT
WTsKPiAKPiBJcyBpdCBmaW5lIHRvIHJldHVybiBhbiBlcnJvciBoZXJlPyBBRkFJQ1QgeW91IGNv
dWxkIGhhdmUgYSBSTyBwYWdlCj4gc2hhcmVkIHdpdGggWGVuIHdpdGggUEdUX25vbmUsIGFuZCBu
b3QgaGF2aW5nIGFuIGlvbW11IG1hcHBpbmcgZm9yIGl0Cj4gd291bGQgYmUgZXhwZWN0ZWQsIGhl
bmNlIHJldHVybmluZyBhbiBlcnJvciBzZWVtcyB3cm9uZz8KCk5vLCBwYWdlcyBzaGFyZWQgd2l0
aCBYZW4gZG9uJ3QgbGl2ZSBvbiBkLT5wYWdlX2xpc3QgKHdoaWNoIGlzIHdoYXQgdGhlCmxvb3Ag
aXRlcmF0ZXMgb3ZlcikuCgpKYW4KCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnBy
b2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94
ZW4tZGV2ZWw=

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 453A5C1410
	for <lists+xen-devel@lfdr.de>; Sun, 29 Sep 2019 11:21:59 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iEVMZ-0004vF-EJ; Sun, 29 Sep 2019 09:19:31 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=kiTL=XY=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1iEVMY-0004v5-Ap
 for xen-devel@lists.xen.org; Sun, 29 Sep 2019 09:19:30 +0000
X-Inumbo-ID: 3d327288-e29a-11e9-97fb-bc764e2007e4
Received: from foss.arm.com (unknown [217.140.110.172])
 by localhost (Halon) with ESMTP
 id 3d327288-e29a-11e9-97fb-bc764e2007e4;
 Sun, 29 Sep 2019 09:19:29 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id DDBD728;
 Sun, 29 Sep 2019 02:19:28 -0700 (PDT)
Received: from [10.37.8.142] (unknown [10.37.8.142])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 9C9143F739;
 Sun, 29 Sep 2019 02:19:27 -0700 (PDT)
To: Stefano Stabellini <sstabellini@kernel.org>
References: <alpine.DEB.2.21.1909261608430.2594@sstabellini-ThinkPad-T480s>
 <20190926231144.16297-4-sstabellini@kernel.org>
From: Julien Grall <julien.grall@arm.com>
Message-ID: <4eb42f7b-db63-3e1b-c338-84d45bff9837@arm.com>
Date: Sun, 29 Sep 2019 10:19:26 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190926231144.16297-4-sstabellini@kernel.org>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v6 4/8] xen/arm: copy dtb fragment to guest
 dtb
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Volodymyr_Babchuk@epam.com, Achin.Gupta@arm.com, andrii_anisov@epam.com,
 Stefano Stabellini <stefanos@xilinx.com>, xen-devel@lists.xen.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGksCgpPbiA5LzI3LzE5IDEyOjExIEFNLCBTdGVmYW5vIFN0YWJlbGxpbmkgd3JvdGU6Cj4gUmVh
ZCB0aGUgZHRiIGZyYWdtZW50IGNvcnJlc3BvbmRpbmcgdG8gYSBwYXNzdGhyb3VnaCBkZXZpY2Ug
ZnJvbSBtZW1vcnkKPiBhdCB0aGUgbG9jYXRpb24gcmVmZXJyZWQgdG8gYnkgdGhlICJtdWx0aWJv
b3QsZGV2aWNlLXRyZWUiIGNvbXBhdGlibGUKPiBub2RlLgo+IAo+IEFkZCBhIG5ldyBmaWVsZCBu
YW1lZCBkdGJfYm9vdG1vZHVsZSB0byBzdHJ1Y3Qga2VybmVsX2luZm8gdG8ga2VlcCB0cmFjawo+
IG9mIHRoZSBkdGIgZnJhZ21lbnQgbG9jYXRpb24uCj4gCj4gQ29weSB0aGUgZnJhZ21lbnQgdG8g
dGhlIGd1ZXN0IGR0YiAob25seSAvYWxpYXNlcyBhbmQgL3Bhc3N0aHJvdWdoKS4KPiAKPiBTZXQg
a2luZm8tPnBoYW5kbGVfZ2ljIGJhc2VkIG9uIHRoZSBwaGFuZGxlIG9mIHRoZSBzcGVjaWFsICIv
Z2ljIgo+IG5vZGUgaW4gdGhlIGRldmljZSB0cmVlIGZyYWdtZW50LiAiL2dpYyIgaXMgYSBkdW1t
eSBub2RlIGluIHRoZSBkdGIKPiBmcmFnbWVudCB0aGF0IHJlcHJlc2VudHMgdGhlIGdpYyBpbnRl
cnJ1cHQgY29udHJvbGxlci4gT3RoZXIgcHJvcGVydGllcwo+IGluIHRoZSBkdGIgZnJhZ21lbnQg
bWlnaHQgcmVmZXIgdG8gaXQgKGZvciBpbnN0YW5jZSBpbnRlcnJ1cHQtcGFyZW50IG9mCj4gYSBk
ZXZpY2Ugbm9kZSkuIFdlIHJldXNlIHRoZSBwaGFuZGxlIG9mICIvZ2ljIiBmcm9tIHRoZSBkdGIg
ZnJhZ21lbnQgYXMKPiB0aGUgcGhhbmRsZSBvZiB0aGUgZnVsbCBHSUMgbm9kZSB0aGF0IHdpbGwg
YmUgY3JlYXRlZCBmb3IgdGhlIGd1ZXN0Cj4gZGV2aWNlIHRyZWUuIFRoYXQgd2F5LCB3aGVuIHdl
IGNvcHkgcHJvcGVydGllcyBmcm9tIHRoZSBkZXZpY2UgdHJlZQo+IGZyYWdtZW50IHRvIHRoZSBk
b21VIGRldmljZSB0cmVlIHRoZSBsaW5rcyByZW1haW4gdW5icm9rZW4uCj4gCj4gc2Nhbl9wYXNz
dGhyb3VnaF9wcm9wIGlzIGludHJvZHVjZWQgaGVyZSBhbmQgbm90IHVzZWQgaW4gdGhpcyBwYXRj
aCBidXQKPiBpdCB3aWxsIGJlIHVzZWQgYnkgbGF0ZXIgcGF0Y2hlcy4KPiAKPiBTb21lIG9mIHRo
ZSBjb2RlIGJlbG93IGlzIHRha2VuIGZyb20gdG9vbHMvbGlieGwvbGlieGxfYXJtLmMuIE5vdGUg
dGhhdAo+IGl0IGlzIE9LIHRvIHRha2UgTEdQTCAyLjEgY29kZSBhbmQgaW5jbHVkaW5nIGl0IGlu
dG8gYSBHUEx2MiBjb2RlIGJhc2UuCj4gVGhlIHJlc3VsdCBpcyBHUEx2MiBjb2RlLgo+IAo+IFNp
Z25lZC1vZmYtYnk6IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3RlZmFub3NAeGlsaW54LmNvbT4KCkFj
a2VkLWJ5OiBKdWxpZW4gR3JhbGwgPGp1bGllbi5ncmFsbEBhcm0uY29tPgoKQ2hlZXJzLAoKPiAK
PiAtLS0tCj4gQ2hhbmdlcyBpbiB2NjoKPiAtIGNvZGUgc3R5bGUKPiAtIGluLWNvZGUgY29tbWVu
dAo+IC0gY29tbWl0IG1lc3NhZ2UgaW1wcm92ZW1lbnRzCj4gCj4gQ2hhbmdlcyBpbiB2NToKPiAt
IGNvZGUgc3R5bGUKPiAtIGluLWNvZGUgY29tbWVudAo+IC0gcmVtb3ZlIGRlcHRoIHBhcmFtZXRl
ciBmcm9tIHNjYW5fcGZkdF9ub2RlCj4gLSBmb3IgaW5zdGVhZCBvZiBsb29wIGluIGRvbWFpbl9o
YW5kbGVfZHRiX2Jvb3Rtb2R1bGUKPiAtIG1vdmUgImdpYyIgY2hlY2sgdG8gZG9tYWluX2hhbmRs
ZV9kdGJfYm9vdG1vZHVsZQo+IC0gYWRkIGNoZWNrX3BhcnRpYWxfZmR0Cj4gLSB1c2UgRFRfUk9P
VF9OT0RFX0FERFIvU0laRV9DRUxMU19ERUZBVUxUCj4gLSBhZGQgc2Nhbl9wYXNzdGhyb3VnaF9w
cm9wIHBhcmFtZXRlciwgc2V0IGl0IHRvIGZhbHNlIGZvciAiL2FsaWFzZXMiCj4gCj4gQ2hhbmdl
cyBpbiB2NDoKPiAtIHVzZSByZWN1cnNpb24gaW4gdGhlIGltcGxlbWVudGF0aW9uCj4gLSByZW5h
bWUgaGFuZGxlX3Byb3BlcnRpZXMgdG8gaGFuZGxlX3Byb3BfcGZkdAo+IC0gcmVuYW1lIHNjYW5f
cHRfbm9kZSB0byBzY2FuX3BmZHRfbm9kZQo+IC0gcGFzcyBraW5mbyB0byBoYW5kbGVfcHJvcGVy
dGllcwo+IC0gdXNlIHVpbnQzMl90IGluc3RlYWQgb2YgdTMyCj4gLSByZW5hbWUgciB0byByZXMK
PiAtIGFkZCAicGFzc3Rocm91Z2giIGFuZCAiYWxpYXNlcyIgY2hlY2sKPiAtIGFkZCBhIG5hbWUg
PT0gTlVMTCBjaGVjawo+IC0gY29kZSBzdHlsZQo+IC0gbW92ZSBEVEIgZnJhZ21lbnQgc2Nhbm5p
bmcgZWFybGllciwgYmVmb3JlIERvbVUgR0lDIG5vZGUgY3JlYXRpb24KPiAtIHNldCBndWVzdF9w
aGFuZGxlX2dpYyBiYXNlZCBvbiAiL2dpYyIKPiAtIGluLWNvZGUgY29tbWVudAo+IAo+IENoYW5n
ZXMgaW4gdjM6Cj4gLSBzd2l0Y2ggdG8gdXNpbmcgZGV2aWNlX3RyZWVfZm9yX2VhY2hfbm9kZSBm
b3IgdGhlIGNvcHkKPiAKPiBDaGFuZ2VzIGluIHYyOgo+IC0gYWRkIGEgbm90ZSBhYm91dCB0aGUg
Y29kZSBjb21pbmcgZnJvbSBsaWJ4bCBpbiB0aGUgY29tbWl0IG1lc3NhZ2UKPiAtIGNvcHkgL2Fs
aWFzZXMKPiAtIGNvZGUgc3R5bGUKPiAtLS0KPiAgIHhlbi9hcmNoL2FybS9kb21haW5fYnVpbGQu
YyAgfCAxNjQgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKPiAgIHhlbi9pbmNs
dWRlL2FzbS1hcm0va2VybmVsLmggfCAgIDIgKy0KPiAgIDIgZmlsZXMgY2hhbmdlZCwgMTY1IGlu
c2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKPiAKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJt
L2RvbWFpbl9idWlsZC5jIGIveGVuL2FyY2gvYXJtL2RvbWFpbl9idWlsZC5jCj4gaW5kZXggYjI1
YWJlOGQwOC4uMDhkNmQyMzhlMyAxMDA2NDQKPiAtLS0gYS94ZW4vYXJjaC9hcm0vZG9tYWluX2J1
aWxkLmMKPiArKysgYi94ZW4vYXJjaC9hcm0vZG9tYWluX2J1aWxkLmMKPiBAQCAtMTQsNiArMTQs
NyBAQAo+ICAgI2luY2x1ZGUgPHhlbi9ndWVzdF9hY2Nlc3MuaD4KPiAgICNpbmNsdWRlIDx4ZW4v
aW9jYXAuaD4KPiAgICNpbmNsdWRlIDx4ZW4vYWNwaS5oPgo+ICsjaW5jbHVkZSA8eGVuL3ZtYXAu
aD4KPiAgICNpbmNsdWRlIDx4ZW4vd2FybmluZy5oPgo+ICAgI2luY2x1ZGUgPGFjcGkvYWN0YWJs
ZXMuaD4KPiAgICNpbmNsdWRlIDxhc20vZGV2aWNlLmg+Cj4gQEAgLTE2OTgsNiArMTY5OSwxNTcg
QEAgc3RhdGljIGludCBfX2luaXQgbWFrZV92cGwwMTFfdWFydF9ub2RlKHN0cnVjdCBrZXJuZWxf
aW5mbyAqa2luZm8pCj4gICB9Cj4gICAjZW5kaWYKPiAgIAo+ICtzdGF0aWMgaW50IF9faW5pdCBo
YW5kbGVfcHJvcF9wZmR0KHN0cnVjdCBrZXJuZWxfaW5mbyAqa2luZm8sCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgdm9pZCAqcGZkdCwgaW50IG5vZGVvZmYsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgYWRkcmVzc19jZWxs
cywgdWludDMyX3Qgc2l6ZV9jZWxscywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBib29sIHNjYW5fcGFzc3Rocm91Z2hfcHJvcCkKPiArewo+ICsgICAgdm9pZCAqZmR0ID0g
a2luZm8tPmZkdDsKPiArICAgIGludCBwcm9wb2ZmLCBuYW1lb2ZmLCByZXM7Cj4gKyAgICBjb25z
dCBzdHJ1Y3QgZmR0X3Byb3BlcnR5ICpwcm9wOwo+ICsKPiArICAgIGZvciAoIHByb3BvZmYgPSBm
ZHRfZmlyc3RfcHJvcGVydHlfb2Zmc2V0KHBmZHQsIG5vZGVvZmYpOwo+ICsgICAgICAgICAgcHJv
cG9mZiA+PSAwOwo+ICsgICAgICAgICAgcHJvcG9mZiA9IGZkdF9uZXh0X3Byb3BlcnR5X29mZnNl
dChwZmR0LCBwcm9wb2ZmKSApCj4gKyAgICB7Cj4gKyAgICAgICAgaWYgKCAhKHByb3AgPSBmZHRf
Z2V0X3Byb3BlcnR5X2J5X29mZnNldChwZmR0LCBwcm9wb2ZmLCBOVUxMKSkgKQo+ICsgICAgICAg
ICAgICByZXR1cm4gLUZEVF9FUlJfSU5URVJOQUw7Cj4gKwo+ICsgICAgICAgIG5hbWVvZmYgPSBm
ZHQzMl90b19jcHUocHJvcC0+bmFtZW9mZik7Cj4gKyAgICAgICAgcmVzID0gZmR0X3Byb3BlcnR5
KGZkdCwgZmR0X3N0cmluZyhwZmR0LCBuYW1lb2ZmKSwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgcHJvcC0+ZGF0YSwgZmR0MzJfdG9fY3B1KHByb3AtPmxlbikpOwo+ICsgICAgICAgIGlm
ICggcmVzICkKPiArICAgICAgICAgICAgcmV0dXJuIHJlczsKPiArICAgIH0KPiArCj4gKyAgICAv
KiBGRFRfRVJSX05PVEZPVU5EID0+IFRoZXJlIGlzIG5vIG1vcmUgcHJvcGVydGllcyBmb3IgdGhp
cyBub2RlICovCj4gKyAgICByZXR1cm4gKCBwcm9wb2ZmICE9IC1GRFRfRVJSX05PVEZPVU5EICkg
PyBwcm9wb2ZmIDogMDsKPiArfQo+ICsKPiArc3RhdGljIGludCBfX2luaXQgc2Nhbl9wZmR0X25v
ZGUoc3RydWN0IGtlcm5lbF9pbmZvICpraW5mbywgY29uc3Qgdm9pZCAqcGZkdCwKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IG5vZGVvZmYsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IGFkZHJlc3NfY2VsbHMsIHVpbnQzMl90IHNpemVf
Y2VsbHMsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgc2Nhbl9wYXNz
dGhyb3VnaF9wcm9wKQo+ICt7Cj4gKyAgICBpbnQgcmMgPSAwOwo+ICsgICAgdm9pZCAqZmR0ID0g
a2luZm8tPmZkdDsKPiArICAgIGludCBub2RlX25leHQ7Cj4gKwo+ICsgICAgcmMgPSBmZHRfYmVn
aW5fbm9kZShmZHQsIGZkdF9nZXRfbmFtZShwZmR0LCBub2Rlb2ZmLCBOVUxMKSk7Cj4gKyAgICBp
ZiAoIHJjICkKPiArICAgICAgICByZXR1cm4gcmM7Cj4gKwo+ICsgICAgcmMgPSBoYW5kbGVfcHJv
cF9wZmR0KGtpbmZvLCBwZmR0LCBub2Rlb2ZmLCBhZGRyZXNzX2NlbGxzLCBzaXplX2NlbGxzLAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYW5fcGFzc3Rocm91Z2hfcHJvcCk7Cj4gKyAg
ICBpZiAoIHJjICkKPiArICAgICAgICByZXR1cm4gcmM7Cj4gKwo+ICsgICAgYWRkcmVzc19jZWxs
cyA9IGRldmljZV90cmVlX2dldF91MzIocGZkdCwgbm9kZW9mZiwgIiNhZGRyZXNzLWNlbGxzIiwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERUX1JPT1RfTk9ERV9B
RERSX0NFTExTX0RFRkFVTFQpOwo+ICsgICAgc2l6ZV9jZWxscyA9IGRldmljZV90cmVlX2dldF91
MzIocGZkdCwgbm9kZW9mZiwgIiNzaXplLWNlbGxzIiwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIERUX1JPT1RfTk9ERV9TSVpFX0NFTExTX0RFRkFVTFQpOwo+ICsKPiAr
ICAgIG5vZGVfbmV4dCA9IGZkdF9maXJzdF9zdWJub2RlKHBmZHQsIG5vZGVvZmYpOwo+ICsgICAg
d2hpbGUgKCBub2RlX25leHQgPiAwICkKPiArICAgIHsKPiArICAgICAgICBzY2FuX3BmZHRfbm9k
ZShraW5mbywgcGZkdCwgbm9kZV9uZXh0LCBhZGRyZXNzX2NlbGxzLCBzaXplX2NlbGxzLAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgIHNjYW5fcGFzc3Rocm91Z2hfcHJvcCk7Cj4gKyAgICAgICAg
bm9kZV9uZXh0ID0gZmR0X25leHRfc3Vibm9kZShwZmR0LCBub2RlX25leHQpOwo+ICsgICAgfQo+
ICsKPiArICAgIHJldHVybiBmZHRfZW5kX25vZGUoZmR0KTsKPiArfQo+ICsKPiArc3RhdGljIGlu
dCBfX2luaXQgY2hlY2tfcGFydGlhbF9mZHQodm9pZCAqcGZkdCwgc2l6ZV90IHNpemUpCj4gK3sK
PiArICAgIGludCByZXM7Cj4gKwo+ICsgICAgaWYgKCBmZHRfbWFnaWMocGZkdCkgIT0gRkRUX01B
R0lDICkKPiArICAgIHsKPiArICAgICAgICBkcHJpbnRrKFhFTkxPR19FUlIsICJQYXJ0aWFsIEZE
VCBpcyBub3QgYSB2YWxpZCBGbGF0IERldmljZSBUcmVlIik7Cj4gKyAgICAgICAgcmV0dXJuIC1F
SU5WQUw7Cj4gKyAgICB9Cj4gKwo+ICsgICAgcmVzID0gZmR0X2NoZWNrX2hlYWRlcihwZmR0KTsK
PiArICAgIGlmICggcmVzICkKPiArICAgIHsKPiArICAgICAgICBkcHJpbnRrKFhFTkxPR19FUlIs
ICJGYWlsZWQgdG8gY2hlY2sgdGhlIHBhcnRpYWwgRkRUICglZCkiLCByZXMpOwo+ICsgICAgICAg
IHJldHVybiAtRUlOVkFMOwo+ICsgICAgfQo+ICsKPiArICAgIGlmICggZmR0X3RvdGFsc2l6ZShw
ZmR0KSA+IHNpemUgKQo+ICsgICAgewo+ICsgICAgICAgIGRwcmludGsoWEVOTE9HX0VSUiwgIlBh
cnRpYWwgRkRUIHRvdGFsc2l6ZSBpcyB0b28gYmlnIik7Cj4gKyAgICAgICAgcmV0dXJuIC1FSU5W
QUw7Cj4gKyAgICB9Cj4gKwo+ICsgICAgcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQg
X19pbml0IGRvbWFpbl9oYW5kbGVfZHRiX2Jvb3Rtb2R1bGUoc3RydWN0IGRvbWFpbiAqZCwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qga2Vy
bmVsX2luZm8gKmtpbmZvKQo+ICt7Cj4gKyAgICB2b2lkICpwZmR0Owo+ICsgICAgaW50IHJlcywg
bm9kZV9uZXh0Owo+ICsKPiArICAgIHBmZHQgPSBpb3JlbWFwX2NhY2hlKGtpbmZvLT5kdGJfYm9v
dG1vZHVsZS0+c3RhcnQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICBraW5mby0+ZHRiX2Jv
b3Rtb2R1bGUtPnNpemUpOwo+ICsgICAgaWYgKCBwZmR0ID09IE5VTEwgKQo+ICsgICAgICAgIHJl
dHVybiAtRUZBVUxUOwo+ICsKPiArICAgIHJlcyA9IGNoZWNrX3BhcnRpYWxfZmR0KHBmZHQsIGtp
bmZvLT5kdGJfYm9vdG1vZHVsZS0+c2l6ZSk7Cj4gKyAgICBpZiAoIHJlcyA8IDAgKQo+ICsgICAg
ICAgIHJldHVybiByZXM7Cj4gKwo+ICsgICAgZm9yICggbm9kZV9uZXh0ID0gZmR0X2ZpcnN0X3N1
Ym5vZGUocGZkdCwgMCk7Cj4gKyAgICAgICAgICBub2RlX25leHQgPiAwOwo+ICsgICAgICAgICAg
bm9kZV9uZXh0ID0gZmR0X25leHRfc3Vibm9kZShwZmR0LCBub2RlX25leHQpICkKPiArICAgIHsK
PiArICAgICAgICBjb25zdCBjaGFyICpuYW1lID0gZmR0X2dldF9uYW1lKHBmZHQsIG5vZGVfbmV4
dCwgTlVMTCk7Cj4gKwo+ICsgICAgICAgIGlmICggbmFtZSA9PSBOVUxMICkKPiArICAgICAgICAg
ICAgY29udGludWU7Cj4gKwo+ICsgICAgICAgIC8qCj4gKyAgICAgICAgICogT25seSBzY2FuIC9n
aWMgL2FsaWFzZXMgL3Bhc3N0aHJvdWdoLCBpZ25vcmUgdGhlIHJlc3QuCj4gKyAgICAgICAgICog
VGhleSBkb24ndCBoYXZlIHRvIGJlIHBhcnNlZCBpbiBvcmRlci4KPiArICAgICAgICAgKgo+ICsg
ICAgICAgICAqIFRha2UgdGhlIEdJQyBwaGFuZGxlIHZhbHVlIGZyb20gdGhlIHNwZWNpYWwgL2dp
YyBub2RlIGluIHRoZQo+ICsgICAgICAgICAqIERUQiBmcmFnbWVudC4KPiArICAgICAgICAgKi8K
PiArICAgICAgICBpZiAoIGR0X25vZGVfY21wKG5hbWUsICJnaWMiKSA9PSAwICkKPiArICAgICAg
ICB7Cj4gKyAgICAgICAgICAgIGtpbmZvLT5waGFuZGxlX2dpYyA9IGZkdF9nZXRfcGhhbmRsZShw
ZmR0LCBub2RlX25leHQpOwo+ICsgICAgICAgICAgICBjb250aW51ZTsKPiArICAgICAgICB9Cj4g
Kwo+ICsgICAgICAgIGlmICggZHRfbm9kZV9jbXAobmFtZSwgImFsaWFzZXMiKSA9PSAwICkKPiAr
ICAgICAgICB7Cj4gKyAgICAgICAgICAgIHJlcyA9IHNjYW5fcGZkdF9ub2RlKGtpbmZvLCBwZmR0
LCBub2RlX25leHQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERUX1JPT1Rf
Tk9ERV9BRERSX0NFTExTX0RFRkFVTFQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIERUX1JPT1RfTk9ERV9TSVpFX0NFTExTX0RFRkFVTFQsCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGZhbHNlKTsKPiArICAgICAgICAgICAgaWYgKCByZXMgKQo+ICsgICAg
ICAgICAgICAgICAgcmV0dXJuIHJlczsKPiArICAgICAgICAgICAgY29udGludWU7Cj4gKyAgICAg
ICAgfQo+ICsgICAgICAgIGlmICggZHRfbm9kZV9jbXAobmFtZSwgInBhc3N0aHJvdWdoIikgPT0g
MCApCj4gKyAgICAgICAgewo+ICsgICAgICAgICAgICByZXMgPSBzY2FuX3BmZHRfbm9kZShraW5m
bywgcGZkdCwgbm9kZV9uZXh0LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBE
VF9ST09UX05PREVfQUREUl9DRUxMU19ERUZBVUxULAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBEVF9ST09UX05PREVfU0laRV9DRUxMU19ERUZBVUxULAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB0cnVlKTsKPiArICAgICAgICAgICAgaWYgKCByZXMgKQo+
ICsgICAgICAgICAgICAgICAgcmV0dXJuIHJlczsKPiArICAgICAgICAgICAgY29udGludWU7Cj4g
KyAgICAgICAgfQo+ICsgICAgfQo+ICsKPiArICAgIGlvdW5tYXAocGZkdCk7Cj4gKwo+ICsgICAg
cmV0dXJuIHJlczsKPiArfQo+ICsKPiAgIC8qCj4gICAgKiBUaGUgbWF4IHNpemUgZm9yIERUIGlz
IDJNQi4gSG93ZXZlciwgdGhlIGdlbmVyYXRlZCBEVCBpcyBzbWFsbCwgNEtCCj4gICAgKiBhcmUg
ZW5vdWdoIGZvciBub3csIGJ1dCB3ZSBtaWdodCBoYXZlIHRvIGluY3JlYXNlIGl0IGluIHRoZSBm
dXR1cmUuCj4gQEAgLTE3NTMsNiArMTkwNSwxOCBAQCBzdGF0aWMgaW50IF9faW5pdCBwcmVwYXJl
X2R0Yl9kb21VKHN0cnVjdCBkb21haW4gKmQsIHN0cnVjdCBrZXJuZWxfaW5mbyAqa2luZm8pCj4g
ICAgICAgaWYgKCByZXQgKQo+ICAgICAgICAgICBnb3RvIGVycjsKPiAgIAo+ICsgICAgLyoKPiAr
ICAgICAqIGRvbWFpbl9oYW5kbGVfZHRiX2Jvb3Rtb2R1bGUgaGFzIHRvIGJlIGNhbGxlZCBiZWZv
cmUgdGhlIHJlc3Qgb2YKPiArICAgICAqIHRoZSBkZXZpY2UgdHJlZSBpcyBnZW5lcmF0ZWQgYmVj
YXVzZSBpdCBkZXBlbmRzIG9uIHRoZSB2YWx1ZSBvZgo+ICsgICAgICogdGhlIGZpZWxkIHBoYW5k
bGVfZ2ljLgo+ICsgICAgICovCj4gKyAgICBpZiAoIGtpbmZvLT5kdGJfYm9vdG1vZHVsZSApCj4g
KyAgICB7Cj4gKyAgICAgICAgcmV0ID0gZG9tYWluX2hhbmRsZV9kdGJfYm9vdG1vZHVsZShkLCBr
aW5mbyk7Cj4gKyAgICAgICAgaWYgKCByZXQgKQo+ICsgICAgICAgICAgICByZXR1cm4gcmV0Owo+
ICsgICAgfQo+ICsKPiAgICAgICByZXQgPSBtYWtlX2dpY19kb21VX25vZGUoa2luZm8pOwo+ICAg
ICAgIGlmICggcmV0ICkKPiAgICAgICAgICAgZ290byBlcnI7Cj4gZGlmZiAtLWdpdCBhL3hlbi9p
bmNsdWRlL2FzbS1hcm0va2VybmVsLmggYi94ZW4vaW5jbHVkZS9hc20tYXJtL2tlcm5lbC5oCj4g
aW5kZXggNDNmYTg3NTQ1ZS4uODc0YWExMDhhNyAxMDA2NDQKPiAtLS0gYS94ZW4vaW5jbHVkZS9h
c20tYXJtL2tlcm5lbC5oCj4gKysrIGIveGVuL2luY2x1ZGUvYXNtLWFybS9rZXJuZWwuaAo+IEBA
IC0yOCw3ICsyOCw3IEBAIHN0cnVjdCBrZXJuZWxfaW5mbyB7Cj4gICAgICAgcGFkZHJfdCBnbnR0
YWJfc2l6ZTsKPiAgIAo+ICAgICAgIC8qIGJvb3QgYmxvYiBsb2FkIGFkZHJlc3NlcyAqLwo+IC0g
ICAgY29uc3Qgc3RydWN0IGJvb3Rtb2R1bGUgKmtlcm5lbF9ib290bW9kdWxlLCAqaW5pdHJkX2Jv
b3Rtb2R1bGU7Cj4gKyAgICBjb25zdCBzdHJ1Y3QgYm9vdG1vZHVsZSAqa2VybmVsX2Jvb3Rtb2R1
bGUsICppbml0cmRfYm9vdG1vZHVsZSwgKmR0Yl9ib290bW9kdWxlOwo+ICAgICAgIGNvbnN0IGNo
YXIqIGNtZGxpbmU7Cj4gICAgICAgcGFkZHJfdCBkdGJfcGFkZHI7Cj4gICAgICAgcGFkZHJfdCBp
bml0cmRfcGFkZHI7Cj4gCgotLSAKSnVsaWVuIEdyYWxsCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZl
bEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxt
YW4vbGlzdGluZm8veGVuLWRldmVs

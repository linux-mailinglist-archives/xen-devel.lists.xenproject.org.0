Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 3A66D10951E
	for <lists+xen-devel@lfdr.de>; Mon, 25 Nov 2019 22:26:48 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iZLpX-0005TU-Lm; Mon, 25 Nov 2019 21:23:35 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=pQY9=ZR=gmail.com=julien.grall.oss@srs-us1.protection.inumbo.net>)
 id 1iZLpW-0005TP-B6
 for xen-devel@lists.xenproject.org; Mon, 25 Nov 2019 21:23:34 +0000
X-Inumbo-ID: d4ad10a8-0fc9-11ea-a396-12813bfff9fa
Received: from mail-wm1-f67.google.com (unknown [209.85.128.67])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id d4ad10a8-0fc9-11ea-a396-12813bfff9fa;
 Mon, 25 Nov 2019 21:23:32 +0000 (UTC)
Received: by mail-wm1-f67.google.com with SMTP id z19so925371wmk.3
 for <xen-devel@lists.xenproject.org>; Mon, 25 Nov 2019 13:23:32 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:subject:to:cc:references:message-id:date
 :user-agent:mime-version:in-reply-to:content-language
 :content-transfer-encoding;
 bh=QZLORs0nC2T3ma2vKiU391cXJ9+XmpWYWeu+T4bK8CQ=;
 b=YxB3Uj+fEV1Dg3vZNdfCCgTbKjaOJeHEe+jJvQiCHOlovI2TnqbGjtYl9N7yK/g73T
 Ua2dZljrgti4wn6pHs4IiIwNLxy/zn2HGgqHHjRsVyyk4SkVEH2nLqUuci+wdIYXX2Rk
 uvwhMqkY5odB7fzlLnfXMzF+gbTzBbzhhQXDExDiJ2q8GJ9ww0hHto3hzBtCtgops+i3
 GD1iy7tKlYor+s1HtMR+JqAPtehS4EX8/WneYaAH3UMWdPnWfsoKJBPpiw1YX/SY22aU
 s0BxoWz8QEaWFJFZO1BZuuuAeJLxwhhpUnD0KhSU+q75SmNpGDOvFA4HHo+kv9tY7X18
 TFnA==
X-Gm-Message-State: APjAAAXuskUwXxmd5ul5+6Zm41GcEeEBd22Nzec2HZKBGyLXcgGqPAzw
 13AWuABhGyCXMs62QidyVsk=
X-Google-Smtp-Source: APXvYqwyRrG+kY5pcKr0hQA5g70qMJJ2dvgFDUnzJfVZ/d2K72JK7o7fEvm8Eon5nGtojItnKI8WaA==
X-Received: by 2002:a1c:480a:: with SMTP id v10mr805920wma.138.1574717011287; 
 Mon, 25 Nov 2019 13:23:31 -0800 (PST)
Received: from a483e7b01a66.ant.amazon.com (54-240-197-238.amazon.com.
 [54.240.197.238])
 by smtp.gmail.com with ESMTPSA id u16sm12004616wrr.65.2019.11.25.13.23.30
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Mon, 25 Nov 2019 13:23:30 -0800 (PST)
From: Julien Grall <julien@xen.org>
To: Stewart Hildebrand <stewart.hildebrand@dornerworks.com>,
 xen-devel@lists.xenproject.org
References: <20191115200115.44890-1-stewart.hildebrand@dornerworks.com>
 <20191115201037.44982-1-stewart.hildebrand@dornerworks.com>
Message-ID: <fa890671-7b6b-67c0-3a85-cf303805b0dc@xen.org>
Date: Mon, 25 Nov 2019 21:23:29 +0000
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:68.0)
 Gecko/20100101 Thunderbird/68.2.2
MIME-Version: 1.0
In-Reply-To: <20191115201037.44982-1-stewart.hildebrand@dornerworks.com>
Content-Language: en-GB
Subject: Re: [Xen-devel] [XEN PATCH v3 05/11] xen: arm: add interfaces to
 save/restore the state of a PPI.
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 Ian Campbell <ian.campbell@citrix.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGksCgpPbiAxNS8xMS8yMDE5IDIwOjEwLCBTdGV3YXJ0IEhpbGRlYnJhbmQgd3JvdGU6Cj4gRnJv
bTogSWFuIENhbXBiZWxsIDxpYW4uY2FtcGJlbGxAY2l0cml4LmNvbT4KPiAKPiBNYWtlIHVzZSBv
ZiB0aGUgR0lDRCBJW1NDXUFDVElWRVIgcmVnaXN0ZXJzIHRvIHNhdmUgYW5kCj4gcmVzdG9yZSB0
aGUgYWN0aXZlIHN0YXRlIG9mIHRoZSBpbnRlcnJ1cHQuCj4gCj4gRm9yIGVkZ2UgdHJpZ2dlcmVk
IGludGVycnVwdHMgd2UgYWxzbyBuZWVkIHRvIGNvbnRleHQgc3dpdGNoIHRoZQo+IHBlbmRpbmcg
Yml0IHZpYSBJW1NDXVBFTkRSLiBOb3RlIHRoYXQgZm9yIGxldmVsIHRyaWdnZXJlZCBpbnRlcnJ1
cHRzCj4gU1BFTkRSIHNldHMgYSBsYXRjaCB3aGljaCBpcyBvbmx5IGNsZWFyZWQgYnkgSUNQRU5E
UiAoYW5kIG5vdCBieSBoL3cKPiBzdGF0ZSBjaGFuZ2VzKSwgdGhlcmVmb3JlIHdlIGRvIG5vdCB3
YW50IHRvIGNvbnRleHQgc3dpdGNoIHRoZSBwZW5kaW5nCj4gc3RhdGUgZm9yIGxldmVsIFBQSXMg
LS0gaW5zdGVhZCB3ZSByZWx5IG9uIHRoZSBjb250ZXh0IHN3aXRjaCBvZiB0aGUKPiBwZXJpcGhl
cmFsIHRvIHJlc3RvcmUgdGhlIGNvcnJlY3QgbGV2ZWwuCj4gCj4gVW51c2VkIGFzIHlldCwgd2ls
bCBiZSB1c2VkIGJ5IHRoZSB2dGltZXIgY29kZSBzaG9ydGx5Lgo+IAo+IFNpZ25lZC1vZmYtYnk6
IElhbiBDYW1wYmVsbCA8aWFuLmNhbXBiZWxsQGNpdHJpeC5jb20+Cj4gU2lnbmVkLW9mZi1ieTog
U3Rld2FydCBIaWxkZWJyYW5kIDxzdGV3YXJ0LmhpbGRlYnJhbmRAZG9ybmVyd29ya3MuY29tPgo+
IAo+IC0tLQo+IHYzOiBBZGRyZXNzIGZlZWRiYWNrIGZyb20gdjIgWzFdOgo+ICAgICogQWRkIGEg
Y29tbWVudCB0byBleHBsYWluIHRoYXQgUFBJIGFyZSBhbHdheXMgYmVsb3cgMzEuCj4gICAgKiBV
c2UgdWludDMyX3QgZm9yIHBlbmRpbmdyLCBhY3RpdmVyLCBlbmFibGVyCj4gICAgKiBGaXh1cCBy
ZWdpc3RlciBuYW1lcyBpbiBnaWMtdjMuYwo+ICAgICogQWRkIG5ld2xpbmVzIGZvciBjbGFyaXR5
Cj4gICAgKiBNYWtlIGdpY3YzX2lycV9lbmFibGUvZGlzYWJsZSBkZWNsYXJhdGlvbnMgc3RhdGlj
Cj4gICAgKiBVc2UgcmVhZGxfcmVsYXhlZCAobm90IHJlYWRsX2dpY2QpIGluIGdpYy12My5jCj4g
ICAgKiBBZGQgbm90ZSB0byBjb21tZW50IGV4cGxhaW5pbmcgZGV2aWNlcyB1c2luZyBQUEkgYmVp
bmcgcXVpZXQgZHVyaW5nCj4gICAgICAgICAgc2F2ZS9yZXN0b3JlLiBTdWdnZXN0ZWQgYnkgSnVs
aWVuLgo+ICAgICogVGVzdCBvbiBRRU1VJ3MgbW9kZWwgb2YgR0lDdjMKPiAKPiBOb3RlOiBJIGhh
dmUgbm90IGdpdmVuIGFueSB0aG91Z2h0IHRvIHRoZSBjb21tZW50cyBpbiBbMl0gcmVnYXJkaW5n
Cj4gZGlzYWJsaW5nIElSUSBvciBlbmFibGUvZGlzYWJsZSBzdGF0ZS4KCkkgd2lsbCB0cnkgdG8g
YW5zd2VyIHRoaXMgYmVsb3cuCgo+IAo+IFsxXSBodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3Jn
L2FyY2hpdmVzL2h0bWwveGVuLWRldmVsLzIwMTUtMTEvbXNnMDEwNDkuaHRtbAo+IFsyXSBodHRw
czovL2xpc3RzLnhlbnByb2plY3Qub3JnL2FyY2hpdmVzL2h0bWwveGVuLWRldmVsLzIwMTUtMTEv
bXNnMDEwNTEuaHRtbAo+IC0tLQo+ICAgeGVuL2FyY2gvYXJtL2dpYy12Mi5jICAgICAgICB8IDY5
ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwo+ICAgeGVuL2FyY2gvYXJtL2dp
Yy12My5jICAgICAgICB8IDY5ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwo+
ICAgeGVuL2FyY2gvYXJtL2dpYy5jICAgICAgICAgICB8IDU0ICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysKPiAgIHhlbi9hcmNoL2FybS9pcnEuYyAgICAgICAgICAgfCAgNyArKysrCj4gICB4
ZW4vaW5jbHVkZS9hc20tYXJtL2RvbWFpbi5oIHwgMTEgKysrKysrCj4gICB4ZW4vaW5jbHVkZS9h
c20tYXJtL2dpYy5oICAgIHwgMjIgKysrKysrKysrKysrCj4gICB4ZW4vaW5jbHVkZS9hc20tYXJt
L2lycS5oICAgIHwgIDIgKysKPiAgIDcgZmlsZXMgY2hhbmdlZCwgMjM0IGluc2VydGlvbnMoKykK
PiAKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL2dpYy12Mi5jIGIveGVuL2FyY2gvYXJtL2dp
Yy12Mi5jCj4gaW5kZXggMjU2OTg4YzY2NS4uMTNmMTA2Y2I2MSAxMDA2NDQKPiAtLS0gYS94ZW4v
YXJjaC9hcm0vZ2ljLXYyLmMKPiArKysgYi94ZW4vYXJjaC9hcm0vZ2ljLXYyLmMKPiBAQCAtMTIz
LDYgKzEyMyw5IEBAIHN0YXRpYyBERUZJTkVfUEVSX0NQVSh1OCwgZ2ljX2NwdV9pZCk7Cj4gICAv
KiBNYXhpbXVtIGNwdSBpbnRlcmZhY2UgcGVyIEdJQyAqLwo+ICAgI2RlZmluZSBOUl9HSUNfQ1BV
X0lGIDgKPiAgIAo+ICtzdGF0aWMgdm9pZCBnaWN2Ml9pcnFfZW5hYmxlKHN0cnVjdCBpcnFfZGVz
YyAqZGVzYyk7Cj4gK3N0YXRpYyB2b2lkIGdpY3YyX2lycV9kaXNhYmxlKHN0cnVjdCBpcnFfZGVz
YyAqZGVzYyk7Cj4gKwo+ICAgc3RhdGljIGlubGluZSB2b2lkIHdyaXRlYl9naWNkKHVpbnQ4X3Qg
dmFsLCB1bnNpZ25lZCBpbnQgb2Zmc2V0KQo+ICAgewo+ICAgICAgIHdyaXRlYl9yZWxheGVkKHZh
bCwgZ2ljdjIubWFwX2RiYXNlICsgb2Zmc2V0KTsKPiBAQCAtMTkxLDYgKzE5NCwzOCBAQCBzdGF0
aWMgdm9pZCBnaWN2Ml9zYXZlX3N0YXRlKHN0cnVjdCB2Y3B1ICp2KQo+ICAgICAgIHdyaXRlbF9n
aWNoKDAsIEdJQ0hfSENSKTsKPiAgIH0KPiAgIAo+ICtzdGF0aWMgdm9pZCBnaWN2Ml9zYXZlX2Fu
ZF9tYXNrX2h3cHBpKHN0cnVjdCBpcnFfZGVzYyAqZGVzYywKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaHdwcGlfc3RhdGUgKnMpCgpJIHdvdWxkIHByZWZl
ciBpZiB0aGUgdHdvIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb25lIGFmdGVyIGVhY2ggb3Ro
ZXIgCnJhdGhlciB0aGFuIGhhdmluZyBnaWNfcmVzdG9yZV9zdGF0ZSgpIGJldHdlZW4gdGhlbS4g
QnV0IGNvdWxkIHdlIG1vdmUgCnRoZW0gaW4gcGxhY2Ugd2hlcmUgYSBmb3J3YXJkIGRlY2xhcmF0
aW9uIGZvciBnaWN2Ml9pcnFfe2VuYWJsZSwgCmRpc2FibGV9IGlzIG5vdCBuZWNlc3Nhcnk/CgpX
aGlsZSBJIHVuZGVyc3RhbmQgdGhlIGdvYWwgb2YgdGhpcyBmdW5jdGlvbiBpcyB0byBiZSBhcyBn
ZW5lcmljIGFzIApwb3NzaWJsZSwgR0lDdjIgaW50ZXJmYWNlIGFjY2VzcyBpcyBzbG93IGFuZCB0
aGVyZWZvcmUgYSBjb3N0IHdpbGwgb2NjdXIgCmZvciBldmVyeSBhY2Nlc3MuIFRoZXJlIGFyZSBh
bHNvIHNvbWUgdW53cml0dGVuIHJ1bGUgdGhhdCBpbnRlcnJ1cHQgd2lsbCAKYmUgbWFza2VkL25v
dCBhY3RpdmUvbm90IHBlbmRpbmcgd2hlbiB0aGUgdkNQVSBpcyBjcmVhdGVkLiBUaGlzIHJlbHkg
b24gCnRoZSB2R0lDIHN0YXRlIHRvIGJlIHRoZSBzYW1lLiBJZiBub3QsIHRoZW4gd2UgYXJlIGdv
aW5nIHRvIGJlIGluIGEgCmJyb2tlbiBzdGF0ZS4KClNvIEkgd291bGQgcmF0aGVyIHByZWZlciBp
ZiB3ZSB0cnkgdG8gdXNlIHRoZSB2R0lDIHN0YXRlIGFzIG11Y2ggYXMgCnBvc3NpYmxlIGFuZCBl
dmVuIGF2b2lkIHRvdWNoaW5nIHRoZSBoYXJkd2FyZSBHSUMuCgo+ICt7Cj4gKyAgICBjb25zdCB1
aW50MzJfdCBtYXNrID0gKDF1IDw8IGRlc2MtPmlycSk7IC8qIFBQSXMgYXJlIElSUSMgMTYtMzEg
Ki8KClBsZWFzZSB1c2UgQklUKC4uLikuCgo+ICsgICAgY29uc3QgdWludDMyX3QgcGVuZGluZ3Ig
PSByZWFkbF9naWNkKEdJQ0RfSVNQRU5EUik7CgpUaGlzIGlzIG9ubHkgbmVjZXNzYXJ5IGZvciBl
ZGdlIGludGVycnVwdC4KCj4gKyAgICBjb25zdCB1aW50MzJfdCBhY3RpdmVyID0gcmVhZGxfZ2lj
ZChHSUNEX0lTQUNUSVZFUik7Cj4gKyAgICBjb25zdCB1aW50MzJfdCBlbmFibGVyID0gcmVhZGxf
Z2ljZChHSUNEX0lTRU5BQkxFUik7CgpJZiB0aGUgZGV2aWNlIGlzIHF1aWVzY2VudCBhcyBzdWdn
ZXN0ZWQgYmVsb3csIHRoZW4gbWFza2luZy91bm1hc2tpbmcgCnRoZSBpbnRlcnJ1cHQgc2hvdWxk
IG5vdCBiZSBuZWNlc3NhcnkuIFRoaXMgd291bGQgc2F2ZSBhIGZldyBleHRyYSBjeWNsZSAKaGVy
ZS4KCj4gKyAgICBjb25zdCBib29sIGlzX2VkZ2UgPSAhIShkZXNjLT5hcmNoLnR5cGUgJiBEVF9J
UlFfVFlQRV9FREdFX0JPVEgpOwo+ICsKPiArICAgIHMtPmFjdGl2ZSA9ICEhKGFjdGl2ZXIgJiBt
YXNrKTsKPiArICAgIHMtPmVuYWJsZWQgPSAhIShlbmFibGVyICYgbWFzayk7Cj4gKyAgICBzLT5w
ZW5kaW5nID0gISEocGVuZGluZ3IgJiBtYXNrKTsKPiArCj4gKyAgICAvKiBXcml0ZSBhIDEgdG8g
SUMuLi5SIHRvIGNsZWFyIHRoZSBjb3JyZXNwb25kaW5nIGJpdCBvZiBzdGF0ZSAqLwo+ICsgICAg
aWYgKCBzLT5hY3RpdmUgKQo+ICsgICAgICAgIHdyaXRlbF9naWNkKG1hc2ssIEdJQ0RfSUNBQ1RJ
VkVSKTsKPiArCj4gKyAgICAvKgo+ICsgICAgICogRm9yIGFuIGVkZ2UgaW50ZXJydXB0IGNsZWFy
IHRoZSBwZW5kaW5nIHN0YXRlLCBmb3IgYSBsZXZlbCBpbnRlcnJ1cHQKPiArICAgICAqIHRoaXMg
Y2xlYXJzIHRoZSBsYXRjaCB0aGVyZSBpcyBubyBuZWVkIHNpbmNlIHNhdmluZyB0aGUgcGVyaXBo
ZXJhbCBzdGF0ZQo+ICsgICAgICogKGFuZC9vciByZXN0b3JpbmcgdGhlIG5leHQgVkNQVSkgd2ls
bCBjYXVzZSB0aGUgY29ycmVjdCBhY3Rpb24uCj4gKyAgICAgKi8KPiArICAgIGlmICggaXNfZWRn
ZSAmJiBzLT5wZW5kaW5nICkKPiArICAgICAgICB3cml0ZWxfZ2ljZChtYXNrLCBHSUNEX0lDUEVO
RFIpOwo+ICsKPiArICAgIGlmICggcy0+ZW5hYmxlZCApCj4gKyAgICAgICAgZ2ljdjJfaXJxX2Rp
c2FibGUoZGVzYyk7Cj4gKwo+ICsgICAgQVNTRVJUKCEocmVhZGxfZ2ljZChHSUNEX0lTQUNUSVZF
UikgJiBtYXNrKSk7Cj4gKyAgICBBU1NFUlQoIShyZWFkbF9naWNkKEdJQ0RfSVNFTkFCTEVSKSAm
IG1hc2spKTsKPiArfQo+ICsKPiAgIHN0YXRpYyB2b2lkIGdpY3YyX3Jlc3RvcmVfc3RhdGUoY29u
c3Qgc3RydWN0IHZjcHUgKnYpCj4gICB7Cj4gICAgICAgaW50IGk7Cj4gQEAgLTIwMyw2ICsyMzgs
MzggQEAgc3RhdGljIHZvaWQgZ2ljdjJfcmVzdG9yZV9zdGF0ZShjb25zdCBzdHJ1Y3QgdmNwdSAq
dikKPiAgICAgICB3cml0ZWxfZ2ljaChHSUNIX0hDUl9FTiwgR0lDSF9IQ1IpOwo+ICAgfQo+ICAg
Cj4gK3N0YXRpYyB2b2lkIGdpY3YyX3Jlc3RvcmVfaHdwcGkoc3RydWN0IGlycV9kZXNjICpkZXNj
LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBod3BwaV9z
dGF0ZSAqcykKPiArewo+ICsgICAgY29uc3QgdWludDMyX3QgbWFzayA9ICgxdSA8PCBkZXNjLT5p
cnEpOyAvKiBQUElzIGFyZSBJUlEjIDE2LTMxICovCj4gKyAgICBjb25zdCBib29sIGlzX2VkZ2Ug
PSAhIShkZXNjLT5hcmNoLnR5cGUgJiBEVF9JUlFfVFlQRV9FREdFX0JPVEgpOwo+ICsKPiArICAg
IC8qCj4gKyAgICAgKiBUaGUgSVJRIG11c3QgYWx3YXlzIGhhdmUgYmVlbiBzZXQgaW5hY3RpdmUg
YW5kIG1hc2tlZCBldGMgYnkKPiArICAgICAqIHRoZSBzYXZpbmcgb2YgdGhlIHByZXZpb3VzIHN0
YXRlIHZpYSBzYXZlX2FuZF9tYXNrX2h3cHBpLgo+ICsgICAgICovCj4gKyAgICBBU1NFUlQoIShy
ZWFkbF9naWNkKEdJQ0RfSVNBQ1RJVkVSKSAmIG1hc2spKTsKPiArICAgIEFTU0VSVCghKHJlYWRs
X2dpY2QoR0lDRF9JU0VOQUJMRVIpICYgbWFzaykpOwo+ICsKPiArICAgIGlmICggcy0+YWN0aXZl
ICkKPiArICAgICAgICB3cml0ZWxfZ2ljZChtYXNrLCBHSUNEX0lDQUNUSVZFUik7CgpBdCBsZWFz
dCBvbiBHSUN2MywgdGhlIGludGVycnVwdCBtYXkgaGF2ZSBiZWVuIGRlYWN0aXZhdGVkIHdoaWxl
IHdlIHdlcmUgCnVuc2NoZWR1bGVkLiBTbyB5b3Ugd291bGQgcmVzdG9yZSB0aGUgd3JvbmcgYWN0
aXZlIHN0YXRlIGhlcmUuCgo+ICsKPiArICAgIC8qCj4gKyAgICAgKiBSZXN0b3JlIHBlbmRpbmcg
c3RhdGUgZm9yIGVkZ2UgdHJpZ2dlcmVkIGludGVycnVwdHMgb25seS4gRm9yCj4gKyAgICAgKiBs
ZXZlbCB0cmlnZ2VyZWQgaW50ZXJydXB0cyB0aGUgbGV2ZWwgd2lsbCBiZSByZXN0b3JlZCBhcwo+
ICsgICAgICogbmVjZXNzYXJ5IGJ5IHJlc3RvcmluZyB0aGUgc3RhdGUgb2YgdGhlIHJlbGV2YW50
IHBlcmlwaGVyYWwuCj4gKyAgICAgKgo+ICsgICAgICogRm9yIGEgbGV2ZWwgdHJpZ2dlcmVkIGlu
dGVycnVwdCBJU1BFTkRSIGFjdHMgYXMgYSAqbGF0Y2gqIHdoaWNoCj4gKyAgICAgKiBpcyBvbmx5
IGNsZWFyZWQgYnkgSUNQRU5EUiAoaS5lLiB0aGUgaW5wdXQgbGV2ZWwgaXMgbm8gbG9uZ2VyCj4g
KyAgICAgKiByZWxldmFudCkuIFdlIGNlcnRhaW5seSBkbyBub3Qgd2FudCB0aGF0IGhlcmUuCj4g
KyAgICAgKi8KPiArICAgIGlmICggaXNfZWRnZSAmJiBzLT5wZW5kaW5nICkKPiArICAgICAgICB3
cml0ZWxfZ2ljZChtYXNrLCBHSUNEX0lTUEVORFIpOwo+ICsKPiArICAgIGlmICggcy0+ZW5hYmxl
ZCApCj4gKyAgICAgICAgZ2ljdjJfaXJxX2VuYWJsZShkZXNjKTsKPiArfQo+ICsKPiAgIHN0YXRp
YyB2b2lkIGdpY3YyX2R1bXBfc3RhdGUoY29uc3Qgc3RydWN0IHZjcHUgKnYpCj4gICB7Cj4gICAg
ICAgaW50IGk7Cj4gQEAgLTEzMzUsNyArMTQwMiw5IEBAIGNvbnN0IHN0YXRpYyBzdHJ1Y3QgZ2lj
X2h3X29wZXJhdGlvbnMgZ2ljdjJfb3BzID0gewo+ICAgICAgIC5pbml0ICAgICAgICAgICAgICAg
ID0gZ2ljdjJfaW5pdCwKPiAgICAgICAuc2Vjb25kYXJ5X2luaXQgICAgICA9IGdpY3YyX3NlY29u
ZGFyeV9jcHVfaW5pdCwKPiAgICAgICAuc2F2ZV9zdGF0ZSAgICAgICAgICA9IGdpY3YyX3NhdmVf
c3RhdGUsCj4gKyAgICAuc2F2ZV9hbmRfbWFza19od3BwaSA9IGdpY3YyX3NhdmVfYW5kX21hc2tf
aHdwcGksCj4gICAgICAgLnJlc3RvcmVfc3RhdGUgICAgICAgPSBnaWN2Ml9yZXN0b3JlX3N0YXRl
LAo+ICsgICAgLnJlc3RvcmVfaHdwcGkgICAgICAgPSBnaWN2Ml9yZXN0b3JlX2h3cHBpLAo+ICAg
ICAgIC5kdW1wX3N0YXRlICAgICAgICAgID0gZ2ljdjJfZHVtcF9zdGF0ZSwKPiAgICAgICAuZ2lj
X2hvc3RfaXJxX3R5cGUgICA9ICZnaWN2Ml9ob3N0X2lycV90eXBlLAo+ICAgICAgIC5naWNfZ3Vl
c3RfaXJxX3R5cGUgID0gJmdpY3YyX2d1ZXN0X2lycV90eXBlLAo+IGRpZmYgLS1naXQgYS94ZW4v
YXJjaC9hcm0vZ2ljLXYzLmMgYi94ZW4vYXJjaC9hcm0vZ2ljLXYzLmMKPiBpbmRleCAwZjZjYmY2
MjI0Li5iZTVlYTYxYWI1IDEwMDY0NAo+IC0tLSBhL3hlbi9hcmNoL2FybS9naWMtdjMuYwo+ICsr
KyBiL3hlbi9hcmNoL2FybS9naWMtdjMuYwoKTXkgcmVtYXJrcyBhYm91dCBHSUN2MiBhcmUgdmFs
aWQgZm9yIEdJQ3YzIGFzIHdlbGwuCgo+IEBAIC02Myw2ICs2Myw5IEBAIHN0YXRpYyBERUZJTkVf
UEVSX0NQVSh2b2lkIF9faW9tZW0qLCByYmFzZSk7Cj4gICAjZGVmaW5lIEdJQ0RfUkRJU1RfQkFT
RSAgICAgICAgKHRoaXNfY3B1KHJiYXNlKSkKPiAgICNkZWZpbmUgR0lDRF9SRElTVF9TR0lfQkFT
RSAgICAoR0lDRF9SRElTVF9CQVNFICsgU1pfNjRLKQo+ICAgCj4gK3N0YXRpYyB2b2lkIGdpY3Yz
X2lycV9lbmFibGUoc3RydWN0IGlycV9kZXNjICpkZXNjKTsKPiArc3RhdGljIHZvaWQgZ2ljdjNf
aXJxX2Rpc2FibGUoc3RydWN0IGlycV9kZXNjICpkZXNjKTsKPiArCj4gICAvKgo+ICAgICogU2F2
ZXMgYWxsIDE2KE1heCkgTFIgcmVnaXN0ZXJzLiBUaG91Z2ggbnVtYmVyIG9mIExScyBpbXBsZW1l
bnRlZAo+ICAgICogaXMgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuCj4gQEAgLTM3NSw2ICszNzgs
MzggQEAgc3RhdGljIHZvaWQgZ2ljdjNfc2F2ZV9zdGF0ZShzdHJ1Y3QgdmNwdSAqdikKPiAgICAg
ICB2LT5hcmNoLmdpYy52My5zcmVfZWwxID0gUkVBRF9TWVNSRUczMihJQ0NfU1JFX0VMMSk7Cj4g
ICB9Cj4gICAKPiArc3RhdGljIHZvaWQgZ2ljdjNfc2F2ZV9hbmRfbWFza19od3BwaShzdHJ1Y3Qg
aXJxX2Rlc2MgKmRlc2MsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
c3RydWN0IGh3cHBpX3N0YXRlICpzKQo+ICt7Cj4gKyAgICBjb25zdCB1aW50MzJfdCBtYXNrID0g
KDF1IDw8IGRlc2MtPmlycSk7IC8qIFBQSXMgYXJlIElSUSMgMTYtMzEgKi8KPiArICAgIGNvbnN0
IHVpbnQzMl90IHBlbmRpbmdyID0gcmVhZGxfcmVsYXhlZChHSUNEX1JESVNUX1NHSV9CQVNFICsg
R0lDUl9JU1BFTkRSMCk7Cj4gKyAgICBjb25zdCB1aW50MzJfdCBhY3RpdmVyID0gcmVhZGxfcmVs
YXhlZChHSUNEX1JESVNUX1NHSV9CQVNFICsgR0lDUl9JU0FDVElWRVIwKTsKPiArICAgIGNvbnN0
IHVpbnQzMl90IGVuYWJsZXIgPSByZWFkbF9yZWxheGVkKEdJQ0RfUkRJU1RfU0dJX0JBU0UgKyBH
SUNSX0lTRU5BQkxFUjApOwo+ICsgICAgY29uc3QgYm9vbCBpc19lZGdlID0gISEoZGVzYy0+YXJj
aC50eXBlICYgRFRfSVJRX1RZUEVfRURHRV9CT1RIKTsKPiArCj4gKyAgICBzLT5hY3RpdmUgPSAh
IShhY3RpdmVyICYgbWFzayk7Cj4gKyAgICBzLT5lbmFibGVkID0gISEoZW5hYmxlciAmIG1hc2sp
Owo+ICsgICAgcy0+cGVuZGluZyA9ICEhKHBlbmRpbmdyICYgbWFzayk7Cj4gKwo+ICsgICAgLyog
V3JpdGUgYSAxIHRvIElDLi4uUiB0byBjbGVhciB0aGUgY29ycmVzcG9uZGluZyBiaXQgb2Ygc3Rh
dGUgKi8KPiArICAgIGlmICggcy0+YWN0aXZlICkKPiArICAgICAgICB3cml0ZWxfcmVsYXhlZCht
YXNrLCBHSUNEX1JESVNUX1NHSV9CQVNFICsgR0lDUl9JQ0FDVElWRVIwKTsKPiArCj4gKyAgICAv
Kgo+ICsgICAgICogRm9yIGFuIGVkZ2UgaW50ZXJydXB0IGNsZWFyIHRoZSBwZW5kaW5nIHN0YXRl
LCBmb3IgYSBsZXZlbCBpbnRlcnJ1cHQKPiArICAgICAqIHRoaXMgY2xlYXJzIHRoZSBsYXRjaCB0
aGVyZSBpcyBubyBuZWVkIHNpbmNlIHNhdmluZyB0aGUgcGVyaXBoZXJhbCBzdGF0ZQo+ICsgICAg
ICogKGFuZC9vciByZXN0b3JpbmcgdGhlIG5leHQgVkNQVSkgd2lsbCBjYXVzZSB0aGUgY29ycmVj
dCBhY3Rpb24uCj4gKyAgICAgKi8KPiArICAgIGlmICggaXNfZWRnZSAmJiBzLT5wZW5kaW5nICkK
PiArICAgICAgICB3cml0ZWxfcmVsYXhlZChtYXNrLCBHSUNEX1JESVNUX1NHSV9CQVNFICsgR0lD
Ul9JQ1BFTkRSMCk7Cj4gKwo+ICsgICAgaWYgKCBzLT5lbmFibGVkICkKPiArICAgICAgICBnaWN2
M19pcnFfZGlzYWJsZShkZXNjKTsKPiArCj4gKyAgICBBU1NFUlQoIShyZWFkbF9yZWxheGVkKEdJ
Q0RfUkRJU1RfU0dJX0JBU0UgKyBHSUNSX0lTQUNUSVZFUjApICYgbWFzaykpOwo+ICsgICAgQVNT
RVJUKCEocmVhZGxfcmVsYXhlZChHSUNEX1JESVNUX1NHSV9CQVNFICsgR0lDUl9JU0VOQUJMRVIw
KSAmIG1hc2spKTsKPiArfQo+ICsKPiAgIHN0YXRpYyB2b2lkIGdpY3YzX3Jlc3RvcmVfc3RhdGUo
Y29uc3Qgc3RydWN0IHZjcHUgKnYpCj4gICB7Cj4gICAgICAgdWludDMyX3QgdmFsOwo+IEBAIC00
MTAsNiArNDQ1LDM4IEBAIHN0YXRpYyB2b2lkIGdpY3YzX3Jlc3RvcmVfc3RhdGUoY29uc3Qgc3Ry
dWN0IHZjcHUgKnYpCj4gICAgICAgZHNiKHN5KTsKPiAgIH0KPiAgIAo+ICtzdGF0aWMgdm9pZCBn
aWN2M19yZXN0b3JlX2h3cHBpKHN0cnVjdCBpcnFfZGVzYyAqZGVzYywKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgaHdwcGlfc3RhdGUgKnMpCj4gK3sKPiAr
ICAgIGNvbnN0IHVpbnQzMl90IG1hc2sgPSAoMXUgPDwgZGVzYy0+aXJxKTsgLyogUFBJcyBhcmUg
SVJRIyAxNi0zMSAqLwo+ICsgICAgY29uc3QgYm9vbCBpc19lZGdlID0gISEoZGVzYy0+YXJjaC50
eXBlICYgRFRfSVJRX1RZUEVfRURHRV9CT1RIKTsKPiArCj4gKyAgICAvKgo+ICsgICAgICogVGhl
IElSUSBtdXN0IGFsd2F5cyBoYXZlIGJlZW4gc2V0IGluYWN0aXZlIGFuZCBtYXNrZWQgZXRjIGJ5
Cj4gKyAgICAgKiB0aGUgc2F2aW5nIG9mIHRoZSBwcmV2aW91cyBzdGF0ZSB2aWEgc2F2ZV9hbmRf
bWFza19od3BwaS4KPiArICAgICAqLwo+ICsgICAgQVNTRVJUKCEocmVhZGxfcmVsYXhlZChHSUNE
X1JESVNUX1NHSV9CQVNFICsgR0lDUl9JU0FDVElWRVIwKSAmIG1hc2spKTsKPiArICAgIEFTU0VS
VCghKHJlYWRsX3JlbGF4ZWQoR0lDRF9SRElTVF9TR0lfQkFTRSArIEdJQ1JfSVNFTkFCTEVSMCkg
JiBtYXNrKSk7Cj4gKwo+ICsgICAgaWYgKCBzLT5hY3RpdmUgKQo+ICsgICAgICAgIHdyaXRlbF9y
ZWxheGVkKG1hc2ssIEdJQ0RfUkRJU1RfU0dJX0JBU0UgKyBHSUNSX0lDQUNUSVZFUjApOwo+ICsK
PiArICAgIC8qCj4gKyAgICAgKiBSZXN0b3JlIHBlbmRpbmcgc3RhdGUgZm9yIGVkZ2UgdHJpZ2dl
cmVkIGludGVycnVwdHMgb25seS4gRm9yCj4gKyAgICAgKiBsZXZlbCB0cmlnZ2VyZWQgaW50ZXJy
dXB0cyB0aGUgbGV2ZWwgd2lsbCBiZSByZXN0b3JlZCBhcwo+ICsgICAgICogbmVjZXNzYXJ5IGJ5
IHJlc3RvcmluZyB0aGUgc3RhdGUgb2YgdGhlIHJlbGV2YW50IHBlcmlwaGVyYWwuCj4gKyAgICAg
Kgo+ICsgICAgICogRm9yIGEgbGV2ZWwgdHJpZ2dlcmVkIGludGVycnVwdCBJU1BFTkRSIGFjdHMg
YXMgYSAqbGF0Y2gqIHdoaWNoCj4gKyAgICAgKiBpcyBvbmx5IGNsZWFyZWQgYnkgSUNQRU5EUiAo
aS5lLiB0aGUgaW5wdXQgbGV2ZWwgaXMgbm8gbG9uZ2VyCj4gKyAgICAgKiByZWxldmFudCkuIFdl
IGNlcnRhaW5seSBkbyBub3Qgd2FudCB0aGF0IGhlcmUuCj4gKyAgICAgKi8KPiArICAgIGlmICgg
aXNfZWRnZSAmJiBzLT5wZW5kaW5nICkKPiArICAgICAgICB3cml0ZWxfcmVsYXhlZChtYXNrLCBH
SUNEX1JESVNUX1NHSV9CQVNFICsgR0lDUl9JU1BFTkRSMCk7Cj4gKwo+ICsgICAgaWYgKCBzLT5l
bmFibGVkICkKPiArICAgICAgICBnaWN2M19pcnFfZW5hYmxlKGRlc2MpOwo+ICt9Cj4gKwo+ICAg
c3RhdGljIHZvaWQgZ2ljdjNfZHVtcF9zdGF0ZShjb25zdCBzdHJ1Y3QgdmNwdSAqdikKPiAgIHsK
PiAgICAgICBpbnQgaTsKPiBAQCAtMTgzNSw3ICsxOTAyLDkgQEAgc3RhdGljIGNvbnN0IHN0cnVj
dCBnaWNfaHdfb3BlcmF0aW9ucyBnaWN2M19vcHMgPSB7Cj4gICAgICAgLmluZm8gICAgICAgICAg
ICAgICAgPSAmZ2ljdjNfaW5mbywKPiAgICAgICAuaW5pdCAgICAgICAgICAgICAgICA9IGdpY3Yz
X2luaXQsCj4gICAgICAgLnNhdmVfc3RhdGUgICAgICAgICAgPSBnaWN2M19zYXZlX3N0YXRlLAo+
ICsgICAgLnNhdmVfYW5kX21hc2tfaHdwcGkgPSBnaWN2M19zYXZlX2FuZF9tYXNrX2h3cHBpLAo+
ICAgICAgIC5yZXN0b3JlX3N0YXRlICAgICAgID0gZ2ljdjNfcmVzdG9yZV9zdGF0ZSwKPiArICAg
IC5yZXN0b3JlX2h3cHBpICAgICAgID0gZ2ljdjNfcmVzdG9yZV9od3BwaSwKPiAgICAgICAuZHVt
cF9zdGF0ZSAgICAgICAgICA9IGdpY3YzX2R1bXBfc3RhdGUsCj4gICAgICAgLmdpY19ob3N0X2ly
cV90eXBlICAgPSAmZ2ljdjNfaG9zdF9pcnFfdHlwZSwKPiAgICAgICAuZ2ljX2d1ZXN0X2lycV90
eXBlICA9ICZnaWN2M19ndWVzdF9pcnFfdHlwZSwKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJt
L2dpYy5jIGIveGVuL2FyY2gvYXJtL2dpYy5jCj4gaW5kZXggMTEzNjU1YTc4OS4uNzU5MjE3MjRk
ZCAxMDA2NDQKPiAtLS0gYS94ZW4vYXJjaC9hcm0vZ2ljLmMKPiArKysgYi94ZW4vYXJjaC9hcm0v
Z2ljLmMKPiBAQCAtNjQsNiArNjQsMTcgQEAgdW5zaWduZWQgaW50IGdpY19udW1iZXJfbGluZXMo
dm9pZCkKPiAgICAgICByZXR1cm4gZ2ljX2h3X29wcy0+aW5mby0+bnJfbGluZXM7Cj4gICB9Cj4g
ICAKPiArdm9pZCBnaWNfaHdwcGlfc3RhdGVfaW5pdChzdHJ1Y3QgaHdwcGlfc3RhdGUgKnMsIHVu
c2lnbmVkIGlycSkKPiArewo+ICsgICAgbWVtc2V0KHMsIDAsIHNpemVvZigqcykpOwoKU2VlIGFi
b3ZlIGFib3V0IHRoZSB1bndyaXR0ZW4gcnVsZSBoZXJlLgoKPiArICAgIHMtPmlycSA9IGlycTsK
PiArfQo+ICsKPiArdm9pZCBnaWNfaHdwcGlfc2V0X3BlbmRpbmcoc3RydWN0IGh3cHBpX3N0YXRl
ICpzKQo+ICt7Cj4gKyAgICBzLT5wZW5kaW5nID0gdHJ1ZTsKPiArfQoKSSB0aGluayB5b3Ugd2Fu
dCB0byBleHBsYWluIHdoeSB5b3UgbmVlZCB0aGlzIGFuZCBub3QgdXNpbmcgCnZnaWNfaW5qZWN0
X2lycSgpLiBJIGFzc3VtZSB0aGlzIGlzIGJlY2F1c2Ugc2V0dGluZyBwZW5kaW5nIHdpbGwgbGVh
ZCAKdGhlIEhXIHRvIGdlbmVyYXRlIHRoZSBpbnRlcnJ1cHQgYW5kIHRoZXJlZm9yZSBkZWFsIGFz
IHRoZSBkZXZpY2UgCmdlbmVyYXRlZCBpdC4KCkhvd2V2ZXIsIEkgYW0gbm90IGVudGlyZWx5IHN1
cmUgdGhhdCB3ZSByZWFsbHkgbmVlZCB0aGlzIChJIHdpbGwgY29tbWVudCAKb24gdGhpcyBpbiBw
YXRjaCAjMTEpLgoKPiArCj4gICB2b2lkIGdpY19zYXZlX3N0YXRlKHN0cnVjdCB2Y3B1ICp2KQo+
ICAgewo+ICAgICAgIEFTU0VSVCghbG9jYWxfaXJxX2lzX2VuYWJsZWQoKSk7Cj4gQEAgLTc4LDYg
Kzg5LDI1IEBAIHZvaWQgZ2ljX3NhdmVfc3RhdGUoc3RydWN0IHZjcHUgKnYpCj4gICAgICAgaXNi
KCk7Cj4gICB9Cj4gICAKPiArdm9pZCBnaWNfc2F2ZV9hbmRfbWFza19od3BwaShzdHJ1Y3QgdmNw
dSAqdiwgY29uc3QgdW5zaWduZWQgdmlycSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzdHJ1Y3QgaHdwcGlfc3RhdGUgKnMpCj4gK3sKPiArICAgIHN0cnVjdCBwZW5kaW5nX2lycSAq
cCA9IGlycV90b19wZW5kaW5nKHYsIHZpcnEpOwo+ICsgICAgc3RydWN0IGlycV9kZXNjICpkZXNj
ID0gcC0+ZGVzYzsKPiArCj4gKyAgICBzcGluX2xvY2soJmRlc2MtPmxvY2spOwo+ICsKPiArICAg
IEFTU0VSVCh2aXJxID49IDE2ICYmIHZpcnEgPCAzMik7Cj4gKyAgICBBU1NFUlQoZGVzYy0+aXJx
ID49IDE2ICYmIGRlc2MtPmlycSA8IDMyKTsKPiArICAgIEFTU0VSVCghaXNfaWRsZV92Y3B1KHYp
KTsKPiArCj4gKyAgICBzLT5pbnByb2dyZXNzID0gdGVzdF9hbmRfY2xlYXJfYml0KF9JUlFfSU5Q
Uk9HUkVTUywgJmRlc2MtPnN0YXR1cyk7Cj4gKwo+ICsgICAgZ2ljX2h3X29wcy0+c2F2ZV9hbmRf
bWFza19od3BwaShkZXNjLCBzKTsKPiArCj4gKyAgICBzcGluX3VubG9jaygmZGVzYy0+bG9jayk7
Cj4gK30KPiArCj4gICB2b2lkIGdpY19yZXN0b3JlX3N0YXRlKHN0cnVjdCB2Y3B1ICp2KQo+ICAg
ewo+ICAgICAgIEFTU0VSVCghbG9jYWxfaXJxX2lzX2VuYWJsZWQoKSk7Cj4gQEAgLTg5LDYgKzEx
OSwzMCBAQCB2b2lkIGdpY19yZXN0b3JlX3N0YXRlKHN0cnVjdCB2Y3B1ICp2KQo+ICAgICAgIGlz
YigpOwo+ICAgfQo+ICAgCj4gK3ZvaWQgZ2ljX3Jlc3RvcmVfaHdwcGkoc3RydWN0IHZjcHUgKnYs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5zaWduZWQgdmlycSwKPiArICAgICAg
ICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgaHdwcGlfc3RhdGUgKnMpCj4gK3sKPiArICAg
IHN0cnVjdCBwZW5kaW5nX2lycSAqcCA9IGlycV90b19wZW5kaW5nKHYsIHZpcnEpOwo+ICsgICAg
c3RydWN0IGlycV9kZXNjICpkZXNjID0gaXJxX3RvX2Rlc2Mocy0+aXJxKTsKPiArCj4gKyAgICBz
cGluX2xvY2soJmRlc2MtPmxvY2spOwo+ICsKPiArICAgIEFTU0VSVCh2aXJxID49IDE2ICYmIHZp
cnEgPCAzMik7Cj4gKyAgICBBU1NFUlQoIWlzX2lkbGVfdmNwdSh2KSk7Cj4gKwo+ICsgICAgcC0+
ZGVzYyA9IGRlc2M7IC8qIE1pZ3JhdGUgdG8gbmV3IHBoeXNpY2FsIHByb2Nlc3NvciAqLwo+ICsK
PiArICAgIGlycV9zZXRfdmlycShkZXNjLCB2aXJxKTsKPiArCj4gKyAgICBnaWNfaHdfb3BzLT5y
ZXN0b3JlX2h3cHBpKGRlc2MsIHMpOwo+ICsKPiArICAgIGlmICggcy0+aW5wcm9ncmVzcyApCj4g
KyAgICAgICAgc2V0X2JpdChfSVJRX0lOUFJPR1JFU1MsICZkZXNjLT5zdGF0dXMpOwo+ICsKPiAr
ICAgIHNwaW5fdW5sb2NrKCZkZXNjLT5sb2NrKTsKPiArfQo+ICsKPiAgIC8qIGRlc2MtPmlycSBu
ZWVkcyB0byBiZSBkaXNhYmxlZCBiZWZvcmUgY2FsbGluZyB0aGlzIGZ1bmN0aW9uICovCj4gICB2
b2lkIGdpY19zZXRfaXJxX3R5cGUoc3RydWN0IGlycV9kZXNjICpkZXNjLCB1bnNpZ25lZCBpbnQg
dHlwZSkKPiAgIHsKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL2lycS5jIGIveGVuL2FyY2gv
YXJtL2lycS5jCj4gaW5kZXggYzgwNzgyMDI2Zi4uMWE4ZTU5OWMyZSAxMDA2NDQKPiAtLS0gYS94
ZW4vYXJjaC9hcm0vaXJxLmMKPiArKysgYi94ZW4vYXJjaC9hcm0vaXJxLmMKPiBAQCAtMTUwLDYg
KzE1MCwxMyBAQCBzdGF0aWMgaW5saW5lIHN0cnVjdCBpcnFfZ3Vlc3QgKmlycV9nZXRfZ3Vlc3Rf
aW5mbyhzdHJ1Y3QgaXJxX2Rlc2MgKmRlc2MpCj4gICAgICAgcmV0dXJuIGRlc2MtPmFjdGlvbi0+
ZGV2X2lkOwo+ICAgfQo+ICAgCj4gK3ZvaWQgaXJxX3NldF92aXJxKHN0cnVjdCBpcnFfZGVzYyAq
ZGVzYywgdW5zaWduZWQgdmlycSkKPiArewo+ICsgICAgc3RydWN0IGlycV9ndWVzdCAqaW5mbyA9
IGlycV9nZXRfZ3Vlc3RfaW5mbyhkZXNjKTsKPiArICAgIEFTU0VSVCh0ZXN0X2JpdChfSVJRX1BF
Ul9DUFUsICZkZXNjLT5zdGF0dXMpKTsKPiArICAgIGluZm8tPnZpcnEgPSB2aXJxOwo+ICt9Cj4g
Kwo+ICAgc3RhdGljIGlubGluZSBzdHJ1Y3QgZG9tYWluICppcnFfZ2V0X2RvbWFpbihzdHJ1Y3Qg
aXJxX2Rlc2MgKmRlc2MpCj4gICB7Cj4gICAgICAgcmV0dXJuIGlycV9nZXRfZ3Vlc3RfaW5mbyhk
ZXNjKS0+ZDsKPiBkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLWFybS9kb21haW4uaCBiL3hl
bi9pbmNsdWRlL2FzbS1hcm0vZG9tYWluLmgKPiBpbmRleCBmM2YzZmI3ZDdmLi5jM2Y0Y2Q1MDY5
IDEwMDY0NAo+IC0tLSBhL3hlbi9pbmNsdWRlL2FzbS1hcm0vZG9tYWluLmgKPiArKysgYi94ZW4v
aW5jbHVkZS9hc20tYXJtL2RvbWFpbi5oCj4gQEAgLTM0LDYgKzM0LDE3IEBAIGVudW0gZG9tYWlu
X3R5cGUgewo+ICAgLyogVGhlIGhhcmR3YXJlIGRvbWFpbiBoYXMgYWx3YXlzIGl0cyBtZW1vcnkg
ZGlyZWN0IG1hcHBlZC4gKi8KPiAgICNkZWZpbmUgaXNfZG9tYWluX2RpcmVjdF9tYXBwZWQoZCkg
KChkKSA9PSBoYXJkd2FyZV9kb21haW4pCj4gICAKPiArc3RydWN0IGh3cHBpX3N0YXRlIHsKPiAr
ICAgIC8qIGgvdyBzdGF0ZSAqLwo+ICsgICAgdW5zaWduZWQgaXJxOwo+ICsgICAgdW5zaWduZWQg
bG9uZyBlbmFibGVkOjE7Cj4gKyAgICB1bnNpZ25lZCBsb25nIHBlbmRpbmc6MTsKPiArICAgIHVu
c2lnbmVkIGxvbmcgYWN0aXZlOjE7Cj4gKwo+ICsgICAgLyogWGVuIHMvdyBzdGF0ZSAqLwo+ICsg
ICAgdW5zaWduZWQgbG9uZyBpbnByb2dyZXNzOjE7CgpJdCB3b3VsZCBiZSBiZXN0IGlmIHdlIHVz
ZSBib29sIDoxIGZvciBhbGwgdGhlIGZpZWxkcy4KCj4gK307Cj4gKwo+ICAgc3RydWN0IHZ0aW1l
ciB7Cj4gICAgICAgc3RydWN0IHZjcHUgKnY7Cj4gICAgICAgaW50IGlycTsKPiBkaWZmIC0tZ2l0
IGEveGVuL2luY2x1ZGUvYXNtLWFybS9naWMuaCBiL3hlbi9pbmNsdWRlL2FzbS1hcm0vZ2ljLmgK
PiBpbmRleCA3OTNkMzI0YjMzLi4xMTY0ZTBjN2E2IDEwMDY0NAo+IC0tLSBhL3hlbi9pbmNsdWRl
L2FzbS1hcm0vZ2ljLmgKPiArKysgYi94ZW4vaW5jbHVkZS9hc20tYXJtL2dpYy5oCj4gQEAgLTI3
NSw2ICsyNzUsMjYgQEAgZXh0ZXJuIGludCBnaWN2X3NldHVwKHN0cnVjdCBkb21haW4gKmQpOwo+
ICAgZXh0ZXJuIHZvaWQgZ2ljX3NhdmVfc3RhdGUoc3RydWN0IHZjcHUgKnYpOwo+ICAgZXh0ZXJu
IHZvaWQgZ2ljX3Jlc3RvcmVfc3RhdGUoc3RydWN0IHZjcHUgKnYpOwo+ICAgCj4gKy8qCj4gKyAq
IFNhdmUvcmVzdG9yZSB0aGUgc3RhdGUgb2YgYSBzaW5nbGUgUFBJIHdoaWNoIG11c3QgYmUgcm91
dGVkIHRvCj4gKyAqIDxjdXJyZW50LXZjcHU+ICh0aGF0IGlzLCBpcyBkZWZpbmVkIHRvIGJlIGlu
amVjdGVkIHRvIHRoZSBjdXJyZW50Cj4gKyAqIHZjcHUpLgo+ICsgKgo+ICsgKiBXZSBleHBlY3Qg
dGhlIGRldmljZSB3aGljaCB1c2UgdGhpcyBQUEkgdG8gYmUgcXVpZXQgd2hpbGUgd2UKPiArICog
c2F2ZS9yZXN0b3JlLgo+ICsgKgo+ICsgKiBGb3IgaW5zdGFuY2Ugd2Ugd2FudCB0byBkaXNhYmxl
IHRoZSB0aW1lciBiZWZvcmUgc2F2aW5nIHRoZSBzdGF0ZS4KPiArICogT3RoZXJ3aXNlIHdlIHdp
bGwgbWVzcyB1cCB0aGUgc3RhdGUuCj4gKyAqLwo+ICtzdHJ1Y3QgaHdwcGlfc3RhdGU7Cj4gK2V4
dGVybiB2b2lkIGdpY19od3BwaV9zdGF0ZV9pbml0KHN0cnVjdCBod3BwaV9zdGF0ZSAqcywgdW5z
aWduZWQgaXJxKTsKPiArZXh0ZXJuIHZvaWQgZ2ljX2h3cHBpX3NldF9wZW5kaW5nKHN0cnVjdCBo
d3BwaV9zdGF0ZSAqcyk7Cj4gK2V4dGVybiB2b2lkIGdpY19zYXZlX2FuZF9tYXNrX2h3cHBpKHN0
cnVjdCB2Y3B1ICp2LCB1bnNpZ25lZCBpcnEsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN0cnVjdCBod3BwaV9zdGF0ZSAqcyk7Cj4gK2V4dGVybiB2b2lkIGdpY19yZXN0
b3JlX2h3cHBpKHN0cnVjdCB2Y3B1ICp2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBjb25zdCB1bnNpZ25lZCB2aXJxLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
b25zdCBzdHJ1Y3QgaHdwcGlfc3RhdGUgKnMpOwo+ICsKPiAgIC8qIFNHSSAoQUtBIElQSXMpICov
Cj4gICBlbnVtIGdpY19zZ2kgewo+ICAgICAgIEdJQ19TR0lfRVZFTlRfQ0hFQ0sgPSAwLAo+IEBA
IC0zMjUsOCArMzQ1LDEwIEBAIHN0cnVjdCBnaWNfaHdfb3BlcmF0aW9ucyB7Cj4gICAgICAgaW50
ICgqaW5pdCkodm9pZCk7Cj4gICAgICAgLyogU2F2ZSBHSUMgcmVnaXN0ZXJzICovCj4gICAgICAg
dm9pZCAoKnNhdmVfc3RhdGUpKHN0cnVjdCB2Y3B1ICopOwo+ICsgICAgdm9pZCAoKnNhdmVfYW5k
X21hc2tfaHdwcGkpKHN0cnVjdCBpcnFfZGVzYyAqZGVzYywgc3RydWN0IGh3cHBpX3N0YXRlICpz
KTsKClBsZWFzZSBhdCBsZWFzdCBnaXZlIGEgYnJpZWYgZGVzY3JpcHRpb24gb2YgdGhlIGNhbGxi
YWNrIGFzIHdlIGRpZCBmb3IgCnRoZSBvdGhlciBvbmUuCgo+ICAgICAgIC8qIFJlc3RvcmUgR0lD
IHJlZ2lzdGVycyAqLwo+ICAgICAgIHZvaWQgKCpyZXN0b3JlX3N0YXRlKShjb25zdCBzdHJ1Y3Qg
dmNwdSAqKTsKPiArICAgIHZvaWQgKCpyZXN0b3JlX2h3cHBpKShzdHJ1Y3QgaXJxX2Rlc2MgKmRl
c2MsIGNvbnN0IHN0cnVjdCBod3BwaV9zdGF0ZSAqcyk7CgpEaXR0by4KCj4gICAgICAgLyogRHVt
cCBHSUMgTFIgcmVnaXN0ZXIgaW5mb3JtYXRpb24gKi8KPiAgICAgICB2b2lkICgqZHVtcF9zdGF0
ZSkoY29uc3Qgc3RydWN0IHZjcHUgKik7Cj4gICAKPiBkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUv
YXNtLWFybS9pcnEuaCBiL3hlbi9pbmNsdWRlL2FzbS1hcm0vaXJxLmgKPiBpbmRleCBlMTQwMDFi
NWM2Li4zYjM3YTIxYzA2IDEwMDY0NAo+IC0tLSBhL3hlbi9pbmNsdWRlL2FzbS1hcm0vaXJxLmgK
PiArKysgYi94ZW4vaW5jbHVkZS9hc20tYXJtL2lycS5oCj4gQEAgLTk2LDYgKzk2LDggQEAgdm9p
ZCBpcnFfc2V0X2FmZmluaXR5KHN0cnVjdCBpcnFfZGVzYyAqZGVzYywgY29uc3QgY3B1bWFza190
ICpjcHVfbWFzayk7Cj4gICAgKi8KPiAgIGJvb2wgaXJxX3R5cGVfc2V0X2J5X2RvbWFpbihjb25z
dCBzdHJ1Y3QgZG9tYWluICpkKTsKPiAgIAo+ICt2b2lkIGlycV9zZXRfdmlycShzdHJ1Y3QgaXJx
X2Rlc2MgKmRlc2MsIHVuc2lnbmVkIHZpcnEpOwoKUGxlYXNlIGRvY3VtZW50IHRoZSBmdW5jdGlv
bi4KCj4gKwo+ICAgI2VuZGlmIC8qIF9BU01fSFdfSVJRX0ggKi8KPiAgIC8qCj4gICAgKiBMb2Nh
bCB2YXJpYWJsZXM6Cj4gCgpDaGVlcnMsCgotLSAKSnVsaWVuIEdyYWxsCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0
Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qu
b3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

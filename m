Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id AF25C6F052
	for <lists+xen-devel@lfdr.de>; Sat, 20 Jul 2019 20:28:37 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hou2m-0000ra-MN; Sat, 20 Jul 2019 18:25:16 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=+V0H=VR=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hou2k-0000rV-W2
 for xen-devel@lists.xenproject.org; Sat, 20 Jul 2019 18:25:15 +0000
X-Inumbo-ID: b690f0fd-ab1b-11e9-8980-bc764e045a96
Received: from foss.arm.com (unknown [217.140.110.172])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTP
 id b690f0fd-ab1b-11e9-8980-bc764e045a96;
 Sat, 20 Jul 2019 18:25:12 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 8530D28;
 Sat, 20 Jul 2019 11:25:12 -0700 (PDT)
Received: from [10.37.12.6] (unknown [10.37.12.6])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 7E1573F59C;
 Sat, 20 Jul 2019 11:25:11 -0700 (PDT)
To: Oleksandr Tyshchenko <olekstysh@gmail.com>, xen-devel@lists.xenproject.org
References: <1561545009-17493-1-git-send-email-olekstysh@gmail.com>
 <1561545009-17493-2-git-send-email-olekstysh@gmail.com>
From: Julien Grall <julien.grall@arm.com>
Message-ID: <c07d3a21-872e-c711-958d-916461e331e9@arm.com>
Date: Sat, 20 Jul 2019 19:25:10 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.2
MIME-Version: 1.0
In-Reply-To: <1561545009-17493-2-git-send-email-olekstysh@gmail.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH V1] iommu/arm: Add Renesas IPMMU-VMSA support
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Oleksandr Tyshchenko <oleksandr_tyshchenko@epam.com>,
 sstabellini@kernel.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGksCgpBcG9sb2dpZXMgZm9yIHRoZSBsYXRlIGFuc3dlci4gSSBoYXZlIGJlZW4gdHJhdmVsaW5n
IGZvciB0aGUgcGFzdCBmZXcgd2Vla3MuCgpPbiA2LzI2LzE5IDExOjMwIEFNLCBPbGVrc2FuZHIg
VHlzaGNoZW5rbyB3cm90ZToKPiBGcm9tOiBPbGVrc2FuZHIgVHlzaGNoZW5rbyA8b2xla3NhbmRy
X3R5c2hjaGVua29AZXBhbS5jb20+Cj4gCj4gVGhlIElQTU1VLVZNU0EgaXMgVk1TQS1jb21wYXRp
YmxlIEkvTyBNZW1vcnkgTWFuYWdlbWVudCBVbml0IChJT01NVSkKPiB3aGljaCBwcm92aWRlcyBh
ZGRyZXNzIHRyYW5zbGF0aW9uIGFuZCBhY2Nlc3MgcHJvdGVjdGlvbiBmdW5jdGlvbmFsaXRpZXMK
PiB0byBwcm9jZXNzaW5nIHVuaXRzIGFuZCBpbnRlcmNvbm5lY3QgbmV0d29ya3MuCgpEbyB5b3Ug
aGF2ZSBhIGxpbmsgdG8gdGhlIHNwZWNpZmljYXRpb24/CgpNeSBrbm93bGVkZ2UgYWJvdXQgdGhl
IElQTU1VIGlzIHF1aXRlIGxpbWl0ZWQsIHNvIGZvciBub3csIEkgd2lsbCBtb3N0bHkgCmxvb2sg
YXQgWGVuIHNwZWNpZmljIGNvZGUuIEl0IHdvdWxkIGJlIGdvb2QgaWYgc29tZW9uZSB3aXRoIGEg
YmV0dGVyIAprbm93bGVkZ2Ugb2YgdGhlIGRyaXZlciBjb3VsZCBoYXZlIGEgbG9vay4KClsuLi5d
Cgo+IGRpZmYgLS1naXQgYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9LY29uZmlnIGIveGVuL2Ry
aXZlcnMvcGFzc3Rocm91Z2gvS2NvbmZpZwo+IGluZGV4IGEzYzA2NDkuLmU1N2FhMjkgMTAwNjQ0
Cj4gLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvS2NvbmZpZwo+ICsrKyBiL3hlbi9kcml2
ZXJzL3Bhc3N0aHJvdWdoL0tjb25maWcKPiBAQCAtMTIsNCArMTIsMTcgQEAgY29uZmlnIEFSTV9T
TU1VCj4gICAKPiAgIAkgIFNheSBZIGhlcmUgaWYgeW91ciBTb0MgaW5jbHVkZXMgYW4gSU9NTVUg
ZGV2aWNlIGltcGxlbWVudGluZyB0aGUKPiAgIAkgIEFSTSBTTU1VIGFyY2hpdGVjdHVyZS4KPiAr
Cj4gK2NvbmZpZyBJUE1NVV9WTVNBCj4gKwlib29sICJSZW5lc2FzIElQTU1VLVZNU0EgZm91bmQg
aW4gUi1DYXIgR2VuMyBTb0NzIgo+ICsJZGVmYXVsdCB5CgpJIHdvdWxkIHByZWZlciB0aGlzIHRv
IGJlIGEgZGVmYXVsdCBOIGZvciB0aGUgdGltZS1iZWluZy4KCj4gKwlkZXBlbmRzIG9uIEFSTV82
NAo+ICsJLS0taGVscC0tLQo+ICsJICBTdXBwb3J0IGZvciBpbXBsZW1lbnRhdGlvbnMgb2YgdGhl
IFJlbmVzYXMgSVBNTVUtVk1TQSBmb3VuZAo+ICsJICBpbiBSLUNhciBHZW4zIFNvQ3MuCj4gKwo+
ICsJICBTYXkgWSBoZXJlIGlmIHlvdSBhcmUgdXNpbmcgbmV3ZXN0IFItQ2FyIEdlbjMgU29DcyBy
ZXZpc2lvbnMgd2hpY2ggSVBNTVUKCldoYXQgbmV3IG5vdyB3aWxsIGJlIG9sZCBzb29uIDspLiBT
byBpdCB3b3VsZCBiZSBiZXN0IGlmIHlvdSBnaXZlIGEgCnByZWNpc2UgcmV2aXNpb24gaGVyZS4K
Cj4gKwkgIGhhcmR3YXJlIHN1cHBvcnRzIHN0YWdlIDIgdHJhbnNsYXRpb24gdGFibGUgZm9ybWF0
IGFuZCBpcyBhYmxlIHRvIHVzZQo+ICsJICBDUFUncyBQMk0gdGFibGUgYXMgaXMuCj4gKwo+ICAg
ZW5kaWYKPiBkaWZmIC0tZ2l0IGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYXJtL01ha2VmaWxl
IGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYXJtL01ha2VmaWxlCj4gaW5kZXggYjNlZmNmZC4u
NDBhYzdhOSAxMDA2NDQKPiAtLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0vTWFrZWZp
bGUKPiArKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0vTWFrZWZpbGUKPiBAQCAtMSwy
ICsxLDMgQEAKPiAgIG9iai15ICs9IGlvbW11Lm8KPiAgIG9iai0kKENPTkZJR19BUk1fU01NVSkg
Kz0gc21tdS5vCj4gK29iai0kKENPTkZJR19JUE1NVV9WTVNBKSArPSBpcG1tdS12bXNhLm8KPiBk
aWZmIC0tZ2l0IGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYXJtL2lwbW11LXZtc2EuYyBiL3hl
bi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FybS9pcG1tdS12bXNhLmMKPiBuZXcgZmlsZSBtb2RlIDEw
MDY0NAo+IGluZGV4IDAwMDAwMDAuLjUwOTFjNjEKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIveGVu
L2RyaXZlcnMvcGFzc3Rocm91Z2gvYXJtL2lwbW11LXZtc2EuYwo+IEBAIC0wLDAgKzEsMTQ4NyBA
QAo+ICsvKgo+ICsgKiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0vaXBtbXUtdm1zYS5jCj4g
KyAqCj4gKyAqIERyaXZlciBmb3IgdGhlIFJlbmVzYXMgSVBNTVUtVk1TQSBmb3VuZCBpbiBSLUNh
ciBHZW4zIFNvQ3MuCj4gKyAqCj4gKyAqIFRoZSBJUE1NVS1WTVNBIGlzIFZNU0EtY29tcGF0aWJs
ZSBJL08gTWVtb3J5IE1hbmFnZW1lbnQgVW5pdCAoSU9NTVUpCj4gKyAqIHdoaWNoIHByb3ZpZGVz
IGFkZHJlc3MgdHJhbnNsYXRpb24gYW5kIGFjY2VzcyBwcm90ZWN0aW9uIGZ1bmN0aW9uYWxpdGll
cwo+ICsgKiB0byBwcm9jZXNzaW5nIHVuaXRzIGFuZCBpbnRlcmNvbm5lY3QgbmV0d29ya3MuCj4g
KyAqCj4gKyAqIFBsZWFzZSBub3RlLCBjdXJyZW50IGRyaXZlciBpcyBzdXBwb3NlZCB0byB3b3Jr
IG9ubHkgd2l0aCBuZXdlc3QgR2VuMyBTb0NzCj4gKyAqIHJldmlzaW9ucyB3aGljaCBJUE1NVSBo
YXJkd2FyZSBzdXBwb3J0cyBzdGFnZSAyIHRyYW5zbGF0aW9uIHRhYmxlIGZvcm1hdCBhbmQKPiAr
ICogaXMgYWJsZSB0byB1c2UgQ1BVJ3MgUDJNIHRhYmxlIGFzIGlzLgo+ICsgKgo+ICsgKiBCYXNl
ZCBvbiBMaW51eCdzIElQTU1VLVZNU0EgZHJpdmVyIGZyb20gUmVuZXNhcyBCU1A6Cj4gKyAqICAg
IGRyaXZlcnMvaW9tbXUvaXBtbXUtdm1zYS5jCgpXaGF0IGFyZSB0aGUgbWFqb3IgZGlmZmVyZW5j
ZXMgY29tcGFyZSB0aGUgTGludXggZHJpdmVyPwoKPiArICogeW91IGNhbiBmb3VuZCBhdDoKPiAr
ICogICAgdXJsOiBnaXQ6Ly9naXQua2VybmVsLm9yZy9wdWIvc2NtL2xpbnV4L2tlcm5lbC9naXQv
aG9ybXMvcmVuZXNhcy1ic3AuZ2l0Cj4gKyAqICAgIGJyYW5jaDogdjQuMTQuNzUtbHRzaS9yY2Fy
LTMuOS4yCj4gKyAqICAgIGNvbW1pdDogYTUyNjZkMjk4MTI0ODc0YzJjMDZiOGIxM2QwNzNmNmVj
YzJlZTM1NQoKSXMgdGhlcmUgYW55IHJlYXNvbiB0byB1c2UgdGhlIEJTUCBkcml2ZXIgYW5kIG5v
dCB0aGUgb25lIHByb3ZpZGVkIGJ5IApMaW51eCBkaXJlY3RseT8KClsuLi5dCgo+ICsjZGVmaW5l
IGRldl9hcmNoZGF0YShkZXYpICgoc3RydWN0IGlwbW11X3Ztc2FfeGVuX2RldmljZSAqKWRldi0+
YXJjaGRhdGEuaW9tbXUpCj4gKwo+ICsvKiBSb290L0NhY2hlIElQTU1VIGRldmljZSdzIGluZm9y
bWF0aW9uICovCj4gK3N0cnVjdCBpcG1tdV92bXNhX2RldmljZQo+ICt7CgpBRkFJQ1QsIHRoaXMg
ZmlsZSB3YXMgY29udmVydGVkIHRvIFhlbiBjb2Rpbmcgc3R5bGUuIElmIHNvLCB0aGUgc3R5bGUg
CmZvciBzdHJ1Y3QgaXMKCnN0cnVjdCAuLi4gewouLi4KfTsKCj4gKyAgICBzdHJ1Y3QgZGV2aWNl
ICpkZXY7Cj4gKyAgICB2b2lkIF9faW9tZW0gKmJhc2U7Cj4gKyAgICBzdHJ1Y3QgaXBtbXVfdm1z
YV9kZXZpY2UgKnJvb3Q7Cj4gKyAgICBzdHJ1Y3QgbGlzdF9oZWFkIGxpc3Q7Cj4gKyAgICB1bnNp
Z25lZCBpbnQgbnVtX3V0bGJzOwo+ICsgICAgdW5zaWduZWQgaW50IG51bV9jdHg7Cj4gKyAgICBz
cGlubG9ja190IGxvY2s7ICAgIC8qIFByb3RlY3RzIGN0eCBhbmQgZG9tYWluc1tdICovCj4gKyAg
ICBERUNMQVJFX0JJVE1BUChjdHgsIElQTU1VX0NUWF9NQVgpOwo+ICsgICAgc3RydWN0IGlwbW11
X3Ztc2FfZG9tYWluICpkb21haW5zW0lQTU1VX0NUWF9NQVhdOwo+ICt9Owo+ICsKPiArLyoKPiAr
ICogUm9vdC9DYWNoZSBJUE1NVSBkb21haW4ncyBpbmZvcm1hdGlvbgo+ICsgKgo+ICsgKiBSb290
IElQTU1VIGRldmljZSBpcyBhc3NpZ25lZCB0byBSb290IElQTU1VIGRvbWFpbiB3aGlsZSBDYWNo
ZSBJUE1NVSBkZXZpY2UKPiArICogaXMgYXNzaWduZWQgdG8gQ2FjaGUgSVBNTVUgZG9tYWluLiBN
YXN0ZXIgZGV2aWNlcyBhcmUgY29ubmVjdGVkIHRvIENhY2hlCj4gKyAqIElQTU1VIGRldmljZXMg
dGhyb3VnaCBzcGVjaWZpYyBwb3J0cyBjYWxsZWQgbWljcm8tVExCcy4KPiArICogQWxsIENhY2hl
IElQTU1VIGRldmljZXMsIGluIHR1cm4sIGFyZSBjb25uZWN0ZWQgdG8gUm9vdCBJUE1NVSBkZXZp
Y2UKPiArICogd2hpY2ggbWFuYWdlcyBJUE1NVSBjb250ZXh0Lgo+ICsgKi8KPiArc3RydWN0IGlw
bW11X3Ztc2FfZG9tYWluCj4gK3sKCkRpdHRvLgoKPiArICAgIC8qCj4gKyAgICAgKiBJUE1NVSBk
ZXZpY2UgYXNzaWduZWQgdG8gdGhpcyBJUE1NVSBkb21haW4uCj4gKyAgICAgKiBFaXRoZXIgUm9v
dCBkZXZpY2Ugd2hpY2ggaXMgbG9jYXRlZCBhdCB0aGUgbWFpbiBtZW1vcnkgYnVzIGRvbWFpbiBv
cgo+ICsgICAgICogQ2FjaGUgZGV2aWNlIHdoaWNoIGlzIGxvY2F0ZWQgYXQgZWFjaCBoaWVyYXJj
aHkgYnVzIGRvbWFpbi4KPiArICAgICAqLwo+ICsgICAgc3RydWN0IGlwbW11X3Ztc2FfZGV2aWNl
ICptbXU7Cj4gKwo+ICsgICAgLyogQ29udGV4dCB1c2VkIGZvciB0aGlzIElQTU1VIGRvbWFpbiAq
Lwo+ICsgICAgdW5zaWduZWQgaW50IGNvbnRleHRfaWQ7Cj4gKwo+ICsgICAgLyogWGVuIGRvbWFp
biBhc3NvY2lhdGVkIHdpdGggdGhpcyBJUE1NVSBkb21haW4gKi8KPiArICAgIHN0cnVjdCBkb21h
aW4gKmQ7Cj4gKwo+ICsgICAgLyogVGhlIGZpZWxkcyBiZWxvdyBhcmUgdXNlZCBmb3IgQ2FjaGUg
SVBNTVUgZG9tYWluIG9ubHkgKi8KPiArCj4gKyAgICAvKgo+ICsgICAgICogVXNlZCB0byBrZWVw
IHRyYWNrIG9mIHRoZSBtYXN0ZXIgZGV2aWNlcyB3aGljaCBhcmUgYXR0YWNoZWQgdG8gdGhpcwo+
ICsgICAgICogSVBNTVUgZG9tYWluIChkb21haW4gdXNlcnMpLiBNYXN0ZXIgZGV2aWNlcyBiZWhp
bmQgdGhlIHNhbWUgSVBNTVUgZGV2aWNlCj4gKyAgICAgKiBhcmUgZ3JvdXBlZCB0b2dldGhlciBi
eSBwdXR0aW5nIGludG8gdGhlIHNhbWUgSVBNTVUgZG9tYWluLgo+ICsgICAgICogT25seSB3aGVu
IHRoZSByZWZjb3VudCByZWFjaGVzIDAgdGhpcyBJUE1NVSBkb21haW4gY2FuIGJlIGRlc3Ryb3ll
ZC4KPiArICAgICAqLwo+ICsgICAgaW50IHJlZmNvdW50OwoKSWYgdGhlIHJlZmNvdW50IGNhbm5v
dCBiZSAwLCB0aGVuIEkgd291bGQgcHJlZmVyIGFuIHVuc2lnbmVkIGludCBoZXJlLgoKPiArICAg
IC8qIFVzZWQgdG8gbGluayB0aGlzIElQTU1VIGRvbWFpbiBmb3IgdGhlIHNhbWUgWGVuIGRvbWFp
biAqLwo+ICsgICAgc3RydWN0IGxpc3RfaGVhZCBsaXN0Owo+ICt9OwoKClsuLi5dCgo+ICsvKiBS
ZWFkL1dyaXRlIEFjY2VzcyAqLwo+ICtzdGF0aWMgdTMyIGlwbW11X3JlYWQoc3RydWN0IGlwbW11
X3Ztc2FfZGV2aWNlICptbXUsIHVuc2lnbmVkIGludCBvZmZzZXQpCgpJZiB5b3UgYXJlIGdvaW5n
IHRvIHVzZSBYZW4gY29kaW5nIHN0eWxlLCB0aGVuIHRoaXMgc2hvdWxkIGJlIAoidWludDMyX3Qi
LiBUaGUgc2FtZSBpcyB2YWxpZCBldmVyeXdoZXJlIGluIHRoaXMgZmlsZSwgSSBhbSBub3QgZ29p
bmcgdG8gCm1lbnRpb24gYWxsIG9mIHRoZW0gOikuCgo+ICt7Cj4gKyAgICByZXR1cm4gcmVhZGwo
bW11LT5iYXNlICsgb2Zmc2V0KTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgaXBtbXVfd3JpdGUo
c3RydWN0IGlwbW11X3Ztc2FfZGV2aWNlICptbXUsIHVuc2lnbmVkIGludCBvZmZzZXQsCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgIHUzMiBkYXRhKQo+ICt7Cj4gKyAgICB3cml0ZWwoZGF0YSwg
bW11LT5iYXNlICsgb2Zmc2V0KTsKPiArfQo+ICsKPiArc3RhdGljIHUzMiBpcG1tdV9jdHhfcmVh
ZF9yb290KHN0cnVjdCBpcG1tdV92bXNhX2RvbWFpbiAqZG9tYWluLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IHJlZykKPiArewo+ICsgICAgcmV0dXJuIGlw
bW11X3JlYWQoZG9tYWluLT5tbXUtPnJvb3QsCj4gKyAgICAgICAgICAgICAgICAgICAgICBkb21h
aW4tPmNvbnRleHRfaWQgKiBJTV9DVFhfU0laRSArIHJlZyk7Cj4gK30KPiArCj4gK3N0YXRpYyB2
b2lkIGlwbW11X2N0eF93cml0ZV9yb290KHN0cnVjdCBpcG1tdV92bXNhX2RvbWFpbiAqZG9tYWlu
LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgcmVnLCB1
MzIgZGF0YSkKPiArewo+ICsgICAgaXBtbXVfd3JpdGUoZG9tYWluLT5tbXUtPnJvb3QsCj4gKyAg
ICAgICAgICAgICAgICBkb21haW4tPmNvbnRleHRfaWQgKiBJTV9DVFhfU0laRSArIHJlZywgZGF0
YSk7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGlwbW11X2N0eF93cml0ZV9jYWNoZShzdHJ1Y3Qg
aXBtbXVfdm1zYV9kb21haW4gKmRvbWFpbiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHVuc2lnbmVkIGludCByZWcsIHUzMiBkYXRhKQo+ICt7Cj4gKyAgICBBU1NFUlQocmVn
ID09IElNQ1RSKTsKCldoYXQncyB0aGUgcmF0aW9uYWxlIG9mIHBhc3NpbmcgcmVnIGluIHBhcmFt
ZXRlciBpZiBpdCBjYW4gb25seSBiZSBlcXVhbCAKdG8gSU1DVFI/Cgo+ICsKPiArICAgIC8qIE1h
c2sgZmllbGRzIHdoaWNoIGFyZSBpbXBsZW1lbnRlZCBpbiBJUE1NVS1NTSBvbmx5LiAqLwo+ICsg
ICAgaWYgKCAhaXBtbXVfaXNfcm9vdChkb21haW4tPm1tdSkgKQo+ICsgICAgICAgIGlwbW11X3dy
aXRlKGRvbWFpbi0+bW11LCBkb21haW4tPmNvbnRleHRfaWQgKiBJTV9DVFhfU0laRSArIHJlZywK
PiArICAgICAgICAgICAgICAgICAgICBkYXRhICYgSU1DVFJfQ09NTU9OX01BU0spOwo+ICt9Cgpb
Li4uXQoKPiArLyogRW5hYmxlIE1NVSB0cmFuc2xhdGlvbiBmb3IgdGhlIG1pY3JvLVRMQi4gKi8K
PiArc3RhdGljIHZvaWQgaXBtbXVfdXRsYl9lbmFibGUoc3RydWN0IGlwbW11X3Ztc2FfZG9tYWlu
ICpkb21haW4sCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCB1
dGxiKQo+ICt7Cj4gKyAgICBzdHJ1Y3QgaXBtbXVfdm1zYV9kZXZpY2UgKm1tdSA9IGRvbWFpbi0+
bW11Owo+ICsKPiArICAgIC8qCj4gKyAgICAgKiBUT0RPOiBSZWZlcmVuY2UtY291bnQgdGhlIG1p
Y3JvLVRMQiBhcyBzZXZlcmFsIGJ1cyBtYXN0ZXJzIGNhbiBiZQo+ICsgICAgICogY29ubmVjdGVk
IHRvIHRoZSBzYW1lIG1pY3JvLVRMQi4KPiArICAgICAqLwoKV2hhdCB3b3VsZCBiZSB0aGUgZXhh
Y3QgcHJvYmxlbSBpZiB0aGlzIGlzIG5vdCBoYW5kbGVkPyBDb3VsZCBhIHV0bGIgCnNoYXJlZCBi
ZXR3ZWVuIG11bHRpcGxlIGRvbWFpbj8KCj4gKyAgICBpcG1tdV93cml0ZShtbXUsIElNVUFTSUQo
dXRsYiksIDApOwo+ICsgICAgaXBtbXVfd3JpdGUobW11LCBJTVVDVFIodXRsYiksIGlwbW11X3Jl
YWQobW11LCBJTVVDVFIodXRsYikpIHwKPiArICAgICAgICAgICAgICAgIElNVUNUUl9UVFNFTF9N
TVUoZG9tYWluLT5jb250ZXh0X2lkKSB8IElNVUNUUl9NTVVFTik7Cj4gK30KClsuLi5dCgo+ICtz
dGF0aWMgaW50IGlwbW11X2RvbWFpbl9pbml0X2NvbnRleHQoc3RydWN0IGlwbW11X3Ztc2FfZG9t
YWluICpkb21haW4pCj4gK3sKPiArICAgIHU2NCB0dGJyOwoKcy91NjQvdWludDY0X3QvCgo+ICsg
ICAgdTMyIHRzejA7Cj4gKyAgICBpbnQgcmV0Owo+ICsKPiArICAgIC8qIEZpbmQgYW4gdW51c2Vk
IGNvbnRleHQuICovCj4gKyAgICByZXQgPSBpcG1tdV9kb21haW5fYWxsb2NhdGVfY29udGV4dChk
b21haW4tPm1tdS0+cm9vdCwgZG9tYWluKTsKPiArICAgIGlmICggcmV0IDwgMCApCj4gKyAgICAg
ICAgcmV0dXJuIHJldDsKPiArCj4gKyAgICBkb21haW4tPmNvbnRleHRfaWQgPSByZXQ7Cj4gKwo+
ICsgICAgLyoKPiArICAgICAqIFRUQlIwCj4gKyAgICAgKiBVc2UgUDJNIHRhYmxlIGZvciB0aGlz
IFhlbiBkb21haW4uCj4gKyAgICAgKi8KPiArICAgIEFTU0VSVChkb21haW4tPmQgIT0gTlVMTCk7
Cj4gKyAgICB0dGJyID0gcGFnZV90b19tYWRkcihkb21haW4tPmQtPmFyY2gucDJtLnJvb3QpOwo+
ICsKPiArICAgIGRldl9pbmZvKGRvbWFpbi0+bW11LT5yb290LT5kZXYsICJkJWQ6IFNldCBJUE1N
VSBjb250ZXh0ICV1IChwZ2QgMHglIlBSSXg2NCIpXG4iLAoKV2UgaW50cm9kdWNlIGEgZm9ybWF0
IHNwZWNpZmllciB0byBwcmludCBhIGRvbWFpbi4gU28geW91IGNhbiB1c2UgJXBkIGluIApjb21i
aW5hdGlvbiBvZiBqdXN0IGRvbWFpbi0+ZC4KCj4gKyAgICAgICAgICAgICBkb21haW4tPmQtPmRv
bWFpbl9pZCwgZG9tYWluLT5jb250ZXh0X2lkLCB0dGJyKTsKPiArCj4gKyAgICBpcG1tdV9jdHhf
d3JpdGVfcm9vdChkb21haW4sIElNVFRMQlIwLCB0dGJyICYgSU1UVExCUjBfVFRCUl9NQVNLKTsK
PiArICAgIGlwbW11X2N0eF93cml0ZV9yb290KGRvbWFpbiwgSU1UVFVCUjAsICh0dGJyID4+IDMy
KSAmIElNVFRVQlIwX1RUQlJfTUFTSyk7Cj4gKwo+ICsgICAgLyoKPiArICAgICAqIFRUQkNSCj4g
KyAgICAgKiBXZSB1c2UgbG9uZyBkZXNjcmlwdG9ycyB3aXRoIGlubmVyLXNoYXJlYWJsZSBXQldB
IHRhYmxlcyBhbmQgYWxsb2NhdGUKPiArICAgICAqIHRoZSB3aG9sZSAicDJtX2lwYV9iaXRzIiBJ
UEEgc3BhY2UgdG8gVFRCUjAuIFVzZSA0S0IgcGFnZSBncmFudWxlLgo+ICsgICAgICogU3RhcnQg
cGFnZSB0YWJsZSB3YWxrcyBhdCBmaXJzdCBsZXZlbC4gQnlwYXNzIHN0YWdlIDEgdHJhbnNsYXRp
b24KPiArICAgICAqIHdoZW4gb25seSBzdGFnZSAyIHRyYW5zbGF0aW9uIGlzIHBlcmZvcm1lZC4K
CkkgYW0gbm90IHN1cmUgdG8gdW5kZXJzdGFuZCB0aGUgbGFzdCBzZW50ZW5jZS4gWW91IG9ubHkg
dXNlIHN0YWdlMiAKcmlnaHQsIHNvIGl0IHNob3VsZG4ndCBpdCBiZSAiQWx3YXlzIGJ5cGFzcyBz
dGFnZSAxIHRyYW5zbGF0aW9uIj8KCj4gKyAgICAgKi8KPiArICAgIHRzejAgPSAoNjQgLSBwMm1f
aXBhX2JpdHMpIDw8IElNVFRCQ1JfVFNaMF9TSElGVDsKPiArICAgIGlwbW11X2N0eF93cml0ZV9y
b290KGRvbWFpbiwgSU1UVEJDUiwgSU1UVEJDUl9FQUUgfCBJTVRUQkNSX1BNQiB8Cj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICBJTVRUQkNSX1NIMF9JTk5FUl9TSEFSRUFCTEUgfCBJTVRUQkNS
X09SR04wX1dCX1dBIHwKPiArICAgICAgICAgICAgICAgICAgICAgICAgIElNVFRCQ1JfSVJHTjBf
V0JfV0EgfCBJTVRUQkNSX1NMMF9MVkxfMSB8IHRzejApOwoKWy4uLl0KCj4gKy8qIEZhdWx0IEhh
bmRsaW5nICovCj4gK3N0YXRpYyB2b2lkIGlwbW11X2RvbWFpbl9pcnEoc3RydWN0IGlwbW11X3Zt
c2FfZG9tYWluICpkb21haW4pCj4gK3sKPiArICAgIGNvbnN0IHUzMiBlcnJfbWFzayA9IElNU1RS
X01ISVQgfCBJTVNUUl9BQk9SVCB8IElNU1RSX1BGIHwgSU1TVFJfVEY7Cj4gKyAgICBzdHJ1Y3Qg
aXBtbXVfdm1zYV9kZXZpY2UgKm1tdSA9IGRvbWFpbi0+bW11Owo+ICsgICAgdTMyIHN0YXR1czsK
PiArICAgIHU2NCBpb3ZhOwo+ICsKPiArICAgIHN0YXR1cyA9IGlwbW11X2N0eF9yZWFkX3Jvb3Qo
ZG9tYWluLCBJTVNUUik7Cj4gKyAgICBpZiAoICEoc3RhdHVzICYgZXJyX21hc2spICkKPiArICAg
ICAgICByZXR1cm47Cj4gKwo+ICsgICAgaW92YSA9IGlwbW11X2N0eF9yZWFkX3Jvb3QoZG9tYWlu
LCBJTUVMQVIpIHwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodTY0KWlwbW11
X2N0eF9yZWFkX3Jvb3QoZG9tYWluLCBJTUVVQVIpIDw8IDMyKTsKPiArCj4gKyAgICAvKgo+ICsg
ICAgICogQ2xlYXIgdGhlIGVycm9yIHN0YXR1cyBmbGFncy4gVW5saWtlIHRyYWRpdGlvbmFsIGlu
dGVycnVwdCBmbGFnCj4gKyAgICAgKiByZWdpc3RlcnMgdGhhdCBtdXN0IGJlIGNsZWFyZWQgYnkg
d3JpdGluZyAxLCB0aGlzIHN0YXR1cyByZWdpc3Rlcgo+ICsgICAgICogc2VlbXMgdG8gcmVxdWly
ZSAwLiBUaGUgZXJyb3IgYWRkcmVzcyByZWdpc3RlciBtdXN0IGJlIHJlYWQgYmVmb3JlLAo+ICsg
ICAgICogb3RoZXJ3aXNlIGl0cyB2YWx1ZSB3aWxsIGJlIDAuCj4gKyAgICAgKi8KPiArICAgIGlw
bW11X2N0eF93cml0ZV9yb290KGRvbWFpbiwgSU1TVFIsIDApOwo+ICsKPiArICAgIC8qIExvZyBm
YXRhbCBlcnJvcnMuICovCj4gKyAgICBpZiAoIHN0YXR1cyAmIElNU1RSX01ISVQgKQo+ICsgICAg
ICAgIGRldl9lcnJfcmF0ZWxpbWl0ZWQobW11LT5kZXYsICJkJWQ6IE11bHRpcGxlIFRMQiBoaXRz
IEAweCUiUFJJeDY0IlxuIiwKClNpbWlsYXIgcmVtYXJrIGZvciBkJWQgaGVyZSAuLi4KCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBkb21haW4tPmQtPmRvbWFpbl9pZCwgaW92YSk7Cj4g
KyAgICBpZiAoIHN0YXR1cyAmIElNU1RSX0FCT1JUICkKPiArICAgICAgICBkZXZfZXJyX3JhdGVs
aW1pdGVkKG1tdS0+ZGV2LCAiZCVkOiBQYWdlIFRhYmxlIFdhbGsgQWJvcnQgQDB4JSJQUkl4NjQi
XG4iLAoKLi4uIGhlcmUgYW5kIC4uLgo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9t
YWluLT5kLT5kb21haW5faWQsIGlvdmEpOwo+ICsKPiArICAgIC8qIFJldHVybiBpZiBpdCBpcyBu
ZWl0aGVyIFBlcm1pc3Npb24gRmF1bHQgbm9yIFRyYW5zbGF0aW9uIEZhdWx0LiAqLwo+ICsgICAg
aWYgKCAhKHN0YXR1cyAmIChJTVNUUl9QRiB8IElNU1RSX1RGKSkgKQo+ICsgICAgICAgIHJldHVy
bjsKPiArCj4gKyAgICAvKiBGbHVzaCB0aGUgVExCIGFzIHJlcXVpcmVkIHdoZW4gSVBNTVUgdHJh
bnNsYXRpb24gZXJyb3Igb2NjdXJyZWQuICovCj4gKyAgICBpcG1tdV90bGJfaW52YWxpZGF0ZShk
b21haW4pOwo+ICsKPiArICAgIGRldl9lcnJfcmF0ZWxpbWl0ZWQobW11LT5kZXYsICJkJWQ6IFVu
aGFuZGxlZCBmYXVsdDogc3RhdHVzIDB4JTA4eCBpb3ZhIDB4JSJQUkl4NjQiXG4iLAoKLi4uIGhl
cmUuCgo+ICsgICAgICAgICAgICAgICAgICAgICAgICBkb21haW4tPmQtPmRvbWFpbl9pZCwgc3Rh
dHVzLCBpb3ZhKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgaXBtbXVfaXJxKGludCBpcnEsIHZv
aWQgKmRldiwgc3RydWN0IGNwdV91c2VyX3JlZ3MgKnJlZ3MpCj4gK3sKPiArICAgIHN0cnVjdCBp
cG1tdV92bXNhX2RldmljZSAqbW11ID0gZGV2Owo+ICsgICAgdW5zaWduZWQgaW50IGk7Cj4gKyAg
ICB1bnNpZ25lZCBsb25nIGZsYWdzOwo+ICsKPiArICAgIHNwaW5fbG9ja19pcnFzYXZlKCZtbXUt
PmxvY2ssIGZsYWdzKTsKPiArCj4gKyAgICAvKgo+ICsgICAgICogV2hlbiBpbnRlcnJ1cHQgYXJy
aXZlcywgd2UgZG9uJ3Qga25vdyB0aGUgY29udGV4dCBpdCBpcyByZWxhdGVkIHRvLgo+ICsgICAg
ICogU28sIGNoZWNrIGludGVycnVwdHMgZm9yIGFsbCBhY3RpdmUgY29udGV4dHMgdG8gbG9jYXRl
IGEgY29udGV4dAo+ICsgICAgICogd2l0aCBzdGF0dXMgYml0cyBzZXQuCj4gKyAgICAqLwo+ICsg
ICAgZm9yICggaSA9IDA7IGkgPCBtbXUtPm51bV9jdHg7IGkrKyApCj4gKyAgICB7Cj4gKyAgICAg
ICAgaWYgKCAhbW11LT5kb21haW5zW2ldICkKPiArICAgICAgICAgICAgY29udGludWU7Cj4gKyAg
ICAgICAgaXBtbXVfZG9tYWluX2lycShtbXUtPmRvbWFpbnNbaV0pOwo+ICsgICAgfQo+ICsKPiAr
ICAgIHNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJm1tdS0+bG9jaywgZmxhZ3MpOwo+ICt9Cj4gKwo+
ICsvKiBNYXN0ZXIgZGV2aWNlcyBtYW5hZ2VtZW50ICovCj4gK3N0YXRpYyBpbnQgaXBtbXVfYXR0
YWNoX2RldmljZShzdHJ1Y3QgaXBtbXVfdm1zYV9kb21haW4gKmRvbWFpbiwKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkZXZpY2UgKmRldikKPiArewo+ICsgICAgc3Ry
dWN0IGlwbW11X3Ztc2FfbWFzdGVyX2NmZyAqY2ZnID0gZGV2X2FyY2hkYXRhKGRldiktPmNmZzsK
PiArICAgIHN0cnVjdCBpcG1tdV92bXNhX2RldmljZSAqbW11ID0gY2ZnLT5tbXU7Cj4gKyAgICB1
bnNpZ25lZCBpbnQgaTsKPiArCj4gKyAgICBpZiAoICFtbXUgKQo+ICsgICAgewo+ICsgICAgICAg
IGRldl9lcnIoZGV2LCAiQ2Fubm90IGF0dGFjaCB0byBJUE1NVVxuIik7Cj4gKyAgICAgICAgcmV0
dXJuIC1FTlhJTzsKPiArICAgIH0KPiArCj4gKyAgICBpZiAoICFkb21haW4tPm1tdSApCgpTbyB5
b3UgcmVhZCBkb21haW4tPm1tdSBoZXJlIGFuZCAuLi4KCj4gKyAgICB7Cj4gKyAgICAgICAgLyog
VGhlIGRvbWFpbiBoYXNuJ3QgYmVlbiB1c2VkIHlldCwgaW5pdGlhbGl6ZSBpdC4gKi8KPiArICAg
ICAgICBkb21haW4tPm1tdSA9IG1tdTsKPiArCj4gKyAgICAgICAgLyoKPiArICAgICAgICAgKiBX
ZSBoYXZlIGFscmVhZHkgZW5hYmxlZCBjb250ZXh0IGZvciBSb290IElQTU1VIGFzc2lnbmVkIHRv
IHRoaXMKPiArICAgICAgICAgKiBYZW4gZG9tYWluIGluIGlwbW11X2RvbWFpbl9pbml0X2NvbnRl
eHQoKS4KPiArICAgICAgICAgKiBFbmFibGUgdGhlIGNvbnRleHQgZm9yIENhY2hlIElQTU1VIG9u
bHkuIEZsdXNoIHRoZSBUTEIgYXMgcmVxdWlyZWQKPiArICAgICAgICAgKiB3aGVuIG1vZGlmeWlu
ZyB0aGUgY29udGV4dCByZWdpc3RlcnMuCj4gKyAgICAgICAgICovCj4gKyAgICAgICAgaXBtbXVf
Y3R4X3dyaXRlX2NhY2hlKGRvbWFpbiwgSU1DVFIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGlwbW11X2N0eF9yZWFkX3Jvb3QoZG9tYWluLCBJTUNUUikgfCBJTUNUUl9GTFVTSCk7
Cj4gKwo+ICsgICAgICAgIGRldl9pbmZvKGRldiwgIlVzaW5nIElQTU1VIGNvbnRleHQgJXVcbiIs
IGRvbWFpbi0+Y29udGV4dF9pZCk7Cj4gKyAgICB9Cj4gKyAgICBlbHNlIGlmICggZG9tYWluLT5t
bXUgIT0gbW11ICkKCi4uLiBoZXJlLiBXaGF0IGFjdHVhbGx5IHByb21pc2UgdGhhdCBkb21haW4t
Pm1tdSBjYW4ndCBjaGFuZ2UgaW4gcGFyYWxsZWw/Cgo+ICsgICAgewo+ICsgICAgICAgIC8qCj4g
KyAgICAgICAgICogU29tZXRoaW5nIGlzIHdyb25nLCB3ZSBjYW4ndCBhdHRhY2ggdHdvIG1hc3Rl
ciBkZXZpY2VzIHVzaW5nCj4gKyAgICAgICAgICogZGlmZmVyZW50IElPTU1VcyB0byB0aGUgc2Ft
ZSBJUE1NVSBkb21haW4uCj4gKyAgICAgICAgICovCj4gKyAgICAgICAgZGV2X2VycihkZXYsICJD
YW4ndCBhdHRhY2ggSVBNTVUgJXMgdG8gZG9tYWluIG9uIElQTU1VICVzXG4iLAo+ICsgICAgICAg
ICAgICAgICAgZGV2X25hbWUobW11LT5kZXYpLCBkZXZfbmFtZShkb21haW4tPm1tdS0+ZGV2KSk7
Cj4gKyAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gKyAgICB9Cj4gKyAgICBlbHNlCj4gKyAgICAg
ICAgZGV2X2luZm8oZGV2LCAiUmV1c2luZyBJUE1NVSBjb250ZXh0ICV1XG4iLCBkb21haW4tPmNv
bnRleHRfaWQpOwo+ICsKPiArICAgIGZvciAoIGkgPSAwOyBpIDwgY2ZnLT5udW1fdXRsYnM7ICsr
aSApCj4gKyAgICAgICAgaXBtbXVfdXRsYl9lbmFibGUoZG9tYWluLCBjZmctPnV0bGJzW2ldKTsK
PiArCj4gKyAgICByZXR1cm4gMDsKPiArfQoKWy4uLl0KCj4gK3N0YXRpYyB2b2lkIGlwbW11X3By
b3RlY3RfbWFzdGVycyhzdHJ1Y3QgaXBtbXVfdm1zYV9kZXZpY2UgKm1tdSkKPiArewo+ICsgICAg
c3RydWN0IGR0X2RldmljZV9ub2RlICpub2RlOwo+ICsKPiArICAgIGR0X2Zvcl9lYWNoX2Rldmlj
ZV9ub2RlKCBkdF9ob3N0LCBub2RlICkKPiArICAgIHsKPiArICAgICAgICBpZiAoIG1tdS0+ZGV2
LT5vZl9ub2RlICE9IGR0X3BhcnNlX3BoYW5kbGUobm9kZSwgImlvbW11cyIsIDApICkKPiArICAg
ICAgICAgICAgY29udGludWU7Cj4gKwo+ICsgICAgICAgIC8qIExldCBYZW4ga25vdyB0aGF0IHRo
ZSBtYXN0ZXIgZGV2aWNlIGlzIHByb3RlY3RlZCBieSBhbiBJT01NVS4gKi8KPiArICAgICAgICBk
dF9kZXZpY2Vfc2V0X3Byb3RlY3RlZChub2RlKTsKPiArCj4gKyAgICAgICAgZGV2X2luZm8obW11
LT5kZXYsICJGb3VuZCBtYXN0ZXIgZGV2aWNlICVzXG4iLCBkdF9ub2RlX2Z1bGxfbmFtZShub2Rl
KSk7Cj4gKyAgICB9Cj4gK30KCkkgZG9uJ3QgbXVjaCBsaWtlIHRoaXMuIFlvdSBhcmUgZ29pbmcg
dG8gZ28gdGhyb3VnaCB0aGUgd2hvbGUgRFQgcXVpdGUgYSAKZmV3IHRpbWVzLgoKVGhlIElPTU1V
IGludGVyZmFjZSBpbiBYZW4gaGFzIG5vdCBiZWVuIGRlc2lnbmVkIHdpdGggdGhlIG5ldyBJT01N
VSAKYmluZGluZ3MgaW4gbWluZC4gSSB3b3VsZCBwcmVmZXIgaWYgd2UgbG9vayBmb3IgZXh0ZW5k
aW5nIGFkZF9kZXZpY2UgCmNhbGxiYWNrIHRvIHN1cHBvcnQgcGxhdGZvcm0gZGV2aWNlLgoKVGhp
cyB3b3VsZCBhbGxvdyB0byBwcm9iZSB0aGUgZGV2aWNlIGxhdGVyIG9uIGFuZCB0aGVyZWZvcmUg
YXZvaWQgdG8gZ28gCnRocm91Z2ggdGhlIGRldmljZS10cmVlIG11bHRpcGxlLgoKPiArCj4gK3N0
YXRpYyB2b2lkIGlwbW11X2RldmljZV9yZXNldChzdHJ1Y3QgaXBtbXVfdm1zYV9kZXZpY2UgKm1t
dSkKPiArewo+ICsgICAgdW5zaWduZWQgaW50IGk7Cj4gKwo+ICsgICAgLyogRGlzYWJsZSBhbGwg
Y29udGV4dHMuICovCj4gKyAgICBmb3IgKCBpID0gMDsgaSA8IG1tdS0+bnVtX2N0eDsgKytpICkK
PiArICAgICAgICBpcG1tdV93cml0ZShtbXUsIGkgKiBJTV9DVFhfU0laRSArIElNQ1RSLCAwKTsK
PiArfQo+ICsKPiArLyoKPiArICogVGhpcyBmdW5jdGlvbiByZWxpZXMgb24gdGhlIGZhY3QgdGhh
dCBSb290IElQTU1VIGRldmljZSBpcyBiZWluZyBwcm9iZWQKPiArICogdGhlIGZpcnN0LiBJZiBu
b3QgdGhlIGNhc2UsIGl0IGRlbmllcyBmdXJ0aGVyIENhY2hlIElQTU1VIGRldmljZSBwcm9iZXMK
PiArICogKHJldHVybnMgdGhlIC1FTk9ERVYpIHVudGlsIHRoZSBSb290IElQTU1VIGRldmljZSBo
YXMgYmVlbiByZWdpc3RlcmVkCj4gKyAqIGZvciBzdXJlLgoKQ2FuIHdlIGxvb2sgYXQgaGFuZGxp
bmcgLUVERUZFUiBpbiBYZW4gaW5zdGVhZD8KCj4gKyAqLwoKWy4uLl0KCj4gK3N0YXRpYyBpbnQg
X19tdXN0X2NoZWNrIGlwbW11X21hcF9wYWdlKHN0cnVjdCBkb21haW4gKmQsIGRmbl90IGRmbiwg
bWZuX3QgbWZuLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNp
Z25lZCBpbnQgZmxhZ3MsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHVuc2lnbmVkIGludCAqZmx1c2hfZmxhZ3MpCgpUaGUgZnVuY3Rpb24gaXMgZXhhY3RseSB0aGUg
c2FtZSBhcyBmb3IgdGhlIFNNTVUgZHJpdmVyLiBDb3VsZCB3ZSAKaW1wbGVtZW50IGNvbW1vbiBo
ZWxwZXJzIGluIGEgc2VwYXJhdGUgZmlsZT8KCj4gK3sKPiArICAgIHAybV90eXBlX3QgdDsKPiAr
Cj4gKyAgICAvKgo+ICsgICAgICogR3JhbnQgbWFwcGluZ3MgY2FuIGJlIHVzZWQgZm9yIERNQSBy
ZXF1ZXN0cy4gVGhlIGRldl9idXNfYWRkcgo+ICsgICAgICogcmV0dXJuZWQgYnkgdGhlIGh5cGVy
Y2FsbCBpcyB0aGUgTUZOIChub3QgdGhlIElQQSkuIEZvciBkZXZpY2UKPiArICAgICAqIHByb3Rl
Y3RlZCBieSBhbiBJT01NVSwgWGVuIG5lZWRzIHRvIGFkZCBhIDE6MSBtYXBwaW5nIGluIHRoZSBk
b21haW4KPiArICAgICAqIHAybSB0byBhbGxvdyBETUEgcmVxdWVzdCB0byB3b3JrLgo+ICsgICAg
ICogVGhpcyBpcyBvbmx5IHZhbGlkIHdoZW4gdGhlIGRvbWFpbiBpcyBkaXJlY3RlZCBtYXBwZWQu
IEhlbmNlIHRoaXMKPiArICAgICAqIGZ1bmN0aW9uIHNob3VsZCBvbmx5IGJlIHVzZWQgYnkgZ250
dGFiIGNvZGUgd2l0aCBnZm4gPT0gbWZuID09IGRmbi4KPiArICAgICAqLwo+ICsgICAgQlVHX09O
KCFpc19kb21haW5fZGlyZWN0X21hcHBlZChkKSk7Cj4gKyAgICBCVUdfT04obWZuX3gobWZuKSAh
PSBkZm5feChkZm4pKTsKPiArCj4gKyAgICAvKiBXZSBvbmx5IHN1cHBvcnQgcmVhZGFibGUgYW5k
IHdyaXRhYmxlIGZsYWdzICovCj4gKyAgICBpZiAoICEoZmxhZ3MgJiAoSU9NTVVGX3JlYWRhYmxl
IHwgSU9NTVVGX3dyaXRhYmxlKSkgKQo+ICsgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ICsKPiAr
ICAgIHQgPSAoZmxhZ3MgJiBJT01NVUZfd3JpdGFibGUpID8gcDJtX2lvbW11X21hcF9ydyA6IHAy
bV9pb21tdV9tYXBfcm87Cj4gKwo+ICsgICAgLyoKPiArICAgICAqIFRoZSBmdW5jdGlvbiBndWVz
dF9waHlzbWFwX2FkZF9lbnRyeSByZXBsYWNlcyB0aGUgY3VycmVudCBtYXBwaW5nCj4gKyAgICAg
KiBpZiB0aGVyZSBpcyBhbHJlYWR5IG9uZS4uLgo+ICsgICAgICovCj4gKyAgICByZXR1cm4gZ3Vl
c3RfcGh5c21hcF9hZGRfZW50cnkoZCwgX2dmbihkZm5feChkZm4pKSwgX21mbihkZm5feChkZm4p
KSwgMCwgdCk7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgX19tdXN0X2NoZWNrIGlwbW11X3VubWFw
X3BhZ2Uoc3RydWN0IGRvbWFpbiAqZCwgZGZuX3QgZGZuLAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCAqZmx1c2hfZmxhZ3MpCgpTYW1lIGhl
cmUuCgo+ICt7Cj4gKyAgICAvKgo+ICsgICAgICogVGhpcyBmdW5jdGlvbiBzaG91bGQgb25seSBi
ZSB1c2VkIGJ5IGdudHRhYiBjb2RlIHdoZW4gdGhlIGRvbWFpbgo+ICsgICAgICogaXMgZGlyZWN0
IG1hcHBlZCAoaS5lLiBnZm4gPT0gbWZuID09IGRmbikuCj4gKyAgICAgKi8KPiArICAgIGlmICgg
IWlzX2RvbWFpbl9kaXJlY3RfbWFwcGVkKGQpICkKPiArICAgICAgICByZXR1cm4gLUVJTlZBTDsK
PiArCj4gKyAgICByZXR1cm4gZ3Vlc3RfcGh5c21hcF9yZW1vdmVfcGFnZShkLCBfZ2ZuKGRmbl94
KGRmbikpLCBfbWZuKGRmbl94KGRmbikpLCAwKTsKPiArfQoKQ2hlZXJzLAoKLS0gCkp1bGllbiBH
cmFsbAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVu
LWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6
Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

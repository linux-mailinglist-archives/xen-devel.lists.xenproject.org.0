Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id A021A177232
	for <lists+xen-devel@lfdr.de>; Tue,  3 Mar 2020 10:17:54 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j93de-0003Id-6L; Tue, 03 Mar 2020 09:14:54 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=TLdZ=4U=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1j93dc-0003IY-Si
 for xen-devel@lists.xenproject.org; Tue, 03 Mar 2020 09:14:52 +0000
X-Inumbo-ID: 7007c54a-5d2f-11ea-a0ae-12813bfff9fa
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 7007c54a-5d2f-11ea-a0ae-12813bfff9fa;
 Tue, 03 Mar 2020 09:14:51 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id B85BDAE6F;
 Tue,  3 Mar 2020 09:14:50 +0000 (UTC)
To: Roger Pau Monne <roger.pau@citrix.com>
References: <20200302155509.44753-1-roger.pau@citrix.com>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <766fea94-422e-7f52-96e1-9f5e4cacbbec@suse.com>
Date: Tue, 3 Mar 2020 10:14:50 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.5.0
MIME-Version: 1.0
In-Reply-To: <20200302155509.44753-1-roger.pau@citrix.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH] x86/dom0: improve PVH initrd and metadata
 placement
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: xen-devel@lists.xenproject.org, Wei Liu <wl@xen.org>,
 Andrew Cooper <andrew.cooper3@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMDIuMDMuMjAyMCAxNjo1NSwgUm9nZXIgUGF1IE1vbm5lIHdyb3RlOgo+IERvbid0IGFzc3Vt
ZSB0aGVyZSdzIGdvaW5nIHRvIGJlIGVub3VnaCBzcGFjZSBhdCB0aGUgdGFpbCBvZiB0aGUKPiBs
b2FkZWQga2VybmVsIGFuZCBpbnN0ZWFkIHRyeSB0byBmaW5kIGEgc3VpdGFibGUgbWVtb3J5IGFy
ZWEgd2hlcmUgdGhlCj4gaW5pdHJkIGFuZCBtZXRhZGF0YSBjYW4gYmUgbG9hZGVkLgo+IAo+IFJl
cG9ydGVkLWJ5OiBBbmRyZXcgQ29vcGVyIDxhbmRyZXcuY29vcGVyM0BjaXRyaXguY29tPgo+IFNp
Z25lZC1vZmYtYnk6IFJvZ2VyIFBhdSBNb25uw6kgPHJvZ2VyLnBhdUBjaXRyaXguY29tPgo+IC0t
LQo+ICB4ZW4vYXJjaC94ODYvaHZtL2RvbTBfYnVpbGQuYyB8IDUxICsrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKystCj4gIDEgZmlsZSBjaGFuZ2VkLCA1MCBpbnNlcnRpb25zKCspLCAx
IGRlbGV0aW9uKC0pCj4gCj4gZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9odm0vZG9tMF9idWls
ZC5jIGIveGVuL2FyY2gveDg2L2h2bS9kb20wX2J1aWxkLmMKPiBpbmRleCBlZGVkODdlYWY1Li5h
MDNiZjJlNjYzIDEwMDY0NAo+IC0tLSBhL3hlbi9hcmNoL3g4Ni9odm0vZG9tMF9idWlsZC5jCj4g
KysrIGIveGVuL2FyY2gveDg2L2h2bS9kb20wX2J1aWxkLmMKPiBAQCAtNDkwLDYgKzQ5MCw0NCBA
QCBzdGF0aWMgaW50IF9faW5pdCBwdmhfcG9wdWxhdGVfcDJtKHN0cnVjdCBkb21haW4gKmQpCj4g
ICN1bmRlZiBNQjFfUEFHRVMKPiAgfQo+ICAKPiArc3RhdGljIHBhZGRyX3QgZmluZF9tZW1vcnko
Y29uc3Qgc3RydWN0IGRvbWFpbiAqZCwgY29uc3Qgc3RydWN0IGVsZl9iaW5hcnkgKmVsZiwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZV90IHNpemUpCj4gK3sKPiArICAgIHBhZGRy
X3Qga2VybmVsX3N0YXJ0ID0gKHBhZGRyX3QpZWxmLT5kZXN0X2Jhc2U7Cj4gKyAgICBwYWRkcl90
IGtlcm5lbF9lbmQgPSAocGFkZHJfdCkoZWxmLT5kZXN0X2Jhc2UgKyBlbGYtPmRlc3Rfc2l6ZSk7
Cj4gKyAgICB1bnNpZ25lZCBpbnQgaTsKPiArCj4gKyAgICBmb3IgKCBpID0gMDsgaSA8IGQtPmFy
Y2gubnJfZTgyMDsgaSsrICkKPiArICAgIHsKPiArICAgICAgICBwYWRkcl90IHN0YXJ0LCBlbmQ7
Cj4gKwo+ICsgICAgICAgIGlmICggZC0+YXJjaC5lODIwW2ldLmFkZHIgPCBNQigxKSAmJgo+ICsg
ICAgICAgICAgICAgZC0+YXJjaC5lODIwW2ldLmFkZHIgKyBkLT5hcmNoLmU4MjBbaV0uc2l6ZSA8
IE1CKDEpICkKCkkgZ3Vlc3MgeW91IG1lYW4gPD0gaGVyZSwgYW5kIEkgYWxzbyBndWVzcyB0aGUg
bGVmdCBzaWRlIG9mIHRoZQomJiBjb3VsZCBiZSBkcm9wcGVkIGFsdG9nZXRoZXIgKGFzIHJlZHVu
ZGFudCAtIEU4MjAgZW50cmllcwphcmVuJ3Qgc3VwcG9zZWQgdG8gd3JhcCwgb3IgaWYgdGhleSBk
aWQgd2UnZCBoYXZlIGJpZ2dlcgpwcm9ibGVtcykuIEFsc28gcGVyaGFwcyAuLi4KCj4gKyAgICAg
ICAgICAgIGNvbnRpbnVlOwo+ICsKPiArICAgICAgICBzdGFydCA9IE1BWChST1VORFVQKGQtPmFy
Y2guZTgyMFtpXS5hZGRyLCBQQUdFX1NJWkUpLCBNQigxKSk7Cj4gKyAgICAgICAgZW5kID0gZC0+
YXJjaC5lODIwW2ldLmFkZHIgKyBkLT5hcmNoLmU4MjBbaV0uc2l6ZTsKCi4uLiBjYWxjdWxhdGUg
ImVuZCIgZWFybGllciBhbmQgdXNlIGl0IGluIHRoZSBpZigpIGFib3ZlPwoKQXMgdG8gdGhlIGFs
aWduaW5nIHRvIGEgMU1iIGJvdW5kYXJ5IC0gd2h5IGFyZSB5b3UgZG9pbmcgdGhpcz8KSSBndWVz
cyB3aGF0ZXZlciB0aGUgcmVhc29uIHdhcnJhbnRzIGEgY29tbWVudCwgdGhlIG1vcmUgdGhhdApm
dXJ0aGVyIGRvd24geW91IG9ubHkgYWxpZ24gdG8gcGFnZSBib3VuZGFyaWVzLgoKPiArICAgICAg
ICAvKiBEZWFsIHdpdGggdGhlIGtlcm5lbCBiZWluZyBsb2FkZWQgaW4gdGhlIHJlZ2lvbi4gKi8K
PiArICAgICAgICBpZiAoIGtlcm5lbF9zdGFydCA8PSBzdGFydCAmJiBrZXJuZWxfZW5kID49IHN0
YXJ0ICkKCldoaWxlIGl0IGRvZXNuJ3QgbWF0dGVyIG11Y2gsIEkgdGhpbmsgaXQgd291bGQgbG9v
ayBiZXR0ZXIgdG8KdXNlID4gb24gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlICYmIGhlcmUgLi4uCgo+
ICsgICAgICAgICAgICAvKiBUcnVuY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIHJlZ2lvbiAqLwo+ICsg
ICAgICAgICAgICBzdGFydCA9IFJPVU5EVVAoa2VybmVsX2VuZCwgUEFHRV9TSVpFKTsKPiArICAg
ICAgICBlbHNlIGlmICgga2VybmVsX3N0YXJ0IDw9IGVuZCAmJiBrZXJuZWxfZW5kID49IGVuZCAp
CgphbmQgPCBvbiB0aGUgbGVmdCBzaWRlIG9mIHRoZSAmJiBoZXJlLiBGdXJ0aGVybW9yZSAtIGNh
biB0aGlzCnJlYWxseSBiZSAiZWxzZSBpZigpIiBoZXJlLCBpLmUuIGRvZXNuJ3QgaXQgbmVlZCB0
byBiZSBwbGFpbgoiaWYoKSI/Cgo+ICsgICAgICAgICAgICAvKiBUcnVuY2F0ZSB0aGUgZW5kIG9m
IHRoZSByZWdpb24gKi8KPiArICAgICAgICAgICAgZW5kID0ga2VybmVsX3N0YXJ0Owo+ICsgICAg
ICAgIC8qIFBpY2sgdGhlIGJpZ2dlc3Qgb2YgdGhlIHNwbGl0IHJlZ2lvbnMgKi8KPiArICAgICAg
ICBlbHNlIGlmICgga2VybmVsX3N0YXJ0IC0gc3RhcnQgPiBlbmQgLSBrZXJuZWxfZW5kICkKCkkg
ZG9uJ3QgdGhpbmsgdGhlIGxvZ2ljIGFib3ZlIGd1YXJhbnRlZXMgZS5nLiBrZXJuZWxfc3RhcnQg
PiBzdGFydAooaS5lLiB0aGUgc3VidHJhY3Rpb24gdG8gbm90IHdyYXApLiBNb3JlIGdlbmVyYWxs
eSBJIGRvbid0IHRoaW5rCml0IGZvbGxvd3MgdGhhdCB0aGVyZSBhcmUgdHdvIHNwbGl0IHJlZ2lv
bnMgYXQgdGhpcyBwb2ludC4gQXQgdGhlCnZlcnkgbGVhc3QgSSB0aGluayB0aGlzIHdob2xlIGJs
b2NrIHdhbnRzIHRvIGJlIHdyYXBwZWQgaW4gYQpjaGVjayB0aGF0IHRoZXJlJ3MgYW55IG92ZXJs
YXAgYmV0d2VlbiBrZXJuZWwgYW5kIHRoZSBnaXZlbiByZWdpb24KaW4gdGhlIGZpcnN0IHBsYWNl
LgoKPiArICAgICAgICAgICAgZW5kID0ga2VybmVsX3N0YXJ0Owo+ICsgICAgICAgIGVsc2UKPiAr
ICAgICAgICAgICAgc3RhcnQgPSBST1VORFVQKGtlcm5lbF9lbmQsIFBBR0VfU0laRSk7Cj4gKwo+
ICsgICAgICAgIGlmICggZW5kIC0gc3RhcnQgPj0gc2l6ZSApCj4gKyAgICAgICAgICAgIHJldHVy
biBzdGFydDsKCkFyZSBhbGwgYmxvY2tzIEU4MjBfUkFNIGF0IHRoaXMgcG9pbnQgaW4gdGltZT8g
T3RoZXJ3aXNlIHRoZXJlJ3MKYSB0eXBlIGNoZWNrIG1pc3NpbmcuIChFdmVuIGlmIGFsbCBhcmUg
b2YgdGhpcyB0eXBlIG5vdywgYWRkaW5nCmEgdHlwZSBjaGVjayBtYXkgc3RpbGwgYmUgYSBnb29k
IGlkZWEgdG8gYmUgbW9yZSBmdXR1cmUgcHJvb2YuKQoKPiBAQCAtNTQ2LDcgKzU4NCwxOCBAQCBz
dGF0aWMgaW50IF9faW5pdCBwdmhfbG9hZF9rZXJuZWwoc3RydWN0IGRvbWFpbiAqZCwgY29uc3Qg
bW9kdWxlX3QgKmltYWdlLAo+ICAgICAgICAgIHJldHVybiByYzsKPiAgICAgIH0KPiAgCj4gLSAg
ICBsYXN0X2FkZHIgPSBST1VORFVQKHBhcm1zLnZpcnRfa2VuZCAtIHBhcm1zLnZpcnRfYmFzZSwg
UEFHRV9TSVpFKTsKPiArICAgIGxhc3RfYWRkciA9IGZpbmRfbWVtb3J5KGQsICZlbGYsIHNpemVv
ZihzdGFydF9pbmZvKSArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0cmQgPyBS
T1VORFVQKGluaXRyZC0+bW9kX2VuZCwgUEFHRV9TSVpFKSArCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzaXplb2YobW9kKQo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIDogMCArCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbWRsaW5l
ID8gUk9VTkRVUChzdHJsZW4oY21kbGluZSkgKyAxLAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZWxmXzY0Yml0KCZlbGYpID8gOCA6IDQpCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCk7CgpJIGd1ZXNzIHlvdSBtZWFuCgog
ICAgbGFzdF9hZGRyID0gZmluZF9tZW1vcnkoZCwgJmVsZiwgc2l6ZW9mKHN0YXJ0X2luZm8pICsK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbml0cmQgPyBST1VORFVQKGluaXRyZC0+bW9k
X2VuZCwgUEFHRV9TSVpFKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2l6ZW9mKG1vZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAwKSArCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAoY21kbGluZSA/IFJPVU5EVVAoc3RybGVuKGNtZGxp
bmUpICsgMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBl
bGZfNjRiaXQoJmVsZikgPyA4IDogNCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIDogMCkpOwoKPwoKQWxzbywgZG8gYm90aCByZWdpb25zIG5lZWQgdG8gYmUgYWRqYWNlbnQ/
IElmIG5vdCwgd291bGRuJ3QgaXQgYmUKYmV0dGVyIHRvIGZpbmQgc2xvdHMgZm9yIHRoZW0gb25l
IGJ5IG9uZT8KCkphbgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5v
cmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZl
bA==

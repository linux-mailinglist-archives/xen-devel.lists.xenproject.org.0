Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id A9D5E8182D5
	for <lists+xen-devel@lfdr.de>; Tue, 19 Dec 2023 09:00:40 +0100 (CET)
Received: from list by lists.xenproject.org with outflank-mailman.656572.1024872 (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1rFV1i-0000TJ-4v; Tue, 19 Dec 2023 08:00:30 +0000
X-Outflank-Mailman: Message body and most headers restored to incoming version
Received: by outflank-mailman (output) from mailman id 656572.1024872; Tue, 19 Dec 2023 08:00:30 +0000
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1rFV1i-0000Qu-1m; Tue, 19 Dec 2023 08:00:30 +0000
Received: by outflank-mailman (input) for mailman id 656572;
 Tue, 19 Dec 2023 08:00:28 +0000
Received: from se1-gles-sth1-in.inumbo.com ([159.253.27.254]
 helo=se1-gles-sth1.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.92) (envelope-from
 <SRS0=aNFb=H6=bugseng.com=nicola.vetrini@srs-se1.protection.inumbo.net>)
 id 1rFV1g-0006W2-Aj
 for xen-devel@lists.xenproject.org; Tue, 19 Dec 2023 08:00:28 +0000
Received: from support.bugseng.com (mail.bugseng.com [162.55.131.47])
 by se1-gles-sth1.inumbo.com (Halon) with ESMTPS
 id abdca79b-9e44-11ee-98eb-6d05b1d4d9a1;
 Tue, 19 Dec 2023 09:00:27 +0100 (CET)
Received: from support.bugseng.com (support.bugseng.com [162.55.131.47])
 by support.bugseng.com (Postfix) with ESMTPA id 065DE4EE0738;
 Tue, 19 Dec 2023 09:00:27 +0100 (CET)
X-BeenThere: xen-devel@lists.xenproject.org
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Errors-To: xen-devel-bounces@lists.xenproject.org
Precedence: list
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>
X-Inumbo-ID: abdca79b-9e44-11ee-98eb-6d05b1d4d9a1
MIME-Version: 1.0
Date: Tue, 19 Dec 2023 09:00:27 +0100
From: Nicola Vetrini <nicola.vetrini@bugseng.com>
To: Stefano Stabellini <sstabellini@kernel.org>
Cc: xen-devel@lists.xenproject.org, consulting@bugseng.com, Simone Ballarin
 <simone.ballarin@bugseng.com>, Doug Goldstein <cardoe@cardoe.com>
Subject: Re: [XEN PATCH v2 7/7] automation/eclair_analysis: avoid violation of
 MISRA Rule 2.1
In-Reply-To: <alpine.DEB.2.22.394.2312181743250.3175268@ubuntu-linux-20-04-desktop>
References: <cover.1702891792.git.nicola.vetrini@bugseng.com>
 <6bf425b3d01dc16297ef45e58c03b3ffd803b9e0.1702891792.git.nicola.vetrini@bugseng.com>
 <alpine.DEB.2.22.394.2312181739560.3175268@ubuntu-linux-20-04-desktop>
 <alpine.DEB.2.22.394.2312181743250.3175268@ubuntu-linux-20-04-desktop>
Message-ID: <8707dd8023b0e05efaf46e7afb3b85cb@bugseng.com>
X-Sender: nicola.vetrini@bugseng.com
Organization: BUGSENG s.r.l.
Content-Type: text/plain; charset=US-ASCII;
 format=flowed
Content-Transfer-Encoding: 7bit

On 2023-12-19 02:43, Stefano Stabellini wrote:
> On Mon, 18 Dec 2023, Stefano Stabellini wrote:
>> On Mon, 18 Dec 2023, Nicola Vetrini wrote:
>> > The presence of an unlinked object file triggers a violation
>> > of MISRA C Rule 2.1, which is deviated, as it's not part of
>> > the final Xen binary.
>> >
>> > No functional change.
>> >
>> > Signed-off-by: Nicola Vetrini <nicola.vetrini@bugseng.com>
>> 
>> Acked-by: Stefano Stabellini <sstabellini@kernel.org>
>> 
>> 
>> > ---
>> >  automation/eclair_analysis/ECLAIR/deviations.ecl | 5 +++++
>> >  1 file changed, 5 insertions(+)
>> >
>> > diff --git a/automation/eclair_analysis/ECLAIR/deviations.ecl b/automation/eclair_analysis/ECLAIR/deviations.ecl
>> > index 85741a2c01a9..e3de0fb2adf8 100644
>> > --- a/automation/eclair_analysis/ECLAIR/deviations.ecl
>> > +++ b/automation/eclair_analysis/ECLAIR/deviations.ecl
>> > @@ -28,6 +28,11 @@ not executable, and therefore it is safe for them to be unreachable."
>> >  -config=MC3R1.R2.1,ignored_stmts+={"any()", "pure_decl()"}
>> >  -doc_end
>> >
>> > ++-doc_begin="The following autogenerated file is not linked deliberately."
>> > ++-file_tag+={C_runtime_failures,"^automation/eclair_analysis/C-runtime-failures\\.rst\\.c$"}
>> > ++-config=MC3R1.R2.1,reports+={deliberate, "any_area(any_loc(file(C_runtime_failures)))"}
>> > ++-doc_end
> 
> Would it make sense to add it to exclude-list instead?

I don't think so, because if some documentation about runtime error that 
is supposed to be here is missing it won't be obvious that the file that 
needs to be fixed is this. Moreover, you'd need to put the path of the 
generated .c file there, which I'm not sure how well it would behave 
w.r.t. other tooling.

-- 
Nicola Vetrini, BSc
Software Engineer, BUGSENG srl (https://bugseng.com)


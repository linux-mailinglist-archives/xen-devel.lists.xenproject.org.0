Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 901CE1412DA
	for <lists+xen-devel@lfdr.de>; Fri, 17 Jan 2020 22:26:56 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1isZ5A-0000If-6F; Fri, 17 Jan 2020 21:23:08 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=e2Nf=3G=dornerworks.com=jeff.kubascik@srs-us1.protection.inumbo.net>)
 id 1isZ58-0000Ia-5n
 for xen-devel@lists.xenproject.org; Fri, 17 Jan 2020 21:23:06 +0000
X-Inumbo-ID: 8b1f4918-396f-11ea-b621-12813bfff9fa
Received: from webmail.dornerworks.com (unknown [12.207.209.150])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTP
 id 8b1f4918-396f-11ea-b621-12813bfff9fa;
 Fri, 17 Jan 2020 21:23:04 +0000 (UTC)
To: Julien Grall <julien@xen.org>, <xen-devel@lists.xenproject.org>
References: <20191211211302.117395-1-jeff.kubascik@dornerworks.com>
 <20191211211302.117395-2-jeff.kubascik@dornerworks.com>
 <d4e6adc6-6c4c-133f-0eee-2e9bffbe8207@xen.org>
From: Jeff Kubascik <jeff.kubascik@dornerworks.com>
Message-ID: <ee453f99-09e7-95f4-637a-10bbd6a4d740@dornerworks.com>
Date: Fri, 17 Jan 2020 16:24:15 -0500
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.3.1
MIME-Version: 1.0
In-Reply-To: <d4e6adc6-6c4c-133f-0eee-2e9bffbe8207@xen.org>
Content-Language: en-US
X-Originating-IP: [172.27.13.179]
X-ClientProxiedBy: Mcbain.dw.local (172.27.1.45) To Mcbain.dw.local
 (172.27.1.45)
X-spam-status: No, score=-2.9 required=3.5 tests=ALL_TRUSTED, BAYES_00,
 MAILSHELL_SCORE_0_4
X-Spam-Flag: NO
Subject: Re: [Xen-devel] [PATCH v3 1/2] xen/arm: remove physical timer offset
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stewart Hildebrand <Stewart.Hildebrand@dornerworks.com>,
 Stefano Stabellini <sstabellini@kernel.org>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMTIvMTgvMjAxOSA5OjIwIEFNLCBKdWxpZW4gR3JhbGwgd3JvdGU6Cj4gSGkgSmVmZiwKPiAK
PiBPbiAxMS8xMi8yMDE5IDIxOjEzLCBKZWZmIEt1YmFzY2lrIHdyb3RlOgo+PiBUaGUgcGh5c2lj
YWwgdGltZXIgdHJhcHMgYXBwbHkgYW4gb2Zmc2V0IHNvIHRoYXQgdGltZSBzdGFydHMgYXQgMCBm
b3IKPj4gdGhlIGd1ZXN0LiBIb3dldmVyLCB0aGlzIG9mZnNldCBpcyBub3QgY3VycmVudGx5IGFw
cGxpZWQgdG8gdGhlIHBoeXNpY2FsCj4+IGNvdW50ZXIuIFBlciB0aGUgQVJNdjggUmVmZXJlbmNl
IE1hbnVhbCAoQVJNIERESSAwNDg3RS5hKSwgc2VjdGlvbgo+PiBEMTEuMi40IFRpbWVycywgdGhl
ICJPZmZzZXQiIGJldHdlZW4gdGhlIGNvdW50ZXIgYW5kIHRpbWVyIHNob3VsZCBiZQo+PiB6ZXJv
IGZvciBhIHBoeXNpY2FsIHRpbWVyLiBUaGlzIHJlbW92ZXMgdGhlIG9mZnNldCB0byBtYWtlIHRo
ZSB0aW1lciBhbmQKPj4gY291bnRlciBjb25zaXN0ZW50Lgo+Pgo+PiBUaGlzIGFsc28gY2xlYW5z
IHVwIHRoZSBwaHlzaWNhbCB0aW1lciBpbXBsZW1lbnRhdGlvbiB0byBiZXR0ZXIgbWF0Y2gKPj4g
dGhlIHZpcnR1YWwgdGltZXIgLSBib3RoIGN2YWwncyBub3cgaG9sZCB0aGUgaGFyZHdhcmUgdmFs
dWUuCj4+Cj4+IFNpZ25lZC1vZmYtYnk6IEplZmYgS3ViYXNjaWsgPGplZmYua3ViYXNjaWtAZG9y
bmVyd29ya3MuY29tPgo+PiAtLS0KPj4gICB4ZW4vYXJjaC9hcm0vdnRpbWVyLmMgICAgICAgIHwg
MzQgKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLQo+PiAgIHhlbi9pbmNsdWRlL2Fz
bS1hcm0vZG9tYWluLmggfCAgMyAtLS0KPj4gICAyIGZpbGVzIGNoYW5nZWQsIDE4IGluc2VydGlv
bnMoKyksIDE5IGRlbGV0aW9ucygtKQo+Pgo+PiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL3Z0
aW1lci5jIGIveGVuL2FyY2gvYXJtL3Z0aW1lci5jCj4+IGluZGV4IGU2YWViZGFjOWUuLjIxYjk4
ZWMyMGEgMTAwNjQ0Cj4+IC0tLSBhL3hlbi9hcmNoL2FybS92dGltZXIuYwo+PiArKysgYi94ZW4v
YXJjaC9hcm0vdnRpbWVyLmMKPj4gQEAgLTYyLDcgKzYyLDYgQEAgc3RhdGljIHZvaWQgdmlydF90
aW1lcl9leHBpcmVkKHZvaWQgKmRhdGEpCj4+Cj4+ICAgaW50IGRvbWFpbl92dGltZXJfaW5pdChz
dHJ1Y3QgZG9tYWluICpkLCBzdHJ1Y3QgeGVuX2FyY2hfZG9tYWluY29uZmlnICpjb25maWcpCj4+
ICAgewo+PiAtICAgIGQtPmFyY2gucGh5c190aW1lcl9iYXNlLm9mZnNldCA9IE5PVygpOwo+PiAg
ICAgICBkLT5hcmNoLnZpcnRfdGltZXJfYmFzZS5vZmZzZXQgPSBSRUFEX1NZU1JFRzY0KENOVFBD
VF9FTDApOwo+PiAgICAgICBkLT50aW1lX29mZnNldF9zZWNvbmRzID0gdGlja3NfdG9fbnMoZC0+
YXJjaC52aXJ0X3RpbWVyX2Jhc2Uub2Zmc2V0IC0gYm9vdF9jb3VudCk7Cj4+ICAgICAgIGRvX2Rp
dihkLT50aW1lX29mZnNldF9zZWNvbmRzLCAxMDAwMDAwMDAwKTsKPj4gQEAgLTEwOCw3ICsxMDcs
NiBAQCBpbnQgdmNwdV92dGltZXJfaW5pdChzdHJ1Y3QgdmNwdSAqdikKPj4KPj4gICAgICAgaW5p
dF90aW1lcigmdC0+dGltZXIsIHBoeXNfdGltZXJfZXhwaXJlZCwgdCwgdi0+cHJvY2Vzc29yKTsK
Pj4gICAgICAgdC0+Y3RsID0gMDsKPj4gLSAgICB0LT5jdmFsID0gTk9XKCk7Cj4+ICAgICAgIHQt
PmlycSA9IGQwCj4+ICAgICAgICAgICA/IHRpbWVyX2dldF9pcnEoVElNRVJfUEhZU19OT05TRUNV
UkVfUFBJKQo+PiAgICAgICAgICAgOiBHVUVTVF9USU1FUl9QSFlTX05TX1BQSTsKPj4gQEAgLTE2
Nyw2ICsxNjUsNyBAQCB2b2lkIHZpcnRfdGltZXJfcmVzdG9yZShzdHJ1Y3QgdmNwdSAqdikKPj4g
ICBzdGF0aWMgYm9vbCB2dGltZXJfY250cF9jdGwoc3RydWN0IGNwdV91c2VyX3JlZ3MgKnJlZ3Ms
IHVpbnQzMl90ICpyLCBib29sIHJlYWQpCj4+ICAgewo+PiAgICAgICBzdHJ1Y3QgdmNwdSAqdiA9
IGN1cnJlbnQ7Cj4+ICsgICAgc190aW1lX3QgZXhwaXJlczsKPj4KPj4gICAgICAgaWYgKCAhQUND
RVNTX0FMTE9XRUQocmVncywgRUwwUFRFTikgKQo+PiAgICAgICAgICAgcmV0dXJuIGZhbHNlOwo+
PiBAQCAtMTg0LDggKzE4Myw5IEBAIHN0YXRpYyBib29sIHZ0aW1lcl9jbnRwX2N0bChzdHJ1Y3Qg
Y3B1X3VzZXJfcmVncyAqcmVncywgdWludDMyX3QgKnIsIGJvb2wgcmVhZCkKPj4KPj4gICAgICAg
ICAgIGlmICggdi0+YXJjaC5waHlzX3RpbWVyLmN0bCAmIENOVHhfQ1RMX0VOQUJMRSApCj4+ICAg
ICAgICAgICB7Cj4+IC0gICAgICAgICAgICBzZXRfdGltZXIoJnYtPmFyY2gucGh5c190aW1lci50
aW1lciwKPj4gLSAgICAgICAgICAgICAgICAgICAgICB2LT5hcmNoLnBoeXNfdGltZXIuY3ZhbCAr
IHYtPmRvbWFpbi0+YXJjaC5waHlzX3RpbWVyX2Jhc2Uub2Zmc2V0KTsKPj4gKyAgICAgICAgICAg
IGV4cGlyZXMgPSB2LT5hcmNoLnBoeXNfdGltZXIuY3ZhbCA+IGJvb3RfY291bnQKPj4gKyAgICAg
ICAgICAgICAgICAgICAgICA/IHRpY2tzX3RvX25zKHYtPmFyY2gucGh5c190aW1lci5jdmFsIC0g
Ym9vdF9jb3VudCkgOiAwOwo+PiArICAgICAgICAgICAgc2V0X3RpbWVyKCZ2LT5hcmNoLnBoeXNf
dGltZXIudGltZXIsIGV4cGlyZXMpOwo+PiAgICAgICAgICAgfQo+PiAgICAgICAgICAgZWxzZQo+
PiAgICAgICAgICAgICAgIHN0b3BfdGltZXIoJnYtPmFyY2gucGh5c190aW1lci50aW1lcik7Cj4+
IEBAIC0xOTcsMjYgKzE5NywyNyBAQCBzdGF0aWMgYm9vbCB2dGltZXJfY250cF90dmFsKHN0cnVj
dCBjcHVfdXNlcl9yZWdzICpyZWdzLCB1aW50MzJfdCAqciwKPj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGJvb2wgcmVhZCkKPj4gICB7Cj4+ICAgICAgIHN0cnVjdCB2Y3B1ICp2ID0g
Y3VycmVudDsKPj4gLSAgICBzX3RpbWVfdCBub3c7Cj4+ICsgICAgdWludDY0X3QgY250cGN0Owo+
PiArICAgIHNfdGltZV90IGV4cGlyZXM7Cj4+Cj4+ICAgICAgIGlmICggIUFDQ0VTU19BTExPV0VE
KHJlZ3MsIEVMMFBURU4pICkKPj4gICAgICAgICAgIHJldHVybiBmYWxzZTsKPj4KPj4gLSAgICBu
b3cgPSBOT1coKSAtIHYtPmRvbWFpbi0+YXJjaC5waHlzX3RpbWVyX2Jhc2Uub2Zmc2V0Owo+PiAr
ICAgIGNudHBjdCA9IGdldF9jeWNsZXMoKTsKPj4KPj4gICAgICAgaWYgKCByZWFkICkKPj4gICAg
ICAgewo+PiAtICAgICAgICAqciA9ICh1aW50MzJfdCkobnNfdG9fdGlja3Modi0+YXJjaC5waHlz
X3RpbWVyLmN2YWwgLSBub3cpICYgMHhmZmZmZmZmZnVsbCk7Cj4+ICsgICAgICAgICpyID0gKHVp
bnQzMl90KSgodi0+YXJjaC5waHlzX3RpbWVyLmN2YWwgLSBjbnRwY3QpICYgMHhmZmZmZmZmZnVs
bCk7Cj4+ICAgICAgIH0KPj4gICAgICAgZWxzZQo+PiAgICAgICB7Cj4+IC0gICAgICAgIHYtPmFy
Y2gucGh5c190aW1lci5jdmFsID0gbm93ICsgdGlja3NfdG9fbnMoKnIpOwo+PiArICAgICAgICB2
LT5hcmNoLnBoeXNfdGltZXIuY3ZhbCA9IGNudHBjdCArICpyOwo+PiAgICAgICAgICAgaWYgKCB2
LT5hcmNoLnBoeXNfdGltZXIuY3RsICYgQ05UeF9DVExfRU5BQkxFICkKPj4gICAgICAgICAgIHsK
Pj4gICAgICAgICAgICAgICB2LT5hcmNoLnBoeXNfdGltZXIuY3RsICY9IH5DTlR4X0NUTF9QRU5E
SU5HOwo+PiAtICAgICAgICAgICAgc2V0X3RpbWVyKCZ2LT5hcmNoLnBoeXNfdGltZXIudGltZXIs
Cj4+IC0gICAgICAgICAgICAgICAgICAgICAgdi0+YXJjaC5waHlzX3RpbWVyLmN2YWwgKwo+PiAt
ICAgICAgICAgICAgICAgICAgICAgIHYtPmRvbWFpbi0+YXJjaC5waHlzX3RpbWVyX2Jhc2Uub2Zm
c2V0KTsKPj4gKyAgICAgICAgICAgIGV4cGlyZXMgPSB2LT5hcmNoLnBoeXNfdGltZXIuY3ZhbCA+
IGJvb3RfY291bnQKPj4gKyAgICAgICAgICAgICAgICAgICAgICA/IHRpY2tzX3RvX25zKHYtPmFy
Y2gucGh5c190aW1lci5jdmFsIC0gYm9vdF9jb3VudCkgOiAwOwo+IAo+IFlvdSBwcm9iYWJseSB3
YW50IGEgY29tbWVudCB0byBleHBsYWluIHdoeSB5b3Ugc2V0IHRvIDAgaGVyZS4KClRoaXMgY29k
ZSBpcyByZXBlYXRlZCBpbiAzIHBsYWNlcyAtIGl0IHByb2JhYmx5IGRvZXNuJ3QgbWFrZSBzZW5z
ZSB0byBoYXZlIDMKZHVwbGljYXRlIGNvbW1lbnRzIGFzIHdlbGwuIEkgdGhpbmsgaXQgd291bGQg
Zml0IHdlbGwgd2l0aCB5b3VyIGZ1bmN0aW9uCnN1Z2dlc3Rpb24gYmVsb3cuCgo+PiArICAgICAg
ICAgICAgc2V0X3RpbWVyKCZ2LT5hcmNoLnBoeXNfdGltZXIudGltZXIsIGV4cGlyZXMpOwo+PiAg
ICAgICAgICAgfQo+PiAgICAgICB9Cj4+ICAgICAgIHJldHVybiB0cnVlOwo+PiBAQCAtMjI2LDIz
ICsyMjcsMjQgQEAgc3RhdGljIGJvb2wgdnRpbWVyX2NudHBfY3ZhbChzdHJ1Y3QgY3B1X3VzZXJf
cmVncyAqcmVncywgdWludDY0X3QgKnIsCj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBib29sIHJlYWQpCj4+ICAgewo+PiAgICAgICBzdHJ1Y3QgdmNwdSAqdiA9IGN1cnJlbnQ7Cj4+
ICsgICAgc190aW1lX3QgZXhwaXJlczsKPj4KPj4gICAgICAgaWYgKCAhQUNDRVNTX0FMTE9XRUQo
cmVncywgRUwwUFRFTikgKQo+PiAgICAgICAgICAgcmV0dXJuIGZhbHNlOwo+Pgo+PiAgICAgICBp
ZiAoIHJlYWQgKQo+PiAgICAgICB7Cj4+IC0gICAgICAgICpyID0gbnNfdG9fdGlja3Modi0+YXJj
aC5waHlzX3RpbWVyLmN2YWwpOwo+PiArICAgICAgICAqciA9IHYtPmFyY2gucGh5c190aW1lci5j
dmFsOwo+PiAgICAgICB9Cj4+ICAgICAgIGVsc2UKPj4gICAgICAgewo+PiAtICAgICAgICB2LT5h
cmNoLnBoeXNfdGltZXIuY3ZhbCA9IHRpY2tzX3RvX25zKCpyKTsKPj4gKyAgICAgICAgdi0+YXJj
aC5waHlzX3RpbWVyLmN2YWwgPSAqcjsKPj4gICAgICAgICAgIGlmICggdi0+YXJjaC5waHlzX3Rp
bWVyLmN0bCAmIENOVHhfQ1RMX0VOQUJMRSApCj4+ICAgICAgICAgICB7Cj4+ICAgICAgICAgICAg
ICAgdi0+YXJjaC5waHlzX3RpbWVyLmN0bCAmPSB+Q05UeF9DVExfUEVORElORzsKPj4gLSAgICAg
ICAgICAgIHNldF90aW1lcigmdi0+YXJjaC5waHlzX3RpbWVyLnRpbWVyLAo+PiAtICAgICAgICAg
ICAgICAgICAgICAgIHYtPmFyY2gucGh5c190aW1lci5jdmFsICsKPj4gLSAgICAgICAgICAgICAg
ICAgICAgICB2LT5kb21haW4tPmFyY2gucGh5c190aW1lcl9iYXNlLm9mZnNldCk7Cj4+ICsgICAg
ICAgICAgICBleHBpcmVzID0gdi0+YXJjaC5waHlzX3RpbWVyLmN2YWwgPiBib290X2NvdW50Cj4+
ICsgICAgICAgICAgICAgICAgICAgICAgPyB0aWNrc190b19ucyh2LT5hcmNoLnBoeXNfdGltZXIu
Y3ZhbCAtIGJvb3RfY291bnQpIDogMDsKPiAKPiBTYW1lIGhlcmUuIEJ1dCBJIGFtIHdvbmRlcmlu
ZyB3aGV0aGVyIHdlIGNvdWxkIGZhY3RvciB0aGlzIGNvZGUgaW4gYQo+IGZ1bmN0aW9uLiBUaGlz
IHdvdWxkIGF2b2lkIGNvZGUgZHVwbGljYXRpb24gYW5kIG1ha2UgdGhlIGNvZGUgc2ltcGxlci4K
PiAKPiBUaGlzIGNhbiBiZSBkb25lIGFzIGEgZm9sbG93LXVwIGFzIHdlIG1heSB3YW50IHRvIGJh
Y2twb3J0IHRoZSBmaXguCgpUaGlzIGlzIGEgZ3JlYXQgaWRlYS4gSG93ZXZlciwgSSB3b3VsZCBj
b25zaWRlciB0aGlzIGZ1cnRoZXIgc2NvcGUgY3JlZXAgZm9yCnRoaXMgcGF0Y2ggc2V0IC0gSSB0
aGluayB3aGF0IGlzIGhlcmUgaXMgYWxyZWFkeSBhIGdyZWF0IGltcHJvdmVtZW50LiBJIGFtCmN1
cnJlbnRseSBmb2N1c2VkIG9uIHdyYXBwaW5nIHVwIGEgcHJvamVjdDsgdW5mb3J0dW5hdGVseSwg
dGhpcyBjaGFuZ2Ugd291bGQgYmUKbG93IG9uIHRoZSBwcmlvcml0eSBsaXN0IGZvciBtZSBhbmQg
SSBtYXkgbm90IGJlIGFibGUgdG8gZ2V0IHRvIGl0LgoKPj4gKyAgICAgICAgICAgIHNldF90aW1l
cigmdi0+YXJjaC5waHlzX3RpbWVyLnRpbWVyLCBleHBpcmVzKTsKPj4gICAgICAgICAgIH0KPj4g
ICAgICAgfQo+PiAgICAgICByZXR1cm4gdHJ1ZTsKPj4gZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRl
L2FzbS1hcm0vZG9tYWluLmggYi94ZW4vaW5jbHVkZS9hc20tYXJtL2RvbWFpbi5oCj4+IGluZGV4
IGYzZjNmYjdkN2YuLmFkYzdmZTcyMTAgMTAwNjQ0Cj4+IC0tLSBhL3hlbi9pbmNsdWRlL2FzbS1h
cm0vZG9tYWluLmgKPj4gKysrIGIveGVuL2luY2x1ZGUvYXNtLWFybS9kb21haW4uaAo+PiBAQCAt
NjUsOSArNjUsNiBAQCBzdHJ1Y3QgYXJjaF9kb21haW4KPj4gICAgICAgICAgIFJFTE1FTV9kb25l
LAo+PiAgICAgICB9IHJlbG1lbTsKPj4KPj4gLSAgICBzdHJ1Y3Qgewo+PiAtICAgICAgICB1aW50
NjRfdCBvZmZzZXQ7Cj4+IC0gICAgfSBwaHlzX3RpbWVyX2Jhc2U7Cj4+ICAgICAgIHN0cnVjdCB7
Cj4+ICAgICAgICAgICB1aW50NjRfdCBvZmZzZXQ7Cj4+ICAgICAgIH0gdmlydF90aW1lcl9iYXNl
Owo+Pgo+IAo+IENoZWVycywKPiAKPiAtLQo+IEp1bGllbiBHcmFsbAo+IAoKU2luY2VyZWx5LApK
ZWZmIEt1YmFzY2lrCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9y
ZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

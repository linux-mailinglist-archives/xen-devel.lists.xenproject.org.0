Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id CDC3814A9E0
	for <lists+xen-devel@lfdr.de>; Mon, 27 Jan 2020 19:36:52 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iw9DI-0001z8-Lq; Mon, 27 Jan 2020 18:34:20 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=5jYl=3Q=intel.com=tamas.lengyel@srs-us1.protection.inumbo.net>)
 id 1iw9DG-0001yE-9f
 for xen-devel@lists.xenproject.org; Mon, 27 Jan 2020 18:34:18 +0000
X-Inumbo-ID: 9e8cd562-4133-11ea-8594-12813bfff9fa
Received: from mga07.intel.com (unknown [134.134.136.100])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 9e8cd562-4133-11ea-8594-12813bfff9fa;
 Mon, 27 Jan 2020 18:34:15 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by orsmga105.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 27 Jan 2020 10:06:48 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,370,1574150400"; d="scan'208";a="231562365"
Received: from tlengyel-mobl2.amr.corp.intel.com (HELO localhost.localdomain)
 ([10.254.183.124])
 by orsmga006.jf.intel.com with ESMTP; 27 Jan 2020 10:06:47 -0800
From: Tamas K Lengyel <tamas.lengyel@intel.com>
To: xen-devel@lists.xenproject.org
Date: Mon, 27 Jan 2020 10:06:32 -0800
Message-Id: <f499998850729f19cc8486222ccc93e274ea441d.1580148227.git.tamas.lengyel@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1580148227.git.tamas.lengyel@intel.com>
References: <cover.1580148227.git.tamas.lengyel@intel.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v6 4/9] x86/mem_sharing: Replace
 MEM_SHARING_DEBUG with gdprintk
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Tamas K Lengyel <tamas.lengyel@intel.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VXNpbmcgWEVOTE9HX0VSUiBsZXZlbCBzaW5jZSB0aGlzIGlzIG9ubHkgdXNlZCBpbiBkZWJ1ZyBw
YXRocyAoaWUuIGl0J3MKZXhwZWN0ZWQgdGhlIHVzZXIgYWxyZWFkeSBoYXMgbG9nbHZsPWFsbCBz
ZXQpLiBBbHNvIHVzZSAlcGQgdG8gcHJpbnQgdGhlIGRvbWFpbgppZHMuCgpTaWduZWQtb2ZmLWJ5
OiBUYW1hcyBLIExlbmd5ZWwgPHRhbWFzLmxlbmd5ZWxAaW50ZWwuY29tPgotLS0KIHhlbi9hcmNo
L3g4Ni9tbS9tZW1fc2hhcmluZy5jIHwgODIgKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0t
LS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA0MSBpbnNlcnRpb25zKCspLCA0MSBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvbW0vbWVtX3NoYXJpbmcuYyBiL3hlbi9hcmNoL3g4
Ni9tbS9tZW1fc2hhcmluZy5jCmluZGV4IDVjZTA3NWQzMDcuLjJiM2JlNWIxMjUgMTAwNjQ0Ci0t
LSBhL3hlbi9hcmNoL3g4Ni9tbS9tZW1fc2hhcmluZy5jCisrKyBiL3hlbi9hcmNoL3g4Ni9tbS9t
ZW1fc2hhcmluZy5jCkBAIC00OSw5ICs0OSw2IEBAIHR5cGVkZWYgc3RydWN0IHBnX2xvY2tfZGF0
YSB7CiAKIHN0YXRpYyBERUZJTkVfUEVSX0NQVShwZ19sb2NrX2RhdGFfdCwgX19wbGQpOwogCi0j
ZGVmaW5lIE1FTV9TSEFSSU5HX0RFQlVHKF9mLCBfYS4uLikgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgXAotICAgIGRlYnVndHJhY2VfcHJpbnRrKCJtZW1fc2hhcmluZ19kZWJ1Zzog
JXMoKTogIiBfZiwgX19mdW5jX18sICMjX2EpCi0KIC8qIFJldmVyc2UgbWFwIGRlZmluZXMgKi8K
ICNkZWZpbmUgUk1BUF9IQVNIVEFCX09SREVSICAwCiAjZGVmaW5lIFJNQVBfSEFTSFRBQl9TSVpF
ICAgXApAQCAtNDgyLDkgKzQ3OSw5IEBAIHN0YXRpYyBpbnQgYXVkaXQodm9pZCkKICAgICAgICAg
LyogSWYgd2UgY2FuJ3QgbG9jayBpdCwgaXQncyBkZWZpbml0ZWx5IG5vdCBhIHNoYXJlZCBwYWdl
ICovCiAgICAgICAgIGlmICggIW1lbV9zaGFyaW5nX3BhZ2VfbG9jayhwZykgKQogICAgICAgICB7
Ci0gICAgICAgICAgICBNRU1fU0hBUklOR19ERUJVRygKLSAgICAgICAgICAgICAgICAibWZuICVs
eCBpbiBhdWRpdCBsaXN0LCBidXQgY2Fubm90IGJlIGxvY2tlZCAoJWx4KSFcbiIsCi0gICAgICAg
ICAgICAgICAgbWZuX3gobWZuKSwgcGctPnUuaW51c2UudHlwZV9pbmZvKTsKKyAgICAgICAgICAg
IGdkcHJpbnRrKFhFTkxPR19FUlIsCisgICAgICAgICAgICAgICAgICAgICAibWZuICVseCBpbiBh
dWRpdCBsaXN0LCBidXQgY2Fubm90IGJlIGxvY2tlZCAoJWx4KSFcbiIsCisgICAgICAgICAgICAg
ICAgICAgICBtZm5feChtZm4pLCBwZy0+dS5pbnVzZS50eXBlX2luZm8pOwogICAgICAgICAgICAg
ZXJyb3JzKys7CiAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgfQpAQCAtNDkyLDkgKzQ4
OSw5IEBAIHN0YXRpYyBpbnQgYXVkaXQodm9pZCkKICAgICAgICAgLyogQ2hlY2sgaWYgdGhlIE1G
TiBoYXMgY29ycmVjdCB0eXBlLCBvd25lciBhbmQgaGFuZGxlLiAqLwogICAgICAgICBpZiAoIChw
Zy0+dS5pbnVzZS50eXBlX2luZm8gJiBQR1RfdHlwZV9tYXNrKSAhPSBQR1Rfc2hhcmVkX3BhZ2Ug
KQogICAgICAgICB7Ci0gICAgICAgICAgICBNRU1fU0hBUklOR19ERUJVRygKLSAgICAgICAgICAg
ICAgICAibWZuICVseCBpbiBhdWRpdCBsaXN0LCBidXQgbm90IFBHVF9zaGFyZWRfcGFnZSAoJWx4
KSFcbiIsCi0gICAgICAgICAgICAgICAgbWZuX3gobWZuKSwgcGctPnUuaW51c2UudHlwZV9pbmZv
ICYgUEdUX3R5cGVfbWFzayk7CisgICAgICAgICAgICBnZHByaW50ayhYRU5MT0dfRVJSLAorICAg
ICAgICAgICAgICAgICAgICAgIm1mbiAlbHggaW4gYXVkaXQgbGlzdCwgYnV0IG5vdCBQR1Rfc2hh
cmVkX3BhZ2UgKCVseCkhXG4iLAorICAgICAgICAgICAgICAgICAgICAgbWZuX3gobWZuKSwgcGct
PnUuaW51c2UudHlwZV9pbmZvICYgUEdUX3R5cGVfbWFzayk7CiAgICAgICAgICAgICBlcnJvcnMr
KzsKICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICB9CkBAIC01MDIsMjQgKzQ5OSwyNCBA
QCBzdGF0aWMgaW50IGF1ZGl0KHZvaWQpCiAgICAgICAgIC8qIENoZWNrIHRoZSBwYWdlIG93bmVy
LiAqLwogICAgICAgICBpZiAoIHBhZ2VfZ2V0X293bmVyKHBnKSAhPSBkb21fY293ICkKICAgICAg
ICAgewotICAgICAgICAgICAgTUVNX1NIQVJJTkdfREVCVUcoIm1mbiAlbHggc2hhcmVkLCBidXQg
d3Jvbmcgb3duZXIgJXBkIVxuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mbl94
KG1mbiksIHBhZ2VfZ2V0X293bmVyKHBnKSk7CisgICAgICAgICAgICBnZHByaW50ayhYRU5MT0df
RVJSLCAibWZuICVseCBzaGFyZWQsIGJ1dCB3cm9uZyBvd25lciAoJXBkKSFcbiIsCisgICAgICAg
ICAgICAgICAgICAgICBtZm5feChtZm4pLCBwYWdlX2dldF9vd25lcihwZykpOwogICAgICAgICAg
ICAgZXJyb3JzKys7CiAgICAgICAgIH0KIAogICAgICAgICAvKiBDaGVjayB0aGUgbTJwIGVudHJ5
ICovCiAgICAgICAgIGlmICggIVNIQVJFRF9NMlAoZ2V0X2dwZm5fZnJvbV9tZm4obWZuX3gobWZu
KSkpICkKICAgICAgICAgewotICAgICAgICAgICAgTUVNX1NIQVJJTkdfREVCVUcoIm1mbiAlbHgg
c2hhcmVkLCBidXQgd3JvbmcgbTJwIGVudHJ5ICglbHgpIVxuIiwKLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIG1mbl94KG1mbiksIGdldF9ncGZuX2Zyb21fbWZuKG1mbl94KG1mbikpKTsK
KyAgICAgICAgICAgIGdkcHJpbnRrKFhFTkxPR19FUlIsICJtZm4gJWx4IHNoYXJlZCwgYnV0IHdy
b25nIG0ycCBlbnRyeSAoJWx4KSFcbiIsCisgICAgICAgICAgICAgICAgICAgICBtZm5feChtZm4p
LCBnZXRfZ3Bmbl9mcm9tX21mbihtZm5feChtZm4pKSk7CiAgICAgICAgICAgICBlcnJvcnMrKzsK
ICAgICAgICAgfQogCiAgICAgICAgIC8qIENoZWNrIHdlIGhhdmUgYSBsaXN0ICovCiAgICAgICAg
IGlmICggKCFwZy0+c2hhcmluZykgfHwgcm1hcF9jb3VudChwZykgPT0gMCApCiAgICAgICAgIHsK
LSAgICAgICAgICAgIE1FTV9TSEFSSU5HX0RFQlVHKCJtZm4gJWx4IHNoYXJlZCwgYnV0IGVtcHR5
IGdmbiBsaXN0IVxuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mbl94KG1mbikp
OworICAgICAgICAgICAgZ2RwcmludGsoWEVOTE9HX0VSUiwgIm1mbiAlbHggc2hhcmVkLCBidXQg
ZW1wdHkgZ2ZuIGxpc3QhXG4iLAorICAgICAgICAgICAgICAgICAgICAgbWZuX3gobWZuKSk7CiAg
ICAgICAgICAgICBlcnJvcnMrKzsKICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICB9CkBA
IC01MzgsMjQgKzUzNSwyNiBAQCBzdGF0aWMgaW50IGF1ZGl0KHZvaWQpCiAgICAgICAgICAgICBk
ID0gZ2V0X2RvbWFpbl9ieV9pZChnLT5kb21haW4pOwogICAgICAgICAgICAgaWYgKCBkID09IE5V
TEwgKQogICAgICAgICAgICAgewotICAgICAgICAgICAgICAgIE1FTV9TSEFSSU5HX0RFQlVHKCJV
bmtub3duIGRvbTogJWh1LCBmb3IgUEZOPSVseCwgTUZOPSVseFxuIiwKLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBnLT5kb21haW4sIGctPmdmbiwgbWZuX3gobWZuKSk7CisgICAg
ICAgICAgICAgICAgZ2RwcmludGsoWEVOTE9HX0VSUiwKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAiVW5rbm93biBkb206ICVkLCBmb3IgUEZOPSVseCwgTUZOPSVseFxuIiwKKyAgICAgICAgICAg
ICAgICAgICAgICAgICBnLT5kb21haW4sIGctPmdmbiwgbWZuX3gobWZuKSk7CiAgICAgICAgICAg
ICAgICAgZXJyb3JzKys7CiAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICB9
CiAgICAgICAgICAgICBvX21mbiA9IGdldF9nZm5fcXVlcnlfdW5sb2NrZWQoZCwgZy0+Z2ZuLCAm
dCk7CiAgICAgICAgICAgICBpZiAoICFtZm5fZXEob19tZm4sIG1mbikgKQogICAgICAgICAgICAg
ewotICAgICAgICAgICAgICAgIE1FTV9TSEFSSU5HX0RFQlVHKCJJbmNvcnJlY3QgUDJNIGZvciBk
PSVodSwgUEZOPSVseC4iCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkV4cGVj
dGluZyBNRk49JWx4LCBnb3QgJWx4XG4iLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGctPmRvbWFpbiwgZy0+Z2ZuLCBtZm5feChtZm4pLCBtZm5feChvX21mbikpOworICAgICAg
ICAgICAgICAgIGdkcHJpbnRrKFhFTkxPR19FUlIsICJJbmNvcnJlY3QgUDJNIGZvciAlcGQsIFBG
Tj0lbHguIgorICAgICAgICAgICAgICAgICAgICAgICAgICJFeHBlY3RpbmcgTUZOPSVseCwgZ290
ICVseFxuIiwKKyAgICAgICAgICAgICAgICAgICAgICAgICBkLCBnLT5nZm4sIG1mbl94KG1mbiks
IG1mbl94KG9fbWZuKSk7CiAgICAgICAgICAgICAgICAgZXJyb3JzKys7CiAgICAgICAgICAgICB9
CiAgICAgICAgICAgICBpZiAoIHQgIT0gcDJtX3JhbV9zaGFyZWQgKQogICAgICAgICAgICAgewot
ICAgICAgICAgICAgICAgIE1FTV9TSEFSSU5HX0RFQlVHKCJJbmNvcnJlY3QgUDJNIHR5cGUgZm9y
IGQ9JWh1LCBQRk49JWx4IE1GTj0lbHguIgotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJFeHBlY3RpbmcgdD0lZCwgZ290ICVkXG4iLAotICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGctPmRvbWFpbiwgZy0+Z2ZuLCBtZm5feChtZm4pLCBwMm1fcmFtX3NoYXJlZCwg
dCk7CisgICAgICAgICAgICAgICAgZ2RwcmludGsoWEVOTE9HX0VSUiwKKyAgICAgICAgICAgICAg
ICAgICAgICAgICAiSW5jb3JyZWN0IFAyTSB0eXBlIGZvciAlcGQsIFBGTj0lbHggTUZOPSVseC4i
CisgICAgICAgICAgICAgICAgICAgICAgICAgIkV4cGVjdGluZyB0PSVkLCBnb3QgJWRcbiIsCisg
ICAgICAgICAgICAgICAgICAgICAgICAgZCwgZy0+Z2ZuLCBtZm5feChtZm4pLCBwMm1fcmFtX3No
YXJlZCwgdCk7CiAgICAgICAgICAgICAgICAgZXJyb3JzKys7CiAgICAgICAgICAgICB9CiAgICAg
ICAgICAgICBwdXRfZG9tYWluKGQpOwpAQCAtNTY0LDEwICs1NjMsMTAgQEAgc3RhdGljIGludCBh
dWRpdCh2b2lkKQogICAgICAgICAvKiBUaGUgdHlwZSBjb3VudCBoYXMgYW4gZXh0cmEgcmVmIGJl
Y2F1c2Ugd2UgaGF2ZSBsb2NrZWQgdGhlIHBhZ2UgKi8KICAgICAgICAgaWYgKCAobnJfZ2ZucyAr
IDEpICE9IChwZy0+dS5pbnVzZS50eXBlX2luZm8gJiBQR1RfY291bnRfbWFzaykgKQogICAgICAg
ICB7Ci0gICAgICAgICAgICBNRU1fU0hBUklOR19ERUJVRygiTWlzbWF0Y2hlZCBjb3VudHMgZm9y
IE1GTj0lbHguIgotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5yX2dmbnMgaW4gbGlz
dCAlbHUsIGluIHR5cGVfaW5mbyAlbHhcbiIsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBtZm5feChtZm4pLCBucl9nZm5zLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBn
LT51LmludXNlLnR5cGVfaW5mbyAmIFBHVF9jb3VudF9tYXNrKSk7CisgICAgICAgICAgICBnZHBy
aW50ayhYRU5MT0dfRVJSLCAiTWlzbWF0Y2hlZCBjb3VudHMgZm9yIE1GTj0lbHguIgorICAgICAg
ICAgICAgICAgICAgICAgIm5yX2dmbnMgaW4gbGlzdCAlbHUsIGluIHR5cGVfaW5mbyAlbHhcbiIs
CisgICAgICAgICAgICAgICAgICAgICBtZm5feChtZm4pLCBucl9nZm5zLAorICAgICAgICAgICAg
ICAgICAgICAgKHBnLT51LmludXNlLnR5cGVfaW5mbyAmIFBHVF9jb3VudF9tYXNrKSk7CiAgICAg
ICAgICAgICBlcnJvcnMrKzsKICAgICAgICAgfQogCkBAIC01NzgsOCArNTc3LDggQEAgc3RhdGlj
IGludCBhdWRpdCh2b2lkKQogCiAgICAgaWYgKCBjb3VudF9mb3VuZCAhPSBjb3VudF9leHBlY3Rl
ZCApCiAgICAgewotICAgICAgICBNRU1fU0hBUklOR19ERUJVRygiRXhwZWN0ZWQgJWxkIHNoYXJl
ZCBtZm5zLCBmb3VuZCAlbGQuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRfZXhw
ZWN0ZWQsIGNvdW50X2ZvdW5kKTsKKyAgICAgICAgZ2RwcmludGsoWEVOTE9HX0VSUiwgIkV4cGVj
dGVkICVsZCBzaGFyZWQgbWZucywgZm91bmQgJWxkLiIsCisgICAgICAgICAgICAgICAgIGNvdW50
X2V4cGVjdGVkLCBjb3VudF9mb3VuZCk7CiAgICAgICAgIGVycm9ycysrOwogICAgIH0KIApAQCAt
NzU3LDEwICs3NTYsMTAgQEAgc3RhdGljIGludCBkZWJ1Z19tZm4obWZuX3QgbWZuKQogICAgICAg
ICByZXR1cm4gLUVJTlZBTDsKICAgICB9CiAKLSAgICBNRU1fU0hBUklOR19ERUJVRygKLSAgICAg
ICAgIkRlYnVnIHBhZ2U6IE1GTj0lbHggaXMgY2k9JWx4LCB0aT0lbHgsIG93bmVyPSVwZFxuIiwK
LSAgICAgICAgbWZuX3gocGFnZV90b19tZm4ocGFnZSkpLCBwYWdlLT5jb3VudF9pbmZvLAotICAg
ICAgICBwYWdlLT51LmludXNlLnR5cGVfaW5mbywgcGFnZV9nZXRfb3duZXIocGFnZSkpOworICAg
IGdkcHJpbnRrKFhFTkxPR19FUlIsCisgICAgICAgICAgICAgIkRlYnVnIHBhZ2U6IE1GTj0lbHgg
aXMgY2k9JWx4LCB0aT0lbHgsIG93bmVyX2lkPSVwZFxuIiwKKyAgICAgICAgICAgICBtZm5feChw
YWdlX3RvX21mbihwYWdlKSksIHBhZ2UtPmNvdW50X2luZm8sCisgICAgICAgICAgICAgcGFnZS0+
dS5pbnVzZS50eXBlX2luZm8sIHBhZ2VfZ2V0X293bmVyKHBhZ2UpKTsKIAogICAgIC8qIC0xIGJl
Y2F1c2UgdGhlIHBhZ2UgaXMgbG9ja2VkIGFuZCB0aGF0J3MgYW4gYWRkaXRpb25hbCB0eXBlIHJl
ZiAqLwogICAgIG51bV9yZWZzID0gKChpbnQpIChwYWdlLT51LmludXNlLnR5cGVfaW5mbyAmIFBH
VF9jb3VudF9tYXNrKSkgLSAxOwpAQCAtNzc2LDggKzc3NSw5IEBAIHN0YXRpYyBpbnQgZGVidWdf
Z2ZuKHN0cnVjdCBkb21haW4gKmQsIGdmbl90IGdmbikKIAogICAgIG1mbiA9IGdldF9nZm5fcXVl
cnkoZCwgZ2ZuX3goZ2ZuKSwgJnAybXQpOwogCi0gICAgTUVNX1NIQVJJTkdfREVCVUcoIkRlYnVn
IGZvciBkb20lZCwgZ2ZuPSUiIFBSSV9nZm4gIlxuIiwKLSAgICAgICAgICAgICAgICAgICAgICBk
LT5kb21haW5faWQsIGdmbl94KGdmbikpOworICAgIGdkcHJpbnRrKFhFTkxPR19FUlIsICJEZWJ1
ZyBmb3IgJXBkLCBnZm49JSIgUFJJX2dmbiAiXG4iLAorICAgICAgICAgICAgIGQsIGdmbl94KGdm
bikpOworCiAgICAgbnVtX3JlZnMgPSBkZWJ1Z19tZm4obWZuKTsKICAgICBwdXRfZ2ZuKGQsIGdm
bl94KGdmbikpOwogCkBAIC03OTMsMTMgKzc5MywxMyBAQCBzdGF0aWMgaW50IGRlYnVnX2dyZWYo
c3RydWN0IGRvbWFpbiAqZCwgZ3JhbnRfcmVmX3QgcmVmKQogICAgIHJjID0gbWVtX3NoYXJpbmdf
Z3JlZl90b19nZm4oZC0+Z3JhbnRfdGFibGUsIHJlZiwgJmdmbiwgJnN0YXR1cyk7CiAgICAgaWYg
KCByYyApCiAgICAgewotICAgICAgICBNRU1fU0hBUklOR19ERUJVRygiQXNrZWQgdG8gZGVidWcg
W2RvbT0lZCxncmVmPSV1XTogZXJyb3IgJWQuXG4iLAotICAgICAgICAgICAgICAgICAgICAgICAg
ICBkLT5kb21haW5faWQsIHJlZiwgcmMpOworICAgICAgICBnZHByaW50ayhYRU5MT0dfRVJSLCAi
QXNrZWQgdG8gZGVidWcgWyVwZCxncmVmPSV1XTogZXJyb3IgJWQuXG4iLAorICAgICAgICAgICAg
ICAgICBkLCByZWYsIHJjKTsKICAgICAgICAgcmV0dXJuIHJjOwogICAgIH0KIAotICAgIE1FTV9T
SEFSSU5HX0RFQlVHKCI9PT4gR3JhbnQgW2RvbT0lZCxyZWY9JWRdLCBzdGF0dXM9JXguICIsCi0g
ICAgICAgICAgICAgICAgICAgICAgZC0+ZG9tYWluX2lkLCByZWYsIHN0YXR1cyk7CisgICAgZ2Rw
cmludGsoWEVOTE9HX0VSUiwgIj09PiBHcmFudCBbJXBkLHJlZj0lZF0sIHN0YXR1cz0leC4gIiwK
KyAgICAgICAgICAgICBkLCByZWYsIHN0YXR1cyk7CiAKICAgICByZXR1cm4gZGVidWdfZ2ZuKGQs
IGdmbik7CiB9CkBAIC0xMjc4LDggKzEyNzgsOCBAQCBpbnQgX19tZW1fc2hhcmluZ191bnNoYXJl
X3BhZ2Uoc3RydWN0IGRvbWFpbiAqZCwKICBwcml2YXRlX3BhZ2VfZm91bmQ6CiAgICAgaWYgKCBw
Mm1fY2hhbmdlX3R5cGVfb25lKGQsIGdmbiwgcDJtX3JhbV9zaGFyZWQsIHAybV9yYW1fcncpICkK
ICAgICB7Ci0gICAgICAgIGdkcHJpbnRrKFhFTkxPR19FUlIsICJDb3VsZCBub3QgY2hhbmdlIHAy
bSB0eXBlIGQgJWh1IGdmbiAlbHguXG4iLAotICAgICAgICAgICAgICAgICBkLT5kb21haW5faWQs
IGdmbik7CisgICAgICAgIGdkcHJpbnRrKFhFTkxPR19FUlIsICJDb3VsZCBub3QgY2hhbmdlIHAy
bSB0eXBlIGQgJXBkIGdmbiAlbHguXG4iLAorICAgICAgICAgICAgICAgICBkLCBnZm4pOwogICAg
ICAgICBCVUcoKTsKICAgICB9CiAKLS0gCjIuMjAuMQoKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVs
QGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1h
bi9saXN0aW5mby94ZW4tZGV2ZWw=

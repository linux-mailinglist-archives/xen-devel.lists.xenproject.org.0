Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 8E0D218F5E8
	for <lists+xen-devel@lfdr.de>; Mon, 23 Mar 2020 14:40:53 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jGNI5-0000if-HT; Mon, 23 Mar 2020 13:38:53 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=xNlF=5I=amazon.de=prvs=344d8b8e3=nmanthey@srs-us1.protection.inumbo.net>)
 id 1jGNI3-0000iD-Vn
 for xen-devel@lists.xenproject.org; Mon, 23 Mar 2020 13:38:52 +0000
X-Inumbo-ID: a1b85a8c-6d0b-11ea-a6c1-bc764e2007e4
Received: from smtp-fw-6001.amazon.com (unknown [52.95.48.154])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id a1b85a8c-6d0b-11ea-a6c1-bc764e2007e4;
 Mon, 23 Mar 2020 13:38:51 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.de; i=@amazon.de; q=dns/txt; s=amazon201209;
 t=1584970731; x=1616506731;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=z8dz4h3mXSy6ZGzFUZMYSMXvNQuf3lLok71VJ3FGFcY=;
 b=iem70URKFdKotb6tO9x7kVxrh1HB1WydP99qTU+NrVzheg5IyNkTtN5I
 aSTQtuFOg4Nmn37ymwi3SHa/VheZ9R/5LdVg8M4SzPz1Kx/3M0cRf7zUS
 R+hQqRLfV1/Ce+dvyA9P0TXOpJJrjgxuv+QHegkeN5pLl0a5Nay6mhm9E 0=;
IronPort-SDR: EROhmyWDUx4u3ocGRSjK9aiuFqfgYKmlV7Dc3n43iYLwwMMAws6EKWk623Utqsx8KWG/wGHwcc
 CB/a75aD9tXg==
X-IronPort-AV: E=Sophos;i="5.72,296,1580774400"; d="scan'208";a="23770896"
Received: from iad12-co-svc-p1-lb1-vlan3.amazon.com (HELO
 email-inbound-relay-1d-2c665b5d.us-east-1.amazon.com) ([10.43.8.6])
 by smtp-border-fw-out-6001.iad6.amazon.com with ESMTP;
 23 Mar 2020 13:38:39 +0000
Received: from EX13MTAUEA002.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan3.iad.amazon.com [10.40.159.166])
 by email-inbound-relay-1d-2c665b5d.us-east-1.amazon.com (Postfix) with ESMTPS
 id 833F2A21A8; Mon, 23 Mar 2020 13:38:39 +0000 (UTC)
Received: from EX13D05EUB003.ant.amazon.com (10.43.166.253) by
 EX13MTAUEA002.ant.amazon.com (10.43.61.77) with Microsoft SMTP Server (TLS)
 id 15.0.1236.3; Mon, 23 Mar 2020 13:38:39 +0000
Received: from EX13MTAUWC001.ant.amazon.com (10.43.162.135) by
 EX13D05EUB003.ant.amazon.com (10.43.166.253) with Microsoft SMTP Server (TLS)
 id 15.0.1497.2; Mon, 23 Mar 2020 13:38:38 +0000
Received: from u6fc700a6f3c650.ant.amazon.com (10.95.138.2) by
 mail-relay.amazon.com (10.43.162.232) with Microsoft SMTP Server id
 15.0.1367.3 via Frontend Transport; Mon, 23 Mar 2020 13:38:35 +0000
From: Norbert Manthey <nmanthey@amazon.de>
To: Andrew Cooper <andrew.cooper3@citrix.com>, <xen-devel@lists.xenproject.org>
Date: Mon, 23 Mar 2020 14:37:00 +0100
Message-ID: <20200323133701.21728-4-nmanthey@amazon.de>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200323133701.21728-1-nmanthey@amazon.de>
References: <20200323133701.21728-1-nmanthey@amazon.de>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH XTF benchmark v1 3/4] time: provide measurement
 template
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Pawel Wieczorkiewicz <wipawel@amazon.de>,
 Norbert Manthey <nmanthey@amazon.de>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlIGFkZGVkIGZ1bmN0aW9uIG1lYXN1cmVfcGVyZm9ybWFuY2UgYWxsb3dzIHRvIG1lYXN1cmUg
dGhlIHJ1biB0aW1lCm9mIGEgZnVuY3Rpb24sIGJ5IGNvbXB1dGluZyB0aGUgYXZlcmFnZSB0aW1l
IGl0IHRha2VzIHRvIGNhbGwgdGhhdApmdW5jdGlvbiBhIGdpdmVuIG51bWJlciBvZiByZXRyaWVz
LiBUaGUgbWVhc3VyZWQgdG90YWwgdGltZSBpcyByZXR1cm5lZAppbiBuYW5vIHNlY29uZHMuIEZ1
cnRoZXJtb3JlLCB0aGUgdmFsdWUgaXMgcHJpbnRlZCB2aWEgcHJpbnRrIGluIGEKZml4ZWQgZm9y
bWF0LCB0byBhbGxvdyBwcm9jZXNzaW5nIHRoZSBvdXRwdXQgZnVydGhlci4KClRoaXMgZm9ybWF0
IGlzLCB3aGVyZSBhdmVyYWdlLXRpbWUgcHJvdmlkZXMgbnMgd2l0aCBwcyBncmFudWxhcml0eToK
CnBlcmYgdGVzdF9uYW1lIDxhdmVyYWdlLXRpbWU+IG5zCgpTaWduZWQtb2ZmLWJ5OiBOb3JiZXJ0
IE1hbnRoZXkgPG5tYW50aGV5QGFtYXpvbi5kZT4KCi0tLQogY29tbW9uL3RpbWUuYyAgICAgIHwg
NzYgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogaW5jbHVk
ZS94dGYvdGltZS5oIHwgMTUgKysrKysrKysrCiAyIGZpbGVzIGNoYW5nZWQsIDkxIGluc2VydGlv
bnMoKykKCmRpZmYgLS1naXQgYS9jb21tb24vdGltZS5jIGIvY29tbW9uL3RpbWUuYwotLS0gYS9j
b21tb24vdGltZS5jCisrKyBiL2NvbW1vbi90aW1lLmMKQEAgLTE5Miw2ICsxOTIsODIgQEAgdm9p
ZCBtc2xlZXAodWludDY0X3QgdCkKICAgICBtc3Bpbl9zbGVlcCh0KTsKIH0KIAordW5zaWduZWQg
bG9uZyBjeWNsZXMybnNlYyh1aW50NjRfdCBjeWNsZXMpCit7CisgICAgcmV0dXJuIHNjYWxlX2Rl
bHRhKGN5Y2xlcywKKyAgICAgICAgICAgIHNoYXJlZF9pbmZvLnZjcHVfaW5mb1swXS50aW1lLnRz
Y190b19zeXN0ZW1fbXVsLAorICAgICAgICAgICAgc2hhcmVkX2luZm8udmNwdV9pbmZvWzBdLnRp
bWUudHNjX3NoaWZ0KTsKK30KKwordW5zaWduZWQgbG9uZyBtZWFzdXJlX3BlcmZvcm1hbmNlKGNv
bnN0IGNoYXIqIHRlc3RfbmFtZSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
b25zdCBjaGFyKiBmdW5jdGlvbl9uYW1lLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGZ1bmN0aW9uX3VuZGVyX3Rlc3RfdCBjYWxsLAorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHVuc2lnbmVkIGxvbmcgbWVhc3VyZV9zZWNvbmRzLAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgY2FsbGlicmF0aW9uX2NhbGxzLAorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBwcmludF90aW1lcykKK3sKKyAgICB1
bnNpZ25lZCBsb25nIHN0YXJ0LCBlbmQ7ICAvLyB0aW1lIHN0YW1wcyBmb3IgYmVmb3JlIGFuZCBh
ZnRlciB0aGUgZXhlY3V0aW9uCisgICAgdW5zaWduZWQgbG9uZyBjYWxpYnJhdGlvbl9ucywgdG90
YWxfbWVhc3VyZWRfbnMsIGF2Z19ucywgYXZnX3BzX2ZyYWN0aW9uOworICAgIHVuc2lnbmVkIGxv
bmcgY291bnRlcjsKKyAgICB1bnNpZ25lZCBsb25nIG1lYXN1cmVfY2FsbHM7CisgICAgaW50IHJj
ID0gMDsKKworCisgICAgLyogQ2FsaWJyYXRlIGJ5IG1lYXN1cmluZyB0aW1lIGZvciBnaXZlbiBh
bW91bnQgb2YgY2FsbGlicmF0aW9uIGNhbGxzKi8KKyAgICBwcmludGsoIkNhbGlicmF0ZSAlcyBi
eSBjYWxsaW5nICVsdSB0aW1lc1xuIiwgZnVuY3Rpb25fbmFtZSwKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGlicmF0aW9uX2NhbGxzKTsKKyAg
ICBzdGFydCA9IHJkdHNjcCgpOworICAgIGZvcihjb3VudGVyID0gMDsgY291bnRlciA8IGNhbGxp
YnJhdGlvbl9jYWxsczsgKysgY291bnRlcikKKyAgICB7CisgICAgICAgIHJjID0gY2FsbCgpOwor
ICAgIH0KKyAgICBlbmQgPSByZHRzY3AoKTsKKworICAgIC8qIENhbGN1bGF0ZSB0aGUgdG90YWwg
bnVtYmVyIGluIG5hbm8gc2Vjb25kcyAqLworICAgIGNhbGlicmF0aW9uX25zID0gY3ljbGVzMm5z
ZWMoZW5kIC0gc3RhcnQpOworCisgICAgLyogQ2FsY3VsYXRlIG51bWJlciBvZiBjYWxscyBmb3Ig
YWJvdXQgbWVhc3VyZV9zZWNvbmRzIGJhc2VkIG9uCisgICAgICAgKGNhbGxpYnJhdGlvbl9jYWxs
cyAvIGNhbGlicmF0aW9uX25zKSBlcXVhbHMKKyAgICAgICAobWVhc3VyZV9jYWxscyAvIChtZWFz
dXJlX3NlY29uZHMgKiAxMDAwICogMTAwMCAqIDEwMDApKSAqLworICAgIG1lYXN1cmVfY2FsbHMg
PSAoKG1lYXN1cmVfc2Vjb25kcyAqIDEwMDBVTCAqIDEwMDBVTCAqIDEwMDBVTCkKKyAgICAgICAg
ICAgICAgICAgICAgIC8gY2FsaWJyYXRpb25fbnMpICogY2FsbGlicmF0aW9uX2NhbGxzOworCisg
ICAgcHJpbnRrKCJNZWFzdXJlICVzIGJ5IGNhbGxpbmcgJWx1IHRpbWVzXG4iLCBmdW5jdGlvbl9u
YW1lLCBtZWFzdXJlX2NhbGxzKTsKKworICAgIC8qIFBlcmZvcm0gYWxsIGNhbGxzLCBtZWFzdXJl
IHN0YXJ0IGFuZCBlbmQgdGltZSAqLworICAgIHN0YXJ0ID0gcmR0c2NwKCk7CisgICAgZm9yKGNv
dW50ZXIgPSAwOyBjb3VudGVyIDwgbWVhc3VyZV9jYWxsczsgKysgY291bnRlcikKKyAgICB7Cisg
ICAgICAgIHJjID0gY2FsbCgpOworICAgIH0KKyAgICBlbmQgPSByZHRzY3AoKTsKKworICAgIC8q
IENhbGN1bGF0ZSB0aGUgdG90YWwgbnVtYmVyIGluIG5hbm8gc2Vjb25kcyAqLworICAgIHRvdGFs
X21lYXN1cmVkX25zID0gY3ljbGVzMm5zZWMoZW5kIC0gc3RhcnQpOworICAgIGF2Z19ucyA9IHRv
dGFsX21lYXN1cmVkX25zIC8gbWVhc3VyZV9jYWxsczsKKyAgICBhdmdfcHNfZnJhY3Rpb24gPSAo
dG90YWxfbWVhc3VyZWRfbnMgLyAobWVhc3VyZV9jYWxscy8xMDAwKSkgJSAxMDAwOworCisgICAg
aWYocHJpbnRfdGltZXMpCisgICAgeworICAgICAgICAvKiBTaG93IHRoZSByZXN1bHQgb2YgdGhl
IGxhc3QgcXVlcnkgKi8KKyAgICAgICAgcHJpbnRrKCIlcydzIGxhc3QgcmV0dXJuIHZhbHVlOiAl
ZFxuIiwgZnVuY3Rpb25fbmFtZSwgcmMpOworCisgICAgICAgIC8qIFByaW50IGF2ZXJhZ2UgdGlt
ZSBhbmQgdG90YWwgdGltZSAqLworICAgICAgICBwcmludGsoIkF2ZyAlcyBjYWxsIHRpbWU6IGF2
ZzogJWxkLiVzJWxkIG5zIHRvdGFsOiAlbGQgbnNcbiIsCisgICAgICAgICAgICAgICBmdW5jdGlv
bl9uYW1lLCBhdmdfbnMsCisgICAgICAgICAgICAgICBhdmdfcHNfZnJhY3Rpb24gPCAxMCA/ICIw
MCIgOiAoYXZnX3BzX2ZyYWN0aW9uIDwgMTAwID8gIjAiIDogIiIpLAorICAgICAgICAgICAgICAg
YXZnX3BzX2ZyYWN0aW9uLCB0b3RhbF9tZWFzdXJlZF9ucyk7CisKKyAgICAgICAgLyogUHJpbnQg
cGVyZm9ybWFuY2UgdmFsdWUgKi8KKyAgICAgICAgcHJpbnRrKCJwZXJmICVzICVsZC4lcyVsZCBu
c1xuIiwgdGVzdF9uYW1lLCBhdmdfbnMsCisgICAgICAgICAgICAgICBhdmdfcHNfZnJhY3Rpb24g
PCAxMCA/ICIwMCIgOiAoYXZnX3BzX2ZyYWN0aW9uIDwgMTAwID8gIjAiIDogIiIpLAorICAgICAg
ICAgICAgICAgYXZnX3BzX2ZyYWN0aW9uKTsKKyAgICB9CisKKyAgICAvKiBSZXR1cm4gYXZlcmFn
ZSBydW4gdGltZSBpbiBwaWNvIHNlY29uZHMgKi8KKyAgICByZXR1cm4gYXZnX25zICogMTAwMCAr
IGF2Z19wc19mcmFjdGlvbjsKK30KKwogLyoKICAqIExvY2FsIHZhcmlhYmxlczoKICAqIG1vZGU6
IEMKZGlmZiAtLWdpdCBhL2luY2x1ZGUveHRmL3RpbWUuaCBiL2luY2x1ZGUveHRmL3RpbWUuaAot
LS0gYS9pbmNsdWRlL3h0Zi90aW1lLmgKKysrIGIvaW5jbHVkZS94dGYvdGltZS5oCkBAIC01Myw2
ICs1MywyMSBAQCBpbnQgZ2V0dGltZW9mZGF5KHN0cnVjdCB0aW1ldmFsICp0cCk7CiAvKiBUaGlz
IHJldHVybnMgdGhlIGN1cnJlbnQgZXBvY2ggdGltZSAqLwogI2RlZmluZSBOT1coKSBjdXJyZW50
X3RpbWUoKQogCit1bnNpZ25lZCBsb25nIGN5Y2xlczJuc2VjKHVpbnQ2NF90IGN5Y2xlcyk7CisK
Ky8qIFNpZ25hdHVyZSBvZiBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBmb3IgbWVhc3VyZW1lbnQg
Ki8KK3R5cGVkZWYgaW50ICgqZnVuY3Rpb25fdW5kZXJfdGVzdF90KSh2b2lkKTsKKworLyogTWVh
c3VyZSB0aGUgdGltZSBpdCB0YWtlcyB0byBjYWxsIHRoZSBwYXNzZWQgZnVuY3Rpb24uIE1lYXN1
cmUgZm9yIGEgZ2l2ZW4KKyAgIGFtb3VudCBvZiB0aW1lIGFmdGVyIGNhbGlicmF0aW5nIGZvciBh
IGdpdmVuIGFtb3VudCBvZiBjYWxscy4gUmV0dXJucyB0aGUKKyAgIGF2ZXJhZ2UgcnVuIHRpbWUg
b2YgdGhlIG1lYXN1cmUgY2FsbCBpbiBwaWNvIHNlY29uZHMuICovCit1bnNpZ25lZCBsb25nIG1l
YXN1cmVfcGVyZm9ybWFuY2UoY29uc3QgY2hhciogdGVzdF9uYW1lLAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIqIGZ1bmN0aW9uX25hbWUsCisgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25fdW5kZXJfdGVzdF90IGNhbGwsCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBtZWFzdXJlX3NlY29u
ZHMsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBjYWxs
aWJyYXRpb25fY2FsbHMsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IHBy
aW50X3RpbWVzKTsKKwogI2VuZGlmIC8qIFhURl9USU1FX0ggKi8KIAogLyoKLS0gCjIuMTcuMQoK
CgoKQW1hem9uIERldmVsb3BtZW50IENlbnRlciBHZXJtYW55IEdtYkgKS3JhdXNlbnN0ci4gMzgK
MTAxMTcgQmVybGluCkdlc2NoYWVmdHNmdWVocnVuZzogQ2hyaXN0aWFuIFNjaGxhZWdlciwgSm9u
YXRoYW4gV2Vpc3MKRWluZ2V0cmFnZW4gYW0gQW10c2dlcmljaHQgQ2hhcmxvdHRlbmJ1cmcgdW50
ZXIgSFJCIDE0OTE3MyBCClNpdHo6IEJlcmxpbgpVc3QtSUQ6IERFIDI4OSAyMzcgODc5CgoKCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwg
bWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3Rz
LnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

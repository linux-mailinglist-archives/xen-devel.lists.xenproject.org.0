Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 4CAD6C1AF5
	for <lists+xen-devel@lfdr.de>; Mon, 30 Sep 2019 07:24:59 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iEo8f-0002WB-Tg; Mon, 30 Sep 2019 05:22:25 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=hbFO=XZ=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1iEo8e-0002UQ-DL
 for xen-devel@lists.xenproject.org; Mon, 30 Sep 2019 05:22:24 +0000
X-Inumbo-ID: 31227d78-e342-11e9-b588-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by localhost (Halon) with ESMTPS
 id 31227d78-e342-11e9-b588-bc764e2007e4;
 Mon, 30 Sep 2019 05:21:44 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 5C1DCB0E2;
 Mon, 30 Sep 2019 05:21:42 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Mon, 30 Sep 2019 07:21:28 +0200
Message-Id: <20190930052135.11257-13-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190930052135.11257-1-jgross@suse.com>
References: <20190930052135.11257-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH v5 12/19] xen/sched: prepare per-cpupool
 scheduling granularity
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Tim Deegan <tim@xen.org>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Dario Faggioli <dfaggioli@suse.com>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24tIGFuZCBvZmZsaW5pbmcgY3B1cyB3aXRoIGNvcmUgc2NoZWR1bGluZyBpcyByYXRoZXIgY29t
cGxpY2F0ZWQgYXMKdGhlIGNwdXMgYXJlIHRha2VuIG9uLSBvciBvZmZsaW5lIG9uZSBieSBvbmUs
IGJ1dCBzY2hlZHVsaW5nIHdhbnRzIHRoZW0KcmF0aGVyIHRvIGJlIGhhbmRsZWQgcGVyIGNvcmUu
CgpBcyB0aGUgZnV0dXJlIHBsYW4gaXMgdG8gYmUgYWJsZSB0byBzZWxlY3Qgc2NoZWR1bGluZyBn
cmFudWxhcml0eSBwZXIKY3B1cG9vbCBwcmVwYXJlIHRoYXQgYnkgc3RvcmluZyB0aGUgZ3JhbnVs
YXJpdHkgaW4gc3RydWN0CnNjaGVkX3Jlc291cmNlICh3ZSBuZWVkIGl0IHRoZXJlIGZvciBmcmVl
IGNwdXMgd2hpY2ggYXJlIG5vdAphc3NvY2lhdGVkIHRvIGFueSBjcHVwb29sKS4gRnJlZSBjcHVz
IHdpbGwgYWx3YXlzIHVzZSBncmFudWxhcml0eSAxLgoKU3RvcmUgdGhlIHNlbGVjdGVkIGdyYW51
bGFyaXR5IG9wdGlvbiAoY3B1LCBjb3JlIG9yIHNvY2tldCkgaW4gdGhlCmNwdXBvb2wgLCBhcyB3
ZSB3aWxsIG5lZWQgaXQgdG8gc2VsZWN0IHRoZSBhcHByb3ByaWF0ZSBjcHUgbWFzayB3aGVuCnBv
cHVsYXRpbmcgdGhlIGNwdXBvb2wgd2l0aCBjcHVzLgoKVGhpcyB3aWxsIG1ha2Ugb24tIGFuZCBv
ZmZsaW5pbmcgb2YgY3B1cyBtdWNoIGVhc2llciBhbmQgYXZvaWRzCndyaXRpbmcgY29kZSB3aGlj
aCB3b3VsZCBuZWVkZWQgdG8gYmUgdGhyb3duIGF3YXkgbGF0ZXIuCgpNb3ZlIHRoZSBncmFudWxh
cml0eSByZWxhdGVkIHZhcmlhYmxlcyB0byBjcHVwb29sLmMgYXMgdGhleSBhcmUgbm93CnVzZWQg
Zm9ybSB0aGVyZSBvbmx5LgoKU2lnbmVkLW9mZi1ieTogSnVlcmdlbiBHcm9zcyA8amdyb3NzQHN1
c2UuY29tPgpSZXZpZXdlZC1ieTogRGFyaW8gRmFnZ2lvbGkgPGRmYWdnaW9saUBzdXNlLmNvbT4K
LS0tClYxOiBuZXcgcGF0Y2gKVjQ6Ci0gbW92ZSBvcHRfc2NoZWRfZ3JhbnVsYXJpdHkgYW5kIHNj
aGVkX2dyYW51bGFyaXR5IHRvIGNwdXBvb2wuYwogIChKYW4gQmV1bGljaCkKLSByZW5hbWUgYy0+
b3B0X3NjaGVkX2dyYW51bGFyaXR5LCBkcm9wIGMtPmdyYW51bGFyaXR5IChKYW4gQmV1bGljaCkK
LS0tCiB4ZW4vY29tbW9uL2NwdXBvb2wuYyAgICAgICB8ICA5ICsrKysrKysrKwogeGVuL2NvbW1v
bi9zY2hlZHVsZS5jICAgICAgfCAyNyArKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0KIHhlbi9p
bmNsdWRlL3hlbi9zY2hlZC1pZi5oIHwgMTEgKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdlZCwg
MzYgaW5zZXJ0aW9ucygrKSwgMTEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1v
bi9jcHVwb29sLmMgYi94ZW4vY29tbW9uL2NwdXBvb2wuYwppbmRleCA2MGE4NWY1MGUxLi41MWYw
ZmYwZDg4IDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL2NwdXBvb2wuYworKysgYi94ZW4vY29tbW9u
L2NwdXBvb2wuYwpAQCAtMzQsNiArMzQsMTQgQEAgc3RhdGljIGNwdW1hc2tfdCBjcHVwb29sX2xv
Y2tlZF9jcHVzOwogCiBzdGF0aWMgREVGSU5FX1NQSU5MT0NLKGNwdXBvb2xfbG9jayk7CiAKK3N0
YXRpYyBlbnVtIHNjaGVkX2dyYW4gX19yZWFkX21vc3RseSBvcHRfc2NoZWRfZ3JhbnVsYXJpdHkg
PSBTQ0hFRF9HUkFOX2NwdTsKK3N0YXRpYyB1bnNpZ25lZCBpbnQgX19yZWFkX21vc3RseSBzY2hl
ZF9ncmFudWxhcml0eSA9IDE7CisKK3Vuc2lnbmVkIGludCBjcHVwb29sX2dldF9ncmFudWxhcml0
eShjb25zdCBzdHJ1Y3QgY3B1cG9vbCAqYykKK3sKKyAgICByZXR1cm4gYyA/IHNjaGVkX2dyYW51
bGFyaXR5IDogMTsKK30KKwogc3RhdGljIHZvaWQgZnJlZV9jcHVwb29sX3N0cnVjdChzdHJ1Y3Qg
Y3B1cG9vbCAqYykKIHsKICAgICBpZiAoIGMgKQpAQCAtMTczLDYgKzE4MSw3IEBAIHN0YXRpYyBz
dHJ1Y3QgY3B1cG9vbCAqY3B1cG9vbF9jcmVhdGUoCiAgICAgICAgICAgICByZXR1cm4gTlVMTDsK
ICAgICAgICAgfQogICAgIH0KKyAgICBjLT5ncmFuID0gb3B0X3NjaGVkX2dyYW51bGFyaXR5Owog
CiAgICAgKnEgPSBjOwogCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVkdWxlLmMgYi94ZW4v
Y29tbW9uL3NjaGVkdWxlLmMKaW5kZXggMGRjZjAwNGQ3OC4uNTI1NzIyNTA1MCAxMDA2NDQKLS0t
IGEveGVuL2NvbW1vbi9zY2hlZHVsZS5jCisrKyBiL3hlbi9jb21tb24vc2NoZWR1bGUuYwpAQCAt
NjIsNyArNjIsNiBAQCBpbnQgc2NoZWRfcmF0ZWxpbWl0X3VzID0gU0NIRURfREVGQVVMVF9SQVRF
TElNSVRfVVM7CiBpbnRlZ2VyX3BhcmFtKCJzY2hlZF9yYXRlbGltaXRfdXMiLCBzY2hlZF9yYXRl
bGltaXRfdXMpOwogCiAvKiBOdW1iZXIgb2YgdmNwdXMgcGVyIHN0cnVjdCBzY2hlZF91bml0LiAq
Lwotc3RhdGljIHVuc2lnbmVkIGludCBfX3JlYWRfbW9zdGx5IHNjaGVkX2dyYW51bGFyaXR5ID0g
MTsKIGJvb2wgX19yZWFkX21vc3RseSBzY2hlZF9kaXNhYmxlX3NtdF9zd2l0Y2hpbmc7CiBjb25z
dCBjcHVtYXNrX3QgKnNjaGVkX3Jlc19tYXNrID0gJmNwdW1hc2tfYWxsOwogCkBAIC00MzUsMTAg
KzQzNCwxMCBAQCBzdGF0aWMgc3RydWN0IHNjaGVkX3VuaXQgKnNjaGVkX2FsbG9jX3VuaXQoc3Ry
dWN0IHZjcHUgKnYpCiB7CiAgICAgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQsICoqcHJldl91bml0
OwogICAgIHN0cnVjdCBkb21haW4gKmQgPSB2LT5kb21haW47CisgICAgdW5zaWduZWQgaW50IGdy
YW4gPSBjcHVwb29sX2dldF9ncmFudWxhcml0eShkLT5jcHVwb29sKTsKIAogICAgIGZvcl9lYWNo
X3NjaGVkX3VuaXQgKCBkLCB1bml0ICkKLSAgICAgICAgaWYgKCB1bml0LT51bml0X2lkIC8gc2No
ZWRfZ3JhbnVsYXJpdHkgPT0KLSAgICAgICAgICAgICB2LT52Y3B1X2lkIC8gc2NoZWRfZ3JhbnVs
YXJpdHkgKQorICAgICAgICBpZiAoIHVuaXQtPnVuaXRfaWQgLyBncmFuID09IHYtPnZjcHVfaWQg
LyBncmFuICkKICAgICAgICAgICAgIGJyZWFrOwogCiAgICAgaWYgKCB1bml0ICkKQEAgLTU5Myw2
ICs1OTIsNyBAQCBpbnQgc2NoZWRfbW92ZV9kb21haW4oc3RydWN0IGRvbWFpbiAqZCwgc3RydWN0
IGNwdXBvb2wgKmMpCiAgICAgdm9pZCAqdW5pdGRhdGE7CiAgICAgc3RydWN0IHNjaGVkdWxlciAq
b2xkX29wczsKICAgICB2b2lkICpvbGRfZG9tZGF0YTsKKyAgICB1bnNpZ25lZCBpbnQgZ3JhbiA9
IGNwdXBvb2xfZ2V0X2dyYW51bGFyaXR5KGMpOwogCiAgICAgZm9yX2VhY2hfdmNwdSAoIGQsIHYg
KQogICAgIHsKQEAgLTYwNCw4ICs2MDQsNyBAQCBpbnQgc2NoZWRfbW92ZV9kb21haW4oc3RydWN0
IGRvbWFpbiAqZCwgc3RydWN0IGNwdXBvb2wgKmMpCiAgICAgaWYgKCBJU19FUlIoZG9tZGF0YSkg
KQogICAgICAgICByZXR1cm4gUFRSX0VSUihkb21kYXRhKTsKIAotICAgIHVuaXRfcHJpdiA9IHh6
YWxsb2NfYXJyYXkodm9pZCAqLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRElWX1JP
VU5EX1VQKGQtPm1heF92Y3B1cywgc2NoZWRfZ3JhbnVsYXJpdHkpKTsKKyAgICB1bml0X3ByaXYg
PSB4emFsbG9jX2FycmF5KHZvaWQgKiwgRElWX1JPVU5EX1VQKGQtPm1heF92Y3B1cywgZ3Jhbikp
OwogICAgIGlmICggdW5pdF9wcml2ID09IE5VTEwgKQogICAgIHsKICAgICAgICAgc2NoZWRfZnJl
ZV9kb21kYXRhKGMtPnNjaGVkLCBkb21kYXRhKTsKQEAgLTE4NTAsMTEgKzE4NDksMTEgQEAgc3Rh
dGljIHZvaWQgc2NoZWRfc3dpdGNoX3VuaXRzKHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqc3IsCiAg
ICAgICAgIGlmICggaXNfaWRsZV91bml0KHByZXYpICkKICAgICAgICAgewogICAgICAgICAgICAg
cHJldi0+cnVuc3RhdGVfY250W1JVTlNUQVRFX3J1bm5pbmddID0gMDsKLSAgICAgICAgICAgIHBy
ZXYtPnJ1bnN0YXRlX2NudFtSVU5TVEFURV9ydW5uYWJsZV0gPSBzY2hlZF9ncmFudWxhcml0eTsK
KyAgICAgICAgICAgIHByZXYtPnJ1bnN0YXRlX2NudFtSVU5TVEFURV9ydW5uYWJsZV0gPSBzci0+
Z3JhbnVsYXJpdHk7CiAgICAgICAgIH0KICAgICAgICAgaWYgKCBpc19pZGxlX3VuaXQobmV4dCkg
KQogICAgICAgICB7Ci0gICAgICAgICAgICBuZXh0LT5ydW5zdGF0ZV9jbnRbUlVOU1RBVEVfcnVu
bmluZ10gPSBzY2hlZF9ncmFudWxhcml0eTsKKyAgICAgICAgICAgIG5leHQtPnJ1bnN0YXRlX2Nu
dFtSVU5TVEFURV9ydW5uaW5nXSA9IHNyLT5ncmFudWxhcml0eTsKICAgICAgICAgICAgIG5leHQt
PnJ1bnN0YXRlX2NudFtSVU5TVEFURV9ydW5uYWJsZV0gPSAwOwogICAgICAgICB9CiAgICAgfQpA
QCAtMjAwMyw3ICsyMDAyLDcgQEAgdm9pZCBzY2hlZF9jb250ZXh0X3N3aXRjaGVkKHN0cnVjdCB2
Y3B1ICp2cHJldiwgc3RydWN0IHZjcHUgKnZuZXh0KQogICAgIGVsc2UKICAgICB7CiAgICAgICAg
IHZjcHVfY29udGV4dF9zYXZlZCh2cHJldiwgdm5leHQpOwotICAgICAgICBpZiAoIHNjaGVkX2dy
YW51bGFyaXR5ID09IDEgKQorICAgICAgICBpZiAoIHNyLT5ncmFudWxhcml0eSA9PSAxICkKICAg
ICAgICAgICAgIHVuaXRfY29udGV4dF9zYXZlZChzcik7CiAgICAgfQogCkBAIC0yMTIzLDExICsy
MTIyLDEyIEBAIHN0YXRpYyBzdHJ1Y3Qgc2NoZWRfdW5pdCAqc2NoZWRfd2FpdF9yZW5kZXp2b3Vz
X2luKHN0cnVjdCBzY2hlZF91bml0ICpwcmV2LAogewogICAgIHN0cnVjdCBzY2hlZF91bml0ICpu
ZXh0OwogICAgIHN0cnVjdCB2Y3B1ICp2OworICAgIHVuc2lnbmVkIGludCBncmFuID0gZ2V0X3Nj
aGVkX3JlcyhjcHUpLT5ncmFudWxhcml0eTsKIAogICAgIGlmICggIS0tcHJldi0+cmVuZGV6dm91
c19pbl9jbnQgKQogICAgIHsKICAgICAgICAgbmV4dCA9IGRvX3NjaGVkdWxlKHByZXYsIG5vdywg
Y3B1KTsKLSAgICAgICAgYXRvbWljX3NldCgmbmV4dC0+cmVuZGV6dm91c19vdXRfY250LCBzY2hl
ZF9ncmFudWxhcml0eSArIDEpOworICAgICAgICBhdG9taWNfc2V0KCZuZXh0LT5yZW5kZXp2b3Vz
X291dF9jbnQsIGdyYW4gKyAxKTsKICAgICAgICAgcmV0dXJuIG5leHQ7CiAgICAgfQogCkBAIC0y
MjUxLDYgKzIyNTEsNyBAQCBzdGF0aWMgdm9pZCBzY2hlZHVsZSh2b2lkKQogICAgIHN0cnVjdCBz
Y2hlZF9yZXNvdXJjZSAqc3I7CiAgICAgc3BpbmxvY2tfdCAgICAgICAgICAgKmxvY2s7CiAgICAg
aW50IGNwdSA9IHNtcF9wcm9jZXNzb3JfaWQoKTsKKyAgICB1bnNpZ25lZCBpbnQgICAgICAgICAg
Z3JhbiA9IGdldF9zY2hlZF9yZXMoY3B1KS0+Z3JhbnVsYXJpdHk7CiAKICAgICBBU1NFUlRfTk9U
X0lOX0FUT01JQygpOwogCkBAIC0yMjc2LDExICsyMjc3LDExIEBAIHN0YXRpYyB2b2lkIHNjaGVk
dWxlKHZvaWQpCiAKICAgICBub3cgPSBOT1coKTsKIAotICAgIGlmICggc2NoZWRfZ3JhbnVsYXJp
dHkgPiAxICkKKyAgICBpZiAoIGdyYW4gPiAxICkKICAgICB7CiAgICAgICAgIGNwdW1hc2tfdCBt
YXNrOwogCi0gICAgICAgIHByZXYtPnJlbmRlenZvdXNfaW5fY250ID0gc2NoZWRfZ3JhbnVsYXJp
dHk7CisgICAgICAgIHByZXYtPnJlbmRlenZvdXNfaW5fY250ID0gZ3JhbjsKICAgICAgICAgY3B1
bWFza19hbmRub3QoJm1hc2ssIHNyLT5jcHVzLCBjcHVtYXNrX29mKGNwdSkpOwogICAgICAgICBj
cHVtYXNrX3JhaXNlX3NvZnRpcnEoJm1hc2ssIFNDSEVEX1NMQVZFX1NPRlRJUlEpOwogICAgICAg
ICBuZXh0ID0gc2NoZWRfd2FpdF9yZW5kZXp2b3VzX2luKHByZXYsICZsb2NrLCBjcHUsIG5vdyk7
CkBAIC0yMzQ4LDYgKzIzNDksOSBAQCBzdGF0aWMgaW50IGNwdV9zY2hlZHVsZV91cCh1bnNpZ25l
ZCBpbnQgY3B1KQogICAgIGluaXRfdGltZXIoJnNyLT5zX3RpbWVyLCBzX3RpbWVyX2ZuLCBOVUxM
LCBjcHUpOwogICAgIGF0b21pY19zZXQoJnBlcl9jcHUoc2NoZWRfdXJnZW50X2NvdW50LCBjcHUp
LCAwKTsKIAorICAgIC8qIFdlIHN0YXJ0IHdpdGggY3B1IGdyYW51bGFyaXR5LiAqLworICAgIHNy
LT5ncmFudWxhcml0eSA9IDE7CisKICAgICAvKiBCb290IENQVSBpcyBkZWFsdCB3aXRoIGxhdGVy
IGluIHNjaGVkdWxlcl9pbml0KCkuICovCiAgICAgaWYgKCBjcHUgPT0gMCApCiAgICAgICAgIHJl
dHVybiAwOwpAQCAtMjYzOCw2ICsyNjQyLDcgQEAgaW50IHNjaGVkdWxlX2NwdV9zd2l0Y2godW5z
aWduZWQgaW50IGNwdSwgc3RydWN0IGNwdXBvb2wgKmMpCiAgICAgc2NoZWRfZnJlZV91ZGF0YShv
bGRfb3BzLCB2cHJpdl9vbGQpOwogICAgIHNjaGVkX2ZyZWVfcGRhdGEob2xkX29wcywgcHByaXZf
b2xkLCBjcHUpOwogCisgICAgZ2V0X3NjaGVkX3JlcyhjcHUpLT5ncmFudWxhcml0eSA9IGNwdXBv
b2xfZ2V0X2dyYW51bGFyaXR5KGMpOwogICAgIGdldF9zY2hlZF9yZXMoY3B1KS0+Y3B1cG9vbCA9
IGM7CiAgICAgLyogV2hlbiBhIGNwdSBpcyBhZGRlZCB0byBhIHBvb2wsIHRyaWdnZXIgaXQgdG8g
Z28gcGljayB1cCBzb21lIHdvcmsgKi8KICAgICBpZiAoIGMgIT0gTlVMTCApCmRpZmYgLS1naXQg
YS94ZW4vaW5jbHVkZS94ZW4vc2NoZWQtaWYuaCBiL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5o
CmluZGV4IGU2NzUwNjEyOTAuLmY4ZjBmNDg0Y2IgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hl
bi9zY2hlZC1pZi5oCisrKyBiL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oCkBAIC0yNSw2ICsy
NSwxMyBAQCBleHRlcm4gaW50IHNjaGVkX3JhdGVsaW1pdF91czsKIC8qIFNjaGVkdWxpbmcgcmVz
b3VyY2UgbWFzay4gKi8KIGV4dGVybiBjb25zdCBjcHVtYXNrX3QgKnNjaGVkX3Jlc19tYXNrOwog
CisvKiBOdW1iZXIgb2YgdmNwdXMgcGVyIHN0cnVjdCBzY2hlZF91bml0LiAqLworZW51bSBzY2hl
ZF9ncmFuIHsKKyAgICBTQ0hFRF9HUkFOX2NwdSwKKyAgICBTQ0hFRF9HUkFOX2NvcmUsCisgICAg
U0NIRURfR1JBTl9zb2NrZXQKK307CisKIC8qCiAgKiBJbiBvcmRlciB0byBhbGxvdyBhIHNjaGVk
dWxlciB0byByZW1hcCB0aGUgbG9jay0+Y3B1IG1hcHBpbmcsCiAgKiB3ZSBoYXZlIGEgcGVyLWNw
dSBwb2ludGVyLCBhbG9uZyB3aXRoIGEgcHJlLWFsbG9jYXRlZCBzZXQgb2YKQEAgLTQ4LDYgKzU1
LDcgQEAgc3RydWN0IHNjaGVkX3Jlc291cmNlIHsKIAogICAgIC8qIENwdSB3aXRoIGxvd2VzdCBp
ZCBpbiBzY2hlZHVsaW5nIHJlc291cmNlLiAqLwogICAgIHVuc2lnbmVkIGludCAgICAgICAgbWFz
dGVyX2NwdTsKKyAgICB1bnNpZ25lZCBpbnQgICAgICAgIGdyYW51bGFyaXR5OwogICAgIGNvbnN0
IGNwdW1hc2tfdCAgICAqY3B1czsgICAgICAgICAgIC8qIGNwdXMgY292ZXJlZCBieSB0aGlzIHN0
cnVjdCAgICAgKi8KIH07CiAKQEAgLTU0Niw2ICs1NTQsNyBAQCBzdHJ1Y3QgY3B1cG9vbAogICAg
IHN0cnVjdCBjcHVwb29sICAgKm5leHQ7CiAgICAgc3RydWN0IHNjaGVkdWxlciAqc2NoZWQ7CiAg
ICAgYXRvbWljX3QgICAgICAgICByZWZjbnQ7CisgICAgZW51bSBzY2hlZF9ncmFuICBncmFuOwog
fTsKIAogI2RlZmluZSBjcHVwb29sX29ubGluZV9jcHVtYXNrKF9wb29sKSBcCkBAIC01NjEsNiAr
NTcwLDggQEAgc3RhdGljIGlubGluZSBjcHVtYXNrX3QgKmNwdXBvb2xfZG9tYWluX21hc3Rlcl9j
cHVtYXNrKGNvbnN0IHN0cnVjdCBkb21haW4gKmQpCiAgICAgcmV0dXJuIGQtPmNwdXBvb2wtPnJl
c192YWxpZDsKIH0KIAordW5zaWduZWQgaW50IGNwdXBvb2xfZ2V0X2dyYW51bGFyaXR5KGNvbnN0
IHN0cnVjdCBjcHVwb29sICpjKTsKKwogLyoKICAqIEhhcmQgYW5kIHNvZnQgYWZmaW5pdHkgbG9h
ZCBiYWxhbmNpbmcuCiAgKgotLSAKMi4xNi40CgoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlz
dHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xp
c3RpbmZvL3hlbi1kZXZlbA==

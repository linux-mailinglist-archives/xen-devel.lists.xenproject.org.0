Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 86D5E144552
	for <lists+xen-devel@lfdr.de>; Tue, 21 Jan 2020 20:46:58 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1itzQk-00074y-1N; Tue, 21 Jan 2020 19:43:18 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=bw8Q=3K=gmail.com=jandryuk@srs-us1.protection.inumbo.net>)
 id 1itzQi-00074q-MO
 for xen-devel@lists.xenproject.org; Tue, 21 Jan 2020 19:43:16 +0000
X-Inumbo-ID: 43a89336-3c86-11ea-8e9a-bc764e2007e4
Received: from mail-lf1-x141.google.com (unknown [2a00:1450:4864:20::141])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 43a89336-3c86-11ea-8e9a-bc764e2007e4;
 Tue, 21 Jan 2020 19:43:15 +0000 (UTC)
Received: by mail-lf1-x141.google.com with SMTP id z26so3285488lfg.13
 for <xen-devel@lists.xenproject.org>; Tue, 21 Jan 2020 11:43:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=bUjqJCLETajbH6fd1r/CQzJ0hAFPtC9kjDnRx78yzwo=;
 b=eow8c1xTN5Ktna0LUaR54TTzm1nvdb4dbXJtIVxY3uZapt5IohO8S7k2pW9V+DjRxG
 DWCk9YLwyIZm8ZyrYU7MEresbRd8MdC1SC9hcdbo118FOc/JeC9Kw6mbV351XMbwXkOw
 UCS3RuAL1JlsqI4UuGLir3mJ49o6bv34zJBdJEufCQQvfRk4XBUjCgvBHeumMgz7K3QT
 X5MP3Ba0PZMr+liK/lvwQ0VFbLRJJXqv7UXe3Piiuo23OOnYU89l3maRu3I2Y4MgNIcz
 E/XU0KOjJB/rFUOzvJP39CHULxbBsi4oUKPDLAiFf+k917b3PUw1/z9tnYPWWj+Qgm/g
 rW1w==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=bUjqJCLETajbH6fd1r/CQzJ0hAFPtC9kjDnRx78yzwo=;
 b=AW6Tleq+68WRu7YeLanffMJ7/LrnUHtDvWOutIzGSt+BBVIj7iKMnVwX+4kyp3A/Oj
 iCVlzwM5Apc/njPOYQ7a7tAS1rTEWvq2LisrBpt5IwoOkFQqZAHgTLOxJUC/TeS8vBqd
 +eeJc9YeEf8Ism3rucIqwO6n34Cmlv1nxEKZ8XEpP8SrSTaCsaZL1uTdY3gf4WVcNb9d
 sRuh0g0mTn5qrbyfdjPrYy4NXtUQB74mrWezqSdI1Hi9NIEsO8pMB/8VU/LAQbWARtPV
 Fc55rLi4flTvDz3x0rfThR05mRQ1/C0L9/5l281xd6nvJBdlqRFsSnI+pNOldb/Pq/Zg
 lhQQ==
X-Gm-Message-State: APjAAAUqpqASyvCQKVJ+jWI91HvRJSpI0SXBaue3/W4X/Ltu6Invs7jS
 Voxex94f+MsRM/CEAEZpCOE5h3/CI4VbbzO/aC8=
X-Google-Smtp-Source: APXvYqwZ5BWQTfHLTS8FEdwspeBde2XdpgNk6j90/LoRt4mNYS6kWY3oV6DJCHZXButeDT34oh6MjZh0C9xcxM7iLDc=
X-Received: by 2002:a19:22cc:: with SMTP id i195mr3263436lfi.148.1579635794130; 
 Tue, 21 Jan 2020 11:43:14 -0800 (PST)
MIME-Version: 1.0
References: <cover.f819645cd9f5cf7a6f692f9661cfb4e670a2cd08.1579055705.git-series.marmarek@invisiblethingslab.com>
 <ce51dd78fd7aa0856d160b2d94c82f68dd4e7056.1579055705.git-series.marmarek@invisiblethingslab.com>
In-Reply-To: <ce51dd78fd7aa0856d160b2d94c82f68dd4e7056.1579055705.git-series.marmarek@invisiblethingslab.com>
From: Jason Andryuk <jandryuk@gmail.com>
Date: Tue, 21 Jan 2020 14:43:03 -0500
Message-ID: <CAKf6xpuQ1iggu6Lz8bcAWpGL732bXf3qwO9HYSd+8ScsNN2wnA@mail.gmail.com>
To: =?UTF-8?Q?Marek_Marczykowski=2DG=C3=B3recki?=
 <marmarek@invisiblethingslab.com>
Subject: Re: [Xen-devel] [PATCH v4 11/16] tools: add simple
 vchan-socket-proxy
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 xen-devel <xen-devel@lists.xenproject.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gVHVlLCBKYW4gMTQsIDIwMjAgYXQgOTo0MiBQTSBNYXJlayBNYXJjenlrb3dza2ktR8OzcmVj
a2kKPG1hcm1hcmVrQGludmlzaWJsZXRoaW5nc2xhYi5jb20+IHdyb3RlOgo+Cj4gQWRkIGEgc2lt
cGxlIHByb3h5IGZvciB0dW5uZWxpbmcgc29ja2V0IGNvbm5lY3Rpb24gb3ZlciB2Y2hhbi4gVGhp
cyBpcwo+IGJhc2VkIG9uIGV4aXN0aW5nIHZjaGFuLW5vZGUqIGFwcGxpY2F0aW9ucywgYnV0IGV4
dGVuZGVkIHdpdGggc29ja2V0Cj4gc3VwcG9ydC4gdmNoYW4tc29ja2V0LXByb3h5IHNlcnZlcyBi
b3RoIGFzIGEgY2xpZW50IGFuZCBhcyBhIHNlcnZlciwKPiBkZXBlbmRpbmcgb24gcGFyYW1ldGVy
cy4gSXQgY2FuIGJlIHVzZWQgdG8gdHJhbnNwYXJlbnRseSBjb21tdW5pY2F0ZQo+IHdpdGggYW4g
YXBwbGljYXRpb24gaW4gYW5vdGhlciBkb21pYW4gdGhhdCBub3JtYWxseSBleHBvc2UgVU5JWCBz
b2NrZXQKPiBpbnRlcmZhY2UuIFNwZWNpZmljYWxseSwgaXQncyB3cml0dGVuIHRvIGNvbW11bmlj
YXRlIHdpdGggcWVtdSBydW5uaW5nCj4gd2l0aGluIHN0dWJkb20uCj4KPiBTZXJ2ZXIgbW9kZSBs
aXN0ZW5zIGZvciB2Y2hhbiBjb25uZWN0aW9ucyBhbmQgd2hlbiBvbmUgaXMgb3BlbmVkLAo+IGNv
bm5lY3RzIHRvIGEgcG9pbnRlZCBVTklYIHNvY2tldC4gIENsaWVudCBtb2RlIGxpc3RlbnMgb24g
VU5JWAo+IHNvY2tldCBhbmQgd2hlbiBzb21lb25lIGNvbm5lY3RzLCBvcGVucyBhIHZjaGFuIGNv
bm5lY3Rpb24uICBPbmx5Cj4gYSBzaW5nbGUgY29ubmVjdGlvbiBhdCBhIHRpbWUgaXMgc3VwcG9y
dGVkLgo+Cj4gQWRkaXRpb25hbGx5LCBzb2NrZXQgY2FuIGJlIHByb3ZpZGVkIGFzIGEgbnVtYmVy
IC0gaW4gd2hpY2ggY2FzZSBpdCdzCj4gaW50ZXJwcmV0ZWQgYXMgYWxyZWFkeSBvcGVuIEZEIChp
biBjYXNlIG9mIFVOSVggbGlzdGVuaW5nIHNvY2tldCAtCj4gbGlzdGVuKCkgbmVlZHMgdG8gYmUg
YWxyZWFkeSBjYWxsZWQpLiBPciAiLSIgbWVhbmluZyBzdGRpbi9zdGRvdXQgLSBpbgo+IHdoaWNo
IGNhc2UgaXQgaXMgcmVkdWNlZCB0byB2Y2hhbi1ub2RlMiBmdW5jdGlvbmFsaXR5Lgo+Cj4gRXhh
bXBsZSB1c2FnZToKPgo+IDEuIChpbiBkb20wKSB2Y2hhbi1zb2NrZXQtcHJveHkgLS1tb2RlPWNs
aWVudCA8RE9NSUQ+Cj4gICAgIC9sb2NhbC9kb21haW4vPERPTUlEPi9kYXRhL3ZjaGFuLzEyMzQg
L3J1bi9xZW11LihET01JRCkKPgo+IDIuIChpbiBET01JRCkgdmNoYW4tc29ja2V0LXByb3h5IC0t
bW9kZT1zZXJ2ZXIgMAo+ICAgIC9sb2NhbC9kb21haW4vPERPTUlEPi9kYXRhL3ZjaGFuLzEyMzQg
L3J1bi9xZW11LihET01JRCkKPgo+IFRoaXMgd2lsbCBsaXN0ZW4gb24gL3J1bi9xZW11LihET01J
RCkgaW4gZG9tMCBhbmQgd2hlbmV2ZXIgY29ubmVjdGlvbiBpcwo+IG1hZGUsIGl0IHdpbGwgY29u
bmVjdCB0byBET01JRCwgd2hlcmUgc2VydmVyIHByb2Nlc3Mgd2lsbCBjb25uZWN0IHRvCj4gL3J1
bi9xZW11LihET01JRCkgdGhlcmUuIFdoZW4gY2xpZW50IGRpc2Nvbm5lY3RzLCB2Y2hhbiBjb25u
ZWN0aW9uIGlzCj4gdGVybWluYXRlZCBhbmQgc2VydmVyIHZjaGFuLXNvY2tldC1wcm94eSBwcm9j
ZXNzIGFsc28gZGlzY29ubmVjdHMgZnJvbQo+IHFlbXUuCj4KPiBTaWduZWQtb2ZmLWJ5OiBNYXJl
ayBNYXJjenlrb3dza2ktR8OzcmVja2kgPG1hcm1hcmVrQGludmlzaWJsZXRoaW5nc2xhYi5jb20+
Cj4gLS0tCgpMb29rcyBnb29kLiAgQSBmZXcgdHlwb3MgYW5kIHN0cmluZyB1cGRhdGVzIGJlbG93
LgoKUmV2aWV3ZWQtYnk6IEphc29uIEFuZHJ5dWsgPGphbmRyeXVrQGdtYWlsLmNvbT4KCjxzbmlw
PgoKPiBkaWZmIC0tZ2l0IGEvdG9vbHMvbGlidmNoYW4vdmNoYW4tc29ja2V0LXByb3h5LmMgYi90
b29scy9saWJ2Y2hhbi92Y2hhbi1zb2NrZXQtcHJveHkuYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0
Cj4gaW5kZXggMDAwMDAwMC4uNmI0YWUwOQo+IC0tLSAvZGV2L251bGwKPiArKysgYi90b29scy9s
aWJ2Y2hhbi92Y2hhbi1zb2NrZXQtcHJveHkuYwoKPHNuaXA+Cgo+ICtzdGF0aWMgdm9pZCB1c2Fn
ZShjaGFyKiogYXJndikKPiArewo+ICsgICAgZnByaW50ZihzdGRlcnIsICJ1c2FnZTpcbiIKPiAr
ICAgICAgICAiXHQlcyBbb3B0aW9uc10gZG9tYWluaWQgbm9kZXBhdGggW3NvY2tldC1wYXRofGZp
bGUtbm98LV1cbiIKPiArICAgICAgICAiXG4iCj4gKyAgICAgICAgIm9wdGlvbnM6XG4iCj4gKyAg
ICAgICAgIlx0LW0sIC0tbW9kZT1jbGllbnR8c2VydmVyIC0gdmNoYW4gY29ubmVjdGlvbiBtb2Rl
XG4iCgpBZGQgIihjbGllbnQgYnkgZGVmYXVsdCkiPwoKPiArICAgICAgICAiXHQtbSwgLS1zdGF0
ZS1wYXRoPXBhdGggLSB4ZW5zdG9yZSBwYXRoIHdoZXJlIHdyaXRlIFwicnVubmluZ1wiIHRvIGF0
IHN0YXJ0dXBcbiIKCi1zIGlzIHRoZSBzaG9ydCBvcHRpb24gaGVyZS4KCj4gKyAgICAgICAgIlx0
LXYsIC0tdmVyYm9zZSAtIHZlcmJvc2UgbG9nZ2luZ1xuIgo+ICsgICAgICAgICJcbiIKPiArICAg
ICAgICAiY2xpZW50OiBjbGllbnQgb2YgYSB2Y2hhbiBjb25uZWN0aW9uLCBmb3VydGggcGFyYW1l
dGVyIGNhbiBiZTpcbiIKPiArICAgICAgICAiXHRzb2NrZXQtcGF0aDogbGlzdGVuIG9uIGEgVU5J
WCBzb2NrZXQgYXQgdGhpcyBwYXRoIGFuZCBjb25uZWN0IHRvIHZjaGFuXG4iCj4gKyAgICAgICAg
Ilx0ICB3aGVuZXZlciBuZXcgY29ubmVjdGlvbiBpcyBhY2NlcHRlZDtcbiIKPiArICAgICAgICAi
XHQgIGhhbmRsZSBtdWx0aXBsZSBfc3Vic2VxdWVudF8gY29ubmVjdGlvbnMsIHVudGlsIHRlcm1p
bmF0ZWRcbiIKPiArICAgICAgICAiXHRmaWxlLW5vOiBleGNlcHQgb3BlbiBGRCBvZiBhIHNvY2tl
dCBpbiBsaXN0ZW4gbW9kZTsgb3RoZXJ3aXNlIHNpbWlsYXIgdG8gc29ja2V0LXBhdGhcbiIKCk1h
bnkgb2YgdGhlc2UgbGluZXMgYXJlIGxvbmcgYW5kIGhhcmQgdG8gcmVhZCBvbiA4MCBjb2x1bW4g
dGVybWluYWxzLgoKPiArICAgICAgICAiXHQtOiBvcGVuIHZjaGFuIGNvbm5lY3Rpb24gaW1tZWRp
YXRlbHkgYW5kIHBhc3MgdGhlIGRhdGEgZnJvbSBzdGRpbi9zdGRvdXQ7XG4iCj4gKyAgICAgICAg
Ilx0ICB0ZXJtaW5hdGUgd2hlbiB2Y2hhbiBjb25uZWN0aW9uIGlzIGNsb3NlZFxuIgo+ICsgICAg
ICAgICJzZXJ2ZXI6IHNlcnZlciBvZiBhIHZjaGFuIGNvbm5lY3Rpb24sIGZvdXJ0aCBwYXJhbWV0
ZXIgY2FuIGJlOlxuIgo+ICsgICAgICAgICJcdHNvY2tldC1wYXRoOiBjb25uZWN0IHRvIHRoaXMg
VU5JWCBzb2NrZXQgd2hlbiBuZXcgdmNoYW4gY29ubmVjdGlvbiBpcyBhY2NlcHRlZFxuIgo+ICsg
ICAgICAgICJcdCAgaGFuZGxlIG11bHRpcGxlIF9zdWJzZXF1ZW50XyBjb25uZWN0aW9ucywgdW50
aWwgdGVybWluYXRlZFxuIgo+ICsgICAgICAgICJcdGZpbGUtbm86IHBhc3MgZGF0YSB0by9mcm9t
IHRoaXMgRkQ7IHRlcm1pbmF0ZSB3aGVuIHZjaGFuIGNvbm5lY3Rpb24gaXMgY2xvc2VkXG4iCj4g
KyAgICAgICAgIlx0LTogcGFzcyBkYXRhIHRvL2Zyb20gc3RkaW4vc3Rkb3V0OyB0ZXJtaW5hdGF0
ZSB3aGVuIHZjaGFuIGNvbm5lY3Rpb24gaXMgY2xvc2VkXG4iLAoKcy90ZXJtaW5hdGF0ZS90ZXJt
aW5hdGUvCgo+ICsgICAgICAgIGFyZ3ZbMF0pOwo+ICsgICAgZXhpdCgxKTsKPiArfQo+ICsKPiAr
I2RlZmluZSBCVUZTSVpFIDgxOTIKPiArY2hhciBpbmJ1ZltCVUZTSVpFXTsKPiArY2hhciBvdXRi
dWZbQlVGU0laRV07Cj4gK2ludCBpbnNpeiA9IDA7Cj4gK2ludCBvdXRzaXogPSAwOwo+ICtpbnQg
dmVyYm9zZSA9IDA7Cj4gKwo+ICtzdGF0aWMgdm9pZCB2Y2hhbl93cihzdHJ1Y3QgbGlieGVudmNo
YW4gKmN0cmwpIHsKPiArICAgIGludCByZXQ7Cj4gKwo+ICsgICAgaWYgKCFpbnNpeikKPiArICAg
ICAgICByZXR1cm47Cj4gKyAgICByZXQgPSBsaWJ4ZW52Y2hhbl93cml0ZShjdHJsLCBpbmJ1Ziwg
aW5zaXopOwo+ICsgICAgaWYgKHJldCA8IDApIHsKPiArICAgICAgICBmcHJpbnRmKHN0ZGVyciwg
InZjaGFuIHdyaXRlIGZhaWxlZFxuIik7Cj4gKyAgICAgICAgZXhpdCgxKTsKPiArICAgIH0KPiAr
ICAgIGlmICh2ZXJib3NlKQo+ICsgICAgICAgIGZwcmludGYoc3RkZXJyLCAid3JpdHRlbiAlZCBi
eXRlcyB0byB2Y2hhblxuIiwgcmV0KTsKCnMvd3JpdHRlbi93cm90ZS8KCj4gKyAgICBpZiAocmV0
ID4gMCkgewo+ICsgICAgICAgIGluc2l6IC09IHJldDsKPiArICAgICAgICBtZW1tb3ZlKGluYnVm
LCBpbmJ1ZiArIHJldCwgaW5zaXopOwo+ICsgICAgfQo+ICt9Cj4gKwoKPHNuaXA+Cgo+ICsKPiAr
aW50IGRhdGFfbG9vcChzdHJ1Y3QgbGlieGVudmNoYW4gKmN0cmwsIGludCBpbnB1dF9mZCwgaW50
IG91dHB1dF9mZCkKPiArewo+ICsgICAgaW50IHJldDsKPiArICAgIGludCBsaWJ4ZW52Y2hhbl9m
ZDsKPiArICAgIGludCBtYXhfZmQ7Cj4gKwo+ICsgICAgbGlieGVudmNoYW5fZmQgPSBsaWJ4ZW52
Y2hhbl9mZF9mb3Jfc2VsZWN0KGN0cmwpOwo+ICsgICAgZm9yICg7Oykgewo+ICsgICAgICAgIGZk
X3NldCByZmRzOwo+ICsgICAgICAgIGZkX3NldCB3ZmRzOwo+ICsgICAgICAgIEZEX1pFUk8oJnJm
ZHMpOwo+ICsgICAgICAgIEZEX1pFUk8oJndmZHMpOwo+ICsKPiArICAgICAgICBtYXhfZmQgPSAt
MTsKPiArICAgICAgICBpZiAoaW5wdXRfZmQgIT0gLTEgJiYgaW5zaXogIT0gQlVGU0laRSkgewo+
ICsgICAgICAgICAgICBGRF9TRVQoaW5wdXRfZmQsICZyZmRzKTsKPiArICAgICAgICAgICAgaWYg
KGlucHV0X2ZkID4gbWF4X2ZkKQo+ICsgICAgICAgICAgICAgICAgbWF4X2ZkID0gaW5wdXRfZmQ7
Cj4gKyAgICAgICAgfQo+ICsgICAgICAgIGlmIChvdXRwdXRfZmQgIT0gLTEgJiYgb3V0c2l6KSB7
Cj4gKyAgICAgICAgICAgIEZEX1NFVChvdXRwdXRfZmQsICZ3ZmRzKTsKPiArICAgICAgICAgICAg
aWYgKG91dHB1dF9mZCA+IG1heF9mZCkKPiArICAgICAgICAgICAgICAgIG1heF9mZCA9IG91dHB1
dF9mZDsKPiArICAgICAgICB9Cj4gKyAgICAgICAgRkRfU0VUKGxpYnhlbnZjaGFuX2ZkLCAmcmZk
cyk7Cj4gKyAgICAgICAgaWYgKGxpYnhlbnZjaGFuX2ZkID4gbWF4X2ZkKQo+ICsgICAgICAgICAg
ICBtYXhfZmQgPSBsaWJ4ZW52Y2hhbl9mZDsKPiArICAgICAgICByZXQgPSBzZWxlY3QobWF4X2Zk
ICsgMSwgJnJmZHMsICZ3ZmRzLCBOVUxMLCBOVUxMKTsKPiArICAgICAgICBpZiAocmV0IDwgMCkg
ewo+ICsgICAgICAgICAgICBwZXJyb3IoInNlbGVjdCIpOwo+ICsgICAgICAgICAgICBleGl0KDEp
Owo+ICsgICAgICAgIH0KPiArICAgICAgICBpZiAoRkRfSVNTRVQobGlieGVudmNoYW5fZmQsICZy
ZmRzKSkgewo+ICsgICAgICAgICAgICBsaWJ4ZW52Y2hhbl93YWl0KGN0cmwpOwo+ICsgICAgICAg
ICAgICBpZiAoIWxpYnhlbnZjaGFuX2lzX29wZW4oY3RybCkpIHsKPiArICAgICAgICAgICAgICAg
IGlmICh2ZXJib3NlKQo+ICsgICAgICAgICAgICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAidmNo
YW4gY2xpZW50IGRpc2Nvbm5lY3RlZFxuIik7Cj4gKyAgICAgICAgICAgICAgICB3aGlsZSAob3V0
c2l6KQo+ICsgICAgICAgICAgICAgICAgICAgIHNvY2tldF93cihvdXRwdXRfZmQpOwo+ICsgICAg
ICAgICAgICAgICAgY2xvc2Uob3V0cHV0X2ZkKTsKPiArICAgICAgICAgICAgICAgIGNsb3NlKGlu
cHV0X2ZkKTsKPiArICAgICAgICAgICAgICAgIGRpc2NhcmRfYnVmZmVycyhjdHJsKTsKPiArICAg
ICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICB9Cj4gKyAgICAgICAgICAgIHZjaGFu
X3dyKGN0cmwpOwo+ICsgICAgICAgIH0KPiArCj4gKyAgICAgICAgLyogc29ja2V0X2ZkIGd1YXJh
bnRlZWQgdG8gYmUgIT0gLTEgKi8KCk9sZCBjb21tZW50PwoKPiArICAgICAgICBpZiAoRkRfSVNT
RVQoaW5wdXRfZmQsICZyZmRzKSkgewo+ICsgICAgICAgICAgICByZXQgPSByZWFkKGlucHV0X2Zk
LCBpbmJ1ZiArIGluc2l6LCBCVUZTSVpFIC0gaW5zaXopOwo+ICsgICAgICAgICAgICBpZiAocmV0
IDwgMCAmJiBlcnJubyAhPSBFQUdBSU4pCj4gKyAgICAgICAgICAgICAgICBleGl0KDEpOwo+ICsg
ICAgICAgICAgICBpZiAodmVyYm9zZSkKPiArICAgICAgICAgICAgICAgIGZwcmludGYoc3RkZXJy
LCAiZnJvbS11bml4OiAlLipzXG4iLCByZXQsIGluYnVmICsgaW5zaXopOwo+ICsgICAgICAgICAg
ICBpZiAocmV0ID09IDApIHsKPiArICAgICAgICAgICAgICAgIC8qIEVPRiBvbiBzb2NrZXQsIHdy
aXRlIGV2ZXJ5dGhpbmcgaW4gdGhlIGJ1ZmZlciBhbmQgY2xvc2UgdGhlCj4gKyAgICAgICAgICAg
ICAgICAgKiBzb2NrZXQgKi8KCkNoYW5nZSB0byBzb2NrZXQgdG8gaW5wdXRfZmQ/Cgo+ICsgICAg
ICAgICAgICAgICAgd2hpbGUgKGluc2l6KSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgdmNoYW5f
d3IoY3RybCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgbGlieGVudmNoYW5fd2FpdChjdHJsKTsK
PiArICAgICAgICAgICAgICAgIH0KPiArICAgICAgICAgICAgICAgIGNsb3NlKGlucHV0X2ZkKTsK
PiArICAgICAgICAgICAgICAgIGlucHV0X2ZkID0gLTE7Cj4gKyAgICAgICAgICAgICAgICAvKiBU
T0RPOiBtYXliZSBzaWduYWwgdGhlIHZjaGFuIGNsaWVudCBzb21laG93PyAqLwo+ICsgICAgICAg
ICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICAgICAgIH0KPiArICAgICAgICAgICAgaWYgKHJldCkK
PiArICAgICAgICAgICAgICAgIGluc2l6ICs9IHJldDsKPiArICAgICAgICAgICAgdmNoYW5fd3Io
Y3RybCk7Cj4gKyAgICAgICAgfQo+ICsgICAgICAgIGlmIChGRF9JU1NFVChvdXRwdXRfZmQsICZ3
ZmRzKSkKPiArICAgICAgICAgICAgc29ja2V0X3dyKG91dHB1dF9mZCk7Cj4gKyAgICAgICAgd2hp
bGUgKGxpYnhlbnZjaGFuX2RhdGFfcmVhZHkoY3RybCkgJiYgb3V0c2l6IDwgQlVGU0laRSkgewo+
ICsgICAgICAgICAgICByZXQgPSBsaWJ4ZW52Y2hhbl9yZWFkKGN0cmwsIG91dGJ1ZiArIG91dHNp
eiwgQlVGU0laRSAtIG91dHNpeik7Cj4gKyAgICAgICAgICAgIGlmIChyZXQgPCAwKQo+ICsgICAg
ICAgICAgICAgICAgZXhpdCgxKTsKPiArICAgICAgICAgICAgaWYgKHZlcmJvc2UpCj4gKyAgICAg
ICAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgImZyb20tdmNoYW46ICUuKnNcbiIsIHJldCwgb3V0
YnVmICsgb3V0c2l6KTsKPiArICAgICAgICAgICAgb3V0c2l6ICs9IHJldDsKPiArICAgICAgICAg
ICAgc29ja2V0X3dyKG91dHB1dF9mZCk7Cj4gKyAgICAgICAgfQo+ICsgICAgfQo+ICsgICAgcmV0
dXJuIDA7Cj4gK30KPiArCgo8c25pcD4KCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhl
bnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5m
by94ZW4tZGV2ZWw=

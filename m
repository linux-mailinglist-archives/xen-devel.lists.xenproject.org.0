Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 6672670BBF
	for <lists+xen-devel@lfdr.de>; Mon, 22 Jul 2019 23:42:16 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hpg2p-0002zY-LF; Mon, 22 Jul 2019 21:40:31 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=SK1b=VT=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hpg2n-0002v8-DW
 for xen-devel@lists.xenproject.org; Mon, 22 Jul 2019 21:40:29 +0000
X-Inumbo-ID: 5205c1d0-acc9-11e9-8e49-6f0dfec89258
Received: from foss.arm.com (unknown [217.140.110.172])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTP
 id 5205c1d0-acc9-11e9-8e49-6f0dfec89258;
 Mon, 22 Jul 2019 21:40:27 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 7257B1509;
 Mon, 22 Jul 2019 14:40:27 -0700 (PDT)
Received: from e108454-lin.cambridge.arm.com (e108454-lin.cambridge.arm.com
 [10.1.196.50])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id C08C13F71F;
 Mon, 22 Jul 2019 14:40:26 -0700 (PDT)
From: Julien Grall <julien.grall@arm.com>
To: xen-devel@lists.xenproject.org
Date: Mon, 22 Jul 2019 22:39:47 +0100
Message-Id: <20190722213958.5761-25-julien.grall@arm.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20190722213958.5761-1-julien.grall@arm.com>
References: <20190722213958.5761-1-julien.grall@arm.com>
Subject: [Xen-devel] [PATCH v2 24/35] xen/arm32: head: Introduce distinct
 paths for the boot CPU and secondary CPUs
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Julien Grall <julien.grall@arm.com>,
 Stefano Stabellini <sstabellini@kernel.org>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlIGJvb3QgY29kZSBpcyBjdXJyZW50bHkgcXVpdGUgZGlmZmljdWx0IHRvIGdvIHRocm91Z2gg
YmVjYXVzZSBvZiB0aGUKbGFjayBvZiBkb2N1bWVudGF0aW9uIGFuZCBhIG51bWJlciBvZiBpbmRp
cmVjdGlvbiB0byBhdm9pZCBleGVjdXRpbmcKc29tZSBwYXRoIGluIGVpdGhlciB0aGUgYm9vdCBD
UFUgb3Igc2Vjb25kYXJ5IENQVXMuCgpJbiBhbiBhdHRlbXB0IHRvIG1ha2UgdGhlIGJvb3QgY29k
ZSBlYXNpZXIgdG8gZm9sbG93LCBlYWNoIHBhcnRzIG9mIHRoZQpib290IGFyZSBub3cgaW4gc2Vw
YXJhdGUgZnVuY3Rpb25zLiBGdXJ0aGVybW9yZSwgdGhlIHBhdGhzIGZvciB0aGUgYm9vdApDUFUg
YW5kIHNlY29uZGFyeSBDUFVzIGFyZSBub3cgZGlzdGluY3QgYW5kIGZvciBub3cgd2lsbCBjYWxs
IGVhY2gKZnVuY3Rpb25zLgoKRm9sbG93LXVwcyB3aWxsIHJlbW92ZSB1bm5lY2Vzc2FyeSBjYWxs
cyBhbmQgZG8gZnVydGhlciBpbXByb3ZlbWVudAooc3VjaCBhcyBhZGRpbmcgZG9jdW1lbnRhdGlv
biBhbmQgcmVzaHVmZmxpbmcpLgoKTm90ZSB0aGF0IHRoZSBzd2l0Y2ggZnJvbSB1c2luZyB0aGUg
SUQgbWFwcGluZyB0byB0aGUgcnVudGltZSBtYXBwaW5nCmlzIGR1cGxpY2F0ZWQgZm9yIGVhY2gg
cGF0aC4gVGhpcyBpcyBiZWNhdXNlIGluIHRoZSBmdXR1cmUgd2Ugd2lsbCBuZWVkCnRvIHN0YXkg
bG9uZ2VyIGluIHRoZSBJRCBtYXBwaW5nIGZvciB0aGUgYm9vdCBDUFUuCgpMYXN0bHksIGl0IGlz
IG5vdyByZXF1aXJlZCB0byBzYXZlIGxyIGluIGNwdV9pbml0KCkgYmVjYXVzd2UgdGhlCmZ1bmN0
aW9uIHdpbGwgY2FsbCBvdGhlciBmdW5jdGlvbnMgYW5kIHRoZXJlZm9yZSBjbG9iYmVyIGxyLgoK
U2lnbmVkLW9mZi1ieTogSnVsaWVuIEdyYWxsIDxqdWxpZW4uZ3JhbGxAYXJtLmNvbT4KCi0tLQog
ICAgQ2hhbmdlcyBpbiB2MjoKICAgICAgICAtIFBhdGNoIGFkZGVkCi0tLQogeGVuL2FyY2gvYXJt
L2FybTMyL2hlYWQuUyB8IDY0ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
Ky0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgNTMgaW5zZXJ0aW9ucygrKSwgMTEgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL2FybTMyL2hlYWQuUyBiL3hlbi9hcmNoL2Fy
bS9hcm0zMi9oZWFkLlMKaW5kZXggYmJjZmRjZDM1MS4uMTM3OTNlODVkOCAxMDA2NDQKLS0tIGEv
eGVuL2FyY2gvYXJtL2FybTMyL2hlYWQuUworKysgYi94ZW4vYXJjaC9hcm0vYXJtMzIvaGVhZC5T
CkBAIC0xNDgsNyArMTQ4LDE5IEBAIHBhc3RfekltYWdlOgogCiAgICAgICAgIG1vdiAgIHIxMiwg
IzAgICAgICAgICAgICAgICAgLyogcjEyIDo9IGlzX3NlY29uZGFyeV9jcHUgKi8KIAotICAgICAg
ICBiICAgICBjb21tb25fc3RhcnQKKyAgICAgICAgYmwgICAgY2hlY2tfY3B1X21vZGUKKyAgICAg
ICAgYmwgICAgemVyb19ic3MKKyAgICAgICAgYmwgICAgY3B1X2luaXQKKyAgICAgICAgYmwgICAg
Y3JlYXRlX3BhZ2VfdGFibGVzCisgICAgICAgIGJsICAgIGVuYWJsZV9tbXUKKworICAgICAgICAv
KiBXZSBhcmUgc3RpbGwgaW4gdGhlIElEIG1hcC4gSnVtcCB0byB0aGUgcnVudGltZSBWaXJ0dWFs
IEFkZHJlc3MgKi8KKyAgICAgICAgbGRyICAgcjAsID1wcmltYXJ5X3N3aXRjaGVkCisgICAgICAg
IG1vdiAgIHBjLCByMAorcHJpbWFyeV9zd2l0Y2hlZDoKKyAgICAgICAgYmwgICAgc2V0dXBfZml4
bWFwCisgICAgICAgIGIgICAgIGxhdW5jaAorRU5EUFJPQyhzdGFydCkKIAogR0xPQkFMKGluaXRf
c2Vjb25kYXJ5KQogICAgICAgICBjcHNpZCBhaWYgICAgICAgICAgICAgICAgICAgIC8qIERpc2Fi
bGUgYWxsIGludGVycnVwdHMgKi8KQEAgLTE3OSw4ICsxOTEsMjEgQEAgR0xPQkFMKGluaXRfc2Vj
b25kYXJ5KQogICAgICAgICBwcmludF9yZWcgcjcKICAgICAgICAgUFJJTlQoIiBib290aW5nIC1c
clxuIikKICNlbmRpZgotCi1jb21tb25fc3RhcnQ6CisgICAgICAgIGJsICAgIGNoZWNrX2NwdV9t
b2RlCisgICAgICAgIGJsICAgIHplcm9fYnNzCisgICAgICAgIGJsICAgIGNwdV9pbml0CisgICAg
ICAgIGJsICAgIGNyZWF0ZV9wYWdlX3RhYmxlcworICAgICAgICBibCAgICBlbmFibGVfbW11CisK
KyAgICAgICAgLyogV2UgYXJlIHN0aWxsIGluIHRoZSBJRCBtYXAuIEp1bXAgdG8gdGhlIHJ1bnRp
bWUgVmlydHVhbCBBZGRyZXNzLiAqLworICAgICAgICBsZHIgICByMCwgPXNlY29uZGFyeV9zd2l0
Y2hlZAorICAgICAgICBtb3YgICBwYywgcjAKK3NlY29uZGFyeV9zd2l0Y2hlZDoKKyAgICAgICAg
YmwgICAgc2V0dXBfZml4bWFwCisgICAgICAgIGIgICAgIGxhdW5jaAorRU5EUFJPQyhpbml0X3Nl
Y29uZGFyeSkKKworY2hlY2tfY3B1X21vZGU6CiAgICAgICAgIC8qIENoZWNrIHRoYXQgdGhpcyBD
UFUgaGFzIEh5cCBtb2RlICovCiAgICAgICAgIG1yYyAgIENQMzIocjAsIElEX1BGUjEpCiAgICAg
ICAgIGFuZCAgIHIwLCByMCwgIzB4ZjAwMCAgICAgICAgLyogQml0cyAxMi0xNSBkZWZpbmUgdmly
dCBleHRlbnNpb25zICovCkBAIC0yMDIsNyArMjI3LDEwIEBAIGNvbW1vbl9zdGFydDoKICAgICAg
ICAgYiAgICAgZmFpbAogCiBoeXA6ICAgIFBSSU5UKCItIFhlbiBzdGFydGluZyBpbiBIeXAgbW9k
ZSAtXHJcbiIpCisgICAgICAgIG1vdiAgIHBjLCBscgorRU5EUFJPQyhjaGVja19jcHVfbW9kZSkK
IAoremVyb19ic3M6CiAgICAgICAgIC8qIFplcm8gQlNTIE9uIHRoZSBib290IENQVSB0byBhdm9p
ZCBuYXN0eSBzdXJwcmlzZXMgKi8KICAgICAgICAgdGVxICAgcjEyLCAjMAogICAgICAgICBibmUg
ICBza2lwX2JzcwpAQCAtMjE5LDggKzI0NywxNCBAQCBoeXA6ICAgIFBSSU5UKCItIFhlbiBzdGFy
dGluZyBpbiBIeXAgbW9kZSAtXHJcbiIpCiAgICAgICAgIGJsbyAgIDFiCiAKIHNraXBfYnNzOgor
ICAgICAgICBtb3YgICBwYywgbHIKK0VORFBST0MoemVyb19ic3MpCisKK2NwdV9pbml0OgogICAg
ICAgICBQUklOVCgiLSBTZXR0aW5nIHVwIGNvbnRyb2wgcmVnaXN0ZXJzIC1cclxuIikKIAorICAg
ICAgICBtb3YgICByNSwgbHIJCQkgICAgICAgICAgICAvKiByNSA6PSByZXR1cm4gYWRkcmVzcyAq
LworCiAgICAgICAgIC8qIEdldCBwcm9jZXNzb3Igc3BlY2lmaWMgcHJvYyBpbmZvIGludG8gcjEg
Ki8KICAgICAgICAgYmwgICAgX19sb29rdXBfcHJvY2Vzc29yX3R5cGUKICAgICAgICAgdGVxICAg
cjEsICMwCkBAIC0yMzEsNyArMjY1LDYgQEAgc2tpcF9ic3M6CiAgICAgICAgIFBSSU5UKCIgLVxy
XG4iKQogICAgICAgICBiICAgICBmYWlsCiAxOgotCiAgICAgICAgIC8qIEp1bXAgdG8gY3B1X2lu
aXQgKi8KICAgICAgICAgbGRyICAgcjEsIFtyMSwgI1BST0NJTkZPX2NwdV9pbml0XSAgLyogcjEg
Oj0gdmFkZHIoaW5pdCBmdW5jKSAqLwogICAgICAgICBhZHIgICBsciwgY3B1X2luaXRfZG9uZSAg
ICAgICAgICAgICAvKiBTYXZlIHJldHVybiBhZGRyZXNzICovCkBAIC0yNTYsNiArMjg5LDEwIEBA
IGNwdV9pbml0X2RvbmU6CiAgICAgICAgIGxkciAgIHIwLCA9SFNDVExSX1NFVAogICAgICAgICBt
Y3IgICBDUDMyKHIwLCBIU0NUTFIpCiAKKyAgICAgICAgbW92ICAgcGMsIHI1ICAgICAgICAgICAg
ICAgICAgICAgICAgLyogUmV0dXJuIGFkZHJlc3MgaXMgaW4gcjUgKi8KK0VORFBST0MoY3B1X2lu
aXQpCisKK2NyZWF0ZV9wYWdlX3RhYmxlczoKICAgICAgICAgLyoKICAgICAgICAgICogUmVidWls
ZCB0aGUgYm9vdCBwYWdldGFibGUncyBmaXJzdC1sZXZlbCBlbnRyaWVzLiBUaGUgc3RydWN0dXJl
CiAgICAgICAgICAqIGlzIGRlc2NyaWJlZCBpbiBtbS5jLgpAQCAtMzU5LDE1ICszOTYsMTYgQEAg
Y3B1X2luaXRfZG9uZToKICAgICAgICAgLyogYm9vdCBwYWdldGFibGUgc2V0dXAgY29tcGxldGUg
Ki8KIAogICAgICAgICBjbXAgICByNiwgIzEgICAgICAgICAgICAgICAgLyogRGlkIHdlIG1hbmFn
ZSB0byBjcmVhdGUgYW4gaWRlbnRpdHkgbWFwcGluZyA/ICovCi0gICAgICAgIGJlcSAgIDFmCisg
ICAgICAgIG1vdmVxIHBjLCBscgogICAgICAgICBQUklOVCgiVW5hYmxlIHRvIGJ1aWxkIGJvb3Qg
cGFnZSB0YWJsZXMgLSBGYWlsZWQgdG8gaWRlbnRpdHkgbWFwIFhlbi5cclxuIikKICAgICAgICAg
YiAgICAgZmFpbAogdmlydHBoeXNfY2xhc2g6CiAgICAgICAgIC8qIElkZW50aXR5IG1hcCBjbGFz
aGVzIHdpdGggYm9vdF90aGlyZCwgd2hpY2ggd2UgY2Fubm90IGhhbmRsZSB5ZXQgKi8KICAgICAg
ICAgUFJJTlQoIi0gVW5hYmxlIHRvIGJ1aWxkIGJvb3QgcGFnZSB0YWJsZXMgLSB2aXJ0IGFuZCBw
aHlzIGFkZHJlc3NlcyBjbGFzaC4gLVxyXG4iKQogICAgICAgICBiICAgICBmYWlsCitFTkRQUk9D
KGNyZWF0ZV9wYWdlX3RhYmxlcykKIAotMToKK2VuYWJsZV9tbXU6CiAgICAgICAgIFBSSU5UKCIt
IFR1cm5pbmcgb24gcGFnaW5nIC1cclxuIikKIAogICAgICAgICAvKgpAQCAtMzc3LDE2ICs0MTUs
MTYgQEAgdmlydHBoeXNfY2xhc2g6CiAgICAgICAgIG1jciAgIENQMzIocjAsIFRMQklBTExIKSAg
ICAgLyogRmx1c2ggaHlwZXJ2aXNvciBUTEJzICovCiAgICAgICAgIGRzYiAgIG5zaAogCi0gICAg
ICAgIGxkciAgIHIxLCA9cGFnaW5nICAgICAgICAgICAgLyogRXhwbGljaXQgdmFkZHIsIG5vdCBS
SVAtcmVsYXRpdmUgKi8KICAgICAgICAgbXJjICAgQ1AzMihyMCwgSFNDVExSKQogICAgICAgICAv
KiBFbmFibGUgTU1VIGFuZCBELWNhY2hlICovCiAgICAgICAgIG9yciAgIHIwLCByMCwgIyhTQ1RM
Ul9BeHhfRUx4X018U0NUTFJfQXh4X0VMeF9DKQogICAgICAgICBkc2IgICAgICAgICAgICAgICAg
ICAgICAgICAgIC8qIEZsdXNoIFBURSB3cml0ZXMgYW5kIGZpbmlzaCByZWFkcyAqLwogICAgICAg
ICBtY3IgICBDUDMyKHIwLCBIU0NUTFIpICAgICAgIC8qIG5vdyBwYWdpbmcgaXMgZW5hYmxlZCAq
LwogICAgICAgICBpc2IgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdywgZmx1c2ggdGhl
IGljYWNoZSAqLwotICAgICAgICBtb3YgICBwYywgcjEgICAgICAgICAgICAgICAgIC8qIEdldCBh
IHByb3BlciB2YWRkciBpbnRvIFBDICovCi1wYWdpbmc6CisgICAgICAgIG1vdiAgIHBjLCBscgor
RU5EUFJPQyhlbmFibGVfbW11KQogCitzZXR1cF9maXhtYXA6CiAgICAgICAgIC8qCiAgICAgICAg
ICAqIE5vdyB3ZSBjYW4gaW5zdGFsbCB0aGUgZml4bWFwIGFuZCBkdGIgbWFwcGluZ3MsIHNpbmNl
IHdlCiAgICAgICAgICAqIGRvbid0IG5lZWQgdGhlIDE6MSBtYXAgYW55IG1vcmUKQEAgLTQzNiwx
MiArNDc0LDE1IEBAIHBhZ2luZzoKICAgICAgICAgbWNyICAgQ1AzMihyMCwgVExCSUFMTEgpICAg
ICAvKiBGbHVzaCBoeXBlcnZpc29yIFRMQiAqLwogICAgICAgICBkc2IgICAgICAgICAgICAgICAg
ICAgICAgICAgIC8qIEVuc3VyZSBjb21wbGV0aW9uIG9mIFRMQiBmbHVzaCAqLwogICAgICAgICBp
c2IKKyAgICAgICAgbW92ICAgcGMsIGxyCitFTkRQUk9DKHNldHVwX2ZpeG1hcCkKIAorbGF1bmNo
OgogICAgICAgICBQUklOVCgiLSBSZWFkeSAtXHJcbiIpCiAKICAgICAgICAgLyogVGhlIGJvb3Qg
Q1BVIHNob3VsZCBnbyBzdHJhaWdodCBpbnRvIEMgbm93ICovCiAgICAgICAgIHRlcSAgIHIxMiwg
IzAKLSAgICAgICAgYmVxICAgbGF1bmNoCisgICAgICAgIGJlcSAgIDFmCiAKICAgICAgICAgLyoK
ICAgICAgICAgICogTm9uLWJvb3QgQ1BVcyBuZWVkIHRvIG1vdmUgb24gdG8gdGhlIHByb3BlciBw
YWdldGFibGVzLCB3aGljaCB3ZXJlCkBAIC00NjAsNyArNTAxLDcgQEAgcGFnaW5nOgogICAgICAg
ICBkc2IgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEVuc3VyZSBjb21wbGV0aW9uIG9mIFRM
QitCUCBmbHVzaCAqLwogICAgICAgICBpc2IKIAotbGF1bmNoOgorMToKICAgICAgICAgbGRyICAg
cjAsID1pbml0X2RhdGEKICAgICAgICAgYWRkICAgcjAsICNJTklUSU5GT19zdGFjayAgICAvKiBG
aW5kIHRoZSBib290LXRpbWUgc3RhY2sgKi8KICAgICAgICAgbGRyICAgc3AsIFtyMF0KQEAgLTQ3
MSw2ICs1MTIsNyBAQCBsYXVuY2g6CiAgICAgICAgIG1vdmVxIHIxLCByOCAgICAgICAgICAgICAg
ICAgLyogICAgICAgICAgICAgICAtIERUQiBhZGRyZXNzICovCiAgICAgICAgIGJlcSAgIHN0YXJ0
X3hlbiAgICAgICAgICAgICAgLyogYW5kIGRpc2FwcGVhciBpbnRvIHRoZSBsYW5kIG9mIEMgKi8K
ICAgICAgICAgYiAgICAgc3RhcnRfc2Vjb25kYXJ5ICAgICAgICAvKiAodG8gdGhlIGFwcHJvcHJp
YXRlIGVudHJ5IHBvaW50KSAqLworRU5EUFJPQyhsYXVuY2gpCiAKIC8qIEZhaWwtc3RvcCAqLwog
ZmFpbDogICBQUklOVCgiLSBCb290IGZhaWxlZCAtXHJcbiIpCi0tIAoyLjExLjAKCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGlu
ZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnBy
b2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 7530E117239
	for <lists+xen-devel@lfdr.de>; Mon,  9 Dec 2019 17:55:49 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ieMH0-0005zV-Ud; Mon, 09 Dec 2019 16:52:38 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=RNMk=Z7=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1ieMGz-0005zQ-9A
 for xen-devel@lists.xenproject.org; Mon, 09 Dec 2019 16:52:37 +0000
X-Inumbo-ID: 4cb0062a-1aa4-11ea-b6f1-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 4cb0062a-1aa4-11ea-b6f1-bc764e2007e4;
 Mon, 09 Dec 2019 16:52:35 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 7A990ADE0;
 Mon,  9 Dec 2019 16:52:34 +0000 (UTC)
To: Andrew Cooper <andrew.cooper3@citrix.com>
References: <20191205223008.8623-1-andrew.cooper3@citrix.com>
 <20191205223008.8623-6-andrew.cooper3@citrix.com>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <60ae5d0a-8290-42ed-74e7-894515c5dea3@suse.com>
Date: Mon, 9 Dec 2019 17:52:52 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.1
MIME-Version: 1.0
In-Reply-To: <20191205223008.8623-6-andrew.cooper3@citrix.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH 5/6] xen/tasklet: Return -ERESTART from
 continue_hypercall_on_cpu()
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Xen-devel <xen-devel@lists.xenproject.org>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMDUuMTIuMjAxOSAyMzozMCwgQW5kcmV3IENvb3BlciB3cm90ZToKPiBTb21lIGh5cGVyY2Fs
bHMgdGFza2xldHMgd2FudCB0byBjcmVhdGUgYSBjb250aW51YXRpb24sIHJhdGhlciB0aGFuIGZh
aWwgdGhlCj4gaHlwZXJjYWxsIHdpdGggYSBoYXJkIGVycm9yLiAgQnkgdGhlIHRpbWUgdGhlIHRh
c2tsZXQgaXMgZXhlY3V0aW5nLCBpdCBpcyB0b28KPiBsYXRlIHRvIGNyZWF0ZSB0aGUgY29udGlu
dWF0aW9uLCBhbmQgZXZlbiBjb250aW51ZV9oeXBlcmNhbGxfb25fY3B1KCkgZG9lc24ndAo+IGhh
dmUgZW5vdWdoIHN0YXRlIHRvIGRvIGl0IGNvcnJlY3RseS4KCkkgdGhpbmsgaXQgd291bGQgYmUg
cXVpdGUgbmljZSBpZiB5b3UgbWFkZSBjbGVhciB3aGF0IHBpZWNlIG9mIHN0YXRlCml0IGlzIGFj
dHVhbGx5IG1pc3NpbmcuIFRvIGJlIGhvbmVzdCwgSSBkb24ndCByZWNhbGwgYW55bW9yZS4KCj4g
QWxsIGNhbGxlcnMgb2YgY29udGludWVfaHlwZXJjYWxsX29uX2NwdSgpIGhhdmUgYmVlbiB1cGRh
dGVkIHRvIHR1cm4gLUVSRVNUQVJUCj4gaW50byBhIGNvbnRpbnVhdGlvbiwgd2hlcmUgYXBwcm9w
cmlhdGUgbW9kaWZpY2F0aW9ucyBjYW4gYmUgbWFkZSB0byByZWdpc3Rlcgo+IGFuZC9vciBtZW1v
cnkgcGFyYW1ldGVycy4KPiAKPiBUaGlzIGNoYW5nZXMgdGhlIGNvbnRpbnVlX2h5cGVyY2FsbF9v
bl9jcHUoKSBiZWhhdmlvdXIgdG8gdW5jb25kaXRpb25hbGx5Cj4gY3JlYXRlIGEgaHlwZXJjYWxs
IGNvbnRpbnVhdGlvbiwgaW4gY2FzZSB0aGUgdGFza2xldCB3YW50cyB0byB1c2UgaXQsIGFuZCB0
aGVuCj4gdG8gaGF2ZSBhcmNoX2h5cGVyY2FsbF90YXNrbGV0X3Jlc3VsdCgpIGNhbmNlbCB0aGUg
Y29udGludWF0aW9uIHdoZW4gYSByZXN1bHQKPiBpcyBhdmFpbGFibGUuICBOb25lIG9mIHRoZXNl
IGh5cGVyY2FsbHMgYXJlIGZhc3QgcGF0aHMuCj4gCj4gU2lnbmVkLW9mZi1ieTogQW5kcmV3IENv
b3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KPiAtLS0KPiBDQzogSmFuIEJldWxpY2gg
PEpCZXVsaWNoQHN1c2UuY29tPgo+IENDOiBXZWkgTGl1IDx3bEB4ZW4ub3JnPgo+IENDOiBSb2dl
ciBQYXUgTW9ubsOpIDxyb2dlci5wYXVAY2l0cml4LmNvbT4KPiBDQzogU3RlZmFubyBTdGFiZWxs
aW5pIDxzc3RhYmVsbGluaUBrZXJuZWwub3JnPgo+IENDOiBKdWxpZW4gR3JhbGwgPGp1bGllbkB4
ZW4ub3JnPgo+IENDOiBWb2xvZHlteXIgQmFiY2h1ayA8Vm9sb2R5bXlyX0JhYmNodWtAZXBhbS5j
b20+Cj4gCj4gVGhlcmUgaXMgb25lIFJGQyBwb2ludC4gIFRoZSBzdGF0ZW1lbnQgaW4gdGhlIGhl
YWRlciBmaWxlIG9mICJJZiB0aGlzIGZ1bmN0aW9uCj4gcmV0dXJucyAwIHRoZW4gdGhlIGZ1bmN0
aW9uIGlzIGd1YXJhbnRlZWQgdG8gcnVuIGF0IHNvbWUgcG9pbnQgaW4gdGhlIGZ1dHVyZS4iCj4g
d2FzIG5ldmVyIHRydWUuICBJbiB0aGUgY2FzZSBvZiBhIENQVSBtaXNzLCB0aGUgaHlwZXJjYWxs
IHdvdWxkIGJlIGJsaW5kbHkKPiBmYWlsZWQgd2l0aCAtRUlOVkFMLgoKIldhcyBuZXZlciB0cnVl
IiBzb3VuZHMgbGlrZSAiY29tcGxldGVseSBicm9rZW4iLiBBZmFpY3QgaXQgd2FzIHRydWUKaW4g
YWxsIGNhc2VzIGV4Y2VwdCB0aGUgcHVyZWx5IGh5cG90aGV0aWNhbCBvbmUgb2YgdGhlIHRhc2ts
ZXQgZW5kaW5nCnVwIGV4ZWN1dGluZyBvbiB0aGUgd3JvbmcgQ1BVLgoKPiBUaGUgY3VycmVudCBi
ZWhhdmlvdXIgd2l0aCB0aGlzIHBhdGNoIGlzIHRvIG5vdCBjYW5jZWwgdGhlIGNvbnRpbnVhdGlv
biwgd2hpY2gKPiBJIHRoaW5rIGlzIGxlc3MgYmFkLCBidXQgc3RpbGwgbm90IGdyZWF0LiAgVGhv
dWdodHM/CgpXZWxsLCB0aGF0J3MgYSBndWVzdCBsaXZlIGxvY2sgdGhlbiBhaXVpLiBJcyB0aGVy
ZSBhbnkgd2F5IGZvciB0aGUKZ3Vlc3QgdG8gbWFrZSBpdCBvdXQgb2YgdGhlcmU/IElmIG5vdCwg
cGVyaGFwcyBpdCdkIGJlICJiZXR0ZXIiIHRvCmNyYXNoIHRoZSBndWVzdD8gKEkgZG9uJ3Qgc3Vw
cG9zZSB0aGVyZSdzIGFueXRoaW5nIHdlIGNhbiBkbyB0bwpzdGlsbCBtYWtlIHRoZSB0YXNrbGV0
IHJ1biBvbiB0aGUgaW50ZW5kZWQgQ1BVLikKCj4gLS0tIGEveGVuL2FyY2gvYXJtL3RyYXBzLmMK
PiArKysgYi94ZW4vYXJjaC9hcm0vdHJhcHMuYwo+IEBAIC0xNDg5LDYgKzE0ODksNyBAQCB2b2lk
IGFyY2hfaHlwZXJjYWxsX3Rhc2tsZXRfcmVzdWx0KHN0cnVjdCB2Y3B1ICp2LCBsb25nIHJlcykK
PiAgewo+ICAgICAgc3RydWN0IGNwdV91c2VyX3JlZ3MgKnJlZ3MgPSAmdi0+YXJjaC5jcHVfaW5m
by0+Z3Vlc3RfY3B1X3VzZXJfcmVnczsKPiAgCj4gKyAgICByZWdzLT5wYyArPSA0OyAgLyogU2tp
cCBvdmVyICdodmMgI1hFTl9IWVBFUkNBTExfVEFHJyAqLwo+ICAgICAgSFlQRVJDQUxMX1JFU1VM
VF9SRUcocmVncykgPSByZXM7Cj4gIH0KPiAgCj4gLS0tIGEveGVuL2FyY2gveDg2L2h5cGVyY2Fs
bC5jCj4gKysrIGIveGVuL2FyY2gveDg2L2h5cGVyY2FsbC5jCj4gQEAgLTE3MCw2ICsxNzAsMTMg
QEAgdm9pZCBhcmNoX2h5cGVyY2FsbF90YXNrbGV0X3Jlc3VsdChzdHJ1Y3QgdmNwdSAqdiwgbG9u
ZyByZXMpCj4gIHsKPiAgICAgIHN0cnVjdCBjcHVfdXNlcl9yZWdzICpyZWdzID0gJnYtPmFyY2gu
dXNlcl9yZWdzOwo+ICAKPiArICAgIC8qCj4gKyAgICAgKiBQViBoeXBlcmNhbGxzIGFyZSBhbGwg
Mi1ieXRlIGluc3RydWN0aW9ucyAoSU5UICQweDgyLCBTWVNDQUxMKS4gIEhWTQo+ICsgICAgICog
aHlwZXJjYWxscyBhcmUgYWxsIDMtYnl0ZSBpbnN0cnVjdGlvbnMgKFZNQ0FMTCwgVk1NQ0FMTCku
Cj4gKyAgICAgKgo+ICsgICAgICogTW92ZSAlcmlwIGZvcndhcmRzIHRvIGNvbXBsZXRlIHRoZSBj
b250aW51YXRpb24uCj4gKyAgICAgKi8KPiArICAgIHJlZ3MtPnJpcCArPSAyICsgaXNfaHZtX3Zj
cHUodik7Cj4gICAgICByZWdzLT5yYXggPSByZXM7Cj4gIH0KClRvIGxlYXZlIHRoZSBzeXN0ZW0g
aW4gY29uc2lzdGVudCBzdGF0ZSwgcGVyaGFwcyBiZXR0ZXIgdG8gY2FsbApoeXBlcmNhbGxfY2Fu
Y2VsX2NvbnRpbnVhdGlvbigpIGFsb25nIHdpdGggdGhlIFBDL1JJUCB1cGRhdGluZz8KCj4gLS0t
IGEveGVuL2luY2x1ZGUveGVuL2RvbWFpbi5oCj4gKysrIGIveGVuL2luY2x1ZGUveGVuL2RvbWFp
bi5oCj4gQEAgLTk2LDkgKzk2LDExIEBAIHZvaWQgZG9tY3RsX2xvY2tfcmVsZWFzZSh2b2lkKTsK
PiAgCj4gIC8qCj4gICAqIENvbnRpbnVlIHRoZSBjdXJyZW50IGh5cGVyY2FsbCB2aWEgZnVuYyhk
YXRhKSBvbiBzcGVjaWZpZWQgY3B1Lgo+IC0gKiBJZiB0aGlzIGZ1bmN0aW9uIHJldHVybnMgMCB0
aGVuIHRoZSBmdW5jdGlvbiBpcyBndWFyYW50ZWVkIHRvIHJ1biBhdCBzb21lCj4gLSAqIHBvaW50
IGluIHRoZSBmdXR1cmUuIElmIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhbiBlcnJvciBjb2RlIHRo
ZW4gdGhlCj4gLSAqIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiBhbmQgd2lsbCBub3QgYmUgZXhlY3V0
ZWQuCj4gKyAqCj4gKyAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyAtRVJFU1RBUlQgaW4gdGhlIHN1
Y2Nlc3MgY2FzZSwgYW5kIGEgaGlnaGVyIGxldmVsCj4gKyAqIGNhbGxlciBpcyByZXF1aXJlZCB0
byBzZXQgdXAgYSBoeXBlcmNhbGwgY29udGludWF0aW9uLiAgZnVuYygpIHdpbGwgYmUgcnVuCj4g
KyAqIGF0IHNvbWUgcG9pbnQgaW4gdGhlIGZ1dHVyZS4gIElmIHRoaXMgZnVuY3Rpb24gcmV0dXJu
cyBhbnkgb3RoZXIgZXJyb3IgY29kZQo+ICsgKiB0aGVuIGZ1bmMoKSBoYXMgbm90LCBhbmQgd2ls
bCBub3QgYmUgZXhlY3V0ZWQuCj4gICAqLwo+ICBpbnQgY29udGludWVfaHlwZXJjYWxsX29uX2Nw
dSgKPiAgICAgIHVuc2lnbmVkIGludCBjcHUsIGxvbmcgKCpmdW5jKSh2b2lkICpkYXRhKSwgdm9p
ZCAqZGF0YSk7CgpIb3cgaXMgdGhpcyBjb21tZW50IGFueSBiZXR0ZXIgd3J0IHRoZSAid2FzIG5l
dmVyIHRydWUiIGNvbW1lbnQKeW91J3ZlIG1hZGUgYWJvdmU/IFRoZSBmdW5jdGlvbiBzdGlsbCB3
b3VsZG4ndCBiZSBpbnZva2VkIGluCmNhc2Ugb2YgYSBDUFUgbWlzcy4KCkphbgoKX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcg
bGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9q
ZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

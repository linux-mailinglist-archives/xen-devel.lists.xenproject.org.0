Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 1477D9B725
	for <lists+xen-devel@lfdr.de>; Fri, 23 Aug 2019 21:38:55 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i1FLL-0006Ij-5w; Fri, 23 Aug 2019 19:35:27 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=8RV+=WT=gmail.com=olekstysh@srs-us1.protection.inumbo.net>)
 id 1i1FLJ-0006Ie-S7
 for xen-devel@lists.xenproject.org; Fri, 23 Aug 2019 19:35:25 +0000
X-Inumbo-ID: 26b64d2e-c5dd-11e9-ac23-bc764e2007e4
Received: from mail-lj1-x242.google.com (unknown [2a00:1450:4864:20::242])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 26b64d2e-c5dd-11e9-ac23-bc764e2007e4;
 Fri, 23 Aug 2019 19:35:24 +0000 (UTC)
Received: by mail-lj1-x242.google.com with SMTP id e24so9853929ljg.11
 for <xen-devel@lists.xenproject.org>; Fri, 23 Aug 2019 12:35:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id;
 bh=fCVqVHEhBkanFdhxk/CCfvx1us5ijc5HbsAZWizYqh4=;
 b=m45kzTK9GWldQwwyn/B2e5Vq51m38dpx9uCgrpAI3JEYD4HQSFU9kzbSG4v/SvGeUI
 fq9IaOROfgI9S6xBuFJlYshRLQ82OgaxohFlAWCb+VVsNckIGOm57MBCbps6SQIW37i+
 sbagMKXf6QfsgO5XrPq5idOzjx+ZK0dnUg9ATqo9HaONHnqyLBkQ8oR56iCtJa4XYr1/
 sEUR3Yd13OeIoGJ0ksgRPuDhPoVv0KKNakUBesmdNkC5yXs7NR1t83ojEMpgej95ANlm
 wIaB/DYPJN6d2E3r8ZWSZoKAAm4bFH2aZwUCUICGKJI4L5+iOZpIqr4vm8v/NOG2kj9D
 S+1w==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id;
 bh=fCVqVHEhBkanFdhxk/CCfvx1us5ijc5HbsAZWizYqh4=;
 b=ZtuZZnU54tgcnyC3d2a8WFPu98LS+D8+rZtmk4eZJZ2AXMyzvf136+mjKOofnDQKtG
 LWxeB3o4GAm3NETSn7JSXb8EK6TwwEAkyapYNh6FFln8F/c07uP6kjDfRCoozgigOpMf
 8HlHRwpfn38btdfvrSeBCZoQnwQT2xKDSLyjC+GOS08C70sn8fWTS4ay0rQtE6LgRkij
 CaqQ6foz3D+gea64fXc2rdYb06xLZidIjzNgv0gYPCrOqi0Ts1eM/ZLtZLRu6APhBGbV
 g1YMuiZmJdPjDatb1WcVkerNMtpBskmZyAqYlCmlHFY9vaCHlSZUt2qHELPdbWKp2QBl
 Akqw==
X-Gm-Message-State: APjAAAVmhkRQuGe3RIRXziLsZjrR+9WFq+RFD0taYiw8MLgxyQwegGcO
 gRPd9b0wk/N3frJ1isQcxv70Wpyo
X-Google-Smtp-Source: APXvYqzOjqG7pb6ZMRBGO/8xpF7N1n6xV2zQEeHvdBNyarlb0aDm410yb4AMRnDGY1vtb1GwN03g4Q==
X-Received: by 2002:a2e:948:: with SMTP id 69mr4027171ljj.39.1566588923235;
 Fri, 23 Aug 2019 12:35:23 -0700 (PDT)
Received: from otyshchenko.kyiv.epam.com (ll-22.209.223.85.sovam.net.ua.
 [85.223.209.22])
 by smtp.gmail.com with ESMTPSA id p11sm776322ljg.56.2019.08.23.12.35.22
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
 Fri, 23 Aug 2019 12:35:22 -0700 (PDT)
From: Oleksandr Tyshchenko <olekstysh@gmail.com>
To: xen-devel@lists.xenproject.org
Date: Fri, 23 Aug 2019 22:34:52 +0300
Message-Id: <1566588892-5305-1-git-send-email-olekstysh@gmail.com>
X-Mailer: git-send-email 2.7.4
Subject: [Xen-devel] [PATCH] [RFC V2] xen/arm: Restrict "p2m_ipa_bits"
 according to the IOMMU requirements
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Oleksandr Tyshchenko <oleksandr_tyshchenko@epam.com>, julien.grall@arm.com,
 sstabellini@kernel.org, Volodymyr_Babchuk@epam.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogT2xla3NhbmRyIFR5c2hjaGVua28gPG9sZWtzYW5kcl90eXNoY2hlbmtvQGVwYW0uY29t
PgoKVGhlcmUgaXMgYSBzdHJpY3QgcmVxdWlyZW1lbnQgZm9yIHRoZSBJT01NVSB3aGljaCB3YW50
cyB0byBzaGFyZQp0aGUgUDJNIHRhYmxlIHdpdGggdGhlIENQVS4gVGhlIElPTU1VJ3MgU3RhZ2Ut
MiBpbnB1dCBzaXplIG11c3QgYmUgZXF1YWwKdG8gdGhlIFAyTSBJUEEgc2l6ZS4gSXQgaXMgbm90
IGEgcHJvYmxlbSB3aGVuIHRoZSBJT01NVSBjYW4gc3VwcG9ydAphbGwgdmFsdWVzIHRoZSBDUFUg
c3VwcG9ydHMuIEluIHRoYXQgY2FzZSwgdGhlIElPTU1VIGRyaXZlciB3b3VsZCBqdXN0CnVzZSBh
bnkgInAybV9pcGFfYml0cyIgdmFsdWUgYXMgaXMuIEJ1dCwgdGhlcmUgYXJlIGNhc2VzIHdoZW4g
bm90LgoKSW4gb3JkZXIgdG8gbWFrZSBQMk0gc2hhcmluZyBwb3NzaWJsZSBvbiB0aGUgcGxhdGZv
cm1zIHdoaWNoCklQTU1VcyBoYXZlIGEgbGltaXRhdGlvbiBpbiBtYXhpbXVtIFN0YWdlLTIgaW5w
dXQgc2l6ZSBpbnRyb2R1Y2UKdGhlIGZvbGxvd2luZyBsb2dpYy4KCkZpcnN0IGluaXRpYWxpemUg
dGhlIElPTU1VIHN1YnN5c3RlbSBhbmQgZ2F0aGVyIHJlcXVpcmVtZW50cyByZWdhcmRpbmcKdGhl
IG1heGltdW0gSVBBIGJpdHMgc3VwcG9ydGVkIGJ5IGVhY2ggSU9NTVUgZGV2aWNlIHRvIGZpZ3Vy
ZSBvdXQKdGhlIG1pbmltdW0gdmFsdWUgYW1vbmcgdGhlbS4gSW4gdGhlIFAyTSBjb2RlLCB0YWtl
IGludG8gdGhlIGFjY291bnQKdGhlIElPTU1VIHJlcXVpcmVtZW50cyBhbmQgY2hvb3NlIHN1aXRh
YmxlICJwYV9yYW5nZSIgYWNjb3JkaW5nCnRvIHRoZSByZXN0cmljdGVkICJwMm1faXBhX2JpdHMi
LgoKU2lnbmVkLW9mZi1ieTogT2xla3NhbmRyIFR5c2hjaGVua28gPG9sZWtzYW5kcl90eXNoY2hl
bmtvQGVwYW0uY29tPgpDQzogSnVsaWVuIEdyYWxsIDxqdWxpZW4uZ3JhbGxAYXJtLmNvbT4KCi0t
LQpTdGlsbCBSRkM6CgoxLiBQYXRjaCBhc3N1bWVzIHRoYXQgSVBNTVUgc3VwcG9ydCBpcyBhbHJl
YWR5IGluLgoyLiBOb3QgY2hlY2tlZCBmb3IgdGhlIFNNTVUuCgpDaGFuZ2VzIHNpbmNlIFJGQyBW
MSBbMV06CiAgIC0gRG9uJ3QgdXBkYXRlIHAybV9pcGFfYml0cyBieSB0aGUgSU9NTVUgZHJpdmVy
cyBkaXJlY3RseSwKICAgICBpbnRyb2R1Y2UgcDJtX3Jlc3RyaWN0X2lwYV9iaXRzKCkKICAgLSBD
bGFyaWZ5IHBhdGNoIHN1YmplY3QvZGVzY3JpcHRpb24KICAgLSBBZGQgbW9yZSBjb21tZW50cyB0
byBjb2RlCiAgIC0gQ2hlY2sgZm9yIGVxdWl2YWxlbnQgInBhYml0cyIgaW4gc2V0dXBfdmlydF9w
YWdpbmcoKQogICAtIFJlbW92ZSBBU1NFUlRzIGZyb20gdGhlIFNNTVUgYW5kIElQTU1VIGRyaXZl
cnMKClsxXSBodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL2FyY2hpdmVzL2h0bWwveGVuLWRl
dmVsLzIwMTktMDgvbXNnMDIwNzguaHRtbAotLS0KIHhlbi9hcmNoL2FybS9wMm0uYyAgICAgICAg
ICAgICAgICAgICAgICAgfCAzMyArKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLQogeGVu
L2FyY2gvYXJtL3NldHVwLmMgICAgICAgICAgICAgICAgICAgICB8IDExICsrKysrKysrKy0tCiB4
ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0vaXBtbXUtdm1zYS5jIHwgMTkgKysrKy0tLS0tLS0t
LS0tLS0tCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0vc21tdS5jICAgICAgIHwgMTYgKysr
KysrKystLS0tLS0tLQogeGVuL2luY2x1ZGUvYXNtLWFybS9wMm0uaCAgICAgICAgICAgICAgICB8
ICA4ICsrKysrKysrCiA1IGZpbGVzIGNoYW5nZWQsIDYwIGluc2VydGlvbnMoKyksIDI3IGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL2FybS9wMm0uYyBiL3hlbi9hcmNoL2FybS9w
Mm0uYwppbmRleCAyMzc0ZTkyLi5mNzQyZDljIDEwMDY0NAotLS0gYS94ZW4vYXJjaC9hcm0vcDJt
LmMKKysrIGIveGVuL2FyY2gvYXJtL3AybS5jCkBAIC0zNCw3ICszNCw4IEBAIHN0YXRpYyB1bnNp
Z25lZCBpbnQgX19yZWFkX21vc3RseSBtYXhfdm1pZCA9IE1BWF9WTUlEXzhfQklUOwogCiAjZGVm
aW5lIFAyTV9ST09UX1BBR0VTICAgICgxPDxQMk1fUk9PVF9PUkRFUikKIAotdW5zaWduZWQgaW50
IF9fcmVhZF9tb3N0bHkgcDJtX2lwYV9iaXRzOworLyogTGFyZ2VyIHRoYW4gYW55IHBvc3NpYmxl
IHZhbHVlICovCit1bnNpZ25lZCBpbnQgX19yZWFkX21vc3RseSBwMm1faXBhX2JpdHMgPSA2NDsK
IAogLyogSGVscGVycyB0byBsb29rdXAgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBsZXZlbCAqLwog
c3RhdGljIGNvbnN0IHBhZGRyX3QgbGV2ZWxfbWFza3NbXSA9CkBAIC0xOTEyLDYgKzE5MTMsMTYg
QEAgc3RydWN0IHBhZ2VfaW5mbyAqZ2V0X3BhZ2VfZnJvbV9ndmEoc3RydWN0IHZjcHUgKnYsIHZh
ZGRyX3QgdmEsCiAgICAgcmV0dXJuIHBhZ2U7CiB9CiAKK3ZvaWQgX19pbml0IHAybV9yZXN0cmlj
dF9pcGFfYml0cyh1bnNpZ25lZCBpbnQgaW9tbXVfaXBhX2JpdHMpCit7CisgICAgLyoKKyAgICAg
KiBDYWxjdWxhdGUgdGhlIG1pbmltdW0gb2YgdGhlIG1heGltdW0gSVBBIGJpdHMgdGhhdCBhbnkg
SU9NTVUKKyAgICAgKiBjYW4gc3VwcG9ydC4KKyAgICAgKi8KKyAgICBpZiAoIGlvbW11X2lwYV9i
aXRzIDwgcDJtX2lwYV9iaXRzICkKKyAgICAgICAgcDJtX2lwYV9iaXRzID0gaW9tbXVfaXBhX2Jp
dHM7Cit9CisKIC8qIFZUQ1IgdmFsdWUgdG8gYmUgY29uZmlndXJlZCBieSBhbGwgQ1BVcy4gU2V0
IG9ubHkgb25jZSBieSB0aGUgYm9vdCBDUFUgKi8KIHN0YXRpYyB1aW50MzJfdCBfX3JlYWRfbW9z
dGx5IHZ0Y3I7CiAKQEAgLTE5NjYsMTAgKzE5NzcsMjggQEAgdm9pZCBfX2luaXQgc2V0dXBfdmly
dF9wYWdpbmcodm9pZCkKICAgICAgICAgWzddID0geyAwIH0gIC8qIEludmFsaWQgKi8KICAgICB9
OwogCi0gICAgdW5zaWduZWQgaW50IGNwdTsKKyAgICB1bnNpZ25lZCBpbnQgaSwgY3B1OwogICAg
IHVuc2lnbmVkIGludCBwYV9yYW5nZSA9IDB4MTA7IC8qIExhcmdlciB0aGFuIGFueSBwb3NzaWJs
ZSB2YWx1ZSAqLwogICAgIGJvb2wgdm1pZF84X2JpdCA9IGZhbHNlOwogCisgICAgaWYgKCBpb21t
dV9lbmFibGVkICkKKyAgICB7CisgICAgICAgIC8qCisgICAgICAgICAqIENob29zZSBzdWl0YWJs
ZSAicGFfcmFuZ2UiIGFjY29yZGluZyB0byB0aGUgSU9NTVUgcmVxdWlyZW1lbnRzCisgICAgICAg
ICAqIChyZXN0cmljdGVkICJwMm1faXBhX2JpdHMiIHZhbHVlKS4KKyAgICAgICAgICogQXMgUDJN
IHRhYmxlIGlzIGFsd2F5cyBjb25maWd1cmVkIHdpdGggSVBBIGJpdHMgPT0gUEEgYml0cywKKyAg
ICAgICAgICogY2hlY2sgZm9yIGVxdWl2YWxlbnQgInBhYml0cyIgYW5kIHN0b3JlIGl0J3MgaW5k
ZXguCisgICAgICAgICAqLworICAgICAgICBmb3IgKCBpID0gMDsgaSA8IEFSUkFZX1NJWkUocGFf
cmFuZ2VfaW5mbyk7IGkrKyApCisgICAgICAgIHsKKyAgICAgICAgICAgIGlmICggcDJtX2lwYV9i
aXRzID09IHBhX3JhbmdlX2luZm9baV0ucGFiaXRzICkKKyAgICAgICAgICAgIHsKKyAgICAgICAg
ICAgICAgICBwYV9yYW5nZSA9IGk7CisgICAgICAgICAgICAgICAgYnJlYWs7CisgICAgICAgICAg
ICB9CisgICAgICAgIH0KKyAgICB9CisKICAgICBmb3JfZWFjaF9vbmxpbmVfY3B1ICggY3B1ICkK
ICAgICB7CiAgICAgICAgIGNvbnN0IHN0cnVjdCBjcHVpbmZvX2FybSAqaW5mbyA9ICZjcHVfZGF0
YVtjcHVdOwpkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL3NldHVwLmMgYi94ZW4vYXJjaC9hcm0v
c2V0dXAuYwppbmRleCA1MWE2Njc3Li40MTNmM2U2IDEwMDY0NAotLS0gYS94ZW4vYXJjaC9hcm0v
c2V0dXAuYworKysgYi94ZW4vYXJjaC9hcm0vc2V0dXAuYwpAQCAtOTM2LDEyICs5MzYsMTkgQEAg
dm9pZCBfX2luaXQgc3RhcnRfeGVuKHVuc2lnbmVkIGxvbmcgYm9vdF9waHlzX29mZnNldCwKICAg
ICBwcmludGsoIkJyb3VnaHQgdXAgJWxkIENQVXNcbiIsIChsb25nKW51bV9vbmxpbmVfY3B1cygp
KTsKICAgICAvKiBUT0RPOiBzbXBfY3B1c19kb25lKCk7ICovCiAKLSAgICBzZXR1cF92aXJ0X3Bh
Z2luZygpOwotCisgICAgLyoKKyAgICAgKiBUaGUgSU9NTVUgc3Vic3lzdGVtIG11c3QgYmUgaW5p
dGlhbGl6ZWQgYmVmb3JlIFAyTSBhcyB3ZSBuZWVkIHRvIGdhdGhlcgorICAgICAqIHJlcXVpcmVt
ZW50cyByZWdhcmRpbmcgdGhlIG1heGltdW0gSVBBIGJpdHMgc3VwcG9ydGVkIGJ5IGVhY2ggSU9N
TVUKKyAgICAgKiBkZXZpY2UgdG8gZmlndXJlIG91dCB0aGUgbWluaW11bSB2YWx1ZSBhbW9uZyB0
aGVtLiBUaGUgUDJNIGNvZGUgd2lsbAorICAgICAqIGNob29zZSBzdWl0YWJsZSAicGFfcmFuZ2Ui
IGFjY29yZGluZyB0byB0aGUgcmVzdHJpY3RlZCAicDJtX2lwYV9iaXRzIgorICAgICAqIHZhbHVl
LgorICAgICAqLwogICAgIHJjID0gaW9tbXVfc2V0dXAoKTsKICAgICBpZiAoICFpb21tdV9lbmFi
bGVkICYmIHJjICE9IC1FTk9ERVYgKQogICAgICAgICBwYW5pYygiQ291bGRuJ3QgY29uZmlndXJl
IGNvcnJlY3RseSBhbGwgdGhlIElPTU1Vcy4iKTsKIAorICAgIHNldHVwX3ZpcnRfcGFnaW5nKCk7
CisKICAgICBkb19pbml0Y2FsbHMoKTsKIAogICAgIC8qCmRpZmYgLS1naXQgYS94ZW4vZHJpdmVy
cy9wYXNzdGhyb3VnaC9hcm0vaXBtbXUtdm1zYS5jIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gv
YXJtL2lwbW11LXZtc2EuYwppbmRleCBlYzU0M2MzLi5kMmUzNmE0IDEwMDY0NAotLS0gYS94ZW4v
ZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0vaXBtbXUtdm1zYS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bh
c3N0aHJvdWdoL2FybS9pcG1tdS12bXNhLmMKQEAgLTEzMTQsMjMgKzEzMTQsMTIgQEAgc3RhdGlj
IF9faW5pdCBpbnQgaXBtbXVfaW5pdChzdHJ1Y3QgZHRfZGV2aWNlX25vZGUgKm5vZGUsIGNvbnN0
IHZvaWQgKmRhdGEpCiAgICAgICAgIHJldHVybiAtRU5PREVWOwogICAgIH0KICAgICBlbHNlCi0g
ICAgewogICAgICAgICAvKgotICAgICAgICAgKiBBcyA0LWxldmVsIHRyYW5zbGF0aW9uIHRhYmxl
IGlzIG5vdCBzdXBwb3J0ZWQgaW4gSVBNTVUsIHdlIG5lZWQKLSAgICAgICAgICogdG8gY2hlY2sg
SVBBIHNpemUgdXNlZCBmb3IgUDJNIHRhYmxlIGJlZm9yZWhhbmQgdG8gYmUgc3VyZSBpdCBpcwot
ICAgICAgICAgKiAzLWxldmVsIGFuZCB0aGUgSVBNTVUgd2lsbCBiZSBhYmxlIHRvIHVzZSBpdC4K
LSAgICAgICAgICoKLSAgICAgICAgICogVE9ETzogRmlyc3QgaW5pdGlhbGl6ZSB0aGUgSU9NTVUg
YW5kIGdhdGhlciB0aGUgcmVxdWlyZW1lbnRzIGFuZAotICAgICAgICAgKiB0aGVuIGluaXRpYWxp
emUgdGhlIFAyTS4gSW4gdGhlIFAyTSBjb2RlLCB0YWtlIGludG8gdGhlIGFjY291bnQKLSAgICAg
ICAgICogdGhlIElPTU1VIHJlcXVpcmVtZW50cyBhbmQgcmVzdHJpY3QgInBhX3JhbmdlIiBpZiBu
ZWNlc3NhcnkuCisgICAgICAgICAqIFNldCBtYXhpbXVtIFN0YWdlLTIgaW5wdXQgc2l6ZSBzdXBw
b3J0ZWQgYnkgdGhlIElQTU1VLiBXZSBleHBlY3QKKyAgICAgICAgICogdGhlIFAyTSBjb2RlIHdp
bGwgdGFrZSBpbnRvIHRoZSBhY2NvdW50IHRoZSBJT01NVSByZXF1aXJlbWVudHMgYW5kCisgICAg
ICAgICAqIGNob29zZSBzdWl0YWJsZSAicGFfcmFuZ2UiLgogICAgICAgICAgKi8KLSAgICAgICAg
aWYgKCBJUE1NVV9NQVhfUDJNX0lQQV9CSVRTIDwgcDJtX2lwYV9iaXRzICkKLSAgICAgICAgewot
ICAgICAgICAgICAgcHJpbnRrX29uY2UoWEVOTE9HX0VSUiAiaXBtbXU6IFAyTSBJUEEgc2l6ZSBp
cyBub3Qgc3VwcG9ydGVkIChQMk09JXUgSVBNTVU9JXUpIVxuIiwKLSAgICAgICAgICAgICAgICAg
ICAgICAgIHAybV9pcGFfYml0cywgSVBNTVVfTUFYX1AyTV9JUEFfQklUUyk7Ci0gICAgICAgICAg
ICByZXR1cm4gLUVOT0RFVjsKLSAgICAgICAgfQotICAgIH0KKyAgICAgICAgcDJtX3Jlc3RyaWN0
X2lwYV9iaXRzKElQTU1VX01BWF9QMk1fSVBBX0JJVFMpOwogCiAgICAgcmV0ID0gaXBtbXVfcHJv
YmUobm9kZSk7CiAgICAgaWYgKCByZXQgKQpkaWZmIC0tZ2l0IGEveGVuL2RyaXZlcnMvcGFzc3Ro
cm91Z2gvYXJtL3NtbXUuYyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FybS9zbW11LmMKaW5k
ZXggOGFlOTg2YS4uMmIxMGM2ZSAxMDA2NDQKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gv
YXJtL3NtbXUuYworKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0vc21tdS5jCkBAIC0y
MTk4LDE0ICsyMTk4LDE0IEBAIHN0YXRpYyBpbnQgYXJtX3NtbXVfZGV2aWNlX2NmZ19wcm9iZShz
dHJ1Y3QgYXJtX3NtbXVfZGV2aWNlICpzbW11KQogCXNpemUgPSBhcm1fc21tdV9pZF9zaXplX3Rv
X2JpdHMoKGlkID4+IElEMl9JQVNfU0hJRlQpICYgSUQyX0lBU19NQVNLKTsKIAlzbW11LT5zMV9v
dXRwdXRfc2l6ZSA9IG1pbl90KHVuc2lnbmVkIGxvbmcsIFBIWVNfTUFTS19TSElGVCwgc2l6ZSk7
CiAKLQkvKiBYZW46IFN0YWdlLTIgaW5wdXQgc2l6ZSBoYXMgdG8gbWF0Y2ggcDJtX2lwYV9iaXRz
LiAgKi8KLQlpZiAoc2l6ZSA8IHAybV9pcGFfYml0cykgewotCQlkZXZfZXJyKHNtbXUtPmRldiwK
LQkJCSJQMk0gSVBBIHNpemUgbm90IHN1cHBvcnRlZCAoUDJNPSV1IFNNTVU9JWx1KSFcbiIsCi0J
CQlwMm1faXBhX2JpdHMsIHNpemUpOwotCQlyZXR1cm4gLUVOT0RFVjsKLQl9Ci0Jc21tdS0+czJf
aW5wdXRfc2l6ZSA9IHAybV9pcGFfYml0czsKKwkvKgorCSAqIFhlbjoKKwkgKiBTZXQgbWF4aW11
bSBTdGFnZS0yIGlucHV0IHNpemUgc3VwcG9ydGVkIGJ5IHRoZSBTTU1VLiBXZSBleHBlY3QKKwkg
KiB0aGUgUDJNIGNvZGUgd2lsbCB0YWtlIGludG8gdGhlIGFjY291bnQgdGhlIElPTU1VIHJlcXVp
cmVtZW50cyBhbmQKKwkgKiBjaG9vc2Ugc3VpdGFibGUgInBhX3JhbmdlIi4KKwkgKi8KKwlwMm1f
cmVzdHJpY3RfaXBhX2JpdHMoc2l6ZSk7CisJc21tdS0+czJfaW5wdXRfc2l6ZSA9IHNpemU7CiAj
aWYgMAogCS8qIFN0YWdlLTIgaW5wdXQgc2l6ZSBsaW1pdGVkIGR1ZSB0byBwZ2QgYWxsb2NhdGlv
biAoUFRSU19QRVJfUEdEKSAqLwogI2lmZGVmIENPTkZJR182NEJJVApkaWZmIC0tZ2l0IGEveGVu
L2luY2x1ZGUvYXNtLWFybS9wMm0uaCBiL3hlbi9pbmNsdWRlL2FzbS1hcm0vcDJtLmgKaW5kZXgg
Zjk3MGM1My4uY2RjZjgzYSAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUvYXNtLWFybS9wMm0uaAor
KysgYi94ZW4vaW5jbHVkZS9hc20tYXJtL3AybS5oCkBAIC0xNjUsNiArMTY1LDE0IEBAIHZvaWQg
cDJtX2FsdHAybV9jaGVjayhzdHJ1Y3QgdmNwdSAqdiwgdWludDE2X3QgaWR4KQogICAgIC8qIE5v
dCBzdXBwb3J0ZWQgb24gQVJNLiAqLwogfQogCisvKgorICogSGVscGVyIHRvIHJlc3RyaWN0ICJw
Mm1faXBhX2JpdHMiIGFjY29yZGluZyB0aGUgSU9NTVUgcmVxdWlyZW1lbnRzLgorICoKKyAqIEVh
Y2ggSU9NTVUgZHJpdmVyIHNob3VsZCByZXBvcnQgdGhlIG1heGltdW0gSVBBIGJpdHMgKFN0YWdl
LTIgaW5wdXQgc2l6ZSkKKyAqIGl0IGNhbiBzdXBwb3J0LgorICovCit2b2lkIHAybV9yZXN0cmlj
dF9pcGFfYml0cyh1bnNpZ25lZCBpbnQgaW9tbXVfaXBhX2JpdHMpOworCiAvKiBTZWNvbmQgc3Rh
Z2UgcGFnaW5nIHNldHVwLCB0byBiZSBjYWxsZWQgb24gYWxsIENQVXMgKi8KIHZvaWQgc2V0dXBf
dmlydF9wYWdpbmcodm9pZCk7CiAKLS0gCjIuNy40CgoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxA
bGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFu
L2xpc3RpbmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 8FAD283270
	for <lists+xen-devel@lfdr.de>; Tue,  6 Aug 2019 15:13:43 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1huzFU-0004nv-JT; Tue, 06 Aug 2019 13:11:32 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=jalH=WC=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1huzFT-0004nN-75
 for xen-devel@lists.xenproject.org; Tue, 06 Aug 2019 13:11:31 +0000
X-Inumbo-ID: b3b7983a-b84b-11e9-a937-5fbf71dbd0c2
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id b3b7983a-b84b-11e9-a937-5fbf71dbd0c2;
 Tue, 06 Aug 2019 13:11:29 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 9C355B11B;
 Tue,  6 Aug 2019 13:11:28 +0000 (UTC)
From: Jan Beulich <jbeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
References: <5a4d4a61-a543-c657-8458-cbc6b5a8a633@suse.com>
Message-ID: <98cf3bec-b036-72dc-dc5a-dd9049ca4a11@suse.com>
Date: Tue, 6 Aug 2019 15:11:28 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <5a4d4a61-a543-c657-8458-cbc6b5a8a633@suse.com>
Content-Language: en-US
Subject: [Xen-devel] [PATCH v5 10/10] AMD/IOMMU: restrict interrupt
 remapping table sizes
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 Brian Woods <brian.woods@amd.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlcmUncyBubyBwb2ludCBzZXR0aW5nIHVwIHRhYmxlcyB3aXRoIG1vcmUgc3BhY2UgdGhhbiBh
IFBDSSBkZXZpY2UgY2FuCnVzZS4gRm9yIGJvdGggTVNJIGFuZCBNU0ktWCB3ZSBjYW4gZGV0ZXJt
aW5lIGhvdyBtYW55IGludGVycnVwdHMgY291bGQKYmUgc2V0IHVwIGF0IG1vc3QuIFRhYmxlcyBh
bGxvY2F0ZWQgZHVyaW5nIEFDUEkgdGFibGUgcGFyc2luZywgaG93ZXZlciwKd2lsbCAoZm9yIG5v
dyBhdCBsZWFzdCkgY29udGludWUgdG8gYmUgc2V0IHVwIHRvIGhhdmUgbWF4aW11bSBzaXplLgoK
Tm90ZSB0aGF0IHVudGlsIHdlIHdvdWxkIHdhbnQgdG8gdXNlIHN1Yi1wYWdlIGFsbG9jYXRpb25z
IGhlcmUgdGhlcmUncwpubyBwb2ludCBjaGVja2luZyB3aGV0aGVyIE1TSSBpcyBzdXBwb3J0ZWQg
YnkgYSBkZXZpY2UgLSAxIG9yIHVwIHRvIDMyCihvciBhY3R1YWxseSAxMjgsIGR1ZSB0byB0aGUg
Y2hhbmdlIGVmZmVjdGl2ZWx5IHVzaW5nIGEgcmVzZXJ2ZWQKZW5jb2RpbmcpIElSVEVzIGFsd2F5
cyBtZWFuIGFuIG9yZGVyLTAgYWxsb2NhdGlvbiBhbnl3YXkuCgpTdWdnZXN0ZWQtYnk6IEFuZHJl
dyBDb29wZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+ClNpZ25lZC1vZmYtYnk6IEphbiBC
ZXVsaWNoIDxqYmV1bGljaEBzdXNlLmNvbT4KLS0tCnY1OiBOZXcuCgotLS0gYS94ZW4vZHJpdmVy
cy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfYWNwaS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL2FtZC9pb21tdV9hY3BpLmMKQEAgLTc3LDcgKzc3LDcgQEAgc3RhdGljIHZvaWQgX19pbml0
IGFkZF9pdnJzX21hcHBpbmdfZW50cgogICAgICAgICAgewogICAgICAgICAgICAgIGlmICggIXNo
YXJlZF9pbnRyZW1hcF90YWJsZSApCiAgICAgICAgICAgICAgICAgIHNoYXJlZF9pbnRyZW1hcF90
YWJsZSA9IGFtZF9pb21tdV9hbGxvY19pbnRyZW1hcF90YWJsZSgKLSAgICAgICAgICAgICAgICAg
ICAgaW9tbXUsICZzaGFyZWRfaW50cmVtYXBfaW51c2UpOworICAgICAgICAgICAgICAgICAgICBp
b21tdSwgJnNoYXJlZF9pbnRyZW1hcF9pbnVzZSwgMCk7CiAgCiAgICAgICAgICAgICAgaWYgKCAh
c2hhcmVkX2ludHJlbWFwX3RhYmxlICkKICAgICAgICAgICAgICAgICAgcGFuaWMoIk5vIG1lbW9y
eSBmb3Igc2hhcmVkIElSVFxuIik7CkBAIC04OSw3ICs4OSw3IEBAIHN0YXRpYyB2b2lkIF9faW5p
dCBhZGRfaXZyc19tYXBwaW5nX2VudHIKICAgICAgICAgIHsKICAgICAgICAgICAgICBpdnJzX21h
cHBpbmdzW2FsaWFzX2lkXS5pbnRyZW1hcF90YWJsZSA9CiAgICAgICAgICAgICAgICAgIGFtZF9p
b21tdV9hbGxvY19pbnRyZW1hcF90YWJsZSgKLSAgICAgICAgICAgICAgICAgICAgaW9tbXUsICZp
dnJzX21hcHBpbmdzW2FsaWFzX2lkXS5pbnRyZW1hcF9pbnVzZSk7CisgICAgICAgICAgICAgICAg
ICAgIGlvbW11LCAmaXZyc19tYXBwaW5nc1thbGlhc19pZF0uaW50cmVtYXBfaW51c2UsIDApOwog
IAogICAgICAgICAgICAgIGlmICggIWl2cnNfbWFwcGluZ3NbYWxpYXNfaWRdLmludHJlbWFwX3Rh
YmxlICkKICAgICAgICAgICAgICAgICAgcGFuaWMoIk5vIG1lbW9yeSBmb3IgJTA0eDolMDJ4OiUw
MnguJXUncyBJUlRcbiIsCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9p
bml0LmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2luaXQuYwpAQCAt
MTI5Miw3ICsxMjkyLDkgQEAgc3RhdGljIGludCBfX2luaXQgYW1kX2lvbW11X3NldHVwX2Rldmlj
ZQogICAgICAgICAgICAgICAgICBpdnJzX21hcHBpbmdzW2JkZl0uaW50cmVtYXBfdGFibGUgPQog
ICAgICAgICAgICAgICAgICAgICAgYW1kX2lvbW11X2FsbG9jX2ludHJlbWFwX3RhYmxlKAogICAg
ICAgICAgICAgICAgICAgICAgICAgIGl2cnNfbWFwcGluZ3NbYmRmXS5pb21tdSwKLSAgICAgICAg
ICAgICAgICAgICAgICAgICZpdnJzX21hcHBpbmdzW2JkZl0uaW50cmVtYXBfaW51c2UpOworICAg
ICAgICAgICAgICAgICAgICAgICAgJml2cnNfbWFwcGluZ3NbYmRmXS5pbnRyZW1hcF9pbnVzZSwK
KyAgICAgICAgICAgICAgICAgICAgICAgIHBkZXYtPm1zaXggPyBwZGV2LT5tc2l4LT5ucl9lbnRy
aWVzCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbXVsdGlfbXNpX2NhcGFi
bGUofjB1KSk7CiAgICAgICAgICAgICAgICAgIGlmICggIWl2cnNfbWFwcGluZ3NbYmRmXS5pbnRy
ZW1hcF90YWJsZSApCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKICAKQEAg
LTEzMTUsMTEgKzEzMTcsOCBAQCBzdGF0aWMgaW50IF9faW5pdCBhbWRfaW9tbXVfc2V0dXBfZGV2
aWNlCiAgICAgICAgICAgICAgfQogIAogICAgICAgICAgICAgIGFtZF9pb21tdV9zZXRfaW50cmVt
YXBfdGFibGUoCi0gICAgICAgICAgICAgICAgZHRlLAotICAgICAgICAgICAgICAgIGl2cnNfbWFw
cGluZ3NbYmRmXS5pbnRyZW1hcF90YWJsZQotICAgICAgICAgICAgICAgID8gdmlydF90b19tYWRk
cihpdnJzX21hcHBpbmdzW2JkZl0uaW50cmVtYXBfdGFibGUpCi0gICAgICAgICAgICAgICAgOiAw
LAotICAgICAgICAgICAgICAgIGlvbW11X2ludHJlbWFwKTsKKyAgICAgICAgICAgICAgICBkdGUs
IGl2cnNfbWFwcGluZ3NbYmRmXS5pbnRyZW1hcF90YWJsZSwKKyAgICAgICAgICAgICAgICBpdnJz
X21hcHBpbmdzW2JkZl0uaW9tbXUsIGlvbW11X2ludHJlbWFwKTsKICAgICAgICAgIH0KICAgICAg
fQogIAotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfaW50ci5jCisrKyBi
L3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMKQEAgLTY5LDcgKzY5LDgg
QEAgdW5pb24gaXJ0ZV9jcHRyIHsKICAgICAgY29uc3QgdW5pb24gaXJ0ZTEyOCAqcHRyMTI4Owog
IH0gX190cmFuc3BhcmVudF9fOwogIAotI2RlZmluZSBJTlRSRU1BUF9NQVhfRU5UUklFUyAoMSA8
PCBJT01NVV9JTlRSRU1BUF9PUkRFUikKKyNkZWZpbmUgSU5UUkVNQVBfTUFYX09SREVSICAgMHhC
CisjZGVmaW5lIElOVFJFTUFQX01BWF9FTlRSSUVTICgxIDw8IElOVFJFTUFQX01BWF9PUkRFUikK
ICAKICBzdHJ1Y3QgaW9hcGljX3NiZGYgaW9hcGljX3NiZGZbTUFYX0lPX0FQSUNTXTsKICBzdHJ1
Y3QgaHBldF9zYmRmIGhwZXRfc2JkZjsKQEAgLTgwLDE3ICs4MSwxMyBAQCB1bnNpZ25lZCBpbnQg
bnJfaW9hcGljX3NiZGY7CiAgCiAgc3RhdGljIHZvaWQgZHVtcF9pbnRyZW1hcF90YWJsZXModW5z
aWduZWQgY2hhciBrZXkpOwogIAotc3RhdGljIHVuc2lnbmVkIGludCBfX2luaXQgaW50cmVtYXBf
dGFibGVfb3JkZXIoY29uc3Qgc3RydWN0IGFtZF9pb21tdSAqaW9tbXUpCi17Ci0gICAgcmV0dXJu
IGlvbW11LT5jdHJsLmdhX2VuCi0gICAgICAgICAgID8gZ2V0X29yZGVyX2Zyb21fYnl0ZXMoSU5U
UkVNQVBfTUFYX0VOVFJJRVMgKiBzaXplb2YodW5pb24gaXJ0ZTEyOCkpCi0gICAgICAgICAgIDog
Z2V0X29yZGVyX2Zyb21fYnl0ZXMoSU5UUkVNQVBfTUFYX0VOVFJJRVMgKiBzaXplb2YodW5pb24g
aXJ0ZTMyKSk7Ci19CisjZGVmaW5lIGludHJlbWFwX3BhZ2Vfb3JkZXIoaXJ0KSBQRk5fT1JERVIo
dmlydF90b19wYWdlKGlydCkpCiAgCiAgdW5zaWduZWQgaW50IGFtZF9pb21tdV9pbnRyZW1hcF90
YWJsZV9vcmRlcigKICAgICAgY29uc3Qgdm9pZCAqaXJ0LCBjb25zdCBzdHJ1Y3QgYW1kX2lvbW11
ICppb21tdSkKICB7Ci0gICAgcmV0dXJuIElPTU1VX0lOVFJFTUFQX09SREVSOworICAgIHJldHVy
biBpbnRyZW1hcF9wYWdlX29yZGVyKGlydCkgKyBQQUdFX1NISUZUIC0KKyAgICAgICAgICAgKGlv
bW11LT5jdHJsLmdhX2VuID8gNCA6IDIpOwogIH0KICAKICBzdGF0aWMgdW5zaWduZWQgaW50IGlu
dHJlbWFwX3RhYmxlX2VudHJpZXMoCkBAIC04MjUsNyArODIyLDEwIEBAIGludCBhbWRfaW9tbXVf
ZnJlZV9pbnRyZW1hcF90YWJsZSgKICAKICAgICAgaWYgKCAqdGJscCApCiAgICAgIHsKLSAgICAg
ICAgX19mcmVlX2FtZF9pb21tdV90YWJsZXMoKnRibHAsIGludHJlbWFwX3RhYmxlX29yZGVyKGlv
bW11KSk7CisgICAgICAgIHVuc2lnbmVkIGludCBvcmRlciA9IGludHJlbWFwX3BhZ2Vfb3JkZXIo
KnRibHApOworCisgICAgICAgIGludHJlbWFwX3BhZ2Vfb3JkZXIoKnRibHApID0gMDsKKyAgICAg
ICAgX19mcmVlX2FtZF9pb21tdV90YWJsZXMoKnRibHAsIG9yZGVyKTsKICAgICAgICAgICp0Ymxw
ID0gTlVMTDsKICAgICAgfQogIApAQCAtODMzLDE1ICs4MzMsMjMgQEAgaW50IGFtZF9pb21tdV9m
cmVlX2ludHJlbWFwX3RhYmxlKAogIH0KICAKICB2b2lkICphbWRfaW9tbXVfYWxsb2NfaW50cmVt
YXBfdGFibGUoCi0gICAgY29uc3Qgc3RydWN0IGFtZF9pb21tdSAqaW9tbXUsIHVuc2lnbmVkIGxv
bmcgKippbnVzZV9tYXApCisgICAgY29uc3Qgc3RydWN0IGFtZF9pb21tdSAqaW9tbXUsIHVuc2ln
bmVkIGxvbmcgKippbnVzZV9tYXAsIHVuc2lnbmVkIGludCBucikKICB7Ci0gICAgdW5zaWduZWQg
aW50IG9yZGVyID0gaW50cmVtYXBfdGFibGVfb3JkZXIoaW9tbXUpOwotICAgIHZvaWQgKnRiID0g
X19hbGxvY19hbWRfaW9tbXVfdGFibGVzKG9yZGVyKTsKKyAgICB1bnNpZ25lZCBpbnQgb3JkZXI7
CisgICAgdm9pZCAqdGI7CiAgCisgICAgaWYgKCAhbnIgKQorICAgICAgICBuciA9IElOVFJFTUFQ
X01BWF9FTlRSSUVTOworCisgICAgb3JkZXIgPSBpb21tdS0+Y3RybC5nYV9lbgorICAgICAgICAg
ICAgPyBnZXRfb3JkZXJfZnJvbV9ieXRlcyhuciAqIHNpemVvZih1bmlvbiBpcnRlMTI4KSkKKyAg
ICAgICAgICAgIDogZ2V0X29yZGVyX2Zyb21fYnl0ZXMobnIgKiBzaXplb2YodW5pb24gaXJ0ZTMy
KSk7CisKKyAgICB0YiA9IF9fYWxsb2NfYW1kX2lvbW11X3RhYmxlcyhvcmRlcik7CiAgICAgIGlm
ICggdGIgKQogICAgICB7Ci0gICAgICAgIHVuc2lnbmVkIGludCBuciA9IGludHJlbWFwX3RhYmxl
X2VudHJpZXModGIsIGlvbW11KTsKLQorICAgICAgICBpbnRyZW1hcF9wYWdlX29yZGVyKHRiKSA9
IG9yZGVyOworICAgICAgICBuciA9IGludHJlbWFwX3RhYmxlX2VudHJpZXModGIsIGlvbW11KTsK
ICAgICAgICAgICppbnVzZV9tYXAgPSB4emFsbG9jX2FycmF5KHVuc2lnbmVkIGxvbmcsIEJJVFNf
VE9fTE9OR1MobnIpKTsKICAgICAgICAgIGlmICggKmludXNlX21hcCApCiAgICAgICAgICAgICAg
bWVtc2V0KHRiLCAwLCBQQUdFX1NJWkUgPDwgb3JkZXIpOwotLS0gYS94ZW4vZHJpdmVycy9wYXNz
dGhyb3VnaC9hbWQvaW9tbXVfbWFwLmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1k
L2lvbW11X21hcC5jCkBAIC0xMTMsMTIgKzExMywyMiBAQCB2b2lkIGFtZF9pb21tdV9zZXRfcm9v
dF9wYWdlX3RhYmxlKHN0cnVjCiAgfQogIAogIHZvaWQgX19pbml0IGFtZF9pb21tdV9zZXRfaW50
cmVtYXBfdGFibGUoCi0gICAgc3RydWN0IGFtZF9pb21tdV9kdGUgKmR0ZSwgdWludDY0X3QgaW50
cmVtYXBfcHRyLCBib29sIHZhbGlkKQorICAgIHN0cnVjdCBhbWRfaW9tbXVfZHRlICpkdGUsIGNv
bnN0IHZvaWQgKnB0ciwKKyAgICBjb25zdCBzdHJ1Y3QgYW1kX2lvbW11ICppb21tdSwgYm9vbCB2
YWxpZCkKICB7Ci0gICAgZHRlLT5pdF9yb290ID0gaW50cmVtYXBfcHRyID4+IDY7Ci0gICAgZHRl
LT5pbnRfdGFiX2xlbiA9IGludHJlbWFwX3B0ciA/IElPTU1VX0lOVFJFTUFQX09SREVSIDogMDsK
LSAgICBkdGUtPmludF9jdGwgPSBpbnRyZW1hcF9wdHIgPyBJT01NVV9ERVZfVEFCTEVfSU5UX0NP
TlRST0xfVFJBTlNMQVRFRAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IElPTU1V
X0RFVl9UQUJMRV9JTlRfQ09OVFJPTF9BQk9SVEVEOworICAgIGlmICggcHRyICkKKyAgICB7Cisg
ICAgICAgIGR0ZS0+aXRfcm9vdCA9IHZpcnRfdG9fbWFkZHIocHRyKSA+PiA2OworICAgICAgICBk
dGUtPmludF90YWJfbGVuID0gYW1kX2lvbW11X2ludHJlbWFwX3RhYmxlX29yZGVyKHB0ciwgaW9t
bXUpOworICAgICAgICBkdGUtPmludF9jdGwgPSBJT01NVV9ERVZfVEFCTEVfSU5UX0NPTlRST0xf
VFJBTlNMQVRFRDsKKyAgICB9CisgICAgZWxzZQorICAgIHsKKyAgICAgICAgZHRlLT5pdF9yb290
ID0gMDsKKyAgICAgICAgZHRlLT5pbnRfdGFiX2xlbiA9IDA7CisgICAgICAgIGR0ZS0+aW50X2N0
bCA9IElPTU1VX0RFVl9UQUJMRV9JTlRfQ09OVFJPTF9BQk9SVEVEOworICAgIH0KKwogICAgICBk
dGUtPmlnID0gZmFsc2U7IC8qIHVubWFwcGVkIGludGVycnVwdHMgcmVzdWx0IGluIGkvbyBwYWdl
IGZhdWx0cyAqLwogICAgICBkdGUtPml2ID0gdmFsaWQ7CiAgfQotLS0gYS94ZW4vZHJpdmVycy9w
YXNzdGhyb3VnaC9hbWQvcGNpX2FtZF9pb21tdS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL2FtZC9wY2lfYW1kX2lvbW11LmMKQEAgLTQ3MSwxNiArNDcxLDE1IEBAIHN0YXRpYyBpbnQg
YW1kX2lvbW11X2FkZF9kZXZpY2UodTggZGV2Zm4KICAgICAgewogICAgICAgICAgaXZyc19tYXBw
aW5nc1tiZGZdLmludHJlbWFwX3RhYmxlID0KICAgICAgICAgICAgICBhbWRfaW9tbXVfYWxsb2Nf
aW50cmVtYXBfdGFibGUoCi0gICAgICAgICAgICAgICAgaW9tbXUsICZpdnJzX21hcHBpbmdzW2Jk
Zl0uaW50cmVtYXBfaW51c2UpOworICAgICAgICAgICAgICAgIGlvbW11LCAmaXZyc19tYXBwaW5n
c1tiZGZdLmludHJlbWFwX2ludXNlLAorICAgICAgICAgICAgICAgIHBkZXYtPm1zaXggPyBwZGV2
LT5tc2l4LT5ucl9lbnRyaWVzCisgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG11bHRpX21z
aV9jYXBhYmxlKH4wdSkpOwogICAgICAgICAgaWYgKCAhaXZyc19tYXBwaW5nc1tiZGZdLmludHJl
bWFwX3RhYmxlICkKICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKICAKICAgICAgICAgIGFt
ZF9pb21tdV9zZXRfaW50cmVtYXBfdGFibGUoCiAgICAgICAgICAgICAgaW9tbXUtPmRldl90YWJs
ZS5idWZmZXIgKyAoYmRmICogSU9NTVVfREVWX1RBQkxFX0VOVFJZX1NJWkUpLAotICAgICAgICAg
ICAgaXZyc19tYXBwaW5nc1tiZGZdLmludHJlbWFwX3RhYmxlCi0gICAgICAgICAgICA/IHZpcnRf
dG9fbWFkZHIoaXZyc19tYXBwaW5nc1tiZGZdLmludHJlbWFwX3RhYmxlKQotICAgICAgICAgICAg
OiAwLAotICAgICAgICAgICAgaW9tbXVfaW50cmVtYXApOworICAgICAgICAgICAgaXZyc19tYXBw
aW5nc1tiZGZdLmludHJlbWFwX3RhYmxlLCBpb21tdSwgaW9tbXVfaW50cmVtYXApOwogIAogICAg
ICAgICAgYW1kX2lvbW11X2ZsdXNoX2RldmljZShpb21tdSwgYmRmKTsKICAgICAgfQotLS0gYS94
ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LWRlZnMuaAorKysgYi94ZW4vaW5j
bHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LWRlZnMuaApAQCAtMTA3LDkgKzEwNyw2IEBA
CiAgI2RlZmluZSBJT01NVV9ERVZfVEFCTEVfSU5UX0NPTlRST0xfRk9SV0FSREVECTB4MQogICNk
ZWZpbmUgSU9NTVVfREVWX1RBQkxFX0lOVF9DT05UUk9MX1RSQU5TTEFURUQJMHgyCiAgCi0vKiBG
b3Igbm93LCB3ZSBhbHdheXMgYWxsb2NhdGUgdGhlIG1heGltdW06IDIwNDggZW50cmllcy4gKi8K
LSNkZWZpbmUgSU9NTVVfSU5UUkVNQVBfT1JERVIJCQkweEIKLQogIHN0cnVjdCBhbWRfaW9tbXVf
ZHRlIHsKICAgICAgLyogMCAtIDYzICovCiAgICAgIGJvb2wgdjoxOwotLS0gYS94ZW4vaW5jbHVk
ZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LXByb3RvLmgKKysrIGIveGVuL2luY2x1ZGUvYXNt
LXg4Ni9odm0vc3ZtL2FtZC1pb21tdS1wcm90by5oCkBAIC03Miw3ICs3Miw4IEBAIGludCBfX211
c3RfY2hlY2sgYW1kX2lvbW11X2ZsdXNoX2lvdGxiX2EKICAvKiBkZXZpY2UgdGFibGUgZnVuY3Rp
b25zICovCiAgaW50IGdldF9kbWFfcmVxdWVzdG9yX2lkKHVpbnQxNl90IHNlZywgdWludDE2X3Qg
YmRmKTsKICB2b2lkIGFtZF9pb21tdV9zZXRfaW50cmVtYXBfdGFibGUoc3RydWN0IGFtZF9pb21t
dV9kdGUgKmR0ZSwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRfdCBp
bnRyZW1hcF9wdHIsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgdm9p
ZCAqcHRyLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBh
bWRfaW9tbXUgKmlvbW11LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29s
IHZhbGlkKTsKICB2b2lkIGFtZF9pb21tdV9zZXRfcm9vdF9wYWdlX3RhYmxlKHN0cnVjdCBhbWRf
aW9tbXVfZHRlICpkdGUsCiAgCQkJCSAgIHVpbnQ2NF90IHJvb3RfcHRyLCB1aW50MTZfdCBkb21h
aW5faWQsCkBAIC05OSw3ICsxMDAsNyBAQCBzdHJ1Y3QgYW1kX2lvbW11ICpmaW5kX2lvbW11X2Zv
cl9kZXZpY2UoCiAgYm9vbCBpb3Zfc3VwcG9ydHNfeHQodm9pZCk7CiAgaW50IGFtZF9pb21tdV9z
ZXR1cF9pb2FwaWNfcmVtYXBwaW5nKHZvaWQpOwogIHZvaWQgKmFtZF9pb21tdV9hbGxvY19pbnRy
ZW1hcF90YWJsZSgKLSAgICBjb25zdCBzdHJ1Y3QgYW1kX2lvbW11ICosIHVuc2lnbmVkIGxvbmcg
KiopOworICAgIGNvbnN0IHN0cnVjdCBhbWRfaW9tbXUgKiwgdW5zaWduZWQgbG9uZyAqKiwgdW5z
aWduZWQgaW50IG5yKTsKICBpbnQgYW1kX2lvbW11X2ZyZWVfaW50cmVtYXBfdGFibGUoCiAgICAg
IGNvbnN0IHN0cnVjdCBhbWRfaW9tbXUgKiwgc3RydWN0IGl2cnNfbWFwcGluZ3MgKiwgdWludDE2
X3QpOwogIHVuc2lnbmVkIGludCBhbWRfaW9tbXVfaW50cmVtYXBfdGFibGVfb3JkZXIoCgoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1h
aWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54
ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2A9B31297FE
	for <lists+xen-devel@lfdr.de>; Mon, 23 Dec 2019 16:20:39 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ijPTE-0006Mt-AY; Mon, 23 Dec 2019 15:18:08 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=o8ed=2N=gmail.com=rosbrookn@srs-us1.protection.inumbo.net>)
 id 1ijPTC-0006MU-Hm
 for xen-devel@lists.xenproject.org; Mon, 23 Dec 2019 15:18:06 +0000
X-Inumbo-ID: 62f4c4fe-2597-11ea-88e7-bc764e2007e4
Received: from mail-qk1-x744.google.com (unknown [2607:f8b0:4864:20::744])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 62f4c4fe-2597-11ea-88e7-bc764e2007e4;
 Mon, 23 Dec 2019 15:17:51 +0000 (UTC)
Received: by mail-qk1-x744.google.com with SMTP id x129so13753360qke.8
 for <xen-devel@lists.xenproject.org>; Mon, 23 Dec 2019 07:17:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :in-reply-to:references;
 bh=qIWGvbOapJP2AMLuU/QSd6YoV6wyKIPa2DBivfqk0oM=;
 b=IumXkIqV/+z4N/B3UxV00k4EkHHJG/8wzAL8aImJ5z23H/QJkA7+gnV54RcPqGtmkT
 jjrsVGYwKqDb6IHLXr8Di4bbX+OeeeCibbrqfRnu8x0ulkyffgi+VDm3yyWAMJEwW7qp
 2XXOV9dVvFsBuQ3VfEbQzX4RhXX9YBpan6Wux9Hnr9od5BoLV+Ol4t+mKKisG7T6G0k+
 aIuSdDKDS0ALkJ9ZpI9cdb6Arm/n7Sdq4I9HSNmsxqQPe0s5KGkajYSvotgBLmbxI6gl
 2Gx/wuqJ3Lejwijz+j8Ku7CJpOqomZqsEEW8T1a3FbITMaxdurE7vsnA9qI8/R3b3PK0
 zpww==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:in-reply-to:references;
 bh=qIWGvbOapJP2AMLuU/QSd6YoV6wyKIPa2DBivfqk0oM=;
 b=bM5+/KOF1SEUeB5Oyzbq82gX8qq+5frNgMGHtNnzITzeqBbNAs50HClI8hQIOQ20P+
 Eaph52ZFJlv4Xj5y7ULizrMYo4BVRxiTjQukrSlvCbH5un93kVc7tawBYowJizkIg+6B
 sXRZitvir/SXrOU9L8JBYxVlQ9Ycp+3EYE93sCPw5mh9gol4xTZgr9/i/v9je02gqSwc
 stG/VLlo9l/ehT15N+vgktWIaoG+hOkfvPWDefqLWwIJfLADvlIK7I45N6032NHeeabR
 +WDgQawRy6nvu53jcNZRu+x3axSQnRCANOeyIKBWZ2FEAHRfAi2eib0OYo49Nbcg53ag
 4QIA==
X-Gm-Message-State: APjAAAXXzU4P5gKB4c9ZleMoK1WTrx7xRCyyNxwKApPpfx7tqXz7ruSE
 W8bds8gKdxnpPsBIuP+YQ0wmVJn9
X-Google-Smtp-Source: APXvYqwmHOR8L9pUzbHCp0x+MPveQPT75YHeS7KxiuIKxuOmnzjZiRSxWdRXrYxNvsOtRsdP1nIfQw==
X-Received: by 2002:a05:620a:b19:: with SMTP id
 t25mr27133610qkg.82.1577114270958; 
 Mon, 23 Dec 2019 07:17:50 -0800 (PST)
Received: from four.lan (cpe-67-241-56-252.twcny.res.rr.com. [67.241.56.252])
 by smtp.gmail.com with ESMTPSA id
 u15sm5823907qku.67.2019.12.23.07.17.49
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 23 Dec 2019 07:17:50 -0800 (PST)
From: Nick Rosbrook <rosbrookn@gmail.com>
X-Google-Original-From: Nick Rosbrook <rosbrookn@ainfosec.com>
To: xen-devel@lists.xenproject.org
Date: Mon, 23 Dec 2019 10:17:05 -0500
Message-Id: <88056982bc116611da601b2d1249bb4be4bc07e9.1577111872.git.rosbrookn@ainfosec.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <cover.1577111872.git.rosbrookn@ainfosec.com>
References: <cover.1577111872.git.rosbrookn@ainfosec.com>
In-Reply-To: <cover.1577111872.git.rosbrookn@ainfosec.com>
References: <cover.1577111872.git.rosbrookn@ainfosec.com>
Subject: [Xen-devel] [PATCH v4 4/6] golang/xenlight: implement array Go to C
 marshaling
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Nick Rosbrook <rosbrookn@ainfosec.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, kerriganb@ainfosec.com,
 George Dunlap <george.dunlap@citrix.com>, Wei Liu <wl@xen.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

U2lnbmVkLW9mZi1ieTogTmljayBSb3Nicm9vayA8cm9zYnJvb2tuQGFpbmZvc2VjLmNvbT4KLS0t
CiB0b29scy9nb2xhbmcveGVubGlnaHQvZ2VuZ290eXBlcy5weSAgfCAgNDQgKysrLQogdG9vbHMv
Z29sYW5nL3hlbmxpZ2h0L2hlbHBlcnMuZ2VuLmdvIHwgMzU5ICsrKysrKysrKysrKysrKysrKysr
KysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCA0MDIgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigt
KQoKZGlmZiAtLWdpdCBhL3Rvb2xzL2dvbGFuZy94ZW5saWdodC9nZW5nb3R5cGVzLnB5IGIvdG9v
bHMvZ29sYW5nL3hlbmxpZ2h0L2dlbmdvdHlwZXMucHkKaW5kZXggYjM3N2ZkOWEyNS4uYTk3Mjc1
NGQzNiAxMDA2NDQKLS0tIGEvdG9vbHMvZ29sYW5nL3hlbmxpZ2h0L2dlbmdvdHlwZXMucHkKKysr
IGIvdG9vbHMvZ29sYW5nL3hlbmxpZ2h0L2dlbmdvdHlwZXMucHkKQEAgLTQ1Niw3ICs0NTYsNyBA
QCBkZWYgeGVubGlnaHRfZ29sYW5nX2RlZmluZV90b19DKHR5ID0gTm9uZSwgdHlwZW5hbWUgPSBO
b25lLCBuZXN0ZWQgPSBGYWxzZSk6CiAgICAgZm9yIGYgaW4gdHkuZmllbGRzOgogICAgICAgICBp
ZiBmLnR5cGUudHlwZW5hbWUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICBpZiBpc2luc3RhbmNl
KGYudHlwZSwgaWRsLkFycmF5KToKLSAgICAgICAgICAgICAgICAjIFRPRE8KKyAgICAgICAgICAg
ICAgICBzICs9IHhlbmxpZ2h0X2dvbGFuZ19hcnJheV90b19DKGYsIHR5LmRpc3Bvc2VfZm4pCiAg
ICAgICAgICAgICAgICAgY29udGludWUKIAogICAgICAgICAgICAgZ290eXBlbmFtZSA9IHhlbmxp
Z2h0X2dvbGFuZ19mbXRfbmFtZShmLnR5cGUudHlwZW5hbWUpCkBAIC01ODcsNiArNTg3LDQ4IEBA
IGRlZiB4ZW5saWdodF9nb2xhbmdfdW5pb25fdG9fQyh0eSA9IE5vbmUsIHVuaW9uX25hbWUgPSAn
JywKIAogICAgIHJldHVybiBzCiAKK2RlZiB4ZW5saWdodF9nb2xhbmdfYXJyYXlfdG9fQyh0eSA9
IE5vbmUsIGRpc3Bvc2VfZm4gPSAnJyk6CisgICAgcyA9ICcnCisKKyAgICBnb3R5cGVuYW1lID0g
eGVubGlnaHRfZ29sYW5nX2ZtdF9uYW1lKHR5LnR5cGUuZWxlbV90eXBlLnR5cGVuYW1lKQorICAg
IGdvbmFtZSAgICAgPSB4ZW5saWdodF9nb2xhbmdfZm10X25hbWUodHkubmFtZSkKKyAgICBjdHlw
ZW5hbWUgID0gdHkudHlwZS5lbGVtX3R5cGUudHlwZW5hbWUKKyAgICBjbmFtZSAgICAgID0gdHku
bmFtZQorICAgIGNsZW52YXIgICAgPSB0eS50eXBlLmxlbnZhci5uYW1lCisgICAgZ29sZW52YXIg
ICA9IHhlbmxpZ2h0X2dvbGFuZ19mbXRfbmFtZShjbGVudmFyLGV4cG9ydGVkPUZhbHNlKQorCisg
ICAgaXNfZW51bSA9IGlzaW5zdGFuY2UodHkudHlwZS5lbGVtX3R5cGUsaWRsLkVudW1lcmF0aW9u
KQorICAgIGlmIGdvdHlwZW5hbWUgaW4gZ29fYnVpbHRpbl90eXBlcyBvciBpc19lbnVtOgorICAg
ICAgICBzICs9ICd7fSA6PSBsZW4oeC57fSlcbicuZm9ybWF0KGdvbGVudmFyLGdvbmFtZSkKKyAg
ICAgICAgcyArPSAneGMue30gPSAoKkMue30pKEMubWFsbG9jKEMuc2l6ZV90KHt9Knt9KSkpXG4n
LmZvcm1hdChjbmFtZSxjdHlwZW5hbWUsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29sZW52YXIsZ29sZW52YXIpCisg
ICAgICAgIHMgKz0gJ3hjLnt9ID0gQy5pbnQoe30pXG4nLmZvcm1hdChjbGVudmFyLGdvbGVudmFy
KQorICAgICAgICBzICs9ICdje30gOj0gKCpbMTw8MjhdQy57fSkodW5zYWZlLlBvaW50ZXIoeGMu
e30pKVs6e306e31dXG4nLmZvcm1hdChnb25hbWUsCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R5cGVuYW1lLGNu
YW1lLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGdvbGVudmFyLGdvbGVudmFyKQorICAgICAgICBzICs9ICdmb3Ig
aSx2IDo9IHJhbmdlIHgue30ge3tcbicuZm9ybWF0KGdvbmFtZSkKKyAgICAgICAgcyArPSAnY3t9
W2ldID0gQy57fSh2KVxuJy5mb3JtYXQoZ29uYW1lLGN0eXBlbmFtZSkKKyAgICAgICAgcyArPSAn
fVxuJworCisgICAgICAgIHJldHVybiBzCisKKyAgICBzICs9ICd7fSA6PSBsZW4oeC57fSlcbicu
Zm9ybWF0KGdvbGVudmFyLGdvbmFtZSkKKyAgICBzICs9ICd4Yy57fSA9ICgqQy57fSkoQy5tYWxs
b2MoQy51bG9uZyh7fSkqQy5zaXplb2Zfe30pKVxuJy5mb3JtYXQoY25hbWUsY3R5cGVuYW1lLAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGdvbGVudmFyLGN0eXBlbmFtZSkKKyAgICBzICs9ICd4Yy57fSA9IEMuaW50KHt9
KVxuJy5mb3JtYXQoY2xlbnZhcixnb2xlbnZhcikKKyAgICBzICs9ICdje30gOj0gKCpbMTw8Mjhd
Qy57fSkodW5zYWZlLlBvaW50ZXIoeGMue30pKVs6e306e31dXG4nLmZvcm1hdChnb25hbWUsCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgY3R5cGVuYW1lLGNuYW1lLAorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvbGVudmFy
LGdvbGVudmFyKQorICAgIHMgKz0gJ2ZvciBpLHYgOj0gcmFuZ2UgeC57fSB7e1xuJy5mb3JtYXQo
Z29uYW1lKQorICAgIHMgKz0gJ3RtcCwgZXJyIDo9IHYudG9DKClcbicKKyAgICBzICs9ICdpZiBl
cnIgIT0gbmlsIHtcbicKKyAgICBzICs9ICdDLnt9KCZ4YylcbicuZm9ybWF0KGRpc3Bvc2VfZm4p
CisgICAgcyArPSAncmV0dXJuIHhjLGVyclxufVxuJworICAgIHMgKz0gJ2N7fVtpXSA9IHRtcFxu
Jy5mb3JtYXQoZ29uYW1lKQorICAgIHMgKz0gJ31cbicKKworICAgIHJldHVybiBzCisKIGRlZiB4
ZW5saWdodF9nb2xhbmdfZm10X25hbWUobmFtZSwgZXhwb3J0ZWQgPSBUcnVlKToKICAgICAiIiIK
ICAgICBUYWtlIGEgZ2l2ZW4gdHlwZSBuYW1lIGFuZCByZXR1cm4gYW4KZGlmZiAtLWdpdCBhL3Rv
b2xzL2dvbGFuZy94ZW5saWdodC9oZWxwZXJzLmdlbi5nbyBiL3Rvb2xzL2dvbGFuZy94ZW5saWdo
dC9oZWxwZXJzLmdlbi5nbwppbmRleCAxNTU0OGY5ZDZlLi4zZTU4OGRkMWMyIDEwMDY0NAotLS0g
YS90b29scy9nb2xhbmcveGVubGlnaHQvaGVscGVycy5nZW4uZ28KKysrIGIvdG9vbHMvZ29sYW5n
L3hlbmxpZ2h0L2hlbHBlcnMuZ2VuLmdvCkBAIC01NDMsNiArNTQzLDE4IEBAIGZ1bmMgKHggKlZj
cHVTY2hlZFBhcmFtcykgZnJvbUMoeGMgKkMubGlieGxfdmNwdV9zY2hlZF9wYXJhbXMpIGVycm9y
IHsKIGZ1bmMgKHggKlZjcHVTY2hlZFBhcmFtcykgdG9DKCkgKHhjIEMubGlieGxfdmNwdV9zY2hl
ZF9wYXJhbXMsIGVyciBlcnJvcikgewogCUMubGlieGxfdmNwdV9zY2hlZF9wYXJhbXNfaW5pdCgm
eGMpCiAJeGMuc2NoZWQgPSBDLmxpYnhsX3NjaGVkdWxlcih4LlNjaGVkKQorCW51bVZjcHVzIDo9
IGxlbih4LlZjcHVzKQorCXhjLnZjcHVzID0gKCpDLmxpYnhsX3NjaGVkX3BhcmFtcykoQy5tYWxs
b2MoQy51bG9uZyhudW1WY3B1cykgKiBDLnNpemVvZl9saWJ4bF9zY2hlZF9wYXJhbXMpKQorCXhj
Lm51bV92Y3B1cyA9IEMuaW50KG51bVZjcHVzKQorCWNWY3B1cyA6PSAoKlsxIDw8IDI4XUMubGli
eGxfc2NoZWRfcGFyYW1zKSh1bnNhZmUuUG9pbnRlcih4Yy52Y3B1cykpWzpudW1WY3B1czpudW1W
Y3B1c10KKwlmb3IgaSwgdiA6PSByYW5nZSB4LlZjcHVzIHsKKwkJdG1wLCBlcnIgOj0gdi50b0Mo
KQorCQlpZiBlcnIgIT0gbmlsIHsKKwkJCUMubGlieGxfdmNwdV9zY2hlZF9wYXJhbXNfZGlzcG9z
ZSgmeGMpCisJCQlyZXR1cm4geGMsIGVycgorCQl9CisJCWNWY3B1c1tpXSA9IHRtcAorCX0KIAly
ZXR1cm4geGMsIG5pbAogfQogCkBAIC01OTEsNiArNjAzLDEzIEBAIGZ1bmMgKHggKlZub2RlSW5m
bykgZnJvbUMoeGMgKkMubGlieGxfdm5vZGVfaW5mbykgZXJyb3IgewogZnVuYyAoeCAqVm5vZGVJ
bmZvKSB0b0MoKSAoeGMgQy5saWJ4bF92bm9kZV9pbmZvLCBlcnIgZXJyb3IpIHsKIAlDLmxpYnhs
X3Zub2RlX2luZm9faW5pdCgmeGMpCiAJeGMubWVta2IgPSBDLnVpbnQ2NF90KHguTWVta2IpCisJ
bnVtRGlzdGFuY2VzIDo9IGxlbih4LkRpc3RhbmNlcykKKwl4Yy5kaXN0YW5jZXMgPSAoKkMudWlu
dDMyX3QpKEMubWFsbG9jKEMuc2l6ZV90KG51bURpc3RhbmNlcyAqIG51bURpc3RhbmNlcykpKQor
CXhjLm51bV9kaXN0YW5jZXMgPSBDLmludChudW1EaXN0YW5jZXMpCisJY0Rpc3RhbmNlcyA6PSAo
KlsxIDw8IDI4XUMudWludDMyX3QpKHVuc2FmZS5Qb2ludGVyKHhjLmRpc3RhbmNlcykpWzpudW1E
aXN0YW5jZXM6bnVtRGlzdGFuY2VzXQorCWZvciBpLCB2IDo9IHJhbmdlIHguRGlzdGFuY2VzIHsK
KwkJY0Rpc3RhbmNlc1tpXSA9IEMudWludDMyX3QodikKKwl9CiAJeGMucG5vZGUgPSBDLnVpbnQz
Ml90KHguUG5vZGUpCiAJeGMudmNwdXMsIGVyciA9IHguVmNwdXMudG9DKCkKIAlpZiBlcnIgIT0g
bmlsIHsKQEAgLTkzNCw2ICs5NTMsMzAgQEAgZnVuYyAoeCAqRG9tYWluQnVpbGRJbmZvKSB0b0Mo
KSAoeGMgQy5saWJ4bF9kb21haW5fYnVpbGRfaW5mbywgZXJyIGVycm9yKSB7CiAJCUMubGlieGxf
ZG9tYWluX2J1aWxkX2luZm9fZGlzcG9zZSgmeGMpCiAJCXJldHVybiB4YywgZXJyCiAJfQorCW51
bVZjcHVIYXJkQWZmaW5pdHkgOj0gbGVuKHguVmNwdUhhcmRBZmZpbml0eSkKKwl4Yy52Y3B1X2hh
cmRfYWZmaW5pdHkgPSAoKkMubGlieGxfYml0bWFwKShDLm1hbGxvYyhDLnVsb25nKG51bVZjcHVI
YXJkQWZmaW5pdHkpICogQy5zaXplb2ZfbGlieGxfYml0bWFwKSkKKwl4Yy5udW1fdmNwdV9oYXJk
X2FmZmluaXR5ID0gQy5pbnQobnVtVmNwdUhhcmRBZmZpbml0eSkKKwljVmNwdUhhcmRBZmZpbml0
eSA6PSAoKlsxIDw8IDI4XUMubGlieGxfYml0bWFwKSh1bnNhZmUuUG9pbnRlcih4Yy52Y3B1X2hh
cmRfYWZmaW5pdHkpKVs6bnVtVmNwdUhhcmRBZmZpbml0eTpudW1WY3B1SGFyZEFmZmluaXR5XQor
CWZvciBpLCB2IDo9IHJhbmdlIHguVmNwdUhhcmRBZmZpbml0eSB7CisJCXRtcCwgZXJyIDo9IHYu
dG9DKCkKKwkJaWYgZXJyICE9IG5pbCB7CisJCQlDLmxpYnhsX2RvbWFpbl9idWlsZF9pbmZvX2Rp
c3Bvc2UoJnhjKQorCQkJcmV0dXJuIHhjLCBlcnIKKwkJfQorCQljVmNwdUhhcmRBZmZpbml0eVtp
XSA9IHRtcAorCX0KKwludW1WY3B1U29mdEFmZmluaXR5IDo9IGxlbih4LlZjcHVTb2Z0QWZmaW5p
dHkpCisJeGMudmNwdV9zb2Z0X2FmZmluaXR5ID0gKCpDLmxpYnhsX2JpdG1hcCkoQy5tYWxsb2Mo
Qy51bG9uZyhudW1WY3B1U29mdEFmZmluaXR5KSAqIEMuc2l6ZW9mX2xpYnhsX2JpdG1hcCkpCisJ
eGMubnVtX3ZjcHVfc29mdF9hZmZpbml0eSA9IEMuaW50KG51bVZjcHVTb2Z0QWZmaW5pdHkpCisJ
Y1ZjcHVTb2Z0QWZmaW5pdHkgOj0gKCpbMSA8PCAyOF1DLmxpYnhsX2JpdG1hcCkodW5zYWZlLlBv
aW50ZXIoeGMudmNwdV9zb2Z0X2FmZmluaXR5KSlbOm51bVZjcHVTb2Z0QWZmaW5pdHk6bnVtVmNw
dVNvZnRBZmZpbml0eV0KKwlmb3IgaSwgdiA6PSByYW5nZSB4LlZjcHVTb2Z0QWZmaW5pdHkgewor
CQl0bXAsIGVyciA6PSB2LnRvQygpCisJCWlmIGVyciAhPSBuaWwgeworCQkJQy5saWJ4bF9kb21h
aW5fYnVpbGRfaW5mb19kaXNwb3NlKCZ4YykKKwkJCXJldHVybiB4YywgZXJyCisJCX0KKwkJY1Zj
cHVTb2Z0QWZmaW5pdHlbaV0gPSB0bXAKKwl9CiAJeGMubnVtYV9wbGFjZW1lbnQsIGVyciA9IHgu
TnVtYVBsYWNlbWVudC50b0MoKQogCWlmIGVyciAhPSBuaWwgewogCQlDLmxpYnhsX2RvbWFpbl9i
dWlsZF9pbmZvX2Rpc3Bvc2UoJnhjKQpAQCAtOTY0LDYgKzEwMDcsMTggQEAgZnVuYyAoeCAqRG9t
YWluQnVpbGRJbmZvKSB0b0MoKSAoeGMgQy5saWJ4bF9kb21haW5fYnVpbGRfaW5mbywgZXJyIGVy
cm9yKSB7CiAJCXJldHVybiB4YywgZXJyCiAJfQogCXhjLmJsa2Rldl9zdGFydCA9IEMuQ1N0cmlu
Zyh4LkJsa2RldlN0YXJ0KQorCW51bVZudW1hTm9kZXMgOj0gbGVuKHguVm51bWFOb2RlcykKKwl4
Yy52bnVtYV9ub2RlcyA9ICgqQy5saWJ4bF92bm9kZV9pbmZvKShDLm1hbGxvYyhDLnVsb25nKG51
bVZudW1hTm9kZXMpICogQy5zaXplb2ZfbGlieGxfdm5vZGVfaW5mbykpCisJeGMubnVtX3ZudW1h
X25vZGVzID0gQy5pbnQobnVtVm51bWFOb2RlcykKKwljVm51bWFOb2RlcyA6PSAoKlsxIDw8IDI4
XUMubGlieGxfdm5vZGVfaW5mbykodW5zYWZlLlBvaW50ZXIoeGMudm51bWFfbm9kZXMpKVs6bnVt
Vm51bWFOb2RlczpudW1WbnVtYU5vZGVzXQorCWZvciBpLCB2IDo9IHJhbmdlIHguVm51bWFOb2Rl
cyB7CisJCXRtcCwgZXJyIDo9IHYudG9DKCkKKwkJaWYgZXJyICE9IG5pbCB7CisJCQlDLmxpYnhs
X2RvbWFpbl9idWlsZF9pbmZvX2Rpc3Bvc2UoJnhjKQorCQkJcmV0dXJuIHhjLCBlcnIKKwkJfQor
CQljVm51bWFOb2Rlc1tpXSA9IHRtcAorCX0KIAl4Yy5tYXhfZ3JhbnRfZnJhbWVzID0gQy51aW50
MzJfdCh4Lk1heEdyYW50RnJhbWVzKQogCXhjLm1heF9tYXB0cmFja19mcmFtZXMgPSBDLnVpbnQz
Ml90KHguTWF4TWFwdHJhY2tGcmFtZXMpCiAJeGMuZGV2aWNlX21vZGVsX3ZlcnNpb24gPSBDLmxp
YnhsX2RldmljZV9tb2RlbF92ZXJzaW9uKHguRGV2aWNlTW9kZWxWZXJzaW9uKQpAQCAtOTk2LDYg
KzEwNTEsMzcgQEAgZnVuYyAoeCAqRG9tYWluQnVpbGRJbmZvKSB0b0MoKSAoeGMgQy5saWJ4bF9k
b21haW5fYnVpbGRfaW5mbywgZXJyIGVycm9yKSB7CiAJCUMubGlieGxfZG9tYWluX2J1aWxkX2lu
Zm9fZGlzcG9zZSgmeGMpCiAJCXJldHVybiB4YywgZXJyCiAJfQorCW51bUlvcG9ydHMgOj0gbGVu
KHguSW9wb3J0cykKKwl4Yy5pb3BvcnRzID0gKCpDLmxpYnhsX2lvcG9ydF9yYW5nZSkoQy5tYWxs
b2MoQy51bG9uZyhudW1Jb3BvcnRzKSAqIEMuc2l6ZW9mX2xpYnhsX2lvcG9ydF9yYW5nZSkpCisJ
eGMubnVtX2lvcG9ydHMgPSBDLmludChudW1Jb3BvcnRzKQorCWNJb3BvcnRzIDo9ICgqWzEgPDwg
MjhdQy5saWJ4bF9pb3BvcnRfcmFuZ2UpKHVuc2FmZS5Qb2ludGVyKHhjLmlvcG9ydHMpKVs6bnVt
SW9wb3J0czpudW1Jb3BvcnRzXQorCWZvciBpLCB2IDo9IHJhbmdlIHguSW9wb3J0cyB7CisJCXRt
cCwgZXJyIDo9IHYudG9DKCkKKwkJaWYgZXJyICE9IG5pbCB7CisJCQlDLmxpYnhsX2RvbWFpbl9i
dWlsZF9pbmZvX2Rpc3Bvc2UoJnhjKQorCQkJcmV0dXJuIHhjLCBlcnIKKwkJfQorCQljSW9wb3J0
c1tpXSA9IHRtcAorCX0KKwludW1JcnFzIDo9IGxlbih4LklycXMpCisJeGMuaXJxcyA9ICgqQy51
aW50MzJfdCkoQy5tYWxsb2MoQy5zaXplX3QobnVtSXJxcyAqIG51bUlycXMpKSkKKwl4Yy5udW1f
aXJxcyA9IEMuaW50KG51bUlycXMpCisJY0lycXMgOj0gKCpbMSA8PCAyOF1DLnVpbnQzMl90KSh1
bnNhZmUuUG9pbnRlcih4Yy5pcnFzKSlbOm51bUlycXM6bnVtSXJxc10KKwlmb3IgaSwgdiA6PSBy
YW5nZSB4LklycXMgeworCQljSXJxc1tpXSA9IEMudWludDMyX3QodikKKwl9CisJbnVtSW9tZW0g
Oj0gbGVuKHguSW9tZW0pCisJeGMuaW9tZW0gPSAoKkMubGlieGxfaW9tZW1fcmFuZ2UpKEMubWFs
bG9jKEMudWxvbmcobnVtSW9tZW0pICogQy5zaXplb2ZfbGlieGxfaW9tZW1fcmFuZ2UpKQorCXhj
Lm51bV9pb21lbSA9IEMuaW50KG51bUlvbWVtKQorCWNJb21lbSA6PSAoKlsxIDw8IDI4XUMubGli
eGxfaW9tZW1fcmFuZ2UpKHVuc2FmZS5Qb2ludGVyKHhjLmlvbWVtKSlbOm51bUlvbWVtOm51bUlv
bWVtXQorCWZvciBpLCB2IDo9IHJhbmdlIHguSW9tZW0geworCQl0bXAsIGVyciA6PSB2LnRvQygp
CisJCWlmIGVyciAhPSBuaWwgeworCQkJQy5saWJ4bF9kb21haW5fYnVpbGRfaW5mb19kaXNwb3Nl
KCZ4YykKKwkJCXJldHVybiB4YywgZXJyCisJCX0KKwkJY0lvbWVtW2ldID0gdG1wCisJfQogCXhj
LmNsYWltX21vZGUsIGVyciA9IHguQ2xhaW1Nb2RlLnRvQygpCiAJaWYgZXJyICE9IG5pbCB7CiAJ
CUMubGlieGxfZG9tYWluX2J1aWxkX2luZm9fZGlzcG9zZSgmeGMpCkBAIC0xODIxLDYgKzE5MDcs
MTggQEAgZnVuYyAoeCAqRGV2aWNlVmRpc3BsKSB0b0MoKSAoeGMgQy5saWJ4bF9kZXZpY2VfdmRp
c3BsLCBlcnIgZXJyb3IpIHsKIAl4Yy5iYWNrZW5kX2RvbW5hbWUgPSBDLkNTdHJpbmcoeC5CYWNr
ZW5kRG9tbmFtZSkKIAl4Yy5kZXZpZCA9IEMubGlieGxfZGV2aWQoeC5EZXZpZCkKIAl4Yy5iZV9h
bGxvYyA9IEMuYm9vbCh4LkJlQWxsb2MpCisJbnVtQ29ubmVjdG9ycyA6PSBsZW4oeC5Db25uZWN0
b3JzKQorCXhjLmNvbm5lY3RvcnMgPSAoKkMubGlieGxfY29ubmVjdG9yX3BhcmFtKShDLm1hbGxv
YyhDLnVsb25nKG51bUNvbm5lY3RvcnMpICogQy5zaXplb2ZfbGlieGxfY29ubmVjdG9yX3BhcmFt
KSkKKwl4Yy5udW1fY29ubmVjdG9ycyA9IEMuaW50KG51bUNvbm5lY3RvcnMpCisJY0Nvbm5lY3Rv
cnMgOj0gKCpbMSA8PCAyOF1DLmxpYnhsX2Nvbm5lY3Rvcl9wYXJhbSkodW5zYWZlLlBvaW50ZXIo
eGMuY29ubmVjdG9ycykpWzpudW1Db25uZWN0b3JzOm51bUNvbm5lY3RvcnNdCisJZm9yIGksIHYg
Oj0gcmFuZ2UgeC5Db25uZWN0b3JzIHsKKwkJdG1wLCBlcnIgOj0gdi50b0MoKQorCQlpZiBlcnIg
IT0gbmlsIHsKKwkJCUMubGlieGxfZGV2aWNlX3ZkaXNwbF9kaXNwb3NlKCZ4YykKKwkJCXJldHVy
biB4YywgZXJyCisJCX0KKwkJY0Nvbm5lY3RvcnNbaV0gPSB0bXAKKwl9CiAJcmV0dXJuIHhjLCBu
aWwKIH0KIApAQCAtMTg0Niw2ICsxOTQ0LDIwIEBAIGZ1bmMgKHggKlZzbmRQYXJhbXMpIGZyb21D
KHhjICpDLmxpYnhsX3ZzbmRfcGFyYW1zKSBlcnJvciB7CiAKIGZ1bmMgKHggKlZzbmRQYXJhbXMp
IHRvQygpICh4YyBDLmxpYnhsX3ZzbmRfcGFyYW1zLCBlcnIgZXJyb3IpIHsKIAlDLmxpYnhsX3Zz
bmRfcGFyYW1zX2luaXQoJnhjKQorCW51bVNhbXBsZVJhdGVzIDo9IGxlbih4LlNhbXBsZVJhdGVz
KQorCXhjLnNhbXBsZV9yYXRlcyA9ICgqQy51aW50MzJfdCkoQy5tYWxsb2MoQy5zaXplX3QobnVt
U2FtcGxlUmF0ZXMgKiBudW1TYW1wbGVSYXRlcykpKQorCXhjLm51bV9zYW1wbGVfcmF0ZXMgPSBD
LmludChudW1TYW1wbGVSYXRlcykKKwljU2FtcGxlUmF0ZXMgOj0gKCpbMSA8PCAyOF1DLnVpbnQz
Ml90KSh1bnNhZmUuUG9pbnRlcih4Yy5zYW1wbGVfcmF0ZXMpKVs6bnVtU2FtcGxlUmF0ZXM6bnVt
U2FtcGxlUmF0ZXNdCisJZm9yIGksIHYgOj0gcmFuZ2UgeC5TYW1wbGVSYXRlcyB7CisJCWNTYW1w
bGVSYXRlc1tpXSA9IEMudWludDMyX3QodikKKwl9CisJbnVtU2FtcGxlRm9ybWF0cyA6PSBsZW4o
eC5TYW1wbGVGb3JtYXRzKQorCXhjLnNhbXBsZV9mb3JtYXRzID0gKCpDLmxpYnhsX3ZzbmRfcGNt
X2Zvcm1hdCkoQy5tYWxsb2MoQy5zaXplX3QobnVtU2FtcGxlRm9ybWF0cyAqIG51bVNhbXBsZUZv
cm1hdHMpKSkKKwl4Yy5udW1fc2FtcGxlX2Zvcm1hdHMgPSBDLmludChudW1TYW1wbGVGb3JtYXRz
KQorCWNTYW1wbGVGb3JtYXRzIDo9ICgqWzEgPDwgMjhdQy5saWJ4bF92c25kX3BjbV9mb3JtYXQp
KHVuc2FmZS5Qb2ludGVyKHhjLnNhbXBsZV9mb3JtYXRzKSlbOm51bVNhbXBsZUZvcm1hdHM6bnVt
U2FtcGxlRm9ybWF0c10KKwlmb3IgaSwgdiA6PSByYW5nZSB4LlNhbXBsZUZvcm1hdHMgeworCQlj
U2FtcGxlRm9ybWF0c1tpXSA9IEMubGlieGxfdnNuZF9wY21fZm9ybWF0KHYpCisJfQogCXhjLmNo
YW5uZWxzX21pbiA9IEMudWludDMyX3QoeC5DaGFubmVsc01pbikKIAl4Yy5jaGFubmVsc19tYXgg
PSBDLnVpbnQzMl90KHguQ2hhbm5lbHNNYXgpCiAJeGMuYnVmZmVyX3NpemUgPSBDLnVpbnQzMl90
KHguQnVmZmVyU2l6ZSkKQEAgLTE4OTksNiArMjAxMSwxOCBAQCBmdW5jICh4ICpWc25kUGNtKSB0
b0MoKSAoeGMgQy5saWJ4bF92c25kX3BjbSwgZXJyIGVycm9yKSB7CiAJCUMubGlieGxfdnNuZF9w
Y21fZGlzcG9zZSgmeGMpCiAJCXJldHVybiB4YywgZXJyCiAJfQorCW51bVZzbmRTdHJlYW1zIDo9
IGxlbih4LlN0cmVhbXMpCisJeGMuc3RyZWFtcyA9ICgqQy5saWJ4bF92c25kX3N0cmVhbSkoQy5t
YWxsb2MoQy51bG9uZyhudW1Wc25kU3RyZWFtcykgKiBDLnNpemVvZl9saWJ4bF92c25kX3N0cmVh
bSkpCisJeGMubnVtX3ZzbmRfc3RyZWFtcyA9IEMuaW50KG51bVZzbmRTdHJlYW1zKQorCWNTdHJl
YW1zIDo9ICgqWzEgPDwgMjhdQy5saWJ4bF92c25kX3N0cmVhbSkodW5zYWZlLlBvaW50ZXIoeGMu
c3RyZWFtcykpWzpudW1Wc25kU3RyZWFtczpudW1Wc25kU3RyZWFtc10KKwlmb3IgaSwgdiA6PSBy
YW5nZSB4LlN0cmVhbXMgeworCQl0bXAsIGVyciA6PSB2LnRvQygpCisJCWlmIGVyciAhPSBuaWwg
eworCQkJQy5saWJ4bF92c25kX3BjbV9kaXNwb3NlKCZ4YykKKwkJCXJldHVybiB4YywgZXJyCisJ
CX0KKwkJY1N0cmVhbXNbaV0gPSB0bXAKKwl9CiAJcmV0dXJuIHhjLCBuaWwKIH0KIApAQCAtMTkz
NSw2ICsyMDU5LDE4IEBAIGZ1bmMgKHggKkRldmljZVZzbmQpIHRvQygpICh4YyBDLmxpYnhsX2Rl
dmljZV92c25kLCBlcnIgZXJyb3IpIHsKIAkJQy5saWJ4bF9kZXZpY2VfdnNuZF9kaXNwb3NlKCZ4
YykKIAkJcmV0dXJuIHhjLCBlcnIKIAl9CisJbnVtVnNuZFBjbXMgOj0gbGVuKHguUGNtcykKKwl4
Yy5wY21zID0gKCpDLmxpYnhsX3ZzbmRfcGNtKShDLm1hbGxvYyhDLnVsb25nKG51bVZzbmRQY21z
KSAqIEMuc2l6ZW9mX2xpYnhsX3ZzbmRfcGNtKSkKKwl4Yy5udW1fdnNuZF9wY21zID0gQy5pbnQo
bnVtVnNuZFBjbXMpCisJY1BjbXMgOj0gKCpbMSA8PCAyOF1DLmxpYnhsX3ZzbmRfcGNtKSh1bnNh
ZmUuUG9pbnRlcih4Yy5wY21zKSlbOm51bVZzbmRQY21zOm51bVZzbmRQY21zXQorCWZvciBpLCB2
IDo9IHJhbmdlIHguUGNtcyB7CisJCXRtcCwgZXJyIDo9IHYudG9DKCkKKwkJaWYgZXJyICE9IG5p
bCB7CisJCQlDLmxpYnhsX2RldmljZV92c25kX2Rpc3Bvc2UoJnhjKQorCQkJcmV0dXJuIHhjLCBl
cnIKKwkJfQorCQljUGNtc1tpXSA9IHRtcAorCX0KIAlyZXR1cm4geGMsIG5pbAogfQogCkBAIC0y
MDg2LDYgKzIyMjIsMTg2IEBAIGZ1bmMgKHggKkRvbWFpbkNvbmZpZykgdG9DKCkgKHhjIEMubGli
eGxfZG9tYWluX2NvbmZpZywgZXJyIGVycm9yKSB7CiAJCUMubGlieGxfZG9tYWluX2NvbmZpZ19k
aXNwb3NlKCZ4YykKIAkJcmV0dXJuIHhjLCBlcnIKIAl9CisJbnVtRGlza3MgOj0gbGVuKHguRGlz
a3MpCisJeGMuZGlza3MgPSAoKkMubGlieGxfZGV2aWNlX2Rpc2spKEMubWFsbG9jKEMudWxvbmco
bnVtRGlza3MpICogQy5zaXplb2ZfbGlieGxfZGV2aWNlX2Rpc2spKQorCXhjLm51bV9kaXNrcyA9
IEMuaW50KG51bURpc2tzKQorCWNEaXNrcyA6PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX2Rp
c2spKHVuc2FmZS5Qb2ludGVyKHhjLmRpc2tzKSlbOm51bURpc2tzOm51bURpc2tzXQorCWZvciBp
LCB2IDo9IHJhbmdlIHguRGlza3MgeworCQl0bXAsIGVyciA6PSB2LnRvQygpCisJCWlmIGVyciAh
PSBuaWwgeworCQkJQy5saWJ4bF9kb21haW5fY29uZmlnX2Rpc3Bvc2UoJnhjKQorCQkJcmV0dXJu
IHhjLCBlcnIKKwkJfQorCQljRGlza3NbaV0gPSB0bXAKKwl9CisJbnVtTmljcyA6PSBsZW4oeC5O
aWNzKQorCXhjLm5pY3MgPSAoKkMubGlieGxfZGV2aWNlX25pYykoQy5tYWxsb2MoQy51bG9uZyhu
dW1OaWNzKSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV9uaWMpKQorCXhjLm51bV9uaWNzID0gQy5p
bnQobnVtTmljcykKKwljTmljcyA6PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX25pYykodW5z
YWZlLlBvaW50ZXIoeGMubmljcykpWzpudW1OaWNzOm51bU5pY3NdCisJZm9yIGksIHYgOj0gcmFu
Z2UgeC5OaWNzIHsKKwkJdG1wLCBlcnIgOj0gdi50b0MoKQorCQlpZiBlcnIgIT0gbmlsIHsKKwkJ
CUMubGlieGxfZG9tYWluX2NvbmZpZ19kaXNwb3NlKCZ4YykKKwkJCXJldHVybiB4YywgZXJyCisJ
CX0KKwkJY05pY3NbaV0gPSB0bXAKKwl9CisJbnVtUGNpZGV2cyA6PSBsZW4oeC5QY2lkZXZzKQor
CXhjLnBjaWRldnMgPSAoKkMubGlieGxfZGV2aWNlX3BjaSkoQy5tYWxsb2MoQy51bG9uZyhudW1Q
Y2lkZXZzKSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV9wY2kpKQorCXhjLm51bV9wY2lkZXZzID0g
Qy5pbnQobnVtUGNpZGV2cykKKwljUGNpZGV2cyA6PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNl
X3BjaSkodW5zYWZlLlBvaW50ZXIoeGMucGNpZGV2cykpWzpudW1QY2lkZXZzOm51bVBjaWRldnNd
CisJZm9yIGksIHYgOj0gcmFuZ2UgeC5QY2lkZXZzIHsKKwkJdG1wLCBlcnIgOj0gdi50b0MoKQor
CQlpZiBlcnIgIT0gbmlsIHsKKwkJCUMubGlieGxfZG9tYWluX2NvbmZpZ19kaXNwb3NlKCZ4YykK
KwkJCXJldHVybiB4YywgZXJyCisJCX0KKwkJY1BjaWRldnNbaV0gPSB0bXAKKwl9CisJbnVtUmRt
cyA6PSBsZW4oeC5SZG1zKQorCXhjLnJkbXMgPSAoKkMubGlieGxfZGV2aWNlX3JkbSkoQy5tYWxs
b2MoQy51bG9uZyhudW1SZG1zKSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV9yZG0pKQorCXhjLm51
bV9yZG1zID0gQy5pbnQobnVtUmRtcykKKwljUmRtcyA6PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2
aWNlX3JkbSkodW5zYWZlLlBvaW50ZXIoeGMucmRtcykpWzpudW1SZG1zOm51bVJkbXNdCisJZm9y
IGksIHYgOj0gcmFuZ2UgeC5SZG1zIHsKKwkJdG1wLCBlcnIgOj0gdi50b0MoKQorCQlpZiBlcnIg
IT0gbmlsIHsKKwkJCUMubGlieGxfZG9tYWluX2NvbmZpZ19kaXNwb3NlKCZ4YykKKwkJCXJldHVy
biB4YywgZXJyCisJCX0KKwkJY1JkbXNbaV0gPSB0bXAKKwl9CisJbnVtRHRkZXZzIDo9IGxlbih4
LkR0ZGV2cykKKwl4Yy5kdGRldnMgPSAoKkMubGlieGxfZGV2aWNlX2R0ZGV2KShDLm1hbGxvYyhD
LnVsb25nKG51bUR0ZGV2cykgKiBDLnNpemVvZl9saWJ4bF9kZXZpY2VfZHRkZXYpKQorCXhjLm51
bV9kdGRldnMgPSBDLmludChudW1EdGRldnMpCisJY0R0ZGV2cyA6PSAoKlsxIDw8IDI4XUMubGli
eGxfZGV2aWNlX2R0ZGV2KSh1bnNhZmUuUG9pbnRlcih4Yy5kdGRldnMpKVs6bnVtRHRkZXZzOm51
bUR0ZGV2c10KKwlmb3IgaSwgdiA6PSByYW5nZSB4LkR0ZGV2cyB7CisJCXRtcCwgZXJyIDo9IHYu
dG9DKCkKKwkJaWYgZXJyICE9IG5pbCB7CisJCQlDLmxpYnhsX2RvbWFpbl9jb25maWdfZGlzcG9z
ZSgmeGMpCisJCQlyZXR1cm4geGMsIGVycgorCQl9CisJCWNEdGRldnNbaV0gPSB0bXAKKwl9CisJ
bnVtVmZicyA6PSBsZW4oeC5WZmJzKQorCXhjLnZmYnMgPSAoKkMubGlieGxfZGV2aWNlX3ZmYiko
Qy5tYWxsb2MoQy51bG9uZyhudW1WZmJzKSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV92ZmIpKQor
CXhjLm51bV92ZmJzID0gQy5pbnQobnVtVmZicykKKwljVmZicyA6PSAoKlsxIDw8IDI4XUMubGli
eGxfZGV2aWNlX3ZmYikodW5zYWZlLlBvaW50ZXIoeGMudmZicykpWzpudW1WZmJzOm51bVZmYnNd
CisJZm9yIGksIHYgOj0gcmFuZ2UgeC5WZmJzIHsKKwkJdG1wLCBlcnIgOj0gdi50b0MoKQorCQlp
ZiBlcnIgIT0gbmlsIHsKKwkJCUMubGlieGxfZG9tYWluX2NvbmZpZ19kaXNwb3NlKCZ4YykKKwkJ
CXJldHVybiB4YywgZXJyCisJCX0KKwkJY1ZmYnNbaV0gPSB0bXAKKwl9CisJbnVtVmticyA6PSBs
ZW4oeC5Wa2JzKQorCXhjLnZrYnMgPSAoKkMubGlieGxfZGV2aWNlX3ZrYikoQy5tYWxsb2MoQy51
bG9uZyhudW1Wa2JzKSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV92a2IpKQorCXhjLm51bV92a2Jz
ID0gQy5pbnQobnVtVmticykKKwljVmticyA6PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX3Zr
YikodW5zYWZlLlBvaW50ZXIoeGMudmticykpWzpudW1Wa2JzOm51bVZrYnNdCisJZm9yIGksIHYg
Oj0gcmFuZ2UgeC5Wa2JzIHsKKwkJdG1wLCBlcnIgOj0gdi50b0MoKQorCQlpZiBlcnIgIT0gbmls
IHsKKwkJCUMubGlieGxfZG9tYWluX2NvbmZpZ19kaXNwb3NlKCZ4YykKKwkJCXJldHVybiB4Yywg
ZXJyCisJCX0KKwkJY1ZrYnNbaV0gPSB0bXAKKwl9CisJbnVtVnRwbXMgOj0gbGVuKHguVnRwbXMp
CisJeGMudnRwbXMgPSAoKkMubGlieGxfZGV2aWNlX3Z0cG0pKEMubWFsbG9jKEMudWxvbmcobnVt
VnRwbXMpICogQy5zaXplb2ZfbGlieGxfZGV2aWNlX3Z0cG0pKQorCXhjLm51bV92dHBtcyA9IEMu
aW50KG51bVZ0cG1zKQorCWNWdHBtcyA6PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX3Z0cG0p
KHVuc2FmZS5Qb2ludGVyKHhjLnZ0cG1zKSlbOm51bVZ0cG1zOm51bVZ0cG1zXQorCWZvciBpLCB2
IDo9IHJhbmdlIHguVnRwbXMgeworCQl0bXAsIGVyciA6PSB2LnRvQygpCisJCWlmIGVyciAhPSBu
aWwgeworCQkJQy5saWJ4bF9kb21haW5fY29uZmlnX2Rpc3Bvc2UoJnhjKQorCQkJcmV0dXJuIHhj
LCBlcnIKKwkJfQorCQljVnRwbXNbaV0gPSB0bXAKKwl9CisJbnVtUDlTIDo9IGxlbih4LlA5UykK
Kwl4Yy5wOXMgPSAoKkMubGlieGxfZGV2aWNlX3A5KShDLm1hbGxvYyhDLnVsb25nKG51bVA5Uykg
KiBDLnNpemVvZl9saWJ4bF9kZXZpY2VfcDkpKQorCXhjLm51bV9wOXMgPSBDLmludChudW1QOVMp
CisJY1A5UyA6PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX3A5KSh1bnNhZmUuUG9pbnRlcih4
Yy5wOXMpKVs6bnVtUDlTOm51bVA5U10KKwlmb3IgaSwgdiA6PSByYW5nZSB4LlA5UyB7CisJCXRt
cCwgZXJyIDo9IHYudG9DKCkKKwkJaWYgZXJyICE9IG5pbCB7CisJCQlDLmxpYnhsX2RvbWFpbl9j
b25maWdfZGlzcG9zZSgmeGMpCisJCQlyZXR1cm4geGMsIGVycgorCQl9CisJCWNQOVNbaV0gPSB0
bXAKKwl9CisJbnVtUHZjYWxsc2lmcyA6PSBsZW4oeC5QdmNhbGxzaWZzKQorCXhjLnB2Y2FsbHNp
ZnMgPSAoKkMubGlieGxfZGV2aWNlX3B2Y2FsbHNpZikoQy5tYWxsb2MoQy51bG9uZyhudW1QdmNh
bGxzaWZzKSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV9wdmNhbGxzaWYpKQorCXhjLm51bV9wdmNh
bGxzaWZzID0gQy5pbnQobnVtUHZjYWxsc2lmcykKKwljUHZjYWxsc2lmcyA6PSAoKlsxIDw8IDI4
XUMubGlieGxfZGV2aWNlX3B2Y2FsbHNpZikodW5zYWZlLlBvaW50ZXIoeGMucHZjYWxsc2lmcykp
WzpudW1QdmNhbGxzaWZzOm51bVB2Y2FsbHNpZnNdCisJZm9yIGksIHYgOj0gcmFuZ2UgeC5QdmNh
bGxzaWZzIHsKKwkJdG1wLCBlcnIgOj0gdi50b0MoKQorCQlpZiBlcnIgIT0gbmlsIHsKKwkJCUMu
bGlieGxfZG9tYWluX2NvbmZpZ19kaXNwb3NlKCZ4YykKKwkJCXJldHVybiB4YywgZXJyCisJCX0K
KwkJY1B2Y2FsbHNpZnNbaV0gPSB0bXAKKwl9CisJbnVtVmRpc3BscyA6PSBsZW4oeC5WZGlzcGxz
KQorCXhjLnZkaXNwbHMgPSAoKkMubGlieGxfZGV2aWNlX3ZkaXNwbCkoQy5tYWxsb2MoQy51bG9u
ZyhudW1WZGlzcGxzKSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV92ZGlzcGwpKQorCXhjLm51bV92
ZGlzcGxzID0gQy5pbnQobnVtVmRpc3BscykKKwljVmRpc3BscyA6PSAoKlsxIDw8IDI4XUMubGli
eGxfZGV2aWNlX3ZkaXNwbCkodW5zYWZlLlBvaW50ZXIoeGMudmRpc3BscykpWzpudW1WZGlzcGxz
Om51bVZkaXNwbHNdCisJZm9yIGksIHYgOj0gcmFuZ2UgeC5WZGlzcGxzIHsKKwkJdG1wLCBlcnIg
Oj0gdi50b0MoKQorCQlpZiBlcnIgIT0gbmlsIHsKKwkJCUMubGlieGxfZG9tYWluX2NvbmZpZ19k
aXNwb3NlKCZ4YykKKwkJCXJldHVybiB4YywgZXJyCisJCX0KKwkJY1ZkaXNwbHNbaV0gPSB0bXAK
Kwl9CisJbnVtVnNuZHMgOj0gbGVuKHguVnNuZHMpCisJeGMudnNuZHMgPSAoKkMubGlieGxfZGV2
aWNlX3ZzbmQpKEMubWFsbG9jKEMudWxvbmcobnVtVnNuZHMpICogQy5zaXplb2ZfbGlieGxfZGV2
aWNlX3ZzbmQpKQorCXhjLm51bV92c25kcyA9IEMuaW50KG51bVZzbmRzKQorCWNWc25kcyA6PSAo
KlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX3ZzbmQpKHVuc2FmZS5Qb2ludGVyKHhjLnZzbmRzKSlb
Om51bVZzbmRzOm51bVZzbmRzXQorCWZvciBpLCB2IDo9IHJhbmdlIHguVnNuZHMgeworCQl0bXAs
IGVyciA6PSB2LnRvQygpCisJCWlmIGVyciAhPSBuaWwgeworCQkJQy5saWJ4bF9kb21haW5fY29u
ZmlnX2Rpc3Bvc2UoJnhjKQorCQkJcmV0dXJuIHhjLCBlcnIKKwkJfQorCQljVnNuZHNbaV0gPSB0
bXAKKwl9CisJbnVtQ2hhbm5lbHMgOj0gbGVuKHguQ2hhbm5lbHMpCisJeGMuY2hhbm5lbHMgPSAo
KkMubGlieGxfZGV2aWNlX2NoYW5uZWwpKEMubWFsbG9jKEMudWxvbmcobnVtQ2hhbm5lbHMpICog
Qy5zaXplb2ZfbGlieGxfZGV2aWNlX2NoYW5uZWwpKQorCXhjLm51bV9jaGFubmVscyA9IEMuaW50
KG51bUNoYW5uZWxzKQorCWNDaGFubmVscyA6PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX2No
YW5uZWwpKHVuc2FmZS5Qb2ludGVyKHhjLmNoYW5uZWxzKSlbOm51bUNoYW5uZWxzOm51bUNoYW5u
ZWxzXQorCWZvciBpLCB2IDo9IHJhbmdlIHguQ2hhbm5lbHMgeworCQl0bXAsIGVyciA6PSB2LnRv
QygpCisJCWlmIGVyciAhPSBuaWwgeworCQkJQy5saWJ4bF9kb21haW5fY29uZmlnX2Rpc3Bvc2Uo
JnhjKQorCQkJcmV0dXJuIHhjLCBlcnIKKwkJfQorCQljQ2hhbm5lbHNbaV0gPSB0bXAKKwl9CisJ
bnVtVXNiY3RybHMgOj0gbGVuKHguVXNiY3RybHMpCisJeGMudXNiY3RybHMgPSAoKkMubGlieGxf
ZGV2aWNlX3VzYmN0cmwpKEMubWFsbG9jKEMudWxvbmcobnVtVXNiY3RybHMpICogQy5zaXplb2Zf
bGlieGxfZGV2aWNlX3VzYmN0cmwpKQorCXhjLm51bV91c2JjdHJscyA9IEMuaW50KG51bVVzYmN0
cmxzKQorCWNVc2JjdHJscyA6PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX3VzYmN0cmwpKHVu
c2FmZS5Qb2ludGVyKHhjLnVzYmN0cmxzKSlbOm51bVVzYmN0cmxzOm51bVVzYmN0cmxzXQorCWZv
ciBpLCB2IDo9IHJhbmdlIHguVXNiY3RybHMgeworCQl0bXAsIGVyciA6PSB2LnRvQygpCisJCWlm
IGVyciAhPSBuaWwgeworCQkJQy5saWJ4bF9kb21haW5fY29uZmlnX2Rpc3Bvc2UoJnhjKQorCQkJ
cmV0dXJuIHhjLCBlcnIKKwkJfQorCQljVXNiY3RybHNbaV0gPSB0bXAKKwl9CisJbnVtVXNiZGV2
cyA6PSBsZW4oeC5Vc2JkZXZzKQorCXhjLnVzYmRldnMgPSAoKkMubGlieGxfZGV2aWNlX3VzYmRl
dikoQy5tYWxsb2MoQy51bG9uZyhudW1Vc2JkZXZzKSAqIEMuc2l6ZW9mX2xpYnhsX2RldmljZV91
c2JkZXYpKQorCXhjLm51bV91c2JkZXZzID0gQy5pbnQobnVtVXNiZGV2cykKKwljVXNiZGV2cyA6
PSAoKlsxIDw8IDI4XUMubGlieGxfZGV2aWNlX3VzYmRldikodW5zYWZlLlBvaW50ZXIoeGMudXNi
ZGV2cykpWzpudW1Vc2JkZXZzOm51bVVzYmRldnNdCisJZm9yIGksIHYgOj0gcmFuZ2UgeC5Vc2Jk
ZXZzIHsKKwkJdG1wLCBlcnIgOj0gdi50b0MoKQorCQlpZiBlcnIgIT0gbmlsIHsKKwkJCUMubGli
eGxfZG9tYWluX2NvbmZpZ19kaXNwb3NlKCZ4YykKKwkJCXJldHVybiB4YywgZXJyCisJCX0KKwkJ
Y1VzYmRldnNbaV0gPSB0bXAKKwl9CiAJeGMub25fcG93ZXJvZmYgPSBDLmxpYnhsX2FjdGlvbl9v
bl9zaHV0ZG93bih4Lk9uUG93ZXJvZmYpCiAJeGMub25fcmVib290ID0gQy5saWJ4bF9hY3Rpb25f
b25fc2h1dGRvd24oeC5PblJlYm9vdCkKIAl4Yy5vbl93YXRjaGRvZyA9IEMubGlieGxfYWN0aW9u
X29uX3NodXRkb3duKHguT25XYXRjaGRvZykKQEAgLTIzNjMsNiArMjY3OSwxOCBAQCBmdW5jICh4
ICpWZGlzcGxpbmZvKSB0b0MoKSAoeGMgQy5saWJ4bF92ZGlzcGxpbmZvLCBlcnIgZXJyb3IpIHsK
IAl4Yy5kZXZpZCA9IEMubGlieGxfZGV2aWQoeC5EZXZpZCkKIAl4Yy5zdGF0ZSA9IEMuaW50KHgu
U3RhdGUpCiAJeGMuYmVfYWxsb2MgPSBDLmJvb2woeC5CZUFsbG9jKQorCW51bUNvbm5lY3RvcnMg
Oj0gbGVuKHguQ29ubmVjdG9ycykKKwl4Yy5jb25uZWN0b3JzID0gKCpDLmxpYnhsX2Nvbm5lY3Rv
cmluZm8pKEMubWFsbG9jKEMudWxvbmcobnVtQ29ubmVjdG9ycykgKiBDLnNpemVvZl9saWJ4bF9j
b25uZWN0b3JpbmZvKSkKKwl4Yy5udW1fY29ubmVjdG9ycyA9IEMuaW50KG51bUNvbm5lY3RvcnMp
CisJY0Nvbm5lY3RvcnMgOj0gKCpbMSA8PCAyOF1DLmxpYnhsX2Nvbm5lY3RvcmluZm8pKHVuc2Fm
ZS5Qb2ludGVyKHhjLmNvbm5lY3RvcnMpKVs6bnVtQ29ubmVjdG9yczpudW1Db25uZWN0b3JzXQor
CWZvciBpLCB2IDo9IHJhbmdlIHguQ29ubmVjdG9ycyB7CisJCXRtcCwgZXJyIDo9IHYudG9DKCkK
KwkJaWYgZXJyICE9IG5pbCB7CisJCQlDLmxpYnhsX3ZkaXNwbGluZm9fZGlzcG9zZSgmeGMpCisJ
CQlyZXR1cm4geGMsIGVycgorCQl9CisJCWNDb25uZWN0b3JzW2ldID0gdG1wCisJfQogCXJldHVy
biB4YywgbmlsCiB9CiAKQEAgLTIzOTUsNiArMjcyMywxOCBAQCBmdW5jICh4ICpQY21pbmZvKSBm
cm9tQyh4YyAqQy5saWJ4bF9wY21pbmZvKSBlcnJvciB7CiAKIGZ1bmMgKHggKlBjbWluZm8pIHRv
QygpICh4YyBDLmxpYnhsX3BjbWluZm8sIGVyciBlcnJvcikgewogCUMubGlieGxfcGNtaW5mb19p
bml0KCZ4YykKKwludW1Wc25kU3RyZWFtcyA6PSBsZW4oeC5TdHJlYW1zKQorCXhjLnN0cmVhbXMg
PSAoKkMubGlieGxfc3RyZWFtaW5mbykoQy5tYWxsb2MoQy51bG9uZyhudW1Wc25kU3RyZWFtcykg
KiBDLnNpemVvZl9saWJ4bF9zdHJlYW1pbmZvKSkKKwl4Yy5udW1fdnNuZF9zdHJlYW1zID0gQy5p
bnQobnVtVnNuZFN0cmVhbXMpCisJY1N0cmVhbXMgOj0gKCpbMSA8PCAyOF1DLmxpYnhsX3N0cmVh
bWluZm8pKHVuc2FmZS5Qb2ludGVyKHhjLnN0cmVhbXMpKVs6bnVtVnNuZFN0cmVhbXM6bnVtVnNu
ZFN0cmVhbXNdCisJZm9yIGksIHYgOj0gcmFuZ2UgeC5TdHJlYW1zIHsKKwkJdG1wLCBlcnIgOj0g
di50b0MoKQorCQlpZiBlcnIgIT0gbmlsIHsKKwkJCUMubGlieGxfcGNtaW5mb19kaXNwb3NlKCZ4
YykKKwkJCXJldHVybiB4YywgZXJyCisJCX0KKwkJY1N0cmVhbXNbaV0gPSB0bXAKKwl9CiAJcmV0
dXJuIHhjLCBuaWwKIH0KIApAQCAtMjQyNSw2ICsyNzY1LDE4IEBAIGZ1bmMgKHggKlZzbmRpbmZv
KSB0b0MoKSAoeGMgQy5saWJ4bF92c25kaW5mbywgZXJyIGVycm9yKSB7CiAJeGMuZnJvbnRlbmRf
aWQgPSBDLnVpbnQzMl90KHguRnJvbnRlbmRJZCkKIAl4Yy5kZXZpZCA9IEMubGlieGxfZGV2aWQo
eC5EZXZpZCkKIAl4Yy5zdGF0ZSA9IEMuaW50KHguU3RhdGUpCisJbnVtVnNuZFBjbXMgOj0gbGVu
KHguUGNtcykKKwl4Yy5wY21zID0gKCpDLmxpYnhsX3BjbWluZm8pKEMubWFsbG9jKEMudWxvbmco
bnVtVnNuZFBjbXMpICogQy5zaXplb2ZfbGlieGxfcGNtaW5mbykpCisJeGMubnVtX3ZzbmRfcGNt
cyA9IEMuaW50KG51bVZzbmRQY21zKQorCWNQY21zIDo9ICgqWzEgPDwgMjhdQy5saWJ4bF9wY21p
bmZvKSh1bnNhZmUuUG9pbnRlcih4Yy5wY21zKSlbOm51bVZzbmRQY21zOm51bVZzbmRQY21zXQor
CWZvciBpLCB2IDo9IHJhbmdlIHguUGNtcyB7CisJCXRtcCwgZXJyIDo9IHYudG9DKCkKKwkJaWYg
ZXJyICE9IG5pbCB7CisJCQlDLmxpYnhsX3ZzbmRpbmZvX2Rpc3Bvc2UoJnhjKQorCQkJcmV0dXJu
IHhjLCBlcnIKKwkJfQorCQljUGNtc1tpXSA9IHRtcAorCX0KIAlyZXR1cm4geGMsIG5pbAogfQog
CkBAIC0yNDcxLDYgKzI4MjMsMTMgQEAgZnVuYyAoeCAqTnVtYWluZm8pIHRvQygpICh4YyBDLmxp
YnhsX251bWFpbmZvLCBlcnIgZXJyb3IpIHsKIAlDLmxpYnhsX251bWFpbmZvX2luaXQoJnhjKQog
CXhjLnNpemUgPSBDLnVpbnQ2NF90KHguU2l6ZSkKIAl4Yy5mcmVlID0gQy51aW50NjRfdCh4LkZy
ZWUpCisJbnVtRGlzdHMgOj0gbGVuKHguRGlzdHMpCisJeGMuZGlzdHMgPSAoKkMudWludDMyX3Qp
KEMubWFsbG9jKEMuc2l6ZV90KG51bURpc3RzICogbnVtRGlzdHMpKSkKKwl4Yy5udW1fZGlzdHMg
PSBDLmludChudW1EaXN0cykKKwljRGlzdHMgOj0gKCpbMSA8PCAyOF1DLnVpbnQzMl90KSh1bnNh
ZmUuUG9pbnRlcih4Yy5kaXN0cykpWzpudW1EaXN0czpudW1EaXN0c10KKwlmb3IgaSwgdiA6PSBy
YW5nZSB4LkRpc3RzIHsKKwkJY0Rpc3RzW2ldID0gQy51aW50MzJfdCh2KQorCX0KIAlyZXR1cm4g
eGMsIG5pbAogfQogCi0tIAoyLjE3LjEKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54
ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGlu
Zm8veGVuLWRldmVs

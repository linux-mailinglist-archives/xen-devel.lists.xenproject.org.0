Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id C418AC1F40
	for <lists+xen-devel@lfdr.de>; Mon, 30 Sep 2019 12:39:04 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iEt2b-0001ig-NH; Mon, 30 Sep 2019 10:36:29 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=Wfc7=XZ=amazon.com=prvs=169663feb=hongyax@srs-us1.protection.inumbo.net>)
 id 1iEt2Z-0001g7-R0
 for xen-devel@lists.xenproject.org; Mon, 30 Sep 2019 10:36:27 +0000
X-Inumbo-ID: 27f6a162-e36e-11e9-96cd-12813bfff9fa
Received: from smtp-fw-9102.amazon.com (unknown [207.171.184.29])
 by localhost (Halon) with ESMTPS
 id 27f6a162-e36e-11e9-96cd-12813bfff9fa;
 Mon, 30 Sep 2019 10:36:27 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.com; i=@amazon.com; q=dns/txt; s=amazon201209;
 t=1569839787; x=1601375787;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=zAmGDTsrkqDrD84a7ePZyWgjTtwq2BJqD/HRmBU5vZQ=;
 b=LXxXHA+AbHiNgReh+rYOkDuKzfFKWAakZofBS8mPf9b2lN/7XUazkOs3
 UdIOLAEF3JwlgGRVgZGLwkZsxDTwiH8oyuFy/Z1u0/9xqOgrKnfK8Vq9h
 felpF2gVzh8X+sexgzsu4SUlUX6DpZDAbsi9XHMZB/ISVi8kRwrFZQ9wR 0=;
X-IronPort-AV: E=Sophos;i="5.64,565,1559520000"; d="scan'208";a="705521373"
Received: from sea3-co-svc-lb6-vlan3.sea.amazon.com (HELO
 email-inbound-relay-1d-474bcd9f.us-east-1.amazon.com) ([10.47.22.38])
 by smtp-border-fw-out-9102.sea19.amazon.com with ESMTP;
 30 Sep 2019 10:35:09 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan2.iad.amazon.com [10.40.159.162])
 by email-inbound-relay-1d-474bcd9f.us-east-1.amazon.com (Postfix) with ESMTPS
 id C4DC3A1DBA; Mon, 30 Sep 2019 10:34:52 +0000 (UTC)
Received: from EX13D23UEE003.ant.amazon.com (10.43.62.173) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.82) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Mon, 30 Sep 2019 10:34:27 +0000
Received: from EX13MTAUEE001.ant.amazon.com (10.43.62.200) by
 EX13D23UEE003.ant.amazon.com (10.43.62.173) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Mon, 30 Sep 2019 10:34:26 +0000
Received: from u9d785c4ba99158.ant.amazon.com (10.125.106.78) by
 mail-relay.amazon.com (10.43.62.226) with Microsoft SMTP Server id
 15.0.1367.3 via Frontend Transport; Mon, 30 Sep 2019 10:34:25 +0000
From: Hongyan Xia <hongyax@amazon.com>
To: <xen-devel@lists.xenproject.org>
Date: Mon, 30 Sep 2019 11:33:31 +0100
Message-ID: <f8b0b15146c357270fb0978f3ec50eea4695dc1c.1569833766.git.hongyax@amazon.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <cover.1569833766.git.hongyax@amazon.com>
References: <cover.1569833766.git.hongyax@amazon.com>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH v2 39/55] x86: switch root_pgt to mfn_t and use
 new APIs
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>, Wei Liu <wl@xen.org>,
 Jan Beulich <jbeulich@suse.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogV2VpIExpdSA8d2VpLmxpdTJAY2l0cml4LmNvbT4KClRoaXMgdGhlbiByZXF1aXJlcyBt
b3ZpbmcgZGVjbGFyYXRpb24gb2Ygcm9vdCBwYWdlIHRhYmxlIG1mbiBpbnRvIG1tLmgKYW5kIG1v
ZGlmeSBzZXR1cF9jcHVfcm9vdF9wZ3QgdG8gaGF2ZSBhIHNpbmdsZSBleGl0IHBhdGguCgpXZSBh
bHNvIG5lZWQgdG8gZm9yY2UgbWFwX2RvbWFpbl9wYWdlIHRvIHVzZSBkaXJlY3QgbWFwIHdoZW4g
c3dpdGNoaW5nCnBlci1kb21haW4gbWFwcGluZ3MuIFRoaXMgaXMgY29udHJhcnkgdG8gb3VyIGVu
ZCBnb2FsIG9mIHJlbW92aW5nCmRpcmVjdCBtYXAsIGJ1dCB0aGlzIHdpbGwgYmUgcmVtb3ZlZCBv
bmNlIHdlIG1ha2UgbWFwX2RvbWFpbl9wYWdlCmNvbnRleHQtc3dpdGNoIHNhZmUgaW4gYW5vdGhl
ciAobGFyZ2UpIHBhdGNoIHNlcmllcy4KClNpZ25lZC1vZmYtYnk6IFdlaSBMaXUgPHdlaS5saXUy
QGNpdHJpeC5jb20+Ci0tLQogeGVuL2FyY2gveDg2L2RvbWFpbi5jICAgICAgICAgICB8IDE1ICsr
KysrKysrKystLS0KIHhlbi9hcmNoL3g4Ni9kb21haW5fcGFnZS5jICAgICAgfCAgMiArLQogeGVu
L2FyY2gveDg2L21tLmMgICAgICAgICAgICAgICB8ICAyICstCiB4ZW4vYXJjaC94ODYvcHYvZG9t
YWluLmMgICAgICAgIHwgIDIgKy0KIHhlbi9hcmNoL3g4Ni9zbXBib290LmMgICAgICAgICAgfCA0
MCArKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0KIHhlbi9pbmNsdWRlL2FzbS14ODYv
bW0uaCAgICAgICAgfCAgMiArKwogeGVuL2luY2x1ZGUvYXNtLXg4Ni9wcm9jZXNzb3IuaCB8ICAy
ICstCiA3IGZpbGVzIGNoYW5nZWQsIDQ1IGluc2VydGlvbnMoKyksIDIwIGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9kb21haW4uYyBiL3hlbi9hcmNoL3g4Ni9kb21haW4u
YwppbmRleCBkYmRmNmIxYmMyLi5lOWJmNDdlZmNlIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYv
ZG9tYWluLmMKKysrIGIveGVuL2FyY2gveDg2L2RvbWFpbi5jCkBAIC02OSw2ICs2OSw3IEBACiAj
aW5jbHVkZSA8YXNtL3B2L2RvbWFpbi5oPgogI2luY2x1ZGUgPGFzbS9wdi9tbS5oPgogI2luY2x1
ZGUgPGFzbS9zcGVjX2N0cmwuaD4KKyNpbmNsdWRlIDxhc20vc2V0dXAuaD4KIAogREVGSU5FX1BF
Ul9DUFUoc3RydWN0IHZjcHUgKiwgY3Vycl92Y3B1KTsKIApAQCAtMTU4MCwxMiArMTU4MSwyMCBA
QCB2b2lkIHBhcmF2aXJ0X2N0eHRfc3dpdGNoX2Zyb20oc3RydWN0IHZjcHUgKnYpCiAKIHZvaWQg
cGFyYXZpcnRfY3R4dF9zd2l0Y2hfdG8oc3RydWN0IHZjcHUgKnYpCiB7Ci0gICAgcm9vdF9wZ2Vu
dHJ5X3QgKnJvb3RfcGd0ID0gdGhpc19jcHUocm9vdF9wZ3QpOworICAgIG1mbl90IHJwdF9tZm4g
PSB0aGlzX2NwdShyb290X3BndF9tZm4pOwogCi0gICAgaWYgKCByb290X3BndCApCi0gICAgICAg
IHJvb3RfcGd0W3Jvb3RfdGFibGVfb2Zmc2V0KFBFUkRPTUFJTl9WSVJUX1NUQVJUKV0gPQorICAg
IGlmICggIW1mbl9lcShycHRfbWZuLCBJTlZBTElEX01GTikgKQorICAgIHsKKyAgICAgICAgcm9v
dF9wZ2VudHJ5X3QgKnJwdDsKKworICAgICAgICBtYXBjYWNoZV9vdmVycmlkZV9jdXJyZW50KElO
VkFMSURfVkNQVSk7CisgICAgICAgIHJwdCA9IG1hcF94ZW5fcGFnZXRhYmxlX25ldyhycHRfbWZu
KTsKKyAgICAgICAgcnB0W3Jvb3RfdGFibGVfb2Zmc2V0KFBFUkRPTUFJTl9WSVJUX1NUQVJUKV0g
PQogICAgICAgICAgICAgbDRlX2Zyb21fcGFnZSh2LT5kb21haW4tPmFyY2gucGVyZG9tYWluX2wz
X3BnLAogICAgICAgICAgICAgICAgICAgICAgICAgICBfX1BBR0VfSFlQRVJWSVNPUl9SVyk7Cisg
ICAgICAgIFVOTUFQX1hFTl9QQUdFVEFCTEVfTkVXKHJwdCk7CisgICAgICAgIG1hcGNhY2hlX292
ZXJyaWRlX2N1cnJlbnQoTlVMTCk7CisgICAgfQogCiAgICAgaWYgKCB1bmxpa2VseSh2LT5hcmNo
LmRyNyAmIERSN19BQ1RJVkVfTUFTSykgKQogICAgICAgICBhY3RpdmF0ZV9kZWJ1Z3JlZ3Modik7
CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvZG9tYWluX3BhZ2UuYyBiL3hlbi9hcmNoL3g4Ni9k
b21haW5fcGFnZS5jCmluZGV4IDI0MDgzZTlhODYuLmNmY2ZmZDM1ZjMgMTAwNjQ0Ci0tLSBhL3hl
bi9hcmNoL3g4Ni9kb21haW5fcGFnZS5jCisrKyBiL3hlbi9hcmNoL3g4Ni9kb21haW5fcGFnZS5j
CkBAIC01Nyw3ICs1Nyw3IEBAIHN0YXRpYyBpbmxpbmUgc3RydWN0IHZjcHUgKm1hcGNhY2hlX2N1
cnJlbnRfdmNwdSh2b2lkKQogICAgIHJldHVybiB2OwogfQogCi12b2lkIF9faW5pdCBtYXBjYWNo
ZV9vdmVycmlkZV9jdXJyZW50KHN0cnVjdCB2Y3B1ICp2KQordm9pZCBtYXBjYWNoZV9vdmVycmlk
ZV9jdXJyZW50KHN0cnVjdCB2Y3B1ICp2KQogewogICAgIHRoaXNfY3B1KG92ZXJyaWRlKSA9IHY7
CiB9CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvbW0uYyBiL3hlbi9hcmNoL3g4Ni9tbS5jCmlu
ZGV4IDg3MDZkYzAxNzQuLjVjMWQ2NWQyNjcgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9tbS5j
CisrKyBiL3hlbi9hcmNoL3g4Ni9tbS5jCkBAIC01MzAsNyArNTMwLDcgQEAgdm9pZCB3cml0ZV9w
dGJhc2Uoc3RydWN0IHZjcHUgKnYpCiAgICAgaWYgKCBpc19wdl92Y3B1KHYpICYmIHYtPmRvbWFp
bi0+YXJjaC5wdi54cHRpICkKICAgICB7CiAgICAgICAgIGNwdV9pbmZvLT5yb290X3BndF9jaGFu
Z2VkID0gdHJ1ZTsKLSAgICAgICAgY3B1X2luZm8tPnB2X2NyMyA9IF9fcGEodGhpc19jcHUocm9v
dF9wZ3QpKTsKKyAgICAgICAgY3B1X2luZm8tPnB2X2NyMyA9IG1mbl90b19tYWRkcih0aGlzX2Nw
dShyb290X3BndF9tZm4pKTsKICAgICAgICAgaWYgKCBuZXdfY3I0ICYgWDg2X0NSNF9QQ0lERSAp
CiAgICAgICAgICAgICBjcHVfaW5mby0+cHZfY3IzIHw9IGdldF9wY2lkX2JpdHModiwgdHJ1ZSk7
CiAgICAgICAgIHN3aXRjaF9jcjNfY3I0KHYtPmFyY2guY3IzLCBuZXdfY3I0KTsKZGlmZiAtLWdp
dCBhL3hlbi9hcmNoL3g4Ni9wdi9kb21haW4uYyBiL3hlbi9hcmNoL3g4Ni9wdi9kb21haW4uYwpp
bmRleCA0YjZmNDhkZWEyLi43ZTcwNjkwZjAzIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvcHYv
ZG9tYWluLmMKKysrIGIveGVuL2FyY2gveDg2L3B2L2RvbWFpbi5jCkBAIC0zNjAsNyArMzYwLDcg
QEAgc3RhdGljIHZvaWQgX3RvZ2dsZV9ndWVzdF9wdChzdHJ1Y3QgdmNwdSAqdikKICAgICBpZiAo
IGQtPmFyY2gucHYueHB0aSApCiAgICAgewogICAgICAgICBjcHVfaW5mby0+cm9vdF9wZ3RfY2hh
bmdlZCA9IHRydWU7Ci0gICAgICAgIGNwdV9pbmZvLT5wdl9jcjMgPSBfX3BhKHRoaXNfY3B1KHJv
b3RfcGd0KSkgfAorICAgICAgICBjcHVfaW5mby0+cHZfY3IzID0gbWZuX3RvX21hZGRyKHRoaXNf
Y3B1KHJvb3RfcGd0X21mbikpIHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkLT5hcmNo
LnB2LnBjaWQgPyBnZXRfcGNpZF9iaXRzKHYsIHRydWUpIDogMCk7CiAgICAgfQogCmRpZmYgLS1n
aXQgYS94ZW4vYXJjaC94ODYvc21wYm9vdC5jIGIveGVuL2FyY2gveDg2L3NtcGJvb3QuYwppbmRl
eCBjNTVhYWE2NWEyLi5jYThmYzZkNDg1IDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvc21wYm9v
dC5jCisrKyBiL3hlbi9hcmNoL3g4Ni9zbXBib290LmMKQEAgLTgxMSw3ICs4MTEsNyBAQCBzdGF0
aWMgaW50IGNsb25lX21hcHBpbmcoY29uc3Qgdm9pZCAqcHRyLCByb290X3BnZW50cnlfdCAqcnB0
KQogICAgIHJldHVybiByYzsKIH0KIAotREVGSU5FX1BFUl9DUFUocm9vdF9wZ2VudHJ5X3QgKiwg
cm9vdF9wZ3QpOworREVGSU5FX1BFUl9DUFUobWZuX3QsIHJvb3RfcGd0X21mbik7CiAKIHN0YXRp
YyByb290X3BnZW50cnlfdCBjb21tb25fcGd0OwogCkBAIC04MTksMTkgKzgxOSwyNyBAQCBleHRl
cm4gY29uc3QgY2hhciBfc3RleHRlbnRyeVtdLCBfZXRleHRlbnRyeVtdOwogCiBzdGF0aWMgaW50
IHNldHVwX2NwdV9yb290X3BndCh1bnNpZ25lZCBpbnQgY3B1KQogewotICAgIHJvb3RfcGdlbnRy
eV90ICpycHQ7CisgICAgcm9vdF9wZ2VudHJ5X3QgKnJwdCA9IE5VTEw7CisgICAgbWZuX3QgcnB0
X21mbjsKICAgICB1bnNpZ25lZCBpbnQgb2ZmOwogICAgIGludCByYzsKIAogICAgIGlmICggIW9w
dF94cHRpX2h3ZG9tICYmICFvcHRfeHB0aV9kb211ICkKLSAgICAgICAgcmV0dXJuIDA7CisgICAg
eworICAgICAgICByYyA9IDA7CisgICAgICAgIGdvdG8gb3V0OworICAgIH0KIAotICAgIHJwdCA9
IGFsbG9jX3hlbl9wYWdldGFibGUoKTsKLSAgICBpZiAoICFycHQgKQotICAgICAgICByZXR1cm4g
LUVOT01FTTsKKyAgICBycHRfbWZuID0gYWxsb2NfeGVuX3BhZ2V0YWJsZV9uZXcoKTsKKyAgICBp
ZiAoIG1mbl9lcShycHRfbWZuLCBJTlZBTElEX01GTikgKQorICAgIHsKKyAgICAgICAgcmMgPSAt
RU5PTUVNOworICAgICAgICBnb3RvIG91dDsKKyAgICB9CiAKKyAgICBycHQgPSBtYXBfeGVuX3Bh
Z2V0YWJsZV9uZXcocnB0X21mbik7CiAgICAgY2xlYXJfcGFnZShycHQpOwotICAgIHBlcl9jcHUo
cm9vdF9wZ3QsIGNwdSkgPSBycHQ7CisgICAgcGVyX2NwdShyb290X3BndF9tZm4sIGNwdSkgPSBy
cHRfbWZuOwogCiAgICAgcnB0W3Jvb3RfdGFibGVfb2Zmc2V0KFJPX01QVF9WSVJUX1NUQVJUKV0g
PQogICAgICAgICBpZGxlX3BnX3RhYmxlW3Jvb3RfdGFibGVfb2Zmc2V0KFJPX01QVF9WSVJUX1NU
QVJUKV07CkBAIC04NDgsNyArODU2LDcgQEAgc3RhdGljIGludCBzZXR1cF9jcHVfcm9vdF9wZ3Qo
dW5zaWduZWQgaW50IGNwdSkKICAgICAgICAgICAgIHJjID0gY2xvbmVfbWFwcGluZyhwdHIsIHJw
dCk7CiAKICAgICAgICAgaWYgKCByYyApCi0gICAgICAgICAgICByZXR1cm4gcmM7CisgICAgICAg
ICAgICBnb3RvIG91dDsKIAogICAgICAgICBjb21tb25fcGd0ID0gcnB0W3Jvb3RfdGFibGVfb2Zm
c2V0KFhFTl9WSVJUX1NUQVJUKV07CiAgICAgfQpAQCAtODczLDE5ICs4ODEsMjQgQEAgc3RhdGlj
IGludCBzZXR1cF9jcHVfcm9vdF9wZ3QodW5zaWduZWQgaW50IGNwdSkKICAgICBpZiAoICFyYyAp
CiAgICAgICAgIHJjID0gY2xvbmVfbWFwcGluZygodm9pZCAqKXBlcl9jcHUoc3R1YnMuYWRkciwg
Y3B1KSwgcnB0KTsKIAorIG91dDoKKyAgICBVTk1BUF9YRU5fUEFHRVRBQkxFX05FVyhycHQpOwog
ICAgIHJldHVybiByYzsKIH0KIAogc3RhdGljIHZvaWQgY2xlYW51cF9jcHVfcm9vdF9wZ3QodW5z
aWduZWQgaW50IGNwdSkKIHsKLSAgICByb290X3BnZW50cnlfdCAqcnB0ID0gcGVyX2NwdShyb290
X3BndCwgY3B1KTsKKyAgICBtZm5fdCBycHRfbWZuID0gcGVyX2NwdShyb290X3BndF9tZm4sIGNw
dSk7CisgICAgcm9vdF9wZ2VudHJ5X3QgKnJwdDsKICAgICB1bnNpZ25lZCBpbnQgcjsKICAgICB1
bnNpZ25lZCBsb25nIHN0dWJfbGluZWFyID0gcGVyX2NwdShzdHVicy5hZGRyLCBjcHUpOwogCi0g
ICAgaWYgKCAhcnB0ICkKKyAgICBpZiAoIG1mbl9lcShycHRfbWZuLCBJTlZBTElEX01GTikgKQog
ICAgICAgICByZXR1cm47CiAKLSAgICBwZXJfY3B1KHJvb3RfcGd0LCBjcHUpID0gTlVMTDsKKyAg
ICBwZXJfY3B1KHJvb3RfcGd0X21mbiwgY3B1KSA9IElOVkFMSURfTUZOOworCisgICAgcnB0ID0g
bWFwX3hlbl9wYWdldGFibGVfbmV3KHJwdF9tZm4pOwogCiAgICAgZm9yICggciA9IHJvb3RfdGFi
bGVfb2Zmc2V0KERJUkVDVE1BUF9WSVJUX1NUQVJUKTsKICAgICAgICAgICByIDwgcm9vdF90YWJs
ZV9vZmZzZXQoSFlQRVJWSVNPUl9WSVJUX0VORCk7ICsrciApCkBAIC05MzAsNyArOTQzLDggQEAg
c3RhdGljIHZvaWQgY2xlYW51cF9jcHVfcm9vdF9wZ3QodW5zaWduZWQgaW50IGNwdSkKICAgICAg
ICAgZnJlZV94ZW5fcGFnZXRhYmxlX25ldyhsM3RfbWZuKTsKICAgICB9CiAKLSAgICBmcmVlX3hl
bl9wYWdldGFibGUocnB0KTsKKyAgICBVTk1BUF9YRU5fUEFHRVRBQkxFX05FVyhycHQpOworICAg
IGZyZWVfeGVuX3BhZ2V0YWJsZV9uZXcocnB0X21mbik7CiAKICAgICAvKiBBbHNvIHphcCB0aGUg
c3R1YiBtYXBwaW5nIGZvciB0aGlzIENQVS4gKi8KICAgICBpZiAoIHN0dWJfbGluZWFyICkKQEAg
LTExMzQsNyArMTE0OCw3IEBAIHZvaWQgX19pbml0IHNtcF9wcmVwYXJlX2NwdXModm9pZCkKICAg
ICByYyA9IHNldHVwX2NwdV9yb290X3BndCgwKTsKICAgICBpZiAoIHJjICkKICAgICAgICAgcGFu
aWMoIkVycm9yICVkIHNldHRpbmcgdXAgUFYgcm9vdCBwYWdlIHRhYmxlXG4iLCByYyk7Ci0gICAg
aWYgKCBwZXJfY3B1KHJvb3RfcGd0LCAwKSApCisgICAgaWYgKCAhbWZuX2VxKHBlcl9jcHUocm9v
dF9wZ3RfbWZuLCAwKSwgSU5WQUxJRF9NRk4pICkKICAgICB7CiAgICAgICAgIGdldF9jcHVfaW5m
bygpLT5wdl9jcjMgPSAwOwogCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9hc20teDg2L21tLmgg
Yi94ZW4vaW5jbHVkZS9hc20teDg2L21tLmgKaW5kZXggODAxNzNlYjRjMy4uMTJhMTBiMjcwZCAx
MDA2NDQKLS0tIGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9tbS5oCisrKyBiL3hlbi9pbmNsdWRlL2Fz
bS14ODYvbW0uaApAQCAtNjQ2LDQgKzY0Niw2IEBAIHZvaWQgZnJlZV94ZW5fcGFnZXRhYmxlX25l
dyhtZm5fdCBtZm4pOwogCiBsMV9wZ2VudHJ5X3QgKnZpcnRfdG9feGVuX2wxZSh1bnNpZ25lZCBs
b25nIHYpOwogCitERUNMQVJFX1BFUl9DUFUobWZuX3QsIHJvb3RfcGd0X21mbik7CisKICNlbmRp
ZiAvKiBfX0FTTV9YODZfTU1fSF9fICovCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9hc20teDg2
L3Byb2Nlc3Nvci5oIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9wcm9jZXNzb3IuaAppbmRleCBjNmZj
MTk4N2ExLi42OGQxZDgyMDcxIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L3Byb2Nl
c3Nvci5oCisrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvcHJvY2Vzc29yLmgKQEAgLTQ2OSw3ICs0
NjksNyBAQCBzdGF0aWMgaW5saW5lIHZvaWQgZGlzYWJsZV9lYWNoX2lzdChpZHRfZW50cnlfdCAq
aWR0KQogZXh0ZXJuIGlkdF9lbnRyeV90IGlkdF90YWJsZVtdOwogZXh0ZXJuIGlkdF9lbnRyeV90
ICppZHRfdGFibGVzW107CiAKLURFQ0xBUkVfUEVSX0NQVShyb290X3BnZW50cnlfdCAqLCByb290
X3BndCk7CitERUNMQVJFX1BFUl9DUFUoc3RydWN0IHRzc19zdHJ1Y3QsIGluaXRfdHNzKTsKIAog
ZXh0ZXJuIHZvaWQgd3JpdGVfcHRiYXNlKHN0cnVjdCB2Y3B1ICp2KTsKIAotLSAKMi4xNy4xCgoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVs
IG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0
cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

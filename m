Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id D34CC5E4C7
	for <lists+xen-devel@lfdr.de>; Wed,  3 Jul 2019 15:03:30 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hiesA-0004Hx-Mk; Wed, 03 Jul 2019 13:00:30 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=vZpq=VA=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hies9-0004Hs-IO
 for xen-devel@lists.xenproject.org; Wed, 03 Jul 2019 13:00:29 +0000
X-Inumbo-ID: 86731e47-9d92-11e9-8980-bc764e045a96
Received: from m4a0040g.houston.softwaregrp.com (unknown [15.124.2.86])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 86731e47-9d92-11e9-8980-bc764e045a96;
 Wed, 03 Jul 2019 13:00:28 +0000 (UTC)
Received: FROM m4a0040g.houston.softwaregrp.com (15.120.17.146) BY
 m4a0040g.houston.softwaregrp.com WITH ESMTP; 
 Wed,  3 Jul 2019 13:00:05 +0000
Received: from M4W0335.microfocus.com (2002:f78:1193::f78:1193) by
 M4W0334.microfocus.com (2002:f78:1192::f78:1192) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10; Wed, 3 Jul 2019 12:59:38 +0000
Received: from NAM01-BN3-obe.outbound.protection.outlook.com (15.124.8.13) by
 M4W0335.microfocus.com (15.120.17.147) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10 via Frontend Transport; Wed, 3 Jul 2019 12:59:38 +0000
Received: from BY5PR18MB3394.namprd18.prod.outlook.com (10.255.139.95) by
 BY5PR18MB3204.namprd18.prod.outlook.com (10.255.137.97) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2032.17; Wed, 3 Jul 2019 12:59:36 +0000
Received: from BY5PR18MB3394.namprd18.prod.outlook.com
 ([fe80::2005:4b02:1d60:d1bc]) by BY5PR18MB3394.namprd18.prod.outlook.com
 ([fe80::2005:4b02:1d60:d1bc%3]) with mapi id 15.20.2052.010; Wed, 3 Jul 2019
 12:59:36 +0000
From: Jan Beulich <JBeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH v2 1/5] x86/cpuidle: switch to uniform meaning of
 "max_cstate="
Thread-Index: AQHVMZ8qQ6Jc8o6GrEKsOZ2R6D7BYQ==
Date: Wed, 3 Jul 2019 12:59:36 +0000
Message-ID: <0f8bb5dd-718c-7226-db4c-b57ee7089735@suse.com>
References: <0dbf8520-89c7-753e-c10a-13399aec9cd5@suse.com>
In-Reply-To: <0dbf8520-89c7-753e-c10a-13399aec9cd5@suse.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: DB6PR01CA0034.eurprd01.prod.exchangelabs.com
 (2603:10a6:6:45::47) To BY5PR18MB3394.namprd18.prod.outlook.com
 (2603:10b6:a03:194::31)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=JBeulich@suse.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [87.234.252.170]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 574600c8-f354-4d27-229c-08d6ffb64cf8
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328)(7193020);
 SRVR:BY5PR18MB3204; 
x-ms-traffictypediagnostic: BY5PR18MB3204:
x-microsoft-antispam-prvs: <BY5PR18MB3204531C009663E2A2B98DC3B3FB0@BY5PR18MB3204.namprd18.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:1388;
x-forefront-prvs: 00872B689F
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(4636009)(366004)(39860400002)(376002)(136003)(346002)(396003)(54094003)(199004)(189003)(2906002)(66446008)(64756008)(66946007)(14454004)(66476007)(66556008)(53936002)(73956011)(71190400001)(71200400001)(6486002)(5640700003)(72206003)(476003)(66066001)(305945005)(6436002)(31696002)(2616005)(86362001)(4326008)(5660300002)(316002)(54906003)(6512007)(7736002)(36756003)(31686004)(2351001)(25786009)(256004)(8936002)(14444005)(81166006)(386003)(26005)(478600001)(3846002)(186003)(6116002)(68736007)(52116002)(8676002)(76176011)(11346002)(81156014)(6916009)(102836004)(80792005)(486006)(6506007)(2501003)(446003)(99286004);
 DIR:OUT; SFP:1102; SCL:1; SRVR:BY5PR18MB3204;
 H:BY5PR18MB3394.namprd18.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: suse.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: aa07txHGTrzQNydFSpyKrUU/AvcAMyoTt4V18WBXNR7oRRF5+r+3i1ecI4Ln5QynMDSDN9rmvnwsKSByqryu1WPuMzgRZNdH1fn1enR18+tNxTUJPKr4pFV6rzxJHxpCZg+biPn+5ENdt6BRI/DR+XF2+4QHOdgE0d6vR5lgMX0sYSulLIShLdy0/vdC3vfPoUE66yh8BRioraZ/fuVq/CXMlUzJZmDt4PFJpyurZNNjYRbYXSeAhaQcjnJFovGb7ZYempJPPPxofeiIyz8PPxNaxk+k59eHLxmgLZlWuGpWHan8bjdmXqvcOo9yQ30MWnamUJdj6h7OX64k4+T4YAlbLlu65VSSfsW+sRuxFfoVirS9/6jItQGkt/bkbSbdloOxnBhAcMWAGtkM1GxBbNGnSetPnfwzq98HV3cEEaQ=
Content-ID: <D5DDA10325160A4F81BB4331BD9D8116@namprd18.prod.outlook.com>
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-Network-Message-Id: 574600c8-f354-4d27-229c-08d6ffb64cf8
X-MS-Exchange-CrossTenant-originalarrivaltime: 03 Jul 2019 12:59:36.2413 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 856b813c-16e5-49a5-85ec-6f081e13b527
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: JBeulich@suse.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BY5PR18MB3204
X-OriginatorOrg: suse.com
Subject: [Xen-devel] [PATCH v2 1/5] x86/cpuidle: switch to uniform meaning
 of "max_cstate="
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@citrix.com>, Wei Liu <wl@xen.org>,
 =?utf-8?B?Um9nZXIgUGF1IE1vbm7DqQ==?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

V2hpbGUgdGhlIE1XQUlUIGlkbGUgZHJpdmVyIGFscmVhZHkgdGFrZXMgaXQgdG8gbWVhbiBhbiBh
Y3R1YWwgQyBzdGF0ZSwNCnRoZSBBQ1BJIGlkbGUgZHJpdmVyIHNvIGZhciB1c2VkIGl0IGFzIGEg
bGlzdCBpbmRleC4gVGhlIGxpc3QgaW5kZXgsDQpob3dldmVyLCBpcyBhbiBpbXBsZW1lbnRhdGlv
biBkZXRhaWwgb2YgWGVuIGFuZCBhZmZlY3RlZCBieSBmaXJtd2FyZQ0Kc2V0dGluZ3MgKGkuZS4g
bm90IG5lY2Vzc2FyaWx5IHVuaWZvcm0gZm9yIGEgcGFydGljdWxhciBzeXN0ZW0pLg0KDQpXaGls
ZSB0b3VjaGluZyB0aGlzIGNvZGUgYWxzbyBhdm9pZCBpbnZva2luZyBtZW51X2dldF90cmFjZV9k
YXRhKCkNCndoZW4gdHJhY2luZyBpcyBub3QgYWN0aXZlLiBGb3IgY29uc2lzdGVuY3kgZG8gdGhp
cyBhbHNvIGZvciB0aGUNCk1XQUlUIGRyaXZlci4NCg0KTm90ZSB0aGF0IEknbSBpbnRlbnRpb25h
bGx5IG5vdCBhZGRpbmcgYW55IHNvcnRpbmcgbG9naWMgdG8gc2V0X2N4KCk6DQpCZWZvcmUgYW5k
IGFmdGVyIHRoaXMgcGF0Y2ggd2UgYXNzdW1lIGVudHJpZXMgdG8gYXJyaXZlIGluIG9yZGVyLCBz
bw0KdGhpcyB3b3VsZCBiZSBhbiBvcnRob2dvbmFsIGNoYW5nZS4NCg0KVGFrZSB0aGUgb3Bwb3J0
dW5pdHkgYW5kIGFkZCBtaW5pbWFsIGRvY3VtZW50YXRpb24gZm9yIHRoZSBjb21tYW5kIGxpbmUN
Cm9wdGlvbi4NCg0KU2lnbmVkLW9mZi1ieTogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29t
Pg0KLS0tDQp2MjogQWRqdXN0IHhlbnBtIG91dHB1dCB3b3JkaW5nIGEgbGl0dGxlLiBFeHBsaWNp
dGx5IGxvZyAidW5saW1pdGVkIi4NCi0tLQ0KVEJEOiBJIHdvbmRlciBpZiB3ZSByZWFsbHkgbmVl
ZCBzdHJ1Y3QgYWNwaV9wcm9jZXNzb3JfY3gncyBpZHggZmllbGQNCiAgICAgIGFueW1vcmUuIEl0
J3MgdXNlZCBpbiBhIG51bWJlciBvZiAocXVlc3Rpb25hYmxlKSBwbGFjZXMgLi4uDQoNCi0tLSBh
L2RvY3MvbWlzYy94ZW4tY29tbWFuZC1saW5lLnBhbmRvYw0KKysrIGIvZG9jcy9taXNjL3hlbi1j
b21tYW5kLWxpbmUucGFuZG9jDQpAQCAtMTM3Niw2ICsxMzc2LDggQEAgVGhpcyBvcHRpb24gaXMg
aWdub3JlZCBpbiAqKnB2LXNoaW0qKiBtbw0KICAjIyMgbWF4X2NzdGF0ZSAoeDg2KQ0KICA+IGA9
IDxpbnRlZ2VyPmANCiAgDQorU3BlY2lmeSB0aGUgZGVlcGVzdCBDLXN0YXRlIENQVXMgYXJlIHBl
cm1pdHRlZCB0byBiZSBwbGFjZWQgaW4uDQorDQogICMjIyBtYXhfZ3NpX2lycXMgKHg4NikNCiAg
PiBgPSA8aW50ZWdlcj5gDQogIA0KLS0tIGEvdG9vbHMvbWlzYy94ZW5wbS5jDQorKysgYi90b29s
cy9taXNjL3hlbnBtLmMNCkBAIC02NCw3ICs2NCw3IEBAIHZvaWQgc2hvd19oZWxwKHZvaWQpDQog
ICAgICAgICAgICAgICIgc2V0LXNjaGVkLXNtdCAgICAgICAgICAgZW5hYmxlfGRpc2FibGUgZW5h
YmxlL2Rpc2FibGUgc2NoZWR1bGVyIHNtdCBwb3dlciBzYXZpbmdcbiINCiAgICAgICAgICAgICAg
IiBzZXQtdmNwdS1taWdyYXRpb24tZGVsYXkgICAgICA8bnVtPiBzZXQgc2NoZWR1bGVyIHZjcHUg
bWlncmF0aW9uIGRlbGF5IGluIHVzXG4iDQogICAgICAgICAgICAgICIgZ2V0LXZjcHUtbWlncmF0
aW9uLWRlbGF5ICAgICAgICAgICAgZ2V0IHNjaGVkdWxlciB2Y3B1IG1pZ3JhdGlvbiBkZWxheVxu
Ig0KLSAgICAgICAgICAgICIgc2V0LW1heC1jc3RhdGUgICAgICAgIDxudW0+ICAgICAgICAgc2V0
IHRoZSBDLVN0YXRlIGxpbWl0YXRpb24gKDxudW0+ID49IDApXG4iDQorICAgICAgICAgICAgIiBz
ZXQtbWF4LWNzdGF0ZSAgICAgICAgPG51bT58J3VubGltaXRlZCcgc2V0IHRoZSBDLVN0YXRlIGxp
bWl0YXRpb24gKDxudW0+ID49IDApXG4iDQogICAgICAgICAgICAgICIgc3RhcnQgW3NlY29uZHNd
ICAgICAgICAgICAgICAgICAgICAgc3RhcnQgY29sbGVjdCBDeC9QeCBzdGF0aXN0aWNzLFxuIg0K
ICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1
dCBhZnRlciBDVFJMLUMgb3IgU0lHSU5UIG9yIHNldmVyYWwgc2Vjb25kcy5cbiINCiAgICAgICAg
ICAgICAgIiBlbmFibGUtdHVyYm8tbW9kZSAgICAgW2NwdWlkXSAgICAgICBlbmFibGUgVHVyYm8g
TW9kZSBmb3IgcHJvY2Vzc29ycyB0aGF0IHN1cHBvcnQgaXQuXG4iDQpAQCAtMTk0LDcgKzE5NCwx
MSBAQCBzdGF0aWMgaW50IHNob3dfbWF4X2NzdGF0ZSh4Y19pbnRlcmZhY2UNCiAgICAgIGlmICgg
KHJldCA9IHhjX2dldF9jcHVpZGxlX21heF9jc3RhdGUoeGNfaGFuZGxlLCAmdmFsdWUpKSApDQog
ICAgICAgICAgcmV0dXJuIHJldDsNCiAgDQotICAgIHByaW50ZigiTWF4IHBvc3NpYmxlIEMtc3Rh
dGU6IEMlZFxuXG4iLCB2YWx1ZSk7DQorICAgIGlmICggdmFsdWUgPCBYRU5fU1lTQ1RMX0NYX1VO
TElNSVRFRCApDQorICAgICAgICBwcmludGYoIk1heCBwb3NzaWJsZSBDLXN0YXRlOiBDJSJQUkl1
MzIiXG5cbiIsIHZhbHVlKTsNCisgICAgZWxzZQ0KKyAgICAgICAgcHJpbnRmKCJBbGwgQy1zdGF0
ZXMgYWxsb3dlZFxuXG4iKTsNCisNCiAgICAgIHJldHVybiAwOw0KICB9DQogIA0KQEAgLTExMTcs
MTggKzExMjEsMjQgQEAgdm9pZCBnZXRfdmNwdV9taWdyYXRpb25fZGVsYXlfZnVuYyhpbnQgYQ0K
ICB2b2lkIHNldF9tYXhfY3N0YXRlX2Z1bmMoaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkNCiAgew0K
ICAgICAgaW50IHZhbHVlOw0KKyAgICBjaGFyIGJ1ZlsxMl07DQogIA0KLSAgICBpZiAoIGFyZ2Mg
IT0gMSB8fCBzc2NhbmYoYXJndlswXSwgIiVkIiwgJnZhbHVlKSAhPSAxIHx8IHZhbHVlIDwgMCAp
DQorICAgIGlmICggYXJnYyAhPSAxIHx8DQorICAgICAgICAgKHNzY2FuZihhcmd2WzBdLCAiJWQi
LCAmdmFsdWUpID09IDENCisgICAgICAgICAgPyB2YWx1ZSA8IDANCisgICAgICAgICAgOiAodmFs
dWUgPSBYRU5fU1lTQ1RMX0NYX1VOTElNSVRFRCwgc3RyY21wKGFyZ3ZbMF0sICJ1bmxpbWl0ZWQi
KSkpICkNCiAgICAgIHsNCi0gICAgICAgIGZwcmludGYoc3RkZXJyLCAiTWlzc2luZyBvciBpbnZh
bGlkIGFyZ3VtZW50KHMpXG4iKTsNCisgICAgICAgIGZwcmludGYoc3RkZXJyLCAiTWlzc2luZywg
ZXhjZXNzLCBvciBpbnZhbGlkIGFyZ3VtZW50KHMpXG4iKTsNCiAgICAgICAgICBleGl0KEVJTlZB
TCk7DQogICAgICB9DQogIA0KKyAgICBzbnByaW50ZihidWYsIEFSUkFZX1NJWkUoYnVmKSwgIkMl
ZCIsIHZhbHVlKTsNCisNCiAgICAgIGlmICggIXhjX3NldF9jcHVpZGxlX21heF9jc3RhdGUoeGNf
aGFuZGxlLCAodWludDMyX3QpdmFsdWUpICkNCi0gICAgICAgIHByaW50Zigic2V0IG1heF9jc3Rh
dGUgdG8gQyVkIHN1Y2NlZWRlZFxuIiwgdmFsdWUpOw0KKyAgICAgICAgcHJpbnRmKCJtYXggQy1z
dGF0ZSBzZXQgdG8gJXNcbiIsIHZhbHVlID49IDAgPyBidWYgOiBhcmd2WzBdKTsNCiAgICAgIGVs
c2UNCi0gICAgICAgIGZwcmludGYoc3RkZXJyLCAic2V0IG1heF9jc3RhdGUgdG8gQyVkIGZhaWxl
ZCAoJWQgLSAlcylcbiIsDQotICAgICAgICAgICAgICAgIHZhbHVlLCBlcnJubywgc3RyZXJyb3Io
ZXJybm8pKTsNCisgICAgICAgIGZwcmludGYoc3RkZXJyLCAiRmFpbGVkIHRvIHNldCBtYXggQy1z
dGF0ZSB0byAlcyAoJWQgLSAlcylcbiIsDQorICAgICAgICAgICAgICAgIHZhbHVlID49IDAgPyBi
dWYgOiBhcmd2WzBdLCBlcnJubywgc3RyZXJyb3IoZXJybm8pKTsNCiAgfQ0KICANCiAgdm9pZCBl
bmFibGVfdHVyYm9fbW9kZShpbnQgYXJnYywgY2hhciAqYXJndltdKQ0KLS0tIGEveGVuL2FyY2gv
eDg2L2FjcGkvY3B1X2lkbGUuYw0KKysrIGIveGVuL2FyY2gveDg2L2FjcGkvY3B1X2lkbGUuYw0K
QEAgLTEwMyw3ICsxMDMsNyBAQCBib29sIGxhcGljX3RpbWVyX2luaXQodm9pZCkNCiAgfQ0KICAN
CiAgdm9pZCAoKl9fcmVhZF9tb3N0bHkgcG1faWRsZV9zYXZlKSh2b2lkKTsNCi11bnNpZ25lZCBp
bnQgbWF4X2NzdGF0ZSBfX3JlYWRfbW9zdGx5ID0gQUNQSV9QUk9DRVNTT1JfTUFYX1BPV0VSIC0g
MTsNCit1bnNpZ25lZCBpbnQgbWF4X2NzdGF0ZSBfX3JlYWRfbW9zdGx5ID0gVUlOVF9NQVg7DQog
IGludGVnZXJfcGFyYW0oIm1heF9jc3RhdGUiLCBtYXhfY3N0YXRlKTsNCiAgc3RhdGljIGJvb2wg
X19yZWFkX21vc3RseSBsb2NhbF9hcGljX3RpbWVyX2MyX29rOw0KICBib29sZWFuX3BhcmFtKCJs
YXBpY190aW1lcl9jMl9vayIsIGxvY2FsX2FwaWNfdGltZXJfYzJfb2spOw0KQEAgLTM0NCw3ICsz
NDQsMTAgQEAgc3RhdGljIHZvaWQgZHVtcF9jeCh1bnNpZ25lZCBjaGFyIGtleSkNCiAgICAgIHVu
c2lnbmVkIGludCBjcHU7DQogIA0KICAgICAgcHJpbnRrKCInJWMnIHByZXNzZWQgLT4gcHJpbnRp
bmcgQUNQSSBDeCBzdHJ1Y3R1cmVzXG4iLCBrZXkpOw0KLSAgICBwcmludGsoIm1heCBjc3RhdGU6
IEMldVxuIiwgbWF4X2NzdGF0ZSk7DQorICAgIGlmICggbWF4X2NzdGF0ZSA8IFVJTlRfTUFYICkN
CisgICAgICAgIHByaW50aygibWF4IHN0YXRlOiBDJXVcbiIsIG1heF9jc3RhdGUpOw0KKyAgICBl
bHNlDQorICAgICAgICBwcmludGsoIm1heCBzdGF0ZTogdW5saW1pdGVkXG4iKTsNCiAgICAgIGZv
cl9lYWNoX3ByZXNlbnRfY3B1ICggY3B1ICkNCiAgICAgIHsNCiAgICAgICAgICBzdHJ1Y3QgYWNw
aV9wcm9jZXNzb3JfcG93ZXIgKnBvd2VyID0gcHJvY2Vzc29yX3Bvd2Vyc1tjcHVdOw0KQEAgLTU4
MiwxMyArNTg1LDE5IEBAIHN0YXRpYyB2b2lkIGFjcGlfcHJvY2Vzc29yX2lkbGUodm9pZCkNCiAg
ICAgIGlmICggbWF4X2NzdGF0ZSA+IDAgJiYgcG93ZXIgJiYgIXNjaGVkX2hhc191cmdlbnRfdmNw
dSgpICYmDQogICAgICAgICAgIChuZXh0X3N0YXRlID0gY3B1aWRsZV9jdXJyZW50X2dvdmVybm9y
LT5zZWxlY3QocG93ZXIpKSA+IDAgKQ0KICAgICAgew0KLSAgICAgICAgY3ggPSAmcG93ZXItPnN0
YXRlc1tuZXh0X3N0YXRlXTsNCi0gICAgICAgIGlmICggY3gtPnR5cGUgPT0gQUNQSV9TVEFURV9D
MyAmJiBwb3dlci0+ZmxhZ3MuYm1fY2hlY2sgJiYNCi0gICAgICAgICAgICAgYWNwaV9pZGxlX2Jt
X2NoZWNrKCkgKQ0KLSAgICAgICAgICAgIGN4ID0gcG93ZXItPnNhZmVfc3RhdGU7DQotICAgICAg
ICBpZiAoIGN4LT5pZHggPiBtYXhfY3N0YXRlICkNCi0gICAgICAgICAgICBjeCA9ICZwb3dlci0+
c3RhdGVzW21heF9jc3RhdGVdOw0KLSAgICAgICAgbWVudV9nZXRfdHJhY2VfZGF0YSgmZXhwLCAm
cHJlZCk7DQorICAgICAgICBkbyB7DQorICAgICAgICAgICAgY3ggPSAmcG93ZXItPnN0YXRlc1tu
ZXh0X3N0YXRlXTsNCisgICAgICAgIH0gd2hpbGUgKCBjeC0+dHlwZSA+IG1heF9jc3RhdGUgJiYg
LS1uZXh0X3N0YXRlICk7DQorICAgICAgICBpZiAoIG5leHRfc3RhdGUgKQ0KKyAgICAgICAgew0K
KyAgICAgICAgICAgIGlmICggY3gtPnR5cGUgPT0gQUNQSV9TVEFURV9DMyAmJiBwb3dlci0+Zmxh
Z3MuYm1fY2hlY2sgJiYNCisgICAgICAgICAgICAgICAgIGFjcGlfaWRsZV9ibV9jaGVjaygpICkN
CisgICAgICAgICAgICAgICAgY3ggPSBwb3dlci0+c2FmZV9zdGF0ZTsNCisgICAgICAgICAgICBp
ZiAoIHRiX2luaXRfZG9uZSApDQorICAgICAgICAgICAgICAgIG1lbnVfZ2V0X3RyYWNlX2RhdGEo
JmV4cCwgJnByZWQpOw0KKyAgICAgICAgfQ0KKyAgICAgICAgZWxzZQ0KKyAgICAgICAgICAgIGN4
ID0gTlVMTDsNCiAgICAgIH0NCiAgICAgIGlmICggIWN4ICkNCiAgICAgIHsNCkBAIC0xMzk2LDEy
ICsxNDA1LDEyIEBAIGludCBwbXN0YXRfcmVzZXRfY3hfc3RhdCh1aW50MzJfdCBjcHVpZCkNCiAg
DQogIHZvaWQgY3B1aWRsZV9kaXNhYmxlX2RlZXBfY3N0YXRlKHZvaWQpDQogIHsNCi0gICAgaWYg
KCBtYXhfY3N0YXRlID4gMSApDQorICAgIGlmICggbWF4X2NzdGF0ZSA+IEFDUElfU1RBVEVfQzEg
KQ0KICAgICAgew0KICAgICAgICAgIGlmICggbG9jYWxfYXBpY190aW1lcl9jMl9vayApDQotICAg
ICAgICAgICAgbWF4X2NzdGF0ZSA9IDI7DQorICAgICAgICAgICAgbWF4X2NzdGF0ZSA9IEFDUElf
U1RBVEVfQzI7DQogICAgICAgICAgZWxzZQ0KLSAgICAgICAgICAgIG1heF9jc3RhdGUgPSAxOw0K
KyAgICAgICAgICAgIG1heF9jc3RhdGUgPSBBQ1BJX1NUQVRFX0MxOw0KICAgICAgfQ0KICANCiAg
ICAgIGhwZXRfZGlzYWJsZV9sZWdhY3lfYnJvYWRjYXN0KCk7DQpAQCAtMTQwOSw3ICsxNDE4LDgg
QEAgdm9pZCBjcHVpZGxlX2Rpc2FibGVfZGVlcF9jc3RhdGUodm9pZCkNCiAgDQogIGJvb2wgY3B1
aWRsZV91c2luZ19kZWVwX2NzdGF0ZSh2b2lkKQ0KICB7DQotICAgIHJldHVybiB4ZW5fY3B1aWRs
ZSAmJiBtYXhfY3N0YXRlID4gKGxvY2FsX2FwaWNfdGltZXJfYzJfb2sgPyAyIDogMSk7DQorICAg
IHJldHVybiB4ZW5fY3B1aWRsZSAmJiBtYXhfY3N0YXRlID4gKGxvY2FsX2FwaWNfdGltZXJfYzJf
b2sgPyBBQ1BJX1NUQVRFX0MyDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBBQ1BJX1NUQVRFX0MxKTsNCiAgfQ0KICANCiAg
c3RhdGljIGludCBjcHVfY2FsbGJhY2soDQotLS0gYS94ZW4vYXJjaC94ODYvY3B1L213YWl0LWlk
bGUuYw0KKysrIGIveGVuL2FyY2gveDg2L2NwdS9td2FpdC1pZGxlLmMNCkBAIC03MzEsNyArNzMx
LDggQEAgc3RhdGljIHZvaWQgbXdhaXRfaWRsZSh2b2lkKQ0KICAJCX0gd2hpbGUgKGN4LT50eXBl
ID4gbWF4X2NzdGF0ZSAmJiAtLW5leHRfc3RhdGUpOw0KICAJCWlmICghbmV4dF9zdGF0ZSkNCiAg
CQkJY3ggPSBOVUxMOw0KLQkJbWVudV9nZXRfdHJhY2VfZGF0YSgmZXhwLCAmcHJlZCk7DQorCQll
bHNlIGlmICh0Yl9pbml0X2RvbmUpDQorCQkJbWVudV9nZXRfdHJhY2VfZGF0YSgmZXhwLCAmcHJl
ZCk7DQogIAl9DQogIAlpZiAoIWN4KSB7DQogIAkJaWYgKHBtX2lkbGVfc2F2ZSkNCi0tLSBhL3hl
bi9hcmNoL3g4Ni90aW1lLmMNCisrKyBiL3hlbi9hcmNoL3g4Ni90aW1lLmMNCkBAIC0yMjY4LDcg
KzIyNjgsNyBAQCBzdGF0aWMgdm9pZCBkdW1wX3NvZnR0c2ModW5zaWduZWQgY2hhciBrDQogICAg
ICBlbHNlIGlmICggYm9vdF9jcHVfaGFzKFg4Nl9GRUFUVVJFX0NPTlNUQU5UX1RTQyApICkNCiAg
ICAgIHsNCiAgICAgICAgICBwcmludGsoIlRTQyBoYXMgY29uc3RhbnQgcmF0ZSwgIik7DQotICAg
ICAgICBpZiAobWF4X2NzdGF0ZSA8PSAyICYmIHRzY19tYXhfd2FycCA9PSAwKQ0KKyAgICAgICAg
aWYgKCBtYXhfY3N0YXRlIDw9IEFDUElfU1RBVEVfQzIgJiYgdHNjX21heF93YXJwID09IDAgKQ0K
ICAgICAgICAgICAgICBwcmludGsoIm5vIGRlZXAgQ3N0YXRlcywgcGFzc2VkIHdhcnAgdGVzdCwg
ZGVlbWVkIHJlbGlhYmxlLCAiKTsNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgIHByaW50
aygiZGVlcCBDc3RhdGVzIHBvc3NpYmxlLCBzbyBub3QgcmVsaWFibGUsICIpOw0KLS0tIGEveGVu
L2RyaXZlcnMvYWNwaS9wbXN0YXQuYw0KKysrIGIveGVuL2RyaXZlcnMvYWNwaS9wbXN0YXQuYw0K
QEAgLTQ1MSw2ICs0NTEsNyBAQCBpbnQgZG9fcG1fb3Aoc3RydWN0IHhlbl9zeXNjdGxfcG1fb3Ag
Km9wDQogIA0KICAgICAgY2FzZSBYRU5fU1lTQ1RMX3BtX29wX2dldF9tYXhfY3N0YXRlOg0KICAg
ICAgew0KKyAgICAgICAgQlVJTERfQlVHX09OKFhFTl9TWVNDVExfQ1hfVU5MSU1JVEVEICE9IFVJ
TlRfTUFYKTsNCiAgICAgICAgICBvcC0+dS5nZXRfbWF4X2NzdGF0ZSA9IGFjcGlfZ2V0X2NzdGF0
ZV9saW1pdCgpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KLS0tIGEveGVuL2luY2x1ZGUv
cHVibGljL3N5c2N0bC5oDQorKysgYi94ZW4vaW5jbHVkZS9wdWJsaWMvc3lzY3RsLmgNCkBAIC0z
NzAsNiArMzcwLDcgQEAgc3RydWN0IHhlbl9zeXNjdGxfcG1fb3Agew0KICAgICAgICAgIHN0cnVj
dCB4ZW5fc2V0X2NwdWZyZXFfcGFyYSBzZXRfcGFyYTsNCiAgICAgICAgICB1aW50NjRfYWxpZ25l
ZF90IGdldF9hdmdmcmVxOw0KICAgICAgICAgIHVpbnQzMl90ICAgICAgICAgICAgICAgICAgICBz
ZXRfc2NoZWRfb3B0X3NtdDsNCisjZGVmaW5lIFhFTl9TWVNDVExfQ1hfVU5MSU1JVEVEIDB4ZmZm
ZmZmZmYNCiAgICAgICAgICB1aW50MzJfdCAgICAgICAgICAgICAgICAgICAgZ2V0X21heF9jc3Rh
dGU7DQogICAgICAgICAgdWludDMyX3QgICAgICAgICAgICAgICAgICAgIHNldF9tYXhfY3N0YXRl
Ow0KICAgICAgfSB1Ow0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0
Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRl
dmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 736ED15A45D
	for <lists+xen-devel@lfdr.de>; Wed, 12 Feb 2020 10:15:10 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j1o36-0000rP-Ps; Wed, 12 Feb 2020 09:11:12 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=Zgzp=4A=citrix.com=roger.pau@srs-us1.protection.inumbo.net>)
 id 1j1o34-0000rK-N6
 for xen-devel@lists.xenproject.org; Wed, 12 Feb 2020 09:11:10 +0000
X-Inumbo-ID: 9aef5542-4d77-11ea-b703-12813bfff9fa
Received: from esa5.hc3370-68.iphmx.com (unknown [216.71.155.168])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 9aef5542-4d77-11ea-b703-12813bfff9fa;
 Wed, 12 Feb 2020 09:11:08 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1581498668;
 h=date:from:to:cc:subject:message-id:references:
 mime-version:content-transfer-encoding:in-reply-to;
 bh=Prg8G31LLQM3tCVLCN6yQ9e1DqFCa3q40tOUPXE00kg=;
 b=CGpze1KTYv7PnmLguGkX2L5NqNB4keCWgzOd78YC5Vf0NTG6de1BenBf
 GSx1ITts1vftjzkLdXNi4OzEYe5qU7sKv1UdXCULx9QTlysu12Kr5NTp6
 9MWvSLxYhFZd7abYmItOd//278V1rsn9YtsK1lAyygW7jbiSGy3pQGAi7 A=;
Authentication-Results: esa5.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=roger.pau@citrix.com;
 spf=Pass smtp.mailfrom=roger.pau@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 roger.pau@citrix.com) identity=pra; client-ip=162.221.158.21;
 receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="roger.pau@citrix.com";
 x-sender="roger.pau@citrix.com"; x-conformance=sidf_compatible
Received-SPF: Pass (esa5.hc3370-68.iphmx.com: domain of
 roger.pau@citrix.com designates 162.221.158.21 as permitted
 sender) identity=mailfrom; client-ip=162.221.158.21;
 receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="roger.pau@citrix.com";
 x-sender="roger.pau@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83
 ip4:168.245.78.127 ~all"
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="roger.pau@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: s28imcWXuA3hb1OqStplu+hr6exfUVBG5Ag7C7F99YqWgcfpUqON2YWbg+RfWL7zAIRCCWo99k
 771r8tfd/8PsKD0pV5hwBT61YVlQ+WzHYMLr66awCT9SHKiTe3mei9q2JFePuasm4iFdOrCuka
 7+BFdHftS95UEym6SU7K0VzPVcWJ4LzVMTR9+qh5bGFAe36cQRMf2CnYTKH2fGI+DZY/yN79lR
 WowxMs8x9mDxMB7d2IDAMP/w8zfg8FgPXXm/axOI/v1ayEGElgYguPnREv1GOfRA/xAY8UJp8T
 M+o=
X-SBRS: 2.7
X-MesageID: 12690175
X-Ironport-Server: esa5.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.70,428,1574139600"; d="scan'208";a="12690175"
Date: Wed, 12 Feb 2020 10:10:53 +0100
From: Roger Pau =?utf-8?B?TW9ubsOp?= <roger.pau@citrix.com>
To: Sander Eikelenboom <linux@eikelenboom.it>
Message-ID: <20200212091053.GP4679@Air-de-Roger>
References: <ebd9cf75-36cd-c064-661d-88a49445ecce@eikelenboom.it>
 <20200203122319.GU4679@Air-de-Roger>
 <3bcb67a6-3156-f4b0-5ac6-58ca61038cec@eikelenboom.it>
 <20200203124127.GV4679@Air-de-Roger>
 <fe191f7a-b902-19a3-e4c8-ace8c02319c6@eikelenboom.it>
 <20200203132108.GW4679@Air-de-Roger>
 <74e8356c-c7e0-6110-961d-3f3a7cda47a8@eikelenboom.it>
 <20200211140022.GJ4679@Air-de-Roger>
 <cd071700-7e7f-bd00-843c-46c32466e9c1@eikelenboom.it>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <cd071700-7e7f-bd00-843c-46c32466e9c1@eikelenboom.it>
X-ClientProxiedBy: AMSPEX02CAS02.citrite.net (10.69.22.113) To
 AMSPEX02CL01.citrite.net (10.69.22.125)
Subject: Re: [Xen-devel] Xen-unstable: pci-passthrough regression bisected
 to: x86/smp: use APIC ALLBUT destination shorthand when possible
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gV2VkLCBGZWIgMTIsIDIwMjAgYXQgMDk6NDY6MjJBTSArMDEwMCwgU2FuZGVyIEVpa2VsZW5i
b29tIHdyb3RlOgo+IE9uIDExLzAyLzIwMjAgMTU6MDAsIFJvZ2VyIFBhdSBNb25uw6kgd3JvdGU6
Cj4gPiBUaGFua3MsIEkgaGF2ZSBhbm90aGVyIHBhdGNoIGZvciB5b3UgdG8gdHJ5LCB3aGljaCB3
aWxsIGxpa2VseSBtYWtlCj4gPiB5b3VyIHN5c3RlbSBjcmFzaC4gQ291bGQgeW91IGdpdmUgaXQg
YSB0cnkgYW5kIHBhc3RlIHRoZSBsb2cgb3V0cHV0Pwo+ID4gCj4gPiBUaGFua3MsIFJvZ2VyLgo+
IAo+IEFwcGxpZWQgdGhlIHBhdGNoLCByZWJ1aWxkLCByZWJvb3RlZCBhbmQgYnJhY2VkIGZvciBp
bXBhY3QgLi4uCj4gSG93ZXZlciB0aGUgZGV2aWNlIGJ1Z2dlZCBhZ2FpbiwgYnV0IG5vIHhlbiBw
YW5pYyBvY2N1cmVkLCBzbyBub3RoaW5nCj4gc3BlY2lhbCBpbiB0aGUgbG9ncy4KPiBJIG9ubHkg
aGFkIHRpbWUgdG8gdHJ5IGl0IG9uY2UsIHNvIEkgY291bGQgcmV0cnkgdGhpcyBldmVuaW5nLgoK
U29ycnksIHRoYXQncyBteSBmYXVsdCBiZWNhdXNlIEkgZ2F2ZSB5b3UgYSBwYXRjaCB0aGF0IHdh
cyBtaXNzaW5nIGEKY2h1bmssIHRoZSBmb2xsb3dpbmcgc2hvdWxkIGhvcGVmdWxseSB0cmlnZ2Vy
IHRoZSBwYW5pYy4gV291bGQgeW91Cm1pbmQgdHJ5aW5nIGFnYWluPwoKVGhhbmtzLCBSb2dlci4K
LS0tODwtLS0KY29tbWl0IDliZDdlZThmYTgzNjY5MDA4N2YzZWVmODlkMjRhZGVkMGM4Y2Q4YWUK
QXV0aG9yOiBSb2dlciBQYXUgTW9ubmUgPHJvZ2VyLnBhdUBjaXRyaXguY29tPgpEYXRlOiAgIFR1
ZSBGZWIgMTEgMTE6MTQ6NDggMjAyMCArMDEwMAoKICAgIHg4NjogYWRkIGFjY2Vzc29ycyBmb3Ig
c2NyYXRjaCBjcHUgbWFzawogICAgCiAgICBDdXJyZW50IHVzYWdlIG9mIHRoZSBwZXItQ1BVIHNj
cmF0Y2ggY3B1bWFzayBpcyBkYW5nZXJvdXMgc2luY2UKICAgIHRoZXJlJ3Mgbm8gd2F5IHRvIGZp
Z3VyZSBvdXQgaWYgdGhlIG1hc2sgaXMgYWxyZWFkeSBiZWluZyB1c2VkIGV4Y2VwdAogICAgZm9y
IG1hbnVhbCBjb2RlIGluc3BlY3Rpb24gb2YgYWxsIHRoZSBjYWxsZXJzIGFuZCBwb3NzaWJsZSBj
YWxsIHBhdGhzLgogICAgCiAgICBUaGlzIGlzIHVuc2FmZSBhbmQgbm90IHJlbGlhYmxlLCBzbyBp
bnRyb2R1Y2UgYSBtaW5pbWFsIGdldC9wdXQKICAgIGluZnJhc3RydWN0dXJlIHRvIHByZXZlbnQg
bmVzdGVkIHVzYWdlIG9mIHRoZSBzY3JhdGNoIG1hc2suCiAgICAKICAgIFNpZ25lZC1vZmYtYnk6
IFJvZ2VyIFBhdSBNb25uw6kgPHJvZ2VyLnBhdUBjaXRyaXguY29tPgoKZGlmZiAtLWdpdCBhL3hl
bi9hcmNoL3g4Ni9pb19hcGljLmMgYi94ZW4vYXJjaC94ODYvaW9fYXBpYy5jCmluZGV4IGU5OGUw
OGU5YzguLjRlZTI2MWI2MzIgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9pb19hcGljLmMKKysr
IGIveGVuL2FyY2gveDg2L2lvX2FwaWMuYwpAQCAtMjIzNiwxMCArMjIzNiwxMSBAQCBpbnQgaW9f
YXBpY19zZXRfcGNpX3JvdXRpbmcgKGludCBpb2FwaWMsIGludCBwaW4sIGludCBpcnEsIGludCBl
ZGdlX2xldmVsLCBpbnQgYQogICAgIGVudHJ5LnZlY3RvciA9IHZlY3RvcjsKIAogICAgIGlmIChj
cHVtYXNrX2ludGVyc2VjdHMoZGVzYy0+YXJjaC5jcHVfbWFzaywgVEFSR0VUX0NQVVMpKSB7Ci0g
ICAgICAgIGNwdW1hc2tfdCAqbWFzayA9IHRoaXNfY3B1KHNjcmF0Y2hfY3B1bWFzayk7CisgICAg
ICAgIGNwdW1hc2tfdCAqbWFzayA9IGdldF9zY3JhdGNoX2NwdW1hc2soKTsKIAogICAgICAgICBj
cHVtYXNrX2FuZChtYXNrLCBkZXNjLT5hcmNoLmNwdV9tYXNrLCBUQVJHRVRfQ1BVUyk7CiAgICAg
ICAgIFNFVF9ERVNUKGVudHJ5LCBsb2dpY2FsLCBjcHVfbWFza190b19hcGljaWQobWFzaykpOwor
ICAgICAgICBwdXRfc2NyYXRjaF9jcHVtYXNrKCk7CiAgICAgfSBlbHNlIHsKICAgICAgICAgcHJp
bnRrKFhFTkxPR19FUlIgIklSUSVkOiBubyB0YXJnZXQgQ1BVICglKnBiIHZzICUqcGIpXG4iLAog
ICAgICAgICAgICAgICAgaXJxLCBDUFVNQVNLX1BSKGRlc2MtPmFyY2guY3B1X21hc2spLCBDUFVN
QVNLX1BSKFRBUkdFVF9DUFVTKSk7CkBAIC0yNDMzLDEwICsyNDM0LDExIEBAIGludCBpb2FwaWNf
Z3Vlc3Rfd3JpdGUodW5zaWduZWQgbG9uZyBwaHlzYmFzZSwgdW5zaWduZWQgaW50IHJlZywgdTMy
IHZhbCkKIAogICAgIGlmICggY3B1bWFza19pbnRlcnNlY3RzKGRlc2MtPmFyY2guY3B1X21hc2ss
IFRBUkdFVF9DUFVTKSApCiAgICAgewotICAgICAgICBjcHVtYXNrX3QgKm1hc2sgPSB0aGlzX2Nw
dShzY3JhdGNoX2NwdW1hc2spOworICAgICAgICBjcHVtYXNrX3QgKm1hc2sgPSBnZXRfc2NyYXRj
aF9jcHVtYXNrKCk7CiAKICAgICAgICAgY3B1bWFza19hbmQobWFzaywgZGVzYy0+YXJjaC5jcHVf
bWFzaywgVEFSR0VUX0NQVVMpOwogICAgICAgICBTRVRfREVTVChydGUsIGxvZ2ljYWwsIGNwdV9t
YXNrX3RvX2FwaWNpZChtYXNrKSk7CisgICAgICAgIHB1dF9zY3JhdGNoX2NwdW1hc2soKTsKICAg
ICB9CiAgICAgZWxzZQogICAgIHsKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9pcnEuYyBiL3hl
bi9hcmNoL3g4Ni9pcnEuYwppbmRleCBjYzJlYjhlOTI1Li43ZWNmNTM3NmUzIDEwMDY0NAotLS0g
YS94ZW4vYXJjaC94ODYvaXJxLmMKKysrIGIveGVuL2FyY2gveDg2L2lycS5jCkBAIC0xOTYsNyAr
MTk2LDcgQEAgc3RhdGljIHZvaWQgX2NsZWFyX2lycV92ZWN0b3Ioc3RydWN0IGlycV9kZXNjICpk
ZXNjKQogewogICAgIHVuc2lnbmVkIGludCBjcHUsIG9sZF92ZWN0b3IsIGlycSA9IGRlc2MtPmly
cTsKICAgICB1bnNpZ25lZCBpbnQgdmVjdG9yID0gZGVzYy0+YXJjaC52ZWN0b3I7Ci0gICAgY3B1
bWFza190ICp0bXBfbWFzayA9IHRoaXNfY3B1KHNjcmF0Y2hfY3B1bWFzayk7CisgICAgY3B1bWFz
a190ICp0bXBfbWFzayA9IGdldF9zY3JhdGNoX2NwdW1hc2soKTsKIAogICAgIEJVR19PTighdmFs
aWRfaXJxX3ZlY3Rvcih2ZWN0b3IpKTsKIApAQCAtMjIzLDcgKzIyMywxMCBAQCBzdGF0aWMgdm9p
ZCBfY2xlYXJfaXJxX3ZlY3RvcihzdHJ1Y3QgaXJxX2Rlc2MgKmRlc2MpCiAgICAgdHJhY2VfaXJx
X21hc2soVFJDX0hXX0lSUV9DTEVBUl9WRUNUT1IsIGlycSwgdmVjdG9yLCB0bXBfbWFzayk7CiAK
ICAgICBpZiAoIGxpa2VseSghZGVzYy0+YXJjaC5tb3ZlX2luX3Byb2dyZXNzKSApCisgICAgewor
ICAgICAgICBwdXRfc2NyYXRjaF9jcHVtYXNrKCk7CiAgICAgICAgIHJldHVybjsKKyAgICB9CiAK
ICAgICAvKiBJZiB3ZSB3ZXJlIGluIG1vdGlvbiwgYWxzbyBjbGVhciBkZXNjLT5hcmNoLm9sZF92
ZWN0b3IgKi8KICAgICBvbGRfdmVjdG9yID0gZGVzYy0+YXJjaC5vbGRfdmVjdG9yOwpAQCAtMjM2
LDYgKzIzOSw3IEBAIHN0YXRpYyB2b2lkIF9jbGVhcl9pcnFfdmVjdG9yKHN0cnVjdCBpcnFfZGVz
YyAqZGVzYykKICAgICAgICAgcGVyX2NwdSh2ZWN0b3JfaXJxLCBjcHUpW29sZF92ZWN0b3JdID0g
fmlycTsKICAgICB9CiAKKyAgICBwdXRfc2NyYXRjaF9jcHVtYXNrKCk7CiAgICAgcmVsZWFzZV9v
bGRfdmVjKGRlc2MpOwogCiAgICAgZGVzYy0+YXJjaC5tb3ZlX2luX3Byb2dyZXNzID0gMDsKQEAg
LTExNTIsMTAgKzExNTYsMTEgQEAgc3RhdGljIHZvaWQgaXJxX2d1ZXN0X2VvaV90aW1lcl9mbih2
b2lkICpkYXRhKQogICAgICAgICBicmVhazsKIAogICAgIGNhc2UgQUNLVFlQRV9FT0k6Ci0gICAg
ICAgIGNwdV9lb2lfbWFwID0gdGhpc19jcHUoc2NyYXRjaF9jcHVtYXNrKTsKKyAgICAgICAgY3B1
X2VvaV9tYXAgPSBnZXRfc2NyYXRjaF9jcHVtYXNrKCk7CiAgICAgICAgIGNwdW1hc2tfY29weShj
cHVfZW9pX21hcCwgYWN0aW9uLT5jcHVfZW9pX21hcCk7CiAgICAgICAgIHNwaW5fdW5sb2NrX2ly
cSgmZGVzYy0+bG9jayk7CiAgICAgICAgIG9uX3NlbGVjdGVkX2NwdXMoY3B1X2VvaV9tYXAsIHNl
dF9lb2lfcmVhZHksIGRlc2MsIDApOworICAgICAgICBwdXRfc2NyYXRjaF9jcHVtYXNrKCk7CiAg
ICAgICAgIHJldHVybjsKICAgICB9CiAKQEAgLTI1MzEsMTIgKzI1MzYsMTIgQEAgdm9pZCBmaXh1
cF9pcnFzKGNvbnN0IGNwdW1hc2tfdCAqbWFzaywgYm9vbCB2ZXJib3NlKQogICAgIHVuc2lnbmVk
IGludCBpcnE7CiAgICAgc3RhdGljIGludCB3YXJuZWQ7CiAgICAgc3RydWN0IGlycV9kZXNjICpk
ZXNjOworICAgIGNwdW1hc2tfdCAqYWZmaW5pdHkgPSBnZXRfc2NyYXRjaF9jcHVtYXNrKCk7CiAK
ICAgICBmb3IgKCBpcnEgPSAwOyBpcnEgPCBucl9pcnFzOyBpcnErKyApCiAgICAgewogICAgICAg
ICBib29sIGJyZWFrX2FmZmluaXR5ID0gZmFsc2UsIHNldF9hZmZpbml0eSA9IHRydWU7CiAgICAg
ICAgIHVuc2lnbmVkIGludCB2ZWN0b3I7Ci0gICAgICAgIGNwdW1hc2tfdCAqYWZmaW5pdHkgPSB0
aGlzX2NwdShzY3JhdGNoX2NwdW1hc2spOwogCiAgICAgICAgIGlmICggaXJxID09IDIgKQogICAg
ICAgICAgICAgY29udGludWU7CkBAIC0yNjQwLDYgKzI2NDUsOCBAQCB2b2lkIGZpeHVwX2lycXMo
Y29uc3QgY3B1bWFza190ICptYXNrLCBib29sIHZlcmJvc2UpCiAgICAgICAgICAgICAgICAgICAg
aXJxLCBDUFVNQVNLX1BSKGFmZmluaXR5KSk7CiAgICAgfQogCisgICAgcHV0X3NjcmF0Y2hfY3B1
bWFzaygpOworCiAgICAgLyogVGhhdCBkb2Vzbid0IHNlZW0gc3VmZmljaWVudC4gIEdpdmUgaXQg
MW1zLiAqLwogICAgIGxvY2FsX2lycV9lbmFibGUoKTsKICAgICBtZGVsYXkoMSk7CmRpZmYgLS1n
aXQgYS94ZW4vYXJjaC94ODYvbW0uYyBiL3hlbi9hcmNoL3g4Ni9tbS5jCmluZGV4IDliMzM4Mjkw
ODQuLmJkZWQxOTcxN2IgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9tbS5jCisrKyBiL3hlbi9h
cmNoL3g4Ni9tbS5jCkBAIC0xMjcxLDcgKzEyNzEsNyBAQCB2b2lkIHB1dF9wYWdlX2Zyb21fbDFl
KGwxX3BnZW50cnlfdCBsMWUsIHN0cnVjdCBkb21haW4gKmwxZV9vd25lcikKICAgICAgICAgICAg
ICAobDFlX293bmVyID09IHBnX293bmVyKSApCiAgICAgICAgIHsKICAgICAgICAgICAgIHN0cnVj
dCB2Y3B1ICp2OwotICAgICAgICAgICAgY3B1bWFza190ICptYXNrID0gdGhpc19jcHUoc2NyYXRj
aF9jcHVtYXNrKTsKKyAgICAgICAgICAgIGNwdW1hc2tfdCAqbWFzayA9IGdldF9zY3JhdGNoX2Nw
dW1hc2soKTsKIAogICAgICAgICAgICAgY3B1bWFza19jbGVhcihtYXNrKTsKIApAQCAtMTI4OCw2
ICsxMjg4LDcgQEAgdm9pZCBwdXRfcGFnZV9mcm9tX2wxZShsMV9wZ2VudHJ5X3QgbDFlLCBzdHJ1
Y3QgZG9tYWluICpsMWVfb3duZXIpCiAKICAgICAgICAgICAgIGlmICggIWNwdW1hc2tfZW1wdHko
bWFzaykgKQogICAgICAgICAgICAgICAgIGZsdXNoX3RsYl9tYXNrKG1hc2spOworICAgICAgICAg
ICAgcHV0X3NjcmF0Y2hfY3B1bWFzaygpOwogICAgICAgICB9CiAjZW5kaWYgLyogQ09ORklHX1BW
X0xEVF9QQUdJTkcgKi8KICAgICAgICAgcHV0X3BhZ2UocGFnZSk7CkBAIC0yOTEyLDcgKzI5MTMs
NyBAQCBzdGF0aWMgaW50IF9nZXRfcGFnZV90eXBlKHN0cnVjdCBwYWdlX2luZm8gKnBhZ2UsIHVu
c2lnbmVkIGxvbmcgdHlwZSwKICAgICAgICAgICAgICAgICAgKiB2aXRhbCB0aGF0IG5vIG90aGVy
IENQVXMgYXJlIGxlZnQgd2l0aCBtYXBwaW5ncyBvZiBhIGZyYW1lCiAgICAgICAgICAgICAgICAg
ICogd2hpY2ggaXMgYWJvdXQgdG8gYmVjb21lIHdyaXRlYWJsZSB0byB0aGUgZ3Vlc3QuCiAgICAg
ICAgICAgICAgICAgICovCi0gICAgICAgICAgICAgICAgY3B1bWFza190ICptYXNrID0gdGhpc19j
cHUoc2NyYXRjaF9jcHVtYXNrKTsKKyAgICAgICAgICAgICAgICBjcHVtYXNrX3QgKm1hc2sgPSBn
ZXRfc2NyYXRjaF9jcHVtYXNrKCk7CiAKICAgICAgICAgICAgICAgICBCVUdfT04oaW5faXJxKCkp
OwogICAgICAgICAgICAgICAgIGNwdW1hc2tfY29weShtYXNrLCBkLT5kaXJ0eV9jcHVtYXNrKTsK
QEAgLTI5MjgsNiArMjkyOSw3IEBAIHN0YXRpYyBpbnQgX2dldF9wYWdlX3R5cGUoc3RydWN0IHBh
Z2VfaW5mbyAqcGFnZSwgdW5zaWduZWQgbG9uZyB0eXBlLAogICAgICAgICAgICAgICAgICAgICBw
ZXJmY19pbmNyKG5lZWRfZmx1c2hfdGxiX2ZsdXNoKTsKICAgICAgICAgICAgICAgICAgICAgZmx1
c2hfdGxiX21hc2sobWFzayk7CiAgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAgICAgIHB1
dF9zY3JhdGNoX2NwdW1hc2soKTsKIAogICAgICAgICAgICAgICAgIC8qIFdlIGxvc2UgZXhpc3Rp
bmcgdHlwZSBhbmQgdmFsaWRpdHkuICovCiAgICAgICAgICAgICAgICAgbnggJj0gfihQR1RfdHlw
ZV9tYXNrIHwgUEdUX3ZhbGlkYXRlZCk7CkBAIC0zNjQ0LDcgKzM2NDYsNyBAQCBsb25nIGRvX21t
dWV4dF9vcCgKICAgICAgICAgY2FzZSBNTVVFWFRfVExCX0ZMVVNIX01VTFRJOgogICAgICAgICBj
YXNlIE1NVUVYVF9JTlZMUEdfTVVMVEk6CiAgICAgICAgIHsKLSAgICAgICAgICAgIGNwdW1hc2tf
dCAqbWFzayA9IHRoaXNfY3B1KHNjcmF0Y2hfY3B1bWFzayk7CisgICAgICAgICAgICBjcHVtYXNr
X3QgKm1hc2sgPSBnZXRfc2NyYXRjaF9jcHVtYXNrKCk7CiAKICAgICAgICAgICAgIGlmICggdW5s
aWtlbHkoY3VycmQgIT0gcGdfb3duZXIpICkKICAgICAgICAgICAgICAgICByYyA9IC1FUEVSTTsK
QEAgLTM2NTQsMTIgKzM2NTYsMTcgQEAgbG9uZyBkb19tbXVleHRfb3AoCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIG1hc2spKSApCiAgICAgICAgICAgICAgICAgcmMgPSAtRUlO
VkFMOwogICAgICAgICAgICAgaWYgKCB1bmxpa2VseShyYykgKQorICAgICAgICAgICAgeworICAg
ICAgICAgICAgICAgIHB1dF9zY3JhdGNoX2NwdW1hc2soKTsKICAgICAgICAgICAgICAgICBicmVh
azsKKyAgICAgICAgICAgIH0KIAogICAgICAgICAgICAgaWYgKCBvcC5jbWQgPT0gTU1VRVhUX1RM
Ql9GTFVTSF9NVUxUSSApCiAgICAgICAgICAgICAgICAgZmx1c2hfdGxiX21hc2sobWFzayk7CiAg
ICAgICAgICAgICBlbHNlIGlmICggX19hZGRyX29rKG9wLmFyZzEubGluZWFyX2FkZHIpICkKICAg
ICAgICAgICAgICAgICBmbHVzaF90bGJfb25lX21hc2sobWFzaywgb3AuYXJnMS5saW5lYXJfYWRk
cik7CisgICAgICAgICAgICBwdXRfc2NyYXRjaF9jcHVtYXNrKCk7CisKICAgICAgICAgICAgIGJy
ZWFrOwogICAgICAgICB9CiAKQEAgLTM2OTIsNyArMzY5OSw3IEBAIGxvbmcgZG9fbW11ZXh0X29w
KAogICAgICAgICAgICAgZWxzZSBpZiAoIGxpa2VseShjYWNoZV9mbHVzaF9wZXJtaXR0ZWQoY3Vy
cmQpKSApCiAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGNwdTsK
LSAgICAgICAgICAgICAgICBjcHVtYXNrX3QgKm1hc2sgPSB0aGlzX2NwdShzY3JhdGNoX2NwdW1h
c2spOworICAgICAgICAgICAgICAgIGNwdW1hc2tfdCAqbWFzayA9IGdldF9zY3JhdGNoX2NwdW1h
c2soKTsKIAogICAgICAgICAgICAgICAgIGNwdW1hc2tfY2xlYXIobWFzayk7CiAgICAgICAgICAg
ICAgICAgZm9yX2VhY2hfb25saW5lX2NwdShjcHUpCkBAIC0zNzAwLDYgKzM3MDcsNyBAQCBsb25n
IGRvX21tdWV4dF9vcCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHBlcl9jcHUoY3B1X3NpYmxpbmdfbWFzaywgY3B1KSkgKQogICAgICAgICAgICAgICAgICAg
ICAgICAgX19jcHVtYXNrX3NldF9jcHUoY3B1LCBtYXNrKTsKICAgICAgICAgICAgICAgICBmbHVz
aF9tYXNrKG1hc2ssIEZMVVNIX0NBQ0hFKTsKKyAgICAgICAgICAgICAgICBwdXRfc2NyYXRjaF9j
cHVtYXNrKCk7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAg
ICAgcmMgPSAtRUlOVkFMOwpAQCAtNDE2NSwxMiArNDE3MywxMyBAQCBsb25nIGRvX21tdV91cGRh
dGUoCiAgICAgICAgICAqIEZvcmNlIG90aGVyIHZDUFUtcyBvZiB0aGUgYWZmZWN0ZWQgZ3Vlc3Qg
dG8gcGljayB1cCBMNCBlbnRyeQogICAgICAgICAgKiBjaGFuZ2VzIChpZiBhbnkpLgogICAgICAg
ICAgKi8KLSAgICAgICAgdW5zaWduZWQgaW50IGNwdSA9IHNtcF9wcm9jZXNzb3JfaWQoKTsKLSAg
ICAgICAgY3B1bWFza190ICptYXNrID0gcGVyX2NwdShzY3JhdGNoX2NwdW1hc2ssIGNwdSk7Cisg
ICAgICAgIGNwdW1hc2tfdCAqbWFzayA9IGdldF9zY3JhdGNoX2NwdW1hc2soKTsKIAotICAgICAg
ICBjcHVtYXNrX2FuZG5vdChtYXNrLCBwdF9vd25lci0+ZGlydHlfY3B1bWFzaywgY3B1bWFza19v
ZihjcHUpKTsKKyAgICAgICAgY3B1bWFza19hbmRub3QobWFzaywgcHRfb3duZXItPmRpcnR5X2Nw
dW1hc2ssCisgICAgICAgICAgICAgICAgICAgICAgIGNwdW1hc2tfb2Yoc21wX3Byb2Nlc3Nvcl9p
ZCgpKSk7CiAgICAgICAgIGlmICggIWNwdW1hc2tfZW1wdHkobWFzaykgKQogICAgICAgICAgICAg
Zmx1c2hfbWFzayhtYXNrLCBGTFVTSF9UTEJfR0xPQkFMIHwgRkxVU0hfUk9PVF9QR1RCTCk7Cisg
ICAgICAgIHB1dF9zY3JhdGNoX2NwdW1hc2soKTsKICAgICB9CiAKICAgICBwZXJmY19hZGQobnVt
X3BhZ2VfdXBkYXRlcywgaSk7CkBAIC00MzYxLDcgKzQzNzAsNyBAQCBzdGF0aWMgaW50IF9fZG9f
dXBkYXRlX3ZhX21hcHBpbmcoCiAgICAgICAgICAgICBtYXNrID0gZC0+ZGlydHlfY3B1bWFzazsK
ICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICBkZWZhdWx0OgotICAgICAgICAgICAgbWFzayA9
IHRoaXNfY3B1KHNjcmF0Y2hfY3B1bWFzayk7CisgICAgICAgICAgICBtYXNrID0gZ2V0X3NjcmF0
Y2hfY3B1bWFzaygpOwogICAgICAgICAgICAgcmMgPSB2Y3B1bWFza190b19wY3B1bWFzayhkLCBj
b25zdF9ndWVzdF9oYW5kbGVfZnJvbV9wdHIoYm1hcF9wdHIsCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkKSwK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFzayk7CkBAIC00MzgxLDcg
KzQzOTAsNyBAQCBzdGF0aWMgaW50IF9fZG9fdXBkYXRlX3ZhX21hcHBpbmcoCiAgICAgICAgICAg
ICBtYXNrID0gZC0+ZGlydHlfY3B1bWFzazsKICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICBk
ZWZhdWx0OgotICAgICAgICAgICAgbWFzayA9IHRoaXNfY3B1KHNjcmF0Y2hfY3B1bWFzayk7Cisg
ICAgICAgICAgICBtYXNrID0gZ2V0X3NjcmF0Y2hfY3B1bWFzaygpOwogICAgICAgICAgICAgcmMg
PSB2Y3B1bWFza190b19wY3B1bWFzayhkLCBjb25zdF9ndWVzdF9oYW5kbGVfZnJvbV9wdHIoYm1h
cF9wdHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB2b2lkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgbWFzayk7CkBAIC00MzkyLDYgKzQ0MDEsOSBAQCBzdGF0aWMgaW50IF9fZG9fdXBk
YXRlX3ZhX21hcHBpbmcoCiAgICAgICAgIGJyZWFrOwogICAgIH0KIAorICAgIGlmICggbWFzayAm
JiBtYXNrICE9IGQtPmRpcnR5X2NwdW1hc2sgKQorICAgICAgICBwdXRfc2NyYXRjaF9jcHVtYXNr
KCk7CisKICAgICByZXR1cm4gcmM7CiB9CiAKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9tc2ku
YyBiL3hlbi9hcmNoL3g4Ni9tc2kuYwppbmRleCBjODVjZjlmODVhLi4xZWMxY2M1MWQzIDEwMDY0
NAotLS0gYS94ZW4vYXJjaC94ODYvbXNpLmMKKysrIGIveGVuL2FyY2gveDg2L21zaS5jCkBAIC0x
NTksMTMgKzE1OSwxNSBAQCB2b2lkIG1zaV9jb21wb3NlX21zZyh1bnNpZ25lZCB2ZWN0b3IsIGNv
bnN0IGNwdW1hc2tfdCAqY3B1X21hc2ssIHN0cnVjdCBtc2lfbXNnCiAKICAgICBpZiAoIGNwdV9t
YXNrICkKICAgICB7Ci0gICAgICAgIGNwdW1hc2tfdCAqbWFzayA9IHRoaXNfY3B1KHNjcmF0Y2hf
Y3B1bWFzayk7CisgICAgICAgIGNwdW1hc2tfdCAqbWFzazsKIAogICAgICAgICBpZiAoICFjcHVt
YXNrX2ludGVyc2VjdHMoY3B1X21hc2ssICZjcHVfb25saW5lX21hcCkgKQogICAgICAgICAgICAg
cmV0dXJuOwogCisgICAgICAgIG1hc2sgPSBnZXRfc2NyYXRjaF9jcHVtYXNrKCk7CiAgICAgICAg
IGNwdW1hc2tfYW5kKG1hc2ssIGNwdV9tYXNrLCAmY3B1X29ubGluZV9tYXApOwogICAgICAgICBt
c2ctPmRlc3QzMiA9IGNwdV9tYXNrX3RvX2FwaWNpZChtYXNrKTsKKyAgICAgICAgcHV0X3NjcmF0
Y2hfY3B1bWFzaygpOwogICAgIH0KIAogICAgIG1zZy0+YWRkcmVzc19oaSA9IE1TSV9BRERSX0JB
U0VfSEk7CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvc21wLmMgYi94ZW4vYXJjaC94ODYvc21w
LmMKaW5kZXggOWJjOTI1NjE2YS4uMWU1YTBjNjMzMSAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2
L3NtcC5jCisrKyBiL3hlbi9hcmNoL3g4Ni9zbXAuYwpAQCAtNjcsNyArNjcsNyBAQCBzdGF0aWMg
dm9pZCBzZW5kX0lQSV9zaG9ydGN1dCh1bnNpZ25lZCBpbnQgc2hvcnRjdXQsIGludCB2ZWN0b3Is
CiB2b2lkIHNlbmRfSVBJX21hc2soY29uc3QgY3B1bWFza190ICptYXNrLCBpbnQgdmVjdG9yKQog
ewogICAgIGJvb2wgY3B1c19sb2NrZWQgPSBmYWxzZTsKLSAgICBjcHVtYXNrX3QgKnNjcmF0Y2gg
PSB0aGlzX2NwdShzY3JhdGNoX2NwdW1hc2spOworICAgIGNwdW1hc2tfdCAqc2NyYXRjaCA9IGdl
dF9zY3JhdGNoX2NwdW1hc2soKTsKIAogICAgIC8qCiAgICAgICogVGhpcyBjYW4gb25seSBiZSBz
YWZlbHkgdXNlZCB3aGVuIG5vIENQVSBob3RwbHVnIG9yIHVucGx1ZyBvcGVyYXRpb25zCkBAIC05
OSw2ICs5OSw3IEBAIHZvaWQgc2VuZF9JUElfbWFzayhjb25zdCBjcHVtYXNrX3QgKm1hc2ssIGlu
dCB2ZWN0b3IpCiAKICAgICBpZiAoIGNwdXNfbG9ja2VkICkKICAgICAgICAgcHV0X2NwdV9tYXBz
KCk7CisgICAgcHV0X3NjcmF0Y2hfY3B1bWFzaygpOwogfQogCiB2b2lkIHNlbmRfSVBJX3NlbGYo
aW50IHZlY3RvcikKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL2FzbS14ODYvc21wLmggYi94ZW4v
aW5jbHVkZS9hc20teDg2L3NtcC5oCmluZGV4IDFhYTU1ZDQxZTEuLmI5OTQ0ODhkOWYgMTAwNjQ0
Ci0tLSBhL3hlbi9pbmNsdWRlL2FzbS14ODYvc21wLmgKKysrIGIveGVuL2luY2x1ZGUvYXNtLXg4
Ni9zbXAuaApAQCAtMjYsNiArMjYsMjEgQEAgREVDTEFSRV9QRVJfQ1BVKGNwdW1hc2tfdmFyX3Qs
IGNwdV9zaWJsaW5nX21hc2spOwogREVDTEFSRV9QRVJfQ1BVKGNwdW1hc2tfdmFyX3QsIGNwdV9j
b3JlX21hc2spOwogREVDTEFSRV9QRVJfQ1BVKGNwdW1hc2tfdmFyX3QsIHNjcmF0Y2hfY3B1bWFz
ayk7CiAKK3N0YXRpYyBpbmxpbmUgY3B1bWFza190ICpzY3JhdGNoX2NwdW1hc2soY29uc3QgY2hh
ciAqZm4pCit7CisgICAgc3RhdGljIERFRklORV9QRVJfQ1BVKGNvbnN0IGNoYXIgKiwgc2NyYXRj
aF9jcHVtYXNrX3VzZSk7CisKKyAgICBpZiAoIGZuICYmIHVubGlrZWx5KHRoaXNfY3B1KHNjcmF0
Y2hfY3B1bWFza191c2UpKSApCisgICAgICAgIHBhbmljKCJzY3JhdGNoIENQVSBtYXNrIGFscmVh
ZHkgaW4gdXNlIGJ5ICVzXG4iLAorICAgICAgICAgICAgICB0aGlzX2NwdShzY3JhdGNoX2NwdW1h
c2tfdXNlKSk7CisgICAgdGhpc19jcHUoc2NyYXRjaF9jcHVtYXNrX3VzZSkgPSBmbjsKKworICAg
IHJldHVybiBmbiA/IHRoaXNfY3B1KHNjcmF0Y2hfY3B1bWFzaykgOiBOVUxMOworfQorCisjZGVm
aW5lIGdldF9zY3JhdGNoX2NwdW1hc2soKSBzY3JhdGNoX2NwdW1hc2soX19mdW5jX18pCisjZGVm
aW5lIHB1dF9zY3JhdGNoX2NwdW1hc2soKSAoKHZvaWQpc2NyYXRjaF9jcHVtYXNrKE5VTEwpKQor
CiAvKgogICogRG8gd2UsIGZvciBwbGF0Zm9ybSByZWFzb25zLCBuZWVkIHRvIGFjdHVhbGx5IGtl
ZXAgQ1BVcyBvbmxpbmUgd2hlbiB3ZQogICogd291bGQgb3RoZXJ3aXNlIHByZWZlciB0aGVtIHRv
IGJlIG9mZj8KCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpo
dHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

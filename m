Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 19CF8E484
	for <lists+xen-devel@lfdr.de>; Mon, 29 Apr 2019 16:18:33 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hL74J-0007u9-Ns; Mon, 29 Apr 2019 14:15:43 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=kVn5=S7=amazon.de=prvs=015f510af=wipawel@srs-us1.protection.inumbo.net>)
 id 1hL74H-0007tp-E6
 for xen-devel@lists.xen.org; Mon, 29 Apr 2019 14:15:41 +0000
X-Inumbo-ID: 43401141-6a89-11e9-843c-bc764e045a96
Received: from smtp-fw-9102.amazon.com (unknown [207.171.184.29])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 43401141-6a89-11e9-843c-bc764e045a96;
 Mon, 29 Apr 2019 14:15:38 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.de; i=@amazon.de; q=dns/txt; s=amazon201209;
 t=1556547338; x=1588083338;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=BLjpldtc7sFOIOVADOILC1YFUey+gEOlEzRhfQtg9i0=;
 b=I2w+3X5PtJWnAIYgMRExjmU7LklkT93hAtW62AfU7r4YZZGg7DmZ3FjX
 /D4LAZaDnWonZP8S7t6p0LKq8fUnJGvXO/aIfT1bD2zUJS/y4oKEWtVDj
 DfBFUjgeXUDzewVlLYgHj1ksmc2AtOTJqGlg/ogk17sYZDrw4dCNXwKM+ o=;
X-IronPort-AV: E=Sophos;i="5.60,409,1549929600"; d="scan'208";a="671614531"
Received: from sea3-co-svc-lb6-vlan3.sea.amazon.com (HELO
 email-inbound-relay-1d-f273de60.us-east-1.amazon.com) ([10.47.22.38])
 by smtp-border-fw-out-9102.sea19.amazon.com with ESMTP/TLS/DHE-RSA-AES256-SHA;
 29 Apr 2019 09:47:10 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan2.iad.amazon.com [10.40.159.162])
 by email-inbound-relay-1d-f273de60.us-east-1.amazon.com (8.14.7/8.14.7) with
 ESMTP id x3T9l8IZ000916
 (version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=FAIL);
 Mon, 29 Apr 2019 09:47:08 GMT
Received: from EX13D03EUA003.ant.amazon.com (10.43.165.89) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.82) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Mon, 29 Apr 2019 09:47:08 +0000
Received: from EX13MTAUEE001.ant.amazon.com (10.43.62.200) by
 EX13D03EUA003.ant.amazon.com (10.43.165.89) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Mon, 29 Apr 2019 09:47:07 +0000
Received: from dev-dsk-wipawel-1a-0c4e6d58.eu-west-1.amazon.com (10.4.134.33)
 by mail-relay.amazon.com (10.43.62.226) with Microsoft SMTP Server id
 15.0.1367.3 via Frontend Transport; Mon, 29 Apr 2019 09:47:06 +0000
From: Pawel Wieczorkiewicz <wipawel@amazon.de>
To: <xen-devel@lists.xen.org>
Date: Mon, 29 Apr 2019 09:46:43 +0000
Message-ID: <20190429094643.109205-1-wipawel@amazon.de>
X-Mailer: git-send-email 2.16.5
In-Reply-To: <20190416125832.32881-1-wipawel@amazon.de>
References: <20190416125832.32881-1-wipawel@amazon.de>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [livepatch: independ. modules v2 1/3] livepatch: Always
 check hypervisor build ID upon hotpatch upload
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: mpohlack@amazon.de, ross.lagerwall@citrix.com,
 Pawel Wieczorkiewicz <wipawel@amazon.de>, konrad.wilk@oracle.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBjaGFuZ2UgaXMgcGFydCBvZiBhIGluZGVwZW5kYW50IHN0YWNrZWQgaG90cGF0Y2ggbW9k
dWxlcwpmZWF0dXJlLiBUaGlzIGZlYXR1cmUgYWxsb3dzIHRvIGJ5cGFzcyBkZXBlbmRlbmNpZXMg
YmV0d2VlbiBtb2R1bGVzCnVwb24gbG9hZGluZywgYnV0IHN0aWxsIHZlcmlmaWVzIFhlbiBidWls
ZCBJRCBtYXRjaGluZy4KCkluIG9yZGVyIHRvIHByZXZlbnQgKHVwKWxvYWRpbmcgYW55IGhvdHBh
dGNoZXMgYnVpbHQgZm9yIGRpZmZlcmVudApoeXBlcnZpc29yIHZlcnNpb24gYXMgaW5kaWNhdGVk
IGJ5IHRoZSBYZW4gQnVpbGQgSUQsIGFkZCBjaGVja2luZyBmb3IKdGhlIHBheWxvYWQncyB2cyBY
ZW4ncyBidWlsZCBpZCBtYXRjaC4KClRvIGFjaGlldmUgdGhhdCBlbWJlZCBpbnRvIGV2ZXJ5IGhv
dHBhdGNoIGFub3RoZXIgc2VjdGlvbiB3aXRoIGEKZGVkaWNhdGVkIGh5cGVydmlzb3IgYnVpbGQg
aWQgaW4gaXQuIEFmdGVyIHRoZSBwYXlsb2FkIGlzIGxvYWRlZCBhbmQKdGhlIC5saXZlcGF0Y2gu
eGVuX2RlcGVuZHMgc2VjdGlvbiBiZWNvbWVzIGF2YWlsYWJsZSwgcGVyZm9ybSB0aGUKY2hlY2sg
YW5kIHJlamVjdCB0aGUgcGF5bG9hZCBpZiB0aGVyZSBpcyBubyBtYXRjaC4KClNpZ25lZC1vZmYt
Ynk6IFBhd2VsIFdpZWN6b3JraWV3aWN6IDx3aXBhd2VsQGFtYXpvbi5kZT4KUmV2aWV3ZWQtYnk6
IEFuZHJhLUlyaW5hIFBhcmFzY2hpdiA8YW5kcmFwcnNAYW1hem9uLmNvbT4KUmV2aWV3ZWQtYnk6
IEJqb2VybiBEb2ViZWwgPGRvZWJlbEBhbWF6b24uZGU+ClJldmlld2VkLWJ5OiBFc2xhbSBFbG5p
a2V0eSA8ZWxuaWtldHlAYW1hem9uLmRlPgpSZXZpZXdlZC1ieTogTWFydGluIFBvaGxhY2sgPG1w
b2hsYWNrQGFtYXpvbi5kZT4KLS0tCnYyOgoqIFVwZGF0ZWQgZG9jcy9taXNjL2xpdmVwYXRjaC5w
YW5kb2MKKiBBZGRlZCB4ZW5fbm9feGVuX2J1aWxkaWQubGl2ZXBhdGNoIHRlc3QKKiBGaXhlZCBh
bGwgdGVzdHMgYnkgYWRkaW5nIC5saXZlcGF0Y2gueGVuX2RlcGVuZHMgc2VjdGlvbgotLS0KIC5n
aXRpZ25vcmUgICAgICAgICAgICAgICAgICB8ICAxICsKIGRvY3MvbWlzYy9saXZlcGF0Y2gucGFu
ZG9jICB8IDI4ICsrKysrKysrKysrKysrKysrKystLS0tLS0tLQogeGVuL2NvbW1vbi9saXZlcGF0
Y2guYyAgICAgIHwgNDcgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrCiB4ZW4vaW5jbHVkZS94ZW4vbGl2ZXBhdGNoLmggfCAgNyArKysrLS0tCiB4ZW4vdGVzdC9s
aXZlcGF0Y2gvTWFrZWZpbGUgfCAzMSArKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0KIDUg
ZmlsZXMgY2hhbmdlZCwgOTggaW5zZXJ0aW9ucygrKSwgMTYgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvLmdpdGlnbm9yZSBiLy5naXRpZ25vcmUKaW5kZXggMjZiYzU4M2Y3NC4uZjc1OWRhZWVi
NyAxMDA2NDQKLS0tIGEvLmdpdGlnbm9yZQorKysgYi8uZ2l0aWdub3JlCkBAIC0zMjYsNiArMzI2
LDcgQEAgeGVuL3Rlc3QvbGl2ZXBhdGNoL3hlbl9ieWVfd29ybGQubGl2ZXBhdGNoCiB4ZW4vdGVz
dC9saXZlcGF0Y2gveGVuX2hlbGxvX3dvcmxkLmxpdmVwYXRjaAogeGVuL3Rlc3QvbGl2ZXBhdGNo
L3hlbl9ub3AubGl2ZXBhdGNoCiB4ZW4vdGVzdC9saXZlcGF0Y2gveGVuX3JlcGxhY2Vfd29ybGQu
bGl2ZXBhdGNoCit4ZW4vdGVzdC9saXZlcGF0Y2gveGVuX25vX3hlbl9idWlsZGlkLmxpdmVwYXRj
aAogeGVuL3Rvb2xzL2tjb25maWcvLnRtcF9ndGtjaGVjawogeGVuL3Rvb2xzL2tjb25maWcvLnRt
cF9xdGNoZWNrCiB4ZW4vdG9vbHMvc3ltYm9scwpkaWZmIC0tZ2l0IGEvZG9jcy9taXNjL2xpdmVw
YXRjaC5wYW5kb2MgYi9kb2NzL21pc2MvbGl2ZXBhdGNoLnBhbmRvYwppbmRleCA2ZDlmNzJmNDli
Li5mZDFmNWQwMTI2IDEwMDY0NAotLS0gYS9kb2NzL21pc2MvbGl2ZXBhdGNoLnBhbmRvYworKysg
Yi9kb2NzL21pc2MvbGl2ZXBhdGNoLnBhbmRvYwpAQCAtMjcwLDYgKzI3MCw4IEBAIGxpa2Ugd2hh
dCB0aGUgTGludXgga2VybmVsIG1vZHVsZSBsb2FkZXIgZG9lcy4KIFRoZSBwYXlsb2FkIGNvbnRh
aW5zIGF0IGxlYXN0IHRocmVlIHNlY3Rpb25zOgogCiAgKiBgLmxpdmVwYXRjaC5mdW5jc2AgLSB3
aGljaCBpcyBhbiBhcnJheSBvZiBsaXZlcGF0Y2hfZnVuYyBzdHJ1Y3R1cmVzLgorICogYC5saXZl
cGF0Y2gueGVuX2RlcGVuZHNgIC0gd2hpY2ggaXMgYW4gRUxGIE5vdGUgdGhhdCBkZXNjcmliZXMg
d2hhdCBYZW4KKyAgICBidWlsZC1pZCB0aGUgcGF5bG9hZCBkZXBlbmRzIG9uLiAqKk1VU1QqKiBo
YXZlIG9uZS4KICAqIGAubGl2ZXBhdGNoLmRlcGVuZHNgIC0gd2hpY2ggaXMgYW4gRUxGIE5vdGUg
dGhhdCBkZXNjcmliZXMgd2hhdCB0aGUgcGF5bG9hZAogICAgIGRlcGVuZHMgb24uICoqTVVTVCoq
IGhhdmUgb25lLgogICogIGAubm90ZS5nbnUuYnVpbGQtaWRgIC0gdGhlIGJ1aWxkLWlkIG9mIHRo
aXMgcGF5bG9hZC4gKipNVVNUKiogaGF2ZSBvbmUuCkBAIC0zODMsMTYgKzM4NSwxNiBAQCBUaGUg
dHlwZSBkZWZpbml0aW9uIG9mIHRoZSBmdW5jdGlvbiBhcmUgYXMgZm9sbG93OgogICAgIHR5cGVk
ZWYgdm9pZCAoKmxpdmVwYXRjaF9sb2FkY2FsbF90KSh2b2lkKTsKICAgICB0eXBlZGVmIHZvaWQg
KCpsaXZlcGF0Y2hfdW5sb2FkY2FsbF90KSh2b2lkKTsKIAotIyMjIC5saXZlcGF0Y2guZGVwZW5k
cyBhbmQgLm5vdGUuZ251LmJ1aWxkLWlkCisjIyMgLmxpdmVwYXRjaC54ZW5fZGVwZW5kcywgLmxp
dmVwYXRjaC5kZXBlbmRzIGFuZCAubm90ZS5nbnUuYnVpbGQtaWQKIAogVG8gc3VwcG9ydCBkZXBl
bmRlbmNpZXMgY2hlY2tpbmcgYW5kIHNhZmUgbG9hZGluZyAodG8gbG9hZCB0aGUKIGFwcHJvcGlh
dGUgcGF5bG9hZCBhZ2FpbnN0IHRoZSByaWdodCBoeXBlcnZpc29yKSB0aGVyZSBpcyBhIG5lZWQK
IHRvIGVtYmJlZCBhbiBidWlsZC1pZCBkZXBlbmRlbmN5LgogCi1UaGlzIGlzIGRvbmUgYnkgdGhl
IHBheWxvYWQgY29udGFpbmluZyBhbiBzZWN0aW9uIGAubGl2ZXBhdGNoLmRlcGVuZHNgCi13aGlj
aCBmb2xsb3dzIHRoZSBmb3JtYXQgb2YgYW4gRUxGIE5vdGUuIFRoZSBjb250ZW50cyBvZiB0aGlz
Ci0obmFtZSwgYW5kIGRlc2NyaXB0aW9uKSBhcmUgc3BlY2lmaWMgdG8gdGhlIGxpbmtlciB1dGls
aXplZCB0bwotYnVpbGQgdGhlIGh5cGV2aXNvciBhbmQgcGF5bG9hZC4KK1RoaXMgaXMgZG9uZSBi
eSB0aGUgcGF5bG9hZCBjb250YWluaW5nIHNlY3Rpb25zIGAubGl2ZXBhdGNoLnhlbl9kZXBlbmRz
YAorYW5kIGAubGl2ZXBhdGNoLmRlcGVuZHNgIHdoaWNoIGZvbGxvdyB0aGUgZm9ybWF0IG9mIGFu
IEVMRiBOb3RlLgorVGhlIGNvbnRlbnRzIG9mIHRoZXNlIChuYW1lLCBhbmQgZGVzY3JpcHRpb24p
IGFyZSBzcGVjaWZpYyB0byB0aGUgbGlua2VyCit1dGlsaXplZCB0byBidWlsZCB0aGUgaHlwZXZp
c29yIGFuZCBwYXlsb2FkLgogCiBJZiBHTlUgbGlua2VyIGlzIHVzZWQgdGhlbiB0aGUgbmFtZSBp
cyBgR05VYCBhbmQgdGhlIGRlc2NyaXB0aW9uCiBpcyBhIE5UX0dOVV9CVUlMRF9JRCB0eXBlIElE
LiBUaGUgZGVzY3JpcHRpb24gY2FuIGJlIGFuIFNIQTEKQEAgLTQwMCw2ICs0MDIsMTMgQEAgY2hl
Y2tzdW0sIE1ENSBjaGVja3N1bSBvciBhbnkgdW5pcXVlIHZhbHVlLgogCiBUaGUgc2l6ZSBvZiB0
aGVzZSBzdHJ1Y3R1cmVzIHZhcmllcyB3aXRoIHRoZSBgLS1idWlsZC1pZGAgbGlua2VyIG9wdGlv
bi4KIAorVGhlcmUgYXJlIHR3byBraW5kcyBvZiBidWlsZC1pZCBkZXBlbmRlbmNpZXM6CisKKyAq
IFhlbiBidWlsZC1pZCBkZXBlbmRlbmN5ICgubGl2ZXBhdGNoLnhlbl9kZXBlbmRzIHNlY3Rpb24p
CisgKiBwcmV2aW91cyBwYXlsb2FkIGJ1aWxkLWlkIGRlcGVuZGVuY3kgKC5saXZlcGF0Y2guZGVw
ZW5kcyBzZWN0aW9uKQorCitTZWUgIkxpdmUgcGF0Y2ggaW50ZXJkZXBlbmRlbmNpZXMiIGZvciBt
b3JlIGluZm9ybWF0aW9uLgorCiAjIyBIeXBlcmNhbGxzCiAKIFdlIHdpbGwgZW1wbG95IHRoZSBz
dWIgb3BlcmF0aW9ucyBvZiB0aGUgc3lzdGVtIG1hbmFnZW1lbnQgaHlwZXJjYWxsIChzeXNjdGwp
LgpAQCAtODk0LDEzICs5MDMsMTYgQEAgYnV0IGlzIG1vcmUgY29tcGxleCB0byBpbXBsZW1lbnQu
CiBUaGUgc2Vjb25kIG9wdGlvbiB3aGljaCByZXF1aXJlcyBhbiBidWlsZC1pZCBvZiB0aGUgaHlw
ZXJ2aXNvcgogaXMgaW1wbGVtZW50ZWQgaW4gdGhlIFhlbiBoeXBlcnZpc29yLgogCi1TcGVjaWZp
Y2FsbHkgZWFjaCBwYXlsb2FkIGhhcyB0d28gYnVpbGQtaWQgRUxGIG5vdGVzOgorU3BlY2lmaWNh
bGx5IGVhY2ggcGF5bG9hZCBoYXMgdGhyZWUgYnVpbGQtaWQgRUxGIG5vdGVzOgogICogVGhlIGJ1
aWxkLWlkIG9mIHRoZSBwYXlsb2FkIGl0c2VsZiAoZ2VuZXJhdGVkIHZpYSAtLWJ1aWxkLWlkKS4K
KyAqIFRoZSBidWlsZC1pZCBvZiB0aGUgWGVuIGh5cGVydmlzb3IgaXQgZGVwZW5kcyBvbiAoZXh0
cmFjdGVkIGZyb20gdGhlCisgICBoeXBlcnZpc29yIGR1cmluZyBidWlsZCB0aW1lKS4KICAqIFRo
ZSBidWlsZC1pZCBvZiB0aGUgcGF5bG9hZCBpdCBkZXBlbmRzIG9uIChleHRyYWN0ZWQgZnJvbSB0
aGUKICAgIHRoZSBwcmV2aW91cyBwYXlsb2FkIG9yIGh5cGVydmlzb3IgZHVyaW5nIGJ1aWxkIHRp
bWUpLgogCi1UaGlzIG1lYW5zIHRoYXQgdGhlIHZlcnkgZmlyc3QgcGF5bG9hZCBkZXBlbmRzIG9u
IHRoZSBoeXBlcnZpc29yCi1idWlsZC1pZC4KK1RoaXMgbWVhbnMgdGhhdCBldmVyeSBwYXlsb2Fk
IGRlcGVuZHMgb24gdGhlIGh5cGVydmlzb3IgYnVpbGQtaWQgYW5kIG9uCit0aGUgYnVpbGQtaWQg
b2YgdGhlIHByZXZpb3VzIHBheWxvYWQgaW4gdGhlIHN0YWNrLgorVGhlIHZlcnkgZmlyc3QgcGF5
bG9hZCBkZXBlbmRzIG9uIHRoZSBoeXBlcnZpc29yIGJ1aWxkLWlkIG9ubHkuCiAKICMgTm90IFll
dCBEb25lCiAKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vbGl2ZXBhdGNoLmMgYi94ZW4vY29tbW9u
L2xpdmVwYXRjaC5jCmluZGV4IGQ2ZWFhZTZkM2IuLjZhNGFmNmNlNTcgMTAwNjQ0Ci0tLSBhL3hl
bi9jb21tb24vbGl2ZXBhdGNoLmMKKysrIGIveGVuL2NvbW1vbi9saXZlcGF0Y2guYwpAQCAtNzQs
NiArNzQsNyBAQCBzdHJ1Y3QgcGF5bG9hZCB7CiAgICAgdW5zaWduZWQgaW50IG5zeW1zOyAgICAg
ICAgICAgICAgICAgIC8qIE5yIG9mIGVudHJpZXMgaW4gLnN0cnRhYiBhbmQgc3ltYm9scy4gKi8K
ICAgICBzdHJ1Y3QgbGl2ZXBhdGNoX2J1aWxkX2lkIGlkOyAgICAgICAgLyogRUxGTk9URV9ERVND
KC5ub3RlLmdudS5idWlsZC1pZCkgb2YgdGhlIHBheWxvYWQuICovCiAgICAgc3RydWN0IGxpdmVw
YXRjaF9idWlsZF9pZCBkZXA7ICAgICAgIC8qIEVMRk5PVEVfREVTQygubGl2ZXBhdGNoLmRlcGVu
ZHMpLiAqLworICAgIHN0cnVjdCBsaXZlcGF0Y2hfYnVpbGRfaWQgeGVuX2RlcDsgICAvKiBFTEZO
T1RFX0RFU0MoLmxpdmVwYXRjaC54ZW5fZGVwZW5kcykuICovCiAgICAgbGl2ZXBhdGNoX2xvYWRj
YWxsX3QgKmNvbnN0ICpsb2FkX2Z1bmNzOyAgIC8qIFRoZSBhcnJheSBvZiBmdW5jcyB0byBjYWxs
IGFmdGVyICovCiAgICAgbGl2ZXBhdGNoX3VubG9hZGNhbGxfdCAqY29uc3QgKnVubG9hZF9mdW5j
czsvKiBsb2FkIGFuZCB1bmxvYWQgb2YgdGhlIHBheWxvYWQuICovCiAgICAgdW5zaWduZWQgaW50
IG5fbG9hZF9mdW5jczsgICAgICAgICAgIC8qIE5yIG9mIHRoZSBmdW5jcyB0byBsb2FkIGFuZCBl
eGVjdXRlLiAqLwpAQCAtNDc2LDExICs0NzcsMzQgQEAgc3RhdGljIGJvb2wgc2VjdGlvbl9vayhj
b25zdCBzdHJ1Y3QgbGl2ZXBhdGNoX2VsZiAqZWxmLAogICAgIHJldHVybiB0cnVlOwogfQogCitz
dGF0aWMgaW50IGNoZWNrX3hlbl9idWlsZF9pZChjb25zdCBzdHJ1Y3QgcGF5bG9hZCAqcGF5bG9h
ZCkKK3sKKyAgICBjb25zdCB2b2lkICppZCA9IE5VTEw7CisgICAgdW5zaWduZWQgaW50IGxlbiA9
IDA7CisgICAgaW50IHJjOworCisgICAgQVNTRVJUKHBheWxvYWQtPnhlbl9kZXAubGVuKTsKKyAg
ICBBU1NFUlQocGF5bG9hZC0+eGVuX2RlcC5wKTsKKworICAgIHJjID0geGVuX2J1aWxkX2lkKCZp
ZCwgJmxlbik7CisgICAgaWYgKCByYyApCisgICAgICAgIHJldHVybiByYzsKKworICAgIGlmICgg
cGF5bG9hZC0+eGVuX2RlcC5sZW4gIT0gbGVuIHx8IG1lbWNtcChpZCwgcGF5bG9hZC0+eGVuX2Rl
cC5wLCBsZW4pICkgeworICAgICAgICBkcHJpbnRrKFhFTkxPR19FUlIsICIlcyVzOiBjaGVjayBh
Z2FpbnN0IGh5cGVydmlzb3IgYnVpbGQtaWQgZmFpbGVkIVxuIiwKKyAgICAgICAgICAgICAgICBM
SVZFUEFUQ0gsIHBheWxvYWQtPm5hbWUpOworICAgICAgICByZXR1cm4gLUVJTlZBTDsKKyAgICB9
CisKKyAgICByZXR1cm4gMDsKK30KKwogc3RhdGljIGludCBjaGVja19zcGVjaWFsX3NlY3Rpb25z
KGNvbnN0IHN0cnVjdCBsaXZlcGF0Y2hfZWxmICplbGYpCiB7CiAgICAgdW5zaWduZWQgaW50IGk7
CiAgICAgc3RhdGljIGNvbnN0IGNoYXIgKmNvbnN0IG5hbWVzW10gPSB7IEVMRl9MSVZFUEFUQ0hf
RlVOQywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRUxGX0xJVkVQ
QVRDSF9ERVBFTkRTLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBF
TEZfTElWRVBBVENIX1hFTl9ERVBFTkRTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBFTEZfQlVJTERfSURfTk9URX07CiAgICAgREVDTEFSRV9CSVRNQVAoZm91bmQs
IEFSUkFZX1NJWkUobmFtZXMpKSA9IHsgMCB9OwogCkBAIC02MzIsNiArNjU2LDIyIEBAIHN0YXRp
YyBpbnQgcHJlcGFyZV9wYXlsb2FkKHN0cnVjdCBwYXlsb2FkICpwYXlsb2FkLAogICAgICAgICAg
ICAgcmV0dXJuIC1FSU5WQUw7CiAgICAgfQogCisgICAgc2VjID0gbGl2ZXBhdGNoX2VsZl9zZWNf
YnlfbmFtZShlbGYsIEVMRl9MSVZFUEFUQ0hfWEVOX0RFUEVORFMpOworICAgIGlmICggc2VjICkK
KyAgICB7CisgICAgICAgIG4gPSBzZWMtPmxvYWRfYWRkcjsKKworICAgICAgICBpZiAoIHNlYy0+
c2VjLT5zaF9zaXplIDw9IHNpemVvZigqbikgKQorICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7
CisKKyAgICAgICAgaWYgKCB4ZW5fYnVpbGRfaWRfY2hlY2sobiwgc2VjLT5zZWMtPnNoX3NpemUs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZwYXlsb2FkLT54ZW5fZGVwLnAsICZw
YXlsb2FkLT54ZW5fZGVwLmxlbikgKQorICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7CisKKyAg
ICAgICAgaWYgKCAhcGF5bG9hZC0+eGVuX2RlcC5sZW4gfHwgIXBheWxvYWQtPnhlbl9kZXAucCAp
CisgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKKyAgICB9CisKICAgICAvKiBTZXR1cCB0aGUg
dmlydHVhbCByZWdpb24gd2l0aCBwcm9wZXIgZGF0YS4gKi8KICAgICByZWdpb24gPSAmcGF5bG9h
ZC0+cmVnaW9uOwogCkBAIC04ODIsNiArOTIyLDEwIEBAIHN0YXRpYyBpbnQgbG9hZF9wYXlsb2Fk
X2RhdGEoc3RydWN0IHBheWxvYWQgKnBheWxvYWQsIHZvaWQgKnJhdywgc2l6ZV90IGxlbikKICAg
ICBpZiAoIHJjICkKICAgICAgICAgZ290byBvdXQ7CiAKKyAgICByYyA9IGNoZWNrX3hlbl9idWls
ZF9pZChwYXlsb2FkKTsKKyAgICBpZiAoIHJjICkKKyAgICAgICAgZ290byBvdXQ7CisKICAgICBy
YyA9IGJ1aWxkX3N5bWJvbF90YWJsZShwYXlsb2FkLCAmZWxmKTsKICAgICBpZiAoIHJjICkKICAg
ICAgICAgZ290byBvdXQ7CkBAIC0xNjU1LDYgKzE2OTksOSBAQCBzdGF0aWMgdm9pZCBsaXZlcGF0
Y2hfcHJpbnRhbGwodW5zaWduZWQgY2hhciBrZXkpCiAKICAgICAgICAgaWYgKCBkYXRhLT5kZXAu
bGVuICkKICAgICAgICAgICAgIHByaW50aygiZGVwZW5kLW9uPSUqcGhOXG4iLCBkYXRhLT5kZXAu
bGVuLCBkYXRhLT5kZXAucCk7CisKKyAgICAgICAgaWYgKCBkYXRhLT54ZW5fZGVwLmxlbiApCisg
ICAgICAgICAgICBwcmludGsoImRlcGVuZC1vbi14ZW49JSpwaE5cbiIsIGRhdGEtPnhlbl9kZXAu
bGVuLCBkYXRhLT54ZW5fZGVwLnApOwogICAgIH0KIAogICAgIHNwaW5fdW5sb2NrKCZwYXlsb2Fk
X2xvY2spOwpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL2xpdmVwYXRjaC5oIGIveGVuL2lu
Y2x1ZGUveGVuL2xpdmVwYXRjaC5oCmluZGV4IDFiMTgxN2NhMGQuLmVkOTk3YWE0Y2MgMTAwNjQ0
Ci0tLSBhL3hlbi9pbmNsdWRlL3hlbi9saXZlcGF0Y2guaAorKysgYi94ZW4vaW5jbHVkZS94ZW4v
bGl2ZXBhdGNoLmgKQEAgLTI5LDkgKzI5LDEwIEBAIHN0cnVjdCB4ZW5fc3lzY3RsX2xpdmVwYXRj
aF9vcDsKIC8qIENvbnZlbmllbmNlIGRlZmluZSBmb3IgcHJpbnRrLiAqLwogI2RlZmluZSBMSVZF
UEFUQ0ggICAgICAgICAgICAgImxpdmVwYXRjaDogIgogLyogRUxGIHBheWxvYWQgc3BlY2lhbCBz
ZWN0aW9uIG5hbWVzLiAqLwotI2RlZmluZSBFTEZfTElWRVBBVENIX0ZVTkMgICAgIi5saXZlcGF0
Y2guZnVuY3MiCi0jZGVmaW5lIEVMRl9MSVZFUEFUQ0hfREVQRU5EUyAiLmxpdmVwYXRjaC5kZXBl
bmRzIgotI2RlZmluZSBFTEZfQlVJTERfSURfTk9URSAgICAgICIubm90ZS5nbnUuYnVpbGQtaWQi
CisjZGVmaW5lIEVMRl9MSVZFUEFUQ0hfRlVOQyAgICAgICAgIi5saXZlcGF0Y2guZnVuY3MiCisj
ZGVmaW5lIEVMRl9MSVZFUEFUQ0hfREVQRU5EUyAgICAgIi5saXZlcGF0Y2guZGVwZW5kcyIKKyNk
ZWZpbmUgRUxGX0xJVkVQQVRDSF9YRU5fREVQRU5EUyAiLmxpdmVwYXRjaC54ZW5fZGVwZW5kcyIK
KyNkZWZpbmUgRUxGX0JVSUxEX0lEX05PVEUgICAgICAgICAiLm5vdGUuZ251LmJ1aWxkLWlkIgog
LyogQXJiaXRyYXJ5IGxpbWl0IGZvciBwYXlsb2FkIHNpemUgYW5kIC5ic3Mgc2VjdGlvbiBzaXpl
LiAqLwogI2RlZmluZSBMSVZFUEFUQ0hfTUFYX1NJWkUgICAgIE1CKDIpCiAKZGlmZiAtLWdpdCBh
L3hlbi90ZXN0L2xpdmVwYXRjaC9NYWtlZmlsZSBiL3hlbi90ZXN0L2xpdmVwYXRjaC9NYWtlZmls
ZQppbmRleCA2ODMxMzgzZGIxLi5mZGI4Mjc4MmQyIDEwMDY0NAotLS0gYS94ZW4vdGVzdC9saXZl
cGF0Y2gvTWFrZWZpbGUKKysrIGIveGVuL3Rlc3QvbGl2ZXBhdGNoL01ha2VmaWxlCkBAIC0xOSwx
MSArMTksMTMgQEAgTElWRVBBVENIIDo9IHhlbl9oZWxsb193b3JsZC5saXZlcGF0Y2gKIExJVkVQ
QVRDSF9CWUUgOj0geGVuX2J5ZV93b3JsZC5saXZlcGF0Y2gKIExJVkVQQVRDSF9SRVBMQUNFIDo9
IHhlbl9yZXBsYWNlX3dvcmxkLmxpdmVwYXRjaAogTElWRVBBVENIX05PUCA6PSB4ZW5fbm9wLmxp
dmVwYXRjaAorTElWRVBBVENIX05PX1hFTl9CVUlMRElEIDo9IHhlbl9ub194ZW5fYnVpbGRpZC5s
aXZlcGF0Y2gKIAogTElWRVBBVENIRVMgKz0gJChMSVZFUEFUQ0gpCiBMSVZFUEFUQ0hFUyArPSAk
KExJVkVQQVRDSF9CWUUpCiBMSVZFUEFUQ0hFUyArPSAkKExJVkVQQVRDSF9SRVBMQUNFKQogTElW
RVBBVENIRVMgKz0gJChMSVZFUEFUQ0hfTk9QKQorTElWRVBBVENIRVMgKz0gJChMSVZFUEFUQ0hf
Tk9fWEVOX0JVSUxESUQpCiAKIExJVkVQQVRDSF9ERUJVR19ESVIgPz0gJChERUJVR19ESVIpL3hl
bi1saXZlcGF0Y2gKIApAQCAtNTksNyArNjEsNyBAQCBjb25maWcuaDogeGVuX2hlbGxvX3dvcmxk
X2Z1bmMubwogeGVuX2hlbGxvX3dvcmxkLm86IGNvbmZpZy5oCiAKIC5QSE9OWTogJChMSVZFUEFU
Q0gpCi0kKExJVkVQQVRDSCk6IHhlbl9oZWxsb193b3JsZF9mdW5jLm8geGVuX2hlbGxvX3dvcmxk
Lm8gbm90ZS5vCiskKExJVkVQQVRDSCk6IHhlbl9oZWxsb193b3JsZF9mdW5jLm8geGVuX2hlbGxv
X3dvcmxkLm8gbm90ZS5vIHhlbl9ub3RlLm8KIAkkKExEKSAkKExERkxBR1MpICQoYnVpbGRfaWRf
bGlua2VyKSAtciAtbyAkKExJVkVQQVRDSCkgJF4KIAogIwpAQCAtNzgsNiArODAsMTcgQEAgbm90
ZS5vOgogCQkgICAtLXJlbmFtZS1zZWN0aW9uPS5kYXRhPS5saXZlcGF0Y2guZGVwZW5kcyxhbGxv
Yyxsb2FkLHJlYWRvbmx5LGRhdGEsY29udGVudHMgLVMgJEAuYmluICRACiAJcm0gLWYgJEAuYmlu
CiAKKyMKKyMgQXBwZW5kIC5saXZlcGF0Y2gueGVuX2RlcGVuZHMgc2VjdGlvbgorIyB3aXRoIFhl
biBidWlsZC1pZCBkZXJpdmVkIGZyb20geGVuLXN5bXMuCisjCisuUEhPTlk6IHhlbl9ub3RlLm8K
K3hlbl9ub3RlLm86CisJJChPQkpDT1BZKSAtTyBiaW5hcnkgLS1vbmx5LXNlY3Rpb249Lm5vdGUu
Z251LmJ1aWxkLWlkICQoQkFTRURJUikveGVuLXN5bXMgJEAuYmluCisJJChPQkpDT1BZKSAkKE9C
SkNPUFlfTUFHSUMpIFwKKwkJICAgLS1yZW5hbWUtc2VjdGlvbj0uZGF0YT0ubGl2ZXBhdGNoLnhl
bl9kZXBlbmRzLGFsbG9jLGxvYWQscmVhZG9ubHksZGF0YSxjb250ZW50cyAtUyAkQC5iaW4gJEAK
KwlybSAtZiAkQC5iaW4KKwogIwogIyBFeHRyYWN0IHRoZSBidWlsZC1pZCBvZiB0aGUgeGVuX2hl
bGxvX3dvcmxkLmxpdmVwYXRjaAogIyAod2hpY2ggeGVuX2J5ZV93b3JsZCB3aWxsIGRlcGVuZCBv
bikuCkBAIC05MiwyMCArMTA1LDI4IEBAIGhlbGxvX3dvcmxkX25vdGUubzogJChMSVZFUEFUQ0gp
CiB4ZW5fYnllX3dvcmxkLm86IGNvbmZpZy5oCiAKIC5QSE9OWTogJChMSVZFUEFUQ0hfQllFKQot
JChMSVZFUEFUQ0hfQllFKTogeGVuX2J5ZV93b3JsZF9mdW5jLm8geGVuX2J5ZV93b3JsZC5vIGhl
bGxvX3dvcmxkX25vdGUubworJChMSVZFUEFUQ0hfQllFKTogeGVuX2J5ZV93b3JsZF9mdW5jLm8g
eGVuX2J5ZV93b3JsZC5vIGhlbGxvX3dvcmxkX25vdGUubyB4ZW5fbm90ZS5vCiAJJChMRCkgJChM
REZMQUdTKSAkKGJ1aWxkX2lkX2xpbmtlcikgLXIgLW8gJChMSVZFUEFUQ0hfQllFKSAkXgogCiB4
ZW5fcmVwbGFjZV93b3JsZC5vOiBjb25maWcuaAogCiAuUEhPTlk6ICQoTElWRVBBVENIX1JFUExB
Q0UpCi0kKExJVkVQQVRDSF9SRVBMQUNFKTogeGVuX3JlcGxhY2Vfd29ybGRfZnVuYy5vIHhlbl9y
ZXBsYWNlX3dvcmxkLm8gbm90ZS5vCiskKExJVkVQQVRDSF9SRVBMQUNFKTogeGVuX3JlcGxhY2Vf
d29ybGRfZnVuYy5vIHhlbl9yZXBsYWNlX3dvcmxkLm8gbm90ZS5vIHhlbl9ub3RlLm8KIAkkKExE
KSAkKExERkxBR1MpICQoYnVpbGRfaWRfbGlua2VyKSAtciAtbyAkKExJVkVQQVRDSF9SRVBMQUNF
KSAkXgogCiB4ZW5fbm9wLm86IGNvbmZpZy5oCiAKIC5QSE9OWTogJChMSVZFUEFUQ0hfTk9QKQot
JChMSVZFUEFUQ0hfTk9QKTogeGVuX25vcC5vIG5vdGUubworJChMSVZFUEFUQ0hfTk9QKTogeGVu
X25vcC5vIG5vdGUubyB4ZW5fbm90ZS5vCiAJJChMRCkgJChMREZMQUdTKSAkKGJ1aWxkX2lkX2xp
bmtlcikgLXIgLW8gJChMSVZFUEFUQ0hfTk9QKSAkXgogCisjIFRoaXMgb25lIGFsd2F5cyBmYWls
cyB1cG9uIHVwbG9hZCwgYmVjYXVzZSBpdCBkZWxpYmVyZXRlbHkKKyMgZG9lcyBub3QgaGF2ZSBh
IC5saXZlcGF0Y2gueGVuX2RlcGVuZHMgKHhlbl9ub3RlLm8pIHNlY3Rpb24uCit4ZW5fbm9feGVu
X2J1aWxkaWQubzogY29uZmlnLmgKKworLlBIT05ZOiAkKExJVkVQQVRDSF9OT19YRU5fQlVJTERJ
RCkKKyQoTElWRVBBVENIX05PX1hFTl9CVUlMRElEKTogeGVuX25vcC5vIG5vdGUubworCSQoTEQp
ICQoTERGTEFHUykgJChidWlsZF9pZF9saW5rZXIpIC1yIC1vICQoTElWRVBBVENIX05PX1hFTl9C
VUlMRElEKSAkXgorCiAuUEhPTlk6IGxpdmVwYXRjaAotbGl2ZXBhdGNoOiAkKExJVkVQQVRDSCkg
JChMSVZFUEFUQ0hfQllFKSAkKExJVkVQQVRDSF9SRVBMQUNFKSAkKExJVkVQQVRDSF9OT1ApCits
aXZlcGF0Y2g6ICQoTElWRVBBVENIKSAkKExJVkVQQVRDSF9CWUUpICQoTElWRVBBVENIX1JFUExB
Q0UpICQoTElWRVBBVENIX05PUCkgJChMSVZFUEFUQ0hfTk9fWEVOX0JVSUxESUQpCi0tIAoyLjE2
LjUKCgoKCkFtYXpvbiBEZXZlbG9wbWVudCBDZW50ZXIgR2VybWFueSBHbWJICktyYXVzZW5zdHIu
IDM4CjEwMTE3IEJlcmxpbgpHZXNjaGFlZnRzZnVlaHJlcjogQ2hyaXN0aWFuIFNjaGxhZWdlciwg
UmFsZiBIZXJicmljaApVc3QtSUQ6IERFIDI4OSAyMzcgODc5CkVpbmdldHJhZ2VuIGFtIEFtdHNn
ZXJpY2h0IENoYXJsb3R0ZW5idXJnIEhSQiAxNDkxNzMgQgoKCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1k
ZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21h
aWxtYW4vbGlzdGluZm8veGVuLWRldmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 783C61168CD
	for <lists+xen-devel@lfdr.de>; Mon,  9 Dec 2019 10:02:08 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ieEtE-0006vv-GI; Mon, 09 Dec 2019 08:59:36 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=xl4W=Z7=amazon.com=prvs=239a0b868=sjpark@srs-us1.protection.inumbo.net>)
 id 1ieEtC-0006vh-Lb
 for xen-devel@lists.xenproject.org; Mon, 09 Dec 2019 08:59:34 +0000
X-Inumbo-ID: 37fdeaa4-1a62-11ea-b6f1-bc764e2007e4
Received: from smtp-fw-9101.amazon.com (unknown [207.171.184.25])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 37fdeaa4-1a62-11ea-b6f1-bc764e2007e4;
 Mon, 09 Dec 2019 08:59:34 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.com; i=@amazon.com; q=dns/txt; s=amazon201209;
 t=1575881974; x=1607417974;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=8olk0hAHmu26Td53ApyhVwpVYzt4H81HIr7areIZQ94=;
 b=eGh7M3ZO3ctYAt+tLlAiraYtG7gbyY/kVnaEC8HIAyQMQno5MT0L0SCm
 l44Zmq9YBIOXrPN1QAE67d728A+yCLqWXjAMGNJIudE1De/1n19x/ttE5
 dopt4/UP5SbCNrraxzLAEMCaBuEVZdE6HuQU/JJ/NE9GG1I3N5LunmfC9 Y=;
IronPort-SDR: 2E9jejrhM12/0sKKegU0IeHe4R1Ct1JOv1Q2r/RNov9eLHxqrZ8GYit34xcatQRjIMaxkpUJWl
 Jb8HSG+ob2xg==
X-IronPort-AV: E=Sophos;i="5.69,294,1571702400"; 
   d="scan'208";a="3968734"
Received: from sea32-co-svc-lb4-vlan3.sea.corp.amazon.com (HELO
 email-inbound-relay-1d-98acfc19.us-east-1.amazon.com) ([10.47.23.38])
 by smtp-border-fw-out-9101.sea19.amazon.com with ESMTP;
 09 Dec 2019 08:59:20 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan3.iad.amazon.com [10.40.159.166])
 by email-inbound-relay-1d-98acfc19.us-east-1.amazon.com (Postfix) with ESMTPS
 id 3B5E8A22CA; Mon,  9 Dec 2019 08:59:17 +0000 (UTC)
Received: from EX13D31EUA001.ant.amazon.com (10.43.165.15) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.243) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Mon, 9 Dec 2019 08:59:17 +0000
Received: from u886c93fd17d25d.ant.amazon.com (10.43.162.249) by
 EX13D31EUA001.ant.amazon.com (10.43.165.15) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Mon, 9 Dec 2019 08:59:12 +0000
From: SeongJae Park <sjpark@amazon.com>
To: <axboe@kernel.dk>, <konrad.wilk@oracle.com>, <roger.pau@citrix.com>
Date: Mon, 9 Dec 2019 09:58:39 +0100
Message-ID: <20191209085839.21215-2-sjpark@amazon.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20191209085839.21215-1-sjpark@amazon.com>
References: <20191209085839.21215-1-sjpark@amazon.com>
MIME-Version: 1.0
X-Originating-IP: [10.43.162.249]
X-ClientProxiedBy: EX13D29UWA001.ant.amazon.com (10.43.160.187) To
 EX13D31EUA001.ant.amazon.com (10.43.165.15)
Precedence: Bulk
Subject: [Xen-devel] [PATCH v3 1/1] xen/blkback: Squeeze page pools if a
 memory pressure is detected
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: sj38.park@gmail.com, pdurrant@amazon.com, SeongJae Park <sjpark@amazon.de>,
 linux-kernel@vger.kernel.org, linux-block@vger.kernel.org,
 xen-devel@lists.xenproject.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogU2VvbmdKYWUgUGFyayA8c2pwYXJrQGFtYXpvbi5kZT4KCkVhY2ggYGJsa2lmYCBoYXMg
YSBmcmVlIHBhZ2VzIHBvb2wgZm9yIHRoZSBncmFudCBtYXBwaW5nLiAgVGhlIHNpemUgb2YKdGhl
IHBvb2wgc3RhcnRzIGZyb20gemVybyBhbmQgYmUgaW5jcmVhc2VkIG9uIGRlbWFuZCB3aGlsZSBw
cm9jZXNzaW5nCnRoZSBJL08gcmVxdWVzdHMuICBJZiBjdXJyZW50IEkvTyByZXF1ZXN0cyBoYW5k
bGluZyBpcyBmaW5pc2hlZCBvciAxMDAKbWlsbGlzZWNvbmRzIGhhcyBwYXNzZWQgc2luY2UgbGFz
dCBJL08gcmVxdWVzdHMgaGFuZGxpbmcsIGl0IGNoZWNrcyBhbmQKc2hyaW5rcyB0aGUgcG9vbCB0
byBub3QgZXhjZWVkIHRoZSBzaXplIGxpbWl0LCBgbWF4X2J1ZmZlcl9wYWdlc2AuCgpUaGVyZWZv
cmUsIGBibGtmcm9udGAgcnVubmluZyBndWVzdHMgY2FuIGNhdXNlIGEgbWVtb3J5IHByZXNzdXJl
IGluIHRoZQpgYmxrYmFja2AgcnVubmluZyBndWVzdCBieSBhdHRhY2hpbmcgYSBsYXJnZSBudW1i
ZXIgb2YgYmxvY2sgZGV2aWNlcyBhbmQKaW5kdWNpbmcgSS9PLiAgU3lzdGVtIGFkbWluaXN0cmF0
b3JzIGNhbiBhdm9pZCBzdWNoIHByb2JsZW1hdGljCnNpdHVhdGlvbnMgYnkgbGltaXRpbmcgdGhl
IG1heGltdW0gbnVtYmVyIG9mIGRldmljZXMgZWFjaCBndWVzdCBjYW4KYXR0YWNoLiAgSG93ZXZl
ciwgZmluZGluZyB0aGUgb3B0aW1hbCBsaW1pdCBpcyBub3Qgc28gZWFzeS4gIEltcHJvcGVyCnNl
dCBvZiB0aGUgbGltaXQgY2FuIHJlc3VsdHMgaW4gdGhlIG1lbW9yeSBwcmVzc3VyZSBvciBhIHJl
c291cmNlCnVuZGVydXRpbGl6YXRpb24uICBUaGlzIGNvbW1pdCBhdm9pZHMgc3VjaCBwcm9ibGVt
YXRpYyBzaXR1YXRpb25zIGJ5CnNxdWVlemluZyB0aGUgcG9vbHMgKHJldHVybnMgZXZlcnkgZnJl
ZSBwYWdlIGluIHRoZSBwb29sIHRvIHRoZSBzeXN0ZW0pCmZvciBhIHdoaWxlICh1c2VycyBjYW4g
c2V0IHRoaXMgZHVyYXRpb24gdmlhIGEgbW9kdWxlIHBhcmFtZXRlcikgaWYgYQptZW1vcnkgcHJl
c3N1cmUgaXMgZGV0ZWN0ZWQuCgpEaXNjdXNzaW9ucwo9PT09PT09PT09PQoKVGhlIGBibGtiYWNr
YCdzIG9yaWdpbmFsIHNocmlua2luZyBtZWNoYW5pc20gcmV0dXJucyBvbmx5IHBhZ2VzIGluIHRo
ZQpwb29sLCB3aGljaCBhcmUgbm90IGN1cnJlbnRseSBiZSB1c2VkIGJ5IGBibGtiYWNrYCwgdG8g
dGhlIHN5c3RlbS4gIEluCm90aGVyIHdvcmRzLCB0aGUgcGFnZXMgYXJlIG5vdCBtYXBwZWQgd2l0
aCBmb3JlaWduIHBhZ2VzLiAgQmVjYXVzZSB0aGlzCmNvbW1pdCBpcyBjaGFuZ2luZyBvbmx5IHRo
ZSBzaHJpbmsgbGltaXQgYnV0IHVzZXMgdGhlIG1lY2hhbmlzbSBhcyBpcywKdGhpcyBjb21taXQg
ZG9lcyBub3QgaW50cm9kdWNlIGltcHJvcGVyIG1hcHBpbmdzIHJlbGF0ZWQgc2VjdXJpdHkKaXNz
dWVzLgoKT25jZSBhIG1lbW9yeSBwcmVzc3VyZSBpcyBkZXRlY3RlZCwgdGhpcyBjb21taXQga2Vl
cHMgdGhlIHNxdWVlemluZwpsaW1pdCBmb3IgYSB1c2VyLXNwZWNpZmllZCB0aW1lIGR1cmF0aW9u
LiAgVGhlIGR1cmF0aW9uIHNob3VsZCBiZQpuZWl0aGVyIHRvbyBsb25nIG5vciB0b28gc2hvcnQu
ICBJZiBpdCBpcyB0b28gbG9uZywgdGhlIHNxdWVlemluZwppbmN1cnJpbmcgb3ZlcmhlYWQgY2Fu
IHJlZHVjZSB0aGUgSS9PIHBlcmZvcm1hbmNlLiAgSWYgaXQgaXMgdG9vIHNob3J0LApgYmxrYmFj
a2Agd2lsbCBub3QgZnJlZSBlbm91Z2ggcGFnZXMgdG8gcmVkdWNlIHRoZSBtZW1vcnkgcHJlc3N1
cmUuClRoaXMgY29tbWl0IHNldHMgdGhlIHZhbHVlIGFzIGAxMCBtaWxsaXNlY29uZHNgIGJ5IGRl
ZmF1bHQgYmVjYXVzZSBpdCBpcwphIHNob3J0IHRpbWUgaW4gdGVybXMgb2YgSS9PIHdoaWxlIGl0
IGlzIGEgbG9uZyB0aW1lIGluIHRlcm1zIG9mIG1lbW9yeQpvcGVyYXRpb25zLiAgQWxzbywgYXMg
dGhlIG9yaWdpbmFsIHNocmlua2luZyBtZWNoYW5pc20gd29ya3MgZm9yIGF0CmxlYXN0IGV2ZXJ5
IDEwMCBtaWxsaXNlY29uZHMsIHRoaXMgY291bGQgYmUgYSBzb21ld2hhdCByZWFzb25hYmxlCmNo
b2ljZS4gIEkgYWxzbyB0ZXN0ZWQgb3RoZXIgZHVyYXRpb25zIChyZWZlciB0byB0aGUgYmVsb3cg
c2VjdGlvbiBmb3IKbW9yZSBkZXRhaWxzKSBhbmQgY29uZmlybWVkIHRoYXQgMTAgbWlsbGlzZWNv
bmRzIGlzIHRoZSBvbmUgdGhhdCB3b3JrcwpiZXN0IHdpdGggdGhlIHRlc3QuICBUaGF0IHNhaWQs
IHRoZSBwcm9wZXIgZHVyYXRpb24gZGVwZW5kcyBvbiBhY3R1YWwKY29uZmlndXJhdGlvbnMgYW5k
IHdvcmtsb2Fkcy4gIFRoYXQncyB3aHkgdGhpcyBjb21taXQgaXMgYWxsb3dpbmcgdXNlcnMKdG8g
c2V0IGl0IGFzIHRoZWlyIG9wdGltYWwgdmFsdWUgdmlhIHRoZSBtb2R1bGUgcGFyYW1ldGVyLgoK
TWVtb3J5IFByZXNzdXJlIFRlc3QKPT09PT09PT09PT09PT09PT09PT0KClRvIHNob3cgaG93IHRo
aXMgY29tbWl0IGZpeGVzIHRoZSBtZW1vcnkgcHJlc3N1cmUgc2l0dWF0aW9uIHdlbGwsIEkKY29u
ZmlndXJlZCBhIHRlc3QgZW52aXJvbm1lbnQgb24gYSB4ZW4tcnVubmluZyB2aXJ0dWFsaXphdGlv
biBzeXN0ZW0uCk9uIHRoZSBgYmxrZnJvbnRgIHJ1bm5pbmcgZ3Vlc3QgaW5zdGFuY2VzLCBJIGF0
dGFjaCBhIGxhcmdlIG51bWJlciBvZgpuZXR3b3JrLWJhY2tlZCB2b2x1bWUgZGV2aWNlcyBhbmQg
aW5kdWNlIEkvTyB0byB0aG9zZS4gIE1lYW53aGlsZSwgSQptZWFzdXJlIHRoZSBudW1iZXIgb2Yg
cGFnZXMgdGhhdCBzd2FwcGVkIGluIGFuZCBvdXQgb24gdGhlIGBibGtiYWNrYApydW5uaW5nIGd1
ZXN0LiAgVGhlIHRlc3QgcmFuIHR3aWNlLCBvbmNlIGZvciB0aGUgYGJsa2JhY2tgIGJlZm9yZSB0
aGlzCmNvbW1pdCBhbmQgb25jZSBmb3IgdGhhdCBhZnRlciB0aGlzIGNvbW1pdC4gIEFzIHNob3du
IGJlbG93LCB0aGlzIGNvbW1pdApoYXMgZHJhbWF0aWNhbGx5IHJlZHVjZWQgdGhlIG1lbW9yeSBw
cmVzc3VyZToKCiAgICAgICAgICAgICAgICBwc3dwaW4gIHBzd3BvdXQKICAgIGJlZm9yZSAgICAg
IDc2LDY3MiAgMTg1LDc5OQogICAgYWZ0ZXIgICAgICAgICAgMjEyICAgIDMsMzI1CgpPcHRpbWFs
IEFnZ3Jlc3NpdmUgU2hyaW5raW5nIER1cmF0aW9uCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0KClRvIGZpbmQgYSBiZXN0IHNxdWVlemluZyBkdXJhdGlvbiwgSSByZXBlYXRl
ZCB0aGUgdGVzdCB3aXRoIHRocmVlCmRpZmZlcmVudCBkdXJhdGlvbnMgKDFtcywgMTBtcywgYW5k
IDEwMG1zKS4gIFRoZSByZXN1bHRzIGFyZSBhcyBiZWxvdzoKCiAgICBkdXJhdGlvbiAgICBwc3dw
aW4gIHBzd3BvdXQKICAgIDEgICAgICAgICAgIDg1MiAgICAgNiw0MjQKICAgIDEwICAgICAgICAg
IDIxMiAgICAgMywzMjUKICAgIDEwMCAgICAgICAgIDIwMyAgICAgMywzNDAKCkFzIGV4cGVjdGVk
LCB0aGUgbWVtb3J5IHByZXNzdXJlIGhhcyBkZWNyZWFzZWQgYXMgdGhlIGR1cmF0aW9uIGlzCmlu
Y3JlYXNlZCwgYnV0IHRoZSByZWR1Y3Rpb24gc3RvcHBlZCBmcm9tIHRoZSBgMTBtc2AuICBCYXNl
ZCBvbiB0aGlzCnJlc3VsdHMsIEkgY2hvc2UgdGhlIGRlZmF1bHQgZHVyYXRpb24gYXMgMTBtcy4K
ClBlcmZvcm1hbmNlIE92ZXJoZWFkIFRlc3QKPT09PT09PT09PT09PT09PT09PT09PT09PQoKVGhp
cyBjb21taXQgY291bGQgaW5jdXIgSS9PIHBlcmZvcm1hbmNlIGRlZ3JhZGF0aW9uIHVuZGVyIHNl
dmVyZSBtZW1vcnkKcHJlc3N1cmUgYmVjYXVzZSB0aGUgc3F1ZWV6aW5nIHdpbGwgcmVxdWlyZSBt
b3JlIHBhZ2UgYWxsb2NhdGlvbnMgcGVyCkkvTy4gIFRvIHNob3cgdGhlIG92ZXJoZWFkLCBJIGFy
dGlmaWNpYWxseSBtYWRlIGEgd29yc3QtY2FzZSBzcXVlZXppbmcKc2l0dWF0aW9uIGFuZCBtZWFz
dXJlZCB0aGUgSS9PIHBlcmZvcm1hbmNlIG9mIGEgYGJsa2Zyb250YCBydW5uaW5nCmd1ZXN0LgoK
Rm9yIHRoZSBhcnRpZmljaWFsIHNxdWVlemluZywgSSBzZXQgdGhlIGBibGtiYWNrLm1heF9idWZm
ZXJfcGFnZXNgIHVzaW5nCnRoZSBgL3N5cy9tb2R1bGUveGVuX2Jsa2JhY2svcGFyYW1ldGVycy9t
YXhfYnVmZmVyX3BhZ2VzYCBmaWxlLiAgV2Ugc2V0CnRoZSB2YWx1ZSB0byBgMTAyNGAgYW5kIGAw
YC4gIFRoZSBgMTAyNGAgaXMgdGhlIGRlZmF1bHQgdmFsdWUuICBTZXR0aW5nCnRoZSB2YWx1ZSBh
cyBgMGAgaXMgc2FtZSB0byBhIHNpdHVhdGlvbiBkb2luZyB0aGUgc3F1ZWV6aW5nIGFsd2F5cwoo
d29yc3QtY2FzZSkuCgpGb3IgdGhlIEkvTyBwZXJmb3JtYW5jZSBtZWFzdXJlbWVudCwgSSB1c2Ug
YSBzaW1wbGUgYGRkYCBjb21tYW5kLgoKRGVmYXVsdCBQZXJmb3JtYW5jZQotLS0tLS0tLS0tLS0t
LS0tLS0tCgogICAgW2RvbTBdIyBlY2hvIDEwMjQgPiAvc3lzL21vZHVsZS94ZW5fYmxrYmFjay9w
YXJhbWV0ZXJzL21heF9idWZmZXJfcGFnZXMKICAgIFtpbnN0YW5jZV0kIGZvciBpIGluIHsxLi41
fTsgZG8gZGQgaWY9L2Rldi96ZXJvIG9mPWZpbGUgYnM9NGsgY291bnQ9JCgoMjU2KjUxMikpOyBz
eW5jOyBkb25lCiAgICAxMzEwNzIrMCByZWNvcmRzIGluCiAgICAxMzEwNzIrMCByZWNvcmRzIG91
dAogICAgNTM2ODcwOTEyIGJ5dGVzICg1MzcgTUIpIGNvcGllZCwgMTEuNzI1NyBzLCA0NS44IE1C
L3MKICAgIDEzMTA3MiswIHJlY29yZHMgaW4KICAgIDEzMTA3MiswIHJlY29yZHMgb3V0CiAgICA1
MzY4NzA5MTIgYnl0ZXMgKDUzNyBNQikgY29waWVkLCAxMy44ODI3IHMsIDM4LjcgTUIvcwogICAg
MTMxMDcyKzAgcmVjb3JkcyBpbgogICAgMTMxMDcyKzAgcmVjb3JkcyBvdXQKICAgIDUzNjg3MDkx
MiBieXRlcyAoNTM3IE1CKSBjb3BpZWQsIDEzLjg3ODEgcywgMzguNyBNQi9zCiAgICAxMzEwNzIr
MCByZWNvcmRzIGluCiAgICAxMzEwNzIrMCByZWNvcmRzIG91dAogICAgNTM2ODcwOTEyIGJ5dGVz
ICg1MzcgTUIpIGNvcGllZCwgMTMuODczNyBzLCAzOC43IE1CL3MKICAgIDEzMTA3MiswIHJlY29y
ZHMgaW4KICAgIDEzMTA3MiswIHJlY29yZHMgb3V0CiAgICA1MzY4NzA5MTIgYnl0ZXMgKDUzNyBN
QikgY29waWVkLCAxMy44NzAyIHMsIDM4LjcgTUIvcwoKV29yc3QtY2FzZSBQZXJmb3JtYW5jZQot
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgW2RvbTBdIyBlY2hvIDAgPiAvc3lzL21vZHVsZS94
ZW5fYmxrYmFjay9wYXJhbWV0ZXJzL21heF9idWZmZXJfcGFnZXMKICAgIFtpbnN0YW5jZV0kIGZv
ciBpIGluIHsxLi41fTsgZG8gZGQgaWY9L2Rldi96ZXJvIG9mPWZpbGUgYnM9NGsgY291bnQ9JCgo
MjU2KjUxMikpOyBzeW5jOyBkb25lCiAgICAxMzEwNzIrMCByZWNvcmRzIGluCiAgICAxMzEwNzIr
MCByZWNvcmRzIG91dAogICAgNTM2ODcwOTEyIGJ5dGVzICg1MzcgTUIpIGNvcGllZCwgMTEuNzI1
NyBzLCA0NS44IE1CL3MKICAgIDEzMTA3MiswIHJlY29yZHMgaW4KICAgIDEzMTA3MiswIHJlY29y
ZHMgb3V0CiAgICA1MzY4NzA5MTIgYnl0ZXMgKDUzNyBNQikgY29waWVkLCAxMy44NzggcywgMzgu
NyBNQi9zCiAgICAxMzEwNzIrMCByZWNvcmRzIGluCiAgICAxMzEwNzIrMCByZWNvcmRzIG91dAog
ICAgNTM2ODcwOTEyIGJ5dGVzICg1MzcgTUIpIGNvcGllZCwgMTMuODc0NiBzLCAzOC43IE1CL3MK
ICAgIDEzMTA3MiswIHJlY29yZHMgaW4KICAgIDEzMTA3MiswIHJlY29yZHMgb3V0CiAgICA1MzY4
NzA5MTIgYnl0ZXMgKDUzNyBNQikgY29waWVkLCAxMy44Nzg2IHMsIDM4LjcgTUIvcwogICAgMTMx
MDcyKzAgcmVjb3JkcyBpbgogICAgMTMxMDcyKzAgcmVjb3JkcyBvdXQKICAgIDUzNjg3MDkxMiBi
eXRlcyAoNTM3IE1CKSBjb3BpZWQsIDEzLjg3NDkgcywgMzguNyBNQi9zCgpJbiBzaG9ydCwgZXZl
biB3b3JzdCBjYXNlIHNxdWVlemluZyBtYWtlcyBubyB2aXNpYmxlIHBlcmZvcm1hbmNlCmRlZ3Jh
ZGF0aW9uLiAgSSB0aGluayB0aGlzIGlzIGR1ZSB0byB0aGUgc2xvdyBzcGVlZCBvZiB0aGUgSS9P
LiAgSW4Kb3RoZXIgd29yZHMsIHRoZSBhZGRpdGlvbmFsIHBhZ2UgYWxsb2NhdGlvbiBvdmVyaGVh
ZCBpcyBoaWRkZW4gdW5kZXIgdGhlCm11Y2ggc2xvd2VyIEkvTyBsYXRlbmN5LgoKTmV2ZXJ0aGVs
ZXNzLCBwbGVhc2V0IG5vdGUgdGhhdCB0aGlzIGlzIGp1c3QgYSB2ZXJ5IHNpbXBsZSBhbmQgbWlu
aW1hbAp0ZXN0LgoKU2lnbmVkLW9mZi1ieTogU2VvbmdKYWUgUGFyayA8c2pwYXJrQGFtYXpvbi5k
ZT4KLS0tCiBkcml2ZXJzL2Jsb2NrL3hlbi1ibGtiYWNrL2Jsa2JhY2suYyB8IDM1ICsrKysrKysr
KysrKysrKysrKysrKysrKysrKy0tCiAxIGZpbGUgY2hhbmdlZCwgMzMgaW5zZXJ0aW9ucygrKSwg
MiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2Jsb2NrL3hlbi1ibGtiYWNrL2Js
a2JhY2suYyBiL2RyaXZlcnMvYmxvY2sveGVuLWJsa2JhY2svYmxrYmFjay5jCmluZGV4IGZkMWUx
OWYxYTQ5Zi4uNTg3MDYxZmQwNmZjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2Jsb2NrL3hlbi1ibGti
YWNrL2Jsa2JhY2suYworKysgYi9kcml2ZXJzL2Jsb2NrL3hlbi1ibGtiYWNrL2Jsa2JhY2suYwpA
QCAtMTQyLDYgKzE0MiwzMSBAQCBzdGF0aWMgaW5saW5lIGJvb2wgcGVyc2lzdGVudF9nbnRfdGlt
ZW91dChzdHJ1Y3QgcGVyc2lzdGVudF9nbnQgKnBlcnNpc3RlbnRfZ250KQogCQlIWiAqIHhlbl9i
bGtpZl9wZ3JhbnRfdGltZW91dCk7CiB9CiAKKy8qCisgKiBPbmNlIGEgbWVtb3J5IHByZXNzdXJl
IGlzIGRldGVjdGVkLCBzcXVlZXplIGZyZWUgcGFnZSBwb29scworICogdGhpcyB0aW1lIChtaWxs
aXNlY29uZHMpCisgKi8KK3N0YXRpYyBpbnQgeGVuX2Jsa2lmX2J1ZmZlcl9zcXVlZXplX2R1cmF0
aW9uID0gMTA7Cittb2R1bGVfcGFyYW1fbmFtZWQoYnVmZmVyX3NxdWVlemVfZHVyYXRpb24sCisJ
CXhlbl9ibGtpZl9idWZmZXJfc3F1ZWV6ZV9kdXJhdGlvbiwgaW50LCAwNjQ0KTsKK01PRFVMRV9Q
QVJNX0RFU0MoYnVmZmVyX3NxdWVlemVfZHVyYXRpb24sCisiRHVyYXRpb24gaW4gbXMgdG8gc3F1
ZWV6ZSBwYWdlcyBidWZmZXIgd2hlbiBhIG1lbW9yeSBwcmVzc3VyZSBpcyBkZXRlY3RlZCIpOwor
CitzdGF0aWMgdW5zaWduZWQgbG9uZyB4ZW5fYmxrX2J1ZmZlcl9zcXVlZXplX2VuZDsKKworc3Rh
dGljIHVuc2lnbmVkIGxvbmcgYmxraWZfc2hyaW5rX2NvdW50KHN0cnVjdCBzaHJpbmtlciAqc2hy
aW5rZXIsCisJCQkJc3RydWN0IHNocmlua19jb250cm9sICpzYykKK3sKKwl4ZW5fYmxrX2J1ZmZl
cl9zcXVlZXplX2VuZCA9IGppZmZpZXMgKworCQltc2Vjc190b19qaWZmaWVzKHhlbl9ibGtpZl9i
dWZmZXJfc3F1ZWV6ZV9kdXJhdGlvbik7CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qg
c2hyaW5rZXIgYmxraWZfc2hyaW5rZXIgPSB7CisJLmNvdW50X29iamVjdHMgPSBibGtpZl9zaHJp
bmtfY291bnQsCisJLnNlZWtzID0gREVGQVVMVF9TRUVLUywKK307CisKIHN0YXRpYyBpbmxpbmUg
aW50IGdldF9mcmVlX3BhZ2Uoc3RydWN0IHhlbl9ibGtpZl9yaW5nICpyaW5nLCBzdHJ1Y3QgcGFn
ZSAqKnBhZ2UpCiB7CiAJdW5zaWduZWQgbG9uZyBmbGFnczsKQEAgLTY1Niw4ICs2ODEsMTEgQEAg
aW50IHhlbl9ibGtpZl9zY2hlZHVsZSh2b2lkICphcmcpCiAJCQlyaW5nLT5uZXh0X2xydSA9IGpp
ZmZpZXMgKyBtc2Vjc190b19qaWZmaWVzKExSVV9JTlRFUlZBTCk7CiAJCX0KIAotCQkvKiBTaHJp
bmsgaWYgd2UgaGF2ZSBtb3JlIHRoYW4geGVuX2Jsa2lmX21heF9idWZmZXJfcGFnZXMgKi8KLQkJ
c2hyaW5rX2ZyZWVfcGFnZXBvb2wocmluZywgeGVuX2Jsa2lmX21heF9idWZmZXJfcGFnZXMpOwor
CQkvKiBTaHJpbmsgdGhlIGZyZWUgcGFnZXMgcG9vbCBpZiBpdCBpcyB0b28gbGFyZ2UuICovCisJ
CWlmICh0aW1lX2JlZm9yZShqaWZmaWVzLCB4ZW5fYmxrX2J1ZmZlcl9zcXVlZXplX2VuZCkpCisJ
CQlzaHJpbmtfZnJlZV9wYWdlcG9vbChyaW5nLCAwKTsKKwkJZWxzZQorCQkJc2hyaW5rX2ZyZWVf
cGFnZXBvb2wocmluZywgeGVuX2Jsa2lmX21heF9idWZmZXJfcGFnZXMpOwogCiAJCWlmIChsb2df
c3RhdHMgJiYgdGltZV9hZnRlcihqaWZmaWVzLCByaW5nLT5zdF9wcmludCkpCiAJCQlwcmludF9z
dGF0cyhyaW5nKTsKQEAgLTE0OTgsNiArMTUyNiw5IEBAIHN0YXRpYyBpbnQgX19pbml0IHhlbl9i
bGtpZl9pbml0KHZvaWQpCiAJaWYgKHJjKQogCQlnb3RvIGZhaWxlZF9pbml0OwogCisJaWYgKHJl
Z2lzdGVyX3Nocmlua2VyKCZibGtpZl9zaHJpbmtlcikpCisJCXByX3dhcm4oInNocmlua2VyIHJl
Z2lzdHJhdGlvbiBmYWlsZWRcbiIpOworCiAgZmFpbGVkX2luaXQ6CiAJcmV0dXJuIHJjOwogfQot
LSAKMi4xNy4xCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcK
aHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

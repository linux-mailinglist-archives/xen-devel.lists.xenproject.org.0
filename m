Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 35BB774FC3
	for <lists+xen-devel@lfdr.de>; Thu, 25 Jul 2019 15:40:55 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hqdvV-0008Bc-PO; Thu, 25 Jul 2019 13:36:57 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=dOpT=VW=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hqdvU-0008BL-GA
 for xen-devel@lists.xenproject.org; Thu, 25 Jul 2019 13:36:56 +0000
X-Inumbo-ID: 43dbc86a-aee1-11e9-8134-b386c750fd72
Received: from m4a0041g.houston.softwaregrp.com (unknown [15.124.2.87])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 43dbc86a-aee1-11e9-8134-b386c750fd72;
 Thu, 25 Jul 2019 13:36:54 +0000 (UTC)
Received: FROM m4a0041g.houston.softwaregrp.com (15.120.17.146) BY
 m4a0041g.houston.softwaregrp.com WITH ESMTP; 
 Thu, 25 Jul 2019 13:36:42 +0000
Received: from M4W0335.microfocus.com (2002:f78:1193::f78:1193) by
 M4W0334.microfocus.com (2002:f78:1192::f78:1192) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10; Thu, 25 Jul 2019 13:33:52 +0000
Received: from NAM04-BN3-obe.outbound.protection.outlook.com (15.124.8.10) by
 M4W0335.microfocus.com (15.120.17.147) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10 via Frontend Transport; Thu, 25 Jul 2019 13:33:51 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=BoJHMsUU9wDU3TBgHprzwiDPNZiADF+BxCAH5ge0TzmnPeV4CI743SKzHZ/QuSI/JxNwu1VgbO9UStPMSME7duIUFiko3/nWV0jPf4nJsz1ysLUMRAztGB6R6/Ztp6fivqjj8CHWp+HNG7451n0jpSybbRIn/snjQdJ4fthlE1NLI0MzTwiAVau8EC734UEvllssCEH4T40TnYzRjG95OYDKjEL5QuTP1R+ZHkhl5U3CYidRiVC7eedApjSML9k5YFfEtfRjk9eBOa8zZ87eGsxax8YFbinvBeFWsIVQpChH//Se6/2PxyWIRRbvKUtcFNoyg1topBg2q6nlHqLc2w==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=TMRJaxVWrh0Niu+Nz7rB1Fbqr8nRF/TfpMWRtYFbqgE=;
 b=XjfvoNcbtqsaxNaqk1OuVPH0fQYCMOVs1VvIFXnYgEd2EglJy9CAeMSMRpPqpHLMIz8DEwCDepjBVu9+zlElC5yOPbnyvqsKUYe2fT2OA/RiTp/tizmsU/LqDOKemxWZ0/oCiJrwewEjfSw1iY+viO1YOtjxKBncINv4OW0Jg3GYLiw8qh7VrIQOW2ardYUmfQEtlcoGGRzo0Vk5VynEq3uccOEEha05T3dwvUa8LemKvJkYBCUD454SUt7BakRoTOYAM7MssN4G/pEdg5wrUolIV4Ifx2+hVQY3DLEpTWVZniYxBJZD8ph9AFhC1wHml1OZVYLN+V+kfNs/0Wb//w==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=pass
 smtp.mailfrom=suse.com;dmarc=pass action=none header.from=suse.com;dkim=pass
 header.d=suse.com;arc=none
Received: from BY5PR18MB3394.namprd18.prod.outlook.com (10.255.139.95) by
 BY5PR18MB3171.namprd18.prod.outlook.com (10.255.137.24) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2094.17; Thu, 25 Jul 2019 13:33:50 +0000
Received: from BY5PR18MB3394.namprd18.prod.outlook.com
 ([fe80::a4f0:4f46:c076:f74b]) by BY5PR18MB3394.namprd18.prod.outlook.com
 ([fe80::a4f0:4f46:c076:f74b%7]) with mapi id 15.20.2115.005; Thu, 25 Jul 2019
 13:33:50 +0000
From: Jan Beulich <JBeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH v4 12/12] AMD/IOMMU: miscellaneous DTE handling
 adjustments
Thread-Index: AQHVQu2XKpCU3Gukp0iLV5jWvAWoaw==
Date: Thu, 25 Jul 2019 13:33:50 +0000
Message-ID: <019328c9-2727-6961-b33b-cb6d1387827c@suse.com>
References: <b8ae110a-f94a-4ed2-5cf9-c00ff1c0cb81@suse.com>
In-Reply-To: <b8ae110a-f94a-4ed2-5cf9-c00ff1c0cb81@suse.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: LO2P265CA0320.GBRP265.PROD.OUTLOOK.COM
 (2603:10a6:600:a4::20) To BY5PR18MB3394.namprd18.prod.outlook.com
 (2603:10b6:a03:194::31)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=JBeulich@suse.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [87.234.252.170]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: f0625251-6ede-4938-3637-08d71104ba4b
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328)(7193020);
 SRVR:BY5PR18MB3171; 
x-ms-traffictypediagnostic: BY5PR18MB3171:
x-microsoft-antispam-prvs: <BY5PR18MB3171E02A563C97E8A66B6D51B3C10@BY5PR18MB3171.namprd18.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:6108;
x-forefront-prvs: 0109D382B0
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(4636009)(396003)(376002)(366004)(136003)(346002)(39860400002)(199004)(189003)(81166006)(11346002)(26005)(6116002)(478600001)(446003)(256004)(52116002)(186003)(316002)(2501003)(81156014)(476003)(5640700003)(2351001)(5660300002)(3846002)(486006)(2616005)(54906003)(66066001)(8676002)(6436002)(80792005)(66946007)(76176011)(71200400001)(31686004)(86362001)(71190400001)(99286004)(6486002)(8936002)(64756008)(66556008)(53936002)(6506007)(66446008)(2906002)(14454004)(6916009)(102836004)(7736002)(31696002)(6512007)(36756003)(305945005)(68736007)(4326008)(66476007)(14444005)(25786009)(386003);
 DIR:OUT; SFP:1102; SCL:1; SRVR:BY5PR18MB3171;
 H:BY5PR18MB3394.namprd18.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: suse.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: KV0WYqU7dMa3uLKmRafuc0UTl3ctV5gGfgEyOqQEeGP+mfb5tcIGQyWzZ7LqC9PW+0pBYqlyR0rWi5k1Nxcl4PFJ8NRktcd1RsCN1IsEh4vB1ag/Z6eK2Fdce91aCWrKEx1dgnQNVhhtj1nkyw4A/9uwUUYCuoY8CvrAN30FNqrDFoT+XUJjrGEOdBNyThPouG5avCQ8TW81cMF+vU0AxoYnUPArwhlab+soCY3gYQsdW8HrzBLoBruFzcJUnUQ3ZCsjg8TQxZtZJ1tEKSIYQREYp7HpiUxD4TrjAWH223w4ytdgn/Wr3QY7C8vEsC6eu5qb0kNEQUVXKNjT6Gt2Y95WYBFqzoO7z2zWHO2AOccrWshDwwaVTgJZGmidtOryB+AWSzEnlurEKFS2hDBVqL/r5Ek6GxrZPEN+5Ba287k=
Content-ID: <9095655DE85BFB42924367083E0C7F3C@namprd18.prod.outlook.com>
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-Network-Message-Id: f0625251-6ede-4938-3637-08d71104ba4b
X-MS-Exchange-CrossTenant-originalarrivaltime: 25 Jul 2019 13:33:50.0796 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 856b813c-16e5-49a5-85ec-6f081e13b527
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: JBeulich@suse.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BY5PR18MB3171
X-OriginatorOrg: suse.com
Subject: [Xen-devel] [PATCH v4 12/12] AMD/IOMMU: miscellaneous DTE handling
 adjustments
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 Brian Woods <brian.woods@amd.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Rmlyc3QgYW5kIGZvcmVtb3N0IHN3aXRjaCBib29sZWFuIGZpZWxkcyB0byBib29sLiBBZGp1c3Qg
YSBmZXcgcmVsYXRlZA0KZnVuY3Rpb24gcGFyYW1ldGVycyBhcyB3ZWxsLiBUaGVuDQotIGluIGFt
ZF9pb21tdV9zZXRfaW50cmVtYXBfdGFibGUoKSBkb24ndCB1c2UgbGl0ZXJhbCBudW1iZXJzLA0K
LSBpbiBpb21tdV9kdGVfYWRkX2RldmljZV9lbnRyeSgpIHVzZSBhIGNvbXBvdW5kIGxpdGVyYWwg
aW5zdGVhZCBvZiBtYW55DQogICBhc3NpZ25tZW50cywNCi0gaW4gYW1kX2lvbW11X3NldHVwX2Rv
bWFpbl9kZXZpY2UoKQ0KICAgLSBlbGltaW5hdGUgYSBwb2ludGxlc3MgbG9jYWwgdmFyaWFibGUs
DQogICAtIHVzZSB8fCBpbnN0ZWFkIG9mICYmIHdoZW4gZGVjaWRpbmcgd2hldGhlciB0byBjbGVh
ciBhbiBlbnRyeSwNCiAgIC0gY2xlYXIgdGhlIEkgZmllbGQgd2l0aG91dCBhbnkgY2hlY2tpbmcg
b2YgQVRTIC8gSU9UTEIgc3RhdGUsDQotIGxlYXZlIHJlc2VydmVkIGZpZWxkcyB1bm5hbWVkLg0K
DQpTaWduZWQtb2ZmLWJ5OiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+DQotLS0NCnY0
OiBOZXcuDQoNCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMN
CisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMNCkBAIC02OSw4
ICs2OSw3IEBAIHVuaW9uIGlydGVfY3B0ciB7DQogICAgICBjb25zdCB1bmlvbiBpcnRlMTI4ICpw
dHIxMjg7DQogIH0gX190cmFuc3BhcmVudF9fOw0KICANCi0jZGVmaW5lIElOVFJFTUFQX0xFTkdU
SCAweEINCi0jZGVmaW5lIElOVFJFTUFQX0VOVFJJRVMgKDEgPDwgSU5UUkVNQVBfTEVOR1RIKQ0K
KyNkZWZpbmUgSU5UUkVNQVBfRU5UUklFUyAoMSA8PCBJT01NVV9JTlRSRU1BUF9MRU5HVEgpDQog
IA0KICBzdHJ1Y3QgaW9hcGljX3NiZGYgaW9hcGljX3NiZGZbTUFYX0lPX0FQSUNTXTsNCiAgc3Ry
dWN0IGhwZXRfc2JkZiBocGV0X3NiZGY7DQotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9h
bWQvaW9tbXVfbWFwLmMNCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9t
YXAuYw0KQEAgLTEwMSw1MSArMTAxLDUyIEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgc2V0X2lvbW11
X3B0ZV9wcmVzZW4NCiAgDQogIHZvaWQgYW1kX2lvbW11X3NldF9yb290X3BhZ2VfdGFibGUoc3Ry
dWN0IGFtZF9pb21tdV9kdGUgKmR0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB1aW50NjRfdCByb290X3B0ciwgdWludDE2X3QgZG9tYWluX2lkLA0KLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdWludDhfdCBwYWdpbmdfbW9kZSwgdWludDhfdCB2YWxp
ZCkNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ4X3QgcGFnaW5nX21v
ZGUsIGJvb2wgdmFsaWQpDQogIHsNCiAgICAgIGR0ZS0+ZG9tYWluX2lkID0gZG9tYWluX2lkOw0K
ICAgICAgZHRlLT5wdF9yb290ID0gcGFkZHJfdG9fcGZuKHJvb3RfcHRyKTsNCi0gICAgZHRlLT5p
dyA9IDE7DQotICAgIGR0ZS0+aXIgPSAxOw0KKyAgICBkdGUtPml3ID0gdHJ1ZTsNCisgICAgZHRl
LT5pciA9IHRydWU7DQogICAgICBkdGUtPnBhZ2luZ19tb2RlID0gcGFnaW5nX21vZGU7DQotICAg
IGR0ZS0+dHYgPSAxOw0KKyAgICBkdGUtPnR2ID0gdHJ1ZTsNCiAgICAgIGR0ZS0+diA9IHZhbGlk
Ow0KICB9DQogIA0KICB2b2lkIF9faW5pdCBhbWRfaW9tbXVfc2V0X2ludHJlbWFwX3RhYmxlKA0K
LSAgICBzdHJ1Y3QgYW1kX2lvbW11X2R0ZSAqZHRlLCB1aW50NjRfdCBpbnRyZW1hcF9wdHIsIHVp
bnQ4X3QgaW50X3ZhbGlkKQ0KKyAgICBzdHJ1Y3QgYW1kX2lvbW11X2R0ZSAqZHRlLCB1aW50NjRf
dCBpbnRyZW1hcF9wdHIsIGJvb2wgdmFsaWQpDQogIHsNCiAgICAgIGR0ZS0+aXRfcm9vdCA9IGlu
dHJlbWFwX3B0ciA+PiA2Ow0KLSAgICBkdGUtPmludF90YWJfbGVuID0gMHhiOyAvKiAyMDQ4IGVu
dHJpZXMgKi8NCi0gICAgZHRlLT5pbnRfY3RsID0gMjsgLyogZml4ZWQgYW5kIGFyYml0cmF0ZWQg
aW50ZXJydXB0cyByZW1hcHBlZCAqLw0KLSAgICBkdGUtPmlnID0gMDsgLyogdW5tYXBwZWQgaW50
ZXJydXB0IHJlc3VsdHMgaW8gcGFnZSBmYXVsdHMgKi8NCi0gICAgZHRlLT5pdiA9IGludF92YWxp
ZDsNCisgICAgZHRlLT5pbnRfdGFiX2xlbiA9IElPTU1VX0lOVFJFTUFQX0xFTkdUSDsNCisgICAg
ZHRlLT5pbnRfY3RsID0gSU9NTVVfREVWX1RBQkxFX0lOVF9DT05UUk9MX1RSQU5TTEFURUQ7DQor
ICAgIGR0ZS0+aWcgPSBmYWxzZTsgLyogdW5tYXBwZWQgaW50ZXJydXB0cyByZXN1bHQgaW4gaS9v
IHBhZ2UgZmF1bHRzICovDQorICAgIGR0ZS0+aXYgPSB2YWxpZDsNCiAgfQ0KICANCiAgdm9pZCBf
X2luaXQgaW9tbXVfZHRlX2FkZF9kZXZpY2VfZW50cnkoc3RydWN0IGFtZF9pb21tdV9kdGUgKmR0
ZSwNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaXZyc19t
YXBwaW5ncyAqaXZyc19kZXYpDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgY29uc3Qgc3RydWN0IGl2cnNfbWFwcGluZ3MgKml2cnNfZGV2KQ0KICB7DQogICAgICB1aW50
OF90IGZsYWdzID0gaXZyc19kZXYtPmRldmljZV9mbGFnczsNCiAgDQotICAgIG1lbXNldChkdGUs
IDAsIHNpemVvZigqZHRlKSk7DQotDQotICAgIGR0ZS0+aW5pdF9wYXNzID0gTUFTS19FWFRSKGZs
YWdzLCBBQ1BJX0lWSERfSU5JVF9QQVNTKTsNCi0gICAgZHRlLT5leHRfaW50X3Bhc3MgPSBNQVNL
X0VYVFIoZmxhZ3MsIEFDUElfSVZIRF9FSU5UX1BBU1MpOw0KLSAgICBkdGUtPm5taV9wYXNzID0g
TUFTS19FWFRSKGZsYWdzLCBBQ1BJX0lWSERfTk1JX1BBU1MpOw0KLSAgICBkdGUtPmxpbnQwX3Bh
c3MgPSBNQVNLX0VYVFIoZmxhZ3MsIEFDUElfSVZIRF9MSU5UMF9QQVNTKTsNCi0gICAgZHRlLT5s
aW50MV9wYXNzID0gTUFTS19FWFRSKGZsYWdzLCBBQ1BJX0lWSERfTElOVDFfUEFTUyk7DQotICAg
IGR0ZS0+c3lzX21ndCA9IE1BU0tfRVhUUihmbGFncywgQUNQSV9JVkhEX1NZU1RFTV9NR01UKTsN
Ci0gICAgZHRlLT5leCA9IGl2cnNfZGV2LT5kdGVfYWxsb3dfZXhjbHVzaW9uOw0KKyAgICAqZHRl
ID0gKHN0cnVjdCBhbWRfaW9tbXVfZHRlKXsNCisgICAgICAgIC5pbml0X3Bhc3MgPSBmbGFncyAm
IEFDUElfSVZIRF9JTklUX1BBU1MsDQorICAgICAgICAuZXh0X2ludF9wYXNzID0gZmxhZ3MgJiBB
Q1BJX0lWSERfRUlOVF9QQVNTLA0KKyAgICAgICAgLm5taV9wYXNzID0gZmxhZ3MgJiBBQ1BJX0lW
SERfTk1JX1BBU1MsDQorICAgICAgICAubGludDBfcGFzcyA9IGZsYWdzICYgQUNQSV9JVkhEX0xJ
TlQwX1BBU1MsDQorICAgICAgICAubGludDFfcGFzcyA9IGZsYWdzICYgQUNQSV9JVkhEX0xJTlQx
X1BBU1MsDQorICAgICAgICAuaW9jdGwgPSBJT01NVV9ERVZfVEFCTEVfSU9fQ09OVFJPTF9BQk9S
VEVELA0KKyAgICAgICAgLnN5c19tZ3QgPSBNQVNLX0VYVFIoZmxhZ3MsIEFDUElfSVZIRF9TWVNU
RU1fTUdNVCksDQorICAgICAgICAuZXggPSBpdnJzX2Rldi0+ZHRlX2FsbG93X2V4Y2x1c2lvbiwN
CisgICAgfTsNCiAgfQ0KICANCiAgdm9pZCBpb21tdV9kdGVfc2V0X2d1ZXN0X2NyMyhzdHJ1Y3Qg
YW1kX2lvbW11X2R0ZSAqZHRlLCB1aW50MTZfdCBkb21faWQsDQotICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB1aW50NjRfdCBnY3IzX21mbiwgdWludDhfdCBndiwgdWludDhfdCBnbHgpDQor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRfdCBnY3IzX21mbiwgYm9vbCBndiwg
dWludDhfdCBnbHgpDQogIHsNCiAgI2RlZmluZSBHQ1IzX01BU0soaGksIGxvKSAoKCgxdWwgPDwg
KChoaSkgKyAxKSkgLSAxKSAmIH4oKDF1bCA8PCAobG8pKSAtIDEpKQ0KICAjZGVmaW5lIEdDUjNf
U0hJRlQobG8pICgobG8pIC0gUEFHRV9TSElGVCkNCiAgDQogICAgICAvKiBJIGJpdCBtdXN0IGJl
IHNldCB3aGVuIGdjcjMgaXMgZW5hYmxlZCAqLw0KLSAgICBkdGUtPmkgPSAxOw0KKyAgICBkdGUt
PmkgPSB0cnVlOw0KICANCiAgICAgIGR0ZS0+Z2NyM190cnBfMTRfMTIgPSAoZ2NyM19tZm4gJiBH
Q1IzX01BU0soMTQsIDEyKSkgPj4gR0NSM19TSElGVCgxMik7DQogICAgICBkdGUtPmdjcjNfdHJw
XzMwXzE1ID0gKGdjcjNfbWZuICYgR0NSM19NQVNLKDMwLCAxNSkpID4+IEdDUjNfU0hJRlQoMTUp
Ow0KLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL3BjaV9hbWRfaW9tbXUuYw0KKysr
IGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL3BjaV9hbWRfaW9tbXUuYw0KQEAgLTkzLDcg
KzkzLDYgQEAgc3RhdGljIHZvaWQgYW1kX2lvbW11X3NldHVwX2RvbWFpbl9kZXZpYw0KICAgICAg
c3RydWN0IGFtZF9pb21tdV9kdGUgKnRhYmxlLCAqZHRlOw0KICAgICAgdW5zaWduZWQgbG9uZyBm
bGFnczsNCiAgICAgIGludCByZXFfaWQsIHZhbGlkID0gMTsNCi0gICAgaW50IGR0ZV9pID0gMDsN
CiAgICAgIHU4IGJ1cyA9IHBkZXYtPmJ1czsNCiAgICAgIGNvbnN0IHN0cnVjdCBkb21haW5faW9t
bXUgKmhkID0gZG9tX2lvbW11KGRvbWFpbik7DQogIA0KQEAgLTEwMyw5ICsxMDIsNiBAQCBzdGF0
aWMgdm9pZCBhbWRfaW9tbXVfc2V0dXBfZG9tYWluX2RldmljDQogICAgICBpZiAoIGlvbW11X2h3
ZG9tX3Bhc3N0aHJvdWdoICYmIGlzX2hhcmR3YXJlX2RvbWFpbihkb21haW4pICkNCiAgICAgICAg
ICB2YWxpZCA9IDA7DQogIA0KLSAgICBpZiAoIGF0c19lbmFibGVkICkNCi0gICAgICAgIGR0ZV9p
ID0gMTsNCi0NCiAgICAgIC8qIGdldCBkZXZpY2UtdGFibGUgZW50cnkgKi8NCiAgICAgIHJlcV9p
ZCA9IGdldF9kbWFfcmVxdWVzdG9yX2lkKGlvbW11LT5zZWcsIFBDSV9CREYyKGJ1cywgZGV2Zm4p
KTsNCiAgICAgIHRhYmxlID0gaW9tbXUtPmRldl90YWJsZS5idWZmZXI7DQpAQCAtMTIyLDcgKzEx
OCw3IEBAIHN0YXRpYyB2b2lkIGFtZF9pb21tdV9zZXR1cF9kb21haW5fZGV2aWMNCiAgDQogICAg
ICAgICAgaWYgKCBwY2lfYXRzX2RldmljZShpb21tdS0+c2VnLCBidXMsIHBkZXYtPmRldmZuKSAm
Jg0KICAgICAgICAgICAgICAgaW9tbXVfaGFzX2NhcChpb21tdSwgUENJX0NBUF9JT1RMQl9TSElG
VCkgKQ0KLSAgICAgICAgICAgIGR0ZS0+aSA9IGR0ZV9pOw0KKyAgICAgICAgICAgIGR0ZS0+aSA9
IGF0c19lbmFibGVkOw0KICANCiAgICAgICAgICBhbWRfaW9tbXVfZmx1c2hfZGV2aWNlKGlvbW11
LCByZXFfaWQpOw0KICANCkBAIC0yODgsMTQgKzI4NCwxMSBAQCB2b2lkIGFtZF9pb21tdV9kaXNh
YmxlX2RvbWFpbl9kZXZpY2Uoc3RyDQogICAgICBkdGUgPSAmdGFibGVbcmVxX2lkXTsNCiAgDQog
ICAgICBzcGluX2xvY2tfaXJxc2F2ZSgmaW9tbXUtPmxvY2ssIGZsYWdzKTsNCi0gICAgaWYgKCBk
dGUtPnR2ICYmIGR0ZS0+diApDQorICAgIGlmICggZHRlLT50diB8fCBkdGUtPnYgKQ0KICAgICAg
ew0KLSAgICAgICAgZHRlLT50diA9IDA7DQotICAgICAgICBkdGUtPnYgPSAwOw0KLQ0KLSAgICAg
ICAgaWYgKCBwY2lfYXRzX2RldmljZShpb21tdS0+c2VnLCBidXMsIHBkZXYtPmRldmZuKSAmJg0K
LSAgICAgICAgICAgICBpb21tdV9oYXNfY2FwKGlvbW11LCBQQ0lfQ0FQX0lPVExCX1NISUZUKSAp
DQotICAgICAgICAgICAgZHRlLT5pID0gMDsNCisgICAgICAgIGR0ZS0+dHYgPSBmYWxzZTsNCisg
ICAgICAgIGR0ZS0+diA9IGZhbHNlOw0KKyAgICAgICAgZHRlLT5pID0gZmFsc2U7DQogIA0KICAg
ICAgICAgIGFtZF9pb21tdV9mbHVzaF9kZXZpY2UoaW9tbXUsIHJlcV9pZCk7DQogIA0KLS0tIGEv
eGVuL2luY2x1ZGUvYXNtLXg4Ni9odm0vc3ZtL2FtZC1pb21tdS1kZWZzLmgNCisrKyBiL3hlbi9p
bmNsdWRlL2FzbS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtZGVmcy5oDQpAQCAtMTA3LDU3ICsxMDcs
NjAgQEANCiAgI2RlZmluZSBJT01NVV9ERVZfVEFCTEVfSU5UX0NPTlRST0xfRk9SV0FSREVECTB4
MQ0KICAjZGVmaW5lIElPTU1VX0RFVl9UQUJMRV9JTlRfQ09OVFJPTF9UUkFOU0xBVEVECTB4Mg0K
ICANCisvKiBGb3Igbm93IHdlIGFsd2F5cyBhbGxvY2F0ZSBtYXhpbXVtIHBvc3NpYmxlIGludGVy
cnVwdCByZW1hcHBpbmcgdGFibGVzLiAqLw0KKyNkZWZpbmUgSU9NTVVfSU5UUkVNQVBfTEVOR1RI
CQkJMHhCDQorDQogIHN0cnVjdCBhbWRfaW9tbXVfZHRlIHsNCiAgICAgIC8qIDAgLSA2MyAqLw0K
LSAgICB1aW50NjRfdCB2OjE7DQotICAgIHVpbnQ2NF90IHR2OjE7DQotICAgIHVpbnQ2NF90IHJl
c2VydmVkMDo1Ow0KLSAgICB1aW50NjRfdCBoYWQ6MjsNCi0gICAgdWludDY0X3QgcGFnaW5nX21v
ZGU6MzsNCisgICAgYm9vbCB2OjE7DQorICAgIGJvb2wgdHY6MTsNCisgICAgdW5zaWduZWQgaW50
IDo1Ow0KKyAgICB1bnNpZ25lZCBpbnQgaGFkOjI7DQorICAgIHVuc2lnbmVkIGludCBwYWdpbmdf
bW9kZTozOw0KICAgICAgdWludDY0X3QgcHRfcm9vdDo0MDsNCi0gICAgdWludDY0X3QgcHByOjE7
DQotICAgIHVpbnQ2NF90IGdwcnA6MTsNCi0gICAgdWludDY0X3QgZ2lvdjoxOw0KLSAgICB1aW50
NjRfdCBndjoxOw0KLSAgICB1aW50NjRfdCBnbHg6MjsNCi0gICAgdWludDY0X3QgZ2NyM190cnBf
MTRfMTI6MzsNCi0gICAgdWludDY0X3QgaXI6MTsNCi0gICAgdWludDY0X3QgaXc6MTsNCi0gICAg
dWludDY0X3QgcmVzZXJ2ZWQxOjE7DQorICAgIGJvb2wgcHByOjE7DQorICAgIGJvb2wgZ3BycDox
Ow0KKyAgICBib29sIGdpb3Y6MTsNCisgICAgYm9vbCBndjoxOw0KKyAgICB1bnNpZ25lZCBpbnQg
Z2x4OjI7DQorICAgIHVuc2lnbmVkIGludCBnY3IzX3RycF8xNF8xMjozOw0KKyAgICBib29sIGly
OjE7DQorICAgIGJvb2wgaXc6MTsNCisgICAgdW5zaWduZWQgaW50IDoxOw0KICANCiAgICAgIC8q
IDY0IC0gMTI3ICovDQotICAgIHVpbnQ2NF90IGRvbWFpbl9pZDoxNjsNCi0gICAgdWludDY0X3Qg
Z2NyM190cnBfMzBfMTU6MTY7DQotICAgIHVpbnQ2NF90IGk6MTsNCi0gICAgdWludDY0X3Qgc2U6
MTsNCi0gICAgdWludDY0X3Qgc2E6MTsNCi0gICAgdWludDY0X3QgaW9jdGw6MjsNCi0gICAgdWlu
dDY0X3QgY2FjaGU6MTsNCi0gICAgdWludDY0X3Qgc2Q6MTsNCi0gICAgdWludDY0X3QgZXg6MTsN
Ci0gICAgdWludDY0X3Qgc3lzX21ndDoyOw0KLSAgICB1aW50NjRfdCByZXNlcnZlZDI6MTsNCi0g
ICAgdWludDY0X3QgZ2NyM190cnBfNTFfMzE6MjE7DQorICAgIHVuc2lnbmVkIGludCBkb21haW5f
aWQ6MTY7DQorICAgIHVuc2lnbmVkIGludCBnY3IzX3RycF8zMF8xNToxNjsNCisgICAgYm9vbCBp
OjE7DQorICAgIGJvb2wgc2U6MTsNCisgICAgYm9vbCBzYToxOw0KKyAgICB1bnNpZ25lZCBpbnQg
aW9jdGw6MjsNCisgICAgYm9vbCBjYWNoZToxOw0KKyAgICBib29sIHNkOjE7DQorICAgIGJvb2wg
ZXg6MTsNCisgICAgdW5zaWduZWQgaW50IHN5c19tZ3Q6MjsNCisgICAgdW5zaWduZWQgaW50IDox
Ow0KKyAgICB1bnNpZ25lZCBpbnQgZ2NyM190cnBfNTFfMzE6MjE7DQogIA0KICAgICAgLyogMTI4
IC0gMTkxICovDQotICAgIHVpbnQ2NF90IGl2OjE7DQotICAgIHVpbnQ2NF90IGludF90YWJfbGVu
OjQ7DQotICAgIHVpbnQ2NF90IGlnOjE7DQorICAgIGJvb2wgaXY6MTsNCisgICAgdW5zaWduZWQg
aW50IGludF90YWJfbGVuOjQ7DQorICAgIGJvb2wgaWc6MTsNCiAgICAgIHVpbnQ2NF90IGl0X3Jv
b3Q6NDY7DQotICAgIHVpbnQ2NF90IHJlc2VydmVkMzo0Ow0KLSAgICB1aW50NjRfdCBpbml0X3Bh
c3M6MTsNCi0gICAgdWludDY0X3QgZXh0X2ludF9wYXNzOjE7DQotICAgIHVpbnQ2NF90IG5taV9w
YXNzOjE7DQotICAgIHVpbnQ2NF90IHJlc2VydmVkNDoxOw0KLSAgICB1aW50NjRfdCBpbnRfY3Rs
OjI7DQotICAgIHVpbnQ2NF90IGxpbnQwX3Bhc3M6MTsNCi0gICAgdWludDY0X3QgbGludDFfcGFz
czoxOw0KKyAgICB1bnNpZ25lZCBpbnQgOjQ7DQorICAgIGJvb2wgaW5pdF9wYXNzOjE7DQorICAg
IGJvb2wgZXh0X2ludF9wYXNzOjE7DQorICAgIGJvb2wgbm1pX3Bhc3M6MTsNCisgICAgdW5zaWdu
ZWQgaW50IDoxOw0KKyAgICB1bnNpZ25lZCBpbnQgaW50X2N0bDoyOw0KKyAgICBib29sIGxpbnQw
X3Bhc3M6MTsNCisgICAgYm9vbCBsaW50MV9wYXNzOjE7DQogIA0KICAgICAgLyogMTkyIC0gMjU1
ICovDQotICAgIHVpbnQ2NF90IHJlc2VydmVkNTo1NDsNCi0gICAgdWludDY0X3QgYXR0cl92OjE7
DQotICAgIHVpbnQ2NF90IG1vZGUwX2ZjOjE7DQotICAgIHVpbnQ2NF90IHNub29wX2F0dHI6ODsN
CisgICAgdWludDY0X3QgOjU0Ow0KKyAgICBib29sIGF0dHJfdjoxOw0KKyAgICBib29sIG1vZGUw
X2ZjOjE7DQorICAgIHVuc2lnbmVkIGludCBzbm9vcF9hdHRyOjg7DQogIH07DQogIA0KICAvKiBD
b21tYW5kIEJ1ZmZlciAqLw0KLS0tIGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9odm0vc3ZtL2FtZC1p
b21tdS1wcm90by5oDQorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11
LXByb3RvLmgNCkBAIC03MywxNCArNzMsMTQgQEAgaW50IF9fbXVzdF9jaGVjayBhbWRfaW9tbXVf
Zmx1c2hfaW90bGJfYQ0KICBpbnQgZ2V0X2RtYV9yZXF1ZXN0b3JfaWQodWludDE2X3Qgc2VnLCB1
aW50MTZfdCBiZGYpOw0KICB2b2lkIGFtZF9pb21tdV9zZXRfaW50cmVtYXBfdGFibGUoc3RydWN0
IGFtZF9pb21tdV9kdGUgKmR0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHVpbnQ2NF90IGludHJlbWFwX3B0ciwNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdWludDhfdCBpbnRfdmFsaWQpOw0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBib29sIHZhbGlkKTsNCiAgdm9pZCBhbWRfaW9tbXVfc2V0X3Jvb3RfcGFnZV90YWJsZShzdHJ1
Y3QgYW1kX2lvbW11X2R0ZSAqZHRlLA0KICAJCQkJICAgdWludDY0X3Qgcm9vdF9wdHIsIHVpbnQx
Nl90IGRvbWFpbl9pZCwNCi0JCQkJICAgdWludDhfdCBwYWdpbmdfbW9kZSwgdWludDhfdCB2YWxp
ZCk7DQorCQkJCSAgIHVpbnQ4X3QgcGFnaW5nX21vZGUsIGJvb2wgdmFsaWQpOw0KICB2b2lkIGlv
bW11X2R0ZV9hZGRfZGV2aWNlX2VudHJ5KHN0cnVjdCBhbWRfaW9tbXVfZHRlICpkdGUsDQotICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaXZyc19tYXBwaW5ncyAqaXZyc19k
ZXYpOw0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IGl2cnNf
bWFwcGluZ3MgKml2cnNfZGV2KTsNCiAgdm9pZCBpb21tdV9kdGVfc2V0X2d1ZXN0X2NyMyhzdHJ1
Y3QgYW1kX2lvbW11X2R0ZSAqZHRlLCB1aW50MTZfdCBkb21faWQsDQotICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB1aW50NjRfdCBnY3IzX21mbiwgdWludDhfdCBndiwgdWludDhfdCBnbHgp
Ow0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDY0X3QgZ2NyM19tZm4sIGJvb2wg
Z3YsIHVpbnQ4X3QgZ2x4KTsNCiAgDQogIC8qIHNlbmQgY21kIHRvIGlvbW11ICovDQogIHZvaWQg
YW1kX2lvbW11X2ZsdXNoX2FsbF9wYWdlcyhzdHJ1Y3QgZG9tYWluICpkKTsNCg0KX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcg
bGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9q
ZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 6627BA59C6
	for <lists+xen-devel@lfdr.de>; Mon,  2 Sep 2019 16:52:52 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i4nf2-0006Nc-4A; Mon, 02 Sep 2019 14:50:28 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=R1Xd=W5=citrix.com=paul.durrant@srs-us1.protection.inumbo.net>)
 id 1i4nf0-0006NA-Ap
 for xen-devel@lists.xenproject.org; Mon, 02 Sep 2019 14:50:26 +0000
X-Inumbo-ID: fcd3183c-cd90-11e9-ac23-bc764e2007e4
Received: from esa2.hc3370-68.iphmx.com (unknown [216.71.145.153])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id fcd3183c-cd90-11e9-ac23-bc764e2007e4;
 Mon, 02 Sep 2019 14:50:21 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1567435821;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=8ed+AXv135kp0H40E5jsDZUEBrR9VqqNbvMXW8lvZ0I=;
 b=GEUJwL7h3og6+bvVX2LeZi8Z1vj1qohKdg6q+cKC4iTJhC5yJrk5NeQC
 viVSe0Bi4MyWRu91G/YkUYbrPCTgapcgcYmvbpxlbvZlIk/h9udWYpOm+
 rHI1+bXL1tkmeVGN7NbwzXY+hMkuEdVDc52Ysfto+ygSOg1eHCuFw69TF I=;
Authentication-Results: esa2.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=paul.durrant@citrix.com;
 spf=Pass smtp.mailfrom=Paul.Durrant@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa2.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 paul.durrant@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa2.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="paul.durrant@citrix.com"; x-conformance=sidf_compatible
Received-SPF: Pass (esa2.hc3370-68.iphmx.com: domain of
 Paul.Durrant@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa2.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="Paul.Durrant@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83 ~all"
Received-SPF: None (esa2.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa2.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: 2hhmb2PQdYyekrGRH3ZnyIL5q2INIMRaCpXms/Jh6suFPIEjr0kKXhplYZOV5pOil4gkzGe51g
 rBrI8oWpanaUzhgptqlMJqT3dI+lkL7V6WcGxmkPWmjTZup+IkZctEovHUkZbVCN7r5F7gXRBI
 Mshy/1G+6mg8jl4hHzz8pR6nb47ZSkPrTH69Vs28wvQvN2gKX/IaxhWOvLJckrvgGMd0jydki8
 SOn7HUMFez6xFM2ErPH39ambE30hucf3p15ZoPrgXPkCFw69wmSvi1yRqUO56tvfl91L2tPZqC
 rcA=
X-SBRS: 2.7
X-MesageID: 5020241
X-Ironport-Server: esa2.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.64,459,1559534400"; 
   d="scan'208";a="5020241"
From: Paul Durrant <paul.durrant@citrix.com>
To: <xen-devel@lists.xenproject.org>
Date: Mon, 2 Sep 2019 15:50:10 +0100
Message-ID: <20190902145014.36442-3-paul.durrant@citrix.com>
X-Mailer: git-send-email 2.20.1.2.gb21ebb671
In-Reply-To: <20190902145014.36442-1-paul.durrant@citrix.com>
References: <20190902145014.36442-1-paul.durrant@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v8 2/6] domain: introduce XEN_DOMCTL_CDF_iommu
 flag
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>, Konrad
 Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>, Paul Durrant <paul.durrant@citrix.com>,
 Christian Lindig <christian.lindig@citrix.com>,
 Jan Beulich <jbeulich@suse.com>, David
 Scott <dave@recoil.org>, Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBwYXRjaCBpbnRyb2R1Y2VzIGEgY29tbW9uIGRvbWFpbiBjcmVhdGlvbiBmbGFnIHRvIGRl
dGVybWluZSB3aGV0aGVyCnRoZSBkb21haW4gaXMgcGVybWl0dGVkIHRvIG1ha2UgdXNlIG9mIHRo
ZSBJT01NVS4gQ3VycmVudGx5IHRoZSBmbGFnIGlzCmFsd2F5cyBzZXQgKGZvciBib3RoIGRvbTAg
YW5kIGRvbVUpIGlmIHRoZSBJT01NVSBpcyBnbG9iYWxseSBlbmFibGVkCihpLmUuIGlvbW11X2Vu
YWJsZWQgPT0gMSkuIHNhbml0aXNlX2RvbWFpbl9jb25maWcoKSBpcyBtb2RpZmllZCB0byByZWpl
Y3QKdGhlIGZsYWcgaWYgIWlvbW11X2VuYWJsZWQuCgpBIG5ldyBoZWxwZXIgZnVuY3Rpb24sIGlz
X2lvbW11X2VuYWJsZWQoKSwgaXMgYWRkZWQgdG8gdGVzdCB0aGUgZmxhZyBhbmQKaW9tbXVfZG9t
YWluX2luaXQoKSB3aWxsIHJldHVybiBpbW1lZGlhdGVseSBpZiAhaXNfaW9tbXVfZW5hYmxlZCgp
LiBUaGlzIGlzCnNsaWdodGx5IGRpZmZlcmVudCB0byB0aGUgcHJldmlvdXMgYmVoYXZpb3VyIGJh
c2VkIG9uICFpb21tdV9lbmFibGVkIHdoZXJlCnRoZSBjYWxsIHRvIGFyY2hfaW9tbXVfZG9tYWlu
X2luaXQoKSB3YXMgbWFkZSByZWdhcmRsZXNzLCBob3dldmVyIGl0IGFwcGVhcnMKdGhhdCB0aGlz
IGNhbGwgd2FzIG9ubHkgbmVjZXNzYXJ5IHRvIGluaXRpYWxpemUgdGhlIGR0X2RldmljZXMgbGlz
dCBmb3IgQVJNCnN1Y2ggdGhhdCBpb21tdV9yZWxlYXNlX2R0X2RldmljZXMoKSBjYW4gYmUgY2Fs
bGVkIHVuY29uZGl0aW9uYWxseSBieQpkb21haW5fcmVsaW5xdWlzaF9yZXNvdXJjZXMoKS4gQWRk
aW5nIGEgc2ltcGxlIGNoZWNrIG9mIGlzX2lvbW11X2VuYWJsZWQoKQppbnRvIGlvbW11X3JlbGVh
c2VfZHRfZGV2aWNlcygpIGtlZXBzIHRoaXMgdW5jb25kaXRpb25hbCBjYWxsIHdvcmtpbmcuCgpO
byBmdW5jdGlvbmFsIGNoYW5nZSBzaG91bGQgYmUgb2JzZXJ2ZWQgd2l0aCB0aGlzIHBhdGNoIGFw
cGxpZWQuCgpTdWJzZXF1ZW50IHBhdGNoZXMgd2lsbCBhbGxvdyB0aGUgdG9vbHN0YWNrIHRvIGNv
bnRyb2wgd2hldGhlciB1c2Ugb2YgdGhlCklPTU1VIGlzIGVuYWJsZWQgZm9yIGEgZG9tYWluLgoK
Tk9URTogVGhlIGludHJvZHVjdGlvbiBvZiB0aGUgaXNfaW9tbXVfZW5hYmxlZCgpIGhlbHBlciBm
dW5jdGlvbiBtaWdodAogICAgICBzZWVtIGV4Y2Vzc2l2ZSBidXQgaXRzIHVzZSBpcyBleHBlY3Rl
ZCB0byBpbmNyZWFzZSB3aXRoIHN1YnNlcXVlbnQKICAgICAgcGF0Y2hlcy4gQWxzbywgaGF2aW5n
IGlvbW11X2RvbWFpbl9pbml0KCkgYmFpbCBiZWZvcmUgY2FsbGluZwogICAgICBhcmNoX2lvbW11
X2RvbWFpbl9pbml0KCkgaXMgbm90IHN0cmljdGx5IG5lY2Vzc2FyeSwgYnV0IEkgdGhpbmsgdGhl
CiAgICAgIGNvbnNlcXVlbnQgYWRkaXRpb24gb2YgdGhlIGNhbGwgdG8gaXNfaW9tbXVfZW5hYmxl
ZCgpIGluCiAgICAgIGlvbW11X3JlbGVhc2VfZHRfZGV2aWNlcygpIG1ha2VzIHRoZSBjb2RlIGNs
ZWFyZXIuCgpTaWduZWQtb2ZmLWJ5OiBQYXVsIER1cnJhbnQgPHBhdWwuZHVycmFudEBjaXRyaXgu
Y29tPgpSZXZpZXdlZC1ieTogIlJvZ2VyIFBhdSBNb25uw6kiIDxyb2dlci5wYXVAY2l0cml4LmNv
bT4KQWNrZWQtYnk6IEphbiBCZXVsaWNoIDxqYmV1bGljaEBzdXNlLmNvbT4KLS0tCkNjOiBDaHJp
c3RpYW4gTGluZGlnIDxjaHJpc3RpYW4ubGluZGlnQGNpdHJpeC5jb20+CkNjOiBEYXZpZCBTY290
dCA8ZGF2ZUByZWNvaWwub3JnPgpDYzogSWFuIEphY2tzb24gPGlhbi5qYWNrc29uQGV1LmNpdHJp
eC5jb20+CkNjOiBXZWkgTGl1IDx3bEB4ZW4ub3JnPgpDYzogQW5kcmV3IENvb3BlciA8YW5kcmV3
LmNvb3BlcjNAY2l0cml4LmNvbT4KQ2M6IEdlb3JnZSBEdW5sYXAgPEdlb3JnZS5EdW5sYXBAZXUu
Y2l0cml4LmNvbT4KQ2M6IEp1bGllbiBHcmFsbCA8anVsaWVuLmdyYWxsQGFybS5jb20+CkNjOiBL
b25yYWQgUnplc3p1dGVrIFdpbGsgPGtvbnJhZC53aWxrQG9yYWNsZS5jb20+CkNjOiBTdGVmYW5v
IFN0YWJlbGxpbmkgPHNzdGFiZWxsaW5pQGtlcm5lbC5vcmc+CkNjOiBUaW0gRGVlZ2FuIDx0aW1A
eGVuLm9yZz4KQ2M6IFZvbG9keW15ciBCYWJjaHVrIDxWb2xvZHlteXJfQmFiY2h1a0BlcGFtLmNv
bT4KClByZXZpb3VzbHkgcGFydCBvZiBzZXJpZXMgaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9y
Zy9hcmNoaXZlcy9odG1sL3hlbi1kZXZlbC8yMDE5LTA3L21zZzAyMjY3Lmh0bWwKCnY3OgogLSBB
ZGQgYSBjaGVjayB0byB2ZXJpZnkgdGhhdCB0aGUgdG9vbHN0YWNrIGhhcyBub3Qgc2V0IFhFTl9E
T01DVExfQ0RGX2lvbW11CiAtIEFkZCBtaXNzaW5nIG9jYW1sIGJpbmRpbmcgY2hhbmdlcwoKdjY6
CiAtIFJlbW92ZSB0aGUgdG9vbHN0YWNrIHBhcnRzIGFzIHRoZXJlJ3Mgbm8gbmljZSBtZXRob2Qg
b2YgdGVzdGluZyB3aGV0aGVyCiAgIHRoZSBJT01NVSBpcyBlbmFibGVkIGluIGFuIGFyY2hpdGVj
dHVyZS1uZXV0cmFsIHdheQoKdjU6CiAtIE1vdmUgaXNfaW9tbXVfZW5hYmxlZCgpIGNoZWNrIGlu
dG8gaW9tbXVfZG9tYWluX2luaXQoKQogLSBSZWplY3QgWEVOX0RPTUNUTF9DREZfaW9tbXUgaW4g
c2FuaXRpc2VfZG9tYWluX2NvbmZpZygpIGlmICFpb21tdV9lbmFibGVkCiAtIFVzZSBldmFsdWF0
ZV9ub3NwZWMoKSBpbiBkZWZpbnRpb24gb2YgaXNfaW9tbXVfZW5hYmxlZCgpCi0tLQogdG9vbHMv
b2NhbWwvbGlicy94Yy94ZW5jdHJsLm1sICAgICAgICB8ICA4ICsrKysrKystCiB0b29scy9vY2Ft
bC9saWJzL3hjL3hlbmN0cmwubWxpICAgICAgIHwgIDggKysrKysrKy0KIHhlbi9hcmNoL2FybS9z
ZXR1cC5jICAgICAgICAgICAgICAgICAgfCAgMyArKysKIHhlbi9hcmNoL3g4Ni9zZXR1cC5jICAg
ICAgICAgICAgICAgICAgfCAgMyArKysKIHhlbi9jb21tb24vZG9tYWluLmMgICAgICAgICAgICAg
ICAgICAgfCAgOSArKysrKysrKy0KIHhlbi9jb21tb24vZG9tY3RsLmMgICAgICAgICAgICAgICAg
ICAgfCAxMyArKysrKysrKysrKysrCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9kZXZpY2VfdHJl
ZS5jIHwgIDMgKysrCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5jICAgICAgIHwgIDYg
KysrLS0tCiB4ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmggICAgICAgICAgIHwgIDQgKysrKwog
eGVuL2luY2x1ZGUveGVuL3NjaGVkLmggICAgICAgICAgICAgICB8ICA1ICsrKysrCiAxMCBmaWxl
cyBjaGFuZ2VkLCA1NiBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L3Rvb2xzL29jYW1sL2xpYnMveGMveGVuY3RybC5tbCBiL3Rvb2xzL29jYW1sL2xpYnMveGMveGVu
Y3RybC5tbAppbmRleCAzNTk1OGI5NGQ1Li5iZGYzZjJlMzk1IDEwMDY0NAotLS0gYS90b29scy9v
Y2FtbC9saWJzL3hjL3hlbmN0cmwubWwKKysrIGIvdG9vbHMvb2NhbWwvbGlicy94Yy94ZW5jdHJs
Lm1sCkBAIC01Niw3ICs1NiwxMyBAQCB0eXBlIGFyY2hfZG9tYWluY29uZmlnID0KIAl8IEFSTSBv
ZiB4ZW5fYXJtX2FyY2hfZG9tYWluY29uZmlnCiAJfCBYODYgb2YgeGVuX3g4Nl9hcmNoX2RvbWFp
bmNvbmZpZwogCi10eXBlIGRvbWFpbl9jcmVhdGVfZmxhZyA9IENERl9IVk0gfCBDREZfSEFQCit0
eXBlIGRvbWFpbl9jcmVhdGVfZmxhZyA9CisJfCBDREZfSFZNCisJfCBDREZfSEFQCisJfCBDREZf
UzNfSU5URUdSSVRZCisJfCBDREZfT09TX09GRgorCXwgQ0RGX1hTX0RPTUFJTgorCXwgQ0RGX0lP
TU1VCiAKIHR5cGUgZG9tY3RsX2NyZWF0ZV9jb25maWcgPQogewpkaWZmIC0tZ2l0IGEvdG9vbHMv
b2NhbWwvbGlicy94Yy94ZW5jdHJsLm1saSBiL3Rvb2xzL29jYW1sL2xpYnMveGMveGVuY3RybC5t
bGkKaW5kZXggNmM0MjY4ZDQ1My4uZmM0MDg4NTY3MSAxMDA2NDQKLS0tIGEvdG9vbHMvb2NhbWwv
bGlicy94Yy94ZW5jdHJsLm1saQorKysgYi90b29scy9vY2FtbC9saWJzL3hjL3hlbmN0cmwubWxp
CkBAIC00OSw3ICs0OSwxMyBAQCB0eXBlIGFyY2hfZG9tYWluY29uZmlnID0KICAgfCBBUk0gb2Yg
eGVuX2FybV9hcmNoX2RvbWFpbmNvbmZpZwogICB8IFg4NiBvZiB4ZW5feDg2X2FyY2hfZG9tYWlu
Y29uZmlnCiAKLXR5cGUgZG9tYWluX2NyZWF0ZV9mbGFnID0gQ0RGX0hWTSB8IENERl9IQVAKK3R5
cGUgZG9tYWluX2NyZWF0ZV9mbGFnID0KKyAgfCBDREZfSFZNCisgIHwgQ0RGX0hBUAorICB8IENE
Rl9TM19JTlRFR1JJVFkKKyAgfCBDREZfT09TX09GRgorICB8IENERl9YU19ET01BSU4KKyAgfCBD
REZfSU9NTVUKIAogdHlwZSBkb21jdGxfY3JlYXRlX2NvbmZpZyA9IHsKICAgc3NpZHJlZjogaW50
MzI7CmRpZmYgLS1naXQgYS94ZW4vYXJjaC9hcm0vc2V0dXAuYyBiL3hlbi9hcmNoL2FybS9zZXR1
cC5jCmluZGV4IGZhNmMxMTBiMTEuLmRjMjY0MGY4YjkgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL2Fy
bS9zZXR1cC5jCisrKyBiL3hlbi9hcmNoL2FybS9zZXR1cC5jCkBAIC05NjEsNiArOTYxLDkgQEAg
dm9pZCBfX2luaXQgc3RhcnRfeGVuKHVuc2lnbmVkIGxvbmcgYm9vdF9waHlzX29mZnNldCwKICAg
ICBkb20wX2NmZy5hcmNoLnRlZV90eXBlID0gdGVlX2dldF90eXBlKCk7CiAgICAgZG9tMF9jZmcu
bWF4X3ZjcHVzID0gZG9tMF9tYXhfdmNwdXMoKTsKIAorICAgIGlmICggaW9tbXVfZW5hYmxlZCAp
CisgICAgICAgIGRvbTBfY2ZnLmZsYWdzIHw9IFhFTl9ET01DVExfQ0RGX2lvbW11OworCiAgICAg
ZG9tMCA9IGRvbWFpbl9jcmVhdGUoMCwgJmRvbTBfY2ZnLCB0cnVlKTsKICAgICBpZiAoIElTX0VS
Uihkb20wKSB8fCAoYWxsb2NfZG9tMF92Y3B1MChkb20wKSA9PSBOVUxMKSApCiAgICAgICAgIHBh
bmljKCJFcnJvciBjcmVhdGluZyBkb21haW4gMFxuIik7CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94
ODYvc2V0dXAuYyBiL3hlbi9hcmNoL3g4Ni9zZXR1cC5jCmluZGV4IGQwYjM1YjBjZTIuLmZhMjI2
YTJiYWIgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9zZXR1cC5jCisrKyBiL3hlbi9hcmNoL3g4
Ni9zZXR1cC5jCkBAIC0xNzMzLDYgKzE3MzMsOSBAQCB2b2lkIF9faW5pdCBub3JldHVybiBfX3N0
YXJ0X3hlbih1bnNpZ25lZCBsb25nIG1iaV9wKQogICAgIH0KICAgICBkb20wX2NmZy5tYXhfdmNw
dXMgPSBkb20wX21heF92Y3B1cygpOwogCisgICAgaWYgKCBpb21tdV9lbmFibGVkICkKKyAgICAg
ICAgZG9tMF9jZmcuZmxhZ3MgfD0gWEVOX0RPTUNUTF9DREZfaW9tbXU7CisKICAgICAvKiBDcmVh
dGUgaW5pdGlhbCBkb21haW4gMC4gKi8KICAgICBkb20wID0gZG9tYWluX2NyZWF0ZShnZXRfaW5p
dGlhbF9kb21haW5faWQoKSwgJmRvbTBfY2ZnLCAhcHZfc2hpbSk7CiAgICAgaWYgKCBJU19FUlIo
ZG9tMCkgfHwgKGFsbG9jX2RvbTBfdmNwdTAoZG9tMCkgPT0gTlVMTCkgKQpkaWZmIC0tZ2l0IGEv
eGVuL2NvbW1vbi9kb21haW4uYyBiL3hlbi9jb21tb24vZG9tYWluLmMKaW5kZXggZTlkMmM2MTNl
MC4uN2RmYjI1N2M1MCAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9kb21haW4uYworKysgYi94ZW4v
Y29tbW9uL2RvbWFpbi5jCkBAIC0zMDEsNyArMzAxLDggQEAgc3RhdGljIGludCBzYW5pdGlzZV9k
b21haW5fY29uZmlnKHN0cnVjdCB4ZW5fZG9tY3RsX2NyZWF0ZWRvbWFpbiAqY29uZmlnKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgWEVOX0RPTUNUTF9DREZfaGFwIHwKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFhFTl9ET01DVExfQ0RGX3MzX2ludGVncml0eSB8CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBYRU5fRE9NQ1RMX0NERl9vb3Nfb2ZmIHwKLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFhFTl9ET01DVExfQ0RGX3hzX2RvbWFpbikgKQorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgWEVOX0RPTUNUTF9DREZfeHNfZG9tYWluIHwKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFhFTl9ET01DVExfQ0RGX2lvbW11KSApCiAgICAgewogICAgICAgICBkcHJpbnRr
KFhFTkxPR19JTkZPLCAiVW5rbm93biBDREYgZmxhZ3MgJSN4XG4iLCBjb25maWctPmZsYWdzKTsK
ICAgICAgICAgcmV0dXJuIC1FSU5WQUw7CkBAIC0zMjAsNiArMzIxLDEyIEBAIHN0YXRpYyBpbnQg
c2FuaXRpc2VfZG9tYWluX2NvbmZpZyhzdHJ1Y3QgeGVuX2RvbWN0bF9jcmVhdGVkb21haW4gKmNv
bmZpZykKICAgICAgICAgcmV0dXJuIC1FSU5WQUw7CiAgICAgfQogCisgICAgaWYgKCAoY29uZmln
LT5mbGFncyAmIFhFTl9ET01DVExfQ0RGX2lvbW11KSAmJiAhaW9tbXVfZW5hYmxlZCApCisgICAg
eworICAgICAgICBkcHJpbnRrKFhFTkxPR19JTkZPLCAiSU9NTVUgaXMgbm90IGVuYWJsZWRcbiIp
OworICAgICAgICByZXR1cm4gLUVJTlZBTDsKKyAgICB9CisKICAgICByZXR1cm4gYXJjaF9zYW5p
dGlzZV9kb21haW5fY29uZmlnKGNvbmZpZyk7CiB9CiAKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24v
ZG9tY3RsLmMgYi94ZW4vY29tbW9uL2RvbWN0bC5jCmluZGV4IDZlNmU5Yjk4NjYuLjVkY2ZlM2M4
ZjYgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vZG9tY3RsLmMKKysrIGIveGVuL2NvbW1vbi9kb21j
dGwuYwpAQCAtNTE1LDYgKzUxNSwxOSBAQCBsb25nIGRvX2RvbWN0bChYRU5fR1VFU1RfSEFORExF
X1BBUkFNKHhlbl9kb21jdGxfdCkgdV9kb21jdGwpCiAgICAgICAgICAgICByb3ZlciA9IGRvbTsK
ICAgICAgICAgfQogCisgICAgICAgIC8qCisgICAgICAgICAqIEZvciBub3csIG1ha2Ugc3VyZSB0
aGUgY3JlYXRlZG9tYWluIElPTU1VIGZsYWcgaXMgc2V0IGlmIHRoZQorICAgICAgICAgKiBJT01N
VSBpcyBlbmFibGVkLiBXaGVuIHRoZSBmbGFnIGNvbWVzIHVuZGVyIHRvb2xzdGFjayBjb250cm9s
CisgICAgICAgICAqIHRoaXMgY2FuIGdvIGF3YXkuCisgICAgICAgICAqLworICAgICAgICBpZiAo
IG9wLT51LmNyZWF0ZWRvbWFpbi5mbGFncyAmIFhFTl9ET01DVExfQ0RGX2lvbW11ICkKKyAgICAg
ICAgeworICAgICAgICAgICAgQVNTRVJUX1VOUkVBQ0hBQkxFKCk7CisgICAgICAgICAgICByZXR1
cm4gLUVJTlZBTDsKKyAgICAgICAgfQorICAgICAgICBpZiAoIGlvbW11X2VuYWJsZWQgKQorICAg
ICAgICAgICAgb3AtPnUuY3JlYXRlZG9tYWluLmZsYWdzIHw9IFhFTl9ET01DVExfQ0RGX2lvbW11
OworCiAgICAgICAgIGQgPSBkb21haW5fY3JlYXRlKGRvbSwgJm9wLT51LmNyZWF0ZWRvbWFpbiwg
ZmFsc2UpOwogICAgICAgICBpZiAoIElTX0VSUihkKSApCiAgICAgICAgIHsKZGlmZiAtLWdpdCBh
L3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2RldmljZV90cmVlLmMgYi94ZW4vZHJpdmVycy9wYXNz
dGhyb3VnaC9kZXZpY2VfdHJlZS5jCmluZGV4IGI2ZWFhZTcyODMuLmQzMmIxNzI2NjQgMTAwNjQ0
Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2RldmljZV90cmVlLmMKKysrIGIveGVuL2Ry
aXZlcnMvcGFzc3Rocm91Z2gvZGV2aWNlX3RyZWUuYwpAQCAtMTE5LDYgKzExOSw5IEBAIGludCBp
b21tdV9yZWxlYXNlX2R0X2RldmljZXMoc3RydWN0IGRvbWFpbiAqZCkKICAgICBzdHJ1Y3QgZHRf
ZGV2aWNlX25vZGUgKmRldiwgKl9kZXY7CiAgICAgaW50IHJjOwogCisgICAgaWYgKCAhaXNfaW9t
bXVfZW5hYmxlZChkKSApCisgICAgICAgIHJldHVybiAwOworCiAgICAgbGlzdF9mb3JfZWFjaF9l
bnRyeV9zYWZlKGRldiwgX2RldiwgJmhkLT5kdF9kZXZpY2VzLCBkb21haW5fbGlzdCkKICAgICB7
CiAgICAgICAgIHJjID0gaW9tbXVfZGVhc3NpZ25fZHRfZGV2aWNlKGQsIGRldik7CmRpZmYgLS1n
aXQgYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5jIGIveGVuL2RyaXZlcnMvcGFzc3Ro
cm91Z2gvaW9tbXUuYwppbmRleCAzN2ViMGY3ZDAxLi5lNjFkM2QxMzY4IDEwMDY0NAotLS0gYS94
ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL2lvbW11LmMKQEAgLTE1MSwxMyArMTUxLDEzIEBAIGludCBpb21tdV9kb21haW5faW5pdChz
dHJ1Y3QgZG9tYWluICpkKQogICAgIHN0cnVjdCBkb21haW5faW9tbXUgKmhkID0gZG9tX2lvbW11
KGQpOwogICAgIGludCByZXQgPSAwOwogCisgICAgaWYgKCAhaXNfaW9tbXVfZW5hYmxlZChkKSAp
CisgICAgICAgIHJldHVybiAwOworCiAgICAgcmV0ID0gYXJjaF9pb21tdV9kb21haW5faW5pdChk
KTsKICAgICBpZiAoIHJldCApCiAgICAgICAgIHJldHVybiByZXQ7CiAKLSAgICBpZiAoICFpb21t
dV9lbmFibGVkICkKLSAgICAgICAgcmV0dXJuIDA7Ci0KICAgICBoZC0+cGxhdGZvcm1fb3BzID0g
aW9tbXVfZ2V0X29wcygpOwogICAgIHJldHVybiBoZC0+cGxhdGZvcm1fb3BzLT5pbml0KGQpOwog
fQpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvcHVibGljL2RvbWN0bC5oIGIveGVuL2luY2x1ZGUv
cHVibGljL2RvbWN0bC5oCmluZGV4IDcyZDUxMzNjYmEuLjVmNTVhMmY2ZTEgMTAwNjQ0Ci0tLSBh
L3hlbi9pbmNsdWRlL3B1YmxpYy9kb21jdGwuaAorKysgYi94ZW4vaW5jbHVkZS9wdWJsaWMvZG9t
Y3RsLmgKQEAgLTY0LDYgKzY0LDEwIEBAIHN0cnVjdCB4ZW5fZG9tY3RsX2NyZWF0ZWRvbWFpbiB7
CiAgLyogSXMgdGhpcyBhIHhlbnN0b3JlIGRvbWFpbj8gKi8KICNkZWZpbmUgX1hFTl9ET01DVExf
Q0RGX3hzX2RvbWFpbiAgICAgNAogI2RlZmluZSBYRU5fRE9NQ1RMX0NERl94c19kb21haW4gICAg
ICAoMVU8PF9YRU5fRE9NQ1RMX0NERl94c19kb21haW4pCisgLyogU2hvdWxkIHRoaXMgZG9tYWlu
IGJlIHBlcm1pdHRlZCB0byB1c2UgdGhlIElPTU1VPyAqLworI2RlZmluZSBfWEVOX0RPTUNUTF9D
REZfaW9tbXUgICAgICAgICA1CisjZGVmaW5lIFhFTl9ET01DVExfQ0RGX2lvbW11ICAgICAgICAg
ICgxVTw8X1hFTl9ET01DVExfQ0RGX2lvbW11KQorCiAgICAgdWludDMyX3QgZmxhZ3M7CiAKICAg
ICAvKgpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL3NjaGVkLmggYi94ZW4vaW5jbHVkZS94
ZW4vc2NoZWQuaAppbmRleCBkMmJiZTAzYmQ5Li4zYzBkYjQyYjgyIDEwMDY0NAotLS0gYS94ZW4v
aW5jbHVkZS94ZW4vc2NoZWQuaAorKysgYi94ZW4vaW5jbHVkZS94ZW4vc2NoZWQuaApAQCAtOTgz
LDYgKzk4MywxMSBAQCBzdGF0aWMgaW5saW5lIGJvb2wgaXNfeGVuc3RvcmVfZG9tYWluKGNvbnN0
IHN0cnVjdCBkb21haW4gKmQpCiAgICAgcmV0dXJuIGQtPm9wdGlvbnMgJiBYRU5fRE9NQ1RMX0NE
Rl94c19kb21haW47CiB9CiAKK3N0YXRpYyBpbmxpbmUgYm9vbCBpc19pb21tdV9lbmFibGVkKGNv
bnN0IHN0cnVjdCBkb21haW4gKmQpCit7CisgICAgcmV0dXJuIGV2YWx1YXRlX25vc3BlYyhkLT5v
cHRpb25zICYgWEVOX0RPTUNUTF9DREZfaW9tbXUpOworfQorCiBleHRlcm4gYm9vbCBzY2hlZF9z
bXRfcG93ZXJfc2F2aW5nczsKIAogZXh0ZXJuIGVudW0gY3B1ZnJlcV9jb250cm9sbGVyIHsKLS0g
CjIuMjAuMS4yLmdiMjFlYmI2NzEKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5w
cm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8v
eGVuLWRldmVs

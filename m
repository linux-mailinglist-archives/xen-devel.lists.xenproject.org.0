Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 802B2AFA1E
	for <lists+xen-devel@lfdr.de>; Wed, 11 Sep 2019 12:14:37 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i7zap-0006hL-6D; Wed, 11 Sep 2019 10:11:19 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=VrDL=XG=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1i7zan-0006h9-M1
 for xen-devel@lists.xen.org; Wed, 11 Sep 2019 10:11:17 +0000
X-Inumbo-ID: 7d5c3316-d47c-11e9-978d-bc764e2007e4
Received: from foss.arm.com (unknown [217.140.110.172])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTP
 id 7d5c3316-d47c-11e9-978d-bc764e2007e4;
 Wed, 11 Sep 2019 10:11:15 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 60FFF28;
 Wed, 11 Sep 2019 03:11:15 -0700 (PDT)
Received: from [10.37.12.223] (unknown [10.37.12.223])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 89B1D3F71F;
 Wed, 11 Sep 2019 03:11:13 -0700 (PDT)
To: Stefano Stabellini <sstabellini@kernel.org>
References: <alpine.DEB.2.21.1908201838370.20094@sstabellini-ThinkPad-T480s>
 <20190821035315.12812-5-sstabellini@kernel.org>
From: Julien Grall <julien.grall@arm.com>
Message-ID: <13e675a2-6628-ccab-9122-94ed9ea2a23d@arm.com>
Date: Wed, 11 Sep 2019 11:11:11 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190821035315.12812-5-sstabellini@kernel.org>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v4 5/8] xen/arm: assign devices to boot
 domains
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Volodymyr_Babchuk@epam.com, Achin.Gupta@arm.com, andrii_anisov@epam.com,
 Stefano Stabellini <stefanos@xilinx.com>, xen-devel@lists.xen.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGksCgpPbiA4LzIxLzE5IDQ6NTMgQU0sIFN0ZWZhbm8gU3RhYmVsbGluaSB3cm90ZToKPiBTY2Fu
IHRoZSB1c2VyIHByb3ZpZGVkIGR0YiBmcmFnbWVudCBhdCBib290LiBGb3IgZWFjaCBkZXZpY2Ug
bm9kZSwgbWFwCj4gbWVtb3J5IHRvIGd1ZXN0cywgYW5kIHJvdXRlIGludGVycnVwdHMgYW5kIHNl
dHVwIHRoZSBpb21tdS4KPiAKPiBUaGUgbWVtb3J5IHJlZ2lvbiB0byByZW1hcCBpcyBzcGVjaWZp
ZWQgYnkgdGhlICJ4ZW4scmVnIiBwcm9wZXJ0eS4KPiAKPiBUaGUgaW9tbXUgaXMgc2V0dXAgYnkg
cGFzc2luZyB0aGUgbm9kZSBvZiB0aGUgZGV2aWNlIHRvIGFzc2lnbiBvbiB0aGUKPiBob3N0IGRl
dmljZSB0cmVlLiBUaGUgcGF0aCBpcyBzcGVjaWZpZWQgaW4gdGhlIGRldmljZSB0cmVlIGZyYWdt
ZW50IGFzCj4gdGhlICJ4ZW4scGF0aCIgc3RyaW5nIHByb3BlcnR5Lgo+IAo+IFRoZSBpbnRlcnJ1
cHRzIGFyZSByZW1hcHBlZCBiYXNlZCBvbiB0aGUgaW5mb3JtYXRpb24gZnJvbSB0aGUKPiBjb3Jy
ZXNwb25kaW5nIG5vZGUgb24gdGhlIGhvc3QgZGV2aWNlIHRyZWUuIENhbGwKPiBoYW5kbGVfZGV2
aWNlX2ludGVycnVwdHMgdG8gcmVtYXAgaW50ZXJydXB0cy4gSW50ZXJydXB0cyByZWxhdGVkIGRl
dmljZQo+IHRyZWUgcHJvcGVydGllcyBhcmUgY29waWVkIGZyb20gdGhlIGRldmljZSB0cmVlIGZy
YWdtZW50LCBzYW1lIGFzIGFsbAo+IHRoZSBvdGhlciBwcm9wZXJ0aWVzLgo+IAo+IFNpZ25lZC1v
ZmYtYnk6IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3RlZmFub3NAeGlsaW54LmNvbT4KPiAtLS0KPiBD
aGFuZ2VzIGluIHY0Ogo+IC0gdXNlIHVuc2lnbmVkCj4gLSBpbXByb3ZlIGNvbW1pdCBtZXNzYWdl
Cj4gLSBjb2RlIHN0eWxlCj4gLSB1c2UgZHRfcHJvcF9jbXAKPiAtIHVzZSBkZXZpY2VfdHJlZV9n
ZXRfcmVnCj4gLSBkb24ndCBjb3B5IG92ZXIgeGVuLHJlZyBhbmQgeGVuLHBhdGgKPiAtIGRvbid0
IGNyZWF0ZSBzcGVjaWFsIGludGVycnVwdCBwcm9wZXJ0aWVzIGZvciBkb21VOiBjb3B5IHRoZW0g
ZnJvbSB0aGUKPiAgICBmcmFnbWVudAo+IC0gaW4tY29kZSBjb21tZW50Cj4gCj4gQ2hhbmdlcyBp
biB2MzoKPiAtIGltcHJvdmUgY29tbWl0IG1lc3NhZ2UKPiAtIHJlbW92ZSBzdXBlcmZsdW91cyBj
YXN0Cj4gLSBtZXJnZSBjb2RlIHdpdGggdGhlIGNvcHkgY29kZQo+IC0gYWRkIGludGVycnVwLXBh
cmVudAo+IC0gZGVtb3ZlIGRlcHRoID4gMiBjaGVjawo+IC0gcmV1c2UgY29kZSBmcm9tIGhhbmRs
ZV9kZXZpY2VfaW50ZXJydXB0cwo+IC0gY29weSBpbnRlcnJ1cHRzIGZyb20gaG9zdCBkdAo+IAo+
IENoYW5nZXMgaW4gdjI6Cj4gLSByZW5hbWUgInBhdGgiIHRvICJ4ZW4scGF0aCIKPiAtIGdyYW1t
YXIgZml4Cj4gLSB1c2UgZ2FkZHJfdG9fZ2ZuIGFuZCBtYWRkcl90b19tZm4KPiAtIHJlbW92ZSBk
ZXB0aCA8PSAyIGxpbWl0YXRpb24gaW4gc2Nhbm5pbmcgdGhlIGR0YiBmcmFnbWVudAo+IC0gaW50
cm9kdWNlIGFuZCBwYXJzZSB4ZW4scmVnCj4gLSBjb2RlIHN0eWxlCj4gLSBzdXBwb3J0IG1vcmUg
dGhhbiBvbmUgaW50ZXJydXB0IHBlciBkZXZpY2UKPiAtIHNwZWNpZnkgb25seSB0aGUgR0lDIGlz
IHN1cHBvcnRlZAo+IC0tLQo+ICAgeGVuL2FyY2gvYXJtL2RvbWFpbl9idWlsZC5jIHwgNjYgKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLQo+ICAgMSBmaWxlIGNoYW5nZWQsIDYy
IGluc2VydGlvbnMoKyksIDQgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL3hlbi9hcmNo
L2FybS9kb21haW5fYnVpbGQuYyBiL3hlbi9hcmNoL2FybS9kb21haW5fYnVpbGQuYwo+IGluZGV4
IGM3MWI5ZjI4ODkuLjI1NmM4MzQ2MmEgMTAwNjQ0Cj4gLS0tIGEveGVuL2FyY2gvYXJtL2RvbWFp
bl9idWlsZC5jCj4gKysrIGIveGVuL2FyY2gvYXJtL2RvbWFpbl9idWlsZC5jCj4gQEAgLTE3MjEs
NiArMTcyMSw5IEBAIHN0YXRpYyBpbnQgX19pbml0IGhhbmRsZV9wcm9wX3BmZHQoc3RydWN0IGtl
cm5lbF9pbmZvICpraW5mbywKPiAgICAgICB2b2lkICpmZHQgPSBraW5mby0+ZmR0Owo+ICAgICAg
IGludCBwcm9wb2ZmLCBuYW1lb2ZmLCByZXM7Cj4gICAgICAgY29uc3Qgc3RydWN0IGZkdF9wcm9w
ZXJ0eSAqcHJvcDsKPiArICAgIHN0cnVjdCBkdF9kZXZpY2Vfbm9kZSAqbm9kZTsKPiArICAgIGNv
bnN0IF9fYmUzMiAqY2VsbDsKPiArICAgIHVuc2lnbmVkIGludCBpLCBsZW47Cj4gICAKPiAgICAg
ICBmb3IgKCBwcm9wb2ZmID0gZmR0X2ZpcnN0X3Byb3BlcnR5X29mZnNldChwZmR0LCBub2Rlb2Zm
KTsKPiAgICAgICAgICAgICBwcm9wb2ZmID49IDA7Cj4gQEAgLTE3MzAsMTAgKzE3MzMsNjUgQEAg
c3RhdGljIGludCBfX2luaXQgaGFuZGxlX3Byb3BfcGZkdChzdHJ1Y3Qga2VybmVsX2luZm8gKmtp
bmZvLAo+ICAgICAgICAgICAgICAgcmV0dXJuIC1GRFRfRVJSX0lOVEVSTkFMOwo+ICAgCj4gICAg
ICAgICAgIG5hbWVvZmYgPSBmZHQzMl90b19jcHUocHJvcC0+bmFtZW9mZik7Cj4gLSAgICAgICAg
cmVzID0gZmR0X3Byb3BlcnR5KGZkdCwgZmR0X3N0cmluZyhwZmR0LCBuYW1lb2ZmKSwKPiAtICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcHJvcC0+ZGF0YSwgZmR0MzJfdG9fY3B1KHByb3AtPmxl
bikpOwo+IC0gICAgICAgIGlmICggcmVzICkKPiAtICAgICAgICAgICAgcmV0dXJuIHJlczsKPiAr
Cj4gKyAgICAgICAgLyogeGVuLHJlZyBzcGVjaWZpZXMgd2hlcmUgdG8gbWFwIHRoZSBNTUlPIHJl
Z2lvbiAqLwo+ICsgICAgICAgIGlmICggZHRfcHJvcF9jbXAoInhlbixyZWciLCBmZHRfc3RyaW5n
KHBmZHQsIG5hbWVvZmYpKSA9PSAwICkKClRoZSBjb25zdHJ1Y3QgZmR0X3N0cmluZyhwZmR0LCBu
YW1lb2ZmKSBpcyB1c2VkIHF1aXRlIG9mdGVuIHdpdGhpbiB0aGlzIApmdW5jdGlvbi4gSSB0aGlu
ayBpdCBpcyB3YXJyYW50IGZvciBhIGxvY2FsIHZhcmlhYmxlLgoKPiArICAgICAgICB7Cj4gKyAg
ICAgICAgICAgIHBhZGRyX3QgbXN0YXJ0LCBzaXplLCBnc3RhcnQ7Cj4gKyAgICAgICAgICAgIGNl
bGwgPSAoY29uc3QgX19iZTMyICopcHJvcC0+ZGF0YTsKPiArICAgICAgICAgICAgbGVuID0gZmR0
MzJfdG9fY3B1KHByb3AtPmxlbikgLwo+ICsgICAgICAgICAgICAgICAgICAoKGFkZHJlc3NfY2Vs
bHMgKiAyICsgc2l6ZV9jZWxscykgKiBzaXplb2YodWludDMyX3QpKTsKPiArCj4gKyAgICAgICAg
ICAgIGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKQo+ICsgICAgICAgICAgICB7Cj4gKyAgICAg
ICAgICAgICAgICBkZXZpY2VfdHJlZV9nZXRfcmVnKCZjZWxsLCBhZGRyZXNzX2NlbGxzLCBzaXpl
X2NlbGxzLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbXN0YXJ0LCAm
c2l6ZSk7Cj4gKyAgICAgICAgICAgICAgICBnc3RhcnQgPSBkdF9uZXh0X2NlbGwoYWRkcmVzc19j
ZWxscywgJmNlbGwpOwo+ICsKPiArICAgICAgICAgICAgICAgIHJlcyA9IGd1ZXN0X3BoeXNtYXBf
YWRkX2VudHJ5KGtpbmZvLT5kLCBnYWRkcl90b19nZm4oZ3N0YXJ0KSwKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hZGRyX3RvX21mbihtc3RhcnQpLAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X29yZGVy
X2Zyb21fYnl0ZXMoc2l6ZSksCgpndWVzdF9waHlzbWFwX2FkZF9lbnRyeSBpcyBkZWZpbml0ZWx5
IG5vdCB0aGUgY29ycmVjdCBmdW5jdGlvbiB0byBjYWxsLiAKSXQgdGFrZXMgYW4gb3JkZXIgYW5k
IG1lYW5zIHRoYXQgaWYgdGhlIHVzZXIgYXNrIHRvIG1hcCAxMktCLCBpdCB3aWxsIAplZmZlY3Rp
dmVseSBtYXAgMTZLQi4gWW91IHdhbnQgdG8gdXNlIG1hcF9yZWdpb25zX3AybXQgYXMgdGhpcyBp
cyBkb25lIApldmVyeXdoZXJlIGVsc2UgZm9yIG1hcHBpbmcgTU1JTyByZWdpb25zLgoKSXQgYWxz
byByYWlzZXMgdGhlIHF1ZXN0aW9uIHdoYXQgc2hvdWxkIHdlIGRvIGlmIHRoZSBzaXplIHBhc3Nl
ZCBpbiBub3QgCnBhZ2UtYWxpZ25lZD8gU2hhbGwgd2UganVzdCBibGluZGx5IHJvdW5kIHVwL2Rv
d24/IFNob3VsZCB3ZSB3YXJuPwoKVGhpcyB3YXMgbm90IGltcG9ydGFudCBmb3IgZG9tMCwgYnV0
IGlzIHBvdGVudGlhbGx5IGNyaXRpY2FsIGZvciBkb21VIGFzIAp5b3UgbWF5IGhhcHBlbiB0byBp
bmFkdmVydGVudGx5IHRvIGV4cG9ydCBtb3JlIHRoYW4geW91IGhvcGUgdG8gYSBndWVzdC4KCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMm1fbW1pb19k
aXJlY3RfZGV2KTsKPiArICAgICAgICAgICAgICAgIGlmICggcmVzIDwgMCApCj4gKyAgICAgICAg
ICAgICAgICB7Cj4gKyAgICAgICAgICAgICAgICAgICAgZHByaW50ayhYRU5MT0dfRVJSLAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIkZhaWxlZCB0byBtYXAgJSJQUklwYWRkciIgdG8g
dGhlIGd1ZXN0IGF0JSJQUklwYWRkciJcbiIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBtc3RhcnQsIGdzdGFydCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1FRkFVTFQ7
Cj4gKyAgICAgICAgICAgICAgICB9Cj4gKyAgICAgICAgICAgIH0KPiArICAgICAgICB9Cj4gKyAg
ICAgICAgLyoKPiArICAgICAgICAgKiB4ZW4scGF0aCBzcGVjaWZpZXMgdGhlIGNvcnJlc3BvbmRp
bmcgbm9kZSBpbiB0aGUgaG9zdCBEVC4KPiArICAgICAgICAgKiBCb3RoIGludGVycnVwdCBtYXBw
aW5ncyBhbmQgSU9NTVUgc2V0dGluZ3MgYXJlIGJhc2VkIG9uIGl0LAo+ICsgICAgICAgICAqIGFz
IHRoZXkgYXJlIGRvbmUgYmFzZWQgb24gdGhlIGNvcnJlc3BvbmRpbmcgaG9zdCBEVCBub2RlLgo+
ICsgICAgICAgICAqLwo+ICsgICAgICAgIGVsc2UgaWYgKCBkdF9wcm9wX2NtcCgieGVuLHBhdGgi
LCBmZHRfc3RyaW5nKHBmZHQsIG5hbWVvZmYpKSA9PSAwICkKPiArICAgICAgICB7Cj4gKyAgICAg
ICAgICAgIG5vZGUgPSBkdF9maW5kX25vZGVfYnlfcGF0aChwcm9wLT5kYXRhKTsKPiArICAgICAg
ICAgICAgaWYgKCBub2RlID09IE5VTEwgKQo+ICsgICAgICAgICAgICB7Cj4gKyAgICAgICAgICAg
ICAgICBkcHJpbnRrKFhFTkxPR19FUlIsICJDb3VsZG4ndCBmaW5kIG5vZGUgJXMgaW4gaG9zdF9k
dCFcbiIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgIChjaGFyICopcHJvcC0+ZGF0YSk7Cj4g
KyAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiArICAgICAgICAgICAgfQo+ICsKPiAr
ICAgICAgICAgICAgcmVzID0gaW9tbXVfYXNzaWduX2R0X2RldmljZShraW5mby0+ZCwgbm9kZSk7
Cj4gKyAgICAgICAgICAgIGlmICggcmVzIDwgMCApCj4gKyAgICAgICAgICAgICAgICByZXR1cm4g
cmVzOwo+ICsKPiArICAgICAgICAgICAgcmVzID0gaGFuZGxlX2RldmljZV9pbnRlcnJ1cHRzKGtp
bmZvLT5kLCBub2RlLCB0cnVlKTsKPiArICAgICAgICAgICAgaWYgKCByZXMgPCAwICkKPiArICAg
ICAgICAgICAgICAgIHJldHVybiByZXM7Cj4gKyAgICAgICAgfQo+ICsgICAgICAgIC8qIGNvcHkg
YWxsIG90aGVyIHByb3BlcnRpZXMgKi8KPiArICAgICAgICBlbHNlCj4gKyAgICAgICAgewo+ICsg
ICAgICAgICAgICByZXMgPSBmZHRfcHJvcGVydHkoZmR0LCBmZHRfc3RyaW5nKHBmZHQsIG5hbWVv
ZmYpLCBwcm9wLT5kYXRhLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmR0MzJf
dG9fY3B1KHByb3AtPmxlbikpOwo+ICsgICAgICAgICAgICBpZiAoIHJlcyApCj4gKyAgICAgICAg
ICAgICAgICByZXR1cm4gcmVzOwo+ICsgICAgICAgIH0KPiAgICAgICB9Cj4gICAKPiAgICAgICAv
KiBGRFRfRVJSX05PVEZPVU5EID0+IFRoZXJlIGlzIG5vIG1vcmUgcHJvcGVydGllcyBmb3IgdGhp
cyBub2RlICovCj4gCgpDaGVlcnMsCgotLSAKSnVsaWVuIEdyYWxsCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhl
bi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3Jn
L21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

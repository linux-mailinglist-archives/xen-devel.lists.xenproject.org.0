Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 3955DB2395
	for <lists+xen-devel@lfdr.de>; Fri, 13 Sep 2019 17:39:20 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i8nce-0002B4-0X; Fri, 13 Sep 2019 15:36:32 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=QaHn=XI=gmail.com=olekstysh@srs-us1.protection.inumbo.net>)
 id 1i8ncc-0002AX-JX
 for xen-devel@lists.xenproject.org; Fri, 13 Sep 2019 15:36:30 +0000
X-Inumbo-ID: 32c1ef8c-d63c-11e9-a337-bc764e2007e4
Received: from mail-lj1-x241.google.com (unknown [2a00:1450:4864:20::241])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 32c1ef8c-d63c-11e9-a337-bc764e2007e4;
 Fri, 13 Sep 2019 15:36:05 +0000 (UTC)
Received: by mail-lj1-x241.google.com with SMTP id a4so27519483ljk.8
 for <xen-devel@lists.xenproject.org>; Fri, 13 Sep 2019 08:36:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=NnYhcOj4WVqx7kgz2UhAeuVTfA16JAuWThe+EkebVLE=;
 b=uXT5t6N+nSMR/hKWgTZ/2NRTPypizCMFKYyUm++BWiDNYq+wF+hoYdOiyDmo/9vP5i
 8bGnD6uR3MsqLA9CrOlZfhzMmi9umFAiNYq8tF5m6YNA1qYqUfcba8xSkxVToeOsZB0S
 nx0gsb0fmBAa4N7lmj6sH3MEOEV1kCJkdy/9dEpDdSV4UuKmYtuRQ0rXwLoG0niVEC7r
 OGhiFVw0hGaKKmeOekDHiXkbEeFccOghVewinAS06I3iEiXbhLQ09VJOLYFzL3iwTkwE
 OvMVCz+1BL89CyQqP/YckJVWOQV7SkbS3OY/SnhazDli63u822HNa1u3mBURuE+p4CW1
 BumA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=NnYhcOj4WVqx7kgz2UhAeuVTfA16JAuWThe+EkebVLE=;
 b=l04nugmMIkzuJ8gdcL5Zw3FMJX01Xe9/bnlnpmHZnJYw6X2/5jkr2ezYP/cnIvlgyE
 7gLhqypa3cnl7YbnBLILJeC0G2+WzQcg2zOmQKOvbzLHR9G1RuPKTosRjvzNubFQ4pfk
 dO6gFzBiI8wIphD3B+UQZiX9+hPIvoD1ULeLNbcM9040INyEi00MI1YEEcmXglnwSCVz
 JTWS6KlgzkSs8z/b9t7hyzr+FK1mFs9P/oRkWxJdneI96QT40bhvE95lJum5y4+GdxS7
 BkXvgoMvhuysxd6DtAlxl6o+Vypv46L2cW7heiOBhfiCjMoo5RttoKJuINOfiY8T90FX
 2Xdg==
X-Gm-Message-State: APjAAAXn2QGJe4xfLQBeASt3Do83fUhTk9wjoFNxjkhipImfYQQlS1kM
 Uu2nNipPlVJps+qh1v22oAFAY4omhIk=
X-Google-Smtp-Source: APXvYqx6VFH4BuDdUOuIR/qW4yEfjJtUrNa5JpSaibg4jt0QyRCaJfo5dVWuUi8ho22mp7Wp0X6FYA==
X-Received: by 2002:a2e:5714:: with SMTP id l20mr30466768ljb.122.1568388964356; 
 Fri, 13 Sep 2019 08:36:04 -0700 (PDT)
Received: from otyshchenko.kyiv.epam.com (ll-74.141.223.85.sovam.net.ua.
 [85.223.141.74])
 by smtp.gmail.com with ESMTPSA id c16sm6969765lfj.8.2019.09.13.08.36.03
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
 Fri, 13 Sep 2019 08:36:03 -0700 (PDT)
From: Oleksandr Tyshchenko <olekstysh@gmail.com>
To: xen-devel@lists.xenproject.org
Date: Fri, 13 Sep 2019 18:35:15 +0300
Message-Id: <1568388917-7287-7-git-send-email-olekstysh@gmail.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1568388917-7287-1-git-send-email-olekstysh@gmail.com>
References: <1568388917-7287-1-git-send-email-olekstysh@gmail.com>
Subject: [Xen-devel] [PATCH V4 6/8] iommu/arm: Add lightweight iommu_fwspec
 support
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Oleksandr Tyshchenko <oleksandr_tyshchenko@epam.com>, julien.grall@arm.com,
 sstabellini@kernel.org, Volodymyr_Babchuk@epam.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogT2xla3NhbmRyIFR5c2hjaGVua28gPG9sZWtzYW5kcl90eXNoY2hlbmtvQGVwYW0uY29t
PgoKV2UgbmVlZCB0byBoYXZlIHNvbWUgYWJzdHJhY3Qgd2F5IHRvIGFkZCBuZXcgZGV2aWNlIHRv
IHRoZSBJT01NVQpiYXNlZCBvbiB0aGUgZ2VuZXJpYyBJT01NVSBEVCBiaW5kaW5ncyBbMV0gd2hp
Y2ggY2FuIGJlIHVzZWQgZm9yCmJvdGggRFQgKHJpZ2h0IG5vdykgYW5kIEFDUEkgKGluIGZ1dHVy
ZSkuCgpGb3IgdGhhdCByZWFzb24gd2UgY2FuIGJvcnJvdyB0aGUgaWRlYSB1c2VkIGluIExpbnV4
IHRoZXNlIGRheXMKY2FsbGVkICJpb21tdV9md3NwZWMiLiBIYXZpbmcgdGhpcyBpbiwgaXQgd2ls
bCBiZSBwb3NzaWJsZQp0byBjb25maWd1cmUgSU9NTVUgbWFzdGVyIGludGVyZmFjZXMgb2YgdGhl
IGRldmljZSAoZGV2aWNlIElEcykKZnJvbSBhIHNpbmdsZSBjb21tb24gcGxhY2UgYW5kIGF2b2lk
IGtlZXBpbmcgYWxtb3N0IGlkZW50aWNhbCBsb29rLXVwCmltcGxlbWVudGF0aW9ucyBpbiBlYWNo
IElPTU1VIGRyaXZlci4KClRoZXJlIGlzIG5vIG5lZWQgdG8gcG9ydCB0aGUgd2hvbGUgaW1wbGVt
ZW50YXRpb24gb2YgImlvbW11X2Z3c3BlYyIKdG8gWGVuLCB3ZSBjb3VsZCwgcHJvYmFibHksIGVu
ZCB1cCB3aXRoIGEgbXVjaCBzaW1wbGVyIHNvbHV0aW9uLApzb21lICJzdHJpcHBlZCBkb3duIiB2
ZXJzaW9uIHdoaWNoIGZpdHMgb3VyIHJlcXVpcmVtZW50cy4KClNvLCB0aGlzIHBhdGNoIGFkZHMg
dGhlIGZvbGxvd2luZzoKMS4gQSBjb21tb24gc3RydWN0dXJlICJpb21tdV9md3NwZWMiIHRvIGhv
bGQgdGhlIHRoZSBwZXItZGV2aWNlCiAgIGZpcm13YXJlIGRhdGEKMi4gTmV3IG1lbWJlciAiaW9t
bXVfZndzcGVjIiBvZiBzdHJ1Y3QgZGV2aWNlCjMuIEZ1bmN0aW9ucy9oZWxwZXJzIHRvIGRlYWwg
d2l0aCAiZGV2LT5pb21tdV9md3NwZWMiCgpJdCBzaG91bGQgYmUgbm90ZWQgdGhhdCBpbiBjb21w
YXJpc29uIG9mIHRoZSBvcmlnaW5hbCAiaW9tbXVfZndzcGVjIgpYZW4ncyB2YXJpYW50IGRvZXNu
J3QgY29udGFpbiBzb21lIGZpZWxkcywgd2hpY2ggYXJlIG5vdCByZWFsbHkKbmVlZGVkIGF0IHRo
ZSBtb21lbnQgKG9wcywgZmxhZykgYW5kICJpb21tdV9md25vZGUiIGZpZWxkIHdhcyByZXBsYWNl
ZApieSAiaW9tbXVfZGV2IiB0byBhdm9pZCBwb3J0aW5nIGEgbG90IG9mIGNvZGUgKHRvIHN1cHBv
cnQgImZ3bm9kZV9oYW5kbGUiKQp3aXRoIGxpdHRsZSBiZW5lZml0LgoKVGhlICJpb21tdV9md3Nw
ZWMiIHN1cHBvcnQgaXMgYmFzZWQgb24gdGhlIExpbnV4J3MgY29tbWl0OgpmNzRjMmJiOTg3NzZl
MmRlNTA4ZjRkNjA3Y2Q1MTk4NzMwNjUxMThlICJMaW51eCA1LjMtcmM4IgoKU3Vic2VxdWVudCBw
YXRjaGVzIHdpbGwgdXNlIG9mIHRoYXQgc3VwcG9ydC4KClsxXSBodHRwczovL3d3dy5rZXJuZWwu
b3JnL2RvYy9Eb2N1bWVudGF0aW9uL2RldmljZXRyZWUvYmluZGluZ3MvaW9tbXUvaW9tbXUudHh0
CgpTaWduZWQtb2ZmLWJ5OiBPbGVrc2FuZHIgVHlzaGNoZW5rbyA8b2xla3NhbmRyX3R5c2hjaGVu
a29AZXBhbS5jb20+CkNDOiBKdWxpZW4gR3JhbGwgPGp1bGllbi5ncmFsbEBhcm0uY29tPgoKLS0t
CkNoYW5nZXMgVjMgLT4gVjQ6CiAgICAtIG1vZGlmaWVkIGlvbW11X2Z3c3BlY19hZGRfaWRzKCkg
dG8gdXNlIG5ldyBpbXBsZW1lbnRhdGlvbiBvZgogICAgICB4cmVhbGxvY19mbGV4X3N0cnVjdCgp
CiAgICAtIG1lbnRpb25lZCBleGFjdCBMaW51eCB2ZXJzaW9uIHdlIGFyZSBiYXNlZCBvbgogICAg
LSBmaXhlZCBHcmFtbWF0aWNhbCBlcnJvcgoKQ2hhbmdlcyBWMiAtPiBWMzoKICAgIC0gYWRkZWQg
Q29weXJpZ2h0IGZyb20gTGludXgKICAgIC0gb3JkZXJlZCB0aGUgaGVhZGVycyBhbHBoYWJldGlj
YWxseQogICAgLSByZW1vdmVkIGNoZWNrIGZvciBub3QgYSBOVUxMIGJlZm9yZSBjYWxsaW5nIHhm
cmVlKCkKICAgIC0gdXNlZCB1bnNpZ25lZCBmb3IgdmFyaWFibGVzIHdoaWNoIGNhbid0IGJlIG5l
Z2F0aXZlCiAgICAtIHJlbW92ZWQgI2luY2x1ZGUgPGFzbS9pb21tdV9md3NwZWMuaD4gZnJvbSBp
b21tdS5oCiAgICAtIGFkZGVkIGNoZWNrIHRvIGlvbW11X2Z3c3BlY19pbml0KCkgdG8gbm90IGFs
bG93IG92ZXJyaWRpbmcKICAgIC0gY2xhcmlmaWVkIGNvbW1lbnRzIGluIGNvZGUKICAgIC0gbW9k
aWZpZWQgaW9tbXVfZndzcGVjX2FkZF9pZHMoKSB0byB1c2UgdHlwZS1zYWZlIHhyZWFsbG9jX2Zs
ZXhfc3RydWN0KCkKLS0tCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0vTWFrZWZpbGUgICAg
ICAgfCAgMiArLQogeGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYXJtL2lvbW11X2Z3c3BlYy5jIHwg
OTMgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiB4ZW4vaW5jbHVkZS9hc20tYXJtL2Rl
dmljZS5oICAgICAgICAgICAgICAgfCAgMSArCiB4ZW4vaW5jbHVkZS9hc20tYXJtL2lvbW11X2Z3
c3BlYy5oICAgICAgICAgfCA2OCArKysrKysrKysrKysrKysrKysrKysrCiA0IGZpbGVzIGNoYW5n
ZWQsIDE2MyBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQg
eGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYXJtL2lvbW11X2Z3c3BlYy5jCiBjcmVhdGUgbW9kZSAx
MDA2NDQgeGVuL2luY2x1ZGUvYXNtLWFybS9pb21tdV9md3NwZWMuaAoKZGlmZiAtLWdpdCBhL3hl
bi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FybS9NYWtlZmlsZSBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL2FybS9NYWtlZmlsZQppbmRleCA0YWJiODdhLi41ZmJhZDQ1IDEwMDY0NAotLS0gYS94ZW4v
ZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0vTWFrZWZpbGUKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Ro
cm91Z2gvYXJtL01ha2VmaWxlCkBAIC0xLDIgKzEsMiBAQAotb2JqLXkgKz0gaW9tbXUubyBpb21t
dV9oZWxwZXJzLm8KK29iai15ICs9IGlvbW11Lm8gaW9tbXVfaGVscGVycy5vIGlvbW11X2Z3c3Bl
Yy5vCiBvYmotJChDT05GSUdfQVJNX1NNTVUpICs9IHNtbXUubwpkaWZmIC0tZ2l0IGEveGVuL2Ry
aXZlcnMvcGFzc3Rocm91Z2gvYXJtL2lvbW11X2Z3c3BlYy5jIGIveGVuL2RyaXZlcnMvcGFzc3Ro
cm91Z2gvYXJtL2lvbW11X2Z3c3BlYy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAw
MDAuLjcwNDZmYWYKLS0tIC9kZXYvbnVsbAorKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9h
cm0vaW9tbXVfZndzcGVjLmMKQEAgLTAsMCArMSw5MyBAQAorLyoKKyAqIHhlbi9kcml2ZXJzL3Bh
c3N0aHJvdWdoL2FybS9pb21tdV9md3NwZWMuYworICoKKyAqIENvbnRhaW5zIGZ1bmN0aW9ucyB0
byBtYWludGFpbiBwZXItZGV2aWNlIGZpcm13YXJlIGRhdGEKKyAqCisgKiBCYXNlZCBvbiBMaW51
eCdzIGlvbW11X2Z3c3BlYyBzdXBwb3J0IHlvdSBjYW4gZmluZCBhdDoKKyAqICAgIGRyaXZlcnMv
aW9tbXUvaW9tbXUuYworICoKKyAqIENvcHlyaWdodCAoQykgMjAwNy0yMDA4IEFkdmFuY2VkIE1p
Y3JvIERldmljZXMsIEluYy4KKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTkgRVBBTSBTeXN0ZW1z
IEluYy4KKyAqCisgKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRp
c3RyaWJ1dGUgaXQgYW5kL29yCisgKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIGFuZCBjb25k
aXRpb25zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMKKyAqIExpY2Vuc2UsIHZlcnNpb24gMiwg
YXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uCisgKgorICogVGhp
cyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2Vm
dWwsCisgKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGll
ZCB3YXJyYW50eSBvZgorICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElD
VUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUKKyAqIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9y
IG1vcmUgZGV0YWlscy4KKyAqCisgKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9m
IHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMKKyAqIExpY2Vuc2UgYWxvbmcgd2l0aCB0aGlzIHByb2dy
YW07IElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KKyAqLworCisj
aW5jbHVkZSA8eGVuL2lvbW11Lmg+CisjaW5jbHVkZSA8eGVuL2xpYi5oPgorCisjaW5jbHVkZSA8
YXNtL2RldmljZS5oPgorI2luY2x1ZGUgPGFzbS9pb21tdV9md3NwZWMuaD4KKworaW50IGlvbW11
X2Z3c3BlY19pbml0KHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZSAqaW9tbXVfZGV2
KQoreworICAgIHN0cnVjdCBpb21tdV9md3NwZWMgKmZ3c3BlYyA9IGRldl9pb21tdV9md3NwZWNf
Z2V0KGRldik7CisKKyAgICBpZiAoIGZ3c3BlYyApCisgICAgeworICAgICAgICAvKiBXZSBleHBl
Y3QgdGhlIGRldmljZSB0byBiZSBwcm90ZWN0ZWQgYnkgb25seSBvbmUgSU9NTVUuICovCisgICAg
ICAgIGlmICggZndzcGVjLT5pb21tdV9kZXYgIT0gaW9tbXVfZGV2ICkKKyAgICAgICAgICAgIHJl
dHVybiAtRUlOVkFMOworCisgICAgICAgIHJldHVybiAwOworICAgIH0KKworICAgIGZ3c3BlYyA9
IHh6YWxsb2Moc3RydWN0IGlvbW11X2Z3c3BlYyk7CisgICAgaWYgKCAhZndzcGVjICkKKyAgICAg
ICAgcmV0dXJuIC1FTk9NRU07CisKKyAgICBmd3NwZWMtPmlvbW11X2RldiA9IGlvbW11X2RldjsK
KyAgICBkZXZfaW9tbXVfZndzcGVjX3NldChkZXYsIGZ3c3BlYyk7CisKKyAgICByZXR1cm4gMDsK
K30KKwordm9pZCBpb21tdV9md3NwZWNfZnJlZShzdHJ1Y3QgZGV2aWNlICpkZXYpCit7CisgICAg
c3RydWN0IGlvbW11X2Z3c3BlYyAqZndzcGVjID0gZGV2X2lvbW11X2Z3c3BlY19nZXQoZGV2KTsK
KworICAgIHhmcmVlKGZ3c3BlYyk7CisgICAgZGV2X2lvbW11X2Z3c3BlY19zZXQoZGV2LCBOVUxM
KTsKK30KKworaW50IGlvbW11X2Z3c3BlY19hZGRfaWRzKHN0cnVjdCBkZXZpY2UgKmRldiwgdWlu
dDMyX3QgKmlkcywKKyAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgbnVtX2lk
cykKK3sKKyAgICBzdHJ1Y3QgaW9tbXVfZndzcGVjICpmd3NwZWMgPSBkZXZfaW9tbXVfZndzcGVj
X2dldChkZXYpOworICAgIHVuc2lnbmVkIGludCBpOworCisgICAgaWYgKCAhZndzcGVjICkKKyAg
ICAgICAgcmV0dXJuIC1FSU5WQUw7CisKKyAgICBmd3NwZWMgPSB4cmVhbGxvY19mbGV4X3N0cnVj
dChmd3NwZWMsIGlkcywgZndzcGVjLT5udW1faWRzICsgbnVtX2lkcyk7CisgICAgaWYgKCAhZndz
cGVjICkKKyAgICAgICAgcmV0dXJuIC1FTk9NRU07CisKKyAgICBkZXZfaW9tbXVfZndzcGVjX3Nl
dChkZXYsIGZ3c3BlYyk7CisKKyAgICBmb3IgKCBpID0gMDsgaSA8IG51bV9pZHM7IGkrKyApCisg
ICAgICAgIGZ3c3BlYy0+aWRzW2Z3c3BlYy0+bnVtX2lkcyArIGldID0gaWRzW2ldOworCisgICAg
ZndzcGVjLT5udW1faWRzICs9IG51bV9pZHM7CisKKyAgICByZXR1cm4gMDsKK30KKworLyoKKyAq
IExvY2FsIHZhcmlhYmxlczoKKyAqIG1vZGU6IEMKKyAqIGMtZmlsZS1zdHlsZTogIkJTRCIKKyAq
IGMtYmFzaWMtb2Zmc2V0OiA0CisgKiBpbmRlbnQtdGFicy1tb2RlOiBuaWwKKyAqIEVuZDoKKyAq
LwpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLWFybS9kZXZpY2UuaCBiL3hlbi9pbmNsdWRl
L2FzbS1hcm0vZGV2aWNlLmgKaW5kZXggZWUxYzNiYy4uZWU3Y2ZmMiAxMDA2NDQKLS0tIGEveGVu
L2luY2x1ZGUvYXNtLWFybS9kZXZpY2UuaAorKysgYi94ZW4vaW5jbHVkZS9hc20tYXJtL2Rldmlj
ZS5oCkBAIC0xOCw2ICsxOCw3IEBAIHN0cnVjdCBkZXZpY2UKICAgICBzdHJ1Y3QgZHRfZGV2aWNl
X25vZGUgKm9mX25vZGU7IC8qIFVzZWQgYnkgZHJpdmVycyBpbXBvcnRlZCBmcm9tIExpbnV4ICov
CiAjZW5kaWYKICAgICBzdHJ1Y3QgZGV2X2FyY2hkYXRhIGFyY2hkYXRhOworICAgIHN0cnVjdCBp
b21tdV9md3NwZWMgKmlvbW11X2Z3c3BlYzsgLyogcGVyLWRldmljZSBJT01NVSBpbnN0YW5jZSBk
YXRhICovCiB9OwogCiB0eXBlZGVmIHN0cnVjdCBkZXZpY2UgZGV2aWNlX3Q7CmRpZmYgLS1naXQg
YS94ZW4vaW5jbHVkZS9hc20tYXJtL2lvbW11X2Z3c3BlYy5oIGIveGVuL2luY2x1ZGUvYXNtLWFy
bS9pb21tdV9md3NwZWMuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi44Y2U0
ZGExCi0tLSAvZGV2L251bGwKKysrIGIveGVuL2luY2x1ZGUvYXNtLWFybS9pb21tdV9md3NwZWMu
aApAQCAtMCwwICsxLDY4IEBACisvKgorICogeGVuL2luY2x1ZGUvYXNtLWFybS9pb21tdV9md3Nw
ZWMuaAorICoKKyAqIENvbnRhaW5zIGEgY29tbW9uIHN0cnVjdHVyZSB0byBob2xkIHRoZSBwZXIt
ZGV2aWNlIGZpcm13YXJlIGRhdGEgYW5kCisgKiBkZWNsYXJhdGlvbiBvZiBmdW5jdGlvbnMgdXNl
ZCB0byBtYWludGFpbiB0aGF0IGRhdGEKKyAqCisgKiBCYXNlZCBvbiBMaW51eCdzIGlvbW11X2Z3
c3BlYyBzdXBwb3J0IHlvdSBjYW4gZmluZCBhdDoKKyAqICAgIGluY2x1ZGUvbGludXgvaW9tbXUu
aAorICoKKyAqIENvcHlyaWdodCAoQykgMjAwNy0yMDA4IEFkdmFuY2VkIE1pY3JvIERldmljZXMs
IEluYy4KKyAqCisgKiBDb3B5cmlnaHQgKEMpIDIwMTkgRVBBTSBTeXN0ZW1zIEluYy4KKyAqCisg
KiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQg
YW5kL29yCisgKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG9mIHRo
ZSBHTlUgR2VuZXJhbCBQdWJsaWMKKyAqIExpY2Vuc2UsIHZlcnNpb24gMiwgYXMgcHVibGlzaGVk
IGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uCisgKgorICogVGhpcyBwcm9ncmFtIGlz
IGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCisgKiBidXQg
V0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBv
ZgorICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NF
LiAgU2VlIHRoZSBHTlUKKyAqIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWls
cy4KKyAqCisgKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2Vu
ZXJhbCBQdWJsaWMKKyAqIExpY2Vuc2UgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IElmIG5vdCwg
c2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KKyAqLworCisjaWZuZGVmIF9fQVJD
SF9BUk1fSU9NTVVfRldTUEVDX0hfXworI2RlZmluZSBfX0FSQ0hfQVJNX0lPTU1VX0ZXU1BFQ19I
X18KKworLyogcGVyLWRldmljZSBJT01NVSBpbnN0YW5jZSBkYXRhICovCitzdHJ1Y3QgaW9tbXVf
ZndzcGVjIHsKKyAgICAvKiB0aGlzIGRldmljZSdzIElPTU1VICovCisgICAgc3RydWN0IGRldmlj
ZSAqaW9tbXVfZGV2OworICAgIC8qIElPTU1VIGRyaXZlciBwcml2YXRlIGRhdGEgZm9yIHRoaXMg
ZGV2aWNlICovCisgICAgdm9pZCAqaW9tbXVfcHJpdjsKKyAgICAvKiBudW1iZXIgb2YgYXNzb2Np
YXRlZCBkZXZpY2UgSURzICovCisgICAgdW5zaWduZWQgaW50IG51bV9pZHM7CisgICAgLyogSURz
IHdoaWNoIHRoaXMgZGV2aWNlIG1heSBwcmVzZW50IHRvIHRoZSBJT01NVSAqLworICAgIHVpbnQz
Ml90IGlkc1sxXTsKK307CisKK2ludCBpb21tdV9md3NwZWNfaW5pdChzdHJ1Y3QgZGV2aWNlICpk
ZXYsIHN0cnVjdCBkZXZpY2UgKmlvbW11X2Rldik7Cit2b2lkIGlvbW11X2Z3c3BlY19mcmVlKHN0
cnVjdCBkZXZpY2UgKmRldik7CitpbnQgaW9tbXVfZndzcGVjX2FkZF9pZHMoc3RydWN0IGRldmlj
ZSAqZGV2LCB1aW50MzJfdCAqaWRzLAorICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVk
IGludCBudW1faWRzKTsKKworc3RhdGljIGlubGluZSBzdHJ1Y3QgaW9tbXVfZndzcGVjICpkZXZf
aW9tbXVfZndzcGVjX2dldChzdHJ1Y3QgZGV2aWNlICpkZXYpCit7CisgICAgcmV0dXJuIGRldi0+
aW9tbXVfZndzcGVjOworfQorCitzdGF0aWMgaW5saW5lIHZvaWQgZGV2X2lvbW11X2Z3c3BlY19z
ZXQoc3RydWN0IGRldmljZSAqZGV2LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCBpb21tdV9md3NwZWMgKmZ3c3BlYykKK3sKKyAgICBkZXYtPmlvbW11X2Z3
c3BlYyA9IGZ3c3BlYzsKK30KKworI2VuZGlmIC8qIF9fQVJDSF9BUk1fSU9NTVVfRldTUEVDX0hf
XyAqLworCisvKgorICogTG9jYWwgdmFyaWFibGVzOgorICogbW9kZTogQworICogYy1maWxlLXN0
eWxlOiAiQlNEIgorICogYy1iYXNpYy1vZmZzZXQ6IDQKKyAqIHRhYi13aWR0aDogNAorICogaW5k
ZW50LXRhYnMtbW9kZTogbmlsCisgKiBFbmQ6CisgKi8KLS0gCjIuNy40CgoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlz
dApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

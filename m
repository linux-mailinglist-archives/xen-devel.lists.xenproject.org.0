Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B81E0BEAF4
	for <lists+xen-devel@lfdr.de>; Thu, 26 Sep 2019 05:47:17 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iDKhc-0003M5-LT; Thu, 26 Sep 2019 03:44:24 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=9/1y=XV=kernel.org=sstabellini@srs-us1.protection.inumbo.net>)
 id 1iDKhb-0003Lo-E7
 for xen-devel@lists.xen.org; Thu, 26 Sep 2019 03:44:23 +0000
X-Inumbo-ID: ed315fd8-e00f-11e9-9640-12813bfff9fa
Received: from mail.kernel.org (unknown [198.145.29.99])
 by localhost (Halon) with ESMTPS
 id ed315fd8-e00f-11e9-9640-12813bfff9fa;
 Thu, 26 Sep 2019 03:44:22 +0000 (UTC)
Received: from localhost (c-67-164-102-47.hsd1.ca.comcast.net [67.164.102.47])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256
 bits)) (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 462DB207FF;
 Thu, 26 Sep 2019 03:44:21 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=default; t=1569469461;
 bh=G6hWk+LEaaF/AuIPTUqVdDcAiF6P6m0La1Kl6J0woQ8=;
 h=Date:From:To:cc:Subject:In-Reply-To:References:From;
 b=ct5YFBOjJPqz4clcEBbcfWxe0/U2bgtkvgfRQuVTQyFcJyYqd4VLvFM87LkFcTS+e
 3EiH8FgGdthNpEtqRAztDdH1DQ3wjaaJkNTPzf2teKleGbA5Zzj7lzVLyCC1eA7V4G
 4DDlv1bwQCZ3KnpJ7CWw9+2tb0+HZGU1aRPw2ZOc=
Date: Wed, 25 Sep 2019 20:44:19 -0700 (PDT)
From: Stefano Stabellini <sstabellini@kernel.org>
X-X-Sender: sstabellini@sstabellini-ThinkPad-T480s
To: Julien Grall <Julien.Grall@arm.com>
In-Reply-To: <2b629d21-8eb4-23c2-d3be-087da64c399c@arm.com>
Message-ID: <alpine.DEB.2.21.1909252043210.14358@sstabellini-ThinkPad-T480s>
References: <alpine.DEB.2.21.1909251146261.24909@sstabellini-ThinkPad-T480s>
 <20190925184924.21691-4-sstabellini@kernel.org>
 <2b629d21-8eb4-23c2-d3be-087da64c399c@arm.com>
User-Agent: Alpine 2.21 (DEB 202 2017-01-01)
MIME-Version: 1.0
Subject: Re: [Xen-devel] [PATCH v5 4/8] xen/arm: copy dtb fragment to guest
 dtb
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <stefanos@xilinx.com>,
 Stefano Stabellini <sstabellini@kernel.org>,
 "andrii_anisov@epam.com" <andrii_anisov@epam.com>,
 Achin Gupta <Achin.Gupta@arm.com>,
 "xen-devel@lists.xen.org" <xen-devel@lists.xen.org>, nd <nd@arm.com>,
 "Volodymyr_Babchuk@epam.com" <Volodymyr_Babchuk@epam.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gV2VkLCAyNSBTZXAgMjAxOSwgSnVsaWVuIEdyYWxsIHdyb3RlOgo+IE9uIDI1LzA5LzIwMTkg
MTk6NDksIFN0ZWZhbm8gU3RhYmVsbGluaSB3cm90ZToKPiA+IFJlYWQgdGhlIGR0YiBmcmFnbWVu
dCBjb3JyZXNwb25kaW5nIHRvIGEgcGFzc3Rocm91Z2ggZGV2aWNlIGZyb20gbWVtb3J5Cj4gPiBh
dCB0aGUgbG9jYXRpb24gcmVmZXJyZWQgdG8gYnkgdGhlICJtdWx0aWJvb3QsZGV2aWNlLXRyZWUi
IGNvbXBhdGlibGUKPiA+IG5vZGUuCj4gPiAKPiA+IEFkZCBhIG5ldyBmaWVsZCBuYW1lZCBkdGJf
Ym9vdG1vZHVsZSB0byBzdHJ1Y3Qga2VybmVsX2luZm8gdG8ga2VlcCB0cmFjawo+ID4gb2YgdGhl
IGR0YiBmcmFnbWVudCBsb2NhdGlvbi4KPiA+IAo+ID4gQ29weSB0aGUgZnJhZ21lbnQgdG8gdGhl
IGd1ZXN0IGR0YiAob25seSAvYWxpYXNlcyBhbmQgL3Bhc3N0aHJvdWdoKS4KPiA+IAo+ID4gU2V0
IGtpbmZvLT5ndWVzdF9waGFuZGxlX2dpYyBiYXNlZCBvbiB0aGUgcGhhbmRsZSBvZiB0aGUgc3Bl
Y2lhbCAiL2dpYyIKPiA+IG5vZGUgaW4gdGhlIGRldmljZSB0cmVlIGZyYWdtZW50LiAiL2dpYyIg
aXMgYSBkdW1teSBub2RlIGluIHRoZSBkdGIKPiA+IGZyYWdtZW50IHRoYXQgcmVwcmVzZW50cyB0
aGUgZ2ljIGludGVycnVwdCBjb250cm9sbGVyLiBPdGhlciBwcm9wZXJ0aWVzCj4gPiBpbiB0aGUg
ZHRiIGZyYWdtZW50IG1pZ2h0IHJlZmVyIHRvIGl0IChmb3IgaW5zdGFuY2UgaW50ZXJydXB0LXBh
cmVudCBvZgo+ID4gYSBkZXZpY2Ugbm9kZSkuIFdlIHJldXNlIHRoZSBwaGFuZGxlIG9mICIvZ2lj
IiBmcm9tIHRoZSBkdGIgZnJhZ21lbnQgYXMKPiA+IHRoZSBwaGFuZGxlIG9mIHRoZSBmdWxsIEdJ
QyBub2RlIHRoYXQgd2lsbCBiZSBjcmVhdGVkIGZvciB0aGUgZ3Vlc3QKPiA+IGRldmljZSB0cmVl
LiBUaGF0IHdheSwgd2hlbiB3ZSBjb3B5IHByb3BlcnRpZXMgZnJvbSB0aGUgZGV2aWNlIHRyZWUK
PiA+IGZyYWdtZW50IHRvIHRoZSBkb21VIGRldmljZSB0cmVlIHRoZSBsaW5rcyByZW1haW4gdW5i
cm9rZW4uCj4gPiAKPiA+IFNvbWUgb2YgdGhlIGNvZGUgYmVsb3cgaXMgdGFrZW4gZnJvbSB0b29s
cy9saWJ4bC9saWJ4bF9hcm0uYy4gTm90ZSB0aGF0Cj4gPiBpdCBpcyBPSyB0byB0YWtlIExHUEwg
Mi4xIGNvZGUgYW5kIGluY2x1ZGluZyBpdCBpbnRvIGEgR1BMdjIgY29kZSBiYXNlLgo+ID4gVGhl
IHJlc3VsdCBpcyBHUEx2MiBjb2RlLgo+ID4gCj4gPiBTaWduZWQtb2ZmLWJ5OiBTdGVmYW5vIFN0
YWJlbGxpbmkgPHN0ZWZhbm9zQHhpbGlueC5jb20+Cj4gPiAKPiA+IC0tLS0KPiA+IENoYW5nZXMg
aW4gdjU6Cj4gPiAtIGNvZGUgc3R5bGUKPiA+IC0gaW4tY29kZSBjb21tZW50Cj4gPiAtIHJlbW92
ZSBkZXB0aCBwYXJhbWV0ZXIgZnJvbSBzY2FuX3BmZHRfbm9kZQo+ID4gLSBmb3IgaW5zdGVhZCBv
ZiBsb29wIGluIGRvbWFpbl9oYW5kbGVfZHRiX2Jvb3Rtb2R1bGUKPiA+IC0gbW92ZSAiZ2ljIiBj
aGVjayB0byBkb21haW5faGFuZGxlX2R0Yl9ib290bW9kdWxlCj4gPiAtIGFkZCBjaGVja19wYXJ0
aWFsX2ZkdAo+ID4gLSB1c2UgRFRfUk9PVF9OT0RFX0FERFIvU0laRV9DRUxMU19ERUZBVUxUCj4g
PiAtIGFkZCBzY2FuX3Bhc3N0aHJvdWdoX3Byb3AgcGFyYW1ldGVyLCBzZXQgaXQgdG8gZmFsc2Ug
Zm9yICIvYWxpYXNlcyIKPiA+IAo+ID4gQ2hhbmdlcyBpbiB2NDoKPiA+IC0gdXNlIHJlY3Vyc2lv
biBpbiB0aGUgaW1wbGVtZW50YXRpb24KPiA+IC0gcmVuYW1lIGhhbmRsZV9wcm9wZXJ0aWVzIHRv
IGhhbmRsZV9wcm9wX3BmZHQKPiA+IC0gcmVuYW1lIHNjYW5fcHRfbm9kZSB0byBzY2FuX3BmZHRf
bm9kZQo+ID4gLSBwYXNzIGtpbmZvIHRvIGhhbmRsZV9wcm9wZXJ0aWVzCj4gPiAtIHVzZSB1aW50
MzJfdCBpbnN0ZWFkIG9mIHUzMgo+ID4gLSByZW5hbWUgciB0byByZXMKPiA+IC0gYWRkICJwYXNz
dGhyb3VnaCIgYW5kICJhbGlhc2VzIiBjaGVjawo+ID4gLSBhZGQgYSBuYW1lID09IE5VTEwgY2hl
Y2sKPiA+IC0gY29kZSBzdHlsZQo+ID4gLSBtb3ZlIERUQiBmcmFnbWVudCBzY2FubmluZyBlYXJs
aWVyLCBiZWZvcmUgRG9tVSBHSUMgbm9kZSBjcmVhdGlvbgo+ID4gLSBzZXQgZ3Vlc3RfcGhhbmRs
ZV9naWMgYmFzZWQgb24gIi9naWMiCj4gPiAtIGluLWNvZGUgY29tbWVudAo+ID4gCj4gPiBDaGFu
Z2VzIGluIHYzOgo+ID4gLSBzd2l0Y2ggdG8gdXNpbmcgZGV2aWNlX3RyZWVfZm9yX2VhY2hfbm9k
ZSBmb3IgdGhlIGNvcHkKPiA+IAo+ID4gQ2hhbmdlcyBpbiB2MjoKPiA+IC0gYWRkIGEgbm90ZSBh
Ym91dCB0aGUgY29kZSBjb21pbmcgZnJvbSBsaWJ4bCBpbiB0aGUgY29tbWl0IG1lc3NhZ2UKPiA+
IC0gY29weSAvYWxpYXNlcwo+ID4gLSBjb2RlIHN0eWxlCj4gPiAtLS0KPiA+ICAgeGVuL2FyY2gv
YXJtL2RvbWFpbl9idWlsZC5jICB8IDE1NiArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKwo+ID4gICB4ZW4vaW5jbHVkZS9hc20tYXJtL2tlcm5lbC5oIHwgICAyICstCj4gPiAgIDIg
ZmlsZXMgY2hhbmdlZCwgMTU3IGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKPiA+IAo+ID4g
ZGlmZiAtLWdpdCBhL3hlbi9hcmNoL2FybS9kb21haW5fYnVpbGQuYyBiL3hlbi9hcmNoL2FybS9k
b21haW5fYnVpbGQuYwo+ID4gaW5kZXggMzJmODVjZDk1OS4uOWQ5ODVkM2JiZSAxMDA2NDQKPiA+
IC0tLSBhL3hlbi9hcmNoL2FybS9kb21haW5fYnVpbGQuYwo+ID4gKysrIGIveGVuL2FyY2gvYXJt
L2RvbWFpbl9idWlsZC5jCj4gPiBAQCAtMTQsNiArMTQsNyBAQAo+ID4gICAjaW5jbHVkZSA8eGVu
L2d1ZXN0X2FjY2Vzcy5oPgo+ID4gICAjaW5jbHVkZSA8eGVuL2lvY2FwLmg+Cj4gPiAgICNpbmNs
dWRlIDx4ZW4vYWNwaS5oPgo+ID4gKyNpbmNsdWRlIDx4ZW4vdm1hcC5oPgo+ID4gICAjaW5jbHVk
ZSA8eGVuL3dhcm5pbmcuaD4KPiA+ICAgI2luY2x1ZGUgPGFjcGkvYWN0YWJsZXMuaD4KPiA+ICAg
I2luY2x1ZGUgPGFzbS9kZXZpY2UuaD4KPiA+IEBAIC0xNzAwLDYgKzE3MDEsMTU0IEBAIHN0YXRp
YyBpbnQgX19pbml0IG1ha2VfdnBsMDExX3VhcnRfbm9kZShzdHJ1Y3Qga2VybmVsX2luZm8gKmtp
bmZvKQo+ID4gICB9Cj4gPiAgICNlbmRpZgo+ID4gICAKPiA+ICtzdGF0aWMgaW50IF9faW5pdCBo
YW5kbGVfcHJvcF9wZmR0KHN0cnVjdCBrZXJuZWxfaW5mbyAqa2luZm8sCj4gPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2b2lkICpwZmR0LCBpbnQgbm9kZW9mZiwK
PiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IGFkZHJlc3Nf
Y2VsbHMsIHVpbnQzMl90IHNpemVfY2VsbHMsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBib29sIHNjYW5fcGFzc3Rocm91Z2hfcHJvcCkKPiAKPiBXZWxsLCB0aGUgaW50
cm9kdWNlIG9mIHNjYW5fcGFzc3Rocm91Z2hfcHJvcCBtYWtlcyBsaXR0bGUgc2Vuc2UgYXMgeW91
IAo+IGFyZSBub3QgdXNpbmcgdW50aWwgYSBmb2xsb3ctdXAgcGF0Y2guIEkgYW0gb2sgaWYgeW91
IGludHJvZHVjZSBpdCBoZXJlLCAKPiBidXQgdGhpcyBzaG91bGQgYXQgbGVhc3QgYmUgbWVudGlv
bmVkIGluIHRoZSBjb21taXQgbWVzc2FnZS4KCkknbGwgbWVudGlvbiBpdAoKCj4gPiArewo+ID4g
KyAgICB2b2lkICpmZHQgPSBraW5mby0+ZmR0Owo+ID4gKyAgICBpbnQgcHJvcG9mZiwgbmFtZW9m
ZiwgcmVzOwo+ID4gKyAgICBjb25zdCBzdHJ1Y3QgZmR0X3Byb3BlcnR5ICpwcm9wOwo+ID4gKwo+
ID4gKyAgICBmb3IgKCBwcm9wb2ZmID0gZmR0X2ZpcnN0X3Byb3BlcnR5X29mZnNldChwZmR0LCBu
b2Rlb2ZmKTsKPiA+ICsgICAgICAgICAgcHJvcG9mZiA+PSAwOwo+ID4gKyAgICAgICAgICBwcm9w
b2ZmID0gZmR0X25leHRfcHJvcGVydHlfb2Zmc2V0KHBmZHQsIHByb3BvZmYpICkKPiA+ICsgICAg
ewo+ID4gKyAgICAgICAgaWYgKCAhKHByb3AgPSBmZHRfZ2V0X3Byb3BlcnR5X2J5X29mZnNldChw
ZmR0LCBwcm9wb2ZmLCBOVUxMKSkgKQo+ID4gKyAgICAgICAgICAgIHJldHVybiAtRkRUX0VSUl9J
TlRFUk5BTDsKPiA+ICsKPiA+ICsgICAgICAgIG5hbWVvZmYgPSBmZHQzMl90b19jcHUocHJvcC0+
bmFtZW9mZik7Cj4gPiArICAgICAgICByZXMgPSBmZHRfcHJvcGVydHkoZmR0LCBmZHRfc3RyaW5n
KHBmZHQsIG5hbWVvZmYpLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3AtPmRh
dGEsIGZkdDMyX3RvX2NwdShwcm9wLT5sZW4pKTsKPiA+ICsgICAgICAgIGlmICggcmVzICkKPiA+
ICsgICAgICAgICAgICByZXR1cm4gcmVzOwo+ID4gKyAgICB9Cj4gPiArCj4gPiArICAgIC8qIEZE
VF9FUlJfTk9URk9VTkQgPT4gVGhlcmUgaXMgbm8gbW9yZSBwcm9wZXJ0aWVzIGZvciB0aGlzIG5v
ZGUgKi8KPiA+ICsgICAgcmV0dXJuICggcHJvcG9mZiAhPSAtRkRUX0VSUl9OT1RGT1VORCApID8g
cHJvcG9mZiA6IDA7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyBpbnQgX19pbml0IHNjYW5fcGZk
dF9ub2RlKHN0cnVjdCBrZXJuZWxfaW5mbyAqa2luZm8sIGNvbnN0IHZvaWQgKnBmZHQsCj4gPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IG5vZGVvZmYsCj4gPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgYWRkcmVzc19jZWxscywgdWludDMy
X3Qgc2l6ZV9jZWxscywKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29s
IHNjYW5fcGFzc3Rocm91Z2hfcHJvcCkKPiA+ICt7Cj4gPiArICAgIGludCByYyA9IDA7Cj4gPiAr
ICAgIHZvaWQgKmZkdCA9IGtpbmZvLT5mZHQ7Cj4gPiArICAgIGludCBub2RlX25leHQ7Cj4gPiAr
Cj4gPiArICAgIHJjID0gZmR0X2JlZ2luX25vZGUoZmR0LCBmZHRfZ2V0X25hbWUocGZkdCwgbm9k
ZW9mZiwgTlVMTCkpOwo+ID4gKyAgICBpZiAoIHJjICkKPiA+ICsgICAgICAgIHJldHVybiByYzsK
PiA+ICsKPiA+ICsgICAgcmMgPSBoYW5kbGVfcHJvcF9wZmR0KGtpbmZvLCBwZmR0LCBub2Rlb2Zm
LCBhZGRyZXNzX2NlbGxzLCBzaXplX2NlbGxzLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2Nhbl9wYXNzdGhyb3VnaF9wcm9wKTsKPiA+ICsgICAgaWYgKCByYyApCj4gPiArICAgICAg
ICByZXR1cm4gcmM7Cj4gPiArCj4gPiArICAgIGFkZHJlc3NfY2VsbHMgPSBkZXZpY2VfdHJlZV9n
ZXRfdTMyKHBmZHQsIG5vZGVvZmYsICIjYWRkcmVzcy1jZWxscyIsCj4gPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIERUX1JPT1RfTk9ERV9BRERSX0NFTExTX0RFRkFV
TFQpOwo+ID4gKyAgICBzaXplX2NlbGxzID0gZGV2aWNlX3RyZWVfZ2V0X3UzMihwZmR0LCBub2Rl
b2ZmLCAiI3NpemUtY2VsbHMiLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBEVF9ST09UX05PREVfU0laRV9DRUxMU19ERUZBVUxUKTsKPiA+ICsKPiA+ICsgICAgbm9k
ZV9uZXh0ID0gZmR0X2ZpcnN0X3N1Ym5vZGUocGZkdCwgbm9kZW9mZik7Cj4gPiArICAgIHdoaWxl
ICggbm9kZV9uZXh0ID4gMCApCj4gPiArICAgIHsKPiA+ICsgICAgICAgIHNjYW5fcGZkdF9ub2Rl
KGtpbmZvLCBwZmR0LCBub2RlX25leHQsIGFkZHJlc3NfY2VsbHMsIHNpemVfY2VsbHMsCj4gPiAr
ICAgICAgICAgICAgICAgICAgICAgICBzY2FuX3Bhc3N0aHJvdWdoX3Byb3ApOwo+ID4gKyAgICAg
ICAgbm9kZV9uZXh0ID0gZmR0X25leHRfc3Vibm9kZShwZmR0LCBub2RlX25leHQpOwo+ID4gKyAg
ICB9Cj4gPiArCj4gPiArICAgIHJldHVybiBmZHRfZW5kX25vZGUoZmR0KTsKPiA+ICt9Cj4gPiAr
Cj4gPiArc3RhdGljIGludCBfX2luaXQgY2hlY2tfcGFydGlhbF9mZHQodm9pZCAqcGZkdCwgc2l6
ZV90IHNpemUpCj4gPiArewo+ID4gKyAgICBpbnQgcmVzOwo+ID4gKwo+ID4gKyAgICBpZiAoZmR0
X21hZ2ljKHBmZHQpICE9IEZEVF9NQUdJQykgewo+IAo+IENvZGluZyBzdHlsZToKPiAKPiBpZiAo
IC4uLiApCj4gewo+IAo+ID4gKyAgICAgICAgZHByaW50ayhYRU5MT0dfRVJSLCAiUGFydGlhbCBG
RFQgaXMgbm90IGEgdmFsaWQgRmxhdCBEZXZpY2UgVHJlZSIpOwo+ID4gKyAgICAgICAgcmV0dXJu
IC1FSU5WQUw7Cj4gPiArICAgIH0KPiA+ICsKPiA+ICsgICAgcmVzID0gZmR0X2NoZWNrX2hlYWRl
cihwZmR0KTsKPiA+ICsgICAgaWYgKHJlcykgewo+IAo+IFNhbWUgaGVyZS4KPiAKPiA+ICsgICAg
ICAgIGRwcmludGsoWEVOTE9HX0VSUiwgIkZhaWxlZCB0byBjaGVjayB0aGUgcGFydGlhbCBGRFQg
KCVkKSIsIHJlcyk7Cj4gPiArICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiA+ICsgICAgfQo+ID4g
Kwo+ID4gKyAgICBpZiAoZmR0X3RvdGFsc2l6ZShwZmR0KSA+IHNpemUpIHsKPiAKPiBTYW1lIGhl
cmUuCgpJJ2xsIGZpeCB0aGUgY29kaW5nIHN0eWxlIGlzc3VlcwoKPiAKPiA+ICsgICAgICAgIGRw
cmludGsoWEVOTE9HX0VSUiwgIlBhcnRpYWwgRkRUIHRvdGFsc2l6ZSBpcyB0b28gYmlnIik7Cj4g
PiArICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiA+ICsgICAgfQo+ID4gKwo+ID4gKyAgICByZXR1
cm4gMDsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIGludCBfX2luaXQgZG9tYWluX2hhbmRsZV9k
dGJfYm9vdG1vZHVsZShzdHJ1Y3QgZG9tYWluICpkLAo+ID4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGtlcm5lbF9pbmZvICpraW5mbykKPiA+
ICt7Cj4gPiArICAgIHZvaWQgKnBmZHQ7Cj4gPiArICAgIGludCByZXMsIG5vZGVfbmV4dDsKPiA+
ICsKPiA+ICsgICAgcGZkdCA9IGlvcmVtYXBfY2FjaGUoa2luZm8tPmR0Yl9ib290bW9kdWxlLT5z
dGFydCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAga2luZm8tPmR0Yl9ib290bW9kdWxl
LT5zaXplKTsKPiA+ICsgICAgaWYgKCBwZmR0ID09IE5VTEwgKQo+ID4gKyAgICAgICAgcmV0dXJu
IC1FRkFVTFQ7Cj4gPiArCj4gPiArICAgIHJlcyA9IGNoZWNrX3BhcnRpYWxfZmR0KHBmZHQsIGtp
bmZvLT5kdGJfYm9vdG1vZHVsZS0+c2l6ZSk7Cj4gPiArICAgIGlmICggcmVzIDwgMCApCj4gPiAr
ICAgICAgICByZXR1cm4gcmVzOwo+ID4gKwo+ID4gKyAgICBmb3IgKCBub2RlX25leHQgPSBmZHRf
Zmlyc3Rfc3Vibm9kZShwZmR0LCAwKTsKPiA+ICsgICAgICAgICAgbm9kZV9uZXh0ID4gMDsKPiA+
ICsgICAgICAgICAgbm9kZV9uZXh0ID0gZmR0X25leHRfc3Vibm9kZShwZmR0LCBub2RlX25leHQp
ICkKPiA+ICsgICAgewo+ID4gKyAgICAgICAgY29uc3QgY2hhciAqbmFtZSA9IGZkdF9nZXRfbmFt
ZShwZmR0LCBub2RlX25leHQsIE5VTEwpOwo+ID4gKwo+ID4gKyAgICAgICAgaWYgKCBuYW1lID09
IE5VTEwgKQo+ID4gKyAgICAgICAgICAgIGNvbnRpbnVlOwo+ID4gKwo+ID4gKyAgICAgICAgLyoK
PiA+ICsgICAgICAgICAqIE9ubHkgc2NhbiAvZ2ljIC9hbGlhc2VzIC9wYXNzdGhyb3VnaCwgaWdu
b3JlIHRoZSByZXN0Lgo+ID4gKyAgICAgICAgICogVGhleSBkb24ndCBoYXZlIHRvIGJlIHBhcnNl
ZCBpbiBvcmRlci4KPiA+ICsgICAgICAgICAqCj4gPiArICAgICAgICAgKiBUYWtlIHRoZSBHSUMg
cGhhbmRsZSB2YWx1ZSBmcm9tIHRoZSBzcGVjaWFsIC9naWMgbm9kZSBpbiB0aGUKPiA+ICsgICAg
ICAgICAqIERUQiBmcmFnbWVudC4KPiA+ICsgICAgICAgICAqLwo+ID4gKyAgICAgICAgaWYgKCBk
dF9ub2RlX2NtcChuYW1lLCAiZ2ljIikgPT0gMCApCj4gPiArICAgICAgICB7Cj4gPiArICAgICAg
ICAgICAga2luZm8tPmd1ZXN0X3BoYW5kbGVfZ2ljID0gZmR0X2dldF9waGFuZGxlKHBmZHQsIG5v
ZGVfbmV4dCk7Cj4gPiArICAgICAgICAgICAgY29udGludWU7Cj4gPiArICAgICAgICB9Cj4gPiAr
Cj4gPiArICAgICAgICBpZiAoIGR0X25vZGVfY21wKG5hbWUsICJhbGlhc2VzIikgPT0gMCApCj4g
PiArICAgICAgICB7Cj4gPiArICAgICAgICAgICAgcmVzID0gc2Nhbl9wZmR0X25vZGUoa2luZm8s
IHBmZHQsIG5vZGVfbmV4dCwKPiA+ICsgICAgICAgICAgICAgICAgICAgIERUX1JPT1RfTk9ERV9B
RERSX0NFTExTX0RFRkFVTFQsCj4gPiArICAgICAgICAgICAgICAgICAgICBEVF9ST09UX05PREVf
U0laRV9DRUxMU19ERUZBVUxULAo+ID4gKyAgICAgICAgICAgICAgICAgICAgZmFsc2UpOwo+IAo+
IE5JVDogVGhpcyBpcyBub3QgYWxpZ25lZCBjb3JyZWN0bHkuCj4gCj4gPiArICAgICAgICAgICAg
aWYgKCByZXMgKQo+ID4gKyAgICAgICAgICAgICAgICByZXR1cm4gcmVzOwo+ID4gKyAgICAgICAg
ICAgIGNvbnRpbnVlOwo+ID4gKyAgICAgICAgfQo+ID4gKyAgICAgICAgaWYgKCBkdF9ub2RlX2Nt
cChuYW1lLCAicGFzc3Rocm91Z2giKSA9PSAwICkKPiA+ICsgICAgICAgIHsKPiA+ICsgICAgICAg
ICAgICByZXMgPSBzY2FuX3BmZHRfbm9kZShraW5mbywgcGZkdCwgbm9kZV9uZXh0LAo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgRFRfUk9PVF9OT0RFX0FERFJfQ0VMTFNfREVGQVVMVCwKPiA+ICsg
ICAgICAgICAgICAgICAgICAgIERUX1JPT1RfTk9ERV9TSVpFX0NFTExTX0RFRkFVTFQsCj4gPiAr
ICAgICAgICAgICAgICAgICAgICB0cnVlKTsKPiBTYW1lIGhlcmUuCj4gCj4gPiArICAgICAgICAg
ICAgaWYgKCByZXMgKQo+ID4gKyAgICAgICAgICAgICAgICByZXR1cm4gcmVzOwo+ID4gKyAgICAg
ICAgICAgIGNvbnRpbnVlOwo+ID4gKyAgICAgICAgfQo+ID4gKyAgICB9Cj4gPiArCj4gPiArICAg
IGlvdW5tYXAocGZkdCk7Cj4gPiArCj4gPiArICAgIHJldHVybiByZXM7Cj4gPiArfQo+ID4gKwo+
ID4gICAvKgo+ID4gICAgKiBUaGUgbWF4IHNpemUgZm9yIERUIGlzIDJNQi4gSG93ZXZlciwgdGhl
IGdlbmVyYXRlZCBEVCBpcyBzbWFsbCwgNEtCCj4gPiAgICAqIGFyZSBlbm91Z2ggZm9yIG5vdywg
YnV0IHdlIG1pZ2h0IGhhdmUgdG8gaW5jcmVhc2UgaXQgaW4gdGhlIGZ1dHVyZS4KPiA+IEBAIC0x
NzU1LDYgKzE5MDQsMTMgQEAgc3RhdGljIGludCBfX2luaXQgcHJlcGFyZV9kdGJfZG9tVShzdHJ1
Y3QgZG9tYWluICpkLCBzdHJ1Y3Qga2VybmVsX2luZm8gKmtpbmZvKQo+ID4gICAgICAgaWYgKCBy
ZXQgKQo+ID4gICAgICAgICAgIGdvdG8gZXJyOwo+ID4gICAKPiAKPiBJIHdvdWxkIGFkZCBhIGNv
bW1lbnQgaGVyZSBtZW50aW9uaW5nIHRoYXQgdGhlIGNvZGUgYmVsb3cgYWx3YXlzIG5lZWQgdG8g
Cj4gYmUgY2FsbGVkIGJlZm9yZSB0aGUgcmVzdCBvZiB0aGUgRFQgaXMgZ2VuZXJhdGVkLiBUaGlz
IGlzIGJlY2F1c2UgeW91IAo+IGRlcGVuZCBvbiB0aGUgdmFsdWUgb2YgdGhlIGZpZWxkIGd1ZXN0
X3BoYW5kbGVfZ2ljLgoKT0sKCgo+ID4gKyAgICBpZiAoIGtpbmZvLT5kdGJfYm9vdG1vZHVsZSAp
Cj4gPiArICAgIHsKPiA+ICsgICAgICAgIHJldCA9IGRvbWFpbl9oYW5kbGVfZHRiX2Jvb3Rtb2R1
bGUoZCwga2luZm8pOwo+ID4gKyAgICAgICAgaWYgKCByZXQgKQo+ID4gKyAgICAgICAgICAgIHJl
dHVybiByZXQ7Cj4gPiArICAgIH0KPiA+ICsKPiA+ICAgICAgIHJldCA9IG1ha2VfZ2ljX2RvbVVf
bm9kZShraW5mbyk7Cj4gPiAgICAgICBpZiAoIHJldCApCj4gPiAgICAgICAgICAgZ290byBlcnI7
Cj4gPiBkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLWFybS9rZXJuZWwuaCBiL3hlbi9pbmNs
dWRlL2FzbS1hcm0va2VybmVsLmgKPiA+IGluZGV4IDc2MDQzNDM2OWIuLjdmNWU2NTk1NjEgMTAw
NjQ0Cj4gPiAtLS0gYS94ZW4vaW5jbHVkZS9hc20tYXJtL2tlcm5lbC5oCj4gPiArKysgYi94ZW4v
aW5jbHVkZS9hc20tYXJtL2tlcm5lbC5oCj4gPiBAQCAtMjgsNyArMjgsNyBAQCBzdHJ1Y3Qga2Vy
bmVsX2luZm8gewo+ID4gICAgICAgcGFkZHJfdCBnbnR0YWJfc2l6ZTsKPiA+ICAgCj4gPiAgICAg
ICAvKiBib290IGJsb2IgbG9hZCBhZGRyZXNzZXMgKi8KPiA+IC0gICAgY29uc3Qgc3RydWN0IGJv
b3Rtb2R1bGUgKmtlcm5lbF9ib290bW9kdWxlLCAqaW5pdHJkX2Jvb3Rtb2R1bGU7Cj4gPiArICAg
IGNvbnN0IHN0cnVjdCBib290bW9kdWxlICprZXJuZWxfYm9vdG1vZHVsZSwgKmluaXRyZF9ib290
bW9kdWxlLCAqZHRiX2Jvb3Rtb2R1bGU7Cj4gPiAgICAgICBjb25zdCBjaGFyKiBjbWRsaW5lOwo+
ID4gICAgICAgcGFkZHJfdCBkdGJfcGFkZHI7Cj4gPiAgICAgICBwYWRkcl90IGluaXRyZF9wYWRk
cjsKPiA+IAo+IAo+IENoZWVycywKPiAKPiAtLSAKPiBKdWxpZW4gR3JhbGwKPiAKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5n
IGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJv
amVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

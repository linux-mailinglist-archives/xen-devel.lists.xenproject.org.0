Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 310BC158E4B
	for <lists+xen-devel@lfdr.de>; Tue, 11 Feb 2020 13:19:24 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j1US2-0005we-DL; Tue, 11 Feb 2020 12:15:38 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=zfJQ=37=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1j1US1-0005wZ-Cv
 for xen-devel@lists.xenproject.org; Tue, 11 Feb 2020 12:15:37 +0000
X-Inumbo-ID: 34de9588-4cc8-11ea-a96e-bc764e2007e4
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 34de9588-4cc8-11ea-a96e-bc764e2007e4;
 Tue, 11 Feb 2020 12:15:35 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id CAA34BBB2;
 Tue, 11 Feb 2020 12:15:34 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Tue, 11 Feb 2020 13:15:30 +0100
Message-Id: <20200211121530.11665-1-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
Subject: [Xen-devel] [PATCH v2] xen/sched: remove sched_init_pdata()
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 George Dunlap <george.dunlap@eu.citrix.com>, Meng Xu <mengxu@cis.upenn.edu>,
 Dario Faggioli <dfaggioli@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

c2NoZWRfaW5pdF9wZGF0YSgpIGlzIHVzZWQgbm93aGVyZSwgaXQgY2FuIGJlIHJlbW92ZWQuIFNh
bWUgYXBwbGllcyB0bwp0aGUgLmluaXRfcGRhdGEgaG9vayBvZiB0aGUgcGVyLXNjaGVkdWxlciBp
bnRlcmZhY2UuIFRoZSBsYXN0IGNhbGxlcgpoYXMgYmVlbiByZW1vdmVkIHdpdGggY29tbWl0IGY4
NTVkZDk2MjUyM2I2Y2I0N2E5MjAzN2JkZDI4YjE0ODUxNDFhYmUKKCJzY2hlZDogYWRkIG1pbmlt
YWxpc3RpYyBpZGxlIHNjaGVkdWxlciBmb3IgZnJlZSBjcHVzIikuCgpXaXRoIHRoZSBpZGxlIHNj
aGVkdWxlciBpbnRyb2R1Y3Rpb24gdGhlIHN3aXRjaF9zY2hlZCBob29rIGJlY2FtZSB0aGUKb25s
eSBwbGFjZSB3aGVyZSBuZXcgY3B1cyBnZXQgYWRkZWQgdG8gYSBub3JtYWwgc2NoZWR1bGVyLCBz
byB0aGUKaW5pdF9wZGF0YSBmdW5jdGlvbmFsaXR5IGlzIHBlcmZvcm1lZCBpbnNpZGUgdGhhdCBo
b29rLgoKQWRqdXN0IHNvbWUgY29tbWVudHMgYXMgd2VsbCB0byByZWZsZWN0IHJlYWxpdHkuIFdo
aWxlIGF0IGl0IGNvcnJlY3QgYQp0eXBvIGluIGEgY29tbWVudCBuZXh0IHRvIGEgbW9kaWZpZWQg
Y29tbWVudC4KClNpZ25lZC1vZmYtYnk6IEp1ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNvbT4K
LS0tCiB4ZW4vY29tbW9uL3NjaGVkL2NvcmUuYyAgICB8ICA5ICsrKystLS0tLQogeGVuL2NvbW1v
bi9zY2hlZC9jcmVkaXQuYyAgfCAxMiAtLS0tLS0tLS0tLS0KIHhlbi9jb21tb24vc2NoZWQvY3Jl
ZGl0Mi5jIHwgMjEgLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiB4ZW4vY29tbW9uL3NjaGVkL251bGwu
YyAgICB8IDEwIC0tLS0tLS0tLS0KIHhlbi9jb21tb24vc2NoZWQvcHJpdmF0ZS5oIHwgIDggLS0t
LS0tLS0KIHhlbi9jb21tb24vc2NoZWQvcnQuYyAgICAgIHwgMzEgLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQogNiBmaWxlcyBjaGFuZ2VkLCA0IGluc2VydGlvbnMoKyksIDg3IGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vc2NoZWQvY29yZS5jIGIveGVuL2NvbW1v
bi9zY2hlZC9jb3JlLmMKaW5kZXggZDRlODk0NGUwZS4uMmU0M2Y4MDI5ZiAxMDA2NDQKLS0tIGEv
eGVuL2NvbW1vbi9zY2hlZC9jb3JlLmMKKysrIGIveGVuL2NvbW1vbi9zY2hlZC9jb3JlLmMKQEAg
LTI3NzUsMTAgKzI3NzUsMTAgQEAgc3RhdGljIGludCBjcHVfc2NoZWR1bGVfY2FsbGJhY2soCiAg
ICAgICogb3JkZXIuIElmIG5vIHBlci1wQ1BVIG1lbW9yeSB3YXMgYWxsb2NhdGVkLCB0aGVyZSBp
cyBubyBuZWVkIHRvCiAgICAgICogcHJvdmlkZSBhbiBpbXBsZW1lbnRhdGlvbiBvZiBmcmVlX3Bk
YXRhLiBkZWluaXRfcGRhdGEgbWF5LCBob3dldmVyLAogICAgICAqIGJlIG5lY2Vzc2FyeS91c2Vm
dWwgaW4gdGhpcyBjYXNlIHRvbyAoZS5nLiwgaXQgY2FuIHVuZG8gc29tZXRoaW5nIGRvbmUKLSAg
ICAgKiBvbiBzY2hlZHVsZXIgd2lkZSBkYXRhIHN0cnVjdHVyZSBkdXJpbmcgaW5pdF9wZGF0YSku
IEJvdGggZGVpbml0X3BkYXRhCisgICAgICogb24gc2NoZWR1bGVyIHdpZGUgZGF0YSBzdHJ1Y3R1
cmUgZHVyaW5nIHN3aXRjaF9zY2hlZCkuIEJvdGggZGVpbml0X3BkYXRhCiAgICAgICogYW5kIGZy
ZWVfcGRhdGEgYXJlIGNhbGxlZCBkdXJpbmcgQ1BVX0RFQUQuCiAgICAgICoKLSAgICAgKiBJZiBz
b21ldGluZyBnb2VzIHdyb25nIGR1cmluZyBicmluZ3VwLCB3ZSBnbyB0byBDUFVfVVBfQ0FOQ0VM
TEVELgorICAgICAqIElmIHNvbWV0aGluZyBnb2VzIHdyb25nIGR1cmluZyBicmluZ3VwLCB3ZSBn
byB0byBDUFVfVVBfQ0FOQ0VMTEVELgogICAgICAqLwogICAgIHN3aXRjaCAoIGFjdGlvbiApCiAg
ICAgewpAQCAtMjk2OCw5ICsyOTY4LDggQEAgaW50IHNjaGVkdWxlX2NwdV9hZGQodW5zaWduZWQg
aW50IGNwdSwgc3RydWN0IGNwdXBvb2wgKmMpCiAgICAgICogVG8gc2V0dXAgdGhlIGNwdSBmb3Ig
dGhlIG5ldyBzY2hlZHVsZXIgd2UgbmVlZDoKICAgICAgKiAgLSBhIHZhbGlkIGluc3RhbmNlIG9m
IHBlci1DUFUgc2NoZWR1bGVyIHNwZWNpZmljIGRhdGEsIGFzIGl0IGlzCiAgICAgICogICAgYWxs
b2NhdGVkIGJ5IHNjaGVkX2FsbG9jX3BkYXRhKCkuIE5vdGUgdGhhdCB3ZSBkbyBub3Qgd2FudCB0
bwotICAgICAqICAgIGluaXRpYWxpemUgaXQgeWV0IChpLmUuLCB3ZSBhcmUgbm90IGNhbGxpbmcg
c2NoZWRfaW5pdF9wZGF0YSgpKS4KLSAgICAgKiAgICBUaGF0IHdpbGwgYmUgZG9uZSBieSB0aGUg
dGFyZ2V0IHNjaGVkdWxlciwgaW4gc2NoZWRfc3dpdGNoX3NjaGVkKCksCi0gICAgICogICAgaW4g
cHJvcGVyIG9yZGVyaW5nIGFuZCB3aXRoIGxvY2tpbmcuCisgICAgICogICAgaW5pdGlhbGl6ZSBp
dCB5ZXQsIGFzIHRoYXQgd2lsbCBiZSBkb25lIGJ5IHRoZSB0YXJnZXQgc2NoZWR1bGVyLAorICAg
ICAqICAgIGluIHNjaGVkX3N3aXRjaF9zY2hlZCgpLCBpbiBwcm9wZXIgb3JkZXJpbmcgYW5kIHdp
dGggbG9ja2luZy4KICAgICAgKiAgLSBhIHZhbGlkIGluc3RhbmNlIG9mIHBlci12Q1BVIHNjaGVk
dWxlciBzcGVjaWZpYyBkYXRhLCBmb3IgdGhlIGlkbGUKICAgICAgKiAgICB2Q1BVIG9mIGNwdS4g
VGhhdCBpcyB3aGF0IHRoZSB0YXJnZXQgc2NoZWR1bGVyIHdpbGwgdXNlIGZvciB0aGUKICAgICAg
KiAgICBzY2hlZF9wcml2IGZpZWxkIG9mIHRoZSBwZXItdkNQVSBpbmZvIG9mIHRoZSBpZGxlIGRv
bWFpbi4KZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vc2NoZWQvY3JlZGl0LmMgYi94ZW4vY29tbW9u
L3NjaGVkL2NyZWRpdC5jCmluZGV4IDA1OTQ2ZWVhNmUuLjkzZDg5ZGEyNzggMTAwNjQ0Ci0tLSBh
L3hlbi9jb21tb24vc2NoZWQvY3JlZGl0LmMKKysrIGIveGVuL2NvbW1vbi9zY2hlZC9jcmVkaXQu
YwpAQCAtNjE0LDE3ICs2MTQsNiBAQCBpbml0X3BkYXRhKHN0cnVjdCBjc2NoZWRfcHJpdmF0ZSAq
cHJ2LCBzdHJ1Y3QgY3NjaGVkX3BjcHUgKnNwYywgaW50IGNwdSkKICAgICBzcGMtPm5yX3J1bm5h
YmxlID0gMDsKIH0KIAotc3RhdGljIHZvaWQKLWNzY2hlZF9pbml0X3BkYXRhKGNvbnN0IHN0cnVj
dCBzY2hlZHVsZXIgKm9wcywgdm9pZCAqcGRhdGEsIGludCBjcHUpCi17Ci0gICAgdW5zaWduZWQg
bG9uZyBmbGFnczsKLSAgICBzdHJ1Y3QgY3NjaGVkX3ByaXZhdGUgKnBydiA9IENTQ0hFRF9QUklW
KG9wcyk7Ci0KLSAgICBzcGluX2xvY2tfaXJxc2F2ZSgmcHJ2LT5sb2NrLCBmbGFncyk7Ci0gICAg
aW5pdF9wZGF0YShwcnYsIHBkYXRhLCBjcHUpOwotICAgIHNwaW5fdW5sb2NrX2lycXJlc3RvcmUo
JnBydi0+bG9jaywgZmxhZ3MpOwotfQotCiAvKiBDaGFuZ2UgdGhlIHNjaGVkdWxlciBvZiBjcHUg
dG8gdXMgKENyZWRpdCkuICovCiBzdGF0aWMgc3BpbmxvY2tfdCAqCiBjc2NoZWRfc3dpdGNoX3Nj
aGVkKHN0cnVjdCBzY2hlZHVsZXIgKm5ld19vcHMsIHVuc2lnbmVkIGludCBjcHUsCkBAIC0yMjcz
LDcgKzIyNjIsNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNjaGVkdWxlciBzY2hlZF9jcmVkaXRf
ZGVmID0gewogICAgIC5hbGxvY191ZGF0YSAgICA9IGNzY2hlZF9hbGxvY191ZGF0YSwKICAgICAu
ZnJlZV91ZGF0YSAgICAgPSBjc2NoZWRfZnJlZV91ZGF0YSwKICAgICAuYWxsb2NfcGRhdGEgICAg
PSBjc2NoZWRfYWxsb2NfcGRhdGEsCi0gICAgLmluaXRfcGRhdGEgICAgID0gY3NjaGVkX2luaXRf
cGRhdGEsCiAgICAgLmRlaW5pdF9wZGF0YSAgID0gY3NjaGVkX2RlaW5pdF9wZGF0YSwKICAgICAu
ZnJlZV9wZGF0YSAgICAgPSBjc2NoZWRfZnJlZV9wZGF0YSwKICAgICAuc3dpdGNoX3NjaGVkICAg
PSBjc2NoZWRfc3dpdGNoX3NjaGVkLApkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZC9jcmVk
aXQyLmMgYi94ZW4vY29tbW9uL3NjaGVkL2NyZWRpdDIuYwppbmRleCBmMjc1MmYyN2UyLi43ZDEw
NGYxNWQwIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3NjaGVkL2NyZWRpdDIuYworKysgYi94ZW4v
Y29tbW9uL3NjaGVkL2NyZWRpdDIuYwpAQCAtMzgxNiwyNiArMzgxNiw2IEBAIGluaXRfcGRhdGEo
c3RydWN0IGNzY2hlZDJfcHJpdmF0ZSAqcHJ2LCBzdHJ1Y3QgY3NjaGVkMl9wY3B1ICpzcGMsCiAg
ICAgcmV0dXJuIHNwYy0+cnVucV9pZDsKIH0KIAotc3RhdGljIHZvaWQKLWNzY2hlZDJfaW5pdF9w
ZGF0YShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIHZvaWQgKnBkYXRhLCBpbnQgY3B1KQot
ewotICAgIHN0cnVjdCBjc2NoZWQyX3ByaXZhdGUgKnBydiA9IGNzY2hlZDJfcHJpdihvcHMpOwot
ICAgIHNwaW5sb2NrX3QgKm9sZF9sb2NrOwotICAgIHVuc2lnbmVkIGxvbmcgZmxhZ3M7Ci0gICAg
dW5zaWduZWQgcnFpOwotCi0gICAgd3JpdGVfbG9ja19pcnFzYXZlKCZwcnYtPmxvY2ssIGZsYWdz
KTsKLSAgICBvbGRfbG9jayA9IHBjcHVfc2NoZWR1bGVfbG9jayhjcHUpOwotCi0gICAgcnFpID0g
aW5pdF9wZGF0YShwcnYsIHBkYXRhLCBjcHUpOwotICAgIC8qIE1vdmUgdGhlIHNjaGVkdWxlciBs
b2NrIHRvIHRoZSBuZXcgcnVucSBsb2NrLiAqLwotICAgIGdldF9zY2hlZF9yZXMoY3B1KS0+c2No
ZWR1bGVfbG9jayA9ICZwcnYtPnJxZFtycWldLmxvY2s7Ci0KLSAgICAvKiBfTm90XyBwY3B1X3Nj
aGVkdWxlX3VubG9jaygpOiBzY2hlZHVsZV9sb2NrIG1heSBoYXZlIGNoYW5nZWQhICovCi0gICAg
c3Bpbl91bmxvY2sob2xkX2xvY2spOwotICAgIHdyaXRlX3VubG9ja19pcnFyZXN0b3JlKCZwcnYt
PmxvY2ssIGZsYWdzKTsKLX0KLQogLyogQ2hhbmdlIHRoZSBzY2hlZHVsZXIgb2YgY3B1IHRvIHVz
IChDcmVkaXQyKS4gKi8KIHN0YXRpYyBzcGlubG9ja190ICoKIGNzY2hlZDJfc3dpdGNoX3NjaGVk
KHN0cnVjdCBzY2hlZHVsZXIgKm5ld19vcHMsIHVuc2lnbmVkIGludCBjcHUsCkBAIC00MDgzLDcg
KzQwNjMsNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNjaGVkdWxlciBzY2hlZF9jcmVkaXQyX2Rl
ZiA9IHsKICAgICAuYWxsb2NfdWRhdGEgICAgPSBjc2NoZWQyX2FsbG9jX3VkYXRhLAogICAgIC5m
cmVlX3VkYXRhICAgICA9IGNzY2hlZDJfZnJlZV91ZGF0YSwKICAgICAuYWxsb2NfcGRhdGEgICAg
PSBjc2NoZWQyX2FsbG9jX3BkYXRhLAotICAgIC5pbml0X3BkYXRhICAgICA9IGNzY2hlZDJfaW5p
dF9wZGF0YSwKICAgICAuZGVpbml0X3BkYXRhICAgPSBjc2NoZWQyX2RlaW5pdF9wZGF0YSwKICAg
ICAuZnJlZV9wZGF0YSAgICAgPSBjc2NoZWQyX2ZyZWVfcGRhdGEsCiAgICAgLnN3aXRjaF9zY2hl
ZCAgID0gY3NjaGVkMl9zd2l0Y2hfc2NoZWQsCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVk
L251bGwuYyBiL3hlbi9jb21tb24vc2NoZWQvbnVsbC5jCmluZGV4IDhjMzEwMTY0OWQuLjgyZDVk
MWJhYWIgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vc2NoZWQvbnVsbC5jCisrKyBiL3hlbi9jb21t
b24vc2NoZWQvbnVsbC5jCkBAIC0xNjYsMTUgKzE2Niw2IEBAIHN0YXRpYyB2b2lkIGluaXRfcGRh
dGEoc3RydWN0IG51bGxfcHJpdmF0ZSAqcHJ2LCBzdHJ1Y3QgbnVsbF9wY3B1ICpucGMsCiAgICAg
bnBjLT51bml0ID0gTlVMTDsKIH0KIAotc3RhdGljIHZvaWQgbnVsbF9pbml0X3BkYXRhKGNvbnN0
IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywgdm9pZCAqcGRhdGEsIGludCBjcHUpCi17Ci0gICAgc3Ry
dWN0IG51bGxfcHJpdmF0ZSAqcHJ2ID0gbnVsbF9wcml2KG9wcyk7Ci0KLSAgICBBU1NFUlQocGRh
dGEpOwotCi0gICAgaW5pdF9wZGF0YShwcnYsIHBkYXRhLCBjcHUpOwotfQotCiBzdGF0aWMgdm9p
ZCBudWxsX2RlaW5pdF9wZGF0YShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIHZvaWQgKnBj
cHUsIGludCBjcHUpCiB7CiAgICAgc3RydWN0IG51bGxfcHJpdmF0ZSAqcHJ2ID0gbnVsbF9wcml2
KG9wcyk7CkBAIC0xMDQyLDcgKzEwMzMsNiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNjaGVkdWxl
ciBzY2hlZF9udWxsX2RlZiA9IHsKICAgICAuZGVpbml0ICAgICAgICAgPSBudWxsX2RlaW5pdCwK
ICAgICAuYWxsb2NfcGRhdGEgICAgPSBudWxsX2FsbG9jX3BkYXRhLAogICAgIC5mcmVlX3BkYXRh
ICAgICA9IG51bGxfZnJlZV9wZGF0YSwKLSAgICAuaW5pdF9wZGF0YSAgICAgPSBudWxsX2luaXRf
cGRhdGEsCiAgICAgLnN3aXRjaF9zY2hlZCAgID0gbnVsbF9zd2l0Y2hfc2NoZWQsCiAgICAgLmRl
aW5pdF9wZGF0YSAgID0gbnVsbF9kZWluaXRfcGRhdGEsCiAKZGlmZiAtLWdpdCBhL3hlbi9jb21t
b24vc2NoZWQvcHJpdmF0ZS5oIGIveGVuL2NvbW1vbi9zY2hlZC9wcml2YXRlLmgKaW5kZXggMmE5
NDE3OWJhYS4uMzY3ODExYTEyZiAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9zY2hlZC9wcml2YXRl
LmgKKysrIGIveGVuL2NvbW1vbi9zY2hlZC9wcml2YXRlLmgKQEAgLTMwNiw3ICszMDYsNiBAQCBz
dHJ1Y3Qgc2NoZWR1bGVyIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0
cnVjdCBzY2hlZF91bml0ICosIHZvaWQgKik7CiAgICAgdm9pZCAgICAgICAgICgqZnJlZV9wZGF0
YSkgICAgIChjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICosIHZvaWQgKiwgaW50KTsKICAgICB2b2lk
ICogICAgICAgKCphbGxvY19wZGF0YSkgICAgKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKiwgaW50
KTsKLSAgICB2b2lkICAgICAgICAgKCppbml0X3BkYXRhKSAgICAgKGNvbnN0IHN0cnVjdCBzY2hl
ZHVsZXIgKiwgdm9pZCAqLCBpbnQpOwogICAgIHZvaWQgICAgICAgICAoKmRlaW5pdF9wZGF0YSkg
ICAoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqLCB2b2lkICosIGludCk7CiAKICAgICAvKiBSZXR1
cm5zIEVSUl9QVFIoLWVycikgZm9yIGVycm9yLCBOVUxMIGZvciAnbm90aGluZyBuZWVkZWQnLiAq
LwpAQCAtNDA4LDEzICs0MDcsNiBAQCBzdGF0aWMgaW5saW5lIHZvaWQgc2NoZWRfZnJlZV9wZGF0
YShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpzLCB2b2lkICpkYXRhLAogICAgICAgICBzLT5mcmVl
X3BkYXRhKHMsIGRhdGEsIGNwdSk7CiB9CiAKLXN0YXRpYyBpbmxpbmUgdm9pZCBzY2hlZF9pbml0
X3BkYXRhKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKnMsIHZvaWQgKmRhdGEsCi0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgY3B1KQotewotICAgIGlmICggcy0+aW5pdF9w
ZGF0YSApCi0gICAgICAgIHMtPmluaXRfcGRhdGEocywgZGF0YSwgY3B1KTsKLX0KLQogc3RhdGlj
IGlubGluZSB2b2lkIHNjaGVkX2RlaW5pdF9wZGF0YShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpz
LCB2b2lkICpkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQg
Y3B1KQogewpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZC9ydC5jIGIveGVuL2NvbW1vbi9z
Y2hlZC9ydC5jCmluZGV4IDY2NTg1ZWQ1MGEuLmMyNGNkMmFjMzIgMTAwNjQ0Ci0tLSBhL3hlbi9j
b21tb24vc2NoZWQvcnQuYworKysgYi94ZW4vY29tbW9uL3NjaGVkL3J0LmMKQEAgLTcxMywzNiAr
NzEzLDYgQEAgcnRfZGVpbml0KHN0cnVjdCBzY2hlZHVsZXIgKm9wcykKICAgICB4ZnJlZShwcnYp
OwogfQogCi0vKgotICogUG9pbnQgcGVyX2NwdSBzcGlubG9jayB0byB0aGUgZ2xvYmFsIHN5c3Rl
bSBsb2NrOwotICogQWxsIGNwdSBoYXZlIHNhbWUgZ2xvYmFsIHN5c3RlbSBsb2NrCi0gKi8KLXN0
YXRpYyB2b2lkCi1ydF9pbml0X3BkYXRhKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywgdm9p
ZCAqcGRhdGEsIGludCBjcHUpCi17Ci0gICAgc3RydWN0IHJ0X3ByaXZhdGUgKnBydiA9IHJ0X3By
aXYob3BzKTsKLSAgICBzcGlubG9ja190ICpvbGRfbG9jazsKLSAgICB1bnNpZ25lZCBsb25nIGZs
YWdzOwotCi0gICAgb2xkX2xvY2sgPSBwY3B1X3NjaGVkdWxlX2xvY2tfaXJxc2F2ZShjcHUsICZm
bGFncyk7Ci0KLSAgICAvKgotICAgICAqIFRJTUVSX1NUQVRVU19pbnZhbGlkIG1lYW5zIHdlIGFy
ZSB0aGUgZmlyc3QgY3B1IHRoYXQgc2VlcyB0aGUgdGltZXIKLSAgICAgKiBhbGxvY2F0ZWQgYnV0
IG5vdCBpbml0aWFsaXplZCwgYW5kIHNvIGl0J3MgdXAgdG8gdXMgdG8gaW5pdGlhbGl6ZSBpdC4K
LSAgICAgKi8KLSAgICBpZiAoIHBydi0+cmVwbF90aW1lci5zdGF0dXMgPT0gVElNRVJfU1RBVFVT
X2ludmFsaWQgKQotICAgIHsKLSAgICAgICAgaW5pdF90aW1lcigmcHJ2LT5yZXBsX3RpbWVyLCBy
ZXBsX3RpbWVyX2hhbmRsZXIsICh2b2lkICopb3BzLCBjcHUpOwotICAgICAgICBkcHJpbnRrKFhF
TkxPR19ERUJVRywgIlJURFM6IHRpbWVyIGluaXRpYWxpemVkIG9uIGNwdSAldVxuIiwgY3B1KTsK
LSAgICB9Ci0KLSAgICAvKiBNb3ZlIHRoZSBzY2hlZHVsZXIgbG9jayB0byBvdXIgZ2xvYmFsIHJ1
bnF1ZXVlIGxvY2suICAqLwotICAgIGdldF9zY2hlZF9yZXMoY3B1KS0+c2NoZWR1bGVfbG9jayA9
ICZwcnYtPmxvY2s7Ci0KLSAgICAvKiBfTm90XyBwY3B1X3NjaGVkdWxlX3VubG9jaygpOiBwZXJf
Y3B1KCkuc2NoZWR1bGVfbG9jayBjaGFuZ2VkISAqLwotICAgIHNwaW5fdW5sb2NrX2lycXJlc3Rv
cmUob2xkX2xvY2ssIGZsYWdzKTsKLX0KLQogLyogQ2hhbmdlIHRoZSBzY2hlZHVsZXIgb2YgY3B1
IHRvIHVzIChSVERTKS4gKi8KIHN0YXRpYyBzcGlubG9ja190ICoKIHJ0X3N3aXRjaF9zY2hlZChz
dHJ1Y3Qgc2NoZWR1bGVyICpuZXdfb3BzLCB1bnNpZ25lZCBpbnQgY3B1LApAQCAtMTU2OCw3ICsx
NTM4LDYgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgc2NoZWRfcnRkc19kZWYgPSB7
CiAgICAgLmR1bXBfc2V0dGluZ3MgID0gcnRfZHVtcCwKICAgICAuaW5pdCAgICAgICAgICAgPSBy
dF9pbml0LAogICAgIC5kZWluaXQgICAgICAgICA9IHJ0X2RlaW5pdCwKLSAgICAuaW5pdF9wZGF0
YSAgICAgPSBydF9pbml0X3BkYXRhLAogICAgIC5zd2l0Y2hfc2NoZWQgICA9IHJ0X3N3aXRjaF9z
Y2hlZCwKICAgICAuZGVpbml0X3BkYXRhICAgPSBydF9kZWluaXRfcGRhdGEsCiAgICAgLmFsbG9j
X2RvbWRhdGEgID0gcnRfYWxsb2NfZG9tZGF0YSwKLS0gCjIuMTYuNAoKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QK
WGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5v
cmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

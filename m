Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id A377B16677
	for <lists+xen-devel@lfdr.de>; Tue,  7 May 2019 17:17:31 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hO1oZ-0007ST-R4; Tue, 07 May 2019 15:15:31 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=qCYz=TH=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hO1oY-0007Ra-Cj
 for xen-devel@lists.xenproject.org; Tue, 07 May 2019 15:15:30 +0000
X-Inumbo-ID: f2afb956-70da-11e9-843c-bc764e045a96
Received: from foss.arm.com (unknown [217.140.101.70])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTP
 id f2afb956-70da-11e9-843c-bc764e045a96;
 Tue, 07 May 2019 15:15:28 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.72.51.249])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 69ECC1684;
 Tue,  7 May 2019 08:15:25 -0700 (PDT)
Received: from e108454-lin.cambridge.arm.com (e108454-lin.cambridge.arm.com
 [10.1.196.50])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id A38F03F5AF;
 Tue,  7 May 2019 08:15:23 -0700 (PDT)
From: Julien Grall <julien.grall@arm.com>
To: xen-devel@lists.xenproject.org
Date: Tue,  7 May 2019 16:14:52 +0100
Message-Id: <20190507151458.29350-9-julien.grall@arm.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20190507151458.29350-1-julien.grall@arm.com>
References: <20190507151458.29350-1-julien.grall@arm.com>
Subject: [Xen-devel] [PATCH 08/14] xen: Convert is_xen_heap_mfn to use
 typesafe MFN
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wei.liu2@citrix.com>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Tm8gZnVuY3Rpb25hbCBjaGFuZ2VzLgoKU2lnbmVkLW9mZi1ieTogSnVsaWVuIEdyYWxsIDxqdWxp
ZW4uZ3JhbGxAYXJtLmNvbT4KUmV2aWV3ZWQtYnk6IEphbiBCZXVsaWNoIDxqYmV1bGljaEBzdXNl
LmNvbT4KQWNrZWQtYnk6IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3N0YWJlbGxpbmlAa2VybmVsLm9y
Zz4KCi0tLQogICAgQ2hhbmdlcyBpbiB2MjoKICAgICAgICAtIEZpeCBjb2Rpbmcgc3R5bGUKICAg
ICAgICAtIE1lcmdlIHRoZSBkZWNsYXJhdGlvbiBmb3IgZ3BmbiBhbmQgb2xkX2dwZm4KICAgICAg
ICAtIERvbid0IG9wZW4tY29kZSBtZm5fdmFsaWQKICAgICAgICAtIEFkZCBKYW4ncyByZXZpZXdl
ZC1ieQogICAgICAgIC0gVXNlIG1mbl9hZGQobWZuLCAtMSkKICAgICAgICAtIEFkZCBTdGVmYW5v
J3MgYWNrZWQtYnkgZm9yIEFSTSBwYXJ0cwotLS0KIHhlbi9hcmNoL3g4Ni9tbS5jICAgICAgICAg
ICAgICB8IDEwICsrKysrLS0tLS0KIHhlbi9hcmNoL3g4Ni9tbS9wMm0uYyAgICAgICAgICB8ICAy
ICstCiB4ZW4vYXJjaC94ODYvbW0vc2hhZG93L211bHRpLmMgfCAgMiArLQogeGVuL2NvbW1vbi9w
YWdlX2FsbG9jLmMgICAgICAgIHwgIDQgKystLQogeGVuL2luY2x1ZGUvYXNtLWFybS9tbS5oICAg
ICAgIHwgIDggKysrKy0tLS0KIHhlbi9pbmNsdWRlL2FzbS14ODYvbW0uaCAgICAgICB8ICAyICst
CiA2IGZpbGVzIGNoYW5nZWQsIDE0IGluc2VydGlvbnMoKyksIDE0IGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9tbS5jIGIveGVuL2FyY2gveDg2L21tLmMKaW5kZXggOTg3
ODQ1M2ViMC4uNTcwZTFlMGRlYiAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L21tLmMKKysrIGIv
eGVuL2FyY2gveDg2L21tLmMKQEAgLTQ0NjIsOCArNDQ2Miw4IEBAIGludCB4ZW5tZW1fYWRkX3Rv
X3BoeXNtYXBfb25lKAogICAgIGdmbl90IGdwZm4pCiB7CiAgICAgc3RydWN0IHBhZ2VfaW5mbyAq
cGFnZSA9IE5VTEw7Ci0gICAgdW5zaWduZWQgbG9uZyBnZm4gPSAwOyAvKiBnY2MgLi4uICovCi0g
ICAgdW5zaWduZWQgbG9uZyBwcmV2X21mbiwgb2xkX2dwZm47CisgICAgdW5zaWduZWQgbG9uZyBn
Zm4gPSAwIC8qIGdjYyAuLi4gKi8sIG9sZF9ncGZuOworICAgIG1mbl90IHByZXZfbWZuOwogICAg
IGludCByYyA9IDA7CiAgICAgbWZuX3QgbWZuID0gSU5WQUxJRF9NRk47CiAgICAgcDJtX3R5cGVf
dCBwMm10OwpAQCAtNDUxMiwxMiArNDUxMiwxMiBAQCBpbnQgeGVubWVtX2FkZF90b19waHlzbWFw
X29uZSgKICAgICB9CiAKICAgICAvKiBSZW1vdmUgcHJldmlvdXNseSBtYXBwZWQgcGFnZSBpZiBp
dCB3YXMgcHJlc2VudC4gKi8KLSAgICBwcmV2X21mbiA9IG1mbl94KGdldF9nZm4oZCwgZ2ZuX3go
Z3BmbiksICZwMm10KSk7Ci0gICAgaWYgKCBtZm5fdmFsaWQoX21mbihwcmV2X21mbikpICkKKyAg
ICBwcmV2X21mbiA9IGdldF9nZm4oZCwgZ2ZuX3goZ3BmbiksICZwMm10KTsKKyAgICBpZiAoIG1m
bl92YWxpZChwcmV2X21mbikgKQogICAgIHsKICAgICAgICAgaWYgKCBpc194ZW5faGVhcF9tZm4o
cHJldl9tZm4pICkKICAgICAgICAgICAgIC8qIFhlbiBoZWFwIGZyYW1lcyBhcmUgc2ltcGx5IHVu
aG9va2VkIGZyb20gdGhpcyBwaHlzIHNsb3QuICovCi0gICAgICAgICAgICByYyA9IGd1ZXN0X3Bo
eXNtYXBfcmVtb3ZlX3BhZ2UoZCwgZ3BmbiwgX21mbihwcmV2X21mbiksIFBBR0VfT1JERVJfNEsp
OworICAgICAgICAgICAgcmMgPSBndWVzdF9waHlzbWFwX3JlbW92ZV9wYWdlKGQsIGdwZm4sIHBy
ZXZfbWZuLCBQQUdFX09SREVSXzRLKTsKICAgICAgICAgZWxzZQogICAgICAgICAgICAgLyogTm9y
bWFsIGRvbWFpbiBtZW1vcnkgaXMgZnJlZWQsIHRvIGF2b2lkIGxlYWtpbmcgbWVtb3J5LiAqLwog
ICAgICAgICAgICAgcmMgPSBndWVzdF9yZW1vdmVfcGFnZShkLCBnZm5feChncGZuKSk7CmRpZmYg
LS1naXQgYS94ZW4vYXJjaC94ODYvbW0vcDJtLmMgYi94ZW4vYXJjaC94ODYvbW0vcDJtLmMKaW5k
ZXggYjE2MTE3ZGM1Ni4uM2M5OGY3MmRiYiAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L21tL3Ay
bS5jCisrKyBiL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYwpAQCAtMjkzNSw3ICsyOTM1LDcgQEAgaW50
IHAybV9hZGRfZm9yZWlnbihzdHJ1Y3QgZG9tYWluICp0ZG9tLCB1bnNpZ25lZCBsb25nIGZnZm4s
CiAgICAgcHJldl9tZm4gPSBnZXRfZ2ZuKHRkb20sIGdwZm4sICZwMm10X3ByZXYpOwogICAgIGlm
ICggbWZuX3ZhbGlkKHByZXZfbWZuKSApCiAgICAgewotICAgICAgICBpZiAoIGlzX3hlbl9oZWFw
X21mbihtZm5feChwcmV2X21mbikpICkKKyAgICAgICAgaWYgKCBpc194ZW5faGVhcF9tZm4ocHJl
dl9tZm4pICkKICAgICAgICAgICAgIC8qIFhlbiBoZWFwIGZyYW1lcyBhcmUgc2ltcGx5IHVuaG9v
a2VkIGZyb20gdGhpcyBwaHlzIHNsb3QgKi8KICAgICAgICAgICAgIHJjID0gZ3Vlc3RfcGh5c21h
cF9yZW1vdmVfcGFnZSh0ZG9tLCBfZ2ZuKGdwZm4pLCBwcmV2X21mbiwgMCk7CiAgICAgICAgIGVs
c2UKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9tbS9zaGFkb3cvbXVsdGkuYyBiL3hlbi9hcmNo
L3g4Ni9tbS9zaGFkb3cvbXVsdGkuYwppbmRleCA4NzgxYmRjZmU1Li4zNWE3YjYwNmQwIDEwMDY0
NAotLS0gYS94ZW4vYXJjaC94ODYvbW0vc2hhZG93L211bHRpLmMKKysrIGIveGVuL2FyY2gveDg2
L21tL3NoYWRvdy9tdWx0aS5jCkBAIC01NTksNyArNTU5LDcgQEAgX3NoX3Byb3BhZ2F0ZShzdHJ1
Y3QgdmNwdSAqdiwKICAgICAgKiBjYWNoaW5nIGF0dHJpYnV0ZXMgaW4gdGhlIHNoYWRvd3MgdG8g
bWF0Y2ggd2hhdCB3YXMgYXNrZWQgZm9yLgogICAgICAqLwogICAgIGlmICggKGxldmVsID09IDEp
ICYmIGlzX2h2bV9kb21haW4oZCkgJiYKLSAgICAgICAgICFpc194ZW5faGVhcF9tZm4obWZuX3go
dGFyZ2V0X21mbikpICkKKyAgICAgICAgICFpc194ZW5faGVhcF9tZm4odGFyZ2V0X21mbikgKQog
ICAgIHsKICAgICAgICAgaW50IHR5cGU7CiAKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vcGFnZV9h
bGxvYy5jIGIveGVuL2NvbW1vbi9wYWdlX2FsbG9jLmMKaW5kZXggYjQwNjdhZTIwMi4uNjA2MWNj
ZTI0ZiAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9wYWdlX2FsbG9jLmMKKysrIGIveGVuL2NvbW1v
bi9wYWdlX2FsbG9jLmMKQEAgLTIxMjEsOSArMjEyMSw5IEBAIHZvaWQgaW5pdF94ZW5oZWFwX3Bh
Z2VzKHBhZGRyX3QgcHMsIHBhZGRyX3QgcGUpCiAgICAgICogWXVrISBFbnN1cmUgdGhlcmUgaXMg
YSBvbmUtcGFnZSBidWZmZXIgYmV0d2VlbiBYZW4gYW5kIERvbSB6b25lcywgdG8KICAgICAgKiBw
cmV2ZW50IG1lcmdpbmcgb2YgcG93ZXItb2YtdHdvIGJsb2NrcyBhY3Jvc3MgdGhlIHpvbmUgYm91
bmRhcnkuCiAgICAgICovCi0gICAgaWYgKCBwcyAmJiAhaXNfeGVuX2hlYXBfbWZuKHBhZGRyX3Rv
X3BmbihwcyktMSkgKQorICAgIGlmICggcHMgJiYgIWlzX3hlbl9oZWFwX21mbihtZm5fYWRkKG1h
ZGRyX3RvX21mbihwcyksIC0xKSkgKQogICAgICAgICBwcyArPSBQQUdFX1NJWkU7Ci0gICAgaWYg
KCAhaXNfeGVuX2hlYXBfbWZuKHBhZGRyX3RvX3BmbihwZSkpICkKKyAgICBpZiAoICFpc194ZW5f
aGVhcF9tZm4obWFkZHJfdG9fbWZuKHBlKSkgKQogICAgICAgICBwZSAtPSBQQUdFX1NJWkU7CiAK
ICAgICBtZW1ndWFyZF9ndWFyZF9yYW5nZShtYWRkcl90b192aXJ0KHBzKSwgcGUgLSBwcyk7CmRp
ZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9hc20tYXJtL21tLmggYi94ZW4vaW5jbHVkZS9hc20tYXJt
L21tLmgKaW5kZXggYjU2MDE4YWFjZS4uYTljODM1MmI5NCAxMDA2NDQKLS0tIGEveGVuL2luY2x1
ZGUvYXNtLWFybS9tbS5oCisrKyBiL3hlbi9pbmNsdWRlL2FzbS1hcm0vbW0uaApAQCAtMTM4LDE2
ICsxMzgsMTYgQEAgZXh0ZXJuIHZhZGRyX3QgeGVuaGVhcF92aXJ0X3N0YXJ0OwogI2VuZGlmCiAK
ICNpZmRlZiBDT05GSUdfQVJNXzMyCi0jZGVmaW5lIGlzX3hlbl9oZWFwX3BhZ2UocGFnZSkgaXNf
eGVuX2hlYXBfbWZuKG1mbl94KHBhZ2VfdG9fbWZuKHBhZ2UpKSkKKyNkZWZpbmUgaXNfeGVuX2hl
YXBfcGFnZShwYWdlKSBpc194ZW5faGVhcF9tZm4ocGFnZV90b19tZm4ocGFnZSkpCiAjZGVmaW5l
IGlzX3hlbl9oZWFwX21mbihtZm4pICh7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
XAotICAgIHVuc2lnbmVkIGxvbmcgbWZuXyA9IChtZm4pOyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFwKKyAgICB1bnNpZ25lZCBsb25nIG1mbl8gPSBtZm5feChtZm4pOyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBcCiAgICAgKG1mbl8gPj0gbWZuX3goeGVuaGVhcF9tZm5fc3Rh
cnQpICYmICAgICAgICAgICAgICAgICAgICAgICAgXAogICAgICBtZm5fIDwgbWZuX3goeGVuaGVh
cF9tZm5fZW5kKSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKIH0pCiAjZWxzZQogI2Rl
ZmluZSBpc194ZW5faGVhcF9wYWdlKHBhZ2UpICgocGFnZSktPmNvdW50X2luZm8gJiBQR0NfeGVu
X2hlYXApCiAjZGVmaW5lIGlzX3hlbl9oZWFwX21mbihtZm4pIFwKLSAgICAobWZuX3ZhbGlkKF9t
Zm4obWZuKSkgJiYgaXNfeGVuX2hlYXBfcGFnZShtZm5fdG9fcGFnZShfbWZuKG1mbikpKSkKKyAg
ICAobWZuX3ZhbGlkKG1mbikgJiYgaXNfeGVuX2hlYXBfcGFnZShtZm5fdG9fcGFnZShtZm4pKSkK
ICNlbmRpZgogCiAjZGVmaW5lIGlzX3hlbl9maXhlZF9tZm4obWZuKSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgXApAQCAtMjQ2LDcgKzI0Niw3IEBAIHN0YXRpYyBpbmxpbmUgcGFk
ZHJfdCBfX3ZpcnRfdG9fbWFkZHIodmFkZHJfdCB2YSkKICNpZmRlZiBDT05GSUdfQVJNXzMyCiBz
dGF0aWMgaW5saW5lIHZvaWQgKm1hZGRyX3RvX3ZpcnQocGFkZHJfdCBtYSkKIHsKLSAgICBBU1NF
UlQoaXNfeGVuX2hlYXBfbWZuKG1hID4+IFBBR0VfU0hJRlQpKTsKKyAgICBBU1NFUlQoaXNfeGVu
X2hlYXBfbWZuKG1hZGRyX3RvX21mbihtYSkpKTsKICAgICBtYSAtPSBtZm5fdG9fbWFkZHIoeGVu
aGVhcF9tZm5fc3RhcnQpOwogICAgIHJldHVybiAodm9pZCAqKSh1bnNpZ25lZCBsb25nKSBtYSAr
IFhFTkhFQVBfVklSVF9TVEFSVDsKIH0KZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL2FzbS14ODYv
bW0uaCBiL3hlbi9pbmNsdWRlL2FzbS14ODYvbW0uaAppbmRleCBmMTI0ZjU3OTY0Li42Zjc2ZjAw
NGFiIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L21tLmgKKysrIGIveGVuL2luY2x1
ZGUvYXNtLXg4Ni9tbS5oCkBAIC0yNzgsNyArMjc4LDcgQEAgc3RydWN0IHBhZ2VfaW5mbwogCiAj
ZGVmaW5lIGlzX3hlbl9oZWFwX3BhZ2UocGFnZSkgKChwYWdlKS0+Y291bnRfaW5mbyAmIFBHQ194
ZW5faGVhcCkKICNkZWZpbmUgaXNfeGVuX2hlYXBfbWZuKG1mbikgXAotICAgIChfX21mbl92YWxp
ZChtZm4pICYmIGlzX3hlbl9oZWFwX3BhZ2UobWZuX3RvX3BhZ2UoX21mbihtZm4pKSkpCisgICAg
KG1mbl92YWxpZChtZm4pICYmIGlzX3hlbl9oZWFwX3BhZ2UobWZuX3RvX3BhZ2UobWZuKSkpCiAj
ZGVmaW5lIGlzX3hlbl9maXhlZF9tZm4obWZuKSAgICAgICAgICAgICAgICAgICAgIFwKICAgICAo
KChtZm5fdG9fbWFkZHIobWZuKSkgPj0gX19wYSgmX3N0ZXh0KSkgJiYgICAgXAogICAgICAoKG1m
bl90b19tYWRkcihtZm4pKSA8PSBfX3BhKCZfXzJNX3J3ZGF0YV9lbmQpKSkKLS0gCjIuMTEuMAoK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZl
bCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlz
dHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

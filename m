Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2244310C509
	for <lists+xen-devel@lfdr.de>; Thu, 28 Nov 2019 09:24:04 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iaF3x-0003yh-86; Thu, 28 Nov 2019 08:22:09 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=ofoG=ZU=linux.intel.com=yi.y.sun@srs-us1.protection.inumbo.net>)
 id 1iaF3v-0003yc-R2
 for xen-devel@lists.xenproject.org; Thu, 28 Nov 2019 08:22:07 +0000
X-Inumbo-ID: 29d6ddee-11b8-11ea-a3cc-12813bfff9fa
Received: from mga09.intel.com (unknown [134.134.136.24])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 29d6ddee-11b8-11ea-a3cc-12813bfff9fa;
 Thu, 28 Nov 2019 08:22:06 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 28 Nov 2019 00:22:05 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.69,252,1571727600"; d="scan'208";a="261237859"
Received: from yisun1-ubuntu.bj.intel.com (HELO localhost) ([10.238.156.100])
 by FMSMGA003.fm.intel.com with ESMTP; 28 Nov 2019 00:22:04 -0800
Date: Thu, 28 Nov 2019 16:17:06 +0800
From: Yi Sun <yi.y.sun@linux.intel.com>
To: Jan Beulich <jbeulich@suse.com>
Message-ID: <20191128081706.GT18465@yi.y.sun>
References: <1574835871-5005-1-git-send-email-yi.y.sun@linux.intel.com>
 <accd9696-9215-c1b3-9223-a2a3f783da4f@suse.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <accd9696-9215-c1b3-9223-a2a3f783da4f@suse.com>
User-Agent: Mutt/1.5.21 (2010-09-15)
Subject: Re: [Xen-devel] [PATCH v1] psr: fix bug which may cause crash
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: xen-devel@lists.xenproject.org, andrew.cooper3@citrix.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMTktMTEtMjcgMTE6MDY6NDksIEphbiBCZXVsaWNoIHdyb3RlOgo+IE9uIDI3LjExLjIwMTkg
MDc6MjQsIFlpIFN1biB3cm90ZToKPiA+IER1cmluZyB0ZXN0LCB3ZSBmb3VuZCBhIGNyYXNoIG9u
IFhlbiB3aXRoIGJlbG93IHRyYWNlLgo+ID4gKFhFTikgWGVuIGNhbGwgdHJhY2U6Cj4gPiAoWEVO
KSAgICBbPGZmZmY4MmQwODAyYTA2NWE+XSBSIHBzci5jI2wzX2NkcF93cml0ZV9tc3IrMHgxZS8w
eDIyCj4gPiAoWEVOKSAgICBbPGZmZmY4MmQwODAyYTA4NTg+XSBGIHBzci5jI2RvX3dyaXRlX3Bz
cl9tc3JzKzB4NmQvMHgxMDkKPiA+IChYRU4pICAgIFs8ZmZmZjgyZDA4MDIzZTAwMD5dIEYgc21w
X2NhbGxfZnVuY3Rpb25faW50ZXJydXB0KzB4NWEvMHhhYwo+ID4gKFhFTikgICAgWzxmZmZmODJk
MDgwMmEyYjg5Pl0gRiBjYWxsX2Z1bmN0aW9uX2ludGVycnVwdCsweDIwLzB4MzQKPiA+IChYRU4p
ICAgIFs8ZmZmZjgyZDA4MDI4MmM2ND5dIEYgZG9fSVJRKzB4MTc1LzB4NmFlCj4gPiAoWEVOKSAg
ICBbPGZmZmY4MmQwODAzOGI4YmE+XSBGIGNvbW1vbl9pbnRlcnJ1cHQrMHgxMGEvMHgxMjAKPiA+
IChYRU4pICAgIFs8ZmZmZjgyZDA4MDJlYzYxNj5dIEYgY3B1X2lkbGUuYyNhY3BpX2lkbGVfZG9f
ZW50cnkrMHg5ZC8weGIxCj4gPiAoWEVOKSAgICBbPGZmZmY4MmQwODAyZWNjMDE+XSBGIGNwdV9p
ZGxlLmMjYWNwaV9wcm9jZXNzb3JfaWRsZSsweDQxZC8weDYyNgo+ID4gKFhFTikgICAgWzxmZmZm
ODJkMDgwMjczNTNiPl0gRiBkb21haW4uYyNpZGxlX2xvb3ArMHhhNS8weGE3Cj4gPiAoWEVOKQo+
ID4gKFhFTikKPiA+IChYRU4pICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioKPiA+IChYRU4pIFBhbmljIG9uIENQVSAyMDoKPiA+IChYRU4pIEdFTkVSQUwgUFJPVEVDVElP
TiBGQVVMVAo+ID4gKFhFTikgW2Vycm9yX2NvZGU9MDAwMF0KPiA+IChYRU4pICoqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioKPiA+IAo+ID4gUm9vdCBjYXVzZSBpcyB0aGF0
IHRoZSBjYWNoZSBvZiBDT1MgcmVnaXN0ZXJzIGFyZSBub3QgaW5pdGlhbGl6ZWQKPiA+IGZvciBD
QVQvQ0RQIHdoaWNoIGhhdmUgbm9uLXplcm8gZGVmYXVsdCB2YWx1ZS4gVGhhdCBjYXVzZXMgaW52
YWxpZAo+ID4gd3JpdGUgdG8gTVNSIHdoZW4gQ09TIGlkIGhhcyBleGNlZWRlZCB0aGUgbWF4IG51
bWJlci4uIFNvIGZpeCBpdCBieQo+ID4gaW5pdGlhbGl6aW5nIHRoZSBjYWNoZS4KPiAKPiBJJ20g
c3RydWdnbGluZyB3aXRoIHRoaXMgZGVzY3JpcHRpb24sIGZpcnN0IGFuZCBmb3JlbW9zdCBiZWNh
dXNlCj4gdGhlcmUncyBubyAocmVjb2duaXphYmxlIHRvIG1lKSBjb25uZWN0aW9uIGJldHdlZW4g
dGhlIHN1cHBvc2VkCj4gcm9vdCBjYXVzZSBhbmQgdGhlIGNyYXNoLiBFeGNlZWRpbmcgdGhlIG1h
eGltdW0gbnVtYmVyIGlzIGEgYnVnIGluCj4gc29tZSBsb29wJ3MgYm91bmRzIEkgd291bGQgc2F5
LCBub3QgYW4gb21pc3Npb24gb2YgY2FjaGVkIHZhbHVlCj4gaW5pdGlhbGl6YXRpb24uIEluIHBh
cnRpY3VsYXIgSSBzZWUgaW4gZG9fd3JpdGVfcHNyX21zcnMoKQo+IAo+ICAgICAgICAgZm9yICgg
aiA9IDA7IGogPCBjb3NfbnVtOyBqKyssIGluZGV4KysgKQo+ICAgICAgICAgewo+ICAgICAgICAg
ICAgIGlmICggZmVhdC0+Y29zX3JlZ192YWxbY29zICogY29zX251bSArIGpdICE9IGluZm8tPnZh
bFtpbmRleF0gKQo+ICAgICAgICAgICAgIHsKPiAgICAgICAgICAgICAgICAgZmVhdC0+Y29zX3Jl
Z192YWxbY29zICogY29zX251bSArIGpdID0gaW5mby0+dmFsW2luZGV4XTsKPiAgICAgICAgICAg
ICAgICAgcHJvcHMtPndyaXRlX21zcihjb3MsIGluZm8tPnZhbFtpbmRleF0sIHByb3BzLT50eXBl
W2pdKTsKPiAgICAgICAgICAgICB9Cj4gICAgICAgICB9Cj4gClNvcnJ5LCBteSBkZXNjcmlwdGlv
biBpcyBub3QgY2xlYXIuIFRoZSBidWcgaGFwcGVucyB3aGVuIENEUCBhbmQgTUJBCmNvLWV4aXN0
IGFuZCBNQkEgQ09TX01BWCBpcyBiaWdnZXIgdGhhbiBDRFAgQ09TX01BWC4gRS5nLiBNQkEgaGFz
IDgKQ09TIHJlZ2lzdGVycyBidXQgQ0RQIG9ubHkgaGF2ZSA2LiBXaGVuIHNldHRpbmcgTUJBIHRo
cm90dGxpbmcgdmFsdWUKZm9yIHRoZSA3dGggZ3Vlc3QsIHRoZSB2YWx1ZSBhcnJheSB3b3VsZCBi
ZToKICAgICstLS0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0t
LS0tKwogICAgfCBEYXRhIGRlZmF1bHQgdmFsIHwgQ29kZSBkZWZhdWx0IHZhbCB8IE1CQSB0aHJv
dHRsZSB8CiAgICArLS0tLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLSstLS0tLS0t
LS0tLS0tLSsKCldlIHNob3VsZCBhdm9pZCB3cml0dGluZyBDRFAgZGF0YS9jb2RlIHZhbHVsZXMg
dG8gTVNSIGhlcmUuIFRoaXMgc2hvdWxkCmJlIHByZXZlbnRlZCBieToKICAgIGlmICggZmVhdC0+
Y29zX3JlZ192YWxbY29zICogY29zX251bSArIGpdICE9IGluZm8tPnZhbFtpbmRleF0gKQoKQnV0
IHRoZSB3aG9sZSBjb3NfcmVnX3ZhbFtdIGlzIG5vdCBpbml0aWFsaXplZCB0byBkZWZhdWx0IHZh
bHVlIHNvIHRoYXQKdGhlIGNoZWNrIGNhbm5vdCBwcmV2ZW50IGRlZmF1bHQgdmFsdWUgc2V0dGlu
Zy4KCj4gQWZhaWN0IHRoZSBtYWtlcyBjbGVhciB0aGF0IHZhbHVlcyBmb3VuZCBpbiAtPmNvc19y
ZWdfdmFsW10gd291bGQKPiBuZXZlciBnZXQgd3JpdHRlbiBvdXQgKHdoaWNoIGZpdHMgaXQgYmVp
bmcganVzdCBhIGNhY2hlKS4gSWYKPiBhbnl0aGluZywgYSAicmFuZG9tIiBtYXRjaCBvZiB0aGUg
Y2FjaGUgdmFsdWUgYW5kIHRoZSB0d28gYmUKPiB3cml0dGVuIHZhbHVlIHdvdWxkIF9wcmV2ZW50
XyBhbiBNU1Igd3JpdGUgZGVzcGl0ZSBwb3RlbnRpYWxseQo+IHRoZSBNU1IgaW4gZmFjdCBjdXJy
ZW50bHkgaG9sZGluZyBhIGRpZmZlcmVudCB2YWx1ZS4KPiAKPiBOZXZlcnRoZWxlc3MgYSBmZXcg
cmVtYXJrcyBvbiB0aGUgcGF0Y2ggaXRzZWxmLCBqdXN0IGluIGNhc2UKPiBpdCdzIGp1c3QgdGhl
IGRlc2NyaXB0aW9uIHRoYXQgaGFzIG1pc2d1aWRlZCBtZS4KPiAKPiA+IC0tLSBhL3hlbi9hcmNo
L3g4Ni9wc3IuYwo+ID4gKysrIGIveGVuL2FyY2gveDg2L3Bzci5jCj4gPiBAQCAtMzE2LDYgKzMx
Niw3IEBAIHN0YXRpYyBib29sIGNhdF9pbml0X2ZlYXR1cmUoY29uc3Qgc3RydWN0IGNwdWlkX2xl
YWYgKnJlZ3MsCj4gPiAgICAgICAgICBbRkVBVF9UWVBFX0wzX0NEUF0gPSAiTDMgQ0RQIiwKPiA+
ICAgICAgICAgIFtGRUFUX1RZUEVfTDJfQ0FUXSA9ICJMMiBDQVQiLAo+ID4gICAgICB9Owo+ID4g
KyAgICB1bnNpZ25lZCBpbnQgaSA9IDA7Cj4gCj4gVW5uZWNlc3NhcnkgaW5pdGlhbGl6ZXIgYW5k
IHRvbyB3aWRlIGEgc2NvcGUuCj4gCk9rLCB1OCBpcyBlbm91Z2guCgo+ID4gQEAgLTMzMiw3ICsz
MzMsOCBAQCBzdGF0aWMgYm9vbCBjYXRfaW5pdF9mZWF0dXJlKGNvbnN0IHN0cnVjdCBjcHVpZF9s
ZWFmICpyZWdzLAo+ID4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKPiA+ICAKPiA+ICAgICAg
ICAgIC8qIFdlIHJlc2VydmUgY29zPTAgYXMgZGVmYXVsdCBjYm0gKGFsbCBiaXRzIHdpdGhpbiBj
Ym1fbGVuIGFyZSAxKS4gKi8KPiA+IC0gICAgICAgIGZlYXQtPmNvc19yZWdfdmFsWzBdID0gY2F0
X2RlZmF1bHRfdmFsKGZlYXQtPmNhdC5jYm1fbGVuKTsKPiA+ICsgICAgICAgIGZvcihpID0gMDsg
aSA8IE1BWF9DT1NfUkVHX0NOVDsgaSsrKQo+IAo+IFRoZXJlIGFyZSBudW1iZXIgb2YgYmxhbmtz
IG1pc3NpbmcgaGVyZSAoYW5kIGV2ZW4gbW9yZSBvbmVzIGluCj4gdGhlIG90aGVyIGluc3RhbmNl
IGJlbG93KS4gSXQgYWxzbyBzZWVtcyB0byBtZSB0aGF0IHRoZSBjb21tZW50Cj4gZW5kcyB1cCBt
aXNwbGFjZWQgbm93LiBJZiAuLi4KPiAKU29ycnksIHRoZSBjb21tZW50IHNob3VsZCBiZSBtb2Rp
ZmllZC4KCj4gPiArICAgICAgICAgICAgZmVhdC0+Y29zX3JlZ192YWxbaV0gPSBjYXRfZGVmYXVs
dF92YWwoZmVhdC0+Y2F0LmNibV9sZW4pOwo+ID4gIAo+ID4gICAgICAgICAgd3Jtc3JsKCh0eXBl
ID09IEZFQVRfVFlQRV9MM19DQVQgPwo+ID4gICAgICAgICAgICAgICAgICBNU1JfSUEzMl9QU1Jf
TDNfTUFTSygwKSA6Cj4gCj4gLi4uIHRoaXMgaW5kZWVkIGlzIHRvIHJlbWFpbiBhIHNpbmdsZSB3
cml0ZSwgaXQgbWF5IHdhbnQgdG8gbW92ZQo+IGhlcmUuIEJ1dCBhcyBwZXIgYWJvdmUga2VlcGlu
ZyBjYWNoZWQgYW5kIGFjdHVhbCB2YWx1ZXMgaW4gc3luYwo+IG1heSBtYWtlIGl0IG5lY2Vzc2Fy
eSB0byBtb3ZlIHRoaXMgd3JpdGUgaW50byB0aGUgbG9vcCBhcyB3ZWxsLgo+IApZb3UgYXJlIHJp
Z2h0LCBJIG1pc3NlZCB0byBsb29wIHRoaXMgc2VudGVuY2UuCgpBbm90aGVyIGlkZWE6CkkgcmVt
ZW1iZXJlZCB0aGF0IHRoZSBvcmlnaW5hbCBwdXJwb3NlIHRvIG9ubHkgd3JpdGUgQ09TWzBdIGhl
cmUgaXMgdG8KaW1wcm92ZSBwZXJmb3JtYW5jZSBieSBub3Qgd3JpdGluZyB0b28gbWFueSBNU1Jz
LiBTbyBJIGFtIHRoaW5raW5nIHRvCmNoYW5nZSB0aGUgZml4IHRvIGJlbG93IGxpbmUgaW4gZG9f
d3JpdGVfcHNyX21zcnMoKS4KICAgIGlmICggZmVhdC0+Y29zX3JlZ192YWxbY29zICogY29zX251
bSArIGpdICE9IGluZm8tPnZhbFtpbmRleF0gJiYKICAgICAgICAgY29zIDw9IGZlYXQtPmNvc19t
YXggKQoKV2hhdCBpcyB5b3VyIG9waW5pb24/IFRoYW5rcyEKCj4gSmFuCj4gCj4gX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBYZW4tZGV2ZWwgbWFpbGlu
ZyBsaXN0Cj4gWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCj4gaHR0cHM6Ly9saXN0cy54
ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbAoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApY
ZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id D7184180CCE
	for <lists+xen-devel@lfdr.de>; Wed, 11 Mar 2020 01:26:58 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jBp9W-0002Nl-DE; Wed, 11 Mar 2020 00:23:14 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=3z/n=44=redhat.com=mcroce@srs-us1.protection.inumbo.net>)
 id 1jBp9U-0002Ng-Ov
 for xen-devel@lists.xenproject.org; Wed, 11 Mar 2020 00:23:12 +0000
X-Inumbo-ID: 7d1f1918-632e-11ea-ae8c-12813bfff9fa
Received: from us-smtp-1.mimecast.com (unknown [205.139.110.61])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTP
 id 7d1f1918-632e-11ea-ae8c-12813bfff9fa;
 Wed, 11 Mar 2020 00:23:10 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1583886190;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding;
 bh=wmOVNWU5sk2f0X2YNiN/aFt2nLXVZ8y5oHh3vhFdAik=;
 b=ELDwxQSivJ5ITa0la6lmtU335US6CZEDHKqqIhRCGx7rMNwWXC5F2+7tXoklg4X/JEewRI
 CZo2fjcjF6xh+MvktUmtF6j7yWTS8HhTXDEgzE1qy7BHt+1P1tWPMMudL4rZJ8/IqMHXHL
 BqRGu7haDl60/AxATo+tr8h07JCEf/I=
Received: from mail-wr1-f69.google.com (mail-wr1-f69.google.com
 [209.85.221.69]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-402-jFon7Y2GN3Sf0a1N-7REgA-1; Tue, 10 Mar 2020 20:23:08 -0400
X-MC-Unique: jFon7Y2GN3Sf0a1N-7REgA-1
Received: by mail-wr1-f69.google.com with SMTP id 31so96851wrq.0
 for <xen-devel@lists.xenproject.org>; Tue, 10 Mar 2020 17:23:08 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=AF0phWtBzaybkf0W4o0XLko38kCzMiwJ9FW0oNdt4Ec=;
 b=qlLgf2XCqLvDAfdmwpcWL7RFZHML86i6JTDMjdgdu/bMkdB9T3BLEMUdrby98GzfOd
 lznRm93YiKUdsLRON5nIOGEoWG0B4K7HlInn37T+9sGwL9TuD2Ca75zS2DLhjNZV5raa
 2aCNNJZpR1VWbl8+IUhJPiocA1vQCDC8jWSR1uHEFlhafwk0qTxrAo6r9zggfBczABaC
 ZVuYuN+4ZoMnrzGHXpC1Wj9u+eKnbPAkGXjirigqi9GYcAlmg/gwyFkJOQiJuDo+vRw7
 G+uHXGjW+Jkh+maL3pnRdtxild+4XSmv63jt/EZ3iCgGuhDHqfd7gxdIH0N84agwUPBI
 +L+w==
X-Gm-Message-State: ANhLgQ2rRPhQere/otKYxaqduf86mrnM/umpZTetOstBsq61SJkZ1JQa
 eVxCd6FYCXCaPtomaUB47B0nxwkdxIbVBauk+0SQlTum3HmXuQUDHYOKn/oQNb4JHoviuO3o79C
 eCP5V3m6accgFV2JgDIHS9ZVCVOY=
X-Received: by 2002:a05:600c:24b:: with SMTP id 11mr135685wmj.1.1583886186684; 
 Tue, 10 Mar 2020 17:23:06 -0700 (PDT)
X-Google-Smtp-Source: ADFU+vskya3VIJ2O35SM2qD5qkRNEFkTaIMR/iZ1Olb+WBpvswMPPj2jGybAw7/Dtv1byE5BePKdLg==
X-Received: by 2002:a05:600c:24b:: with SMTP id 11mr135633wmj.1.1583886186002; 
 Tue, 10 Mar 2020 17:23:06 -0700 (PDT)
Received: from raver.teknoraver.net (net-93-144-9-178.cust.vodafonedsl.it.
 [93.144.9.178])
 by smtp.gmail.com with ESMTPSA id c2sm6285481wma.39.2020.03.10.17.23.05
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 10 Mar 2020 17:23:05 -0700 (PDT)
From: Matteo Croce <mcroce@redhat.com>
To: linux-block@vger.kernel.org, linux-kernel@vger.kernel.org,
 linux-nvdimm@lists.01.org, linux-bcache@vger.kernel.org,
 linux-raid@vger.kernel.org, linux-mmc@vger.kernel.org,
 xen-devel@lists.xenproject.org, linux-scsi@vger.kernel.org,
 linux-nfs@vger.kernel.org
Date: Wed, 11 Mar 2020 01:22:54 +0100
Message-Id: <20200311002254.121365-1-mcroce@redhat.com>
X-Mailer: git-send-email 2.24.1
MIME-Version: 1.0
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Subject: [Xen-devel] [PATCH v3] block: refactor duplicated macros
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Jens Axboe <axboe@kernel.dk>, Ulf Hansson <ulf.hansson@linaro.org>,
 "James E.J. Bottomley" <jejb@linux.ibm.com>,
 Guoqing Jiang <guoqing.jiang@cloud.ionos.com>, Song Liu <song@kernel.org>,
 Dan Williams <dan.j.williams@intel.com>,
 Anna Schumaker <anna.schumaker@netapp.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlIG1hY3JvcyBQQUdFX1NFQ1RPUlMsIFBBR0VfU0VDVE9SU19TSElGVCBhbmQgU0VDVE9SX01B
U0sgYXJlIGRlZmluZWQKc2V2ZXJhbCB0aW1lcyBpbiBkaWZmZXJlbnQgZmxhdm91cnMgYWNyb3Nz
IHRoZSB3aG9sZSB0cmVlLgpEZWZpbmUgdGhlbSBqdXN0IG9uY2UgaW4gYSBjb21tb24gaGVhZGVy
LgoKV2hpbGUgYXQgaXQsIHJlcGxhY2UgcmVwbGFjZSAiUEFHRV9TSElGVCAtIDkiIHdpdGggIlBB
R0VfU0VDVE9SU19TSElGVCIgdG9vCmFuZCByZW5hbWUgU0VDVE9SX01BU0sgdG8gUEFHRV9TRUNU
T1JTX01BU0suCgpTaWduZWQtb2ZmLWJ5OiBNYXR0ZW8gQ3JvY2UgPG1jcm9jZUByZWRoYXQuY29t
PgotLS0KdjM6CkFzIEd1b3FpbmcgSmlhbmcgc3VnZ2VzdGVkLCByZXBsYWNlICJQQUdFX1NISUZU
IC0gOSIgd2l0aCAiUEFHRV9TRUNUT1JTX1NISUZUIgoKdjI6CkFzIERhbiBXaWxsaWFtcyBzdWdn
ZXN0ZWQ6CgogI2RlZmluZSBQQUdFX1NFQ1RPUlNfTUFTSyAgICAgICAgICAgICh+KFBBR0VfU0VD
VE9SUyAtIDEpKQoKIGJsb2NrL2Jsay1saWIuYyAgICAgICAgICAgICAgICAgIHwgIDIgKy0KIGJs
b2NrL2Jsay1zZXR0aW5ncy5jICAgICAgICAgICAgIHwgIDQgKystLQogYmxvY2svcGFydGl0aW9u
LWdlbmVyaWMuYyAgICAgICAgfCAgMiArLQogZHJpdmVycy9ibG9jay9icmQuYyAgICAgICAgICAg
ICAgfCAgMyAtLS0KIGRyaXZlcnMvYmxvY2svbnVsbF9ibGtfbWFpbi5jICAgIHwgMTQgKysrKyst
LS0tLS0tLS0KIGRyaXZlcnMvYmxvY2svenJhbS96cmFtX2Rydi5jICAgIHwgIDggKysrKy0tLS0K
IGRyaXZlcnMvYmxvY2svenJhbS96cmFtX2Rydi5oICAgIHwgIDIgLS0KIGRyaXZlcnMvZGF4L3N1
cGVyLmMgICAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvbWQvYmNhY2hlL3V0aWwuaCAgICAg
ICAgIHwgIDIgLS0KIGRyaXZlcnMvbWQvZG0tYnVmaW8uYyAgICAgICAgICAgIHwgIDYgKysrLS0t
CiBkcml2ZXJzL21kL2RtLWludGVncml0eS5jICAgICAgICB8IDEwICsrKysrLS0tLS0KIGRyaXZl
cnMvbWQvZG0tdGFibGUuYyAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvbWQvbWQuYyAgICAg
ICAgICAgICAgICAgIHwgIDQgKystLQogZHJpdmVycy9tZC9yYWlkMS5jICAgICAgICAgICAgICAg
fCAgMiArLQogZHJpdmVycy9tZC9yYWlkMTAuYyAgICAgICAgICAgICAgfCAgMiArLQogZHJpdmVy
cy9tZC9yYWlkNS1jYWNoZS5jICAgICAgICAgfCAxMCArKysrKy0tLS0tCiBkcml2ZXJzL21kL3Jh
aWQ1LmggICAgICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL21tYy9jb3JlL2hvc3QuYyAgICAg
ICAgICB8ICAzICsrLQogZHJpdmVycy9udm1lL2hvc3QvZmMuYyAgICAgICAgICAgfCAgMiArLQog
ZHJpdmVycy9udm1lL3RhcmdldC9sb29wLmMgICAgICAgfCAgMiArLQogZHJpdmVycy9zY3NpL3hl
bi1zY3NpZnJvbnQuYyAgICAgfCAgNCArKy0tCiBmcy9lcm9mcy9pbnRlcm5hbC5oICAgICAgICAg
ICAgICB8ICAyICstCiBmcy9leHQyL2Rpci5jICAgICAgICAgICAgICAgICAgICB8ICAyICstCiBm
cy9pb21hcC9idWZmZXJlZC1pby5jICAgICAgICAgICB8ICAyICstCiBmcy9saWJmcy5jICAgICAg
ICAgICAgICAgICAgICAgICB8ICAyICstCiBmcy9uZnMvYmxvY2tsYXlvdXQvYmxvY2tsYXlvdXQu
aCB8ICAyIC0tCiBmcy9uaWxmczIvZGlyLmMgICAgICAgICAgICAgICAgICB8ICAyICstCiBpbmNs
dWRlL2xpbnV4L2Jsa2Rldi5oICAgICAgICAgICB8ICA0ICsrKysKIGluY2x1ZGUvbGludXgvZGV2
aWNlLW1hcHBlci5oICAgIHwgIDEgLQogbW0vcGFnZV9pby5jICAgICAgICAgICAgICAgICAgICAg
fCAgNCArKy0tCiBtbS9zd2FwZmlsZS5jICAgICAgICAgICAgICAgICAgICB8IDEyICsrKysrKy0t
LS0tLQogMzEgZmlsZXMgY2hhbmdlZCwgNTYgaW5zZXJ0aW9ucygrKSwgNjUgZGVsZXRpb25zKC0p
CgpkaWZmIC0tZ2l0IGEvYmxvY2svYmxrLWxpYi5jIGIvYmxvY2svYmxrLWxpYi5jCmluZGV4IDVm
MmM0MjlkNDM3OC4uZjVlNzA1ZDMwN2UwIDEwMDY0NAotLS0gYS9ibG9jay9ibGstbGliLmMKKysr
IGIvYmxvY2svYmxrLWxpYi5jCkBAIC0yNjAsNyArMjYwLDcgQEAgc3RhdGljIGludCBfX2Jsa2Rl
dl9pc3N1ZV93cml0ZV96ZXJvZXMoc3RydWN0IGJsb2NrX2RldmljZSAqYmRldiwKICAqLwogc3Rh
dGljIHVuc2lnbmVkIGludCBfX2Jsa2Rldl9zZWN0b3JzX3RvX2Jpb19wYWdlcyhzZWN0b3JfdCBu
cl9zZWN0cykKIHsKLQlzZWN0b3JfdCBwYWdlcyA9IERJVl9ST1VORF9VUF9TRUNUT1JfVChucl9z
ZWN0cywgUEFHRV9TSVpFIC8gNTEyKTsKKwlzZWN0b3JfdCBwYWdlcyA9IERJVl9ST1VORF9VUF9T
RUNUT1JfVChucl9zZWN0cywgUEFHRV9TRUNUT1JTKTsKIAogCXJldHVybiBtaW4ocGFnZXMsIChz
ZWN0b3JfdClCSU9fTUFYX1BBR0VTKTsKIH0KZGlmZiAtLWdpdCBhL2Jsb2NrL2Jsay1zZXR0aW5n
cy5jIGIvYmxvY2svYmxrLXNldHRpbmdzLmMKaW5kZXggYzhlZGEyZTdiOTFlLi5lMjk5MzM1ODFh
YzAgMTAwNjQ0Ci0tLSBhL2Jsb2NrL2Jsay1zZXR0aW5ncy5jCisrKyBiL2Jsb2NrL2Jsay1zZXR0
aW5ncy5jCkBAIC0xODYsNyArMTg2LDcgQEAgdm9pZCBibGtfcXVldWVfbWF4X2h3X3NlY3RvcnMo
c3RydWN0IHJlcXVlc3RfcXVldWUgKnEsIHVuc2lnbmVkIGludCBtYXhfaHdfc2VjdG8KIAl1bnNp
Z25lZCBpbnQgbWF4X3NlY3RvcnM7CiAKIAlpZiAoKG1heF9od19zZWN0b3JzIDw8IDkpIDwgUEFH
RV9TSVpFKSB7Ci0JCW1heF9od19zZWN0b3JzID0gMSA8PCAoUEFHRV9TSElGVCAtIDkpOworCQlt
YXhfaHdfc2VjdG9ycyA9IDEgPDwgUEFHRV9TRUNUT1JTX1NISUZUOwogCQlwcmludGsoS0VSTl9J
TkZPICIlczogc2V0IHRvIG1pbmltdW0gJWRcbiIsCiAJCSAgICAgICBfX2Z1bmNfXywgbWF4X2h3
X3NlY3RvcnMpOwogCX0KQEAgLTE5NSw3ICsxOTUsNyBAQCB2b2lkIGJsa19xdWV1ZV9tYXhfaHdf
c2VjdG9ycyhzdHJ1Y3QgcmVxdWVzdF9xdWV1ZSAqcSwgdW5zaWduZWQgaW50IG1heF9od19zZWN0
bwogCW1heF9zZWN0b3JzID0gbWluX25vdF96ZXJvKG1heF9od19zZWN0b3JzLCBsaW1pdHMtPm1h
eF9kZXZfc2VjdG9ycyk7CiAJbWF4X3NlY3RvcnMgPSBtaW5fdCh1bnNpZ25lZCBpbnQsIG1heF9z
ZWN0b3JzLCBCTEtfREVGX01BWF9TRUNUT1JTKTsKIAlsaW1pdHMtPm1heF9zZWN0b3JzID0gbWF4
X3NlY3RvcnM7Ci0JcS0+YmFja2luZ19kZXZfaW5mby0+aW9fcGFnZXMgPSBtYXhfc2VjdG9ycyA+
PiAoUEFHRV9TSElGVCAtIDkpOworCXEtPmJhY2tpbmdfZGV2X2luZm8tPmlvX3BhZ2VzID0gbWF4
X3NlY3RvcnMgPj4gUEFHRV9TRUNUT1JTX1NISUZUOwogfQogRVhQT1JUX1NZTUJPTChibGtfcXVl
dWVfbWF4X2h3X3NlY3RvcnMpOwogCmRpZmYgLS1naXQgYS9ibG9jay9wYXJ0aXRpb24tZ2VuZXJp
Yy5jIGIvYmxvY2svcGFydGl0aW9uLWdlbmVyaWMuYwppbmRleCA1NjRmYWU3NzcxMWQuLjVmMDZi
N2E2YzExOSAxMDA2NDQKLS0tIGEvYmxvY2svcGFydGl0aW9uLWdlbmVyaWMuYworKysgYi9ibG9j
ay9wYXJ0aXRpb24tZ2VuZXJpYy5jCkBAIC02MTIsNyArNjEyLDcgQEAgdW5zaWduZWQgY2hhciAq
cmVhZF9kZXZfc2VjdG9yKHN0cnVjdCBibG9ja19kZXZpY2UgKmJkZXYsIHNlY3Rvcl90IG4sIFNl
Y3RvciAqcCkKIAkJaWYgKFBhZ2VFcnJvcihwYWdlKSkKIAkJCWdvdG8gZmFpbDsKIAkJcC0+diA9
IHBhZ2U7Ci0JCXJldHVybiAodW5zaWduZWQgY2hhciAqKXBhZ2VfYWRkcmVzcyhwYWdlKSArICAo
KG4gJiAoKDEgPDwgKFBBR0VfU0hJRlQgLSA5KSkgLSAxKSkgPDwgOSk7CisJCXJldHVybiAodW5z
aWduZWQgY2hhciAqKXBhZ2VfYWRkcmVzcyhwYWdlKSArICAoKG4gJiAoKDEgPDwgUEFHRV9TRUNU
T1JTX1NISUZUKSAtIDEpKSA8PCA5KTsKIGZhaWw6CiAJCXB1dF9wYWdlKHBhZ2UpOwogCX0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvYmxvY2svYnJkLmMgYi9kcml2ZXJzL2Jsb2NrL2JyZC5jCmluZGV4
IDIyMGM1ZTE4YWJhMC4uMzNlMmNiZTExNDAwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2Jsb2NrL2Jy
ZC5jCisrKyBiL2RyaXZlcnMvYmxvY2svYnJkLmMKQEAgLTI1LDkgKzI1LDYgQEAKIAogI2luY2x1
ZGUgPGxpbnV4L3VhY2Nlc3MuaD4KIAotI2RlZmluZSBQQUdFX1NFQ1RPUlNfU0hJRlQJKFBBR0Vf
U0hJRlQgLSBTRUNUT1JfU0hJRlQpCi0jZGVmaW5lIFBBR0VfU0VDVE9SUwkJKDEgPDwgUEFHRV9T
RUNUT1JTX1NISUZUKQotCiAvKgogICogRWFjaCBibG9jayByYW1kaXNrIGRldmljZSBoYXMgYSBy
YWRpeF90cmVlIGJyZF9wYWdlcyBvZiBwYWdlcyB0aGF0IHN0b3JlcwogICogdGhlIHBhZ2VzIGNv
bnRhaW5pbmcgdGhlIGJsb2NrIGRldmljZSdzIGNvbnRlbnRzLiBBIGJyZCBwYWdlJ3MgLT5pbmRl
eCBpcwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ibG9jay9udWxsX2Jsa19tYWluLmMgYi9kcml2ZXJz
L2Jsb2NrL251bGxfYmxrX21haW4uYwppbmRleCAxNjUxMDc5NWUzNzcuLmI1ZWJkZTk3YmYwYiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9ibG9jay9udWxsX2Jsa19tYWluLmMKKysrIGIvZHJpdmVycy9i
bG9jay9udWxsX2Jsa19tYWluLmMKQEAgLTExLDEwICsxMSw2IEBACiAjaW5jbHVkZSA8bGludXgv
aW5pdC5oPgogI2luY2x1ZGUgIm51bGxfYmxrLmgiCiAKLSNkZWZpbmUgUEFHRV9TRUNUT1JTX1NI
SUZUCShQQUdFX1NISUZUIC0gU0VDVE9SX1NISUZUKQotI2RlZmluZSBQQUdFX1NFQ1RPUlMJCSgx
IDw8IFBBR0VfU0VDVE9SU19TSElGVCkKLSNkZWZpbmUgU0VDVE9SX01BU0sJCShQQUdFX1NFQ1RP
UlMgLSAxKQotCiAjZGVmaW5lIEZSRUVfQkFUQ0gJCTE2CiAKICNkZWZpbmUgVElDS1NfUEVSX1NF
QwkJNTBVTEwKQEAgLTcyMSw3ICs3MTcsNyBAQCBzdGF0aWMgdm9pZCBudWxsX2ZyZWVfc2VjdG9y
KHN0cnVjdCBudWxsYiAqbnVsbGIsIHNlY3Rvcl90IHNlY3RvciwKIAogCXJvb3QgPSBpc19jYWNo
ZSA/ICZudWxsYi0+ZGV2LT5jYWNoZSA6ICZudWxsYi0+ZGV2LT5kYXRhOwogCWlkeCA9IHNlY3Rv
ciA+PiBQQUdFX1NFQ1RPUlNfU0hJRlQ7Ci0Jc2VjdG9yX2JpdCA9IChzZWN0b3IgJiBTRUNUT1Jf
TUFTSyk7CisJc2VjdG9yX2JpdCA9IChzZWN0b3IgJiBQQUdFX1NFQ1RPUlNfTUFTSyk7CiAKIAl0
X3BhZ2UgPSByYWRpeF90cmVlX2xvb2t1cChyb290LCBpZHgpOwogCWlmICh0X3BhZ2UpIHsKQEAg
LTc5Miw3ICs3ODgsNyBAQCBzdGF0aWMgc3RydWN0IG51bGxiX3BhZ2UgKl9fbnVsbF9sb29rdXBf
cGFnZShzdHJ1Y3QgbnVsbGIgKm51bGxiLAogCXN0cnVjdCByYWRpeF90cmVlX3Jvb3QgKnJvb3Q7
CiAKIAlpZHggPSBzZWN0b3IgPj4gUEFHRV9TRUNUT1JTX1NISUZUOwotCXNlY3Rvcl9iaXQgPSAo
c2VjdG9yICYgU0VDVE9SX01BU0spOworCXNlY3Rvcl9iaXQgPSAoc2VjdG9yICYgUEFHRV9TRUNU
T1JTX01BU0spOwogCiAJcm9vdCA9IGlzX2NhY2hlID8gJm51bGxiLT5kZXYtPmNhY2hlIDogJm51
bGxiLT5kZXYtPmRhdGE7CiAJdF9wYWdlID0gcmFkaXhfdHJlZV9sb29rdXAocm9vdCwgaWR4KTsK
QEAgLTk2Nyw3ICs5NjMsNyBAQCBzdGF0aWMgaW50IGNvcHlfdG9fbnVsbGIoc3RydWN0IG51bGxi
ICpudWxsYiwgc3RydWN0IHBhZ2UgKnNvdXJjZSwKIAkJaWYgKG51bGxfY2FjaGVfYWN0aXZlKG51
bGxiKSAmJiAhaXNfZnVhKQogCQkJbnVsbF9tYWtlX2NhY2hlX3NwYWNlKG51bGxiLCBQQUdFX1NJ
WkUpOwogCi0JCW9mZnNldCA9IChzZWN0b3IgJiBTRUNUT1JfTUFTSykgPDwgU0VDVE9SX1NISUZU
OworCQlvZmZzZXQgPSAoc2VjdG9yICYgUEFHRV9TRUNUT1JTX01BU0spIDw8IFNFQ1RPUl9TSElG
VDsKIAkJdF9wYWdlID0gbnVsbF9pbnNlcnRfcGFnZShudWxsYiwgc2VjdG9yLAogCQkJIW51bGxf
Y2FjaGVfYWN0aXZlKG51bGxiKSB8fCBpc19mdWEpOwogCQlpZiAoIXRfcGFnZSkKQEAgLTk3OSw3
ICs5NzUsNyBAQCBzdGF0aWMgaW50IGNvcHlfdG9fbnVsbGIoc3RydWN0IG51bGxiICpudWxsYiwg
c3RydWN0IHBhZ2UgKnNvdXJjZSwKIAkJa3VubWFwX2F0b21pYyhkc3QpOwogCQlrdW5tYXBfYXRv
bWljKHNyYyk7CiAKLQkJX19zZXRfYml0KHNlY3RvciAmIFNFQ1RPUl9NQVNLLCB0X3BhZ2UtPmJp
dG1hcCk7CisJCV9fc2V0X2JpdChzZWN0b3IgJiBQQUdFX1NFQ1RPUlNfTUFTSywgdF9wYWdlLT5i
aXRtYXApOwogCiAJCWlmIChpc19mdWEpCiAJCQludWxsX2ZyZWVfc2VjdG9yKG51bGxiLCBzZWN0
b3IsIHRydWUpOwpAQCAtMTAwMSw3ICs5OTcsNyBAQCBzdGF0aWMgaW50IGNvcHlfZnJvbV9udWxs
YihzdHJ1Y3QgbnVsbGIgKm51bGxiLCBzdHJ1Y3QgcGFnZSAqZGVzdCwKIAl3aGlsZSAoY291bnQg
PCBuKSB7CiAJCXRlbXAgPSBtaW5fdChzaXplX3QsIG51bGxiLT5kZXYtPmJsb2Nrc2l6ZSwgbiAt
IGNvdW50KTsKIAotCQlvZmZzZXQgPSAoc2VjdG9yICYgU0VDVE9SX01BU0spIDw8IFNFQ1RPUl9T
SElGVDsKKwkJb2Zmc2V0ID0gKHNlY3RvciAmIFBBR0VfU0VDVE9SU19NQVNLKSA8PCBTRUNUT1Jf
U0hJRlQ7CiAJCXRfcGFnZSA9IG51bGxfbG9va3VwX3BhZ2UobnVsbGIsIHNlY3RvciwgZmFsc2Us
CiAJCQkhbnVsbF9jYWNoZV9hY3RpdmUobnVsbGIpKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9i
bG9jay96cmFtL3pyYW1fZHJ2LmMgYi9kcml2ZXJzL2Jsb2NrL3pyYW0venJhbV9kcnYuYwppbmRl
eCAxYmRiNTc5Mzg0MmIuLjcyNWJkMzNmMzAyZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ibG9jay96
cmFtL3pyYW1fZHJ2LmMKKysrIGIvZHJpdmVycy9ibG9jay96cmFtL3pyYW1fZHJ2LmMKQEAgLTE1
NDgsOSArMTU0OCw5IEBAIHN0YXRpYyB2b2lkIF9fenJhbV9tYWtlX3JlcXVlc3Qoc3RydWN0IHpy
YW0gKnpyYW0sIHN0cnVjdCBiaW8gKmJpbykKIAlzdHJ1Y3QgYmlvX3ZlYyBidmVjOwogCXN0cnVj
dCBidmVjX2l0ZXIgaXRlcjsKIAotCWluZGV4ID0gYmlvLT5iaV9pdGVyLmJpX3NlY3RvciA+PiBT
RUNUT1JTX1BFUl9QQUdFX1NISUZUOworCWluZGV4ID0gYmlvLT5iaV9pdGVyLmJpX3NlY3RvciA+
PiBQQUdFX1NFQ1RPUlNfU0hJRlQ7CiAJb2Zmc2V0ID0gKGJpby0+YmlfaXRlci5iaV9zZWN0b3Ig
JgotCQkgIChTRUNUT1JTX1BFUl9QQUdFIC0gMSkpIDw8IFNFQ1RPUl9TSElGVDsKKwkJICBQQUdF
X1NFQ1RPUlNfTUFTSykgPDwgU0VDVE9SX1NISUZUOwogCiAJc3dpdGNoIChiaW9fb3AoYmlvKSkg
ewogCWNhc2UgUkVRX09QX0RJU0NBUkQ6CkBAIC0xNjQzLDggKzE2NDMsOCBAQCBzdGF0aWMgaW50
IHpyYW1fcndfcGFnZShzdHJ1Y3QgYmxvY2tfZGV2aWNlICpiZGV2LCBzZWN0b3JfdCBzZWN0b3Is
CiAJCWdvdG8gb3V0OwogCX0KIAotCWluZGV4ID0gc2VjdG9yID4+IFNFQ1RPUlNfUEVSX1BBR0Vf
U0hJRlQ7Ci0Jb2Zmc2V0ID0gKHNlY3RvciAmIChTRUNUT1JTX1BFUl9QQUdFIC0gMSkpIDw8IFNF
Q1RPUl9TSElGVDsKKwlpbmRleCA9IHNlY3RvciA+PiBQQUdFX1NFQ1RPUlNfU0hJRlQ7CisJb2Zm
c2V0ID0gKHNlY3RvciAmIFBBR0VfU0VDVE9SU19NQVNLKSA8PCBTRUNUT1JfU0hJRlQ7CiAKIAli
di5idl9wYWdlID0gcGFnZTsKIAlidi5idl9sZW4gPSBQQUdFX1NJWkU7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL2Jsb2NrL3pyYW0venJhbV9kcnYuaCBiL2RyaXZlcnMvYmxvY2svenJhbS96cmFtX2Ry
di5oCmluZGV4IGYyZmQ0NmRhYTc2MC4uMTIzMDkxNzVkNTVlIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2Jsb2NrL3pyYW0venJhbV9kcnYuaAorKysgYi9kcml2ZXJzL2Jsb2NrL3pyYW0venJhbV9kcnYu
aApAQCAtMjEsOCArMjEsNiBAQAogCiAjaW5jbHVkZSAiemNvbXAuaCIKIAotI2RlZmluZSBTRUNU
T1JTX1BFUl9QQUdFX1NISUZUCShQQUdFX1NISUZUIC0gU0VDVE9SX1NISUZUKQotI2RlZmluZSBT
RUNUT1JTX1BFUl9QQUdFCSgxIDw8IFNFQ1RPUlNfUEVSX1BBR0VfU0hJRlQpCiAjZGVmaW5lIFpS
QU1fTE9HSUNBTF9CTE9DS19TSElGVCAxMgogI2RlZmluZSBaUkFNX0xPR0lDQUxfQkxPQ0tfU0la
RQkoMSA8PCBaUkFNX0xPR0lDQUxfQkxPQ0tfU0hJRlQpCiAjZGVmaW5lIFpSQU1fU0VDVE9SX1BF
Ul9MT0dJQ0FMX0JMT0NLCVwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZGF4L3N1cGVyLmMgYi9kcml2
ZXJzL2RheC9zdXBlci5jCmluZGV4IDBhYTRiNmJjNTEwMS4uN2Y3NjcyZjcyMDg1IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2RheC9zdXBlci5jCisrKyBiL2RyaXZlcnMvZGF4L3N1cGVyLmMKQEAgLTky
LDcgKzkyLDcgQEAgYm9vbCBfX2dlbmVyaWNfZnNkYXhfc3VwcG9ydGVkKHN0cnVjdCBkYXhfZGV2
aWNlICpkYXhfZGV2LAogCQlyZXR1cm4gZmFsc2U7CiAJfQogCi0JbGFzdF9wYWdlID0gUEZOX0RP
V04oKHN0YXJ0ICsgc2VjdG9ycyAtIDEpICogNTEyKSAqIFBBR0VfU0laRSAvIDUxMjsKKwlsYXN0
X3BhZ2UgPSBQRk5fRE9XTigoc3RhcnQgKyBzZWN0b3JzIC0gMSkgKiA1MTIpICogUEFHRV9TRUNU
T1JTOwogCWVyciA9IGJkZXZfZGF4X3Bnb2ZmKGJkZXYsIGxhc3RfcGFnZSwgUEFHRV9TSVpFLCAm
cGdvZmZfZW5kKTsKIAlpZiAoZXJyKSB7CiAJCXByX2RlYnVnKCIlczogZXJyb3I6IHVuYWxpZ25l
ZCBwYXJ0aXRpb24gZm9yIGRheFxuIiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbWQvYmNhY2hlL3V0
aWwuaCBiL2RyaXZlcnMvbWQvYmNhY2hlL3V0aWwuaAppbmRleCBjMDI5Zjc0NDMxOTAuLjU1MTk2
ZTBmMzdjMyAxMDA2NDQKLS0tIGEvZHJpdmVycy9tZC9iY2FjaGUvdXRpbC5oCisrKyBiL2RyaXZl
cnMvbWQvYmNhY2hlL3V0aWwuaApAQCAtMTUsOCArMTUsNiBAQAogCiAjaW5jbHVkZSAiY2xvc3Vy
ZS5oIgogCi0jZGVmaW5lIFBBR0VfU0VDVE9SUwkJKFBBR0VfU0laRSAvIDUxMikKLQogc3RydWN0
IGNsb3N1cmU7CiAKICNpZmRlZiBDT05GSUdfQkNBQ0hFX0RFQlVHCmRpZmYgLS1naXQgYS9kcml2
ZXJzL21kL2RtLWJ1ZmlvLmMgYi9kcml2ZXJzL21kL2RtLWJ1ZmlvLmMKaW5kZXggMmQ1MTljMjIz
NTYyLi5mNDQ5NmNlMGQ1OTggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbWQvZG0tYnVmaW8uYworKysg
Yi9kcml2ZXJzL21kL2RtLWJ1ZmlvLmMKQEAgLTM4NCw3ICszODQsNyBAQCBzdGF0aWMgdm9pZCAq
YWxsb2NfYnVmZmVyX2RhdGEoc3RydWN0IGRtX2J1ZmlvX2NsaWVudCAqYywgZ2ZwX3QgZ2ZwX21h
c2ssCiAJICAgIGdmcF9tYXNrICYgX19HRlBfTk9SRVRSWSkgewogCQkqZGF0YV9tb2RlID0gREFU
QV9NT0RFX0dFVF9GUkVFX1BBR0VTOwogCQlyZXR1cm4gKHZvaWQgKilfX2dldF9mcmVlX3BhZ2Vz
KGdmcF9tYXNrLAotCQkJCQkJYy0+c2VjdG9yc19wZXJfYmxvY2tfYml0cyAtIChQQUdFX1NISUZU
IC0gU0VDVE9SX1NISUZUKSk7CisJCQkJCQljLT5zZWN0b3JzX3Blcl9ibG9ja19iaXRzIC0gUEFH
RV9TRUNUT1JTX1NISUZUKTsKIAl9CiAKIAkqZGF0YV9tb2RlID0gREFUQV9NT0RFX1ZNQUxMT0M7
CkBAIC00MjIsNyArNDIyLDcgQEAgc3RhdGljIHZvaWQgZnJlZV9idWZmZXJfZGF0YShzdHJ1Y3Qg
ZG1fYnVmaW9fY2xpZW50ICpjLAogCiAJY2FzZSBEQVRBX01PREVfR0VUX0ZSRUVfUEFHRVM6CiAJ
CWZyZWVfcGFnZXMoKHVuc2lnbmVkIGxvbmcpZGF0YSwKLQkJCSAgIGMtPnNlY3RvcnNfcGVyX2Js
b2NrX2JpdHMgLSAoUEFHRV9TSElGVCAtIFNFQ1RPUl9TSElGVCkpOworCQkJICAgYy0+c2VjdG9y
c19wZXJfYmxvY2tfYml0cyAtIFBBR0VfU0VDVE9SU19TSElGVCk7CiAJCWJyZWFrOwogCiAJY2Fz
ZSBEQVRBX01PREVfVk1BTExPQzoKQEAgLTU5Nyw3ICs1OTcsNyBAQCBzdGF0aWMgdm9pZCB1c2Vf
YmlvKHN0cnVjdCBkbV9idWZmZXIgKmIsIGludCBydywgc2VjdG9yX3Qgc2VjdG9yLAogCXVuc2ln
bmVkIHZlY19zaXplLCBsZW47CiAKIAl2ZWNfc2l6ZSA9IGItPmMtPmJsb2NrX3NpemUgPj4gUEFH
RV9TSElGVDsKLQlpZiAodW5saWtlbHkoYi0+Yy0+c2VjdG9yc19wZXJfYmxvY2tfYml0cyA8IFBB
R0VfU0hJRlQgLSBTRUNUT1JfU0hJRlQpKQorCWlmICh1bmxpa2VseShiLT5jLT5zZWN0b3JzX3Bl
cl9ibG9ja19iaXRzIDwgUEFHRV9TRUNUT1JTX1NISUZUKSkKIAkJdmVjX3NpemUgKz0gMjsKIAog
CWJpbyA9IGJpb19rbWFsbG9jKEdGUF9OT1dBSVQgfCBfX0dGUF9OT1JFVFJZIHwgX19HRlBfTk9X
QVJOLCB2ZWNfc2l6ZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL21kL2RtLWludGVncml0eS5jIGIv
ZHJpdmVycy9tZC9kbS1pbnRlZ3JpdHkuYwppbmRleCBiMjI1YjNlNDQ1ZmEuLjRlNjBjZGE0NjVj
YyAxMDA2NDQKLS0tIGEvZHJpdmVycy9tZC9kbS1pbnRlZ3JpdHkuYworKysgYi9kcml2ZXJzL21k
L2RtLWludGVncml0eS5jCkBAIC02NTIsNyArNjUyLDcgQEAgc3RhdGljIHZvaWQgcGFnZV9saXN0
X2xvY2F0aW9uKHN0cnVjdCBkbV9pbnRlZ3JpdHlfYyAqaWMsIHVuc2lnbmVkIHNlY3Rpb24sIHVu
c2kKIAogCXNlY3RvciA9IHNlY3Rpb24gKiBpYy0+am91cm5hbF9zZWN0aW9uX3NlY3RvcnMgKyBv
ZmZzZXQ7CiAKLQkqcGxfaW5kZXggPSBzZWN0b3IgPj4gKFBBR0VfU0hJRlQgLSBTRUNUT1JfU0hJ
RlQpOworCSpwbF9pbmRleCA9IHNlY3RvciA+PiBQQUdFX1NFQ1RPUlNfU0hJRlQ7CiAJKnBsX29m
ZnNldCA9IChzZWN0b3IgPDwgU0VDVE9SX1NISUZUKSAmIChQQUdFX1NJWkUgLSAxKTsKIH0KIApA
QCAtOTUxLDcgKzk1MSw3IEBAIHN0YXRpYyB2b2lkIHJ3X2pvdXJuYWxfc2VjdG9ycyhzdHJ1Y3Qg
ZG1faW50ZWdyaXR5X2MgKmljLCBpbnQgb3AsIGludCBvcF9mbGFncywKIAkJcmV0dXJuOwogCX0K
IAotCXBsX2luZGV4ID0gc2VjdG9yID4+IChQQUdFX1NISUZUIC0gU0VDVE9SX1NISUZUKTsKKwlw
bF9pbmRleCA9IHNlY3RvciA+PiBQQUdFX1NFQ1RPUlNfU0hJRlQ7CiAJcGxfb2Zmc2V0ID0gKHNl
Y3RvciA8PCBTRUNUT1JfU0hJRlQpICYgKFBBR0VfU0laRSAtIDEpOwogCiAJaW9fcmVxLmJpX29w
ID0gb3A7CkBAIC0xMDcyLDcgKzEwNzIsNyBAQCBzdGF0aWMgdm9pZCBjb3B5X2Zyb21fam91cm5h
bChzdHJ1Y3QgZG1faW50ZWdyaXR5X2MgKmljLCB1bnNpZ25lZCBzZWN0aW9uLCB1bnNpZwogCiAJ
c2VjdG9yID0gc2VjdGlvbiAqIGljLT5qb3VybmFsX3NlY3Rpb25fc2VjdG9ycyArIEpPVVJOQUxf
QkxPQ0tfU0VDVE9SUyArIG9mZnNldDsKIAotCXBsX2luZGV4ID0gc2VjdG9yID4+IChQQUdFX1NI
SUZUIC0gU0VDVE9SX1NISUZUKTsKKwlwbF9pbmRleCA9IHNlY3RvciA+PiBQQUdFX1NFQ1RPUlNf
U0hJRlQ7CiAJcGxfb2Zmc2V0ID0gKHNlY3RvciA8PCBTRUNUT1JfU0hJRlQpICYgKFBBR0VfU0la
RSAtIDEpOwogCiAJaW9fcmVxLmJpX29wID0gUkVRX09QX1dSSVRFOwpAQCAtMzM0Myw3ICszMzQz
LDcgQEAgc3RhdGljIGludCBjcmVhdGVfam91cm5hbChzdHJ1Y3QgZG1faW50ZWdyaXR5X2MgKmlj
LCBjaGFyICoqZXJyb3IpCiAJaWMtPmNvbW1pdF9pZHNbM10gPSBjcHVfdG9fbGU2NCgweDQ0NDQ0
NDQ0NDQ0NDQ0NDRVTEwpOwogCiAJam91cm5hbF9wYWdlcyA9IHJvdW5kdXAoKF9fdTY0KWljLT5q
b3VybmFsX3NlY3Rpb25zICogaWMtPmpvdXJuYWxfc2VjdGlvbl9zZWN0b3JzLAotCQkJCVBBR0Vf
U0laRSA+PiBTRUNUT1JfU0hJRlQpID4+IChQQUdFX1NISUZUIC0gU0VDVE9SX1NISUZUKTsKKwkJ
CQlQQUdFX1NJWkUgPj4gU0VDVE9SX1NISUZUKSA+PiBQQUdFX1NFQ1RPUlNfU0hJRlQ7CiAJam91
cm5hbF9kZXNjX3NpemUgPSBqb3VybmFsX3BhZ2VzICogc2l6ZW9mKHN0cnVjdCBwYWdlX2xpc3Qp
OwogCWlmIChqb3VybmFsX3BhZ2VzID49IHRvdGFscmFtX3BhZ2VzKCkgLSB0b3RhbGhpZ2hfcGFn
ZXMoKSB8fCBqb3VybmFsX2Rlc2Nfc2l6ZSA+IFVMT05HX01BWCkgewogCQkqZXJyb3IgPSAiSm91
cm5hbCBkb2Vzbid0IGZpdCBpbnRvIG1lbW9yeSI7CkBAIC00MDc1LDcgKzQwNzUsNyBAQCBzdGF0
aWMgaW50IGRtX2ludGVncml0eV9jdHIoc3RydWN0IGRtX3RhcmdldCAqdGksIHVuc2lnbmVkIGFy
Z2MsIGNoYXIgKiphcmd2KQogCQkJc3Bpbl9sb2NrX2luaXQoJmJicy0+YmlvX3F1ZXVlX2xvY2sp
OwogCiAJCQlzZWN0b3IgPSBpICogKEJJVE1BUF9CTE9DS19TSVpFID4+IFNFQ1RPUl9TSElGVCk7
Ci0JCQlwbF9pbmRleCA9IHNlY3RvciA+PiAoUEFHRV9TSElGVCAtIFNFQ1RPUl9TSElGVCk7CisJ
CQlwbF9pbmRleCA9IHNlY3RvciA+PiBQQUdFX1NFQ1RPUlNfU0hJRlQ7CiAJCQlwbF9vZmZzZXQg
PSAoc2VjdG9yIDw8IFNFQ1RPUl9TSElGVCkgJiAoUEFHRV9TSVpFIC0gMSk7CiAKIAkJCWJicy0+
Yml0bWFwID0gbG93bWVtX3BhZ2VfYWRkcmVzcyhpYy0+am91cm5hbFtwbF9pbmRleF0ucGFnZSkg
KyBwbF9vZmZzZXQ7CmRpZmYgLS1naXQgYS9kcml2ZXJzL21kL2RtLXRhYmxlLmMgYi9kcml2ZXJz
L21kL2RtLXRhYmxlLmMKaW5kZXggMGEyY2MxOTdmNjJiLi41NjAwMDIwMjQ5MmUgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvbWQvZG0tdGFibGUuYworKysgYi9kcml2ZXJzL21kL2RtLXRhYmxlLmMKQEAg
LTE5NjQsNyArMTk2NCw3IEBAIHZvaWQgZG1fdGFibGVfc2V0X3Jlc3RyaWN0aW9ucyhzdHJ1Y3Qg
ZG1fdGFibGUgKnQsIHN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxLAogI2VuZGlmCiAKIAkvKiBBbGxv
dyByZWFkcyB0byBleGNlZWQgcmVhZGFoZWFkIGxpbWl0cyAqLwotCXEtPmJhY2tpbmdfZGV2X2lu
Zm8tPmlvX3BhZ2VzID0gbGltaXRzLT5tYXhfc2VjdG9ycyA+PiAoUEFHRV9TSElGVCAtIDkpOwor
CXEtPmJhY2tpbmdfZGV2X2luZm8tPmlvX3BhZ2VzID0gbGltaXRzLT5tYXhfc2VjdG9ycyA+PiBQ
QUdFX1NFQ1RPUlNfU0hJRlQ7CiB9CiAKIHVuc2lnbmVkIGludCBkbV90YWJsZV9nZXRfbnVtX3Rh
cmdldHMoc3RydWN0IGRtX3RhYmxlICp0KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZC9tZC5jIGIv
ZHJpdmVycy9tZC9tZC5jCmluZGV4IDQ2OWY1NTE4NjNiZS4uYjI4ZjkzOTA2MDhmIDEwMDY0NAot
LS0gYS9kcml2ZXJzL21kL21kLmMKKysrIGIvZHJpdmVycy9tZC9tZC5jCkBAIC0xNzM0LDcgKzE3
MzQsNyBAQCBzdGF0aWMgaW50IHN1cGVyXzFfbG9hZChzdHJ1Y3QgbWRfcmRldiAqcmRldiwgc3Ry
dWN0IG1kX3JkZXYgKnJlZmRldiwgaW50IG1pbm9yXwogCQlfX2xlNjQgKmJicDsKIAkJaW50IGk7
CiAJCWludCBzZWN0b3JzID0gbGUxNl90b19jcHUoc2ItPmJibG9nX3NpemUpOwotCQlpZiAoc2Vj
dG9ycyA+IChQQUdFX1NJWkUgLyA1MTIpKQorCQlpZiAoc2VjdG9ycyA+IFBBR0VfU0VDVE9SUykK
IAkJCXJldHVybiAtRUlOVkFMOwogCQlvZmZzZXQgPSBsZTMyX3RvX2NwdShzYi0+YmJsb2dfb2Zm
c2V0KTsKIAkJaWYgKG9mZnNldCA9PSAwKQpAQCAtODczMyw3ICs4NzMzLDcgQEAgdm9pZCBtZF9k
b19zeW5jKHN0cnVjdCBtZF90aHJlYWQgKnRocmVhZCkKIAkvKgogCSAqIFR1bmUgcmVjb25zdHJ1
Y3Rpb246CiAJICovCi0Jd2luZG93ID0gMzIgKiAoUEFHRV9TSVpFIC8gNTEyKTsKKwl3aW5kb3cg
PSAzMiAqIFBBR0VfU0VDVE9SUzsKIAlwcl9kZWJ1ZygibWQ6IHVzaW5nICVkayB3aW5kb3csIG92
ZXIgYSB0b3RhbCBvZiAlbGx1ay5cbiIsCiAJCSB3aW5kb3cvMiwgKHVuc2lnbmVkIGxvbmcgbG9u
ZyltYXhfc2VjdG9ycy8yKTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZC9yYWlkMS5jIGIvZHJp
dmVycy9tZC9yYWlkMS5jCmluZGV4IGNkODEwZTE5NTA4Ni4uZmQ3MGZjNjJhZDExIDEwMDY0NAot
LS0gYS9kcml2ZXJzL21kL3JhaWQxLmMKKysrIGIvZHJpdmVycy9tZC9yYWlkMS5jCkBAIC0yMTI5
LDcgKzIxMjksNyBAQCBzdGF0aWMgdm9pZCBwcm9jZXNzX2NoZWNrcyhzdHJ1Y3QgcjFiaW8gKnIx
X2JpbykKIAlpbnQgdmNudDsKIAogCS8qIEZpeCB2YXJpYWJsZSBwYXJ0cyBvZiBhbGwgYmlvcyAq
LwotCXZjbnQgPSAocjFfYmlvLT5zZWN0b3JzICsgUEFHRV9TSVpFIC8gNTEyIC0gMSkgPj4gKFBB
R0VfU0hJRlQgLSA5KTsKKwl2Y250ID0gKHIxX2Jpby0+c2VjdG9ycyArIFBBR0VfU0VDVE9SUyAt
IDEpID4+IFBBR0VfU0VDVE9SU19TSElGVDsKIAlmb3IgKGkgPSAwOyBpIDwgY29uZi0+cmFpZF9k
aXNrcyAqIDI7IGkrKykgewogCQlibGtfc3RhdHVzX3Qgc3RhdHVzOwogCQlzdHJ1Y3QgYmlvICpi
ID0gcjFfYmlvLT5iaW9zW2ldOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZC9yYWlkMTAuYyBiL2Ry
aXZlcnMvbWQvcmFpZDEwLmMKaW5kZXggZWMxMzZlNDRhZWY3Li44ODljNGI3YzFjMzUgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvbWQvcmFpZDEwLmMKKysrIGIvZHJpdmVycy9tZC9yYWlkMTAuYwpAQCAt
MjAyOSw3ICsyMDI5LDcgQEAgc3RhdGljIHZvaWQgc3luY19yZXF1ZXN0X3dyaXRlKHN0cnVjdCBt
ZGRldiAqbWRkZXYsIHN0cnVjdCByMTBiaW8gKnIxMF9iaW8pCiAJZmJpby0+YmlfaXRlci5iaV9p
ZHggPSAwOwogCWZwYWdlcyA9IGdldF9yZXN5bmNfcGFnZXMoZmJpbyktPnBhZ2VzOwogCi0JdmNu
dCA9IChyMTBfYmlvLT5zZWN0b3JzICsgKFBBR0VfU0laRSA+PiA5KSAtIDEpID4+IChQQUdFX1NI
SUZUIC0gOSk7CisJdmNudCA9IChyMTBfYmlvLT5zZWN0b3JzICsgKFBBR0VfU0laRSA+PiA5KSAt
IDEpID4+IFBBR0VfU0VDVE9SU19TSElGVDsKIAkvKiBub3cgZmluZCBibG9ja3Mgd2l0aCBlcnJv
cnMgKi8KIAlmb3IgKGk9MCA7IGkgPCBjb25mLT5jb3BpZXMgOyBpKyspIHsKIAkJaW50ICBqLCBk
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZC9yYWlkNS1jYWNoZS5jIGIvZHJpdmVycy9tZC9yYWlk
NS1jYWNoZS5jCmluZGV4IDliNmRhNzU5ZGNhMi4uYWQ1NDcwYzEyYmIzIDEwMDY0NAotLS0gYS9k
cml2ZXJzL21kL3JhaWQ1LWNhY2hlLmMKKysrIGIvZHJpdmVycy9tZC9yYWlkNS1jYWNoZS5jCkBA
IC04MzMsNyArODMzLDcgQEAgc3RhdGljIHZvaWQgcjVsX2FwcGVuZF9wYXlsb2FkX21ldGEoc3Ry
dWN0IHI1bF9sb2cgKmxvZywgdTE2IHR5cGUsCiAJcGF5bG9hZC0+aGVhZGVyLnR5cGUgPSBjcHVf
dG9fbGUxNih0eXBlKTsKIAlwYXlsb2FkLT5oZWFkZXIuZmxhZ3MgPSBjcHVfdG9fbGUxNigwKTsK
IAlwYXlsb2FkLT5zaXplID0gY3B1X3RvX2xlMzIoKDEgKyAhIWNoZWNrc3VtMl92YWxpZCkgPDwK
LQkJCQkgICAgKFBBR0VfU0hJRlQgLSA5KSk7CisJCQkJICAgIFBBR0VfU0VDVE9SU19TSElGVCk7
CiAJcGF5bG9hZC0+bG9jYXRpb24gPSBjcHVfdG9fbGU2NChsb2NhdGlvbik7CiAJcGF5bG9hZC0+
Y2hlY2tzdW1bMF0gPSBjcHVfdG9fbGUzMihjaGVja3N1bTEpOwogCWlmIChjaGVja3N1bTJfdmFs
aWQpCkBAIC0xMDQyLDcgKzEwNDIsNyBAQCBpbnQgcjVsX3dyaXRlX3N0cmlwZShzdHJ1Y3QgcjVs
X2xvZyAqbG9nLCBzdHJ1Y3Qgc3RyaXBlX2hlYWQgKnNoKQogCiAJbXV0ZXhfbG9jaygmbG9nLT5p
b19tdXRleCk7CiAJLyogbWV0YSArIGRhdGEgKi8KLQlyZXNlcnZlID0gKDEgKyB3cml0ZV9kaXNr
cykgPDwgKFBBR0VfU0hJRlQgLSA5KTsKKwlyZXNlcnZlID0gKDEgKyB3cml0ZV9kaXNrcykgPDwg
UEFHRV9TRUNUT1JTX1NISUZUOwogCiAJaWYgKGxvZy0+cjVjX2pvdXJuYWxfbW9kZSA9PSBSNUNf
Sk9VUk5BTF9NT0RFX1dSSVRFX1RIUk9VR0gpIHsKIAkJaWYgKCFyNWxfaGFzX2ZyZWVfc3BhY2Uo
bG9nLCByZXNlcnZlKSkgewpAQCAtMjA1Myw3ICsyMDUzLDcgQEAgcjVsX3JlY292ZXJ5X3Zlcmlm
eV9kYXRhX2NoZWNrc3VtX2Zvcl9tYihzdHJ1Y3QgcjVsX2xvZyAqbG9nLAogCQkJCQkJICBsZTMy
X3RvX2NwdShwYXlsb2FkLT5zaXplKSk7CiAJCQltYl9vZmZzZXQgKz0gc2l6ZW9mKHN0cnVjdCBy
NWxfcGF5bG9hZF9kYXRhX3Bhcml0eSkgKwogCQkJCXNpemVvZihfX2xlMzIpICoKLQkJCQkobGUz
Ml90b19jcHUocGF5bG9hZC0+c2l6ZSkgPj4gKFBBR0VfU0hJRlQgLSA5KSk7CisJCQkJKGxlMzJf
dG9fY3B1KHBheWxvYWQtPnNpemUpID4+IFBBR0VfU0VDVE9SU19TSElGVCk7CiAJCX0KIAogCX0K
QEAgLTIxOTksNyArMjE5OSw3IEBAIHI1Y19yZWNvdmVyeV9hbmFseXplX21ldGFfYmxvY2soc3Ry
dWN0IHI1bF9sb2cgKmxvZywKIAogCQltYl9vZmZzZXQgKz0gc2l6ZW9mKHN0cnVjdCByNWxfcGF5
bG9hZF9kYXRhX3Bhcml0eSkgKwogCQkJc2l6ZW9mKF9fbGUzMikgKgotCQkJKGxlMzJfdG9fY3B1
KHBheWxvYWQtPnNpemUpID4+IChQQUdFX1NISUZUIC0gOSkpOworCQkJKGxlMzJfdG9fY3B1KHBh
eWxvYWQtPnNpemUpID4+IFBBR0VfU0VDVE9SU19TSElGVCk7CiAJfQogCiAJcmV0dXJuIDA7CkBA
IC0yOTE2LDcgKzI5MTYsNyBAQCBpbnQgcjVjX2NhY2hlX2RhdGEoc3RydWN0IHI1bF9sb2cgKmxv
Zywgc3RydWN0IHN0cmlwZV9oZWFkICpzaCkKIAogCW11dGV4X2xvY2soJmxvZy0+aW9fbXV0ZXgp
OwogCS8qIG1ldGEgKyBkYXRhICovCi0JcmVzZXJ2ZSA9ICgxICsgcGFnZXMpIDw8IChQQUdFX1NI
SUZUIC0gOSk7CisJcmVzZXJ2ZSA9ICgxICsgcGFnZXMpIDw8IFBBR0VfU0VDVE9SU19TSElGVDsK
IAogCWlmICh0ZXN0X2JpdChSNUNfTE9HX0NSSVRJQ0FMLCAmY29uZi0+Y2FjaGVfc3RhdGUpICYm
CiAJICAgIHNoLT5sb2dfc3RhcnQgPT0gTWF4U2VjdG9yKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9t
ZC9yYWlkNS5oIGIvZHJpdmVycy9tZC9yYWlkNS5oCmluZGV4IGY5MGUwNzA0YmVkOS4uNDlkZmQ4
YTk1NDRhIDEwMDY0NAotLS0gYS9kcml2ZXJzL21kL3JhaWQ1LmgKKysrIGIvZHJpdmVycy9tZC9y
YWlkNS5oCkBAIC00NzMsNyArNDczLDcgQEAgc3RydWN0IGRpc2tfaW5mbyB7CiAKICNkZWZpbmUg
TlJfU1RSSVBFUwkJMjU2CiAjZGVmaW5lIFNUUklQRV9TSVpFCQlQQUdFX1NJWkUKLSNkZWZpbmUg
U1RSSVBFX1NISUZUCQkoUEFHRV9TSElGVCAtIDkpCisjZGVmaW5lIFNUUklQRV9TSElGVAkJUEFH
RV9TRUNUT1JTX1NISUZUCiAjZGVmaW5lIFNUUklQRV9TRUNUT1JTCQkoU1RSSVBFX1NJWkU+Pjkp
CiAjZGVmaW5lCUlPX1RIUkVTSE9MRAkJMQogI2RlZmluZSBCWVBBU1NfVEhSRVNIT0xECTEKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvbW1jL2NvcmUvaG9zdC5jIGIvZHJpdmVycy9tbWMvY29yZS9ob3N0
LmMKaW5kZXggYzg3Njg3MjZkOTI1Li40YTIzZmI5ZDU2NDIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
bW1jL2NvcmUvaG9zdC5jCisrKyBiL2RyaXZlcnMvbW1jL2NvcmUvaG9zdC5jCkBAIC0xOCw2ICsx
OCw3IEBACiAjaW5jbHVkZSA8bGludXgvZXhwb3J0Lmg+CiAjaW5jbHVkZSA8bGludXgvbGVkcy5o
PgogI2luY2x1ZGUgPGxpbnV4L3NsYWIuaD4KKyNpbmNsdWRlIDxsaW51eC9ibGtkZXYuaD4KIAog
I2luY2x1ZGUgPGxpbnV4L21tYy9ob3N0Lmg+CiAjaW5jbHVkZSA8bGludXgvbW1jL2NhcmQuaD4K
QEAgLTQyNyw3ICs0MjgsNyBAQCBzdHJ1Y3QgbW1jX2hvc3QgKm1tY19hbGxvY19ob3N0KGludCBl
eHRyYSwgc3RydWN0IGRldmljZSAqZGV2KQogCiAJaG9zdC0+bWF4X3JlcV9zaXplID0gUEFHRV9T
SVpFOwogCWhvc3QtPm1heF9ibGtfc2l6ZSA9IDUxMjsKLQlob3N0LT5tYXhfYmxrX2NvdW50ID0g
UEFHRV9TSVpFIC8gNTEyOworCWhvc3QtPm1heF9ibGtfY291bnQgPSBQQUdFX1NFQ1RPUlM7CiAK
IAlob3N0LT5maXhlZF9kcnZfdHlwZSA9IC1FSU5WQUw7CiAJaG9zdC0+aW9zLnBvd2VyX2RlbGF5
X21zID0gMTA7CmRpZmYgLS1naXQgYS9kcml2ZXJzL252bWUvaG9zdC9mYy5jIGIvZHJpdmVycy9u
dm1lL2hvc3QvZmMuYwppbmRleCA1YTcwYWMzOTVkNTMuLjM0MDFlODJlYTMyMyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9udm1lL2hvc3QvZmMuYworKysgYi9kcml2ZXJzL252bWUvaG9zdC9mYy5jCkBA
IC0yNjc0LDcgKzI2NzQsNyBAQCBudm1lX2ZjX2NyZWF0ZV9hc3NvY2lhdGlvbihzdHJ1Y3QgbnZt
ZV9mY19jdHJsICpjdHJsKQogCQlnb3RvIG91dF9kaXNjb25uZWN0X2FkbWluX3F1ZXVlOwogCiAJ
Y3RybC0+Y3RybC5tYXhfaHdfc2VjdG9ycyA9Ci0JCShjdHJsLT5scG9ydC0+b3BzLT5tYXhfc2ds
X3NlZ21lbnRzIC0gMSkgPDwgKFBBR0VfU0hJRlQgLSA5KTsKKwkJKGN0cmwtPmxwb3J0LT5vcHMt
Pm1heF9zZ2xfc2VnbWVudHMgLSAxKSA8PCBQQUdFX1NFQ1RPUlNfU0hJRlQ7CiAKIAlibGtfbXFf
dW5xdWllc2NlX3F1ZXVlKGN0cmwtPmN0cmwuYWRtaW5fcSk7CiAKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvbnZtZS90YXJnZXQvbG9vcC5jIGIvZHJpdmVycy9udm1lL3RhcmdldC9sb29wLmMKaW5kZXgg
NGRmNGViZGUyMDhhLi5kNDNhYzRiMmViZWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbnZtZS90YXJn
ZXQvbG9vcC5jCisrKyBiL2RyaXZlcnMvbnZtZS90YXJnZXQvbG9vcC5jCkBAIC0zODIsNyArMzgy
LDcgQEAgc3RhdGljIGludCBudm1lX2xvb3BfY29uZmlndXJlX2FkbWluX3F1ZXVlKHN0cnVjdCBu
dm1lX2xvb3BfY3RybCAqY3RybCkKIAkJZ290byBvdXRfY2xlYW51cF9xdWV1ZTsKIAogCWN0cmwt
PmN0cmwubWF4X2h3X3NlY3RvcnMgPQotCQkoTlZNRV9MT09QX01BWF9TRUdNRU5UUyAtIDEpIDw8
IChQQUdFX1NISUZUIC0gOSk7CisJCShOVk1FX0xPT1BfTUFYX1NFR01FTlRTIC0gMSkgPDwgUEFH
RV9TRUNUT1JTX1NISUZUOwogCiAJYmxrX21xX3VucXVpZXNjZV9xdWV1ZShjdHJsLT5jdHJsLmFk
bWluX3EpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL3Njc2kveGVuLXNjc2lmcm9udC5jIGIvZHJp
dmVycy9zY3NpL3hlbi1zY3NpZnJvbnQuYwppbmRleCBmMDA2OGU5NmExNzcuLmU2YjI5ZTU0ZDA3
YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9zY3NpL3hlbi1zY3NpZnJvbnQuYworKysgYi9kcml2ZXJz
L3Njc2kveGVuLXNjc2lmcm9udC5jCkBAIC04NTIsNyArODUyLDcgQEAgc3RhdGljIGludCBzY3Np
ZnJvbnRfcHJvYmUoc3RydWN0IHhlbmJ1c19kZXZpY2UgKmRldiwKIAlob3N0LT5tYXhfaWQgICAg
ICA9IFZTQ1NJSUZfTUFYX1RBUkdFVDsKIAlob3N0LT5tYXhfY2hhbm5lbCA9IDA7CiAJaG9zdC0+
bWF4X2x1biAgICAgPSBWU0NTSUlGX01BWF9MVU47Ci0JaG9zdC0+bWF4X3NlY3RvcnMgPSAoaG9z
dC0+c2dfdGFibGVzaXplIC0gMSkgKiBQQUdFX1NJWkUgLyA1MTI7CisJaG9zdC0+bWF4X3NlY3Rv
cnMgPSAoaG9zdC0+c2dfdGFibGVzaXplIC0gMSkgKiBQQUdFX1NFQ1RPUlM7CiAJaG9zdC0+bWF4
X2NtZF9sZW4gPSBWU0NTSUlGX01BWF9DT01NQU5EX1NJWkU7CiAKIAllcnIgPSBzY3NpX2FkZF9o
b3N0KGhvc3QsICZkZXYtPmRldik7CkBAIC0xMDczLDcgKzEwNzMsNyBAQCBzdGF0aWMgdm9pZCBz
Y3NpZnJvbnRfcmVhZF9iYWNrZW5kX3BhcmFtcyhzdHJ1Y3QgeGVuYnVzX2RldmljZSAqZGV2LAog
CQkJIGhvc3QtPnNnX3RhYmxlc2l6ZSwgbnJfc2Vncyk7CiAKIAlob3N0LT5zZ190YWJsZXNpemUg
PSBucl9zZWdzOwotCWhvc3QtPm1heF9zZWN0b3JzID0gKG5yX3NlZ3MgLSAxKSAqIFBBR0VfU0la
RSAvIDUxMjsKKwlob3N0LT5tYXhfc2VjdG9ycyA9IChucl9zZWdzIC0gMSkgKiBQQUdFX1NFQ1RP
UlM7CiB9CiAKIHN0YXRpYyB2b2lkIHNjc2lmcm9udF9iYWNrZW5kX2NoYW5nZWQoc3RydWN0IHhl
bmJ1c19kZXZpY2UgKmRldiwKZGlmZiAtLWdpdCBhL2ZzL2Vyb2ZzL2ludGVybmFsLmggYi9mcy9l
cm9mcy9pbnRlcm5hbC5oCmluZGV4IGM0YzZkY2RjODlhZC4uMjEwY2ExNDhjYzBjIDEwMDY0NAot
LS0gYS9mcy9lcm9mcy9pbnRlcm5hbC5oCisrKyBiL2ZzL2Vyb2ZzL2ludGVybmFsLmgKQEAgLTE4
OSw3ICsxODksNyBAQCBzdGF0aWMgaW5saW5lIGludCBlcm9mc193YWl0X29uX3dvcmtncm91cF9m
cmVlemVkKHN0cnVjdCBlcm9mc193b3JrZ3JvdXAgKmdycCkKICNkZWZpbmUgTE9HX0JMT0NLX1NJ
WkUJCVBBR0VfU0hJRlQKIAogI3VuZGVmIExPR19TRUNUT1JTX1BFUl9CTE9DSwotI2RlZmluZSBM
T0dfU0VDVE9SU19QRVJfQkxPQ0sJKFBBR0VfU0hJRlQgLSA5KQorI2RlZmluZSBMT0dfU0VDVE9S
U19QRVJfQkxPQ0sJUEFHRV9TRUNUT1JTX1NISUZUCiAKICN1bmRlZiBTRUNUT1JTX1BFUl9CTE9D
SwogI2RlZmluZSBTRUNUT1JTX1BFUl9CTE9DSwkoMSA8PCBTRUNUT1JTX1BFUl9CTE9DSykKZGlm
ZiAtLWdpdCBhL2ZzL2V4dDIvZGlyLmMgYi9mcy9leHQyL2Rpci5jCmluZGV4IDEzMzE4ZTI1NWVi
Zi4uNTAxNGE2ZmM1YzZlIDEwMDY0NAotLS0gYS9mcy9leHQyL2Rpci5jCisrKyBiL2ZzL2V4dDIv
ZGlyLmMKQEAgLTM4NSw3ICszODUsNyBAQCBzdHJ1Y3QgZXh0Ml9kaXJfZW50cnlfMiAqZXh0Ml9m
aW5kX2VudHJ5IChzdHJ1Y3QgaW5vZGUgKmRpciwKIAkJaWYgKCsrbiA+PSBucGFnZXMpCiAJCQlu
ID0gMDsKIAkJLyogbmV4dCBwYWdlIGlzIHBhc3QgdGhlIGJsb2NrcyB3ZSd2ZSBnb3QgKi8KLQkJ
aWYgKHVubGlrZWx5KG4gPiAoZGlyLT5pX2Jsb2NrcyA+PiAoUEFHRV9TSElGVCAtIDkpKSkpIHsK
KwkJaWYgKHVubGlrZWx5KG4gPiAoZGlyLT5pX2Jsb2NrcyA+PiBQQUdFX1NFQ1RPUlNfU0hJRlQp
KSkgewogCQkJZXh0Ml9lcnJvcihkaXItPmlfc2IsIF9fZnVuY19fLAogCQkJCSJkaXIgJWx1IHNp
emUgJWxsZCBleGNlZWRzIGJsb2NrIGNvdW50ICVsbHUiLAogCQkJCWRpci0+aV9pbm8sIGRpci0+
aV9zaXplLApkaWZmIC0tZ2l0IGEvZnMvaW9tYXAvYnVmZmVyZWQtaW8uYyBiL2ZzL2lvbWFwL2J1
ZmZlcmVkLWlvLmMKaW5kZXggN2M4NGM0YzAyN2M0Li42MDUwNWZjMTU2YzUgMTAwNjQ0Ci0tLSBh
L2ZzL2lvbWFwL2J1ZmZlcmVkLWlvLmMKKysrIGIvZnMvaW9tYXAvYnVmZmVyZWQtaW8uYwpAQCAt
MjksNyArMjksNyBAQCBzdHJ1Y3QgaW9tYXBfcGFnZSB7CiAJYXRvbWljX3QJCXJlYWRfY291bnQ7
CiAJYXRvbWljX3QJCXdyaXRlX2NvdW50OwogCXNwaW5sb2NrX3QJCXVwdG9kYXRlX2xvY2s7Ci0J
REVDTEFSRV9CSVRNQVAodXB0b2RhdGUsIFBBR0VfU0laRSAvIDUxMik7CisJREVDTEFSRV9CSVRN
QVAodXB0b2RhdGUsIFBBR0VfU0VDVE9SUyk7CiB9OwogCiBzdGF0aWMgaW5saW5lIHN0cnVjdCBp
b21hcF9wYWdlICp0b19pb21hcF9wYWdlKHN0cnVjdCBwYWdlICpwYWdlKQpkaWZmIC0tZ2l0IGEv
ZnMvbGliZnMuYyBiL2ZzL2xpYmZzLmMKaW5kZXggYzY4NmJkOWNhYWM2Li4wMGNhOTY3NTJmY2Ig
MTAwNjQ0Ci0tLSBhL2ZzL2xpYmZzLmMKKysrIGIvZnMvbGliZnMuYwpAQCAtMzAsNyArMzAsNyBA
QCBpbnQgc2ltcGxlX2dldGF0dHIoY29uc3Qgc3RydWN0IHBhdGggKnBhdGgsIHN0cnVjdCBrc3Rh
dCAqc3RhdCwKIHsKIAlzdHJ1Y3QgaW5vZGUgKmlub2RlID0gZF9pbm9kZShwYXRoLT5kZW50cnkp
OwogCWdlbmVyaWNfZmlsbGF0dHIoaW5vZGUsIHN0YXQpOwotCXN0YXQtPmJsb2NrcyA9IGlub2Rl
LT5pX21hcHBpbmctPm5ycGFnZXMgPDwgKFBBR0VfU0hJRlQgLSA5KTsKKwlzdGF0LT5ibG9ja3Mg
PSBpbm9kZS0+aV9tYXBwaW5nLT5ucnBhZ2VzIDw8IFBBR0VfU0VDVE9SU19TSElGVDsKIAlyZXR1
cm4gMDsKIH0KIEVYUE9SVF9TWU1CT0woc2ltcGxlX2dldGF0dHIpOwpkaWZmIC0tZ2l0IGEvZnMv
bmZzL2Jsb2NrbGF5b3V0L2Jsb2NrbGF5b3V0LmggYi9mcy9uZnMvYmxvY2tsYXlvdXQvYmxvY2ts
YXlvdXQuaAppbmRleCA3MTZiYzc1ZTllZDIuLjIyNDA3NzUxZTBmZCAxMDA2NDQKLS0tIGEvZnMv
bmZzL2Jsb2NrbGF5b3V0L2Jsb2NrbGF5b3V0LmgKKysrIGIvZnMvbmZzL2Jsb2NrbGF5b3V0L2Js
b2NrbGF5b3V0LmgKQEAgLTQwLDggKzQwLDYgQEAKICNpbmNsdWRlICIuLi9wbmZzLmgiCiAjaW5j
bHVkZSAiLi4vbmV0bnMuaCIKIAotI2RlZmluZSBQQUdFX0NBQ0hFX1NFQ1RPUlMgKFBBR0VfU0la
RSA+PiBTRUNUT1JfU0hJRlQpCi0jZGVmaW5lIFBBR0VfQ0FDSEVfU0VDVE9SX1NISUZUIChQQUdF
X1NISUZUIC0gU0VDVE9SX1NISUZUKQogI2RlZmluZSBTRUNUT1JfU0laRSAoMSA8PCBTRUNUT1Jf
U0hJRlQpCiAKIHN0cnVjdCBwbmZzX2Jsb2NrX2RldjsKZGlmZiAtLWdpdCBhL2ZzL25pbGZzMi9k
aXIuYyBiL2ZzL25pbGZzMi9kaXIuYwppbmRleCA4MTM5NGUyMmQwYTAuLjc3YzA2ZTk5OTgyOCAx
MDA2NDQKLS0tIGEvZnMvbmlsZnMyL2Rpci5jCisrKyBiL2ZzL25pbGZzMi9kaXIuYwpAQCAtMzY4
LDcgKzM2OCw3IEBAIG5pbGZzX2ZpbmRfZW50cnkoc3RydWN0IGlub2RlICpkaXIsIGNvbnN0IHN0
cnVjdCBxc3RyICpxc3RyLAogCQlpZiAoKytuID49IG5wYWdlcykKIAkJCW4gPSAwOwogCQkvKiBu
ZXh0IHBhZ2UgaXMgcGFzdCB0aGUgYmxvY2tzIHdlJ3ZlIGdvdCAqLwotCQlpZiAodW5saWtlbHko
biA+IChkaXItPmlfYmxvY2tzID4+IChQQUdFX1NISUZUIC0gOSkpKSkgeworCQlpZiAodW5saWtl
bHkobiA+IChkaXItPmlfYmxvY2tzID4+IFBBR0VfU0VDVE9SU19TSElGVCkpKSB7CiAJCQluaWxm
c19lcnJvcihkaXItPmlfc2IsCiAJCQkgICAgICAgImRpciAlbHUgc2l6ZSAlbGxkIGV4Y2VlZHMg
YmxvY2sgY291bnQgJWxsdSIsCiAJCQkgICAgICAgZGlyLT5pX2lubywgZGlyLT5pX3NpemUsCmRp
ZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2Jsa2Rldi5oIGIvaW5jbHVkZS9saW51eC9ibGtkZXYu
aAppbmRleCAwNTNlYTRiNTE5ODguLjk4YjJjYmQwMjk5YSAxMDA2NDQKLS0tIGEvaW5jbHVkZS9s
aW51eC9ibGtkZXYuaAorKysgYi9pbmNsdWRlL2xpbnV4L2Jsa2Rldi5oCkBAIC05MTAsNiArOTEw
LDEwIEBAIHN0YXRpYyBpbmxpbmUgc3RydWN0IHJlcXVlc3RfcXVldWUgKmJkZXZfZ2V0X3F1ZXVl
KHN0cnVjdCBibG9ja19kZXZpY2UgKmJkZXYpCiAjZGVmaW5lIFNFQ1RPUl9TSVpFICgxIDw8IFNF
Q1RPUl9TSElGVCkKICNlbmRpZgogCisjZGVmaW5lIFBBR0VfU0VDVE9SU19TSElGVAkoUEFHRV9T
SElGVCAtIFNFQ1RPUl9TSElGVCkKKyNkZWZpbmUgUEFHRV9TRUNUT1JTCQkoMSA8PCBQQUdFX1NF
Q1RPUlNfU0hJRlQpCisjZGVmaW5lIFBBR0VfU0VDVE9SU19NQVNLCSh+KFBBR0VfU0VDVE9SUyAt
IDEpKQorCiAvKgogICogYmxrX3JxX3BvcygpCQkJOiB0aGUgY3VycmVudCBzZWN0b3IKICAqIGJs
a19ycV9ieXRlcygpCQk6IGJ5dGVzIGxlZnQgaW4gdGhlIGVudGlyZSByZXF1ZXN0CmRpZmYgLS1n
aXQgYS9pbmNsdWRlL2xpbnV4L2RldmljZS1tYXBwZXIuaCBiL2luY2x1ZGUvbGludXgvZGV2aWNl
LW1hcHBlci5oCmluZGV4IDQ3NTY2OGM2OWRiYy4uYzk4YTUzM2Y4ZmZhIDEwMDY0NAotLS0gYS9p
bmNsdWRlL2xpbnV4L2RldmljZS1tYXBwZXIuaAorKysgYi9pbmNsdWRlL2xpbnV4L2RldmljZS1t
YXBwZXIuaApAQCAtMTQxLDcgKzE0MSw2IEBAIHR5cGVkZWYgbG9uZyAoKmRtX2RheF9kaXJlY3Rf
YWNjZXNzX2ZuKSAoc3RydWN0IGRtX3RhcmdldCAqdGksIHBnb2ZmX3QgcGdvZmYsCiAJCWxvbmcg
bnJfcGFnZXMsIHZvaWQgKiprYWRkciwgcGZuX3QgKnBmbik7CiB0eXBlZGVmIHNpemVfdCAoKmRt
X2RheF9jb3B5X2l0ZXJfZm4pKHN0cnVjdCBkbV90YXJnZXQgKnRpLCBwZ29mZl90IHBnb2ZmLAog
CQl2b2lkICphZGRyLCBzaXplX3QgYnl0ZXMsIHN0cnVjdCBpb3ZfaXRlciAqaSk7Ci0jZGVmaW5l
IFBBR0VfU0VDVE9SUyAoUEFHRV9TSVpFIC8gNTEyKQogCiB2b2lkIGRtX2Vycm9yKGNvbnN0IGNo
YXIgKm1lc3NhZ2UpOwogCmRpZmYgLS1naXQgYS9tbS9wYWdlX2lvLmMgYi9tbS9wYWdlX2lvLmMK
aW5kZXggNzY5NjViZTFkNDBlLi45ZTMzNzZhZDYwZjUgMTAwNjQ0Ci0tLSBhL21tL3BhZ2VfaW8u
YworKysgYi9tbS9wYWdlX2lvLmMKQEAgLTM4LDcgKzM4LDcgQEAgc3RhdGljIHN0cnVjdCBiaW8g
KmdldF9zd2FwX2JpbyhnZnBfdCBnZnBfZmxhZ3MsCiAKIAkJYmlvLT5iaV9pdGVyLmJpX3NlY3Rv
ciA9IG1hcF9zd2FwX3BhZ2UocGFnZSwgJmJkZXYpOwogCQliaW9fc2V0X2RldihiaW8sIGJkZXYp
OwotCQliaW8tPmJpX2l0ZXIuYmlfc2VjdG9yIDw8PSBQQUdFX1NISUZUIC0gOTsKKwkJYmlvLT5i
aV9pdGVyLmJpX3NlY3RvciA8PD0gUEFHRV9TRUNUT1JTX1NISUZUOwogCQliaW8tPmJpX2VuZF9p
byA9IGVuZF9pbzsKIAogCQliaW9fYWRkX3BhZ2UoYmlvLCBwYWdlLCBQQUdFX1NJWkUgKiBocGFn
ZV9ucl9wYWdlcyhwYWdlKSwgMCk7CkBAIC0yNjYsNyArMjY2LDcgQEAgaW50IHN3YXBfd3JpdGVw
YWdlKHN0cnVjdCBwYWdlICpwYWdlLCBzdHJ1Y3Qgd3JpdGViYWNrX2NvbnRyb2wgKndiYykKIAog
c3RhdGljIHNlY3Rvcl90IHN3YXBfcGFnZV9zZWN0b3Ioc3RydWN0IHBhZ2UgKnBhZ2UpCiB7Ci0J
cmV0dXJuIChzZWN0b3JfdClfX3BhZ2VfZmlsZV9pbmRleChwYWdlKSA8PCAoUEFHRV9TSElGVCAt
IDkpOworCXJldHVybiAoc2VjdG9yX3QpX19wYWdlX2ZpbGVfaW5kZXgocGFnZSkgPDwgUEFHRV9T
RUNUT1JTX1NISUZUOwogfQogCiBzdGF0aWMgaW5saW5lIHZvaWQgY291bnRfc3dwb3V0X3ZtX2V2
ZW50KHN0cnVjdCBwYWdlICpwYWdlKQpkaWZmIC0tZ2l0IGEvbW0vc3dhcGZpbGUuYyBiL21tL3N3
YXBmaWxlLmMKaW5kZXggYjJhMmU0NWM5YTM2Li4xY2YzYzgwMjk1ZDIgMTAwNjQ0Ci0tLSBhL21t
L3N3YXBmaWxlLmMKKysrIGIvbW0vc3dhcGZpbGUuYwpAQCAtMTc3LDggKzE3Nyw4IEBAIHN0YXRp
YyBpbnQgZGlzY2FyZF9zd2FwKHN0cnVjdCBzd2FwX2luZm9fc3RydWN0ICpzaSkKIAogCS8qIERv
IG5vdCBkaXNjYXJkIHRoZSBzd2FwIGhlYWRlciBwYWdlISAqLwogCXNlID0gZmlyc3Rfc2Uoc2kp
OwotCXN0YXJ0X2Jsb2NrID0gKHNlLT5zdGFydF9ibG9jayArIDEpIDw8IChQQUdFX1NISUZUIC0g
OSk7Ci0JbnJfYmxvY2tzID0gKChzZWN0b3JfdClzZS0+bnJfcGFnZXMgLSAxKSA8PCAoUEFHRV9T
SElGVCAtIDkpOworCXN0YXJ0X2Jsb2NrID0gKHNlLT5zdGFydF9ibG9jayArIDEpIDw8IFBBR0Vf
U0VDVE9SU19TSElGVDsKKwlucl9ibG9ja3MgPSAoKHNlY3Rvcl90KXNlLT5ucl9wYWdlcyAtIDEp
IDw8IFBBR0VfU0VDVE9SU19TSElGVDsKIAlpZiAobnJfYmxvY2tzKSB7CiAJCWVyciA9IGJsa2Rl
dl9pc3N1ZV9kaXNjYXJkKHNpLT5iZGV2LCBzdGFydF9ibG9jaywKIAkJCQlucl9ibG9ja3MsIEdG
UF9LRVJORUwsIDApOwpAQCAtMTg4LDggKzE4OCw4IEBAIHN0YXRpYyBpbnQgZGlzY2FyZF9zd2Fw
KHN0cnVjdCBzd2FwX2luZm9fc3RydWN0ICpzaSkKIAl9CiAKIAlmb3IgKHNlID0gbmV4dF9zZShz
ZSk7IHNlOyBzZSA9IG5leHRfc2Uoc2UpKSB7Ci0JCXN0YXJ0X2Jsb2NrID0gc2UtPnN0YXJ0X2Js
b2NrIDw8IChQQUdFX1NISUZUIC0gOSk7Ci0JCW5yX2Jsb2NrcyA9IChzZWN0b3JfdClzZS0+bnJf
cGFnZXMgPDwgKFBBR0VfU0hJRlQgLSA5KTsKKwkJc3RhcnRfYmxvY2sgPSBzZS0+c3RhcnRfYmxv
Y2sgPDwgUEFHRV9TRUNUT1JTX1NISUZUOworCQlucl9ibG9ja3MgPSAoc2VjdG9yX3Qpc2UtPm5y
X3BhZ2VzIDw8IFBBR0VfU0VDVE9SU19TSElGVDsKIAogCQllcnIgPSBibGtkZXZfaXNzdWVfZGlz
Y2FyZChzaS0+YmRldiwgc3RhcnRfYmxvY2ssCiAJCQkJbnJfYmxvY2tzLCBHRlBfS0VSTkVMLCAw
KTsKQEAgLTI0MCw4ICsyNDAsOCBAQCBzdGF0aWMgdm9pZCBkaXNjYXJkX3N3YXBfY2x1c3Rlcihz
dHJ1Y3Qgc3dhcF9pbmZvX3N0cnVjdCAqc2ksCiAJCXN0YXJ0X3BhZ2UgKz0gbnJfYmxvY2tzOwog
CQlucl9wYWdlcyAtPSBucl9ibG9ja3M7CiAKLQkJc3RhcnRfYmxvY2sgPDw9IFBBR0VfU0hJRlQg
LSA5OwotCQlucl9ibG9ja3MgPDw9IFBBR0VfU0hJRlQgLSA5OworCQlzdGFydF9ibG9jayA8PD0g
UEFHRV9TRUNUT1JTX1NISUZUOworCQlucl9ibG9ja3MgPDw9IFBBR0VfU0VDVE9SU19TSElGVDsK
IAkJaWYgKGJsa2Rldl9pc3N1ZV9kaXNjYXJkKHNpLT5iZGV2LCBzdGFydF9ibG9jaywKIAkJCQkJ
bnJfYmxvY2tzLCBHRlBfTk9JTywgMCkpCiAJCQlicmVhazsKLS0gCjIuMjQuMQoKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5n
IGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJv
amVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

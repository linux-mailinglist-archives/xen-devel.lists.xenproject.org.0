Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 07C5E125C27
	for <lists+xen-devel@lfdr.de>; Thu, 19 Dec 2019 08:44:30 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ihqRw-0001Vs-66; Thu, 19 Dec 2019 07:42:20 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=ERLN=2J=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1ihqRv-0001Vn-98
 for xen-devel@lists.xenproject.org; Thu, 19 Dec 2019 07:42:19 +0000
X-Inumbo-ID: 13f5ac36-2233-11ea-915d-12813bfff9fa
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 13f5ac36-2233-11ea-915d-12813bfff9fa;
 Thu, 19 Dec 2019 07:42:16 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id 689B2B281;
 Thu, 19 Dec 2019 07:42:15 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Thu, 19 Dec 2019 08:42:08 +0100
Message-Id: <20191219074209.17277-2-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20191219074209.17277-1-jgross@suse.com>
References: <20191219074209.17277-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH v3 1/2] xen: put more code under
 CONFIG_CRASH_DEBUG
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Kevin Tian <kevin.tian@intel.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Jun Nakajima <jun.nakajima@intel.com>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Jan Beulich <jbeulich@suse.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

U29tZSBjb2RlIGlzIG5vdCBuZWVkZWQgd2l0aCBDT05GSUdfQ1JBU0hfREVCVUcsIHNvIG9ubHkg
aW5jbHVkZSBpdCBpZgpDT05GSUdfQ1JBU0hfREVCVUcgaXMgZGVmaW5lZC4KCldoaWxlIGF0IGl0
IHJlbW92ZSBDT05GSUdfSEFTX0dEQlNYIGFzIGl0IGNhbiBlYXNpbHkgYmUgcmVwbGFjZWQgYnkK
Q09ORklHX0NSQVNIX0RFQlVHLgoKU2lnbmVkLW9mZi1ieTogSnVlcmdlbiBHcm9zcyA8amdyb3Nz
QHN1c2UuY29tPgotLS0KVjM6Ci0gbW92ZSBkb21haW5fcGF1c2VfZm9yX2RlYnVnZ2VyKCkgaW50
byBhcmNoL3g4Ni9kb21haW4uYyAoQW5kcmV3IENvb3BlcikKLS0tCiB4ZW4vYXJjaC94ODYvS2Nv
bmZpZyAgICAgICAgICAgIHwgIDEgLQogeGVuL2FyY2gveDg2L2RvbWFpbi5jICAgICAgICAgICB8
IDEzICsrKysrKysrKysrKysKIHhlbi9hcmNoL3g4Ni9odm0vdm14L3JlYWxtb2RlLmMgfCAgMSAr
CiB4ZW4vY29tbW9uL0tjb25maWcgICAgICAgICAgICAgIHwgIDMgLS0tCiB4ZW4vY29tbW9uL2Rv
bWFpbi5jICAgICAgICAgICAgIHwgMTQgLS0tLS0tLS0tLS0tLS0KIHhlbi9pbmNsdWRlL2FzbS14
ODYvZGVidWdnZXIuaCAgfCAzMiArKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLQogeGVu
L2luY2x1ZGUveGVuL3NjaGVkLmggICAgICAgICB8ICAxIC0KIDcgZmlsZXMgY2hhbmdlZCwgMzQg
aW5zZXJ0aW9ucygrKSwgMzEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2
L0tjb25maWcgYi94ZW4vYXJjaC94ODYvS2NvbmZpZwppbmRleCAwMmJiMDVmNDJlLi5mODUzYzA0
NTY0IDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvS2NvbmZpZworKysgYi94ZW4vYXJjaC94ODYv
S2NvbmZpZwpAQCAtMTMsNyArMTMsNiBAQCBjb25maWcgWDg2CiAJc2VsZWN0IEhBU19FSENJCiAJ
c2VsZWN0IEhBU19FWF9UQUJMRQogCXNlbGVjdCBIQVNfRkFTVF9NVUxUSVBMWQotCXNlbGVjdCBI
QVNfR0RCU1gKIAlzZWxlY3QgSEFTX0lPUE9SVFMKIAlzZWxlY3QgSEFTX0tFWEVDCiAJc2VsZWN0
IE1FTV9BQ0NFU1NfQUxXQVlTX09OCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvZG9tYWluLmMg
Yi94ZW4vYXJjaC94ODYvZG9tYWluLmMKaW5kZXggN2NiN2ZkMzFkZC4uM2EzZmJkZTY0MiAxMDA2
NDQKLS0tIGEveGVuL2FyY2gveDg2L2RvbWFpbi5jCisrKyBiL3hlbi9hcmNoL3g4Ni9kb21haW4u
YwpAQCAtMjMxOCw2ICsyMzE4LDE5IEBAIHN0YXRpYyBpbnQgX19pbml0IGluaXRfdmNwdV9raWNr
X3NvZnRpcnEodm9pZCkKIH0KIF9faW5pdGNhbGwoaW5pdF92Y3B1X2tpY2tfc29mdGlycSk7CiAK
K3ZvaWQgZG9tYWluX3BhdXNlX2Zvcl9kZWJ1Z2dlcih2b2lkKQoreworI2lmZGVmIENPTkZJR19D
UkFTSF9ERUJVRworICAgIHN0cnVjdCB2Y3B1ICpjdXJyID0gY3VycmVudDsKKyAgICBzdHJ1Y3Qg
ZG9tYWluICpkID0gY3Vyci0+ZG9tYWluOworCisgICAgZG9tYWluX3BhdXNlX2J5X3N5c3RlbWNv
bnRyb2xsZXJfbm9zeW5jKGQpOworCisgICAgLyogaWYgZ2Ric3ggYWN0aXZlLCB3ZSBqdXN0IG5l
ZWQgdG8gcGF1c2UgdGhlIGRvbWFpbiAqLworICAgIGlmICggY3Vyci0+YXJjaC5nZGJzeF92Y3B1
X2V2ZW50ID09IDAgKQorICAgICAgICBzZW5kX2dsb2JhbF92aXJxKFZJUlFfREVCVUdHRVIpOwor
I2VuZGlmCit9CiAKIC8qCiAgKiBMb2NhbCB2YXJpYWJsZXM6CmRpZmYgLS1naXQgYS94ZW4vYXJj
aC94ODYvaHZtL3ZteC9yZWFsbW9kZS5jIGIveGVuL2FyY2gveDg2L2h2bS92bXgvcmVhbG1vZGUu
YwppbmRleCBiYjBiNDQzOWRmLi5iZGJkOWNiOTIxIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYv
aHZtL3ZteC9yZWFsbW9kZS5jCisrKyBiL3hlbi9hcmNoL3g4Ni9odm0vdm14L3JlYWxtb2RlLmMK
QEAgLTE0LDYgKzE0LDcgQEAKICNpbmNsdWRlIDx4ZW4vc2NoZWQuaD4KICNpbmNsdWRlIDx4ZW4v
cGFnaW5nLmg+CiAjaW5jbHVkZSA8eGVuL3NvZnRpcnEuaD4KKyNpbmNsdWRlIDxhc20vZGVidWdn
ZXIuaD4KICNpbmNsdWRlIDxhc20vZXZlbnQuaD4KICNpbmNsdWRlIDxhc20vaHZtL2VtdWxhdGUu
aD4KICNpbmNsdWRlIDxhc20vaHZtL2h2bS5oPgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9LY29u
ZmlnIGIveGVuL2NvbW1vbi9LY29uZmlnCmluZGV4IDJmNTE2ZGExMDEuLmIzZDE2MWQwNTcgMTAw
NjQ0Ci0tLSBhL3hlbi9jb21tb24vS2NvbmZpZworKysgYi94ZW4vY29tbW9uL0tjb25maWcKQEAg
LTU3LDkgKzU3LDYgQEAgY29uZmlnIEhBU19VQlNBTgogY29uZmlnIEhBU19LRVhFQwogCWJvb2wK
IAotY29uZmlnIEhBU19HREJTWAotCWJvb2wKLQogY29uZmlnIEhBU19JT1BPUlRTCiAJYm9vbAog
CmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL2RvbWFpbi5jIGIveGVuL2NvbW1vbi9kb21haW4uYwpp
bmRleCA2MTExMTZjN2ZjLi4zYTc3ZDcxN2RiIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL2RvbWFp
bi5jCisrKyBiL3hlbi9jb21tb24vZG9tYWluLmMKQEAgLTkxNSwyMCArOTE1LDYgQEAgdm9pZCB2
Y3B1X2VuZF9zaHV0ZG93bl9kZWZlcnJhbChzdHJ1Y3QgdmNwdSAqdikKICAgICAgICAgdmNwdV9j
aGVja19zaHV0ZG93bih2KTsKIH0KIAotI2lmZGVmIENPTkZJR19IQVNfR0RCU1gKLXZvaWQgZG9t
YWluX3BhdXNlX2Zvcl9kZWJ1Z2dlcih2b2lkKQotewotICAgIHN0cnVjdCB2Y3B1ICpjdXJyID0g
Y3VycmVudDsKLSAgICBzdHJ1Y3QgZG9tYWluICpkID0gY3Vyci0+ZG9tYWluOwotCi0gICAgZG9t
YWluX3BhdXNlX2J5X3N5c3RlbWNvbnRyb2xsZXJfbm9zeW5jKGQpOwotCi0gICAgLyogaWYgZ2Ri
c3ggYWN0aXZlLCB3ZSBqdXN0IG5lZWQgdG8gcGF1c2UgdGhlIGRvbWFpbiAqLwotICAgIGlmICgg
Y3Vyci0+YXJjaC5nZGJzeF92Y3B1X2V2ZW50ID09IDAgKQotICAgICAgICBzZW5kX2dsb2JhbF92
aXJxKFZJUlFfREVCVUdHRVIpOwotfQotI2VuZGlmCi0KIC8qIENvbXBsZXRlIGRvbWFpbiBkZXN0
cm95IGFmdGVyIFJDVSByZWFkZXJzIGFyZSBub3QgaG9sZGluZyBvbGQgcmVmZXJlbmNlcy4gKi8K
IHN0YXRpYyB2b2lkIGNvbXBsZXRlX2RvbWFpbl9kZXN0cm95KHN0cnVjdCByY3VfaGVhZCAqaGVh
ZCkKIHsKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL2FzbS14ODYvZGVidWdnZXIuaCBiL3hlbi9p
bmNsdWRlL2FzbS14ODYvZGVidWdnZXIuaAppbmRleCBiMWI2MjdmMWZhLi5mNTg3MjZkYWVjIDEw
MDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L2RlYnVnZ2VyLmgKKysrIGIveGVuL2luY2x1
ZGUvYXNtLXg4Ni9kZWJ1Z2dlci5oCkBAIC0zMyw2ICszMyw4IEBACiAjaW5jbHVkZSA8YXNtL3Jl
Z3MuaD4KICNpbmNsdWRlIDxhc20vcHJvY2Vzc29yLmg+CiAKK3ZvaWQgZG9tYWluX3BhdXNlX2Zv
cl9kZWJ1Z2dlcih2b2lkKTsKKwogI2lmZGVmIENPTkZJR19DUkFTSF9ERUJVRwogCiAjaW5jbHVk
ZSA8eGVuL2dkYnN0dWIuaD4KQEAgLTQ3LDE4ICs0OSw2IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBk
ZWJ1Z2dlcl90cmFwX2ZhdGFsKAogLyogSW50MyBpcyBhIHRyaXZpYWwgd2F5IHRvIGdhdGhlciBj
cHVfdXNlcl9yZWdzIGNvbnRleHQuICovCiAjZGVmaW5lIGRlYnVnZ2VyX3RyYXBfaW1tZWRpYXRl
KCkgX19hc21fXyBfX3ZvbGF0aWxlX18gKCAiaW50MyIgKTsKIAotI2Vsc2UKLQotc3RhdGljIGlu
bGluZSBib29sIGRlYnVnZ2VyX3RyYXBfZmF0YWwoCi0gICAgdW5zaWduZWQgaW50IHZlY3Rvciwg
c3RydWN0IGNwdV91c2VyX3JlZ3MgKnJlZ3MpCi17Ci0gICAgcmV0dXJuIGZhbHNlOwotfQotCi0j
ZGVmaW5lIGRlYnVnZ2VyX3RyYXBfaW1tZWRpYXRlKCkgKCh2b2lkKTApCi0KLSNlbmRpZgotCiBz
dGF0aWMgaW5saW5lIGJvb2wgZGVidWdnZXJfdHJhcF9lbnRyeSgKICAgICB1bnNpZ25lZCBpbnQg
dmVjdG9yLCBzdHJ1Y3QgY3B1X3VzZXJfcmVncyAqcmVncykKIHsKQEAgLTg0LDYgKzc0LDI0IEBA
IHN0YXRpYyBpbmxpbmUgYm9vbCBkZWJ1Z2dlcl90cmFwX2VudHJ5KAogICAgIHJldHVybiBmYWxz
ZTsKIH0KIAorI2Vsc2UKKworc3RhdGljIGlubGluZSBib29sIGRlYnVnZ2VyX3RyYXBfZmF0YWwo
CisgICAgdW5zaWduZWQgaW50IHZlY3Rvciwgc3RydWN0IGNwdV91c2VyX3JlZ3MgKnJlZ3MpCit7
CisgICAgcmV0dXJuIGZhbHNlOworfQorCisjZGVmaW5lIGRlYnVnZ2VyX3RyYXBfaW1tZWRpYXRl
KCkgKCh2b2lkKTApCisKK3N0YXRpYyBpbmxpbmUgYm9vbCBkZWJ1Z2dlcl90cmFwX2VudHJ5KAor
ICAgIHVuc2lnbmVkIGludCB2ZWN0b3IsIHN0cnVjdCBjcHVfdXNlcl9yZWdzICpyZWdzKQorewor
ICAgIHJldHVybiBmYWxzZTsKK30KKworI2VuZGlmCisKIHVuc2lnbmVkIGludCBkYmdfcndfbWVt
KHZvaWQgKiBfX3VzZXIgYWRkciwgdm9pZCAqIF9fdXNlciBidWYsCiAgICAgICAgICAgICAgICAg
ICAgICAgICB1bnNpZ25lZCBpbnQgbGVuLCBkb21pZF90IGRvbWlkLCBib29sIHRvYWRkciwKICAg
ICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IHBnZDMpOwpkaWZmIC0tZ2l0IGEveGVuL2lu
Y2x1ZGUveGVuL3NjaGVkLmggYi94ZW4vaW5jbHVkZS94ZW4vc2NoZWQuaAppbmRleCA5ZjdiYzY5
MjkzLi4wYjQxZTkzNmQ1IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vc2NoZWQuaAorKysg
Yi94ZW4vaW5jbHVkZS94ZW4vc2NoZWQuaApAQCAtNjUyLDcgKzY1Miw2IEBAIHZvaWQgZG9tYWlu
X2Rlc3Ryb3koc3RydWN0IGRvbWFpbiAqZCk7CiBpbnQgZG9tYWluX2tpbGwoc3RydWN0IGRvbWFp
biAqZCk7CiBpbnQgZG9tYWluX3NodXRkb3duKHN0cnVjdCBkb21haW4gKmQsIHU4IHJlYXNvbik7
CiB2b2lkIGRvbWFpbl9yZXN1bWUoc3RydWN0IGRvbWFpbiAqZCk7Ci12b2lkIGRvbWFpbl9wYXVz
ZV9mb3JfZGVidWdnZXIodm9pZCk7CiAKIGludCBkb21haW5fc29mdF9yZXNldChzdHJ1Y3QgZG9t
YWluICpkKTsKIAotLSAKMi4xNi40CgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVu
cHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZv
L3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 339EB164757
	for <lists+xen-devel@lfdr.de>; Wed, 19 Feb 2020 15:43:49 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j4QXR-0006SN-K6; Wed, 19 Feb 2020 14:41:21 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=QD8l=4H=ffwll.ch=daniel.vetter@srs-us1.protection.inumbo.net>)
 id 1j4QXP-0006SD-N0
 for xen-devel@lists.xenproject.org; Wed, 19 Feb 2020 14:41:19 +0000
X-Inumbo-ID: e3cd71c8-5325-11ea-b0fd-bc764e2007e4
Received: from mail-oi1-x241.google.com (unknown [2607:f8b0:4864:20::241])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id e3cd71c8-5325-11ea-b0fd-bc764e2007e4;
 Wed, 19 Feb 2020 14:41:19 +0000 (UTC)
Received: by mail-oi1-x241.google.com with SMTP id d62so23954156oia.11
 for <xen-devel@lists.xenproject.org>; Wed, 19 Feb 2020 06:41:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc; bh=6LKfyG4rH5EfpUi30c13AAPS68NmIvHHD02r+L3Dggw=;
 b=Mv8cfHSCpmPx/g0LYMDekwaCn69z3efbzziY08NWuOY78CgrsRsDwCVF+ztFn/7oPY
 ON7Wshq6eIYsoKgWLit0FvgWf4xkie9bTslnKV0miqIxsbvvW0YoLZ/ogbQlhtJkQmcZ
 oNzlMdqtVgnVSoenvyqwQ1RP+owHeeccqjKdY=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=6LKfyG4rH5EfpUi30c13AAPS68NmIvHHD02r+L3Dggw=;
 b=FlsabXddm7AtcmaMZyZ5w8DIVVENXADXeW0PDL+Rnvt6Chwen1251Vg3CYvd5SnmXY
 YXUBY5oFRBasmz1nWM6Ko6i74gQUnStN1KxJCcQ6xcutsNkUOdgyX3Ihda7o/cTCiQry
 tP2N1AjHY/TN3kBYwtW3uDW231Q7xBK0XFIIvuzJhkf8toFDGddqyaw1POtBsBz/OPWo
 9cp1P2L3Ffk4naWTz0DfNZpncZJJhxveq0at4m4zXNv3j9JDX+raSCOrKFUxsdE14R1T
 1FwCdx/kVSqq4uFcPGXb0Y/O0P0G85jEoGOU4j35cg6yyJ21NUhjtVGvvVMdNulpRHTj
 SDvA==
X-Gm-Message-State: APjAAAW8yh1Iz8JrzmqVFALqoZmxGV3YobnOFVGsZ/1Dxidt4Pb7b4oE
 S9E/YMplchPuscLMdbXtXTSsZWBjO5tUdIaWJK+WOA==
X-Google-Smtp-Source: APXvYqzNdGME456SKaX1Qim+QM5UpqgJb+dI/Qyuquzzy/Wv6p4Q5iaWqcJ8xiUHqXbl8HJmb+Jx+OGTTm/maWHpKZI=
X-Received: by 2002:aca:2407:: with SMTP id n7mr4859370oic.14.1582123278554;
 Wed, 19 Feb 2020 06:41:18 -0800 (PST)
MIME-Version: 1.0
References: <20200219102122.1607365-1-daniel.vetter@ffwll.ch>
 <20200219102122.1607365-5-daniel.vetter@ffwll.ch>
 <20200219133900.GE5070@pendragon.ideasonboard.com>
In-Reply-To: <20200219133900.GE5070@pendragon.ideasonboard.com>
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Wed, 19 Feb 2020 15:41:07 +0100
Message-ID: <CAKMK7uFACJa15K6OfnPFj2nP_WQ=a1tWAe09BJ3Mt+KX-VQ1-g@mail.gmail.com>
To: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Subject: Re: [Xen-devel] [PATCH 04/52] drm: Set final_kfree in drm_dev_alloc
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Oleksandr Andrushchenko <oleksandr_andrushchenko@epam.com>,
 David Airlie <airlied@linux.ie>,
 Intel Graphics Development <intel-gfx@lists.freedesktop.org>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 Gerd Hoffmann <kraxel@redhat.com>, Thomas Zimmermann <tzimmermann@suse.de>,
 Daniel Vetter <daniel.vetter@intel.com>, xen-devel@lists.xenproject.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gV2VkLCBGZWIgMTksIDIwMjAgYXQgMjozOSBQTSBMYXVyZW50IFBpbmNoYXJ0CjxsYXVyZW50
LnBpbmNoYXJ0QGlkZWFzb25ib2FyZC5jb20+IHdyb3RlOgo+Cj4gSGkgRGFuaWVsLAo+Cj4gVGhh
bmsgeW91IGZvciB0aGUgcGF0Y2guCj4KPiBPbiBXZWQsIEZlYiAxOSwgMjAyMCBhdCAxMToyMDoz
NEFNICswMTAwLCBEYW5pZWwgVmV0dGVyIHdyb3RlOgo+ID4gSSBhbHNvIGRpZCBhIGZ1bGwgcmV2
aWV3IG9mIGFsbCBjYWxsZXJzLCBhbmQgb25seSB0aGUgeGVuIGRyaXZlcgo+ID4gZm9yZ290IHRv
IGNhbGwgZHJtX2Rldl9wdXQgaW4gdGhlIGZhaWx1cmUgcGF0aC4gRml4IHRoYXQgdXAgdG9vLgo+
Cj4gSSdkIHNwbGl0IHRoaXMgcGF0Y2ggaW4gdHdvIHRoZW4sIHdpdGggdGhlIFhlbiBmaXJzdCBj
b21pbmcgZmlyc3QsIGFuZAo+IHdpdGggYW4gZXhwbGFuYXRpb24gaW4gdGhlIGNvbW1pdCBtZXNz
YWdlIG9mIHRoZSBzZWNvbmQgcGF0Y2ggYWJvdXQgd2h5Cj4geW91IGNhbGwgZHJtbV9hZGRfZmlu
YWxfa2ZyZWUoKSBpbiBkcm1fZGV2X2FsbG9jKCkuCj4KPiA+IHYyOiBJIG5vdGljZWQgdGhhdCB4
ZW4gaGFzIGEgZHJtX2RyaXZlci5yZWxlYXNlIGhvb2ssIGFuZCB1c2VzCj4gPiBkcm1fZGV2X2Fs
bG9jKCkuIFdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBrZnJlZSBmcm9tCj4gPiB4ZW5fZHJtX2Rydl9y
ZWxlYXNlKCkuCj4gPgo+ID4gYm9jaHMgYWxzbyBoYXMgYSByZWxlYXNlIGhvb2ssIGJ1dCBsZWFr
ZWQgdGhlIGRybV9kZXZpY2UgZXZlciBzaW5jZQo+ID4KPiA+IGNvbW1pdCAwYTY2NTliZGM1ZTgy
MjFkYTk5ZWViYjE3NmZkOTU5MTQzNWUzOGRlCj4gPiBBdXRob3I6IEdlcmQgSG9mZm1hbm4gPGty
YXhlbEByZWRoYXQuY29tPgo+ID4gRGF0ZTogICBUdWUgRGVjIDE3IDE4OjA0OjQ2IDIwMTMgKzAx
MDAKPiA+Cj4gPiAgICAgZHJtL2JvY2hzOiBuZXcgZHJpdmVyCj4gPgo+ID4gVGhpcyBwYXRjaCBo
ZXJlIGZpeGVzIHRoYXQgbGVhay4KPiA+Cj4gPiBTYW1lIGZvciB2aXJ0aW8sIHN0YXJ0ZWQgbGVh
a2luZyB3aXRoCj4gPgo+ID4gY29tbWl0IGIxZGYzYTJiMjRhOTE3Zjg4NTNkNDNmZTk2ODNjMGUz
NjBkMmMzM2EKPiA+IEF1dGhvcjogR2VyZCBIb2ZmbWFubiA8a3JheGVsQHJlZGhhdC5jb20+Cj4g
PiBEYXRlOiAgIFR1ZSBGZWIgMTEgMTQ6NTg6MDQgMjAyMCArMDEwMAo+ID4KPiA+ICAgICBkcm0v
dmlydGlvOiBhZGQgZHJtX2RyaXZlci5yZWxlYXNlIGNhbGxiYWNrLgo+ID4KPiA+IENjOiBHZXJk
IEhvZmZtYW5uIDxrcmF4ZWxAcmVkaGF0LmNvbT4KPiA+IENjOiBPbGVrc2FuZHIgQW5kcnVzaGNo
ZW5rbyA8b2xla3NhbmRyX2FuZHJ1c2hjaGVua29AZXBhbS5jb20+Cj4gPiBDYzogeGVuLWRldmVs
QGxpc3RzLnhlbnByb2plY3Qub3JnCj4gPgo+ID4gU2lnbmVkLW9mZi1ieTogRGFuaWVsIFZldHRl
ciA8ZGFuaWVsLnZldHRlckBpbnRlbC5jb20+Cj4gPiBDYzogTWFhcnRlbiBMYW5raG9yc3QgPG1h
YXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4KPiA+IENjOiBNYXhpbWUgUmlwYXJkIDxt
cmlwYXJkQGtlcm5lbC5vcmc+Cj4gPiBDYzogVGhvbWFzIFppbW1lcm1hbm4gPHR6aW1tZXJtYW5u
QHN1c2UuZGU+Cj4gPiBDYzogRGF2aWQgQWlybGllIDxhaXJsaWVkQGxpbnV4LmllPgo+ID4gQ2M6
IERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5jaD4KPiA+IENjOiBPbGVrc2FuZHIgQW5kcnVz
aGNoZW5rbyA8b2xla3NhbmRyX2FuZHJ1c2hjaGVua29AZXBhbS5jb20+Cj4gPiBDYzogeGVuLWRl
dmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCj4gPiAtLS0KPiA+ICBkcml2ZXJzL2dwdS9kcm0vZHJt
X2Rydi5jICAgICAgICAgICB8IDMgKysrCj4gPiAgZHJpdmVycy9ncHUvZHJtL3hlbi94ZW5fZHJt
X2Zyb250LmMgfCAyICstCj4gPiAgMiBmaWxlcyBjaGFuZ2VkLCA0IGluc2VydGlvbnMoKyksIDEg
ZGVsZXRpb24oLSkKPiA+Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9kcnYu
YyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZHJ2LmMKPiA+IGluZGV4IDNlNTYyN2Q2ZWJhNi4uOWU2
MmUyOGJiYzYyIDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9kcnYuYwo+ID4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9kcnYuYwo+ID4gQEAgLTM5LDYgKzM5LDcgQEAKPiA+
ICAjaW5jbHVkZSA8ZHJtL2RybV9jb2xvcl9tZ210Lmg+Cj4gPiAgI2luY2x1ZGUgPGRybS9kcm1f
ZHJ2Lmg+Cj4gPiAgI2luY2x1ZGUgPGRybS9kcm1fZmlsZS5oPgo+ID4gKyNpbmNsdWRlIDxkcm0v
ZHJtX21hbmFnZWQuaD4KPiA+ICAjaW5jbHVkZSA8ZHJtL2RybV9tb2RlX29iamVjdC5oPgo+ID4g
ICNpbmNsdWRlIDxkcm0vZHJtX3ByaW50Lmg+Cj4gPgo+ID4gQEAgLTgxOSw2ICs4MjAsOCBAQCBz
dHJ1Y3QgZHJtX2RldmljZSAqZHJtX2Rldl9hbGxvYyhzdHJ1Y3QgZHJtX2RyaXZlciAqZHJpdmVy
LAo+ID4gICAgICAgICAgICAgICByZXR1cm4gRVJSX1BUUihyZXQpOwo+ID4gICAgICAgfQo+ID4K
PiA+ICsgICAgIGRybW1fYWRkX2ZpbmFsX2tmcmVlKGRldiwgZGV2KTsKPgo+IGRybW1fYWRkX2Zp
bmFsX2tmcmVlKCkgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuIERvZXMgdGhpcyBtZWFuIHRoYXQg
YQo+IGRyaXZlciB1c2luZyBkcm1fZGV2X2FsbG9jKCkgaXNuJ3QgYWxsb3dlZCB0byB1c2UgZHJt
bV9hZGRfZmluYWxfa2ZyZWUoKQo+IHRvIHRyYWN0IGl0cyBvd24gcHJpdmF0ZSBzdHJ1Y3R1cmUg
PwoKVGhlcmUgaXMgb25seSBfb25lXyBmaW5hbCBrZnJlZSgpIGZvciB0aGUgc3RydWN0dXJlIGNv
bnRhaW5pbmcKZHJtX2RldmljZS4gQW55dGhpbmcgZWxzZSB5b3UgY2FuIGp1c3QgYWxsb2NhdGUg
d2l0aCBkcm1tX2t6YWxsb2MsIGFuZAppdCB3aWxsIGJlIGNsZWFuZWQgdXAgYmVmb3JlLiBUaGUg
Y2hpY2tlbi9lZ2cgZG9lc24ndCBqdXN0IGV4aXN0CmFyb3VuZCBpbml0IHRpbWUgd2l0aCBkcm1f
ZGV2aWNlLCBidXQgYWxzbyBhdCBjbGVhbnVwIHRpbWUgLSB0aGUgbGlzdApvZiBjbGVhbnVwIGFj
dGlvbnMgaXMgc3RvcmVkIGluIGRybV9kZXZpY2UsIHBsdXMgdGhlIGxvZ2dpbmcgbWFjcm9zCmFs
c28gbmVlZCBhIGRybV9kZXZpY2UuIFdoaWNoIG1lYW5zIHdlIHJlYWxseSwgcmVhbGx5LCByZWFs
bHkgbmVlZCB0bwptYWtlIHN1cmUgdGhhdCB0aGUgZHJtX2RldmljZSBpcyB0aGUgdmVyeSBsYXN0
IHRoaW5nIHRoYXQgZ29lcyBhd2F5LgpIZW5jZSB0aGlzIHNwZWNpYWwgY2FzZS4gSSB3YXMgc2Vt
aS10ZW1wdGVkIHRvIGRyaWxsIHRocm91Z2ggdGhlIHNsYWIKZGVidWcgbGF5ZXIgYW5kIGFkZCBh
IGNoZWNrIHRoYXQgdGhlIGRybV9kZXZpY2UgcG9pbnRlciBpbiB0aGUKZmluYWxfa2ZyZWUgaXMg
YWN0dWFsbHkgd2l0aGluIHRoZSBzbGFiIGFsbG9jYXRpb24gYmxvY2suIEp1c3QgdG8gbWFrZQpz
dXJlIHBlb3BsZSB1c2UgdGhpcyBjb3JyZWN0bHksIGFuZCBub3QganVzdCBhcyBhICJoZXkgaGVy
ZSdzIGEgcmFuZG9tCmttYWxsb2MgYmxvY2sgSSB3YW50IHlvdSB0byByZWxlYXNlLCB0aHhva2J5
ZSIuIEJlY2F1c2UgZG9pbmcgdGhhdAp3b3VsZCBjYXVzZSBhIGZldyB1c2UtYWZ0ZXItZnJlZSAo
b3IgYSBsZWFrKS4KLURhbmllbAoKPgo+ID4gKwo+ID4gICAgICAgcmV0dXJuIGRldjsKPiA+ICB9
Cj4gPiAgRVhQT1JUX1NZTUJPTChkcm1fZGV2X2FsbG9jKTsKPiA+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0veGVuL3hlbl9kcm1fZnJvbnQuYyBiL2RyaXZlcnMvZ3B1L2RybS94ZW4veGVu
X2RybV9mcm9udC5jCj4gPiBpbmRleCA0YmU0OWMxYWVmNTEuLmQyMmI1ZGEzODkzNSAxMDA2NDQK
PiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS94ZW4veGVuX2RybV9mcm9udC5jCj4gPiArKysgYi9k
cml2ZXJzL2dwdS9kcm0veGVuL3hlbl9kcm1fZnJvbnQuYwo+ID4gQEAgLTQ2MSw3ICs0NjEsNiBA
QCBzdGF0aWMgdm9pZCB4ZW5fZHJtX2Rydl9yZWxlYXNlKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYp
Cj4gPiAgICAgICBkcm1fbW9kZV9jb25maWdfY2xlYW51cChkZXYpOwo+ID4KPiA+ICAgICAgIGRy
bV9kZXZfZmluaShkZXYpOwo+ID4gLSAgICAga2ZyZWUoZGV2KTsKPiA+Cj4gPiAgICAgICBpZiAo
ZnJvbnRfaW5mby0+Y2ZnLmJlX2FsbG9jKQo+ID4gICAgICAgICAgICAgICB4ZW5idXNfc3dpdGNo
X3N0YXRlKGZyb250X2luZm8tPnhiX2RldiwKPiA+IEBAIC01NjEsNiArNTYwLDcgQEAgc3RhdGlj
IGludCB4ZW5fZHJtX2Rydl9pbml0KHN0cnVjdCB4ZW5fZHJtX2Zyb250X2luZm8gKmZyb250X2lu
Zm8pCj4gPiAgZmFpbF9tb2Rlc2V0Ogo+ID4gICAgICAgZHJtX2ttc19oZWxwZXJfcG9sbF9maW5p
KGRybV9kZXYpOwo+ID4gICAgICAgZHJtX21vZGVfY29uZmlnX2NsZWFudXAoZHJtX2Rldik7Cj4g
PiArICAgICBkcm1fZGV2X3B1dChkcm1fZGV2KTsKPiA+ICBmYWlsOgo+ID4gICAgICAga2ZyZWUo
ZHJtX2luZm8pOwo+ID4gICAgICAgcmV0dXJuIHJldDsKPgo+IC0tCj4gUmVnYXJkcywKPgo+IExh
dXJlbnQgUGluY2hhcnQKCgoKLS0gCkRhbmllbCBWZXR0ZXIKU29mdHdhcmUgRW5naW5lZXIsIElu
dGVsIENvcnBvcmF0aW9uCis0MSAoMCkgNzkgMzY1IDU3IDQ4IC0gaHR0cDovL2Jsb2cuZmZ3bGwu
Y2gKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1k
ZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8v
bGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

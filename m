Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 795E24C47E
	for <lists+xen-devel@lfdr.de>; Thu, 20 Jun 2019 02:34:18 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hdkzJ-0000Lm-JB; Thu, 20 Jun 2019 00:31:37 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=Y7lb=UT=gmail.com=christopher.w.clark@srs-us1.protection.inumbo.net>)
 id 1hdkzH-0000JE-Fe
 for xen-devel@lists.xenproject.org; Thu, 20 Jun 2019 00:31:35 +0000
X-Inumbo-ID: c1d899cf-92f2-11e9-8980-bc764e045a96
Received: from mail-io1-xd2b.google.com (unknown [2607:f8b0:4864:20::d2b])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id c1d899cf-92f2-11e9-8980-bc764e045a96;
 Thu, 20 Jun 2019 00:31:34 +0000 (UTC)
Received: by mail-io1-xd2b.google.com with SMTP id s7so766406iob.11
 for <xen-devel@lists.xenproject.org>; Wed, 19 Jun 2019 17:31:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=csP8Dwc66MZXJ6lVE4hSijuaWaSG0fWL9FpKEhkXBek=;
 b=t5RbJ2h6sqgS9ChxZ+rWrDic7cmqmvwrF3STtYBSTZxoegDoqR146sD7FUw71N6oDM
 FAKyLLubMznlckfKY2oFfeFck61YwljZy0WPTm3ttB9QGxT3EMzLfH9WEWEpYzzVuhv1
 IMnOJsrkw7jOx+8M6yHLTwDwm48TGA/fznWCXHbXvBpP6g1aJ1sThHwFZ4oTVHi/GtW6
 BfwilI5qo1/nkSaS2BRDJPQz5kr6s0p8NC/EU34l2fLt5wtnDaOLYVTXKAjsk1PZIGPQ
 u5Rtsi+sRAHEfSrtsecVUTY22W64J8Z3hDr/iQWjrwQnBCwMbMfsCwlvhjcVs7iFfEK8
 YKtg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=csP8Dwc66MZXJ6lVE4hSijuaWaSG0fWL9FpKEhkXBek=;
 b=mk3yX+uE1EQ+A9KN0LaEePkiDCf87E95H3kfj61xh+CGdRtlMMC+vMrHzX8WH44Jcm
 +fHtOfum7L3Y0qZpqGTLCwKJDMROm4+FBeHEPS6j3Z/ZqiEC0C5SqTDIy2MIw22d7/lP
 EwISTHrKeLIVtgkBng1jHoTb2X8tat18CguWNy7KMxNUryGm+//f5Gk85/fjN8rFBf1K
 g3vi86KI6iRBJ7ASTiUgEaU6fyswfrZzb+M3hVQYYlPMOB44psP6IVRfS7jvEkc2u0YP
 mmrtQQK5OgVnCQ/B6lsDiXZFFv/ifkx4dn7rvpLQ/tv83xDmFJR2pOAiTfajzade3hzv
 1hOA==
X-Gm-Message-State: APjAAAWK6KZkX112We+dv+qcaxwDqNwldMh8GWbBUXh9jxpR05Axn/ih
 V7UNr4IzwAFzz6cyLeVR5Y7B09/G4Dw=
X-Google-Smtp-Source: APXvYqwpsi9w1qS4SR6LhejB14Bnby7DRqW+OggJn6cNJZDUE2e+BepafrRK72HDo5kBGbSSNjfBbg==
X-Received: by 2002:a5d:9643:: with SMTP id d3mr33288373ios.227.1560990693700; 
 Wed, 19 Jun 2019 17:31:33 -0700 (PDT)
Received: from desktop.ice.pyrology.org
 (static-50-53-74-115.bvtn.or.frontiernet.net. [50.53.74.115])
 by smtp.gmail.com with ESMTPSA id e188sm22579016ioa.3.2019.06.19.17.31.31
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Wed, 19 Jun 2019 17:31:32 -0700 (PDT)
From: Christopher Clark <christopher.w.clark@gmail.com>
To: xen-devel@lists.xenproject.org
Date: Wed, 19 Jun 2019 17:30:53 -0700
Message-Id: <20190620003053.21993-10-christopher.w.clark@gmail.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190620003053.21993-1-christopher.w.clark@gmail.com>
References: <20190620003053.21993-1-christopher.w.clark@gmail.com>
Subject: [Xen-devel] [RFC 9/9] x86/nested,
 xsm: add nested_schedop_shutdown hypercall
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Rich Persaud <persaur@gmail.com>,
 Tim Deegan <tim@xen.org>, Julien Grall <julien.grall@arm.com>,
 Jan Beulich <jbeulich@suse.com>, Daniel De Graaf <dgdegra@tycho.nsa.gov>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

UHJvdmlkZXMgcHJveHlpbmcgdG8gdGhlIGhvc3QgaHlwZXJ2aXNvciBmb3IgU0NIRURPUF9zaHV0
ZG93biBvcC4KClNpZ25lZC1vZmYtYnk6IENocmlzdG9waGVyIENsYXJrIDxjaHJpc3RvcGhlci5j
bGFya0BzdGFybGFiLmlvPgotLS0KIHRvb2xzL2ZsYXNrL3BvbGljeS9tb2R1bGVzL2RvbTAudGUg
IHwgIDEgKwogeGVuL2FyY2gveDg2L2d1ZXN0L2h5cGVyY2FsbF9wYWdlLlMgfCAgMSArCiB4ZW4v
YXJjaC94ODYvZ3Vlc3QveGVuLW5lc3RlZC5jICAgICB8IDI1ICsrKysrKysrKysrKysrKysrKysr
KysrKysKIHhlbi9hcmNoL3g4Ni9oeXBlcmNhbGwuYyAgICAgICAgICAgIHwgIDEgKwogeGVuL2Fy
Y2gveDg2L3B2L2h5cGVyY2FsbC5jICAgICAgICAgfCAgMSArCiB4ZW4vaW5jbHVkZS9wdWJsaWMv
eGVuLmggICAgICAgICAgICB8ICAxICsKIHhlbi9pbmNsdWRlL3hlbi9oeXBlcmNhbGwuaCAgICAg
ICAgIHwgIDQgKysrKwogeGVuL2luY2x1ZGUveHNtL2R1bW15LmggICAgICAgICAgICAgfCAgNyAr
KysrKysrCiB4ZW4vaW5jbHVkZS94c20veHNtLmggICAgICAgICAgICAgICB8ICA3ICsrKysrKysK
IHhlbi94c20vZHVtbXkuYyAgICAgICAgICAgICAgICAgICAgIHwgIDEgKwogeGVuL3hzbS9mbGFz
ay9ob29rcy5jICAgICAgICAgICAgICAgfCAgNiArKysrKysKIDExIGZpbGVzIGNoYW5nZWQsIDU1
IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS90b29scy9mbGFzay9wb2xpY3kvbW9kdWxlcy9k
b20wLnRlIGIvdG9vbHMvZmxhc2svcG9saWN5L21vZHVsZXMvZG9tMC50ZQppbmRleCBiYTNjNWFk
NjNkLi4yMzkxMWFlZjRkIDEwMDY0NAotLS0gYS90b29scy9mbGFzay9wb2xpY3kvbW9kdWxlcy9k
b20wLnRlCisrKyBiL3Rvb2xzL2ZsYXNrL3BvbGljeS9tb2R1bGVzL2RvbTAudGUKQEAgLTUxLDYg
KzUxLDcgQEAgYWxsb3cgZG9tMF90IG5lc3RlZHhlbl90OmdyYW50IHF1ZXJ5OwogYWxsb3cgZG9t
MF90IG5lc3RlZHhlbl90Om5lc3RlZF9ldmVudCB7CiAgICAgYWxsb2NfdW5ib3VuZCBiaW5kX3Zj
cHUgY2xvc2Ugc2VuZCB1bm1hc2sKIH07CithbGxvdyBkb20wX3QgbmVzdGVkeGVuX3Q6ZG9tYWlu
IHsgc2h1dGRvd24gfTsKIAogIyBUaGVzZSBwZXJtaXNzaW9ucyBhbGxvdyB1c2luZyB0aGUgRkxB
U0sgc2VjdXJpdHkgc2VydmVyIHRvIGNvbXB1dGUgYWNjZXNzCiAjIGNoZWNrcyBsb2NhbGx5LCB3
aGljaCBjb3VsZCBiZSB1c2VkIGJ5IGEgZG9tYWluIG9yIHNlcnZpY2UgKHN1Y2ggYXMgeGVuc3Rv
cmUpCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvZ3Vlc3QvaHlwZXJjYWxsX3BhZ2UuUyBiL3hl
bi9hcmNoL3g4Ni9ndWVzdC9oeXBlcmNhbGxfcGFnZS5TCmluZGV4IDY0ZjE4ODU2MjkuLjI4YTYz
MWU4NTAgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9ndWVzdC9oeXBlcmNhbGxfcGFnZS5TCisr
KyBiL3hlbi9hcmNoL3g4Ni9ndWVzdC9oeXBlcmNhbGxfcGFnZS5TCkBAIC02NSw2ICs2NSw3IEBA
IERFQ0xBUkVfSFlQRVJDQUxMKG5lc3RlZF9tZW1vcnlfb3ApCiBERUNMQVJFX0hZUEVSQ0FMTChu
ZXN0ZWRfaHZtX29wKQogREVDTEFSRV9IWVBFUkNBTEwobmVzdGVkX2dyYW50X3RhYmxlX29wKQog
REVDTEFSRV9IWVBFUkNBTEwobmVzdGVkX2V2ZW50X2NoYW5uZWxfb3ApCitERUNMQVJFX0hZUEVS
Q0FMTChuZXN0ZWRfc2NoZWRfb3ApCiAKIERFQ0xBUkVfSFlQRVJDQUxMKGFyY2hfMCkKIERFQ0xB
UkVfSFlQRVJDQUxMKGFyY2hfMSkKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9ndWVzdC94ZW4t
bmVzdGVkLmMgYi94ZW4vYXJjaC94ODYvZ3Vlc3QveGVuLW5lc3RlZC5jCmluZGV4IGJhYmY0YmY3
ODMuLjRmMzNkNWQ5YmUgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9ndWVzdC94ZW4tbmVzdGVk
LmMKKysrIGIveGVuL2FyY2gveDg2L2d1ZXN0L3hlbi1uZXN0ZWQuYwpAQCAtMjYsNiArMjYsNyBA
QAogI2luY2x1ZGUgPHB1YmxpYy9ncmFudF90YWJsZS5oPgogI2luY2x1ZGUgPHB1YmxpYy9odm0v
aHZtX29wLmg+CiAjaW5jbHVkZSA8cHVibGljL21lbW9yeS5oPgorI2luY2x1ZGUgPHB1YmxpYy9z
Y2hlZC5oPgogI2luY2x1ZGUgPHB1YmxpYy92ZXJzaW9uLmg+CiAjaW5jbHVkZSA8cHVibGljL3hl
bi5oPgogCkBAIC0zMjMsMyArMzI0LDI3IEBAIGxvbmcgZG9fbmVzdGVkX2V2ZW50X2NoYW5uZWxf
b3AoaW50IGNtZCwgWEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh2b2lkKSBhcmcpCiAKICAgICByZXR1
cm4gcmV0OwogfQorCitsb25nIGRvX25lc3RlZF9zY2hlZF9vcChpbnQgY21kLCBYRU5fR1VFU1Rf
SEFORExFX1BBUkFNKHZvaWQpIGFyZykKK3sKKyAgICBzdHJ1Y3Qgc2NoZWRfc2h1dGRvd24gc2No
ZWRfc2h1dGRvd247CisgICAgbG9uZyByZXQ7CisKKyAgICBpZiAoICF4ZW5fbmVzdGVkICkKKyAg
ICAgICAgcmV0dXJuIC1FTk9TWVM7CisKKyAgICBpZiAoIGNtZCAhPSBTQ0hFRE9QX3NodXRkb3du
ICkKKyAgICB7CisgICAgICAgIGdwcmludGsoWEVOTE9HX0VSUiwgIk5lc3RlZDogc2NoZWQgb3Ag
JWQgbm90IHN1cHBvcnRlZC5cbiIsIGNtZCk7CisgICAgICAgIHJldHVybiAtRU9QTk9UU1VQUDsK
KyAgICB9CisKKyAgICByZXQgPSB4c21fbmVzdGVkX3NjaGVkb3Bfc2h1dGRvd24oWFNNX1BSSVYs
IGN1cnJlbnQtPmRvbWFpbik7CisgICAgaWYgKCByZXQgKQorICAgICAgICByZXR1cm4gcmV0Owor
CisgICAgaWYgKCBjb3B5X2Zyb21fZ3Vlc3QoJnNjaGVkX3NodXRkb3duLCBhcmcsIDEpICkKKyAg
ICAgICAgcmV0dXJuIC1FRkFVTFQ7CisKKyAgICByZXR1cm4geGVuX2h5cGVyY2FsbF9zY2hlZF9v
cChjbWQsICZzY2hlZF9zaHV0ZG93bik7Cit9CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvaHlw
ZXJjYWxsLmMgYi94ZW4vYXJjaC94ODYvaHlwZXJjYWxsLmMKaW5kZXggNzUyOTU1YWM4MS4uOGJm
MWQ3NGYxNCAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L2h5cGVyY2FsbC5jCisrKyBiL3hlbi9h
cmNoL3g4Ni9oeXBlcmNhbGwuYwpAQCAtNzksNiArNzksNyBAQCBjb25zdCBoeXBlcmNhbGxfYXJn
c190IGh5cGVyY2FsbF9hcmdzX3RhYmxlW05SX2h5cGVyY2FsbHNdID0KICAgICBBUkdTKG5lc3Rl
ZF9odm1fb3AsIDIpLAogICAgIEFSR1MobmVzdGVkX2dyYW50X3RhYmxlX29wLCAzKSwKICAgICBB
UkdTKG5lc3RlZF9ldmVudF9jaGFubmVsX29wLCAyKSwKKyAgICBBUkdTKG5lc3RlZF9zY2hlZF9v
cCwgMiksCiAjZW5kaWYKICAgICBBUkdTKG1jYSwgMSksCiAgICAgQVJHUyhhcmNoXzEsIDEpLApk
aWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L3B2L2h5cGVyY2FsbC5jIGIveGVuL2FyY2gveDg2L3B2
L2h5cGVyY2FsbC5jCmluZGV4IDZiMWFlNzRkNjQuLjQ4NzRlNzAxZTAgMTAwNjQ0Ci0tLSBhL3hl
bi9hcmNoL3g4Ni9wdi9oeXBlcmNhbGwuYworKysgYi94ZW4vYXJjaC94ODYvcHYvaHlwZXJjYWxs
LmMKQEAgLTkwLDYgKzkwLDcgQEAgY29uc3QgaHlwZXJjYWxsX3RhYmxlX3QgcHZfaHlwZXJjYWxs
X3RhYmxlW10gPSB7CiAgICAgSFlQRVJDQUxMKG5lc3RlZF9odm1fb3ApLAogICAgIEhZUEVSQ0FM
TChuZXN0ZWRfZ3JhbnRfdGFibGVfb3ApLAogICAgIEhZUEVSQ0FMTChuZXN0ZWRfZXZlbnRfY2hh
bm5lbF9vcCksCisgICAgSFlQRVJDQUxMKG5lc3RlZF9zY2hlZF9vcCksCiAjZW5kaWYKICAgICBI
WVBFUkNBTEwobWNhKSwKICAgICBIWVBFUkNBTEwoYXJjaF8xKSwKZGlmZiAtLWdpdCBhL3hlbi9p
bmNsdWRlL3B1YmxpYy94ZW4uaCBiL3hlbi9pbmNsdWRlL3B1YmxpYy94ZW4uaAppbmRleCA1ZmIz
MjJlODgyLi42MmEyMzMxMGU3IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9wdWJsaWMveGVuLmgK
KysrIGIveGVuL2luY2x1ZGUvcHVibGljL3hlbi5oCkBAIC0xMjYsNiArMTI2LDcgQEAgREVGSU5F
X1hFTl9HVUVTVF9IQU5ETEUoeGVuX3Vsb25nX3QpOwogI2RlZmluZSBfX0hZUEVSVklTT1JfbmVz
dGVkX2h2bV9vcCAgICAgICAgNDQKICNkZWZpbmUgX19IWVBFUlZJU09SX25lc3RlZF9ncmFudF90
YWJsZV9vcCA0NQogI2RlZmluZSBfX0hZUEVSVklTT1JfbmVzdGVkX2V2ZW50X2NoYW5uZWxfb3Ag
NDYKKyNkZWZpbmUgX19IWVBFUlZJU09SX25lc3RlZF9zY2hlZF9vcCAgICAgIDQ3CiAKIC8qIEFy
Y2hpdGVjdHVyZS1zcGVjaWZpYyBoeXBlcmNhbGwgZGVmaW5pdGlvbnMuICovCiAjZGVmaW5lIF9f
SFlQRVJWSVNPUl9hcmNoXzAgICAgICAgICAgICAgICA0OApkaWZmIC0tZ2l0IGEveGVuL2luY2x1
ZGUveGVuL2h5cGVyY2FsbC5oIGIveGVuL2luY2x1ZGUveGVuL2h5cGVyY2FsbC5oCmluZGV4IGJk
NzM5YzJkYzcuLjk2ZDZiYTJjZDIgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hlbi9oeXBlcmNh
bGwuaAorKysgYi94ZW4vaW5jbHVkZS94ZW4vaHlwZXJjYWxsLmgKQEAgLTE3MSw2ICsxNzEsMTAg
QEAgZXh0ZXJuIGxvbmcgZG9fbmVzdGVkX2dyYW50X3RhYmxlX29wKAogZXh0ZXJuIGxvbmcgZG9f
bmVzdGVkX2V2ZW50X2NoYW5uZWxfb3AoCiAgICAgaW50IGNtZCwKICAgICBYRU5fR1VFU1RfSEFO
RExFX1BBUkFNKHZvaWQpIGFyZyk7CisKK2V4dGVybiBsb25nIGRvX25lc3RlZF9zY2hlZF9vcCgK
KyAgICBpbnQgY21kLAorICAgIFhFTl9HVUVTVF9IQU5ETEVfUEFSQU0odm9pZCkgYXJnKTsKICNl
bmRpZgogCiAjaWZkZWYgQ09ORklHX0NPTVBBVApkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveHNt
L2R1bW15LmggYi94ZW4vaW5jbHVkZS94c20vZHVtbXkuaAppbmRleCBmODE2MmYzMzA4Li4yMDBm
MDk3ZDUwIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94c20vZHVtbXkuaAorKysgYi94ZW4vaW5j
bHVkZS94c20vZHVtbXkuaApAQCAtNzc2LDYgKzc3NiwxMyBAQCBzdGF0aWMgWFNNX0lOTElORSBp
bnQgeHNtX25lc3RlZF9ldmVudF9jaGFubmVsX29wKFhTTV9ERUZBVUxUX0FSRwogICAgIFhTTV9B
U1NFUlRfQUNUSU9OKFhTTV9QUklWKTsKICAgICByZXR1cm4geHNtX2RlZmF1bHRfYWN0aW9uKGFj
dGlvbiwgZCwgTlVMTCk7CiB9CisKK3N0YXRpYyBYU01fSU5MSU5FIGludCB4c21fbmVzdGVkX3Nj
aGVkb3Bfc2h1dGRvd24oWFNNX0RFRkFVTFRfQVJHCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBkb21haW4gKmQpCit7CisgICAg
WFNNX0FTU0VSVF9BQ1RJT04oWFNNX1BSSVYpOworICAgIHJldHVybiB4c21fZGVmYXVsdF9hY3Rp
b24oYWN0aW9uLCBkLCBOVUxMKTsKK30KICNlbmRpZgogCiAjaW5jbHVkZSA8cHVibGljL3ZlcnNp
b24uaD4KZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hzbS94c20uaCBiL3hlbi9pbmNsdWRlL3hz
bS94c20uaAppbmRleCA4MWNiNjdiODliLi4xY2I3MGQ0MjdiIDEwMDY0NAotLS0gYS94ZW4vaW5j
bHVkZS94c20veHNtLmgKKysrIGIveGVuL2luY2x1ZGUveHNtL3hzbS5oCkBAIC0xOTMsNiArMTkz
LDcgQEAgc3RydWN0IHhzbV9vcGVyYXRpb25zIHsKICAgICBpbnQgKCpuZXN0ZWRfaHZtX29wKSAo
Y29uc3Qgc3RydWN0IGRvbWFpbiAqZCwgdW5zaWduZWQgaW50IGNtZCk7CiAgICAgaW50ICgqbmVz
dGVkX2dyYW50X3F1ZXJ5X3NpemUpIChjb25zdCBzdHJ1Y3QgZG9tYWluICpkKTsKICAgICBpbnQg
KCpuZXN0ZWRfZXZlbnRfY2hhbm5lbF9vcCkgKGNvbnN0IHN0cnVjdCBkb21haW4gKmQsIHVuc2ln
bmVkIGludCBjbWQpOworICAgIGludCAoKm5lc3RlZF9zY2hlZG9wX3NodXRkb3duKSAoY29uc3Qg
c3RydWN0IGRvbWFpbiAqZCk7CiAjZW5kaWYKIH07CiAKQEAgLTc2Myw2ICs3NjQsMTIgQEAgc3Rh
dGljIGlubGluZSBpbnQgeHNtX25lc3RlZF9ldmVudF9jaGFubmVsX29wKHhzbV9kZWZhdWx0X3Qg
ZGVmLAogICAgIHJldHVybiB4c21fb3BzLT5uZXN0ZWRfZXZlbnRfY2hhbm5lbF9vcChkLCBjbWQp
OwogfQogCitzdGF0aWMgaW5saW5lIGludCB4c21fbmVzdGVkX3NjaGVkb3Bfc2h1dGRvd24oeHNt
X2RlZmF1bHRfdCBkZWYsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgY29uc3Qgc3RydWN0IGRvbWFpbiAqZCkKK3sKKyAgICByZXR1cm4geHNtX29wcy0+bmVz
dGVkX3NjaGVkb3Bfc2h1dGRvd24oZCk7Cit9CisKICNlbmRpZiAvKiBDT05GSUdfWEVOX05FU1RF
RCAqLwogCiAjZW5kaWYgLyogWFNNX05PX1dSQVBQRVJTICovCmRpZmYgLS1naXQgYS94ZW4veHNt
L2R1bW15LmMgYi94ZW4veHNtL2R1bW15LmMKaW5kZXggOTFkYjI2NGRkYy4uYWM2ZTVmZGQ0OSAx
MDA2NDQKLS0tIGEveGVuL3hzbS9kdW1teS5jCisrKyBiL3hlbi94c20vZHVtbXkuYwpAQCAtMTYz
LDUgKzE2Myw2IEBAIHZvaWQgX19pbml0IHhzbV9maXh1cF9vcHMgKHN0cnVjdCB4c21fb3BlcmF0
aW9ucyAqb3BzKQogICAgIHNldF90b19kdW1teV9pZl9udWxsKG9wcywgbmVzdGVkX2h2bV9vcCk7
CiAgICAgc2V0X3RvX2R1bW15X2lmX251bGwob3BzLCBuZXN0ZWRfZ3JhbnRfcXVlcnlfc2l6ZSk7
CiAgICAgc2V0X3RvX2R1bW15X2lmX251bGwob3BzLCBuZXN0ZWRfZXZlbnRfY2hhbm5lbF9vcCk7
CisgICAgc2V0X3RvX2R1bW15X2lmX251bGwob3BzLCBuZXN0ZWRfc2NoZWRvcF9zaHV0ZG93bik7
CiAjZW5kaWYKIH0KZGlmZiAtLWdpdCBhL3hlbi94c20vZmxhc2svaG9va3MuYyBiL3hlbi94c20v
Zmxhc2svaG9va3MuYwppbmRleCAyN2JmYTAxNTU5Li4zODVhZTE0NThjIDEwMDY0NAotLS0gYS94
ZW4veHNtL2ZsYXNrL2hvb2tzLmMKKysrIGIveGVuL3hzbS9mbGFzay9ob29rcy5jCkBAIC0xODI4
LDYgKzE4MjgsMTEgQEAgc3RhdGljIGludCBmbGFza19uZXN0ZWRfZXZlbnRfY2hhbm5lbF9vcChj
b25zdCBzdHJ1Y3QgZG9tYWluICpkLAogICAgIHJldHVybiBkb21haW5faGFzX25lc3RlZF9wZXJt
KGQsIFNFQ0NMQVNTX05FU1RFRF9FVkVOVCwgcGVybSk7CiB9CiAKK3N0YXRpYyBpbnQgZmxhc2tf
bmVzdGVkX3NjaGVkb3Bfc2h1dGRvd24oY29uc3Qgc3RydWN0IGRvbWFpbiAqZCkKK3sKKyAgICBy
ZXR1cm4gZG9tYWluX2hhc19uZXN0ZWRfcGVybShkLCBTRUNDTEFTU19ET01BSU4sIERPTUFJTl9f
U0hVVERPV04pOworfQorCiAjZW5kaWYKIAogbG9uZyBkb19mbGFza19vcChYRU5fR1VFU1RfSEFO
RExFX1BBUkFNKHhzbV9vcF90KSB1X2ZsYXNrX29wKTsKQEAgLTE5NzUsNiArMTk4MCw3IEBAIHN0
YXRpYyBzdHJ1Y3QgeHNtX29wZXJhdGlvbnMgZmxhc2tfb3BzID0gewogICAgIC5uZXN0ZWRfaHZt
X29wID0gZmxhc2tfbmVzdGVkX2h2bV9vcCwKICAgICAubmVzdGVkX2dyYW50X3F1ZXJ5X3NpemUg
PSBmbGFza19uZXN0ZWRfZ3JhbnRfcXVlcnlfc2l6ZSwKICAgICAubmVzdGVkX2V2ZW50X2NoYW5u
ZWxfb3AgPSBmbGFza19uZXN0ZWRfZXZlbnRfY2hhbm5lbF9vcCwKKyAgICAubmVzdGVkX3NjaGVk
b3Bfc2h1dGRvd24gPSBmbGFza19uZXN0ZWRfc2NoZWRvcF9zaHV0ZG93biwKICNlbmRpZgogfTsK
IAotLSAKMi4xNy4xCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5v
cmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZl
bA==

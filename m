Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id E82428D52B
	for <lists+xen-devel@lfdr.de>; Wed, 14 Aug 2019 15:42:01 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hxtUZ-0007Li-RN; Wed, 14 Aug 2019 13:39:07 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=GkAm=WK=citrix.com=paul.durrant@srs-us1.protection.inumbo.net>)
 id 1hxtUY-0007Jo-DD
 for xen-devel@lists.xenproject.org; Wed, 14 Aug 2019 13:39:06 +0000
X-Inumbo-ID: e19f7238-be98-11e9-9417-c391fac7380f
Received: from esa6.hc3370-68.iphmx.com (unknown [216.71.155.175])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id e19f7238-be98-11e9-9417-c391fac7380f;
 Wed, 14 Aug 2019 13:39:04 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1565789944;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=jphOz7WlIpnXUS4x3e6sw3Jd0yhb4YXzeKY+Cu/QgsA=;
 b=ZlTkp+8h8G7xXaCYUPfxVwa4VAPejQPPCSwi9NlO7CepxkxTbnzTk/rp
 SZoxUHcYKEdmcYPT3W9SwFEzaOiSYyZIzXJfalbjpmcqPvbIMWXPeisGQ
 UJB6l3RWtfCCFG/FAcz2YIMN68YIHGsp/tWLWsaSkVwKIae419Mli9nWw U=;
Authentication-Results: esa6.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=paul.durrant@citrix.com;
 spf=Pass smtp.mailfrom=Paul.Durrant@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa6.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 paul.durrant@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa6.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="paul.durrant@citrix.com"; x-conformance=sidf_compatible
Received-SPF: Pass (esa6.hc3370-68.iphmx.com: domain of
 Paul.Durrant@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa6.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="Paul.Durrant@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83 ~all"
Received-SPF: None (esa6.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa6.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: 2GfSr/AwJ451+/EVUfhlHetZWbzDeQjK0YEZ4iI0Ls7N/iH8IskecXjpZqmhApOYqDNcsbmIqr
 nUTNjBc63OaGca7pIoahLblR7jSubE/rplXA5ueEp9uj1rdosrY08MhoY9jQObRC8aZD71cYtl
 X3urnz+eM9Yah3yWNJlmx8bSyqGgtuqBajp9ZKGMaWP2Abn8dUyRtC0Rj67sr2xSQlUwB5XEMG
 tmXHlXRzjH/LYivErDgzxruNhhIgYj4WKGArxe6BigsHKWjn5fAxnQc0N61B3RGahYmHcCT0uQ
 RVE=
X-SBRS: 2.7
X-MesageID: 4435851
X-Ironport-Server: esa6.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.64,385,1559534400"; 
   d="scan'208";a="4435851"
From: Paul Durrant <paul.durrant@citrix.com>
To: <xen-devel@lists.xenproject.org>
Date: Wed, 14 Aug 2019 14:38:49 +0100
Message-ID: <20190814133852.20491-8-paul.durrant@citrix.com>
X-Mailer: git-send-email 2.20.1.2.gb21ebb671
In-Reply-To: <20190814133852.20491-1-paul.durrant@citrix.com>
References: <20190814133852.20491-1-paul.durrant@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v5 07/10] remove late (on-demand) construction
 of IOMMU page tables
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Petre Pircalabu <ppircalabu@bitdefender.com>,
 Stefano Stabellini <sstabellini@kernel.org>,
 Razvan Cojocaru <rcojocaru@bitdefender.com>, Wei Liu <wl@xen.org>, Konrad
 Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>, Paul Durrant <paul.durrant@citrix.com>,
 Tamas K Lengyel <tamas@tklengyel.com>, Jan Beulich <jbeulich@suse.com>,
 Alexandru Isaila <aisaila@bitdefender.com>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Tm93IHRoYXQgdGhlcmUgaXMgYSBwZXItZG9tYWluIElPTU1VIGVuYWJsZSBmbGFnLCB3aGljaCBz
aG91bGQgYmUgZW5hYmxlZCBpZgphbnkgZGV2aWNlIGlzIGdvaW5nIHRvIGJlIHBhc3NlZCB0aHJv
dWdoLCBzdG9wIGRlZmVycmluZyBwYWdlIHRhYmxlCmNvbnN0cnVjdGlvbiB1bnRpbCB0aGUgYXNz
aWdubWVudCBpcyBkb25lLiBBbHNvIGRvbid0IHRlYXIgZG93biB0aGUgdGFibGVzCmFnYWluIHdo
ZW4gdGhlIGxhc3QgZGV2aWNlIGlzIGRlLWFzc2lnbmVkOyBkZWZlciB0aGF0IHRhc2sgdW50aWwg
ZG9tYWluCmRlc3RydWN0aW9uLgoKVGhpcyBhbGxvd3MgdGhlIGhhc19pb21tdV9wdCgpIGhlbHBl
ciBhbmQgaW9tbXVfc3RhdHVzIGVudW1lcmF0aW9uIHRvIGJlCnJlbW92ZWQuIENhbGxzIHRvIGhh
c19pb21tdV9wdCgpIGFyZSBzaW1wbHkgcmVwbGFjZWQgYnkgY2FsbHMgdG8KaXNfaW9tbXVfZW5h
YmxlZCgpLiBSZW1haW5pbmcgb3Blbi1jb2RlIHRlc3RzIG9mIGlvbW11X2hhcF9wdF9zaGFyZSBj
YW4gYWxzbwpiZSByZXBsYWNlZCBieSBjYWxscyB0byBpb21tdV91c2VfaGFwX3B0KCkuClRoZSBh
cmNoX2lvbW11X3BvcHVsYXRlX3BhZ2VfdGFibGUoKSBhbmQgaW9tbXVfY29uc3RydWN0KCkgZnVu
Y3Rpb25zIGJlY29tZQpyZWR1bmRhbnQsIGFzIGRvZXMgdGhlICdzdHJpY3QgbW9kZScgZG9tMCBw
YWdlX2xpc3QgbWFwcGluZyBjb2RlIGluCmlvbW11X2h3ZG9tX2luaXQoKSwgYW5kIGlvbW11X3Rl
YXJkb3duKCkgY2FuIGJlIG1hZGUgc3RhdGljIGlzIGl0cyBvbmx5CnJlbWFpbmluZyBjYWxsZXIs
IGlvbW11X2RvbWFpbl9kZXN0cm95KCksIGlzIHdpdGhpbiB0aGUgc2FtZSBzb3VyY2UKbW9kdWxl
LgoKQWxsIGluIGFsbCwgYWJvdXQgMjIwIGxpbmVzIG9mIGNvZGUgYXJlIHJlbW92ZWQuCgpOT1RF
OiBUaGlzIHBhdGNoIHdpbGwgY2F1c2UgYSBzbWFsbCBhbW91bnQgb2YgZXh0cmEgcmVzb3VyY2Ug
dG8gYmUgdXNlZAogICAgICB0byBhY2NvbW1vZGF0ZSBJT01NVSBwYWdlIHRhYmxlcyB0aGF0IG1h
eSBuZXZlciBiZSB1c2VkLCBzaW5jZSB0aGUKICAgICAgcGVyLWRvbWFpbiBJT01NVSBmbGFnIGVu
YWJsZSBmbGFnIGlzIGN1cnJlbnRseSBzZXQgdG8gdGhlIHZhbHVlCiAgICAgIG9mIHRoZSBnbG9i
YWwgaW9tbXVfZW5hYmxlIGZsYWcuIEEgc3Vic2VxdWVudCBwYXRjaCB3aWxsIGFkZCBhbgogICAg
ICBvcHRpb24gdG8gdGhlIHRvb2xzdGFjayB0byBhbGxvdyBpdCB0byBiZSB0dXJuZWQgb2ZmIGlm
IHRoZXJlIGlzCiAgICAgIG5vIGludGVudGlvbiB0byBhc3NpZ24gcGFzc3Rocm91Z2ggaGFyZHdh
cmUgdG8gdGhlIGRvbWFpbi4KClNpZ25lZC1vZmYtYnk6IFBhdWwgRHVycmFudCA8cGF1bC5kdXJy
YW50QGNpdHJpeC5jb20+ClJldmlld2VkLWJ5OiBBbGV4YW5kcnUgSXNhaWxhIDxhaXNhaWxhQGJp
dGRlZmVuZGVyLmNvbT4KLS0tCkNjOiBTdGVmYW5vIFN0YWJlbGxpbmkgPHNzdGFiZWxsaW5pQGtl
cm5lbC5vcmc+CkNjOiBKdWxpZW4gR3JhbGwgPGp1bGllbi5ncmFsbEBhcm0uY29tPgpDYzogVm9s
b2R5bXlyIEJhYmNodWsgPFZvbG9keW15cl9CYWJjaHVrQGVwYW0uY29tPgpDYzogQW5kcmV3IENv
b3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KQ2M6IEdlb3JnZSBEdW5sYXAgPEdlb3Jn
ZS5EdW5sYXBAZXUuY2l0cml4LmNvbT4KQ2M6IElhbiBKYWNrc29uIDxpYW4uamFja3NvbkBldS5j
aXRyaXguY29tPgpDYzogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgpDYzogS29ucmFk
IFJ6ZXN6dXRlayBXaWxrIDxrb25yYWQud2lsa0BvcmFjbGUuY29tPgpDYzogVGltIERlZWdhbiA8
dGltQHhlbi5vcmc+CkNjOiBXZWkgTGl1IDx3bEB4ZW4ub3JnPgpDYzogIlJvZ2VyIFBhdSBNb25u
w6kiIDxyb2dlci5wYXVAY2l0cml4LmNvbT4KQ2M6IFRhbWFzIEsgTGVuZ3llbCA8dGFtYXNAdGts
ZW5neWVsLmNvbT4KQ2M6IEdlb3JnZSBEdW5sYXAgPGdlb3JnZS5kdW5sYXBAZXUuY2l0cml4LmNv
bT4KQ2M6IFJhenZhbiBDb2pvY2FydSA8cmNvam9jYXJ1QGJpdGRlZmVuZGVyLmNvbT4KQ2M6IFBl
dHJlIFBpcmNhbGFidSA8cHBpcmNhbGFidUBiaXRkZWZlbmRlci5jb20+CgpQcmV2aW91c2x5IHBh
cnQgb2Ygc2VyaWVzIGh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvYXJjaGl2ZXMvaHRtbC94
ZW4tZGV2ZWwvMjAxOS0wNy9tc2cwMjI2Ny5odG1sCgp2NToKIC0gTWlub3Igc3R5bGUgZml4ZXMK
LS0tCiB4ZW4vYXJjaC9hcm0vcDJtLmMgICAgICAgICAgICAgICAgICAgIHwgICAyICstCiB4ZW4v
YXJjaC94ODYvZG9tMF9idWlsZC5jICAgICAgICAgICAgIHwgICAyICstCiB4ZW4vYXJjaC94ODYv
aHZtL210cnIuYyAgICAgICAgICAgICAgIHwgICA1ICstCiB4ZW4vYXJjaC94ODYvbW0vbWVtX3No
YXJpbmcuYyAgICAgICAgIHwgICAyICstCiB4ZW4vYXJjaC94ODYvbW0vcGFnaW5nLmMgICAgICAg
ICAgICAgIHwgICAyICstCiB4ZW4vYXJjaC94ODYveDg2XzY0L21tLmMgICAgICAgICAgICAgIHwg
ICAyICstCiB4ZW4vY29tbW9uL21lbW9yeS5jICAgICAgICAgICAgICAgICAgIHwgICA0ICstCiB4
ZW4vY29tbW9uL3ZtX2V2ZW50LmMgICAgICAgICAgICAgICAgIHwgICAyICstCiB4ZW4vZHJpdmVy
cy9wYXNzdGhyb3VnaC9kZXZpY2VfdHJlZS5jIHwgIDExIC0tLQogeGVuL2RyaXZlcnMvcGFzc3Ro
cm91Z2gvaW9tbXUuYyAgICAgICB8IDEzNCArKysrKystLS0tLS0tLS0tLS0tLS0tLS0tLQogeGVu
L2RyaXZlcnMvcGFzc3Rocm91Z2gvcGNpLmMgICAgICAgICB8ICAxMiAtLS0KIHhlbi9kcml2ZXJz
L3Bhc3N0aHJvdWdoL3Z0ZC9pb21tdS5jICAgfCAgMTAgKy0KIHhlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL3g4Ni9pb21tdS5jICAgfCAgOTUgLS0tLS0tLS0tLS0tLS0tLS0tCiB4ZW4vaW5jbHVkZS9h
c20tYXJtL2lvbW11LmggICAgICAgICAgIHwgICAyICstCiB4ZW4vaW5jbHVkZS9hc20teDg2L2lv
bW11LmggICAgICAgICAgIHwgICAyICstCiB4ZW4vaW5jbHVkZS94ZW4vaW9tbXUuaCAgICAgICAg
ICAgICAgIHwgIDE2IC0tLQogeGVuL2luY2x1ZGUveGVuL3NjaGVkLmggICAgICAgICAgICAgICB8
ICAgMiAtCiAxNyBmaWxlcyBjaGFuZ2VkLCA0MiBpbnNlcnRpb25zKCspLCAyNjMgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL3AybS5jIGIveGVuL2FyY2gvYXJtL3AybS5j
CmluZGV4IDdmMTQ0MjkzMmEuLjY5MjU2NTc1N2UgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL2FybS9w
Mm0uYworKysgYi94ZW4vYXJjaC9hcm0vcDJtLmMKQEAgLTEwNTYsNyArMTA1Niw3IEBAIHN0YXRp
YyBpbnQgX19wMm1fc2V0X2VudHJ5KHN0cnVjdCBwMm1fZG9tYWluICpwMm0sCiAgICAgICAgICAh
bWZuX2VxKGxwYWVfZ2V0X21mbigqZW50cnkpLCBscGFlX2dldF9tZm4ob3JpZ19wdGUpKSApCiAg
ICAgICAgIHAybV9mcmVlX2VudHJ5KHAybSwgb3JpZ19wdGUsIGxldmVsKTsKIAotICAgIGlmICgg
aGFzX2lvbW11X3B0KHAybS0+ZG9tYWluKSAmJgorICAgIGlmICggaXNfaW9tbXVfZW5hYmxlZChw
Mm0tPmRvbWFpbikgJiYKICAgICAgICAgIChscGFlX2lzX3ZhbGlkKG9yaWdfcHRlKSB8fCBscGFl
X2lzX3ZhbGlkKCplbnRyeSkpICkKICAgICB7CiAgICAgICAgIHVuc2lnbmVkIGludCBmbHVzaF9m
bGFncyA9IDA7CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvZG9tMF9idWlsZC5jIGIveGVuL2Fy
Y2gveDg2L2RvbTBfYnVpbGQuYwppbmRleCBkMzgxNzg0ZWRkLi43Y2ZhYjJkYzI1IDEwMDY0NAot
LS0gYS94ZW4vYXJjaC94ODYvZG9tMF9idWlsZC5jCisrKyBiL3hlbi9hcmNoL3g4Ni9kb20wX2J1
aWxkLmMKQEAgLTM2NSw3ICszNjUsNyBAQCB1bnNpZ25lZCBsb25nIF9faW5pdCBkb20wX2NvbXB1
dGVfbnJfcGFnZXMoCiAgICAgfQogCiAgICAgbmVlZF9wYWdpbmcgPSBpc19odm1fZG9tYWluKGQp
ICYmCi0gICAgICAgICghaW9tbXVfaGFwX3B0X3NoYXJlIHx8ICFwYWdpbmdfbW9kZV9oYXAoZCkp
OworICAgICAgICAoIWlvbW11X3VzZV9oYXBfcHQoZCkgfHwgIXBhZ2luZ19tb2RlX2hhcChkKSk7
CiAgICAgZm9yICggOyA7IG5lZWRfcGFnaW5nID0gZmFsc2UgKQogICAgIHsKICAgICAgICAgbnJf
cGFnZXMgPSBnZXRfbWVtc2l6ZSgmZG9tMF9zaXplLCBhdmFpbCk7CmRpZmYgLS1naXQgYS94ZW4v
YXJjaC94ODYvaHZtL210cnIuYyBiL3hlbi9hcmNoL3g4Ni9odm0vbXRyci5jCmluZGV4IDdjY2Q4
NWJjZWEuLjVhZDE1ZWFmZTAgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9odm0vbXRyci5jCisr
KyBiL3hlbi9hcmNoL3g4Ni9odm0vbXRyci5jCkBAIC03ODMsNyArNzgzLDggQEAgSFZNX1JFR0lT
VEVSX1NBVkVfUkVTVE9SRShNVFJSLCBodm1fc2F2ZV9tdHJyX21zciwgaHZtX2xvYWRfbXRycl9t
c3IsIDEsCiAKIHZvaWQgbWVtb3J5X3R5cGVfY2hhbmdlZChzdHJ1Y3QgZG9tYWluICpkKQogewot
ICAgIGlmICggKGhhc19pb21tdV9wdChkKSB8fCBjYWNoZV9mbHVzaF9wZXJtaXR0ZWQoZCkpICYm
IGQtPnZjcHUgJiYgZC0+dmNwdVswXSApCisgICAgaWYgKCAoaXNfaW9tbXVfZW5hYmxlZChkKSB8
fCBjYWNoZV9mbHVzaF9wZXJtaXR0ZWQoZCkpICYmCisgICAgICAgICBkLT52Y3B1ICYmIGQtPnZj
cHVbMF0gKQogICAgIHsKICAgICAgICAgcDJtX21lbW9yeV90eXBlX2NoYW5nZWQoZCk7CiAgICAg
ICAgIGZsdXNoX2FsbChGTFVTSF9DQUNIRSk7CkBAIC04MzEsNyArODMyLDcgQEAgaW50IGVwdGVf
Z2V0X2VudHJ5X2VtdChzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBsb25nIGdmbiwgbWZuX3Qg
bWZuLAogICAgICAgICByZXR1cm4gTVRSUl9UWVBFX1VOQ0FDSEFCTEU7CiAgICAgfQogCi0gICAg
aWYgKCAhaGFzX2lvbW11X3B0KGQpICYmICFjYWNoZV9mbHVzaF9wZXJtaXR0ZWQoZCkgKQorICAg
IGlmICggIWlzX2lvbW11X2VuYWJsZWQoZCkgJiYgIWNhY2hlX2ZsdXNoX3Blcm1pdHRlZChkKSAp
CiAgICAgewogICAgICAgICAqaXBhdCA9IDE7CiAgICAgICAgIHJldHVybiBNVFJSX1RZUEVfV1JC
QUNLOwpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L21tL21lbV9zaGFyaW5nLmMgYi94ZW4vYXJj
aC94ODYvbW0vbWVtX3NoYXJpbmcuYwppbmRleCBhNWZlODllMzM5Li5lZmI4ODIxNzY4IDEwMDY0
NAotLS0gYS94ZW4vYXJjaC94ODYvbW0vbWVtX3NoYXJpbmcuYworKysgYi94ZW4vYXJjaC94ODYv
bW0vbWVtX3NoYXJpbmcuYwpAQCAtMTY2NCw3ICsxNjY0LDcgQEAgaW50IG1lbV9zaGFyaW5nX2Rv
bWN0bChzdHJ1Y3QgZG9tYWluICpkLCBzdHJ1Y3QgeGVuX2RvbWN0bF9tZW1fc2hhcmluZ19vcCAq
bWVjKQogICAgICAgICBjYXNlIFhFTl9ET01DVExfTUVNX1NIQVJJTkdfQ09OVFJPTDoKICAgICAg
ICAgewogICAgICAgICAgICAgcmMgPSAwOwotICAgICAgICAgICAgaWYgKCB1bmxpa2VseShoYXNf
aW9tbXVfcHQoZCkgJiYgbWVjLT51LmVuYWJsZSkgKQorICAgICAgICAgICAgaWYgKCB1bmxpa2Vs
eShpc19pb21tdV9lbmFibGVkKGQpICYmIG1lYy0+dS5lbmFibGUpICkKICAgICAgICAgICAgICAg
ICByYyA9IC1FWERFVjsKICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICBkLT5hcmNo
Lmh2bS5tZW1fc2hhcmluZ19lbmFibGVkID0gbWVjLT51LmVuYWJsZTsKZGlmZiAtLWdpdCBhL3hl
bi9hcmNoL3g4Ni9tbS9wYWdpbmcuYyBiL3hlbi9hcmNoL3g4Ni9tbS9wYWdpbmcuYwppbmRleCA2
OWFhMjI4ZTQ2Li5kOWE1MmM0ZGI0IDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvbW0vcGFnaW5n
LmMKKysrIGIveGVuL2FyY2gveDg2L21tL3BhZ2luZy5jCkBAIC0yMTMsNyArMjEzLDcgQEAgaW50
IHBhZ2luZ19sb2dfZGlydHlfZW5hYmxlKHN0cnVjdCBkb21haW4gKmQsIGJvb2xfdCBsb2dfZ2xv
YmFsKQogewogICAgIGludCByZXQ7CiAKLSAgICBpZiAoIGhhc19pb21tdV9wdChkKSAmJiBsb2df
Z2xvYmFsICkKKyAgICBpZiAoIGlzX2lvbW11X2VuYWJsZWQoZCkgJiYgbG9nX2dsb2JhbCApCiAg
ICAgewogICAgICAgICAvKgogICAgICAgICAgKiBSZWZ1c2UgdG8gdHVybiBvbiBnbG9iYWwgbG9n
LWRpcnR5IG1vZGUKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni94ODZfNjQvbW0uYyBiL3hlbi9h
cmNoL3g4Ni94ODZfNjQvbW0uYwppbmRleCAxOTE5Y2FlMThiLi44MjdiM2Y1ZTI3IDEwMDY0NAot
LS0gYS94ZW4vYXJjaC94ODYveDg2XzY0L21tLmMKKysrIGIveGVuL2FyY2gveDg2L3g4Nl82NC9t
bS5jCkBAIC0xNDMzLDcgKzE0MzMsNyBAQCBpbnQgbWVtb3J5X2FkZCh1bnNpZ25lZCBsb25nIHNw
Zm4sIHVuc2lnbmVkIGxvbmcgZXBmbiwgdW5zaWduZWQgaW50IHB4bSkKICAgICAgKiBzaGFyZWQg
b3IgYmVpbmcga2VwdCBpbiBzeW5jIHRoZW4gbmV3bHkgYWRkZWQgbWVtb3J5IG5lZWRzIHRvIGJl
CiAgICAgICogbWFwcGVkIGhlcmUuCiAgICAgICovCi0gICAgaWYgKCBoYXNfaW9tbXVfcHQoaGFy
ZHdhcmVfZG9tYWluKSAmJgorICAgIGlmICggaXNfaW9tbXVfZW5hYmxlZChoYXJkd2FyZV9kb21h
aW4pICYmCiAgICAgICAgICAhaW9tbXVfdXNlX2hhcF9wdChoYXJkd2FyZV9kb21haW4pICYmCiAg
ICAgICAgICAhbmVlZF9pb21tdV9wdF9zeW5jKGhhcmR3YXJlX2RvbWFpbikgKQogICAgIHsKZGlm
ZiAtLWdpdCBhL3hlbi9jb21tb24vbWVtb3J5LmMgYi94ZW4vY29tbW9uL21lbW9yeS5jCmluZGV4
IGQ5YjM1YTYwOGMuLjcxNDQ1YzJmNTMgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vbWVtb3J5LmMK
KysrIGIveGVuL2NvbW1vbi9tZW1vcnkuYwpAQCAtODIzLDcgKzgyMyw3IEBAIGludCB4ZW5tZW1f
YWRkX3RvX3BoeXNtYXAoc3RydWN0IGRvbWFpbiAqZCwgc3RydWN0IHhlbl9hZGRfdG9fcGh5c21h
cCAqeGF0cCwKICAgICB4YXRwLT5ncGZuICs9IHN0YXJ0OwogICAgIHhhdHAtPnNpemUgLT0gc3Rh
cnQ7CiAKLSAgICBpZiAoIGhhc19pb21tdV9wdChkKSApCisgICAgaWYgKCBpc19pb21tdV9lbmFi
bGVkKGQpICkKICAgICAgICB0aGlzX2NwdShpb21tdV9kb250X2ZsdXNoX2lvdGxiKSA9IDE7CiAK
ICAgICB3aGlsZSAoIHhhdHAtPnNpemUgPiBkb25lICkKQEAgLTg0NCw3ICs4NDQsNyBAQCBpbnQg
eGVubWVtX2FkZF90b19waHlzbWFwKHN0cnVjdCBkb21haW4gKmQsIHN0cnVjdCB4ZW5fYWRkX3Rv
X3BoeXNtYXAgKnhhdHAsCiAgICAgICAgIH0KICAgICB9CiAKLSAgICBpZiAoIGhhc19pb21tdV9w
dChkKSApCisgICAgaWYgKCBpc19pb21tdV9lbmFibGVkKGQpICkKICAgICB7CiAgICAgICAgIGlu
dCByZXQ7CiAKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vdm1fZXZlbnQuYyBiL3hlbi9jb21tb24v
dm1fZXZlbnQuYwppbmRleCAyYTFjODdlNDRiLi4zYjE4MTk1ZWJmIDEwMDY0NAotLS0gYS94ZW4v
Y29tbW9uL3ZtX2V2ZW50LmMKKysrIGIveGVuL2NvbW1vbi92bV9ldmVudC5jCkBAIC02MzAsNyAr
NjMwLDcgQEAgaW50IHZtX2V2ZW50X2RvbWN0bChzdHJ1Y3QgZG9tYWluICpkLCBzdHJ1Y3QgeGVu
X2RvbWN0bF92bV9ldmVudF9vcCAqdmVjKQogCiAgICAgICAgICAgICAvKiBObyBwYWdpbmcgaWYg
aW9tbXUgaXMgdXNlZCAqLwogICAgICAgICAgICAgcmMgPSAtRU1MSU5LOwotICAgICAgICAgICAg
aWYgKCB1bmxpa2VseShoYXNfaW9tbXVfcHQoZCkpICkKKyAgICAgICAgICAgIGlmICggdW5saWtl
bHkoaXNfaW9tbXVfZW5hYmxlZChkKSkgKQogICAgICAgICAgICAgICAgIGJyZWFrOwogCiAgICAg
ICAgICAgICByYyA9IC1FWERFVjsKZGlmZiAtLWdpdCBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdo
L2RldmljZV90cmVlLmMgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9kZXZpY2VfdHJlZS5jCmlu
ZGV4IDEyZjJjNGMzZjIuLmVhOWZkNTRlM2IgMTAwNjQ0Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0
aHJvdWdoL2RldmljZV90cmVlLmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvZGV2aWNl
X3RyZWUuYwpAQCAtNDAsMTcgKzQwLDYgQEAgaW50IGlvbW11X2Fzc2lnbl9kdF9kZXZpY2Uoc3Ry
dWN0IGRvbWFpbiAqZCwgc3RydWN0IGR0X2RldmljZV9ub2RlICpkZXYpCiAgICAgaWYgKCAhbGlz
dF9lbXB0eSgmZGV2LT5kb21haW5fbGlzdCkgKQogICAgICAgICBnb3RvIGZhaWw7CiAKLSAgICAv
KgotICAgICAqIFRoZSBod2RvbSBpcyBmb3JjZWQgdG8gdXNlIElPTU1VIGZvciBwcm90ZWN0aW5n
IGFzc2lnbmVkCi0gICAgICogZGV2aWNlLiBUaGVyZWZvcmUgdGhlIElPTU1VIGRhdGEgaXMgYWxy
ZWFkeSBzZXQgdXAuCi0gICAgICovCi0gICAgQVNTRVJUKCFpc19oYXJkd2FyZV9kb21haW4oZCkg
fHwKLSAgICAgICAgICAgaGQtPnN0YXR1cyA9PSBJT01NVV9TVEFUVVNfaW5pdGlhbGl6ZWQpOwot
Ci0gICAgcmMgPSBpb21tdV9jb25zdHJ1Y3QoZCk7Ci0gICAgaWYgKCByYyApCi0gICAgICAgIGdv
dG8gZmFpbDsKLQogICAgIC8qIFRoZSBmbGFnIGZpZWxkIGRvZXNuJ3QgbWF0dGVyIHRvIERUIGRl
dmljZS4gKi8KICAgICByYyA9IGhkLT5wbGF0Zm9ybV9vcHMtPmFzc2lnbl9kZXZpY2UoZCwgMCwg
ZHRfdG9fZGV2KGRldiksIDApOwogCmRpZmYgLS1naXQgYS94ZW4vZHJpdmVycy9wYXNzdGhyb3Vn
aC9pb21tdS5jIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvaW9tbXUuYwppbmRleCA5ZGFjZTY0
YWY5Li45MTU3MmFhZTU2IDEwMDY0NAotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21t
dS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2lvbW11LmMKQEAgLTE0Niw2ICsxNDYs
MTcgQEAgc3RhdGljIGludCBfX2luaXQgcGFyc2VfZG9tMF9pb21tdV9wYXJhbShjb25zdCBjaGFy
ICpzKQogfQogY3VzdG9tX3BhcmFtKCJkb20wLWlvbW11IiwgcGFyc2VfZG9tMF9pb21tdV9wYXJh
bSk7CiAKK3N0YXRpYyB2b2lkIF9faHdkb21faW5pdCBjaGVja19od2RvbV9yZXFzKHN0cnVjdCBk
b21haW4gKmQpCit7CisgICAgaWYgKCBpb21tdV9od2RvbV9ub25lIHx8ICFwYWdpbmdfbW9kZV90
cmFuc2xhdGUoZCkgKQorICAgICAgICByZXR1cm47CisKKyAgICBhcmNoX2lvbW11X2NoZWNrX2F1
dG90cmFuc2xhdGVkX2h3ZG9tKGQpOworCisgICAgaW9tbXVfaHdkb21fcGFzc3Rocm91Z2ggPSBm
YWxzZTsKKyAgICBpb21tdV9od2RvbV9zdHJpY3QgPSB0cnVlOworfQorCiBpbnQgaW9tbXVfZG9t
YWluX2luaXQoc3RydWN0IGRvbWFpbiAqZCkKIHsKICAgICBzdHJ1Y3QgZG9tYWluX2lvbW11ICpo
ZCA9IGRvbV9pb21tdShkKTsKQEAgLTE1OSwxMjkgKzE3MCw0NCBAQCBpbnQgaW9tbXVfZG9tYWlu
X2luaXQoc3RydWN0IGRvbWFpbiAqZCkKICAgICAgICAgcmV0dXJuIHJldDsKIAogICAgIGhkLT5w
bGF0Zm9ybV9vcHMgPSBpb21tdV9nZXRfb3BzKCk7Ci0gICAgcmV0dXJuIGhkLT5wbGF0Zm9ybV9v
cHMtPmluaXQoZCk7Ci19CisgICAgcmV0ID0gaGQtPnBsYXRmb3JtX29wcy0+aW5pdChkKTsKKyAg
ICBpZiAoIHJldCApCisgICAgICAgIHJldHVybiByZXQ7CiAKLXN0YXRpYyB2b2lkIF9faHdkb21f
aW5pdCBjaGVja19od2RvbV9yZXFzKHN0cnVjdCBkb21haW4gKmQpCi17Ci0gICAgaWYgKCBpb21t
dV9od2RvbV9ub25lIHx8ICFwYWdpbmdfbW9kZV90cmFuc2xhdGUoZCkgKQotICAgICAgICByZXR1
cm47CisgICAgLyoKKyAgICAgKiBOQjogJ3JlbGF4ZWQnIGgvdyBkb21haW5zIGRvbid0IG5lZWQg
dGhlIElPTU1VIG1hcHBpbmdzIHRvIGJlIGtlcHQKKyAgICAgKiAgICAgaW4tc3luYyB3aXRoIHRo
ZWlyIGFzc2lnbmVkIHBhZ2VzIGJlY2F1c2UgYWxsIGhvc3QgUkFNIHdpbGwgYmUKKyAgICAgKiAg
ICAgbWFwcGVkIGR1cmluZyBod2RvbV9pbml0KCkuCisgICAgICovCisgICAgaWYgKCBpc19oYXJk
d2FyZV9kb21haW4oZCkgKQorICAgICAgICBjaGVja19od2RvbV9yZXFzKGQpOyAvKiBtYXkgbW9k
aWZ5IGlvbW11X2h3ZG9tX3N0cmljdCAqLwogCi0gICAgYXJjaF9pb21tdV9jaGVja19hdXRvdHJh
bnNsYXRlZF9od2RvbShkKTsKKyAgICBpZiAoICFpc19oYXJkd2FyZV9kb21haW4oZCkgfHwgaW9t
bXVfaHdkb21fc3RyaWN0ICkKKyAgICAgICAgaGQtPm5lZWRfc3luYyA9ICFpb21tdV91c2VfaGFw
X3B0KGQpOwogCi0gICAgaW9tbXVfaHdkb21fcGFzc3Rocm91Z2ggPSBmYWxzZTsKLSAgICBpb21t
dV9od2RvbV9zdHJpY3QgPSB0cnVlOworICAgIHJldHVybiAwOwogfQogCiB2b2lkIF9faHdkb21f
aW5pdCBpb21tdV9od2RvbV9pbml0KHN0cnVjdCBkb21haW4gKmQpCiB7CiAgICAgc3RydWN0IGRv
bWFpbl9pb21tdSAqaGQgPSBkb21faW9tbXUoZCk7CiAKLSAgICBjaGVja19od2RvbV9yZXFzKGQp
OwotCiAgICAgaWYgKCAhaXNfaW9tbXVfZW5hYmxlZChkKSApCiAgICAgICAgIHJldHVybjsKIAog
ICAgIHJlZ2lzdGVyX2tleWhhbmRsZXIoJ28nLCAmaW9tbXVfZHVtcF9wMm1fdGFibGUsICJkdW1w
IGlvbW11IHAybSB0YWJsZSIsIDApOwogCi0gICAgaGQtPnN0YXR1cyA9IElPTU1VX1NUQVRVU19p
bml0aWFsaXppbmc7Ci0gICAgLyoKLSAgICAgKiBOQjogcmVsYXhlZCBodyBkb21haW5zIGRvbid0
IG5lZWQgc3luYyBiZWNhdXNlIGFsbCByYW0gaXMgYWxyZWFkeQotICAgICAqIG1hcHBlZCBpbiB0
aGUgaW9tbXUgcGFnZSB0YWJsZXMuCi0gICAgICovCi0gICAgaGQtPm5lZWRfc3luYyA9IGlvbW11
X2h3ZG9tX3N0cmljdCAmJiAhaW9tbXVfdXNlX2hhcF9wdChkKTsKLSAgICBpZiAoIG5lZWRfaW9t
bXVfcHRfc3luYyhkKSApCi0gICAgewotICAgICAgICBzdHJ1Y3QgcGFnZV9pbmZvICpwYWdlOwot
ICAgICAgICB1bnNpZ25lZCBpbnQgaSA9IDAsIGZsdXNoX2ZsYWdzID0gMDsKLSAgICAgICAgaW50
IHJjID0gMDsKLQotICAgICAgICBwYWdlX2xpc3RfZm9yX2VhY2ggKCBwYWdlLCAmZC0+cGFnZV9s
aXN0ICkKLSAgICAgICAgewotICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBtZm4gPSBtZm5feChw
YWdlX3RvX21mbihwYWdlKSk7Ci0gICAgICAgICAgICB1bnNpZ25lZCBsb25nIGRmbiA9IG1mbl90
b19nbWZuKGQsIG1mbik7Ci0gICAgICAgICAgICB1bnNpZ25lZCBpbnQgbWFwcGluZyA9IElPTU1V
Rl9yZWFkYWJsZTsKLSAgICAgICAgICAgIGludCByZXQ7Ci0KLSAgICAgICAgICAgIGlmICggKChw
YWdlLT51LmludXNlLnR5cGVfaW5mbyAmIFBHVF9jb3VudF9tYXNrKSA9PSAwKSB8fAotICAgICAg
ICAgICAgICAgICAoKHBhZ2UtPnUuaW51c2UudHlwZV9pbmZvICYgUEdUX3R5cGVfbWFzaykKLSAg
ICAgICAgICAgICAgICAgID09IFBHVF93cml0YWJsZV9wYWdlKSApCi0gICAgICAgICAgICAgICAg
bWFwcGluZyB8PSBJT01NVUZfd3JpdGFibGU7Ci0KLSAgICAgICAgICAgIHJldCA9IGlvbW11X21h
cChkLCBfZGZuKGRmbiksIF9tZm4obWZuKSwgMCwgbWFwcGluZywKLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAmZmx1c2hfZmxhZ3MpOwotCi0gICAgICAgICAgICBpZiAoICFyYyApCi0gICAg
ICAgICAgICAgICAgcmMgPSByZXQ7Ci0KLSAgICAgICAgICAgIGlmICggIShpKysgJiAweGZmZmZm
KSApCi0gICAgICAgICAgICAgICAgcHJvY2Vzc19wZW5kaW5nX3NvZnRpcnFzKCk7Ci0gICAgICAg
IH0KLQotICAgICAgICAvKiBVc2Ugd2hpbGUtYnJlYWsgdG8gYXZvaWQgY29tcGlsZXIgd2Fybmlu
ZyAqLwotICAgICAgICB3aGlsZSAoIGlvbW11X2lvdGxiX2ZsdXNoX2FsbChkLCBmbHVzaF9mbGFn
cykgKQotICAgICAgICAgICAgYnJlYWs7Ci0KLSAgICAgICAgaWYgKCByYyApCi0gICAgICAgICAg
ICBwcmludGsoWEVOTE9HX1dBUk5JTkcgImQlZDogSU9NTVUgbWFwcGluZyBmYWlsZWQ6ICVkXG4i
LAotICAgICAgICAgICAgICAgICAgIGQtPmRvbWFpbl9pZCwgcmMpOwotICAgIH0KLQogICAgIGhk
LT5wbGF0Zm9ybV9vcHMtPmh3ZG9tX2luaXQoZCk7Ci0KLSAgICBoZC0+c3RhdHVzID0gSU9NTVVf
U1RBVFVTX2luaXRpYWxpemVkOwogfQogCi12b2lkIGlvbW11X3RlYXJkb3duKHN0cnVjdCBkb21h
aW4gKmQpCitzdGF0aWMgdm9pZCBpb21tdV90ZWFyZG93bihzdHJ1Y3QgZG9tYWluICpkKQogewog
ICAgIHN0cnVjdCBkb21haW5faW9tbXUgKmhkID0gZG9tX2lvbW11KGQpOwogCi0gICAgaGQtPnN0
YXR1cyA9IElPTU1VX1NUQVRVU19kaXNhYmxlZDsKICAgICBoZC0+cGxhdGZvcm1fb3BzLT50ZWFy
ZG93bihkKTsKICAgICB0YXNrbGV0X3NjaGVkdWxlKCZpb21tdV9wdF9jbGVhbnVwX3Rhc2tsZXQp
OwogfQogCi1pbnQgaW9tbXVfY29uc3RydWN0KHN0cnVjdCBkb21haW4gKmQpCi17Ci0gICAgc3Ry
dWN0IGRvbWFpbl9pb21tdSAqaGQgPSBkb21faW9tbXUoZCk7Ci0KLSAgICBpZiAoIGhkLT5zdGF0
dXMgPT0gSU9NTVVfU1RBVFVTX2luaXRpYWxpemVkICkKLSAgICAgICAgcmV0dXJuIDA7Ci0KLSAg
ICBoZC0+c3RhdHVzID0gSU9NTVVfU1RBVFVTX2luaXRpYWxpemluZzsKLQotICAgIGlmICggIWlv
bW11X3VzZV9oYXBfcHQoZCkgKQotICAgIHsKLSAgICAgICAgaW50IHJjOwotCi0gICAgICAgIGhk
LT5uZWVkX3N5bmMgPSB0cnVlOwotCi0gICAgICAgIHJjID0gYXJjaF9pb21tdV9wb3B1bGF0ZV9w
YWdlX3RhYmxlKGQpOwotICAgICAgICBpZiAoIHJjICkKLSAgICAgICAgewotICAgICAgICAgICAg
aWYgKCByYyAhPSAtRVJFU1RBUlQgKQotICAgICAgICAgICAgewotICAgICAgICAgICAgICAgIGhk
LT5uZWVkX3N5bmMgPSBmYWxzZTsKLSAgICAgICAgICAgICAgICBoZC0+c3RhdHVzID0gSU9NTVVf
U1RBVFVTX2Rpc2FibGVkOwotICAgICAgICAgICAgfQotCi0gICAgICAgICAgICByZXR1cm4gcmM7
Ci0gICAgICAgIH0KLSAgICB9Ci0KLSAgICBoZC0+c3RhdHVzID0gSU9NTVVfU1RBVFVTX2luaXRp
YWxpemVkOwotCi0gICAgLyoKLSAgICAgKiBUaGVyZSBtYXkgYmUgZGlydHkgY2FjaGUgbGluZXMg
d2hlbiBhIGRldmljZSBpcyBhc3NpZ25lZAotICAgICAqIGFuZCBiZWZvcmUgaGFzX2lvbW11X3B0
KGQpIGJlY29taW5nIHRydWUsIHRoaXMgd2lsbCBjYXVzZQotICAgICAqIG1lbW9yeV90eXBlX2No
YW5nZWQgbG9zZSBlZmZlY3QgaWYgbWVtb3J5IHR5cGUgY2hhbmdlcy4KLSAgICAgKiBDYWxsIG1l
bW9yeV90eXBlX2NoYW5nZWQgaGVyZSB0byBhbWVuZCB0aGlzLgotICAgICAqLwotICAgIG1lbW9y
eV90eXBlX2NoYW5nZWQoZCk7Ci0KLSAgICByZXR1cm4gMDsKLX0KLQogdm9pZCBpb21tdV9kb21h
aW5fZGVzdHJveShzdHJ1Y3QgZG9tYWluICpkKQogewogICAgIGlmICggIWlzX2lvbW11X2VuYWJs
ZWQoZCkgKQpAQCAtNTc0LDExICs1MDAsOCBAQCBpbnQgaW9tbXVfZG9fZG9tY3RsKAogdm9pZCBp
b21tdV9zaGFyZV9wMm1fdGFibGUoc3RydWN0IGRvbWFpbiogZCkKIHsKICAgICBBU1NFUlQoaGFw
X2VuYWJsZWQoZCkpOwotICAgIC8qCi0gICAgICogaW9tbXVfdXNlX2hhcF9wdChkKSBjYW5ub3Qg
YmUgdXNlZCBoZXJlIGJlY2F1c2UgZHVyaW5nIGRvbWFpbgotICAgICAqIGNvbnN0cnVjdGlvbiBo
YXNfaW9tbXVfcHQoZCkgd2lsbCBhbHdheXMgcmV0dXJuIGZhbHNlIGhlcmUuCi0gICAgICovCi0g
ICAgaWYgKCBpc19pb21tdV9lbmFibGVkKGQpICYmIGlvbW11X2hhcF9wdF9zaGFyZSApCisKKyAg
ICBpZiAoIGlvbW11X3VzZV9oYXBfcHQoZCkgKQogICAgICAgICBpb21tdV9nZXRfb3BzKCktPnNo
YXJlX3AybShkKTsKIH0KIApAQCAtNjI1LDggKzU0OCw3IEBAIHN0YXRpYyB2b2lkIGlvbW11X2R1
bXBfcDJtX3RhYmxlKHVuc2lnbmVkIGNoYXIga2V5KQogICAgIG9wcyA9IGlvbW11X2dldF9vcHMo
KTsKICAgICBmb3JfZWFjaF9kb21haW4oZCkKICAgICB7Ci0gICAgICAgIGlmICggaXNfaGFyZHdh
cmVfZG9tYWluKGQpIHx8Ci0gICAgICAgICAgICAgZG9tX2lvbW11KGQpLT5zdGF0dXMgPCBJT01N
VV9TVEFUVVNfaW5pdGlhbGl6ZWQgKQorICAgICAgICBpZiAoICFpc19pb21tdV9lbmFibGVkKGQp
ICkKICAgICAgICAgICAgIGNvbnRpbnVlOwogCiAgICAgICAgIGlmICggaW9tbXVfdXNlX2hhcF9w
dChkKSApCmRpZmYgLS1naXQgYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9wY2kuYyBiL3hlbi9k
cml2ZXJzL3Bhc3N0aHJvdWdoL3BjaS5jCmluZGV4IGE1NmEyN2Y1NDYuLjVjMjA1MWJlZTMgMTAw
NjQ0Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3BjaS5jCisrKyBiL3hlbi9kcml2ZXJz
L3Bhc3N0aHJvdWdoL3BjaS5jCkBAIC0xNDM0LDEzICsxNDM0LDYgQEAgc3RhdGljIGludCBhc3Np
Z25fZGV2aWNlKHN0cnVjdCBkb21haW4gKmQsIHUxNiBzZWcsIHU4IGJ1cywgdTggZGV2Zm4sIHUz
MiBmbGFnKQogICAgIGlmICggIXBjaWRldnNfdHJ5bG9jaygpICkKICAgICAgICAgcmV0dXJuIC1F
UkVTVEFSVDsKIAotICAgIHJjID0gaW9tbXVfY29uc3RydWN0KGQpOwotICAgIGlmICggcmMgKQot
ICAgIHsKLSAgICAgICAgcGNpZGV2c191bmxvY2soKTsKLSAgICAgICAgcmV0dXJuIHJjOwotICAg
IH0KLQogICAgIHBkZXYgPSBwY2lfZ2V0X3BkZXZfYnlfZG9tYWluKGhhcmR3YXJlX2RvbWFpbiwg
c2VnLCBidXMsIGRldmZuKTsKICAgICBpZiAoICFwZGV2ICkKICAgICB7CkBAIC0xNDY5LDggKzE0
NjIsNiBAQCBzdGF0aWMgaW50IGFzc2lnbl9kZXZpY2Uoc3RydWN0IGRvbWFpbiAqZCwgdTE2IHNl
ZywgdTggYnVzLCB1OCBkZXZmbiwgdTMyIGZsYWcpCiAgICAgfQogCiAgZG9uZToKLSAgICBpZiAo
ICFoYXNfYXJjaF9wZGV2cyhkKSAmJiBoYXNfaW9tbXVfcHQoZCkgKQotICAgICAgICBpb21tdV90
ZWFyZG93bihkKTsKICAgICBwY2lkZXZzX3VubG9jaygpOwogCiAgICAgcmV0dXJuIHJjOwpAQCAt
MTUxOSw5ICsxNTEwLDYgQEAgaW50IGRlYXNzaWduX2RldmljZShzdHJ1Y3QgZG9tYWluICpkLCB1
MTYgc2VnLCB1OCBidXMsIHU4IGRldmZuKQogCiAgICAgcGRldi0+ZmF1bHQuY291bnQgPSAwOwog
Ci0gICAgaWYgKCAhaGFzX2FyY2hfcGRldnMoZCkgJiYgaGFzX2lvbW11X3B0KGQpICkKLSAgICAg
ICAgaW9tbXVfdGVhcmRvd24oZCk7Ci0KICAgICByZXR1cm4gcmV0OwogfQogCmRpZmYgLS1naXQg
YS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC92dGQvaW9tbXUuYyBiL3hlbi9kcml2ZXJzL3Bhc3N0
aHJvdWdoL3Z0ZC9pb21tdS5jCmluZGV4IDAxZjBiYzQ2ODkuLjRhYzVkYTE5N2EgMTAwNjQ0Ci0t
LSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3Z0ZC9pb21tdS5jCisrKyBiL3hlbi9kcml2ZXJz
L3Bhc3N0aHJvdWdoL3Z0ZC9pb21tdS5jCkBAIC0xNzU5LDE1ICsxNzU5LDcgQEAgc3RhdGljIHZv
aWQgaW9tbXVfZG9tYWluX3RlYXJkb3duKHN0cnVjdCBkb21haW4gKmQpCiAKICAgICBBU1NFUlQo
aXNfaW9tbXVfZW5hYmxlZChkKSk7CiAKLSAgICAvKgotICAgICAqIFdlIGNhbid0IHVzZSBpb21t
dV91c2VfaGFwX3B0IGhlcmUgYmVjYXVzZSBlaXRoZXIgSU9NTVUgc3RhdGUKLSAgICAgKiBpcyBh
bHJlYWR5IGNoYW5nZWQgdG8gSU9NTVVfU1RBVFVTX2Rpc2FibGVkIGF0IHRoaXMgcG9pbnQgb3IK
LSAgICAgKiBoYXMgYWx3YXlzIGJlZW4gSU9NTVVfU1RBVFVTX2Rpc2FibGVkLgotICAgICAqCi0g
ICAgICogV2UgYWxzbyBuZWVkIHRvIHRlc3QgaWYgSEFQIGlzIGVuYWJsZWQgYmVjYXVzZSBQViBn
dWVzdHMgY2FuCi0gICAgICogZW50ZXIgdGhpcyBwYXRoIHRvby4KLSAgICAgKi8KLSAgICBpZiAo
IGhhcF9lbmFibGVkKGQpICYmIGlvbW11X2hhcF9wdF9zaGFyZSApCisgICAgaWYgKCBpb21tdV91
c2VfaGFwX3B0KGQpICkKICAgICAgICAgcmV0dXJuOwogCiAgICAgc3Bpbl9sb2NrKCZoZC0+YXJj
aC5tYXBwaW5nX2xvY2spOwpkaWZmIC0tZ2l0IGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gveDg2
L2lvbW11LmMgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC94ODYvaW9tbXUuYwppbmRleCA5ODc5
NTU4YzE3Li40N2EzZTU1MjEzIDEwMDY0NAotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC94
ODYvaW9tbXUuYworKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC94ODYvaW9tbXUuYwpAQCAt
ODEsMTAxICs4MSw2IEBAIGludCBfX2luaXQgaW9tbXVfc2V0dXBfaHBldF9tc2koc3RydWN0IG1z
aV9kZXNjICptc2kpCiAgICAgcmV0dXJuIG9wcy0+c2V0dXBfaHBldF9tc2kgPyBvcHMtPnNldHVw
X2hwZXRfbXNpKG1zaSkgOiAtRU5PREVWOwogfQogCi1pbnQgYXJjaF9pb21tdV9wb3B1bGF0ZV9w
YWdlX3RhYmxlKHN0cnVjdCBkb21haW4gKmQpCi17Ci0gICAgc3RydWN0IHBhZ2VfaW5mbyAqcGFn
ZTsKLSAgICBpbnQgcmMgPSAwLCBuID0gMDsKLQotICAgIHNwaW5fbG9jaygmZC0+cGFnZV9hbGxv
Y19sb2NrKTsKLQotICAgIGlmICggdW5saWtlbHkoZC0+aXNfZHlpbmcpICkKLSAgICAgICAgcmMg
PSAtRVNSQ0g7Ci0KLSAgICB3aGlsZSAoICFyYyAmJiAocGFnZSA9IHBhZ2VfbGlzdF9yZW1vdmVf
aGVhZCgmZC0+cGFnZV9saXN0KSkgKQotICAgIHsKLSAgICAgICAgaWYgKCBpc19odm1fZG9tYWlu
KGQpIHx8Ci0gICAgICAgICAgICAocGFnZS0+dS5pbnVzZS50eXBlX2luZm8gJiBQR1RfdHlwZV9t
YXNrKSA9PSBQR1Rfd3JpdGFibGVfcGFnZSApCi0gICAgICAgIHsKLSAgICAgICAgICAgIHVuc2ln
bmVkIGxvbmcgbWZuID0gbWZuX3gocGFnZV90b19tZm4ocGFnZSkpOwotICAgICAgICAgICAgdW5z
aWduZWQgbG9uZyBnZm4gPSBtZm5fdG9fZ21mbihkLCBtZm4pOwotICAgICAgICAgICAgdW5zaWdu
ZWQgaW50IGZsdXNoX2ZsYWdzID0gMDsKLQotICAgICAgICAgICAgaWYgKCBnZm4gIT0gZ2ZuX3go
SU5WQUxJRF9HRk4pICkKLSAgICAgICAgICAgIHsKLSAgICAgICAgICAgICAgICBBU1NFUlQoIShn
Zm4gPj4gREVGQVVMVF9ET01BSU5fQUREUkVTU19XSURUSCkpOwotICAgICAgICAgICAgICAgIEJV
R19PTihTSEFSRURfTTJQKGdmbikpOwotICAgICAgICAgICAgICAgIHJjID0gaW9tbXVfbWFwKGQs
IF9kZm4oZ2ZuKSwgX21mbihtZm4pLCBQQUdFX09SREVSXzRLLAotICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIElPTU1VRl9yZWFkYWJsZSB8IElPTU1VRl93cml0YWJsZSwKLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAmZmx1c2hfZmxhZ3MpOwotCi0gICAgICAgICAgICAgICAg
LyoKLSAgICAgICAgICAgICAgICAgKiBXZSBtYXkgYmUgd29ya2luZyBiZWhpbmQgdGhlIGJhY2sg
b2YgYSBydW5uaW5nIGd1ZXN0LCB3aGljaAotICAgICAgICAgICAgICAgICAqIG1heSBjaGFuZ2Ug
dGhlIHR5cGUgb2YgYSBwYWdlIGF0IGFueSB0aW1lLiAgV2UgY2FuJ3QgcHJldmVudAotICAgICAg
ICAgICAgICAgICAqIHRoaXMgKGZvciBpbnN0YW5jZSwgYnkgYnVtcGluZyB0aGUgdHlwZSBjb3Vu
dCB3aGlsZSBtYXBwaW5nCi0gICAgICAgICAgICAgICAgICogdGhlIHBhZ2UpIHdpdGhvdXQgY2F1
c2luZyBsZWdpdGltYXRlIGd1ZXN0IHR5cGUtY2hhbmdlCi0gICAgICAgICAgICAgICAgICogb3Bl
cmF0aW9ucyB0byBmYWlsLiAgU28gYWZ0ZXIgYWRkaW5nIHRoZSBwYWdlIHRvIHRoZSBJT01NVSwK
LSAgICAgICAgICAgICAgICAgKiBjaGVjayBhZ2FpbiB0byBtYWtlIHN1cmUgdGhpcyBpcyBzdGls
bCB2YWxpZC4gIE5CIHRoYXQgdGhlCi0gICAgICAgICAgICAgICAgICogd3JpdGFibGUgZW50cnkg
aW4gdGhlIGlvbW11IGlzIGhhcm1sZXNzIHVudGlsIGxhdGVyLCB3aGVuCi0gICAgICAgICAgICAg
ICAgICogdGhlIGFjdHVhbCBkZXZpY2UgZ2V0cyBhc3NpZ25lZC4KLSAgICAgICAgICAgICAgICAg
Ki8KLSAgICAgICAgICAgICAgICBpZiAoICFyYyAmJiAhaXNfaHZtX2RvbWFpbihkKSAmJgotICAg
ICAgICAgICAgICAgICAgICAgKChwYWdlLT51LmludXNlLnR5cGVfaW5mbyAmIFBHVF90eXBlX21h
c2spICE9Ci0gICAgICAgICAgICAgICAgICAgICAgUEdUX3dyaXRhYmxlX3BhZ2UpICkKLSAgICAg
ICAgICAgICAgICB7Ci0gICAgICAgICAgICAgICAgICAgIHJjID0gaW9tbXVfdW5tYXAoZCwgX2Rm
bihnZm4pLCBQQUdFX09SREVSXzRLLCAmZmx1c2hfZmxhZ3MpOwotICAgICAgICAgICAgICAgICAg
ICAvKiBJZiB0aGUgdHlwZSBjaGFuZ2VkIHlldCBhZ2Fpbiwgc2ltcGx5IGZvcmNlIGEgcmV0cnku
ICovCi0gICAgICAgICAgICAgICAgICAgIGlmICggIXJjICYmICgocGFnZS0+dS5pbnVzZS50eXBl
X2luZm8gJiBQR1RfdHlwZV9tYXNrKSA9PQotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgUEdUX3dyaXRhYmxlX3BhZ2UpICkKLSAgICAgICAgICAgICAgICAgICAgICAgIHJjID0gLUVS
RVNUQVJUOwotICAgICAgICAgICAgICAgIH0KLSAgICAgICAgICAgIH0KLSAgICAgICAgICAgIGlm
ICggcmMgKQotICAgICAgICAgICAgewotICAgICAgICAgICAgICAgIHBhZ2VfbGlzdF9hZGQocGFn
ZSwgJmQtPnBhZ2VfbGlzdCk7Ci0gICAgICAgICAgICAgICAgYnJlYWs7Ci0gICAgICAgICAgICB9
Ci0gICAgICAgIH0KLSAgICAgICAgcGFnZV9saXN0X2FkZF90YWlsKHBhZ2UsICZkLT5hcmNoLnJl
bG1lbV9saXN0KTsKLSAgICAgICAgaWYgKCAhKCsrbiAmIDB4ZmYpICYmICFwYWdlX2xpc3RfZW1w
dHkoJmQtPnBhZ2VfbGlzdCkgJiYKLSAgICAgICAgICAgICBoeXBlcmNhbGxfcHJlZW1wdF9jaGVj
aygpICkKLSAgICAgICAgICAgIHJjID0gLUVSRVNUQVJUOwotICAgIH0KLQotICAgIGlmICggIXJj
ICkKLSAgICB7Ci0gICAgICAgIC8qCi0gICAgICAgICAqIFRoZSBleHBlY3RhdGlvbiBoZXJlIGlz
IHRoYXQgZ2VuZXJhbGx5IHRoZXJlIGFyZSBtYW55IG5vcm1hbCBwYWdlcwotICAgICAgICAgKiBv
biByZWxtZW1fbGlzdCAodGhlIG9uZXMgd2UgcHV0IHRoZXJlKSBhbmQgb25seSBmZXcgYmVpbmcg
aW4gYW4KLSAgICAgICAgICogb2ZmbGluZS9icm9rZW4gc3RhdGUuIFRoZSBsYXR0ZXIgb25lcyBh
cmUgYWx3YXlzIGF0IHRoZSBoZWFkIG9mIHRoZQotICAgICAgICAgKiBsaXN0LiBIZW5jZSB3ZSBm
aXJzdCBtb3ZlIHRoZSB3aG9sZSBsaXN0LCBhbmQgdGhlbiBtb3ZlIGJhY2sgdGhlCi0gICAgICAg
ICAqIGZpcnN0IGZldyBlbnRyaWVzLgotICAgICAgICAgKi8KLSAgICAgICAgcGFnZV9saXN0X21v
dmUoJmQtPnBhZ2VfbGlzdCwgJmQtPmFyY2gucmVsbWVtX2xpc3QpOwotICAgICAgICB3aGlsZSAo
ICFwYWdlX2xpc3RfZW1wdHkoJmQtPnBhZ2VfbGlzdCkgJiYKLSAgICAgICAgICAgICAgICAocGFn
ZSA9IHBhZ2VfbGlzdF9maXJzdCgmZC0+cGFnZV9saXN0KSwKLSAgICAgICAgICAgICAgICAgKHBh
Z2UtPmNvdW50X2luZm8gJiAoUEdDX3N0YXRlfFBHQ19icm9rZW4pKSkgKQotICAgICAgICB7Ci0g
ICAgICAgICAgICBwYWdlX2xpc3RfZGVsKHBhZ2UsICZkLT5wYWdlX2xpc3QpOwotICAgICAgICAg
ICAgcGFnZV9saXN0X2FkZF90YWlsKHBhZ2UsICZkLT5hcmNoLnJlbG1lbV9saXN0KTsKLSAgICAg
ICAgfQotICAgIH0KLQotICAgIHNwaW5fdW5sb2NrKCZkLT5wYWdlX2FsbG9jX2xvY2spOwotCi0g
ICAgaWYgKCAhcmMgKQotICAgICAgICAvKgotICAgICAgICAgKiBmbHVzaF9mbGFncyBhcmUgbm90
IHRyYWNrZWQgYWNyb3NzIGh5cGVyY2FsbCBwcmUtZW1wdGlvbiBzbwotICAgICAgICAgKiBhc3N1
bWUgYSBmdWxsIGZsdXNoIGlzIG5lY2Vzc2FyeS4KLSAgICAgICAgICovCi0gICAgICAgIHJjID0g
aW9tbXVfaW90bGJfZmx1c2hfYWxsKAotICAgICAgICAgICAgZCwgSU9NTVVfRkxVU0hGX2FkZGVk
IHwgSU9NTVVfRkxVU0hGX21vZGlmaWVkKTsKLQotICAgIGlmICggcmMgJiYgcmMgIT0gLUVSRVNU
QVJUICkKLSAgICAgICAgaW9tbXVfdGVhcmRvd24oZCk7Ci0KLSAgICByZXR1cm4gcmM7Ci19Ci0K
IHZvaWQgX19od2RvbV9pbml0IGFyY2hfaW9tbXVfY2hlY2tfYXV0b3RyYW5zbGF0ZWRfaHdkb20o
c3RydWN0IGRvbWFpbiAqZCkKIHsKICAgICBpZiAoICFpc19pb21tdV9lbmFibGVkKGQpICkKZGlm
ZiAtLWdpdCBhL3hlbi9pbmNsdWRlL2FzbS1hcm0vaW9tbXUuaCBiL3hlbi9pbmNsdWRlL2FzbS1h
cm0vaW9tbXUuaAppbmRleCA5MDRjOWFlYzExLi4xNTc3ZTgzZDJiIDEwMDY0NAotLS0gYS94ZW4v
aW5jbHVkZS9hc20tYXJtL2lvbW11LmgKKysrIGIveGVuL2luY2x1ZGUvYXNtLWFybS9pb21tdS5o
CkBAIC0yMSw3ICsyMSw3IEBAIHN0cnVjdCBhcmNoX2lvbW11CiB9OwogCiAvKiBBbHdheXMgc2hh
cmUgUDJNIFRhYmxlIGJldHdlZW4gdGhlIENQVSBhbmQgdGhlIElPTU1VICovCi0jZGVmaW5lIGlv
bW11X3VzZV9oYXBfcHQoZCkgKGhhc19pb21tdV9wdChkKSkKKyNkZWZpbmUgaW9tbXVfdXNlX2hh
cF9wdChkKSBpc19pb21tdV9lbmFibGVkKGQpCiAKIGNvbnN0IHN0cnVjdCBpb21tdV9vcHMgKmlv
bW11X2dldF9vcHModm9pZCk7CiB2b2lkIGlvbW11X3NldF9vcHMoY29uc3Qgc3RydWN0IGlvbW11
X29wcyAqb3BzKTsKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL2FzbS14ODYvaW9tbXUuaCBiL3hl
bi9pbmNsdWRlL2FzbS14ODYvaW9tbXUuaAppbmRleCBmYWNmODM1YWRhLi42ZDAyNGQ1YzBlIDEw
MDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L2lvbW11LmgKKysrIGIveGVuL2luY2x1ZGUv
YXNtLXg4Ni9pb21tdS5oCkBAIC04MSw3ICs4MSw3IEBAIGV4dGVybiBjb25zdCBzdHJ1Y3QgaW9t
bXVfaW5pdF9vcHMgKmlvbW11X2luaXRfb3BzOwogCiAvKiBBcmUgd2UgdXNpbmcgdGhlIGRvbWFp
biBQMk0gdGFibGUgYXMgaXRzIElPTU1VIHBhZ2V0YWJsZT8gKi8KICNkZWZpbmUgaW9tbXVfdXNl
X2hhcF9wdChkKSBcCi0gICAgKGhhcF9lbmFibGVkKGQpICYmIGhhc19pb21tdV9wdChkKSAmJiBp
b21tdV9oYXBfcHRfc2hhcmUpCisgICAgKGhhcF9lbmFibGVkKGQpICYmIGlzX2lvbW11X2VuYWJs
ZWQoZCkgJiYgaW9tbXVfaGFwX3B0X3NoYXJlKQogCiB2b2lkIGlvbW11X3VwZGF0ZV9pcmVfZnJv
bV9hcGljKHVuc2lnbmVkIGludCBhcGljLCB1bnNpZ25lZCBpbnQgcmVnLCB1bnNpZ25lZCBpbnQg
dmFsdWUpOwogdW5zaWduZWQgaW50IGlvbW11X3JlYWRfYXBpY19mcm9tX2lyZSh1bnNpZ25lZCBp
bnQgYXBpYywgdW5zaWduZWQgaW50IHJlZyk7CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS94ZW4v
aW9tbXUuaCBiL3hlbi9pbmNsdWRlL3hlbi9pb21tdS5oCmluZGV4IDQ4Zjg3NDgwYTcuLjViOTYx
MWExMzQgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hlbi9pb21tdS5oCisrKyBiL3hlbi9pbmNs
dWRlL3hlbi9pb21tdS5oCkBAIC03NCwxNSArNzQsOSBAQCBpbnQgZGVhc3NpZ25fZGV2aWNlKHN0
cnVjdCBkb21haW4gKmQsIHUxNiBzZWcsIHU4IGJ1cywgdTggZGV2Zm4pOwogCiB2b2lkIGFyY2hf
aW9tbXVfZG9tYWluX2Rlc3Ryb3koc3RydWN0IGRvbWFpbiAqZCk7CiBpbnQgYXJjaF9pb21tdV9k
b21haW5faW5pdChzdHJ1Y3QgZG9tYWluICpkKTsKLWludCBhcmNoX2lvbW11X3BvcHVsYXRlX3Bh
Z2VfdGFibGUoc3RydWN0IGRvbWFpbiAqZCk7CiB2b2lkIGFyY2hfaW9tbXVfY2hlY2tfYXV0b3Ry
YW5zbGF0ZWRfaHdkb20oc3RydWN0IGRvbWFpbiAqZCk7CiB2b2lkIGFyY2hfaW9tbXVfaHdkb21f
aW5pdChzdHJ1Y3QgZG9tYWluICpkKTsKIAotaW50IGlvbW11X2NvbnN0cnVjdChzdHJ1Y3QgZG9t
YWluICpkKTsKLQotLyogRnVuY3Rpb24gdXNlZCBpbnRlcm5hbGx5LCB1c2UgaW9tbXVfZG9tYWlu
X2Rlc3Ryb3kgKi8KLXZvaWQgaW9tbXVfdGVhcmRvd24oc3RydWN0IGRvbWFpbiAqZCk7Ci0KIC8q
CiAgKiBUaGUgZm9sbG93aW5nIGZsYWdzIGFyZSBwYXNzZWQgdG8gbWFwIG9wZXJhdGlvbnMgYW5k
IHBhc3NlZCBieSBsb29rdXAKICAqIG9wZXJhdGlvbnMuCkBAIC0yNDksMTMgKzI0Myw2IEBAIHN0
cnVjdCBpb21tdV9vcHMgewogIyBkZWZpbmUgaW9tbXVfdmNhbGwgaW9tbXVfY2FsbAogI2VuZGlm
CiAKLWVudW0gaW9tbXVfc3RhdHVzCi17Ci0gICAgSU9NTVVfU1RBVFVTX2Rpc2FibGVkLAotICAg
IElPTU1VX1NUQVRVU19pbml0aWFsaXppbmcsCi0gICAgSU9NTVVfU1RBVFVTX2luaXRpYWxpemVk
Ci19OwotCiBzdHJ1Y3QgZG9tYWluX2lvbW11IHsKICAgICBzdHJ1Y3QgYXJjaF9pb21tdSBhcmNo
OwogCkBAIC0yNzAsOSArMjU3LDYgQEAgc3RydWN0IGRvbWFpbl9pb21tdSB7CiAgICAgLyogRmVh
dHVyZXMgc3VwcG9ydGVkIGJ5IHRoZSBJT01NVSAqLwogICAgIERFQ0xBUkVfQklUTUFQKGZlYXR1
cmVzLCBJT01NVV9GRUFUX2NvdW50KTsKIAotICAgIC8qIFN0YXR1cyBvZiBndWVzdCBJT01NVSBt
YXBwaW5ncyAqLwotICAgIGVudW0gaW9tbXVfc3RhdHVzIHN0YXR1czsKLQogICAgIC8qCiAgICAg
ICogRG9lcyB0aGUgZ3Vlc3QgcmVxaXJlIG1hcHBpbmdzIHRvIGJlIHN5bmNob25pemVkLCB0byBt
YWludGFpbgogICAgICAqIHRoZSBkZWZhdWx0IGRmbiA9PSBwZm4gbWFwLiAoU2VlIGNvbW1lbnQg
b24gZGZuIGF0IHRoZSB0b3Agb2YKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC5o
IGIveGVuL2luY2x1ZGUveGVuL3NjaGVkLmgKaW5kZXggMDdlZDY2OTEzYS4uNjFiYzc1YmE3MSAx
MDA2NDQKLS0tIGEveGVuL2luY2x1ZGUveGVuL3NjaGVkLmgKKysrIGIveGVuL2luY2x1ZGUveGVu
L3NjaGVkLmgKQEAgLTk2NCwxMCArOTY0LDggQEAgc3RhdGljIGlubGluZSBib29sIGlzX2h3ZG9t
X3Bpbm5lZF92Y3B1KGNvbnN0IHN0cnVjdCB2Y3B1ICp2KQogfQogCiAjaWZkZWYgQ09ORklHX0hB
U19QQVNTVEhST1VHSAotI2RlZmluZSBoYXNfaW9tbXVfcHQoZCkgKGRvbV9pb21tdShkKS0+c3Rh
dHVzICE9IElPTU1VX1NUQVRVU19kaXNhYmxlZCkKICNkZWZpbmUgbmVlZF9pb21tdV9wdF9zeW5j
KGQpIChkb21faW9tbXUoZCktPm5lZWRfc3luYykKICNlbHNlCi0jZGVmaW5lIGhhc19pb21tdV9w
dChkKSBmYWxzZQogI2RlZmluZSBuZWVkX2lvbW11X3B0X3N5bmMoZCkgZmFsc2UKICNlbmRpZgog
Ci0tIAoyLjIwLjEuMi5nYjIxZWJiNjcxCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMu
eGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 55E5B3B0D5
	for <lists+xen-devel@lfdr.de>; Mon, 10 Jun 2019 10:42:15 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1haFpN-00054G-Q3; Mon, 10 Jun 2019 08:38:53 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=nNgH=UJ=intel.com=chen.zhang@srs-us1.protection.inumbo.net>)
 id 1haFpM-00054B-Ax
 for xen-devel@lists.xenproject.org; Mon, 10 Jun 2019 08:38:52 +0000
X-Inumbo-ID: 2a6d3782-8b5b-11e9-b3aa-e3e9f2dd556e
Received: from mga17.intel.com (unknown [192.55.52.151])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 2a6d3782-8b5b-11e9-b3aa-e3e9f2dd556e;
 Mon, 10 Jun 2019 08:38:48 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga006.fm.intel.com ([10.253.24.20])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 10 Jun 2019 01:38:47 -0700
X-ExtLoop1: 1
Received: from unknown (HELO localhost.localdomain) ([10.239.13.19])
 by fmsmga006.fm.intel.com with ESMTP; 10 Jun 2019 01:38:46 -0700
From: Zhang Chen <chen.zhang@intel.com >
To: Ian Jackson <ian.jackson@eu.citrix.com>, Wei Liu <wl@xen.org>,
 xen-devel@lists.xenproject.org
Date: Mon, 10 Jun 2019 16:33:36 +0800
Message-Id: <20190610083336.18235-1-chen.zhang@intel.com>
X-Mailer: git-send-email 2.17.GIT
Subject: [Xen-devel] [PATCH] tools/libxl: Add iothread support for COLO
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Zhang Chen <chen.zhang@intel.com>, Zhang Chen <zhangckid@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogWmhhbmcgQ2hlbiA8Y2hlbi56aGFuZ0BpbnRlbC5jb20+CgpYZW4gQ09MTyBhbmQgS1ZN
IENPTE8gc2hhcmVkIGxvdHMgb2YgY29kZSBpbiBRZW11LgpLVk0gQ09MTyBoYXMgYWRkZWQgdGhl
IGlvdGhyZWFkIHN1cHBvcnQsIHNvIHdlIGFkZCBpdCBvbiBYZW4uCgpEZXRhaWw6Cmh0dHBzOi8v
d2lraS5xZW11Lm9yZy9GZWF0dXJlcy9DT0xPCgpTaWduZWQtb2ZmLWJ5OiBaaGFuZyBDaGVuIDxj
aGVuLnpoYW5nQGludGVsLmNvbT4KLS0tCiB0b29scy9saWJ4bC9saWJ4bF9kbS5jICAgICAgfCAx
NCArKysrKysrKysrKy0tLQogdG9vbHMvbGlieGwvbGlieGxfdHlwZXMuaWRsIHwgIDIgKysKIHRv
b2xzL3hsL3hsX3BhcnNlLmMgICAgICAgICB8ICA0ICsrKysKIDMgZmlsZXMgY2hhbmdlZCwgMTcg
aW5zZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS90b29scy9saWJ4bC9s
aWJ4bF9kbS5jIGIvdG9vbHMvbGlieGwvbGlieGxfZG0uYwppbmRleCBmNGZjOTY0MTVkLi42YmI0
MDBlZmRmIDEwMDY0NAotLS0gYS90b29scy9saWJ4bC9saWJ4bF9kbS5jCisrKyBiL3Rvb2xzL2xp
YnhsL2xpYnhsX2RtLmMKQEAgLTE2MjksMTcgKzE2MjksMjUgQEAgc3RhdGljIGludCBsaWJ4bF9f
YnVpbGRfZGV2aWNlX21vZGVsX2FyZ3NfbmV3KGxpYnhsX19nYyAqZ2MsCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgbmljc1tpXS5jb2xvX2ZpbHRlcl9yZWRpcmVjdG9yMV9x
dWV1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9f
ZmlsdGVyX3JlZGlyZWN0b3IxX291dGRldikpOwogICAgICAgICAgICAgICAgICAgICB9CisgICAg
ICAgICAgICAgICAgICAgIGlmIChuaWNzW2ldLmNvbG9faW90aHJlYWQpIHsKKyAgICAgICAgICAg
ICAgICAgICAgICAgIGZsZXhhcnJheV9hcHBlbmQoZG1fYXJncywgIi1vYmplY3QiKTsKKyAgICAg
ICAgICAgICAgICAgICAgICAgIGZsZXhhcnJheV9hcHBlbmQoZG1fYXJncywKKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgIEdDU1BSSU5URigiaW90aHJlYWQsaWQ9JXMiLAorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIG5pY3NbaV0uY29sb19pb3RocmVhZCkpOworICAgICAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIGlmIChuaWNzW2ldLmNvbG9fY29t
cGFyZV9wcmlfaW4gJiYKICAgICAgICAgICAgICAgICAgICAgICAgIG5pY3NbaV0uY29sb19jb21w
YXJlX3NlY19pbiAmJgogICAgICAgICAgICAgICAgICAgICAgICAgbmljc1tpXS5jb2xvX2NvbXBh
cmVfb3V0ICYmCi0gICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9fY29tcGFyZV9u
b3RpZnlfZGV2KSB7CisgICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9fY29tcGFy
ZV9ub3RpZnlfZGV2ICYmCisgICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9fY29t
cGFyZV9pb3RocmVhZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgZmxleGFycmF5X2FwcGVu
ZChkbV9hcmdzLCAiLW9iamVjdCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgZmxleGFycmF5
X2FwcGVuZChkbV9hcmdzLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgR0NTUFJJTlRGKCJj
b2xvLWNvbXBhcmUsaWQ9YzEscHJpbWFyeV9pbj0lcyxzZWNvbmRhcnlfaW49JXMsb3V0ZGV2PSVz
LG5vdGlmeV9kZXY9JXMiLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgR0NTUFJJTlRGKCJj
b2xvLWNvbXBhcmUsaWQ9YzEscHJpbWFyeV9pbj0lcyxzZWNvbmRhcnlfaW49JXMsb3V0ZGV2PSVz
LG5vdGlmeV9kZXY9JXMsaW90aHJlYWQ9JXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG5pY3NbaV0uY29sb19jb21wYXJlX3ByaV9pbiwKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9fY29tcGFyZV9zZWNfaW4sCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmljc1tpXS5jb2xvX2NvbXBhcmVfb3V0LAot
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pY3NbaV0uY29sb19jb21wYXJl
X25vdGlmeV9kZXYpKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNz
W2ldLmNvbG9fY29tcGFyZV9ub3RpZnlfZGV2LAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG5pY3NbaV0uY29sb19jb21wYXJlX2lvdGhyZWFkKSk7CiAgICAgICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgaW9lbXVfbmljcysr
OwpkaWZmIC0tZ2l0IGEvdG9vbHMvbGlieGwvbGlieGxfdHlwZXMuaWRsIGIvdG9vbHMvbGlieGwv
bGlieGxfdHlwZXMuaWRsCmluZGV4IGI2MTM5OWNlMzYuLmYwNDM1YTUxNzcgMTAwNjQ0Ci0tLSBh
L3Rvb2xzL2xpYnhsL2xpYnhsX3R5cGVzLmlkbAorKysgYi90b29scy9saWJ4bC9saWJ4bF90eXBl
cy5pZGwKQEAgLTcyNywxMCArNzI3LDEyIEBAIGxpYnhsX2RldmljZV9uaWMgPSBTdHJ1Y3QoImRl
dmljZV9uaWMiLCBbCiAgICAgKCJjb2xvX2ZpbHRlcl9yZWRpcmVjdG9yMV9xdWV1ZSIsIHN0cmlu
ZyksCiAgICAgKCJjb2xvX2ZpbHRlcl9yZWRpcmVjdG9yMV9pbmRldiIsIHN0cmluZyksCiAgICAg
KCJjb2xvX2ZpbHRlcl9yZWRpcmVjdG9yMV9vdXRkZXYiLCBzdHJpbmcpLAorICAgICgiY29sb19p
b3RocmVhZCIsIHN0cmluZyksCiAgICAgKCJjb2xvX2NvbXBhcmVfcHJpX2luIiwgc3RyaW5nKSwK
ICAgICAoImNvbG9fY29tcGFyZV9zZWNfaW4iLCBzdHJpbmcpLAogICAgICgiY29sb19jb21wYXJl
X291dCIsIHN0cmluZyksCiAgICAgKCJjb2xvX2NvbXBhcmVfbm90aWZ5X2RldiIsIHN0cmluZyks
CisgICAgKCJjb2xvX2NvbXBhcmVfaW90aHJlYWQiLCBzdHJpbmcpLAogICAgICgiY29sb19zb2Nr
X3NlY19yZWRpcmVjdG9yMF9pZCIsIHN0cmluZyksCiAgICAgKCJjb2xvX3NvY2tfc2VjX3JlZGly
ZWN0b3IwX2lwIiwgc3RyaW5nKSwKICAgICAoImNvbG9fc29ja19zZWNfcmVkaXJlY3RvcjBfcG9y
dCIsIHN0cmluZyksCmRpZmYgLS1naXQgYS90b29scy94bC94bF9wYXJzZS5jIGIvdG9vbHMveGwv
eGxfcGFyc2UuYwppbmRleCBlMTA1YmRhMmJiLi5jZDE2ODU2OTEwIDEwMDY0NAotLS0gYS90b29s
cy94bC94bF9wYXJzZS5jCisrKyBiL3Rvb2xzL3hsL3hsX3BhcnNlLmMKQEAgLTUyMSw2ICs1MjEs
OCBAQCBpbnQgcGFyc2VfbmljX2NvbmZpZyhsaWJ4bF9kZXZpY2VfbmljICpuaWMsIFhMVV9Db25m
aWcgKipjb25maWcsIGNoYXIgKnRva2VuKQogICAgICAgICByZXBsYWNlX3N0cmluZygmbmljLT5j
b2xvX2ZpbHRlcl9yZWRpcmVjdG9yMV9pbmRldiwgb3BhcmcpOwogICAgIH0gZWxzZSBpZiAoTUFU
Q0hfT1BUSU9OKCJjb2xvX2ZpbHRlcl9yZWRpcmVjdG9yMV9vdXRkZXYiLCB0b2tlbiwgb3Bhcmcp
KSB7CiAgICAgICAgIHJlcGxhY2Vfc3RyaW5nKCZuaWMtPmNvbG9fZmlsdGVyX3JlZGlyZWN0b3Ix
X291dGRldiwgb3BhcmcpOworICAgIH0gZWxzZSBpZiAoTUFUQ0hfT1BUSU9OKCJjb2xvX2lvdGhy
ZWFkIiwgdG9rZW4sIG9wYXJnKSkgeworICAgICAgICByZXBsYWNlX3N0cmluZygmbmljLT5jb2xv
X2lvdGhyZWFkLCBvcGFyZyk7CiAgICAgfSBlbHNlIGlmIChNQVRDSF9PUFRJT04oImNvbG9fY29t
cGFyZV9wcmlfaW4iLCB0b2tlbiwgb3BhcmcpKSB7CiAgICAgICAgIHJlcGxhY2Vfc3RyaW5nKCZu
aWMtPmNvbG9fY29tcGFyZV9wcmlfaW4sIG9wYXJnKTsKICAgICB9IGVsc2UgaWYgKE1BVENIX09Q
VElPTigiY29sb19jb21wYXJlX3NlY19pbiIsIHRva2VuLCBvcGFyZykpIHsKQEAgLTUyOSw2ICs1
MzEsOCBAQCBpbnQgcGFyc2VfbmljX2NvbmZpZyhsaWJ4bF9kZXZpY2VfbmljICpuaWMsIFhMVV9D
b25maWcgKipjb25maWcsIGNoYXIgKnRva2VuKQogICAgICAgICByZXBsYWNlX3N0cmluZygmbmlj
LT5jb2xvX2NvbXBhcmVfb3V0LCBvcGFyZyk7CiAgICAgfSBlbHNlIGlmIChNQVRDSF9PUFRJT04o
ImNvbG9fY29tcGFyZV9ub3RpZnlfZGV2IiwgdG9rZW4sIG9wYXJnKSkgewogICAgICAgICByZXBs
YWNlX3N0cmluZygmbmljLT5jb2xvX2NvbXBhcmVfbm90aWZ5X2Rldiwgb3BhcmcpOworICAgIH0g
ZWxzZSBpZiAoTUFUQ0hfT1BUSU9OKCJjb2xvX2NvbXBhcmVfaW90aHJlYWQiLCB0b2tlbiwgb3Bh
cmcpKSB7CisgICAgICAgIHJlcGxhY2Vfc3RyaW5nKCZuaWMtPmNvbG9fY29tcGFyZV9pb3RocmVh
ZCwgb3BhcmcpOwogICAgIH0gZWxzZSBpZiAoTUFUQ0hfT1BUSU9OKCJjb2xvX3NvY2tfc2VjX3Jl
ZGlyZWN0b3IwX2lkIiwgdG9rZW4sIG9wYXJnKSkgewogICAgICAgICByZXBsYWNlX3N0cmluZygm
bmljLT5jb2xvX3NvY2tfc2VjX3JlZGlyZWN0b3IwX2lkLCBvcGFyZyk7CiAgICAgfSBlbHNlIGlm
IChNQVRDSF9PUFRJT04oImNvbG9fc29ja19zZWNfcmVkaXJlY3RvcjBfaXAiLCB0b2tlbiwgb3Bh
cmcpKSB7Ci0tIAoyLjE3LkdJVAoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnBy
b2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94
ZW4tZGV2ZWw=

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 6A7166096A
	for <lists+xen-devel@lfdr.de>; Fri,  5 Jul 2019 17:36:21 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hjQCf-0000ZK-B7; Fri, 05 Jul 2019 15:32:49 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=hVvi=VC=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hjQCe-0000ZF-2Z
 for xen-devel@lists.xenproject.org; Fri, 05 Jul 2019 15:32:48 +0000
X-Inumbo-ID: 22bf0e66-9f3a-11e9-8980-bc764e045a96
Received: from m4a0039g.houston.softwaregrp.com (unknown [15.124.2.85])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 22bf0e66-9f3a-11e9-8980-bc764e045a96;
 Fri, 05 Jul 2019 15:32:45 +0000 (UTC)
Received: FROM m4a0039g.houston.softwaregrp.com (15.120.17.146) BY
 m4a0039g.houston.softwaregrp.com WITH ESMTP; 
 Fri,  5 Jul 2019 15:29:06 +0000
Received: from M9W0068.microfocus.com (2002:f79:bf::f79:bf) by
 M4W0334.microfocus.com (2002:f78:1192::f78:1192) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10; Fri, 5 Jul 2019 15:31:50 +0000
Received: from NAM05-CO1-obe.outbound.protection.outlook.com (15.124.72.10) by
 M9W0068.microfocus.com (15.121.0.191) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10 via Frontend Transport; Fri, 5 Jul 2019 15:31:49 +0000
Received: from BY5PR18MB3394.namprd18.prod.outlook.com (10.255.139.95) by
 BY5PR18MB3106.namprd18.prod.outlook.com (10.255.154.215) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2052.19; Fri, 5 Jul 2019 15:31:48 +0000
Received: from BY5PR18MB3394.namprd18.prod.outlook.com
 ([fe80::2005:4b02:1d60:d1bc]) by BY5PR18MB3394.namprd18.prod.outlook.com
 ([fe80::2005:4b02:1d60:d1bc%3]) with mapi id 15.20.2052.019; Fri, 5 Jul 2019
 15:31:48 +0000
From: Jan Beulich <JBeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH] x86/shadow: ditch dangerous declarations
Thread-Index: AQHVM0bCnFNfI0VgeUWOcU6POhWqhw==
Date: Fri, 5 Jul 2019 15:31:48 +0000
Message-ID: <61965bbf-fc34-d845-b20a-d6d8034bfb88@suse.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
x-clientproxiedby: DB6PR07CA0106.eurprd07.prod.outlook.com
 (2603:10a6:6:2c::20) To BY5PR18MB3394.namprd18.prod.outlook.com
 (2603:10b6:a03:194::31)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=JBeulich@suse.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [87.234.252.170]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 9f962b10-74e4-4bf2-38f5-08d7015de4e5
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328)(49563074)(7193020);
 SRVR:BY5PR18MB3106; 
x-ms-traffictypediagnostic: BY5PR18MB3106:
x-microsoft-antispam-prvs: <BY5PR18MB3106F441064B7F404150FCF7B3F50@BY5PR18MB3106.namprd18.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:8882;
x-forefront-prvs: 008960E8EC
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(4636009)(376002)(346002)(39860400002)(136003)(396003)(366004)(189003)(199004)(66946007)(73956011)(66066001)(26005)(102836004)(305945005)(71200400001)(71190400001)(80792005)(64756008)(66556008)(66476007)(66616009)(66446008)(186003)(36756003)(81156014)(81166006)(86362001)(8936002)(5660300002)(7736002)(31696002)(52116002)(6506007)(386003)(53936002)(99286004)(8676002)(476003)(25786009)(478600001)(6486002)(6436002)(6916009)(3846002)(54906003)(99936001)(72206003)(6512007)(486006)(2351001)(6116002)(2616005)(5640700003)(2906002)(31686004)(14444005)(2501003)(256004)(4326008)(316002)(14454004)(68736007);
 DIR:OUT; SFP:1102; SCL:1; SRVR:BY5PR18MB3106;
 H:BY5PR18MB3394.namprd18.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: suse.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: fOsH/MBo17RoV82flCuKjf0QOd9SFiCCNITT19DSfZx73IMZ9FPJ+WNmC0GxrFps2/xChr7TmL8h//fnL62WH5nufLs0Qmc1UnB5id8dAaPxwqEprtpM5A9o9b4UlTB/0lZO19n+2fik7q4jqevK+PMpIccQEp9+jn7U0/9/Z4nhmb5bKChIadsxxN7thRwf89MQ4AYRpQhNOlGUXiwgFHqCJM1ks7wYlX2byE+C46CuHslmfCdgCS4FRR208w762sxF3RtPYfF6bsHOsxlVio5xqnkL7rTrm/CuHPg5g2xK5bEykfQMJLRoHmQkZz+J/4KPQi/SnfCNwwccsM8UvGJ7LntIK0iVjEQOWGh+Mo0+mJ/9YpKRXjy6yHw6CYrjgd1cMn5HZWIlmD+DCIXic94Zvu/BLKCjGaLqfsRutsE=
Content-Type: multipart/mixed;
 boundary="_002_61965bbffc34d845b20ad6d8034bfb88susecom_"
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-Network-Message-Id: 9f962b10-74e4-4bf2-38f5-08d7015de4e5
X-MS-Exchange-CrossTenant-originalarrivaltime: 05 Jul 2019 15:31:48.3506 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 856b813c-16e5-49a5-85ec-6f081e13b527
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: JBeulich@suse.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: BY5PR18MB3106
X-OriginatorOrg: suse.com
Subject: [Xen-devel] [PATCH] x86/shadow: ditch dangerous declarations
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Tim Deegan <tim@xen.org>,
 Wei Liu <wl@xen.org>,
 =?utf-8?B?Um9nZXIgUGF1IE1vbm7DqQ==?= <roger.pau@citrix.com>
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

--_002_61965bbffc34d845b20ad6d8034bfb88susecom_
Content-Type: text/plain; charset="utf-8"
Content-ID: <2D65A236AAA51D4E8A74F1A50479E060@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

VGhpcyBzdGFydGVkIG91dCB3aXRoIG1lIG5vdGljaW5nIHRoZSBsYXRlbnQgYnVnIG9mIHRoZXJl
IGJlaW5nIEhWTQ0KcmVsYXRlZCBkZWNsYXJhdGlvbnMgaW4gY29tbW9uLmMgdGhhdCB0aGVpciBw
cm9kdWNlciBkb2Vzbid0IHNlZSwgYW5kDQp0aGF0IGhlbmNlIGNvdWxkIGdvIG91dCBvZiBzeW5j
IGF0IGFueSB0aW1lLiBIb3dldmVyLCBnbyBmYXJ0aGVyIHRoYW4NCmZpeGluZyBqdXN0IHRoYXQg
YW5kIG1vdmUgdGhlIGZ1bmN0aW9ucyBhY3R1YWxseSB1c2luZyB0aGVzZSBpbnRvIGh2bS5jLg0K
VGhpcyB3YXkgdGhlIGl0ZW1zIGluIHF1ZXN0aW9uIGNhbiBzaW1wbHkgYmVjb21lIHN0YXRpYywg
YW5kIG5vIHNlcGFyYXRlDQpkZWNsYXJhdGlvbnMgYXJlIG5lZWRlZCBhdCBhbGwuDQoNCldpdGhp
biB0aGUgbW92ZWQgY29kZSBjb25zdGlmeSBhbmQgcmVuYW1lIG9yIG91dHJpZ2h0IGRlbGV0ZSB0
aGUgc3RydWN0DQp2Y3B1ICogbG9jYWwgdmFyaWFibGVzIGFuZCByZS1mb3JtYXQgYSBjb21tZW50
Lg0KDQpTaWduZWQtb2ZmLWJ5OiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+DQoNCi0t
LSBhL3hlbi9hcmNoL3g4Ni9tbS9zaGFkb3cvY29tbW9uLmMNCisrKyBiL3hlbi9hcmNoL3g4Ni9t
bS9zaGFkb3cvY29tbW9uLmMNCkBAIC0xMTIsMTA1ICsxMTIsNiBAQCBzdGF0aWMgaW50IF9faW5p
dCBzaGFkb3dfYXVkaXRfa2V5X2luaXQoDQogIF9faW5pdGNhbGwoc2hhZG93X2F1ZGl0X2tleV9p
bml0KTsNCiAgI2VuZGlmIC8qIFNIQURPV19BVURJVCAqLw0KICANCi0NCi0jaWZkZWYgQ09ORklH
X0hWTQ0KLWV4dGVybiBjb25zdCBzdHJ1Y3QgeDg2X2VtdWxhdGVfb3BzIGh2bV9zaGFkb3dfZW11
bGF0b3Jfb3BzOw0KLWV4dGVybiBzdHJ1Y3Qgc2VnbWVudF9yZWdpc3RlciAqaHZtX2dldF9zZWdf
cmVnKA0KLSAgICBlbnVtIHg4Nl9zZWdtZW50IHNlZywgc3RydWN0IHNoX2VtdWxhdGVfY3R4dCAq
c2hfY3R4dCk7DQotZXh0ZXJuIGludCBodm1fdHJhbnNsYXRlX3ZpcnR1YWxfYWRkcigNCi0gICAg
ZW51bSB4ODZfc2VnbWVudCBzZWcsDQotICAgIHVuc2lnbmVkIGxvbmcgb2Zmc2V0LA0KLSAgICB1
bnNpZ25lZCBpbnQgYnl0ZXMsDQotICAgIGVudW0gaHZtX2FjY2Vzc190eXBlIGFjY2Vzc190eXBl
LA0KLSAgICBzdHJ1Y3Qgc2hfZW11bGF0ZV9jdHh0ICpzaF9jdHh0LA0KLSAgICB1bnNpZ25lZCBs
b25nICpsaW5lYXIpOw0KLSNlbmRpZg0KLQ0KLWNvbnN0IHN0cnVjdCB4ODZfZW11bGF0ZV9vcHMg
KnNoYWRvd19pbml0X2VtdWxhdGlvbigNCi0gICAgc3RydWN0IHNoX2VtdWxhdGVfY3R4dCAqc2hf
Y3R4dCwgc3RydWN0IGNwdV91c2VyX3JlZ3MgKnJlZ3MsDQotICAgIHVuc2lnbmVkIGludCBwdGVf
c2l6ZSkNCi17DQotI2lmZGVmIENPTkZJR19IVk0NCi0gICAgc3RydWN0IHNlZ21lbnRfcmVnaXN0
ZXIgKmNyZWcsICpzcmVnOw0KLSAgICBzdHJ1Y3QgdmNwdSAqdiA9IGN1cnJlbnQ7DQotICAgIHVu
c2lnbmVkIGxvbmcgYWRkcjsNCi0NCi0gICAgQVNTRVJUKGlzX2h2bV92Y3B1KHYpKTsNCi0NCi0g
ICAgbWVtc2V0KHNoX2N0eHQsIDAsIHNpemVvZigqc2hfY3R4dCkpOw0KLQ0KLSAgICBzaF9jdHh0
LT5jdHh0LnJlZ3MgPSByZWdzOw0KLSAgICBzaF9jdHh0LT5jdHh0LmNwdWlkID0gdi0+ZG9tYWlu
LT5hcmNoLmNwdWlkOw0KLSAgICBzaF9jdHh0LT5jdHh0LmxtYSA9IGh2bV9sb25nX21vZGVfYWN0
aXZlKHYpOw0KLQ0KLSAgICAvKiBTZWdtZW50IGNhY2hlIGluaXRpYWxpc2F0aW9uLiBQcmltZWQg
d2l0aCBDUy4gKi8NCi0gICAgY3JlZyA9IGh2bV9nZXRfc2VnX3JlZyh4ODZfc2VnX2NzLCBzaF9j
dHh0KTsNCi0NCi0gICAgLyogV29yayBvdXQgdGhlIGVtdWxhdGlvbiBtb2RlLiAqLw0KLSAgICBp
ZiAoIHNoX2N0eHQtPmN0eHQubG1hICYmIGNyZWctPmwgKQ0KLSAgICAgICAgc2hfY3R4dC0+Y3R4
dC5hZGRyX3NpemUgPSBzaF9jdHh0LT5jdHh0LnNwX3NpemUgPSA2NDsNCi0gICAgZWxzZQ0KLSAg
ICB7DQotICAgICAgICBzcmVnID0gaHZtX2dldF9zZWdfcmVnKHg4Nl9zZWdfc3MsIHNoX2N0eHQp
Ow0KLSAgICAgICAgc2hfY3R4dC0+Y3R4dC5hZGRyX3NpemUgPSBjcmVnLT5kYiA/IDMyIDogMTY7
DQotICAgICAgICBzaF9jdHh0LT5jdHh0LnNwX3NpemUgICA9IHNyZWctPmRiID8gMzIgOiAxNjsN
Ci0gICAgfQ0KLQ0KLSAgICBzaF9jdHh0LT5wdGVfc2l6ZSA9IHB0ZV9zaXplOw0KLQ0KLSAgICAv
KiBBdHRlbXB0IHRvIHByZWZldGNoIHdob2xlIGluc3RydWN0aW9uLiAqLw0KLSAgICBzaF9jdHh0
LT5pbnNuX2J1Zl9laXAgPSByZWdzLT5yaXA7DQotICAgIHNoX2N0eHQtPmluc25fYnVmX2J5dGVz
ID0NCi0gICAgICAgICghaHZtX3RyYW5zbGF0ZV92aXJ0dWFsX2FkZHIoDQotICAgICAgICAgICAg
eDg2X3NlZ19jcywgcmVncy0+cmlwLCBzaXplb2Yoc2hfY3R4dC0+aW5zbl9idWYpLA0KLSAgICAg
ICAgICAgIGh2bV9hY2Nlc3NfaW5zbl9mZXRjaCwgc2hfY3R4dCwgJmFkZHIpICYmDQotICAgICAg
ICAgIWh2bV9jb3B5X2Zyb21fZ3Vlc3RfbGluZWFyKA0KLSAgICAgICAgICAgICBzaF9jdHh0LT5p
bnNuX2J1ZiwgYWRkciwgc2l6ZW9mKHNoX2N0eHQtPmluc25fYnVmKSwNCi0gICAgICAgICAgICAg
UEZFQ19pbnNuX2ZldGNoLCBOVUxMKSkNCi0gICAgICAgID8gc2l6ZW9mKHNoX2N0eHQtPmluc25f
YnVmKSA6IDA7DQotDQotICAgIHJldHVybiAmaHZtX3NoYWRvd19lbXVsYXRvcl9vcHM7DQotI2Vs
c2UNCi0gICAgQlVHKCk7DQotICAgIHJldHVybiBOVUxMOw0KLSNlbmRpZg0KLX0NCi0NCi0vKiBV
cGRhdGUgYW4gaW5pdGlhbGl6ZWQgZW11bGF0aW9uIGNvbnRleHQgdG8gcHJlcGFyZSBmb3IgdGhl
IG5leHQNCi0gKiBpbnN0cnVjdGlvbiAqLw0KLXZvaWQgc2hhZG93X2NvbnRpbnVlX2VtdWxhdGlv
bihzdHJ1Y3Qgc2hfZW11bGF0ZV9jdHh0ICpzaF9jdHh0LA0KLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzdHJ1Y3QgY3B1X3VzZXJfcmVncyAqcmVncykNCi17DQotI2lmZGVmIENPTkZJ
R19IVk0NCi0gICAgc3RydWN0IHZjcHUgKnYgPSBjdXJyZW50Ow0KLSAgICB1bnNpZ25lZCBsb25n
IGFkZHIsIGRpZmY7DQotDQotICAgIEFTU0VSVChpc19odm1fdmNwdSh2KSk7DQotDQotICAgIC8q
DQotICAgICAqIFdlIGRvbid0IHJlZmV0Y2ggdGhlIHNlZ21lbnQgYmFzZXMsIGJlY2F1c2Ugd2Ug
ZG9uJ3QgZW11bGF0ZQ0KLSAgICAgKiB3cml0ZXMgdG8gc2VnbWVudCByZWdpc3RlcnMNCi0gICAg
ICovDQotICAgIGRpZmYgPSByZWdzLT5yaXAgLSBzaF9jdHh0LT5pbnNuX2J1Zl9laXA7DQotICAg
IGlmICggZGlmZiA+IHNoX2N0eHQtPmluc25fYnVmX2J5dGVzICkNCi0gICAgew0KLSAgICAgICAg
LyogUHJlZmV0Y2ggbW9yZSBieXRlcy4gKi8NCi0gICAgICAgIHNoX2N0eHQtPmluc25fYnVmX2J5
dGVzID0NCi0gICAgICAgICAgICAoIWh2bV90cmFuc2xhdGVfdmlydHVhbF9hZGRyKA0KLSAgICAg
ICAgICAgICAgICB4ODZfc2VnX2NzLCByZWdzLT5yaXAsIHNpemVvZihzaF9jdHh0LT5pbnNuX2J1
ZiksDQotICAgICAgICAgICAgICAgIGh2bV9hY2Nlc3NfaW5zbl9mZXRjaCwgc2hfY3R4dCwgJmFk
ZHIpICYmDQotICAgICAgICAgICAgICFodm1fY29weV9mcm9tX2d1ZXN0X2xpbmVhcigNCi0gICAg
ICAgICAgICAgICAgIHNoX2N0eHQtPmluc25fYnVmLCBhZGRyLCBzaXplb2Yoc2hfY3R4dC0+aW5z
bl9idWYpLA0KLSAgICAgICAgICAgICAgICAgUEZFQ19pbnNuX2ZldGNoLCBOVUxMKSkNCi0gICAg
ICAgICAgICA/IHNpemVvZihzaF9jdHh0LT5pbnNuX2J1ZikgOiAwOw0KLSAgICAgICAgc2hfY3R4
dC0+aW5zbl9idWZfZWlwID0gcmVncy0+cmlwOw0KLSAgICB9DQotI2Vsc2UNCi0gICAgQlVHKCk7
DQotI2VuZGlmDQotfQ0KLQ0KLQ0KICAjaWYgKFNIQURPV19PUFRJTUlaQVRJT05TICYgU0hPUFRf
T1VUX09GX1NZTkMpDQogIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCiAgLyogT3V0LW9mLXN5bmMgc2hh
ZG93cy4gKi8NCi0tLSBhL3hlbi9hcmNoL3g4Ni9tbS9zaGFkb3cvaHZtLmMNCisrKyBiL3hlbi9h
cmNoL3g4Ni9tbS9zaGFkb3cvaHZtLmMNCkBAIC01NCw3ICs1NCw3IEBAIHN0YXRpYyB2b2lkIHNo
X2VtdWxhdGVfdW5tYXBfZGVzdChzdHJ1Y3QNCiAgICogQ2FsbGVycyB3aGljaCBwYXNzIGEga25v
d24gaW4tcmFuZ2UgeDg2X3NlZ21lbnQgY2FuIHJlbHkgb24gdGhlIHJldHVybg0KICAgKiBwb2lu
dGVyIGJlaW5nIHZhbGlkLiAgT3RoZXIgY2FsbGVycyBtdXN0IGV4cGxpY2l0bHkgY2hlY2sgZm9y
IGVycm9ycy4NCiAgICovDQotc3RydWN0IHNlZ21lbnRfcmVnaXN0ZXIgKmh2bV9nZXRfc2VnX3Jl
ZygNCitzdGF0aWMgc3RydWN0IHNlZ21lbnRfcmVnaXN0ZXIgKmh2bV9nZXRfc2VnX3JlZygNCiAg
ICAgIGVudW0geDg2X3NlZ21lbnQgc2VnLCBzdHJ1Y3Qgc2hfZW11bGF0ZV9jdHh0ICpzaF9jdHh0
KQ0KICB7DQogICAgICB1bnNpZ25lZCBpbnQgaWR4ID0gc2VnOw0KQEAgLTY5LDcgKzY5LDcgQEAg
c3RydWN0IHNlZ21lbnRfcmVnaXN0ZXIgKmh2bV9nZXRfc2VnX3JlZw0KICAgICAgcmV0dXJuIHNl
Z19yZWc7DQogIH0NCiAgDQotaW50IGh2bV90cmFuc2xhdGVfdmlydHVhbF9hZGRyKA0KK3N0YXRp
YyBpbnQgaHZtX3RyYW5zbGF0ZV92aXJ0dWFsX2FkZHIoDQogICAgICBlbnVtIHg4Nl9zZWdtZW50
IHNlZywNCiAgICAgIHVuc2lnbmVkIGxvbmcgb2Zmc2V0LA0KICAgICAgdW5zaWduZWQgaW50IGJ5
dGVzLA0KQEAgLTI5MiwxMyArMjkyLDg5IEBAIGh2bV9lbXVsYXRlX2NtcHhjaGcoZW51bSB4ODZf
c2VnbWVudCBzZWcNCiAgICAgIHJldHVybiByYzsNCiAgfQ0KICANCi1jb25zdCBzdHJ1Y3QgeDg2
X2VtdWxhdGVfb3BzIGh2bV9zaGFkb3dfZW11bGF0b3Jfb3BzID0gew0KK3N0YXRpYyBjb25zdCBz
dHJ1Y3QgeDg2X2VtdWxhdGVfb3BzIGh2bV9zaGFkb3dfZW11bGF0b3Jfb3BzID0gew0KICAgICAg
LnJlYWQgICAgICAgPSBodm1fZW11bGF0ZV9yZWFkLA0KICAgICAgLmluc25fZmV0Y2ggPSBodm1f
ZW11bGF0ZV9pbnNuX2ZldGNoLA0KICAgICAgLndyaXRlICAgICAgPSBodm1fZW11bGF0ZV93cml0
ZSwNCiAgICAgIC5jbXB4Y2hnICAgID0gaHZtX2VtdWxhdGVfY21weGNoZywNCiAgfTsNCiAgDQor
Y29uc3Qgc3RydWN0IHg4Nl9lbXVsYXRlX29wcyAqc2hhZG93X2luaXRfZW11bGF0aW9uKA0KKyAg
ICBzdHJ1Y3Qgc2hfZW11bGF0ZV9jdHh0ICpzaF9jdHh0LCBzdHJ1Y3QgY3B1X3VzZXJfcmVncyAq
cmVncywNCisgICAgdW5zaWduZWQgaW50IHB0ZV9zaXplKQ0KK3sNCisgICAgc3RydWN0IHNlZ21l
bnRfcmVnaXN0ZXIgKmNyZWcsICpzcmVnOw0KKyAgICBjb25zdCBzdHJ1Y3QgdmNwdSAqY3VyciA9
IGN1cnJlbnQ7DQorICAgIHVuc2lnbmVkIGxvbmcgYWRkcjsNCisNCisgICAgQVNTRVJUKGlzX2h2
bV92Y3B1KGN1cnIpKTsNCisNCisgICAgbWVtc2V0KHNoX2N0eHQsIDAsIHNpemVvZigqc2hfY3R4
dCkpOw0KKw0KKyAgICBzaF9jdHh0LT5jdHh0LnJlZ3MgPSByZWdzOw0KKyAgICBzaF9jdHh0LT5j
dHh0LmNwdWlkID0gY3Vyci0+ZG9tYWluLT5hcmNoLmNwdWlkOw0KKyAgICBzaF9jdHh0LT5jdHh0
LmxtYSA9IGh2bV9sb25nX21vZGVfYWN0aXZlKGN1cnIpOw0KKw0KKyAgICAvKiBTZWdtZW50IGNh
Y2hlIGluaXRpYWxpc2F0aW9uLiBQcmltZWQgd2l0aCBDUy4gKi8NCisgICAgY3JlZyA9IGh2bV9n
ZXRfc2VnX3JlZyh4ODZfc2VnX2NzLCBzaF9jdHh0KTsNCisNCisgICAgLyogV29yayBvdXQgdGhl
IGVtdWxhdGlvbiBtb2RlLiAqLw0KKyAgICBpZiAoIHNoX2N0eHQtPmN0eHQubG1hICYmIGNyZWct
PmwgKQ0KKyAgICAgICAgc2hfY3R4dC0+Y3R4dC5hZGRyX3NpemUgPSBzaF9jdHh0LT5jdHh0LnNw
X3NpemUgPSA2NDsNCisgICAgZWxzZQ0KKyAgICB7DQorICAgICAgICBzcmVnID0gaHZtX2dldF9z
ZWdfcmVnKHg4Nl9zZWdfc3MsIHNoX2N0eHQpOw0KKyAgICAgICAgc2hfY3R4dC0+Y3R4dC5hZGRy
X3NpemUgPSBjcmVnLT5kYiA/IDMyIDogMTY7DQorICAgICAgICBzaF9jdHh0LT5jdHh0LnNwX3Np
emUgICA9IHNyZWctPmRiID8gMzIgOiAxNjsNCisgICAgfQ0KKw0KKyAgICBzaF9jdHh0LT5wdGVf
c2l6ZSA9IHB0ZV9zaXplOw0KKw0KKyAgICAvKiBBdHRlbXB0IHRvIHByZWZldGNoIHdob2xlIGlu
c3RydWN0aW9uLiAqLw0KKyAgICBzaF9jdHh0LT5pbnNuX2J1Zl9laXAgPSByZWdzLT5yaXA7DQor
ICAgIHNoX2N0eHQtPmluc25fYnVmX2J5dGVzID0NCisgICAgICAgICghaHZtX3RyYW5zbGF0ZV92
aXJ0dWFsX2FkZHIoDQorICAgICAgICAgICAgeDg2X3NlZ19jcywgcmVncy0+cmlwLCBzaXplb2Yo
c2hfY3R4dC0+aW5zbl9idWYpLA0KKyAgICAgICAgICAgIGh2bV9hY2Nlc3NfaW5zbl9mZXRjaCwg
c2hfY3R4dCwgJmFkZHIpICYmDQorICAgICAgICAgIWh2bV9jb3B5X2Zyb21fZ3Vlc3RfbGluZWFy
KA0KKyAgICAgICAgICAgICBzaF9jdHh0LT5pbnNuX2J1ZiwgYWRkciwgc2l6ZW9mKHNoX2N0eHQt
Pmluc25fYnVmKSwNCisgICAgICAgICAgICAgUEZFQ19pbnNuX2ZldGNoLCBOVUxMKSkNCisgICAg
ICAgID8gc2l6ZW9mKHNoX2N0eHQtPmluc25fYnVmKSA6IDA7DQorDQorICAgIHJldHVybiAmaHZt
X3NoYWRvd19lbXVsYXRvcl9vcHM7DQorfQ0KKw0KKy8qDQorICogVXBkYXRlIGFuIGluaXRpYWxp
emVkIGVtdWxhdGlvbiBjb250ZXh0IHRvIHByZXBhcmUgZm9yIHRoZSBuZXh0DQorICogaW5zdHJ1
Y3Rpb24uDQorICovDQordm9pZCBzaGFkb3dfY29udGludWVfZW11bGF0aW9uKHN0cnVjdCBzaF9l
bXVsYXRlX2N0eHQgKnNoX2N0eHQsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0
cnVjdCBjcHVfdXNlcl9yZWdzICpyZWdzKQ0KK3sNCisgICAgdW5zaWduZWQgbG9uZyBhZGRyLCBk
aWZmOw0KKw0KKyAgICBBU1NFUlQoaXNfaHZtX3ZjcHUoY3VycmVudCkpOw0KKw0KKyAgICAvKg0K
KyAgICAgKiBXZSBkb24ndCByZWZldGNoIHRoZSBzZWdtZW50IGJhc2VzLCBiZWNhdXNlIHdlIGRv
bid0IGVtdWxhdGUNCisgICAgICogd3JpdGVzIHRvIHNlZ21lbnQgcmVnaXN0ZXJzDQorICAgICAq
Lw0KKyAgICBkaWZmID0gcmVncy0+cmlwIC0gc2hfY3R4dC0+aW5zbl9idWZfZWlwOw0KKyAgICBp
ZiAoIGRpZmYgPiBzaF9jdHh0LT5pbnNuX2J1Zl9ieXRlcyApDQorICAgIHsNCisgICAgICAgIC8q
IFByZWZldGNoIG1vcmUgYnl0ZXMuICovDQorICAgICAgICBzaF9jdHh0LT5pbnNuX2J1Zl9ieXRl
cyA9DQorICAgICAgICAgICAgKCFodm1fdHJhbnNsYXRlX3ZpcnR1YWxfYWRkcigNCisgICAgICAg
ICAgICAgICAgeDg2X3NlZ19jcywgcmVncy0+cmlwLCBzaXplb2Yoc2hfY3R4dC0+aW5zbl9idWYp
LA0KKyAgICAgICAgICAgICAgICBodm1fYWNjZXNzX2luc25fZmV0Y2gsIHNoX2N0eHQsICZhZGRy
KSAmJg0KKyAgICAgICAgICAgICAhaHZtX2NvcHlfZnJvbV9ndWVzdF9saW5lYXIoDQorICAgICAg
ICAgICAgICAgICBzaF9jdHh0LT5pbnNuX2J1ZiwgYWRkciwgc2l6ZW9mKHNoX2N0eHQtPmluc25f
YnVmKSwNCisgICAgICAgICAgICAgICAgIFBGRUNfaW5zbl9mZXRjaCwgTlVMTCkpDQorICAgICAg
ICAgICAgPyBzaXplb2Yoc2hfY3R4dC0+aW5zbl9idWYpIDogMDsNCisgICAgICAgIHNoX2N0eHQt
Pmluc25fYnVmX2VpcCA9IHJlZ3MtPnJpcDsNCisgICAgfQ0KK30NCisNCiAgLyoqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqLw0KICAvKiBIYW5kbGluZyBndWVzdCB3cml0ZXMgdG8gcGFnZXRhYmxlcy4gKi8NCiAg
DQotLS0gYS94ZW4vYXJjaC94ODYvbW0vc2hhZG93L3ByaXZhdGUuaA0KKysrIGIveGVuL2FyY2gv
eDg2L21tL3NoYWRvdy9wcml2YXRlLmgNCkBAIC03MDksMTEgKzcwOSwyNiBAQCBzdHJ1Y3Qgc2hf
ZW11bGF0ZV9jdHh0IHsNCiAgI2VuZGlmDQogIH07DQogIA0KKyNpZmRlZiBDT05GSUdfSFZNDQog
IGNvbnN0IHN0cnVjdCB4ODZfZW11bGF0ZV9vcHMgKnNoYWRvd19pbml0X2VtdWxhdGlvbigNCiAg
ICAgIHN0cnVjdCBzaF9lbXVsYXRlX2N0eHQgKnNoX2N0eHQsIHN0cnVjdCBjcHVfdXNlcl9yZWdz
ICpyZWdzLA0KICAgICAgdW5zaWduZWQgaW50IHB0ZV9zaXplKTsNCiAgdm9pZCBzaGFkb3dfY29u
dGludWVfZW11bGF0aW9uKA0KICAgICAgc3RydWN0IHNoX2VtdWxhdGVfY3R4dCAqc2hfY3R4dCwg
c3RydWN0IGNwdV91c2VyX3JlZ3MgKnJlZ3MpOw0KKyNlbHNlDQorc3RhdGljIGlubGluZSBjb25z
dCBzdHJ1Y3QgeDg2X2VtdWxhdGVfb3BzICpzaGFkb3dfaW5pdF9lbXVsYXRpb24oDQorICAgIHN0
cnVjdCBzaF9lbXVsYXRlX2N0eHQgKnNoX2N0eHQsIHN0cnVjdCBjcHVfdXNlcl9yZWdzICpyZWdz
LA0KKyAgICB1bnNpZ25lZCBpbnQgcHRlX3NpemUpDQorew0KKyAgICBCVUcoKTsNCisgICAgcmV0
dXJuIE5VTEw7DQorfQ0KK3N0YXRpYyBpbmxpbmUgdm9pZCBzaGFkb3dfY29udGludWVfZW11bGF0
aW9uKA0KKyAgICBzdHJ1Y3Qgc2hfZW11bGF0ZV9jdHh0ICpzaF9jdHh0LCBzdHJ1Y3QgY3B1X3Vz
ZXJfcmVncyAqcmVncykNCit7DQorICAgIEJVRygpOw0KK30NCisjZW5kaWYNCiAgDQogIC8qIFN0
b3AgY291bnRpbmcgdG93YXJkcyBlYXJseSB1bnNoYWRvd3MsIGFzIHdlJ3ZlIHNlZW4gYSByZWFs
IHBhZ2UgZmF1bHQgKi8NCiAgc3RhdGljIGlubGluZSB2b2lkIHNoX3Jlc2V0X2Vhcmx5X3Vuc2hh
ZG93KHN0cnVjdCB2Y3B1ICp2KQ0K

--_002_61965bbffc34d845b20ad6d8034bfb88susecom_
Content-Type: text/plain; name="x86-sh-HVM-decls.patch"
Content-Description: x86-sh-HVM-decls.patch
Content-Disposition: attachment; filename="x86-sh-HVM-decls.patch"; size=8540;
	creation-date="Fri, 05 Jul 2019 15:31:48 GMT";
	modification-date="Fri, 05 Jul 2019 15:31:48 GMT"
Content-ID: <B4AE139D8FCD304A8D8BBC2C0409B867@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

eDg2L3NoYWRvdzogZGl0Y2ggZGFuZ2Vyb3VzIGRlY2xhcmF0aW9ucwoKVGhpcyBzdGFydGVkIG91
dCB3aXRoIG1lIG5vdGljaW5nIHRoZSBsYXRlbnQgYnVnIG9mIHRoZXJlIGJlaW5nIEhWTQpyZWxh
dGVkIGRlY2xhcmF0aW9ucyBpbiBjb21tb24uYyB0aGF0IHRoZWlyIHByb2R1Y2VyIGRvZXNuJ3Qg
c2VlLCBhbmQKdGhhdCBoZW5jZSBjb3VsZCBnbyBvdXQgb2Ygc3luYyBhdCBhbnkgdGltZS4gSG93
ZXZlciwgZ28gZmFydGhlciB0aGFuCmZpeGluZyBqdXN0IHRoYXQgYW5kIG1vdmUgdGhlIGZ1bmN0
aW9ucyBhY3R1YWxseSB1c2luZyB0aGVzZSBpbnRvIGh2bS5jLgpUaGlzIHdheSB0aGUgaXRlbXMg
aW4gcXVlc3Rpb24gY2FuIHNpbXBseSBiZWNvbWUgc3RhdGljLCBhbmQgbm8gc2VwYXJhdGUKZGVj
bGFyYXRpb25zIGFyZSBuZWVkZWQgYXQgYWxsLgoKV2l0aGluIHRoZSBtb3ZlZCBjb2RlIGNvbnN0
aWZ5IGFuZCByZW5hbWUgb3Igb3V0cmlnaHQgZGVsZXRlIHRoZSBzdHJ1Y3QKdmNwdSAqIGxvY2Fs
IHZhcmlhYmxlcyBhbmQgcmUtZm9ybWF0IGEgY29tbWVudC4KClNpZ25lZC1vZmYtYnk6IEphbiBC
ZXVsaWNoIDxqYmV1bGljaEBzdXNlLmNvbT4KCi0tLSBhL3hlbi9hcmNoL3g4Ni9tbS9zaGFkb3cv
Y29tbW9uLmMKKysrIGIveGVuL2FyY2gveDg2L21tL3NoYWRvdy9jb21tb24uYwpAQCAtMTEyLDEw
NSArMTEyLDYgQEAgc3RhdGljIGludCBfX2luaXQgc2hhZG93X2F1ZGl0X2tleV9pbml0KAogX19p
bml0Y2FsbChzaGFkb3dfYXVkaXRfa2V5X2luaXQpOwogI2VuZGlmIC8qIFNIQURPV19BVURJVCAq
LwogCi0KLSNpZmRlZiBDT05GSUdfSFZNCi1leHRlcm4gY29uc3Qgc3RydWN0IHg4Nl9lbXVsYXRl
X29wcyBodm1fc2hhZG93X2VtdWxhdG9yX29wczsKLWV4dGVybiBzdHJ1Y3Qgc2VnbWVudF9yZWdp
c3RlciAqaHZtX2dldF9zZWdfcmVnKAotICAgIGVudW0geDg2X3NlZ21lbnQgc2VnLCBzdHJ1Y3Qg
c2hfZW11bGF0ZV9jdHh0ICpzaF9jdHh0KTsKLWV4dGVybiBpbnQgaHZtX3RyYW5zbGF0ZV92aXJ0
dWFsX2FkZHIoCi0gICAgZW51bSB4ODZfc2VnbWVudCBzZWcsCi0gICAgdW5zaWduZWQgbG9uZyBv
ZmZzZXQsCi0gICAgdW5zaWduZWQgaW50IGJ5dGVzLAotICAgIGVudW0gaHZtX2FjY2Vzc190eXBl
IGFjY2Vzc190eXBlLAotICAgIHN0cnVjdCBzaF9lbXVsYXRlX2N0eHQgKnNoX2N0eHQsCi0gICAg
dW5zaWduZWQgbG9uZyAqbGluZWFyKTsKLSNlbmRpZgotCi1jb25zdCBzdHJ1Y3QgeDg2X2VtdWxh
dGVfb3BzICpzaGFkb3dfaW5pdF9lbXVsYXRpb24oCi0gICAgc3RydWN0IHNoX2VtdWxhdGVfY3R4
dCAqc2hfY3R4dCwgc3RydWN0IGNwdV91c2VyX3JlZ3MgKnJlZ3MsCi0gICAgdW5zaWduZWQgaW50
IHB0ZV9zaXplKQotewotI2lmZGVmIENPTkZJR19IVk0KLSAgICBzdHJ1Y3Qgc2VnbWVudF9yZWdp
c3RlciAqY3JlZywgKnNyZWc7Ci0gICAgc3RydWN0IHZjcHUgKnYgPSBjdXJyZW50OwotICAgIHVu
c2lnbmVkIGxvbmcgYWRkcjsKLQotICAgIEFTU0VSVChpc19odm1fdmNwdSh2KSk7Ci0KLSAgICBt
ZW1zZXQoc2hfY3R4dCwgMCwgc2l6ZW9mKCpzaF9jdHh0KSk7Ci0KLSAgICBzaF9jdHh0LT5jdHh0
LnJlZ3MgPSByZWdzOwotICAgIHNoX2N0eHQtPmN0eHQuY3B1aWQgPSB2LT5kb21haW4tPmFyY2gu
Y3B1aWQ7Ci0gICAgc2hfY3R4dC0+Y3R4dC5sbWEgPSBodm1fbG9uZ19tb2RlX2FjdGl2ZSh2KTsK
LQotICAgIC8qIFNlZ21lbnQgY2FjaGUgaW5pdGlhbGlzYXRpb24uIFByaW1lZCB3aXRoIENTLiAq
LwotICAgIGNyZWcgPSBodm1fZ2V0X3NlZ19yZWcoeDg2X3NlZ19jcywgc2hfY3R4dCk7Ci0KLSAg
ICAvKiBXb3JrIG91dCB0aGUgZW11bGF0aW9uIG1vZGUuICovCi0gICAgaWYgKCBzaF9jdHh0LT5j
dHh0LmxtYSAmJiBjcmVnLT5sICkKLSAgICAgICAgc2hfY3R4dC0+Y3R4dC5hZGRyX3NpemUgPSBz
aF9jdHh0LT5jdHh0LnNwX3NpemUgPSA2NDsKLSAgICBlbHNlCi0gICAgewotICAgICAgICBzcmVn
ID0gaHZtX2dldF9zZWdfcmVnKHg4Nl9zZWdfc3MsIHNoX2N0eHQpOwotICAgICAgICBzaF9jdHh0
LT5jdHh0LmFkZHJfc2l6ZSA9IGNyZWctPmRiID8gMzIgOiAxNjsKLSAgICAgICAgc2hfY3R4dC0+
Y3R4dC5zcF9zaXplICAgPSBzcmVnLT5kYiA/IDMyIDogMTY7Ci0gICAgfQotCi0gICAgc2hfY3R4
dC0+cHRlX3NpemUgPSBwdGVfc2l6ZTsKLQotICAgIC8qIEF0dGVtcHQgdG8gcHJlZmV0Y2ggd2hv
bGUgaW5zdHJ1Y3Rpb24uICovCi0gICAgc2hfY3R4dC0+aW5zbl9idWZfZWlwID0gcmVncy0+cmlw
OwotICAgIHNoX2N0eHQtPmluc25fYnVmX2J5dGVzID0KLSAgICAgICAgKCFodm1fdHJhbnNsYXRl
X3ZpcnR1YWxfYWRkcigKLSAgICAgICAgICAgIHg4Nl9zZWdfY3MsIHJlZ3MtPnJpcCwgc2l6ZW9m
KHNoX2N0eHQtPmluc25fYnVmKSwKLSAgICAgICAgICAgIGh2bV9hY2Nlc3NfaW5zbl9mZXRjaCwg
c2hfY3R4dCwgJmFkZHIpICYmCi0gICAgICAgICAhaHZtX2NvcHlfZnJvbV9ndWVzdF9saW5lYXIo
Ci0gICAgICAgICAgICAgc2hfY3R4dC0+aW5zbl9idWYsIGFkZHIsIHNpemVvZihzaF9jdHh0LT5p
bnNuX2J1ZiksCi0gICAgICAgICAgICAgUEZFQ19pbnNuX2ZldGNoLCBOVUxMKSkKLSAgICAgICAg
PyBzaXplb2Yoc2hfY3R4dC0+aW5zbl9idWYpIDogMDsKLQotICAgIHJldHVybiAmaHZtX3NoYWRv
d19lbXVsYXRvcl9vcHM7Ci0jZWxzZQotICAgIEJVRygpOwotICAgIHJldHVybiBOVUxMOwotI2Vu
ZGlmCi19Ci0KLS8qIFVwZGF0ZSBhbiBpbml0aWFsaXplZCBlbXVsYXRpb24gY29udGV4dCB0byBw
cmVwYXJlIGZvciB0aGUgbmV4dAotICogaW5zdHJ1Y3Rpb24gKi8KLXZvaWQgc2hhZG93X2NvbnRp
bnVlX2VtdWxhdGlvbihzdHJ1Y3Qgc2hfZW11bGF0ZV9jdHh0ICpzaF9jdHh0LAotICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBjcHVfdXNlcl9yZWdzICpyZWdzKQotewotI2lm
ZGVmIENPTkZJR19IVk0KLSAgICBzdHJ1Y3QgdmNwdSAqdiA9IGN1cnJlbnQ7Ci0gICAgdW5zaWdu
ZWQgbG9uZyBhZGRyLCBkaWZmOwotCi0gICAgQVNTRVJUKGlzX2h2bV92Y3B1KHYpKTsKLQotICAg
IC8qCi0gICAgICogV2UgZG9uJ3QgcmVmZXRjaCB0aGUgc2VnbWVudCBiYXNlcywgYmVjYXVzZSB3
ZSBkb24ndCBlbXVsYXRlCi0gICAgICogd3JpdGVzIHRvIHNlZ21lbnQgcmVnaXN0ZXJzCi0gICAg
ICovCi0gICAgZGlmZiA9IHJlZ3MtPnJpcCAtIHNoX2N0eHQtPmluc25fYnVmX2VpcDsKLSAgICBp
ZiAoIGRpZmYgPiBzaF9jdHh0LT5pbnNuX2J1Zl9ieXRlcyApCi0gICAgewotICAgICAgICAvKiBQ
cmVmZXRjaCBtb3JlIGJ5dGVzLiAqLwotICAgICAgICBzaF9jdHh0LT5pbnNuX2J1Zl9ieXRlcyA9
Ci0gICAgICAgICAgICAoIWh2bV90cmFuc2xhdGVfdmlydHVhbF9hZGRyKAotICAgICAgICAgICAg
ICAgIHg4Nl9zZWdfY3MsIHJlZ3MtPnJpcCwgc2l6ZW9mKHNoX2N0eHQtPmluc25fYnVmKSwKLSAg
ICAgICAgICAgICAgICBodm1fYWNjZXNzX2luc25fZmV0Y2gsIHNoX2N0eHQsICZhZGRyKSAmJgot
ICAgICAgICAgICAgICFodm1fY29weV9mcm9tX2d1ZXN0X2xpbmVhcigKLSAgICAgICAgICAgICAg
ICAgc2hfY3R4dC0+aW5zbl9idWYsIGFkZHIsIHNpemVvZihzaF9jdHh0LT5pbnNuX2J1ZiksCi0g
ICAgICAgICAgICAgICAgIFBGRUNfaW5zbl9mZXRjaCwgTlVMTCkpCi0gICAgICAgICAgICA/IHNp
emVvZihzaF9jdHh0LT5pbnNuX2J1ZikgOiAwOwotICAgICAgICBzaF9jdHh0LT5pbnNuX2J1Zl9l
aXAgPSByZWdzLT5yaXA7Ci0gICAgfQotI2Vsc2UKLSAgICBCVUcoKTsKLSNlbmRpZgotfQotCi0K
ICNpZiAoU0hBRE9XX09QVElNSVpBVElPTlMgJiBTSE9QVF9PVVRfT0ZfU1lOQykKIC8qKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKi8KIC8qIE91dC1vZi1zeW5jIHNoYWRvd3MuICovCi0tLSBhL3hlbi9hcmNoL3g4
Ni9tbS9zaGFkb3cvaHZtLmMKKysrIGIveGVuL2FyY2gveDg2L21tL3NoYWRvdy9odm0uYwpAQCAt
NTQsNyArNTQsNyBAQCBzdGF0aWMgdm9pZCBzaF9lbXVsYXRlX3VubWFwX2Rlc3Qoc3RydWN0CiAg
KiBDYWxsZXJzIHdoaWNoIHBhc3MgYSBrbm93biBpbi1yYW5nZSB4ODZfc2VnbWVudCBjYW4gcmVs
eSBvbiB0aGUgcmV0dXJuCiAgKiBwb2ludGVyIGJlaW5nIHZhbGlkLiAgT3RoZXIgY2FsbGVycyBt
dXN0IGV4cGxpY2l0bHkgY2hlY2sgZm9yIGVycm9ycy4KICAqLwotc3RydWN0IHNlZ21lbnRfcmVn
aXN0ZXIgKmh2bV9nZXRfc2VnX3JlZygKK3N0YXRpYyBzdHJ1Y3Qgc2VnbWVudF9yZWdpc3RlciAq
aHZtX2dldF9zZWdfcmVnKAogICAgIGVudW0geDg2X3NlZ21lbnQgc2VnLCBzdHJ1Y3Qgc2hfZW11
bGF0ZV9jdHh0ICpzaF9jdHh0KQogewogICAgIHVuc2lnbmVkIGludCBpZHggPSBzZWc7CkBAIC02
OSw3ICs2OSw3IEBAIHN0cnVjdCBzZWdtZW50X3JlZ2lzdGVyICpodm1fZ2V0X3NlZ19yZWcKICAg
ICByZXR1cm4gc2VnX3JlZzsKIH0KIAotaW50IGh2bV90cmFuc2xhdGVfdmlydHVhbF9hZGRyKAor
c3RhdGljIGludCBodm1fdHJhbnNsYXRlX3ZpcnR1YWxfYWRkcigKICAgICBlbnVtIHg4Nl9zZWdt
ZW50IHNlZywKICAgICB1bnNpZ25lZCBsb25nIG9mZnNldCwKICAgICB1bnNpZ25lZCBpbnQgYnl0
ZXMsCkBAIC0yOTIsMTMgKzI5Miw4OSBAQCBodm1fZW11bGF0ZV9jbXB4Y2hnKGVudW0geDg2X3Nl
Z21lbnQgc2VnCiAgICAgcmV0dXJuIHJjOwogfQogCi1jb25zdCBzdHJ1Y3QgeDg2X2VtdWxhdGVf
b3BzIGh2bV9zaGFkb3dfZW11bGF0b3Jfb3BzID0geworc3RhdGljIGNvbnN0IHN0cnVjdCB4ODZf
ZW11bGF0ZV9vcHMgaHZtX3NoYWRvd19lbXVsYXRvcl9vcHMgPSB7CiAgICAgLnJlYWQgICAgICAg
PSBodm1fZW11bGF0ZV9yZWFkLAogICAgIC5pbnNuX2ZldGNoID0gaHZtX2VtdWxhdGVfaW5zbl9m
ZXRjaCwKICAgICAud3JpdGUgICAgICA9IGh2bV9lbXVsYXRlX3dyaXRlLAogICAgIC5jbXB4Y2hn
ICAgID0gaHZtX2VtdWxhdGVfY21weGNoZywKIH07CiAKK2NvbnN0IHN0cnVjdCB4ODZfZW11bGF0
ZV9vcHMgKnNoYWRvd19pbml0X2VtdWxhdGlvbigKKyAgICBzdHJ1Y3Qgc2hfZW11bGF0ZV9jdHh0
ICpzaF9jdHh0LCBzdHJ1Y3QgY3B1X3VzZXJfcmVncyAqcmVncywKKyAgICB1bnNpZ25lZCBpbnQg
cHRlX3NpemUpCit7CisgICAgc3RydWN0IHNlZ21lbnRfcmVnaXN0ZXIgKmNyZWcsICpzcmVnOwor
ICAgIGNvbnN0IHN0cnVjdCB2Y3B1ICpjdXJyID0gY3VycmVudDsKKyAgICB1bnNpZ25lZCBsb25n
IGFkZHI7CisKKyAgICBBU1NFUlQoaXNfaHZtX3ZjcHUoY3VycikpOworCisgICAgbWVtc2V0KHNo
X2N0eHQsIDAsIHNpemVvZigqc2hfY3R4dCkpOworCisgICAgc2hfY3R4dC0+Y3R4dC5yZWdzID0g
cmVnczsKKyAgICBzaF9jdHh0LT5jdHh0LmNwdWlkID0gY3Vyci0+ZG9tYWluLT5hcmNoLmNwdWlk
OworICAgIHNoX2N0eHQtPmN0eHQubG1hID0gaHZtX2xvbmdfbW9kZV9hY3RpdmUoY3Vycik7CisK
KyAgICAvKiBTZWdtZW50IGNhY2hlIGluaXRpYWxpc2F0aW9uLiBQcmltZWQgd2l0aCBDUy4gKi8K
KyAgICBjcmVnID0gaHZtX2dldF9zZWdfcmVnKHg4Nl9zZWdfY3MsIHNoX2N0eHQpOworCisgICAg
LyogV29yayBvdXQgdGhlIGVtdWxhdGlvbiBtb2RlLiAqLworICAgIGlmICggc2hfY3R4dC0+Y3R4
dC5sbWEgJiYgY3JlZy0+bCApCisgICAgICAgIHNoX2N0eHQtPmN0eHQuYWRkcl9zaXplID0gc2hf
Y3R4dC0+Y3R4dC5zcF9zaXplID0gNjQ7CisgICAgZWxzZQorICAgIHsKKyAgICAgICAgc3JlZyA9
IGh2bV9nZXRfc2VnX3JlZyh4ODZfc2VnX3NzLCBzaF9jdHh0KTsKKyAgICAgICAgc2hfY3R4dC0+
Y3R4dC5hZGRyX3NpemUgPSBjcmVnLT5kYiA/IDMyIDogMTY7CisgICAgICAgIHNoX2N0eHQtPmN0
eHQuc3Bfc2l6ZSAgID0gc3JlZy0+ZGIgPyAzMiA6IDE2OworICAgIH0KKworICAgIHNoX2N0eHQt
PnB0ZV9zaXplID0gcHRlX3NpemU7CisKKyAgICAvKiBBdHRlbXB0IHRvIHByZWZldGNoIHdob2xl
IGluc3RydWN0aW9uLiAqLworICAgIHNoX2N0eHQtPmluc25fYnVmX2VpcCA9IHJlZ3MtPnJpcDsK
KyAgICBzaF9jdHh0LT5pbnNuX2J1Zl9ieXRlcyA9CisgICAgICAgICghaHZtX3RyYW5zbGF0ZV92
aXJ0dWFsX2FkZHIoCisgICAgICAgICAgICB4ODZfc2VnX2NzLCByZWdzLT5yaXAsIHNpemVvZihz
aF9jdHh0LT5pbnNuX2J1ZiksCisgICAgICAgICAgICBodm1fYWNjZXNzX2luc25fZmV0Y2gsIHNo
X2N0eHQsICZhZGRyKSAmJgorICAgICAgICAgIWh2bV9jb3B5X2Zyb21fZ3Vlc3RfbGluZWFyKAor
ICAgICAgICAgICAgIHNoX2N0eHQtPmluc25fYnVmLCBhZGRyLCBzaXplb2Yoc2hfY3R4dC0+aW5z
bl9idWYpLAorICAgICAgICAgICAgIFBGRUNfaW5zbl9mZXRjaCwgTlVMTCkpCisgICAgICAgID8g
c2l6ZW9mKHNoX2N0eHQtPmluc25fYnVmKSA6IDA7CisKKyAgICByZXR1cm4gJmh2bV9zaGFkb3df
ZW11bGF0b3Jfb3BzOworfQorCisvKgorICogVXBkYXRlIGFuIGluaXRpYWxpemVkIGVtdWxhdGlv
biBjb250ZXh0IHRvIHByZXBhcmUgZm9yIHRoZSBuZXh0CisgKiBpbnN0cnVjdGlvbi4KKyAqLwor
dm9pZCBzaGFkb3dfY29udGludWVfZW11bGF0aW9uKHN0cnVjdCBzaF9lbXVsYXRlX2N0eHQgKnNo
X2N0eHQsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGNwdV91c2VyX3Jl
Z3MgKnJlZ3MpCit7CisgICAgdW5zaWduZWQgbG9uZyBhZGRyLCBkaWZmOworCisgICAgQVNTRVJU
KGlzX2h2bV92Y3B1KGN1cnJlbnQpKTsKKworICAgIC8qCisgICAgICogV2UgZG9uJ3QgcmVmZXRj
aCB0aGUgc2VnbWVudCBiYXNlcywgYmVjYXVzZSB3ZSBkb24ndCBlbXVsYXRlCisgICAgICogd3Jp
dGVzIHRvIHNlZ21lbnQgcmVnaXN0ZXJzCisgICAgICovCisgICAgZGlmZiA9IHJlZ3MtPnJpcCAt
IHNoX2N0eHQtPmluc25fYnVmX2VpcDsKKyAgICBpZiAoIGRpZmYgPiBzaF9jdHh0LT5pbnNuX2J1
Zl9ieXRlcyApCisgICAgeworICAgICAgICAvKiBQcmVmZXRjaCBtb3JlIGJ5dGVzLiAqLworICAg
ICAgICBzaF9jdHh0LT5pbnNuX2J1Zl9ieXRlcyA9CisgICAgICAgICAgICAoIWh2bV90cmFuc2xh
dGVfdmlydHVhbF9hZGRyKAorICAgICAgICAgICAgICAgIHg4Nl9zZWdfY3MsIHJlZ3MtPnJpcCwg
c2l6ZW9mKHNoX2N0eHQtPmluc25fYnVmKSwKKyAgICAgICAgICAgICAgICBodm1fYWNjZXNzX2lu
c25fZmV0Y2gsIHNoX2N0eHQsICZhZGRyKSAmJgorICAgICAgICAgICAgICFodm1fY29weV9mcm9t
X2d1ZXN0X2xpbmVhcigKKyAgICAgICAgICAgICAgICAgc2hfY3R4dC0+aW5zbl9idWYsIGFkZHIs
IHNpemVvZihzaF9jdHh0LT5pbnNuX2J1ZiksCisgICAgICAgICAgICAgICAgIFBGRUNfaW5zbl9m
ZXRjaCwgTlVMTCkpCisgICAgICAgICAgICA/IHNpemVvZihzaF9jdHh0LT5pbnNuX2J1ZikgOiAw
OworICAgICAgICBzaF9jdHh0LT5pbnNuX2J1Zl9laXAgPSByZWdzLT5yaXA7CisgICAgfQorfQor
CiAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKiovCiAvKiBIYW5kbGluZyBndWVzdCB3cml0ZXMgdG8gcGFnZXRh
Ymxlcy4gKi8KIAotLS0gYS94ZW4vYXJjaC94ODYvbW0vc2hhZG93L3ByaXZhdGUuaAorKysgYi94
ZW4vYXJjaC94ODYvbW0vc2hhZG93L3ByaXZhdGUuaApAQCAtNzA5LDExICs3MDksMjYgQEAgc3Ry
dWN0IHNoX2VtdWxhdGVfY3R4dCB7CiAjZW5kaWYKIH07CiAKKyNpZmRlZiBDT05GSUdfSFZNCiBj
b25zdCBzdHJ1Y3QgeDg2X2VtdWxhdGVfb3BzICpzaGFkb3dfaW5pdF9lbXVsYXRpb24oCiAgICAg
c3RydWN0IHNoX2VtdWxhdGVfY3R4dCAqc2hfY3R4dCwgc3RydWN0IGNwdV91c2VyX3JlZ3MgKnJl
Z3MsCiAgICAgdW5zaWduZWQgaW50IHB0ZV9zaXplKTsKIHZvaWQgc2hhZG93X2NvbnRpbnVlX2Vt
dWxhdGlvbigKICAgICBzdHJ1Y3Qgc2hfZW11bGF0ZV9jdHh0ICpzaF9jdHh0LCBzdHJ1Y3QgY3B1
X3VzZXJfcmVncyAqcmVncyk7CisjZWxzZQorc3RhdGljIGlubGluZSBjb25zdCBzdHJ1Y3QgeDg2
X2VtdWxhdGVfb3BzICpzaGFkb3dfaW5pdF9lbXVsYXRpb24oCisgICAgc3RydWN0IHNoX2VtdWxh
dGVfY3R4dCAqc2hfY3R4dCwgc3RydWN0IGNwdV91c2VyX3JlZ3MgKnJlZ3MsCisgICAgdW5zaWdu
ZWQgaW50IHB0ZV9zaXplKQoreworICAgIEJVRygpOworICAgIHJldHVybiBOVUxMOworfQorc3Rh
dGljIGlubGluZSB2b2lkIHNoYWRvd19jb250aW51ZV9lbXVsYXRpb24oCisgICAgc3RydWN0IHNo
X2VtdWxhdGVfY3R4dCAqc2hfY3R4dCwgc3RydWN0IGNwdV91c2VyX3JlZ3MgKnJlZ3MpCit7Cisg
ICAgQlVHKCk7Cit9CisjZW5kaWYKIAogLyogU3RvcCBjb3VudGluZyB0b3dhcmRzIGVhcmx5IHVu
c2hhZG93cywgYXMgd2UndmUgc2VlbiBhIHJlYWwgcGFnZSBmYXVsdCAqLwogc3RhdGljIGlubGlu
ZSB2b2lkIHNoX3Jlc2V0X2Vhcmx5X3Vuc2hhZG93KHN0cnVjdCB2Y3B1ICp2KQo=

--_002_61965bbffc34d845b20ad6d8034bfb88susecom_
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: base64
Content-Disposition: inline

X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVs
IG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0
cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

--_002_61965bbffc34d845b20ad6d8034bfb88susecom_--


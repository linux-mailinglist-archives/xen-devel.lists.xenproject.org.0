Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 702C41773E9
	for <lists+xen-devel@lfdr.de>; Tue,  3 Mar 2020 11:21:42 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j94eL-000133-1u; Tue, 03 Mar 2020 10:19:41 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=TLdZ=4U=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1j94eJ-00012w-Vy
 for xen-devel@lists.xenproject.org; Tue, 03 Mar 2020 10:19:40 +0000
X-Inumbo-ID: 7d291892-5d38-11ea-a0dd-12813bfff9fa
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 7d291892-5d38-11ea-a0dd-12813bfff9fa;
 Tue, 03 Mar 2020 10:19:39 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id 7B0A6AC44;
 Tue,  3 Mar 2020 10:19:38 +0000 (UTC)
From: Jan Beulich <jbeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
References: <1e1ccd2a-526c-631b-7889-35f993b2005e@suse.com>
Message-ID: <93366e9e-1afb-296d-6280-5d375869410e@suse.com>
Date: Tue, 3 Mar 2020 11:19:38 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.5.0
MIME-Version: 1.0
In-Reply-To: <1e1ccd2a-526c-631b-7889-35f993b2005e@suse.com>
Content-Language: en-US
Subject: [Xen-devel] [PATCH v5 4/4] x86/HVM: __hvm_copy()'s size parameter
 is an unsigned quantity
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>, Wei Liu <wl@xen.org>,
 Paul Durrant <paul@xen.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlcmUgYXJlIG5vIG5lZ2F0aXZlIHNpemVzLiBNYWtlIHRoZSBmdW5jdGlvbidzIHBhcmFtZXRl
ciBhcyB3ZWxsIGFzCnRoYXQgb2YgaXRzIGRlcml2YXRlcyAidW5zaWduZWQgaW50Ii4gU2ltaWxh
cmx5IG1ha2UgaXRzIGxvY2FsICJjb3VudCIKdmFyaWFibGUgInVuc2lnbmVkIGludCIsIGFuZCBk
cm9wICJ0b2RvIiBhbHRvZ2V0aGVyLiBEb24ndCB1c2UgbWluX3QoKQphbnltb3JlIHRvIGNhbGN1
bGF0ZSAiY291bnQiLiBSZXN0cmljdCBpdHMgc2NvcGUgYXMgd2VsbCBhcyB0aGF0IG9mCm90aGVy
IGxvY2FsIHZhcmlhYmxlcyBvZiB0aGUgZnVuY3Rpb24uCgpXaGlsZSBhdCBpdCBJJ3ZlIGFsc28g
bm90aWNlZCB0aGF0IHtjb3B5X3tmcm9tLHRvfSxjbGVhcn1fdXNlcl9odm0oKQpoYXZlIGJlZW4g
cmV0dXJuaW5nICJ1bnNpZ25lZCBsb25nIiBmb3Igbm8gYXBwYXJlbnQgcmVhc29uLCBhcyB0aGVp
cgpyZXNwZWN0aXZlICJzaXplIiBwYXJhbWV0ZXJzIGhhdmUgYWxyZWFkeSBiZWVuICJ1bnNpZ25l
ZCBpbnQiLiBBZGp1c3QKdGhpcyBhcyB3ZWxsIGFzIGEgc2xpZ2h0bHkgd3JvbmcgY29tbWVudCB0
aGVyZSBhdCB0aGUgc2FtZSB0aW1lLgoKU2lnbmVkLW9mZi1ieTogSmFuIEJldWxpY2ggPGpiZXVs
aWNoQHN1c2UuY29tPgotLS0KdjU6IE5ldy4KCi0tLSBhL3hlbi9hcmNoL3g4Ni9odm0vaHZtLmMK
KysrIGIveGVuL2FyY2gveDg2L2h2bS9odm0uYwpAQCAtMzI0OSwxNCArMzI0OSw5IEBAIGVudW0g
aHZtX3RyYW5zbGF0aW9uX3Jlc3VsdCBodm1fdHJhbnNsYXQKICNkZWZpbmUgSFZNQ09QWV9waHlz
ICAgICAgICgwdTw8MikKICNkZWZpbmUgSFZNQ09QWV9saW5lYXIgICAgICgxdTw8MikKIHN0YXRp
YyBlbnVtIGh2bV90cmFuc2xhdGlvbl9yZXN1bHQgX19odm1fY29weSgKLSAgICB2b2lkICpidWYs
IHBhZGRyX3QgYWRkciwgaW50IHNpemUsIHN0cnVjdCB2Y3B1ICp2LCB1bnNpZ25lZCBpbnQgZmxh
Z3MsCisgICAgdm9pZCAqYnVmLCBwYWRkcl90IGFkZHIsIHVuc2lnbmVkIGludCBzaXplLCBzdHJ1
Y3QgdmNwdSAqdiwgdW5zaWduZWQgaW50IGZsYWdzLAogICAgIHVpbnQzMl90IHBmZWMsIHBhZ2Vm
YXVsdF9pbmZvX3QgKnBmaW5mbykKIHsKLSAgICBnZm5fdCBnZm47Ci0gICAgc3RydWN0IHBhZ2Vf
aW5mbyAqcGFnZTsKLSAgICBwMm1fdHlwZV90IHAybXQ7Ci0gICAgaW50IGNvdW50LCB0b2RvID0g
c2l6ZTsKLQogICAgIEFTU0VSVChpc19odm1fdmNwdSh2KSk7CiAKICAgICAvKgpAQCAtMzI3NSwx
MiArMzI3MCwxNCBAQCBzdGF0aWMgZW51bSBodm1fdHJhbnNsYXRpb25fcmVzdWx0IF9faHZtCiAg
ICAgICAgIHJldHVybiBIVk1UUkFOU191bmhhbmRsZWFibGU7CiAjZW5kaWYKIAotICAgIHdoaWxl
ICggdG9kbyA+IDAgKQorICAgIHdoaWxlICggc2l6ZSA+IDAgKQogICAgIHsKKyAgICAgICAgc3Ry
dWN0IHBhZ2VfaW5mbyAqcGFnZTsKKyAgICAgICAgZ2ZuX3QgZ2ZuOworICAgICAgICBwMm1fdHlw
ZV90IHAybXQ7CiAgICAgICAgIGVudW0gaHZtX3RyYW5zbGF0aW9uX3Jlc3VsdCByZXM7CiAgICAg
ICAgIHVuc2lnbmVkIGludCBwZ29mZiA9IGFkZHIgJiB+UEFHRV9NQVNLOwotCi0gICAgICAgIGNv
dW50ID0gbWluX3QoaW50LCBQQUdFX1NJWkUgLSBwZ29mZiwgdG9kbyk7CisgICAgICAgIHVuc2ln
bmVkIGludCBjb3VudCA9IG1pbigodW5zaWduZWQgaW50KVBBR0VfU0laRSAtIHBnb2ZmLCBzaXpl
KTsKIAogICAgICAgICByZXMgPSBodm1fdHJhbnNsYXRlX2dldF9wYWdlKHYsIGFkZHIsIGZsYWdz
ICYgSFZNQ09QWV9saW5lYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
cGZlYywgcGZpbmZvLCAmcGFnZSwgJmdmbiwgJnAybXQpOwpAQCAtMzMzNiw3ICszMzMzLDcgQEAg
c3RhdGljIGVudW0gaHZtX3RyYW5zbGF0aW9uX3Jlc3VsdCBfX2h2bQogICAgICAgICBhZGRyICs9
IGNvdW50OwogICAgICAgICBpZiAoIGJ1ZiApCiAgICAgICAgICAgICBidWYgKz0gY291bnQ7Ci0g
ICAgICAgIHRvZG8gLT0gY291bnQ7CisgICAgICAgIHNpemUgLT0gY291bnQ7CiAgICAgICAgIHB1
dF9wYWdlKHBhZ2UpOwogICAgIH0KIApAQCAtMzM0NCwyMSArMzM0MSwyMSBAQCBzdGF0aWMgZW51
bSBodm1fdHJhbnNsYXRpb25fcmVzdWx0IF9faHZtCiB9CiAKIGVudW0gaHZtX3RyYW5zbGF0aW9u
X3Jlc3VsdCBodm1fY29weV90b19ndWVzdF9waHlzKAotICAgIHBhZGRyX3QgcGFkZHIsIHZvaWQg
KmJ1ZiwgaW50IHNpemUsIHN0cnVjdCB2Y3B1ICp2KQorICAgIHBhZGRyX3QgcGFkZHIsIHZvaWQg
KmJ1ZiwgdW5zaWduZWQgaW50IHNpemUsIHN0cnVjdCB2Y3B1ICp2KQogewogICAgIHJldHVybiBf
X2h2bV9jb3B5KGJ1ZiwgcGFkZHIsIHNpemUsIHYsCiAgICAgICAgICAgICAgICAgICAgICAgSFZN
Q09QWV90b19ndWVzdCB8IEhWTUNPUFlfcGh5cywgMCwgTlVMTCk7CiB9CiAKIGVudW0gaHZtX3Ry
YW5zbGF0aW9uX3Jlc3VsdCBodm1fY29weV9mcm9tX2d1ZXN0X3BoeXMoCi0gICAgdm9pZCAqYnVm
LCBwYWRkcl90IHBhZGRyLCBpbnQgc2l6ZSkKKyAgICB2b2lkICpidWYsIHBhZGRyX3QgcGFkZHIs
IHVuc2lnbmVkIGludCBzaXplKQogewogICAgIHJldHVybiBfX2h2bV9jb3B5KGJ1ZiwgcGFkZHIs
IHNpemUsIGN1cnJlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgSFZNQ09QWV9mcm9tX2d1ZXN0
IHwgSFZNQ09QWV9waHlzLCAwLCBOVUxMKTsKIH0KIAogZW51bSBodm1fdHJhbnNsYXRpb25fcmVz
dWx0IGh2bV9jb3B5X3RvX2d1ZXN0X2xpbmVhcigKLSAgICB1bnNpZ25lZCBsb25nIGFkZHIsIHZv
aWQgKmJ1ZiwgaW50IHNpemUsIHVpbnQzMl90IHBmZWMsCisgICAgdW5zaWduZWQgbG9uZyBhZGRy
LCB2b2lkICpidWYsIHVuc2lnbmVkIGludCBzaXplLCB1aW50MzJfdCBwZmVjLAogICAgIHBhZ2Vm
YXVsdF9pbmZvX3QgKnBmaW5mbykKIHsKICAgICByZXR1cm4gX19odm1fY29weShidWYsIGFkZHIs
IHNpemUsIGN1cnJlbnQsCkBAIC0zMzY3LDcgKzMzNjQsNyBAQCBlbnVtIGh2bV90cmFuc2xhdGlv
bl9yZXN1bHQgaHZtX2NvcHlfdG9fCiB9CiAKIGVudW0gaHZtX3RyYW5zbGF0aW9uX3Jlc3VsdCBo
dm1fY29weV9mcm9tX2d1ZXN0X2xpbmVhcigKLSAgICB2b2lkICpidWYsIHVuc2lnbmVkIGxvbmcg
YWRkciwgaW50IHNpemUsIHVpbnQzMl90IHBmZWMsCisgICAgdm9pZCAqYnVmLCB1bnNpZ25lZCBs
b25nIGFkZHIsIHVuc2lnbmVkIGludCBzaXplLCB1aW50MzJfdCBwZmVjLAogICAgIHBhZ2VmYXVs
dF9pbmZvX3QgKnBmaW5mbykKIHsKICAgICByZXR1cm4gX19odm1fY29weShidWYsIGFkZHIsIHNp
emUsIGN1cnJlbnQsCkBAIC0zMzc1LDcgKzMzNzIsNyBAQCBlbnVtIGh2bV90cmFuc2xhdGlvbl9y
ZXN1bHQgaHZtX2NvcHlfZnJvCiAgICAgICAgICAgICAgICAgICAgICAgUEZFQ19wYWdlX3ByZXNl
bnQgfCBwZmVjLCBwZmluZm8pOwogfQogCi11bnNpZ25lZCBsb25nIGNvcHlfdG9fdXNlcl9odm0o
dm9pZCAqdG8sIGNvbnN0IHZvaWQgKmZyb20sIHVuc2lnbmVkIGludCBsZW4pCit1bnNpZ25lZCBp
bnQgY29weV90b191c2VyX2h2bSh2b2lkICp0bywgY29uc3Qgdm9pZCAqZnJvbSwgdW5zaWduZWQg
aW50IGxlbikKIHsKICAgICBpbnQgcmM7CiAKQEAgLTMzODksNyArMzM4Niw3IEBAIHVuc2lnbmVk
IGxvbmcgY29weV90b191c2VyX2h2bSh2b2lkICp0bywKICAgICByZXR1cm4gcmMgPyBsZW4gOiAw
OyAvKiBmYWtlIGEgY29weV90b191c2VyKCkgcmV0dXJuIGNvZGUgKi8KIH0KIAotdW5zaWduZWQg
bG9uZyBjbGVhcl91c2VyX2h2bSh2b2lkICp0bywgdW5zaWduZWQgaW50IGxlbikKK3Vuc2lnbmVk
IGludCBjbGVhcl91c2VyX2h2bSh2b2lkICp0bywgdW5zaWduZWQgaW50IGxlbikKIHsKICAgICBp
bnQgcmM7CiAKQEAgLTM0MDAsMTAgKzMzOTcsMTEgQEAgdW5zaWduZWQgbG9uZyBjbGVhcl91c2Vy
X2h2bSh2b2lkICp0bywgdQogICAgIH0KIAogICAgIHJjID0gaHZtX2NvcHlfdG9fZ3Vlc3RfbGlu
ZWFyKCh1bnNpZ25lZCBsb25nKXRvLCBOVUxMLCBsZW4sIDAsIE5VTEwpOwotICAgIHJldHVybiBy
YyA/IGxlbiA6IDA7IC8qIGZha2UgYSBjb3B5X3RvX3VzZXIoKSByZXR1cm4gY29kZSAqLworCisg
ICAgcmV0dXJuIHJjID8gbGVuIDogMDsgLyogZmFrZSBhIGNsZWFyX3VzZXIoKSByZXR1cm4gY29k
ZSAqLwogfQogCi11bnNpZ25lZCBsb25nIGNvcHlfZnJvbV91c2VyX2h2bSh2b2lkICp0bywgY29u
c3Qgdm9pZCAqZnJvbSwgdW5zaWduZWQgbGVuKQordW5zaWduZWQgaW50IGNvcHlfZnJvbV91c2Vy
X2h2bSh2b2lkICp0bywgY29uc3Qgdm9pZCAqZnJvbSwgdW5zaWduZWQgaW50IGxlbikKIHsKICAg
ICBpbnQgcmM7CiAKLS0tIGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9odm0vZ3Vlc3RfYWNjZXNzLmgK
KysrIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9odm0vZ3Vlc3RfYWNjZXNzLmgKQEAgLTEsOCArMSw4
IEBACiAjaWZuZGVmIF9fQVNNX1g4Nl9IVk1fR1VFU1RfQUNDRVNTX0hfXwogI2RlZmluZSBfX0FT
TV9YODZfSFZNX0dVRVNUX0FDQ0VTU19IX18KIAotdW5zaWduZWQgbG9uZyBjb3B5X3RvX3VzZXJf
aHZtKHZvaWQgKnRvLCBjb25zdCB2b2lkICpmcm9tLCB1bnNpZ25lZCBsZW4pOwotdW5zaWduZWQg
bG9uZyBjbGVhcl91c2VyX2h2bSh2b2lkICp0bywgdW5zaWduZWQgaW50IGxlbik7Ci11bnNpZ25l
ZCBsb25nIGNvcHlfZnJvbV91c2VyX2h2bSh2b2lkICp0bywgY29uc3Qgdm9pZCAqZnJvbSwgdW5z
aWduZWQgbGVuKTsKK3Vuc2lnbmVkIGludCBjb3B5X3RvX3VzZXJfaHZtKHZvaWQgKnRvLCBjb25z
dCB2b2lkICpmcm9tLCB1bnNpZ25lZCBpbnQgbGVuKTsKK3Vuc2lnbmVkIGludCBjbGVhcl91c2Vy
X2h2bSh2b2lkICp0bywgdW5zaWduZWQgaW50IGxlbik7Cit1bnNpZ25lZCBpbnQgY29weV9mcm9t
X3VzZXJfaHZtKHZvaWQgKnRvLCBjb25zdCB2b2lkICpmcm9tLCB1bnNpZ25lZCBpbnQgbGVuKTsK
IAogI2VuZGlmIC8qIF9fQVNNX1g4Nl9IVk1fR1VFU1RfQUNDRVNTX0hfXyAqLwotLS0gYS94ZW4v
aW5jbHVkZS9hc20teDg2L2h2bS9zdXBwb3J0LmgKKysrIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9o
dm0vc3VwcG9ydC5oCkBAIC03MCw5ICs3MCw5IEBAIGVudW0gaHZtX3RyYW5zbGF0aW9uX3Jlc3Vs
dCB7CiAgKiBhZGRyZXNzIHJhbmdlIGRvZXMgbm90IG1hcCBlbnRpcmVseSBvbnRvIG9yZGluYXJ5
IG1hY2hpbmUgbWVtb3J5LgogICovCiBlbnVtIGh2bV90cmFuc2xhdGlvbl9yZXN1bHQgaHZtX2Nv
cHlfdG9fZ3Vlc3RfcGh5cygKLSAgICBwYWRkcl90IHBhZGRyLCB2b2lkICpidWYsIGludCBzaXpl
LCBzdHJ1Y3QgdmNwdSAqdik7CisgICAgcGFkZHJfdCBwYWRkciwgdm9pZCAqYnVmLCB1bnNpZ25l
ZCBpbnQgc2l6ZSwgc3RydWN0IHZjcHUgKnYpOwogZW51bSBodm1fdHJhbnNsYXRpb25fcmVzdWx0
IGh2bV9jb3B5X2Zyb21fZ3Vlc3RfcGh5cygKLSAgICB2b2lkICpidWYsIHBhZGRyX3QgcGFkZHIs
IGludCBzaXplKTsKKyAgICB2b2lkICpidWYsIHBhZGRyX3QgcGFkZHIsIHVuc2lnbmVkIGludCBz
aXplKTsKIAogLyoKICAqIENvcHkgdG8vZnJvbSBhIGd1ZXN0IGxpbmVhciBhZGRyZXNzLiBAcGZl
YyBzaG91bGQgaW5jbHVkZSBQRkVDX3VzZXJfbW9kZQpAQCAtOTYsMTAgKzk2LDEwIEBAIHR5cGVk
ZWYgc3RydWN0IHBhZ2VmYXVsdF9pbmZvCiB9IHBhZ2VmYXVsdF9pbmZvX3Q7CiAKIGVudW0gaHZt
X3RyYW5zbGF0aW9uX3Jlc3VsdCBodm1fY29weV90b19ndWVzdF9saW5lYXIoCi0gICAgdW5zaWdu
ZWQgbG9uZyBhZGRyLCB2b2lkICpidWYsIGludCBzaXplLCB1aW50MzJfdCBwZmVjLAorICAgIHVu
c2lnbmVkIGxvbmcgYWRkciwgdm9pZCAqYnVmLCB1bnNpZ25lZCBpbnQgc2l6ZSwgdWludDMyX3Qg
cGZlYywKICAgICBwYWdlZmF1bHRfaW5mb190ICpwZmluZm8pOwogZW51bSBodm1fdHJhbnNsYXRp
b25fcmVzdWx0IGh2bV9jb3B5X2Zyb21fZ3Vlc3RfbGluZWFyKAotICAgIHZvaWQgKmJ1ZiwgdW5z
aWduZWQgbG9uZyBhZGRyLCBpbnQgc2l6ZSwgdWludDMyX3QgcGZlYywKKyAgICB2b2lkICpidWYs
IHVuc2lnbmVkIGxvbmcgYWRkciwgdW5zaWduZWQgaW50IHNpemUsIHVpbnQzMl90IHBmZWMsCiAg
ICAgcGFnZWZhdWx0X2luZm9fdCAqcGZpbmZvKTsKIAogLyoKCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1k
ZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21h
aWxtYW4vbGlzdGluZm8veGVuLWRldmVs

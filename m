Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 18912124091
	for <lists+xen-devel@lfdr.de>; Wed, 18 Dec 2019 08:51:58 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ihU59-0003g2-8n; Wed, 18 Dec 2019 07:49:19 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=NgR6=2I=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1ihU57-0003fl-HJ
 for xen-devel@lists.xenproject.org; Wed, 18 Dec 2019 07:49:17 +0000
X-Inumbo-ID: dba022a0-216a-11ea-9041-12813bfff9fa
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id dba022a0-216a-11ea-9041-12813bfff9fa;
 Wed, 18 Dec 2019 07:49:04 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id 62ED1AC71;
 Wed, 18 Dec 2019 07:49:03 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Wed, 18 Dec 2019 08:48:52 +0100
Message-Id: <20191218074859.21665-3-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20191218074859.21665-1-jgross@suse.com>
References: <20191218074859.21665-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH 2/9] xen/sched: make sched-if.h really scheduler
 private
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Dario Faggioli <dfaggioli@suse.com>,
 Josh Whitehead <josh.whitehead@dornerworks.com>,
 Meng Xu <mengxu@cis.upenn.edu>, Jan Beulich <jbeulich@suse.com>,
 Stewart Hildebrand <stewart.hildebrand@dornerworks.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

aW5jbHVkZS94ZW4vc2NoZWQtaWYuaCBzaG91bGQgYmUgcHJpdmF0ZSB0byBzY2hlZHVsZXIgY29k
ZSwgc28gbW92ZSBpdAp0byBjb21tb24vc2NoZWQvc2NoZWQtaWYuaCBhbmQgbW92ZSB0aGUgcmVt
YWluaW5nIHVzZSBjYXNlcyB0bwpjcHVwb29sLmMgYW5kIHNjaGVkdWxlLmMuCgpTaWduZWQtb2Zm
LWJ5OiBKdWVyZ2VuIEdyb3NzIDxqZ3Jvc3NAc3VzZS5jb20+Ci0tLQogeGVuL2FyY2gveDg2L2Rv
bTBfYnVpbGQuYyAgICAgICAgICAgICAgICAgICAgfCAgIDUgKy0KIHhlbi9jb21tb24vZG9tYWlu
LmMgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDcwIC0tLS0tLS0tLS0KIHhlbi9jb21tb24v
ZG9tY3RsLmMgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMTM1ICstLS0tLS0tLS0tLS0tLS0t
LS0KIHhlbi9jb21tb24vc2NoZWQvY3B1cG9vbC5jICAgICAgICAgICAgICAgICAgIHwgIDEzICst
CiB4ZW4ve2luY2x1ZGUveGVuID0+IGNvbW1vbi9zY2hlZH0vc2NoZWQtaWYuaCB8ICAgMyAtCiB4
ZW4vY29tbW9uL3NjaGVkL3NjaGVkX2FyaW5jNjUzLmMgICAgICAgICAgICB8ICAgMyArLQogeGVu
L2NvbW1vbi9zY2hlZC9zY2hlZF9jcmVkaXQuYyAgICAgICAgICAgICAgfCAgIDIgKy0KIHhlbi9j
b21tb24vc2NoZWQvc2NoZWRfY3JlZGl0Mi5jICAgICAgICAgICAgIHwgICAzICstCiB4ZW4vY29t
bW9uL3NjaGVkL3NjaGVkX251bGwuYyAgICAgICAgICAgICAgICB8ICAgMyArLQogeGVuL2NvbW1v
bi9zY2hlZC9zY2hlZF9ydC5jICAgICAgICAgICAgICAgICAgfCAgIDMgKy0KIHhlbi9jb21tb24v
c2NoZWQvc2NoZWR1bGUuYyAgICAgICAgICAgICAgICAgIHwgMTkxICsrKysrKysrKysrKysrKysr
KysrKysrKysrLQogeGVuL2luY2x1ZGUveGVuL2RvbWFpbi5oICAgICAgICAgICAgICAgICAgICAg
fCAgIDMgKwogeGVuL2luY2x1ZGUveGVuL3NjaGVkLmggICAgICAgICAgICAgICAgICAgICAgfCAg
IDcgKwogMTMgZmlsZXMgY2hhbmdlZCwgMjI4IGluc2VydGlvbnMoKyksIDIxMyBkZWxldGlvbnMo
LSkKIHJlbmFtZSB4ZW4ve2luY2x1ZGUveGVuID0+IGNvbW1vbi9zY2hlZH0vc2NoZWQtaWYuaCAo
OTklKQoKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9kb20wX2J1aWxkLmMgYi94ZW4vYXJjaC94
ODYvZG9tMF9idWlsZC5jCmluZGV4IDI4Yjk2NGUwMTguLjU2YzJkZWUwZmMgMTAwNjQ0Ci0tLSBh
L3hlbi9hcmNoL3g4Ni9kb20wX2J1aWxkLmMKKysrIGIveGVuL2FyY2gveDg2L2RvbTBfYnVpbGQu
YwpAQCAtOSw3ICs5LDYgQEAKICNpbmNsdWRlIDx4ZW4vbGliZWxmLmg+CiAjaW5jbHVkZSA8eGVu
L3Bmbi5oPgogI2luY2x1ZGUgPHhlbi9zY2hlZC5oPgotI2luY2x1ZGUgPHhlbi9zY2hlZC1pZi5o
PgogI2luY2x1ZGUgPHhlbi9zb2Z0aXJxLmg+CiAKICNpbmNsdWRlIDxhc20vYW1kLmg+CkBAIC0y
MjcsOSArMjI2LDkgQEAgdW5zaWduZWQgaW50IF9faW5pdCBkb20wX21heF92Y3B1cyh2b2lkKQog
ICAgICAgICBkb20wX25vZGVzID0gbm9kZV9vbmxpbmVfbWFwOwogICAgIGZvcl9lYWNoX25vZGVf
bWFzayAoIG5vZGUsIGRvbTBfbm9kZXMgKQogICAgICAgICBjcHVtYXNrX29yKCZkb20wX2NwdXMs
ICZkb20wX2NwdXMsICZub2RlX3RvX2NwdW1hc2sobm9kZSkpOwotICAgIGNwdW1hc2tfYW5kKCZk
b20wX2NwdXMsICZkb20wX2NwdXMsIGNwdXBvb2wwLT5jcHVfdmFsaWQpOworICAgIGNwdW1hc2tf
YW5kKCZkb20wX2NwdXMsICZkb20wX2NwdXMsIGNwdXBvb2xfdmFsaWRfY3B1cyhjcHVwb29sMCkp
OwogICAgIGlmICggY3B1bWFza19lbXB0eSgmZG9tMF9jcHVzKSApCi0gICAgICAgIGNwdW1hc2tf
Y29weSgmZG9tMF9jcHVzLCBjcHVwb29sMC0+Y3B1X3ZhbGlkKTsKKyAgICAgICAgY3B1bWFza19j
b3B5KCZkb20wX2NwdXMsIGNwdXBvb2xfdmFsaWRfY3B1cyhjcHVwb29sMCkpOwogCiAgICAgbWF4
X3ZjcHVzID0gY3B1bWFza193ZWlnaHQoJmRvbTBfY3B1cyk7CiAgICAgaWYgKCBvcHRfZG9tMF9t
YXhfdmNwdXNfbWluID4gbWF4X3ZjcHVzICkKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vZG9tYWlu
LmMgYi94ZW4vY29tbW9uL2RvbWFpbi5jCmluZGV4IDYxMTExNmM3ZmMuLmY0ZjBhNjYyNjIgMTAw
NjQ0Ci0tLSBhL3hlbi9jb21tb24vZG9tYWluLmMKKysrIGIveGVuL2NvbW1vbi9kb21haW4uYwpA
QCAtMTAsNyArMTAsNiBAQAogI2luY2x1ZGUgPHhlbi9jdHlwZS5oPgogI2luY2x1ZGUgPHhlbi9l
cnIuaD4KICNpbmNsdWRlIDx4ZW4vc2NoZWQuaD4KLSNpbmNsdWRlIDx4ZW4vc2NoZWQtaWYuaD4K
ICNpbmNsdWRlIDx4ZW4vZG9tYWluLmg+CiAjaW5jbHVkZSA8eGVuL21tLmg+CiAjaW5jbHVkZSA8
eGVuL2V2ZW50Lmg+CkBAIC01NjUsNzUgKzU2NCw2IEBAIHZvaWQgX19pbml0IHNldHVwX3N5c3Rl
bV9kb21haW5zKHZvaWQpCiAjZW5kaWYKIH0KIAotdm9pZCBkb21haW5fdXBkYXRlX25vZGVfYWZm
aW5pdHkoc3RydWN0IGRvbWFpbiAqZCkKLXsKLSAgICBjcHVtYXNrX3Zhcl90IGRvbV9jcHVtYXNr
LCBkb21fY3B1bWFza19zb2Z0OwotICAgIGNwdW1hc2tfdCAqZG9tX2FmZmluaXR5OwotICAgIGNv
bnN0IGNwdW1hc2tfdCAqb25saW5lOwotICAgIHN0cnVjdCBzY2hlZF91bml0ICp1bml0OwotICAg
IHVuc2lnbmVkIGludCBjcHU7Ci0KLSAgICAvKiBEbyB3ZSBoYXZlIHZjcHVzIGFscmVhZHk/IElm
IG5vdCwgbm8gbmVlZCB0byB1cGRhdGUgbm9kZS1hZmZpbml0eS4gKi8KLSAgICBpZiAoICFkLT52
Y3B1IHx8ICFkLT52Y3B1WzBdICkKLSAgICAgICAgcmV0dXJuOwotCi0gICAgaWYgKCAhemFsbG9j
X2NwdW1hc2tfdmFyKCZkb21fY3B1bWFzaykgKQotICAgICAgICByZXR1cm47Ci0gICAgaWYgKCAh
emFsbG9jX2NwdW1hc2tfdmFyKCZkb21fY3B1bWFza19zb2Z0KSApCi0gICAgewotICAgICAgICBm
cmVlX2NwdW1hc2tfdmFyKGRvbV9jcHVtYXNrKTsKLSAgICAgICAgcmV0dXJuOwotICAgIH0KLQot
ICAgIG9ubGluZSA9IGNwdXBvb2xfZG9tYWluX21hc3Rlcl9jcHVtYXNrKGQpOwotCi0gICAgc3Bp
bl9sb2NrKCZkLT5ub2RlX2FmZmluaXR5X2xvY2spOwotCi0gICAgLyoKLSAgICAgKiBJZiBkLT5h
dXRvX25vZGVfYWZmaW5pdHkgaXMgdHJ1ZSwgbGV0J3MgY29tcHV0ZSB0aGUgZG9tYWluJ3MKLSAg
ICAgKiBub2RlLWFmZmluaXR5IGFuZCB1cGRhdGUgZC0+bm9kZV9hZmZpbml0eSBhY2NvcmRpbmds
eS4gaWYgZmFsc2UsCi0gICAgICoganVzdCBsZWF2ZSBkLT5hdXRvX25vZGVfYWZmaW5pdHkgYWxv
bmUuCi0gICAgICovCi0gICAgaWYgKCBkLT5hdXRvX25vZGVfYWZmaW5pdHkgKQotICAgIHsKLSAg
ICAgICAgLyoKLSAgICAgICAgICogV2Ugd2FudCB0aGUgbmFycm93ZXN0IHBvc3NpYmxlIHNldCBv
ZiBwY3B1cyAodG8gZ2V0IHRoZSBuYXJvd2VzdAotICAgICAgICAgKiBwb3NzaWJsZSBzZXQgb2Yg
bm9kZXMpLiBXaGF0IHdlIG5lZWQgaXMgdGhlIGNwdW1hc2sgb2Ygd2hlcmUgdGhlCi0gICAgICAg
ICAqIGRvbWFpbiBjYW4gcnVuICh0aGUgdW5pb24gb2YgdGhlIGhhcmQgYWZmaW5pdHkgb2YgYWxs
IGl0cyB2Y3B1cyksCi0gICAgICAgICAqIGFuZCB0aGUgZnVsbCBtYXNrIG9mIHdoZXJlIGl0IHdv
dWxkIHByZWZlciB0byBydW4gKHRoZSB1bmlvbiBvZgotICAgICAgICAgKiB0aGUgc29mdCBhZmZp
bml0eSBvZiBhbGwgaXRzIHZhcmlvdXMgdmNwdXMpLiBMZXQncyBidWlsZCB0aGVtLgotICAgICAg
ICAgKi8KLSAgICAgICAgZm9yX2VhY2hfc2NoZWRfdW5pdCAoIGQsIHVuaXQgKQotICAgICAgICB7
Ci0gICAgICAgICAgICBjcHVtYXNrX29yKGRvbV9jcHVtYXNrLCBkb21fY3B1bWFzaywgdW5pdC0+
Y3B1X2hhcmRfYWZmaW5pdHkpOwotICAgICAgICAgICAgY3B1bWFza19vcihkb21fY3B1bWFza19z
b2Z0LCBkb21fY3B1bWFza19zb2Z0LAotICAgICAgICAgICAgICAgICAgICAgICB1bml0LT5jcHVf
c29mdF9hZmZpbml0eSk7Ci0gICAgICAgIH0KLSAgICAgICAgLyogRmlsdGVyIG91dCBub24tb25s
aW5lIGNwdXMgKi8KLSAgICAgICAgY3B1bWFza19hbmQoZG9tX2NwdW1hc2ssIGRvbV9jcHVtYXNr
LCBvbmxpbmUpOwotICAgICAgICBBU1NFUlQoIWNwdW1hc2tfZW1wdHkoZG9tX2NwdW1hc2spKTsK
LSAgICAgICAgLyogQW5kIGNvbXB1dGUgdGhlIGludGVyc2VjdGlvbiBiZXR3ZWVuIGhhcmQsIG9u
bGluZSBhbmQgc29mdCAqLwotICAgICAgICBjcHVtYXNrX2FuZChkb21fY3B1bWFza19zb2Z0LCBk
b21fY3B1bWFza19zb2Z0LCBkb21fY3B1bWFzayk7Ci0KLSAgICAgICAgLyoKLSAgICAgICAgICog
SWYgbm90IGVtcHR5LCB0aGUgaW50ZXJzZWN0aW9uIG9mIGhhcmQsIHNvZnQgYW5kIG9ubGluZSBp
cyB0aGUKLSAgICAgICAgICogbmFycm93ZXN0IHNldCB3ZSB3YW50LiBJZiBlbXB0eSwgd2UgZmFs
bCBiYWNrIHRvIGhhcmQmb25saW5lLgotICAgICAgICAgKi8KLSAgICAgICAgZG9tX2FmZmluaXR5
ID0gY3B1bWFza19lbXB0eShkb21fY3B1bWFza19zb2Z0KSA/Ci0gICAgICAgICAgICAgICAgICAg
ICAgICAgICBkb21fY3B1bWFzayA6IGRvbV9jcHVtYXNrX3NvZnQ7Ci0KLSAgICAgICAgbm9kZXNf
Y2xlYXIoZC0+bm9kZV9hZmZpbml0eSk7Ci0gICAgICAgIGZvcl9lYWNoX2NwdSAoIGNwdSwgZG9t
X2FmZmluaXR5ICkKLSAgICAgICAgICAgIG5vZGVfc2V0KGNwdV90b19ub2RlKGNwdSksIGQtPm5v
ZGVfYWZmaW5pdHkpOwotICAgIH0KLQotICAgIHNwaW5fdW5sb2NrKCZkLT5ub2RlX2FmZmluaXR5
X2xvY2spOwotCi0gICAgZnJlZV9jcHVtYXNrX3Zhcihkb21fY3B1bWFza19zb2Z0KTsKLSAgICBm
cmVlX2NwdW1hc2tfdmFyKGRvbV9jcHVtYXNrKTsKLX0KLQotCiBpbnQgZG9tYWluX3NldF9ub2Rl
X2FmZmluaXR5KHN0cnVjdCBkb21haW4gKmQsIGNvbnN0IG5vZGVtYXNrX3QgKmFmZmluaXR5KQog
ewogICAgIC8qIEJlaW5nIGRpc2pvaW50IHdpdGggdGhlIHN5c3RlbSBpcyBqdXN0IHdyb25nLiAq
LwpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9kb21jdGwuYyBiL3hlbi9jb21tb24vZG9tY3RsLmMK
aW5kZXggMDNkMDIyNjAzOS4uMzQwN2RiNDRmZCAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9kb21j
dGwuYworKysgYi94ZW4vY29tbW9uL2RvbWN0bC5jCkBAIC0xMSw3ICsxMSw2IEBACiAjaW5jbHVk
ZSA8eGVuL2Vyci5oPgogI2luY2x1ZGUgPHhlbi9tbS5oPgogI2luY2x1ZGUgPHhlbi9zY2hlZC5o
PgotI2luY2x1ZGUgPHhlbi9zY2hlZC1pZi5oPgogI2luY2x1ZGUgPHhlbi9kb21haW4uaD4KICNp
bmNsdWRlIDx4ZW4vZXZlbnQuaD4KICNpbmNsdWRlIDx4ZW4vZ3JhbnRfdGFibGUuaD4KQEAgLTY1
LDkgKzY0LDkgQEAgc3RhdGljIGludCBiaXRtYXBfdG9feGVuY3RsX2JpdG1hcChzdHJ1Y3QgeGVu
Y3RsX2JpdG1hcCAqeGVuY3RsX2JpdG1hcCwKICAgICByZXR1cm4gZXJyOwogfQogCi1zdGF0aWMg
aW50IHhlbmN0bF9iaXRtYXBfdG9fYml0bWFwKHVuc2lnbmVkIGxvbmcgKmJpdG1hcCwKLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IHhlbmN0bF9iaXRtYXAg
KnhlbmN0bF9iaXRtYXAsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2ln
bmVkIGludCBuYml0cykKK2ludCB4ZW5jdGxfYml0bWFwX3RvX2JpdG1hcCh1bnNpZ25lZCBsb25n
ICpiaXRtYXAsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IHhlbmN0
bF9iaXRtYXAgKnhlbmN0bF9iaXRtYXAsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5z
aWduZWQgaW50IG5iaXRzKQogewogICAgIHVuc2lnbmVkIGludCBndWVzdF9ieXRlcywgY29weV9i
eXRlczsKICAgICBpbnQgZXJyID0gMDsKQEAgLTIwMCw3ICsxOTksNyBAQCB2b2lkIGdldGRvbWFp
bmluZm8oc3RydWN0IGRvbWFpbiAqZCwgc3RydWN0IHhlbl9kb21jdGxfZ2V0ZG9tYWluaW5mbyAq
aW5mbykKICAgICBpbmZvLT5zaGFyZWRfaW5mb19mcmFtZSA9IG1mbl90b19nbWZuKGQsIHZpcnRf
dG9fbWZuKGQtPnNoYXJlZF9pbmZvKSk7CiAgICAgQlVHX09OKFNIQVJFRF9NMlAoaW5mby0+c2hh
cmVkX2luZm9fZnJhbWUpKTsKIAotICAgIGluZm8tPmNwdXBvb2wgPSBkLT5jcHVwb29sID8gZC0+
Y3B1cG9vbC0+Y3B1cG9vbF9pZCA6IENQVVBPT0xJRF9OT05FOworICAgIGluZm8tPmNwdXBvb2wg
PSBjcHVwb29sX2dldF9pZChkKTsKIAogICAgIG1lbWNweShpbmZvLT5oYW5kbGUsIGQtPmhhbmRs
ZSwgc2l6ZW9mKHhlbl9kb21haW5faGFuZGxlX3QpKTsKIApAQCAtMjM0LDE2ICsyMzMsNiBAQCB2
b2lkIGRvbWN0bF9sb2NrX3JlbGVhc2Uodm9pZCkKICAgICBzcGluX3VubG9jaygmY3VycmVudC0+
ZG9tYWluLT5oeXBlcmNhbGxfZGVhZGxvY2tfbXV0ZXgpOwogfQogCi1zdGF0aWMgaW5saW5lCi1p
bnQgdmNwdWFmZmluaXR5X3BhcmFtc19pbnZhbGlkKGNvbnN0IHN0cnVjdCB4ZW5fZG9tY3RsX3Zj
cHVhZmZpbml0eSAqdmNwdWFmZikKLXsKLSAgICByZXR1cm4gdmNwdWFmZi0+ZmxhZ3MgPT0gMCB8
fAotICAgICAgICAgICAoKHZjcHVhZmYtPmZsYWdzICYgWEVOX1ZDUFVBRkZJTklUWV9IQVJEKSAm
JgotICAgICAgICAgICAgZ3Vlc3RfaGFuZGxlX2lzX251bGwodmNwdWFmZi0+Y3B1bWFwX2hhcmQu
Yml0bWFwKSkgfHwKLSAgICAgICAgICAgKCh2Y3B1YWZmLT5mbGFncyAmIFhFTl9WQ1BVQUZGSU5J
VFlfU09GVCkgJiYKLSAgICAgICAgICAgIGd1ZXN0X2hhbmRsZV9pc19udWxsKHZjcHVhZmYtPmNw
dW1hcF9zb2Z0LmJpdG1hcCkpOwotfQotCiB2b2lkIHZudW1hX2Rlc3Ryb3koc3RydWN0IHZudW1h
X2luZm8gKnZudW1hKQogewogICAgIGlmICggdm51bWEgKQpAQCAtNjA4LDEyMiArNTk3LDggQEAg
bG9uZyBkb19kb21jdGwoWEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh4ZW5fZG9tY3RsX3QpIHVfZG9t
Y3RsKQogCiAgICAgY2FzZSBYRU5fRE9NQ1RMX3NldHZjcHVhZmZpbml0eToKICAgICBjYXNlIFhF
Tl9ET01DVExfZ2V0dmNwdWFmZmluaXR5OgotICAgIHsKLSAgICAgICAgc3RydWN0IHZjcHUgKnY7
Ci0gICAgICAgIGNvbnN0IHN0cnVjdCBzY2hlZF91bml0ICp1bml0OwotICAgICAgICBzdHJ1Y3Qg
eGVuX2RvbWN0bF92Y3B1YWZmaW5pdHkgKnZjcHVhZmYgPSAmb3AtPnUudmNwdWFmZmluaXR5Owot
Ci0gICAgICAgIHJldCA9IC1FSU5WQUw7Ci0gICAgICAgIGlmICggdmNwdWFmZi0+dmNwdSA+PSBk
LT5tYXhfdmNwdXMgKQotICAgICAgICAgICAgYnJlYWs7Ci0KLSAgICAgICAgcmV0ID0gLUVTUkNI
OwotICAgICAgICBpZiAoICh2ID0gZC0+dmNwdVt2Y3B1YWZmLT52Y3B1XSkgPT0gTlVMTCApCi0g
ICAgICAgICAgICBicmVhazsKLQotICAgICAgICB1bml0ID0gdi0+c2NoZWRfdW5pdDsKLSAgICAg
ICAgcmV0ID0gLUVJTlZBTDsKLSAgICAgICAgaWYgKCB2Y3B1YWZmaW5pdHlfcGFyYW1zX2ludmFs
aWQodmNwdWFmZikgKQotICAgICAgICAgICAgYnJlYWs7Ci0KLSAgICAgICAgaWYgKCBvcC0+Y21k
ID09IFhFTl9ET01DVExfc2V0dmNwdWFmZmluaXR5ICkKLSAgICAgICAgewotICAgICAgICAgICAg
Y3B1bWFza192YXJfdCBuZXdfYWZmaW5pdHksIG9sZF9hZmZpbml0eTsKLSAgICAgICAgICAgIGNw
dW1hc2tfdCAqb25saW5lID0gY3B1cG9vbF9kb21haW5fbWFzdGVyX2NwdW1hc2sodi0+ZG9tYWlu
KTsKLQotICAgICAgICAgICAgLyoKLSAgICAgICAgICAgICAqIFdlIHdhbnQgdG8gYmUgYWJsZSB0
byByZXN0b3JlIGhhcmQgYWZmaW5pdHkgaWYgd2UgYXJlIHRyeWluZwotICAgICAgICAgICAgICog
c2V0dGluZyBib3RoIGFuZCBjaGFuZ2luZyBzb2Z0IGFmZmluaXR5ICh3aGljaCBoYXBwZW5zIGxh
dGVyLAotICAgICAgICAgICAgICogd2hlbiBoYXJkIGFmZmluaXR5IGhhcyBiZWVuIHN1Y2Nlc2Z1
bGx5IGNoYWdlZCBhbHJlYWR5KSBmYWlscy4KLSAgICAgICAgICAgICAqLwotICAgICAgICAgICAg
aWYgKCAhYWxsb2NfY3B1bWFza192YXIoJm9sZF9hZmZpbml0eSkgKQotICAgICAgICAgICAgewot
ICAgICAgICAgICAgICAgIHJldCA9IC1FTk9NRU07Ci0gICAgICAgICAgICAgICAgYnJlYWs7Ci0g
ICAgICAgICAgICB9Ci0gICAgICAgICAgICBjcHVtYXNrX2NvcHkob2xkX2FmZmluaXR5LCB1bml0
LT5jcHVfaGFyZF9hZmZpbml0eSk7Ci0KLSAgICAgICAgICAgIGlmICggIWFsbG9jX2NwdW1hc2tf
dmFyKCZuZXdfYWZmaW5pdHkpICkKLSAgICAgICAgICAgIHsKLSAgICAgICAgICAgICAgICBmcmVl
X2NwdW1hc2tfdmFyKG9sZF9hZmZpbml0eSk7Ci0gICAgICAgICAgICAgICAgcmV0ID0gLUVOT01F
TTsKLSAgICAgICAgICAgICAgICBicmVhazsKLSAgICAgICAgICAgIH0KLQotICAgICAgICAgICAg
LyogVW5kbyBhIHN0dWNrIFNDSEVEX3Bpbl9vdmVycmlkZT8gKi8KLSAgICAgICAgICAgIGlmICgg
dmNwdWFmZi0+ZmxhZ3MgJiBYRU5fVkNQVUFGRklOSVRZX0ZPUkNFICkKLSAgICAgICAgICAgICAg
ICB2Y3B1X3RlbXBvcmFyeV9hZmZpbml0eSh2LCBOUl9DUFVTLCBWQ1BVX0FGRklOSVRZX09WRVJS
SURFKTsKLQotICAgICAgICAgICAgcmV0ID0gMDsKLQotICAgICAgICAgICAgLyoKLSAgICAgICAg
ICAgICAqIFdlIGJvdGggc2V0IGEgbmV3IGFmZmluaXR5IGFuZCByZXBvcnQgYmFjayB0byB0aGUg
Y2FsbGVyIHdoYXQKLSAgICAgICAgICAgICAqIHRoZSBzY2hlZHVsZXIgd2lsbCBiZSBlZmZlY3Rp
dmVseSB1c2luZy4KLSAgICAgICAgICAgICAqLwotICAgICAgICAgICAgaWYgKCB2Y3B1YWZmLT5m
bGFncyAmIFhFTl9WQ1BVQUZGSU5JVFlfSEFSRCApCi0gICAgICAgICAgICB7Ci0gICAgICAgICAg
ICAgICAgcmV0ID0geGVuY3RsX2JpdG1hcF90b19iaXRtYXAoY3B1bWFza19iaXRzKG5ld19hZmZp
bml0eSksCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnZj
cHVhZmYtPmNwdW1hcF9oYXJkLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG5yX2NwdV9pZHMpOwotICAgICAgICAgICAgICAgIGlmICggIXJldCApCi0gICAg
ICAgICAgICAgICAgICAgIHJldCA9IHZjcHVfc2V0X2hhcmRfYWZmaW5pdHkodiwgbmV3X2FmZmlu
aXR5KTsKLSAgICAgICAgICAgICAgICBpZiAoIHJldCApCi0gICAgICAgICAgICAgICAgICAgIGdv
dG8gc2V0dmNwdWFmZmluaXR5X291dDsKLQotICAgICAgICAgICAgICAgIC8qCi0gICAgICAgICAg
ICAgICAgICogRm9yIGhhcmQgYWZmaW5pdHksIHdoYXQgd2UgcmV0dXJuIGlzIHRoZSBpbnRlcnNl
Y3Rpb24gb2YKLSAgICAgICAgICAgICAgICAgKiBjcHVwb29sJ3Mgb25saW5lIG1hc2sgYW5kIHRo
ZSBuZXcgaGFyZCBhZmZpbml0eS4KLSAgICAgICAgICAgICAgICAgKi8KLSAgICAgICAgICAgICAg
ICBjcHVtYXNrX2FuZChuZXdfYWZmaW5pdHksIG9ubGluZSwgdW5pdC0+Y3B1X2hhcmRfYWZmaW5p
dHkpOwotICAgICAgICAgICAgICAgIHJldCA9IGNwdW1hc2tfdG9feGVuY3RsX2JpdG1hcCgmdmNw
dWFmZi0+Y3B1bWFwX2hhcmQsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG5ld19hZmZpbml0eSk7Ci0gICAgICAgICAgICB9Ci0gICAgICAgICAgICBpZiAo
IHZjcHVhZmYtPmZsYWdzICYgWEVOX1ZDUFVBRkZJTklUWV9TT0ZUICkKLSAgICAgICAgICAgIHsK
LSAgICAgICAgICAgICAgICByZXQgPSB4ZW5jdGxfYml0bWFwX3RvX2JpdG1hcChjcHVtYXNrX2Jp
dHMobmV3X2FmZmluaXR5KSwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAmdmNwdWFmZi0+Y3B1bWFwX3NvZnQsCi0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgbnJfY3B1X2lkcyk7Ci0gICAgICAgICAgICAgICAgaWYgKCAh
cmV0KQotICAgICAgICAgICAgICAgICAgICByZXQgPSB2Y3B1X3NldF9zb2Z0X2FmZmluaXR5KHYs
IG5ld19hZmZpbml0eSk7Ci0gICAgICAgICAgICAgICAgaWYgKCByZXQgKQotICAgICAgICAgICAg
ICAgIHsKLSAgICAgICAgICAgICAgICAgICAgLyoKLSAgICAgICAgICAgICAgICAgICAgICogU2lu
Y2Ugd2UncmUgcmV0dXJuaW5nIGVycm9yLCB0aGUgY2FsbGVyIGV4cGVjdHMgbm90aGluZwotICAg
ICAgICAgICAgICAgICAgICAgKiBoYXBwZW5lZCwgc28gd2Ugcm9sbGJhY2sgdGhlIGNoYW5nZXMg
dG8gaGFyZCBhZmZpbml0eQotICAgICAgICAgICAgICAgICAgICAgKiAoaWYgYW55KS4KLSAgICAg
ICAgICAgICAgICAgICAgICovCi0gICAgICAgICAgICAgICAgICAgIGlmICggdmNwdWFmZi0+Zmxh
Z3MgJiBYRU5fVkNQVUFGRklOSVRZX0hBUkQgKQotICAgICAgICAgICAgICAgICAgICAgICAgdmNw
dV9zZXRfaGFyZF9hZmZpbml0eSh2LCBvbGRfYWZmaW5pdHkpOwotICAgICAgICAgICAgICAgICAg
ICBnb3RvIHNldHZjcHVhZmZpbml0eV9vdXQ7Ci0gICAgICAgICAgICAgICAgfQotCi0gICAgICAg
ICAgICAgICAgLyoKLSAgICAgICAgICAgICAgICAgKiBGb3Igc29mdCBhZmZpbml0eSwgd2UgcmV0
dXJuIHRoZSBpbnRlcnNlY3Rpb24gYmV0d2VlbiB0aGUKLSAgICAgICAgICAgICAgICAgKiBuZXcg
c29mdCBhZmZpbml0eSwgdGhlIGNwdXBvb2wncyBvbmxpbmUgbWFwIGFuZCB0aGUgKG5ldykKLSAg
ICAgICAgICAgICAgICAgKiBoYXJkIGFmZmluaXR5LgotICAgICAgICAgICAgICAgICAqLwotICAg
ICAgICAgICAgICAgIGNwdW1hc2tfYW5kKG5ld19hZmZpbml0eSwgbmV3X2FmZmluaXR5LCBvbmxp
bmUpOwotICAgICAgICAgICAgICAgIGNwdW1hc2tfYW5kKG5ld19hZmZpbml0eSwgbmV3X2FmZmlu
aXR5LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQtPmNwdV9oYXJkX2FmZmluaXR5
KTsKLSAgICAgICAgICAgICAgICByZXQgPSBjcHVtYXNrX3RvX3hlbmN0bF9iaXRtYXAoJnZjcHVh
ZmYtPmNwdW1hcF9zb2Z0LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBuZXdfYWZmaW5pdHkpOwotICAgICAgICAgICAgfQotCi0gc2V0dmNwdWFmZmluaXR5
X291dDoKLSAgICAgICAgICAgIGZyZWVfY3B1bWFza192YXIobmV3X2FmZmluaXR5KTsKLSAgICAg
ICAgICAgIGZyZWVfY3B1bWFza192YXIob2xkX2FmZmluaXR5KTsKLSAgICAgICAgfQotICAgICAg
ICBlbHNlCi0gICAgICAgIHsKLSAgICAgICAgICAgIGlmICggdmNwdWFmZi0+ZmxhZ3MgJiBYRU5f
VkNQVUFGRklOSVRZX0hBUkQgKQotICAgICAgICAgICAgICAgIHJldCA9IGNwdW1hc2tfdG9feGVu
Y3RsX2JpdG1hcCgmdmNwdWFmZi0+Y3B1bWFwX2hhcmQsCi0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQtPmNwdV9oYXJkX2FmZmluaXR5KTsKLSAgICAg
ICAgICAgIGlmICggdmNwdWFmZi0+ZmxhZ3MgJiBYRU5fVkNQVUFGRklOSVRZX1NPRlQgKQotICAg
ICAgICAgICAgICAgIHJldCA9IGNwdW1hc2tfdG9feGVuY3RsX2JpdG1hcCgmdmNwdWFmZi0+Y3B1
bWFwX3NvZnQsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHVuaXQtPmNwdV9zb2Z0X2FmZmluaXR5KTsKLSAgICAgICAgfQorICAgICAgICByZXQgPSB2Y3B1
X2FmZmluaXR5X2RvbWN0bChkLCBvcC0+Y21kLCAmb3AtPnUudmNwdWFmZmluaXR5KTsKICAgICAg
ICAgYnJlYWs7Ci0gICAgfQogCiAgICAgY2FzZSBYRU5fRE9NQ1RMX3NjaGVkdWxlcl9vcDoKICAg
ICAgICAgcmV0ID0gc2NoZWRfYWRqdXN0KGQsICZvcC0+dS5zY2hlZHVsZXJfb3ApOwpkaWZmIC0t
Z2l0IGEveGVuL2NvbW1vbi9zY2hlZC9jcHVwb29sLmMgYi94ZW4vY29tbW9uL3NjaGVkL2NwdXBv
b2wuYwppbmRleCA0ZDNhZGJkZDhkLi5kNWI2NGQwYTZhIDEwMDY0NAotLS0gYS94ZW4vY29tbW9u
L3NjaGVkL2NwdXBvb2wuYworKysgYi94ZW4vY29tbW9uL3NjaGVkL2NwdXBvb2wuYwpAQCAtMTYs
MTEgKzE2LDEyIEBACiAjaW5jbHVkZSA8eGVuL2NwdW1hc2suaD4KICNpbmNsdWRlIDx4ZW4vcGVy
Y3B1Lmg+CiAjaW5jbHVkZSA8eGVuL3NjaGVkLmg+Ci0jaW5jbHVkZSA8eGVuL3NjaGVkLWlmLmg+
CiAjaW5jbHVkZSA8eGVuL3dhcm5pbmcuaD4KICNpbmNsdWRlIDx4ZW4va2V5aGFuZGxlci5oPgog
I2luY2x1ZGUgPHhlbi9jcHUuaD4KIAorI2luY2x1ZGUgInNjaGVkLWlmLmgiCisKICNkZWZpbmUg
Zm9yX2VhY2hfY3B1cG9vbChwdHIpICAgIFwKICAgICBmb3IgKChwdHIpID0gJmNwdXBvb2xfbGlz
dDsgKihwdHIpICE9IE5VTEw7IChwdHIpID0gJigoKihwdHIpKS0+bmV4dCkpCiAKQEAgLTg3Niw2
ICs4NzcsMTYgQEAgaW50IGNwdXBvb2xfZG9fc3lzY3RsKHN0cnVjdCB4ZW5fc3lzY3RsX2NwdXBv
b2xfb3AgKm9wKQogICAgIHJldHVybiByZXQ7CiB9CiAKK2ludCBjcHVwb29sX2dldF9pZChjb25z
dCBzdHJ1Y3QgZG9tYWluICpkKQoreworICAgIHJldHVybiBkLT5jcHVwb29sID8gZC0+Y3B1cG9v
bC0+Y3B1cG9vbF9pZCA6IENQVVBPT0xJRF9OT05FOworfQorCitjcHVtYXNrX3QgKmNwdXBvb2xf
dmFsaWRfY3B1cyhzdHJ1Y3QgY3B1cG9vbCAqcG9vbCkKK3sKKyAgICByZXR1cm4gcG9vbC0+Y3B1
X3ZhbGlkOworfQorCiB2b2lkIGR1bXBfcnVucSh1bnNpZ25lZCBjaGFyIGtleSkKIHsKICAgICB1
bnNpZ25lZCBsb25nICAgIGZsYWdzOwpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL3NjaGVk
LWlmLmggYi94ZW4vY29tbW9uL3NjaGVkL3NjaGVkLWlmLmgKc2ltaWxhcml0eSBpbmRleCA5OSUK
cmVuYW1lIGZyb20geGVuL2luY2x1ZGUveGVuL3NjaGVkLWlmLmgKcmVuYW1lIHRvIHhlbi9jb21t
b24vc2NoZWQvc2NoZWQtaWYuaAppbmRleCBiMGFjNTRlNjNkLi5hNzAyZmQyM2IxIDEwMDY0NAot
LS0gYS94ZW4vaW5jbHVkZS94ZW4vc2NoZWQtaWYuaAorKysgYi94ZW4vY29tbW9uL3NjaGVkL3Nj
aGVkLWlmLmgKQEAgLTEyLDkgKzEyLDYgQEAKICNpbmNsdWRlIDx4ZW4vZXJyLmg+CiAjaW5jbHVk
ZSA8eGVuL3JjdXBkYXRlLmg+CiAKLS8qIEEgZ2xvYmFsIHBvaW50ZXIgdG8gdGhlIGluaXRpYWwg
Y3B1cG9vbCAoUE9PTDApLiAqLwotZXh0ZXJuIHN0cnVjdCBjcHVwb29sICpjcHVwb29sMDsKLQog
LyogY3B1cyBjdXJyZW50bHkgaW4gbm8gY3B1cG9vbCAqLwogZXh0ZXJuIGNwdW1hc2tfdCBjcHVw
b29sX2ZyZWVfY3B1czsKIApkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZC9zY2hlZF9hcmlu
YzY1My5jIGIveGVuL2NvbW1vbi9zY2hlZC9zY2hlZF9hcmluYzY1My5jCmluZGV4IDU2NTU3NWMz
MjYuLmZlMTU3NTQ5MDAgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vc2NoZWQvc2NoZWRfYXJpbmM2
NTMuYworKysgYi94ZW4vY29tbW9uL3NjaGVkL3NjaGVkX2FyaW5jNjUzLmMKQEAgLTI2LDcgKzI2
LDYgQEAKIAogI2luY2x1ZGUgPHhlbi9saWIuaD4KICNpbmNsdWRlIDx4ZW4vc2NoZWQuaD4KLSNp
bmNsdWRlIDx4ZW4vc2NoZWQtaWYuaD4KICNpbmNsdWRlIDx4ZW4vdGltZXIuaD4KICNpbmNsdWRl
IDx4ZW4vc29mdGlycS5oPgogI2luY2x1ZGUgPHhlbi90aW1lLmg+CkBAIC0zNSw2ICszNCw4IEBA
CiAjaW5jbHVkZSA8eGVuL2d1ZXN0X2FjY2Vzcy5oPgogI2luY2x1ZGUgPHB1YmxpYy9zeXNjdGwu
aD4KIAorI2luY2x1ZGUgInNjaGVkLWlmLmgiCisKIC8qKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICogUHJp
dmF0ZSBNYWNyb3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAqCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCmRpZmYgLS1naXQgYS94ZW4vY29tbW9u
L3NjaGVkL3NjaGVkX2NyZWRpdC5jIGIveGVuL2NvbW1vbi9zY2hlZC9zY2hlZF9jcmVkaXQuYwpp
bmRleCBhYTQxYTMzMDFiLi5hMDk4Y2EwZjNhIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3NjaGVk
L3NjaGVkX2NyZWRpdC5jCisrKyBiL3hlbi9jb21tb24vc2NoZWQvc2NoZWRfY3JlZGl0LmMKQEAg
LTE1LDcgKzE1LDYgQEAKICNpbmNsdWRlIDx4ZW4vZGVsYXkuaD4KICNpbmNsdWRlIDx4ZW4vZXZl
bnQuaD4KICNpbmNsdWRlIDx4ZW4vdGltZS5oPgotI2luY2x1ZGUgPHhlbi9zY2hlZC1pZi5oPgog
I2luY2x1ZGUgPHhlbi9zb2Z0aXJxLmg+CiAjaW5jbHVkZSA8YXNtL2F0b21pYy5oPgogI2luY2x1
ZGUgPGFzbS9kaXY2NC5oPgpAQCAtMjQsNiArMjMsNyBAQAogI2luY2x1ZGUgPHhlbi90cmFjZS5o
PgogI2luY2x1ZGUgPHhlbi9lcnIuaD4KIAorI2luY2x1ZGUgInNjaGVkLWlmLmgiCiAKIC8qCiAg
KiBMb2NraW5nOgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZC9zY2hlZF9jcmVkaXQyLmMg
Yi94ZW4vY29tbW9uL3NjaGVkL3NjaGVkX2NyZWRpdDIuYwppbmRleCBmN2M0NzcwNTNjLi41YmZl
MTQ0MWEyIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3NjaGVkL3NjaGVkX2NyZWRpdDIuYworKysg
Yi94ZW4vY29tbW9uL3NjaGVkL3NjaGVkX2NyZWRpdDIuYwpAQCAtMTgsNyArMTgsNiBAQAogI2lu
Y2x1ZGUgPHhlbi9ldmVudC5oPgogI2luY2x1ZGUgPHhlbi90aW1lLmg+CiAjaW5jbHVkZSA8eGVu
L3BlcmZjLmg+Ci0jaW5jbHVkZSA8eGVuL3NjaGVkLWlmLmg+CiAjaW5jbHVkZSA8eGVuL3NvZnRp
cnEuaD4KICNpbmNsdWRlIDxhc20vZGl2NjQuaD4KICNpbmNsdWRlIDx4ZW4vZXJybm8uaD4KQEAg
LTI2LDYgKzI1LDggQEAKICNpbmNsdWRlIDx4ZW4vY3B1Lmg+CiAjaW5jbHVkZSA8eGVuL2tleWhh
bmRsZXIuaD4KIAorI2luY2x1ZGUgInNjaGVkLWlmLmgiCisKIC8qIE1lYW50IG9ubHkgZm9yIGhl
bHBpbmcgZGV2ZWxvcGVycyBkdXJpbmcgZGVidWdnaW5nLiAqLwogLyogI2RlZmluZSBkMnByaW50
ayBwcmludGsgKi8KICNkZWZpbmUgZDJwcmludGsoeC4uLikKZGlmZiAtLWdpdCBhL3hlbi9jb21t
b24vc2NoZWQvc2NoZWRfbnVsbC5jIGIveGVuL2NvbW1vbi9zY2hlZC9zY2hlZF9udWxsLmMKaW5k
ZXggM2YzNDE4YzliMS4uNWEyM2E3ZTdkYyAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9zY2hlZC9z
Y2hlZF9udWxsLmMKKysrIGIveGVuL2NvbW1vbi9zY2hlZC9zY2hlZF9udWxsLmMKQEAgLTI5LDEw
ICsyOSwxMSBAQAogICovCiAKICNpbmNsdWRlIDx4ZW4vc2NoZWQuaD4KLSNpbmNsdWRlIDx4ZW4v
c2NoZWQtaWYuaD4KICNpbmNsdWRlIDx4ZW4vc29mdGlycS5oPgogI2luY2x1ZGUgPHhlbi90cmFj
ZS5oPgogCisjaW5jbHVkZSAic2NoZWQtaWYuaCIKKwogLyoKICAqIG51bGwgdHJhY2luZyBldmVu
dHMuIENoZWNrIGluY2x1ZGUvcHVibGljL3RyYWNlLmggZm9yIG1vcmUgZGV0YWlscy4KICAqLwpk
aWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZC9zY2hlZF9ydC5jIGIveGVuL2NvbW1vbi9zY2hl
ZC9zY2hlZF9ydC5jCmluZGV4IGIyYjI5NDgxZjMuLjM3OWI1NmJjMmEgMTAwNjQ0Ci0tLSBhL3hl
bi9jb21tb24vc2NoZWQvc2NoZWRfcnQuYworKysgYi94ZW4vY29tbW9uL3NjaGVkL3NjaGVkX3J0
LmMKQEAgLTIwLDcgKzIwLDYgQEAKICNpbmNsdWRlIDx4ZW4vdGltZS5oPgogI2luY2x1ZGUgPHhl
bi90aW1lci5oPgogI2luY2x1ZGUgPHhlbi9wZXJmYy5oPgotI2luY2x1ZGUgPHhlbi9zY2hlZC1p
Zi5oPgogI2luY2x1ZGUgPHhlbi9zb2Z0aXJxLmg+CiAjaW5jbHVkZSA8YXNtL2F0b21pYy5oPgog
I2luY2x1ZGUgPHhlbi9lcnJuby5oPgpAQCAtMzEsNiArMzAsOCBAQAogI2luY2x1ZGUgPHhlbi9l
cnIuaD4KICNpbmNsdWRlIDx4ZW4vZ3Vlc3RfYWNjZXNzLmg+CiAKKyNpbmNsdWRlICJzY2hlZC1p
Zi5oIgorCiAvKgogICogVE9ETzoKICAqCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVkL3Nj
aGVkdWxlLmMgYi94ZW4vY29tbW9uL3NjaGVkL3NjaGVkdWxlLmMKaW5kZXggYTU1MGRkOGY5My4u
Yzc1MWZhYTc0MSAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9zY2hlZC9zY2hlZHVsZS5jCisrKyBi
L3hlbi9jb21tb24vc2NoZWQvc2NoZWR1bGUuYwpAQCAtMjMsNyArMjMsNiBAQAogI2luY2x1ZGUg
PHhlbi90aW1lLmg+CiAjaW5jbHVkZSA8eGVuL3RpbWVyLmg+CiAjaW5jbHVkZSA8eGVuL3BlcmZj
Lmg+Ci0jaW5jbHVkZSA8eGVuL3NjaGVkLWlmLmg+CiAjaW5jbHVkZSA8eGVuL3NvZnRpcnEuaD4K
ICNpbmNsdWRlIDx4ZW4vdHJhY2UuaD4KICNpbmNsdWRlIDx4ZW4vbW0uaD4KQEAgLTM4LDYgKzM3
LDggQEAKICNpbmNsdWRlIDx4c20veHNtLmg+CiAjaW5jbHVkZSA8eGVuL2Vyci5oPgogCisjaW5j
bHVkZSAic2NoZWQtaWYuaCIKKwogI2lmZGVmIENPTkZJR19YRU5fR1VFU1QKICNpbmNsdWRlIDxh
c20vZ3Vlc3QuaD4KICNlbHNlCkBAIC0xNjA3LDYgKzE2MDgsMTk0IEBAIGludCB2Y3B1X3RlbXBv
cmFyeV9hZmZpbml0eShzdHJ1Y3QgdmNwdSAqdiwgdW5zaWduZWQgaW50IGNwdSwgdWludDhfdCBy
ZWFzb24pCiAgICAgcmV0dXJuIHJldDsKIH0KIAorc3RhdGljIGlubGluZQoraW50IHZjcHVhZmZp
bml0eV9wYXJhbXNfaW52YWxpZChjb25zdCBzdHJ1Y3QgeGVuX2RvbWN0bF92Y3B1YWZmaW5pdHkg
KnZjcHVhZmYpCit7CisgICAgcmV0dXJuIHZjcHVhZmYtPmZsYWdzID09IDAgfHwKKyAgICAgICAg
ICAgKCh2Y3B1YWZmLT5mbGFncyAmIFhFTl9WQ1BVQUZGSU5JVFlfSEFSRCkgJiYKKyAgICAgICAg
ICAgIGd1ZXN0X2hhbmRsZV9pc19udWxsKHZjcHVhZmYtPmNwdW1hcF9oYXJkLmJpdG1hcCkpIHx8
CisgICAgICAgICAgICgodmNwdWFmZi0+ZmxhZ3MgJiBYRU5fVkNQVUFGRklOSVRZX1NPRlQpICYm
CisgICAgICAgICAgICBndWVzdF9oYW5kbGVfaXNfbnVsbCh2Y3B1YWZmLT5jcHVtYXBfc29mdC5i
aXRtYXApKTsKK30KKworaW50IHZjcHVfYWZmaW5pdHlfZG9tY3RsKHN0cnVjdCBkb21haW4gKmQs
IHVpbnQzMl90IGNtZCwKKyAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgeGVuX2RvbWN0
bF92Y3B1YWZmaW5pdHkgKnZjcHVhZmYpCit7CisgICAgc3RydWN0IHZjcHUgKnY7CisgICAgY29u
c3Qgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQ7CisgICAgaW50IHJldCA9IDA7CisKKyAgICBpZiAo
IHZjcHVhZmYtPnZjcHUgPj0gZC0+bWF4X3ZjcHVzICkKKyAgICAgICAgcmV0dXJuIC1FSU5WQUw7
CisKKyAgICBpZiAoICh2ID0gZC0+dmNwdVt2Y3B1YWZmLT52Y3B1XSkgPT0gTlVMTCApCisgICAg
ICAgIHJldHVybiAtRVNSQ0g7CisKKyAgICBpZiAoIHZjcHVhZmZpbml0eV9wYXJhbXNfaW52YWxp
ZCh2Y3B1YWZmKSApCisgICAgICAgIHJldHVybiAtRUlOVkFMOworCisgICAgdW5pdCA9IHYtPnNj
aGVkX3VuaXQ7CisKKyAgICBpZiAoIGNtZCA9PSBYRU5fRE9NQ1RMX3NldHZjcHVhZmZpbml0eSAp
CisgICAgeworICAgICAgICBjcHVtYXNrX3Zhcl90IG5ld19hZmZpbml0eSwgb2xkX2FmZmluaXR5
OworICAgICAgICBjcHVtYXNrX3QgKm9ubGluZSA9IGNwdXBvb2xfZG9tYWluX21hc3Rlcl9jcHVt
YXNrKHYtPmRvbWFpbik7CisKKyAgICAgICAgLyoKKyAgICAgICAgICogV2Ugd2FudCB0byBiZSBh
YmxlIHRvIHJlc3RvcmUgaGFyZCBhZmZpbml0eSBpZiB3ZSBhcmUgdHJ5aW5nCisgICAgICAgICAq
IHNldHRpbmcgYm90aCBhbmQgY2hhbmdpbmcgc29mdCBhZmZpbml0eSAod2hpY2ggaGFwcGVucyBs
YXRlciwKKyAgICAgICAgICogd2hlbiBoYXJkIGFmZmluaXR5IGhhcyBiZWVuIHN1Y2Nlc2Z1bGx5
IGNoYWdlZCBhbHJlYWR5KSBmYWlscy4KKyAgICAgICAgICovCisgICAgICAgIGlmICggIWFsbG9j
X2NwdW1hc2tfdmFyKCZvbGRfYWZmaW5pdHkpICkKKyAgICAgICAgICAgIHJldHVybiAtRU5PTUVN
OworCisgICAgICAgIGNwdW1hc2tfY29weShvbGRfYWZmaW5pdHksIHVuaXQtPmNwdV9oYXJkX2Fm
ZmluaXR5KTsKKworICAgICAgICBpZiAoICFhbGxvY19jcHVtYXNrX3ZhcigmbmV3X2FmZmluaXR5
KSApCisgICAgICAgIHsKKyAgICAgICAgICAgIGZyZWVfY3B1bWFza192YXIob2xkX2FmZmluaXR5
KTsKKyAgICAgICAgICAgIHJldHVybiAtRU5PTUVNOworICAgICAgICB9CisKKyAgICAgICAgLyog
VW5kbyBhIHN0dWNrIFNDSEVEX3Bpbl9vdmVycmlkZT8gKi8KKyAgICAgICAgaWYgKCB2Y3B1YWZm
LT5mbGFncyAmIFhFTl9WQ1BVQUZGSU5JVFlfRk9SQ0UgKQorICAgICAgICAgICAgdmNwdV90ZW1w
b3JhcnlfYWZmaW5pdHkodiwgTlJfQ1BVUywgVkNQVV9BRkZJTklUWV9PVkVSUklERSk7CisKKyAg
ICAgICAgcmV0ID0gMDsKKworICAgICAgICAvKgorICAgICAgICAgKiBXZSBib3RoIHNldCBhIG5l
dyBhZmZpbml0eSBhbmQgcmVwb3J0IGJhY2sgdG8gdGhlIGNhbGxlciB3aGF0CisgICAgICAgICAq
IHRoZSBzY2hlZHVsZXIgd2lsbCBiZSBlZmZlY3RpdmVseSB1c2luZy4KKyAgICAgICAgICovCisg
ICAgICAgIGlmICggdmNwdWFmZi0+ZmxhZ3MgJiBYRU5fVkNQVUFGRklOSVRZX0hBUkQgKQorICAg
ICAgICB7CisgICAgICAgICAgICByZXQgPSB4ZW5jdGxfYml0bWFwX3RvX2JpdG1hcChjcHVtYXNr
X2JpdHMobmV3X2FmZmluaXR5KSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICZ2Y3B1YWZmLT5jcHVtYXBfaGFyZCwgbnJfY3B1X2lkcyk7CisgICAgICAgICAgICBp
ZiAoICFyZXQgKQorICAgICAgICAgICAgICAgIHJldCA9IHZjcHVfc2V0X2hhcmRfYWZmaW5pdHko
diwgbmV3X2FmZmluaXR5KTsKKyAgICAgICAgICAgIGlmICggcmV0ICkKKyAgICAgICAgICAgICAg
ICBnb3RvIHNldHZjcHVhZmZpbml0eV9vdXQ7CisKKyAgICAgICAgICAgIC8qCisgICAgICAgICAg
ICAgKiBGb3IgaGFyZCBhZmZpbml0eSwgd2hhdCB3ZSByZXR1cm4gaXMgdGhlIGludGVyc2VjdGlv
biBvZgorICAgICAgICAgICAgICogY3B1cG9vbCdzIG9ubGluZSBtYXNrIGFuZCB0aGUgbmV3IGhh
cmQgYWZmaW5pdHkuCisgICAgICAgICAgICAgKi8KKyAgICAgICAgICAgIGNwdW1hc2tfYW5kKG5l
d19hZmZpbml0eSwgb25saW5lLCB1bml0LT5jcHVfaGFyZF9hZmZpbml0eSk7CisgICAgICAgICAg
ICByZXQgPSBjcHVtYXNrX3RvX3hlbmN0bF9iaXRtYXAoJnZjcHVhZmYtPmNwdW1hcF9oYXJkLCBu
ZXdfYWZmaW5pdHkpOworICAgICAgICB9CisgICAgICAgIGlmICggdmNwdWFmZi0+ZmxhZ3MgJiBY
RU5fVkNQVUFGRklOSVRZX1NPRlQgKQorICAgICAgICB7CisgICAgICAgICAgICByZXQgPSB4ZW5j
dGxfYml0bWFwX3RvX2JpdG1hcChjcHVtYXNrX2JpdHMobmV3X2FmZmluaXR5KSwKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZ2Y3B1YWZmLT5jcHVtYXBfc29mdCwg
bnJfY3B1X2lkcyk7CisgICAgICAgICAgICBpZiAoICFyZXQpCisgICAgICAgICAgICAgICAgcmV0
ID0gdmNwdV9zZXRfc29mdF9hZmZpbml0eSh2LCBuZXdfYWZmaW5pdHkpOworICAgICAgICAgICAg
aWYgKCByZXQgKQorICAgICAgICAgICAgeworICAgICAgICAgICAgICAgIC8qCisgICAgICAgICAg
ICAgICAgICogU2luY2Ugd2UncmUgcmV0dXJuaW5nIGVycm9yLCB0aGUgY2FsbGVyIGV4cGVjdHMg
bm90aGluZworICAgICAgICAgICAgICAgICAqIGhhcHBlbmVkLCBzbyB3ZSByb2xsYmFjayB0aGUg
Y2hhbmdlcyB0byBoYXJkIGFmZmluaXR5CisgICAgICAgICAgICAgICAgICogKGlmIGFueSkuCisg
ICAgICAgICAgICAgICAgICovCisgICAgICAgICAgICAgICAgaWYgKCB2Y3B1YWZmLT5mbGFncyAm
IFhFTl9WQ1BVQUZGSU5JVFlfSEFSRCApCisgICAgICAgICAgICAgICAgICAgIHZjcHVfc2V0X2hh
cmRfYWZmaW5pdHkodiwgb2xkX2FmZmluaXR5KTsKKyAgICAgICAgICAgICAgICBnb3RvIHNldHZj
cHVhZmZpbml0eV9vdXQ7CisgICAgICAgICAgICB9CisKKyAgICAgICAgICAgIC8qCisgICAgICAg
ICAgICAgKiBGb3Igc29mdCBhZmZpbml0eSwgd2UgcmV0dXJuIHRoZSBpbnRlcnNlY3Rpb24gYmV0
d2VlbiB0aGUKKyAgICAgICAgICAgICAqIG5ldyBzb2Z0IGFmZmluaXR5LCB0aGUgY3B1cG9vbCdz
IG9ubGluZSBtYXAgYW5kIHRoZSAobmV3KQorICAgICAgICAgICAgICogaGFyZCBhZmZpbml0eS4K
KyAgICAgICAgICAgICAqLworICAgICAgICAgICAgY3B1bWFza19hbmQobmV3X2FmZmluaXR5LCBu
ZXdfYWZmaW5pdHksIG9ubGluZSk7CisgICAgICAgICAgICBjcHVtYXNrX2FuZChuZXdfYWZmaW5p
dHksIG5ld19hZmZpbml0eSwgdW5pdC0+Y3B1X2hhcmRfYWZmaW5pdHkpOworICAgICAgICAgICAg
cmV0ID0gY3B1bWFza190b194ZW5jdGxfYml0bWFwKCZ2Y3B1YWZmLT5jcHVtYXBfc29mdCwgbmV3
X2FmZmluaXR5KTsKKyAgICAgICAgfQorCisgc2V0dmNwdWFmZmluaXR5X291dDoKKyAgICAgICAg
ZnJlZV9jcHVtYXNrX3ZhcihuZXdfYWZmaW5pdHkpOworICAgICAgICBmcmVlX2NwdW1hc2tfdmFy
KG9sZF9hZmZpbml0eSk7CisgICAgfQorICAgIGVsc2UKKyAgICB7CisgICAgICAgIGlmICggdmNw
dWFmZi0+ZmxhZ3MgJiBYRU5fVkNQVUFGRklOSVRZX0hBUkQgKQorICAgICAgICAgICAgcmV0ID0g
Y3B1bWFza190b194ZW5jdGxfYml0bWFwKCZ2Y3B1YWZmLT5jcHVtYXBfaGFyZCwKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0LT5jcHVfaGFyZF9hZmZpbml0
eSk7CisgICAgICAgIGlmICggdmNwdWFmZi0+ZmxhZ3MgJiBYRU5fVkNQVUFGRklOSVRZX1NPRlQg
KQorICAgICAgICAgICAgcmV0ID0gY3B1bWFza190b194ZW5jdGxfYml0bWFwKCZ2Y3B1YWZmLT5j
cHVtYXBfc29mdCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1
bml0LT5jcHVfc29mdF9hZmZpbml0eSk7CisgICAgfQorCisgICAgcmV0dXJuIHJldDsKK30KKwor
dm9pZCBkb21haW5fdXBkYXRlX25vZGVfYWZmaW5pdHkoc3RydWN0IGRvbWFpbiAqZCkKK3sKKyAg
ICBjcHVtYXNrX3Zhcl90IGRvbV9jcHVtYXNrLCBkb21fY3B1bWFza19zb2Z0OworICAgIGNwdW1h
c2tfdCAqZG9tX2FmZmluaXR5OworICAgIGNvbnN0IGNwdW1hc2tfdCAqb25saW5lOworICAgIHN0
cnVjdCBzY2hlZF91bml0ICp1bml0OworICAgIHVuc2lnbmVkIGludCBjcHU7CisKKyAgICAvKiBE
byB3ZSBoYXZlIHZjcHVzIGFscmVhZHk/IElmIG5vdCwgbm8gbmVlZCB0byB1cGRhdGUgbm9kZS1h
ZmZpbml0eS4gKi8KKyAgICBpZiAoICFkLT52Y3B1IHx8ICFkLT52Y3B1WzBdICkKKyAgICAgICAg
cmV0dXJuOworCisgICAgaWYgKCAhemFsbG9jX2NwdW1hc2tfdmFyKCZkb21fY3B1bWFzaykgKQor
ICAgICAgICByZXR1cm47CisgICAgaWYgKCAhemFsbG9jX2NwdW1hc2tfdmFyKCZkb21fY3B1bWFz
a19zb2Z0KSApCisgICAgeworICAgICAgICBmcmVlX2NwdW1hc2tfdmFyKGRvbV9jcHVtYXNrKTsK
KyAgICAgICAgcmV0dXJuOworICAgIH0KKworICAgIG9ubGluZSA9IGNwdXBvb2xfZG9tYWluX21h
c3Rlcl9jcHVtYXNrKGQpOworCisgICAgc3Bpbl9sb2NrKCZkLT5ub2RlX2FmZmluaXR5X2xvY2sp
OworCisgICAgLyoKKyAgICAgKiBJZiBkLT5hdXRvX25vZGVfYWZmaW5pdHkgaXMgdHJ1ZSwgbGV0
J3MgY29tcHV0ZSB0aGUgZG9tYWluJ3MKKyAgICAgKiBub2RlLWFmZmluaXR5IGFuZCB1cGRhdGUg
ZC0+bm9kZV9hZmZpbml0eSBhY2NvcmRpbmdseS4gaWYgZmFsc2UsCisgICAgICoganVzdCBsZWF2
ZSBkLT5hdXRvX25vZGVfYWZmaW5pdHkgYWxvbmUuCisgICAgICovCisgICAgaWYgKCBkLT5hdXRv
X25vZGVfYWZmaW5pdHkgKQorICAgIHsKKyAgICAgICAgLyoKKyAgICAgICAgICogV2Ugd2FudCB0
aGUgbmFycm93ZXN0IHBvc3NpYmxlIHNldCBvZiBwY3B1cyAodG8gZ2V0IHRoZSBuYXJvd2VzdAor
ICAgICAgICAgKiBwb3NzaWJsZSBzZXQgb2Ygbm9kZXMpLiBXaGF0IHdlIG5lZWQgaXMgdGhlIGNw
dW1hc2sgb2Ygd2hlcmUgdGhlCisgICAgICAgICAqIGRvbWFpbiBjYW4gcnVuICh0aGUgdW5pb24g
b2YgdGhlIGhhcmQgYWZmaW5pdHkgb2YgYWxsIGl0cyB2Y3B1cyksCisgICAgICAgICAqIGFuZCB0
aGUgZnVsbCBtYXNrIG9mIHdoZXJlIGl0IHdvdWxkIHByZWZlciB0byBydW4gKHRoZSB1bmlvbiBv
ZgorICAgICAgICAgKiB0aGUgc29mdCBhZmZpbml0eSBvZiBhbGwgaXRzIHZhcmlvdXMgdmNwdXMp
LiBMZXQncyBidWlsZCB0aGVtLgorICAgICAgICAgKi8KKyAgICAgICAgZm9yX2VhY2hfc2NoZWRf
dW5pdCAoIGQsIHVuaXQgKQorICAgICAgICB7CisgICAgICAgICAgICBjcHVtYXNrX29yKGRvbV9j
cHVtYXNrLCBkb21fY3B1bWFzaywgdW5pdC0+Y3B1X2hhcmRfYWZmaW5pdHkpOworICAgICAgICAg
ICAgY3B1bWFza19vcihkb21fY3B1bWFza19zb2Z0LCBkb21fY3B1bWFza19zb2Z0LAorICAgICAg
ICAgICAgICAgICAgICAgICB1bml0LT5jcHVfc29mdF9hZmZpbml0eSk7CisgICAgICAgIH0KKyAg
ICAgICAgLyogRmlsdGVyIG91dCBub24tb25saW5lIGNwdXMgKi8KKyAgICAgICAgY3B1bWFza19h
bmQoZG9tX2NwdW1hc2ssIGRvbV9jcHVtYXNrLCBvbmxpbmUpOworICAgICAgICBBU1NFUlQoIWNw
dW1hc2tfZW1wdHkoZG9tX2NwdW1hc2spKTsKKyAgICAgICAgLyogQW5kIGNvbXB1dGUgdGhlIGlu
dGVyc2VjdGlvbiBiZXR3ZWVuIGhhcmQsIG9ubGluZSBhbmQgc29mdCAqLworICAgICAgICBjcHVt
YXNrX2FuZChkb21fY3B1bWFza19zb2Z0LCBkb21fY3B1bWFza19zb2Z0LCBkb21fY3B1bWFzayk7
CisKKyAgICAgICAgLyoKKyAgICAgICAgICogSWYgbm90IGVtcHR5LCB0aGUgaW50ZXJzZWN0aW9u
IG9mIGhhcmQsIHNvZnQgYW5kIG9ubGluZSBpcyB0aGUKKyAgICAgICAgICogbmFycm93ZXN0IHNl
dCB3ZSB3YW50LiBJZiBlbXB0eSwgd2UgZmFsbCBiYWNrIHRvIGhhcmQmb25saW5lLgorICAgICAg
ICAgKi8KKyAgICAgICAgZG9tX2FmZmluaXR5ID0gY3B1bWFza19lbXB0eShkb21fY3B1bWFza19z
b2Z0KSA/CisgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21fY3B1bWFzayA6IGRvbV9jcHVt
YXNrX3NvZnQ7CisKKyAgICAgICAgbm9kZXNfY2xlYXIoZC0+bm9kZV9hZmZpbml0eSk7CisgICAg
ICAgIGZvcl9lYWNoX2NwdSAoIGNwdSwgZG9tX2FmZmluaXR5ICkKKyAgICAgICAgICAgIG5vZGVf
c2V0KGNwdV90b19ub2RlKGNwdSksIGQtPm5vZGVfYWZmaW5pdHkpOworICAgIH0KKworICAgIHNw
aW5fdW5sb2NrKCZkLT5ub2RlX2FmZmluaXR5X2xvY2spOworCisgICAgZnJlZV9jcHVtYXNrX3Zh
cihkb21fY3B1bWFza19zb2Z0KTsKKyAgICBmcmVlX2NwdW1hc2tfdmFyKGRvbV9jcHVtYXNrKTsK
K30KKwogdHlwZWRlZiBsb25nIHJldF90OwogCiAjZW5kaWYgLyogIUNPTVBBVCAqLwpkaWZmIC0t
Z2l0IGEveGVuL2luY2x1ZGUveGVuL2RvbWFpbi5oIGIveGVuL2luY2x1ZGUveGVuL2RvbWFpbi5o
CmluZGV4IDc2OTMwMjA1N2IuLmM5MzFlYWI0YTkgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hl
bi9kb21haW4uaAorKysgYi94ZW4vaW5jbHVkZS94ZW4vZG9tYWluLmgKQEAgLTI3LDYgKzI3LDkg
QEAgc3RydWN0IHhlbl9kb21jdGxfZ2V0ZG9tYWluaW5mbzsKIHZvaWQgZ2V0ZG9tYWluaW5mbyhz
dHJ1Y3QgZG9tYWluICpkLCBzdHJ1Y3QgeGVuX2RvbWN0bF9nZXRkb21haW5pbmZvICppbmZvKTsK
IHZvaWQgYXJjaF9nZXRfZG9tYWluX2luZm8oY29uc3Qgc3RydWN0IGRvbWFpbiAqZCwKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHhlbl9kb21jdGxfZ2V0ZG9tYWluaW5mbyAqaW5m
byk7CitpbnQgeGVuY3RsX2JpdG1hcF90b19iaXRtYXAodW5zaWduZWQgbG9uZyAqYml0bWFwLAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCB4ZW5jdGxfYml0bWFwICp4
ZW5jdGxfYml0bWFwLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBu
Yml0cyk7CiAKIC8qCiAgKiBBcmNoLXNwZWNpZmljcy4KZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRl
L3hlbi9zY2hlZC5oIGIveGVuL2luY2x1ZGUveGVuL3NjaGVkLmgKaW5kZXggOWY3YmM2OTI5My4u
MjUwN2E4MzNjMiAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUveGVuL3NjaGVkLmgKKysrIGIveGVu
L2luY2x1ZGUveGVuL3NjaGVkLmgKQEAgLTUwLDYgKzUwLDkgQEAgREVGSU5FX1hFTl9HVUVTVF9I
QU5ETEUodmNwdV9ydW5zdGF0ZV9pbmZvX2NvbXBhdF90KTsKIC8qIEEgZ2xvYmFsIHBvaW50ZXIg
dG8gdGhlIGhhcmR3YXJlIGRvbWFpbiAodXN1YWxseSBET00wKS4gKi8KIGV4dGVybiBzdHJ1Y3Qg
ZG9tYWluICpoYXJkd2FyZV9kb21haW47CiAKKy8qIEEgZ2xvYmFsIHBvaW50ZXIgdG8gdGhlIGlu
aXRpYWwgY3B1cG9vbCAoUE9PTDApLiAqLworZXh0ZXJuIHN0cnVjdCBjcHVwb29sICpjcHVwb29s
MDsKKwogI2lmZGVmIENPTkZJR19MQVRFX0hXRE9NCiBleHRlcm4gZG9taWRfdCBoYXJkd2FyZV9k
b21pZDsKICNlbHNlCkBAIC05MjksNiArOTMyLDggQEAgaW50IHZjcHVfdGVtcG9yYXJ5X2FmZmlu
aXR5KHN0cnVjdCB2Y3B1ICp2LCB1bnNpZ25lZCBpbnQgY3B1LCB1aW50OF90IHJlYXNvbik7CiBp
bnQgdmNwdV9zZXRfaGFyZF9hZmZpbml0eShzdHJ1Y3QgdmNwdSAqdiwgY29uc3QgY3B1bWFza190
ICphZmZpbml0eSk7CiBpbnQgdmNwdV9zZXRfc29mdF9hZmZpbml0eShzdHJ1Y3QgdmNwdSAqdiwg
Y29uc3QgY3B1bWFza190ICphZmZpbml0eSk7CiB2b2lkIHJlc3RvcmVfdmNwdV9hZmZpbml0eShz
dHJ1Y3QgZG9tYWluICpkKTsKK2ludCB2Y3B1X2FmZmluaXR5X2RvbWN0bChzdHJ1Y3QgZG9tYWlu
ICpkLCB1aW50MzJfdCBjbWQsCisgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHhlbl9k
b21jdGxfdmNwdWFmZmluaXR5ICp2Y3B1YWZmKTsKIAogdm9pZCB2Y3B1X3J1bnN0YXRlX2dldChz
dHJ1Y3QgdmNwdSAqdiwgc3RydWN0IHZjcHVfcnVuc3RhdGVfaW5mbyAqcnVuc3RhdGUpOwogdWlu
dDY0X3QgZ2V0X2NwdV9pZGxlX3RpbWUodW5zaWduZWQgaW50IGNwdSk7CkBAIC0xMDU0LDYgKzEw
NTksOCBAQCBpbnQgY3B1cG9vbF9hZGRfZG9tYWluKHN0cnVjdCBkb21haW4gKmQsIGludCBwb29s
aWQpOwogdm9pZCBjcHVwb29sX3JtX2RvbWFpbihzdHJ1Y3QgZG9tYWluICpkKTsKIGludCBjcHVw
b29sX21vdmVfZG9tYWluKHN0cnVjdCBkb21haW4gKmQsIHN0cnVjdCBjcHVwb29sICpjKTsKIGlu
dCBjcHVwb29sX2RvX3N5c2N0bChzdHJ1Y3QgeGVuX3N5c2N0bF9jcHVwb29sX29wICpvcCk7Citp
bnQgY3B1cG9vbF9nZXRfaWQoY29uc3Qgc3RydWN0IGRvbWFpbiAqZCk7CitjcHVtYXNrX3QgKmNw
dXBvb2xfdmFsaWRfY3B1cyhzdHJ1Y3QgY3B1cG9vbCAqcG9vbCk7CiB2b2lkIHNjaGVkdWxlX2R1
bXAoc3RydWN0IGNwdXBvb2wgKmMpOwogZXh0ZXJuIHZvaWQgZHVtcF9ydW5xKHVuc2lnbmVkIGNo
YXIga2V5KTsKIAotLSAKMi4xNi40CgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVu
cHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZv
L3hlbi1kZXZlbA==

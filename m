Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B435BD604F
	for <lists+xen-devel@lfdr.de>; Mon, 14 Oct 2019 12:36:58 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iJxeo-00052Y-53; Mon, 14 Oct 2019 10:32:54 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=flUq=YH=gmail.com=pdurrant@srs-us1.protection.inumbo.net>)
 id 1iJxen-00052T-1B
 for xen-devel@lists.xenproject.org; Mon, 14 Oct 2019 10:32:53 +0000
X-Inumbo-ID: f99baeb0-ee6d-11e9-8aca-bc764e2007e4
Received: from mail-pf1-x442.google.com (unknown [2607:f8b0:4864:20::442])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id f99baeb0-ee6d-11e9-8aca-bc764e2007e4;
 Mon, 14 Oct 2019 10:32:52 +0000 (UTC)
Received: by mail-pf1-x442.google.com with SMTP id h195so10162794pfe.5
 for <xen-devel@lists.xenproject.org>; Mon, 14 Oct 2019 03:32:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc; bh=oUxiYEyAMUiFlWbyACYeVt4wto4jVAv/PYKjqVKaLG8=;
 b=XICH1u057uohUq/74Alm2nHi/+fOFgDV9WgjiihVfT5Sg76syBDQB3ZizG8huP+Yqk
 o821IEmlgdEDJyukPm/4YrmYKCkR0RMC0E7iFXRbAWBXXOc9Xl0m3ft6nVju7VuSvJ7B
 69PzTbwPmu3Rp4LVY8Sk87PE/6NEGvbB5PWT+UbOobPlpn9YcfrulAkpId+OH/Mbe7P3
 BivHa4t5N5eQKSHmVk+NuQejn4ttzhysNf0KBjesKMH+xz1zduMXH9LdprxgihaPPWnk
 xyivPrh4aAvXUWB/FL/ZO1as5PHUK91l/iDsn131+Lq4sMUXUpTtsX/qqrqf9ZotcohT
 13bQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=oUxiYEyAMUiFlWbyACYeVt4wto4jVAv/PYKjqVKaLG8=;
 b=FgFtOTfOU7p0orXLB+5XWpUWYXhGojf8UEaK8eUWuQpO9Zr/xCg02wH0wau+FCxBAY
 kZNVloAQp6bIt3iwARgYSxfUXOTQoi8nyRgChAeJguU+b35Xt8t22zvawx51pBD0T+Mc
 5ff03H8IM7Y0T2n8ZKrRt9gtnC9/VvYTHanmPtTyJsWggwqoHv7UKCy0hAbknm8hLSDh
 zJzAhfPO9TysObnG3/7ml2hO6OkxANfZfZPl3D8SlwX8zVjkIFaZLFAJYqIkreW7rInL
 nbqN1cDZVK2txz3Y1jA5oHopNb1eZgJ3KXICNyfPfGDAflCMFDuDaXDCE2BKUNICa5ty
 PqgA==
X-Gm-Message-State: APjAAAUvsBbHcRp3oeunkjI4sVZ+7ZKBIAlyDsm0CROkrjvWFK08T3EE
 F2rSsfdV9ictT6ViEecv/RXSTh5GiSWjkMSzwOk=
X-Google-Smtp-Source: APXvYqysfkJBTv2Dw4llgWLXQHvvNBR+K9ynrLKorQlC8QRg5naab0Mh9FSNkA9wPHO01T9BqLztip8qsulciJzZkLU=
X-Received: by 2002:a63:82:: with SMTP id 124mr33805671pga.112.1571049171202; 
 Mon, 14 Oct 2019 03:32:51 -0700 (PDT)
MIME-Version: 1.0
References: <20191014090910.9701-1-jgross@suse.com>
 <20191014090910.9701-3-jgross@suse.com>
In-Reply-To: <20191014090910.9701-3-jgross@suse.com>
From: Paul Durrant <pdurrant@gmail.com>
Date: Mon, 14 Oct 2019 11:32:40 +0100
Message-ID: <CACCGGhAYRk6gy7dDqP5QqNJBJamT4wSc5muwR0LUoUEVv_O+=g@mail.gmail.com>
To: Juergen Gross <jgross@suse.com>
Subject: Re: [Xen-devel] [PATCH 2/2] xen/netback: cleanup init and deinit
 code
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Wei Liu <wei.liu@kernel.org>, Paul Durrant <paul@xen.org>,
 netdev@vger.kernel.org, linux-kernel@vger.kernel.org,
 xen-devel <xen-devel@lists.xenproject.org>,
 "David S. Miller" <davem@davemloft.net>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gTW9uLCAxNCBPY3QgMjAxOSBhdCAxMDowOSwgSnVlcmdlbiBHcm9zcyA8amdyb3NzQHN1c2Uu
Y29tPiB3cm90ZToKPgo+IERvIHNvbWUgY2xlYW51cCBvZiB0aGUgbmV0YmFjayBpbml0IGFuZCBk
ZWluaXQgY29kZToKPgo+IC0gYWRkIGFuIG9tbmlwb3RlbnQgcXVldWUgZGVpbml0IGZ1bmN0aW9u
IHVzYWJsZSBmcm9tCj4gICB4ZW52aWZfZGlzY29ubmVjdF9kYXRhKCkgYW5kIHRoZSBlcnJvciBw
YXRoIG9mIHhlbnZpZl9jb25uZWN0X2RhdGEoKQo+IC0gb25seSBpbnN0YWxsIHRoZSBpcnEgaGFu
ZGxlcnMgYWZ0ZXIgaW5pdGlhbGl6aW5nIGFsbCByZWxldmFudCBpdGVtcwo+ICAgKGVzcGVjaWFs
bHkgdGhlIGt0aHJlYWRzIHJlbGF0ZWQgdG8gdGhlIHF1ZXVlKQo+IC0gdGhlcmUgaXMgbm8gbmVl
ZCB0byB1c2UgZ2V0X3Rhc2tfc3RydWN0KCkgYWZ0ZXIgY3JlYXRpbmcgYSBrdGhyZWFkCj4gICBh
bmQgdXNpbmcgcHV0X3Rhc2tfc3RydWN0KCkgYWdhaW4gYWZ0ZXIgaGF2aW5nIHN0b3BwZWQgaXQu
Cj4gLSB1c2Uga3RocmVhZF9ydW4oKSBpbnN0ZWFkIG9mIGt0aHJlYWRfY3JlYXRlKCkgdG8gc3Bh
cmUgdGhlIGNhbGwgb2YKPiAgIHdha2VfdXBfcHJvY2VzcygpLgoKSSBndWVzcyB0aGUgcmVhc29u
IGl0IHdhcyBkb25lIHRoYXQgd2F5IHdhcyB0byBlbnN1cmUgdGhhdCBxdWV1ZS0+dGFzawphbmQg
cXVldWUtPmRlYWxsb2NfdGFzayB3b3VsZCBiZSBzZXQgYmVmb3JlIHRoZSByZWxldmFudCB0aHJl
YWRzCmV4ZWN1dGVkLCBidXQgSSBkb24ndCBzZWUgYW55d2hlcmUgcmVseWluZyBvbiB0aGlzIHNv
IEkgZ3Vlc3MgY2hhbmdlCmlzIHNhZmUuIFRoZSByZXN0IG9mIGl0IGxvb2tzIGZpbmUuCgo+Cj4g
U2lnbmVkLW9mZi1ieTogSnVlcmdlbiBHcm9zcyA8amdyb3NzQHN1c2UuY29tPgoKUmV2aWV3ZWQt
Ynk6IFBhdWwgRHVycmFudCA8cGF1bEB4ZW4ub3JnPgoKPiAtLS0KPiAgZHJpdmVycy9uZXQveGVu
LW5ldGJhY2svaW50ZXJmYWNlLmMgfCAxMTQgKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0t
LS0tLS0tCj4gIDEgZmlsZSBjaGFuZ2VkLCA1NCBpbnNlcnRpb25zKCspLCA2MCBkZWxldGlvbnMo
LSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC94ZW4tbmV0YmFjay9pbnRlcmZhY2UuYyBi
L2RyaXZlcnMvbmV0L3hlbi1uZXRiYWNrL2ludGVyZmFjZS5jCj4gaW5kZXggMTAzZWQwMDc3NWVi
Li42OGRkN2JiMDdjYTYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9uZXQveGVuLW5ldGJhY2svaW50
ZXJmYWNlLmMKPiArKysgYi9kcml2ZXJzL25ldC94ZW4tbmV0YmFjay9pbnRlcmZhY2UuYwo+IEBA
IC02MjYsNiArNjI2LDM4IEBAIGludCB4ZW52aWZfY29ubmVjdF9jdHJsKHN0cnVjdCB4ZW52aWYg
KnZpZiwgZ3JhbnRfcmVmX3QgcmluZ19yZWYsCj4gICAgICAgICByZXR1cm4gZXJyOwo+ICB9Cj4K
PiArc3RhdGljIHZvaWQgeGVudmlmX2Rpc2Nvbm5lY3RfcXVldWUoc3RydWN0IHhlbnZpZl9xdWV1
ZSAqcXVldWUpCj4gK3sKPiArICAgICAgIGlmIChxdWV1ZS0+dHhfaXJxKSB7Cj4gKyAgICAgICAg
ICAgICAgIHVuYmluZF9mcm9tX2lycWhhbmRsZXIocXVldWUtPnR4X2lycSwgcXVldWUpOwo+ICsg
ICAgICAgICAgICAgICBpZiAocXVldWUtPnR4X2lycSA9PSBxdWV1ZS0+cnhfaXJxKQo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIHF1ZXVlLT5yeF9pcnEgPSAwOwo+ICsgICAgICAgICAgICAgICBx
dWV1ZS0+dHhfaXJxID0gMDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBpZiAocXVldWUtPnJ4
X2lycSkgewo+ICsgICAgICAgICAgICAgICB1bmJpbmRfZnJvbV9pcnFoYW5kbGVyKHF1ZXVlLT5y
eF9pcnEsIHF1ZXVlKTsKPiArICAgICAgICAgICAgICAgcXVldWUtPnJ4X2lycSA9IDA7Cj4gKyAg
ICAgICB9Cj4gKwo+ICsgICAgICAgaWYgKHF1ZXVlLT50YXNrKSB7Cj4gKyAgICAgICAgICAgICAg
IGt0aHJlYWRfc3RvcChxdWV1ZS0+dGFzayk7Cj4gKyAgICAgICAgICAgICAgIHF1ZXVlLT50YXNr
ID0gTlVMTDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBpZiAocXVldWUtPmRlYWxsb2NfdGFz
aykgewo+ICsgICAgICAgICAgICAgICBrdGhyZWFkX3N0b3AocXVldWUtPmRlYWxsb2NfdGFzayk7
Cj4gKyAgICAgICAgICAgICAgIHF1ZXVlLT5kZWFsbG9jX3Rhc2sgPSBOVUxMOwo+ICsgICAgICAg
fQo+ICsKPiArICAgICAgIGlmIChxdWV1ZS0+bmFwaS5wb2xsKSB7Cj4gKyAgICAgICAgICAgICAg
IG5ldGlmX25hcGlfZGVsKCZxdWV1ZS0+bmFwaSk7Cj4gKyAgICAgICAgICAgICAgIHF1ZXVlLT5u
YXBpLnBvbGwgPSBOVUxMOwo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIHhlbnZpZl91bm1hcF9m
cm9udGVuZF9kYXRhX3JpbmdzKHF1ZXVlKTsKPiArfQo+ICsKPiAgaW50IHhlbnZpZl9jb25uZWN0
X2RhdGEoc3RydWN0IHhlbnZpZl9xdWV1ZSAqcXVldWUsCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgdW5zaWduZWQgbG9uZyB0eF9yaW5nX3JlZiwKPiAgICAgICAgICAgICAgICAgICAgICAgICB1
bnNpZ25lZCBsb25nIHJ4X3JpbmdfcmVmLAo+IEBAIC02NTEsMTMgKzY4MywyNyBAQCBpbnQgeGVu
dmlmX2Nvbm5lY3RfZGF0YShzdHJ1Y3QgeGVudmlmX3F1ZXVlICpxdWV1ZSwKPiAgICAgICAgIG5l
dGlmX25hcGlfYWRkKHF1ZXVlLT52aWYtPmRldiwgJnF1ZXVlLT5uYXBpLCB4ZW52aWZfcG9sbCwK
PiAgICAgICAgICAgICAgICAgICAgICAgICBYRU5WSUZfTkFQSV9XRUlHSFQpOwo+Cj4gKyAgICAg
ICBxdWV1ZS0+c3RhbGxlZCA9IHRydWU7Cj4gKwo+ICsgICAgICAgdGFzayA9IGt0aHJlYWRfcnVu
KHhlbnZpZl9rdGhyZWFkX2d1ZXN0X3J4LCBxdWV1ZSwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAiJXMtZ3Vlc3QtcngiLCBxdWV1ZS0+bmFtZSk7Cj4gKyAgICAgICBpZiAoSVNfRVJSKHRh
c2spKQo+ICsgICAgICAgICAgICAgICBnb3RvIGt0aHJlYWRfZXJyOwo+ICsgICAgICAgcXVldWUt
PnRhc2sgPSB0YXNrOwo+ICsKPiArICAgICAgIHRhc2sgPSBrdGhyZWFkX3J1bih4ZW52aWZfZGVh
bGxvY19rdGhyZWFkLCBxdWV1ZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAiJXMtZGVh
bGxvYyIsIHF1ZXVlLT5uYW1lKTsKPiArICAgICAgIGlmIChJU19FUlIodGFzaykpCj4gKyAgICAg
ICAgICAgICAgIGdvdG8ga3RocmVhZF9lcnI7Cj4gKyAgICAgICBxdWV1ZS0+ZGVhbGxvY190YXNr
ID0gdGFzazsKPiArCj4gICAgICAgICBpZiAodHhfZXZ0Y2huID09IHJ4X2V2dGNobikgewo+ICAg
ICAgICAgICAgICAgICAvKiBmZWF0dXJlLXNwbGl0LWV2ZW50LWNoYW5uZWxzID09IDAgKi8KPiAg
ICAgICAgICAgICAgICAgZXJyID0gYmluZF9pbnRlcmRvbWFpbl9ldnRjaG5fdG9faXJxaGFuZGxl
cigKPiAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZS0+dmlmLT5kb21pZCwgdHhfZXZ0Y2hu
LCB4ZW52aWZfaW50ZXJydXB0LCAwLAo+ICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLT5u
YW1lLCBxdWV1ZSk7Cj4gICAgICAgICAgICAgICAgIGlmIChlcnIgPCAwKQo+IC0gICAgICAgICAg
ICAgICAgICAgICAgIGdvdG8gZXJyX3VubWFwOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGdv
dG8gZXJyOwo+ICAgICAgICAgICAgICAgICBxdWV1ZS0+dHhfaXJxID0gcXVldWUtPnJ4X2lycSA9
IGVycjsKPiAgICAgICAgICAgICAgICAgZGlzYWJsZV9pcnEocXVldWUtPnR4X2lycSk7Cj4gICAg
ICAgICB9IGVsc2Ugewo+IEBAIC02NjgsNyArNzE0LDcgQEAgaW50IHhlbnZpZl9jb25uZWN0X2Rh
dGEoc3RydWN0IHhlbnZpZl9xdWV1ZSAqcXVldWUsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
cXVldWUtPnZpZi0+ZG9taWQsIHR4X2V2dGNobiwgeGVudmlmX3R4X2ludGVycnVwdCwgMCwKPiAg
ICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZS0+dHhfaXJxX25hbWUsIHF1ZXVlKTsKPiAgICAg
ICAgICAgICAgICAgaWYgKGVyciA8IDApCj4gLSAgICAgICAgICAgICAgICAgICAgICAgZ290byBl
cnJfdW5tYXA7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgZ290byBlcnI7Cj4gICAgICAgICAg
ICAgICAgIHF1ZXVlLT50eF9pcnEgPSBlcnI7Cj4gICAgICAgICAgICAgICAgIGRpc2FibGVfaXJx
KHF1ZXVlLT50eF9pcnEpOwo+Cj4gQEAgLTY3OCw0NyArNzI0LDE4IEBAIGludCB4ZW52aWZfY29u
bmVjdF9kYXRhKHN0cnVjdCB4ZW52aWZfcXVldWUgKnF1ZXVlLAo+ICAgICAgICAgICAgICAgICAg
ICAgICAgIHF1ZXVlLT52aWYtPmRvbWlkLCByeF9ldnRjaG4sIHhlbnZpZl9yeF9pbnRlcnJ1cHQs
IDAsCj4gICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUtPnJ4X2lycV9uYW1lLCBxdWV1ZSk7
Cj4gICAgICAgICAgICAgICAgIGlmIChlcnIgPCAwKQo+IC0gICAgICAgICAgICAgICAgICAgICAg
IGdvdG8gZXJyX3R4X3VuYmluZDsKPiArICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVycjsK
PiAgICAgICAgICAgICAgICAgcXVldWUtPnJ4X2lycSA9IGVycjsKPiAgICAgICAgICAgICAgICAg
ZGlzYWJsZV9pcnEocXVldWUtPnJ4X2lycSk7Cj4gICAgICAgICB9Cj4KPiAtICAgICAgIHF1ZXVl
LT5zdGFsbGVkID0gdHJ1ZTsKPiAtCj4gLSAgICAgICB0YXNrID0ga3RocmVhZF9jcmVhdGUoeGVu
dmlmX2t0aHJlYWRfZ3Vlc3RfcngsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZv
aWQgKilxdWV1ZSwgIiVzLWd1ZXN0LXJ4IiwgcXVldWUtPm5hbWUpOwo+IC0gICAgICAgaWYgKElT
X0VSUih0YXNrKSkgewo+IC0gICAgICAgICAgICAgICBwcl93YXJuKCJDb3VsZCBub3QgYWxsb2Nh
dGUga3RocmVhZCBmb3IgJXNcbiIsIHF1ZXVlLT5uYW1lKTsKPiAtICAgICAgICAgICAgICAgZXJy
ID0gUFRSX0VSUih0YXNrKTsKPiAtICAgICAgICAgICAgICAgZ290byBlcnJfcnhfdW5iaW5kOwo+
IC0gICAgICAgfQo+IC0gICAgICAgcXVldWUtPnRhc2sgPSB0YXNrOwo+IC0gICAgICAgZ2V0X3Rh
c2tfc3RydWN0KHRhc2spOwo+IC0KPiAtICAgICAgIHRhc2sgPSBrdGhyZWFkX2NyZWF0ZSh4ZW52
aWZfZGVhbGxvY19rdGhyZWFkLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICh2b2lk
ICopcXVldWUsICIlcy1kZWFsbG9jIiwgcXVldWUtPm5hbWUpOwo+IC0gICAgICAgaWYgKElTX0VS
Uih0YXNrKSkgewo+IC0gICAgICAgICAgICAgICBwcl93YXJuKCJDb3VsZCBub3QgYWxsb2NhdGUg
a3RocmVhZCBmb3IgJXNcbiIsIHF1ZXVlLT5uYW1lKTsKPiAtICAgICAgICAgICAgICAgZXJyID0g
UFRSX0VSUih0YXNrKTsKPiAtICAgICAgICAgICAgICAgZ290byBlcnJfcnhfdW5iaW5kOwo+IC0g
ICAgICAgfQo+IC0gICAgICAgcXVldWUtPmRlYWxsb2NfdGFzayA9IHRhc2s7Cj4gLQo+IC0gICAg
ICAgd2FrZV91cF9wcm9jZXNzKHF1ZXVlLT50YXNrKTsKPiAtICAgICAgIHdha2VfdXBfcHJvY2Vz
cyhxdWV1ZS0+ZGVhbGxvY190YXNrKTsKPiAtCj4gICAgICAgICByZXR1cm4gMDsKPgo+IC1lcnJf
cnhfdW5iaW5kOgo+IC0gICAgICAgdW5iaW5kX2Zyb21faXJxaGFuZGxlcihxdWV1ZS0+cnhfaXJx
LCBxdWV1ZSk7Cj4gLSAgICAgICBxdWV1ZS0+cnhfaXJxID0gMDsKPiAtZXJyX3R4X3VuYmluZDoK
PiAtICAgICAgIHVuYmluZF9mcm9tX2lycWhhbmRsZXIocXVldWUtPnR4X2lycSwgcXVldWUpOwo+
IC0gICAgICAgcXVldWUtPnR4X2lycSA9IDA7Cj4gLWVycl91bm1hcDoKPiAtICAgICAgIHhlbnZp
Zl91bm1hcF9mcm9udGVuZF9kYXRhX3JpbmdzKHF1ZXVlKTsKPiAtICAgICAgIG5ldGlmX25hcGlf
ZGVsKCZxdWV1ZS0+bmFwaSk7Cj4gK2t0aHJlYWRfZXJyOgo+ICsgICAgICAgcHJfd2FybigiQ291
bGQgbm90IGFsbG9jYXRlIGt0aHJlYWQgZm9yICVzXG4iLCBxdWV1ZS0+bmFtZSk7Cj4gKyAgICAg
ICBlcnIgPSBQVFJfRVJSKHRhc2spOwo+ICBlcnI6Cj4gKyAgICAgICB4ZW52aWZfZGlzY29ubmVj
dF9xdWV1ZShxdWV1ZSk7Cj4gICAgICAgICByZXR1cm4gZXJyOwo+ICB9Cj4KPiBAQCAtNzQ2LDMw
ICs3NjMsNyBAQCB2b2lkIHhlbnZpZl9kaXNjb25uZWN0X2RhdGEoc3RydWN0IHhlbnZpZiAqdmlm
KQo+ICAgICAgICAgZm9yIChxdWV1ZV9pbmRleCA9IDA7IHF1ZXVlX2luZGV4IDwgbnVtX3F1ZXVl
czsgKytxdWV1ZV9pbmRleCkgewo+ICAgICAgICAgICAgICAgICBxdWV1ZSA9ICZ2aWYtPnF1ZXVl
c1txdWV1ZV9pbmRleF07Cj4KPiAtICAgICAgICAgICAgICAgbmV0aWZfbmFwaV9kZWwoJnF1ZXVl
LT5uYXBpKTsKPiAtCj4gLSAgICAgICAgICAgICAgIGlmIChxdWV1ZS0+dGFzaykgewo+IC0gICAg
ICAgICAgICAgICAgICAgICAgIGt0aHJlYWRfc3RvcChxdWV1ZS0+dGFzayk7Cj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgcHV0X3Rhc2tfc3RydWN0KHF1ZXVlLT50YXNrKTsKPiAtICAgICAgICAg
ICAgICAgICAgICAgICBxdWV1ZS0+dGFzayA9IE5VTEw7Cj4gLSAgICAgICAgICAgICAgIH0KPiAt
Cj4gLSAgICAgICAgICAgICAgIGlmIChxdWV1ZS0+ZGVhbGxvY190YXNrKSB7Cj4gLSAgICAgICAg
ICAgICAgICAgICAgICAga3RocmVhZF9zdG9wKHF1ZXVlLT5kZWFsbG9jX3Rhc2spOwo+IC0gICAg
ICAgICAgICAgICAgICAgICAgIHF1ZXVlLT5kZWFsbG9jX3Rhc2sgPSBOVUxMOwo+IC0gICAgICAg
ICAgICAgICB9Cj4gLQo+IC0gICAgICAgICAgICAgICBpZiAocXVldWUtPnR4X2lycSkgewo+IC0g
ICAgICAgICAgICAgICAgICAgICAgIGlmIChxdWV1ZS0+dHhfaXJxID09IHF1ZXVlLT5yeF9pcnEp
Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmJpbmRfZnJvbV9pcnFoYW5kbGVy
KHF1ZXVlLT50eF9pcnEsIHF1ZXVlKTsKPiAtICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsK
PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuYmluZF9mcm9tX2lycWhhbmRsZXIo
cXVldWUtPnR4X2lycSwgcXVldWUpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dW5iaW5kX2Zyb21faXJxaGFuZGxlcihxdWV1ZS0+cnhfaXJxLCBxdWV1ZSk7Cj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgfQo+IC0gICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLT50eF9pcnEg
PSAwOwo+IC0gICAgICAgICAgICAgICB9Cj4gLQo+IC0gICAgICAgICAgICAgICB4ZW52aWZfdW5t
YXBfZnJvbnRlbmRfZGF0YV9yaW5ncyhxdWV1ZSk7Cj4gKyAgICAgICAgICAgICAgIHhlbnZpZl9k
aXNjb25uZWN0X3F1ZXVlKHF1ZXVlKTsKPiAgICAgICAgIH0KPgo+ICAgICAgICAgeGVudmlmX21j
YXN0X2FkZHJfbGlzdF9mcmVlKHZpZik7Cj4gLS0KPiAyLjE2LjQKPgoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApY
ZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 4DDB223124
	for <lists+xen-devel@lfdr.de>; Mon, 20 May 2019 12:16:50 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hSfId-0007tW-OS; Mon, 20 May 2019 10:13:43 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=EBqs=TU=citrix.com=andrew.cooper3@srs-us1.protection.inumbo.net>)
 id 1hSfId-0007tQ-3L
 for xen-devel@lists.xenproject.org; Mon, 20 May 2019 10:13:43 +0000
X-Inumbo-ID: f06674dc-7ae7-11e9-af9b-a3075a055f09
Received: from esa5.hc3370-68.iphmx.com (unknown [216.71.155.168])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id f06674dc-7ae7-11e9-af9b-a3075a055f09;
 Mon, 20 May 2019 10:13:40 +0000 (UTC)
Authentication-Results: esa5.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=andrew.cooper3@citrix.com;
 spf=SoftFail smtp.mailfrom=Andrew.Cooper3@citrix.com;
 spf=None smtp.helo=postmaster@MIAPEX02MSOL02.citrite.net
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 andrew.cooper3@citrix.com) identity=pra;
 client-ip=23.29.105.83; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="andrew.cooper3@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: SoftFail (esa5.hc3370-68.iphmx.com: domain of
 Andrew.Cooper3@citrix.com is inclined to not designate
 23.29.105.83 as permitted sender) identity=mailfrom;
 client-ip=23.29.105.83; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="Andrew.Cooper3@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 include:spf.citrix.com
 include:spf2.citrix.com include:ironport.citrix.com
 exists:%{i}._spf.mta.salesforce.com ~all"
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@MIAPEX02MSOL02.citrite.net) identity=helo;
 client-ip=23.29.105.83; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="postmaster@MIAPEX02MSOL02.citrite.net";
 x-conformance=sidf_compatible
IronPort-SDR: 6bUFQLSLEZfv8tEm/hNXox9POIEvjyfqELyKvQi4sC4XjXlg09ubnelpSyx0pTKAf6wWEGqTJR
 KYFrmrz5YPueiItdZJqnk+hD4UnZPhKSSKEDqe1md3QHARI7r5t8uYyOvEdF2MqO98EsCKo/Kl
 qnPIuphx6uMGQyjcNhiwWrKGVTU6royLNBGgbp5DXivpwMoN6hG9QycWE82gt4+VSItHgnCX39
 yIjIOkuutLnc0YP085TT6JFMJ4qnTRGmQ9HfsCGna4qO5GL7Si5NMyCKony6G+BZFPVsNY8bEh
 ebQ=
X-SBRS: 2.7
X-MesageID: 627302
X-Ironport-Server: esa5.hc3370-68.iphmx.com
X-Remote-IP: 23.29.105.83
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.60,491,1549947600"; 
   d="scan'208";a="627302"
From: Andrew Cooper <andrew.cooper3@citrix.com>
To: Xen-devel <xen-devel@lists.xenproject.org>
Date: Mon, 20 May 2019 11:13:36 +0100
Message-ID: <1558347216-19179-1-git-send-email-andrew.cooper3@citrix.com>
X-Mailer: git-send-email 2.1.4
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH] x86/svm: Drop support for AMD's Lightweight
 Profiling
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Wei Liu <wei.liu2@citrix.com>, Jan Beulich <JBeulich@suse.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>,
 Boris Ostrovsky <boris.ostrovsky@oracle.com>,
 Brian Woods <brian.woods@amd.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

TGlnaHR3ZWlnaHQgUHJvZmlsaW5nIHdhcyBpbnRyb2R1Y2VkIGluIEJ1bGxkb3plciAoRmFtMTVo
KSwgYnV0IHdhcyBkcm9wcGVkCmZyb20gWmVuIChGYW0xN2gpIHByb2Nlc3NvcnMuICBGdXJ0aGVy
bW9yZSwgTFdQIHdhcyBkcm9wcGVkIGZyb20gRmFtMTUvMTYgQ1BVcwp3aGVuIElCUEIgZm9yIFNw
ZWN0cmUgdjIgd2FzIGludHJvZHVjZWQgaW4gbWljcm9jb2RlLCBvd2luZyB0byBMV1Agbm90IGJl
aW5nCnVzZWQgaW4gcHJhY3RpY2UuCgpBcyBhIHJlc3VsdCwgQ1BVcyB3aGljaCBhcmUgb3BlcmF0
aW5nIHdpdGhpbiBzcGVjaWZpY2F0aW9uIChpLmUuIHdpdGggdXAgdG8KZGF0ZSBtaWNyb2NvZGUp
IG5vIGxvbmdlciBoYXZlIHRoaXMgZmVhdHVyZSwgYW5kIHRoZXJlZm9yZSBhcmUgbm90IHVzaW5n
IGl0LgoKRHJvcCBzdXBwb3J0IGZyb20gWGVuLiAgVGhlIG1haW4gbW90aXZhdGlvbiBoZXJlIGlz
IHRvIHJlbW92ZSB1bm5lY2Vzc2FyeQpjb21wbGV4aXR5IGZyb20gQ1BVSUQgaGFuZGxpbmcsIGJ1
dCBpdCBhbHNvIHRpZGllcyB1cCB0aGUgU1ZNIGNvZGUgbmljZWx5LgoKU2lnbmVkLW9mZi1ieTog
QW5kcmV3IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KLS0tCkNDOiBKYW4gQmV1
bGljaCA8SkJldWxpY2hAc3VzZS5jb20+CkNDOiBXZWkgTGl1IDx3ZWkubGl1MkBjaXRyaXguY29t
PgpDQzogUm9nZXIgUGF1IE1vbm7DqSA8cm9nZXIucGF1QGNpdHJpeC5jb20+CkNDOiBCb3JpcyBP
c3Ryb3Zza3kgPGJvcmlzLm9zdHJvdnNreUBvcmFjbGUuY29tPgpDQzogU3VyYXZlZSBTdXRoaWt1
bHBhbml0IDxzdXJhdmVlLnN1dGhpa3VscGFuaXRAYW1kLmNvbT4KQ0M6IEJyaWFuIFdvb2RzIDxi
cmlhbi53b29kc0BhbWQuY29tPgotLS0KIHhlbi9hcmNoL3g4Ni9jcHVpZC5jICAgICAgICAgICAg
ICAgICAgICAgICAgfCAyMiArLS0tLS0tLS0KIHhlbi9hcmNoL3g4Ni9odm0vc3ZtL3N2bS5jICAg
ICAgICAgICAgICAgICAgfCA3NyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogeGVuL2Fy
Y2gveDg2L2h2bS9zdm0vdm1jYi5jICAgICAgICAgICAgICAgICB8ICA1IC0tCiB4ZW4vYXJjaC94
ODYvbXNyLmMgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDQgKysKIHhlbi9hcmNoL3g4Ni94
c3RhdGUuYyAgICAgICAgICAgICAgICAgICAgICAgfCAgMyArLQogeGVuL2luY2x1ZGUvYXNtLXg4
Ni9jcHVmZWF0dXJlLmggICAgICAgICAgICB8ICAxIC0KIHhlbi9pbmNsdWRlL2FzbS14ODYvaHZt
L3N2bS92bWNiLmggICAgICAgICAgfCAgNCAtLQogeGVuL2luY2x1ZGUvYXNtLXg4Ni94c3RhdGUu
aCAgICAgICAgICAgICAgICB8ICAzICstCiB4ZW4vaW5jbHVkZS9wdWJsaWMvYXJjaC14ODYvY3B1
ZmVhdHVyZXNldC5oIHwgIDIgKy0KIDkgZmlsZXMgY2hhbmdlZCwgOCBpbnNlcnRpb25zKCspLCAx
MTMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L2NwdWlkLmMgYi94ZW4v
YXJjaC94ODYvY3B1aWQuYwppbmRleCA2ZjU5MzI1Li42NjZmYmJiIDEwMDY0NAotLS0gYS94ZW4v
YXJjaC94ODYvY3B1aWQuYworKysgYi94ZW4vYXJjaC94ODYvY3B1aWQuYwpAQCAtMTYzLDE0ICsx
NjMsNiBAQCBzdGF0aWMgdm9pZCByZWNhbGN1bGF0ZV94c3RhdGUoc3RydWN0IGNwdWlkX3BvbGlj
eSAqcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgeHN0YXRlX3NpemVzW1g4Nl9YQ1IwX1BL
UlVfUE9TXSk7CiAgICAgfQogCi0gICAgaWYgKCBwLT5leHRkLmx3cCApCi0gICAgewotICAgICAg
ICB4c3RhdGVzIHw9IFg4Nl9YQ1IwX0xXUDsKLSAgICAgICAgeHN0YXRlX3NpemUgPSBtYXgoeHN0
YXRlX3NpemUsCi0gICAgICAgICAgICAgICAgICAgICAgICAgIHhzdGF0ZV9vZmZzZXRzW1g4Nl9Y
Q1IwX0xXUF9QT1NdICsKLSAgICAgICAgICAgICAgICAgICAgICAgICAgeHN0YXRlX3NpemVzW1g4
Nl9YQ1IwX0xXUF9QT1NdKTsKLSAgICB9Ci0KICAgICBwLT54c3RhdGUubWF4X3NpemUgID0gIHhz
dGF0ZV9zaXplOwogICAgIHAtPnhzdGF0ZS54Y3IwX2xvdyAgPSAgeHN0YXRlcyAmIH5YU1RBVEVf
WFNBVkVTX09OTFk7CiAgICAgcC0+eHN0YXRlLnhjcjBfaGlnaCA9ICh4c3RhdGVzICYgflhTVEFU
RV9YU0FWRVNfT05MWSkgPj4gMzI7CkBAIC0yNjUsOCArMjU3LDcgQEAgc3RhdGljIHZvaWQgcmVj
YWxjdWxhdGVfbWlzYyhzdHJ1Y3QgY3B1aWRfcG9saWN5ICpwKQogICAgICAgICB6ZXJvX2xlYXZl
cyhwLT5leHRkLnJhdywgMHhiLCAweDE4KTsKIAogICAgICAgICBwLT5leHRkLnJhd1sweDFiXSA9
IEVNUFRZX0xFQUY7IC8qIElCUyAtIG5vdCBzdXBwb3J0ZWQuICovCi0KLSAgICAgICAgcC0+ZXh0
ZC5yYXdbMHgxY10uYSA9IDA7IC8qIExXUC5hIGVudGlyZWx5IGR5bmFtaWMuICovCisgICAgICAg
IHAtPmV4dGQucmF3WzB4MWNdID0gRU1QVFlfTEVBRjsgLyogTFdQIC0gbm90IHN1cHBvcnRlZC4g
Ki8KICAgICAgICAgYnJlYWs7CiAgICAgfQogfQpAQCAtNTgxLDExICs1NzIsNiBAQCB2b2lkIHJl
Y2FsY3VsYXRlX2NwdWlkX3BvbGljeShzdHJ1Y3QgZG9tYWluICpkKQogCiAgICAgaWYgKCAhcC0+
ZXh0ZC5wYWdlMWdiICkKICAgICAgICAgcC0+ZXh0ZC5yYXdbMHgxOV0gPSBFTVBUWV9MRUFGOwot
Ci0gICAgaWYgKCBwLT5leHRkLmx3cCApCi0gICAgICAgIHAtPmV4dGQucmF3WzB4MWNdLmQgJj0g
bWF4LT5leHRkLnJhd1sweDFjXS5kOwotICAgIGVsc2UKLSAgICAgICAgcC0+ZXh0ZC5yYXdbMHgx
Y10gPSBFTVBUWV9MRUFGOwogfQogCiBpbnQgaW5pdF9kb21haW5fY3B1aWRfcG9saWN5KHN0cnVj
dCBkb21haW4gKmQpCkBAIC05NzIsMTIgKzk1OCw2IEBAIHZvaWQgZ3Vlc3RfY3B1aWQoY29uc3Qg
c3RydWN0IHZjcHUgKnYsIHVpbnQzMl90IGxlYWYsCiAgICAgICAgICAgICAgICAgcmVzLT5kIHw9
IGNwdWZlYXRfbWFzayhYODZfRkVBVFVSRV9NVFJSKTsKICAgICAgICAgfQogICAgICAgICBicmVh
azsKLQotICAgIGNhc2UgMHg4MDAwMDAxYzoKLSAgICAgICAgaWYgKCAodi0+YXJjaC54Y3IwICYg
WDg2X1hDUjBfTFdQKSAmJiBjcHVfaGFzX3N2bSApCi0gICAgICAgICAgICAvKiBUdXJuIG9uIGF2
YWlsYWJsZSBiaXQgYW5kIG90aGVyIGZlYXR1cmVzIHNwZWNpZmllZCBpbiBsd3BfY2ZnLiAqLwot
ICAgICAgICAgICAgcmVzLT5hID0gKHJlcy0+ZCAmIHYtPmFyY2guaHZtLnN2bS5ndWVzdF9sd3Bf
Y2ZnKSB8IDE7Ci0gICAgICAgIGJyZWFrOwogICAgIH0KIH0KIApkaWZmIC0tZ2l0IGEveGVuL2Fy
Y2gveDg2L2h2bS9zdm0vc3ZtLmMgYi94ZW4vYXJjaC94ODYvaHZtL3N2bS9zdm0uYwppbmRleCAw
YmViMzFiLi45ZjI2NDkzIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvaHZtL3N2bS9zdm0uYwor
KysgYi94ZW4vYXJjaC94ODYvaHZtL3N2bS9zdm0uYwpAQCAtOTM5LDcyICs5MzksNiBAQCBzdGF0
aWMgdm9pZCBzdm1faW5pdF9oeXBlcmNhbGxfcGFnZShzdHJ1Y3QgZG9tYWluICpkLCB2b2lkICpo
eXBlcmNhbGxfcGFnZSkKICAgICAqKHUxNiAqKShoeXBlcmNhbGxfcGFnZSArIChfX0hZUEVSVklT
T1JfaXJldCAqIDMyKSkgPSAweDBiMGY7IC8qIHVkMiAqLwogfQogCi1zdGF0aWMgdm9pZCBzdm1f
bHdwX2ludGVycnVwdChzdHJ1Y3QgY3B1X3VzZXJfcmVncyAqcmVncykKLXsKLSAgICBzdHJ1Y3Qg
dmNwdSAqY3VyciA9IGN1cnJlbnQ7Ci0KLSAgICBhY2tfQVBJQ19pcnEoKTsKLSAgICB2bGFwaWNf
c2V0X2lycSgKLSAgICAgICAgdmNwdV92bGFwaWMoY3VyciksCi0gICAgICAgIChjdXJyLT5hcmNo
Lmh2bS5zdm0uZ3Vlc3RfbHdwX2NmZyA+PiA0MCkgJiAweGZmLAotICAgICAgICAwKTsKLX0KLQot
c3RhdGljIGlubGluZSB2b2lkIHN2bV9sd3Bfc2F2ZShzdHJ1Y3QgdmNwdSAqdikKLXsKLSAgICAv
KiBEb24ndCBtZXNzIHVwIHdpdGggb3RoZXIgZ3Vlc3RzLiBEaXNhYmxlIExXUCBmb3IgbmV4dCBW
Q1BVLiAqLwotICAgIGlmICggdi0+YXJjaC5odm0uc3ZtLmd1ZXN0X2x3cF9jZmcgKQotICAgIHsK
LSAgICAgICAgd3Jtc3JsKE1TUl9BTUQ2NF9MV1BfQ0ZHLCAweDApOwotICAgICAgICB3cm1zcmwo
TVNSX0FNRDY0X0xXUF9DQkFERFIsIDB4MCk7Ci0gICAgfQotfQotCi1zdGF0aWMgaW5saW5lIHZv
aWQgc3ZtX2x3cF9sb2FkKHN0cnVjdCB2Y3B1ICp2KQotewotICAgIC8qIE9ubHkgTFdQX0NGRyBp
cyByZWxvYWRlZC4gTFdQX0NCQUREUiB3aWxsIGJlIHJlbG9hZGVkIHZpYSB4cnN0b3IuICovCi0g
ICBpZiAoIHYtPmFyY2guaHZtLnN2bS5ndWVzdF9sd3BfY2ZnICkKLSAgICAgICB3cm1zcmwoTVNS
X0FNRDY0X0xXUF9DRkcsIHYtPmFyY2guaHZtLnN2bS5jcHVfbHdwX2NmZyk7Ci19Ci0KLS8qIFVw
ZGF0ZSBMV1BfQ0ZHIE1TUiAoMHhjMDAwMDEwNSkuIFJldHVybiAtMSBpZiBlcnJvcjsgb3RoZXJ3
aXNlIHJldHVybnMgMC4gKi8KLXN0YXRpYyBpbnQgc3ZtX3VwZGF0ZV9sd3BfY2ZnKHN0cnVjdCB2
Y3B1ICp2LCB1aW50NjRfdCBtc3JfY29udGVudCkKLXsKLSAgICB1aW50MzJfdCBtc3JfbG93Owot
ICAgIHN0YXRpYyB1aW50OF90IGx3cF9pbnRyX3ZlY3RvcjsKLQotICAgIGlmICggeHNhdmVfZW5h
YmxlZCh2KSAmJiBjcHVfaGFzX2x3cCApCi0gICAgewotICAgICAgICBtc3JfbG93ID0gKHVpbnQz
Ml90KW1zcl9jb250ZW50OwotICAgICAgICAKLSAgICAgICAgLyogZ2VuZXJhdGUgI0dQIGlmIGd1
ZXN0IHRyaWVzIHRvIHR1cm4gb24gdW5zdXBwb3J0ZWQgZmVhdHVyZXMuICovCi0gICAgICAgIGlm
ICggbXNyX2xvdyAmIH52LT5kb21haW4tPmFyY2guY3B1aWQtPmV4dGQucmF3WzB4MWNdLmQgKQot
ICAgICAgICAgICAgcmV0dXJuIC0xOwotCi0gICAgICAgIHYtPmFyY2guaHZtLnN2bS5ndWVzdF9s
d3BfY2ZnID0gbXNyX2NvbnRlbnQ7Ci0KLSAgICAgICAgLyogc2V0dXAgaW50ZXJydXB0IGhhbmRs
ZXIgaWYgbmVlZGVkICovCi0gICAgICAgIGlmICggKG1zcl9jb250ZW50ICYgMHg4MDAwMDAwMCkg
JiYgKChtc3JfY29udGVudCA+PiA0MCkgJiAweGZmKSApCi0gICAgICAgIHsKLSAgICAgICAgICAg
IGFsbG9jX2RpcmVjdF9hcGljX3ZlY3RvcigmbHdwX2ludHJfdmVjdG9yLCBzdm1fbHdwX2ludGVy
cnVwdCk7Ci0gICAgICAgICAgICB2LT5hcmNoLmh2bS5zdm0uY3B1X2x3cF9jZmcgPSAobXNyX2Nv
bnRlbnQgJiAweGZmZmYwMGZmZmZmZmZmZmZVTEwpCi0gICAgICAgICAgICAgICAgfCAoKHVpbnQ2
NF90KWx3cF9pbnRyX3ZlY3RvciA8PCA0MCk7Ci0gICAgICAgIH0KLSAgICAgICAgZWxzZQotICAg
ICAgICB7Ci0gICAgICAgICAgICAvKiBvdGhlcndpc2UgZGlzYWJsZSBpdCAqLwotICAgICAgICAg
ICAgdi0+YXJjaC5odm0uc3ZtLmNwdV9sd3BfY2ZnID0gbXNyX2NvbnRlbnQgJiAweGZmZmYwMGZm
N2ZmZmZmZmZVTEw7Ci0gICAgICAgIH0KLSAgICAgICAgCi0gICAgICAgIHdybXNybChNU1JfQU1E
NjRfTFdQX0NGRywgdi0+YXJjaC5odm0uc3ZtLmNwdV9sd3BfY2ZnKTsKLQotICAgICAgICAvKiB0
cmFjayBub25hbHp5IHN0YXRlIGlmIExXUF9DRkcgaXMgbm9uLXplcm8uICovCi0gICAgICAgIHYt
PmFyY2gubm9ubGF6eV94c3RhdGVfdXNlZCA9ICEhKG1zcl9jb250ZW50KTsKLSAgICB9Ci0KLSAg
ICByZXR1cm4gMDsKLX0KLQogc3RhdGljIGlubGluZSB2b2lkIHN2bV90c2NfcmF0aW9fc2F2ZShz
dHJ1Y3QgdmNwdSAqdikKIHsKICAgICAvKiBPdGhlciB2Y3B1cyBtaWdodCBub3QgaGF2ZSB2dHNj
IGVuYWJsZWQuIFNvIGRpc2FibGUgVFNDX1JBVElPIGhlcmUuICovCkBAIC0xMDM0LDcgKzk2OCw2
IEBAIHN0YXRpYyB2b2lkIHN2bV9jdHh0X3N3aXRjaF9mcm9tKHN0cnVjdCB2Y3B1ICp2KQogICAg
ICAgICBzdm1fZnB1X2xlYXZlKHYpOwogCiAgICAgc3ZtX3NhdmVfZHIodik7Ci0gICAgc3ZtX2x3
cF9zYXZlKHYpOwogICAgIHN2bV90c2NfcmF0aW9fc2F2ZSh2KTsKIAogICAgIHN2bV9zeW5jX3Zt
Y2Iodiwgdm1jYl9uZWVkc192bWxvYWQpOwpAQCAtMTA2Niw3ICs5OTksNiBAQCBzdGF0aWMgdm9p
ZCBzdm1fY3R4dF9zd2l0Y2hfdG8oc3RydWN0IHZjcHUgKnYpCiAKICAgICBzdm1fdm1zYXZlX3Bh
KHBlcl9jcHUoaG9zdF92bWNiLCBjcHUpKTsKICAgICB2bWNiLT5jbGVhbmJpdHMuYnl0ZXMgPSAw
OwotICAgIHN2bV9sd3BfbG9hZCh2KTsKICAgICBzdm1fdHNjX3JhdGlvX2xvYWQodik7CiAKICAg
ICBpZiAoIGNwdV9oYXNfbXNyX3RzY19hdXggKQpAQCAtMjAwMiwxMCArMTkzNCw2IEBAIHN0YXRp
YyBpbnQgc3ZtX21zcl9yZWFkX2ludGVyY2VwdCh1bnNpZ25lZCBpbnQgbXNyLCB1aW50NjRfdCAq
bXNyX2NvbnRlbnQpCiAgICAgICAgICptc3JfY29udGVudCA9IHZtY2JfZ2V0X2xhc3RpbnR0b2lw
KHZtY2IpOwogICAgICAgICBicmVhazsKIAotICAgIGNhc2UgTVNSX0FNRDY0X0xXUF9DRkc6Ci0g
ICAgICAgICptc3JfY29udGVudCA9IHYtPmFyY2guaHZtLnN2bS5ndWVzdF9sd3BfY2ZnOwotICAg
ICAgICBicmVhazsKLQogICAgIGNhc2UgTVNSX0s3X1BFUkZDVFIwOgogICAgIGNhc2UgTVNSX0s3
X1BFUkZDVFIxOgogICAgIGNhc2UgTVNSX0s3X1BFUkZDVFIyOgpAQCAtMjE3NywxMSArMjEwNSw2
IEBAIHN0YXRpYyBpbnQgc3ZtX21zcl93cml0ZV9pbnRlcmNlcHQodW5zaWduZWQgaW50IG1zciwg
dWludDY0X3QgbXNyX2NvbnRlbnQpCiAgICAgICAgIHZtY2Jfc2V0X2xhc3RpbnR0b2lwKHZtY2Is
IG1zcl9jb250ZW50KTsKICAgICAgICAgYnJlYWs7CiAKLSAgICBjYXNlIE1TUl9BTUQ2NF9MV1Bf
Q0ZHOgotICAgICAgICBpZiAoIHN2bV91cGRhdGVfbHdwX2NmZyh2LCBtc3JfY29udGVudCkgPCAw
ICkKLSAgICAgICAgICAgIGdvdG8gZ3BmOwotICAgICAgICBicmVhazsKLQogICAgIGNhc2UgTVNS
X0s3X1BFUkZDVFIwOgogICAgIGNhc2UgTVNSX0s3X1BFUkZDVFIxOgogICAgIGNhc2UgTVNSX0s3
X1BFUkZDVFIyOgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L2h2bS9zdm0vdm1jYi5jIGIveGVu
L2FyY2gveDg2L2h2bS9zdm0vdm1jYi5jCmluZGV4IDlkMWM1YmYuLjcxZWU3MTAgMTAwNjQ0Ci0t
LSBhL3hlbi9hcmNoL3g4Ni9odm0vc3ZtL3ZtY2IuYworKysgYi94ZW4vYXJjaC94ODYvaHZtL3N2
bS92bWNiLmMKQEAgLTEwMCwxMSArMTAwLDYgQEAgc3RhdGljIGludCBjb25zdHJ1Y3Rfdm1jYihz
dHJ1Y3QgdmNwdSAqdikKICAgICBzdm1fZGlzYWJsZV9pbnRlcmNlcHRfZm9yX21zcih2LCBNU1Jf
U1RBUik7CiAgICAgc3ZtX2Rpc2FibGVfaW50ZXJjZXB0X2Zvcl9tc3IodiwgTVNSX1NZU0NBTExf
TUFTSyk7CiAKLSAgICAvKiBMV1BfQ0JBRERSIE1TUiBpcyBzYXZlZCBhbmQgcmVzdG9yZWQgYnkg
RlBVIGNvZGUuIFNvIFNWTSBkb2Vzbid0IG5lZWQgdG8KLSAgICAgKiBpbnRlcmNlcHQgaXQuICov
Ci0gICAgaWYgKCBjcHVfaGFzX2x3cCApCi0gICAgICAgIHN2bV9kaXNhYmxlX2ludGVyY2VwdF9m
b3JfbXNyKHYsIE1TUl9BTUQ2NF9MV1BfQ0JBRERSKTsKLQogICAgIHZtY2ItPl9tc3JwbV9iYXNl
X3BhID0gdmlydF90b19tYWRkcihzdm0tPm1zcnBtKTsKICAgICB2bWNiLT5faW9wbV9iYXNlX3Bh
ID0gX19wYSh2LT5kb21haW4tPmFyY2guaHZtLmlvX2JpdG1hcCk7CiAKZGlmZiAtLWdpdCBhL3hl
bi9hcmNoL3g4Ni9tc3IuYyBiL3hlbi9hcmNoL3g4Ni9tc3IuYwppbmRleCA4ODNiNTdiLi41YTJl
Zjc4IDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvbXNyLmMKKysrIGIveGVuL2FyY2gveDg2L21z
ci5jCkBAIC0xMzIsNiArMTMyLDggQEAgaW50IGd1ZXN0X3JkbXNyKHN0cnVjdCB2Y3B1ICp2LCB1
aW50MzJfdCBtc3IsIHVpbnQ2NF90ICp2YWwpCiAgICAgY2FzZSBNU1JfRkxVU0hfQ01EOgogICAg
ICAgICAvKiBXcml0ZS1vbmx5ICovCiAgICAgY2FzZSBNU1JfVFNYX0ZPUkNFX0FCT1JUOgorICAg
IGNhc2UgTVNSX0FNRDY0X0xXUF9DRkc6CisgICAgY2FzZSBNU1JfQU1ENjRfTFdQX0NCQUREUjoK
ICAgICAgICAgLyogTm90IG9mZmVyZWQgdG8gZ3Vlc3RzLiAqLwogICAgICAgICBnb3RvIGdwX2Zh
dWx0OwogCkBAIC0yNzIsNiArMjc0LDggQEAgaW50IGd1ZXN0X3dybXNyKHN0cnVjdCB2Y3B1ICp2
LCB1aW50MzJfdCBtc3IsIHVpbnQ2NF90IHZhbCkKICAgICBjYXNlIE1TUl9BUkNIX0NBUEFCSUxJ
VElFUzoKICAgICAgICAgLyogUmVhZC1vbmx5ICovCiAgICAgY2FzZSBNU1JfVFNYX0ZPUkNFX0FC
T1JUOgorICAgIGNhc2UgTVNSX0FNRDY0X0xXUF9DRkc6CisgICAgY2FzZSBNU1JfQU1ENjRfTFdQ
X0NCQUREUjoKICAgICAgICAgLyogTm90IG9mZmVyZWQgdG8gZ3Vlc3RzLiAqLwogICAgICAgICBn
b3RvIGdwX2ZhdWx0OwogCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYveHN0YXRlLmMgYi94ZW4v
YXJjaC94ODYveHN0YXRlLmMKaW5kZXggODU4ZDFhNi4uM2RhNjA5YSAxMDA2NDQKLS0tIGEveGVu
L2FyY2gveDg2L3hzdGF0ZS5jCisrKyBiL3hlbi9hcmNoL3g4Ni94c3RhdGUuYwpAQCAtNzI1LDgg
KzcyNSw3IEBAIGludCBoYW5kbGVfeHNldGJ2KHUzMiBpbmRleCwgdTY0IG5ld19idikKICAgICBj
dXJyLT5hcmNoLnhjcjAgPSBuZXdfYnY7CiAgICAgY3Vyci0+YXJjaC54Y3IwX2FjY3VtIHw9IG5l
d19idjsKIAotICAgIC8qIExXUCBzZXRzIG5vbmxhenlfeHN0YXRlX3VzZWQgaW5kZXBlbmRlbnRs
eS4gKi8KLSAgICBpZiAoIG5ld19idiAmIChYU1RBVEVfTk9OTEFaWSAmIH5YODZfWENSMF9MV1Ap
ICkKKyAgICBpZiAoIG5ld19idiAmIFhTVEFURV9OT05MQVpZICkKICAgICAgICAgY3Vyci0+YXJj
aC5ub25sYXp5X3hzdGF0ZV91c2VkID0gMTsKIAogICAgIG1hc2sgJj0gY3Vyci0+ZnB1X2RpcnRp
ZWQgPyB+WFNUQVRFX0ZQX1NTRSA6IFhTVEFURV9OT05MQVpZOwpkaWZmIC0tZ2l0IGEveGVuL2lu
Y2x1ZGUvYXNtLXg4Ni9jcHVmZWF0dXJlLmggYi94ZW4vaW5jbHVkZS9hc20teDg2L2NwdWZlYXR1
cmUuaAppbmRleCA3NDU4MDFmLi5lNGYwMzQzIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20t
eDg2L2NwdWZlYXR1cmUuaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L2NwdWZlYXR1cmUuaApA
QCAtNzgsNyArNzgsNiBAQAogI2RlZmluZSBjcHVfaGFzX3N2bSAgICAgICAgICAgICBib290X2Nw
dV9oYXMoWDg2X0ZFQVRVUkVfU1ZNKQogI2RlZmluZSBjcHVfaGFzX3NzZTRhICAgICAgICAgICBi
b290X2NwdV9oYXMoWDg2X0ZFQVRVUkVfU1NFNEEpCiAjZGVmaW5lIGNwdV9oYXNfeG9wICAgICAg
ICAgICAgIGJvb3RfY3B1X2hhcyhYODZfRkVBVFVSRV9YT1ApCi0jZGVmaW5lIGNwdV9oYXNfbHdw
ICAgICAgICAgICAgIGJvb3RfY3B1X2hhcyhYODZfRkVBVFVSRV9MV1ApCiAjZGVmaW5lIGNwdV9o
YXNfZm1hNCAgICAgICAgICAgIGJvb3RfY3B1X2hhcyhYODZfRkVBVFVSRV9GTUE0KQogI2RlZmlu
ZSBjcHVfaGFzX3RibSAgICAgICAgICAgICBib290X2NwdV9oYXMoWDg2X0ZFQVRVUkVfVEJNKQog
CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdm0vdm1jYi5oIGIveGVuL2lu
Y2x1ZGUvYXNtLXg4Ni9odm0vc3ZtL3ZtY2IuaAppbmRleCA3MDE3NzA1Li41YzcxMDI4IDEwMDY0
NAotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdm0vdm1jYi5oCisrKyBiL3hlbi9pbmNs
dWRlL2FzbS14ODYvaHZtL3N2bS92bWNiLmgKQEAgLTUzNCwxMCArNTM0LDYgQEAgc3RydWN0IHN2
bV92Y3B1IHsKICAgICB1aW50NjRfdCBndWVzdF9zeXNlbnRlcl9jczsKICAgICB1aW50NjRfdCBn
dWVzdF9zeXNlbnRlcl9lc3A7CiAgICAgdWludDY0X3QgZ3Vlc3Rfc3lzZW50ZXJfZWlwOwotCi0g
ICAgLyogQU1EIGxpZ2h0d2VpZ2h0IHByb2ZpbGluZyBNU1IgKi8KLSAgICB1aW50NjRfdCBndWVz
dF9sd3BfY2ZnOyAgICAgIC8qIGd1ZXN0IHZlcnNpb24gKi8KLSAgICB1aW50NjRfdCBjcHVfbHdw
X2NmZzsgICAgICAgIC8qIENQVSB2ZXJzaW9uICovCiB9OwogCiBzdHJ1Y3Qgdm1jYl9zdHJ1Y3Qg
KmFsbG9jX3ZtY2Iodm9pZCk7CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9hc20teDg2L3hzdGF0
ZS5oIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni94c3RhdGUuaAppbmRleCA0N2Y2MDJiLi43YWIwYmRk
IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L3hzdGF0ZS5oCisrKyBiL3hlbi9pbmNs
dWRlL2FzbS14ODYveHN0YXRlLmgKQEAgLTM1LDggKzM1LDcgQEAgZXh0ZXJuIHVpbnQzMl90IG14
Y3NyX21hc2s7CiAgICAgICAgICAgICAgICAgICAgICAgICBYU1RBVEVfTk9OTEFaWSkKIAogI2Rl
ZmluZSBYU1RBVEVfQUxMICAgICAofigxVUxMIDw8IDYzKSkKLSNkZWZpbmUgWFNUQVRFX05PTkxB
WlkgKFg4Nl9YQ1IwX0xXUCB8IFg4Nl9YQ1IwX0JORFJFR1MgfCBYODZfWENSMF9CTkRDU1IgfCBc
Ci0gICAgICAgICAgICAgICAgICAgICAgICBYODZfWENSMF9QS1JVKQorI2RlZmluZSBYU1RBVEVf
Tk9OTEFaWSAoWDg2X1hDUjBfQk5EUkVHUyB8IFg4Nl9YQ1IwX0JORENTUiB8IFg4Nl9YQ1IwX1BL
UlUpCiAjZGVmaW5lIFhTVEFURV9MQVpZICAgIChYU1RBVEVfQUxMICYgflhTVEFURV9OT05MQVpZ
KQogI2RlZmluZSBYU1RBVEVfWFNBVkVTX09OTFkgICAgICAgICAwCiAjZGVmaW5lIFhTVEFURV9D
T01QQUNUSU9OX0VOQUJMRUQgICgxVUxMIDw8IDYzKQpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUv
cHVibGljL2FyY2gteDg2L2NwdWZlYXR1cmVzZXQuaCBiL3hlbi9pbmNsdWRlL3B1YmxpYy9hcmNo
LXg4Ni9jcHVmZWF0dXJlc2V0LmgKaW5kZXggNTUyMzFkNC4uNzI3ZjQ4MiAxMDA2NDQKLS0tIGEv
eGVuL2luY2x1ZGUvcHVibGljL2FyY2gteDg2L2NwdWZlYXR1cmVzZXQuaAorKysgYi94ZW4vaW5j
bHVkZS9wdWJsaWMvYXJjaC14ODYvY3B1ZmVhdHVyZXNldC5oCkBAIC0xNzYsNyArMTc2LDcgQEAg
WEVOX0NQVUZFQVRVUkUoSUJTLCAgICAgICAgICAgMyozMisxMCkgLyogICBJbnN0cnVjdGlvbiBC
YXNlZCBTYW1wbGluZyAqLwogWEVOX0NQVUZFQVRVUkUoWE9QLCAgICAgICAgICAgMyozMisxMSkg
LypBICBleHRlbmRlZCBBVlggaW5zdHJ1Y3Rpb25zICovCiBYRU5fQ1BVRkVBVFVSRShTS0lOSVQs
ICAgICAgICAzKjMyKzEyKSAvKiAgIFNLSU5JVC9TVEdJIGluc3RydWN0aW9ucyAqLwogWEVOX0NQ
VUZFQVRVUkUoV0RULCAgICAgICAgICAgMyozMisxMykgLyogICBXYXRjaGRvZyB0aW1lciAqLwot
WEVOX0NQVUZFQVRVUkUoTFdQLCAgICAgICAgICAgMyozMisxNSkgLypTICBMaWdodCBXZWlnaHQg
UHJvZmlsaW5nICovCitYRU5fQ1BVRkVBVFVSRShMV1AsICAgICAgICAgICAzKjMyKzE1KSAvKiAg
IExpZ2h0IFdlaWdodCBQcm9maWxpbmcgKi8KIFhFTl9DUFVGRUFUVVJFKEZNQTQsICAgICAgICAg
IDMqMzIrMTYpIC8qQSAgNCBvcGVyYW5kcyBNQUMgaW5zdHJ1Y3Rpb25zICovCiBYRU5fQ1BVRkVB
VFVSRShOT0RFSURfTVNSLCAgICAzKjMyKzE5KSAvKiAgIE5vZGVJZCBNU1IgKi8KIFhFTl9DUFVG
RUFUVVJFKFRCTSwgICAgICAgICAgIDMqMzIrMjEpIC8qQSAgdHJhaWxpbmcgYml0IG1hbmlwdWxh
dGlvbnMgKi8KLS0gCjIuMS40CgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJv
amVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hl
bi1kZXZlbA==

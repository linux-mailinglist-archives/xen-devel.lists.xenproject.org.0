Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B07EC6B2FF
	for <lists+xen-devel@lfdr.de>; Wed, 17 Jul 2019 03:05:03 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hnYK2-00054X-H1; Wed, 17 Jul 2019 01:01:30 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=o+Bt=VO=invisiblethingslab.com=marmarek@srs-us1.protection.inumbo.net>)
 id 1hnYK0-000543-IR
 for xen-devel@lists.xenproject.org; Wed, 17 Jul 2019 01:01:28 +0000
X-Inumbo-ID: 66ac2038-a82e-11e9-b486-374560743dd7
Received: from wout4-smtp.messagingengine.com (unknown [64.147.123.20])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 66ac2038-a82e-11e9-b486-374560743dd7;
 Wed, 17 Jul 2019 01:01:26 +0000 (UTC)
Received: from compute7.internal (compute7.nyi.internal [10.202.2.47])
 by mailout.west.internal (Postfix) with ESMTP id E0987405;
 Tue, 16 Jul 2019 21:01:24 -0400 (EDT)
Received: from mailfrontend2 ([10.202.2.163])
 by compute7.internal (MEProxy); Tue, 16 Jul 2019 21:01:25 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=
 messagingengine.com; h=cc:content-transfer-encoding:content-type
 :date:from:in-reply-to:message-id:mime-version:references
 :subject:to:x-me-proxy:x-me-proxy:x-me-sender:x-me-sender
 :x-sasl-enc; s=fm3; bh=EpWbvZmO3WWqGzuHKNIUKK+om3VcVBbW+Wmx/jZtn
 28=; b=tfHi7rjG9i/5XmtKBagr9F7jklbSl3VMyiP81TDTr32w7dHTGCMEaRFV7
 15N5OCVaREFjxgLD7dBSzPx5F5werNxIorFgoI7ZYB8NE3Lvj0hnd1jJGfSWWXlY
 Lm3JBykpAjDPLHN3Rz1UB9hFIxw6hxfgZ1vBKjOTv96INBZnHDnZwqfXnaRxe8Iw
 wJhKnKVOOnUyDwxM44xIqsyb4mJxKoTTL6zT+MkqJv98xLX3Li8lO32CL6psYu77
 Ubd9V7TaDr0u3NvUAjBMGUdOpkaRLgp0R5hV60TyuXlRtnO17hHjVRkgXSiKzYHc
 7J7aAYB0mbEis8YHyB7fQ3N6rL7dA==
X-ME-Sender: <xms:ZHMuXRZ5Q9Ycuhr7RrqxLnhCh4veZBGAWb0Zy4BZ8f5keEKNHFVrAA>
X-ME-Proxy-Cause: gggruggvucftvghtrhhoucdtuddrgeduvddriedugdegvdcutefuodetggdotefrodftvf
 curfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfghnecu
 uegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenuc
 fjughrpefhvffufffkofgjfhggtgfgsehtkeertdertdejnecuhfhrohhmpeforghrvghk
 ucforghrtgiihihkohifshhkihdqifpkrhgvtghkihcuoehmrghrmhgrrhgvkhesihhnvh
 hishhisghlvghthhhinhhgshhlrggsrdgtohhmqeenucfkphepledurdeihedrfeegrdef
 feenucfrrghrrghmpehmrghilhhfrhhomhepmhgrrhhmrghrvghksehinhhvihhsihgslh
 gvthhhihhnghhslhgrsgdrtghomhenucevlhhushhtvghrufhiiigvpedu
X-ME-Proxy: <xmx:ZHMuXdhocBdEvdM27oJPANNc7EWzLiwrjQ5zrRp4OIP9HYQ5bhy_zQ>
 <xmx:ZHMuXbO93z83q3MgWe09xE2gbQoWROHf4xBl1jw1yUh-2jIow3pALw>
 <xmx:ZHMuXXN4ZE_uuz26cqmwzth8-oP3t6NMBXgJpWjPAiwDCfhcFjHf4g>
 <xmx:ZHMuXbpDGZH3oHkj5tDtkU76DoD5MZqQ1hkRwtweIz03f1cfukR18g>
Received: from localhost.localdomain (ip5b412221.dynamic.kabel-deutschland.de
 [91.65.34.33])
 by mail.messagingengine.com (Postfix) with ESMTPA id 7041A38008A;
 Tue, 16 Jul 2019 21:01:23 -0400 (EDT)
From: =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>
To: xen-devel@lists.xenproject.org
Date: Wed, 17 Jul 2019 03:00:41 +0200
Message-Id: <c906b2f0a0105aac72302ceaee6c69326f762e23.1563325215.git-series.marmarek@invisiblethingslab.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.537da3804adbe71352bed871578f3e893e2210c5.1563325215.git-series.marmarek@invisiblethingslab.com>
References: <cover.537da3804adbe71352bed871578f3e893e2210c5.1563325215.git-series.marmarek@invisiblethingslab.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v5 3/6] libxl: don't try to manipulate json
 config for stubdomain
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Anthony PERARD <anthony.perard@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Wei Liu <wei.liu2@citrix.com>,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Wei Liu <wl@xen.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

U3R1YmRvbWFpbiBkbyBub3QgaGF2ZSBpdCdzIG93biBjb25maWcgZmlsZSAtIGl0cyBjb25maWd1
cmF0aW9uIGlzCmRlcml2ZWQgZnJvbSB0YXJnZXQgZG9tYWlucy4gRG8gbm90IHRyeSB0byBtYW5p
cHVsYXRlIGl0IHdoZW4gYXR0YWNoaW5nClBDSSBkZXZpY2UuCgpUaGlzIGJ1ZyBwcmV2ZW50ZWQg
c3RhcnRpbmcgSFZNIHdpdGggc3R1YmRvbWFpbiBhbmQgUENJIHBhc3N0aHJvdWdoCmRldmljZSBh
dHRhY2hlZC4KClNpZ25lZC1vZmYtYnk6IE1hcmVrIE1hcmN6eWtvd3NraS1Hw7NyZWNraSA8bWFy
bWFyZWtAaW52aXNpYmxldGhpbmdzbGFiLmNvbT4KQWNrZWQtYnk6IFdlaSBMaXUgPHdlaS5saXUy
QGNpdHJpeC5jb20+Ci0tLQpDaGFuZ2VzIGluIHYzOgogLSBza2lwIGxpYnhsX19kbV9jaGVja19z
dGFydCB0b28sIGFzIHN0dWJkb21haW4gaXMgZ3VhcmFudGVlZCB0byBiZQogICBydW5uaW5nIGF0
IHRoaXMgc3RhZ2UgYWxyZWFkeQogLSBkbyBub3QgaW5pdCBkX2NvbmZpZyBhdCBhbGwsIGFzIGl0
IGlzIHVzZWQgb25seSBmb3IganNvbiBtYW5pcHVsYXRpb24KQ2hhbmdlcyBpbiB2NDoKIC0gYWRq
dXN0IGNvbW1lbnQgc3R5bGUKLS0tCiB0b29scy9saWJ4bC9saWJ4bF9wY2kuYyB8IDUwICsrKysr
KysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDMy
IGluc2VydGlvbnMoKyksIDE4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhs
L2xpYnhsX3BjaS5jIGIvdG9vbHMvbGlieGwvbGlieGxfcGNpLmMKaW5kZXggMTgwODllYS4uOTE0
NDgxNSAxMDA2NDQKLS0tIGEvdG9vbHMvbGlieGwvbGlieGxfcGNpLmMKKysrIGIvdG9vbHMvbGli
eGwvbGlieGxfcGNpLmMKQEAgLTEyMCwxMCArMTIwLDE0IEBAIHN0YXRpYyBpbnQgbGlieGxfX2Rl
dmljZV9wY2lfYWRkX3hlbnN0b3JlKGxpYnhsX19nYyAqZ2MsIHVpbnQzMl90IGRvbWlkLCBsaWJ4
bF9kCiAgICAgbGlieGxfZG9tYWluX2NvbmZpZyBkX2NvbmZpZzsKICAgICBsaWJ4bF9kZXZpY2Vf
cGNpIHBjaWRldl9zYXZlZDsKICAgICBsaWJ4bF9fZG9tYWluX3VzZXJkYXRhX2xvY2sgKmxvY2sg
PSBOVUxMOworICAgIGJvb2wgaXNfc3R1YmRvbWFpbiA9IGxpYnhsX2lzX3N0dWJkb20oQ1RYLCBk
b21pZCwgTlVMTCk7CiAKLSAgICBsaWJ4bF9kb21haW5fY29uZmlnX2luaXQoJmRfY29uZmlnKTsK
LSAgICBsaWJ4bF9kZXZpY2VfcGNpX2luaXQoJnBjaWRldl9zYXZlZCk7Ci0gICAgbGlieGxfZGV2
aWNlX3BjaV9jb3B5KENUWCwgJnBjaWRldl9zYXZlZCwgcGNpZGV2KTsKKyAgICAvKiBTdHViZG9t
YWluIGRvZXNuJ3QgaGF2ZSBvd24gY29uZmlnLiAqLworICAgIGlmICghaXNfc3R1YmRvbWFpbikg
eworICAgICAgICBsaWJ4bF9kb21haW5fY29uZmlnX2luaXQoJmRfY29uZmlnKTsKKyAgICAgICAg
bGlieGxfZGV2aWNlX3BjaV9pbml0KCZwY2lkZXZfc2F2ZWQpOworICAgICAgICBsaWJ4bF9kZXZp
Y2VfcGNpX2NvcHkoQ1RYLCAmcGNpZGV2X3NhdmVkLCBwY2lkZXYpOworICAgIH0KIAogICAgIGJl
X3BhdGggPSBsaWJ4bF9fZG9tYWluX2RldmljZV9iYWNrZW5kX3BhdGgoZ2MsIDAsIGRvbWlkLCAw
LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTElCWExf
X0RFVklDRV9LSU5EX1BDSSk7CkBAIC0xNTIsMjcgKzE1NiwzNSBAQCBzdGF0aWMgaW50IGxpYnhs
X19kZXZpY2VfcGNpX2FkZF94ZW5zdG9yZShsaWJ4bF9fZ2MgKmdjLCB1aW50MzJfdCBkb21pZCwg
bGlieGxfZAogICAgIEdDTkVXKGRldmljZSk7CiAgICAgbGlieGxfX2RldmljZV9mcm9tX3BjaWRl
dihnYywgZG9taWQsIHBjaWRldiwgZGV2aWNlKTsKIAotICAgIGxvY2sgPSBsaWJ4bF9fbG9ja19k
b21haW5fdXNlcmRhdGEoZ2MsIGRvbWlkKTsKLSAgICBpZiAoIWxvY2spIHsKLSAgICAgICAgcmMg
PSBFUlJPUl9MT0NLX0ZBSUw7Ci0gICAgICAgIGdvdG8gb3V0OwotICAgIH0KKyAgICAvKiAKKyAg
ICAgKiBTdHViZG9taW4gY29uZmlnIGlzIGRlcml2ZWQgZnJvbSBpdHMgdGFyZ2V0IGRvbWFpbiwg
aXQgZG9lc24ndCBoYXZlCisgICAgICogaXRzIG93biBmaWxlLgorICAgICAqLworICAgIGlmICgh
aXNfc3R1YmRvbWFpbikgeworICAgICAgICBsb2NrID0gbGlieGxfX2xvY2tfZG9tYWluX3VzZXJk
YXRhKGdjLCBkb21pZCk7CisgICAgICAgIGlmICghbG9jaykgeworICAgICAgICAgICAgcmMgPSBF
UlJPUl9MT0NLX0ZBSUw7CisgICAgICAgICAgICBnb3RvIG91dDsKKyAgICAgICAgfQogCi0gICAg
cmMgPSBsaWJ4bF9fZ2V0X2RvbWFpbl9jb25maWd1cmF0aW9uKGdjLCBkb21pZCwgJmRfY29uZmln
KTsKLSAgICBpZiAocmMpIGdvdG8gb3V0OworICAgICAgICByYyA9IGxpYnhsX19nZXRfZG9tYWlu
X2NvbmZpZ3VyYXRpb24oZ2MsIGRvbWlkLCAmZF9jb25maWcpOworICAgICAgICBpZiAocmMpIGdv
dG8gb3V0OwogCi0gICAgZGV2aWNlX2FkZF9kb21haW5fY29uZmlnKGdjLCAmZF9jb25maWcsICZs
aWJ4bF9fcGNpZGV2X2RldnR5cGUsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICZwY2lk
ZXZfc2F2ZWQpOworICAgICAgICBkZXZpY2VfYWRkX2RvbWFpbl9jb25maWcoZ2MsICZkX2NvbmZp
ZywgJmxpYnhsX19wY2lkZXZfZGV2dHlwZSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICZwY2lkZXZfc2F2ZWQpOwogCi0gICAgcmMgPSBsaWJ4bF9fZG1fY2hlY2tfc3RhcnQoZ2Ms
ICZkX2NvbmZpZywgZG9taWQpOwotICAgIGlmIChyYykgZ290byBvdXQ7CisgICAgICAgIHJjID0g
bGlieGxfX2RtX2NoZWNrX3N0YXJ0KGdjLCAmZF9jb25maWcsIGRvbWlkKTsKKyAgICAgICAgaWYg
KHJjKSBnb3RvIG91dDsKKyAgICB9CiAKICAgICBmb3IgKDs7KSB7CiAgICAgICAgIHJjID0gbGli
eGxfX3hzX3RyYW5zYWN0aW9uX3N0YXJ0KGdjLCAmdCk7CiAgICAgICAgIGlmIChyYykgZ290byBv
dXQ7CiAKLSAgICAgICAgcmMgPSBsaWJ4bF9fc2V0X2RvbWFpbl9jb25maWd1cmF0aW9uKGdjLCBk
b21pZCwgJmRfY29uZmlnKTsKLSAgICAgICAgaWYgKHJjKSBnb3RvIG91dDsKKyAgICAgICAgaWYg
KGxvY2spIHsKKyAgICAgICAgICAgIHJjID0gbGlieGxfX3NldF9kb21haW5fY29uZmlndXJhdGlv
bihnYywgZG9taWQsICZkX2NvbmZpZyk7CisgICAgICAgICAgICBpZiAocmMpIGdvdG8gb3V0Owor
ICAgICAgICB9CiAKICAgICAgICAgbGlieGxfX3hzX3dyaXRldihnYywgdCwgYmVfcGF0aCwgbGli
eGxfX3hzX2t2c19vZl9mbGV4YXJyYXkoZ2MsIGJhY2spKTsKIApAQCAtMTg0LDggKzE5NiwxMCBA
QCBzdGF0aWMgaW50IGxpYnhsX19kZXZpY2VfcGNpX2FkZF94ZW5zdG9yZShsaWJ4bF9fZ2MgKmdj
LCB1aW50MzJfdCBkb21pZCwgbGlieGxfZAogb3V0OgogICAgIGxpYnhsX194c190cmFuc2FjdGlv
bl9hYm9ydChnYywgJnQpOwogICAgIGlmIChsb2NrKSBsaWJ4bF9fdW5sb2NrX2RvbWFpbl91c2Vy
ZGF0YShsb2NrKTsKLSAgICBsaWJ4bF9kZXZpY2VfcGNpX2Rpc3Bvc2UoJnBjaWRldl9zYXZlZCk7
Ci0gICAgbGlieGxfZG9tYWluX2NvbmZpZ19kaXNwb3NlKCZkX2NvbmZpZyk7CisgICAgaWYgKCFp
c19zdHViZG9tYWluKSB7CisgICAgICAgIGxpYnhsX2RldmljZV9wY2lfZGlzcG9zZSgmcGNpZGV2
X3NhdmVkKTsKKyAgICAgICAgbGlieGxfZG9tYWluX2NvbmZpZ19kaXNwb3NlKCZkX2NvbmZpZyk7
CisgICAgfQogICAgIHJldHVybiByYzsKIH0KIAotLSAKZ2l0LXNlcmllcyAwLjkuMQoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxp
bmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5w
cm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

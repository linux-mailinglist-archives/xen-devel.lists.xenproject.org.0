Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id E84F74237D
	for <lists+xen-devel@lfdr.de>; Wed, 12 Jun 2019 13:08:34 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hb14B-0005EJ-CQ; Wed, 12 Jun 2019 11:05:19 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=T8NI=UL=citrix.com=andrew.cooper3@srs-us1.protection.inumbo.net>)
 id 1hb14A-0005EE-Bp
 for xen-devel@lists.xenproject.org; Wed, 12 Jun 2019 11:05:18 +0000
X-Inumbo-ID: f54b229a-8d01-11e9-8980-bc764e045a96
Received: from esa1.hc3370-68.iphmx.com (unknown [216.71.145.142])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id f54b229a-8d01-11e9-8980-bc764e045a96;
 Wed, 12 Jun 2019 11:05:16 +0000 (UTC)
Authentication-Results: esa1.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=andrew.cooper3@citrix.com;
 spf=Pass smtp.mailfrom=Andrew.Cooper3@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa1.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 andrew.cooper3@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="andrew.cooper3@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: Pass (esa1.hc3370-68.iphmx.com: domain of
 Andrew.Cooper3@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="Andrew.Cooper3@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83 ~all"
Received-SPF: None (esa1.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: 8pY/9z/w/t5F9VEZ4EWJ3QS/Qy7+Slthcfe+AH7LUadMI1YbFEQNFjdn6/549aYpfa5zj4dTYW
 GkQkitqJE4lcOrt+NZqPoTx4u0trQM0hJJe5jE2BDu+pCqj0Yy9mMV+Os0C2W2NEAK9MnbfpLA
 xs8iGgxpMkUUI3ND/to+C8B4yVGIjPW+npB+qRHqzAETx1k9VDigV5zGXmNYnSLI5pePVAJPTZ
 4v2BjqQ85UAG1dHAugBpN6Zkx78qxbkW2y9NV+NkkLCxjTQDRjzkkkqOXXJCAPmwgamEcKhE3Y
 d3k=
X-SBRS: 2.7
X-MesageID: 1641817
X-Ironport-Server: esa1.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.63,365,1557201600"; 
   d="scan'208";a="1641817"
From: Andrew Cooper <andrew.cooper3@citrix.com>
To: Xen-devel <xen-devel@lists.xenproject.org>
Date: Wed, 12 Jun 2019 12:05:13 +0100
Message-ID: <1560337513-6958-1-git-send-email-andrew.cooper3@citrix.com>
X-Mailer: git-send-email 2.1.4
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH] x86/boot: Drop vestigial support for pre-SIPI
 APICs
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 David Woodhouse <dwmw2@infradead.org>, Wei Liu <wl@xen.org>,
 Jan Beulich <JBeulich@suse.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlIGN1cnJlbnQgY29kZSBpbiBkb19ib290X2NwdSgpIG1ha2VzIGEgQ01PUyB3cml0ZSAoZXZl
biBpbiB0aGUgY2FzZSBvZiBhbgpGQURUIHJlZHVjZWQgaGFyZHdhcmUgY29uZmlndXJhdGlvbikg
YW5kIHR3byB3cml0ZXMgaW50byB0aGUgQkRBIGZvciB0aGUKc3RhcnRfZWlwIHNlZ21lbnQgYW5k
IG9mZnNldC4KCkJEQSAweDY3IGFuZCAweDY5IGhhaWwgZnJvbSB0aGUgZGF5cyBvZiB0aGUgRE9T
IGFuZCB0aGUgMjg2LCB3aGVuIElCTSBwdXQKdG9nZXRoZXIgdGhlIGZhc3Qgd2F5IHRvIHJldHVy
biBmcm9tIFByb3RlY3RlZCBtb2RlIGJhY2sgdG8gUmVhbCBtb2RlICh2aWEgYQpkZWxpYmVyYXRl
IHRyaXBsZSBmYXVsdCkuICBUaGlzIHZlY3Rvciwgd2hlbiBzZXQsIHJlZGlyZWN0cyB0aGUgZWFy
bHkgYm9vdApsb2dpYyBiYWNrIGludG8gT1MgY29udHJvbC4KCkl0IGlzIGFsc28gdXNlZCBieSBl
YXJseSBNUCBzeXN0ZW1zLCBiZWZvcmUgdGhlIFN0YXJ0dXAgSVBJIG1lc3NhZ2UgYmVjYW1lCnN0
YW5kYXJkLCB3aGljaCBpbiBwcmFjdGljZSB3YXMgYmVmb3JlIExvY2FsIEFQSUNzIGJlY2FtZSBp
bnRlZ3JhdGVkIGludG8gQ1BVCmNvcmVzLgoKU3VwcG9ydCBmb3Igbm9uLWludGVncmF0ZWQgQVBJ
Q3Mgd2FzIGRyb3BwZWQgaW4gYy9zIDdiMDAwN2FmICJ4ZW4veDg2OiBSZW1vdmUKQVBJQ19JTlRF
R1JBVEVEKCkgY2hlY2tzIiBiZWNhdXNlIHRoZXJlIGFyZSBubyA2NC1iaXQgY2FwYWJsZSBzeXN0
ZW1zIHdpdGhvdXQKdGhlbS4gIFRoZXJlZm9yZSwgZHJvcCBzbXBib290X3tzZXR1cCxyZXN0b3Jl
fV93YXJtX3Jlc2V0X3ZlY3RvcigpLgoKRHJvcHBpbmcgc21wYm9vdF9zZXR1cF93YXJtX3Jlc2V0
X3ZlY3RvcigpIGFsc28gbGV0cyB1cyBkcm9wClRSQU1QT0xJTkVfe0hJR0gsTE9XfSwgd2hpY2gg
bGV0cyB1cyBkcm9wIG1hY2hfd2FrZWNwdS5oIGVudGlyZWx5LiAgVGhlIGZpbmFsCmZ1bmN0aW9u
IGluIHNtcGJvb3RfaG9va3MuaCBpcyBzbXBib290X3NldHVwX2lvX2FwaWMoKSBhbmQgaGFzIGEg
c2luZ2xlCmNhbGxlciwgc28gZXhwYW5kIGl0IGlubGluZSBhbmQgZGVsZXRlIHNtcGJvb3RfaG9v
a3MuaCBhcyB3ZWxsLgoKVGhpcyByZW1vdmVzIGFsbCByZWxpYW5jZSBvbiBDTU9TIGFuZCB0aGUg
QkRBIGZyb20gdGhlIEFQIGJvb3QgcGF0aCwgd2hpY2ggaXMKZXNwZWNpYWxseSBvZiBpbnRlcmVz
dCBvbiByZWR1Y2VkX2hhcmR3YXJlIGJvb3RzIGFuZCBFRkkgc3lzdGVtcy4KClJlcG9ydGVkLWJ5
OiBEYXZpZCBXb29kaG91c2UgPGR3bXdAYW1hem9uLmNvLnVrPgpTaWduZWQtb2ZmLWJ5OiBBbmRy
ZXcgQ29vcGVyIDxhbmRyZXcuY29vcGVyM0BjaXRyaXguY29tPgotLS0KQ0M6IEphbiBCZXVsaWNo
IDxKQmV1bGljaEBzdXNlLmNvbT4KQ0M6IFdlaSBMaXUgPHdsQHhlbi5vcmc+CkNDOiBSb2dlciBQ
YXUgTW9ubsOpIDxyb2dlci5wYXVAY2l0cml4LmNvbT4KQ0M6IERhdmlkIFdvb2Rob3VzZSA8ZHdt
dzJAaW5mcmFkZWFkLm9yZz4KClRoaXMgaGFzIGludm9sdmVkIHNldmVyYWwgbW9udGhzIG9mIG9u
LWFuZC1vZmYgY29kZSBhcmNoZW9sb2d5LiAgSXQgdHVybnMgb3V0CnRoYXQgZGV0YWlscyBvZiBo
b3cgdGhlIDQ4Ni1lcmEgTVAgc3lzdGVtcyBib290ZWQgYXJlIGZlaW5kaXNobHkgZGlmZmljdWx0
IHRvCmxvY2F0ZS4KLS0tCiB4ZW4vYXJjaC94ODYvc21wYm9vdC5jICAgICAgICAgICAgICAgICAg
ICAgICAgICAgfCAxMSArLS0tLS0KIHhlbi9pbmNsdWRlL2FzbS14ODYvbWFjaC1kZWZhdWx0L21h
Y2hfd2FrZWNwdS5oICB8IDEyIC0tLS0tLQogeGVuL2luY2x1ZGUvYXNtLXg4Ni9tYWNoLWRlZmF1
bHQvc21wYm9vdF9ob29rcy5oIHwgNDcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAzIGZpbGVz
IGNoYW5nZWQsIDIgaW5zZXJ0aW9ucygrKSwgNjggZGVsZXRpb25zKC0pCiBkZWxldGUgbW9kZSAx
MDA2NDQgeGVuL2luY2x1ZGUvYXNtLXg4Ni9tYWNoLWRlZmF1bHQvbWFjaF93YWtlY3B1LmgKIGRl
bGV0ZSBtb2RlIDEwMDY0NCB4ZW4vaW5jbHVkZS9hc20teDg2L21hY2gtZGVmYXVsdC9zbXBib290
X2hvb2tzLmgKCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvc21wYm9vdC5jIGIveGVuL2FyY2gv
eDg2L3NtcGJvb3QuYwppbmRleCAyNzQ4NjVhLi43MzBmZTE0IDEwMDY0NAotLS0gYS94ZW4vYXJj
aC94ODYvc21wYm9vdC5jCisrKyBiL3hlbi9hcmNoL3g4Ni9zbXBib290LmMKQEAgLTQ2LDggKzQ2
LDYgQEAKICNpbmNsdWRlIDxhc20vdGltZS5oPgogI2luY2x1ZGUgPGFzbS90Ym9vdC5oPgogI2lu
Y2x1ZGUgPG1hY2hfYXBpYy5oPgotI2luY2x1ZGUgPG1hY2hfd2FrZWNwdS5oPgotI2luY2x1ZGUg
PHNtcGJvb3RfaG9va3MuaD4KIAogI2RlZmluZSBzZXR1cF90cmFtcG9saW5lKCkgICAgKGJvb3Rz
eW1fcGh5cyh0cmFtcG9saW5lX3JlYWxtb2RlX2VudHJ5KSkKIApAQCAtNTY1LDEwICs1NjMsNiBA
QCBzdGF0aWMgaW50IGRvX2Jvb3RfY3B1KGludCBhcGljaWQsIGludCBjcHUpCiAKICAgICBzZXRf
Y3B1X3N0YXRlKENQVV9TVEFURV9JTklUKTsKIAotICAgIERwcmludGsoIlNldHRpbmcgd2FybSBy
ZXNldCBjb2RlIGFuZCB2ZWN0b3IuXG4iKTsKLQotICAgIHNtcGJvb3Rfc2V0dXBfd2FybV9yZXNl
dF92ZWN0b3Ioc3RhcnRfZWlwKTsKLQogICAgIC8qIFN0YXJ0aW5nIGFjdHVhbCBJUEkgc2VxdWVu
Y2UuLi4gKi8KICAgICBpZiAoICF0Ym9vdF9pbl9tZWFzdXJlZF9lbnYoKSB8fCB0Ym9vdF93YWtl
X2FwKGFwaWNpZCwgc3RhcnRfZWlwKSApCiAgICAgICAgIGJvb3RfZXJyb3IgPSB3YWtldXBfc2Vj
b25kYXJ5X2NwdShhcGljaWQsIHN0YXJ0X2VpcCk7CkBAIC02MjMsOCArNjE3LDYgQEAgc3RhdGlj
IGludCBkb19ib290X2NwdShpbnQgYXBpY2lkLCBpbnQgY3B1KQogICAgIGJvb3RzeW0odHJhbXBv
bGluZV9jcHVfc3RhcnRlZCkgPSAwOwogICAgIHNtcF9tYigpOwogCi0gICAgc21wYm9vdF9yZXN0
b3JlX3dhcm1fcmVzZXRfdmVjdG9yKCk7Ci0KICAgICByZXR1cm4gcmM7CiB9CiAKQEAgLTExNjIs
NyArMTE1NCw4IEBAIHZvaWQgX19pbml0IHNtcF9wcmVwYXJlX2NwdXModm9pZCkKICAgICBjb25u
ZWN0X2JzcF9BUElDKCk7CiAgICAgc2V0dXBfbG9jYWxfQVBJQygpOwogCi0gICAgc21wYm9vdF9z
ZXR1cF9pb19hcGljKCk7CisgICAgaWYgKCAhc2tpcF9pb2FwaWNfc2V0dXAgJiYgbnJfaW9hcGlj
cyApCisgICAgICAgIHNldHVwX0lPX0FQSUMoKTsKIAogICAgIHNldHVwX2Jvb3RfQVBJQ19jbG9j
aygpOwogfQpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9tYWNoLWRlZmF1bHQvbWFj
aF93YWtlY3B1LmggYi94ZW4vaW5jbHVkZS9hc20teDg2L21hY2gtZGVmYXVsdC9tYWNoX3dha2Vj
cHUuaApkZWxldGVkIGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMzI1NTVlMS4uMDAwMDAwMAotLS0g
YS94ZW4vaW5jbHVkZS9hc20teDg2L21hY2gtZGVmYXVsdC9tYWNoX3dha2VjcHUuaAorKysgL2Rl
di9udWxsCkBAIC0xLDEyICswLDAgQEAKLSNpZm5kZWYgX19BU01fTUFDSF9XQUtFQ1BVX0gKLSNk
ZWZpbmUgX19BU01fTUFDSF9XQUtFQ1BVX0gKLQotLyogCi0gKiBUaGlzIGZpbGUgY29wZXMgd2l0
aCBtYWNoaW5lcyB0aGF0IHdha2V1cCBzZWNvbmRhcnkgQ1BVcyBieSB0aGUKLSAqIElOSVQsIElO
SVQsIFNUQVJUVVAgc2VxdWVuY2UuCi0gKi8KLQotI2RlZmluZSBUUkFNUE9MSU5FX0xPVyBtYWRk
cl90b192aXJ0KDB4NDY3KQotI2RlZmluZSBUUkFNUE9MSU5FX0hJR0ggbWFkZHJfdG9fdmlydCgw
eDQ2OSkKLQotI2VuZGlmIC8qIF9fQVNNX01BQ0hfV0FLRUNQVV9IICovCmRpZmYgLS1naXQgYS94
ZW4vaW5jbHVkZS9hc20teDg2L21hY2gtZGVmYXVsdC9zbXBib290X2hvb2tzLmggYi94ZW4vaW5j
bHVkZS9hc20teDg2L21hY2gtZGVmYXVsdC9zbXBib290X2hvb2tzLmgKZGVsZXRlZCBmaWxlIG1v
ZGUgMTAwNjQ0CmluZGV4IDE0ZTFlZTUuLjAwMDAwMDAKLS0tIGEveGVuL2luY2x1ZGUvYXNtLXg4
Ni9tYWNoLWRlZmF1bHQvc21wYm9vdF9ob29rcy5oCisrKyAvZGV2L251bGwKQEAgLTEsNDcgKzAs
MCBAQAotLyogdHdvIGFic3RyYWN0aW9ucyBzcGVjaWZpYyB0byBrZXJuZWwvc21wYm9vdC5jLCBt
YWlubHkgdG8gY2F0ZXIgdG8gdmlzd3MKLSAqIHdoaWNoIG5lZWRzIHRvIGFsdGVyIHRoZW0uICov
Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCBzbXBib290X3NldHVwX3dhcm1fcmVzZXRfdmVjdG9yKHVu
c2lnbmVkIGxvbmcgc3RhcnRfZWlwKQotewotCXVuc2lnbmVkIGxvbmcgZmxhZ3M7Ci0KLQlzcGlu
X2xvY2tfaXJxc2F2ZSgmcnRjX2xvY2ssIGZsYWdzKTsKLQlDTU9TX1dSSVRFKDB4YSwgMHhmKTsK
LQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZydGNfbG9jaywgZmxhZ3MpOwotCWZsdXNoX3RsYl9s
b2NhbCgpOwotCURwcmludGsoIjEuXG4iKTsKLQkqKCh2b2xhdGlsZSB1bnNpZ25lZCBzaG9ydCAq
KSBUUkFNUE9MSU5FX0hJR0gpID0gc3RhcnRfZWlwID4+IDQ7Ci0JRHByaW50aygiMi5cbiIpOwot
CSooKHZvbGF0aWxlIHVuc2lnbmVkIHNob3J0ICopIFRSQU1QT0xJTkVfTE9XKSA9IHN0YXJ0X2Vp
cCAmIDB4ZjsKLQlEcHJpbnRrKCIzLlxuIik7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCBzbXBi
b290X3Jlc3RvcmVfd2FybV9yZXNldF92ZWN0b3Iodm9pZCkKLXsKLQl1bnNpZ25lZCBsb25nIGZs
YWdzOwotCi0JLyoKLQkgKiBJbnN0YWxsIHdyaXRhYmxlIHBhZ2UgMCBlbnRyeSB0byBzZXQgQklP
UyBkYXRhIGFyZWEuCi0JICovCi0JZmx1c2hfdGxiX2xvY2FsKCk7Ci0KLQkvKgotCSAqIFBhcmFu
b2lkOiAgU2V0IHdhcm0gcmVzZXQgY29kZSBhbmQgdmVjdG9yIGhlcmUgYmFjawotCSAqIHRvIGRl
ZmF1bHQgdmFsdWVzLgotCSAqLwotCXNwaW5fbG9ja19pcnFzYXZlKCZydGNfbG9jaywgZmxhZ3Mp
OwotCUNNT1NfV1JJVEUoMCwgMHhmKTsKLQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZydGNfbG9j
aywgZmxhZ3MpOwotCi0JKigodm9sYXRpbGUgaW50ICopIG1hZGRyX3RvX3ZpcnQoMHg0NjcpKSA9
IDA7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCBzbXBib290X3NldHVwX2lvX2FwaWModm9pZCkK
LXsKLQkvKgotCSAqIEhlcmUgd2UgY2FuIGJlIHN1cmUgdGhhdCB0aGVyZSBpcyBhbiBJTy1BUElD
IGluIHRoZSBzeXN0ZW0uIExldCdzCi0JICogZ28gYW5kIHNldCBpdCB1cDoKLQkgKi8KLQlpZiAo
IXNraXBfaW9hcGljX3NldHVwICYmIG5yX2lvYXBpY3MpCi0JCXNldHVwX0lPX0FQSUMoKTsKLX0K
LS0gCjIuMS40CgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcK
aHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id ABC55C8738
	for <lists+xen-devel@lfdr.de>; Wed,  2 Oct 2019 13:23:55 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iFcg6-00017z-5E; Wed, 02 Oct 2019 11:20:18 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=lglc=X3=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1iFcg4-00017j-5C
 for xen-devel@lists.xenproject.org; Wed, 02 Oct 2019 11:20:16 +0000
X-Inumbo-ID: 977c5150-e506-11e9-bf31-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by localhost (Halon) with ESMTPS
 id 977c5150-e506-11e9-bf31-bc764e2007e4;
 Wed, 02 Oct 2019 11:20:09 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id DFFADAFB0;
 Wed,  2 Oct 2019 11:20:07 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Wed,  2 Oct 2019 13:20:00 +0200
Message-Id: <20191002112004.25793-3-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20191002112004.25793-1-jgross@suse.com>
References: <20191002112004.25793-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH v2 2/6] xen: add basic hypervisor filesystem
 support
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Jan Beulich <jbeulich@suse.com>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QWRkIHRoZSBpbmZyYXN0cnVjdHVyZSBmb3IgdGhlIGh5cGVydmlzb3IgZmlsZXN5c3RlbS4KClRo
aXMgaW5jbHVkZXMgdGhlIGh5cGVyY2FsbCBpbnRlcmZhY2UgYW5kIHRoZSBiYXNlIGZ1bmN0aW9u
cyBmb3IKZW50cnkgY3JlYXRpb24sIGRlbGV0aW9uIGFuZCBtb2RpZmljYXRpb24uCgpJbml0aWFs
bHkgd2Ugc3VwcG9ydCBzdHJpbmcgYW5kIHVuc2lnbmVkIGludGVnZXIgZW50cnkgdHlwZXMuIFRo
ZSBzYXZlZAplbnRyeSBzaXplIGlzIGFuIHVwcGVyIGJvdW5kLCBzbyBmb3IgdW5zaWduZWQgaW50
ZWdlciBlbnRyaWVzIHdlIGFsd2F5cwpzZXQgdGhlIHZhbHVlICIxMSIuCgpTaWduZWQtb2ZmLWJ5
OiBKdWVyZ2VuIEdyb3NzIDxqZ3Jvc3NAc3VzZS5jb20+Ci0tLQpWMToKLSByZW5hbWUgZmlsZXMg
ZnJvbSBmaWxlc3lzdGVtLiogdG8gaHlwZnMuKgotIGFkZCBkdW1teSB3cml0ZSBlbnRyeSBzdXBw
b3J0Ci0gcmVuYW1lIGh5cGVyY2FsbCBmaWxlc3lzdGVtX29wIHRvIGh5cGZzX29wCi0gYWRkIHN1
cHBvcnQgZm9yIHVuc2lnbmVkIGludGVnZXIgZW50cmllcwoKVjI6Ci0gdGVzdCBuZXcgZW50cnkg
bmFtZSB0byBiZSB2YWxpZAotLS0KIHhlbi9hcmNoL2FybS90cmFwcy5jICAgICAgICAgfCAgIDEg
KwogeGVuL2FyY2gveDg2L2h2bS9oeXBlcmNhbGwuYyB8ICAgMSArCiB4ZW4vYXJjaC94ODYvaHlw
ZXJjYWxsLmMgICAgIHwgICAxICsKIHhlbi9hcmNoL3g4Ni9wdi9oeXBlcmNhbGwuYyAgfCAgIDEg
KwogeGVuL2NvbW1vbi9NYWtlZmlsZSAgICAgICAgICB8ICAgMSArCiB4ZW4vY29tbW9uL2h5cGZz
LmMgICAgICAgICAgIHwgMzE4ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysKIHhlbi9pbmNsdWRlL3B1YmxpYy9lcnJuby5oICAgfCAgIDEgKwogeGVuL2luY2x1ZGUv
cHVibGljL2h5cGZzLmggICB8IDEyMyArKysrKysrKysrKysrKysrKwogeGVuL2luY2x1ZGUvcHVi
bGljL3hlbi5oICAgICB8ICAgMSArCiB4ZW4vaW5jbHVkZS94ZW4vaHlwZXJjYWxsLmggIHwgICA4
ICsrCiB4ZW4vaW5jbHVkZS94ZW4vaHlwZnMuaCAgICAgIHwgIDQwICsrKysrKwogMTEgZmlsZXMg
Y2hhbmdlZCwgNDk2IGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEwMDY0NCB4ZW4vY29tbW9u
L2h5cGZzLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCB4ZW4vaW5jbHVkZS9wdWJsaWMvaHlwZnMuaAog
Y3JlYXRlIG1vZGUgMTAwNjQ0IHhlbi9pbmNsdWRlL3hlbi9oeXBmcy5oCgpkaWZmIC0tZ2l0IGEv
eGVuL2FyY2gvYXJtL3RyYXBzLmMgYi94ZW4vYXJjaC9hcm0vdHJhcHMuYwppbmRleCBhM2I5NjFi
ZDA2Li40YjFhY2Q2N2EyIDEwMDY0NAotLS0gYS94ZW4vYXJjaC9hcm0vdHJhcHMuYworKysgYi94
ZW4vYXJjaC9hcm0vdHJhcHMuYwpAQCAtMTQwMSw2ICsxNDAxLDcgQEAgc3RhdGljIGFybV9oeXBl
cmNhbGxfdCBhcm1faHlwZXJjYWxsX3RhYmxlW10gPSB7CiAjaWZkZWYgQ09ORklHX0FSR08KICAg
ICBIWVBFUkNBTEwoYXJnb19vcCwgNSksCiAjZW5kaWYKKyAgICBIWVBFUkNBTEwoaHlwZnNfb3As
IDUpLAogfTsKIAogI2lmbmRlZiBOREVCVUcKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9odm0v
aHlwZXJjYWxsLmMgYi94ZW4vYXJjaC94ODYvaHZtL2h5cGVyY2FsbC5jCmluZGV4IDMzZGQyZDk5
ZDIuLjIxMGRkYTRmMzggMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9odm0vaHlwZXJjYWxsLmMK
KysrIGIveGVuL2FyY2gveDg2L2h2bS9oeXBlcmNhbGwuYwpAQCAtMTQ0LDYgKzE0NCw3IEBAIHN0
YXRpYyBjb25zdCBoeXBlcmNhbGxfdGFibGVfdCBodm1faHlwZXJjYWxsX3RhYmxlW10gPSB7CiAj
ZW5kaWYKICAgICBIWVBFUkNBTEwoeGVucG11X29wKSwKICAgICBDT01QQVRfQ0FMTChkbV9vcCks
CisgICAgSFlQRVJDQUxMKGh5cGZzX29wKSwKICAgICBIWVBFUkNBTEwoYXJjaF8xKQogfTsKIApk
aWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L2h5cGVyY2FsbC5jIGIveGVuL2FyY2gveDg2L2h5cGVy
Y2FsbC5jCmluZGV4IGQ0ODNkYmFhNmIuLjhhOGYyMjM0ODEgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNo
L3g4Ni9oeXBlcmNhbGwuYworKysgYi94ZW4vYXJjaC94ODYvaHlwZXJjYWxsLmMKQEAgLTczLDYg
KzczLDcgQEAgY29uc3QgaHlwZXJjYWxsX2FyZ3NfdCBoeXBlcmNhbGxfYXJnc190YWJsZVtOUl9o
eXBlcmNhbGxzXSA9CiAgICAgQVJHUyhodm1fb3AsIDIpLAogICAgIEFSR1MoZG1fb3AsIDMpLAog
I2VuZGlmCisgICAgQVJHUyhoeXBmc19vcCwgNSksCiAgICAgQVJHUyhtY2EsIDEpLAogICAgIEFS
R1MoYXJjaF8xLCAxKSwKIH07CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvcHYvaHlwZXJjYWxs
LmMgYi94ZW4vYXJjaC94ODYvcHYvaHlwZXJjYWxsLmMKaW5kZXggMGM4NGMwYjNhMC4uZTY4NjAy
NDdjYyAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L3B2L2h5cGVyY2FsbC5jCisrKyBiL3hlbi9h
cmNoL3g4Ni9wdi9oeXBlcmNhbGwuYwpAQCAtODQsNiArODQsNyBAQCBjb25zdCBoeXBlcmNhbGxf
dGFibGVfdCBwdl9oeXBlcmNhbGxfdGFibGVbXSA9IHsKICAgICBIWVBFUkNBTEwoaHZtX29wKSwK
ICAgICBDT01QQVRfQ0FMTChkbV9vcCksCiAjZW5kaWYKKyAgICBIWVBFUkNBTEwoaHlwZnNfb3Ap
LAogICAgIEhZUEVSQ0FMTChtY2EpLAogICAgIEhZUEVSQ0FMTChhcmNoXzEpLAogfTsKZGlmZiAt
LWdpdCBhL3hlbi9jb21tb24vTWFrZWZpbGUgYi94ZW4vY29tbW9uL01ha2VmaWxlCmluZGV4IDYy
YjM0ZTY5ZTkuLmEzZjY2YWEwYzAgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vTWFrZWZpbGUKKysr
IGIveGVuL2NvbW1vbi9NYWtlZmlsZQpAQCAtMTEsNiArMTEsNyBAQCBvYmoteSArPSBkb21haW4u
bwogb2JqLXkgKz0gZXZlbnRfMmwubwogb2JqLXkgKz0gZXZlbnRfY2hhbm5lbC5vCiBvYmoteSAr
PSBldmVudF9maWZvLm8KK29iai15ICs9IGh5cGZzLm8KIG9iai0kKENPTkZJR19DUkFTSF9ERUJV
RykgKz0gZ2Ric3R1Yi5vCiBvYmotJChDT05GSUdfR1JBTlRfVEFCTEUpICs9IGdyYW50X3RhYmxl
Lm8KIG9iai15ICs9IGd1ZXN0Y29weS5vCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL2h5cGZzLmMg
Yi94ZW4vY29tbW9uL2h5cGZzLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAw
MC4uYzhjNWM1MDRjZgotLS0gL2Rldi9udWxsCisrKyBiL3hlbi9jb21tb24vaHlwZnMuYwpAQCAt
MCwwICsxLDMxOCBAQAorLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgorICoKKyAqIGh5cGZzLmMKKyAq
CisgKiBTaW1wbGUgc3lzZnMtbGlrZSBmaWxlIHN5c3RlbSBmb3IgdGhlIGh5cGVydmlzb3IuCisg
Ki8KKworI2luY2x1ZGUgPHhlbi9saWIuaD4KKyNpbmNsdWRlIDx4ZW4vaHlwZnMuaD4KKyNpbmNs
dWRlIDx4ZW4vZ3Vlc3RfYWNjZXNzLmg+CisjaW5jbHVkZSA8eGVuL2h5cGVyY2FsbC5oPgorI2lu
Y2x1ZGUgPHB1YmxpYy9oeXBmcy5oPgorCitzdGF0aWMgREVGSU5FX1NQSU5MT0NLKGh5cGZzX2xv
Y2spOworCitzdHJ1Y3QgaHlwZnNfZGlyIGh5cGZzX3Jvb3QgPSB7CisgICAgLmxpc3QgPSBMSVNU
X0hFQURfSU5JVChoeXBmc19yb290Lmxpc3QpLAorfTsKKworc3RhdGljIHN0cnVjdCBoeXBmc19l
bnRyeSBoeXBmc19yb290X2VudHJ5ID0geworICAgIC50eXBlID0gaHlwZnNfdHlwZV9kaXIsCisg
ICAgLm5hbWUgPSAiIiwKKyAgICAubGlzdCA9IExJU1RfSEVBRF9JTklUKGh5cGZzX3Jvb3RfZW50
cnkubGlzdCksCisgICAgLnBhcmVudCA9ICZoeXBmc19yb290LAorICAgIC5kaXIgPSAmaHlwZnNf
cm9vdCwKK307CisKK3N0YXRpYyBpbnQgaHlwZnNfYWRkX2VudHJ5KHN0cnVjdCBoeXBmc19kaXIg
KnBhcmVudCwgc3RydWN0IGh5cGZzX2VudHJ5ICpuZXcpCit7CisgICAgaW50IHJldCA9IC1FTk9F
TlQ7CisgICAgc3RydWN0IGxpc3RfaGVhZCAqbDsKKworICAgIGlmICggIW5ldy0+Y29udGVudCAp
CisgICAgICAgIHJldHVybiAtRUlOVkFMOworCisgICAgc3Bpbl9sb2NrKCZoeXBmc19sb2NrKTsK
KworICAgIGxpc3RfZm9yX2VhY2ggKCBsLCAmcGFyZW50LT5saXN0ICkKKyAgICB7CisgICAgICAg
IHN0cnVjdCBoeXBmc19lbnRyeSAqZSA9IGxpc3RfZW50cnkobCwgc3RydWN0IGh5cGZzX2VudHJ5
LCBsaXN0KTsKKyAgICAgICAgaW50IGNtcCA9IHN0cmNtcChlLT5uYW1lLCBuZXctPm5hbWUpOwor
CisgICAgICAgIGlmICggY21wID4gMCApCisgICAgICAgIHsKKyAgICAgICAgICAgIHJldCA9IDA7
CisgICAgICAgICAgICBsaXN0X2FkZF90YWlsKCZuZXctPmxpc3QsIGwpOworICAgICAgICAgICAg
YnJlYWs7CisgICAgICAgIH0KKyAgICAgICAgaWYgKCBjbXAgPT0gMCApCisgICAgICAgIHsKKyAg
ICAgICAgICAgIHJldCA9IC1FRVhJU1Q7CisgICAgICAgICAgICBicmVhazsKKyAgICAgICAgfQor
ICAgIH0KKworICAgIGlmICggcmV0ID09IC1FTk9FTlQgKQorICAgIHsKKyAgICAgICAgcmV0ID0g
MDsKKyAgICAgICAgbGlzdF9hZGRfdGFpbCgmbmV3LT5saXN0LCAmcGFyZW50LT5saXN0KTsKKyAg
ICB9CisKKyAgICBpZiAoICFyZXQgKQorICAgIHsKKyAgICAgICAgdW5zaWduZWQgaW50IHN6ID0g
c3RybGVuKG5ldy0+bmFtZSkgKyAxOworCisgICAgICAgIHBhcmVudC0+Y29udGVudF9zaXplICs9
IHNpemVvZihzdHJ1Y3QgeGVuX2h5cGZzX2RpcmVudHJ5KSArCisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFJPVU5EVVAoc3osIDQpOworICAgICAgICBuZXctPnBhcmVudCA9IHBhcmVu
dDsKKyAgICB9CisKKyAgICBzcGluX3VubG9jaygmaHlwZnNfbG9jayk7CisKKyAgICByZXR1cm4g
cmV0OworfQorCitpbnQgaHlwZnNfbmV3X2VudHJ5X2FueShzdHJ1Y3QgaHlwZnNfZGlyICpwYXJl
bnQsIGNvbnN0IGNoYXIgKm5hbWUsCisgICAgICAgICAgICAgICAgICAgICAgICBlbnVtIGh5cGZz
X2VudHJ5X3R5cGUgdHlwZSwgdm9pZCAqY29udGVudCkKK3sKKyAgICBpbnQgcmV0OworICAgIHN0
cnVjdCBoeXBmc19lbnRyeSAqbmV3OworCisgICAgaWYgKCBzdHJjaHIobmFtZSwgJy8nKSB8fCAh
c3RyY21wKG5hbWUsICIuIikgfHwgIXN0cmNtcChuYW1lLCAiLi4iKSApCisgICAgICAgIHJldHVy
biAtRUlOVkFMOworCisgICAgbmV3ID0geHphbGxvYyhzdHJ1Y3QgaHlwZnNfZW50cnkpOworICAg
IGlmICggIW5ldyApCisgICAgICAgIHJldHVybiAtRU5PTUVNOworCisgICAgbmV3LT5uYW1lID0g
bmFtZTsKKyAgICBuZXctPnR5cGUgPSB0eXBlOworICAgIG5ldy0+Y29udGVudCA9IGNvbnRlbnQ7
CisKKyAgICByZXQgPSBoeXBmc19hZGRfZW50cnkocGFyZW50LCBuZXcpOworCisgICAgaWYgKCBy
ZXQgKQorICAgICAgICB4ZnJlZShuZXcpOworCisgICAgcmV0dXJuIHJldDsKK30KKworaW50IGh5
cGZzX25ld19lbnRyeV9zdHJpbmcoc3RydWN0IGh5cGZzX2RpciAqcGFyZW50LCBjb25zdCBjaGFy
ICpuYW1lLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhciAqdmFsKQoreworICAgIHJl
dHVybiBoeXBmc19uZXdfZW50cnlfYW55KHBhcmVudCwgbmFtZSwgaHlwZnNfdHlwZV9zdHJpbmcs
IHZhbCk7Cit9CisKK2ludCBoeXBmc19uZXdfZW50cnlfdWludChzdHJ1Y3QgaHlwZnNfZGlyICpw
YXJlbnQsIGNvbnN0IGNoYXIgKm5hbWUsCisgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWdu
ZWQgaW50ICp2YWwpCit7CisgICAgcmV0dXJuIGh5cGZzX25ld19lbnRyeV9hbnkocGFyZW50LCBu
YW1lLCBoeXBmc190eXBlX3VpbnQsIHZhbCk7Cit9CisKK2ludCBoeXBmc19uZXdfZGlyKHN0cnVj
dCBoeXBmc19kaXIgKnBhcmVudCwgY29uc3QgY2hhciAqbmFtZSwKKyAgICAgICAgICAgICAgICAg
IHN0cnVjdCBoeXBmc19kaXIgKmRpcikKK3sKKyAgICBpZiAoICFkaXIgKQorICAgICAgICBkaXIg
PSB4emFsbG9jKHN0cnVjdCBoeXBmc19kaXIpOworCisgICAgcmV0dXJuIGh5cGZzX25ld19lbnRy
eV9hbnkocGFyZW50LCBuYW1lLCBoeXBmc190eXBlX2RpciwgZGlyKTsKK30KKworc3RhdGljIGlu
dCBoeXBmc19nZXRfcGF0aF91c2VyKGNoYXIgKmJ1ZiwgWEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh2
b2lkKSB1YWRkciwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25n
IGxlbikKK3sKKyAgICBpZiAoIGxlbiA+IFhFTl9IWVBGU19NQVhfUEFUSExFTiApCisgICAgICAg
IHJldHVybiAtRUlOVkFMOworCisgICAgaWYgKCBjb3B5X2Zyb21fZ3Vlc3QoYnVmLCB1YWRkciwg
bGVuKSApCisgICAgICAgIHJldHVybiAtRUZBVUxUOworCisgICAgYnVmW2xlbiAtIDFdID0gMDsK
KworICAgIHJldHVybiAwOworfQorCitzdGF0aWMgc3RydWN0IGh5cGZzX2VudHJ5ICpoeXBmc19n
ZXRfZW50cnlfcmVsKHN0cnVjdCBoeXBmc19lbnRyeSAqZGlyLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyICpwYXRoKQoreworICAgIGNoYXIgKnNs
YXNoOworICAgIHN0cnVjdCBoeXBmc19lbnRyeSAqZW50cnk7CisgICAgc3RydWN0IGxpc3RfaGVh
ZCAqbDsKKyAgICB1bnNpZ25lZCBpbnQgbmFtZV9sZW47CisKKyAgICBpZiAoICpwYXRoID09IDAg
KQorICAgICAgICByZXR1cm4gZGlyOworCisgICAgaWYgKCBkaXItPnR5cGUgIT0gaHlwZnNfdHlw
ZV9kaXIgKQorICAgICAgICByZXR1cm4gTlVMTDsKKworICAgIHNsYXNoID0gc3RyY2hyKHBhdGgs
ICcvJyk7CisgICAgaWYgKCAhc2xhc2ggKQorICAgICAgICBzbGFzaCA9IHN0cmNocihwYXRoLCAn
XDAnKTsKKyAgICBuYW1lX2xlbiA9IHNsYXNoIC0gcGF0aDsKKworICAgIGxpc3RfZm9yX2VhY2gg
KCBsLCAmZGlyLT5kaXItPmxpc3QgKQorICAgIHsKKyAgICAgICAgaW50IGNtcDsKKworICAgICAg
ICBlbnRyeSA9IGxpc3RfZW50cnkobCwgc3RydWN0IGh5cGZzX2VudHJ5LCBsaXN0KTsKKyAgICAg
ICAgY21wID0gc3RybmNtcChwYXRoLCBlbnRyeS0+bmFtZSwgbmFtZV9sZW4pOworICAgICAgICBp
ZiAoIGNtcCA8IDAgKQorICAgICAgICAgICAgcmV0dXJuIE5VTEw7CisgICAgICAgIGlmICggY21w
ID4gMCApCisgICAgICAgICAgICBjb250aW51ZTsKKyAgICAgICAgaWYgKCBzdHJsZW4oZW50cnkt
Pm5hbWUpID09IG5hbWVfbGVuICkKKyAgICAgICAgICAgIHJldHVybiAqc2xhc2ggPyBoeXBmc19n
ZXRfZW50cnlfcmVsKGVudHJ5LCBzbGFzaCArIDEpIDogZW50cnk7CisgICAgfQorCisgICAgcmV0
dXJuIE5VTEw7Cit9CisKK3N0cnVjdCBoeXBmc19lbnRyeSAqaHlwZnNfZ2V0X2VudHJ5KGNoYXIg
KnBhdGgpCit7CisgICAgaWYgKCBwYXRoWzBdICE9ICcvJyApCisgICAgICAgIHJldHVybiBOVUxM
OworCisgICAgcmV0dXJuIGh5cGZzX2dldF9lbnRyeV9yZWwoJmh5cGZzX3Jvb3RfZW50cnksIHBh
dGggKyAxKTsKK30KKworc3RhdGljIHVuc2lnbmVkIGludCBoeXBmc19nZXRfZW50cnlfbGVuKHN0
cnVjdCBoeXBmc19lbnRyeSAqZW50cnkpCit7CisgICAgdW5zaWduZWQgaW50IGxlbiA9IDA7CisK
KyAgICBzd2l0Y2ggKCBlbnRyeS0+dHlwZSApCisgICAgeworICAgIGNhc2UgaHlwZnNfdHlwZV9k
aXI6CisgICAgICAgIGxlbiA9IGVudHJ5LT5kaXItPmNvbnRlbnRfc2l6ZTsKKyAgICAgICAgYnJl
YWs7CisgICAgY2FzZSBoeXBmc190eXBlX3N0cmluZzoKKyAgICAgICAgbGVuID0gc3RybGVuKGVu
dHJ5LT5zdHJfdmFsKSArIDE7CisgICAgICAgIGJyZWFrOworICAgIGNhc2UgaHlwZnNfdHlwZV91
aW50OgorICAgICAgICBsZW4gPSAxMTsgICAgICAvKiBsb25nZXN0IHBvc3NpYmxlIHByaW50ZWQg
dmFsdWUgKyAxICovCisgICAgICAgIGJyZWFrOworICAgIH0KKworICAgIHJldHVybiBsZW47Cit9
CisKK2xvbmcgZG9faHlwZnNfb3AodW5zaWduZWQgaW50IGNtZCwKKyAgICAgICAgICAgICAgICAg
WEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh2b2lkKSBhcmcxLCB1bnNpZ25lZCBsb25nIGFyZzIsCisg
ICAgICAgICAgICAgICAgIFhFTl9HVUVTVF9IQU5ETEVfUEFSQU0odm9pZCkgYXJnMywgdW5zaWdu
ZWQgbG9uZyBhcmc0KQoreworICAgIGludCByZXQ7CisgICAgc3RydWN0IGh5cGZzX2VudHJ5ICpl
bnRyeTsKKyAgICB1bnNpZ25lZCBpbnQgbGVuOworICAgIHN0YXRpYyBjaGFyIHBhdGhbWEVOX0hZ
UEZTX01BWF9QQVRITEVOXTsKKworICAgIGlmICggIWlzX2NvbnRyb2xfZG9tYWluKGN1cnJlbnQt
PmRvbWFpbikgJiYKKyAgICAgICAgICFpc19oYXJkd2FyZV9kb21haW4oY3VycmVudC0+ZG9tYWlu
KSApCisgICAgICAgIHJldHVybiAtRVBFUk07CisKKyAgICBzcGluX2xvY2soJmh5cGZzX2xvY2sp
OworCisgICAgcmV0ID0gaHlwZnNfZ2V0X3BhdGhfdXNlcihwYXRoLCBhcmcxLCBhcmcyKTsKKyAg
ICBpZiAoIHJldCApCisgICAgICAgIGdvdG8gb3V0OworCisgICAgZW50cnkgPSBoeXBmc19nZXRf
ZW50cnkocGF0aCk7CisgICAgaWYgKCAhZW50cnkgKQorICAgIHsKKyAgICAgICAgcmV0ID0gLUVO
T0VOVDsKKyAgICAgICAgZ290byBvdXQ7CisgICAgfQorCisgICAgc3dpdGNoICggY21kICkKKyAg
ICB7CisgICAgY2FzZSBYRU5fSFlQRlNfT1BfcmVhZF9jb250ZW50czoKKyAgICB7CisgICAgICAg
IGNoYXIgYnVmWzEyXTsKKyAgICAgICAgY2hhciAqdmFsID0gYnVmOworCisgICAgICAgIGxlbiA9
IGh5cGZzX2dldF9lbnRyeV9sZW4oZW50cnkpOworICAgICAgICBpZiAoIGxlbiA+IGFyZzQgKQor
ICAgICAgICB7CisgICAgICAgICAgICByZXQgPSBsZW47CisgICAgICAgICAgICBicmVhazsKKyAg
ICAgICAgfQorCisgICAgICAgIHN3aXRjaCAoIGVudHJ5LT50eXBlICkKKyAgICAgICAgeworICAg
ICAgICBjYXNlIGh5cGZzX3R5cGVfZGlyOgorICAgICAgICAgICAgcmV0ID0gLUVJU0RJUjsKKyAg
ICAgICAgICAgIGJyZWFrOworICAgICAgICBjYXNlIGh5cGZzX3R5cGVfc3RyaW5nOgorICAgICAg
ICAgICAgdmFsID0gZW50cnktPnN0cl92YWw7CisgICAgICAgICAgICBicmVhazsKKyAgICAgICAg
Y2FzZSBoeXBmc190eXBlX3VpbnQ6CisgICAgICAgICAgICBsZW4gPSBzbnByaW50ZihidWYsIHNp
emVvZihidWYpLCAiJXUiLCAqZW50cnktPnVpbnRfdmFsKSArIDE7CisgICAgICAgICAgICBicmVh
azsKKyAgICAgICAgfQorCisgICAgICAgIGlmICggIXJldCAmJiBjb3B5X3RvX2d1ZXN0KGFyZzMs
IHZhbCwgbGVuKSApCisgICAgICAgICAgICByZXQgPSAtRUZBVUxUOworCisgICAgICAgIGJyZWFr
OworICAgIH0KKworICAgIGNhc2UgWEVOX0hZUEZTX09QX3JlYWRfZGlyOgorICAgIHsKKyAgICAg
ICAgc3RydWN0IGxpc3RfaGVhZCAqbDsKKworICAgICAgICBpZiAoIGVudHJ5LT50eXBlICE9IGh5
cGZzX3R5cGVfZGlyICkKKyAgICAgICAgeworICAgICAgICAgICAgcmV0ID0gLUVOT1RESVI7Cisg
ICAgICAgICAgICBicmVhazsKKyAgICAgICAgfQorCisgICAgICAgIGxlbiA9IGVudHJ5LT5kaXIt
PmNvbnRlbnRfc2l6ZTsKKyAgICAgICAgaWYgKCBsZW4gPiBhcmc0ICkKKyAgICAgICAgeworICAg
ICAgICAgICAgcmV0ID0gbGVuOworICAgICAgICAgICAgYnJlYWs7CisgICAgICAgIH0KKworICAg
ICAgICBsaXN0X2Zvcl9lYWNoICggbCwgJmVudHJ5LT5kaXItPmxpc3QgKQorICAgICAgICB7Cisg
ICAgICAgICAgICBzdHJ1Y3QgeGVuX2h5cGZzX2RpcmVudHJ5IGRpcmVudHJ5OworICAgICAgICAg
ICAgc3RydWN0IGh5cGZzX2VudHJ5ICplID0gbGlzdF9lbnRyeShsLCBzdHJ1Y3QgaHlwZnNfZW50
cnksIGxpc3QpOworICAgICAgICAgICAgdW5zaWduZWQgaW50IGVfbGVuID0gc3RybGVuKGUtPm5h
bWUpICsgMTsKKworICAgICAgICAgICAgZV9sZW4gPSBzaXplb2YoZGlyZW50cnkpICsgUk9VTkRV
UChlX2xlbiwgNCk7CisgICAgICAgICAgICBkaXJlbnRyeS5mbGFncyA9IChlLT50eXBlID09IGh5
cGZzX3R5cGVfZGlyKSA/IFhFTl9IWVBGU19JU0RJUiA6IDA7CisgICAgICAgICAgICBkaXJlbnRy
eS5vZmZfbmV4dCA9IGxpc3RfaXNfbGFzdChsLCAmZW50cnktPmRpci0+bGlzdCkgPyAwIDogZV9s
ZW47CisgICAgICAgICAgICBkaXJlbnRyeS5jb250ZW50X2xlbiA9IGh5cGZzX2dldF9lbnRyeV9s
ZW4oZSk7CisgICAgICAgICAgICBpZiAoIGNvcHlfdG9fZ3Vlc3QoYXJnMywgJmRpcmVudHJ5LCAx
KSApCisgICAgICAgICAgICB7CisgICAgICAgICAgICAgICAgcmV0ID0gLUVGQVVMVDsKKyAgICAg
ICAgICAgICAgICBnb3RvIG91dDsKKyAgICAgICAgICAgIH0KKworICAgICAgICAgICAgaWYgKCBj
b3B5X3RvX2d1ZXN0X29mZnNldChhcmczLCBzaXplb2YoZGlyZW50cnkpLCBlLT5uYW1lLAorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJsZW4oZS0+bmFtZSkgKyAxKSAp
CisgICAgICAgICAgICB7CisgICAgICAgICAgICAgICAgcmV0ID0gLUVGQVVMVDsKKyAgICAgICAg
ICAgICAgICBnb3RvIG91dDsKKyAgICAgICAgICAgIH0KKworICAgICAgICAgICAgZ3Vlc3RfaGFu
ZGxlX2FkZF9vZmZzZXQoYXJnMywgZV9sZW4pOworICAgICAgICB9CisKKyAgICAgICAgYnJlYWs7
CisgICAgfQorCisgICAgY2FzZSBYRU5fSFlQRlNfT1Bfd3JpdGVfY29udGVudHM6CisgICAgICAg
IHJldCA9IC1FQUNDRVM7CisgICAgICAgIGJyZWFrOworCisgICAgZGVmYXVsdDoKKyAgICAgICAg
cmV0ID0gLUVOT1NZUzsKKyAgICAgICAgYnJlYWs7CisgICAgfQorCisgb3V0OgorICAgIHNwaW5f
dW5sb2NrKCZoeXBmc19sb2NrKTsKKworICAgIHJldHVybiByZXQ7Cit9CmRpZmYgLS1naXQgYS94
ZW4vaW5jbHVkZS9wdWJsaWMvZXJybm8uaCBiL3hlbi9pbmNsdWRlL3B1YmxpYy9lcnJuby5oCmlu
ZGV4IGUxZDAyZmNkZGYuLjVjNTNhZjZhZjkgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3B1Ymxp
Yy9lcnJuby5oCisrKyBiL3hlbi9pbmNsdWRlL3B1YmxpYy9lcnJuby5oCkBAIC03OCw2ICs3OCw3
IEBAIFhFTl9FUlJOTyhFQlVTWSwJMTYpCS8qIERldmljZSBvciByZXNvdXJjZSBidXN5ICovCiBY
RU5fRVJSTk8oRUVYSVNULAkxNykJLyogRmlsZSBleGlzdHMgKi8KIFhFTl9FUlJOTyhFWERFViwJ
MTgpCS8qIENyb3NzLWRldmljZSBsaW5rICovCiBYRU5fRVJSTk8oRU5PREVWLAkxOSkJLyogTm8g
c3VjaCBkZXZpY2UgKi8KK1hFTl9FUlJOTyhFTk9URElSLAkyMCkJLyogTm90IGEgZGlyZWN0b3J5
ICovCiBYRU5fRVJSTk8oRUlTRElSLAkyMSkJLyogSXMgYSBkaXJlY3RvcnkgKi8KIFhFTl9FUlJO
TyhFSU5WQUwsCTIyKQkvKiBJbnZhbGlkIGFyZ3VtZW50ICovCiBYRU5fRVJSTk8oRU5GSUxFLAky
MykJLyogRmlsZSB0YWJsZSBvdmVyZmxvdyAqLwpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvcHVi
bGljL2h5cGZzLmggYi94ZW4vaW5jbHVkZS9wdWJsaWMvaHlwZnMuaApuZXcgZmlsZSBtb2RlIDEw
MDY0NAppbmRleCAwMDAwMDAwMDAwLi44ODIyZTJmYjE1Ci0tLSAvZGV2L251bGwKKysrIGIveGVu
L2luY2x1ZGUvcHVibGljL2h5cGZzLmgKQEAgLTAsMCArMSwxMjMgQEAKKy8qKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioKKyAqIFhlbiBIeXBlcnZpc29yIEZpbGVzeXN0ZW0KKyAqCisgKiBDb3B5cmlnaHQg
KGMpIDIwMTksIFNVU0UgU29mdHdhcmUgU29sdXRpb25zIEdlcm1hbnkgR21iSAorICoKKyAqIFBl
cm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29u
IG9idGFpbmluZyBhIGNvcHkKKyAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9j
dW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0bworICogZGVhbCBpbiB0aGUgU29m
dHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0
aGUKKyAqIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3Ry
aWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vcgorICogc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJl
LCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKKyAqIGZ1cm5p
c2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CisgKgor
ICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ug
c2hhbGwgYmUgaW5jbHVkZWQgaW4KKyAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlv
bnMgb2YgdGhlIFNvZnR3YXJlLgorICoKKyAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMg
SVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCisgKiBJTVBMSUVE
LCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5U
QUJJTElUWSwKKyAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZS
SU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQorICogQVVUSE9SUyBPUiBDT1BZUklHSFQg
SE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgorICogTElB
QklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJ
U0UsIEFSSVNJTkcKKyAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNP
RlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKKyAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4K
KyAqCisgKi8KKworI2lmbmRlZiBfX1hFTl9QVUJMSUNfSFlQRlNfSF9fCisjZGVmaW5lIF9fWEVO
X1BVQkxJQ19IWVBGU19IX18KKworI2luY2x1ZGUgInhlbi5oIgorCisvKgorICogRGVmaW5pdGlv
bnMgZm9yIHRoZSBfX0hZUEVSVklTT1JfaHlwZnNfb3AgaHlwZXJjYWxsLgorICovCisKKy8qIE1h
eGltdW0gbGVuZ3RoIG9mIGEgcGF0aCBpbiB0aGUgZmlsZXN5c3RlbS4gKi8KKyNkZWZpbmUgWEVO
X0hZUEZTX01BWF9QQVRITEVOIDEwMjQKKworc3RydWN0IHhlbl9oeXBmc19kaXJlbnRyeSB7Cisg
ICAgdWludDE2X3QgZmxhZ3M7CisjZGVmaW5lIFhFTl9IWVBGU19JU0RJUiAgICAgIDB4MDAwMQor
I2RlZmluZSBYRU5fSFlQRlNfV1JJVEVBQkxFICAweDAwMDIKKyAgICAvKiBPZmZzZXQgaW4gYnl0
ZXMgdG8gbmV4dCBlbnRyeSAoMCA9PSB0aGlzIGlzIHRoZSBsYXN0IGVudHJ5KS4gKi8KKyAgICB1
aW50MTZfdCBvZmZfbmV4dDsKKyAgICB1aW50MzJfdCBjb250ZW50X2xlbjsKKyAgICBjaGFyIG5h
bWVbWEVOX0ZMRVhfQVJSQVlfRElNXTsKK307CisKKy8qCisgKiBIeXBlcmNhbGwgb3BlcmF0aW9u
cy4KKyAqLworCisvKgorICogWEVOX0hZUEZTX09QX3JlYWRfY29udGVudHMKKyAqCisgKiBSZWFk
IGNvbnRlbnRzIG9mIGEgZmlsZXN5c3RlbSBlbnRyeS4KKyAqCisgKiBSZXR1cm5zIHRoZSBjb250
ZW50cyBvZiBhbiBlbnRyeSBpbiB0aGUgYnVmZmVyIHN1cHBsaWVkIGJ5IHRoZSBjYWxsZXIuCisg
KiBPbmx5IHRleHQgZGF0YSB3aXRoIGEgdHJhaWxpbmcgemVybyBieXRlIGlzIHJldHVybmVkLgor
ICoKKyAqIGFyZzE6IFhFTl9HVUVTVF9IQU5ETEUocGF0aCBuYW1lKQorICogYXJnMjogbGVuZ3Ro
IG9mIHBhdGggbmFtZSAoaW5jbHVkaW5nIHRyYWlsaW5nIHplcm8gYnl0ZSkKKyAqIGFyZzM6IFhF
Tl9HVUVTVF9IQU5ETEUoY29udGVudCBidWZmZXIpCisgKiBhcmc0OiBjb250ZW50IGJ1ZmZlciBz
aXplCisgKgorICogUG9zc2libGUgcmV0dXJuIHZhbHVlczoKKyAqIDA6IHN1Y2Nlc3MKKyAqIC1F
UEVSTTogICBvcGVyYXRpb24gbm90IHBlcm1pdHRlZAorICogLUVOT0VOVDogIGVudHJ5IG5vdCBm
b3VuZAorICogLUVBQ0NFU1M6IGFjY2VzcyB0byBlbnRyeSBub3QgcGVybWl0dGVkCisgKiAtRUlT
RElSOiAgZW50cnkgaXMgYSBkaXJlY3RvcnkKKyAqIC1FSU5WQUw6ICBpbnZhbGlkIHBhcmFtZXRl
cgorICogcG9zaXRpdmUgdmFsdWU6IGNvbnRlbnQgYnVmZmVyIHdhcyB0b28gc21hbGwsIHJldHVy
bmVkIHZhbHVlIGlzIG5lZWRlZCBzaXplCisgKi8KKyNkZWZpbmUgWEVOX0hZUEZTX09QX3JlYWRf
Y29udGVudHMgICAgIDEKKworLyoKKyAqIFhFTl9IWVBGU19PUF9yZWFkX2RpcgorICoKKyAqIFJl
YWQgZGlyZWN0b3J5IGVudHJpZXMgb2YgYSBkaXJlY3RvcnkuCisgKgorICogUmV0dXJucyBhIHN0
cnVjdCB4ZW5fZnNfZGlyZW50cnkgZm9yIGVhY2ggZW50cnkgaW4gYSBkaXJlY3RvcnkuCisgKgor
ICogYXJnMTogWEVOX0dVRVNUX0hBTkRMRShwYXRoIG5hbWUpCisgKiBhcmcyOiBsZW5ndGggb2Yg
cGF0aCBuYW1lIChpbmNsdWRpbmcgdHJhaWxpbmcgemVybyBieXRlKQorICogYXJnMzogWEVOX0dV
RVNUX0hBTkRMRShjb250ZW50IGJ1ZmZlcikKKyAqIGFyZzQ6IGNvbnRlbnQgYnVmZmVyIHNpemUK
KyAqCisgKiBQb3NzaWJsZSByZXR1cm4gdmFsdWVzOgorICogMDogc3VjY2VzcworICogLUVQRVJN
OiAgIG9wZXJhdGlvbiBub3QgcGVybWl0dGVkCisgKiAtRU5PRU5UOiAgZW50cnkgbm90IGZvdW5k
CisgKiAtRUFDQ0VTUzogYWNjZXNzIHRvIGVudHJ5IG5vdCBwZXJtaXR0ZWQKKyAqIC1FTk9URElS
OiBlbnRyeSBpcyBub3QgYSBkaXJlY3RvcnkKKyAqIC1FSU5WQUw6ICBpbnZhbGlkIHBhcmFtZXRl
cgorICogcG9zaXRpdmUgdmFsdWU6IGNvbnRlbnQgYnVmZmVyIHdhcyB0b28gc21hbGwsIHJldHVy
bmVkIHZhbHVlIGlzIG5lZWRlZCBzaXplCisgKi8KKyNkZWZpbmUgWEVOX0hZUEZTX09QX3JlYWRf
ZGlyICAgICAgICAgIDIKKworLyoKKyAqIFhFTl9IWVBGU19PUF9yZWFkX2NvbnRlbnRzCisgKgor
ICogV3JpdGUgY29udGVudHMgb2YgYSBmaWxlc3lzdGVtIGVudHJ5LgorICoKKyAqIFdyaXRlcyBh
biBlbnRyeSB3aXRoIHRoZSBjb250ZW50cyBvZiBhIGJ1ZmZlciBzdXBwbGllZCBieSB0aGUgY2Fs
bGVyLgorICogT25seSB0ZXh0IGRhdGEgd2l0aCBhIHRyYWlsaW5nIHplcm8gYnl0ZSBjYW4gYmUg
d3JpdHRlbi4KKyAqCisgKiBhcmcxOiBYRU5fR1VFU1RfSEFORExFKHBhdGggbmFtZSkKKyAqIGFy
ZzI6IGxlbmd0aCBvZiBwYXRoIG5hbWUgKGluY2x1ZGluZyB0cmFpbGluZyB6ZXJvIGJ5dGUpCisg
KiBhcmczOiBYRU5fR1VFU1RfSEFORExFKGNvbnRlbnQgYnVmZmVyKQorICogYXJnNDogY29udGVu
dCBidWZmZXIgc2l6ZQorICoKKyAqIFBvc3NpYmxlIHJldHVybiB2YWx1ZXM6CisgKiAwOiBzdWNj
ZXNzCisgKiAtRVBFUk06ICAgb3BlcmF0aW9uIG5vdCBwZXJtaXR0ZWQKKyAqIC1FTk9FTlQ6ICBl
bnRyeSBub3QgZm91bmQKKyAqIC1FQUNDRVNTOiBhY2Nlc3MgdG8gZW50cnkgbm90IHBlcm1pdHRl
ZAorICogLUVJU0RJUjogIGVudHJ5IGlzIGEgZGlyZWN0b3J5CisgKiAtRUlOVkFMOiAgaW52YWxp
ZCBwYXJhbWV0ZXIKKyAqIC1FTk9NRU06ICBtZW1vcnkgc2hvcnRhZ2UgaW4gdGhlIGh5cGVydmlz
b3IKKyAqLworI2RlZmluZSBYRU5fSFlQRlNfT1Bfd3JpdGVfY29udGVudHMgICAgMworCisjZW5k
aWYgLyogX19YRU5fUFVCTElDX0hZUEZTX0hfXyAqLwpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUv
cHVibGljL3hlbi5oIGIveGVuL2luY2x1ZGUvcHVibGljL3hlbi5oCmluZGV4IGQyMTk4ZGZmYWQu
LmJmODBmMWRhOGMgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3B1YmxpYy94ZW4uaAorKysgYi94
ZW4vaW5jbHVkZS9wdWJsaWMveGVuLmgKQEAgLTEzMCw2ICsxMzAsNyBAQCBERUZJTkVfWEVOX0dV
RVNUX0hBTkRMRSh4ZW5fdWxvbmdfdCk7CiAjZGVmaW5lIF9fSFlQRVJWSVNPUl9hcmdvX29wICAg
ICAgICAgICAgICAzOQogI2RlZmluZSBfX0hZUEVSVklTT1JfeGVucG11X29wICAgICAgICAgICAg
NDAKICNkZWZpbmUgX19IWVBFUlZJU09SX2RtX29wICAgICAgICAgICAgICAgIDQxCisjZGVmaW5l
IF9fSFlQRVJWSVNPUl9oeXBmc19vcCAgICAgICAgICAgICA0MgogCiAvKiBBcmNoaXRlY3R1cmUt
c3BlY2lmaWMgaHlwZXJjYWxsIGRlZmluaXRpb25zLiAqLwogI2RlZmluZSBfX0hZUEVSVklTT1Jf
YXJjaF8wICAgICAgICAgICAgICAgNDgKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9oeXBl
cmNhbGwuaCBiL3hlbi9pbmNsdWRlL3hlbi9oeXBlcmNhbGwuaAppbmRleCBhZDhhZDI3YjIzLi4z
NDlhMGY2NDg3IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vaHlwZXJjYWxsLmgKKysrIGIv
eGVuL2luY2x1ZGUveGVuL2h5cGVyY2FsbC5oCkBAIC0xNTAsNiArMTUwLDE0IEBAIGRvX2RtX29w
KAogICAgIHVuc2lnbmVkIGludCBucl9idWZzLAogICAgIFhFTl9HVUVTVF9IQU5ETEVfUEFSQU0o
eGVuX2RtX29wX2J1Zl90KSBidWZzKTsKIAorZXh0ZXJuIGxvbmcKK2RvX2h5cGZzX29wKAorICAg
IHVuc2lnbmVkIGludCBjbWQsCisgICAgWEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh2b2lkKSBhcmcx
LAorICAgIHVuc2lnbmVkIGxvbmcgYXJnMiwKKyAgICBYRU5fR1VFU1RfSEFORExFX1BBUkFNKHZv
aWQpIGFyZzMsCisgICAgdW5zaWduZWQgbG9uZyBhcmc0KTsKKwogI2lmZGVmIENPTkZJR19DT01Q
QVQKIAogZXh0ZXJuIGludApkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL2h5cGZzLmggYi94
ZW4vaW5jbHVkZS94ZW4vaHlwZnMuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAw
MDAwLi5kMjUzNzIxMWY2Ci0tLSAvZGV2L251bGwKKysrIGIveGVuL2luY2x1ZGUveGVuL2h5cGZz
LmgKQEAgLTAsMCArMSw0MCBAQAorI2lmbmRlZiBfX1hFTl9IWVBGU19IX18KKyNkZWZpbmUgX19Y
RU5fSFlQRlNfSF9fCisKKyNpbmNsdWRlIDx4ZW4vbGlzdC5oPgorCitzdHJ1Y3QgaHlwZnNfZGly
IHsKKyAgICB1bnNpZ25lZCBpbnQgY29udGVudF9zaXplOworICAgIHN0cnVjdCBsaXN0X2hlYWQg
bGlzdDsKK307CisKK2VudW0gaHlwZnNfZW50cnlfdHlwZSB7CisgICAgaHlwZnNfdHlwZV9kaXIs
CisgICAgaHlwZnNfdHlwZV9zdHJpbmcsCisgICAgaHlwZnNfdHlwZV91aW50Cit9OworCitzdHJ1
Y3QgaHlwZnNfZW50cnkgeworICAgIGVudW0gaHlwZnNfZW50cnlfdHlwZSB0eXBlOworICAgIGNv
bnN0IGNoYXIgKm5hbWU7CisgICAgc3RydWN0IGxpc3RfaGVhZCBsaXN0OworICAgIHN0cnVjdCBo
eXBmc19kaXIgKnBhcmVudDsKKyAgICB1bmlvbiB7CisgICAgICAgIHZvaWQgKmNvbnRlbnQ7Cisg
ICAgICAgIHN0cnVjdCBoeXBmc19kaXIgKmRpcjsKKyAgICAgICAgY2hhciAqc3RyX3ZhbDsKKyAg
ICAgICAgdW5zaWduZWQgaW50ICp1aW50X3ZhbDsKKyAgICB9OworfTsKKworZXh0ZXJuIHN0cnVj
dCBoeXBmc19kaXIgaHlwZnNfcm9vdDsKKworaW50IGh5cGZzX25ld19kaXIoc3RydWN0IGh5cGZz
X2RpciAqcGFyZW50LCBjb25zdCBjaGFyICpuYW1lLAorICAgICAgICAgICAgICAgICAgc3RydWN0
IGh5cGZzX2RpciAqZGlyKTsKK2ludCBoeXBmc19uZXdfZW50cnlfc3RyaW5nKHN0cnVjdCBoeXBm
c19kaXIgKnBhcmVudCwgY29uc3QgY2hhciAqbmFtZSwKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGNoYXIgKnZhbCk7CitpbnQgaHlwZnNfbmV3X2VudHJ5X3VpbnQoc3RydWN0IGh5cGZzX2Rp
ciAqcGFyZW50LCBjb25zdCBjaGFyICpuYW1lLAorICAgICAgICAgICAgICAgICAgICAgICAgIHVu
c2lnbmVkIGludCAqdmFsKTsKK3N0cnVjdCBoeXBmc19lbnRyeSAqaHlwZnNfZ2V0X2VudHJ5KGNo
YXIgKnBhdGgpOworCisjZW5kaWYgLyogX19YRU5fSFlQRlNfSF9fICovCi0tIAoyLjE2LjQKCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwg
bWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3Rz
LnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 8816A9D99C9
	for <lists+xen-devel@lfdr.de>; Tue, 26 Nov 2024 15:40:13 +0100 (CET)
Received: from list by lists.xenproject.org with outflank-mailman.843823.1259405 (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1tFwjK-0003ae-1M; Tue, 26 Nov 2024 14:39:54 +0000
X-Outflank-Mailman: Message body and most headers restored to incoming version
Received: by outflank-mailman (output) from mailman id 843823.1259405; Tue, 26 Nov 2024 14:39:54 +0000
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1tFwjJ-0003Y2-Ui; Tue, 26 Nov 2024 14:39:53 +0000
Received: by outflank-mailman (input) for mailman id 843823;
 Tue, 26 Nov 2024 14:39:52 +0000
Received: from se1-gles-flk1-in.inumbo.com ([94.247.172.50]
 helo=se1-gles-flk1.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.92) (envelope-from
 <SRS0=t/Rf=SV=bounce.vates.tech=bounce-md_30504962.6745ddae.v1-2cba761cecbd4861a1825b597b692414@srs-se1.protection.inumbo.net>)
 id 1tFwjI-0003Xv-8w
 for xen-devel@lists.xenproject.org; Tue, 26 Nov 2024 14:39:52 +0000
Received: from mail134-5.atl141.mandrillapp.com
 (mail134-5.atl141.mandrillapp.com [198.2.134.5])
 by se1-gles-flk1.inumbo.com (Halon) with ESMTPS
 id 46f23ce4-ac04-11ef-99a3-01e77a169b0f;
 Tue, 26 Nov 2024 15:39:44 +0100 (CET)
Received: from pmta10.mandrill.prod.atl01.rsglab.com (localhost [127.0.0.1])
 by mail134-5.atl141.mandrillapp.com (Mailchimp) with ESMTP id
 4XyQFp64nNzG0CMGK
 for <xen-devel@lists.xenproject.org>; Tue, 26 Nov 2024 14:39:42 +0000 (GMT)
Received: from [37.26.189.201] by mandrillapp.com id
 2cba761cecbd4861a1825b597b692414; Tue, 26 Nov 2024 14:39:42 +0000
X-BeenThere: xen-devel@lists.xenproject.org
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Errors-To: xen-devel-bounces@lists.xenproject.org
Precedence: list
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>
X-Inumbo-ID: 46f23ce4-ac04-11ef-99a3-01e77a169b0f
X-Custom-Connection: eyJyZW1vdGVpcCI6IjE5OC4yLjEzNC41IiwiaGVsbyI6Im1haWwxMzQtNS5hdGwxNDEubWFuZHJpbGxhcHAuY29tIn0=
X-Custom-Transaction: eyJpZCI6IjQ2ZjIzY2U0LWFjMDQtMTFlZi05OWEzLTAxZTc3YTE2OWIwZiIsInRzIjoxNzMyNjMxOTg1LjIwMTg5Nywic2VuZGVyIjoiYm91bmNlLW1kXzMwNTA0OTYyLjY3NDVkZGFlLnYxLTJjYmE3NjFjZWNiZDQ4NjFhMTgyNWI1OTdiNjkyNDE0QGJvdW5jZS52YXRlcy50ZWNoIiwicmVjaXBpZW50IjoieGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnIn0=
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=mandrillapp.com;
	s=mte1; t=1732631982; x=1732892482;
	bh=r7aSQzsbEY2COy1gzBB7AI0lYDrwujxSApcj0eFQHFQ=;
	h=From:Subject:Message-Id:To:Cc:References:In-Reply-To:Feedback-ID:
	 Date:MIME-Version:Content-Type:Content-Transfer-Encoding:CC:Date:
	 Subject:From;
	b=sf4GVgNYi/GeTyLxzxA8Mop6HYHvweLUQyvK3RJ3FvSf4GCCApfDZRZ7OLN9LEsjA
	 EFmDMc+aF5N5IWUSb1q5L3vhV/AdhnH9Jg0tTBNVcp7RChsynwARPOaSSZDUYcrvDc
	 dQ+MapxIO34WvDQzVQPf36u5FPgS+ZN/EAxjGkuA3iDqOMkIcsRLu1m5liuuKflpSk
	 +44HCjgVHAQ1N+JRSXMLcLD/fWMJLC5olTW9wGTOcgl3JDU+DldMidwk1kXKGSMAj5
	 7JIl75WhZ8xSsozW/L2OnbhCNVeDSAKYNDye5pKwUyLGElGFXlKc3eaa+jfwT0dWsd
	 Aq4uK4qMHYoJw==
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=vates.tech; s=mte1;
	t=1732631982; x=1732892482; i=teddy.astie@vates.tech;
	bh=r7aSQzsbEY2COy1gzBB7AI0lYDrwujxSApcj0eFQHFQ=;
	h=From:Subject:Message-Id:To:Cc:References:In-Reply-To:Feedback-ID:
	 Date:MIME-Version:Content-Type:Content-Transfer-Encoding:CC:Date:
	 Subject:From;
	b=uMryZygIk4fAIjqAAxhLBK1znBsd8H59TQDWYy1yduPBWR+sISS9rGtxisUCVULVz
	 lHKBeeowtzfWNBNbDvWMWf/C1vYmZUKma4bNhE98ZvOoSkMS4oNNsVUTZlc3qHmtVg
	 Ye9cOg/zgSNeSktaGLRMDF7T2eORujwOeLOyY0PiNHo/heDT3HvXC6O7oGUjvmEErX
	 8zyWE2yVq7Nnm7GTBHH2x6d9aW9C2HmnF5H/0BpejCfgds7HSqxafnEyUxuvYoOxUq
	 1hOJASOeePWW9tQVj39UZMfowHed5H8cbcuJuv7J37/VzO6pmW0ZYB8ns3G5tKO1Wk
	 fvfH4EB/yUBNQ==
From: "Teddy Astie" <teddy.astie@vates.tech>
Subject: =?utf-8?Q?Re:=20[RFC=20PATCH=2012/25]=20xen:=20Replace=20sysctl/readconsole=20with=20autogenerated=20version?=
X-Bm-Disclaimer: Yes
X-Bm-Milter-Handled: 4ffbd6c1-ee69-4e1b-aabd-f977039bd3e2
X-Bm-Transport-Timestamp: 1732631981388
Message-Id: <6bba75e1-72d9-482e-be11-40c549651f10@vates.tech>
To: "Jan Beulich" <jbeulich@suse.com>, "Alejandro Vallejo" <alejandro.vallejo@cloud.com>
Cc: "Anthony PERARD" <anthony.perard@vates.tech>, "Samuel Thibault" <samuel.thibault@ens-lyon.org>, "Andrew Cooper" <andrew.cooper3@citrix.com>, "Julien Grall" <julien@xen.org>, "Stefano Stabellini" <sstabellini@kernel.org>, "Daniel P. Smith" <dpsmith@apertussolutions.com>, xen-devel@lists.xenproject.org
References: <20241115115200.2824-1-alejandro.vallejo@cloud.com> <20241115115200.2824-13-alejandro.vallejo@cloud.com> <0a5a66d9-4fd4-4084-b7f9-0923d5a4c6d5@suse.com> <D5VHI2OA8QTK.1H4ZDUSP5EZX5@cloud.com> <737292fd-1c4a-4fd6-ae98-a701adb0b88e@suse.com> <D5W3YYDE2F09.IHJMRBUBE6EV@cloud.com> <e40ed7c2-6111-468e-8655-884953bd33e7@suse.com>
In-Reply-To: <e40ed7c2-6111-468e-8655-884953bd33e7@suse.com>
X-Native-Encoded: 1
X-Report-Abuse: =?UTF-8?Q?Please=20forward=20a=20copy=20of=20this=20message,=20including=20all=20headers,=20to=20abuse@mandrill.com.=20You=20can=20also=20report=20abuse=20here:=20https://mandrillapp.com/contact/abuse=3Fid=3D30504962.2cba761cecbd4861a1825b597b692414?=
X-Mandrill-User: md_30504962
Feedback-ID: 30504962:30504962.20241126:md
Date: Tue, 26 Nov 2024 14:39:42 +0000
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hello,

Le 26/11/2024 =C3=A0 14:20, Jan Beulich a =C3=A9crit=C2=A0:
>>> Signed-ness of plain char doesn't really matter as long as it's used on=
ly for
>>> what really are characters (or strings thereof). And that looks the be =
pretty
>>> much the case throughout the public headers.
>> Maybe. Still, as a general principle caller and callee ought to agree on=
 size,
>> alignment and sign for every type. I'd rather not make exceptions for th=
at
>> invariant unless truly well motivated. And in this case it's a case of
>> requiring trivial non-functional changes.
> In how far they're non-functional will need to be seen. You also need to =
keep
> consumers in mind: They may face sudden type disagreement that compilers =
may
> complain about. Yet "stable" for the public headers means not just the AB=
I
> itself being stable, but updated headers also being usable as drop-in
> replacements for older versions.

I don't think we currently enforce stability on all Xen headers 
(especially not those control-domain related).
For instance

Commit 21e3ef57e0406b6b9a783f721f29df8f91a00f99
x86: Rename {domctl,sysctl}.cpu_policy.{cpuid,msr}_policy fields

actually modifies the name of some fields in a struct of sysctl.h, so I 
suppose modifying the type of fields with more defined variants is 
acceptable.

One thing remain is that if the user is not careful of this change and 
char is silently replaced by uint8_t, could that break something by 
possibly changing the signed-ness ?

Teddy


Teddy Astie | Vates XCP-ng Developer

XCP-ng & Xen Orchestra - Vates solutions

web: https://vates.tech



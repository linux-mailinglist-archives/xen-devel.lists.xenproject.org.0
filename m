Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id E64C517C59C
	for <lists+xen-devel@lfdr.de>; Fri,  6 Mar 2020 19:44:12 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jAHuJ-0000Si-3D; Fri, 06 Mar 2020 18:41:11 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=JxAG=4X=amazon.com=prvs=3272f14fc=anchalag@srs-us1.protection.inumbo.net>)
 id 1jAHuI-0000Sd-49
 for xen-devel@lists.xenproject.org; Fri, 06 Mar 2020 18:41:10 +0000
X-Inumbo-ID: 0b6a45f6-5fda-11ea-a865-12813bfff9fa
Received: from smtp-fw-6002.amazon.com (unknown [52.95.49.90])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 0b6a45f6-5fda-11ea-a865-12813bfff9fa;
 Fri, 06 Mar 2020 18:41:08 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.com; i=@amazon.com; q=dns/txt; s=amazon201209;
 t=1583520069; x=1615056069;
 h=date:from:to:cc:subject:message-id:references:
 mime-version:content-transfer-encoding:in-reply-to;
 bh=LX5YzkH7Pbr0juu9cPywdaUjXZNtvoQ0/dDSAKHCVE4=;
 b=lGhe2ekeUTrE+GPc4kEA7MAhBqWFcrI8n5tzXyWRWVySpfeTTeM5sA3M
 1zhSaKc6NznpCv1xwAsIfVmGfeRgrXRPxRjrmLC0rnfuhVXl7V8CEKmTd
 UPE1VKItmpW6Jl+oUZioRxXiul6mCevabBRi5bQydrWZbbleSHe1y4cwF I=;
IronPort-SDR: rwMd0NgzgS1CgXt2MLcRmEQROUZmIPkBtalvEa9cgrPMXvnjpRZkxoMo0OTcBJIfaxLKTY9Oo+
 0SjUBhxRD1JA==
X-IronPort-AV: E=Sophos;i="5.70,523,1574121600"; d="scan'208";a="19961119"
Received: from iad12-co-svc-p1-lb1-vlan3.amazon.com (HELO
 email-inbound-relay-1e-a70de69e.us-east-1.amazon.com) ([10.43.8.6])
 by smtp-border-fw-out-6002.iad6.amazon.com with ESMTP;
 06 Mar 2020 18:40:57 +0000
Received: from EX13MTAUEB002.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan2.iad.amazon.com [10.40.159.162])
 by email-inbound-relay-1e-a70de69e.us-east-1.amazon.com (Postfix) with ESMTPS
 id CABEEA2C8A; Fri,  6 Mar 2020 18:40:49 +0000 (UTC)
Received: from EX13D08UEB004.ant.amazon.com (10.43.60.142) by
 EX13MTAUEB002.ant.amazon.com (10.43.60.12) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Fri, 6 Mar 2020 18:40:34 +0000
Received: from EX13MTAUEA001.ant.amazon.com (10.43.61.82) by
 EX13D08UEB004.ant.amazon.com (10.43.60.142) with Microsoft SMTP Server (TLS)
 id 15.0.1497.2; Fri, 6 Mar 2020 18:40:33 +0000
Received: from dev-dsk-anchalag-2a-9c2d1d96.us-west-2.amazon.com
 (172.22.96.68) by mail-relay.amazon.com (10.43.61.243) with Microsoft SMTP
 Server id 15.0.1367.3 via Frontend Transport; Fri, 6 Mar 2020 18:40:33 +0000
Received: by dev-dsk-anchalag-2a-9c2d1d96.us-west-2.amazon.com (Postfix,
 from userid 4335130)
 id 821E640865; Fri,  6 Mar 2020 18:40:33 +0000 (UTC)
Date: Fri, 6 Mar 2020 18:40:33 +0000
From: Anchal Agarwal <anchalag@amazon.com>
To: Roger Pau =?iso-8859-1?Q?Monn=E9?= <roger.pau@citrix.com>
Message-ID: <20200306184033.GA25358@dev-dsk-anchalag-2a-9c2d1d96.us-west-2.amazon.com>
References: <cover.1581721799.git.anchalag@amazon.com>
 <890c404c585d7790514527f0c021056a7be6e748.1581721799.git.anchalag@amazon.com>
 <20200221142445.GZ4679@Air-de-Roger>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20200221142445.GZ4679@Air-de-Roger>
User-Agent: Mutt/1.5.21 (2010-09-15)
Precedence: Bulk
Subject: Re: [Xen-devel] [RFC PATCH v3 06/12] xen-blkfront: add callbacks
 for PM suspend and hibernation
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: eduval@amazon.com, len.brown@intel.com, peterz@infradead.org,
 benh@kernel.crashing.org, x86@kernel.org, linux-mm@kvack.org, pavel@ucw.cz,
 hpa@zytor.com, tglx@linutronix.de, sstabellini@kernel.org, fllinden@amaozn.com,
 kamatam@amazon.com, mingo@redhat.com, xen-devel@lists.xenproject.org,
 sblbir@amazon.com, axboe@kernel.dk, konrad.wilk@oracle.com, bp@alien8.de,
 boris.ostrovsky@oracle.com, jgross@suse.com, netdev@vger.kernel.org,
 linux-pm@vger.kernel.org, rjw@rjwysocki.net, linux-kernel@vger.kernel.org,
 vkuznets@redhat.com, davem@davemloft.net, dwmw@amazon.co.uk
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gRnJpLCBGZWIgMjEsIDIwMjAgYXQgMDM6MjQ6NDVQTSArMDEwMCwgUm9nZXIgUGF1IE1vbm7D
qSB3cm90ZToKPiBPbiBGcmksIEZlYiAxNCwgMjAyMCBhdCAxMToyNTozNFBNICswMDAwLCBBbmNo
YWwgQWdhcndhbCB3cm90ZToKPiA+IEZyb206IE11bmVoaXNhIEthbWF0YSA8a2FtYXRhbUBhbWF6
b24uY29tCj4gPiAKPiA+IEFkZCBmcmVlemUsIHRoYXcgYW5kIHJlc3RvcmUgY2FsbGJhY2tzIGZv
ciBQTSBzdXNwZW5kIGFuZCBoaWJlcm5hdGlvbgo+ID4gc3VwcG9ydC4gQWxsIGZyb250ZW5kIGRy
aXZlcnMgdGhhdCBuZWVkcyB0byB1c2UgUE1fSElCRVJOQVRJT04vUE1fU1VTUEVORAo+ID4gZXZl
bnRzLCBuZWVkIHRvIGltcGxlbWVudCB0aGVzZSB4ZW5idXNfZHJpdmVyIGNhbGxiYWNrcy4KPiA+
IFRoZSBmcmVlemUgaGFuZGxlciBzdG9wcyBhIGJsb2NrLWxheWVyIHF1ZXVlIGFuZCBkaXNjb25u
ZWN0IHRoZQo+ID4gZnJvbnRlbmQgZnJvbSB0aGUgYmFja2VuZCB3aGlsZSBmcmVlaW5nIHJpbmdf
aW5mbyBhbmQgYXNzb2NpYXRlZCByZXNvdXJjZXMuCj4gPiBUaGUgcmVzdG9yZSBoYW5kbGVyIHJl
LWFsbG9jYXRlcyByaW5nX2luZm8gYW5kIHJlLWNvbm5lY3QgdG8gdGhlCj4gPiBiYWNrZW5kLCBz
byB0aGUgcmVzdCBvZiB0aGUga2VybmVsIGNhbiBjb250aW51ZSB0byB1c2UgdGhlIGJsb2NrIGRl
dmljZQo+ID4gdHJhbnNwYXJlbnRseS4gQWxzbywgdGhlIGhhbmRsZXJzIGFyZSB1c2VkIGZvciBi
b3RoIFBNIHN1c3BlbmQgYW5kCj4gPiBoaWJlcm5hdGlvbiBzbyB0aGF0IHdlIGNhbiBrZWVwIHRo
ZSBleGlzdGluZyBzdXNwZW5kL3Jlc3VtZSBjYWxsYmFja3MgZm9yCj4gPiBYZW4gc3VzcGVuZCB3
aXRob3V0IG1vZGlmaWNhdGlvbi4gQmVmb3JlIGRpc2Nvbm5lY3RpbmcgZnJvbSBiYWNrZW5kLAo+
ID4gd2UgbmVlZCB0byBwcmV2ZW50IGFueSBuZXcgSU8gZnJvbSBiZWluZyBxdWV1ZWQgYW5kIHdh
aXQgZm9yIGV4aXN0aW5nCj4gPiBJTyB0byBjb21wbGV0ZS4gRnJlZXplL3VuZnJlZXplIG9mIHRo
ZSBxdWV1ZXMgd2lsbCBndWFyYW50ZWUgdGhhdCB0aGVyZQo+ID4gYXJlIG5vIHJlcXVlc3RzIGlu
IHVzZSBvbiB0aGUgc2hhcmVkIHJpbmcuCj4gPiAKPiA+IE5vdGU6Rm9yIG9sZGVyIGJhY2tlbmRz
LGlmIGEgYmFja2VuZCBkb2Vzbid0IGhhdmUgY29tbWl0JzEyZWE3Mjk2NDVhY2UnCj4gPiB4ZW4v
YmxrYmFjazogdW5tYXAgYWxsIHBlcnNpc3RlbnQgZ3JhbnRzIHdoZW4gZnJvbnRlbmQgZ2V0cyBk
aXNjb25uZWN0ZWQsCj4gPiB0aGUgZnJvbnRlbmQgbWF5IHNlZSBtYXNzaXZlIGFtb3VudCBvZiBn
cmFudCB0YWJsZSB3YXJuaW5nIHdoZW4gZnJlZWluZwo+ID4gcmVzb3VyY2VzLgo+ID4gWyAgIDM2
Ljg1MjY1OV0gZGVmZXJyaW5nIGcuZS4gMHhmOSAocGZuIDB4ZmZmZmZmZmZmZmZmZmZmZikKPiA+
IFsgICAzNi44NTUwODldIHhlbjpncmFudF90YWJsZTogV0FSTklORzplLmcuIDB4MTEyIHN0aWxs
IGluIHVzZSEKPiA+IAo+ID4gSW4gdGhpcyBjYXNlLCBwZXJzaXN0ZW50IGdyYW50cyB3b3VsZCBu
ZWVkIHRvIGJlIGRpc2FibGVkLgo+ID4gCj4gPiBbQW5jaGFsIENoYW5nZWxvZzogUmVtb3ZlZCB0
aW1lb3V0L3JlcXVlc3QgZHVyaW5nIGJsa2Zyb250IGZyZWV6ZS4KPiA+IEZpeGVkIG1ham9yIHBh
cnQgb2YgdGhlIGNvZGUgdG8gd29yayB3aXRoIGJsay1tcV0KPiA+IFNpZ25lZC1vZmYtYnk6IEFu
Y2hhbCBBZ2Fyd2FsIDxhbmNoYWxhZ0BhbWF6b24uY29tPgo+ID4gU2lnbmVkLW9mZi1ieTogTXVu
ZWhpc2EgS2FtYXRhIDxrYW1hdGFtQGFtYXpvbi5jb20+Cj4gPiAtLS0KPiA+ICBkcml2ZXJzL2Js
b2NrL3hlbi1ibGtmcm9udC5jIHwgMTE5ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
LS0tCj4gPiAgMSBmaWxlIGNoYW5nZWQsIDExMiBpbnNlcnRpb25zKCspLCA3IGRlbGV0aW9ucygt
KQo+ID4gCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ibG9jay94ZW4tYmxrZnJvbnQuYyBiL2Ry
aXZlcnMvYmxvY2sveGVuLWJsa2Zyb250LmMKPiA+IGluZGV4IDQ3ODEyMDIzMzc1MC4uZDcxNWVk
M2NiNjlhIDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVycy9ibG9jay94ZW4tYmxrZnJvbnQuYwo+ID4g
KysrIGIvZHJpdmVycy9ibG9jay94ZW4tYmxrZnJvbnQuYwo+ID4gQEAgLTQ3LDYgKzQ3LDggQEAK
PiA+ICAjaW5jbHVkZSA8bGludXgvYml0bWFwLmg+Cj4gPiAgI2luY2x1ZGUgPGxpbnV4L2xpc3Qu
aD4KPiA+ICAjaW5jbHVkZSA8bGludXgvd29ya3F1ZXVlLmg+Cj4gPiArI2luY2x1ZGUgPGxpbnV4
L2NvbXBsZXRpb24uaD4KPiA+ICsjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KPiA+ICAKPiA+ICAj
aW5jbHVkZSA8eGVuL3hlbi5oPgo+ID4gICNpbmNsdWRlIDx4ZW4veGVuYnVzLmg+Cj4gPiBAQCAt
NzksNiArODEsOCBAQCBlbnVtIGJsa2lmX3N0YXRlIHsKPiA+ICAJQkxLSUZfU1RBVEVfRElTQ09O
TkVDVEVELAo+ID4gIAlCTEtJRl9TVEFURV9DT05ORUNURUQsCj4gPiAgCUJMS0lGX1NUQVRFX1NV
U1BFTkRFRCwKPiA+ICsJQkxLSUZfU1RBVEVfRlJFRVpJTkcsCj4gPiArCUJMS0lGX1NUQVRFX0ZS
T1pFTgo+ID4gIH07Cj4gPiAgCj4gPiAgc3RydWN0IGdyYW50IHsKPiA+IEBAIC0yMjAsNiArMjI0
LDcgQEAgc3RydWN0IGJsa2Zyb250X2luZm8KPiA+ICAJc3RydWN0IGxpc3RfaGVhZCByZXF1ZXN0
czsKPiA+ICAJc3RydWN0IGJpb19saXN0IGJpb19saXN0Owo+ID4gIAlzdHJ1Y3QgbGlzdF9oZWFk
IGluZm9fbGlzdDsKPiA+ICsJc3RydWN0IGNvbXBsZXRpb24gd2FpdF9iYWNrZW5kX2Rpc2Nvbm5l
Y3RlZDsKPiA+ICB9Owo+ID4gIAo+ID4gIHN0YXRpYyB1bnNpZ25lZCBpbnQgbnJfbWlub3JzOwo+
ID4gQEAgLTI2MSw2ICsyNjYsNyBAQCBzdGF0aWMgREVGSU5FX1NQSU5MT0NLKG1pbm9yX2xvY2sp
Owo+ID4gIHN0YXRpYyBpbnQgYmxrZnJvbnRfc2V0dXBfaW5kaXJlY3Qoc3RydWN0IGJsa2Zyb250
X3JpbmdfaW5mbyAqcmluZm8pOwo+ID4gIHN0YXRpYyB2b2lkIGJsa2Zyb250X2dhdGhlcl9iYWNr
ZW5kX2ZlYXR1cmVzKHN0cnVjdCBibGtmcm9udF9pbmZvICppbmZvKTsKPiA+ICBzdGF0aWMgaW50
IG5lZ290aWF0ZV9tcShzdHJ1Y3QgYmxrZnJvbnRfaW5mbyAqaW5mbyk7Cj4gPiArc3RhdGljIHZv
aWQgX19ibGtpZl9mcmVlKHN0cnVjdCBibGtmcm9udF9pbmZvICppbmZvKTsKPiAKPiBJJ20gbm90
IHBhcnRpY3VsYXJseSBmb3VuZCBvZiBhZGRpbmcgdW5kZXJzY29yZSBwcmVmaXhlcyB0byBmdW5j
dGlvbnMsCj4gSSB3b3VsZCByYXRoZXIgdXNlIGEgbW9yZSBkZXNjcmlwdGl2ZSBuYW1lIGlmIHBv
c3NpYmxlLgo+IGJsa2lmX2ZyZWVfe3F1ZXVlcy9yaW5nc30gbWF5YmU/Cj4KQXBvbG9naWVzIGZv
ciBkZWxheWVkIHJlc3BvbnNlIGFzIEkgd2FzIE9PVE8uCkFwcHJlY2lhdGUgeW91ciBmZWVkYmFj
ay4gV2lsbCBmaXgKPiA+ICAKPiA+ICBzdGF0aWMgaW50IGdldF9pZF9mcm9tX2ZyZWVsaXN0KHN0
cnVjdCBibGtmcm9udF9yaW5nX2luZm8gKnJpbmZvKQo+ID4gIHsKPiA+IEBAIC05OTUsNiArMTAw
MSw3IEBAIHN0YXRpYyBpbnQgeGx2YmRfaW5pdF9ibGtfcXVldWUoc3RydWN0IGdlbmRpc2sgKmdk
LCB1MTYgc2VjdG9yX3NpemUsCj4gPiAgCWluZm8tPnNlY3Rvcl9zaXplID0gc2VjdG9yX3NpemU7
Cj4gPiAgCWluZm8tPnBoeXNpY2FsX3NlY3Rvcl9zaXplID0gcGh5c2ljYWxfc2VjdG9yX3NpemU7
Cj4gPiAgCWJsa2lmX3NldF9xdWV1ZV9saW1pdHMoaW5mbyk7Cj4gPiArCWluaXRfY29tcGxldGlv
bigmaW5mby0+d2FpdF9iYWNrZW5kX2Rpc2Nvbm5lY3RlZCk7Cj4gPiAgCj4gPiAgCXJldHVybiAw
Owo+ID4gIH0KPiA+IEBAIC0xMjE4LDYgKzEyMjUsOCBAQCBzdGF0aWMgdm9pZCB4bHZiZF9yZWxl
YXNlX2dlbmRpc2soc3RydWN0IGJsa2Zyb250X2luZm8gKmluZm8pCj4gPiAgLyogQWxyZWFkeSBo
b2xkIHJpbmZvLT5yaW5nX2xvY2suICovCj4gPiAgc3RhdGljIGlubGluZSB2b2lkIGtpY2tfcGVu
ZGluZ19yZXF1ZXN0X3F1ZXVlc19sb2NrZWQoc3RydWN0IGJsa2Zyb250X3JpbmdfaW5mbyAqcmlu
Zm8pCj4gPiAgewo+ID4gKwlpZiAodW5saWtlbHkocmluZm8tPmRldl9pbmZvLT5jb25uZWN0ZWQg
PT0gQkxLSUZfU1RBVEVfRlJFRVpJTkcpKQo+ID4gKwkJcmV0dXJuOwo+IAo+IERvIHlvdSByZWFs
bHkgbmVlZCB0aGlzIGNoZWNrIGhlcmU/Cj4gCj4gVGhlIHF1ZXVlIHdpbGwgYmUgZnJvemVuIGFu
ZCBxdWllc2NlZCBpbiBibGtmcm9udF9mcmVlemUgd2hlbiB0aGUgc3RhdGUKPiBpcyBzZXQgdG8g
QkxLSUZfU1RBVEVfRlJFRVpJTkcsIGFuZCB0aGVuIHRoZSBjYWxsIHRvCj4gYmxrX21xX3N0YXJ0
X3N0b3BwZWRfaHdfcXVldWVzIGlzIGp1c3QgYSBub29wIGFzIGxvbmcgYXMgdGhlIHF1ZXVlIGlz
Cj4gcXVpZXNjZWQgKHNlZSBibGtfbXFfcnVuX2h3X3F1ZXVlKS4KPiAKWW91IGFyZSByaWdodC4g
V2lsbCBmaXggaXQuIE1heSBoYXZlIHNraXBwZWQgdGhpcyBwYXJ0IG9mIHRoZSBwYXRjaCB3aGVu
IGZpeGluZwpibGtmcm9udF9mcmVlemUuCj4gPiAgCWlmICghUklOR19GVUxMKCZyaW5mby0+cmlu
ZykpCj4gPiAgCQlibGtfbXFfc3RhcnRfc3RvcHBlZF9od19xdWV1ZXMocmluZm8tPmRldl9pbmZv
LT5ycSwgdHJ1ZSk7Cj4gPiAgfQo+ID4gQEAgLTEzNDEsOCArMTM1MCw2IEBAIHN0YXRpYyB2b2lk
IGJsa2lmX2ZyZWVfcmluZyhzdHJ1Y3QgYmxrZnJvbnRfcmluZ19pbmZvICpyaW5mbykKPiA+ICAK
PiA+ICBzdGF0aWMgdm9pZCBibGtpZl9mcmVlKHN0cnVjdCBibGtmcm9udF9pbmZvICppbmZvLCBp
bnQgc3VzcGVuZCkKPiA+ICB7Cj4gPiAtCXVuc2lnbmVkIGludCBpOwo+ID4gLQo+ID4gIAkvKiBQ
cmV2ZW50IG5ldyByZXF1ZXN0cyBiZWluZyBpc3N1ZWQgdW50aWwgd2UgZml4IHRoaW5ncyB1cC4g
Ki8KPiA+ICAJaW5mby0+Y29ubmVjdGVkID0gc3VzcGVuZCA/Cj4gPiAgCQlCTEtJRl9TVEFURV9T
VVNQRU5ERUQgOiBCTEtJRl9TVEFURV9ESVNDT05ORUNURUQ7Cj4gPiBAQCAtMTM1MCw2ICsxMzU3
LDEzIEBAIHN0YXRpYyB2b2lkIGJsa2lmX2ZyZWUoc3RydWN0IGJsa2Zyb250X2luZm8gKmluZm8s
IGludCBzdXNwZW5kKQo+ID4gIAlpZiAoaW5mby0+cnEpCj4gPiAgCQlibGtfbXFfc3RvcF9od19x
dWV1ZXMoaW5mby0+cnEpOwo+ID4gIAo+ID4gKwlfX2Jsa2lmX2ZyZWUoaW5mbyk7Cj4gPiArfQo+
ID4gKwo+ID4gK3N0YXRpYyB2b2lkIF9fYmxraWZfZnJlZShzdHJ1Y3QgYmxrZnJvbnRfaW5mbyAq
aW5mbykKPiA+ICt7Cj4gPiArCXVuc2lnbmVkIGludCBpOwo+ID4gKwo+ID4gIAlmb3IgKGkgPSAw
OyBpIDwgaW5mby0+bnJfcmluZ3M7IGkrKykKPiA+ICAJCWJsa2lmX2ZyZWVfcmluZygmaW5mby0+
cmluZm9baV0pOwo+ID4gIAo+ID4gQEAgLTE1NTMsOCArMTU2NywxMCBAQCBzdGF0aWMgaXJxcmV0
dXJuX3QgYmxraWZfaW50ZXJydXB0KGludCBpcnEsIHZvaWQgKmRldl9pZCkKPiA+ICAJc3RydWN0
IGJsa2Zyb250X3JpbmdfaW5mbyAqcmluZm8gPSAoc3RydWN0IGJsa2Zyb250X3JpbmdfaW5mbyAq
KWRldl9pZDsKPiA+ICAJc3RydWN0IGJsa2Zyb250X2luZm8gKmluZm8gPSByaW5mby0+ZGV2X2lu
Zm87Cj4gPiAgCj4gPiAtCWlmICh1bmxpa2VseShpbmZvLT5jb25uZWN0ZWQgIT0gQkxLSUZfU1RB
VEVfQ09OTkVDVEVEKSkKPiA+IC0JCXJldHVybiBJUlFfSEFORExFRDsKPiA+ICsJaWYgKHVubGlr
ZWx5KGluZm8tPmNvbm5lY3RlZCAhPSBCTEtJRl9TVEFURV9DT05ORUNURUQpKSB7Cj4gPiArCQlp
ZiAoaW5mby0+Y29ubmVjdGVkICE9IEJMS0lGX1NUQVRFX0ZSRUVaSU5HKQo+IAo+IFBsZWFzZSBm
b2xkIHRoaXMgaW50byB0aGUgcHJldmlvdXMgaWYgY29uZGl0aW9uOgo+IAo+IGlmICh1bmxpa2Vs
eShpbmZvLT5jb25uZWN0ZWQgIT0gQkxLSUZfU1RBVEVfQ09OTkVDVEVEICYmCj4gICAgICAgICAg
ICAgIGluZm8tPmNvbm5lY3RlZCAhPSBCTEtJRl9TVEFURV9GUkVFWklORykpCj4gCXJldHVybiBJ
UlFfSEFORExFRDsKPgpBQ0sKPiA+ICsJfQo+ID4gIAo+ID4gIAlzcGluX2xvY2tfaXJxc2F2ZSgm
cmluZm8tPnJpbmdfbG9jaywgZmxhZ3MpOwo+ID4gICBhZ2FpbjoKPiA+IEBAIC0yMDIwLDYgKzIw
MzYsNyBAQCBzdGF0aWMgaW50IGJsa2lmX3JlY292ZXIoc3RydWN0IGJsa2Zyb250X2luZm8gKmlu
Zm8pCj4gPiAgCXN0cnVjdCBiaW8gKmJpbzsKPiA+ICAJdW5zaWduZWQgaW50IHNlZ3M7Cj4gPiAg
Cj4gPiArCWJvb2wgZnJvemVuID0gaW5mby0+Y29ubmVjdGVkID09IEJMS0lGX1NUQVRFX0ZST1pF
TjsKPiAKPiBQbGVhc2UgcGxhY2UgdGhpcyB0b2dldGhlciB3aXRoIHRoZSByZXN0IG9mIHRoZSBs
b2NhbCB2YXJpYWJsZQo+IGRlY2xhcmF0aW9ucy4KPiAKQUNLCj4gPiAgCWJsa2Zyb250X2dhdGhl
cl9iYWNrZW5kX2ZlYXR1cmVzKGluZm8pOwo+ID4gIAkvKiBSZXNldCBsaW1pdHMgY2hhbmdlZCBi
eSBibGtfbXFfdXBkYXRlX25yX2h3X3F1ZXVlcygpLiAqLwo+ID4gIAlibGtpZl9zZXRfcXVldWVf
bGltaXRzKGluZm8pOwo+ID4gQEAgLTIwNDYsNiArMjA2Myw5IEBAIHN0YXRpYyBpbnQgYmxraWZf
cmVjb3ZlcihzdHJ1Y3QgYmxrZnJvbnRfaW5mbyAqaW5mbykKPiA+ICAJCWtpY2tfcGVuZGluZ19y
ZXF1ZXN0X3F1ZXVlcyhyaW5mbyk7Cj4gPiAgCX0KPiA+ICAKPiA+ICsJaWYgKGZyb3plbikKPiA+
ICsJCXJldHVybiAwOwo+IAo+IEkgaGF2ZSB0byBhZG1pdCBteSBtZW1vcnkgaXMgZnV6enkgaGVy
ZSwgYnV0IGRvbid0IHlvdSBuZWVkIHRvCj4gcmUtcXVldWUgcmVxdWVzdHMgaW4gY2FzZSB0aGUg
YmFja2VuZCBoYXMgZGlmZmVyZW50IGxpbWl0cyBvZiBpbmRpcmVjdAo+IGRlc2NyaXB0b3JzIHBl
ciByZXF1ZXN0IGZvciBleGFtcGxlPwo+IAo+IE9yIGRvIHdlIGV4cGVjdCB0aGF0IHRoZSBmcm9u
dGVuZCBpcyBhbHdheXMgZ29pbmcgdG8gYmUgcmVzdW1lZCBvbiB0aGUKPiBzYW1lIGJhY2tlbmQs
IGFuZCB0aHVzIGZlYXR1cmVzIHdvbid0IGNoYW5nZT8KPiAKU28gdG8gdW5kZXJzdGFuZCB5b3Vy
IHF1ZXN0aW9uIGJldHRlciBoZXJlLCBBRkFJVSB0aGUgIG1heGltdW0gbnVtYmVyIG9mIGluZGly
ZWN0IApncmVmcyBpcyBmaXhlZCBieSB0aGUgYmFja2VuZCwgYnV0IHRoZSBmcm9udGVuZCBjYW4g
aXNzdWUgcmVxdWVzdHMgd2l0aCBhbnkgCm51bWJlciBvZiBpbmRpcmVjdCBzZWdtZW50cyBhcyBs
b25nIGFzIGl0J3MgbGVzcyB0aGFuIHRoZSBudW1iZXIgcHJvdmlkZWQgYnkgCnRoZSBiYWNrZW5k
LiBTbyBieSB5b3VyIHF1ZXN0aW9uIHlvdSBtZWFuIHRoaXMgbWF4IG51bWJlciBvZiBNQVhfSU5E
SVJFQ1RfU0VHTUVOVFMgCjI1NiBvbiBiYWNrZW5kIGNhbiBjaGFuZ2UgPyAKPiA+ICsKPiA+ICAJ
bGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKHJlcSwgbiwgJmluZm8tPnJlcXVlc3RzLCBxdWV1ZWxp
c3QpIHsKPiA+ICAJCS8qIFJlcXVldWUgcGVuZGluZyByZXF1ZXN0cyAoZmx1c2ggb3IgZGlzY2Fy
ZCkgKi8KPiA+ICAJCWxpc3RfZGVsX2luaXQoJnJlcS0+cXVldWVsaXN0KTsKPiA+IEBAIC0yMzU5
LDYgKzIzNzksNyBAQCBzdGF0aWMgdm9pZCBibGtmcm9udF9jb25uZWN0KHN0cnVjdCBibGtmcm9u
dF9pbmZvICppbmZvKQo+ID4gIAo+ID4gIAkJcmV0dXJuOwo+ID4gIAljYXNlIEJMS0lGX1NUQVRF
X1NVU1BFTkRFRDoKPiA+ICsJY2FzZSBCTEtJRl9TVEFURV9GUk9aRU46Cj4gPiAgCQkvKgo+ID4g
IAkJICogSWYgd2UgYXJlIHJlY292ZXJpbmcgZnJvbSBzdXNwZW5zaW9uLCB3ZSBuZWVkIHRvIHdh
aXQKPiA+ICAJCSAqIGZvciB0aGUgYmFja2VuZCB0byBhbm5vdW5jZSBpdCdzIGZlYXR1cmVzIGJl
Zm9yZQo+ID4gQEAgLTI0NzYsMTIgKzI0OTcsMzcgQEAgc3RhdGljIHZvaWQgYmxrYmFja19jaGFu
Z2VkKHN0cnVjdCB4ZW5idXNfZGV2aWNlICpkZXYsCj4gPiAgCQlicmVhazsKPiA+ICAKPiA+ICAJ
Y2FzZSBYZW5idXNTdGF0ZUNsb3NlZDoKPiA+IC0JCWlmIChkZXYtPnN0YXRlID09IFhlbmJ1c1N0
YXRlQ2xvc2VkKQo+ID4gKwkJaWYgKGRldi0+c3RhdGUgPT0gWGVuYnVzU3RhdGVDbG9zZWQpIHsK
PiA+ICsJCQlpZiAoaW5mby0+Y29ubmVjdGVkID09IEJMS0lGX1NUQVRFX0ZSRUVaSU5HKSB7Cj4g
PiArCQkJCV9fYmxraWZfZnJlZShpbmZvKTsKPiA+ICsJCQkJaW5mby0+Y29ubmVjdGVkID0gQkxL
SUZfU1RBVEVfRlJPWkVOOwo+ID4gKwkJCQljb21wbGV0ZSgmaW5mby0+d2FpdF9iYWNrZW5kX2Rp
c2Nvbm5lY3RlZCk7Cj4gPiArCQkJCWJyZWFrOwo+ID4gKwkJCX0KPiA+ICsKPiA+ICAJCQlicmVh
azsKPiA+ICsJCX0KPiA+ICsKPiA+ICsJCS8qCj4gPiArCQkgKiBXZSBtYXkgc29tZWhvdyByZWNl
aXZlIGJhY2tlbmQncyBDbG9zZWQgYWdhaW4gd2hpbGUgdGhhd2luZwo+ID4gKwkJICogb3IgcmVz
dG9yaW5nIGFuZCBpdCBjYXVzZXMgdGhhd2luZyBvciByZXN0b3JpbmcgdG8gZmFpbC4KPiA+ICsJ
CSAqIElnbm9yZSBzdWNoIHVuZXhwZWN0ZWQgc3RhdGUgYW55d2F5Lgo+ID4gKwkJICovCj4gPiAr
CQlpZiAoaW5mby0+Y29ubmVjdGVkID09IEJMS0lGX1NUQVRFX0ZST1pFTiAmJgo+ID4gKwkJCQlk
ZXYtPnN0YXRlID09IFhlbmJ1c1N0YXRlSW5pdGlhbGlzZWQpIHsKPiAKPiBJJ20gbm90IHN1cmUg
eW91IG5lZWQgdGhlIGV4dHJhIGRldi0+c3RhdGUgPT0gWGVuYnVzU3RhdGVJbml0aWFsaXNlZC4K
PiBJZiB0aGUgZnJvdG5lbmQgaXMgaW4gc3RhdGUgQkxLSUZfU1RBVEVfRlJPWkVOIHlvdSBjYW4g
bGlrZWx5IGlnbm9yZQo+IHRoZSBub3RpZmljYXRpb24gb2YgdGhlIGJhY2tlbmQgc3dpdGNoZWQg
dG8gY2xvc2VkIHN0YXRlLCByZWdhcmRsZXNzCj4gb2YgdGhlIGZyb250ZW5kIHN0YXRlPwo+IApJ
IHNlZS4gU291bmRzIHBsYXVzaWJsZSB3aWxsIGRvIG15IHNldCBvZiB0ZXN0aW5nIGFuZCBmaWd1
cmUgb3V0IGlmIGl0IGRvZXMKbm90IGJyZWFrIGFueXRoaW5nLgo+ID4gKwkJCWRldl9kYmcoJmRl
di0+ZGV2LAo+ID4gKwkJCQkJImlnbm9yZSB0aGUgYmFja2VuZCdzIENsb3NlZCBzdGF0ZTogJXMi
LAo+ID4gKwkJCQkJZGV2LT5ub2RlbmFtZSk7Cj4gPiArCQkJYnJlYWs7Cj4gPiArCQl9Cj4gPiAg
CQkvKiBmYWxsIHRocm91Z2ggKi8KPiA+ICAJY2FzZSBYZW5idXNTdGF0ZUNsb3Npbmc6Cj4gPiAt
CQlpZiAoaW5mbykKPiA+IC0JCQlibGtmcm9udF9jbG9zaW5nKGluZm8pOwo+ID4gKwkJaWYgKGlu
Zm8pIHsKPiA+ICsJCQlpZiAoaW5mby0+Y29ubmVjdGVkID09IEJMS0lGX1NUQVRFX0ZSRUVaSU5H
KQo+ID4gKwkJCQl4ZW5idXNfZnJvbnRlbmRfY2xvc2VkKGRldik7Cj4gPiArCQkJZWxzZQo+ID4g
KwkJCQlibGtmcm9udF9jbG9zaW5nKGluZm8pOwo+ID4gKwkJfQo+ID4gIAkJYnJlYWs7Cj4gPiAg
CX0KPiA+ICB9Cj4gPiBAQCAtMjYyNSw2ICsyNjcxLDYyIEBAIHN0YXRpYyB2b2lkIGJsa2lmX3Jl
bGVhc2Uoc3RydWN0IGdlbmRpc2sgKmRpc2ssIGZtb2RlX3QgbW9kZSkKPiA+ICAJbXV0ZXhfdW5s
b2NrKCZibGtmcm9udF9tdXRleCk7Cj4gPiAgfQo+ID4gIAo+ID4gK3N0YXRpYyBpbnQgYmxrZnJv
bnRfZnJlZXplKHN0cnVjdCB4ZW5idXNfZGV2aWNlICpkZXYpCj4gPiArewo+ID4gKwl1bnNpZ25l
ZCBpbnQgaTsKPiA+ICsJc3RydWN0IGJsa2Zyb250X2luZm8gKmluZm8gPSBkZXZfZ2V0X2RydmRh
dGEoJmRldi0+ZGV2KTsKPiA+ICsJc3RydWN0IGJsa2Zyb250X3JpbmdfaW5mbyAqcmluZm87Cj4g
PiArCS8qIFRoaXMgd291bGQgYmUgcmVhc29uYWJsZSB0aW1lb3V0IGFzIHVzZWQgaW4geGVuYnVz
X2Rldl9zaHV0ZG93bigpICovCj4gPiArCXVuc2lnbmVkIGludCB0aW1lb3V0ID0gNSAqIEhaOwo+
ID4gKwlpbnQgZXJyID0gMDsKPiA+ICsKPiA+ICsJaW5mby0+Y29ubmVjdGVkID0gQkxLSUZfU1RB
VEVfRlJFRVpJTkc7Cj4gPiArCj4gPiArCWJsa19tcV9mcmVlemVfcXVldWUoaW5mby0+cnEpOwo+
ID4gKwlibGtfbXFfcXVpZXNjZV9xdWV1ZShpbmZvLT5ycSk7Cj4gCj4gRG9uJ3QgeW91IG5lZWQg
dG8gYWxzbyBkcmFpbiB0aGUgcXVldWUgYW5kIG1ha2Ugc3VyZSBpdCdzIGVtcHR5Pwo+IApibGtf
bXFfZnJlZXplX3F1ZXVlIGFuZCBibGtfbXFfcXVpZXNjZV9xdWV1ZSBzaG91bGQgdGFrZSBjYXJl
IG9mIHJ1bm5pbmcgSFcgcXVldWVzIHN5bmNocm9ub3VzbHkKYW5kIG1ha2luZyBzdXJlIGFsbCB0
aGUgb25nb2luZyBkaXNwYXRjaGVzIGhhdmUgZmluaXNoZWQuIERpZCBJIHVuZGVyc3RhbmQgeW91
ciBxdWVzdGlvbiByaWdodD8KPiA+ICsKPiA+ICsJZm9yIChpID0gMDsgaSA8IGluZm8tPm5yX3Jp
bmdzOyBpKyspIHsKPiA+ICsJCXJpbmZvID0gJmluZm8tPnJpbmZvW2ldOwo+ID4gKwo+ID4gKwkJ
Z250dGFiX2NhbmNlbF9mcmVlX2NhbGxiYWNrKCZyaW5mby0+Y2FsbGJhY2spOwo+ID4gKwkJZmx1
c2hfd29yaygmcmluZm8tPndvcmspOwo+ID4gKwl9Cj4gPiArCj4gPiArCS8qIEtpY2sgdGhlIGJh
Y2tlbmQgdG8gZGlzY29ubmVjdCAqLwo+ID4gKwl4ZW5idXNfc3dpdGNoX3N0YXRlKGRldiwgWGVu
YnVzU3RhdGVDbG9zaW5nKTsKPiA+ICsKPiA+ICsJLyoKPiA+ICsJICogV2UgZG9uJ3Qgd2FudCB0
byBtb3ZlIGZvcndhcmQgYmVmb3JlIHRoZSBmcm9udGVuZCBpcyBkaWNvbm5lY3RlZAo+ID4gKwkg
KiBmcm9tIHRoZSBiYWNrZW5kIGNsZWFubHkuCj4gPiArCSAqLwo+ID4gKwl0aW1lb3V0ID0gd2Fp
dF9mb3JfY29tcGxldGlvbl90aW1lb3V0KCZpbmZvLT53YWl0X2JhY2tlbmRfZGlzY29ubmVjdGVk
LAo+ID4gKwkJCQkJICAgICAgdGltZW91dCk7Cj4gPiArCWlmICghdGltZW91dCkgewo+ID4gKwkJ
ZXJyID0gLUVCVVNZOwo+ID4gKwkJeGVuYnVzX2Rldl9lcnJvcihkZXYsIGVyciwgIkZyZWV6aW5n
IHRpbWVkIG91dDsiCj4gPiArCQkJCSAidGhlIGRldmljZSBtYXkgYmVjb21lIGluY29uc2lzdGVu
dCBzdGF0ZSIpOwo+ID4gKwl9Cj4gPiArCj4gPiArCXJldHVybiBlcnI7Cj4gPiArfQo+ID4gKwo+
ID4gK3N0YXRpYyBpbnQgYmxrZnJvbnRfcmVzdG9yZShzdHJ1Y3QgeGVuYnVzX2RldmljZSAqZGV2
KQo+ID4gK3sKPiA+ICsJc3RydWN0IGJsa2Zyb250X2luZm8gKmluZm8gPSBkZXZfZ2V0X2RydmRh
dGEoJmRldi0+ZGV2KTsKPiA+ICsJaW50IGVyciA9IDA7Cj4gPiArCj4gPiArCWVyciA9IHRhbGtf
dG9fYmxrYmFjayhkZXYsIGluZm8pOwo+ID4gKwlibGtfbXFfdW5xdWllc2NlX3F1ZXVlKGluZm8t
PnJxKTsKPiA+ICsJYmxrX21xX3VuZnJlZXplX3F1ZXVlKGluZm8tPnJxKTsKPiA+ICsKPiA+ICsJ
aWYgKGVycikKPiA+ICsJCWdvdG8gb3V0Owo+IAo+IFRoZXJlJ3Mgbm8gbmVlZCBmb3IgYW4gb3V0
IGxhYmVsIGhlcmUsIGp1c3QgcmV0dXJuIGVyciwgb3IgZXZlbgo+IHNpbXBsZXI6Cj4gCm9rLgo+
IGlmICghZXJyKQo+IAlibGtfbXFfdXBkYXRlX25yX2h3X3F1ZXVlcygmaW5mby0+dGFnX3NldCwg
aW5mby0+bnJfcmluZ3MpOwo+IAo+IHJldHVybiBlcnI7Cj4gCj4gVGhhbmtzLCBSb2dlci4KPgpU
aGFua3MsCkFuY2hhbAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5v
cmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZl
bA==

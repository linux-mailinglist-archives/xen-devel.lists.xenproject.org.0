Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2CC951358FD
	for <lists+xen-devel@lfdr.de>; Thu,  9 Jan 2020 13:15:46 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ipWg6-0003ea-JO; Thu, 09 Jan 2020 12:12:42 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=SN5F=26=citrix.com=george.dunlap@srs-us1.protection.inumbo.net>)
 id 1ipWg4-0003eJ-KC
 for xen-devel@lists.xenproject.org; Thu, 09 Jan 2020 12:12:40 +0000
X-Inumbo-ID: 4f897ac8-32d9-11ea-a985-bc764e2007e4
Received: from esa4.hc3370-68.iphmx.com (unknown [216.71.155.144])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 4f897ac8-32d9-11ea-a985-bc764e2007e4;
 Thu, 09 Jan 2020 12:12:31 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1578571951;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=O4AAb3GzvYGnqw/JYWpi6+vsrM4QHfshra58P1HItrU=;
 b=Toh9YtrmiLpsjoItUjT9Bv6dBm3cQsB5tFMT72YdbwN+zUeWtDp1DprQ
 Pvn3QwMP7/whZ1e0Ag2MGHyknEoBM1Ca4xfdZM6oWHCFfpkBtJZQ5IaCn
 +28AFBzTOilvt12c5WEjpAtMAZ1GO6qje3r9khT2D7pBpnR76NF1nmp84 c=;
Authentication-Results: esa4.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=george.dunlap@citrix.com;
 spf=Pass smtp.mailfrom=George.Dunlap@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa4.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 george.dunlap@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa4.hc3370-68.iphmx.com;
 envelope-from="George.Dunlap@citrix.com";
 x-sender="george.dunlap@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: Pass (esa4.hc3370-68.iphmx.com: domain of
 George.Dunlap@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa4.hc3370-68.iphmx.com;
 envelope-from="George.Dunlap@citrix.com";
 x-sender="George.Dunlap@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83
 ip4:168.245.78.127 ~all"
Received-SPF: None (esa4.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa4.hc3370-68.iphmx.com;
 envelope-from="George.Dunlap@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: uAr1CVLSSEj10uJ4Jj+h4ewEFxeyvA9ZS3ELM6jXtFiw9uqv6idlcbqC4RezZ7TVeeVlW6WOa7
 gSTfnjB7l+aboDaBm1/5zhFfqbzwqA/NdMlZw4JaFDghqZ3YpZ9KK5HEE5jwnPVPEBPwLcFpyR
 k4KHrbiiJpdAirWdiP/3h8JvxrKPgvF0WhRB8aAymmd2Qsw6bTpJQ5YxGR66uUVQYv+oPe6EBC
 2nkdwQNPK25lFYFpZCZkLLa7BbF5xMT0jZmN4a5FPvt9JJQnG9v8YIF0tETVoGDKuugAf5dJtO
 OvU=
X-SBRS: 2.7
X-MesageID: 11263367
X-Ironport-Server: esa4.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.69,413,1571716800"; d="scan'208";a="11263367"
From: George Dunlap <george.dunlap@citrix.com>
To: <xen-devel@lists.xenproject.org>
Date: Thu, 9 Jan 2020 12:12:27 +0000
Message-ID: <20200109121227.949665-2-george.dunlap@citrix.com>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200109121227.949665-1-george.dunlap@citrix.com>
References: <20200109121227.949665-1-george.dunlap@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v2 2/2] libxl: Add new "notify-only" childproc
 mode
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Anthony Perard <anthony.perard@citrix.com>,
 Ian Jackson <ian.jackson@citrix.com>, George Dunlap <george.dunlap@citrix.com>,
 Wei Liu <wl@xen.org>, Nick Rosbrook <rosbrookn@ainfosec.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

bGlieGwgbmVlZHMgdG8gYmUgYWJsZSB0byBrbm93IHdoZW4gcHJvY2Vzc2VzIGl0IGZvcmtzIGhh
dmUgY29tcGxldGVkLgoKQXQgdGhlIG1vbWVudCwgbGlieGwgaGFzIHR3byBiYXNpYyBtb2RlICh3
aXRoIHNvbWUgdmFyaWF0aW9ucykuICBJbgpvbmUgbW9kZSAtLSBsaWJ4bF9zaWdjaGxkX293bmVy
X2xpYnhsKiAtLSBsaWJ4bCBzZXRzIHVwIGl0cyBvd24KU0lHQ0hMRCBzaWduYWwgaGFuZGxlciwg
YW5kIGFsc28gaGFuZGxlcyB0aGUgZXZlbnQgbG9vcCB0aGF0IGFsbG93cwpsaWJ4bCB0byBzYWZl
bHkgYmxvY2sgdW50aWwgdGhlIGNoaWxkIGluIHF1ZXN0aW9uIGlzIGZpbmlzaGVkICh1c2luZyBh
CnNlbGYtcGlwZSBmb3IgdGhlIFNJR0NITEQgaGFuZGxlciB0byBub3RpZnkgdGhlIHdhaXRlcnMg
dGhhdCBpdCdzIHRpbWUKdG8gbG9vayBmb3IgcmVhcGVkIGNoaWxkcmVuKS4KCkluIHRoZSBvdGhl
ciBtb2RlLCBsaWJ4bCBkb2VzIG5vdCBzZXQgdXAgdGhlIFNJR0NITEQgaGFuZGxlciwgbm9yIGRv
ZXMKaXQgZG8gYW55dGhpbmcgd2l0aCBwcm9jZXNzaW5nIHRoZSBldmVudCBsb29wOyBpdCBleHBl
Y3RzIHRoZSBsaWJyYXJ5CmNhbGxlciB0byBoYW5kbGUgdGhlIGV2ZW50IGxvb3AgaXRzZWxmLgoK
VGhlIGdvbGFuZyBydW50aW1lIG1hbmFnZXMgaXRzIG93biBwcm9jZXNzZXMsIGFuZCB0aHVzIG11
c3QgdXNlClNJR0NITEQgaXRzZWxmOyBhbmQgaXQgaGFzIGFuIGVhc3kgd2F5IGZvciBvdGhlciB1
c2VycyB0byBnZXQgU0lHQ0hMRApub3RpZmljYXRpb25zLiAgSG93ZXZlciwgYmVjYXVzZSBpdHMg
ZXZlbnQgbG9vcCBpcyBoaWRkZW4gYXdheSBiZWhpbmQKYWJzdHJhY3Rpb25zLCBpdCdzIG5vdCBl
YXN5IHRvIGhvb2sgaW50bzsgYW5kIHRoZXJlJ3Mgbm8gbmVlZCAtLSB0aGUKZ29sYW5nIHJ1bnRp
bWUgYXNzdW1lcyB0aGF0IEMgZnVuY3Rpb24gY2FsbHMgbWF5IGJsb2NrLCBhbmQgaGFuZGxlcwpl
dmVyeXRoaW5nIGJlaGluZCB0aGUgc2NlbmVzLgoKSW50cm9kdWNlIGEgbmV3IG1vZGUsIGxpYnhs
X3NpZ2NobGRfb3duZXJfbm90aWZ5LCBpbiB3aGljaCBsaWJ4bCBzZXRzCnVwIHRoZSBTSUdDSExE
IGV2ZW50IGhhbmRsaW5nIG1hY2hpbmVyeSwgYnV0IHJlbGllcyBvbiB0aGUgY2FsbGVyIHRvCnRl
bGwgaXQgd2hlbiBhIFNJR0NITEQgaGFwcGVucy4KCkNhbGwgdGhlc2UgdHdvIGFjdGlvbnMgIm5v
dGlmeSIgKGZvciB0aGUgc2VsZi1waXBlIG5vdGlmaWNhdGlvbgptYWNoaW5lcnkpIGFuZCAiaGFu
ZGxlciIgKGZvciB0aGUgYWN0dWFsIFNJR0NITEQgaGFuZGxlcikuCgpQcm92aWRlIGEgbmV3IGV4
dGVybmFsIGZ1bmN0aW9uLCBsaWJ4bF9jaGlsZHByb2Nfc2lnY2hsZF9ub3RpZnkoKSwgZm9yCmxp
YnJhcnkgdXNlcnMgdG8gY2FsbCB3aGVuIGEgU0lHQ0hMRCBoYXBwZW5zLiAgSGF2ZSB0aGlzIGNh
bGwKc2lnY2hsZF9oYW5kbGVyKCkuCgpSZW5hbWUgY2hsZG1vZGVfb3VycygpIHRvIGNobGRtb2Rl
X25vdGlmeSgpLCBhbmQgdXNlIGl0IHRvIGRldGVybWluZQp3aGV0aGVyIHRvIHNldCB1cCB0aGUg
bm90aWZpY2F0aW9uIGNoYWluLgoKV2hlbiBzZXR0aW5nIHVwIHRoZSBub3RpZmljYXRpb24gY2hh
aW4sIGRvIGV2ZXJ5dGhpbmcgZXhjZXB0IHNldHRpbmcKdXAgdGhlIHNpZ25hbCBoYW5kbGVyIGlu
ICJub3RpZnktb25seSIgbW9kZS4KCmRlZmVyX3NpZ2NobGQoKSBhbmQgcmVsZWFzZV9zaWdjaGxk
KCkgZG8gdHdvIHRoaW5nczogdGhleSBtb2RpZnkgdGhlCnNpZ25hbCBoYW5kbGVyLCBhbmQgZ3Jh
YiBhbmQgcmVsZWFzZSBsb2Nrcy4gIFJlZmFjdG9yIHRoZXNlIHNvIHRoYXQKdGhleSBncmFiIGFu
ZCByZWxlYXNlIHRoZSBsb2NrcyBjb3JyZWN0bHkgaW4gIm5vdGlmeS1vbmx5IiBtb2RlLCBidXQK
ZG9uJ3QgdHdlYWsgdGhlIHNpZ25hbCBoYW5kbGVyIHVubGVzcyBpdCdzIGJlZW4gc2V0IHVwLgoK
V2l0aCB0aGUgZ29sYW5nIGJpbmRpbmdzIHBvcnRlZCB0byB1c2UgdGhpcyBjaGFuZ2UsIGRvbWFp
biBjcmVhdGlvbgp3b3Jrcy4KCk5CIGFuIGFsdGVybmF0ZSBhcHByb2FjaCB3b3VsZCBiZSB0byBt
YWtlIGxpYnhsX3NpZ2NobGRfb3duZXJfbWFpbmxvb3AKKmFsd2F5cyogc2V0IHVwIGFuZCB0ZWFy
IGRvd24gdGhlIHNlbGYtcGlwZSBub3RpZmljYXRpb24gbWVjaGFuaXNtcywKYW5kIHRoZW4gc2lt
cGx5IGV4cG9zZSBsaWJ4bF9jaGlsZHByb2Nfc2lnY2hsZF9ub3RpZnkoKS4gIEhvd2V2ZXIsCnRo
aXMgd291bGQgZW50YWlsIGdyYWJiaW5nIGEgbGlieGwtd2lkZSBnbG9iYWwgbG9jayAoYWNyb3Nz
IGFsbCBsaWJ4bApjdHgncykgdHdpY2Ugb24gZXZlcnkgZm9yay4gIFRoaXMgc2hvdWxkIGJlIGF2
b2lkZWQgZm9yIGNhbGxlcnMgd2hpY2gKZG9uJ3QgbmVlZCBpdC4KClNpZ25lZC1vZmYtYnk6IEdl
b3JnZSBEdW5sYXAgPGdlb3JnZS5kdW5sYXBAY2l0cml4LmNvbT4KLS0tCnYyOgotIE1ha2UgbGli
eGxfY2hpbGRwcm9jX3NpZ2NobGRfbm90aWZ5KCkgcmVlbnRyYW50IGJ5IHNpbXBseSBjYWxsaW5n
CiAgc2lnY2hsZF9oYW5kbGVyIGRpcmVjdGx5LiAgTWVudGlvbiB0aGlzIGluIHRoZSBkb2N1bWVu
dGF0aW9uIHRvIHByb21wdAogIHBlb3BsZSB0byB0aGluayBhYm91dCBzYXZpbmcgYW5kIHJlc3Rv
cmluZyBlcnJubyB0aGVtc2VsdmVzLgotIE1vdmUgd2hpdGVzcGFjZSBmaXhlcyB0byBhbm90aGVy
IHBhdGNoCi0gTWFrZSBicmFjZXMgc251Z2dseSBpbiBsaW5lIHdpdGggbGlieGwgY29kaW5nIHN0
eWxlLgotIFJlbW92ZSBYWFggY29tbWVudC4KCkNDOiBJYW4gSmFja3NvbiA8aWFuLmphY2tzb25A
Y2l0cml4LmNvbT4KQ0M6IFdlaSBMaXUgPHdsQHhlbi5vcmc+CkNDOiBBbnRob255IFBlcmFyZCA8
YW50aG9ueS5wZXJhcmRAY2l0cml4LmNvbT4KQ0M6IE5pY2sgUm9zYnJvb2sgPHJvc2Jyb29rbkBh
aW5mb3NlYy5jb20+Ci0tLQogdG9vbHMvbGlieGwvbGlieGxfZXZlbnQuaCB8IDMxICsrKysrKysr
KysrKysrKysrKysrKysrKysrKysrCiB0b29scy9saWJ4bC9saWJ4bF9mb3JrLmMgIHwgNDIgKysr
KysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tCiAyIGZpbGVzIGNoYW5nZWQsIDYw
IGluc2VydGlvbnMoKyksIDEzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhs
L2xpYnhsX2V2ZW50LmggYi90b29scy9saWJ4bC9saWJ4bF9ldmVudC5oCmluZGV4IDQxMDgyZWYy
ZjQuLmQ2ODU3ZDQ1MmUgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhsL2xpYnhsX2V2ZW50LmgKKysr
IGIvdG9vbHMvbGlieGwvbGlieGxfZXZlbnQuaApAQCAtNDY2LDYgKzQ2NiwxNCBAQCB2b2lkIGxp
YnhsX29zZXZlbnRfb2NjdXJyZWRfdGltZW91dChsaWJ4bF9jdHggKmN0eCwgdm9pZCAqZm9yX2xp
YnhsKQogICogICAgICAgaGFzIG11bHRpcGxlIGxpYnhsIGN0eCdzLCBpdCBtdXN0IGNhbGwgbGli
eGxfY2hpbGRwcm9jX2V4aXRlZAogICogICAgICAgb24gZWFjaCBjdHguKQogICoKKyAqICAgICBs
aWJ4bF9zaWdjaGxkX293bmVyX21haW5sb29wX25vdGlmeToKKyAqCisgKiAgICAgICBUaGUgYXBw
bGljYXRpb24gbXVzdCBpbnN0YWxsIGEgU0lHQ0hMRCBoYW5kbGVyLCBidXQgd2lsbAorICogICAg
ICAgbm90aWZ5IGxpYnhsIHdoZW4gYSBzaWdjaGxkIGhhcHBlbmVkIGJ5IGNhbGxpbmcKKyAqICAg
ICAgIGxpYnhsX2NoaWxkcHJvY19zaWdjaGxkX25vdGlmeS4gIGxpYnhsIHdpbGwgYXJyYW5nZSB0
byByZWFwCisgKiAgICAgICBvbmx5IGl0cyBvd24gY2hpbGRyZW4uICBUaGlzIG5lZWRzIHRvIGJl
IGNhbGxlZCBvbmx5IG9uY2UsCisgKiAgICAgICBldmVuIGZvciBhcHBsaWNhdGlvbnMgd2hpY2gg
aGF2ZSBtdWx0aXBsZSBsaWJ4bCBjdHgncy4KKyAqCiAgKiAgICAgbGlieGxfc2lnY2hsZF9vd25l
cl9saWJ4bF9hbHdheXM6CiAgKgogICogICAgICAgVGhlIGFwcGxpY2F0aW9uIGV4cGVjdHMgdGhp
cyBsaWJ4bCBjdHggdG8gcmVhcCBhbGwgb2YgdGhlCkBAIC00OTQsNiArNTAyLDEyIEBAIHR5cGVk
ZWYgZW51bSB7CiAgICAgICogYXJyYW5nZSB0byAodW4pYmxvY2sgb3IgY2F0Y2ggU0lHQ0hMRC4g
Ki8KICAgICBsaWJ4bF9zaWdjaGxkX293bmVyX21haW5sb29wLAogCisgICAgLyogQXBwbGljYXRp
b24gcHJvbWlzZXMgdG8gZGlzY292ZXIgd2hlbiBTSUdDSExEIG9jY3VycyBhbmQgY2FsbAorICAg
ICAqIGxpYnhsX2NoaWxkcHJvY19zaWdjaGxkX25vdGlmeSAocGVyaGFwcyBmcm9tIHdpdGhpbiBh
IHNpZ25hbAorICAgICAqIGhhbmRsZXIpLiAgbGlieGwgd2lsbCBub3QgaXRzZWxmIGFycmFuZ2Ug
dG8gKHVuKWJsb2NrIG9yIGNhdGNoCisgICAgICogU0lHQ0hMRC4gKi8KKyAgICBsaWJ4bF9zaWdj
aGxkX293bmVyX21haW5sb29wX25vdGlmeSwKKwogICAgIC8qIGxpYnhsIG93bnMgU0lHQ0hMRCBh
bGwgdGhlIHRpbWUsIGFuZCB0aGUgYXBwbGljYXRpb24gaXMKICAgICAgKiByZWx5aW5nIG9uIGxp
YnhsJ3MgZXZlbnQgbG9vcCBmb3IgcmVhcGluZyBpdHMgY2hpbGRyZW4gdG9vLiAqLwogICAgIGxp
YnhsX3NpZ2NobGRfb3duZXJfbGlieGxfYWx3YXlzLApAQCAtNTkwLDYgKzYwNCwyMyBAQCBpbnQg
bGlieGxfY2hpbGRwcm9jX3JlYXBlZChsaWJ4bF9jdHggKmN0eCwgcGlkX3QsIGludCBzdGF0dXMp
CiB2b2lkIGxpYnhsX2NoaWxkcHJvY19zaWdjaGxkX29jY3VycmVkKGxpYnhsX2N0eCAqY3R4KQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgTElCWExfRVhURVJOQUxfQ0FMTEVSU19PTkxZOwog
CisvKgorICogVGhpcyBmdW5jdGlvbiBpcyBmb3IgYW4gYXBwbGljYXRpb24gd2hpY2ggb3ducyBT
SUdDSExEIGJ1dCBzdGlsbAorICogZXhwZWN0cyBsaWJ4bCB0byBoYW5kbGUgaXRzIG93biBldmVu
dCBsb29wcy4KKyAqCisgKiBTdWNoIGFuIHRoZSBhcHBsaWNhdGlvbiBtdXN0IG5vdGlmeSBsaWJ4
bCwgYnkgY2FsbGluZyB0aGlzCisgKiBmdW5jdGlvbiwgdGhhdCBhIFNJR0NITEQgb2NjdXJyZWQu
ICBsaWJ4bCB3aWxsIHRoZW4gbm90aWZ5IGFsbAorICogYXBwcm9wcmlhdGUgZXZlbnQgbG9vcHMg
dG8gY2hlY2sgZm9yIHJlYXBlZCBjaGlsZHJlbi4uCisgKgorICogTWF5IGJlIGNhbGxlZCBvbmx5
IGJ5IGFuIGFwcGxpY2F0aW9uIHdoaWNoIGhhcyBjYWxsZWQgc2V0bW9kZSB3aXRoCisgKiBjaGxk
b3duZXIgPT0gbGlieGxfc2lnY2hsZF9vd25lcl9tYWlubG9vcF9ub3RpZnkuCisgKgorICogTUFZ
IGJlIGNhbGxlZCBmcm9tIHdpdGhpbiBhIHNpZ25hbCBoYW5kbGVyLiAgVGhpcyBmdW5jdGlvbiBp
cworICogcmVlbnRyYW5nOiBpdCB3aWxsIHNhdmUgYW5kIHJlc3RvcmUgZXJybm8uCisgKi8KK3Zv
aWQgbGlieGxfY2hpbGRwcm9jX3NpZ2NobGRfbm90aWZ5KHZvaWQpCisgICAgICAgICAgICAgICAg
ICAgICAgICAgICBMSUJYTF9FWFRFUk5BTF9DQUxMRVJTX09OTFk7CisKIAogLyoKICAqIEFuIGFw
cGxpY2F0aW9uIHdoaWNoIGluaXRpYWxpc2VzIGEgbGlieGxfY3R4IGluIGEgcGFyZW50IHByb2Nl
c3MKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhsL2xpYnhsX2ZvcmsuYyBiL3Rvb2xzL2xpYnhsL2xp
YnhsX2ZvcmsuYwppbmRleCBjNWIzNzhjNTU0Li43ZjIxYmM5YmIyIDEwMDY0NAotLS0gYS90b29s
cy9saWJ4bC9saWJ4bF9mb3JrLmMKKysrIGIvdG9vbHMvbGlieGwvbGlieGxfZm9yay5jCkBAIC0y
NDgsNiArMjQ4LDExIEBAIHN0YXRpYyB2b2lkIHNpZ2NobGRfaGFuZGxlcihpbnQgc2lnbm8pCiAg
ICAgZXJybm8gPSBlc2F2ZTsKIH0KIAordm9pZCBsaWJ4bF9jaGlsZHByb2Nfc2lnY2hsZF9ub3Rp
Znkodm9pZCkKK3sKKyAgICBzaWdjaGxkX2hhbmRsZXIoU0lHQ0hMRCk7Cit9CisKIHN0YXRpYyB2
b2lkIHNpZ2NobGRfc2V0aGFuZGxlcl9yYXcodm9pZCAoKmhhbmRsZXIpKGludCksIHN0cnVjdCBz
aWdhY3Rpb24gKm9sZCkKIHsKICAgICBzdHJ1Y3Qgc2lnYWN0aW9uIG91cnM7CkBAIC0yODgsOSAr
MjkzLDggQEAgc3RhdGljIHZvaWQgc2lnY2hsZF9oYW5kbGVyX3doZW5fZGVmZXJyZWQoaW50IHNp
Z25vKQogCiBzdGF0aWMgdm9pZCBkZWZlcl9zaWdjaGxkKHZvaWQpCiB7Ci0gICAgYXNzZXJ0KHNp
Z2NobGRfaW5zdGFsbGVkKTsKLQotICAgIHNpZ2NobGRfc2V0aGFuZGxlcl9yYXcoc2lnY2hsZF9o
YW5kbGVyX3doZW5fZGVmZXJyZWQsIDApOworICAgIGlmIChzaWdjaGxkX2luc3RhbGxlZCkKKyAg
ICAgICAgc2lnY2hsZF9zZXRoYW5kbGVyX3JhdyhzaWdjaGxkX2hhbmRsZXJfd2hlbl9kZWZlcnJl
ZCwgMCk7CiAKICAgICAvKiBOb3cgX3RoaXMgdGhyZWFkXyBjYW5ub3QgYW55IGxvbmdlciBiZSBp
bnRlcnJ1cHRlZCBieSB0aGUKICAgICAgKiBzaWduYWwsIHNvIHdlIGNhbiB0YWtlIHRoZSBtdXRl
eCB3aXRob3V0IHJpc2sgb2YgZGVhZGxvY2suICBJZgpAQCAtMzAzLDEyICszMDcsMTIgQEAgc3Rh
dGljIHZvaWQgZGVmZXJfc2lnY2hsZCh2b2lkKQogCiBzdGF0aWMgdm9pZCByZWxlYXNlX3NpZ2No
bGQodm9pZCkKIHsKLSAgICBhc3NlcnQoc2lnY2hsZF9pbnN0YWxsZWQpOwotCiAgICAgaW50IHIg
PSBwdGhyZWFkX211dGV4X3VubG9jaygmc2lnY2hsZF9kZWZlcl9tdXRleCk7CiAgICAgYXNzZXJ0
KCFyKTsKIAotICAgIHNpZ2NobGRfc2V0aGFuZGxlcl9yYXcoc2lnY2hsZF9oYW5kbGVyLCAwKTsK
KyAgICBpZiAoc2lnY2hsZF9pbnN0YWxsZWQpCisgICAgICAgIHNpZ2NobGRfc2V0aGFuZGxlcl9y
YXcoc2lnY2hsZF9oYW5kbGVyLCAwKTsKKwogICAgIGlmIChzaWdjaGxkX29jY3VycmVkX3doaWxl
X2RlZmVycmVkKSB7CiAgICAgICAgIHNpZ2NobGRfb2NjdXJyZWRfd2hpbGVfZGVmZXJyZWQgPSAw
OwogICAgICAgICAvKiBXZSBtaWdodCBnZXQgYW5vdGhlciBTSUdDSExEIGhlcmUsIGluIHdoaWNo
IGNhc2UKQEAgLTM3NSw2ICszNzksMTEgQEAgc3RhdGljIHZvaWQgc2lnY2hsZF91c2VyX3JlbW92
ZShsaWJ4bF9jdHggKmN0eCkgLyogaWRlbXBvdGVudCAqLwogCiB2b2lkIGxpYnhsX19zaWdjaGxk
X25vdG5lZWRlZChsaWJ4bF9fZ2MgKmdjKSAvKiBub24tcmVlbnRyYW50LCBpZGVtcG90ZW50ICov
CiB7CisgICAgLyoKKyAgICAgKiBOQiB0aGF0IHdlIGRvbid0IG5lZWQgdG8gc3BlY2lhbC1jYXNl
CisgICAgICogbGlieGxfc2lnY2hsZF9vd25lcl9tYWlubG9vcF9ub3RpZnk7IHNpZ2NobGRfcmVt
b3ZlaGFuZGxlcl9jb3JlCisgICAgICogd2lsbCBEVFJUIGlmIG5vIHNpZ25hbCBoYW5kbGVyIGhh
cyBiZWVuIHNldCB1cC4KKyAgICAgKi8KICAgICBzaWdjaGxkX3VzZXJfcmVtb3ZlKENUWCk7CiAg
ICAgbGlieGxfX2V2X2ZkX2RlcmVnaXN0ZXIoZ2MsICZDVFgtPnNpZ2NobGRfc2VsZnBpcGVfZWZk
KTsKIH0KQEAgLTM5OSw3ICs0MDgsOSBAQCBpbnQgbGlieGxfX3NpZ2NobGRfbmVlZGVkKGxpYnhs
X19nYyAqZ2MpIC8qIG5vbi1yZWVudHJhbnQsIGlkZW1wb3RlbnQgKi8KICAgICBpZiAoIUNUWC0+
c2lnY2hsZF91c2VyX3JlZ2lzdGVyZWQpIHsKICAgICAgICAgYXRmb3JrX2xvY2soKTsKIAotICAg
ICAgICBzaWdjaGxkX2luc3RhbGxoYW5kbGVyX2NvcmUoKTsKKyAgICAgICAgaWYgKENUWC0+Y2hp
bGRwcm9jX2hvb2tzLT5jaGxkb3duZXIgIT0gbGlieGxfc2lnY2hsZF9vd25lcl9tYWlubG9vcF9u
b3RpZnkpIHsKKyAgICAgICAgICAgIHNpZ2NobGRfaW5zdGFsbGhhbmRsZXJfY29yZSgpOworICAg
ICAgICB9CiAKICAgICAgICAgZGVmZXJfc2lnY2hsZCgpOwogCkBAIC00MTYsMTMgKzQyNywxNSBA
QCBpbnQgbGlieGxfX3NpZ2NobGRfbmVlZGVkKGxpYnhsX19nYyAqZ2MpIC8qIG5vbi1yZWVudHJh
bnQsIGlkZW1wb3RlbnQgKi8KICAgICByZXR1cm4gcmM7CiB9CiAKLXN0YXRpYyBib29sIGNobGRt
b2RlX291cnMobGlieGxfY3R4ICpjdHgsIGJvb2wgY3JlYXRpbmcpCisvKiBEbyB3ZSBuZWVkIHRo
ZSBzaWdjaGxkIG5vdGlmaWNhdGlvbiBtYWNoaW5lcnk/ICovCitzdGF0aWMgYm9vbCBjaGxkbW9k
ZV9ub3RpZnkobGlieGxfY3R4ICpjdHgsIGJvb2wgY3JlYXRpbmcpCiB7CiAgICAgc3dpdGNoIChj
dHgtPmNoaWxkcHJvY19ob29rcy0+Y2hsZG93bmVyKSB7CiAgICAgY2FzZSBsaWJ4bF9zaWdjaGxk
X293bmVyX2xpYnhsOgogICAgICAgICByZXR1cm4gY3JlYXRpbmcgfHwgIUxJQlhMX0xJU1RfRU1Q
VFkoJmN0eC0+Y2hpbGRyZW4pOwogICAgIGNhc2UgbGlieGxfc2lnY2hsZF9vd25lcl9tYWlubG9v
cDoKICAgICAgICAgcmV0dXJuIDA7CisgICAgY2FzZSBsaWJ4bF9zaWdjaGxkX293bmVyX21haW5s
b29wX25vdGlmeToKICAgICBjYXNlIGxpYnhsX3NpZ2NobGRfb3duZXJfbGlieGxfYWx3YXlzOgog
ICAgIGNhc2UgbGlieGxfc2lnY2hsZF9vd25lcl9saWJ4bF9hbHdheXNfc2VsZWN0aXZlX3JlYXA6
CiAgICAgICAgIHJldHVybiAxOwpAQCAtNDMyLDcgKzQ0NSw3IEBAIHN0YXRpYyBib29sIGNobGRt
b2RlX291cnMobGlieGxfY3R4ICpjdHgsIGJvb2wgY3JlYXRpbmcpCiAKIHN0YXRpYyB2b2lkIHBl
cmhhcHNfc2lnY2hsZF9ub3RuZWVkZWQobGlieGxfX2djICpnYykKIHsKLSAgICBpZiAoIWNobGRt
b2RlX291cnMoQ1RYLCAwKSkKKyAgICBpZiAoIWNobGRtb2RlX25vdGlmeShDVFgsIDApKQogICAg
ICAgICBsaWJ4bF9fc2lnY2hsZF9ub3RuZWVkZWQoZ2MpOwogfQogCkBAIC00NDAsNyArNDUzLDcg
QEAgc3RhdGljIGludCBwZXJoYXBzX3NpZ2NobGRfbmVlZGVkKGxpYnhsX19nYyAqZ2MsIGJvb2wg
Y3JlYXRpbmcpCiB7CiAgICAgaW50IHJjOwogCi0gICAgaWYgKGNobGRtb2RlX291cnMoQ1RYLCBj
cmVhdGluZykpIHsKKyAgICBpZiAoY2hsZG1vZGVfbm90aWZ5KENUWCwgY3JlYXRpbmcpKSB7CiAg
ICAgICAgIHJjID0gbGlieGxfX3NpZ2NobGRfbmVlZGVkKGdjKTsKICAgICAgICAgaWYgKHJjKSBy
ZXR1cm4gcmM7CiAgICAgfQpAQCAtNTU2LDEzICs1NjksMTYgQEAgc3RhdGljIHZvaWQgc2lnY2hs
ZF9zZWxmcGlwZV9oYW5kbGVyKGxpYnhsX19lZ2MgKmVnYywgbGlieGxfX2V2X2ZkICpldiwKICAg
ICBpbnQgZSA9IGxpYnhsX19zZWxmX3BpcGVfZWF0YWxsKHNlbGZwaXBlKTsKICAgICBpZiAoZSkg
TElCWExfX0VWRU5UX0RJU0FTVEVSKGVnYywgInJlYWQgc2lnY2hsZCBwaXBlIiwgZSwgMCk7CiAK
LSAgICBpZiAoQ1RYLT5jaGlsZHByb2NfaG9va3MtPmNobGRvd25lcgotICAgICAgICA9PSBsaWJ4
bF9zaWdjaGxkX293bmVyX2xpYnhsX2Fsd2F5c19zZWxlY3RpdmVfcmVhcCkgeworICAgIHN3aXRj
aCAoQ1RYLT5jaGlsZHByb2NfaG9va3MtPmNobGRvd25lcikgeworICAgIGNhc2UgbGlieGxfc2ln
Y2hsZF9vd25lcl9saWJ4bF9hbHdheXNfc2VsZWN0aXZlX3JlYXA6CisgICAgY2FzZSBsaWJ4bF9z
aWdjaGxkX293bmVyX21haW5sb29wX25vdGlmeToKICAgICAgICAgY2hpbGRwcm9jX2NoZWNrYWxs
KGVnYyk7CiAgICAgICAgIHJldHVybjsKKyAgICBkZWZhdWx0OgorICAgICAgICA7CiAgICAgfQog
Ci0gICAgd2hpbGUgKGNobGRtb2RlX291cnMoQ1RYLCAwKSAvKiBpbiBjYXNlIHRoZSBhcHAgY2hh
bmdlcyB0aGUgbW9kZSAqLykgeworICAgIHdoaWxlIChjaGxkbW9kZV9ub3RpZnkoQ1RYLCAwKSAv
KiBpbiBjYXNlIHRoZSBhcHAgY2hhbmdlcyB0aGUgbW9kZSAqLykgewogICAgICAgICBpbnQgc3Rh
dHVzOwogICAgICAgICBwaWRfdCBwaWQgPSBjaGVja2VkX3dhaXRwaWQoZWdjLCAtMSwgJnN0YXR1
cyk7CiAKLS0gCjIuMjQuMQoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2pl
Y3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4t
ZGV2ZWw=

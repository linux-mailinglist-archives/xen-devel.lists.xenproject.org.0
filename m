Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 8428AB2AA3
	for <lists+xen-devel@lfdr.de>; Sat, 14 Sep 2019 10:56:19 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i93oo-0000aS-Kd; Sat, 14 Sep 2019 08:54:10 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=rDpt=XJ=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1i93ol-0000WW-VT
 for xen-devel@lists.xenproject.org; Sat, 14 Sep 2019 08:54:07 +0000
X-Inumbo-ID: 125e7c24-d6cd-11e9-a337-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 125e7c24-d6cd-11e9-a337-bc764e2007e4;
 Sat, 14 Sep 2019 08:53:08 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 4FB57B67A;
 Sat, 14 Sep 2019 08:53:06 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Sat, 14 Sep 2019 10:52:41 +0200
Message-Id: <20190914085251.18816-38-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190914085251.18816-1-jgross@suse.com>
References: <20190914085251.18816-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH v3 37/47] xen/sched: move per-cpu variable
 scheduler to struct sched_resource
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Tim Deegan <tim@xen.org>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Dario Faggioli <dfaggioli@suse.com>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGF2aW5nIGEgcG9pbnRlciB0byBzdHJ1Y3Qgc2NoZWR1bGVyIGluIHN0cnVjdCBzY2hlZF9yZXNv
dXJjZSBpbnN0ZWFkCm9mIHBlciBjcHUgaXMgZW5vdWdoLgoKU2lnbmVkLW9mZi1ieTogSnVlcmdl
biBHcm9zcyA8amdyb3NzQHN1c2UuY29tPgotLS0KVjE6IG5ldyBwYXRjaAotLS0KIHhlbi9jb21t
b24vc2NoZWRfY3JlZGl0LmMgIHwgMTggKysrKysrKysrKystLS0tLS0tCiB4ZW4vY29tbW9uL3Nj
aGVkX2NyZWRpdDIuYyB8ICAzICsrLQogeGVuL2NvbW1vbi9zY2hlZHVsZS5jICAgICAgfCAxNSAr
KysrKysrLS0tLS0tLS0KIHhlbi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oIHwgIDIgKy0KIDQgZmls
ZXMgY2hhbmdlZCwgMjEgaW5zZXJ0aW9ucygrKSwgMTcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0
IGEveGVuL2NvbW1vbi9zY2hlZF9jcmVkaXQuYyBiL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0LmMK
aW5kZXggYjI1YTdkMjI3MC4uZTQ3ZTg2NWQ3NiAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9zY2hl
ZF9jcmVkaXQuYworKysgYi94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdC5jCkBAIC0zNTIsOSArMzUy
LDEwIEBAIERFRklORV9QRVJfQ1BVKHVuc2lnbmVkIGludCwgbGFzdF90aWNrbGVfY3B1KTsKIHN0
YXRpYyBpbmxpbmUgdm9pZCBfX3J1bnFfdGlja2xlKHN0cnVjdCBjc2NoZWRfdW5pdCAqbmV3KQog
ewogICAgIHVuc2lnbmVkIGludCBjcHUgPSBzY2hlZF91bml0X2NwdShuZXctPnVuaXQpOworICAg
IHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqc2QgPSBnZXRfc2NoZWRfcmVzKGNwdSk7CiAgICAgc3Ry
dWN0IHNjaGVkX3VuaXQgKnVuaXQgPSBuZXctPnVuaXQ7CiAgICAgc3RydWN0IGNzY2hlZF91bml0
ICogY29uc3QgY3VyID0gQ1NDSEVEX1VOSVQoY3Vycl9vbl9jcHUoY3B1KSk7Ci0gICAgc3RydWN0
IGNzY2hlZF9wcml2YXRlICpwcnYgPSBDU0NIRURfUFJJVihwZXJfY3B1KHNjaGVkdWxlciwgY3B1
KSk7CisgICAgc3RydWN0IGNzY2hlZF9wcml2YXRlICpwcnYgPSBDU0NIRURfUFJJVihzZC0+c2No
ZWR1bGVyKTsKICAgICBjcHVtYXNrX3QgbWFzaywgaWRsZV9tYXNrLCAqb25saW5lOwogICAgIGlu
dCBiYWxhbmNlX3N0ZXAsIGlkbGVyc19lbXB0eTsKIApAQCAtOTMxLDcgKzkzMiw4IEBAIGNzY2hl
ZF91bml0X2FjY3Qoc3RydWN0IGNzY2hlZF9wcml2YXRlICpwcnYsIHVuc2lnbmVkIGludCBjcHUp
CiB7CiAgICAgc3RydWN0IHNjaGVkX3VuaXQgKmN1cnJ1bml0ID0gY3VycmVudC0+c2NoZWRfdW5p
dDsKICAgICBzdHJ1Y3QgY3NjaGVkX3VuaXQgKiBjb25zdCBzdmMgPSBDU0NIRURfVU5JVChjdXJy
dW5pdCk7Ci0gICAgY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzID0gcGVyX2NwdShzY2hlZHVs
ZXIsIGNwdSk7CisgICAgc3RydWN0IHNjaGVkX3Jlc291cmNlICpzZCA9IGdldF9zY2hlZF9yZXMo
Y3B1KTsKKyAgICBjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMgPSBzZC0+c2NoZWR1bGVyOwog
CiAgICAgQVNTRVJUKCBzY2hlZF91bml0X2NwdShjdXJydW5pdCkgPT0gY3B1ICk7CiAgICAgQVNT
RVJUKCBzdmMtPnNkb20gIT0gTlVMTCApOwpAQCAtOTg3LDggKzk4OSw3IEBAIGNzY2hlZF91bml0
X2FjY3Qoc3RydWN0IGNzY2hlZF9wcml2YXRlICpwcnYsIHVuc2lnbmVkIGludCBjcHUpCiAgICAg
ICAgICAgICAgKiBpZGxlcnMuIEJ1dCwgaWYgd2UgYXJlIGhlcmUsIGl0IG1lYW5zIHRoZXJlIGlz
IHNvbWVvbmUgcnVubmluZwogICAgICAgICAgICAgICogb24gaXQsIGFuZCBoZW5jZSB0aGUgYml0
IG11c3QgYmUgemVybyBhbHJlYWR5LgogICAgICAgICAgICAgICovCi0gICAgICAgICAgICBBU1NF
UlQoIWNwdW1hc2tfdGVzdF9jcHUoY3B1LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIENTQ0hFRF9QUklWKHBlcl9jcHUoc2NoZWR1bGVyLCBjcHUpKS0+aWRsZXJzKSk7Cisg
ICAgICAgICAgICBBU1NFUlQoIWNwdW1hc2tfdGVzdF9jcHUoY3B1LCBDU0NIRURfUFJJVihzZC0+
c2NoZWR1bGVyKS0+aWRsZXJzKSk7CiAgICAgICAgICAgICBjcHVfcmFpc2Vfc29mdGlycShjcHUs
IFNDSEVEVUxFX1NPRlRJUlEpOwogICAgICAgICB9CiAgICAgfQpAQCAtMTA4Myw2ICsxMDg0LDcg
QEAgY3NjaGVkX3VuaXRfc2xlZXAoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qg
c2NoZWRfdW5pdCAqdW5pdCkKIHsKICAgICBzdHJ1Y3QgY3NjaGVkX3VuaXQgKiBjb25zdCBzdmMg
PSBDU0NIRURfVU5JVCh1bml0KTsKICAgICB1bnNpZ25lZCBpbnQgY3B1ID0gc2NoZWRfdW5pdF9j
cHUodW5pdCk7CisgICAgc3RydWN0IHNjaGVkX3Jlc291cmNlICpzZCA9IGdldF9zY2hlZF9yZXMo
Y3B1KTsKIAogICAgIFNDSEVEX1NUQVRfQ1JBTksodW5pdF9zbGVlcCk7CiAKQEAgLTEwOTUsNyAr
MTA5Nyw3IEBAIGNzY2hlZF91bml0X3NsZWVwKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywg
c3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiAgICAgICAgICAqIEJ1dCwgd2UgYXJlIGhlcmUgYmVj
YXVzZSB1bml0IGlzIGdvaW5nIHRvIHNsZWVwIHdoaWxlIHJ1bm5pbmcgb24gY3B1LAogICAgICAg
ICAgKiBzbyB0aGUgYml0IG11c3QgYmUgemVybyBhbHJlYWR5LgogICAgICAgICAgKi8KLSAgICAg
ICAgQVNTRVJUKCFjcHVtYXNrX3Rlc3RfY3B1KGNwdSwgQ1NDSEVEX1BSSVYocGVyX2NwdShzY2hl
ZHVsZXIsIGNwdSkpLT5pZGxlcnMpKTsKKyAgICAgICAgQVNTRVJUKCFjcHVtYXNrX3Rlc3RfY3B1
KGNwdSwgQ1NDSEVEX1BSSVYoc2QtPnNjaGVkdWxlciktPmlkbGVycykpOwogICAgICAgICBjcHVf
cmFpc2Vfc29mdGlycShjcHUsIFNDSEVEVUxFX1NPRlRJUlEpOwogICAgIH0KICAgICBlbHNlIGlm
ICggX191bml0X29uX3J1bnEoc3ZjKSApCkBAIC0xNTc1LDggKzE1NzcsOSBAQCBzdGF0aWMgdm9p
ZAogY3NjaGVkX3RpY2sodm9pZCAqX2NwdSkKIHsKICAgICB1bnNpZ25lZCBpbnQgY3B1ID0gKHVu
c2lnbmVkIGxvbmcpX2NwdTsKKyAgICBzdHJ1Y3Qgc2NoZWRfcmVzb3VyY2UgKnNkID0gZ2V0X3Nj
aGVkX3JlcyhjcHUpOwogICAgIHN0cnVjdCBjc2NoZWRfcGNwdSAqc3BjID0gQ1NDSEVEX1BDUFUo
Y3B1KTsKLSAgICBzdHJ1Y3QgY3NjaGVkX3ByaXZhdGUgKnBydiA9IENTQ0hFRF9QUklWKHBlcl9j
cHUoc2NoZWR1bGVyLCBjcHUpKTsKKyAgICBzdHJ1Y3QgY3NjaGVkX3ByaXZhdGUgKnBydiA9IENT
Q0hFRF9QUklWKHNkLT5zY2hlZHVsZXIpOwogCiAgICAgc3BjLT50aWNrKys7CiAKQEAgLTE2MDEs
NyArMTYwNCw4IEBAIGNzY2hlZF90aWNrKHZvaWQgKl9jcHUpCiBzdGF0aWMgc3RydWN0IGNzY2hl
ZF91bml0ICoKIGNzY2hlZF9ydW5xX3N0ZWFsKGludCBwZWVyX2NwdSwgaW50IGNwdSwgaW50IHBy
aSwgaW50IGJhbGFuY2Vfc3RlcCkKIHsKLSAgICBjb25zdCBzdHJ1Y3QgY3NjaGVkX3ByaXZhdGUg
KiBjb25zdCBwcnYgPSBDU0NIRURfUFJJVihwZXJfY3B1KHNjaGVkdWxlciwgY3B1KSk7CisgICAg
c3RydWN0IHNjaGVkX3Jlc291cmNlICpzZCA9IGdldF9zY2hlZF9yZXMoY3B1KTsKKyAgICBjb25z
dCBzdHJ1Y3QgY3NjaGVkX3ByaXZhdGUgKiBjb25zdCBwcnYgPSBDU0NIRURfUFJJVihzZC0+c2No
ZWR1bGVyKTsKICAgICBjb25zdCBzdHJ1Y3QgY3NjaGVkX3BjcHUgKiBjb25zdCBwZWVyX3BjcHUg
PSBDU0NIRURfUENQVShwZWVyX2NwdSk7CiAgICAgc3RydWN0IGNzY2hlZF91bml0ICpzcGVlcjsK
ICAgICBzdHJ1Y3QgbGlzdF9oZWFkICppdGVyOwpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hl
ZF9jcmVkaXQyLmMgYi94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdDIuYwppbmRleCA3MDg2NDNiZTdl
Li40OWM1ZjgwZGRkIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdDIuYworKysg
Yi94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdDIuYwpAQCAtMzI2Niw4ICszMjY2LDkgQEAgcnVucV9j
YW5kaWRhdGUoc3RydWN0IGNzY2hlZDJfcnVucXVldWVfZGF0YSAqcnFkLAogICAgICAgICAgICAg
ICAgdW5zaWduZWQgaW50ICpza2lwcGVkKQogewogICAgIHN0cnVjdCBsaXN0X2hlYWQgKml0ZXIs
ICp0ZW1wOworICAgIHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqc2QgPSBnZXRfc2NoZWRfcmVzKGNw
dSk7CiAgICAgc3RydWN0IGNzY2hlZDJfdW5pdCAqc25leHQgPSBOVUxMOwotICAgIHN0cnVjdCBj
c2NoZWQyX3ByaXZhdGUgKnBydiA9IGNzY2hlZDJfcHJpdihwZXJfY3B1KHNjaGVkdWxlciwgY3B1
KSk7CisgICAgc3RydWN0IGNzY2hlZDJfcHJpdmF0ZSAqcHJ2ID0gY3NjaGVkMl9wcml2KHNkLT5z
Y2hlZHVsZXIpOwogICAgIGJvb2wgeWllbGQgPSBmYWxzZSwgc29mdF9hZmZfcHJlZW1wdCA9IGZh
bHNlOwogCiAgICAgKnNraXBwZWQgPSAwOwpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZHVs
ZS5jIGIveGVuL2NvbW1vbi9zY2hlZHVsZS5jCmluZGV4IDg4YWMxYTFhYjguLjFiZDg0YTQ5YmMg
MTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vc2NoZWR1bGUuYworKysgYi94ZW4vY29tbW9uL3NjaGVk
dWxlLmMKQEAgLTY5LDcgKzY5LDYgQEAgc3RhdGljIHZvaWQgdmNwdV9zaW5nbGVzaG90X3RpbWVy
X2ZuKHZvaWQgKmRhdGEpOwogc3RhdGljIHZvaWQgcG9sbF90aW1lcl9mbih2b2lkICpkYXRhKTsK
IAogLyogVGhpcyBpcyBnbG9iYWwgZm9yIG5vdyBzbyB0aGF0IHByaXZhdGUgaW1wbGVtZW50YXRp
b25zIGNhbiByZWFjaCBpdCAqLwotREVGSU5FX1BFUl9DUFUoc3RydWN0IHNjaGVkdWxlciAqLCBz
Y2hlZHVsZXIpOwogREVGSU5FX1BFUl9DUFVfUkVBRF9NT1NUTFkoc3RydWN0IHNjaGVkX3Jlc291
cmNlICosIHNjaGVkX3Jlcyk7CiBzdGF0aWMgREVGSU5FX1BFUl9DUFVfUkVBRF9NT1NUTFkodW5z
aWduZWQgaW50LCBzY2hlZF9yZXNfaWR4KTsKIApAQCAtMTkxLDcgKzE5MCw3IEBAIHN0YXRpYyBp
bmxpbmUgc3RydWN0IHNjaGVkdWxlciAqdW5pdF9zY2hlZHVsZXIoY29uc3Qgc3RydWN0IHNjaGVk
X3VuaXQgKnVuaXQpCiAgICAgICovCiAKICAgICBBU1NFUlQoaXNfaWRsZV9kb21haW4oZCkpOwot
ICAgIHJldHVybiBwZXJfY3B1KHNjaGVkdWxlciwgdW5pdC0+cmVzLT5tYXN0ZXJfY3B1KTsKKyAg
ICByZXR1cm4gdW5pdC0+cmVzLT5zY2hlZHVsZXI7CiB9CiAKIHN0YXRpYyBpbmxpbmUgc3RydWN0
IHNjaGVkdWxlciAqdmNwdV9zY2hlZHVsZXIoY29uc3Qgc3RydWN0IHZjcHUgKnYpCkBAIC0xODk2
LDggKzE4OTUsOCBAQCBzdGF0aWMgYm9vbCBzY2hlZF90YXNrbGV0X2NoZWNrKHVuc2lnbmVkIGlu
dCBjcHUpCiBzdGF0aWMgc3RydWN0IHNjaGVkX3VuaXQgKmRvX3NjaGVkdWxlKHN0cnVjdCBzY2hl
ZF91bml0ICpwcmV2LCBzX3RpbWVfdCBub3csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHVuc2lnbmVkIGludCBjcHUpCiB7Ci0gICAgc3RydWN0IHNjaGVkdWxlciAqc2No
ZWQgPSBwZXJfY3B1KHNjaGVkdWxlciwgY3B1KTsKICAgICBzdHJ1Y3Qgc2NoZWRfcmVzb3VyY2Ug
KnNkID0gZ2V0X3NjaGVkX3JlcyhjcHUpOworICAgIHN0cnVjdCBzY2hlZHVsZXIgKnNjaGVkID0g
c2QtPnNjaGVkdWxlcjsKICAgICBzdHJ1Y3Qgc2NoZWRfdW5pdCAqbmV4dDsKIAogICAgIC8qIGdl
dCBwb2xpY3ktc3BlY2lmaWMgZGVjaXNpb24gb24gc2NoZWR1bGluZy4uLiAqLwpAQCAtMjMwMiw3
ICsyMzAxLDcgQEAgc3RhdGljIGludCBjcHVfc2NoZWR1bGVfdXAodW5zaWduZWQgaW50IGNwdSkK
ICAgICBzZC0+Y3B1cyA9IGNwdW1hc2tfb2YoY3B1KTsKICAgICBzZXRfc2NoZWRfcmVzKGNwdSwg
c2QpOwogCi0gICAgcGVyX2NwdShzY2hlZHVsZXIsIGNwdSkgPSAmc2NoZWRfaWRsZV9vcHM7Cisg
ICAgc2QtPnNjaGVkdWxlciA9ICZzY2hlZF9pZGxlX29wczsKICAgICBzcGluX2xvY2tfaW5pdCgm
c2QtPl9sb2NrKTsKICAgICBzZC0+c2NoZWR1bGVfbG9jayA9ICZzY2hlZF9mcmVlX2NwdV9sb2Nr
OwogICAgIGluaXRfdGltZXIoJnNkLT5zX3RpbWVyLCBzX3RpbWVyX2ZuLCBOVUxMLCBjcHUpOwpA
QCAtMjUxMyw3ICsyNTEyLDcgQEAgaW50IHNjaGVkdWxlX2NwdV9zd2l0Y2godW5zaWduZWQgaW50
IGNwdSwgc3RydWN0IGNwdXBvb2wgKmMpCiB7CiAgICAgc3RydWN0IHZjcHUgKmlkbGU7CiAgICAg
dm9pZCAqcHByaXYsICpwcHJpdl9vbGQsICp2cHJpdiwgKnZwcml2X29sZDsKLSAgICBzdHJ1Y3Qg
c2NoZWR1bGVyICpvbGRfb3BzID0gcGVyX2NwdShzY2hlZHVsZXIsIGNwdSk7CisgICAgc3RydWN0
IHNjaGVkdWxlciAqb2xkX29wcyA9IGdldF9zY2hlZF9yZXMoY3B1KS0+c2NoZWR1bGVyOwogICAg
IHN0cnVjdCBzY2hlZHVsZXIgKm5ld19vcHMgPSAoYyA9PSBOVUxMKSA/ICZzY2hlZF9pZGxlX29w
cyA6IGMtPnNjaGVkOwogICAgIHN0cnVjdCBjcHVwb29sICpvbGRfcG9vbCA9IHBlcl9jcHUoY3B1
cG9vbCwgY3B1KTsKICAgICBzdHJ1Y3Qgc2NoZWRfcmVzb3VyY2UgKnNkID0gZ2V0X3NjaGVkX3Jl
cyhjcHUpOwpAQCAtMjU3Nyw3ICsyNTc2LDcgQEAgaW50IHNjaGVkdWxlX2NwdV9zd2l0Y2godW5z
aWduZWQgaW50IGNwdSwgc3RydWN0IGNwdXBvb2wgKmMpCiAgICAgcHByaXZfb2xkID0gc2QtPnNj
aGVkX3ByaXY7CiAgICAgbmV3X2xvY2sgPSBzY2hlZF9zd2l0Y2hfc2NoZWQobmV3X29wcywgY3B1
LCBwcHJpdiwgdnByaXYpOwogCi0gICAgcGVyX2NwdShzY2hlZHVsZXIsIGNwdSkgPSBuZXdfb3Bz
OworICAgIHNkLT5zY2hlZHVsZXIgPSBuZXdfb3BzOwogICAgIHNkLT5zY2hlZF9wcml2ID0gcHBy
aXY7CiAKICAgICAvKgpAQCAtMjY3Nyw3ICsyNjc2LDcgQEAgdm9pZCBzY2hlZF90aWNrX3N1c3Bl
bmQodm9pZCkKICAgICBzdHJ1Y3Qgc2NoZWR1bGVyICpzY2hlZDsKICAgICB1bnNpZ25lZCBpbnQg
Y3B1ID0gc21wX3Byb2Nlc3Nvcl9pZCgpOwogCi0gICAgc2NoZWQgPSBwZXJfY3B1KHNjaGVkdWxl
ciwgY3B1KTsKKyAgICBzY2hlZCA9IGdldF9zY2hlZF9yZXMoY3B1KS0+c2NoZWR1bGVyOwogICAg
IHNjaGVkX2RvX3RpY2tfc3VzcGVuZChzY2hlZCwgY3B1KTsKICAgICByY3VfaWRsZV9lbnRlcihj
cHUpOwogICAgIHJjdV9pZGxlX3RpbWVyX3N0YXJ0KCk7CkBAIC0yNjkwLDcgKzI2ODksNyBAQCB2
b2lkIHNjaGVkX3RpY2tfcmVzdW1lKHZvaWQpCiAKICAgICByY3VfaWRsZV90aW1lcl9zdG9wKCk7
CiAgICAgcmN1X2lkbGVfZXhpdChjcHUpOwotICAgIHNjaGVkID0gcGVyX2NwdShzY2hlZHVsZXIs
IGNwdSk7CisgICAgc2NoZWQgPSBnZXRfc2NoZWRfcmVzKGNwdSktPnNjaGVkdWxlcjsKICAgICBz
Y2hlZF9kb190aWNrX3Jlc3VtZShzY2hlZCwgY3B1KTsKIH0KIApkaWZmIC0tZ2l0IGEveGVuL2lu
Y2x1ZGUveGVuL3NjaGVkLWlmLmggYi94ZW4vaW5jbHVkZS94ZW4vc2NoZWQtaWYuaAppbmRleCA2
NTVlYjNhZjMyLi41Mjg4NzRhYjExIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vc2NoZWQt
aWYuaAorKysgYi94ZW4vaW5jbHVkZS94ZW4vc2NoZWQtaWYuaApAQCAtMzYsNiArMzYsNyBAQCBl
eHRlcm4gY29uc3QgY3B1bWFza190ICpzY2hlZF9yZXNfbWFzazsKICAqIGFzIHRoZSByZXN0IG9m
IHRoZSBzdHJ1Y3QuICBKdXN0IGhhdmUgdGhlIHNjaGVkdWxlciBwb2ludCB0byB0aGUKICAqIG9u
ZSBpdCB3YW50cyAoVGhpcyBtYXkgYmUgdGhlIG9uZSByaWdodCBpbiBmcm9udCBvZiBpdCkuKi8K
IHN0cnVjdCBzY2hlZF9yZXNvdXJjZSB7CisgICAgc3RydWN0IHNjaGVkdWxlciAgICpzY2hlZHVs
ZXI7CiAgICAgc3BpbmxvY2tfdCAgICAgICAgICpzY2hlZHVsZV9sb2NrLAogICAgICAgICAgICAg
ICAgICAgICAgICBfbG9jazsKICAgICBzdHJ1Y3Qgc2NoZWRfdW5pdCAgKmN1cnI7CkBAIC01MSw3
ICs1Miw2IEBAIHN0cnVjdCBzY2hlZF9yZXNvdXJjZSB7CiAKICNkZWZpbmUgY3Vycl9vbl9jcHUo
YykgICAgKGdldF9zY2hlZF9yZXMoYyktPmN1cnIpCiAKLURFQ0xBUkVfUEVSX0NQVShzdHJ1Y3Qg
c2NoZWR1bGVyICosIHNjaGVkdWxlcik7CiBERUNMQVJFX1BFUl9DUFUoc3RydWN0IGNwdXBvb2wg
KiwgY3B1cG9vbCk7CiBERUNMQVJFX1BFUl9DUFUoc3RydWN0IHNjaGVkX3Jlc291cmNlICosIHNj
aGVkX3Jlcyk7CiAKLS0gCjIuMTYuNAoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhl
bnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5m
by94ZW4tZGV2ZWw=

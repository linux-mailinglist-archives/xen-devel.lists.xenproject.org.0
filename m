Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id BDC6412329D
	for <lists+xen-devel@lfdr.de>; Tue, 17 Dec 2019 17:35:55 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ihFlG-0001Rm-Gx; Tue, 17 Dec 2019 16:31:50 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=mCDn=2H=amazon.com=prvs=2471a56b0=sjpark@srs-us1.protection.inumbo.net>)
 id 1ihFlE-0001RN-EO
 for xen-devel@lists.xenproject.org; Tue, 17 Dec 2019 16:31:48 +0000
X-Inumbo-ID: b7b77452-20ea-11ea-8f19-12813bfff9fa
Received: from smtp-fw-33001.amazon.com (unknown [207.171.190.10])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id b7b77452-20ea-11ea-8f19-12813bfff9fa;
 Tue, 17 Dec 2019 16:31:47 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.com; i=@amazon.com; q=dns/txt; s=amazon201209;
 t=1576600307; x=1608136307;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=0HyRVMghdtV+tK4t2O4rhJZ4omB7wWKasfkgKQVvX+M=;
 b=DtJoiKX7iMc5GTUwOwsWZA8hutPbqlJ26UPj0MYZop6NxA0wEizlVzqR
 1cr8o8cbGQEvpzS1XcyaFDuRs3eKJXypsN/w+vfogBHZOkUjLW6NcmBJK
 8bfSAp5Um0rI59CHFipiL/axTIqartJVB14EwN2AGbpLS+/zXCGBV9KnJ k=;
IronPort-SDR: syuyglB0yNqcG0rDH91e1FUxt9b5bR/iJUx/EMDGw72mjqDGQdnwqATFUlXYhvlm7OR8CW4dw/
 PIQYYraJ4+kg==
X-IronPort-AV: E=Sophos;i="5.69,326,1571702400"; d="scan'208";a="15427431"
Received: from sea32-co-svc-lb4-vlan3.sea.corp.amazon.com (HELO
 email-inbound-relay-1d-f273de60.us-east-1.amazon.com) ([10.47.23.38])
 by smtp-border-fw-out-33001.sea14.amazon.com with ESMTP;
 17 Dec 2019 16:31:34 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan2.iad.amazon.com [10.40.159.162])
 by email-inbound-relay-1d-f273de60.us-east-1.amazon.com (Postfix) with ESMTPS
 id 986DCA20F8; Tue, 17 Dec 2019 16:31:31 +0000 (UTC)
Received: from EX13D31EUA001.ant.amazon.com (10.43.165.15) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.82) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Tue, 17 Dec 2019 16:31:30 +0000
Received: from u886c93fd17d25d.ant.amazon.com (10.43.161.179) by
 EX13D31EUA001.ant.amazon.com (10.43.165.15) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Tue, 17 Dec 2019 16:31:25 +0000
From: SeongJae Park <sjpark@amazon.com>
To: <jgross@suse.com>
Date: Tue, 17 Dec 2019 17:31:06 +0100
Message-ID: <20191217163106.6497-1-sjpark@amazon.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <027a402d-029a-e6c4-9f07-98728a161f22@suse.com>
References: <027a402d-029a-e6c4-9f07-98728a161f22@suse.com>
MIME-Version: 1.0
X-Originating-IP: [10.43.161.179]
X-ClientProxiedBy: EX13D12UWA003.ant.amazon.com (10.43.160.50) To
 EX13D31EUA001.ant.amazon.com (10.43.165.15)
Precedence: Bulk
Subject: [Xen-devel] [PATCH 1/3] xen/blkback: Squeeze page pools if a memory
 pressure is detected
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: axboe@kernel.dk, sj38.park@gmail.com, sjpark@amazon.com,
 konrad.wilk@oracle.com, pdurrant@amazon.com, sjpark@amazon.de,
 linux-kernel@vger.kernel.org, linux-block@vger.kernel.org,
 xen-devel@lists.xenproject.org, roger.pau@citrix.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogU2VvbmdKYWUgUGFyayA8c2pwYXJrQGFtYXpvbi5kZT4KCkkgdGhvdWdoIGl0IHdvdWxk
IGJlIGJldHRlciB0byByZXZpZXcgc2VwYXJhdGVkIHBhdGNoZXMsIGJ1dCBzZWVtcyBpdAp3YXMg
bXkgbWlzdGFrZS4gIEFzIEp1ZXJnZW4gYXNrZWQsIG1lcmdlZCB0aGVtIGFnYWluIGFuZCBwb3N0
IGhlcmUuCkFsc28sIGRyb3BwZWQgUm9nZXIncyByZXZpZXdlZC1ieS4KCgpUaGFua3MsClNlb25n
SmFlIFBhcmsKCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gPjggLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpTdWJqZWN0OiBbUEFUQ0ggMS8zXSB4ZW4vYmxrYmFj
azogU3F1ZWV6ZSBwYWdlIHBvb2xzIGlmIGEgbWVtb3J5IHByZXNzdXJlIGlzCiBkZXRlY3RlZAoK
RWFjaCBgYmxraWZgIGhhcyBhIGZyZWUgcGFnZXMgcG9vbCBmb3IgdGhlIGdyYW50IG1hcHBpbmcu
ICBUaGUgc2l6ZSBvZgp0aGUgcG9vbCBzdGFydHMgZnJvbSB6ZXJvIGFuZCBpcyBpbmNyZWFzZWQg
b24gZGVtYW5kIHdoaWxlIHByb2Nlc3NpbmcKdGhlIEkvTyByZXF1ZXN0cy4gIElmIGN1cnJlbnQg
SS9PIHJlcXVlc3RzIGhhbmRsaW5nIGlzIGZpbmlzaGVkIG9yIDEwMAptaWxsaXNlY29uZHMgaGFz
IHBhc3NlZCBzaW5jZSBsYXN0IEkvTyByZXF1ZXN0cyBoYW5kbGluZywgaXQgY2hlY2tzIGFuZApz
aHJpbmtzIHRoZSBwb29sIHRvIG5vdCBleGNlZWQgdGhlIHNpemUgbGltaXQsIGBtYXhfYnVmZmVy
X3BhZ2VzYC4KClRoZXJlZm9yZSwgaG9zdCBhZG1pbmlzdHJhdG9ycyBjYW4gY2F1c2UgbWVtb3J5
IHByZXNzdXJlIGluIGJsa2JhY2sgYnkKYXR0YWNoaW5nIGEgbGFyZ2UgbnVtYmVyIG9mIGJsb2Nr
IGRldmljZXMgYW5kIGluZHVjaW5nIEkvTy4gIFN1Y2gKcHJvYmxlbWF0aWMgc2l0dWF0aW9ucyBj
YW4gYmUgYXZvaWRlZCBieSBsaW1pdGluZyB0aGUgbWF4aW11bSBudW1iZXIgb2YKZGV2aWNlcyB0
aGF0IGNhbiBiZSBhdHRhY2hlZCwgYnV0IGZpbmRpbmcgdGhlIG9wdGltYWwgbGltaXQgaXMgbm90
IHNvCmVhc3kuICBJbXByb3BlciBzZXQgb2YgdGhlIGxpbWl0IGNhbiByZXN1bHRzIGluIG1lbW9y
eSBwcmVzc3VyZSBvciBhCnJlc291cmNlIHVuZGVydXRpbGl6YXRpb24uICBUaGlzIGNvbW1pdCBh
dm9pZHMgc3VjaCBwcm9ibGVtYXRpYwpzaXR1YXRpb25zIGJ5IHNxdWVlemluZyB0aGUgcG9vbHMg
KHJldHVybnMgZXZlcnkgZnJlZSBwYWdlIGluIHRoZSBwb29sCnRvIHRoZSBzeXN0ZW0pIGZvciBh
IHdoaWxlICh1c2VycyBjYW4gc2V0IHRoaXMgZHVyYXRpb24gdmlhIGEgbW9kdWxlCnBhcmFtZXRl
cikgaWYgbWVtb3J5IHByZXNzdXJlIGlzIGRldGVjdGVkLgoKRGlzY3Vzc2lvbnMKPT09PT09PT09
PT0KClRoZSBgYmxrYmFja2AncyBvcmlnaW5hbCBzaHJpbmtpbmcgbWVjaGFuaXNtIHJldHVybnMg
b25seSBwYWdlcyBpbiB0aGUKcG9vbCB3aGljaCBhcmUgbm90IGN1cnJlbnRseSBiZSB1c2VkIGJ5
IGBibGtiYWNrYCB0byB0aGUgc3lzdGVtLiAgSW4Kb3RoZXIgd29yZHMsIHRoZSBwYWdlcyB0aGF0
IGFyZSBub3QgbWFwcGVkIHdpdGggZ3JhbnRlZCBwYWdlcy4gIEJlY2F1c2UKdGhpcyBjb21taXQg
aXMgY2hhbmdpbmcgb25seSB0aGUgc2hyaW5rIGxpbWl0IGJ1dCBzdGlsbCB1c2VzIHRoZSBzYW1l
CmZyZWVpbmcgbWVjaGFuaXNtIGl0IGRvZXMgbm90IHRvdWNoIHBhZ2VzIHdoaWNoIGFyZSBjdXJy
ZW50bHkgbWFwcGluZwpncmFudHMuCgpPbmNlIG1lbW9yeSBwcmVzc3VyZSBpcyBkZXRlY3RlZCwg
dGhpcyBjb21taXQga2VlcHMgdGhlIHNxdWVlemluZyBsaW1pdApmb3IgYSB1c2VyLXNwZWNpZmll
ZCB0aW1lIGR1cmF0aW9uLiAgVGhlIGR1cmF0aW9uIHNob3VsZCBiZSBuZWl0aGVyIHRvbwpsb25n
IG5vciB0b28gc2hvcnQuICBJZiBpdCBpcyB0b28gbG9uZywgdGhlIHNxdWVlemluZyBpbmN1cnJp
bmcgb3ZlcmhlYWQKY2FuIHJlZHVjZSB0aGUgSS9PIHBlcmZvcm1hbmNlLiAgSWYgaXQgaXMgdG9v
IHNob3J0LCBgYmxrYmFja2Agd2lsbCBub3QKZnJlZSBlbm91Z2ggcGFnZXMgdG8gcmVkdWNlIHRo
ZSBtZW1vcnkgcHJlc3N1cmUuICBUaGlzIGNvbW1pdCBzZXRzIHRoZQp2YWx1ZSBhcyBgMTAgbWls
bGlzZWNvbmRzYCBieSBkZWZhdWx0IGJlY2F1c2UgaXQgaXMgYSBzaG9ydCB0aW1lIGluCnRlcm1z
IG9mIEkvTyB3aGlsZSBpdCBpcyBhIGxvbmcgdGltZSBpbiB0ZXJtcyBvZiBtZW1vcnkgb3BlcmF0
aW9ucy4KQWxzbywgYXMgdGhlIG9yaWdpbmFsIHNocmlua2luZyBtZWNoYW5pc20gd29ya3MgZm9y
IGF0IGxlYXN0IGV2ZXJ5IDEwMAptaWxsaXNlY29uZHMsIHRoaXMgY291bGQgYmUgYSBzb21ld2hh
dCByZWFzb25hYmxlIGNob2ljZS4gIEkgYWxzbyB0ZXN0ZWQKb3RoZXIgZHVyYXRpb25zIChyZWZl
ciB0byB0aGUgYmVsb3cgc2VjdGlvbiBmb3IgbW9yZSBkZXRhaWxzKSBhbmQKY29uZmlybWVkIHRo
YXQgMTAgbWlsbGlzZWNvbmRzIGlzIHRoZSBvbmUgdGhhdCB3b3JrcyBiZXN0IHdpdGggdGhlIHRl
c3QuClRoYXQgc2FpZCwgdGhlIHByb3BlciBkdXJhdGlvbiBkZXBlbmRzIG9uIGFjdHVhbCBjb25m
aWd1cmF0aW9ucyBhbmQKd29ya2xvYWRzLiAgVGhhdCdzIHdoeSB0aGlzIGNvbW1pdCBhbGxvd3Mg
dXNlcnMgdG8gc2V0IHRoZSBkdXJhdGlvbiBhcyBhCm1vZHVsZSBwYXJhbWV0ZXIuCgpNZW1vcnkg
UHJlc3N1cmUgVGVzdAo9PT09PT09PT09PT09PT09PT09PQoKVG8gc2hvdyBob3cgdGhpcyBjb21t
aXQgZml4ZXMgdGhlIG1lbW9yeSBwcmVzc3VyZSBzaXR1YXRpb24gd2VsbCwgSQpjb25maWd1cmVk
IGEgdGVzdCBlbnZpcm9ubWVudCBvbiBhIHhlbi1ydW5uaW5nIHZpcnR1YWxpemF0aW9uIHN5c3Rl
bS4KT24gdGhlIGBibGtmcm9udGAgcnVubmluZyBndWVzdCBpbnN0YW5jZXMsIEkgYXR0YWNoIGEg
bGFyZ2UgbnVtYmVyIG9mCm5ldHdvcmstYmFja2VkIHZvbHVtZSBkZXZpY2VzIGFuZCBpbmR1Y2Ug
SS9PIHRvIHRob3NlLiAgTWVhbndoaWxlLCBJCm1lYXN1cmUgdGhlIG51bWJlciBvZiBwYWdlcyB0
aGF0IHN3YXBwZWQgaW4gKHBzd3BpbikgYW5kIG91dCAocHN3cG91dCkKb24gdGhlIGBibGtiYWNr
YCBydW5uaW5nIGd1ZXN0LiAgVGhlIHRlc3QgcmFuIHR3aWNlLCBvbmNlIGZvciB0aGUKYGJsa2Jh
Y2tgIGJlZm9yZSB0aGlzIGNvbW1pdCBhbmQgb25jZSBmb3IgdGhhdCBhZnRlciB0aGlzIGNvbW1p
dC4gIEFzCnNob3duIGJlbG93LCB0aGlzIGNvbW1pdCBoYXMgZHJhbWF0aWNhbGx5IHJlZHVjZWQg
dGhlIG1lbW9yeSBwcmVzc3VyZToKCiAgICAgICAgICAgICAgICBwc3dwaW4gIHBzd3BvdXQKICAg
IGJlZm9yZSAgICAgIDc2LDY3MiAgMTg1LDc5OQogICAgYWZ0ZXIgICAgICAgICAgMjEyICAgIDMs
MzI1CgpPcHRpbWFsIEFnZ3Jlc3NpdmUgU2hyaW5raW5nIER1cmF0aW9uCi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KClRvIGZpbmQgYSBiZXN0IHNxdWVlemluZyBkdXJhdGlv
biwgSSByZXBlYXRlZCB0aGUgdGVzdCB3aXRoIHRocmVlCmRpZmZlcmVudCBkdXJhdGlvbnMgKDFt
cywgMTBtcywgYW5kIDEwMG1zKS4gIFRoZSByZXN1bHRzIGFyZSBhcyBiZWxvdzoKCiAgICBkdXJh
dGlvbiAgICBwc3dwaW4gIHBzd3BvdXQKICAgIDEgICAgICAgICAgIDg1MiAgICAgNiw0MjQKICAg
IDEwICAgICAgICAgIDIxMiAgICAgMywzMjUKICAgIDEwMCAgICAgICAgIDIwMyAgICAgMywzNDAK
CkFzIGV4cGVjdGVkLCB0aGUgbWVtb3J5IHByZXNzdXJlIGhhcyBkZWNyZWFzZWQgYXMgdGhlIGR1
cmF0aW9uIGlzCmluY3JlYXNlZCwgYnV0IHRoZSByZWR1Y3Rpb24gc3RvcHBlZCBmcm9tIHRoZSBg
MTBtc2AuICBCYXNlZCBvbiB0aGlzCnJlc3VsdHMsIEkgY2hvc2UgdGhlIGRlZmF1bHQgZHVyYXRp
b24gYXMgMTBtcy4KClBlcmZvcm1hbmNlIE92ZXJoZWFkIFRlc3QKPT09PT09PT09PT09PT09PT09
PT09PT09PQoKVGhpcyBjb21taXQgY291bGQgaW5jdXIgSS9PIHBlcmZvcm1hbmNlIGRlZ3JhZGF0
aW9uIHVuZGVyIHNldmVyZSBtZW1vcnkKcHJlc3N1cmUgYmVjYXVzZSB0aGUgc3F1ZWV6aW5nIHdp
bGwgcmVxdWlyZSBtb3JlIHBhZ2UgYWxsb2NhdGlvbnMgcGVyCkkvTy4gIFRvIHNob3cgdGhlIG92
ZXJoZWFkLCBJIGFydGlmaWNpYWxseSBtYWRlIGEgd29yc3QtY2FzZSBzcXVlZXppbmcKc2l0dWF0
aW9uIGFuZCBtZWFzdXJlZCB0aGUgSS9PIHBlcmZvcm1hbmNlIG9mIGEgYGJsa2Zyb250YCBydW5u
aW5nCmd1ZXN0LgoKRm9yIHRoZSBhcnRpZmljaWFsIHNxdWVlemluZywgSSBzZXQgdGhlIGBibGti
YWNrLm1heF9idWZmZXJfcGFnZXNgIHVzaW5nCnRoZSBgL3N5cy9tb2R1bGUveGVuX2Jsa2JhY2sv
cGFyYW1ldGVycy9tYXhfYnVmZmVyX3BhZ2VzYCBmaWxlLiAgSW4gdGhpcwp0ZXN0LCBJIHNldCB0
aGUgdmFsdWUgdG8gYDEwMjRgIGFuZCBgMGAuICBUaGUgYDEwMjRgIGlzIHRoZSBkZWZhdWx0CnZh
bHVlLiAgU2V0dGluZyB0aGUgdmFsdWUgYXMgYDBgIGlzIHNhbWUgdG8gYSBzaXR1YXRpb24gZG9p
bmcgdGhlCnNxdWVlemluZyBhbHdheXMgKHdvcnN0LWNhc2UpLgoKSWYgdGhlIHVuZGVybHlpbmcg
YmxvY2sgZGV2aWNlIGlzIHNsb3cgZW5vdWdoLCB0aGUgc3F1ZWV6aW5nIG92ZXJoZWFkCmNvdWxk
IGJlIGhpZGRlbi4gIEZvciB0aGUgcmVhc29uLCBJIHVzZSBhIGZhc3QgYmxvY2sgZGV2aWNlLCBu
YW1lbHkgdGhlCnJiZFsxXToKCiAgICAjIHhsIGJsb2NrLWF0dGFjaCBndWVzdCBwaHk6L2Rldi9y
YW0wIHh2ZGIgdwoKRm9yIHRoZSBJL08gcGVyZm9ybWFuY2UgbWVhc3VyZW1lbnQsIEkgcnVuIGEg
c2ltcGxlIGBkZGAgY29tbWFuZCA1IHRpbWVzCmRpcmVjdGx5IHRvIHRoZSBkZXZpY2UgYXMgYmVs
b3cgYW5kIGNvbGxlY3QgdGhlICdNQi9zJyByZXN1bHRzLgoKICAgICQgZm9yIGkgaW4gezEuLjV9
OyBkbyBkZCBpZj0vZGV2L3plcm8gb2Y9L2Rldi94dmRiIFwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBicz00ayBjb3VudD0kKCgyNTYqNTEyKSk7IHN5bmM7IGRvbmUKClRoZSByZXN1bHRz
IGFyZSBhcyBiZWxvdy4gICdtYXhfcGdzJyByZXByZXNlbnRzIHRoZSB2YWx1ZSBvZiB0aGUKYGJs
a2JhY2subWF4X2J1ZmZlcl9wYWdlc2AgcGFyYW1ldGVyLgoKICAgIG1heF9wZ3MgICBNaW4gICAg
ICAgTWF4ICAgICAgIE1lZGlhbiAgICAgQXZnICAgIFN0ZGRldgogICAgMCAgICAgICAgIDQxNyAg
ICAgICA0MjMgICAgICAgNDIwICAgICAgICA0MTkuNCAgMi41MDk5ODAxCiAgICAxMDI0ICAgICAg
NDE0ICAgICAgIDQyNSAgICAgICA0MTYgICAgICAgIDQxNy44ICA0LjQzODQ2ODIKICAgIE5vIGRp
ZmZlcmVuY2UgcHJvdmVuIGF0IDk1LjAlIGNvbmZpZGVuY2UKCkluIHNob3J0LCBldmVuIHdvcnN0
IGNhc2Ugc3F1ZWV6aW5nIG9uIHJhbWRpc2sgYmFzZWQgZmFzdCBibG9jayBkZXZpY2UKbWFrZXMg
bm8gdmlzaWJsZSBwZXJmb3JtYW5jZSBkZWdyYWRhdGlvbi4gIFBsZWFzZSBub3RlIHRoYXQgdGhp
cyBpcyBqdXN0CmEgdmVyeSBzaW1wbGUgYW5kIG1pbmltYWwgdGVzdC4gIE9uIHN5c3RlbXMgdXNp
bmcgc3VwZXItZmFzdCBibG9jawpkZXZpY2VzIGFuZCBhIHNwZWNpYWwgSS9PIHdvcmtsb2FkLCB0
aGUgcmVzdWx0cyBtaWdodCBiZSBkaWZmZXJlbnQuICBJZgp5b3UgaGF2ZSBhbnkgZG91YnQsIHRl
c3Qgb24geW91ciBtYWNoaW5lIHdpdGggeW91ciB3b3JrbG9hZCB0byBmaW5kIHRoZQpvcHRpbWFs
IHNxdWVlemluZyBkdXJhdGlvbiBmb3IgeW91LgoKWzFdIGh0dHBzOi8vd3d3Lmtlcm5lbC5vcmcv
ZG9jL2h0bWwvbGF0ZXN0L2FkbWluLWd1aWRlL2Jsb2NrZGV2L3JhbWRpc2suaHRtbAoKU2lnbmVk
LW9mZi1ieTogU2VvbmdKYWUgUGFyayA8c2pwYXJrQGFtYXpvbi5kZT4KLS0tCiAuLi4vQUJJL3Rl
c3Rpbmcvc3lzZnMtZHJpdmVyLXhlbi1ibGtiYWNrICAgICAgfCAxMCArKysrKysKIGRyaXZlcnMv
YmxvY2sveGVuLWJsa2JhY2svYmxrYmFjay5jICAgICAgICAgICB8ICA3ICsrLS0KIGRyaXZlcnMv
YmxvY2sveGVuLWJsa2JhY2svY29tbW9uLmggICAgICAgICAgICB8ICAxICsKIGRyaXZlcnMvYmxv
Y2sveGVuLWJsa2JhY2sveGVuYnVzLmMgICAgICAgICAgICB8IDMyICsrKysrKysrKysrKysrKysr
Ky0KIDQgZmlsZXMgY2hhbmdlZCwgNDcgaW5zZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMoLSkKCmRp
ZmYgLS1naXQgYS9Eb2N1bWVudGF0aW9uL0FCSS90ZXN0aW5nL3N5c2ZzLWRyaXZlci14ZW4tYmxr
YmFjayBiL0RvY3VtZW50YXRpb24vQUJJL3Rlc3Rpbmcvc3lzZnMtZHJpdmVyLXhlbi1ibGtiYWNr
CmluZGV4IDRlN2JhYmIzYmExZi4uZjAxMjI0MjMxZjNmIDEwMDY0NAotLS0gYS9Eb2N1bWVudGF0
aW9uL0FCSS90ZXN0aW5nL3N5c2ZzLWRyaXZlci14ZW4tYmxrYmFjaworKysgYi9Eb2N1bWVudGF0
aW9uL0FCSS90ZXN0aW5nL3N5c2ZzLWRyaXZlci14ZW4tYmxrYmFjawpAQCAtMjUsMyArMjUsMTMg
QEAgRGVzY3JpcHRpb246CiAgICAgICAgICAgICAgICAgYWxsb2NhdGVkIHdpdGhvdXQgYmVpbmcg
aW4gdXNlLiBUaGUgdGltZSBpcyBpbgogICAgICAgICAgICAgICAgIHNlY29uZHMsIDAgbWVhbnMg
aW5kZWZpbml0ZWx5IGxvbmcuCiAgICAgICAgICAgICAgICAgVGhlIGRlZmF1bHQgaXMgNjAgc2Vj
b25kcy4KKworV2hhdDogICAgICAgICAgIC9zeXMvbW9kdWxlL3hlbl9ibGtiYWNrL3BhcmFtZXRl
cnMvYnVmZmVyX3NxdWVlemVfZHVyYXRpb25fbXMKK0RhdGU6ICAgICAgICAgICBEZWNlbWJlciAy
MDE5CitLZXJuZWxWZXJzaW9uOiAgNS41CitDb250YWN0OiAgICAgICAgU2VvbmdKYWUgUGFyayA8
c2pwYXJrQGFtYXpvbi5kZT4KK0Rlc2NyaXB0aW9uOgorICAgICAgICAgICAgICAgIFdoZW4gbWVt
b3J5IHByZXNzdXJlIGlzIHJlcG9ydGVkIHRvIGJsa2JhY2sgdGhpcyBvcHRpb24KKyAgICAgICAg
ICAgICAgICBjb250cm9scyB0aGUgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzIHRoYXQgYmxrYmFj
ayB3aWxsIG5vdAorICAgICAgICAgICAgICAgIGNhY2hlIGFueSBwYWdlIG5vdCBiYWNrZWQgYnkg
YSBncmFudCBtYXBwaW5nLgorICAgICAgICAgICAgICAgIFRoZSBkZWZhdWx0IGlzIDEwbXMuCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2Jsb2NrL3hlbi1ibGtiYWNrL2Jsa2JhY2suYyBiL2RyaXZlcnMv
YmxvY2sveGVuLWJsa2JhY2svYmxrYmFjay5jCmluZGV4IGZkMWUxOWYxYTQ5Zi4uNzlmNjc3YWVi
NWNjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2Jsb2NrL3hlbi1ibGtiYWNrL2Jsa2JhY2suYworKysg
Yi9kcml2ZXJzL2Jsb2NrL3hlbi1ibGtiYWNrL2Jsa2JhY2suYwpAQCAtNjU2LDggKzY1NiwxMSBA
QCBpbnQgeGVuX2Jsa2lmX3NjaGVkdWxlKHZvaWQgKmFyZykKIAkJCXJpbmctPm5leHRfbHJ1ID0g
amlmZmllcyArIG1zZWNzX3RvX2ppZmZpZXMoTFJVX0lOVEVSVkFMKTsKIAkJfQogCi0JCS8qIFNo
cmluayBpZiB3ZSBoYXZlIG1vcmUgdGhhbiB4ZW5fYmxraWZfbWF4X2J1ZmZlcl9wYWdlcyAqLwot
CQlzaHJpbmtfZnJlZV9wYWdlcG9vbChyaW5nLCB4ZW5fYmxraWZfbWF4X2J1ZmZlcl9wYWdlcyk7
CisJCS8qIFNocmluayB0aGUgZnJlZSBwYWdlcyBwb29sIGlmIGl0IGlzIHRvbyBsYXJnZS4gKi8K
KwkJaWYgKHRpbWVfYmVmb3JlKGppZmZpZXMsIGJsa2lmLT5idWZmZXJfc3F1ZWV6ZV9lbmQpKQor
CQkJc2hyaW5rX2ZyZWVfcGFnZXBvb2wocmluZywgMCk7CisJCWVsc2UKKwkJCXNocmlua19mcmVl
X3BhZ2Vwb29sKHJpbmcsIHhlbl9ibGtpZl9tYXhfYnVmZmVyX3BhZ2VzKTsKIAogCQlpZiAobG9n
X3N0YXRzICYmIHRpbWVfYWZ0ZXIoamlmZmllcywgcmluZy0+c3RfcHJpbnQpKQogCQkJcHJpbnRf
c3RhdHMocmluZyk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2Jsb2NrL3hlbi1ibGtiYWNrL2NvbW1v
bi5oIGIvZHJpdmVycy9ibG9jay94ZW4tYmxrYmFjay9jb21tb24uaAppbmRleCAxZDMwMDJkNzcz
ZjcuLjUzNmM4NGY2MWZlZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ibG9jay94ZW4tYmxrYmFjay9j
b21tb24uaAorKysgYi9kcml2ZXJzL2Jsb2NrL3hlbi1ibGtiYWNrL2NvbW1vbi5oCkBAIC0zMTks
NiArMzE5LDcgQEAgc3RydWN0IHhlbl9ibGtpZiB7CiAJLyogQWxsIHJpbmdzIGZvciB0aGlzIGRl
dmljZS4gKi8KIAlzdHJ1Y3QgeGVuX2Jsa2lmX3JpbmcJKnJpbmdzOwogCXVuc2lnbmVkIGludAkJ
bnJfcmluZ3M7CisJdW5zaWduZWQgbG9uZwkJYnVmZmVyX3NxdWVlemVfZW5kOwogfTsKIAogc3Ry
dWN0IHNlZ19idWYgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ibG9jay94ZW4tYmxrYmFjay94ZW5i
dXMuYyBiL2RyaXZlcnMvYmxvY2sveGVuLWJsa2JhY2sveGVuYnVzLmMKaW5kZXggYjkwZGJjZDk5
YzAzLi4yMDA0NTgyN2EzOTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvYmxvY2sveGVuLWJsa2JhY2sv
eGVuYnVzLmMKKysrIGIvZHJpdmVycy9ibG9jay94ZW4tYmxrYmFjay94ZW5idXMuYwpAQCAtNDky
LDYgKzQ5Miw3IEBAIHN0YXRpYyBpbnQgeGVuX3ZiZF9jcmVhdGUoc3RydWN0IHhlbl9ibGtpZiAq
YmxraWYsIGJsa2lmX3ZkZXZfdCBoYW5kbGUsCiBzdGF0aWMgaW50IHhlbl9ibGtia19yZW1vdmUo
c3RydWN0IHhlbmJ1c19kZXZpY2UgKmRldikKIHsKIAlzdHJ1Y3QgYmFja2VuZF9pbmZvICpiZSA9
IGRldl9nZXRfZHJ2ZGF0YSgmZGV2LT5kZXYpOworCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CiAKIAlw
cl9kZWJ1ZygiJXMgJXAgJWRcbiIsIF9fZnVuY19fLCBkZXYsIGRldi0+b3RoZXJlbmRfaWQpOwog
CkBAIC01MDQsNiArNTA1LDcgQEAgc3RhdGljIGludCB4ZW5fYmxrYmtfcmVtb3ZlKHN0cnVjdCB4
ZW5idXNfZGV2aWNlICpkZXYpCiAJCWJlLT5iYWNrZW5kX3dhdGNoLm5vZGUgPSBOVUxMOwogCX0K
IAorCXNwaW5fbG9ja19pcnFzYXZlKCZkZXYtPnJlY2xhaW1fbG9jaywgZmxhZ3MpOwogCWRldl9z
ZXRfZHJ2ZGF0YSgmZGV2LT5kZXYsIE5VTEwpOwogCiAJaWYgKGJlLT5ibGtpZikgewpAQCAtNTEy
LDYgKzUxNCw3IEBAIHN0YXRpYyBpbnQgeGVuX2Jsa2JrX3JlbW92ZShzdHJ1Y3QgeGVuYnVzX2Rl
dmljZSAqZGV2KQogCQkvKiBQdXQgdGhlIHJlZmVyZW5jZSB3ZSBzZXQgaW4geGVuX2Jsa2lmX2Fs
bG9jKCkuICovCiAJCXhlbl9ibGtpZl9wdXQoYmUtPmJsa2lmKTsKIAl9CisJc3Bpbl91bmxvY2tf
aXJxcmVzdG9yZSgmZGV2LT5yZWNsYWltX2xvY2ssIGZsYWdzKTsKIAogCXJldHVybiAwOwogfQpA
QCAtNTk3LDYgKzYwMCw3IEBAIHN0YXRpYyBpbnQgeGVuX2Jsa2JrX3Byb2JlKHN0cnVjdCB4ZW5i
dXNfZGV2aWNlICpkZXYsCiAJaW50IGVycjsKIAlzdHJ1Y3QgYmFja2VuZF9pbmZvICpiZSA9IGt6
YWxsb2Moc2l6ZW9mKHN0cnVjdCBiYWNrZW5kX2luZm8pLAogCQkJCQkgIEdGUF9LRVJORUwpOwor
CXVuc2lnbmVkIGxvbmcgZmxhZ3M7CiAKIAkvKiBtYXRjaCB0aGUgcHJfZGVidWcgaW4geGVuX2Js
a2JrX3JlbW92ZSAqLwogCXByX2RlYnVnKCIlcyAlcCAlZFxuIiwgX19mdW5jX18sIGRldiwgZGV2
LT5vdGhlcmVuZF9pZCk7CkBAIC02MDcsNiArNjExLDcgQEAgc3RhdGljIGludCB4ZW5fYmxrYmtf
cHJvYmUoc3RydWN0IHhlbmJ1c19kZXZpY2UgKmRldiwKIAkJcmV0dXJuIC1FTk9NRU07CiAJfQog
CWJlLT5kZXYgPSBkZXY7CisJc3Bpbl9sb2NrX2lycXNhdmUoJmRldi0+cmVjbGFpbV9sb2NrLCBm
bGFncyk7CiAJZGV2X3NldF9kcnZkYXRhKCZkZXYtPmRldiwgYmUpOwogCiAJYmUtPmJsa2lmID0g
eGVuX2Jsa2lmX2FsbG9jKGRldi0+b3RoZXJlbmRfaWQpOwpAQCAtNjE0LDggKzYxOSwxMCBAQCBz
dGF0aWMgaW50IHhlbl9ibGtia19wcm9iZShzdHJ1Y3QgeGVuYnVzX2RldmljZSAqZGV2LAogCQll
cnIgPSBQVFJfRVJSKGJlLT5ibGtpZik7CiAJCWJlLT5ibGtpZiA9IE5VTEw7CiAJCXhlbmJ1c19k
ZXZfZmF0YWwoZGV2LCBlcnIsICJjcmVhdGluZyBibG9jayBpbnRlcmZhY2UiKTsKKwkJc3Bpbl91
bmxvY2tfaXJxcmVzdG9yZSgmZGV2LT5yZWNsYWltX2xvY2ssIGZsYWdzKTsKIAkJZ290byBmYWls
OwogCX0KKwlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZkZXYtPnJlY2xhaW1fbG9jaywgZmxhZ3Mp
OwogCiAJZXJyID0geGVuYnVzX3ByaW50ZihYQlRfTklMLCBkZXYtPm5vZGVuYW1lLAogCQkJICAg
ICJmZWF0dXJlLW1heC1pbmRpcmVjdC1zZWdtZW50cyIsICIldSIsCkBAIC04MjQsNiArODMxLDI4
IEBAIHN0YXRpYyB2b2lkIGZyb250ZW5kX2NoYW5nZWQoc3RydWN0IHhlbmJ1c19kZXZpY2UgKmRl
diwKIH0KIAogCisvKiBPbmNlIGEgbWVtb3J5IHByZXNzdXJlIGlzIGRldGVjdGVkLCBzcXVlZXpl
IGZyZWUgcGFnZSBwb29scyBmb3IgYSB3aGlsZS4gKi8KK3N0YXRpYyB1bnNpZ25lZCBpbnQgYnVm
ZmVyX3NxdWVlemVfZHVyYXRpb25fbXMgPSAxMDsKK21vZHVsZV9wYXJhbV9uYW1lZChidWZmZXJf
c3F1ZWV6ZV9kdXJhdGlvbl9tcywKKwkJYnVmZmVyX3NxdWVlemVfZHVyYXRpb25fbXMsIGludCwg
MDY0NCk7CitNT0RVTEVfUEFSTV9ERVNDKGJ1ZmZlcl9zcXVlZXplX2R1cmF0aW9uX21zLAorIkR1
cmF0aW9uIGluIG1zIHRvIHNxdWVlemUgcGFnZXMgYnVmZmVyIHdoZW4gYSBtZW1vcnkgcHJlc3N1
cmUgaXMgZGV0ZWN0ZWQiKTsKKworLyoKKyAqIENhbGxiYWNrIHJlY2VpdmVkIHdoZW4gdGhlIG1l
bW9yeSBwcmVzc3VyZSBpcyBkZXRlY3RlZC4KKyAqLworc3RhdGljIHZvaWQgcmVjbGFpbV9tZW1v
cnkoc3RydWN0IHhlbmJ1c19kZXZpY2UgKmRldikKK3sKKwlzdHJ1Y3QgYmFja2VuZF9pbmZvICpi
ZSA9IGRldl9nZXRfZHJ2ZGF0YSgmZGV2LT5kZXYpOworCisJLyogRGV2aWNlIGlzIHJlZ2lzdGVy
ZWQgYnV0IG5vdCBwcm9iZWQgeWV0ICovCisJaWYgKCFiZSkKKwkJcmV0dXJuOworCisJYmUtPmJs
a2lmLT5idWZmZXJfc3F1ZWV6ZV9lbmQgPSBqaWZmaWVzICsKKwkJbXNlY3NfdG9famlmZmllcyhi
dWZmZXJfc3F1ZWV6ZV9kdXJhdGlvbl9tcyk7Cit9CisKIC8qICoqIENvbm5lY3Rpb24gKiogKi8K
IAogCkBAIC0xMTE1LDcgKzExNDQsOCBAQCBzdGF0aWMgc3RydWN0IHhlbmJ1c19kcml2ZXIgeGVu
X2Jsa2JrX2RyaXZlciA9IHsKIAkuaWRzICA9IHhlbl9ibGtia19pZHMsCiAJLnByb2JlID0geGVu
X2Jsa2JrX3Byb2JlLAogCS5yZW1vdmUgPSB4ZW5fYmxrYmtfcmVtb3ZlLAotCS5vdGhlcmVuZF9j
aGFuZ2VkID0gZnJvbnRlbmRfY2hhbmdlZAorCS5vdGhlcmVuZF9jaGFuZ2VkID0gZnJvbnRlbmRf
Y2hhbmdlZCwKKwkucmVjbGFpbV9tZW1vcnkgPSByZWNsYWltX21lbW9yeSwKIH07CiAKIGludCB4
ZW5fYmxraWZfeGVuYnVzX2luaXQodm9pZCkKLS0gCjIuMTcuMQoKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVu
LWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcv
bWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

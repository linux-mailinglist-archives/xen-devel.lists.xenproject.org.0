Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 275A287D7E
	for <lists+xen-devel@lfdr.de>; Fri,  9 Aug 2019 17:02:38 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hw6MV-0007bC-7k; Fri, 09 Aug 2019 14:59:23 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=yG4W=WF=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1hw6M5-0006ia-Uq
 for xen-devel@lists.xenproject.org; Fri, 09 Aug 2019 14:58:57 +0000
X-Inumbo-ID: 320972a6-bab6-11e9-8980-bc764e045a96
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 320972a6-bab6-11e9-8980-bc764e045a96;
 Fri, 09 Aug 2019 14:58:55 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 738CBB034;
 Fri,  9 Aug 2019 14:58:49 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Fri,  9 Aug 2019 16:58:17 +0200
Message-Id: <20190809145833.1020-33-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190809145833.1020-1-jgross@suse.com>
References: <20190809145833.1020-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH v2 32/48] xen/sched: modify
 cpupool_domain_cpumask() to be an unit mask
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Tim Deegan <tim@xen.org>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Dario Faggioli <dfaggioli@suse.com>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Y3B1cG9vbF9kb21haW5fY3B1bWFzaygpIGlzIHVzZWQgYnkgc2NoZWR1bGluZyB0byBzZWxlY3Qg
Y3B1cyBvciB0bwppdGVyYXRlIG92ZXIgY3B1cy4gSW4gb3JkZXIgdG8gc3VwcG9ydCBzY2hlZHVs
aW5nIHVuaXRzIHNwYW5uaW5nCm11bHRpcGxlIGNwdXMgbGV0IGNwdXBvb2xfZG9tYWluX2NwdW1h
c2soKSByZXR1cm4gYSBjcHVtYXNrIHdpdGggb25seQpvbmUgYml0IHNldCBwZXIgc2NoZWR1bGlu
ZyByZXNvdXJjZS4KClNpZ25lZC1vZmYtYnk6IEp1ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNv
bT4KLS0tCiB4ZW4vY29tbW9uL2NwdXBvb2wuYyAgICAgICB8IDI5ICsrKysrKysrKysrKysrKysr
KysrLS0tLS0tLS0tCiB4ZW4vY29tbW9uL3NjaGVkdWxlLmMgICAgICB8ICA1ICsrKy0tCiB4ZW4v
aW5jbHVkZS94ZW4vc2NoZWQtaWYuaCB8ICA1ICsrKystCiAzIGZpbGVzIGNoYW5nZWQsIDI3IGlu
c2VydGlvbnMoKyksIDEyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vY3B1
cG9vbC5jIGIveGVuL2NvbW1vbi9jcHVwb29sLmMKaW5kZXggZTBmOGVlYzU3Yi4uMTdkNjcxNTg1
YSAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9jcHVwb29sLmMKKysrIGIveGVuL2NvbW1vbi9jcHVw
b29sLmMKQEAgLTM4LDI2ICszOCwzNSBAQCBERUZJTkVfUEVSX0NQVShzdHJ1Y3QgY3B1cG9vbCAq
LCBjcHVwb29sKTsKIAogI2RlZmluZSBjcHVwb29sX2RwcmludGsoeC4uLikgKCh2b2lkKTApCiAK
K3N0YXRpYyB2b2lkIGZyZWVfY3B1cG9vbF9zdHJ1Y3Qoc3RydWN0IGNwdXBvb2wgKmMpCit7Cisg
ICAgaWYgKCBjICkKKyAgICB7CisgICAgICAgIGZyZWVfY3B1bWFza192YXIoYy0+cmVzX3ZhbGlk
KTsKKyAgICAgICAgZnJlZV9jcHVtYXNrX3ZhcihjLT5jcHVfdmFsaWQpOworICAgIH0KKyAgICB4
ZnJlZShjKTsKK30KKwogc3RhdGljIHN0cnVjdCBjcHVwb29sICphbGxvY19jcHVwb29sX3N0cnVj
dCh2b2lkKQogewogICAgIHN0cnVjdCBjcHVwb29sICpjID0geHphbGxvYyhzdHJ1Y3QgY3B1cG9v
bCk7CiAKLSAgICBpZiAoICFjIHx8ICF6YWxsb2NfY3B1bWFza192YXIoJmMtPmNwdV92YWxpZCkg
KQorICAgIGlmICggIWMgKQorICAgICAgICByZXR1cm4gTlVMTDsKKworICAgIHphbGxvY19jcHVt
YXNrX3ZhcigmYy0+Y3B1X3ZhbGlkKTsKKyAgICB6YWxsb2NfY3B1bWFza192YXIoJmMtPnJlc192
YWxpZCk7CisKKyAgICBpZiAoICFjLT5jcHVfdmFsaWQgfHwgIWMtPnJlc192YWxpZCApCiAgICAg
ewotICAgICAgICB4ZnJlZShjKTsKKyAgICAgICAgZnJlZV9jcHVwb29sX3N0cnVjdChjKTsKICAg
ICAgICAgYyA9IE5VTEw7CiAgICAgfQogCiAgICAgcmV0dXJuIGM7CiB9CiAKLXN0YXRpYyB2b2lk
IGZyZWVfY3B1cG9vbF9zdHJ1Y3Qoc3RydWN0IGNwdXBvb2wgKmMpCi17Ci0gICAgaWYgKCBjICkK
LSAgICAgICAgZnJlZV9jcHVtYXNrX3ZhcihjLT5jcHVfdmFsaWQpOwotICAgIHhmcmVlKGMpOwot
fQotCiAvKgogICogZmluZCBhIGNwdXBvb2wgYnkgaXQncyBpZC4gdG8gYmUgY2FsbGVkIHdpdGgg
Y3B1cG9vbCBsb2NrIGhlbGQKICAqIGlmIGV4YWN0IGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBmaXJz
dCBjcHVwb29sIHdpdGggYW4gaWQgbGFyZ2VyIG9yIGVxdWFsIHRvCkBAIC0yNzEsNiArMjgwLDcg
QEAgc3RhdGljIGludCBjcHVwb29sX2Fzc2lnbl9jcHVfbG9ja2VkKHN0cnVjdCBjcHVwb29sICpj
LCB1bnNpZ25lZCBpbnQgY3B1KQogICAgICAgICBjcHVwb29sX2NwdV9tb3ZpbmcgPSBOVUxMOwog
ICAgIH0KICAgICBjcHVtYXNrX3NldF9jcHUoY3B1LCBjLT5jcHVfdmFsaWQpOworICAgIGNwdW1h
c2tfYW5kKGMtPnJlc192YWxpZCwgYy0+Y3B1X3ZhbGlkLCBzY2hlZF9yZXNfbWFzayk7CiAKICAg
ICByY3VfcmVhZF9sb2NrKCZkb21saXN0X3JlYWRfbG9jayk7CiAgICAgZm9yX2VhY2hfZG9tYWlu
X2luX2NwdXBvb2woZCwgYykKQEAgLTM2NSw2ICszNzUsNyBAQCBzdGF0aWMgaW50IGNwdXBvb2xf
dW5hc3NpZ25fY3B1X3Byb2xvZ3VlKHN0cnVjdCBjcHVwb29sICpjLCB1bnNpZ25lZCBpbnQgY3B1
KQogICAgIGF0b21pY19pbmMoJmMtPnJlZmNudCk7CiAgICAgY3B1cG9vbF9jcHVfbW92aW5nID0g
YzsKICAgICBjcHVtYXNrX2NsZWFyX2NwdShjcHUsIGMtPmNwdV92YWxpZCk7CisgICAgY3B1bWFz
a19hbmQoYy0+cmVzX3ZhbGlkLCBjLT5jcHVfdmFsaWQsIHNjaGVkX3Jlc19tYXNrKTsKIAogb3V0
OgogICAgIHNwaW5fdW5sb2NrKCZjcHVwb29sX2xvY2spOwpkaWZmIC0tZ2l0IGEveGVuL2NvbW1v
bi9zY2hlZHVsZS5jIGIveGVuL2NvbW1vbi9zY2hlZHVsZS5jCmluZGV4IDFmNDVmYzczNzMuLmJi
YzllYjkwZTQgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vc2NoZWR1bGUuYworKysgYi94ZW4vY29t
bW9uL3NjaGVkdWxlLmMKQEAgLTU3LDYgKzU3LDcgQEAgaW50ZWdlcl9wYXJhbSgic2NoZWRfcmF0
ZWxpbWl0X3VzIiwgc2NoZWRfcmF0ZWxpbWl0X3VzKTsKIAogLyogTnVtYmVyIG9mIHZjcHVzIHBl
ciBzdHJ1Y3Qgc2NoZWRfdW5pdC4gKi8KIHN0YXRpYyB1bnNpZ25lZCBpbnQgX19yZWFkX21vc3Rs
eSBzY2hlZF9ncmFudWxhcml0eSA9IDE7Citjb25zdCBjcHVtYXNrX3QgKnNjaGVkX3Jlc19tYXNr
ID0gJmNwdW1hc2tfYWxsOwogCiAvKiBDb21tb24gbG9jayBmb3IgZnJlZSBjcHVzLiAqLwogc3Rh
dGljIERFRklORV9TUElOTE9DSyhzY2hlZF9mcmVlX2NwdV9sb2NrKTsKQEAgLTQxMCw5ICs0MTEs
OSBAQCBzdGF0aWMgdW5zaWduZWQgaW50IHNjaGVkX3NlbGVjdF9pbml0aWFsX2NwdShjb25zdCBz
dHJ1Y3QgdmNwdSAqdikKICAgICBjcHVtYXNrX2NsZWFyKGNwdXMpOwogICAgIGZvcl9lYWNoX25v
ZGVfbWFzayAoIG5vZGUsIGQtPm5vZGVfYWZmaW5pdHkgKQogICAgICAgICBjcHVtYXNrX29yKGNw
dXMsIGNwdXMsICZub2RlX3RvX2NwdW1hc2sobm9kZSkpOwotICAgIGNwdW1hc2tfYW5kKGNwdXMs
IGNwdXMsIGNwdXBvb2xfZG9tYWluX2NwdW1hc2soZCkpOworICAgIGNwdW1hc2tfYW5kKGNwdXMs
IGNwdXMsIGQtPmNwdXBvb2wtPmNwdV92YWxpZCk7CiAgICAgaWYgKCBjcHVtYXNrX2VtcHR5KGNw
dXMpICkKLSAgICAgICAgY3B1bWFza19jb3B5KGNwdXMsIGNwdXBvb2xfZG9tYWluX2NwdW1hc2so
ZCkpOworICAgICAgICBjcHVtYXNrX2NvcHkoY3B1cywgZC0+Y3B1cG9vbC0+Y3B1X3ZhbGlkKTsK
IAogICAgIGlmICggdi0+dmNwdV9pZCA9PSAwICkKICAgICAgICAgY3B1X3JldCA9IGNwdW1hc2tf
Zmlyc3QoY3B1cyk7CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS94ZW4vc2NoZWQtaWYuaCBiL3hl
bi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oCmluZGV4IGUxZDYxYTA1YjcuLmFlNDZiNTM5NWYgMTAw
NjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oCisrKyBiL3hlbi9pbmNsdWRlL3hl
bi9zY2hlZC1pZi5oCkBAIC0yMiw2ICsyMiw4IEBAIGV4dGVybiBjcHVtYXNrX3QgY3B1cG9vbF9m
cmVlX2NwdXM7CiAjZGVmaW5lIFNDSEVEX0RFRkFVTFRfUkFURUxJTUlUX1VTIDEwMDAKIGV4dGVy
biBpbnQgc2NoZWRfcmF0ZWxpbWl0X3VzOwogCisvKiBTY2hlZHVsaW5nIHJlc291cmNlIG1hc2su
ICovCitleHRlcm4gY29uc3QgY3B1bWFza190ICpzY2hlZF9yZXNfbWFzazsKIAogLyoKICAqIElu
IG9yZGVyIHRvIGFsbG93IGEgc2NoZWR1bGVyIHRvIHJlbWFwIHRoZSBsb2NrLT5jcHUgbWFwcGlu
ZywKQEAgLTUyMCw2ICs1MjIsNyBAQCBzdHJ1Y3QgY3B1cG9vbAogICAgIGludCAgICAgICAgICAg
ICAgY3B1cG9vbF9pZDsKICAgICB1bnNpZ25lZCBpbnQgICAgIG5fZG9tOwogICAgIGNwdW1hc2tf
dmFyX3QgICAgY3B1X3ZhbGlkOyAgICAgIC8qIGFsbCBjcHVzIGFzc2lnbmVkIHRvIHBvb2wgKi8K
KyAgICBjcHVtYXNrX3Zhcl90ICAgIHJlc192YWxpZDsgICAgICAvKiBhbGwgc2NoZWR1bGluZyBy
ZXNvdXJjZXMgb2YgcG9vbCAqLwogICAgIHN0cnVjdCBjcHVwb29sICAgKm5leHQ7CiAgICAgc3Ry
dWN0IHNjaGVkdWxlciAqc2NoZWQ7CiAgICAgYXRvbWljX3QgICAgICAgICByZWZjbnQ7CkBAIC01
MzUsNyArNTM4LDcgQEAgc3RhdGljIGlubGluZSBjcHVtYXNrX3QqIGNwdXBvb2xfZG9tYWluX2Nw
dW1hc2soY29uc3Qgc3RydWN0IGRvbWFpbiAqZCkKICAgICAgKiBiZSBpbnRlcmVzdGVkIGluIGNh
bGxpbmcgdGhpcyBmb3IgdGhlIGlkbGUgZG9tYWluLgogICAgICAqLwogICAgIEFTU0VSVChkLT5j
cHVwb29sICE9IE5VTEwpOwotICAgIHJldHVybiBkLT5jcHVwb29sLT5jcHVfdmFsaWQ7CisgICAg
cmV0dXJuIGQtPmNwdXBvb2wtPnJlc192YWxpZDsKIH0KIAogLyoKLS0gCjIuMTYuNAoKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWls
aW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVu
cHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

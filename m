Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2CE4D13162A
	for <lists+xen-devel@lfdr.de>; Mon,  6 Jan 2020 17:37:10 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ioVLT-0000sw-1m; Mon, 06 Jan 2020 16:35:11 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=5DW6=23=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1ioVLQ-0000se-Ua
 for xen-devel@lists.xenproject.org; Mon, 06 Jan 2020 16:35:08 +0000
X-Inumbo-ID: 7fe1a1d4-30a2-11ea-ab33-12813bfff9fa
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 7fe1a1d4-30a2-11ea-ab33-12813bfff9fa;
 Mon, 06 Jan 2020 16:35:08 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id 663BDABE9;
 Mon,  6 Jan 2020 16:35:07 +0000 (UTC)
From: Jan Beulich <jbeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
References: <6f167053-38dc-19b5-a873-321d978e9a59@suse.com>
Message-ID: <5e702563-7cf9-ed29-6aba-5fbbc97d6b06@suse.com>
Date: Mon, 6 Jan 2020 17:35:53 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.1
MIME-Version: 1.0
In-Reply-To: <6f167053-38dc-19b5-a873-321d978e9a59@suse.com>
Content-Language: en-US
Subject: [Xen-devel] [PATCH v3 3/8] x86emul: support MOVDIRI insn
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>, Wei Liu <wl@xen.org>,
 Roger Pau Monne <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Tm90ZSB0aGF0IFNETSByZXZpc2lvbiAwNzAgZG9lc24ndCBzcGVjaWZ5IGV4Y2VwdGlvbiBiZWhh
dmlvciBmb3IKTW9kUk0ubW9kICE9IDBiMTE7IGFzc3VtaW5nICNVRCBoZXJlLgoKU2lnbmVkLW9m
Zi1ieTogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgotLS0KdjQ6IFNwbGl0IE1PVkRJ
UkkgYW5kIE1PVkRJUjY0Qi4gUmUtYmFzZS4KdjM6IFVwZGF0ZSBkZXNjcmlwdGlvbi4KCi0tLSBh
L3Rvb2xzL3Rlc3RzL3g4Nl9lbXVsYXRvci90ZXN0X3g4Nl9lbXVsYXRvci5jCisrKyBiL3Rvb2xz
L3Rlc3RzL3g4Nl9lbXVsYXRvci90ZXN0X3g4Nl9lbXVsYXRvci5jCkBAIC0yMTk2LDYgKzIxOTYs
MTggQEAgaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKiphcmd2KQogICAgICAgICBnb3RvIGZhaWw7
CiAgICAgcHJpbnRmKCJva2F5XG4iKTsKIAorICAgIHByaW50ZigiJS00MHMiLCAiVGVzdGluZyBt
b3ZkaXJpICVlZHgsKCVlY3gpLi4uIik7CisgICAgaW5zdHJbMF0gPSAweDBmOyBpbnN0clsxXSA9
IDB4Mzg7IGluc3RyWzJdID0gMHhmOTsgaW5zdHJbM10gPSAweDExOworICAgIHJlZ3MuZWlwID0g
KHVuc2lnbmVkIGxvbmcpJmluc3RyWzBdOworICAgIHJlZ3MuZWN4ID0gKHVuc2lnbmVkIGxvbmcp
bWVtc2V0KHJlcywgLTEsIDE2KTsKKyAgICByZWdzLmVkeCA9IDB4NDQzMzIyMTE7CisgICAgcmMg
PSB4ODZfZW11bGF0ZSgmY3R4dCwgJmVtdWxvcHMpOworICAgIGlmICggKHJjICE9IFg4NkVNVUxf
T0tBWSkgfHwKKyAgICAgICAgIChyZWdzLmVpcCAhPSAodW5zaWduZWQgbG9uZykmaW5zdHJbNF0p
IHx8CisgICAgICAgICByZXNbMF0gIT0gMHg0NDMzMjIxMSB8fCB+cmVzWzFdICkKKyAgICAgICAg
Z290byBmYWlsOworICAgIHByaW50Zigib2theVxuIik7CisKICAgICBwcmludGYoIiUtNDBzIiwg
IlRlc3RpbmcgbW92cSAlbW0zLCglZWN4KS4uLiIpOwogICAgIGlmICggc3RhY2tfZXhlYyAmJiBj
cHVfaGFzX21teCApCiAgICAgewotLS0gYS90b29scy90ZXN0cy94ODZfZW11bGF0b3IveDg2LWVt
dWxhdGUuYworKysgYi90b29scy90ZXN0cy94ODZfZW11bGF0b3IveDg2LWVtdWxhdGUuYwpAQCAt
NzYsNiArNzYsNyBAQCBib29sIGVtdWxfdGVzdF9pbml0KHZvaWQpCiAgICAgY3AuZmVhdC5hZHgg
PSB0cnVlOwogICAgIGNwLmZlYXQuYXZ4NTEycGYgPSBjcC5mZWF0LmF2eDUxMmY7CiAgICAgY3Au
ZmVhdC5yZHBpZCA9IHRydWU7CisgICAgY3AuZmVhdC5tb3ZkaXJpID0gdHJ1ZTsKICAgICBjcC5l
eHRkLmNsemVybyA9IHRydWU7CiAKICAgICBpZiAoIGNwdV9oYXNfeHNhdmUgKQpAQCAtMTM3LDE1
ICsxMzgsMTUgQEAgaW50IGVtdWxfdGVzdF9jcHVpZCgKICAgICAgICAgcmVzLT5jIHw9IDFVIDw8
IDIyOwogCiAgICAgLyoKLSAgICAgKiBUaGUgZW11bGF0b3IgZG9lc24ndCBpdHNlbGYgdXNlIEFE
Q1gvQURPWC9SRFBJRCBub3IgdGhlIFMvRyBwcmVmZXRjaAotICAgICAqIGluc25zLCBzbyB3ZSBj
YW4gYWx3YXlzIHJ1biB0aGUgcmVzcGVjdGl2ZSB0ZXN0cy4KKyAgICAgKiBUaGUgZW11bGF0b3Ig
ZG9lc24ndCBpdHNlbGYgdXNlIEFEQ1gvQURPWC9SRFBJRC9NT1ZESVJJIG5vciB0aGUgUy9HCisg
ICAgICogcHJlZmV0Y2ggaW5zbnMsIHNvIHdlIGNhbiBhbHdheXMgcnVuIHRoZSByZXNwZWN0aXZl
IHRlc3RzLgogICAgICAqLwogICAgIGlmICggbGVhZiA9PSA3ICYmIHN1YmxlYWYgPT0gMCApCiAg
ICAgewogICAgICAgICByZXMtPmIgfD0gKDFVIDw8IDEwKSB8ICgxVSA8PCAxOSk7CiAgICAgICAg
IGlmICggcmVzLT5iICYgKDFVIDw8IDE2KSApCiAgICAgICAgICAgICByZXMtPmIgfD0gMVUgPDwg
MjY7Ci0gICAgICAgIHJlcy0+YyB8PSAxVSA8PCAyMjsKKyAgICAgICAgcmVzLT5jIHw9ICgxVSA8
PCAyMikgfCAoMVUgPDwgMjcpOwogICAgIH0KIAogICAgIC8qCi0tLSBhL3hlbi9hcmNoL3g4Ni94
ODZfZW11bGF0ZS94ODZfZW11bGF0ZS5jCisrKyBiL3hlbi9hcmNoL3g4Ni94ODZfZW11bGF0ZS94
ODZfZW11bGF0ZS5jCkBAIC01NDgsNiArNTQ4LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBleHQw
ZjM4X3RhYmxlIHsKICAgICBbMHhmMV0gPSB7IC50b19tZW0gPSAxLCAudHdvX29wID0gMSB9LAog
ICAgIFsweGYyIC4uLiAweGYzXSA9IHt9LAogICAgIFsweGY1IC4uLiAweGY3XSA9IHt9LAorICAg
IFsweGY5XSA9IHsgLnRvX21lbSA9IDEgfSwKIH07CiAKIC8qIFNoaWZ0IHZhbHVlcyBiZXR3ZWVu
IHNyYyBhbmQgZHN0IHNpemVzIG9mIHBtb3Z7cyx6fXh7Yix3LGR9e3csZCxxfS4gKi8KQEAgLTE5
MDIsNiArMTkwMyw3IEBAIGluX3Byb3Rtb2RlKAogI2RlZmluZSB2Y3B1X2hhc19hdng1MTJfYml0
YWxnKCkgKGN0eHQtPmNwdWlkLT5mZWF0LmF2eDUxMl9iaXRhbGcpCiAjZGVmaW5lIHZjcHVfaGFz
X2F2eDUxMl92cG9wY250ZHEoKSAoY3R4dC0+Y3B1aWQtPmZlYXQuYXZ4NTEyX3Zwb3BjbnRkcSkK
ICNkZWZpbmUgdmNwdV9oYXNfcmRwaWQoKSAgICAgICAoY3R4dC0+Y3B1aWQtPmZlYXQucmRwaWQp
CisjZGVmaW5lIHZjcHVfaGFzX21vdmRpcmkoKSAgICAgKGN0eHQtPmNwdWlkLT5mZWF0Lm1vdmRp
cmkpCiAjZGVmaW5lIHZjcHVfaGFzX2F2eDUxMl80dm5uaXcoKSAoY3R4dC0+Y3B1aWQtPmZlYXQu
YXZ4NTEyXzR2bm5pdykKICNkZWZpbmUgdmNwdV9oYXNfYXZ4NTEyXzRmbWFwcygpIChjdHh0LT5j
cHVpZC0+ZmVhdC5hdng1MTJfNGZtYXBzKQogCkBAIC0yNzEyLDEwICsyNzE0LDEyIEBAIHg4Nl9k
ZWNvZGVfMGYzOCgKICAgICB7CiAgICAgY2FzZSAweDAwIC4uLiAweGVmOgogICAgIGNhc2UgMHhm
MiAuLi4gMHhmNToKLSAgICBjYXNlIDB4ZjcgLi4uIDB4ZmY6CisgICAgY2FzZSAweGY3IC4uLiAw
eGY4OgorICAgIGNhc2UgMHhmYSAuLi4gMHhmZjoKICAgICAgICAgb3BfYnl0ZXMgPSAwOwogICAg
ICAgICAvKiBmYWxsIHRocm91Z2ggKi8KICAgICBjYXNlIDB4ZjY6IC8qIGFkY3ggLyBhZG94ICov
CisgICAgY2FzZSAweGY5OiAvKiBtb3ZkaXJpICovCiAgICAgICAgIGN0eHQtPm9wY29kZSB8PSBN
QVNLX0lOU1IodmV4LnBmeCwgWDg2RU1VTF9PUENfUEZYX01BU0spOwogICAgICAgICBicmVhazsK
IApAQCAtOTkxNSw2ICs5OTE5LDE0IEBAIHg4Nl9lbXVsYXRlKAogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIDogIjAiICgodWludDMyX3Qpc3JjLnZhbCksICJybSIgKF9yZWdzLmVkeCkgKTsK
ICAgICAgICAgYnJlYWs7CiAKKyAgICBjYXNlIFg4NkVNVUxfT1BDKDB4MGYzOCwgMHhmOSk6IC8q
IG1vdmRpcmkgbWVtLHIgKi8KKyAgICAgICAgdmNwdV9tdXN0X2hhdmUobW92ZGlyaSk7CisgICAg
ICAgIGdlbmVyYXRlX2V4Y2VwdGlvbl9pZihkc3QudHlwZSAhPSBPUF9NRU0sIEVYQ19VRCk7Cisg
ICAgICAgIC8qIElnbm9yZSB0aGUgbm9uLXRlbXBvcmFsIGJlaGF2aW9yIGZvciBub3cuICovCisg
ICAgICAgIGRzdC52YWwgPSBzcmMudmFsOworICAgICAgICBzZmVuY2UgPSB0cnVlOworICAgICAg
ICBicmVhazsKKwogICAgIGNhc2UgWDg2RU1VTF9PUENfVkVYXzY2KDB4MGYzYSwgMHgwMCk6IC8q
IHZwZXJtcSAkaW1tOCx5bW0vbTI1Nix5bW0gKi8KICAgICBjYXNlIFg4NkVNVUxfT1BDX1ZFWF82
NigweDBmM2EsIDB4MDEpOiAvKiB2cGVybXBkICRpbW04LHltbS9tMjU2LHltbSAqLwogICAgICAg
ICBnZW5lcmF0ZV9leGNlcHRpb25faWYoIXZleC5sIHx8ICF2ZXgudywgRVhDX1VEKTsKLS0tIGEv
eGVuL2luY2x1ZGUvcHVibGljL2FyY2gteDg2L2NwdWZlYXR1cmVzZXQuaAorKysgYi94ZW4vaW5j
bHVkZS9wdWJsaWMvYXJjaC14ODYvY3B1ZmVhdHVyZXNldC5oCkBAIC0yMzcsNiArMjM3LDcgQEAg
WEVOX0NQVUZFQVRVUkUoQVZYNTEyX0JJVEFMRywgNiozMisxMikgLwogWEVOX0NQVUZFQVRVUkUo
QVZYNTEyX1ZQT1BDTlREUSwgNiozMisxNCkgLypBICBQT1BDTlQgZm9yIHZlY3RvcnMgb2YgRFcv
UVcgKi8KIFhFTl9DUFVGRUFUVVJFKFJEUElELCAgICAgICAgIDYqMzIrMjIpIC8qQSAgUkRQSUQg
aW5zdHJ1Y3Rpb24gKi8KIFhFTl9DUFVGRUFUVVJFKENMREVNT1RFLCAgICAgIDYqMzIrMjUpIC8q
QSAgQ0xERU1PVEUgaW5zdHJ1Y3Rpb24gKi8KK1hFTl9DUFVGRUFUVVJFKE1PVkRJUkksICAgICAg
IDYqMzIrMjcpIC8qQSAgTU9WRElSSSBpbnN0cnVjdGlvbiAqLwogCiAvKiBBTUQtZGVmaW5lZCBD
UFUgZmVhdHVyZXMsIENQVUlEIGxldmVsIDB4ODAwMDAwMDcuZWR4LCB3b3JkIDcgKi8KIFhFTl9D
UFVGRUFUVVJFKElUU0MsICAgICAgICAgIDcqMzIrIDgpIC8qICAgSW52YXJpYW50IFRTQyAqLwoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVs
IG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0
cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

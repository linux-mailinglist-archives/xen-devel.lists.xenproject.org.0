Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2EE6C883B5
	for <lists+xen-devel@lfdr.de>; Fri,  9 Aug 2019 22:13:42 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hwBDn-00040y-AW; Fri, 09 Aug 2019 20:10:43 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=5OiB=WF=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hwBDm-00040t-AV
 for xen-devel@lists.xen.org; Fri, 09 Aug 2019 20:10:42 +0000
X-Inumbo-ID: c2eaffb5-bae1-11e9-8980-bc764e045a96
Received: from foss.arm.com (unknown [217.140.110.172])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTP
 id c2eaffb5-bae1-11e9-8980-bc764e045a96;
 Fri, 09 Aug 2019 20:10:41 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 1842C1596;
 Fri,  9 Aug 2019 13:10:41 -0700 (PDT)
Received: from [10.37.8.74] (unknown [10.37.8.74])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id BC7803F706;
 Fri,  9 Aug 2019 13:10:39 -0700 (PDT)
To: Stefano Stabellini <sstabellini@kernel.org>
References: <alpine.DEB.2.21.1908081609510.22196@sstabellini-ThinkPad-T480s>
 <20190808231242.26424-3-sstabellini@kernel.org>
From: Julien Grall <julien.grall@arm.com>
Message-ID: <17051895-1517-94b5-7ab9-4fb802251d8f@arm.com>
Date: Fri, 9 Aug 2019 21:10:38 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190808231242.26424-3-sstabellini@kernel.org>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v3 3/6] xen/arm: assign devices to boot
 domains
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Volodymyr_Babchuk@epam.com, Achin.Gupta@arm.com, andrii_anisov@epam.com,
 Stefano Stabellini <stefanos@xilinx.com>, xen-devel@lists.xen.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGkgU3RlZmFubywKCk9uIDgvOS8xOSAxMjoxMiBBTSwgU3RlZmFubyBTdGFiZWxsaW5pIHdyb3Rl
Ogo+IFNjYW4gdGhlIHVzZXIgcHJvdmlkZWQgZHRiIGZyYWdtZW50IGF0IGJvb3QuIEZvciBlYWNo
IGRldmljZSBub2RlLCBtYXAKPiBtZW1vcnkgdG8gZ3Vlc3RzLCBhbmQgcm91dGUgaW50ZXJydXB0
cyBhbmQgc2V0dXAgdGhlIGlvbW11Lgo+IAo+IFRoZSBpb21tdSBpcyBzZXR1cCBieSBwYXNzaW5n
IHRoZSBub2RlIG9mIHRoZSBkZXZpY2UgdG8gYXNzaWduIG9uIHRoZQo+IGhvc3QgZGV2aWNlIHRy
ZWUuIFRoZSBwYXRoIGlzIHNwZWNpZmllZCBpbiB0aGUgZGV2aWNlIHRyZWUgZnJhZ21lbnQgYXMK
PiB0aGUgInhlbixwYXRoIiBzdHJpbmcgcHJvcGVydHkuCj4gCj4gVGhlIG1lbW9yeSByZWdpb24g
dG8gcmVtYXAgaXMgc3BlY2lmaWVkIGJ5IHRoZSAieGVuLHJlZyIgcHJvcGVydHkuCj4gKFBlcmhh
cHMgaXQgbWlnaHQgYmUgcG9zc2libGUgdG8gdXNlICJyYW5nZSIgaW5zdGVhZCBvZiAieGVuLHJl
Z3MiLiBUaGlzCgpzL3hlbixyZWdzL3hlbixyZWcvCgpCdXQgSSBkb24ndCBzZWUgaG93IHlvdSBj
b3VsZCB1c2UgcmFuZ2UgaGVyZS4uLiBUaGlzIGlzIGZvciB0cmFuc2xhdGlvbiAKYWRkcmVzcyBi
ZXR3ZWVuIHR3byBhZGRyZXNzLXNwYWNlLgoKPiBpcyBzb21ldGhpbmcgdG8gaW52ZXN0aWdhdGUu
KQo+IAo+IFRoZSBpbnRlcnJ1cHRzIGFyZSB0YWtlbiBmcm9tIHRoZSBob3N0IGRldmljZSB0cmVl
IGNvcnJlc3BvbmRpbmcgbm9kZS4KPiBUbyBtYXAgdGhlIGludGVycnVwdCBjYWxsIGhhbmRsZV9p
bnRlcnJ1cHRzLCB3aGljaCBpcyBzaGFyZWQgd2l0aCB0aGUKPiBleGlzdGluZyBkb20wIHBhdGgu
Cj4gCj4gQWRkIGEgaW50ZXJydXB0LXBhcmVudCBwcm9wZXJ0eSBhdXRvbWF0aWNhbGx5IHRvIHRo
ZSBndWVzdCBkZXZpY2UgdHJlZQo+IHdoZW4gdGhlIGludGVycnVwdC1wYXJlbnQgc2hvdWxkIGJl
IHRoZSBHSUMuIENvcHkgb3ZlciB0aGUgaW50ZXJydXB0Cj4gcHJvcGVydHkgZnJvbSB0aGUgaG9z
dCBkZXZpY2UgdHJlZSBub2RlLgo+IAo+IFNpZ25lZC1vZmYtYnk6IFN0ZWZhbm8gU3RhYmVsbGlu
aSA8c3RlZmFub3NAeGlsaW54LmNvbT4KPiAtLS0KPiBDaGFuZ2VzIGluIHYzOgo+IC0gaW1wcm92
ZSBjb21taXQgbWVzc2FnZQo+IC0gcmVtb3ZlIHN1cGVyZmx1b3VzIGNhc3QKPiAtIG1lcmdlIGNv
ZGUgd2l0aCB0aGUgY29weSBjb2RlCj4gLSBhZGQgaW50ZXJydXAtcGFyZW50Cj4gLSBkZW1vdmUg
ZGVwdGggPiAyIGNoZWNrCj4gLSByZXVzZSBjb2RlIGZyb20gaGFuZGxlX2ludGVycnVwdHMKPiAt
IGNvcHkgaW50ZXJydXB0cyBmcm9tIGhvc3QgZHQKPiAKPiBDaGFuZ2VzIGluIHYyOgo+IC0gcmVu
YW1lICJwYXRoIiB0byAieGVuLHBhdGgiCj4gLSBncmFtbWFyIGZpeAo+IC0gdXNlIGdhZGRyX3Rv
X2dmbiBhbmQgbWFkZHJfdG9fbWZuCj4gLSByZW1vdmUgZGVwdGggPD0gMiBsaW1pdGF0aW9uIGlu
IHNjYW5uaW5nIHRoZSBkdGIgZnJhZ21lbnQKPiAtIGludHJvZHVjZSBhbmQgcGFyc2UgeGVuLHJl
Zwo+IC0gY29kZSBzdHlsZQo+IC0gc3VwcG9ydCBtb3JlIHRoYW4gb25lIGludGVycnVwdCBwZXIg
ZGV2aWNlCj4gLSBzcGVjaWZ5IG9ubHkgdGhlIEdJQyBpcyBzdXBwb3J0ZWQKPiAtLS0KPiAgIHhl
bi9hcmNoL2FybS9kb21haW5fYnVpbGQuYyB8IDY2ICsrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysKPiAgIDEgZmlsZSBjaGFuZ2VkLCA2NiBpbnNlcnRpb25zKCspCj4gCj4gZGlm
ZiAtLWdpdCBhL3hlbi9hcmNoL2FybS9kb21haW5fYnVpbGQuYyBiL3hlbi9hcmNoL2FybS9kb21h
aW5fYnVpbGQuYwo+IGluZGV4IDcwYmNkYzQ0OWQuLjAwNTdhNTA5ZDEgMTAwNjQ0Cj4gLS0tIGEv
eGVuL2FyY2gvYXJtL2RvbWFpbl9idWlsZC5jCj4gKysrIGIveGVuL2FyY2gvYXJtL2RvbWFpbl9i
dWlsZC5jCj4gQEAgLTE3MTIsNiArMTcxMiw5IEBAIHN0YXRpYyBpbnQgX19pbml0IGhhbmRsZV9w
cm9wZXJ0aWVzKHN0cnVjdCBkb21haW4gKmQsIHZvaWQgKmZkdCwgY29uc3Qgdm9pZCAqcGZkCj4g
ICB7Cj4gICAgICAgaW50IHByb3BvZmYsIG5hbWVvZmYsIHI7Cj4gICAgICAgY29uc3Qgc3RydWN0
IGZkdF9wcm9wZXJ0eSAqcHJvcDsKPiArICAgIHN0cnVjdCBkdF9kZXZpY2Vfbm9kZSAqbm9kZTsK
PiArICAgIGNvbnN0IF9fYmUzMiAqY2VsbDsKPiArICAgIGludCBpLCBsZW47CgpBZ2FpbiBhbnkg
dmFyaWFibGUgdGhhdCBjYW4ndCBiZSBuZWdhdGl2ZSBzaG91bGQgYmUgdW5zaWduZWQuCgo+ICAg
Cj4gICAgICAgZm9yICggcHJvcG9mZiA9IGZkdF9maXJzdF9wcm9wZXJ0eV9vZmZzZXQocGZkdCwg
bm9kZW9mZik7Cj4gICAgICAgICAgICAgcHJvcG9mZiA+PSAwOwo+IEBAIC0xNzI2LDYgKzE3Mjks
NjkgQEAgc3RhdGljIGludCBfX2luaXQgaGFuZGxlX3Byb3BlcnRpZXMoc3RydWN0IGRvbWFpbiAq
ZCwgdm9pZCAqZmR0LCBjb25zdCB2b2lkICpwZmQKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwcm9wLT5kYXRhLCBmZHQzMl90b19jcHUocHJvcC0+bGVuKSk7Cj4gICAgICAgICAgIGlmICgg
ciApCj4gICAgICAgICAgICAgICByZXR1cm4gcjsKPiArCj4gKyAgICAgICAgaWYgKCBzdHJjbXAo
InhlbixyZWciLCBmZHRfc3RyaW5nKHBmZHQsIG5hbWVvZmYpKSA9PSAwICkKClRoaXMgc2hvdWxk
IGJlIGR0X3Byb3BfY21wLiBCdXQgdGhpcyBwcm9wZXJ0eSBzaG91bGQgbm90IGJlIHBhcnQgb2Yg
dGhlIApndWVzdCBEVEIgYWZ0ZXJ3YXJkcy4KCkxhc3RseSwgYSBiaXQgb2YgZG9jdW1lbnRhdGlv
biB3b3VsZCBiZSBuaWNlLgoKPiArICAgICAgICB7Cj4gKyAgICAgICAgICAgIHBhZGRyX3QgbXN0
YXJ0LCBzaXplLCBnc3RhcnQ7Cj4gKyAgICAgICAgICAgIGNlbGwgPSAoY29uc3QgX19iZTMyICop
cHJvcC0+ZGF0YTsKPiArICAgICAgICAgICAgbGVuID0gZmR0MzJfdG9fY3B1KHByb3AtPmxlbikg
Lwo+ICsgICAgICAgICAgICAgICAgKChhZGRyZXNzX2NlbGxzKjIgKyBzaXplX2NlbGxzKSAqIHNp
emVvZiAodTMyKSk7Cj4gKwo+ICsgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsr
ICkKPiArICAgICAgICAgICAgewo+ICsgICAgICAgICAgICAgICAgbXN0YXJ0ID0gZHRfbmV4dF9j
ZWxsKGFkZHJlc3NfY2VsbHMsICZjZWxsKTsKPiArICAgICAgICAgICAgICAgIHNpemUgPSBkdF9u
ZXh0X2NlbGwoc2l6ZV9jZWxscywgJmNlbGwpOwoKUGxlYXNlIHVzZSBkZXZpY2VfZ2V0X3JlZyBo
ZXJlLgoKPiArICAgICAgICAgICAgICAgIGdzdGFydCA9IGR0X25leHRfY2VsbChhZGRyZXNzX2Nl
bGxzLCAmY2VsbCk7Cj4gKwo+ICsgICAgICAgICAgICAgICAgciA9IGd1ZXN0X3BoeXNtYXBfYWRk
X2VudHJ5KGQsIGdhZGRyX3RvX2dmbihnc3RhcnQpLAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICBtYWRkcl90b19tZm4obXN0YXJ0KSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X29y
ZGVyX2Zyb21fYnl0ZXMoc2l6ZSksCj4gKyAgICAgICAgICAgICAgICAgICAgICAgIHAybV9tbWlv
X2RpcmVjdF9kZXYpOwoKVGhlIGluZGVudGF0aW9uIGlzIHdyb25nLgoKPiArICAgICAgICAgICAg
ICAgIGlmICggciA8IDAgKQo+ICsgICAgICAgICAgICAgICAgewo+ICsgICAgICAgICAgICAgICAg
ICAgIGRwcmludGsoWEVOTE9HX0VSUiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICJG
YWlsZWQgdG8gbWFwICUiUFJJcGFkZHIiIHRvIHRoZSBndWVzdCBhdCUiUFJJcGFkZHIiXG4iLAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXN0YXJ0LCBnc3RhcnQpOwo+ICsgICAgICAg
ICAgICAgICAgICAgIHJldHVybiAtRUZBVUxUOwo+ICsgICAgICAgICAgICAgICAgfQo+ICsgICAg
ICAgICAgICB9Cj4gKyAgICAgICAgfQo+ICsKPiArICAgICAgICBpZiAoIHN0cmNtcCgieGVuLHBh
dGgiLCBmZHRfc3RyaW5nKHBmZHQsIG5hbWVvZmYpKSA9PSAwICkKClNhbWUgcmVtYXJrIGFzIGZv
ciAieGVuLHJlZyIuCgo+ICsgICAgICAgIHsKPiArICAgICAgICAgICAgbm9kZSA9IGR0X2ZpbmRf
bm9kZV9ieV9wYXRoKHByb3AtPmRhdGEpOwo+ICsgICAgICAgICAgICBpZiAoIG5vZGUgIT0gTlVM
TCApCj4gKyAgICAgICAgICAgICAgICByID0gaW9tbXVfYXNzaWduX2R0X2RldmljZShkLCBub2Rl
KTsKPiArICAgICAgICAgICAgZWxzZQo+ICsgICAgICAgICAgICB7Cj4gKyAgICAgICAgICAgICAg
ICBkcHJpbnRrKFhFTkxPR19FUlIsICJDb3VsZG4ndCBmaW5kIG5vZGUgJXMgaW4gaG9zdF9kdCFc
biIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgIChjaGFyICopcHJvcC0+ZGF0YSk7Cj4gKyAg
ICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiArICAgICAgICAgICAgfQo+ICsKPiArICAg
ICAgICAgICAgciA9IGhhbmRsZV9pbnRlcnJ1cHRzKGQsIG5vZGUsIHRydWUpOwo+ICsgICAgICAg
ICAgICBpZiAoIHIgPCAwICkKPiArICAgICAgICAgICAgICAgIHJldHVybiByOwo+ICsgICAgICAg
ICAgICBpZiAoIHIgPiAwICkKPiArICAgICAgICAgICAgewo+ICsgICAgICAgICAgICAgICAgdW5z
aWduZWQgaW50IGludGxlbjsKPiArICAgICAgICAgICAgICAgIGNvbnN0IHUzMiogaW50c3BlYzsK
CkkgZG9uJ3QgdGhpbmsgdGhlIGNvZGUgYmVsb3cgaXMgY29ycmVjdC4gRm9yIGEgZmlyc3QsIHlv
dXIgCmltcGxlbWVudGF0aW9uIG9mIGhhbmRsZV9pbnRlcnJ1cHRzIGlzIG5vdCByaWdodCAoc2Vl
IG15IGNvbW1lbnRzIG9uIHRoZSAKcGF0Y2ggd2hlcmUgeW91IGFkZGVkIHRoZSBmdW5jdGlvbiku
IFRoZW4geW91IG1heSBiZSBoZXJlIGV2ZW4gaWYgbm8gCmludGVycnVwdHMgcHJvcGVydHkuIFNv
IHRoZSBjb2RlIGJlbG93IHdpbGwgZmFpbCB0byBjb3B5IHRob3NlIG5vZGVzLgoKPiArCj4gKyAg
ICAgICAgICAgICAgICAvKiBnZW5lcmF0ZSBpbnRlcnJ1cHQtcGFyZW50IHRvIHBvaW50IHRvIHRo
ZSB2aXJ0dWFsIEdJQyAqLwo+ICsgICAgICAgICAgICAgICAgciA9IGZkdF9wcm9wZXJ0eV91MzIo
ZmR0LCAiaW50ZXJydXB0LXBhcmVudCIsIEdVRVNUX1BIQU5ETEVfR0lDKTsKIEZyb20geW91ciBp
bXBsZW1lbnRhdGlvbiBvZiBoYW5kbGVfaW50ZXJydXB0cygpLCB0aGVyZSBhcmUgbm8gcHJvbWlz
ZSAKeW91IHdvdWxkIGJlIGhlcmUgd2l0aCBqdXN0IGEgR0lDIGludGVycnVwdHMuIFlvdSBtYXkg
YWxzbyBuZWVkIHRvIGNvcHkgCmFueSBpbnRlcnJ1cHRzIHByb3BlcnR5IGZvciBub2RlIHRoYXQg
ZG9lcyBub3QgYmVsb25nIHRvIHRoZSBHSUMuCgo+ICsgICAgICAgICAgICAgICAgaWYgKCByICkK
PiArICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjsKPiArCj4gKyAgICAgICAgICAgICAgICAv
KiBjb3B5IGludGVycnVwdHMvaW50ZXJydXB0cy1leHRlbmRlZCBmcm9tIHRoZSBob3N0IERUIG5v
ZGUgKi8KPiArICAgICAgICAgICAgICAgIGludHNwZWMgPSBkdF9nZXRfcHJvcGVydHkobm9kZSwg
ImludGVycnVwdHMiLCAmaW50bGVuKTsKPiArICAgICAgICAgICAgICAgIGlmICggaW50c3BlYyA9
PSBOVUxMICkKPiArICAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVGQVVMVDsKCllvdSBkb24n
dCBoYW5kbGUgaW50ZXJydXB0cy1leHRlbmRlZCBub3IgaW50ZXJydXB0LW1hcHBpbmcuCgo+ICsK
PiArICAgICAgICAgICAgICAgIHIgPSBmZHRfcHJvcGVydHkoZmR0LCAiaW50ZXJydXB0cyIsIGlu
dHNwZWMsIGludGxlbik7Cj4gKyAgICAgICAgICAgICAgICBpZiAoIHIgKQo+ICsgICAgICAgICAg
ICAgICAgICAgIHJldHVybiByOwo+ICsgICAgICAgICAgICB9Cj4gKyAgICAgICAgfQo+ICAgICAg
IH0KPiAgIAo+ICAgICAgIC8qIEZEVF9FUlJfTk9URk9VTkQgPT4gVGhlcmUgaXMgbm8gbW9yZSBw
cm9wZXJ0aWVzIGZvciB0aGlzIG5vZGUgKi8KPiAKCkNoZWVycywKCi0tIApKdWxpZW4gR3JhbGwK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZl
bCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlz
dHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

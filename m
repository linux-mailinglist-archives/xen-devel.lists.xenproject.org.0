Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2A4F18325D
	for <lists+xen-devel@lfdr.de>; Tue,  6 Aug 2019 15:10:50 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1huzBx-0003Km-Tx; Tue, 06 Aug 2019 13:07:53 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=jalH=WC=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1huzBw-0003Kf-Dk
 for xen-devel@lists.xenproject.org; Tue, 06 Aug 2019 13:07:52 +0000
X-Inumbo-ID: 30a2163c-b84b-11e9-b758-e34a03656de9
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 30a2163c-b84b-11e9-b758-e34a03656de9;
 Tue, 06 Aug 2019 13:07:49 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 9E428B636;
 Tue,  6 Aug 2019 13:07:48 +0000 (UTC)
From: Jan Beulich <jbeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
References: <5a4d4a61-a543-c657-8458-cbc6b5a8a633@suse.com>
Message-ID: <c22bdec4-7394-2a1e-b160-eaf9f6ce3e0f@suse.com>
Date: Tue, 6 Aug 2019 15:07:48 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <5a4d4a61-a543-c657-8458-cbc6b5a8a633@suse.com>
Content-Language: en-US
Subject: [Xen-devel] [PATCH v5 01/10] AMD/IOMMU: miscellaneous DTE handling
 adjustments
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 Brian Woods <brian.woods@amd.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Rmlyc3QgYW5kIGZvcmVtb3N0IHN3aXRjaCBib29sZWFuIGZpZWxkcyB0byBib29sLiBBZGp1c3Qg
YSBmZXcgcmVsYXRlZApmdW5jdGlvbiBwYXJhbWV0ZXJzIGFzIHdlbGwuIFRoZW4KLSBpbiBhbWRf
aW9tbXVfc2V0X2ludHJlbWFwX3RhYmxlKCkgZG9uJ3QgdXNlIGxpdGVyYWwgbnVtYmVycywKLSBp
biBpb21tdV9kdGVfYWRkX2RldmljZV9lbnRyeSgpIHVzZSBhIGNvbXBvdW5kIGxpdGVyYWwgaW5z
dGVhZCBvZiBtYW55CiAgIGFzc2lnbm1lbnRzLAotIGluIGFtZF9pb21tdV9zZXR1cF9kb21haW5f
ZGV2aWNlKCkKICAgLSBlbGltaW5hdGUgYSBwb2ludGxlc3MgbG9jYWwgdmFyaWFibGUsCiAgIC0g
dXNlIHx8IGluc3RlYWQgb2YgJiYgd2hlbiBkZWNpZGluZyB3aGV0aGVyIHRvIGNsZWFyIGFuIGVu
dHJ5LAogICAtIGNsZWFyIHRoZSBJIGZpZWxkIHdpdGhvdXQgYW55IGNoZWNraW5nIG9mIEFUUyAv
IElPVExCIHN0YXRlLAotIGxlYXZlIHJlc2VydmVkIGZpZWxkcyB1bm5hbWVkLgoKU2lnbmVkLW9m
Zi1ieTogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgpBY2tlZC1ieTogQW5kcmV3IENv
b3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KLS0tCnY1OiBJT01NVV9JTlRSRU1BUF9M
RU5HVEggLT4gSU9NTVVfSU5UUkVNQVBfT1JERVIuIEFkanVzdCBjb21tZW50Lgp2NDogTmV3LgoK
LS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2ludHIuYworKysgYi94ZW4v
ZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfaW50ci5jCkBAIC02OSw4ICs2OSw3IEBAIHVu
aW9uIGlydGVfY3B0ciB7CiAgICAgIGNvbnN0IHVuaW9uIGlydGUxMjggKnB0cjEyODsKICB9IF9f
dHJhbnNwYXJlbnRfXzsKICAKLSNkZWZpbmUgSU5UUkVNQVBfTEVOR1RIIDB4QgotI2RlZmluZSBJ
TlRSRU1BUF9FTlRSSUVTICgxIDw8IElOVFJFTUFQX0xFTkdUSCkKKyNkZWZpbmUgSU5UUkVNQVBf
RU5UUklFUyAoMSA8PCBJT01NVV9JTlRSRU1BUF9PUkRFUikKICAKICBzdHJ1Y3QgaW9hcGljX3Ni
ZGYgaW9hcGljX3NiZGZbTUFYX0lPX0FQSUNTXTsKICBzdHJ1Y3QgaHBldF9zYmRmIGhwZXRfc2Jk
ZjsKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X21hcC5jCisrKyBiL3hl
bi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9tYXAuYwpAQCAtMTAxLDUxICsxMDEsNTIg
QEAgc3RhdGljIHVuc2lnbmVkIGludCBzZXRfaW9tbXVfcHRlX3ByZXNlbgogIAogIHZvaWQgYW1k
X2lvbW11X3NldF9yb290X3BhZ2VfdGFibGUoc3RydWN0IGFtZF9pb21tdV9kdGUgKmR0ZSwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IHJvb3RfcHRyLCB1aW50
MTZfdCBkb21haW5faWQsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ4
X3QgcGFnaW5nX21vZGUsIHVpbnQ4X3QgdmFsaWQpCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHVpbnQ4X3QgcGFnaW5nX21vZGUsIGJvb2wgdmFsaWQpCiAgewogICAgICBkdGUt
PmRvbWFpbl9pZCA9IGRvbWFpbl9pZDsKICAgICAgZHRlLT5wdF9yb290ID0gcGFkZHJfdG9fcGZu
KHJvb3RfcHRyKTsKLSAgICBkdGUtPml3ID0gMTsKLSAgICBkdGUtPmlyID0gMTsKKyAgICBkdGUt
Pml3ID0gdHJ1ZTsKKyAgICBkdGUtPmlyID0gdHJ1ZTsKICAgICAgZHRlLT5wYWdpbmdfbW9kZSA9
IHBhZ2luZ19tb2RlOwotICAgIGR0ZS0+dHYgPSAxOworICAgIGR0ZS0+dHYgPSB0cnVlOwogICAg
ICBkdGUtPnYgPSB2YWxpZDsKICB9CiAgCiAgdm9pZCBfX2luaXQgYW1kX2lvbW11X3NldF9pbnRy
ZW1hcF90YWJsZSgKLSAgICBzdHJ1Y3QgYW1kX2lvbW11X2R0ZSAqZHRlLCB1aW50NjRfdCBpbnRy
ZW1hcF9wdHIsIHVpbnQ4X3QgaW50X3ZhbGlkKQorICAgIHN0cnVjdCBhbWRfaW9tbXVfZHRlICpk
dGUsIHVpbnQ2NF90IGludHJlbWFwX3B0ciwgYm9vbCB2YWxpZCkKICB7CiAgICAgIGR0ZS0+aXRf
cm9vdCA9IGludHJlbWFwX3B0ciA+PiA2OwotICAgIGR0ZS0+aW50X3RhYl9sZW4gPSAweGI7IC8q
IDIwNDggZW50cmllcyAqLwotICAgIGR0ZS0+aW50X2N0bCA9IDI7IC8qIGZpeGVkIGFuZCBhcmJp
dHJhdGVkIGludGVycnVwdHMgcmVtYXBwZWQgKi8KLSAgICBkdGUtPmlnID0gMDsgLyogdW5tYXBw
ZWQgaW50ZXJydXB0IHJlc3VsdHMgaW8gcGFnZSBmYXVsdHMgKi8KLSAgICBkdGUtPml2ID0gaW50
X3ZhbGlkOworICAgIGR0ZS0+aW50X3RhYl9sZW4gPSBJT01NVV9JTlRSRU1BUF9PUkRFUjsKKyAg
ICBkdGUtPmludF9jdGwgPSBJT01NVV9ERVZfVEFCTEVfSU5UX0NPTlRST0xfVFJBTlNMQVRFRDsK
KyAgICBkdGUtPmlnID0gZmFsc2U7IC8qIHVubWFwcGVkIGludGVycnVwdHMgcmVzdWx0IGluIGkv
byBwYWdlIGZhdWx0cyAqLworICAgIGR0ZS0+aXYgPSB2YWxpZDsKICB9CiAgCiAgdm9pZCBfX2lu
aXQgaW9tbXVfZHRlX2FkZF9kZXZpY2VfZW50cnkoc3RydWN0IGFtZF9pb21tdV9kdGUgKmR0ZSwK
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBpdnJzX21hcHBp
bmdzICppdnJzX2RldikKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNv
bnN0IHN0cnVjdCBpdnJzX21hcHBpbmdzICppdnJzX2RldikKICB7CiAgICAgIHVpbnQ4X3QgZmxh
Z3MgPSBpdnJzX2Rldi0+ZGV2aWNlX2ZsYWdzOwogIAotICAgIG1lbXNldChkdGUsIDAsIHNpemVv
ZigqZHRlKSk7Ci0KLSAgICBkdGUtPmluaXRfcGFzcyA9IE1BU0tfRVhUUihmbGFncywgQUNQSV9J
VkhEX0lOSVRfUEFTUyk7Ci0gICAgZHRlLT5leHRfaW50X3Bhc3MgPSBNQVNLX0VYVFIoZmxhZ3Ms
IEFDUElfSVZIRF9FSU5UX1BBU1MpOwotICAgIGR0ZS0+bm1pX3Bhc3MgPSBNQVNLX0VYVFIoZmxh
Z3MsIEFDUElfSVZIRF9OTUlfUEFTUyk7Ci0gICAgZHRlLT5saW50MF9wYXNzID0gTUFTS19FWFRS
KGZsYWdzLCBBQ1BJX0lWSERfTElOVDBfUEFTUyk7Ci0gICAgZHRlLT5saW50MV9wYXNzID0gTUFT
S19FWFRSKGZsYWdzLCBBQ1BJX0lWSERfTElOVDFfUEFTUyk7Ci0gICAgZHRlLT5zeXNfbWd0ID0g
TUFTS19FWFRSKGZsYWdzLCBBQ1BJX0lWSERfU1lTVEVNX01HTVQpOwotICAgIGR0ZS0+ZXggPSBp
dnJzX2Rldi0+ZHRlX2FsbG93X2V4Y2x1c2lvbjsKKyAgICAqZHRlID0gKHN0cnVjdCBhbWRfaW9t
bXVfZHRlKXsKKyAgICAgICAgLmluaXRfcGFzcyA9IGZsYWdzICYgQUNQSV9JVkhEX0lOSVRfUEFT
UywKKyAgICAgICAgLmV4dF9pbnRfcGFzcyA9IGZsYWdzICYgQUNQSV9JVkhEX0VJTlRfUEFTUywK
KyAgICAgICAgLm5taV9wYXNzID0gZmxhZ3MgJiBBQ1BJX0lWSERfTk1JX1BBU1MsCisgICAgICAg
IC5saW50MF9wYXNzID0gZmxhZ3MgJiBBQ1BJX0lWSERfTElOVDBfUEFTUywKKyAgICAgICAgLmxp
bnQxX3Bhc3MgPSBmbGFncyAmIEFDUElfSVZIRF9MSU5UMV9QQVNTLAorICAgICAgICAuaW9jdGwg
PSBJT01NVV9ERVZfVEFCTEVfSU9fQ09OVFJPTF9BQk9SVEVELAorICAgICAgICAuc3lzX21ndCA9
IE1BU0tfRVhUUihmbGFncywgQUNQSV9JVkhEX1NZU1RFTV9NR01UKSwKKyAgICAgICAgLmV4ID0g
aXZyc19kZXYtPmR0ZV9hbGxvd19leGNsdXNpb24sCisgICAgfTsKICB9CiAgCiAgdm9pZCBpb21t
dV9kdGVfc2V0X2d1ZXN0X2NyMyhzdHJ1Y3QgYW1kX2lvbW11X2R0ZSAqZHRlLCB1aW50MTZfdCBk
b21faWQsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IGdjcjNfbWZuLCB1
aW50OF90IGd2LCB1aW50OF90IGdseCkKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlu
dDY0X3QgZ2NyM19tZm4sIGJvb2wgZ3YsIHVpbnQ4X3QgZ2x4KQogIHsKICAjZGVmaW5lIEdDUjNf
TUFTSyhoaSwgbG8pICgoKDF1bCA8PCAoKGhpKSArIDEpKSAtIDEpICYgfigoMXVsIDw8IChsbykp
IC0gMSkpCiAgI2RlZmluZSBHQ1IzX1NISUZUKGxvKSAoKGxvKSAtIFBBR0VfU0hJRlQpCiAgCiAg
ICAgIC8qIEkgYml0IG11c3QgYmUgc2V0IHdoZW4gZ2NyMyBpcyBlbmFibGVkICovCi0gICAgZHRl
LT5pID0gMTsKKyAgICBkdGUtPmkgPSB0cnVlOwogIAogICAgICBkdGUtPmdjcjNfdHJwXzE0XzEy
ID0gKGdjcjNfbWZuICYgR0NSM19NQVNLKDE0LCAxMikpID4+IEdDUjNfU0hJRlQoMTIpOwogICAg
ICBkdGUtPmdjcjNfdHJwXzMwXzE1ID0gKGdjcjNfbWZuICYgR0NSM19NQVNLKDMwLCAxNSkpID4+
IEdDUjNfU0hJRlQoMTUpOwotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvcGNpX2Ft
ZF9pb21tdS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9wY2lfYW1kX2lvbW11
LmMKQEAgLTkzLDcgKzkzLDYgQEAgc3RhdGljIHZvaWQgYW1kX2lvbW11X3NldHVwX2RvbWFpbl9k
ZXZpYwogICAgICBzdHJ1Y3QgYW1kX2lvbW11X2R0ZSAqdGFibGUsICpkdGU7CiAgICAgIHVuc2ln
bmVkIGxvbmcgZmxhZ3M7CiAgICAgIGludCByZXFfaWQsIHZhbGlkID0gMTsKLSAgICBpbnQgZHRl
X2kgPSAwOwogICAgICB1OCBidXMgPSBwZGV2LT5idXM7CiAgICAgIGNvbnN0IHN0cnVjdCBkb21h
aW5faW9tbXUgKmhkID0gZG9tX2lvbW11KGRvbWFpbik7CiAgCkBAIC0xMDMsOSArMTAyLDYgQEAg
c3RhdGljIHZvaWQgYW1kX2lvbW11X3NldHVwX2RvbWFpbl9kZXZpYwogICAgICBpZiAoIGlvbW11
X2h3ZG9tX3Bhc3N0aHJvdWdoICYmIGlzX2hhcmR3YXJlX2RvbWFpbihkb21haW4pICkKICAgICAg
ICAgIHZhbGlkID0gMDsKICAKLSAgICBpZiAoIGF0c19lbmFibGVkICkKLSAgICAgICAgZHRlX2kg
PSAxOwotCiAgICAgIC8qIGdldCBkZXZpY2UtdGFibGUgZW50cnkgKi8KICAgICAgcmVxX2lkID0g
Z2V0X2RtYV9yZXF1ZXN0b3JfaWQoaW9tbXUtPnNlZywgUENJX0JERjIoYnVzLCBkZXZmbikpOwog
ICAgICB0YWJsZSA9IGlvbW11LT5kZXZfdGFibGUuYnVmZmVyOwpAQCAtMTIyLDcgKzExOCw3IEBA
IHN0YXRpYyB2b2lkIGFtZF9pb21tdV9zZXR1cF9kb21haW5fZGV2aWMKICAKICAgICAgICAgIGlm
ICggcGNpX2F0c19kZXZpY2UoaW9tbXUtPnNlZywgYnVzLCBwZGV2LT5kZXZmbikgJiYKICAgICAg
ICAgICAgICAgaW9tbXVfaGFzX2NhcChpb21tdSwgUENJX0NBUF9JT1RMQl9TSElGVCkgKQotICAg
ICAgICAgICAgZHRlLT5pID0gZHRlX2k7CisgICAgICAgICAgICBkdGUtPmkgPSBhdHNfZW5hYmxl
ZDsKICAKICAgICAgICAgIGFtZF9pb21tdV9mbHVzaF9kZXZpY2UoaW9tbXUsIHJlcV9pZCk7CiAg
CkBAIC0yODgsMTQgKzI4NCwxMSBAQCB2b2lkIGFtZF9pb21tdV9kaXNhYmxlX2RvbWFpbl9kZXZp
Y2Uoc3RyCiAgICAgIGR0ZSA9ICZ0YWJsZVtyZXFfaWRdOwogIAogICAgICBzcGluX2xvY2tfaXJx
c2F2ZSgmaW9tbXUtPmxvY2ssIGZsYWdzKTsKLSAgICBpZiAoIGR0ZS0+dHYgJiYgZHRlLT52ICkK
KyAgICBpZiAoIGR0ZS0+dHYgfHwgZHRlLT52ICkKICAgICAgewotICAgICAgICBkdGUtPnR2ID0g
MDsKLSAgICAgICAgZHRlLT52ID0gMDsKLQotICAgICAgICBpZiAoIHBjaV9hdHNfZGV2aWNlKGlv
bW11LT5zZWcsIGJ1cywgcGRldi0+ZGV2Zm4pICYmCi0gICAgICAgICAgICAgaW9tbXVfaGFzX2Nh
cChpb21tdSwgUENJX0NBUF9JT1RMQl9TSElGVCkgKQotICAgICAgICAgICAgZHRlLT5pID0gMDsK
KyAgICAgICAgZHRlLT50diA9IGZhbHNlOworICAgICAgICBkdGUtPnYgPSBmYWxzZTsKKyAgICAg
ICAgZHRlLT5pID0gZmFsc2U7CiAgCiAgICAgICAgICBhbWRfaW9tbXVfZmx1c2hfZGV2aWNlKGlv
bW11LCByZXFfaWQpOwogIAotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlv
bW11LWRlZnMuaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LWRl
ZnMuaApAQCAtMTA3LDU3ICsxMDcsNjAgQEAKICAjZGVmaW5lIElPTU1VX0RFVl9UQUJMRV9JTlRf
Q09OVFJPTF9GT1JXQVJERUQJMHgxCiAgI2RlZmluZSBJT01NVV9ERVZfVEFCTEVfSU5UX0NPTlRS
T0xfVFJBTlNMQVRFRAkweDIKICAKKy8qIEZvciBub3csIHdlIGFsd2F5cyBhbGxvY2F0ZSB0aGUg
bWF4aW11bTogMjA0OCBlbnRyaWVzLiAqLworI2RlZmluZSBJT01NVV9JTlRSRU1BUF9PUkRFUgkJ
CTB4QgorCiAgc3RydWN0IGFtZF9pb21tdV9kdGUgewogICAgICAvKiAwIC0gNjMgKi8KLSAgICB1
aW50NjRfdCB2OjE7Ci0gICAgdWludDY0X3QgdHY6MTsKLSAgICB1aW50NjRfdCByZXNlcnZlZDA6
NTsKLSAgICB1aW50NjRfdCBoYWQ6MjsKLSAgICB1aW50NjRfdCBwYWdpbmdfbW9kZTozOworICAg
IGJvb2wgdjoxOworICAgIGJvb2wgdHY6MTsKKyAgICB1bnNpZ25lZCBpbnQgOjU7CisgICAgdW5z
aWduZWQgaW50IGhhZDoyOworICAgIHVuc2lnbmVkIGludCBwYWdpbmdfbW9kZTozOwogICAgICB1
aW50NjRfdCBwdF9yb290OjQwOwotICAgIHVpbnQ2NF90IHBwcjoxOwotICAgIHVpbnQ2NF90IGdw
cnA6MTsKLSAgICB1aW50NjRfdCBnaW92OjE7Ci0gICAgdWludDY0X3QgZ3Y6MTsKLSAgICB1aW50
NjRfdCBnbHg6MjsKLSAgICB1aW50NjRfdCBnY3IzX3RycF8xNF8xMjozOwotICAgIHVpbnQ2NF90
IGlyOjE7Ci0gICAgdWludDY0X3QgaXc6MTsKLSAgICB1aW50NjRfdCByZXNlcnZlZDE6MTsKKyAg
ICBib29sIHBwcjoxOworICAgIGJvb2wgZ3BycDoxOworICAgIGJvb2wgZ2lvdjoxOworICAgIGJv
b2wgZ3Y6MTsKKyAgICB1bnNpZ25lZCBpbnQgZ2x4OjI7CisgICAgdW5zaWduZWQgaW50IGdjcjNf
dHJwXzE0XzEyOjM7CisgICAgYm9vbCBpcjoxOworICAgIGJvb2wgaXc6MTsKKyAgICB1bnNpZ25l
ZCBpbnQgOjE7CiAgCiAgICAgIC8qIDY0IC0gMTI3ICovCi0gICAgdWludDY0X3QgZG9tYWluX2lk
OjE2OwotICAgIHVpbnQ2NF90IGdjcjNfdHJwXzMwXzE1OjE2OwotICAgIHVpbnQ2NF90IGk6MTsK
LSAgICB1aW50NjRfdCBzZToxOwotICAgIHVpbnQ2NF90IHNhOjE7Ci0gICAgdWludDY0X3QgaW9j
dGw6MjsKLSAgICB1aW50NjRfdCBjYWNoZToxOwotICAgIHVpbnQ2NF90IHNkOjE7Ci0gICAgdWlu
dDY0X3QgZXg6MTsKLSAgICB1aW50NjRfdCBzeXNfbWd0OjI7Ci0gICAgdWludDY0X3QgcmVzZXJ2
ZWQyOjE7Ci0gICAgdWludDY0X3QgZ2NyM190cnBfNTFfMzE6MjE7CisgICAgdW5zaWduZWQgaW50
IGRvbWFpbl9pZDoxNjsKKyAgICB1bnNpZ25lZCBpbnQgZ2NyM190cnBfMzBfMTU6MTY7CisgICAg
Ym9vbCBpOjE7CisgICAgYm9vbCBzZToxOworICAgIGJvb2wgc2E6MTsKKyAgICB1bnNpZ25lZCBp
bnQgaW9jdGw6MjsKKyAgICBib29sIGNhY2hlOjE7CisgICAgYm9vbCBzZDoxOworICAgIGJvb2wg
ZXg6MTsKKyAgICB1bnNpZ25lZCBpbnQgc3lzX21ndDoyOworICAgIHVuc2lnbmVkIGludCA6MTsK
KyAgICB1bnNpZ25lZCBpbnQgZ2NyM190cnBfNTFfMzE6MjE7CiAgCiAgICAgIC8qIDEyOCAtIDE5
MSAqLwotICAgIHVpbnQ2NF90IGl2OjE7Ci0gICAgdWludDY0X3QgaW50X3RhYl9sZW46NDsKLSAg
ICB1aW50NjRfdCBpZzoxOworICAgIGJvb2wgaXY6MTsKKyAgICB1bnNpZ25lZCBpbnQgaW50X3Rh
Yl9sZW46NDsKKyAgICBib29sIGlnOjE7CiAgICAgIHVpbnQ2NF90IGl0X3Jvb3Q6NDY7Ci0gICAg
dWludDY0X3QgcmVzZXJ2ZWQzOjQ7Ci0gICAgdWludDY0X3QgaW5pdF9wYXNzOjE7Ci0gICAgdWlu
dDY0X3QgZXh0X2ludF9wYXNzOjE7Ci0gICAgdWludDY0X3Qgbm1pX3Bhc3M6MTsKLSAgICB1aW50
NjRfdCByZXNlcnZlZDQ6MTsKLSAgICB1aW50NjRfdCBpbnRfY3RsOjI7Ci0gICAgdWludDY0X3Qg
bGludDBfcGFzczoxOwotICAgIHVpbnQ2NF90IGxpbnQxX3Bhc3M6MTsKKyAgICB1bnNpZ25lZCBp
bnQgOjQ7CisgICAgYm9vbCBpbml0X3Bhc3M6MTsKKyAgICBib29sIGV4dF9pbnRfcGFzczoxOwor
ICAgIGJvb2wgbm1pX3Bhc3M6MTsKKyAgICB1bnNpZ25lZCBpbnQgOjE7CisgICAgdW5zaWduZWQg
aW50IGludF9jdGw6MjsKKyAgICBib29sIGxpbnQwX3Bhc3M6MTsKKyAgICBib29sIGxpbnQxX3Bh
c3M6MTsKICAKICAgICAgLyogMTkyIC0gMjU1ICovCi0gICAgdWludDY0X3QgcmVzZXJ2ZWQ1OjU0
OwotICAgIHVpbnQ2NF90IGF0dHJfdjoxOwotICAgIHVpbnQ2NF90IG1vZGUwX2ZjOjE7Ci0gICAg
dWludDY0X3Qgc25vb3BfYXR0cjo4OworICAgIHVpbnQ2NF90IDo1NDsKKyAgICBib29sIGF0dHJf
djoxOworICAgIGJvb2wgbW9kZTBfZmM6MTsKKyAgICB1bnNpZ25lZCBpbnQgc25vb3BfYXR0cjo4
OwogIH07CiAgCiAgLyogQ29tbWFuZCBCdWZmZXIgKi8KLS0tIGEveGVuL2luY2x1ZGUvYXNtLXg4
Ni9odm0vc3ZtL2FtZC1pb21tdS1wcm90by5oCisrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvaHZt
L3N2bS9hbWQtaW9tbXUtcHJvdG8uaApAQCAtNzMsMTQgKzczLDE0IEBAIGludCBfX211c3RfY2hl
Y2sgYW1kX2lvbW11X2ZsdXNoX2lvdGxiX2EKICBpbnQgZ2V0X2RtYV9yZXF1ZXN0b3JfaWQodWlu
dDE2X3Qgc2VnLCB1aW50MTZfdCBiZGYpOwogIHZvaWQgYW1kX2lvbW11X3NldF9pbnRyZW1hcF90
YWJsZShzdHJ1Y3QgYW1kX2lvbW11X2R0ZSAqZHRlLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB1aW50NjRfdCBpbnRyZW1hcF9wdHIsCi0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdWludDhfdCBpbnRfdmFsaWQpOworICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGJvb2wgdmFsaWQpOwogIHZvaWQgYW1kX2lvbW11X3NldF9yb290X3BhZ2VfdGFi
bGUoc3RydWN0IGFtZF9pb21tdV9kdGUgKmR0ZSwKICAJCQkJICAgdWludDY0X3Qgcm9vdF9wdHIs
IHVpbnQxNl90IGRvbWFpbl9pZCwKLQkJCQkgICB1aW50OF90IHBhZ2luZ19tb2RlLCB1aW50OF90
IHZhbGlkKTsKKwkJCQkgICB1aW50OF90IHBhZ2luZ19tb2RlLCBib29sIHZhbGlkKTsKICB2b2lk
IGlvbW11X2R0ZV9hZGRfZGV2aWNlX2VudHJ5KHN0cnVjdCBhbWRfaW9tbXVfZHRlICpkdGUsCi0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBpdnJzX21hcHBpbmdzICppdnJz
X2Rldik7CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBpdnJz
X21hcHBpbmdzICppdnJzX2Rldik7CiAgdm9pZCBpb21tdV9kdGVfc2V0X2d1ZXN0X2NyMyhzdHJ1
Y3QgYW1kX2lvbW11X2R0ZSAqZHRlLCB1aW50MTZfdCBkb21faWQsCi0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHVpbnQ2NF90IGdjcjNfbWZuLCB1aW50OF90IGd2LCB1aW50OF90IGdseCk7
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IGdjcjNfbWZuLCBib29sIGd2
LCB1aW50OF90IGdseCk7CiAgCiAgLyogc2VuZCBjbWQgdG8gaW9tbXUgKi8KICB2b2lkIGFtZF9p
b21tdV9mbHVzaF9hbGxfcGFnZXMoc3RydWN0IGRvbWFpbiAqZCk7CgoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApY
ZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

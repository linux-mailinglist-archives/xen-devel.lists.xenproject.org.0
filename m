Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2EFB119856
	for <lists+xen-devel@lfdr.de>; Fri, 10 May 2019 08:23:59 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hOyt4-0002KW-T7; Fri, 10 May 2019 06:20:06 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=Iy1x=TK=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1hOyt3-0002EE-Hf
 for xen-devel@lists.xenproject.org; Fri, 10 May 2019 06:20:05 +0000
X-Inumbo-ID: a5927341-72eb-11e9-8980-bc764e045a96
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id a5927341-72eb-11e9-8980-bc764e045a96;
 Fri, 10 May 2019 06:20:03 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 8D780AF0F;
 Fri, 10 May 2019 06:20:02 +0000 (UTC)
To: Ross Lagerwall <ross.lagerwall@citrix.com>,
 Boris Ostrovsky <boris.ostrovsky@oracle.com>
References: <20190508102807.7096-1-ross.lagerwall@citrix.com>
From: Juergen Gross <jgross@suse.com>
Openpgp: preference=signencrypt
Autocrypt: addr=jgross@suse.com; prefer-encrypt=mutual; keydata=
 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
Message-ID: <2bd0b649-0216-4874-2e3e-5e41c563d4ef@suse.com>
Date: Fri, 10 May 2019 08:20:01 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <20190508102807.7096-1-ross.lagerwall@citrix.com>
Content-Language: de-DE
Subject: Re: [Xen-devel] [PATCH] xenbus: Avoid deadlock during suspend due
 to open transactions
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: xen-devel@lists.xenproject.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMDgvMDUvMjAxOSAxMjoyOCwgUm9zcyBMYWdlcndhbGwgd3JvdGU6Cj4gRHVyaW5nIGEgc3Vz
cGVuZC9yZXN1bWUsIHRoZSB4ZW53YXRjaCB0aHJlYWQgd2FpdHMgZm9yIGFsbCBvdXRzdGFuZGlu
Zwo+IHhlbnN0b3JlIHJlcXVlc3RzIGFuZCB0cmFuc2FjdGlvbnMgdG8gY29tcGxldGUuIFRoaXMg
ZG9lcyBub3Qgd29yawo+IGNvcnJlY3RseSBmb3IgdHJhbnNhY3Rpb25zIHN0YXJ0ZWQgYnkgdXNl
cnNwYWNlIGJlY2F1c2UgaXQgd2FpdHMgZm9yCj4gdGhlbSB0byBjb21wbGV0ZSBhZnRlciBmcmVl
emluZyB1c2Vyc3BhY2UgdGhyZWFkcyB3aGljaCBtZWFucyB0aGUKPiB0cmFuc2FjdGlvbnMgaGFz
IG5vIHdheSBvZiBjb21wbGV0aW5nLCByZXN1bHRpbmcgaW4gYSBkZWFkbG9jay4gVGhpcyBpcwo+
IHRyaXZpYWwgdG8gcmVwcm9kdWNlIGJ5IHJ1bm5pbmcgdGhpcyBzY3JpcHQgYW5kIHRoZW4gc3Vz
cGVuZGluZyB0aGUgVk06Cj4gCj4gICAgIGltcG9ydCBweXhzLCB0aW1lCj4gICAgIGMgPSBweXhz
LmNsaWVudC5DbGllbnQoeGVuX2J1c19wYXRoPSIvZGV2L3hlbi94ZW5idXMiKQo+ICAgICBjLmNv
bm5lY3QoKQo+ICAgICBjLnRyYW5zYWN0aW9uKCkKPiAgICAgdGltZS5zbGVlcCgzNjAwKQo+IAo+
IEV2ZW4gaWYgdGhpcyBkZWFkbG9jayB3ZXJlIHJlc29sdmVkLCBtaXNiZWhhdmluZyB1c2Vyc3Bh
Y2Ugc2hvdWxkIG5vdAo+IHByZXZlbnQgYSBWTSBmcm9tIGJlaW5nIG1pZ3JhdGVkLiBTbywgaW5z
dGVhZCBvZiB3YWl0aW5nIGZvciB0aGVzZQo+IHRyYW5zYWN0aW9ucyB0byBjb21wbGV0ZSwgaWdu
b3JlIHRoZW0gZHVyaW5nIHN1c3BlbmQgYW5kIG1hcmsgdGhlbSBhcwo+IGFib3J0ZWQgZHVyaW5n
IHRoZSByZXR1cm4gcGF0aC4gSWYgdGhlIGNhbGxlciBjb21taXRzIHRoZSB0cmFuc2FjdGlvbiwK
PiByZXR1cm4gRUFHQUlOIHNvIHRoYXQgdGhleSB0cnkgYWdhaW4uIElmIHRoZSBjYWxsZXIgZGlz
Y2FyZHMgdGhlCj4gdHJhbnNhY3Rpb24sIHJldHVybiBPSyBzaW5jZSBubyBjaGFuZ2VzIHdlcmUg
bWFkZSBhbnl3YXkuCj4gCj4gVGhpcyBvbmx5IGFmZmVjdHMgdXNlcnMgb2YgdGhlIHhlbmJ1cyBm
aWxlIGludGVyZmFjZS4gSW4ta2VybmVsIHVzZXJzIG9mCj4geGVuYnVzIGFyZSBhc3N1bWVkIHRv
IGJlIHdlbGwtYmVoYXZlZCBhbmQgY29tcGxldGUgYWxsIHRyYW5zYWN0aW9ucwo+IGJlZm9yZSBm
cmVlemluZy4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBSb3NzIExhZ2Vyd2FsbCA8cm9zcy5sYWdlcndh
bGxAY2l0cml4LmNvbT4KCkkgdGhpbmsgdGhpcyBjYW4gYmUgZG9uZSBtdWNoIGVhc2llcjoKCkFk
ZCBhIGJvb2wgInVzZXJfcmVxIiB0byBzdHJ1Y3QgeGJfcmVxX2RhdGEgc2V0IGZvciB1c2VyIHJl
cXVlc3RzIGFuZAphIGdlbmVyYXRpb24gY291bnQgdG8gc3RydWN0IHhlbmJ1c190cmFuc2FjdGlv
bl9ob2xkZXIgd2hpY2ggd2lsbCBiZQppbml0aWFsaXplZCBmcm9tIGEgZ2xvYmFsIGNvdW50ZXIg
YmVpbmcgaW5jcmVtZW50ZWQgYXQgZXZlcnkKc3VzcGVuZC9yZXN1bWUgY3ljbGUuCgpEb24ndCBp
bmNyZW1lbnQgeHNfc3RhdGVfdXNlcnMgZm9yIHVzZXIgdHJhbnNhY3Rpb25zIGFuZCBhYm9ydCB1
c2VyCnRyYW5zYWN0aW9ucyBpbiBjYXNlIGl0cyBnZW5lcmF0aW9uIGNvdW50IGRvZXNuJ3QgbWF0
Y2ggdGhlIGdsb2JhbApjb3VudGVyLgoKCkp1ZXJnZW4KCj4gLS0tCj4gIGRyaXZlcnMveGVuL3hl
bmJ1cy94ZW5idXMuaCAgICAgICAgICAgICAgfCAgMiArCj4gIGRyaXZlcnMveGVuL3hlbmJ1cy94
ZW5idXNfZGV2X2Zyb250ZW5kLmMgfCA2MCArKysrKysrKysrKysrKysrKysrKysrKysKPiAgZHJp
dmVycy94ZW4veGVuYnVzL3hlbmJ1c194cy5jICAgICAgICAgICB8IDE2ICsrKysrKy0KPiAgMyBm
aWxlcyBjaGFuZ2VkLCA3NyBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCj4gCj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMveGVuL3hlbmJ1cy94ZW5idXMuaCBiL2RyaXZlcnMveGVuL3hlbmJ1cy94
ZW5idXMuaAo+IGluZGV4IDA5Mjk4MTE3MWRmMS4uYTk3N2UxMzk2MTQ5IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMveGVuL3hlbmJ1cy94ZW5idXMuaAo+ICsrKyBiL2RyaXZlcnMveGVuL3hlbmJ1cy94
ZW5idXMuaAo+IEBAIC0xMzMsNCArMTMzLDYgQEAgdm9pZCB4ZW5idXNfcmluZ19vcHNfaW5pdCh2
b2lkKTsKPiAgaW50IHhlbmJ1c19kZXZfcmVxdWVzdF9hbmRfcmVwbHkoc3RydWN0IHhzZF9zb2Nr
bXNnICptc2csIHZvaWQgKnBhcik7Cj4gIHZvaWQgeGVuYnVzX2Rldl9xdWV1ZV9yZXBseShzdHJ1
Y3QgeGJfcmVxX2RhdGEgKnJlcSk7Cj4gIAo+ICt1bnNpZ25lZCBpbnQgeGVuYnVzX2ZpbGVfYWJv
cnRfdHJhbnMoYm9vbCBhYm9ydCk7Cj4gKwo+ICAjZW5kaWYKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy94ZW4veGVuYnVzL3hlbmJ1c19kZXZfZnJvbnRlbmQuYyBiL2RyaXZlcnMveGVuL3hlbmJ1cy94
ZW5idXNfZGV2X2Zyb250ZW5kLmMKPiBpbmRleCAwNzgyZmYzYzIyNzMuLjYyMzIxOGEyYTE2NSAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL3hlbi94ZW5idXMveGVuYnVzX2Rldl9mcm9udGVuZC5jCj4g
KysrIGIvZHJpdmVycy94ZW4veGVuYnVzL3hlbmJ1c19kZXZfZnJvbnRlbmQuYwo+IEBAIC02OSw2
ICs2OSw3IEBACj4gIHN0cnVjdCB4ZW5idXNfdHJhbnNhY3Rpb25faG9sZGVyIHsKPiAgCXN0cnVj
dCBsaXN0X2hlYWQgbGlzdDsKPiAgCXN0cnVjdCB4ZW5idXNfdHJhbnNhY3Rpb24gaGFuZGxlOwo+
ICsJYm9vbCBhYm9ydGVkOwo+ICB9Owo+ICAKPiAgLyoKPiBAQCAtMTEzLDggKzExNCw0OSBAQCBz
dHJ1Y3QgeGVuYnVzX2ZpbGVfcHJpdiB7Cj4gIAl3YWl0X3F1ZXVlX2hlYWRfdCByZWFkX3dhaXRx
Owo+ICAKPiAgCXN0cnVjdCBrcmVmIGtyZWY7Cj4gKwo+ICsJc3RydWN0IGxpc3RfaGVhZCBmaWxl
X2xpc3Q7Cj4gIH07Cj4gIAo+ICtzdGF0aWMgREVGSU5FX1NQSU5MT0NLKGZpbGVfbGlzdF9sb2Nr
KTsKPiArc3RhdGljIExJU1RfSEVBRChmaWxlX2xpc3QpOwo+ICsKPiArc3RhdGljIHZvaWQgcmVn
aXN0ZXJfeGVuYnVzX2ZpbGUoc3RydWN0IHhlbmJ1c19maWxlX3ByaXYgKnUpCj4gK3sKPiArCXNw
aW5fbG9jaygmZmlsZV9saXN0X2xvY2spOwo+ICsJbGlzdF9hZGQoJnUtPmZpbGVfbGlzdCwgJmZp
bGVfbGlzdCk7Cj4gKwlzcGluX3VubG9jaygmZmlsZV9saXN0X2xvY2spOwo+ICt9Cj4gKwo+ICtz
dGF0aWMgdm9pZCB1bnJlZ2lzdGVyX3hlbmJ1c19maWxlKHN0cnVjdCB4ZW5idXNfZmlsZV9wcml2
ICp1KQo+ICt7Cj4gKwlzcGluX2xvY2soJmZpbGVfbGlzdF9sb2NrKTsKPiArCWxpc3RfZGVsKCZ1
LT5maWxlX2xpc3QpOwo+ICsJc3Bpbl91bmxvY2soJmZpbGVfbGlzdF9sb2NrKTsKPiArfQo+ICsK
PiArdW5zaWduZWQgaW50IHhlbmJ1c19maWxlX2Fib3J0X3RyYW5zKGJvb2wgYWJvcnQpCj4gK3sK
PiArCXN0cnVjdCB4ZW5idXNfZmlsZV9wcml2ICp1Owo+ICsJc3RydWN0IHhlbmJ1c190cmFuc2Fj
dGlvbl9ob2xkZXIgKnRyYW5zOwo+ICsJdW5zaWduZWQgaW50IGNvdW50ID0gMDsKPiArCj4gKwlz
cGluX2xvY2soJmZpbGVfbGlzdF9sb2NrKTsKPiArCWxpc3RfZm9yX2VhY2hfZW50cnkodSwgJmZp
bGVfbGlzdCwgZmlsZV9saXN0KSB7Cj4gKwkJbXV0ZXhfbG9jaygmdS0+bXNnYnVmZmVyX211dGV4
KTsKPiArCQlsaXN0X2Zvcl9lYWNoX2VudHJ5KHRyYW5zLCAmdS0+dHJhbnNhY3Rpb25zLCBsaXN0
KSB7Cj4gKwkJCWlmICghdHJhbnMtPmFib3J0ZWQpIHsKPiArCQkJCWNvdW50Kys7Cj4gKwkJCQl0
cmFucy0+YWJvcnRlZCA9IGFib3J0Owo+ICsJCQl9Cj4gKwkJfQo+ICsJCW11dGV4X3VubG9jaygm
dS0+bXNnYnVmZmVyX211dGV4KTsKPiArCX0KPiArCXNwaW5fdW5sb2NrKCZmaWxlX2xpc3RfbG9j
ayk7Cj4gKwo+ICsJcmV0dXJuIGNvdW50Owo+ICt9Cj4gKwo+ICAvKiBSZWFkIG91dCBhbnkgcmF3
IHhlbmJ1cyBtZXNzYWdlcyBxdWV1ZWQgdXAuICovCj4gIHN0YXRpYyBzc2l6ZV90IHhlbmJ1c19m
aWxlX3JlYWQoc3RydWN0IGZpbGUgKmZpbHAsCj4gIAkJCSAgICAgICBjaGFyIF9fdXNlciAqdWJ1
ZiwKPiBAQCAtMzA2LDYgKzM0OCw4IEBAIHN0YXRpYyB2b2lkIHhlbmJ1c19maWxlX2ZyZWUoc3Ry
dWN0IGtyZWYgKmtyZWYpCj4gIAo+ICAJdSA9IGNvbnRhaW5lcl9vZihrcmVmLCBzdHJ1Y3QgeGVu
YnVzX2ZpbGVfcHJpdiwga3JlZik7Cj4gIAo+ICsJdW5yZWdpc3Rlcl94ZW5idXNfZmlsZSh1KTsK
PiArCj4gIAkvKgo+ICAJICogTm8gbmVlZCBmb3IgbG9ja2luZyBoZXJlIGJlY2F1c2UgdGhlcmUg
YXJlIG5vIG90aGVyIHVzZXJzLAo+ICAJICogYnkgZGVmaW5pdGlvbi4KPiBAQCAtNDQ5LDYgKzQ5
MywyMCBAQCBzdGF0aWMgaW50IHhlbmJ1c193cml0ZV90cmFuc2FjdGlvbih1bnNpZ25lZCBtc2df
dHlwZSwKPiAgCQkgIShtc2ctPmhkci5sZW4gPT0gMiAmJgo+ICAJCSAgICghc3RyY21wKG1zZy0+
Ym9keSwgIlQiKSB8fCAhc3RyY21wKG1zZy0+Ym9keSwgIkYiKSkpKQo+ICAJCXJldHVybiB4ZW5i
dXNfY29tbWFuZF9yZXBseSh1LCBYU19FUlJPUiwgIkVJTlZBTCIpOwo+ICsJZWxzZSBpZiAobXNn
X3R5cGUgPT0gWFNfVFJBTlNBQ1RJT05fRU5EKSB7Cj4gKwkJdHJhbnMgPSB4ZW5idXNfZ2V0X3Ry
YW5zYWN0aW9uKHUsIG1zZy0+aGRyLnR4X2lkKTsKPiArCQlpZiAodHJhbnMgJiYgdHJhbnMtPmFi
b3J0ZWQpIHsKPiArCQkJbGlzdF9kZWwoJnRyYW5zLT5saXN0KTsKPiArCQkJa2ZyZWUodHJhbnMp
Owo+ICsJCQlpZiAoIXN0cmNtcChtc2ctPmJvZHksICJUIikpCj4gKwkJCQlyZXR1cm4geGVuYnVz
X2NvbW1hbmRfcmVwbHkodSwgWFNfRVJST1IsCj4gKwkJCQkJCQkgICAgIkVBR0FJTiIpOwo+ICsJ
CQllbHNlCj4gKwkJCQlyZXR1cm4geGVuYnVzX2NvbW1hbmRfcmVwbHkodSwKPiArCQkJCQkJCSAg
ICBYU19UUkFOU0FDVElPTl9FTkQsCj4gKwkJCQkJCQkgICAgIk9LIik7Cj4gKwkJfQo+ICsJfQo+
ICAKPiAgCXJjID0geGVuYnVzX2Rldl9yZXF1ZXN0X2FuZF9yZXBseSgmbXNnLT5oZHIsIHUpOwo+
ICAJaWYgKHJjICYmIHRyYW5zKSB7Cj4gQEAgLTY0MCw2ICs2OTgsOCBAQCBzdGF0aWMgaW50IHhl
bmJ1c19maWxlX29wZW4oc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZpbGUgKmZpbHApCj4g
IAo+ICAJZmlscC0+cHJpdmF0ZV9kYXRhID0gdTsKPiAgCj4gKwlyZWdpc3Rlcl94ZW5idXNfZmls
ZSh1KTsKPiArCj4gIAlyZXR1cm4gMDsKPiAgfQo+ICAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy94
ZW4veGVuYnVzL3hlbmJ1c194cy5jIGIvZHJpdmVycy94ZW4veGVuYnVzL3hlbmJ1c194cy5jCj4g
aW5kZXggNDlhMzg3NGFlNmJiLi45YWJmZjYzNWZjMjAgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy94
ZW4veGVuYnVzL3hlbmJ1c194cy5jCj4gKysrIGIvZHJpdmVycy94ZW4veGVuYnVzL3hlbmJ1c194
cy5jCj4gQEAgLTk1LDEyICs5NSwyMyBAQCBzdGF0aWMgcGlkX3QgeGVud2F0Y2hfcGlkOwo+ICBz
dGF0aWMgREVGSU5FX01VVEVYKHhlbndhdGNoX211dGV4KTsKPiAgc3RhdGljIERFQ0xBUkVfV0FJ
VF9RVUVVRV9IRUFEKHdhdGNoX2V2ZW50c193YWl0cSk7Cj4gIAo+ICtzdGF0aWMgdW5zaWduZWQg
aW50IHhzX3N0YXRlX2NvdW50X3VzZXJzKHZvaWQpCj4gK3sKPiArCXVuc2lnbmVkIGludCBjb3Vu
dDsKPiArCj4gKwlzcGluX2xvY2soJnhzX3N0YXRlX2xvY2spOwo+ICsJY291bnQgPSB4c19zdGF0
ZV91c2VycyAtIHhlbmJ1c19maWxlX2Fib3J0X3RyYW5zKGZhbHNlKTsKPiArCXNwaW5fdW5sb2Nr
KCZ4c19zdGF0ZV9sb2NrKTsKPiArCj4gKwlyZXR1cm4gY291bnQ7Cj4gK30KPiArCj4gIHN0YXRp
YyB2b2lkIHhzX3N1c3BlbmRfZW50ZXIodm9pZCkKPiAgewo+ICAJc3Bpbl9sb2NrKCZ4c19zdGF0
ZV9sb2NrKTsKPiAgCXhzX3N1c3BlbmRfYWN0aXZlKys7Cj4gIAlzcGluX3VubG9jaygmeHNfc3Rh
dGVfbG9jayk7Cj4gLQl3YWl0X2V2ZW50KHhzX3N0YXRlX2V4aXRfd3EsIHhzX3N0YXRlX3VzZXJz
ID09IDApOwo+ICsJd2FpdF9ldmVudCh4c19zdGF0ZV9leGl0X3dxLCB4c19zdGF0ZV9jb3VudF91
c2VycygpID09IDApOwo+ICB9Cj4gIAo+ICBzdGF0aWMgdm9pZCB4c19zdXNwZW5kX2V4aXQodm9p
ZCkKPiBAQCAtODM4LDYgKzg0OSw5IEBAIHZvaWQgeHNfcmVzdW1lKHZvaWQpCj4gIAo+ICAJbXV0
ZXhfdW5sb2NrKCZ4c19yZXNwb25zZV9tdXRleCk7Cj4gIAo+ICsJc3Bpbl9sb2NrKCZ4c19zdGF0
ZV9sb2NrKTsKPiArCXhzX3N0YXRlX3VzZXJzIC09IHhlbmJ1c19maWxlX2Fib3J0X3RyYW5zKHRy
dWUpOwo+ICsJc3Bpbl91bmxvY2soJnhzX3N0YXRlX2xvY2spOwo+ICAJeHNfc3VzcGVuZF9leGl0
KCk7Cj4gIAo+ICAJLyogTm8gbmVlZCBmb3Igd2F0Y2hlc19sb2NrOiB0aGUgeHNfd2F0Y2hfcndz
ZW0gaXMgc3VmZmljaWVudC4gKi8KPiAKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54
ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGlu
Zm8veGVuLWRldmVs

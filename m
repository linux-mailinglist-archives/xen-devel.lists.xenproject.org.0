Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 4529F10CA05
	for <lists+xen-devel@lfdr.de>; Thu, 28 Nov 2019 15:01:28 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iaKJN-0002yB-2F; Thu, 28 Nov 2019 13:58:25 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=XtxL=ZU=amazon.com=prvs=228fc64b1=pdurrant@srs-us1.protection.inumbo.net>)
 id 1iaKJM-0002y2-6N
 for xen-devel@lists.xenproject.org; Thu, 28 Nov 2019 13:58:24 +0000
X-Inumbo-ID: 24a72df4-11e7-11ea-a3d2-12813bfff9fa
Received: from smtp-fw-4101.amazon.com (unknown [72.21.198.25])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 24a72df4-11e7-11ea-a3d2-12813bfff9fa;
 Thu, 28 Nov 2019 13:58:23 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.com; i=@amazon.com; q=dns/txt; s=amazon201209;
 t=1574949504; x=1606485504;
 h=from:to:cc:subject:date:message-id:mime-version:
 content-transfer-encoding;
 bh=xCO0okaBZQJxQDtdV7OirvQy9QSBYz6kS1yWScHOBVI=;
 b=Am96OiVpqYDKeCy3FQgD2+Jm7hG0/hGNbh/+BS89YGszqklzd5sYwp70
 pe0P9tzTwIQ48FWgi+w4fV3WIkZDxzoQfvKhJuD7KFUQs0lWrzBPw7v3I
 KsaI1Y9DS1WlKHWrjYWPR0093VpUwF734sXN9xg4tAWsBB0xvOSg680R3 E=;
IronPort-SDR: WvOm+2sNXK83SwVyhXyFgYwPSk5w5FqguvcJ5rEGLDuEiXqqQNRcoFTD3n4JAPAzc3d9MW975H
 Iu/Gq5+mVpYg==
X-IronPort-AV: E=Sophos;i="5.69,253,1571702400"; 
   d="scan'208";a="6178129"
Received: from iad6-co-svc-p1-lb1-vlan3.amazon.com (HELO
 email-inbound-relay-2c-1968f9fa.us-west-2.amazon.com) ([10.124.125.6])
 by smtp-border-fw-out-4101.iad4.amazon.com with ESMTP;
 28 Nov 2019 13:58:21 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (pdx4-ws-svc-p6-lb7-vlan3.pdx.amazon.com [10.170.41.166])
 by email-inbound-relay-2c-1968f9fa.us-west-2.amazon.com (Postfix) with ESMTPS
 id 81D1DA2517; Thu, 28 Nov 2019 13:58:20 +0000 (UTC)
Received: from EX13D32EUC001.ant.amazon.com (10.43.164.159) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.243) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Thu, 28 Nov 2019 13:58:19 +0000
Received: from EX13MTAUWA001.ant.amazon.com (10.43.160.58) by
 EX13D32EUC001.ant.amazon.com (10.43.164.159) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Thu, 28 Nov 2019 13:58:18 +0000
Received: from u2f063a87eabd5f.cbg10.amazon.com (10.125.106.135) by
 mail-relay.amazon.com (10.43.160.118) with Microsoft SMTP Server id
 15.0.1367.3 via Frontend Transport; Thu, 28 Nov 2019 13:58:15 +0000
From: Paul Durrant <pdurrant@amazon.com>
To: <xen-devel@lists.xenproject.org>
Date: Thu, 28 Nov 2019 13:58:13 +0000
Message-ID: <20191128135813.8893-1-pdurrant@amazon.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH-for-4.13 v4] Rationalize max_grant_frames and
 max_maptrack_frames handling
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Paul Durrant <pdurrant@amazon.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 George Dunlap <george.dunlap@citrix.com>,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Jan Beulich <jbeulich@suse.com>,
 Anthony PERARD <anthony.perard@citrix.com>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogR2VvcmdlIER1bmxhcCA8Z2VvcmdlLmR1bmxhcEBjaXRyaXguY29tPgoKWGVuIHVzZWQg
dG8gaGF2ZSBzaW5nbGUsIHN5c3RlbS13aWRlIGxpbWl0cyBmb3IgdGhlIG51bWJlciBvZiBncmFu
dApmcmFtZXMgYW5kIG1hcHRyYWNrIGZyYW1lcyBhIGd1ZXN0IHdhcyBhbGxvd2VkIHRvIGNyZWF0
ZS4gSW5jcmVhc2luZwpvciBkZWNyZWFzaW5nIHRoaXMgc2luZ2xlIGxpbWl0IG9uIHRoZSBYZW4g
Y29tbWFuZC1saW5lIHdvdWxkIGNoYW5nZQp0aGUgbGltaXQgZm9yIGFsbCBndWVzdHMgb24gdGhl
IHN5c3RlbS4KCkxhdGVyLCBwZXItZG9tYWluIGxpbWl0cyBmb3IgdGhlc2UgdmFsdWVzIHdhcyBj
cmVhdGVkLiBUaGUgc3lzdGVtLXdpZGUKbGltaXRzIGJlY2FtZSBzdHJpY3QgbGltaXRzOiBkb21h
aW5zIGNvdWxkIG5vdCBiZSBjcmVhdGVkIHdpdGggaGlnaGVyCmxpbWl0cywgYnV0IGNvdWxkIGJl
IGNyZWF0ZWQgd2l0aCBsb3dlciBsaW1pdHMuIEhvd2V2ZXIsIHRoYXQgY2hhbmdlCmFsc28gaW50
cm9kdWNlZCBhIHJhbmdlIG9mIGRpZmZlcmVudCAiZGVmYXVsdCIgdmFsdWVzIGludG8gdmFyaW91
cwpwbGFjZXMgaW4gdGhlIHRvb2xzdGFjazoKCi0gVGhlIHB5dGhvbiBsaWJ4YyBiaW5kaW5ncyBo
YXJkLWNvZGVkIHRoZXNlIHZhbHVlcyB0byAzMiBhbmQgMTAyNCwKICByZXNwZWN0aXZlbHkKLSBU
aGUgbGlieGwgZGVmYXVsdCB2YWx1ZXMgYXJlIDMyIGFuZCAxMDI0IHJlc3BlY3RpdmVseS4KLSB4
bCB3aWxsIHVzZSB0aGUgbGlieGwgZGVmYXVsdCBmb3IgbWFwdHJhY2ssIGJ1dCBkb2VzIGl0cyBv
d24gZGVmYXVsdAogIGNhbGN1bGF0aW9uIGZvciBncmFudCBmcmFtZXM6IGVpdGhlciAzMiBvciA2
NCwgYmFzZWQgb24gdGhlIG1heAogIHBvc3NpYmxlIG1mbi4KClRoZXNlIGRlZmF1bHRzIGludGVy
YWN0IHBvb3JseSB3aXRoIHRoZSBoeXBlcnZpc29yIGNvbW1hbmQtbGluZSBsaW1pdDoKCi0gVGhl
IGh5cGVydmlzb3IgY29tbWFuZC1saW5lIGxpbWl0IGNhbm5vdCBiZSB1c2VkIHRvIHJhaXNlIHRo
ZSBsaW1pdAogIGZvciBhbGwgZ3Vlc3RzIGFueW1vcmUsIGFzIHRoZSBkZWZhdWx0IGluIHRoZSB0
b29sc3RhY2sgd2lsbAogIGVmZmVjdGl2ZWx5IG92ZXJyaWRlIHRoaXMuCi0gSWYgeW91IHVzZSB0
aGUgaHlwZXJ2aXNvciBjb21tYW5kLWxpbmUgbGltaXQgdG8gKnJlZHVjZSogdGhlIGxpbWl0LAog
IHRoZW4gdGhlICJkZWZhdWx0IiB2YWx1ZXMgZ2VuZXJhdGVkIGJ5IHRoZSB0b29sc3RhY2sgYXJl
IHRvbyBoaWdoLAogIGFuZCBhbGwgZ3Vlc3QgY3JlYXRpb25zIHdpbGwgZmFpbC4KCkluIG90aGVy
IHdvcmRzLCB0aGUgdG9vbHN0YWNrIGRlZmF1bHRzIHJlcXVpcmUgYW55IGNoYW5nZSB0byBiZQpl
ZmZlY3RlZCBieSBoYXZpbmcgdGhlIGFkbWluIGV4cGxpY2l0bHkgc3BlY2lmeSBhIG5ldyB2YWx1
ZSBpbiBldmVyeQpndWVzdC4KCkluIG9yZGVyIHRvIGFkZHJlc3MgdGhpcywgaGF2ZSBncmFudF90
YWJsZV9pbml0IHRyZWF0IG5lZ2F0aXZlIHZhbHVlcwpmb3IgbWF4X2dyYW50X2ZyYW1lcyBhbmQg
bWF4X21hcHRyYWNrX2ZyYW1lcyBhcyBpbnN0cnVjdGlvbnMgdG8gdXNlIHRoZQpzeXN0ZW0td2lk
ZSBkZWZhdWx0LCBhbmQgaGF2ZSBhbGwgdGhlIGFib3ZlIHRvb2xzdGFja3MgZGVmYXVsdCB0byBw
YXNzaW5nCi0xIHVubGVzcyBhIGRpZmZlcmVudCB2YWx1ZSBpcyBleHBsaWNpdGx5IGNvbmZpZ3Vy
ZWQuCgpUaGlzIHJlc3RvcmVzIHRoZSBvbGQgYmVoYXZpb3IgaW4gdGhhdCBjaGFuZ2luZyB0aGUg
aHlwZXJ2aXNvciBjb21tYW5kLWxpbmUKb3B0aW9uIGNhbiBjaGFuZ2UgdGhlIGJlaGF2aW9yIGZv
ciBhbGwgZ3Vlc3RzLCB3aGlsZSByZXRhaW5pbmcgdGhlIGFiaWxpdHkKdG8gc2V0IHBlci1ndWVz
dCB2YWx1ZXMuICBJdCBhbHNvIHJlbW92ZXMgdGhlIGJ1ZyB0aGF0IHJlZHVjaW5nIHRoZQpzeXN0
ZW0td2lkZSBtYXggd2lsbCBjYXVzZSBhbGwgZG9tYWlucyB3aXRob3V0IGV4cGxpY2l0IGxpbWl0
cyB0byBmYWlsLgoKTk9URTogLSBUaGUgT2NhbWwgYmluZGluZ3MgcmVxdWlyZSB0aGUgY2FsbGVy
IHRvIGFsd2F5cyBzcGVjaWZ5IGEgdmFsdWUsCiAgICAgICAgYW5kIHRoZSBjb2RlIHRvIHN0YXJ0
IGEgeGVuc3RvcmVkIHN0dWJkb21haW4gaGFyZC1jb2RlcyB0aGVzZSB0byA0CglhbmQgMTI4IHJl
c3BlY3RpdmVseTsgdGhpcyBiZWhhdm91ciB3aWxsIG5vdCBiZSBtb2RpZmllZC4KClNpZ25lZC1v
ZmYtYnk6IEdlb3JnZSBEdW5sYXAgPGdlb3JnZS5kdW5sYXBAY2l0cml4LmNvbT4KU2lnbmVkLW9m
Zi1ieTogUGF1bCBEdXJyYW50IDxwZHVycmFudEBhbWF6b24uY29tPgotLS0KQ2M6IElhbiBKYWNr
c29uIDxpYW4uamFja3NvbkBldS5jaXRyaXguY29tPgpDYzogV2VpIExpdSA8d2xAeGVuLm9yZz4K
Q2M6IEFuZHJldyBDb29wZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+CkNjOiBHZW9yZ2Ug
RHVubGFwIDxHZW9yZ2UuRHVubGFwQGV1LmNpdHJpeC5jb20+CkNjOiBKYW4gQmV1bGljaCA8amJl
dWxpY2hAc3VzZS5jb20+CkNjOiBKdWxpZW4gR3JhbGwgPGp1bGllbkB4ZW4ub3JnPgpDYzogS29u
cmFkIFJ6ZXN6dXRlayBXaWxrIDxrb25yYWQud2lsa0BvcmFjbGUuY29tPgpDYzogU3RlZmFubyBT
dGFiZWxsaW5pIDxzc3RhYmVsbGluaUBrZXJuZWwub3JnPgpDYzogQW50aG9ueSBQRVJBUkQgPGFu
dGhvbnkucGVyYXJkQGNpdHJpeC5jb20+CkNjOiAiTWFyZWsgTWFyY3p5a293c2tpLUfDs3JlY2tp
IiA8bWFybWFyZWtAaW52aXNpYmxldGhpbmdzbGFiLmNvbT4KQ2M6IFZvbG9keW15ciBCYWJjaHVr
IDxWb2xvZHlteXJfQmFiY2h1a0BlcGFtLmNvbT4KQ2M6ICJSb2dlciBQYXUgTW9ubsOpIiA8cm9n
ZXIucGF1QGNpdHJpeC5jb20+Cgp2NDoKIC0gQWRkIG1pc3NpbmcgYnJhY2VzIGluIHhsdV9jZmdf
Z2V0X2JvdW5kZWRfbG9uZygpCgp2MzoKIC0gTWFrZSBzdXJlIHRoYXQgc3BlY2lmaWVkIHZhbHVl
cyBjYW5ub3QgYmUgbmVnYXRpdmUgb3Igb3ZlcmZsb3cgYQogICBzaWduZWQgaW50Cgp2MjoKIC0g
cmUtd29ya2VkIEdlb3JnZSdzIG9yaWdpbmFsIGNvbW1pdCBtYXNzYWdlIGEgbGl0dGxlCiAtIGZp
eGVkIHRoZSB0ZXh0IGluIHhsLmNvbmYuNS5wb2QKIC0gdXNlIC0xIGFzIHRoZSBzZW50aW5lbCB2
YWx1ZSBmb3IgJ2RlZmF1bHQnIGFuZCA8IDAgZm9yIGNoZWNraW5nIGl0Ci0tLQogZG9jcy9tYW4v
eGwuY29uZi41LnBvZCAgICAgICAgICAgIHwgIDYgKystLQogdG9vbHMvbGlieGwvbGlieGwuaCAg
ICAgICAgICAgICAgIHwgIDQgKy0tCiB0b29scy9saWJ4bC9saWJ4bF90eXBlcy5pZGwgICAgICAg
fCAgNCArLS0KIHRvb2xzL2xpYnhsL2xpYnhsdV9jZmcuYyAgICAgICAgICB8IDI2ICsrKysrKysr
KysrKysrKy0tCiB0b29scy9saWJ4bC9saWJ4bHV0aWwuaCAgICAgICAgICAgfCAgMiArKwogdG9v
bHMvcHl0aG9uL3hlbi9sb3dsZXZlbC94Yy94Yy5jIHwgIDQgKy0tCiB0b29scy94bC94bC5jICAg
ICAgICAgICAgICAgICAgICAgfCAxNSArKysrLS0tLS0tCiB0b29scy94bC94bF9wYXJzZS5jICAg
ICAgICAgICAgICAgfCAgOSArKysrLS0KIHhlbi9hcmNoL2FybS9zZXR1cC5jICAgICAgICAgICAg
ICB8ICAyICstCiB4ZW4vYXJjaC94ODYvc2V0dXAuYyAgICAgICAgICAgICAgfCAgNCArLS0KIHhl
bi9jb21tb24vZ3JhbnRfdGFibGUuYyAgICAgICAgICB8IDQ2ICsrKysrKysrKysrKysrKysrKysr
KysrKysrKystLS0KIHhlbi9pbmNsdWRlL3B1YmxpYy9kb21jdGwuaCAgICAgICB8IDEwICsrKyst
LS0KIHhlbi9pbmNsdWRlL3hlbi9ncmFudF90YWJsZS5oICAgICB8ICA4ICsrKy0tLQogMTMgZmls
ZXMgY2hhbmdlZCwgMTAyIGluc2VydGlvbnMoKyksIDM4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2RvY3MvbWFuL3hsLmNvbmYuNS5wb2QgYi9kb2NzL21hbi94bC5jb25mLjUucG9kCmluZGV4
IDk2MjE0NGUzOGUuLjIwN2FiM2U3N2EgMTAwNjQ0Ci0tLSBhL2RvY3MvbWFuL3hsLmNvbmYuNS5w
b2QKKysrIGIvZG9jcy9tYW4veGwuY29uZi41LnBvZApAQCAtODEsMTMgKzgxLDE1IEBAIERlZmF1
bHQ6IEM8L3Zhci9sb2NrL3hsPgogCiBTZXRzIHRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGUgQzxt
YXhfZ3JhbnRfZnJhbWVzPiBkb21haW4gY29uZmlnIHZhbHVlLgogCi1EZWZhdWx0OiBDPDMyPiBv
biBob3N0cyB1cCB0byAxNlRCIG9mIG1lbW9yeSwgQzw2ND4gb24gaG9zdHMgbGFyZ2VyIHRoYW4g
MTZUQgorRGVmYXVsdDogdmFsdWUgb2YgWGVuIGNvbW1hbmQgbGluZSBCPGdudHRhYl9tYXhfZnJh
bWVzPiBwYXJhbWV0ZXIgKG9yIGl0cworZGVmYXVsdCB2YWx1ZSBpZiB1bnNwZWNpZmllZCkuCiAK
ID1pdGVtIEI8bWF4X21hcHRyYWNrX2ZyYW1lcz1OVU1CRVI+CiAKIFNldHMgdGhlIGRlZmF1bHQg
dmFsdWUgZm9yIHRoZSBDPG1heF9tYXB0cmFja19mcmFtZXM+IGRvbWFpbiBjb25maWcgdmFsdWUu
CiAKLURlZmF1bHQ6IEM8MTAyND4KK0RlZmF1bHQ6IHZhbHVlIG9mIFhlbiBjb21tYW5kIGxpbmUg
QjxnbnR0YWJfbWF4X21hcHRyYWNrX2ZyYW1lcz4KK3BhcmFtZXRlciAob3IgaXRzIGRlZmF1bHQg
dmFsdWUgaWYgdW5zcGVjaWZpZWQpLgogCiA9aXRlbSBCPHZpZi5kZWZhdWx0LnNjcmlwdD0iUEFU
SCI+CiAKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhsL2xpYnhsLmggYi90b29scy9saWJ4bC9saWJ4
bC5oCmluZGV4IDQ5YjU2ZmExYTMuLmEyYTVkMzIxYzUgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhs
L2xpYnhsLmgKKysrIGIvdG9vbHMvbGlieGwvbGlieGwuaApAQCAtMzY0LDggKzM2NCw4IEBACiAg
Ki8KICNkZWZpbmUgTElCWExfSEFWRV9CVUlMRElORk9fR1JBTlRfTElNSVRTIDEKIAotI2RlZmlu
ZSBMSUJYTF9NQVhfR1JBTlRfRlJBTUVTX0RFRkFVTFQgMzIKLSNkZWZpbmUgTElCWExfTUFYX01B
UFRSQUNLX0ZSQU1FU19ERUZBVUxUIDEwMjQKKyNkZWZpbmUgTElCWExfTUFYX0dSQU5UX0ZSQU1F
U19ERUZBVUxUIC0xCisjZGVmaW5lIExJQlhMX01BWF9NQVBUUkFDS19GUkFNRVNfREVGQVVMVCAt
MQogCiAvKgogICogTElCWExfSEFWRV9CVUlMRElORk9fKiBpbmRpY2F0ZXMgdGhhdCBsaWJ4bF9k
b21haW5fYnVpbGRfaW5mbyBoYXMKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhsL2xpYnhsX3R5cGVz
LmlkbCBiL3Rvb2xzL2xpYnhsL2xpYnhsX3R5cGVzLmlkbAppbmRleCAwNTQ2ZDc4NjVhLi42M2Uy
OWJiMmZiIDEwMDY0NAotLS0gYS90b29scy9saWJ4bC9saWJ4bF90eXBlcy5pZGwKKysrIGIvdG9v
bHMvbGlieGwvbGlieGxfdHlwZXMuaWRsCkBAIC01MTEsOCArNTExLDggQEAgbGlieGxfZG9tYWlu
X2J1aWxkX2luZm8gPSBTdHJ1Y3QoImRvbWFpbl9idWlsZF9pbmZvIixbCiAKICAgICAoInZudW1h
X25vZGVzIiwgQXJyYXkobGlieGxfdm5vZGVfaW5mbywgIm51bV92bnVtYV9ub2RlcyIpKSwKIAot
ICAgICgibWF4X2dyYW50X2ZyYW1lcyIsICAgIHVpbnQzMiwgeydpbml0X3ZhbCc6ICdMSUJYTF9N
QVhfR1JBTlRfRlJBTUVTX0RFRkFVTFQnfSksCi0gICAgKCJtYXhfbWFwdHJhY2tfZnJhbWVzIiwg
dWludDMyLCB7J2luaXRfdmFsJzogJ0xJQlhMX01BWF9NQVBUUkFDS19GUkFNRVNfREVGQVVMVCd9
KSwKKyAgICAoIm1heF9ncmFudF9mcmFtZXMiLCAgICBpbnRlZ2VyLCB7J2luaXRfdmFsJzogJ0xJ
QlhMX01BWF9HUkFOVF9GUkFNRVNfREVGQVVMVCd9KSwKKyAgICAoIm1heF9tYXB0cmFja19mcmFt
ZXMiLCBpbnRlZ2VyLCB7J2luaXRfdmFsJzogJ0xJQlhMX01BWF9NQVBUUkFDS19GUkFNRVNfREVG
QVVMVCd9KSwKICAgICAKICAgICAoImRldmljZV9tb2RlbF92ZXJzaW9uIiwgbGlieGxfZGV2aWNl
X21vZGVsX3ZlcnNpb24pLAogICAgICgiZGV2aWNlX21vZGVsX3N0dWJkb21haW4iLCBsaWJ4bF9k
ZWZib29sKSwKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhsL2xpYnhsdV9jZmcuYyBiL3Rvb2xzL2xp
YnhsL2xpYnhsdV9jZmcuYwppbmRleCA3MjgxNWQyNWRkLi5jYWZjNjMyZmMxIDEwMDY0NAotLS0g
YS90b29scy9saWJ4bC9saWJ4bHVfY2ZnLmMKKysrIGIvdG9vbHMvbGlieGwvbGlieGx1X2NmZy5j
CkBAIC0yNjgsOCArMjY4LDkgQEAgaW50IHhsdV9jZmdfcmVwbGFjZV9zdHJpbmcoY29uc3QgWExV
X0NvbmZpZyAqY2ZnLCBjb25zdCBjaGFyICpuLAogICAgIHJldHVybiAwOwogfQogCi1pbnQgeGx1
X2NmZ19nZXRfbG9uZyhjb25zdCBYTFVfQ29uZmlnICpjZmcsIGNvbnN0IGNoYXIgKm4sCi0gICAg
ICAgICAgICAgICAgICAgICBsb25nICp2YWx1ZV9yLCBpbnQgZG9udF93YXJuKSB7CitpbnQgeGx1
X2NmZ19nZXRfYm91bmRlZF9sb25nKGNvbnN0IFhMVV9Db25maWcgKmNmZywgY29uc3QgY2hhciAq
biwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZyBtaW4sIGxvbmcgbWF4LCBsb25n
ICp2YWx1ZV9yLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgZG9udF93YXJuKSB7
CiAgICAgbG9uZyBsOwogICAgIFhMVV9Db25maWdTZXR0aW5nICpzZXQ7CiAgICAgaW50IGU7CkBA
IC0zMDMsMTAgKzMwNCwzMSBAQCBpbnQgeGx1X2NmZ19nZXRfbG9uZyhjb25zdCBYTFVfQ29uZmln
ICpjZmcsIGNvbnN0IGNoYXIgKm4sCiAgICAgICAgICAgICAgICAgICAgIGNmZy0+Y29uZmlnX3Nv
dXJjZSwgc2V0LT5saW5lbm8sIG4pOwogICAgICAgICByZXR1cm4gRUlOVkFMOwogICAgIH0KKyAg
ICBpZiAobCA8IG1pbikgeworICAgICAgICBpZiAoIWRvbnRfd2FybikKKyAgICAgICAgICAgIGZw
cmludGYoY2ZnLT5yZXBvcnQsCisgICAgICAgICAgICAgICAgICAgICIlczolZDogd2FybmluZzog
dmFsdWUgYCVsZCcgaXMgc21hbGxlciB0aGFuIG1pbmltdW0gYm91bmQgJyVsZCdcbiIsCisgICAg
ICAgICAgICAgICAgICAgIGNmZy0+Y29uZmlnX3NvdXJjZSwgc2V0LT5saW5lbm8sIGwsIG1pbik7
CisgICAgICAgIHJldHVybiBFSU5WQUw7CisgICAgfQorICAgIGlmIChsID4gbWF4KSB7CisgICAg
ICAgIGlmICghZG9udF93YXJuKQorICAgICAgICAgICAgZnByaW50ZihjZmctPnJlcG9ydCwKKyAg
ICAgICAgICAgICAgICAgICAgIiVzOiVkOiB3YXJuaW5nOiB2YWx1ZSBgJWxkJyBpcyBncmVhdGVy
IHRoYW4gbWF4aW11bSBib3VuZCAnJWxkJ1xuIiwKKyAgICAgICAgICAgICAgICAgICAgY2ZnLT5j
b25maWdfc291cmNlLCBzZXQtPmxpbmVubywgbCwgbWF4KTsKKyAgICAgICAgcmV0dXJuIEVJTlZB
TDsKKyAgICB9CisKICAgICAqdmFsdWVfcj0gbDsKICAgICByZXR1cm4gMDsKIH0KIAoraW50IHhs
dV9jZmdfZ2V0X2xvbmcoY29uc3QgWExVX0NvbmZpZyAqY2ZnLCBjb25zdCBjaGFyICpuLAorICAg
ICAgICAgICAgICAgICAgICAgbG9uZyAqdmFsdWVfciwgaW50IGRvbnRfd2FybikgeworICAgIHJl
dHVybiB4bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmcoY2ZnLCBuLCBMT05HX01JTiwgTE9OR19NQVgs
IHZhbHVlX3IsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb250X3dhcm4p
OworfQorCiBpbnQgeGx1X2NmZ19nZXRfZGVmYm9vbChjb25zdCBYTFVfQ29uZmlnICpjZmcsIGNv
bnN0IGNoYXIgKm4sIGxpYnhsX2RlZmJvb2wgKmIsCiAgICAgICAgICAgICAgICAgICAgICBpbnQg
ZG9udF93YXJuKQogewpkaWZmIC0tZ2l0IGEvdG9vbHMvbGlieGwvbGlieGx1dGlsLmggYi90b29s
cy9saWJ4bC9saWJ4bHV0aWwuaAppbmRleCAwNTdjYzI1Y2IyLi45MmUzNWM1NDYyIDEwMDY0NAot
LS0gYS90b29scy9saWJ4bC9saWJ4bHV0aWwuaAorKysgYi90b29scy9saWJ4bC9saWJ4bHV0aWwu
aApAQCAtNjMsNiArNjMsOCBAQCBpbnQgeGx1X2NmZ19yZXBsYWNlX3N0cmluZyhjb25zdCBYTFVf
Q29uZmlnICpjZmcsIGNvbnN0IGNoYXIgKm4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
aGFyICoqdmFsdWVfciwgaW50IGRvbnRfd2Fybik7CiBpbnQgeGx1X2NmZ19nZXRfbG9uZyhjb25z
dCBYTFVfQ29uZmlnKiwgY29uc3QgY2hhciAqbiwgbG9uZyAqdmFsdWVfciwKICAgICAgICAgICAg
ICAgICAgICAgIGludCBkb250X3dhcm4pOworaW50IHhsdV9jZmdfZ2V0X2JvdW5kZWRfbG9uZyhj
b25zdCBYTFVfQ29uZmlnKiwgY29uc3QgY2hhciAqbiwgbG9uZyBtaW4sCisgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGxvbmcgbWF4LCBsb25nICp2YWx1ZV9yLCBpbnQgZG9udF93YXJuKTsK
IGludCB4bHVfY2ZnX2dldF9kZWZib29sKGNvbnN0IFhMVV9Db25maWcqLCBjb25zdCBjaGFyICpu
LCBsaWJ4bF9kZWZib29sICpiLAogICAgICAgICAgICAgICAgICAgICAgaW50IGRvbnRfd2Fybik7
CiAKZGlmZiAtLWdpdCBhL3Rvb2xzL3B5dGhvbi94ZW4vbG93bGV2ZWwveGMveGMuYyBiL3Rvb2xz
L3B5dGhvbi94ZW4vbG93bGV2ZWwveGMveGMuYwppbmRleCA0NGQzNjA2MTQxLi5hNzUxZTg1OTEw
IDEwMDY0NAotLS0gYS90b29scy9weXRob24veGVuL2xvd2xldmVsL3hjL3hjLmMKKysrIGIvdG9v
bHMvcHl0aG9uL3hlbi9sb3dsZXZlbC94Yy94Yy5jCkBAIC0xMjcsOCArMTI3LDggQEAgc3RhdGlj
IFB5T2JqZWN0ICpweXhjX2RvbWFpbl9jcmVhdGUoWGNPYmplY3QgKnNlbGYsCiAgICAgICAgIH0s
CiAgICAgICAgIC5tYXhfdmNwdXMgPSAxLAogICAgICAgICAubWF4X2V2dGNobl9wb3J0ID0gLTEs
IC8qIE5vIGxpbWl0LiAqLwotICAgICAgICAubWF4X2dyYW50X2ZyYW1lcyA9IDMyLAotICAgICAg
ICAubWF4X21hcHRyYWNrX2ZyYW1lcyA9IDEwMjQsCisgICAgICAgIC5tYXhfZ3JhbnRfZnJhbWVz
ID0gLTEsCisgICAgICAgIC5tYXhfbWFwdHJhY2tfZnJhbWVzID0gLTEsCiAgICAgfTsKIAogICAg
IHN0YXRpYyBjaGFyICprd2RfbGlzdFtdID0geyAiZG9taWQiLCAic3NpZHJlZiIsICJoYW5kbGUi
LCAiZmxhZ3MiLApkaWZmIC0tZ2l0IGEvdG9vbHMveGwveGwuYyBiL3Rvb2xzL3hsL3hsLmMKaW5k
ZXggZGRkMjliM2YxYi4uOTIxYzY0ZjVlZCAxMDA2NDQKLS0tIGEvdG9vbHMveGwveGwuYworKysg
Yi90b29scy94bC94bC5jCkBAIC0yMyw2ICsyMyw3IEBACiAjaW5jbHVkZSA8Y3R5cGUuaD4KICNp
bmNsdWRlIDxpbnR0eXBlcy5oPgogI2luY2x1ZGUgPHJlZ2V4Lmg+CisjaW5jbHVkZSA8bGltaXRz
Lmg+CiAKICNpbmNsdWRlIDxsaWJ4bC5oPgogI2luY2x1ZGUgPGxpYnhsX3V0aWxzLmg+CkBAIC05
Niw3ICs5Nyw2IEBAIHN0YXRpYyB2b2lkIHBhcnNlX2dsb2JhbF9jb25maWcoY29uc3QgY2hhciAq
Y29uZmlnZmlsZSwKICAgICBYTFVfQ29uZmlnICpjb25maWc7CiAgICAgaW50IGU7CiAgICAgY29u
c3QgY2hhciAqYnVmOwotICAgIGxpYnhsX3BoeXNpbmZvIHBoeXNpbmZvOwogCiAgICAgY29uZmln
ID0geGx1X2NmZ19pbml0KHN0ZGVyciwgY29uZmlnZmlsZSk7CiAgICAgaWYgKCFjb25maWcpIHsK
QEAgLTE5NywxNiArMTk3LDExIEBAIHN0YXRpYyB2b2lkIHBhcnNlX2dsb2JhbF9jb25maWcoY29u
c3QgY2hhciAqY29uZmlnZmlsZSwKICAgICB4bHVfY2ZnX3JlcGxhY2Vfc3RyaW5nIChjb25maWcs
ICJjb2xvLmRlZmF1bHQucHJveHlzY3JpcHQiLAogICAgICAgICAmZGVmYXVsdF9jb2xvX3Byb3h5
X3NjcmlwdCwgMCk7CiAKLSAgICBpZiAoIXhsdV9jZmdfZ2V0X2xvbmcgKGNvbmZpZywgIm1heF9n
cmFudF9mcmFtZXMiLCAmbCwgMCkpCisgICAgaWYgKCF4bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmcg
KGNvbmZpZywgIm1heF9ncmFudF9mcmFtZXMiLCAwLCBJTlRfTUFYLAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAmbCwgMCkpCiAgICAgICAgIG1heF9ncmFudF9mcmFtZXMgPSBs
OwotICAgIGVsc2UgewotICAgICAgICBsaWJ4bF9waHlzaW5mb19pbml0KCZwaHlzaW5mbyk7Ci0g
ICAgICAgIG1heF9ncmFudF9mcmFtZXMgPSAobGlieGxfZ2V0X3BoeXNpbmZvKGN0eCwgJnBoeXNp
bmZvKSAhPSAwIHx8Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIShwaHlzaW5mby5tYXhf
cG9zc2libGVfbWZuID4+IDMyKSkKLSAgICAgICAgICAgICAgICAgICAgICAgICAgID8gMzIgOiA2
NDsKLSAgICAgICAgbGlieGxfcGh5c2luZm9fZGlzcG9zZSgmcGh5c2luZm8pOwotICAgIH0KLSAg
ICBpZiAoIXhsdV9jZmdfZ2V0X2xvbmcgKGNvbmZpZywgIm1heF9tYXB0cmFja19mcmFtZXMiLCAm
bCwgMCkpCisgICAgaWYgKCF4bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmcgKGNvbmZpZywgIm1heF9t
YXB0cmFja19mcmFtZXMiLCAwLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJ
TlRfTUFYLCAmbCwgMCkpCiAgICAgICAgIG1heF9tYXB0cmFja19mcmFtZXMgPSBsOwogCiAgICAg
bGlieGxfY3B1X2JpdG1hcF9hbGxvYyhjdHgsICZnbG9iYWxfdm1fYWZmaW5pdHlfbWFzaywgMCk7
CmRpZmYgLS1naXQgYS90b29scy94bC94bF9wYXJzZS5jIGIvdG9vbHMveGwveGxfcGFyc2UuYwpp
bmRleCAxMTJmOGVlMDI2Li41NTU5OTFkYWUzIDEwMDY0NAotLS0gYS90b29scy94bC94bF9wYXJz
ZS5jCisrKyBiL3Rvb2xzL3hsL3hsX3BhcnNlLmMKQEAgLTE0MTEsMTMgKzE0MTEsMTYgQEAgdm9p
ZCBwYXJzZV9jb25maWdfZGF0YShjb25zdCBjaGFyICpjb25maWdfc291cmNlLAogICAgICAgICAh
eGx1X2NmZ19nZXRfc3RyaW5nIChjb25maWcsICJjcHVzX3NvZnQiLCAmYnVmLCAwKSkKICAgICAg
ICAgcGFyc2VfdmNwdV9hZmZpbml0eShiX2luZm8sIGNwdXMsIGJ1ZiwgbnVtX2NwdXMsIGZhbHNl
KTsKIAotICAgIGlmICgheGx1X2NmZ19nZXRfbG9uZyAoY29uZmlnLCAibWF4X2dyYW50X2ZyYW1l
cyIsICZsLCAwKSkKKyAgICBpZiAoIXhsdV9jZmdfZ2V0X2JvdW5kZWRfbG9uZyAoY29uZmlnLCAi
bWF4X2dyYW50X2ZyYW1lcyIsIDAsIElOVF9NQVgsCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICZsLCAwKSkKICAgICAgICAgYl9pbmZvLT5tYXhfZ3JhbnRfZnJhbWVzID0gbDsK
ICAgICBlbHNlCiAgICAgICAgIGJfaW5mby0+bWF4X2dyYW50X2ZyYW1lcyA9IG1heF9ncmFudF9m
cmFtZXM7Ci0gICAgaWYgKCF4bHVfY2ZnX2dldF9sb25nIChjb25maWcsICJtYXhfbWFwdHJhY2tf
ZnJhbWVzIiwgJmwsIDApKQorCisgICAgaWYgKCF4bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmcgKGNv
bmZpZywgIm1heF9tYXB0cmFja19mcmFtZXMiLCAwLAorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBJTlRfTUFYLCAmbCwgMCkpCiAgICAgICAgIGJfaW5mby0+bWF4X21hcHRyYWNr
X2ZyYW1lcyA9IGw7Ci0gICAgZWxzZSBpZiAobWF4X21hcHRyYWNrX2ZyYW1lcyAhPSAtMSkKKyAg
ICBlbHNlCiAgICAgICAgIGJfaW5mby0+bWF4X21hcHRyYWNrX2ZyYW1lcyA9IG1heF9tYXB0cmFj
a19mcmFtZXM7CiAKICAgICBsaWJ4bF9kZWZib29sX3NldCgmYl9pbmZvLT5jbGFpbV9tb2RlLCBj
bGFpbV9tb2RlKTsKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL2FybS9zZXR1cC5jIGIveGVuL2FyY2gv
YXJtL3NldHVwLmMKaW5kZXggNTFkMzIxMDZiNy4uM2M4OTljZDRhMCAxMDA2NDQKLS0tIGEveGVu
L2FyY2gvYXJtL3NldHVwLmMKKysrIGIveGVuL2FyY2gvYXJtL3NldHVwLmMKQEAgLTc4OSw3ICs3
ODksNyBAQCB2b2lkIF9faW5pdCBzdGFydF94ZW4odW5zaWduZWQgbG9uZyBib290X3BoeXNfb2Zm
c2V0LAogICAgICAgICAuZmxhZ3MgPSBYRU5fRE9NQ1RMX0NERl9odm0gfCBYRU5fRE9NQ1RMX0NE
Rl9oYXAsCiAgICAgICAgIC5tYXhfZXZ0Y2huX3BvcnQgPSAtMSwKICAgICAgICAgLm1heF9ncmFu
dF9mcmFtZXMgPSBnbnR0YWJfZG9tMF9mcmFtZXMoKSwKLSAgICAgICAgLm1heF9tYXB0cmFja19m
cmFtZXMgPSBvcHRfbWF4X21hcHRyYWNrX2ZyYW1lcywKKyAgICAgICAgLm1heF9tYXB0cmFja19m
cmFtZXMgPSAtMSwKICAgICB9OwogICAgIGludCByYzsKIApkaWZmIC0tZ2l0IGEveGVuL2FyY2gv
eDg2L3NldHVwLmMgYi94ZW4vYXJjaC94ODYvc2V0dXAuYwppbmRleCAwMGVlODdiZGU1Li43ZDI3
ZjM2MDUzIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvc2V0dXAuYworKysgYi94ZW4vYXJjaC94
ODYvc2V0dXAuYwpAQCAtNjk3LDggKzY5Nyw4IEBAIHZvaWQgX19pbml0IG5vcmV0dXJuIF9fc3Rh
cnRfeGVuKHVuc2lnbmVkIGxvbmcgbWJpX3ApCiAgICAgc3RydWN0IHhlbl9kb21jdGxfY3JlYXRl
ZG9tYWluIGRvbTBfY2ZnID0gewogICAgICAgICAuZmxhZ3MgPSBJU19FTkFCTEVEKENPTkZJR19U
Qk9PVCkgPyBYRU5fRE9NQ1RMX0NERl9zM19pbnRlZ3JpdHkgOiAwLAogICAgICAgICAubWF4X2V2
dGNobl9wb3J0ID0gLTEsCi0gICAgICAgIC5tYXhfZ3JhbnRfZnJhbWVzID0gb3B0X21heF9ncmFu
dF9mcmFtZXMsCi0gICAgICAgIC5tYXhfbWFwdHJhY2tfZnJhbWVzID0gb3B0X21heF9tYXB0cmFj
a19mcmFtZXMsCisgICAgICAgIC5tYXhfZ3JhbnRfZnJhbWVzID0gLTEsCisgICAgICAgIC5tYXhf
bWFwdHJhY2tfZnJhbWVzID0gLTEsCiAgICAgfTsKIAogICAgIC8qIENyaXRpY2FsIHJlZ2lvbiB3
aXRob3V0IElEVCBvciBUU1MuICBBbnkgZmF1bHQgaXMgZGVhZGx5ISAqLwpkaWZmIC0tZ2l0IGEv
eGVuL2NvbW1vbi9ncmFudF90YWJsZS5jIGIveGVuL2NvbW1vbi9ncmFudF90YWJsZS5jCmluZGV4
IGIzNGQ1MjBmNmQuLmM1ZDQyMDEyMjMgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vZ3JhbnRfdGFi
bGUuYworKysgYi94ZW4vY29tbW9uL2dyYW50X3RhYmxlLmMKQEAgLTg0LDExICs4NCw0MyBAQCBz
dHJ1Y3QgZ3JhbnRfdGFibGUgewogICAgIHN0cnVjdCBncmFudF90YWJsZV9hcmNoIGFyY2g7CiB9
OwogCitzdGF0aWMgaW50IF9faW5pdCBwYXJzZV9nbnR0YWJfbGltaXQoY29uc3QgY2hhciAqcGFy
YW0sIGNvbnN0IGNoYXIgKmFyZywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1bnNpZ25lZCBpbnQgKnZhbHApCit7CisgICAgY29uc3QgY2hhciAqZTsKKyAgICB1bnNpZ25l
ZCBsb25nIHZhbDsKKworICAgIHZhbCA9IHNpbXBsZV9zdHJ0b3VsKGFyZywgJmUsIDApOworICAg
IGlmICggKmUgKQorICAgICAgICByZXR1cm4gLUVJTlZBTDsKKworICAgIGlmICggdmFsIDw9IElO
VF9NQVggKQorICAgICAgICAqdmFscCA9IHZhbDsKKyAgICBlbHNlCisgICAgICAgIHByaW50aygi
cGFyYW1ldGVyIFwiJXNcIiB2YWx1ZSBcIiVzXCIgaXMgb3V0IG9mIHJhbmdlOyB1c2luZyB2YWx1
ZSBcIiV1XCJcbiIsCisgICAgICAgICAgICAgICBwYXJhbSwgYXJnLCAqdmFscCk7CisKKyAgICBy
ZXR1cm4gMDsKK30KKwogdW5zaWduZWQgaW50IF9fcmVhZF9tb3N0bHkgb3B0X21heF9ncmFudF9m
cmFtZXMgPSA2NDsKLWludGVnZXJfcnVudGltZV9wYXJhbSgiZ250dGFiX21heF9mcmFtZXMiLCBv
cHRfbWF4X2dyYW50X2ZyYW1lcyk7CisKK3N0YXRpYyBpbnQgX19pbml0IHBhcnNlX2dudHRhYl9t
YXhfZnJhbWVzKGNvbnN0IGNoYXIgKmFyZykKK3sKKyAgICByZXR1cm4gcGFyc2VfZ250dGFiX2xp
bWl0KCJnbnR0YWJfbWF4X2ZyYW1lcyIsIGFyZywKKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICZvcHRfbWF4X2dyYW50X2ZyYW1lcyk7Cit9CitjdXN0b21fcnVudGltZV9wYXJhbSgiZ250
dGFiX21heF9mcmFtZXMiLCBwYXJzZV9nbnR0YWJfbWF4X2ZyYW1lcyk7CiAKIHVuc2lnbmVkIGlu
dCBfX3JlYWRfbW9zdGx5IG9wdF9tYXhfbWFwdHJhY2tfZnJhbWVzID0gMTAyNDsKLWludGVnZXJf
cnVudGltZV9wYXJhbSgiZ250dGFiX21heF9tYXB0cmFja19mcmFtZXMiLCBvcHRfbWF4X21hcHRy
YWNrX2ZyYW1lcyk7CisKK3N0YXRpYyBpbnQgX19pbml0IHBhcnNlX2dudHRhYl9tYXhfbWFwdHJh
Y2tfZnJhbWVzKGNvbnN0IGNoYXIgKmFyZykKK3sKKyAgICByZXR1cm4gcGFyc2VfZ250dGFiX2xp
bWl0KCJnbnR0YWJfbWF4X21hcHRyYWNrX2ZyYW1lcyIsIGFyZywKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICZvcHRfbWF4X21hcHRyYWNrX2ZyYW1lcyk7Cit9CitjdXN0b21fcnVudGlt
ZV9wYXJhbSgiZ250dGFiX21heF9tYXB0cmFja19mcmFtZXMiLAorICAgICAgICAgICAgICAgICAg
ICAgcGFyc2VfZ250dGFiX21heF9tYXB0cmFja19mcmFtZXMpOwogCiAjaWZuZGVmIEdOVFRBQl9N
QVhfVkVSU0lPTgogI2RlZmluZSBHTlRUQUJfTUFYX1ZFUlNJT04gMgpAQCAtMTgzNywxMiArMTg2
OSwxOCBAQCBhY3RpdmVfYWxsb2NfZmFpbGVkOgogICAgIHJldHVybiAtRU5PTUVNOwogfQogCi1p
bnQgZ3JhbnRfdGFibGVfaW5pdChzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBpbnQgbWF4X2dy
YW50X2ZyYW1lcywKLSAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBtYXhfbWFwdHJh
Y2tfZnJhbWVzKQoraW50IGdyYW50X3RhYmxlX2luaXQoc3RydWN0IGRvbWFpbiAqZCwgaW50IG1h
eF9ncmFudF9mcmFtZXMsCisgICAgICAgICAgICAgICAgICAgICBpbnQgbWF4X21hcHRyYWNrX2Zy
YW1lcykKIHsKICAgICBzdHJ1Y3QgZ3JhbnRfdGFibGUgKmd0OwogICAgIGludCByZXQgPSAtRU5P
TUVNOwogCisgICAgLyogRGVmYXVsdCB0byBtYXhpbXVtIHZhbHVlIGlmIG5vIHZhbHVlIHdhcyBz
cGVjaWZpZWQgKi8KKyAgICBpZiAoIG1heF9ncmFudF9mcmFtZXMgPCAwICkKKyAgICAgICAgbWF4
X2dyYW50X2ZyYW1lcyA9IG9wdF9tYXhfZ3JhbnRfZnJhbWVzOworICAgIGlmICggbWF4X21hcHRy
YWNrX2ZyYW1lcyA8IDAgKQorICAgICAgICBtYXhfbWFwdHJhY2tfZnJhbWVzID0gb3B0X21heF9t
YXB0cmFja19mcmFtZXM7CisKICAgICBpZiAoIG1heF9ncmFudF9mcmFtZXMgPCBJTklUSUFMX05S
X0dSQU5UX0ZSQU1FUyB8fAogICAgICAgICAgbWF4X2dyYW50X2ZyYW1lcyA+IG9wdF9tYXhfZ3Jh
bnRfZnJhbWVzIHx8CiAgICAgICAgICBtYXhfbWFwdHJhY2tfZnJhbWVzID4gb3B0X21heF9tYXB0
cmFja19mcmFtZXMgKQpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvcHVibGljL2RvbWN0bC5oIGIv
eGVuL2luY2x1ZGUvcHVibGljL2RvbWN0bC5oCmluZGV4IDlmMmNmZDYwMmMuLmUzMTNkYTQ5OWYg
MTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3B1YmxpYy9kb21jdGwuaAorKysgYi94ZW4vaW5jbHVk
ZS9wdWJsaWMvZG9tY3RsLmgKQEAgLTgyLDEzICs4MiwxNSBAQCBzdHJ1Y3QgeGVuX2RvbWN0bF9j
cmVhdGVkb21haW4gewogICAgIHVpbnQzMl90IGlvbW11X29wdHM7CiAKICAgICAvKgotICAgICAq
IFZhcmlvdXMgZG9tYWluIGxpbWl0cywgd2hpY2ggaW1wYWN0IHRoZSBxdWFudGl0eSBvZiByZXNv
dXJjZXMgKGdsb2JhbAotICAgICAqIG1hcHBpbmcgc3BhY2UsIHhlbmhlYXAsIGV0YykgYSBndWVz
dCBtYXkgY29uc3VtZS4KKyAgICAgKiBWYXJpb3VzIGRvbWFpbiBsaW1pdHMsIHdoaWNoIGltcGFj
dCB0aGUgcXVhbnRpdHkgb2YgcmVzb3VyY2VzCisgICAgICogKGdsb2JhbCBtYXBwaW5nIHNwYWNl
LCB4ZW5oZWFwLCBldGMpIGEgZ3Vlc3QgbWF5IGNvbnN1bWUuICBGb3IKKyAgICAgKiBtYXhfZ3Jh
bnRfZnJhbWVzIGFuZCBtYXhfbWFwdHJhY2tfZnJhbWVzLCA8IDAgbWVhbnMgInVzZSB0aGUKKyAg
ICAgKiBkZWZhdWx0IG1heGltdW0gdmFsdWUgaW4gdGhlIGh5cGVydmlzb3IiLgogICAgICAqLwog
ICAgIHVpbnQzMl90IG1heF92Y3B1czsKICAgICB1aW50MzJfdCBtYXhfZXZ0Y2huX3BvcnQ7Ci0g
ICAgdWludDMyX3QgbWF4X2dyYW50X2ZyYW1lczsKLSAgICB1aW50MzJfdCBtYXhfbWFwdHJhY2tf
ZnJhbWVzOworICAgIGludDMyX3QgbWF4X2dyYW50X2ZyYW1lczsKKyAgICBpbnQzMl90IG1heF9t
YXB0cmFja19mcmFtZXM7CiAKICAgICBzdHJ1Y3QgeGVuX2FyY2hfZG9tYWluY29uZmlnIGFyY2g7
CiB9OwpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL2dyYW50X3RhYmxlLmggYi94ZW4vaW5j
bHVkZS94ZW4vZ3JhbnRfdGFibGUuaAppbmRleCA2ZjkzNDVkOWVmLi4zNDg4NmJiNmY4IDEwMDY0
NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vZ3JhbnRfdGFibGUuaAorKysgYi94ZW4vaW5jbHVkZS94
ZW4vZ3JhbnRfdGFibGUuaApAQCAtMzYsOCArMzYsOCBAQCBleHRlcm4gdW5zaWduZWQgaW50IG9w
dF9tYXhfZ3JhbnRfZnJhbWVzOwogZXh0ZXJuIHVuc2lnbmVkIGludCBvcHRfbWF4X21hcHRyYWNr
X2ZyYW1lczsKIAogLyogQ3JlYXRlL2Rlc3Ryb3kgcGVyLWRvbWFpbiBncmFudCB0YWJsZSBjb250
ZXh0LiAqLwotaW50IGdyYW50X3RhYmxlX2luaXQoc3RydWN0IGRvbWFpbiAqZCwgdW5zaWduZWQg
aW50IG1heF9ncmFudF9mcmFtZXMsCi0gICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQg
bWF4X21hcHRyYWNrX2ZyYW1lcyk7CitpbnQgZ3JhbnRfdGFibGVfaW5pdChzdHJ1Y3QgZG9tYWlu
ICpkLCBpbnQgbWF4X2dyYW50X2ZyYW1lcywKKyAgICAgICAgICAgICAgICAgICAgIGludCBtYXhf
bWFwdHJhY2tfZnJhbWVzKTsKIHZvaWQgZ3JhbnRfdGFibGVfZGVzdHJveSgKICAgICBzdHJ1Y3Qg
ZG9tYWluICpkKTsKIHZvaWQgZ3JhbnRfdGFibGVfaW5pdF92Y3B1KHN0cnVjdCB2Y3B1ICp2KTsK
QEAgLTY4LDggKzY4LDggQEAgaW50IGdudHRhYl9nZXRfc3RhdHVzX2ZyYW1lKHN0cnVjdCBkb21h
aW4gKmQsIHVuc2lnbmVkIGxvbmcgaWR4LAogI2RlZmluZSBvcHRfbWF4X21hcHRyYWNrX2ZyYW1l
cyAwCiAKIHN0YXRpYyBpbmxpbmUgaW50IGdyYW50X3RhYmxlX2luaXQoc3RydWN0IGRvbWFpbiAq
ZCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IG1heF9n
cmFudF9mcmFtZXMsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVk
IGludCBtYXhfbWFwdHJhY2tfZnJhbWVzKQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpbnQgbWF4X2dyYW50X2ZyYW1lcywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgaW50IG1heF9tYXB0cmFja19mcmFtZXMpCiB7CiAgICAgcmV0dXJuIDA7CiB9Ci0tIAoy
LjIwLjEKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpY
ZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRw
czovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id A0D521831F1
	for <lists+xen-devel@lfdr.de>; Thu, 12 Mar 2020 14:47:02 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jCO8I-0002Sz-Dh; Thu, 12 Mar 2020 13:44:18 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=+15/=45=gmail.com=raistlin.df@srs-us1.protection.inumbo.net>)
 id 1jCO8H-0002Sr-6L
 for xen-devel@lists.xenproject.org; Thu, 12 Mar 2020 13:44:17 +0000
X-Inumbo-ID: 90c17b84-6467-11ea-bec1-bc764e2007e4
Received: from mail-wm1-f65.google.com (unknown [209.85.128.65])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 90c17b84-6467-11ea-bec1-bc764e2007e4;
 Thu, 12 Mar 2020 13:44:16 +0000 (UTC)
Received: by mail-wm1-f65.google.com with SMTP id e26so6353329wme.5
 for <xen-devel@lists.xenproject.org>; Thu, 12 Mar 2020 06:44:16 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:from:to:cc:date:message-id:in-reply-to
 :references:user-agent:mime-version:content-transfer-encoding;
 bh=98rImuk8IgJ1Sk8C9NZCFORwdYVoL50Apj68nHt8iOs=;
 b=gbfGvL90gexOJw1vxigawF0PoGDzt7oJ3RWt9TovQVgJ/JXAhjg6aaYD7GftauD6ow
 ON+jC4as1D9kx+I+IKuZqW/TZUEoLw6ppBeWYjyzthGbElcbKzYmlbkxhe2qP9fsYJM0
 QTGQiZcycy+6htYNHds4PR2rwNxz7zcOpNvw+xsGUaCGvgPOHA2ZRz4tM2pvsIkgMrSQ
 qtpvOYA4TA5qCHLp16svU07dW+L4rxenGpLwFekfyfrUqYLPrOLyLyh2kteG880PFdF0
 1U7ajVFzONMHWngdLc96EDj4Zq9eZeQq6vjpOFN6ltFqJmf9I0ZItWMHGR5MsD59aGLK
 E2MQ==
X-Gm-Message-State: ANhLgQ35FkB3CUimMoVSyHsmCeI0l8D/TKM3gxIrMyt9ly21CgXJatwi
 tRf5dT9WuPTeICNhCik8X4AWjJ3NQl4=
X-Google-Smtp-Source: ADFU+vuw0C1Ft5UK6/Rw6nUF9pEZrM6dQcfnjCcOOEZJOV2XMB+TEKCabEoti3XVGNLtP12LdlMx6g==
X-Received: by 2002:a1c:b686:: with SMTP id g128mr166104wmf.75.1584020655642; 
 Thu, 12 Mar 2020 06:44:15 -0700 (PDT)
Received: from [192.168.0.36] (87.78.186.89.cust.ip.kpnqwest.it.
 [89.186.78.87])
 by smtp.gmail.com with ESMTPSA id 7sm1086475wmf.20.2020.03.12.06.44.14
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 12 Mar 2020 06:44:15 -0700 (PDT)
From: Dario Faggioli <dfaggioli@suse.com>
To: xen-devel@lists.xenproject.org
Date: Thu, 12 Mar 2020 14:44:14 +0100
Message-ID: <158402065414.753.15785539969715690913.stgit@Palanthas>
In-Reply-To: <158402056376.753.7091379488590272336.stgit@Palanthas>
References: <158402056376.753.7091379488590272336.stgit@Palanthas>
User-Agent: StGit/0.21
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH 1/2] xen: credit2: avoid vCPUs to ever reach
 lower credits than idle
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Charles Arnold <carnold@suse.com>,
 Tomas Mozes <hydrapolic@gmail.com>, Glen <glenbarney@gmail.com>,
 George Dunlap <george.dunlap@citrix.com>, Jan Beulich <jbeulich@suse.com>,
 Sarah Newman <srn@prgmr.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlcmUgaGF2ZSBiZWVuIHJlcG9ydCBvZiBzdGFsbHMgb2YgZ3Vlc3QgdkNQVXMsIHdoZW4gQ3Jl
ZGl0MiB3YXMgdXNlZC4KSXQgc2VlbWVkIGxpa2UgdGhlc2UgdkNQVXMgd2VyZSBub3QgZ2V0dGlu
ZyBzY2hlZHVsZWQgZm9yIHZlcnkgbG9uZwp0aW1lLCBldmVuIHVuZGVyIGxpZ2h0IGxvYWQgY29u
ZGl0aW9ucyAoZS5nLiwgZHVyaW5nIGRvbTAgYm9vdCkuCgpJbnZlc3RpZ2F0aW9ucyBsZWQgdG8g
dGhlIGRpc2NvdmVyeSB0aGF0IC0tYWx0aG91Z2ggcmFyZWx5LS0gaXQgY2FuCmhhcHBlbiB0aGF0
IGEgdkNQVSBtYW5hZ2VzIHRvIHJ1biBmb3IgdmVyeSBsb25nIHRpbWVzbGljZXMuIEluIENyZWRp
dDIsCnRoaXMgbWVhbnMgdGhhdCwgd2hlbiBydW50aW1lIGFjY291bnRpbmcgaGFwcGVucywgdGhl
IHZDUFUgd2lsbCBsb3NlIGEKbGFyZ2UgcXVhbnRpdHkgb2YgY3JlZGl0cy4gVGhpcyBpbiB0dXJu
IG1heSBsZWFkIHRvIHRoZSB2Q1BVIGhhdmluZyBsZXNzCmNyZWRpdHMgdGhhbiB0aGUgaWRsZSB2
Q1BVcyAoLTJeMzApLiBBdCB0aGlzIHBvaW50LCB0aGUgc2NoZWR1bGVyIHdpbGwKcGljayB0aGUg
aWRsZSB2Q1BVLCBpbnN0ZWFkIG9mIHRoZSByZWFkeSB0byBydW4gdkNQVSwgZm9yIGEgZmV3CiJl
cG9jaHMiLCB3aGljaCBvZnRlbiB0aW1lcyBpcyBlbm91Z2ggZm9yIHRoZSBndWVzdCBrZXJuZWwg
dG8gdGhpbmsgdGhlCnZDUFUgaXMgbm90IHJlc3BvbmRpbmcgYW5kIGNyYXNoaW5nLgoKQW4gZXhh
bXBsZSBvZiB0aGlzIHNpdHVhdGlvbiBpcyBzaG93biBoZXJlLiBJbiBmYWN0LCB3ZSBjYW4gc2Vl
IGQwdjEKc2l0dGluZyBpbiB0aGUgcnVucXVldWUgd2hpbGUgYWxsIHRoZSBDUFVzIGFyZSBpZGxl
LCBhcyBpdCBoYXMKLTEyNTQyMzgyNzAgY3JlZGl0cywgd2hpY2ggaXMgc21hbGxlciB0aGFuIC0y
XjMwID0g4oiSMTA3Mzc0MTgyNDoKCiAgICAoWEVOKSBSdW5xdWV1ZSAwOgogICAgKFhFTikgICBu
Y3B1cyAgICAgICAgICAgICAgPSAyOAogICAgKFhFTikgICBjcHVzICAgICAgICAgICAgICAgPSAw
LTI3CiAgICAoWEVOKSAgIG1heF93ZWlnaHQgICAgICAgICA9IDI1NgogICAgKFhFTikgICBwaWNr
X2JpYXMgICAgICAgICAgPSAyMgogICAgKFhFTikgICBpbnN0bG9hZCAgICAgICAgICAgPSAxCiAg
ICAoWEVOKSAgIGF2ZWxvYWQgICAgICAgICAgICA9IDI5MzM5MSAofjExMSUpCiAgICAoWEVOKSAg
IGlkbGVyczogMDAsMDAwMDAwMDAsMDAwMDAwMDAsMDAwMDAwMDAsMDAwMDAwMDAsMDAwMDAwMDAs
MGZmZmZmZmYKICAgIChYRU4pICAgdGlja2xlZDogMDAsMDAwMDAwMDAsMDAwMDAwMDAsMDAwMDAw
MDAsMDAwMDAwMDAsMDAwMDAwMDAsMDAwMDAwMDAKICAgIChYRU4pICAgZnVsbHkgaWRsZSBjb3Jl
czogMDAsMDAwMDAwMDAsMDAwMDAwMDAsMDAwMDAwMDAsMDAwMDAwMDAsMDAwMDAwMDAsMGZmZmZm
ZmYKICAgIFsuLi5dCiAgICAoWEVOKSBSdW5xdWV1ZSAwOgogICAgKFhFTikgQ1BVWzAwXSBydW5x
PTAsIHNpYmxpbmc9MDAsLi4uLCBjb3JlPTAwLC4uLgogICAgKFhFTikgQ1BVWzAxXSBydW5xPTAs
IHNpYmxpbmc9MDAsLi4uLCBjb3JlPTAwLC4uLgogICAgWy4uLl0KICAgIChYRU4pIENQVVsyNl0g
cnVucT0wLCBzaWJsaW5nPTAwLC4uLiwgY29yZT0wMCwuLi4KICAgIChYRU4pIENQVVsyN10gcnVu
cT0wLCBzaWJsaW5nPTAwLC4uLiwgY29yZT0wMCwuLi4KICAgIChYRU4pIFJVTlE6CiAgICAoWEVO
KSAgICAgMDogWzAuMV0gZmxhZ3M9MCBjcHU9NSBjcmVkaXQ9LTEyNTQyMzgyNzAgW3c9MjU2XSBs
b2FkPTI2MjE0NCAofjEwMCUpCgpXZSBjZXJ0YWlubHkgZG9uJ3Qgd2FudCwgdW5kZXIgYW55IGNp
cmN1bXN0YW5jZSwgdGhpcyB0byBoYXBwZW4uClRoZXJlZm9yZSwgbGV0J3MgdXNlIElOVF9NSU4g
Zm9yIHRoZSBjcmVkaXRzIG9mIHRoZSBpZGxlIHZDUFUsIGluCkNyZWRpdDIsIHRvIGJlIHN1cmUg
dGhhdCBubyB2Q1BVIGNhbiBnZXQgYmVsb3cgdGhhdCB2YWx1ZS4KCk5PVEU6IGludmVzdGlnYXRp
b25zIGhhdmUgYmVlbiBkb25lIGFib3V0IF9ob3dfIGl0IGlzIHBvc3NpYmxlIGZvciBhCnZDUFUg
dG8gZXhlY3V0ZSBmb3Igc28gbG9uZyB0aGF0IGl0cyBjcmVkaXRzIGJlY29tZXMgc28gbG93LiBX
aGlsZSBzdGlsbApub3QgY29tcGxldGVseSBjbGVhciwgdGhlcmUgYXJlIGV2aWRlbmNlIHRoYXQ6
Ci0gaXQgb25seSBoYXBwZW5zIHZlcnkgcmFyZWx5Ci0gaXQgYXBwZWFycyB0byBiZSBib3RoIG1h
Y2hpbmUgYW5kIHdvcmtsb2FkIHNwZWNpZmljCi0gaXQgZG9lcyBub3QgbG9vayB0byBiZSBhIENy
ZWRpdDIgKGUuZy4sIGFzIGl0IGhhcHBlbnMgd2hlbiBydW5uaW5nCiAgd2l0aCBDcmVkaXQxIGFz
IHdlbGwpIGlzc3VlLCBvciBhIHNjaGVkdWxlciBpc3N1ZQoKVGhpcyBwYXRjaCBtYWtlcyBDcmVk
aXQyIG1vcmUgcm9idXN0IHRvIGV2ZW50cyBsaWtlIHRoaXMsIHdoYXRldmVyCnRoZSBjYXVzZSBp
cywgYW5kIHNob3VsZCBoZW5jZSBiZSBiYWNrcG9ydGVkIChhcyBmYXIgYXMgcG9zc2libGUpLgoK
U2lnbmVkLW9mZi1ieTogRGFyaW8gRmFnZ2lvbGkgPGRmYWdnaW9saUBzdXNlLmNvbT4KUmVwb3J0
ZWQtYnk6IEdsZW4gPGdsZW5iYXJuZXlAZ21haWwuY29tPgpSZXBvcnRlZC1ieTogVG9tYXMgTW96
ZXMgPGh5ZHJhcG9saWNAZ21haWwuY29tPgotLS0KQ2M6IEdlb3JnZSBEdW5sYXAgPGdlb3JnZS5k
dW5sYXBAY2l0cml4LmNvbT4KQ2M6IEp1ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNvbT4KQ2M6
IEphbiBCZXVsaWNoIDxqYmV1bGljaEBzdXNlLmNvbT4KQ2M6IENoYXJsZXMgQXJub2xkIDxjYXJu
b2xkQHN1c2UuY29tPgpDYzogU2FyYWggTmV3bWFuIDxzcm5AcHJnbXIuY29tPgotLS0KSSB3aWxs
IHByb3ZpZGUgdGhlIGJhY2twb3J0cyBteXNlbGYsIGF0IGxlYXN0IGZvciA0LjEzIGFuZCA0LjEy
LnggKGFuZApmZWVsIGZyZWUgdG8gYXNrIGZvciBtb3JlKS4KLS0tCkZvciBTYXJhaCwgbG9va2lu
ZyBiYWNrIGF0IHRoZSB2YXJpb3VzIHRocmVhZHMsIEkgYW0gbm90IHF1aXRlIHN1cmUKd2hldGhl
ciB5b3UgYWxzbyBleHBlcmllbmNlZCB0aGUgaXNzdWUgYW5kIHJlcG9ydGVkIGl0LiBJZiB5ZXMs
IEknbQpoYXBweSB0byBhZGQgYSAiUmVwb3J0ZWQtYnk6IiBsaW5lIGFib3V0IHlvdSB0b28gKG9y
LCBpZiB0aGlzIGlzIGZpbmUgdG8KZ28gaW4sIGZvciB0aGlzIHRvIGJlIGRvbmUgd2hpbGUgY29t
bWl0dGluZywgaWYgcG9zc2libGUpLgotLS0KIHhlbi9jb21tb24vc2NoZWQvY3JlZGl0Mi5jIHwg
ICAgMiArLQogMSBmaWxlIGNoYW5nZWQsIDEgaW5zZXJ0aW9uKCspLCAxIGRlbGV0aW9uKC0pCgpk
aWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZC9jcmVkaXQyLmMgYi94ZW4vY29tbW9uL3NjaGVk
L2NyZWRpdDIuYwppbmRleCBjNzI0MTk0NGE4Li41YzBhYjljZDA1IDEwMDY0NAotLS0gYS94ZW4v
Y29tbW9uL3NjaGVkL2NyZWRpdDIuYworKysgYi94ZW4vY29tbW9uL3NjaGVkL2NyZWRpdDIuYwpA
QCAtMjM0LDcgKzIzNCw3IEBACiAgKiB1bml0cyBkb2VzIG5vdCBjb25zdW1lIGNyZWRpdHMsIGFu
ZCBpdCBtdXN0IGJlIGxvd2VyIHRoYW4gd2hhdGV2ZXIKICAqIGFtb3VudCBvZiBjcmVkaXQgJ3Jl
Z3VsYXInIHVuaXQgd291bGQgZW5kIHVwIHdpdGguCiAgKi8KLSNkZWZpbmUgQ1NDSEVEMl9JRExF
X0NSRURJVCAgICAgICAgICAoLSgxVTw8MzApKQorI2RlZmluZSBDU0NIRUQyX0lETEVfQ1JFRElU
ICAgICAgICAgIElOVF9NSU4KIC8qCiAgKiBDYXJyeW92ZXI6IEhvdyBtdWNoICJleHRyYSIgY3Jl
ZGl0IG1heSBiZSBjYXJyaWVkIG92ZXIgYWZ0ZXIKICAqIGEgcmVzZXQuCgoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlz
dApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

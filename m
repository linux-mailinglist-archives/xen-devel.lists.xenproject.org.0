Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2A08F64B97
	for <lists+xen-devel@lfdr.de>; Wed, 10 Jul 2019 19:43:21 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hlGZ4-0006C4-Ld; Wed, 10 Jul 2019 17:39:34 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=ELaq=VH=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hlGZ2-0006Bz-H5
 for xen-devel@lists.xenproject.org; Wed, 10 Jul 2019 17:39:32 +0000
X-Inumbo-ID: abf46d5a-a339-11e9-8980-bc764e045a96
Received: from foss.arm.com (unknown [217.140.110.172])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTP
 id abf46d5a-a339-11e9-8980-bc764e045a96;
 Wed, 10 Jul 2019 17:39:30 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 54818344;
 Wed, 10 Jul 2019 10:39:30 -0700 (PDT)
Received: from [10.119.48.3] (unknown [10.119.48.3])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id E55E93F246;
 Wed, 10 Jul 2019 10:39:29 -0700 (PDT)
To: Stefano Stabellini <sstabellini@kernel.org>, xen-devel@lists.xenproject.org
References: <alpine.DEB.2.21.1906181618130.2072@sstabellini-ThinkPad-T480s>
 <20190618232019.26425-2-sstabellini@kernel.org>
From: Julien Grall <julien.grall@arm.com>
Message-ID: <c5db2b45-d992-8a17-8921-04aa09fa64e7@arm.com>
Date: Wed, 10 Jul 2019 18:39:29 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.2
MIME-Version: 1.0
In-Reply-To: <20190618232019.26425-2-sstabellini@kernel.org>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v3 2/5] xen: extend
 XEN_DOMCTL_memory_mapping to handle memory policy
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <stefanos@xilinx.com>, JBeulich@suse.com,
 andrew.cooper3@citrix.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGksCgpPbiA2LzE5LzE5IDEyOjIwIEFNLCBTdGVmYW5vIFN0YWJlbGxpbmkgd3JvdGU6Cj4gUmV1
c2UgdGhlIGV4aXN0aW5nIHBhZGRpbmcgZmllbGQgdG8gcGFzcyBtZW1vcnkgcG9saWN5IGluZm9y
bWF0aW9uLiBPbgo+IEFybSwgdGhlIGNhbGxlciBjYW4gc3BlY2lmeSB3aGV0aGVyIHRoZSBtZW1v
cnkgc2hvdWxkIGJlIG1hcHBlZCBhcwo+IERldmljZS1uR25SRSAoRGV2aWNlIE1lbW9yeSBvbiBB
cm12NykgYXQgc3RhZ2UtMiwgd2hpY2ggaXMgdGhlIGRlZmF1bHQKPiBhbmQgdGhlIG9ubHkgcG9z
c2liaWxpdHkgdG9kYXksIG9yIGNhY2hlYWJsZSBtZW1vcnkgd3JpdGUtYmFjay4gVGhlCj4gcmVz
dWx0aW5nIG1lbW9yeSBhdHRyaWJ1dGVzIHdpbGwgYmUgYSBjb21iaW5hdGlvbiBvZiBzdGFnZS0y
IGFuZCBzdGFnZS0xCj4gbWVtb3J5IGF0dHJpYnV0ZXM6IGl0IHdpbGwgYWN0dWFsbHkgYmUgdGhl
IHN0cm9uZ2VzdCBiZXR3ZWVuIHRoZSAyCj4gc3RhZ2VzIGF0dHJpYnV0ZXMuCj4gCj4gT24geDg2
LCB0aGUgb25seSBvcHRpb24gaXMgdW5jYWNoYWJsZS4gVGhlIGN1cnJlbnQgYmVoYXZpb3IgYmVj
b21lcyB0aGUKPiBkZWZhdWx0IChudW1lcmljYWxseSAnMCcpLiBBbHNvIGV4cGxpY2l0ZWx5IHNl
dCB0aGUgbWVtb3J5X3BvbGljeSBmaWVsZAo+IHRvIDAgaW4gbGlieGMuCj4gCj4gT24gQVJNLCBt
YXAgRGV2aWNlLW5HblJFIGFzIHAybV9tbWlvX2RpcmVjdF9kZXYgKGFzIGl0IGlzIGFscmVhZHkg
ZG9uZQoKcy9BUk0vQXJtLwoKPiB0b2RheSkgYW5kIFdCIGNhY2hlYWJsZSBtZW1vcnkgYXMgcDJt
X21taW9fZGlyZWN0X2MuCj4gCj4gT24geDg2LCByZXR1cm4gZXJyb3IgaWYgdGhlIG1lbW9yeSBw
b2xpY3kgcmVxdWVzdGVkIGlzIG5vdAo+IE1FTU9SWV9QT0xJQ1lfWDg2X1VDX01JTlVTLgo+IAo+
IFNpZ25lZC1vZmYtYnk6IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3RlZmFub3NAeGlsaW54LmNvbT4K
PiBDQzogSkJldWxpY2hAc3VzZS5jb20KPiBDQzogYW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbQo+
IAo+IC0tLQo+IAo+IEFuZHJldyBzdWdnZXN0ZWQgdG8gcmVtb3ZlIE1FTU9SWV9QT0xJQ1lfWDg2
X1VDX01JTlVTIGNvbXBsZXRlbHkuCj4gSWYgdGhhdCdzIHRoZSBjb25zZW5zdXMgSSBhbSBoYXBw
eSB0byByZXNwaW4gdGhlIHNlcmllcyByZW1vdmluZyBjb2RlLgo+IAo+IAo+IENoYW5nZXMgaW4g
djM6Cj4gLSBlcnJvciBoYW5kbGluZyBpbiBkZWZhdWx0IGxhYmVsIG9mIHRoZSBzd2l0Y2gKPiAt
IHNldCBtZW1vcnlfcG9saWN5IHRvIDAgaW4gbGlieGMKPiAtIGltcHJvdmUgY29tbWl0IG1lc3Nh
Z2UKPiAtIGltcHJvdmUgY29tbWVudHMKPiAtIHMvRGV2aWNlLW5HUkUvRGV2aWNlLW5HblJFL2cK
PiAtIGFkZCBpbi1jb2RlIGNvbW1lbnQKPiAtIHMvTUVNT1JZX1BPTElDWV9YODZfVUMvTUVNT1JZ
X1BPTElDWV9YODZfVUNfTUlOVVMvZwo+IC0gI2lmZGVmIGh5cGVyY2FsbCBkZWZpbmVzIGFjY29y
ZGluZyB0byBhcmNoCj4gCj4gQ2hhbmdlcyBpbiB2MjoKPiAtIHJlYmFzZQo+IC0gdXNlIHAybV9t
bWlvX2RpcmVjdF9jCj4gLSB1c2UgRU9QTk9UU1VQUAo+IC0gcmVuYW1lIGNhY2hlX3BvbGljeSB0
byBtZW1vcnkgcG9saWN5Cj4gLSByZW5hbWUgTUVNT1JZX1BPTElDWV9ERVZNRU0gdG8gTUVNT1JZ
X1BPTElDWV9BUk1fREVWX25HUkUKPiAtIHJlbmFtZSBNRU1PUllfUE9MSUNZX01FTU9SWSB0byBN
RU1PUllfUE9MSUNZX0FSTV9NRU1fV0IKPiAtIGFkZCBNRU1PUllfUE9MSUNZX1g4Nl9VQwo+IC0g
YWRkIE1FTU9SWV9QT0xJQ1lfREVGQVVMVCBhbmQgdXNlIGl0Cj4gLS0tCj4gICB0b29scy9saWJ4
Yy94Y19kb21haW4uYyAgICAgfCAgMSArCj4gICB4ZW4vY29tbW9uL2RvbWN0bC5jICAgICAgICAg
fCAyNCArKysrKysrKysrKysrKysrKysrKysrLS0KPiAgIHhlbi9pbmNsdWRlL3B1YmxpYy9kb21j
dGwuaCB8IDIzICsrKysrKysrKysrKysrKysrKysrKystCj4gICAzIGZpbGVzIGNoYW5nZWQsIDQ1
IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL3Rvb2xzL2xp
YnhjL3hjX2RvbWFpbi5jIGIvdG9vbHMvbGlieGMveGNfZG9tYWluLmMKPiBpbmRleCAwNWQ3NzFm
MmNlLi44NTMxMjk4NTYzIDEwMDY0NAo+IC0tLSBhL3Rvb2xzL2xpYnhjL3hjX2RvbWFpbi5jCj4g
KysrIGIvdG9vbHMvbGlieGMveGNfZG9tYWluLmMKPiBAQCAtMjA3MCw2ICsyMDcwLDcgQEAgaW50
IHhjX2RvbWFpbl9tZW1vcnlfbWFwcGluZygKPiAgICAgICBkb21jdGwuY21kID0gWEVOX0RPTUNU
TF9tZW1vcnlfbWFwcGluZzsKPiAgICAgICBkb21jdGwuZG9tYWluID0gZG9taWQ7Cj4gICAgICAg
ZG9tY3RsLnUubWVtb3J5X21hcHBpbmcuYWRkX21hcHBpbmcgPSBhZGRfbWFwcGluZzsKPiArICAg
IGRvbWN0bC51Lm1lbW9yeV9tYXBwaW5nLm1lbW9yeV9wb2xpY3kgPSAwOwo+ICAgICAgIG1heF9i
YXRjaF9zeiA9IG5yX21mbnM7Cj4gICAgICAgZG8KPiAgICAgICB7Cj4gZGlmZiAtLWdpdCBhL3hl
bi9jb21tb24vZG9tY3RsLmMgYi94ZW4vY29tbW9uL2RvbWN0bC5jCj4gaW5kZXggYzZmZDg4ZDI4
NS4uZjIxZjY5NTdiMCAxMDA2NDQKPiAtLS0gYS94ZW4vY29tbW9uL2RvbWN0bC5jCj4gKysrIGIv
eGVuL2NvbW1vbi9kb21jdGwuYwo+IEBAIC05MjgsNiArOTI4LDcgQEAgbG9uZyBkb19kb21jdGwo
WEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh4ZW5fZG9tY3RsX3QpIHVfZG9tY3RsKQo+ICAgICAgICAg
ICB1bnNpZ25lZCBsb25nIG1mbl9lbmQgPSBtZm4gKyBucl9tZm5zIC0gMTsKPiAgICAgICAgICAg
aW50IGFkZCA9IG9wLT51Lm1lbW9yeV9tYXBwaW5nLmFkZF9tYXBwaW5nOwo+ICAgICAgICAgICBw
Mm1fdHlwZV90IHAybXQ7Cj4gKyAgICAgICAgdWludDMyX3QgbWVtb3J5X3BvbGljeSA9IG9wLT51
Lm1lbW9yeV9tYXBwaW5nLm1lbW9yeV9wb2xpY3k7Cj4gICAKPiAgICAgICAgICAgcmV0ID0gLUVJ
TlZBTDsKPiAgICAgICAgICAgaWYgKCBtZm5fZW5kIDwgbWZuIHx8IC8qIHdyYXA/ICovCj4gQEAg
LTk1OCw5ICs5NTksMjggQEAgbG9uZyBkb19kb21jdGwoWEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh4
ZW5fZG9tY3RsX3QpIHVfZG9tY3RsKQo+ICAgICAgICAgICBpZiAoIGFkZCApCj4gICAgICAgICAg
IHsKPiAgICAgICAgICAgICAgIHByaW50ayhYRU5MT0dfR19ERUJVRwo+IC0gICAgICAgICAgICAg
ICAgICAgIm1lbW9yeV9tYXA6YWRkOiBkb20lZCBnZm49JWx4IG1mbj0lbHggbnI9JWx4XG4iLAo+
IC0gICAgICAgICAgICAgICAgICAgZC0+ZG9tYWluX2lkLCBnZm4sIG1mbiwgbnJfbWZucyk7Cj4g
KyAgICAgICAgICAgICAgICAgICAibWVtb3J5X21hcDphZGQ6IGRvbSVkIGdmbj0lbHggbWZuPSVs
eCBucj0lbHggY2FjaGU9JXVcbiIsCj4gKyAgICAgICAgICAgICAgICAgICBkLT5kb21haW5faWQs
IGdmbiwgbWZuLCBucl9tZm5zLCBtZW1vcnlfcG9saWN5KTsKPiAgIAo+ICsgICAgICAgICAgICBz
d2l0Y2ggKCBtZW1vcnlfcG9saWN5ICkKPiArICAgICAgICAgICAgewo+ICsjaWZkZWYgQ09ORklH
X0FSTQo+ICsgICAgICAgICAgICAgICAgY2FzZSBNRU1PUllfUE9MSUNZX0FSTV9NRU1fV0I6Cj4g
KyAgICAgICAgICAgICAgICAgICAgcDJtdCA9IHAybV9tbWlvX2RpcmVjdF9jOwo+ICsgICAgICAg
ICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICAgY2FzZSBNRU1PUllfUE9MSUNZ
X0FSTV9ERVZfbkduUkU6Cj4gKyAgICAgICAgICAgICAgICAgICAgcDJtdCA9IHAybV9tbWlvX2Rp
cmVjdF9kZXY7Cj4gKyAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyNlbmRpZgo+ICsjaWZk
ZWYgQ09ORklHX1g4Ngo+ICsgICAgICAgICAgICAgICAgY2FzZSBNRU1PUllfUE9MSUNZX1g4Nl9V
Q19NSU5VUzoKPiArICAgICAgICAgICAgICAgICAgICBwMm10ID0gcDJtX21taW9fZGlyZWN0Owo+
ICsgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsjZW5kaWYKPiArICAgICAgICAgICAgICAg
IGRlZmF1bHQ6CgpBRkFJQ1QsIHJldCB3aWxsIGJlIHplcm8gaW4gdGhpcyBwYXRoIGFuZCB0aGVy
ZWZvcmUgdGhlIGNhbGxlciBtYXkgdGhpbmsgCnRoZSBtYXBwaW5nIHN1Y2NlZWRlZC4gSSB0aGlu
ayB3ZSB3YW50IHRvIHNldCAncmV0JyB0byAtRUlOVkFMLgoKPiArICAgICAgICAgICAgICAgICAg
ICBkb21jdGxfbG9ja19yZWxlYXNlKCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgZ290byBkb21j
dGxfb3V0X3VubG9ja19kb21vbmx5Owo+ICsgICAgICAgICAgICB9Cj4gICAgICAgICAgICAgICBy
ZXQgPSBtYXBfbW1pb19yZWdpb25zKGQsIF9nZm4oZ2ZuKSwgbnJfbWZucywgX21mbihtZm4pLCBw
Mm10KTsKPiAgICAgICAgICAgICAgIGlmICggcmV0IDwgMCApCj4gICAgICAgICAgICAgICAgICAg
cHJpbnRrKFhFTkxPR19HX1dBUk5JTkcKPiBkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvcHVibGlj
L2RvbWN0bC5oIGIveGVuL2luY2x1ZGUvcHVibGljL2RvbWN0bC5oCj4gaW5kZXggMTk0ODZkNWUz
Mi4uZTUxY2FhZGEzNSAxMDA2NDQKPiAtLS0gYS94ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmgK
PiArKysgYi94ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmgKPiBAQCAtNTcxLDEyICs1NzEsMzMg
QEAgc3RydWN0IHhlbl9kb21jdGxfYmluZF9wdF9pcnEgewo+ICAgKi8KPiAgICNkZWZpbmUgRFBD
SV9BRERfTUFQUElORyAgICAgICAgIDEKPiAgICNkZWZpbmUgRFBDSV9SRU1PVkVfTUFQUElORyAg
ICAgIDAKPiArLyoKPiArICogRGVmYXVsdCBtZW1vcnkgcG9saWN5LiBDb3JyZXNwb25kcyB0bzoK
PiArICogQXJtOiBNRU1PUllfUE9MSUNZX0FSTV9ERVZfbkduUkUKPiArICogeDg2OiBNRU1PUllf
UE9MSUNZX1g4Nl9VQ19NSU5VUwo+ICsgKi8KPiArI2RlZmluZSBNRU1PUllfUE9MSUNZX0RFRkFV
TFQgICAgICAgICAwCj4gKyNpZiBkZWZpbmVkKF9faTM4Nl9fKSB8fCBkZWZpbmVkKF9feDg2XzY0
X18pCj4gKy8qIHg4NiBvbmx5LiBNZW1vcnkgdHlwZSBVTkNBQ0hBQkxFICovCj4gKyMgZGVmaW5l
IE1FTU9SWV9QT0xJQ1lfWDg2X1VDX01JTlVTICAgIDAKPiArI2VsaWYgZGVmaW5lZChfX2FybV9f
KSB8fCBkZWZpbmVkIChfX2FhcmNoNjRfXykKPiArLyogQXJtIG9ubHkuIE91dGVyIFNoYXJlYWJs
ZSwgRGV2aWNlLW5HblJFIG1lbW9yeSAoRGV2aWNlIE1lbW9yeSBvbiBBcm12NykgKi8KPiArIyBk
ZWZpbmUgTUVNT1JZX1BPTElDWV9BUk1fREVWX25HblJFICAgICAgMAo+ICsvKiBBcm0gb25seS4g
T3V0ZXIgU2hhcmVhYmxlLCBPdXRlci9Jbm5lciBXcml0ZS1CYWNrIENhY2hlYWJsZSBtZW1vcnkg
Ki8KPiArIyBkZWZpbmUgTUVNT1JZX1BPTElDWV9BUk1fTUVNX1dCICAgICAgICAgMQo+ICsvKgo+
ICsgKiBPbiBBUk0sIE1FTU9SWV9QT0xJQ1kgc2VsZWN0cyB0aGUgc3RhZ2UtMiBtZW1vcnkgYXR0
cmlidXRlcywgYnV0IG5vdGUKCnMvQVJNL0FybS8KCj4gKyAqIHRoYXQgdGhlIHJlc3VsdGluZyBt
ZW1vcnkgYXR0cmlidXRlcyB3aWxsIGJlIGEgY29tYmluYXRpb24gb2Ygc3RhZ2UtMgo+ICsgKiBh
bmQgc3RhZ2UtMSBtZW1vcnkgYXR0cmlidXRlczogaXQgd2lsbCBiZSB0aGUgc3Ryb25nZXN0IGJl
dHdlZW4gdGhlIDIKPiArICogc3RhZ2VzIGF0dHJpYnV0ZXMuCj4gKyAqLwo+ICsjZW5kaWYKPiAg
IHN0cnVjdCB4ZW5fZG9tY3RsX21lbW9yeV9tYXBwaW5nIHsKPiAgICAgICB1aW50NjRfYWxpZ25l
ZF90IGZpcnN0X2dmbjsgLyogZmlyc3QgcGFnZSAoaHZtIGd1ZXN0IHBoeXMgcGFnZSkgaW4gcmFu
Z2UgKi8KPiAgICAgICB1aW50NjRfYWxpZ25lZF90IGZpcnN0X21mbjsgLyogZmlyc3QgcGFnZSAo
bWFjaGluZSBwYWdlKSBpbiByYW5nZSAqLwo+ICAgICAgIHVpbnQ2NF9hbGlnbmVkX3QgbnJfbWZu
czsgICAvKiBudW1iZXIgb2YgcGFnZXMgaW4gcmFuZ2UgKD4wKSAqLwo+ICAgICAgIHVpbnQzMl90
IGFkZF9tYXBwaW5nOyAgICAgICAvKiBhZGQgb3IgcmVtb3ZlIG1hcHBpbmcgKi8KPiAtICAgIHVp
bnQzMl90IHBhZGRpbmc7ICAgICAgICAgICAvKiBwYWRkaW5nIGZvciA2NC1iaXQgYWxpZ25lZCBz
dHJ1Y3R1cmUgKi8KPiArICAgIHVpbnQzMl90IG1lbW9yeV9wb2xpY3k7ICAgICAgLyogY2FjaGVh
YmlsaXR5IG9mIHRoZSBtZW1vcnkgbWFwcGluZyAqLwo+ICAgfTsKPiAgIAo+ICAgCj4gCgpDaGVl
cnMsCgotLSAKSnVsaWVuIEdyYWxsCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5w
cm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8v
eGVuLWRldmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 1A4BA17EDE8
	for <lists+xen-devel@lfdr.de>; Tue, 10 Mar 2020 02:17:33 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jBTQ0-0001um-P9; Tue, 10 Mar 2020 01:10:48 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=pT5j=43=intel.com=kevin.tian@srs-us1.protection.inumbo.net>)
 id 1jBTQ0-0001uh-3P
 for xen-devel@lists.xenproject.org; Tue, 10 Mar 2020 01:10:48 +0000
X-Inumbo-ID: f8a50174-626b-11ea-acd5-12813bfff9fa
Received: from mga09.intel.com (unknown [134.134.136.24])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id f8a50174-626b-11ea-acd5-12813bfff9fa;
 Tue, 10 Mar 2020 01:10:46 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga001.fm.intel.com ([10.253.24.23])
 by orsmga102.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Mar 2020 18:10:41 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,535,1574150400"; d="scan'208";a="353493161"
Received: from fmsmsx108.amr.corp.intel.com ([10.18.124.206])
 by fmsmga001.fm.intel.com with ESMTP; 09 Mar 2020 18:10:41 -0700
Received: from fmsmsx158.amr.corp.intel.com (10.18.116.75) by
 FMSMSX108.amr.corp.intel.com (10.18.124.206) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Mon, 9 Mar 2020 18:10:41 -0700
Received: from shsmsx107.ccr.corp.intel.com (10.239.4.96) by
 fmsmsx158.amr.corp.intel.com (10.18.116.75) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Mon, 9 Mar 2020 18:10:41 -0700
Received: from shsmsx104.ccr.corp.intel.com ([169.254.5.206]) by
 SHSMSX107.ccr.corp.intel.com ([169.254.9.232]) with mapi id 14.03.0439.000;
 Tue, 10 Mar 2020 09:10:38 +0800
From: "Tian, Kevin" <kevin.tian@intel.com>
To: Jan Beulich <jbeulich@suse.com>
Thread-Topic: [PATCH v2 2/2] AMD/IOMMU: without XT, x2APIC needs to be
 forced into physical mode
Thread-Index: AQHV7jBL2PlC27ecmUCDRNzpeoEeKag/f10AgAGVZjA=
Date: Tue, 10 Mar 2020 01:10:37 +0000
Message-ID: <AADFC41AFE54684AB9EE6CBC0274A5D19D7C5A1B@SHSMSX104.ccr.corp.intel.com>
References: <2d3ced57-7d53-bb90-ccf6-e521e6eeb556@suse.com>
 <d2833654-fc51-555e-1c38-bda283baf27f@suse.com>
 <1c95080f-9218-f83d-369f-3325e6380e1b@suse.com>
In-Reply-To: <1c95080f-9218-f83d-369f-3325e6380e1b@suse.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ctpclassification: CTP_NT
x-titus-metadata-40: eyJDYXRlZ29yeUxhYmVscyI6IiIsIk1ldGFkYXRhIjp7Im5zIjoiaHR0cDpcL1wvd3d3LnRpdHVzLmNvbVwvbnNcL0ludGVsMyIsImlkIjoiZGE5ZDZhMTEtNTc4Zi00NGQ5LThiNTQtZjJkMDY0N2IxYjg1IiwicHJvcHMiOlt7Im4iOiJDVFBDbGFzc2lmaWNhdGlvbiIsInZhbHMiOlt7InZhbHVlIjoiQ1RQX05UIn1dfV19LCJTdWJqZWN0TGFiZWxzIjpbXSwiVE1DVmVyc2lvbiI6IjE3LjEwLjE4MDQuNDkiLCJUcnVzdGVkTGFiZWxIYXNoIjoiOHVlWXhlSG9sTVpcL0NTYU5mOHYyT3plZFFBUDh1cE9yWVExR3doWmNxOE1hUFBmaklna0pQK08xWkcwaFJvaVkifQ==
dlp-product: dlpe-windows
dlp-version: 11.2.0.6
dlp-reaction: no-action
x-originating-ip: [10.239.127.40]
MIME-Version: 1.0
Subject: Re: [Xen-devel] [PATCH v2 2/2] AMD/IOMMU: without XT,
 x2APIC needs to be forced into physical mode
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>,
 =?utf-8?B?Um9nZXIgUGF1IE1vbm7DqQ==?= <roger.pau@citrix.com>,
 Wei Liu <wl@xen.org>, Andrew Cooper <andrew.cooper3@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

PiBGcm9tOiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+DQo+IFNlbnQ6IE1vbmRheSwg
TWFyY2ggOSwgMjAyMCA0OjU5IFBNDQo+IA0KPiBPbiAyOC4wMi4yMDIwIDEzOjEyLCBKYW4gQmV1
bGljaCB3cm90ZToNCj4gPiBUaGUgd2lkZXIgY2x1c3RlciBtb2RlIEFQSUMgSURzIGFyZW4ndCBn
ZW5lcmFsbHkgcmVwcmVzZW50YWJsZS4gQ29udmVydA0KPiA+IHRoZSBpb21tdV9pbnRyZW1hcCB2
YXJpYWJsZSBpbnRvIGEgdHJpc3RhdGUsIGFsbG93aW5nIHRoZSBBTUQgSU9NTVUNCj4gPiBkcml2
ZXIgdG8gc2lnbmFsIHRoaXMgc3BlY2lhbCByZXN0cmljdGlvbiB0byB0aGUgYXBpY194MmFwaWNf
cHJvYmUoKS4NCj4gPiAoTm90ZTogYXNzaWdubWVudHMgdG8gdGhlIHZhcmlhYmxlIGdldCBhZGp1
c3RlZCwgd2hpbGUgZXhpc3RpbmcNCj4gPiBjb25zdW1lcnMgLSBhbGwgYXNzdW1pbmcgYSBib29s
ZWFuIHByb3BlcnR5IC0gYXJlIGxlZnQgYWxvbmUuKQ0KPiA+DQo+ID4gU2lnbmVkLW9mZi1ieTog
SmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPg0KPiANCj4gS2V2aW4sDQo+IA0KPiBJIHNl
ZSB5b3UndmUgbG9va2VkIG92ZXIgYW5kIGFja2VkIFhlbiBwYXRjaGVzIG92ZXIgdGhlIHdlZWtl
bmQuIERpZA0KPiB5b3UgbWlzcyB0aGlzIG9uZT8gSXQgZG9lc24ndCBsb29rIGNvbnRyb3ZlcnNp
YWwsIHNvIGl0J2QgYmUgbmljZSB0bw0KPiBoYXZlIHlvdXIgYWNrLCBmb3IgaXQgdG8gZ28gaW4u
DQo+IA0KPiBKYW4NCg0KSXQgaXMgaW4gbXkgbGlzdC4gTXkgcmV2aWV3IHByb2Nlc3Mgd2FzIGlu
dGVycnVwdGVkIGJ5IG90aGVyIHRhc2tzDQp5ZXN0ZXJkYXksIGFuZCBub3cgaXMgcmVzdW1lZC4g
8J+Yig0KDQpSZXZpZXdlZC1ieTogS2V2aW4gVGlhbiA8a2V2aW4udGlhbkBpbnRlbC5jb20+DQoN
Cj4gDQo+ID4gLS0tIGEveGVuL2FyY2gveDg2L2dlbmFwaWMveDJhcGljLmMNCj4gPiArKysgYi94
ZW4vYXJjaC94ODYvZ2VuYXBpYy94MmFwaWMuYw0KPiA+IEBAIC0yMzYsMTIgKzIzNiwyMSBAQCBj
b25zdCBzdHJ1Y3QgZ2VuYXBpYyAqX19pbml0IGFwaWNfeDJhcGljDQo+ID4gICAgICAgICAgeDJh
cGljX3BoeXMgPSAhaW9tbXVfaW50cmVtYXAgfHwNCj4gPiAgICAgICAgICAgICAgICAgICAgICAg
IChhY3BpX2dibF9GQURULmZsYWdzICYgQUNQSV9GQURUX0FQSUNfUEhZU0lDQUwpOw0KPiA+ICAg
ICAgfQ0KPiA+IC0gICAgZWxzZSBpZiAoICF4MmFwaWNfcGh5cyAmJiAhaW9tbXVfaW50cmVtYXAg
KQ0KPiA+IC0gICAgew0KPiA+IC0gICAgICAgIHByaW50aygiV0FSTklORzogeDJBUElDIGNsdXN0
ZXIgbW9kZSBpcyBub3Qgc3VwcG9ydGVkIHdpdGhvdXQNCj4gaW50ZXJydXB0IHJlbWFwcGluZ1xu
Ig0KPiA+IC0gICAgICAgICAgICAgICAieDJBUElDOiBmb3JjaW5nIHBoeXMgbW9kZVxuIik7DQo+
ID4gLSAgICAgICAgeDJhcGljX3BoeXMgPSB0cnVlOw0KPiA+IC0gICAgfQ0KPiA+ICsgICAgZWxz
ZSBpZiAoICF4MmFwaWNfcGh5cyApDQo+ID4gKyAgICAgICAgc3dpdGNoICggaW9tbXVfaW50cmVt
YXAgKQ0KPiA+ICsgICAgICAgIHsNCj4gPiArICAgICAgICBjYXNlIGlvbW11X2ludHJlbWFwX29m
ZjoNCj4gPiArICAgICAgICBjYXNlIGlvbW11X2ludHJlbWFwX3Jlc3RyaWN0ZWQ6DQo+ID4gKyAg
ICAgICAgICAgIHByaW50aygiV0FSTklORzogeDJBUElDIGNsdXN0ZXIgbW9kZSBpcyBub3Qgc3Vw
cG9ydGVkICVzDQo+IGludGVycnVwdCByZW1hcHBpbmdcbiINCj4gPiArICAgICAgICAgICAgICAg
ICAgICJ4MkFQSUM6IGZvcmNpbmcgcGh5cyBtb2RlXG4iLA0KPiA+ICsgICAgICAgICAgICAgICAg
ICAgaW9tbXVfaW50cmVtYXAgPT0gaW9tbXVfaW50cmVtYXBfb2ZmID8gIndpdGhvdXQiDQo+ID4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
OiAid2l0aCByZXN0cmljdGVkIik7DQo+ID4gKyAgICAgICAgICAgIHgyYXBpY19waHlzID0gdHJ1
ZTsNCj4gPiArICAgICAgICAgICAgYnJlYWs7DQo+ID4gKw0KPiA+ICsgICAgICAgIGNhc2UgaW9t
bXVfaW50cmVtYXBfZnVsbDoNCj4gPiArICAgICAgICAgICAgYnJlYWs7DQo+ID4gKyAgICAgICAg
fQ0KPiA+DQo+ID4gICAgICBpZiAoIHgyYXBpY19waHlzICkNCj4gPiAgICAgICAgICByZXR1cm4g
JmFwaWNfeDJhcGljX3BoeXM7DQo+ID4gLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1k
L2lvbW11X2luaXQuYw0KPiA+ICsrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21t
dV9pbml0LmMNCj4gPiBAQCAtMTEzOSw3ICsxMTM5LDcgQEAgc3RhdGljIHZvaWQgX19pbml0IGFt
ZF9pb21tdV9pbml0X2NsZWFudQ0KPiA+DQo+ID4gICAgICBpb21tdV9lbmFibGVkID0gMDsNCj4g
PiAgICAgIGlvbW11X2h3ZG9tX3Bhc3N0aHJvdWdoID0gZmFsc2U7DQo+ID4gLSAgICBpb21tdV9p
bnRyZW1hcCA9IDA7DQo+ID4gKyAgICBpb21tdV9pbnRyZW1hcCA9IGlvbW11X2ludHJlbWFwX29m
ZjsNCj4gPiAgICAgIGlvbW11djJfZW5hYmxlZCA9IDA7DQo+ID4gIH0NCj4gPg0KPiA+IEBAIC0x
NDEzLDYgKzE0MTMsOSBAQCBpbnQgX19pbml0IGFtZF9pb21tdV9wcmVwYXJlKGJvb2wgeHQpDQo+
ID4gICAgICAgICAgaW9tbXUtPmN0cmwuaW50X2NhcF94dF9lbiA9IHh0ICYmIGhhc194dDsNCj4g
PiAgICAgIH0NCj4gPg0KPiA+ICsgICAgaWYgKCBpb21tdV9pbnRyZW1hcCAmJiAhaGFzX3h0ICkN
Cj4gPiArICAgICAgICBpb21tdV9pbnRyZW1hcCA9IGlvbW11X2ludHJlbWFwX3Jlc3RyaWN0ZWQ7
DQo+ID4gKw0KPiA+ICAgICAgcmMgPSBhbWRfaW9tbXVfdXBkYXRlX2l2cnNfbWFwcGluZ19hY3Bp
KCk7DQo+ID4NCj4gPiAgIGVycm9yX291dDoNCj4gPiAtLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhy
b3VnaC9hbWQvcGNpX2FtZF9pb21tdS5jDQo+ID4gKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91
Z2gvYW1kL3BjaV9hbWRfaW9tbXUuYw0KPiA+IEBAIC0xNTcsNyArMTU3LDcgQEAgaW50IF9faW5p
dCBhY3BpX2l2cnNfaW5pdCh2b2lkKQ0KPiA+DQo+ID4gICAgICBpZiAoIChhbWRfaW9tbXVfZGV0
ZWN0X2FjcGkoKSAhPTApIHx8IChpb21tdV9mb3VuZCgpID09IDApICkNCj4gPiAgICAgIHsNCj4g
PiAtICAgICAgICBpb21tdV9pbnRyZW1hcCA9IDA7DQo+ID4gKyAgICAgICAgaW9tbXVfaW50cmVt
YXAgPSBpb21tdV9pbnRyZW1hcF9vZmY7DQo+ID4gICAgICAgICAgcmV0dXJuIC1FTk9ERVY7DQo+
ID4gICAgICB9DQo+ID4NCj4gPiAtLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5j
DQo+ID4gKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvaW9tbXUuYw0KPiA+IEBAIC0zNSw3
ICszNSw3IEBAIGJvb2wgX19yZWFkX21vc3RseSBpb21tdV9xdWFyYW50aW5lID0gdHINCj4gPiAg
Ym9vbF90IF9fcmVhZF9tb3N0bHkgaW9tbXVfaWdmeCA9IDE7DQo+ID4gIGJvb2xfdCBfX3JlYWRf
bW9zdGx5IGlvbW11X3Nub29wID0gMTsNCj4gPiAgYm9vbF90IF9fcmVhZF9tb3N0bHkgaW9tbXVf
cWludmFsID0gMTsNCj4gPiAtYm9vbF90IF9fcmVhZF9tb3N0bHkgaW9tbXVfaW50cmVtYXAgPSAx
Ow0KPiA+ICtlbnVtIGlvbW11X2ludHJlbWFwIF9fcmVhZF9tb3N0bHkgaW9tbXVfaW50cmVtYXAg
PQ0KPiBpb21tdV9pbnRyZW1hcF9mdWxsOw0KPiA+ICBib29sX3QgX19yZWFkX21vc3RseSBpb21t
dV9jcmFzaF9kaXNhYmxlOw0KPiA+DQo+ID4gIHN0YXRpYyBib29sIF9faHdkb21faW5pdGRhdGEg
aW9tbXVfaHdkb21fbm9uZTsNCj4gPiBAQCAtOTEsNyArOTEsNyBAQCBzdGF0aWMgaW50IF9faW5p
dCBwYXJzZV9pb21tdV9wYXJhbShjb25zDQo+ID4gICAgICAgICAgZWxzZSBpZiAoICh2YWwgPSBw
YXJzZV9ib29sZWFuKCJxaW52YWwiLCBzLCBzcykpID49IDAgKQ0KPiA+ICAgICAgICAgICAgICBp
b21tdV9xaW52YWwgPSB2YWw7DQo+ID4gICAgICAgICAgZWxzZSBpZiAoICh2YWwgPSBwYXJzZV9i
b29sZWFuKCJpbnRyZW1hcCIsIHMsIHNzKSkgPj0gMCApDQo+ID4gLSAgICAgICAgICAgIGlvbW11
X2ludHJlbWFwID0gdmFsOw0KPiA+ICsgICAgICAgICAgICBpb21tdV9pbnRyZW1hcCA9IHZhbCA/
IGlvbW11X2ludHJlbWFwX2Z1bGwgOg0KPiBpb21tdV9pbnRyZW1hcF9vZmY7DQo+ID4gICAgICAg
ICAgZWxzZSBpZiAoICh2YWwgPSBwYXJzZV9ib29sZWFuKCJpbnRwb3N0Iiwgcywgc3MpKSA+PSAw
ICkNCj4gPiAgICAgICAgICAgICAgaW9tbXVfaW50cG9zdCA9IHZhbDsNCj4gPiAgI2lmZGVmIENP
TkZJR19LRVhFQw0KPiA+IEBAIC00NzUsNyArNDc1LDcgQEAgaW50IF9faW5pdCBpb21tdV9zZXR1
cCh2b2lkKQ0KPiA+ICAgICAgICAgIGlvbW11X2VuYWJsZWQgPSAocmMgPT0gMCk7DQo+ID4gICAg
ICB9DQo+ID4gICAgICBpZiAoICFpb21tdV9lbmFibGVkICkNCj4gPiAtICAgICAgICBpb21tdV9p
bnRyZW1hcCA9IDA7DQo+ID4gKyAgICAgICAgaW9tbXVfaW50cmVtYXAgPSBpb21tdV9pbnRyZW1h
cF9vZmY7DQo+ID4NCj4gPiAgICAgIGlmICggKGZvcmNlX2lvbW11ICYmICFpb21tdV9lbmFibGVk
KSB8fA0KPiA+ICAgICAgICAgICAoZm9yY2VfaW50cmVtYXAgJiYgIWlvbW11X2ludHJlbWFwKSAp
DQo+ID4gQEAgLTU1Nyw3ICs1NTcsOCBAQCB2b2lkIGlvbW11X2NyYXNoX3NodXRkb3duKHZvaWQp
DQo+ID4NCj4gPiAgICAgIGlmICggaW9tbXVfZW5hYmxlZCApDQo+ID4gICAgICAgICAgaW9tbXVf
Z2V0X29wcygpLT5jcmFzaF9zaHV0ZG93bigpOw0KPiA+IC0gICAgaW9tbXVfZW5hYmxlZCA9IGlv
bW11X2ludHJlbWFwID0gaW9tbXVfaW50cG9zdCA9IDA7DQo+ID4gKyAgICBpb21tdV9lbmFibGVk
ID0gaW9tbXVfaW50cG9zdCA9IDA7DQo+ID4gKyAgICBpb21tdV9pbnRyZW1hcCA9IGlvbW11X2lu
dHJlbWFwX29mZjsNCj4gPiAgfQ0KPiA+DQo+ID4gIGludCBpb21tdV9nZXRfcmVzZXJ2ZWRfZGV2
aWNlX21lbW9yeShpb21tdV9ncmRtX3QgKmZ1bmMsIHZvaWQNCj4gKmN0eHQpDQo+ID4gLS0tIGEv
eGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvdnRkL2lvbW11LmMNCj4gPiArKysgYi94ZW4vZHJpdmVy
cy9wYXNzdGhyb3VnaC92dGQvaW9tbXUuYw0KPiA+IEBAIC0yMTc3LDcgKzIxNzcsNyBAQCBzdGF0
aWMgaW50IF9fbXVzdF9jaGVjayBpbml0X3Z0ZF9odyh2b2lkDQo+ID4gICAgICAgICAgew0KPiA+
ICAgICAgICAgICAgICBpZiAoIGlvYXBpY190b19pb21tdShJT19BUElDX0lEKGFwaWMpKSA9PSBO
VUxMICkNCj4gPiAgICAgICAgICAgICAgew0KPiA+IC0gICAgICAgICAgICAgICAgaW9tbXVfaW50
cmVtYXAgPSAwOw0KPiA+ICsgICAgICAgICAgICAgICAgaW9tbXVfaW50cmVtYXAgPSBpb21tdV9p
bnRyZW1hcF9vZmY7DQo+ID4gICAgICAgICAgICAgICAgICBkcHJpbnRrKFhFTkxPR19FUlIgVlRE
UFJFRklYLA0KPiA+ICAgICAgICAgICAgICAgICAgICAgICJpb2FwaWNfdG9faW9tbXU6IGlvYXBp
YyAlI3ggKGlkOiAlI3gpIGlzIE5VTEwhICINCj4gPiAgICAgICAgICAgICAgICAgICAgICAiV2ls
bCBub3QgdHJ5IHRvIGVuYWJsZSBJbnRlcnJ1cHQgUmVtYXBwaW5nLlxuIiwNCj4gPiBAQCAtMjE5
Myw3ICsyMTkzLDcgQEAgc3RhdGljIGludCBfX211c3RfY2hlY2sgaW5pdF92dGRfaHcodm9pZA0K
PiA+ICAgICAgICAgICAgICBpb21tdSA9IGRyaGQtPmlvbW11Ow0KPiA+ICAgICAgICAgICAgICBp
ZiAoIGVuYWJsZV9pbnRyZW1hcChpb21tdSwgMCkgIT0gMCApDQo+ID4gICAgICAgICAgICAgIHsN
Cj4gPiAtICAgICAgICAgICAgICAgIGlvbW11X2ludHJlbWFwID0gMDsNCj4gPiArICAgICAgICAg
ICAgICAgIGlvbW11X2ludHJlbWFwID0gaW9tbXVfaW50cmVtYXBfb2ZmOw0KPiA+ICAgICAgICAg
ICAgICAgICAgZHByaW50ayhYRU5MT0dfV0FSTklORyBWVERQUkVGSVgsDQo+ID4gICAgICAgICAg
ICAgICAgICAgICAgICAgICJJbnRlcnJ1cHQgUmVtYXBwaW5nIG5vdCBlbmFibGVkXG4iKTsNCj4g
Pg0KPiA+IEBAIC0yMjk1LDcgKzIyOTUsNyBAQCBzdGF0aWMgaW50IF9faW5pdCB2dGRfc2V0dXAo
dm9pZCkNCj4gPiAgICAgICAgICAgICAgaW9tbXVfcWludmFsID0gMDsNCj4gPg0KPiA+ICAgICAg
ICAgIGlmICggaW9tbXVfaW50cmVtYXAgJiYgIWVjYXBfaW50cl9yZW1hcChpb21tdS0+ZWNhcCkg
KQ0KPiA+IC0gICAgICAgICAgICBpb21tdV9pbnRyZW1hcCA9IDA7DQo+ID4gKyAgICAgICAgICAg
IGlvbW11X2ludHJlbWFwID0gaW9tbXVfaW50cmVtYXBfb2ZmOw0KPiA+DQo+ID4gICAgICAgICAg
LyoNCj4gPiAgICAgICAgICAgKiBXZSBjYW5ub3QgdXNlIHBvc3RlZCBpbnRlcnJ1cHQgaWYgWDg2
X0ZFQVRVUkVfQ1gxNiBpcw0KPiA+IEBAIC0yMzIwLDcgKzIzMjAsNyBAQCBzdGF0aWMgaW50IF9f
aW5pdCB2dGRfc2V0dXAodm9pZCkNCj4gPg0KPiA+ICAgICAgaWYgKCAhaW9tbXVfcWludmFsICYm
IGlvbW11X2ludHJlbWFwICkNCj4gPiAgICAgIHsNCj4gPiAtICAgICAgICBpb21tdV9pbnRyZW1h
cCA9IDA7DQo+ID4gKyAgICAgICAgaW9tbXVfaW50cmVtYXAgPSBpb21tdV9pbnRyZW1hcF9vZmY7
DQo+ID4gICAgICAgICAgZHByaW50ayhYRU5MT0dfV0FSTklORyBWVERQUkVGSVgsICJJbnRlcnJ1
cHQgUmVtYXBwaW5nDQo+IGRpc2FibGVkICINCj4gPiAgICAgICAgICAgICAgInNpbmNlIFF1ZXVl
ZCBJbnZhbGlkYXRpb24gaXNuJ3Qgc3VwcG9ydGVkIG9yIGVuYWJsZWQuXG4iKTsNCj4gPiAgICAg
IH0NCj4gPiBAQCAtMjM0Nyw3ICsyMzQ3LDcgQEAgc3RhdGljIGludCBfX2luaXQgdnRkX3NldHVw
KHZvaWQpDQo+ID4gICAgICBpb21tdV9zbm9vcCA9IDA7DQo+ID4gICAgICBpb21tdV9od2RvbV9w
YXNzdGhyb3VnaCA9IGZhbHNlOw0KPiA+ICAgICAgaW9tbXVfcWludmFsID0gMDsNCj4gPiAtICAg
IGlvbW11X2ludHJlbWFwID0gMDsNCj4gPiArICAgIGlvbW11X2ludHJlbWFwID0gaW9tbXVfaW50
cmVtYXBfb2ZmOw0KPiA+ICAgICAgaW9tbXVfaW50cG9zdCA9IDA7DQo+ID4gICAgICByZXR1cm4g
cmV0Ow0KPiA+ICB9DQo+ID4gLS0tIGEveGVuL2luY2x1ZGUveGVuL2lvbW11LmgNCj4gPiArKysg
Yi94ZW4vaW5jbHVkZS94ZW4vaW9tbXUuaA0KPiA+IEBAIC01NCw3ICs1NCwxOCBAQCBzdGF0aWMg
aW5saW5lIGJvb2xfdCBkZm5fZXEoZGZuX3QgeCwgZGZuDQo+ID4NCj4gPiAgZXh0ZXJuIGJvb2xf
dCBpb21tdV9lbmFibGUsIGlvbW11X2VuYWJsZWQ7DQo+ID4gIGV4dGVybiBib29sIGZvcmNlX2lv
bW11LCBpb21tdV9xdWFyYW50aW5lLCBpb21tdV92ZXJib3NlLA0KPiBpb21tdV9pZ2Z4Ow0KPiA+
IC1leHRlcm4gYm9vbF90IGlvbW11X3Nub29wLCBpb21tdV9xaW52YWwsIGlvbW11X2ludHJlbWFw
LA0KPiBpb21tdV9pbnRwb3N0Ow0KPiA+ICtleHRlcm4gYm9vbF90IGlvbW11X3Nub29wLCBpb21t
dV9xaW52YWwsIGlvbW11X2ludHBvc3Q7DQo+ID4gK2V4dGVybiBlbnVtIF9fcGFja2VkIGlvbW11
X2ludHJlbWFwIHsNCj4gPiArICAgLyoNCj4gPiArICAgICogSW4gb3JkZXIgdG8gYWxsb3cgdHJh
ZGl0aW9uYWwgYm9vbGVhbiB1c2VzIG9mIHRoZSBpb21tdV9pbnRyZW1hcA0KPiA+ICsgICAgKiB2
YXJpYWJsZSwgdGhlICJvZmYiIHZhbHVlIGhhcyB0byBjb21lIGZpcnN0ICh5aWVsZGluZyBhIHZh
bHVlIG9mIHplcm8pLg0KPiA+ICsgICAgKi8NCj4gPiArICAgaW9tbXVfaW50cmVtYXBfb2ZmLA0K
PiA+ICsjaWZkZWYgQ09ORklHX1g4Ng0KPiA+ICsgICBpb21tdV9pbnRyZW1hcF9yZXN0cmljdGVk
LA0KPiA+ICsjZW5kaWYNCj4gPiArICAgaW9tbXVfaW50cmVtYXBfZnVsbCwNCj4gPiArfSBpb21t
dV9pbnRyZW1hcDsNCj4gPg0KPiA+ICAjaWYgZGVmaW5lZChDT05GSUdfSU9NTVVfRk9SQ0VfUFRf
U0hBUkUpDQo+ID4gICNkZWZpbmUgaW9tbXVfaGFwX3B0X3NoYXJlIHRydWUNCj4gPg0KPiA+DQo+
ID4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCj4gPiBY
ZW4tZGV2ZWwgbWFpbGluZyBsaXN0DQo+ID4gWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3Jn
DQo+ID4gaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1k
ZXZlbA0KPiA+DQoNCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3Jn
Cmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

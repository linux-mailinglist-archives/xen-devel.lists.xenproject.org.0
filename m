Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id C0C9116848
	for <lists+xen-devel@lfdr.de>; Tue,  7 May 2019 18:45:20 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hO3AA-0001sZ-MZ; Tue, 07 May 2019 16:41:54 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=qCYz=TH=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hO3A9-0001sU-22
 for xen-devel@lists.xenproject.org; Tue, 07 May 2019 16:41:53 +0000
X-Inumbo-ID: 0434f750-70e7-11e9-a032-63c25b29c4ab
Received: from foss.arm.com (unknown [217.140.101.70])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTP
 id 0434f750-70e7-11e9-a032-63c25b29c4ab;
 Tue, 07 May 2019 16:41:52 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.72.51.249])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id EE3C0374;
 Tue,  7 May 2019 09:41:51 -0700 (PDT)
Received: from [10.37.8.6] (unknown [10.37.8.6])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id D25233F5AF;
 Tue,  7 May 2019 09:41:49 -0700 (PDT)
To: Stefano Stabellini <sstabellini@kernel.org>, xen-devel@lists.xenproject.org
References: <alpine.DEB.2.10.1904301358560.13269@sstabellini-ThinkPad-X260>
 <1556658172-8824-3-git-send-email-sstabellini@kernel.org>
From: Julien Grall <julien.grall@arm.com>
Message-ID: <a0eaef9c-543f-831c-c856-862f9e20c2f7@arm.com>
Date: Tue, 7 May 2019 17:41:47 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <1556658172-8824-3-git-send-email-sstabellini@kernel.org>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v2 03/10] xen: extend
 XEN_DOMCTL_memory_mapping to handle memory policy
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <stefanos@xilinx.com>, JBeulich@suse.com,
 andrew.cooper3@citrix.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGkgU3RlZmFubywKCk9uIDQvMzAvMTkgMTA6MDIgUE0sIFN0ZWZhbm8gU3RhYmVsbGluaSB3cm90
ZToKPiBSZXVzZSB0aGUgZXhpc3RpbmcgcGFkZGluZyBmaWVsZCB0byBwYXNzIG1lbW9yeSBwb2xp
Y3kgaW5mb3JtYXRpb24uICBPbgoKTklUOiBJIGtub3cgdGhhdCBzb21lIGRldmVsb3BwZXIgbGlr
ZSB1c2luZyB0d28gc3BhY2VzIGFmdGVyIHRoZSBmaW5hbCAKcG9pbnQuIEkgZG9uJ3QgbWluZCBp
ZiB5b3UgdXNlIGl0IGJ1dCBwbGVhc2UgYmUgYXQgbGVhc3QgY29uc2lzdGVudCAKd2l0aGluIHRo
ZSBjb21taXQgbWVzc2FnZS4KCj4gQXJtLCB0aGUgY2FsbGVyIGNhbiBzcGVjaWZ5IHdoZXRoZXIg
dGhlIG1lbW9yeSBzaG91bGQgYmUgbWFwcGVkIGFzCj4gZGV2aWNlIG5HUkUsIHdoaWNoIGlzIHRo
ZSBkZWZhdWx0IGFuZCB0aGUgb25seSBwb3NzaWJpbGl0eSB0b2RheSwgb3IKCkkgYW0gYWZyYWlk
IHRoaXMgaXMgbm90IGNvcnJlY3QuIFRoZSBkZWZhdWx0IG9uIGlzIERldmljZS1uR25SRSAoaXQg
aXMgCmNhbGxlZCBEZXZpY2UgTWVtb3J5IG9uIEFybXY3KS4KCj4gY2FjaGVhYmxlIG1lbW9yeSB3
cml0ZS1iYWNrLiBPbiB4ODYsIHRoZSBvbmx5IG9wdGlvbiBpcyB1bmNhY2hhYmxlLiBUaGUKPiBj
dXJyZW50IGJlaGF2aW9yIGJlY29tZXMgdGhlIGRlZmF1bHQgKG51bWVyaWNhbGx5ICcwJykuCj4g
Cj4gT24gQVJNLCBtYXAgZGV2aWNlIG5HUkUgYXMgcDJtX21taW9fZGlyZWN0X2RldiAoYXMgaXQg
aXMgYWxyZWFkeSBkb25lCj4gdG9kYXkpIGFuZCBXQiBjYWNoZWFibGUgbWVtb3J5IGFzIHAybV9t
bWlvX2RpcmVjdF9jLgoKQXMgSSBwb2ludGVkIG91dCBpbiB2MSwgdGhlIHdvcmRpbmcgaXMgY29u
ZnVzaW5nLiBUaGUgcmVzdWx0aW5nIG1lbW9yeSAKYXR0cmlidXRlIHdpbGwgYmUgYSBjb21iaW5h
dGlvbiBvZiBzdGFnZS0yIGFuZCBzdGFnZS0yIG1lbW9yeSAKYXR0cmlidXRlcy4gSXQgd2lsbCBh
Y3R1YWxseSBiZSB3aGF0ZXZlciBpcyB0aGUgc3Ryb25nZXN0IGJldHdlZW4gdGhlIDIgCnN0YWdl
cyBhdHRyaWJ1dGVzLiBZb3UgY2FuIHNlZSB0aGUgc3RhZ2UtMiBhdHRyaWJ1dGVzIGFzIGEgd2F5
IHRvIGdpdmUgCm1vcmUgb3IgbGVzcyBmcmVlZG9tIHRvIHRoZSBndWVzdCBmb3IgY29uZmlndXJl
IHRoZSBhdHRyaWJ1dGVzLgoKVGhlIGNvbW1pdCBtZXNzYWdlIGFuZCBhbGwgZG9jdW1lbnRhdGlv
biBzaG91bGQgYWN0dWFsbHkgcmVmbGVjdCB0aGF0IHRvIAphdm9pZCBtaXN1c2Ugb2YgdGhlIG5l
dyBvcHRpb24uCgo+IAo+IE9uIHg4NiwgcmV0dXJuIGVycm9yIGlmIHRoZSBtZW1vcnkgcG9saWN5
IHJlcXVlc3RlZCBpcyBub3QKPiBNRU1PUllfUE9MSUNZX1g4Nl9VQy4KPiAKPiBTaWduZWQtb2Zm
LWJ5OiBTdGVmYW5vIFN0YWJlbGxpbmkgPHN0ZWZhbm9zQHhpbGlueC5jb20+Cj4gQ0M6IEpCZXVs
aWNoQHN1c2UuY29tCj4gQ0M6IGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20KPiAKPiAtLS0KPiBD
aGFuZ2VzIGluIHYyOgo+IC0gcmViYXNlCj4gLSB1c2UgcDJtX21taW9fZGlyZWN0X2MKPiAtIHVz
ZSBFT1BOT1RTVVBQCj4gLSByZW5hbWUgY2FjaGVfcG9saWN5IHRvIG1lbW9yeSBwb2xpY3kKPiAt
IHJlbmFtZSBNRU1PUllfUE9MSUNZX0RFVk1FTSB0byBNRU1PUllfUE9MSUNZX0FSTV9ERVZfbkdS
RQo+IC0gcmVuYW1lIE1FTU9SWV9QT0xJQ1lfTUVNT1JZIHRvIE1FTU9SWV9QT0xJQ1lfQVJNX01F
TV9XQgo+IC0gYWRkIE1FTU9SWV9QT0xJQ1lfWDg2X1VDCj4gLSBhZGQgTUVNT1JZX1BPTElDWV9E
RUZBVUxUIGFuZCB1c2UgaXQKPiAtLS0KPiAgIHhlbi9jb21tb24vZG9tY3RsLmMgICAgICAgICB8
IDIzICsrKysrKysrKysrKysrKysrKysrKy0tCj4gICB4ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3Rs
LmggfCAxNCArKysrKysrKysrKysrLQo+ICAgMiBmaWxlcyBjaGFuZ2VkLCAzNCBpbnNlcnRpb25z
KCspLCAzIGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS94ZW4vY29tbW9uL2RvbWN0bC5j
IGIveGVuL2NvbW1vbi9kb21jdGwuYwo+IGluZGV4IDE0MGY5NzkuLjlmNjJlYWQgMTAwNjQ0Cj4g
LS0tIGEveGVuL2NvbW1vbi9kb21jdGwuYwo+ICsrKyBiL3hlbi9jb21tb24vZG9tY3RsLmMKPiBA
QCAtOTI4LDYgKzkyOCw3IEBAIGxvbmcgZG9fZG9tY3RsKFhFTl9HVUVTVF9IQU5ETEVfUEFSQU0o
eGVuX2RvbWN0bF90KSB1X2RvbWN0bCkKPiAgICAgICAgICAgdW5zaWduZWQgbG9uZyBtZm5fZW5k
ID0gbWZuICsgbnJfbWZucyAtIDE7Cj4gICAgICAgICAgIGludCBhZGQgPSBvcC0+dS5tZW1vcnlf
bWFwcGluZy5hZGRfbWFwcGluZzsKPiAgICAgICAgICAgcDJtX3R5cGVfdCBwMm10Owo+ICsgICAg
ICAgIHVpbnQzMl90IG1lbW9yeV9wb2xpY3kgPSBvcC0+dS5tZW1vcnlfbWFwcGluZy5tZW1vcnlf
cG9saWN5Owo+ICAgCj4gICAgICAgICAgIHJldCA9IC1FSU5WQUw7Cj4gICAgICAgICAgIGlmICgg
bWZuX2VuZCA8IG1mbiB8fCAvKiB3cmFwPyAqLwo+IEBAIC05NTgsOSArOTU5LDI3IEBAIGxvbmcg
ZG9fZG9tY3RsKFhFTl9HVUVTVF9IQU5ETEVfUEFSQU0oeGVuX2RvbWN0bF90KSB1X2RvbWN0bCkK
PiAgICAgICAgICAgaWYgKCBhZGQgKQo+ICAgICAgICAgICB7Cj4gICAgICAgICAgICAgICBwcmlu
dGsoWEVOTE9HX0dfREVCVUcKPiAtICAgICAgICAgICAgICAgICAgICJtZW1vcnlfbWFwOmFkZDog
ZG9tJWQgZ2ZuPSVseCBtZm49JWx4IG5yPSVseFxuIiwKPiAtICAgICAgICAgICAgICAgICAgIGQt
PmRvbWFpbl9pZCwgZ2ZuLCBtZm4sIG5yX21mbnMpOwo+ICsgICAgICAgICAgICAgICAgICAgIm1l
bW9yeV9tYXA6YWRkOiBkb20lZCBnZm49JWx4IG1mbj0lbHggbnI9JWx4IGNhY2hlPSV1XG4iLAo+
ICsgICAgICAgICAgICAgICAgICAgZC0+ZG9tYWluX2lkLCBnZm4sIG1mbiwgbnJfbWZucywgbWVt
b3J5X3BvbGljeSk7Cj4gICAKPiArICAgICAgICAgICAgc3dpdGNoICggbWVtb3J5X3BvbGljeSAp
Cj4gKyAgICAgICAgICAgIHsKPiArI2lmZGVmIENPTkZJR19BUk0KPiArICAgICAgICAgICAgICAg
IGNhc2UgTUVNT1JZX1BPTElDWV9BUk1fTUVNX1dCOgo+ICsgICAgICAgICAgICAgICAgICAgIHAy
bXQgPSBwMm1fbW1pb19kaXJlY3RfYzsKPiArICAgICAgICAgICAgICAgICAgICBicmVhazsKPiAr
ICAgICAgICAgICAgICAgIGNhc2UgTUVNT1JZX1BPTElDWV9BUk1fREVWX25HUkU6Cj4gKyAgICAg
ICAgICAgICAgICAgICAgcDJtdCA9IHAybV9tbWlvX2RpcmVjdF9kZXY7Cj4gKyAgICAgICAgICAg
ICAgICAgICAgYnJlYWs7Cj4gKyNlbmRpZgo+ICsjaWZkZWYgQ09ORklHX1g4Ngo+ICsgICAgICAg
ICAgICAgICAgY2FzZSBNRU1PUllfUE9MSUNZX1g4Nl9VQzoKPiArICAgICAgICAgICAgICAgICAg
ICBwMm10ID0gcDJtX21taW9fZGlyZWN0Owo+ICsgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+
ICsjZW5kaWYKPiArICAgICAgICAgICAgICAgIGRlZmF1bHQ6Cj4gKyAgICAgICAgICAgICAgICAg
ICAgcmV0dXJuIC1FT1BOT1RTVVBQOwo+ICsgICAgICAgICAgICB9Cj4gICAgICAgICAgICAgICBy
ZXQgPSBtYXBfcmVnaW9ucyhkLCBfZ2ZuKGdmbiksIG5yX21mbnMsIF9tZm4obWZuKSwgcDJtdCk7
Cj4gICAgICAgICAgICAgICBpZiAoIHJldCA8IDAgKQo+ICAgICAgICAgICAgICAgICAgIHByaW50
ayhYRU5MT0dfR19XQVJOSU5HCj4gZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3B1YmxpYy9kb21j
dGwuaCBiL3hlbi9pbmNsdWRlL3B1YmxpYy9kb21jdGwuaAo+IGluZGV4IDE5NDg2ZDUuLjkzMzAz
ODcgMTAwNjQ0Cj4gLS0tIGEveGVuL2luY2x1ZGUvcHVibGljL2RvbWN0bC5oCj4gKysrIGIveGVu
L2luY2x1ZGUvcHVibGljL2RvbWN0bC5oCj4gQEAgLTU3MSwxMiArNTcxLDI0IEBAIHN0cnVjdCB4
ZW5fZG9tY3RsX2JpbmRfcHRfaXJxIHsKPiAgICovCj4gICAjZGVmaW5lIERQQ0lfQUREX01BUFBJ
TkcgICAgICAgICAxCj4gICAjZGVmaW5lIERQQ0lfUkVNT1ZFX01BUFBJTkcgICAgICAwCj4gKy8q
Cj4gKyAqIERlZmF1bHQgbWVtb3J5IHBvbGljeS4gQ29ycmVzcG9uZHMgdG86Cj4gKyAqIEFybTog
TUVNT1JZX1BPTElDWV9BUk1fREVWX25HUkUKPiArICogeDg2OiBNRU1PUllfUE9MSUNZX1g4Nl9V
Qwo+ICsgKi8KPiArI2RlZmluZSBNRU1PUllfUE9MSUNZX0RFRkFVTFQgICAgMAo+ICsvKiB4ODYg
b25seS4gTWVtb3J5IHR5cGUgVU5DQUNIQUJMRSAqLwo+ICsjZGVmaW5lIE1FTU9SWV9QT0xJQ1lf
WDg2X1VDICAgICAwCj4gKy8qIEFybSBvbmx5LiBPdXRlciBTaGFyZWFibGUsIERldmljZS1uR1JF
IG1lbW9yeSAqLwoKRGV2aWNlLW5HUkUgaXMgYW4gQXJtdjggdGVybS4gWW91IG1pZ2h0IHdhbnQg
dG8gYWxzbyBzcGVjaWZ5IHRoZSBBcm12NyAKbmFtZSBpbiBwYXJlbnRoZXNpcyB0byBoZWxwIHRo
ZSB1c2VyLgoKPiArI2RlZmluZSBNRU1PUllfUE9MSUNZX0FSTV9ERVZfbkdSRSAgICAgICAwCj4g
Ky8qIEFybSBvbmx5LiBPdXRlciBTaGFyZWFibGUsIE91dGVyL0lubmVyIFdyaXRlLUJhY2sgQ2Fj
aGVhYmxlIG1lbW9yeSAqLwo+ICsjZGVmaW5lIE1FTU9SWV9QT0xJQ1lfQVJNX01FTV9XQiAgICAg
ICAgIDEKCkkgYW0gd29uZGVyaW5nIHdoZXRoZXIgd2Ugc2hvdWxkIHB1dCBBcm0gKHJlc3AuIHg4
NikgZGVmaW5lcyB1bmRlciBhbiAKaWZkZWYgYXJtIChyZXNwLiB4ODYpLiBEbyB5b3Ugc2VlIGFu
eSB1c2UgaW4gdGhlIGNvbW1vbiB0b29sc3RhY2sgY29kZSAKb2YgdGhvc2UgI2lmZGVmPwoKPiAg
IHN0cnVjdCB4ZW5fZG9tY3RsX21lbW9yeV9tYXBwaW5nIHsKPiAgICAgICB1aW50NjRfYWxpZ25l
ZF90IGZpcnN0X2dmbjsgLyogZmlyc3QgcGFnZSAoaHZtIGd1ZXN0IHBoeXMgcGFnZSkgaW4gcmFu
Z2UgKi8KPiAgICAgICB1aW50NjRfYWxpZ25lZF90IGZpcnN0X21mbjsgLyogZmlyc3QgcGFnZSAo
bWFjaGluZSBwYWdlKSBpbiByYW5nZSAqLwo+ICAgICAgIHVpbnQ2NF9hbGlnbmVkX3QgbnJfbWZu
czsgICAvKiBudW1iZXIgb2YgcGFnZXMgaW4gcmFuZ2UgKD4wKSAqLwo+ICAgICAgIHVpbnQzMl90
IGFkZF9tYXBwaW5nOyAgICAgICAvKiBhZGQgb3IgcmVtb3ZlIG1hcHBpbmcgKi8KPiAtICAgIHVp
bnQzMl90IHBhZGRpbmc7ICAgICAgICAgICAvKiBwYWRkaW5nIGZvciA2NC1iaXQgYWxpZ25lZCBz
dHJ1Y3R1cmUgKi8KPiArICAgIHVpbnQzMl90IG1lbW9yeV9wb2xpY3k7ICAgICAgLyogY2FjaGVh
YmlsaXR5IG9mIHRoZSBtZW1vcnkgbWFwcGluZyAqLwoKIEZyb20gYSBxdWljayBsb29rIGF0IGxp
YnhjLCBpdCBzZWVtcyB0aGUgcGFkZGluZyBmaWVsZCB3aWxsIG5vdCBiZSAKaW5pdGlhbGl6ZWQg
dG8gMCAoYWthIE1FTU9SWV9ERUZBVUxUX1BPTElDWSkuIEFzIHRoZSBsaWJ4YyBzdXBwb3J0IGlz
IAphZGRlZCBpbiBhIGZvbGxvdy11cCBwYXRjaCwgSSB0aGluayB5b3Ugd2FudCB0byBlbnN1cmUg
bWVtb3J5X3BvbGljeSBpcyAKZXF1YWwgdG8gTUVNT1JZX0RFRkFVTFRfUE9MSUNZIGluIGxpYnhj
LiBTbyB0aGVyZSBhcmUgbm8gdW5leHBlY3RlZCAKYmVoYXZpb3IgZHVyaW5nIGJpc2VjdGlvbiBv
ciB0aGlzIHBhdGNoIGdldHMgYXBwbGllZCBiZWZvcmUgdGhlIHJlc3QuCgpDaGVlcnMsCgotLSAK
SnVsaWVuIEdyYWxsCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9y
ZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 9BCDCD7BB9
	for <lists+xen-devel@lfdr.de>; Tue, 15 Oct 2019 18:33:23 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iKPis-000567-Vi; Tue, 15 Oct 2019 16:30:58 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=cnbq=YI=redhat.com=philmd@srs-us1.protection.inumbo.net>)
 id 1iKPiq-000551-Qm
 for xen-devel@lists.xenproject.org; Tue, 15 Oct 2019 16:30:56 +0000
X-Inumbo-ID: 297825ae-ef69-11e9-beca-bc764e2007e4
Received: from mx1.redhat.com (unknown [209.132.183.28])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 297825ae-ef69-11e9-beca-bc764e2007e4;
 Tue, 15 Oct 2019 16:30:56 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx08.intmail.prod.int.phx2.redhat.com
 [10.5.11.23])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 84B7D3082B41;
 Tue, 15 Oct 2019 16:30:55 +0000 (UTC)
Received: from x1w.redhat.com (ovpn-204-35.brq.redhat.com [10.40.204.35])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id A8F7219C58;
 Tue, 15 Oct 2019 16:30:46 +0000 (UTC)
From: =?UTF-8?q?Philippe=20Mathieu-Daud=C3=A9?= <philmd@redhat.com>
To: qemu-devel@nongnu.org
Date: Tue, 15 Oct 2019 18:26:52 +0200
Message-Id: <20191015162705.28087-20-philmd@redhat.com>
In-Reply-To: <20191015162705.28087-1-philmd@redhat.com>
References: <20191015162705.28087-1-philmd@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.23
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.45]); Tue, 15 Oct 2019 16:30:55 +0000 (UTC)
Subject: [Xen-devel] [PATCH 19/32] hw/isa/piix4: Move piix4_create() to
 hw/isa/piix4.c
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Laurent Vivier <lvivier@redhat.com>, Thomas Huth <thuth@redhat.com>,
 Stefano Stabellini <sstabellini@kernel.org>,
 Eduardo Habkost <ehabkost@redhat.com>, kvm@vger.kernel.org,
 Paul Durrant <paul@xen.org>, "Michael S. Tsirkin" <mst@redhat.com>,
 =?UTF-8?q?Philippe=20Mathieu-Daud=C3=A9?= <f4bug@amsat.org>,
 Marcel Apfelbaum <marcel.apfelbaum@gmail.com>,
 Paolo Bonzini <pbonzini@redhat.com>,
 =?UTF-8?q?Herv=C3=A9=20Poussineau?= <hpoussin@reactos.org>,
 Aleksandar Markovic <amarkovic@wavecomp.com>, xen-devel@lists.xenproject.org,
 Anthony Perard <anthony.perard@citrix.com>,
 Igor Mammedov <imammedo@redhat.com>,
 Aleksandar Rikalo <aleksandar.rikalo@rt-rk.com>,
 =?UTF-8?q?Philippe=20Mathieu-Daud=C3=A9?= <philmd@redhat.com>,
 Aurelien Jarno <aurelien@aurel32.net>, Richard Henderson <rth@twiddle.net>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogUGhpbGlwcGUgTWF0aGlldS1EYXVkw6kgPGY0YnVnQGFtc2F0Lm9yZz4KCk5vdyB0aGF0
IHdlIHByb3Blcmx5IHJlZmFjdG9yZWQgdGhlIHBpaXg0X2NyZWF0ZSgpIGZ1bmN0aW9uLCBsZXQn
cwptb3ZlIGl0IHRvIGh3L2lzYS9waWl4NC5jIHdoZXJlIGl0IGJlbG9uZ3MsIHNvIGl0IGNhbiBi
ZSByZXVzZWQKb24gb3RoZXIgcGxhY2VzLgoKU2lnbmVkLW9mZi1ieTogUGhpbGlwcGUgTWF0aGll
dS1EYXVkw6kgPHBoaWxtZEByZWRoYXQuY29tPgotLS0KIGh3L2lzYS9waWl4NC5jICAgICAgICAg
ICAgICAgIHwgMzAgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiBody9taXBzL2d0NjR4
eHhfcGNpLmMgICAgICAgICB8ICAxICsKIGh3L21pcHMvbWlwc19tYWx0YS5jICAgICAgICAgIHwg
MjggLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogaW5jbHVkZS9ody9pMzg2L3BjLmggICAg
ICAgICAgfCAgMiAtLQogaW5jbHVkZS9ody9zb3V0aGJyaWRnZS9waWl4LmggfCAgNiArKysrKysK
IDUgZmlsZXMgY2hhbmdlZCwgMzcgaW5zZXJ0aW9ucygrKSwgMzAgZGVsZXRpb25zKC0pCgpkaWZm
IC0tZ2l0IGEvaHcvaXNhL3BpaXg0LmMgYi9ody9pc2EvcGlpeDQuYwppbmRleCA5ZjU1NDc0N2Fm
Li5kOTA4OTllMTIyIDEwMDY0NAotLS0gYS9ody9pc2EvcGlpeDQuYworKysgYi9ody9pc2EvcGlp
eDQuYwpAQCAtMjcsMTIgKzI3LDE0IEBACiAjaW5jbHVkZSAicWFwaS9lcnJvci5oIgogI2luY2x1
ZGUgImh3L2lycS5oIgogI2luY2x1ZGUgImh3L2kzODYvcGMuaCIKKyNpbmNsdWRlICJody9zb3V0
aGJyaWRnZS9waWl4LmgiCiAjaW5jbHVkZSAiaHcvcGNpL3BjaS5oIgogI2luY2x1ZGUgImh3L2lz
YS9pc2EuaCIKICNpbmNsdWRlICJody9zeXNidXMuaCIKICNpbmNsdWRlICJody9kbWEvaTgyNTcu
aCIKICNpbmNsdWRlICJody90aW1lci9pODI1NC5oIgogI2luY2x1ZGUgImh3L3RpbWVyL21jMTQ2
ODE4cnRjLmgiCisjaW5jbHVkZSAiaHcvaWRlLmgiCiAjaW5jbHVkZSAibWlncmF0aW9uL3Ztc3Rh
dGUuaCIKICNpbmNsdWRlICJzeXNlbXUvcmVzZXQuaCIKICNpbmNsdWRlICJzeXNlbXUvcnVuc3Rh
dGUuaCIKQEAgLTIzNCwzICsyMzYsMzEgQEAgc3RhdGljIHZvaWQgcGlpeDRfcmVnaXN0ZXJfdHlw
ZXModm9pZCkKIH0KIAogdHlwZV9pbml0KHBpaXg0X3JlZ2lzdGVyX3R5cGVzKQorCitEZXZpY2VT
dGF0ZSAqcGlpeDRfY3JlYXRlKFBDSUJ1cyAqcGNpX2J1cywgSVNBQnVzICoqaXNhX2J1cywKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgSTJDQnVzICoqc21idXMsIHNpemVfdCBpZGVfYnVzZXMp
Cit7CisgICAgc2l6ZV90IGlkZV9kcml2ZXMgPSBpZGVfYnVzZXMgKiBNQVhfSURFX0RFVlM7Cisg
ICAgRHJpdmVJbmZvICoqaGQ7CisgICAgUENJRGV2aWNlICpwY2k7CisgICAgRGV2aWNlU3RhdGUg
KmRldjsKKworICAgIHBjaSA9IHBjaV9jcmVhdGVfc2ltcGxlX211bHRpZnVuY3Rpb24ocGNpX2J1
cywgUENJX0RFVkZOKDEwLCAwKSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHRydWUsIFRZUEVfUElJWDRfUENJX0RFVklDRSk7CisgICAgZGV2ID0gREVWSUNFKHBj
aSk7CisgICAgaWYgKGlzYV9idXMpIHsKKyAgICAgICAgKmlzYV9idXMgPSBJU0FfQlVTKHFkZXZf
Z2V0X2NoaWxkX2J1cyhkZXYsICJpc2EuMCIpKTsKKyAgICB9CisKKyAgICBoZCA9IGdfbmV3KERy
aXZlSW5mbyAqLCBpZGVfZHJpdmVzKTsKKyAgICBpZGVfZHJpdmVfZ2V0KGhkLCBpZGVfZHJpdmVz
KTsKKyAgICBwY2lfcGlpeDRfaWRlX2luaXQocGNpX2J1cywgaGQsIHBjaS0+ZGV2Zm4gKyAxKTsK
KyAgICBnX2ZyZWUoaGQpOworICAgIHBjaV9jcmVhdGVfc2ltcGxlKHBjaV9idXMsIHBjaS0+ZGV2
Zm4gKyAyLCAicGlpeDQtdXNiLXVoY2kiKTsKKyAgICBpZiAoc21idXMpIHsKKyAgICAgICAgKnNt
YnVzID0gcGlpeDRfcG1faW5pdChwY2lfYnVzLCBwY2ktPmRldmZuICsgMywgMHgxMTAwLAorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzYV9nZXRfaXJxKE5VTEwsIDkpLCBOVUxMLCAw
LCBOVUxMKTsKKyAgIH0KKworICAgIHJldHVybiBkZXY7Cit9CmRpZmYgLS1naXQgYS9ody9taXBz
L2d0NjR4eHhfcGNpLmMgYi9ody9taXBzL2d0NjR4eHhfcGNpLmMKaW5kZXggZjMyNWJkNmMxYy4u
YzI3NzM5OGMwZCAxMDA2NDQKLS0tIGEvaHcvbWlwcy9ndDY0eHh4X3BjaS5jCisrKyBiL2h3L21p
cHMvZ3Q2NHh4eF9wY2kuYwpAQCAtMjgsNiArMjgsNyBAQAogI2luY2x1ZGUgImh3L21pcHMvbWlw
cy5oIgogI2luY2x1ZGUgImh3L3BjaS9wY2kuaCIKICNpbmNsdWRlICJody9wY2kvcGNpX2hvc3Qu
aCIKKyNpbmNsdWRlICJody9zb3V0aGJyaWRnZS9waWl4LmgiCiAjaW5jbHVkZSAibWlncmF0aW9u
L3Ztc3RhdGUuaCIKICNpbmNsdWRlICJody9pMzg2L3BjLmgiCiAjaW5jbHVkZSAiaHcvaXJxLmgi
CmRpZmYgLS1naXQgYS9ody9taXBzL21pcHNfbWFsdGEuYyBiL2h3L21pcHMvbWlwc19tYWx0YS5j
CmluZGV4IDBkNDMxMjg0MGIuLjQ3N2E0NzI1YzAgMTAwNjQ0Ci0tLSBhL2h3L21pcHMvbWlwc19t
YWx0YS5jCisrKyBiL2h3L21pcHMvbWlwc19tYWx0YS5jCkBAIC0xMjEwLDM0ICsxMjEwLDYgQEAg
c3RhdGljIHZvaWQgbWlwc19jcmVhdGVfY3B1KE1hY2hpbmVTdGF0ZSAqbXMsIE1hbHRhU3RhdGUg
KnMsCiAgICAgfQogfQogCi1zdGF0aWMgRGV2aWNlU3RhdGUgKnBpaXg0X2NyZWF0ZShQQ0lCdXMg
KnBjaV9idXMsIElTQUJ1cyAqKmlzYV9idXMsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBJMkNCdXMgKipzbWJ1cywgc2l6ZV90IGlkZV9idXNlcykKLXsKLSAgICBjb25zdCBzaXpl
X3QgaWRlX2RyaXZlcyA9IGlkZV9idXNlcyAqIE1BWF9JREVfREVWUzsKLSAgICBEcml2ZUluZm8g
KipoZDsKLSAgICBQQ0lEZXZpY2UgKnBjaTsKLSAgICBEZXZpY2VTdGF0ZSAqZGV2OwotCi0gICAg
cGNpID0gcGNpX2NyZWF0ZV9zaW1wbGVfbXVsdGlmdW5jdGlvbihwY2lfYnVzLCBQQ0lfREVWRk4o
MTAsIDApLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSwg
VFlQRV9QSUlYNF9QQ0lfREVWSUNFKTsKLSAgICBkZXYgPSBERVZJQ0UocGNpKTsKLSAgICBpZiAo
aXNhX2J1cykgewotICAgICAgICAqaXNhX2J1cyA9IElTQV9CVVMocWRldl9nZXRfY2hpbGRfYnVz
KGRldiwgImlzYS4wIikpOwotICAgIH0KLQotICAgIGhkID0gZ19uZXcoRHJpdmVJbmZvICosIGlk
ZV9kcml2ZXMpOwotICAgIGlkZV9kcml2ZV9nZXQoaGQsIGlkZV9kcml2ZXMpOwotICAgIHBjaV9w
aWl4NF9pZGVfaW5pdChwY2lfYnVzLCBoZCwgcGNpLT5kZXZmbiArIDEpOwotICAgIGdfZnJlZSho
ZCk7Ci0gICAgcGNpX2NyZWF0ZV9zaW1wbGUocGNpX2J1cywgcGNpLT5kZXZmbiArIDIsICJwaWl4
NC11c2ItdWhjaSIpOwotICAgIGlmIChzbWJ1cykgewotICAgICAgICAqc21idXMgPSBwaWl4NF9w
bV9pbml0KHBjaV9idXMsIHBjaS0+ZGV2Zm4gKyAzLCAweDExMDAsCi0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaXNhX2dldF9pcnEoTlVMTCwgOSksIE5VTEwsIDAsIE5VTEwpOwotICAg
fQotCi0gICAgcmV0dXJuIGRldjsKLX0KLQogc3RhdGljCiB2b2lkIG1pcHNfbWFsdGFfaW5pdChN
YWNoaW5lU3RhdGUgKm1hY2hpbmUpCiB7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2h3L2kzODYvcGMu
aCBiL2luY2x1ZGUvaHcvaTM4Ni9wYy5oCmluZGV4IGM2NzFjOWZkMmEuLmI2M2ZjNzYzMWUgMTAw
NjQ0Ci0tLSBhL2luY2x1ZGUvaHcvaTM4Ni9wYy5oCisrKyBiL2luY2x1ZGUvaHcvaTM4Ni9wYy5o
CkBAIC0yNzQsOCArMjc0LDYgQEAgUENJQnVzICppNDQwZnhfaW5pdChjb25zdCBjaGFyICpob3N0
X3R5cGUsIGNvbnN0IGNoYXIgKnBjaV90eXBlLAogICAgICAgICAgICAgICAgICAgICBNZW1vcnlS
ZWdpb24gKnJhbV9tZW1vcnkpOwogCiBQQ0lCdXMgKmZpbmRfaTQ0MGZ4KHZvaWQpOwotLyogcGlp
eDQuYyAqLwotZXh0ZXJuIFBDSURldmljZSAqcGlpeDRfZGV2OwogCiAvKiBwY19zeXNmdy5jICov
CiB2b2lkIHBjX3N5c3RlbV9mbGFzaF9jcmVhdGUoUENNYWNoaW5lU3RhdGUgKnBjbXMpOwpkaWZm
IC0tZ2l0IGEvaW5jbHVkZS9ody9zb3V0aGJyaWRnZS9waWl4LmggYi9pbmNsdWRlL2h3L3NvdXRo
YnJpZGdlL3BpaXguaAppbmRleCBiOGNlMjZmZWM0Li5hZGQzNTI0NTZiIDEwMDY0NAotLS0gYS9p
bmNsdWRlL2h3L3NvdXRoYnJpZGdlL3BpaXguaAorKysgYi9pbmNsdWRlL2h3L3NvdXRoYnJpZGdl
L3BpaXguaApAQCAtMiw2ICsyLDcgQEAKICAqIFFFTVUgUElJWCBTb3V0aCBCcmlkZ2UgRW11bGF0
aW9uCiAgKgogICogQ29weXJpZ2h0IChjKSAyMDA2IEZhYnJpY2UgQmVsbGFyZAorICogQ29weXJp
Z2h0IChjKSAyMDE4IEhlcnbDqSBQb3Vzc2luZWF1CiAgKgogICogVGhpcyB3b3JrIGlzIGxpY2Vu
c2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdQTCwgdmVyc2lvbiAyIG9yIGxhdGVyLgog
ICogU2VlIHRoZSBDT1BZSU5HIGZpbGUgaW4gdGhlIHRvcC1sZXZlbCBkaXJlY3RvcnkuCkBAIC0x
Nyw0ICsxOCw5IEBAIEkyQ0J1cyAqcGlpeDRfcG1faW5pdChQQ0lCdXMgKmJ1cywgaW50IGRldmZu
LCB1aW50MzJfdCBzbWJfaW9fYmFzZSwKICAgICAgICAgICAgICAgICAgICAgICBxZW11X2lycSBz
Y2lfaXJxLCBxZW11X2lycSBzbWlfaXJxLAogICAgICAgICAgICAgICAgICAgICAgIGludCBzbW1f
ZW5hYmxlZCwgRGV2aWNlU3RhdGUgKipwaWl4NF9wbSk7CiAKK2V4dGVybiBQQ0lEZXZpY2UgKnBp
aXg0X2RldjsKKworRGV2aWNlU3RhdGUgKnBpaXg0X2NyZWF0ZShQQ0lCdXMgKnBjaV9idXMsIElT
QUJ1cyAqKmlzYV9idXMsCisgICAgICAgICAgICAgICAgICAgICAgICAgIEkyQ0J1cyAqKnNtYnVz
LCBzaXplX3QgaWRlX2J1c2VzKTsKKwogI2VuZGlmCi0tIAoyLjIxLjAKCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0
Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qu
b3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

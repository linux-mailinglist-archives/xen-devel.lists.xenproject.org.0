Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B81FE6884B
	for <lists+xen-devel@lfdr.de>; Mon, 15 Jul 2019 13:41:45 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hmzIk-00073i-AU; Mon, 15 Jul 2019 11:37:50 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=TQSl=VM=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1hmzIi-00073O-HR
 for xen-devel@lists.xenproject.org; Mon, 15 Jul 2019 11:37:48 +0000
X-Inumbo-ID: f6dc27ba-a6f4-11e9-b45f-17c7088bd449
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id f6dc27ba-a6f4-11e9-b45f-17c7088bd449;
 Mon, 15 Jul 2019 11:37:46 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id AAD3EAE8B;
 Mon, 15 Jul 2019 11:37:44 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org, x86@kernel.org,
 linux-kernel@vger.kernel.org, virtualization@lists.linux-foundation.org
Date: Mon, 15 Jul 2019 13:37:39 +0200
Message-Id: <20190715113739.17694-3-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190715113739.17694-1-jgross@suse.com>
References: <20190715113739.17694-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH 2/2] x86/paravirt: remove 32-bit support from
 PARAVIRT_XXL
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Ingo Molnar <mingo@redhat.com>,
 Borislav Petkov <bp@alien8.de>, Andy Lutomirski <luto@kernel.org>,
 "H. Peter Anvin" <hpa@zytor.com>, Thomas Gleixner <tglx@linutronix.de>,
 Alok Kataria <akataria@vmware.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlIGxhc3QgMzItYml0IHVzZXIgb2Ygc3R1ZmYgdW5kZXIgQ09ORklHX1BBUkFWSVJUX1hYTCBp
cyBnb25lLgoKUmVtb3ZlIDMyLWJpdCBzcGVjaWZpYyBwYXJ0cy4KClNpZ25lZC1vZmYtYnk6IEp1
ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNvbT4KLS0tCiBhcmNoL3g4Ni9lbnRyeS92ZHNvL3Zk
c28zMi92Y2xvY2tfZ2V0dGltZS5jIHwgICAxICsKIGFyY2gveDg2L2luY2x1ZGUvYXNtL3BhcmF2
aXJ0LmggICAgICAgICAgICAgfCAxMDUgKysrKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogYXJj
aC94ODYvaW5jbHVkZS9hc20vcGFyYXZpcnRfdHlwZXMuaCAgICAgICB8ICAyMCAtLS0tLS0KIGFy
Y2gveDg2L2luY2x1ZGUvYXNtL3BndGFibGUtM2xldmVsX3R5cGVzLmggfCAgIDUgLS0KIGFyY2gv
eDg2L2tlcm5lbC9jcHUvY29tbW9uLmMgICAgICAgICAgICAgICAgfCAgIDggLS0tCiBhcmNoL3g4
Ni9rZXJuZWwvcGFyYXZpcnQuYyAgICAgICAgICAgICAgICAgIHwgIDE3IC0tLS0tCiBhcmNoL3g4
Ni9rZXJuZWwvcGFyYXZpcnRfcGF0Y2hfMzIuYyAgICAgICAgIHwgIDM2ICstLS0tLS0tLS0KIDcg
ZmlsZXMgY2hhbmdlZCwgMTUgaW5zZXJ0aW9ucygrKSwgMTc3IGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2FyY2gveDg2L2VudHJ5L3Zkc28vdmRzbzMyL3ZjbG9ja19nZXR0aW1lLmMgYi9hcmNo
L3g4Ni9lbnRyeS92ZHNvL3Zkc28zMi92Y2xvY2tfZ2V0dGltZS5jCmluZGV4IDkyNDJiMjg0MThk
NS4uMzZmNGNlMTQwNWNiIDEwMDY0NAotLS0gYS9hcmNoL3g4Ni9lbnRyeS92ZHNvL3Zkc28zMi92
Y2xvY2tfZ2V0dGltZS5jCisrKyBiL2FyY2gveDg2L2VudHJ5L3Zkc28vdmRzbzMyL3ZjbG9ja19n
ZXR0aW1lLmMKQEAgLTE3LDYgKzE3LDcgQEAKICN1bmRlZiBDT05GSUdfSUxMRUdBTF9QT0lOVEVS
X1ZBTFVFCiAjdW5kZWYgQ09ORklHX1NQQVJTRU1FTV9WTUVNTUFQCiAjdW5kZWYgQ09ORklHX05S
X0NQVVMKKyN1bmRlZiBDT05GSUdfUEFSQVZJUlRfWFhMCiAKICNkZWZpbmUgQ09ORklHX1g4Nl8z
MiAxCiAjZGVmaW5lIENPTkZJR19QR1RBQkxFX0xFVkVMUyAyCmRpZmYgLS1naXQgYS9hcmNoL3g4
Ni9pbmNsdWRlL2FzbS9wYXJhdmlydC5oIGIvYXJjaC94ODYvaW5jbHVkZS9hc20vcGFyYXZpcnQu
aAppbmRleCBjMjVjMzhhMDVjMWMuLjYwZGZhOTMzMTNhOSAxMDA2NDQKLS0tIGEvYXJjaC94ODYv
aW5jbHVkZS9hc20vcGFyYXZpcnQuaAorKysgYi9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9wYXJhdmly
dC5oCkBAIC0xMzksNyArMTM5LDYgQEAgc3RhdGljIGlubGluZSB2b2lkIF9fd3JpdGVfY3I0KHVu
c2lnbmVkIGxvbmcgeCkKIAlQVk9QX1ZDQUxMMShjcHUud3JpdGVfY3I0LCB4KTsKIH0KIAotI2lm
ZGVmIENPTkZJR19YODZfNjQKIHN0YXRpYyBpbmxpbmUgdW5zaWduZWQgbG9uZyByZWFkX2NyOCh2
b2lkKQogewogCXJldHVybiBQVk9QX0NBTEwwKHVuc2lnbmVkIGxvbmcsIGNwdS5yZWFkX2NyOCk7
CkBAIC0xNDksNyArMTQ4LDYgQEAgc3RhdGljIGlubGluZSB2b2lkIHdyaXRlX2NyOCh1bnNpZ25l
ZCBsb25nIHgpCiB7CiAJUFZPUF9WQ0FMTDEoY3B1LndyaXRlX2NyOCwgeCk7CiB9Ci0jZW5kaWYK
IAogc3RhdGljIGlubGluZSB2b2lkIGFyY2hfc2FmZV9oYWx0KHZvaWQpCiB7CkBAIC0yODMsMTIg
KzI4MSwxMCBAQCBzdGF0aWMgaW5saW5lIHZvaWQgbG9hZF9UTFMoc3RydWN0IHRocmVhZF9zdHJ1
Y3QgKnQsIHVuc2lnbmVkIGNwdSkKIAlQVk9QX1ZDQUxMMihjcHUubG9hZF90bHMsIHQsIGNwdSk7
CiB9CiAKLSNpZmRlZiBDT05GSUdfWDg2XzY0CiBzdGF0aWMgaW5saW5lIHZvaWQgbG9hZF9nc19p
bmRleCh1bnNpZ25lZCBpbnQgZ3MpCiB7CiAJUFZPUF9WQ0FMTDEoY3B1LmxvYWRfZ3NfaW5kZXgs
IGdzKTsKIH0KLSNlbmRpZgogCiBzdGF0aWMgaW5saW5lIHZvaWQgd3JpdGVfbGR0X2VudHJ5KHN0
cnVjdCBkZXNjX3N0cnVjdCAqZHQsIGludCBlbnRyeSwKIAkJCQkgICBjb25zdCB2b2lkICpkZXNj
KQpAQCAtMzc1LDUwICszNzEsMjggQEAgc3RhdGljIGlubGluZSBwdGVfdCBfX3B0ZShwdGV2YWxf
dCB2YWwpCiB7CiAJcHRldmFsX3QgcmV0OwogCi0JaWYgKHNpemVvZihwdGV2YWxfdCkgPiBzaXpl
b2YobG9uZykpCi0JCXJldCA9IFBWT1BfQ0FMTEVFMihwdGV2YWxfdCwgbW11Lm1ha2VfcHRlLCB2
YWwsICh1NjQpdmFsID4+IDMyKTsKLQllbHNlCi0JCXJldCA9IFBWT1BfQ0FMTEVFMShwdGV2YWxf
dCwgbW11Lm1ha2VfcHRlLCB2YWwpOworCXJldCA9IFBWT1BfQ0FMTEVFMShwdGV2YWxfdCwgbW11
Lm1ha2VfcHRlLCB2YWwpOwogCiAJcmV0dXJuIChwdGVfdCkgeyAucHRlID0gcmV0IH07CiB9CiAK
IHN0YXRpYyBpbmxpbmUgcHRldmFsX3QgcHRlX3ZhbChwdGVfdCBwdGUpCiB7Ci0JcHRldmFsX3Qg
cmV0OwotCi0JaWYgKHNpemVvZihwdGV2YWxfdCkgPiBzaXplb2YobG9uZykpCi0JCXJldCA9IFBW
T1BfQ0FMTEVFMihwdGV2YWxfdCwgbW11LnB0ZV92YWwsCi0JCQkJICAgcHRlLnB0ZSwgKHU2NClw
dGUucHRlID4+IDMyKTsKLQllbHNlCi0JCXJldCA9IFBWT1BfQ0FMTEVFMShwdGV2YWxfdCwgbW11
LnB0ZV92YWwsIHB0ZS5wdGUpOwotCi0JcmV0dXJuIHJldDsKKwlyZXR1cm4gUFZPUF9DQUxMRUUx
KHB0ZXZhbF90LCBtbXUucHRlX3ZhbCwgcHRlLnB0ZSk7CiB9CiAKIHN0YXRpYyBpbmxpbmUgcGdk
X3QgX19wZ2QocGdkdmFsX3QgdmFsKQogewogCXBnZHZhbF90IHJldDsKIAotCWlmIChzaXplb2Yo
cGdkdmFsX3QpID4gc2l6ZW9mKGxvbmcpKQotCQlyZXQgPSBQVk9QX0NBTExFRTIocGdkdmFsX3Qs
IG1tdS5tYWtlX3BnZCwgdmFsLCAodTY0KXZhbCA+PiAzMik7Ci0JZWxzZQotCQlyZXQgPSBQVk9Q
X0NBTExFRTEocGdkdmFsX3QsIG1tdS5tYWtlX3BnZCwgdmFsKTsKKwlyZXQgPSBQVk9QX0NBTExF
RTEocGdkdmFsX3QsIG1tdS5tYWtlX3BnZCwgdmFsKTsKIAogCXJldHVybiAocGdkX3QpIHsgcmV0
IH07CiB9CiAKIHN0YXRpYyBpbmxpbmUgcGdkdmFsX3QgcGdkX3ZhbChwZ2RfdCBwZ2QpCiB7Ci0J
cGdkdmFsX3QgcmV0OwotCi0JaWYgKHNpemVvZihwZ2R2YWxfdCkgPiBzaXplb2YobG9uZykpCi0J
CXJldCA9ICBQVk9QX0NBTExFRTIocGdkdmFsX3QsIG1tdS5wZ2RfdmFsLAotCQkJCSAgICBwZ2Qu
cGdkLCAodTY0KXBnZC5wZ2QgPj4gMzIpOwotCWVsc2UKLQkJcmV0ID0gIFBWT1BfQ0FMTEVFMShw
Z2R2YWxfdCwgbW11LnBnZF92YWwsIHBnZC5wZ2QpOwotCi0JcmV0dXJuIHJldDsKKwlyZXR1cm4g
UFZPUF9DQUxMRUUxKHBnZHZhbF90LCBtbXUucGdkX3ZhbCwgcGdkLnBnZCk7CiB9CiAKICNkZWZp
bmUgIF9fSEFWRV9BUkNIX1BURVBfTU9ESUZZX1BST1RfVFJBTlNBQ1RJT04KQEAgLTQzNSw3OSAr
NDA5LDQ4IEBAIHN0YXRpYyBpbmxpbmUgcHRlX3QgcHRlcF9tb2RpZnlfcHJvdF9zdGFydChzdHJ1
Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSwgdW5zaWduZWQKIHN0YXRpYyBpbmxpbmUgdm9pZCBwdGVw
X21vZGlmeV9wcm90X2NvbW1pdChzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSwgdW5zaWduZWQg
bG9uZyBhZGRyLAogCQkJCQkgICBwdGVfdCAqcHRlcCwgcHRlX3Qgb2xkX3B0ZSwgcHRlX3QgcHRl
KQogewotCi0JaWYgKHNpemVvZihwdGV2YWxfdCkgPiBzaXplb2YobG9uZykpCi0JCS8qIDUgYXJn
IHdvcmRzICovCi0JCXB2X29wcy5tbXUucHRlcF9tb2RpZnlfcHJvdF9jb21taXQodm1hLCBhZGRy
LCBwdGVwLCBwdGUpOwotCWVsc2UKLQkJUFZPUF9WQ0FMTDQobW11LnB0ZXBfbW9kaWZ5X3Byb3Rf
Y29tbWl0LAotCQkJICAgIHZtYSwgYWRkciwgcHRlcCwgcHRlLnB0ZSk7CisJUFZPUF9WQ0FMTDQo
bW11LnB0ZXBfbW9kaWZ5X3Byb3RfY29tbWl0LCB2bWEsIGFkZHIsIHB0ZXAsIHB0ZS5wdGUpOwog
fQogCiBzdGF0aWMgaW5saW5lIHZvaWQgc2V0X3B0ZShwdGVfdCAqcHRlcCwgcHRlX3QgcHRlKQog
ewotCWlmIChzaXplb2YocHRldmFsX3QpID4gc2l6ZW9mKGxvbmcpKQotCQlQVk9QX1ZDQUxMMyht
bXUuc2V0X3B0ZSwgcHRlcCwgcHRlLnB0ZSwgKHU2NClwdGUucHRlID4+IDMyKTsKLQllbHNlCi0J
CVBWT1BfVkNBTEwyKG1tdS5zZXRfcHRlLCBwdGVwLCBwdGUucHRlKTsKKwlQVk9QX1ZDQUxMMiht
bXUuc2V0X3B0ZSwgcHRlcCwgcHRlLnB0ZSk7CiB9CiAKIHN0YXRpYyBpbmxpbmUgdm9pZCBzZXRf
cHRlX2F0KHN0cnVjdCBtbV9zdHJ1Y3QgKm1tLCB1bnNpZ25lZCBsb25nIGFkZHIsCiAJCQkgICAg
ICBwdGVfdCAqcHRlcCwgcHRlX3QgcHRlKQogewotCWlmIChzaXplb2YocHRldmFsX3QpID4gc2l6
ZW9mKGxvbmcpKQotCQkvKiA1IGFyZyB3b3JkcyAqLwotCQlwdl9vcHMubW11LnNldF9wdGVfYXQo
bW0sIGFkZHIsIHB0ZXAsIHB0ZSk7Ci0JZWxzZQotCQlQVk9QX1ZDQUxMNChtbXUuc2V0X3B0ZV9h
dCwgbW0sIGFkZHIsIHB0ZXAsIHB0ZS5wdGUpOworCVBWT1BfVkNBTEw0KG1tdS5zZXRfcHRlX2F0
LCBtbSwgYWRkciwgcHRlcCwgcHRlLnB0ZSk7CiB9CiAKIHN0YXRpYyBpbmxpbmUgdm9pZCBzZXRf
cG1kKHBtZF90ICpwbWRwLCBwbWRfdCBwbWQpCiB7CiAJcG1kdmFsX3QgdmFsID0gbmF0aXZlX3Bt
ZF92YWwocG1kKTsKIAotCWlmIChzaXplb2YocG1kdmFsX3QpID4gc2l6ZW9mKGxvbmcpKQotCQlQ
Vk9QX1ZDQUxMMyhtbXUuc2V0X3BtZCwgcG1kcCwgdmFsLCAodTY0KXZhbCA+PiAzMik7Ci0JZWxz
ZQotCQlQVk9QX1ZDQUxMMihtbXUuc2V0X3BtZCwgcG1kcCwgdmFsKTsKKwlQVk9QX1ZDQUxMMiht
bXUuc2V0X3BtZCwgcG1kcCwgdmFsKTsKIH0KIAotI2lmIENPTkZJR19QR1RBQkxFX0xFVkVMUyA+
PSAzCiBzdGF0aWMgaW5saW5lIHBtZF90IF9fcG1kKHBtZHZhbF90IHZhbCkKIHsKIAlwbWR2YWxf
dCByZXQ7CiAKLQlpZiAoc2l6ZW9mKHBtZHZhbF90KSA+IHNpemVvZihsb25nKSkKLQkJcmV0ID0g
UFZPUF9DQUxMRUUyKHBtZHZhbF90LCBtbXUubWFrZV9wbWQsIHZhbCwgKHU2NCl2YWwgPj4gMzIp
OwotCWVsc2UKLQkJcmV0ID0gUFZPUF9DQUxMRUUxKHBtZHZhbF90LCBtbXUubWFrZV9wbWQsIHZh
bCk7CisJcmV0ID0gUFZPUF9DQUxMRUUxKHBtZHZhbF90LCBtbXUubWFrZV9wbWQsIHZhbCk7CiAK
IAlyZXR1cm4gKHBtZF90KSB7IHJldCB9OwogfQogCiBzdGF0aWMgaW5saW5lIHBtZHZhbF90IHBt
ZF92YWwocG1kX3QgcG1kKQogewotCXBtZHZhbF90IHJldDsKLQotCWlmIChzaXplb2YocG1kdmFs
X3QpID4gc2l6ZW9mKGxvbmcpKQotCQlyZXQgPSAgUFZPUF9DQUxMRUUyKHBtZHZhbF90LCBtbXUu
cG1kX3ZhbCwKLQkJCQkgICAgcG1kLnBtZCwgKHU2NClwbWQucG1kID4+IDMyKTsKLQllbHNlCi0J
CXJldCA9ICBQVk9QX0NBTExFRTEocG1kdmFsX3QsIG1tdS5wbWRfdmFsLCBwbWQucG1kKTsKLQot
CXJldHVybiByZXQ7CisJcmV0dXJuIFBWT1BfQ0FMTEVFMShwbWR2YWxfdCwgbW11LnBtZF92YWws
IHBtZC5wbWQpOwogfQogCiBzdGF0aWMgaW5saW5lIHZvaWQgc2V0X3B1ZChwdWRfdCAqcHVkcCwg
cHVkX3QgcHVkKQogewogCXB1ZHZhbF90IHZhbCA9IG5hdGl2ZV9wdWRfdmFsKHB1ZCk7CiAKLQlp
ZiAoc2l6ZW9mKHB1ZHZhbF90KSA+IHNpemVvZihsb25nKSkKLQkJUFZPUF9WQ0FMTDMobW11LnNl
dF9wdWQsIHB1ZHAsIHZhbCwgKHU2NCl2YWwgPj4gMzIpOwotCWVsc2UKLQkJUFZPUF9WQ0FMTDIo
bW11LnNldF9wdWQsIHB1ZHAsIHZhbCk7CisJUFZPUF9WQ0FMTDIobW11LnNldF9wdWQsIHB1ZHAs
IHZhbCk7CiB9Ci0jaWYgQ09ORklHX1BHVEFCTEVfTEVWRUxTID49IDQKKwogc3RhdGljIGlubGlu
ZSBwdWRfdCBfX3B1ZChwdWR2YWxfdCB2YWwpCiB7CiAJcHVkdmFsX3QgcmV0OwpAQCAtNTcyLDI5
ICs1MTUsNiBAQCBzdGF0aWMgaW5saW5lIHZvaWQgcDRkX2NsZWFyKHA0ZF90ICpwNGRwKQogCXNl
dF9wNGQocDRkcCwgX19wNGQoMCkpOwogfQogCi0jZW5kaWYJLyogQ09ORklHX1BHVEFCTEVfTEVW
RUxTID09IDQgKi8KLQotI2VuZGlmCS8qIENPTkZJR19QR1RBQkxFX0xFVkVMUyA+PSAzICovCi0K
LSNpZmRlZiBDT05GSUdfWDg2X1BBRQotLyogU3BlY2lhbC1jYXNlIHB0ZS1zZXR0aW5nIG9wZXJh
dGlvbnMgZm9yIFBBRSwgd2hpY2ggY2FuJ3QgdXBkYXRlIGEKLSAgIDY0LWJpdCBwdGUgYXRvbWlj
YWxseSAqLwotc3RhdGljIGlubGluZSB2b2lkIHNldF9wdGVfYXRvbWljKHB0ZV90ICpwdGVwLCBw
dGVfdCBwdGUpCi17Ci0JUFZPUF9WQ0FMTDMobW11LnNldF9wdGVfYXRvbWljLCBwdGVwLCBwdGUu
cHRlLCBwdGUucHRlID4+IDMyKTsKLX0KLQotc3RhdGljIGlubGluZSB2b2lkIHB0ZV9jbGVhcihz
dHJ1Y3QgbW1fc3RydWN0ICptbSwgdW5zaWduZWQgbG9uZyBhZGRyLAotCQkJICAgICBwdGVfdCAq
cHRlcCkKLXsKLQlQVk9QX1ZDQUxMMyhtbXUucHRlX2NsZWFyLCBtbSwgYWRkciwgcHRlcCk7Ci19
Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCBwbWRfY2xlYXIocG1kX3QgKnBtZHApCi17Ci0JUFZPUF9W
Q0FMTDEobW11LnBtZF9jbGVhciwgcG1kcCk7Ci19Ci0jZWxzZSAgLyogIUNPTkZJR19YODZfUEFF
ICovCiBzdGF0aWMgaW5saW5lIHZvaWQgc2V0X3B0ZV9hdG9taWMocHRlX3QgKnB0ZXAsIHB0ZV90
IHB0ZSkKIHsKIAlzZXRfcHRlKHB0ZXAsIHB0ZSk7CkBAIC02MTAsNyArNTMwLDYgQEAgc3RhdGlj
IGlubGluZSB2b2lkIHBtZF9jbGVhcihwbWRfdCAqcG1kcCkKIHsKIAlzZXRfcG1kKHBtZHAsIF9f
cG1kKDApKTsKIH0KLSNlbmRpZgkvKiBDT05GSUdfWDg2X1BBRSAqLwogCiAjZGVmaW5lICBfX0hB
VkVfQVJDSF9TVEFSVF9DT05URVhUX1NXSVRDSAogc3RhdGljIGlubGluZSB2b2lkIGFyY2hfc3Rh
cnRfY29udGV4dF9zd2l0Y2goc3RydWN0IHRhc2tfc3RydWN0ICpwcmV2KQpkaWZmIC0tZ2l0IGEv
YXJjaC94ODYvaW5jbHVkZS9hc20vcGFyYXZpcnRfdHlwZXMuaCBiL2FyY2gveDg2L2luY2x1ZGUv
YXNtL3BhcmF2aXJ0X3R5cGVzLmgKaW5kZXggMjQ3NGU0MzRhNmY3Li5iNzNkNzkwOTFhMGIgMTAw
NjQ0Ci0tLSBhL2FyY2gveDg2L2luY2x1ZGUvYXNtL3BhcmF2aXJ0X3R5cGVzLmgKKysrIGIvYXJj
aC94ODYvaW5jbHVkZS9hc20vcGFyYXZpcnRfdHlwZXMuaApAQCAtNzEsOSArNzEsNyBAQCBzdHJ1
Y3QgcHZfaW5mbyB7CiAJdW5zaWduZWQgaW50IGtlcm5lbF9ycGw7CiAJaW50IHNoYXJlZF9rZXJu
ZWxfcG1kOwogCi0jaWZkZWYgQ09ORklHX1g4Nl82NAogCXUxNiBleHRyYV91c2VyXzY0Yml0X2Nz
OyAgLyogX19VU0VSX0NTIGlmIG5vbmUgKi8KLSNlbmRpZgogI2VuZGlmCiAKIAljb25zdCBjaGFy
ICpuYW1lOwpAQCAtMTE5LDEwICsxMTcsOCBAQCBzdHJ1Y3QgcHZfY3B1X29wcyB7CiAKIAl2b2lk
ICgqd3JpdGVfY3I0KSh1bnNpZ25lZCBsb25nKTsKIAotI2lmZGVmIENPTkZJR19YODZfNjQKIAl1
bnNpZ25lZCBsb25nICgqcmVhZF9jcjgpKHZvaWQpOwogCXZvaWQgKCp3cml0ZV9jcjgpKHVuc2ln
bmVkIGxvbmcpOwotI2VuZGlmCiAKIAkvKiBTZWdtZW50IGRlc2NyaXB0b3IgaGFuZGxpbmcgKi8K
IAl2b2lkICgqbG9hZF90cl9kZXNjKSh2b2lkKTsKQEAgLTEzMSw5ICsxMjcsNyBAQCBzdHJ1Y3Qg
cHZfY3B1X29wcyB7CiAJdm9pZCAoKnNldF9sZHQpKGNvbnN0IHZvaWQgKmRlc2MsIHVuc2lnbmVk
IGVudHJpZXMpOwogCXVuc2lnbmVkIGxvbmcgKCpzdG9yZV90cikodm9pZCk7CiAJdm9pZCAoKmxv
YWRfdGxzKShzdHJ1Y3QgdGhyZWFkX3N0cnVjdCAqdCwgdW5zaWduZWQgaW50IGNwdSk7Ci0jaWZk
ZWYgQ09ORklHX1g4Nl82NAogCXZvaWQgKCpsb2FkX2dzX2luZGV4KSh1bnNpZ25lZCBpbnQgaWR4
KTsKLSNlbmRpZgogCXZvaWQgKCp3cml0ZV9sZHRfZW50cnkpKHN0cnVjdCBkZXNjX3N0cnVjdCAq
bGR0LCBpbnQgZW50cnludW0sCiAJCQkJY29uc3Qgdm9pZCAqZGVzYyk7CiAJdm9pZCAoKndyaXRl
X2dkdF9lbnRyeSkoc3RydWN0IGRlc2Nfc3RydWN0ICosCkBAIC0yNjYsMjEgKzI2MCwxMSBAQCBz
dHJ1Y3QgcHZfbW11X29wcyB7CiAJc3RydWN0IHBhcmF2aXJ0X2NhbGxlZV9zYXZlIHBnZF92YWw7
CiAJc3RydWN0IHBhcmF2aXJ0X2NhbGxlZV9zYXZlIG1ha2VfcGdkOwogCi0jaWYgQ09ORklHX1BH
VEFCTEVfTEVWRUxTID49IDMKLSNpZmRlZiBDT05GSUdfWDg2X1BBRQotCXZvaWQgKCpzZXRfcHRl
X2F0b21pYykocHRlX3QgKnB0ZXAsIHB0ZV90IHB0ZXZhbCk7Ci0Jdm9pZCAoKnB0ZV9jbGVhciko
c3RydWN0IG1tX3N0cnVjdCAqbW0sIHVuc2lnbmVkIGxvbmcgYWRkciwKLQkJCSAgcHRlX3QgKnB0
ZXApOwotCXZvaWQgKCpwbWRfY2xlYXIpKHBtZF90ICpwbWRwKTsKLQotI2VuZGlmCS8qIENPTkZJ
R19YODZfUEFFICovCi0KIAl2b2lkICgqc2V0X3B1ZCkocHVkX3QgKnB1ZHAsIHB1ZF90IHB1ZHZh
bCk7CiAKIAlzdHJ1Y3QgcGFyYXZpcnRfY2FsbGVlX3NhdmUgcG1kX3ZhbDsKIAlzdHJ1Y3QgcGFy
YXZpcnRfY2FsbGVlX3NhdmUgbWFrZV9wbWQ7CiAKLSNpZiBDT05GSUdfUEdUQUJMRV9MRVZFTFMg
Pj0gNAogCXN0cnVjdCBwYXJhdmlydF9jYWxsZWVfc2F2ZSBwdWRfdmFsOwogCXN0cnVjdCBwYXJh
dmlydF9jYWxsZWVfc2F2ZSBtYWtlX3B1ZDsKIApAQCAtMjkzLDEwICsyNzcsNiBAQCBzdHJ1Y3Qg
cHZfbW11X29wcyB7CiAJdm9pZCAoKnNldF9wZ2QpKHBnZF90ICpwZ2RwLCBwZ2RfdCBwZ2R2YWwp
OwogI2VuZGlmCS8qIENPTkZJR19QR1RBQkxFX0xFVkVMUyA+PSA1ICovCiAKLSNlbmRpZgkvKiBD
T05GSUdfUEdUQUJMRV9MRVZFTFMgPj0gNCAqLwotCi0jZW5kaWYJLyogQ09ORklHX1BHVEFCTEVf
TEVWRUxTID49IDMgKi8KLQogCXN0cnVjdCBwdl9sYXp5X29wcyBsYXp5X21vZGU7CiAKIAkvKiBk
b20wIG9wcyAqLwpkaWZmIC0tZ2l0IGEvYXJjaC94ODYvaW5jbHVkZS9hc20vcGd0YWJsZS0zbGV2
ZWxfdHlwZXMuaCBiL2FyY2gveDg2L2luY2x1ZGUvYXNtL3BndGFibGUtM2xldmVsX3R5cGVzLmgK
aW5kZXggMzM4NDVkMzY4OTdjLi4zOTU1NzcwZDFhNGQgMTAwNjQ0Ci0tLSBhL2FyY2gveDg2L2lu
Y2x1ZGUvYXNtL3BndGFibGUtM2xldmVsX3R5cGVzLmgKKysrIGIvYXJjaC94ODYvaW5jbHVkZS9h
c20vcGd0YWJsZS0zbGV2ZWxfdHlwZXMuaApAQCAtMjAsMTIgKzIwLDcgQEAgdHlwZWRlZiB1bmlv
biB7CiB9IHB0ZV90OwogI2VuZGlmCS8qICFfX0FTU0VNQkxZX18gKi8KIAotI2lmZGVmIENPTkZJ
R19QQVJBVklSVF9YWEwKLSNkZWZpbmUgU0hBUkVEX0tFUk5FTF9QTUQJKCghc3RhdGljX2NwdV9o
YXMoWDg2X0ZFQVRVUkVfUFRJKSAmJglcCi0JCQkJIChwdl9pbmZvLnNoYXJlZF9rZXJuZWxfcG1k
KSkpCi0jZWxzZQogI2RlZmluZSBTSEFSRURfS0VSTkVMX1BNRAkoIXN0YXRpY19jcHVfaGFzKFg4
Nl9GRUFUVVJFX1BUSSkpCi0jZW5kaWYKIAogLyoKICAqIFBHRElSX1NISUZUIGRldGVybWluZXMg
d2hhdCBhIHRvcC1sZXZlbCBwYWdlIHRhYmxlIGVudHJ5IGNhbiBtYXAKZGlmZiAtLWdpdCBhL2Fy
Y2gveDg2L2tlcm5lbC9jcHUvY29tbW9uLmMgYi9hcmNoL3g4Ni9rZXJuZWwvY3B1L2NvbW1vbi5j
CmluZGV4IDJjNTdmZmZlYmY5Yi4uYTM0MjQ2YjAxNDU4IDEwMDY0NAotLS0gYS9hcmNoL3g4Ni9r
ZXJuZWwvY3B1L2NvbW1vbi5jCisrKyBiL2FyY2gveDg2L2tlcm5lbC9jcHUvY29tbW9uLmMKQEAg
LTEyNTcsMTUgKzEyNTcsNyBAQCBzdGF0aWMgdm9pZCBnZW5lcmljX2lkZW50aWZ5KHN0cnVjdCBj
cHVpbmZvX3g4NiAqYykKIAkgKiBFU1BGSVggaXNzdWUsIHdlIGNhbiBjaGFuZ2UgdGhpcy4KIAkg
Ki8KICNpZmRlZiBDT05GSUdfWDg2XzMyCi0jIGlmZGVmIENPTkZJR19QQVJBVklSVF9YWEwKLQlk
byB7Ci0JCWV4dGVybiB2b2lkIG5hdGl2ZV9pcmV0KHZvaWQpOwotCQlpZiAocHZfb3BzLmNwdS5p
cmV0ID09IG5hdGl2ZV9pcmV0KQotCQkJc2V0X2NwdV9idWcoYywgWDg2X0JVR19FU1BGSVgpOwot
CX0gd2hpbGUgKDApOwotIyBlbHNlCiAJc2V0X2NwdV9idWcoYywgWDg2X0JVR19FU1BGSVgpOwot
IyBlbmRpZgogI2VuZGlmCiB9CiAKZGlmZiAtLWdpdCBhL2FyY2gveDg2L2tlcm5lbC9wYXJhdmly
dC5jIGIvYXJjaC94ODYva2VybmVsL3BhcmF2aXJ0LmMKaW5kZXggMDZmNmJiNDhkMDE4Li5jOTQ1
MTI2N2I0YTMgMTAwNjQ0Ci0tLSBhL2FyY2gveDg2L2tlcm5lbC9wYXJhdmlydC5jCisrKyBiL2Fy
Y2gveDg2L2tlcm5lbC9wYXJhdmlydC5jCkBAIC0yODQsMTAgKzI4NCw4IEBAIHN0cnVjdCBwdl9p
bmZvIHB2X2luZm8gPSB7CiAJLmtlcm5lbF9ycGwgPSAwLAogCS5zaGFyZWRfa2VybmVsX3BtZCA9
IDEsCS8qIE9ubHkgdXNlZCB3aGVuIENPTkZJR19YODZfUEFFIGlzIHNldCAqLwogCi0jaWZkZWYg
Q09ORklHX1g4Nl82NAogCS5leHRyYV91c2VyXzY0Yml0X2NzID0gX19VU0VSX0NTLAogI2VuZGlm
Ci0jZW5kaWYKIH07CiAKIC8qIDY0LWJpdCBwYWdldGFibGUgZW50cmllcyAqLwpAQCAtMzExLDEw
ICszMDksOCBAQCBzdHJ1Y3QgcGFyYXZpcnRfcGF0Y2hfdGVtcGxhdGUgcHZfb3BzID0gewogCS5j
cHUucmVhZF9jcjAJCT0gbmF0aXZlX3JlYWRfY3IwLAogCS5jcHUud3JpdGVfY3IwCQk9IG5hdGl2
ZV93cml0ZV9jcjAsCiAJLmNwdS53cml0ZV9jcjQJCT0gbmF0aXZlX3dyaXRlX2NyNCwKLSNpZmRl
ZiBDT05GSUdfWDg2XzY0CiAJLmNwdS5yZWFkX2NyOAkJPSBuYXRpdmVfcmVhZF9jcjgsCiAJLmNw
dS53cml0ZV9jcjgJCT0gbmF0aXZlX3dyaXRlX2NyOCwKLSNlbmRpZgogCS5jcHUud2JpbnZkCQk9
IG5hdGl2ZV93YmludmQsCiAJLmNwdS5yZWFkX21zcgkJPSBuYXRpdmVfcmVhZF9tc3IsCiAJLmNw
dS53cml0ZV9tc3IJCT0gbmF0aXZlX3dyaXRlX21zciwKQEAgLTMyNyw5ICszMjMsNyBAQCBzdHJ1
Y3QgcGFyYXZpcnRfcGF0Y2hfdGVtcGxhdGUgcHZfb3BzID0gewogCS5jcHUubG9hZF9pZHQJCT0g
bmF0aXZlX2xvYWRfaWR0LAogCS5jcHUuc3RvcmVfdHIJCT0gbmF0aXZlX3N0b3JlX3RyLAogCS5j
cHUubG9hZF90bHMJCT0gbmF0aXZlX2xvYWRfdGxzLAotI2lmZGVmIENPTkZJR19YODZfNjQKIAku
Y3B1LmxvYWRfZ3NfaW5kZXgJPSBuYXRpdmVfbG9hZF9nc19pbmRleCwKLSNlbmRpZgogCS5jcHUu
d3JpdGVfbGR0X2VudHJ5CT0gbmF0aXZlX3dyaXRlX2xkdF9lbnRyeSwKIAkuY3B1LndyaXRlX2dk
dF9lbnRyeQk9IG5hdGl2ZV93cml0ZV9nZHRfZW50cnksCiAJLmNwdS53cml0ZV9pZHRfZW50cnkJ
PSBuYXRpdmVfd3JpdGVfaWR0X2VudHJ5LApAQCAtMzM5LDkgKzMzMyw3IEBAIHN0cnVjdCBwYXJh
dmlydF9wYXRjaF90ZW1wbGF0ZSBwdl9vcHMgPSB7CiAKIAkuY3B1LmxvYWRfc3AwCQk9IG5hdGl2
ZV9sb2FkX3NwMCwKIAotI2lmZGVmIENPTkZJR19YODZfNjQKIAkuY3B1LnVzZXJnc19zeXNyZXQ2
NAk9IG5hdGl2ZV91c2VyZ3Nfc3lzcmV0NjQsCi0jZW5kaWYKIAkuY3B1LmlyZXQJCT0gbmF0aXZl
X2lyZXQsCiAJLmNwdS5zd2FwZ3MJCT0gbmF0aXZlX3N3YXBncywKIApAQCAtMzk0LDE4ICszODYs
MTEgQEAgc3RydWN0IHBhcmF2aXJ0X3BhdGNoX3RlbXBsYXRlIHB2X29wcyA9IHsKIAkubW11LnB0
ZXBfbW9kaWZ5X3Byb3Rfc3RhcnQJPSBfX3B0ZXBfbW9kaWZ5X3Byb3Rfc3RhcnQsCiAJLm1tdS5w
dGVwX21vZGlmeV9wcm90X2NvbW1pdAk9IF9fcHRlcF9tb2RpZnlfcHJvdF9jb21taXQsCiAKLSNp
ZiBDT05GSUdfUEdUQUJMRV9MRVZFTFMgPj0gMwotI2lmZGVmIENPTkZJR19YODZfUEFFCi0JLm1t
dS5zZXRfcHRlX2F0b21pYwk9IG5hdGl2ZV9zZXRfcHRlX2F0b21pYywKLQkubW11LnB0ZV9jbGVh
cgkJPSBuYXRpdmVfcHRlX2NsZWFyLAotCS5tbXUucG1kX2NsZWFyCQk9IG5hdGl2ZV9wbWRfY2xl
YXIsCi0jZW5kaWYKIAkubW11LnNldF9wdWQJCT0gbmF0aXZlX3NldF9wdWQsCiAKIAkubW11LnBt
ZF92YWwJCT0gUFRFX0lERU5ULAogCS5tbXUubWFrZV9wbWQJCT0gUFRFX0lERU5ULAogCi0jaWYg
Q09ORklHX1BHVEFCTEVfTEVWRUxTID49IDQKIAkubW11LnB1ZF92YWwJCT0gUFRFX0lERU5ULAog
CS5tbXUubWFrZV9wdWQJCT0gUFRFX0lERU5ULAogCkBAIC00MTcsOCArNDAyLDYgQEAgc3RydWN0
IHBhcmF2aXJ0X3BhdGNoX3RlbXBsYXRlIHB2X29wcyA9IHsKIAogCS5tbXUuc2V0X3BnZAkJPSBu
YXRpdmVfc2V0X3BnZCwKICNlbmRpZiAvKiBDT05GSUdfUEdUQUJMRV9MRVZFTFMgPj0gNSAqLwot
I2VuZGlmIC8qIENPTkZJR19QR1RBQkxFX0xFVkVMUyA+PSA0ICovCi0jZW5kaWYgLyogQ09ORklH
X1BHVEFCTEVfTEVWRUxTID49IDMgKi8KIAogCS5tbXUucHRlX3ZhbAkJPSBQVEVfSURFTlQsCiAJ
Lm1tdS5wZ2RfdmFsCQk9IFBURV9JREVOVCwKZGlmZiAtLWdpdCBhL2FyY2gveDg2L2tlcm5lbC9w
YXJhdmlydF9wYXRjaF8zMi5jIGIvYXJjaC94ODYva2VybmVsL3BhcmF2aXJ0X3BhdGNoXzMyLmMK
aW5kZXggZGUxMzhkMzkxMmU0Li5mNDZhNzAwZDc4MWEgMTAwNjQ0Ci0tLSBhL2FyY2gveDg2L2tl
cm5lbC9wYXJhdmlydF9wYXRjaF8zMi5jCisrKyBiL2FyY2gveDg2L2tlcm5lbC9wYXJhdmlydF9w
YXRjaF8zMi5jCkBAIC0xLDIzICsxLDYgQEAKIC8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBH
UEwtMi4wCiAjaW5jbHVkZSA8YXNtL3BhcmF2aXJ0Lmg+CiAKLSNpZmRlZiBDT05GSUdfUEFSQVZJ
UlRfWFhMCi1ERUZfTkFUSVZFKGlycSwgaXJxX2Rpc2FibGUsICJjbGkiKTsKLURFRl9OQVRJVkUo
aXJxLCBpcnFfZW5hYmxlLCAic3RpIik7Ci1ERUZfTkFUSVZFKGlycSwgcmVzdG9yZV9mbCwgInB1
c2ggJWVheDsgcG9wZiIpOwotREVGX05BVElWRShpcnEsIHNhdmVfZmwsICJwdXNoZjsgcG9wICVl
YXgiKTsKLURFRl9OQVRJVkUoY3B1LCBpcmV0LCAiaXJldCIpOwotREVGX05BVElWRShtbXUsIHJl
YWRfY3IyLCAibW92ICVjcjIsICVlYXgiKTsKLURFRl9OQVRJVkUobW11LCB3cml0ZV9jcjMsICJt
b3YgJWVheCwgJWNyMyIpOwotREVGX05BVElWRShtbXUsIHJlYWRfY3IzLCAibW92ICVjcjMsICVl
YXgiKTsKLQotdW5zaWduZWQgcGFyYXZpcnRfcGF0Y2hfaWRlbnRfNjQodm9pZCAqaW5zbmJ1Ziwg
dW5zaWduZWQgbGVuKQotewotCS8qIGFyZyBpbiAlZWR4OiVlYXgsIHJldHVybiBpbiAlZWR4OiVl
YXggKi8KLQlyZXR1cm4gMDsKLX0KLSNlbmRpZgotCiAjaWYgZGVmaW5lZChDT05GSUdfUEFSQVZJ
UlRfU1BJTkxPQ0tTKQogREVGX05BVElWRShsb2NrLCBxdWV1ZWRfc3Bpbl91bmxvY2ssICJtb3Zi
ICQwLCAoJWVheCkiKTsKIERFRl9OQVRJVkUobG9jaywgdmNwdV9pc19wcmVlbXB0ZWQsICJ4b3Ig
JWVheCwgJWVheCIpOwpAQCAtMjgsMjIgKzExLDggQEAgZXh0ZXJuIGJvb2wgcHZfaXNfbmF0aXZl
X3ZjcHVfaXNfcHJlZW1wdGVkKHZvaWQpOwogCiB1bnNpZ25lZCBuYXRpdmVfcGF0Y2godTggdHlw
ZSwgdm9pZCAqaWJ1ZiwgdW5zaWduZWQgbG9uZyBhZGRyLCB1bnNpZ25lZCBsZW4pCiB7Ci0jZGVm
aW5lIFBBVENIX1NJVEUob3BzLCB4KQkJCQkJXAotCWNhc2UgUEFSQVZJUlRfUEFUQ0gob3BzLngp
OgkJCQlcCi0JCXJldHVybiBwYXJhdmlydF9wYXRjaF9pbnNucyhpYnVmLCBsZW4sIHN0YXJ0XyMj
b3BzIyNfIyN4LCBlbmRfIyNvcHMjI18jI3gpCi0KLQlzd2l0Y2ggKHR5cGUpIHsKLSNpZmRlZiBD
T05GSUdfUEFSQVZJUlRfWFhMCi0JCVBBVENIX1NJVEUoaXJxLCBpcnFfZGlzYWJsZSk7Ci0JCVBB
VENIX1NJVEUoaXJxLCBpcnFfZW5hYmxlKTsKLQkJUEFUQ0hfU0lURShpcnEsIHJlc3RvcmVfZmwp
OwotCQlQQVRDSF9TSVRFKGlycSwgc2F2ZV9mbCk7Ci0JCVBBVENIX1NJVEUoY3B1LCBpcmV0KTsK
LQkJUEFUQ0hfU0lURShtbXUsIHJlYWRfY3IyKTsKLQkJUEFUQ0hfU0lURShtbXUsIHJlYWRfY3Iz
KTsKLQkJUEFUQ0hfU0lURShtbXUsIHdyaXRlX2NyMyk7Ci0jZW5kaWYKICNpZiBkZWZpbmVkKENP
TkZJR19QQVJBVklSVF9TUElOTE9DS1MpCisJc3dpdGNoICh0eXBlKSB7CiAJY2FzZSBQQVJBVklS
VF9QQVRDSChsb2NrLnF1ZXVlZF9zcGluX3VubG9jayk6CiAJCWlmIChwdl9pc19uYXRpdmVfc3Bp
bl91bmxvY2soKSkKIAkJCXJldHVybiBwYXJhdmlydF9wYXRjaF9pbnNucyhpYnVmLCBsZW4sCkBA
IC01NywxMSArMjYsMTAgQEAgdW5zaWduZWQgbmF0aXZlX3BhdGNoKHU4IHR5cGUsIHZvaWQgKmli
dWYsIHVuc2lnbmVkIGxvbmcgYWRkciwgdW5zaWduZWQgbGVuKQogCQkJCQkJICAgIHN0YXJ0X2xv
Y2tfdmNwdV9pc19wcmVlbXB0ZWQsCiAJCQkJCQkgICAgZW5kX2xvY2tfdmNwdV9pc19wcmVlbXB0
ZWQpOwogCQlicmVhazsKLSNlbmRpZgogCiAJZGVmYXVsdDoKIAkJYnJlYWs7CiAJfQotI3VuZGVm
IFBBVENIX1NJVEUKKyNlbmRpZgogCXJldHVybiBwYXJhdmlydF9wYXRjaF9kZWZhdWx0KHR5cGUs
IGlidWYsIGFkZHIsIGxlbik7CiB9Ci0tIAoyLjE2LjQKCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZl
bEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxt
YW4vbGlzdGluZm8veGVuLWRldmVs

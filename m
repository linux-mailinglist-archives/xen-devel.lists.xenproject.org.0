Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id F11FEB1C01
	for <lists+xen-devel@lfdr.de>; Fri, 13 Sep 2019 13:13:42 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i8jT6-0003Ox-5w; Fri, 13 Sep 2019 11:10:24 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=f4Vg=XI=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1i8jT4-0003Os-Uu
 for xen-devel@lists.xenproject.org; Fri, 13 Sep 2019 11:10:22 +0000
X-Inumbo-ID: 1241d5ef-d617-11e9-95aa-12813bfff9fa
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 1241d5ef-d617-11e9-95aa-12813bfff9fa;
 Fri, 13 Sep 2019 11:10:19 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 5430BB628;
 Fri, 13 Sep 2019 11:10:18 +0000 (UTC)
To: Paul Durrant <paul.durrant@citrix.com>, xen-devel@lists.xenproject.org
References: <20190913105826.2704-1-paul.durrant@citrix.com>
 <20190913105826.2704-4-paul.durrant@citrix.com>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <e79beeb5-7288-c8fd-8823-feaf8d4e7e77@suse.com>
Date: Fri, 13 Sep 2019 13:10:18 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20190913105826.2704-4-paul.durrant@citrix.com>
Content-Language: en-US
Subject: [Xen-devel] [PATCH v11.1 3/6] sysctl / libxl: report whether
 IOMMU/HAP page table sharing is supported
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Kevin Tian <kevin.tian@intel.com>,
 Stefano Stabellini <sstabellini@kernel.org>, WeiLiu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>,
 Christian Lindig <christian.lindig@citrix.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>,
 David Scott <dave@recoil.org>, Anthony PERARD <anthony.perard@citrix.com>,
 =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBwYXRjaCBkZWZpbmVzIGEgbmV3IGJpdCByZXBvcnRlZCBpbiB0aGUgaHdfY2FwIGZpZWxk
IG9mIHN0cnVjdAp4ZW5fc3lzY3RsX3BoeXNpbmZvIHRvIGluZGljYXRlIHdoZXRoZXIgdGhlIHBs
YXRmb3JtIHN1cHBvcnRzIHNoYXJpbmcgb2YKSEFQIHBhZ2UgdGFibGVzIChpLmUuIHRoZSBQMk0p
IHdpdGggdGhlIElPTU1VLiBUaGlzIGluZm9ybXMgdGhlIHRvb2xzdGFjawp3aGV0aGVyIHRoZSBk
b21haW4gbmVlZHMgZXh0cmEgbWVtb3J5IHRvIHN0b3JlIGRpc2NyZXRlIElPTU1VIHBhZ2UgdGFi
bGVzCm9yIG5vdC4KCk5PVEU6IFRoaXMgcGF0Y2ggbWFrZXMgc3VyZSBpb21tdV9oYXBfcHRfc2hh
cmVkIGlzIGNsZWFyIGlmIEhBUCBpcyBub3QKICAgICAgc3VwcG9ydGVkIG9yIHRoZSBJT01NVSBp
cyBkaXNhYmxlZCwgYW5kIGRlZmluZXMgaXQgdG8gZmFsc2UgaWYKICAgICAgIUNPTkZJR19IVk0u
CgpTaWduZWQtb2ZmLWJ5OiBQYXVsIER1cnJhbnQgPHBhdWwuZHVycmFudEBjaXRyaXguY29tPgpT
aWduZWQtb2ZmLWJ5OiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+CkFja2VkLWJ5OiBD
aHJpc3RpYW4gTGluZGlnIDxjaHJpc3RpYW4ubGluZGlnQGNpdHJpeC5jb20+Ci0tLQpDYzogSWFu
IEphY2tzb24gPGlhbi5qYWNrc29uQGV1LmNpdHJpeC5jb20+CkNjOiBXZWkgTGl1IDx3bEB4ZW4u
b3JnPgpDYzogQW50aG9ueSBQRVJBUkQgPGFudGhvbnkucGVyYXJkQGNpdHJpeC5jb20+CkNjOiBB
bmRyZXcgQ29vcGVyIDxhbmRyZXcuY29vcGVyM0BjaXRyaXguY29tPgpDYzogR2VvcmdlIER1bmxh
cCA8R2VvcmdlLkR1bmxhcEBldS5jaXRyaXguY29tPgpDYzogSmFuIEJldWxpY2ggPGpiZXVsaWNo
QHN1c2UuY29tPgpDYzogSnVsaWVuIEdyYWxsIDxqdWxpZW4uZ3JhbGxAYXJtLmNvbT4KQ2M6IEtv
bnJhZCBSemVzenV0ZWsgV2lsayA8a29ucmFkLndpbGtAb3JhY2xlLmNvbT4KQ2M6IFN0ZWZhbm8g
U3RhYmVsbGluaSA8c3N0YWJlbGxpbmlAa2VybmVsLm9yZz4KQ2M6IFRpbSBEZWVnYW4gPHRpbUB4
ZW4ub3JnPgpDYzogQ2hyaXN0aWFuIExpbmRpZyA8Y2hyaXN0aWFuLmxpbmRpZ0BjaXRyaXguY29t
PgpDYzogRGF2aWQgU2NvdHQgPGRhdmVAcmVjb2lsLm9yZz4KQ2M6ICJSb2dlciBQYXUgTW9ubsOp
IiA8cm9nZXIucGF1QGNpdHJpeC5jb20+CkNjOiBTdXJhdmVlIFN1dGhpa3VscGFuaXQgPHN1cmF2
ZWUuc3V0aGlrdWxwYW5pdEBhbWQuY29tPgpDYzogS2V2aW4gVGlhbiA8a2V2aW4udGlhbkBpbnRl
bC5jb20+Cgp2MTEuMToKIC0gaW50cm9kdWNlIGNsZWFyX2lvbW11X2hhcF9wdF9zaGFyZSgpCiAt
IGRyb3AgdW5uZWNlc3NhcnkgImVsc2UiCgp2MTE6CiAtIEZpeCBhYmktY2hlY2sgYnJlYWthZ2UK
CnYxMDoKIC0gU2V0IGZsYWcgaW4gY29tbW9uIGNvZGUgKHdoaWNoIG1lYW5zIGNsZWFyaW5nIGlv
bW11X2hhcF9wdF9zaGFyZSBpZgogICBIQVAgY2Fubm90IGJlIGVuYWJsZWQgb3IgaXMgY29uZmln
dXJlZCBvdXQpLgoKdjk6CiAtIE5ldyBpbiB2OQotLS0KIHRvb2xzL2xpYnhsL2xpYnhsLmMgICAg
ICAgICAgICAgICAgICAgICAgfCAgICAyICsrCiB0b29scy9saWJ4bC9saWJ4bC5oICAgICAgICAg
ICAgICAgICAgICAgIHwgICAgNyArKysrKysrCiB0b29scy9saWJ4bC9saWJ4bF90eXBlcy5pZGwg
ICAgICAgICAgICAgIHwgICAgMSArCiB0b29scy9vY2FtbC9saWJzL3hjL3hlbmN0cmwubWwgICAg
ICAgICAgIHwgICAgMSArCiB0b29scy9vY2FtbC9saWJzL3hjL3hlbmN0cmwubWxpICAgICAgICAg
IHwgICAgMyArKy0KIHRvb2xzL3hsL3hsX2luZm8uYyAgICAgICAgICAgICAgICAgICAgICAgfCAg
ICA1ICsrKy0tCiB4ZW4vYXJjaC94ODYvaHZtL2h2bS5jICAgICAgICAgICAgICAgICAgIHwgICAy
NiArKysrKysrKysrKysrKysrKysrLS0tLS0tLQogeGVuL2NvbW1vbi9zeXNjdGwuYyAgICAgICAg
ICAgICAgICAgICAgICB8ICAgIDIgKysKIHhlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21t
dV9pbml0LmMgfCAgICAzICsrLQogeGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvaW9tbXUuYyAgICAg
ICAgICB8ICAgMTEgKysrKysrKysrKy0KIHhlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3Z0ZC9pb21t
dS5jICAgICAgfCAgICAyICstCiB4ZW4vaW5jbHVkZS9wdWJsaWMvc3lzY3RsLmggICAgICAgICAg
ICAgIHwgICAgNiArKysrKy0KIHhlbi9pbmNsdWRlL3hlbi9pb21tdS5oICAgICAgICAgICAgICAg
ICAgfCAgIDE3ICsrKysrKysrKysrKysrKystCiAxMyBmaWxlcyBjaGFuZ2VkLCA3MSBpbnNlcnRp
b25zKCspLCAxNSBkZWxldGlvbnMoLSkKCi0tLSBhL3Rvb2xzL2xpYnhsL2xpYnhsLmMKKysrIGIv
dG9vbHMvbGlieGwvbGlieGwuYwpAQCAtNDAyLDYgKzQwMiw4IEBAIGludCBsaWJ4bF9nZXRfcGh5
c2luZm8obGlieGxfY3R4ICpjdHgsIGwKICAgICBwaHlzaW5mby0+Y2FwX2hhcCA9ICEhKHhjcGh5
c2luZm8uY2FwYWJpbGl0aWVzICYgWEVOX1NZU0NUTF9QSFlTQ0FQX2hhcCk7CiAgICAgcGh5c2lu
Zm8tPmNhcF9zaGFkb3cgPQogICAgICAgICAhISh4Y3BoeXNpbmZvLmNhcGFiaWxpdGllcyAmIFhF
Tl9TWVNDVExfUEhZU0NBUF9zaGFkb3cpOworICAgIHBoeXNpbmZvLT5jYXBfaW9tbXVfaGFwX3B0
X3NoYXJlID0KKyAgICAgICAgISEoeGNwaHlzaW5mby5jYXBhYmlsaXRpZXMgJiBYRU5fU1lTQ1RM
X1BIWVNDQVBfaW9tbXVfaGFwX3B0X3NoYXJlKTsKIAogICAgIEdDX0ZSRUU7CiAgICAgcmV0dXJu
IDA7Ci0tLSBhL3Rvb2xzL2xpYnhsL2xpYnhsLmgKKysrIGIvdG9vbHMvbGlieGwvbGlieGwuaApA
QCAtNDAyLDYgKzQwMiwxMyBAQAogI2RlZmluZSBMSUJYTF9IQVZFX1BIWVNJTkZPX0NBUF9IQVBf
U0hBRE9XIDEKIAogLyoKKyAqIExJQlhMX0hBVkVfUEhZU0lORk9fQ0FQX0lPTU1VX0hBUF9QVF9T
SEFSRSBpbmRpY2F0ZXMgdGhhdCBsaWJ4bF9waHlzaW5mbworICogaGFzIGEgY2FwX2lvbW11X2hh
cF9wdF9zaGFyZSBmaWVsZCB0aGF0IGluZGljYXRlcyB3aGV0aGVyIHRoZSBoYXJkd2FyZQorICog
c3VwcG9ydHMgc2hhcmluZyB0aGUgSU9NTVUgYW5kIEhBUCBwYWdlIHRhYmxlcy4KKyAqLworI2Rl
ZmluZSBMSUJYTF9IQVZFX1BIWVNJTkZPX0NBUF9JT01NVV9IQVBfUFRfU0hBUkUgMQorCisvKgog
ICogbGlieGwgQUJJIGNvbXBhdGliaWxpdHkKICAqCiAgKiBUaGUgb25seSBndWFyYW50ZWUgd2hp
Y2ggbGlieGwgbWFrZXMgcmVnYXJkaW5nIEFCSSBjb21wYXRpYmlsaXR5Ci0tLSBhL3Rvb2xzL2xp
YnhsL2xpYnhsX3R5cGVzLmlkbAorKysgYi90b29scy9saWJ4bC9saWJ4bF90eXBlcy5pZGwKQEAg
LTEwMjcsNiArMTAyNyw3IEBAIGxpYnhsX3BoeXNpbmZvID0gU3RydWN0KCJwaHlzaW5mbyIsIFsK
ICAgICAoImNhcF9odm1fZGlyZWN0aW8iLCBib29sKSwgIyBObyBsb25nZXIgSFZNIHNwZWNpZmlj
CiAgICAgKCJjYXBfaGFwIiwgYm9vbCksCiAgICAgKCJjYXBfc2hhZG93IiwgYm9vbCksCisgICAg
KCJjYXBfaW9tbXVfaGFwX3B0X3NoYXJlIiwgYm9vbCksCiAgICAgXSwgZGlyPURJUl9PVVQpCiAK
IGxpYnhsX2Nvbm5lY3RvcmluZm8gPSBTdHJ1Y3QoImNvbm5lY3RvcmluZm8iLCBbCi0tLSBhL3Rv
b2xzL29jYW1sL2xpYnMveGMveGVuY3RybC5tbAorKysgYi90b29scy9vY2FtbC9saWJzL3hjL3hl
bmN0cmwubWwKQEAgLTExMCw2ICsxMTAsNyBAQCB0eXBlIHBoeXNpbmZvX2NhcF9mbGFnID0KIAl8
IENBUF9EaXJlY3RJTwogCXwgQ0FQX0hBUAogCXwgQ0FQX1NoYWRvdworCXwgQ0FQX0lPTU1VX0hB
UF9QVF9TSEFSRQogCiB0eXBlIHBoeXNpbmZvID0KIHsKLS0tIGEvdG9vbHMvb2NhbWwvbGlicy94
Yy94ZW5jdHJsLm1saQorKysgYi90b29scy9vY2FtbC9saWJzL3hjL3hlbmN0cmwubWxpCkBAIC01
Nyw3ICs1Nyw2IEBAIHR5cGUgZG9tYWluX2NyZWF0ZV9mbGFnID0KICAgfCBDREZfT09TX09GRgog
ICB8IENERl9YU19ET01BSU4KICAgfCBDREZfSU9NTVUKLQogdHlwZSBkb21jdGxfY3JlYXRlX2Nv
bmZpZyA9IHsKICAgc3NpZHJlZjogaW50MzI7CiAgIGhhbmRsZTogc3RyaW5nOwpAQCAtOTUsNiAr
OTQsOCBAQCB0eXBlIHBoeXNpbmZvX2NhcF9mbGFnID0KICAgfCBDQVBfRGlyZWN0SU8KICAgfCBD
QVBfSEFQCiAgIHwgQ0FQX1NoYWRvdworICB8IENBUF9JT01NVV9IQVBfUFRfU0hBUkUKKwogdHlw
ZSBwaHlzaW5mbyA9IHsKICAgdGhyZWFkc19wZXJfY29yZSA6IGludDsKICAgY29yZXNfcGVyX3Nv
Y2tldCA6IGludDsKLS0tIGEvdG9vbHMveGwveGxfaW5mby5jCisrKyBiL3Rvb2xzL3hsL3hsX2lu
Zm8uYwpAQCAtMjEwLDEzICsyMTAsMTQgQEAgc3RhdGljIHZvaWQgb3V0cHV0X3BoeXNpbmZvKHZv
aWQpCiAgICAgICAgICBpbmZvLmh3X2NhcFs0XSwgaW5mby5od19jYXBbNV0sIGluZm8uaHdfY2Fw
WzZdLCBpbmZvLmh3X2NhcFs3XQogICAgICAgICApOwogCi0gICAgbWF5YmVfcHJpbnRmKCJ2aXJ0
X2NhcHMgICAgICAgICAgICAgIDolcyVzJXMlcyVzJXNcbiIsCisgICAgbWF5YmVfcHJpbnRmKCJ2
aXJ0X2NhcHMgICAgICAgICAgICAgIDolcyVzJXMlcyVzJXMlc1xuIiwKICAgICAgICAgIGluZm8u
Y2FwX3B2ID8gIiBwdiIgOiAiIiwKICAgICAgICAgIGluZm8uY2FwX2h2bSA/ICIgaHZtIiA6ICIi
LAogICAgICAgICAgaW5mby5jYXBfaHZtICYmIGluZm8uY2FwX2h2bV9kaXJlY3RpbyA/ICIgaHZt
X2RpcmVjdGlvIiA6ICIiLAogICAgICAgICAgaW5mby5jYXBfcHYgJiYgaW5mby5jYXBfaHZtX2Rp
cmVjdGlvID8gIiBwdl9kaXJlY3RpbyIgOiAiIiwKICAgICAgICAgIGluZm8uY2FwX2hhcCA/ICIg
aGFwIiA6ICIiLAotICAgICAgICAgaW5mby5jYXBfc2hhZG93ID8gIiBzaGFkb3ciIDogIiIKKyAg
ICAgICAgIGluZm8uY2FwX3NoYWRvdyA/ICIgc2hhZG93IiA6ICIiLAorICAgICAgICAgaW5mby5j
YXBfaW9tbXVfaGFwX3B0X3NoYXJlID8gIiBpb21tdV9oYXBfcHRfc2hhcmUiIDogIiIKICAgICAg
ICAgKTsKIAogICAgIHZpbmZvID0gbGlieGxfZ2V0X3ZlcnNpb25faW5mbyhjdHgpOwotLS0gYS94
ZW4vYXJjaC94ODYvaHZtL2h2bS5jCisrKyBiL3hlbi9hcmNoL3g4Ni9odm0vaHZtLmMKQEAgLTE0
Miw2ICsxNDIsMjMgQEAgc3RhdGljIHN0cnVjdCBub3RpZmllcl9ibG9jayBjcHVfbmZiID0gewog
ICAgIC5ub3RpZmllcl9jYWxsID0gY3B1X2NhbGxiYWNrCiB9OwogCitzdGF0aWMgYm9vbCBfX2lu
aXQgaGFwX3N1cHBvcnRlZChjb25zdCBzdHJ1Y3QgaHZtX2Z1bmN0aW9uX3RhYmxlICpmbnMpCit7
CisgICAgaWYgKCAhZm5zLT5oYXBfc3VwcG9ydGVkICkKKyAgICB7CisgICAgICAgIHByaW50aygi
SFZNOiBIYXJkd2FyZSBBc3Npc3RlZCBQYWdpbmcgKEhBUCkgbm90IGRldGVjdGVkXG4iKTsKKyAg
ICAgICAgcmV0dXJuIGZhbHNlOworICAgIH0KKworICAgIGlmICggIW9wdF9oYXBfZW5hYmxlZCAp
CisgICAgeworICAgICAgICBwcmludGsoIkhWTTogSGFyZHdhcmUgQXNzaXN0ZWQgUGFnaW5nIChI
QVApIGRldGVjdGVkIGJ1dCBkaXNhYmxlZFxuIik7CisgICAgICAgIHJldHVybiBmYWxzZTsKKyAg
ICB9CisKKyAgICByZXR1cm4gdHJ1ZTsKK30KKwogc3RhdGljIGludCBfX2luaXQgaHZtX2VuYWJs
ZSh2b2lkKQogewogICAgIGNvbnN0IHN0cnVjdCBodm1fZnVuY3Rpb25fdGFibGUgKmZucyA9IE5V
TEw7CkBAIC0xNTgsMTMgKzE3NSw4IEBAIHN0YXRpYyBpbnQgX19pbml0IGh2bV9lbmFibGUodm9p
ZCkKICAgICBodm1fZW5hYmxlZCA9IDE7CiAKICAgICBwcmludGsoIkhWTTogJXMgZW5hYmxlZFxu
IiwgZm5zLT5uYW1lKTsKLSAgICBpZiAoICFmbnMtPmhhcF9zdXBwb3J0ZWQgKQotICAgICAgICBw
cmludGsoIkhWTTogSGFyZHdhcmUgQXNzaXN0ZWQgUGFnaW5nIChIQVApIG5vdCBkZXRlY3RlZFxu
Iik7Ci0gICAgZWxzZSBpZiAoICFvcHRfaGFwX2VuYWJsZWQgKQotICAgIHsKLSAgICAgICAgaHZt
X2Z1bmNzLmhhcF9zdXBwb3J0ZWQgPSAwOwotICAgICAgICBwcmludGsoIkhWTTogSGFyZHdhcmUg
QXNzaXN0ZWQgUGFnaW5nIChIQVApIGRldGVjdGVkIGJ1dCBkaXNhYmxlZFxuIik7Ci0gICAgfQor
ICAgIGlmICggIWhhcF9zdXBwb3J0ZWQoZm5zKSApCisgICAgICAgIGNsZWFyX2lvbW11X2hhcF9w
dF9zaGFyZSgpOwogICAgIGVsc2UKICAgICB7CiAgICAgICAgIHByaW50aygiSFZNOiBIYXJkd2Fy
ZSBBc3Npc3RlZCBQYWdpbmcgKEhBUCkgZGV0ZWN0ZWRcbiIpOwotLS0gYS94ZW4vY29tbW9uL3N5
c2N0bC5jCisrKyBiL3hlbi9jb21tb24vc3lzY3RsLmMKQEAgLTI2OSw2ICsyNjksOCBAQCBsb25n
IGRvX3N5c2N0bChYRU5fR1VFU1RfSEFORExFX1BBUkFNKHhlCiAgICAgICAgIGFyY2hfZG9fcGh5
c2luZm8ocGkpOwogICAgICAgICBpZiAoIGlvbW11X2VuYWJsZWQgKQogICAgICAgICAgICAgcGkt
PmNhcGFiaWxpdGllcyB8PSBYRU5fU1lTQ1RMX1BIWVNDQVBfZGlyZWN0aW87CisgICAgICAgIGlm
ICggaW9tbXVfaGFwX3B0X3NoYXJlICkKKyAgICAgICAgICAgIHBpLT5jYXBhYmlsaXRpZXMgfD0g
WEVOX1NZU0NUTF9QSFlTQ0FQX2lvbW11X2hhcF9wdF9zaGFyZTsKIAogICAgICAgICBpZiAoIGNv
cHlfdG9fZ3Vlc3QodV9zeXNjdGwsIG9wLCAxKSApCiAgICAgICAgICAgICByZXQgPSAtRUZBVUxU
OwotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfaW5pdC5jCisrKyBiL3hl
bi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0LmMKQEAgLTE0MDYsNyArMTQwNiw4
IEBAIGludCBfX2luaXQgYW1kX2lvbW11X2luaXQoYm9vbCB4dCkKICAgICAgKiBzaW5jZSBpdCBv
bmx5IHN1cHBvcnRzIHAybV9yYW1fcncsIGFuZCB0aGlzIHdvdWxkCiAgICAgICogcHJldmVudCBk
b2luZyBJTyB0by9mcm9tIG1hcHBlZCBncmFudCBmcmFtZXMuCiAgICAgICovCi0gICAgaW9tbXVf
aGFwX3B0X3NoYXJlID0gMDsKKyAgICBjbGVhcl9pb21tdV9oYXBfcHRfc2hhcmUoKTsKKwogICAg
IHByaW50ayhYRU5MT0dfREVCVUcgIkFNRC1WaTogRGlzYWJsZWQgSEFQIG1lbW9yeSBtYXAgc2hh
cmluZyB3aXRoIElPTU1VXG4iKTsKIAogICAgIC8qIHBlciBpb21tdSBpbml0aWFsaXphdGlvbiAg
Ki8KLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvaW9tbXUuYworKysgYi94ZW4vZHJpdmVy
cy9wYXNzdGhyb3VnaC9pb21tdS5jCkBAIC00OSw3ICs0OSwxMSBAQCBpbnQ4X3QgX19od2RvbV9p
bml0ZGF0YSBpb21tdV9od2RvbV9yZXNlCiAgKiBkZWZhdWx0IHVudGlsIHdlIGZpbmQgYSBnb29k
IHNvbHV0aW9uIHRvIHJlc29sdmUgaXQuCiAgKi8KIGJvb2xfdCBfX3JlYWRfbW9zdGx5IGlvbW11
X2ludHBvc3Q7Ci1ib29sX3QgX19yZWFkX21vc3RseSBpb21tdV9oYXBfcHRfc2hhcmUgPSAxOwor
CisjaWZuZGVmIGlvbW11X2hhcF9wdF9zaGFyZQorYm9vbCBfX3JlYWRfbW9zdGx5IGlvbW11X2hh
cF9wdF9zaGFyZSA9IHRydWU7CisjZW5kaWYKKwogYm9vbF90IF9fcmVhZF9tb3N0bHkgaW9tbXVf
ZGVidWc7CiBib29sX3QgX19yZWFkX21vc3RseSBhbWRfaW9tbXVfcGVyZGV2X2ludHJlbWFwID0g
MTsKIApAQCAtMTAyLDggKzEwNiwxMCBAQCBzdGF0aWMgaW50IF9faW5pdCBwYXJzZV9pb21tdV9w
YXJhbShjb25zCiAgICAgICAgICAgICBpb21tdV9od2RvbV9wYXNzdGhyb3VnaCA9IHZhbDsKICAg
ICAgICAgZWxzZSBpZiAoICh2YWwgPSBwYXJzZV9ib29sZWFuKCJkb20wLXN0cmljdCIsIHMsIHNz
KSkgPj0gMCApCiAgICAgICAgICAgICBpb21tdV9od2RvbV9zdHJpY3QgPSB2YWw7CisjaWZuZGVm
IGlvbW11X2hhcF9wdF9zaGFyZQogICAgICAgICBlbHNlIGlmICggKHZhbCA9IHBhcnNlX2Jvb2xl
YW4oInNoYXJlcHQiLCBzLCBzcykpID49IDAgKQogICAgICAgICAgICAgaW9tbXVfaGFwX3B0X3No
YXJlID0gdmFsOworI2VuZGlmCiAgICAgICAgIGVsc2UKICAgICAgICAgICAgIHJjID0gLUVJTlZB
TDsKIApAQCAtNTExLDcgKzUxNywxMCBAQCBpbnQgX19pbml0IGlvbW11X3NldHVwKHZvaWQpCiAg
ICAgICAgIGlvbW11X2VuYWJsZWQgPSAocmMgPT0gMCk7CiAgICAgfQogICAgIGlmICggIWlvbW11
X2VuYWJsZWQgKQorICAgIHsKICAgICAgICAgaW9tbXVfaW50cmVtYXAgPSAwOworICAgICAgICBj
bGVhcl9pb21tdV9oYXBfcHRfc2hhcmUoKTsKKyAgICB9CiAKICAgICBpZiAoIChmb3JjZV9pb21t
dSAmJiAhaW9tbXVfZW5hYmxlZCkgfHwKICAgICAgICAgIChmb3JjZV9pbnRyZW1hcCAmJiAhaW9t
bXVfaW50cmVtYXApICkKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvdnRkL2lvbW11LmMK
KysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvdnRkL2lvbW11LmMKQEAgLTIzMTAsNyArMjMx
MCw3IEBAIHN0YXRpYyBpbnQgX19pbml0IHZ0ZF9zZXR1cCh2b2lkKQogICAgICAgICAgICAgaW9t
bXVfaW50cG9zdCA9IDA7CiAKICAgICAgICAgaWYgKCAhdnRkX2VwdF9wYWdlX2NvbXBhdGlibGUo
aW9tbXUpICkKLSAgICAgICAgICAgIGlvbW11X2hhcF9wdF9zaGFyZSA9IDA7CisgICAgICAgICAg
ICBjbGVhcl9pb21tdV9oYXBfcHRfc2hhcmUoKTsKIAogICAgICAgICByZXQgPSBpb21tdV9zZXRf
aW50ZXJydXB0KGRyaGQpOwogICAgICAgICBpZiAoIHJldCApCi0tLSBhL3hlbi9pbmNsdWRlL3B1
YmxpYy9zeXNjdGwuaAorKysgYi94ZW4vaW5jbHVkZS9wdWJsaWMvc3lzY3RsLmgKQEAgLTk2LDkg
Kzk2LDEzIEBAIHN0cnVjdCB4ZW5fc3lzY3RsX3RidWZfb3AgewogLyogVGhlIHBsYXRmb3JtIHN1
cHBvcnRzIHNvZnR3YXJlIHBhZ2luZy4gKi8KICNkZWZpbmUgX1hFTl9TWVNDVExfUEhZU0NBUF9z
aGFkb3cgICAgICAgNAogI2RlZmluZSBYRU5fU1lTQ1RMX1BIWVNDQVBfc2hhZG93ICAgICAgICAo
MXU8PF9YRU5fU1lTQ1RMX1BIWVNDQVBfc2hhZG93KQorLyogVGhlIHBsYXRmb3JtIHN1cHBvcnRz
IHNoYXJpbmcgb2YgSEFQIHBhZ2UgdGFibGVzIHdpdGggdGhlIElPTU1VLiAqLworI2RlZmluZSBf
WEVOX1NZU0NUTF9QSFlTQ0FQX2lvbW11X2hhcF9wdF9zaGFyZSA1CisjZGVmaW5lIFhFTl9TWVND
VExfUEhZU0NBUF9pb21tdV9oYXBfcHRfc2hhcmUgIFwKKyAgICAoMXUgPDwgX1hFTl9TWVNDVExf
UEhZU0NBUF9pb21tdV9oYXBfcHRfc2hhcmUpCiAKIC8qIE1heCBYRU5fU1lTQ1RMX1BIWVNDQVBf
KiBjb25zdGFudC4gIFVzZWQgZm9yIEFCSSBjaGVja2luZy4gKi8KLSNkZWZpbmUgWEVOX1NZU0NU
TF9QSFlTQ0FQX01BWCBYRU5fU1lTQ1RMX1BIWVNDQVBfc2hhZG93CisjZGVmaW5lIFhFTl9TWVND
VExfUEhZU0NBUF9NQVggWEVOX1NZU0NUTF9QSFlTQ0FQX2lvbW11X2hhcF9wdF9zaGFyZQogCiBz
dHJ1Y3QgeGVuX3N5c2N0bF9waHlzaW5mbyB7CiAgICAgdWludDMyX3QgdGhyZWFkc19wZXJfY29y
ZTsKLS0tIGEveGVuL2luY2x1ZGUveGVuL2lvbW11LmgKKysrIGIveGVuL2luY2x1ZGUveGVuL2lv
bW11LmgKQEAgLTU1LDcgKzU1LDIyIEBAIHN0YXRpYyBpbmxpbmUgYm9vbF90IGRmbl9lcShkZm5f
dCB4LCBkZm4KIGV4dGVybiBib29sX3QgaW9tbXVfZW5hYmxlLCBpb21tdV9lbmFibGVkOwogZXh0
ZXJuIGJvb2xfdCBmb3JjZV9pb21tdSwgaW9tbXVfdmVyYm9zZSwgaW9tbXVfaWdmeDsKIGV4dGVy
biBib29sX3QgaW9tbXVfc25vb3AsIGlvbW11X3FpbnZhbCwgaW9tbXVfaW50cmVtYXAsIGlvbW11
X2ludHBvc3Q7Ci1leHRlcm4gYm9vbF90IGlvbW11X2hhcF9wdF9zaGFyZTsKKworI2lmZGVmIENP
TkZJR19IVk0KK2V4dGVybiBib29sIGlvbW11X2hhcF9wdF9zaGFyZTsKKyNlbHNlCisjZGVmaW5l
IGlvbW11X2hhcF9wdF9zaGFyZSBmYWxzZQorI2VuZGlmCisKK3N0YXRpYyBpbmxpbmUgdm9pZCBj
bGVhcl9pb21tdV9oYXBfcHRfc2hhcmUodm9pZCkKK3sKKyNpZm5kZWYgaW9tbXVfaGFwX3B0X3No
YXJlCisgICAgaW9tbXVfaGFwX3B0X3NoYXJlID0gZmFsc2U7CisjZWxpZiBpb21tdV9oYXBfcHRf
c2hhcmUKKyAgICBBU1NFUlRfVU5SRUFDSEFCTEUoKTsKKyNlbmRpZgorfQorCiBleHRlcm4gYm9v
bF90IGlvbW11X2RlYnVnOwogZXh0ZXJuIGJvb2xfdCBhbWRfaW9tbXVfcGVyZGV2X2ludHJlbWFw
OwogCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVu
LWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6
Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

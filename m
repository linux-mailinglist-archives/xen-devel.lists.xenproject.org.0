Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id D6FC5B3E9C
	for <lists+xen-devel@lfdr.de>; Mon, 16 Sep 2019 18:15:35 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i9tbg-0005xp-MM; Mon, 16 Sep 2019 16:12:04 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=Ffgk=XL=redhat.com=lersek@srs-us1.protection.inumbo.net>)
 id 1i9tbf-0005xg-2N
 for xen-devel@lists.xenproject.org; Mon, 16 Sep 2019 16:12:03 +0000
X-Inumbo-ID: b7921b6c-d89c-11e9-95f1-12813bfff9fa
Received: from mx1.redhat.com (unknown [209.132.183.28])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id b7921b6c-d89c-11e9-95f1-12813bfff9fa;
 Mon, 16 Sep 2019 16:12:02 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx08.intmail.prod.int.phx2.redhat.com
 [10.5.11.23])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 6876110F2E81;
 Mon, 16 Sep 2019 16:12:01 +0000 (UTC)
Received: from lacos-laptop-7.usersys.redhat.com (ovpn-124-96.rdu2.redhat.com
 [10.10.124.96])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 8B61019C4F;
 Mon, 16 Sep 2019 16:11:59 +0000 (UTC)
To: devel@edk2.groups.io, anthony.perard@citrix.com
References: <20190913145100.303433-1-anthony.perard@citrix.com>
 <20190913145100.303433-8-anthony.perard@citrix.com>
From: Laszlo Ersek <lersek@redhat.com>
Message-ID: <7f7f083c-4f12-1249-74ea-83ab281e5439@redhat.com>
Date: Mon, 16 Sep 2019 18:11:58 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101
 Thunderbird/52.9.1
MIME-Version: 1.0
In-Reply-To: <20190913145100.303433-8-anthony.perard@citrix.com>
Content-Language: en-US
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.23
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.6.2
 (mx1.redhat.com [10.5.110.66]); Mon, 16 Sep 2019 16:12:01 +0000 (UTC)
Subject: Re: [Xen-devel] [edk2-devel] [PATCH 07/11] OvmfPkg/XenBusDxe: Use
 on stack buffer in internal functions
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Jordan Justen <jordan.l.justen@intel.com>,
 Julien Grall <julien.grall@arm.com>, xen-devel@lists.xenproject.org,
 Ard Biesheuvel <ard.biesheuvel@linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMDkvMTMvMTkgMTY6NTAsIEFudGhvbnkgUEVSQVJEIHdyb3RlOgo+IFdlIHdpbGwgdXNlIGEg
YnVmZmVyIG9uIHRoZSBzdGFjayBpbnN0ZWFkIG9mIGFsbG9jYXRpbmcgbWVtb3J5IGZvcgo+IGlu
dGVybmFsIGZ1bmN0aW9ucyB0aGF0IGFyZSBleHBlY3RpbmcgYSByZXBseSBmcm9tIHhlbnN0b3Jl
Lgo+Cj4gVGhlIGV4dGVybmFsIGludGVyZmFjZSBYRU5CVVNfUFJPVE9DT0wgaXNuJ3QgY2hhbmdl
ZCB5ZXQsIHNvCj4gYWxsb2NhdGlvbiBhcmUgbWFkZSBmb3IgWHNSZWFkIGFuZCBYc0JhY2tlbmRS
ZWFkLgo+Cj4gUmVmOiBodHRwczovL2J1Z3ppbGxhLnRpYW5vY29yZS5vcmcvc2hvd19idWcuY2dp
P2lkPTIxOTAKPiBTaWduZWQtb2ZmLWJ5OiBBbnRob255IFBFUkFSRCA8YW50aG9ueS5wZXJhcmRA
Y2l0cml4LmNvbT4KPiAtLS0KPiAgT3ZtZlBrZy9YZW5CdXNEeGUvWGVuQnVzLmMgICB8ICA0MCAr
KysrKystLS0tLS0KPiAgT3ZtZlBrZy9YZW5CdXNEeGUvWGVuU3RvcmUuYyB8IDExNSArKysrKysr
KysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLQo+ICBPdm1mUGtnL1hlbkJ1c0R4ZS9YZW5TdG9y
ZS5oIHwgIDE3ICsrKy0tLQo+ICAzIGZpbGVzIGNoYW5nZWQsIDk1IGluc2VydGlvbnMoKyksIDc3
IGRlbGV0aW9ucygtKQo+CgpRdW90aW5nIG91dCBvZiBvcmRlcjoKCj4gZGlmZiAtLWdpdCBhL092
bWZQa2cvWGVuQnVzRHhlL1hlblN0b3JlLmggYi9Pdm1mUGtnL1hlbkJ1c0R4ZS9YZW5TdG9yZS5o
Cj4gaW5kZXggZWZmYWFkNzMzNi4uMTNmN2QxMzJlNiAxMDA2NDQKPiAtLS0gYS9Pdm1mUGtnL1hl
bkJ1c0R4ZS9YZW5TdG9yZS5oCj4gKysrIGIvT3ZtZlBrZy9YZW5CdXNEeGUvWGVuU3RvcmUuaAo+
IEBAIC02NCwyOSArNjQsMjYgQEAgWGVuU3RvcmVQYXRoRXhpc3RzICgKPiAgICApOwo+Cj4gIC8q
Kgo+IC0gIEdldCB0aGUgY29udGVudHMgb2YgYSBzaW5nbGUgImZpbGUiLiAgUmV0dXJucyB0aGUg
Y29udGVudHMgaW4gKlJlc3VsdCB3aGljaAo+IC0gIHNob3VsZCBiZSBmcmVlZCBhZnRlciB1c2Uu
ICBUaGUgbGVuZ3RoIG9mIHRoZSB2YWx1ZSBpbiBieXRlcyBpcyByZXR1cm5lZCBpbgo+IC0gICpM
ZW5QdHIuCj4gKyAgR2V0IHRoZSBjb250ZW50cyBvZiBhIHNpbmdsZSAiZmlsZSIuICBDb3B5IHRo
ZSBjb250ZW50cyBpbiBCdWZmZXIgaWYKPiArICBwcm92aWRlZC4gIFRoZSBsZW5ndGggb2YgdGhl
IHZhbHVlIGluIGJ5dGVzIGlzIHJldHVybmVkIGluICpCdWZmZXJTaXplLgo+Cj4gICAgQHBhcmFt
IFRyYW5zYWN0aW9uICAgIFRoZSBYZW5TdG9yZSB0cmFuc2FjdGlvbiBjb3ZlcmluZyB0aGlzIHJl
cXVlc3QuCj4gICAgQHBhcmFtIERpcmVjdG9yeVBhdGggIFRoZSBkaXJuYW1lIG9mIHRoZSBmaWxl
IHRvIHJlYWQuCj4gICAgQHBhcmFtIE5vZGUgICAgICAgICAgIFRoZSBiYXNlbmFtZSBvZiB0aGUg
ZmlsZSB0byByZWFkLgo+IC0gIEBwYXJhbSBMZW5QdHIgICAgICAgICBUaGUgYW1vdW50IG9mIGRh
dGEgcmVhZC4KPiAtICBAcGFyYW0gUmVzdWx0ICAgICAgICAgVGhlIHJldHVybmVkIGNvbnRlbnRz
IGZyb20gdGhpcyBmaWxlLgo+ICsgIEBwYXJhbSBCdWZmZXJTaXplICAgICBJTjogc2l6ZSBvZiB0
aGUgYnVmZmVyCj4gKyAgICAgICAgICAgICAgICAgICAgICAgIE9VVDogVGhlIHJldHVybmVkIGxl
bmd0aCBvZiB0aGUgcmVwbHkuCj4gKyAgQHBhcmFtIEJ1ZmZlciAgICAgICAgIFRoZSByZXR1cm5l
ZCBib2R5IG9mIHRoZSByZXBseS4KPgo+ICAgIEByZXR1cm4gIE9uIHN1Y2Nlc3MsIFhFTlNUT1JF
X1NUQVRVU19TVUNDRVNTLiBPdGhlcndpc2UgYW4gZXJybm8gdmFsdWUKPiAgICAgICAgICAgICBp
bmRpY2F0aW5nIHRoZSB0eXBlIG9mIGZhaWx1cmUuCgooMSkgSSBhc3N1bWUgdGhpcyAtLSBpLmUu
IGVycm9yIHJldHVybmVkIC0tIGNvdmVycyB0aGUgY2FzZSB3aGVuCkJ1ZmZlclNpemUgd2FzIHRv
byBzbWFsbCBvbiBpbnB1dC4gQ2FuIHlvdSBkb2N1bWVudCB0aGF0PyAoT3Igc2hvdWxkIGl0CmJl
IG9idmlvdXMgZnJvbSBlbHNld2hlcmU/KQoKPiAtCj4gLSAgQG5vdGUgVGhlIHJlc3VsdHMgYnVm
ZmVyIGlzIG1hbGxvY2VkIGFuZCBzaG91bGQgYmUgZnJlZSdkIGJ5IHRoZQo+IC0gICAgICAgIGNh
bGxlci4KPiAgKiovCj4gIFhFTlNUT1JFX1NUQVRVUwo+ICBYZW5TdG9yZVJlYWQgKAo+ICAgIElO
ICBDT05TVCBYRU5TVE9SRV9UUkFOU0FDVElPTiAqVHJhbnNhY3Rpb24sCj4gICAgSU4gIENPTlNU
IENIQVI4ICAgICAgICAgICAgICpEaXJlY3RvcnlQYXRoLAo+ICAgIElOICBDT05TVCBDSEFSOCAg
ICAgICAgICAgICAqTm9kZSwKPiAtICBPVVQgVUlOVDMyICAgICAgICAgICAgICAgICAgKkxlblB0
ciBPUFRJT05BTCwKPiAtICBPVVQgVk9JRCAgICAgICAgICAgICAgICAgICAgKipSZXN1bHQKPiAr
ICBJTiBPVVQgVUlOVE4gICAgICAgICAgICAgICAgKkJ1ZmZlclNpemUsCj4gKyAgT1VUIFZPSUQg
ICAgICAgICAgICAgICAgICAgICpCdWZmZXIKPiAgICApOwo+Cj4gIC8qKgo+Cgo+IGRpZmYgLS1n
aXQgYS9Pdm1mUGtnL1hlbkJ1c0R4ZS9YZW5TdG9yZS5jIGIvT3ZtZlBrZy9YZW5CdXNEeGUvWGVu
U3RvcmUuYwo+IGluZGV4IDAwNGQzYjYwMjIuLmI5NTg4YmI4YzYgMTAwNjQ0Cj4gLS0tIGEvT3Zt
ZlBrZy9YZW5CdXNEeGUvWGVuU3RvcmUuYwo+ICsrKyBiL092bWZQa2cvWGVuQnVzRHhlL1hlblN0
b3JlLmMKPiBAQCAtNzU2LDggKzc1Niw5IEBAIFhlblN0b3JlR2V0RXJyb3IgKAo+ICAgIEBwYXJh
bSBSZXF1ZXN0VHlwZSAgICBUaGUgdHlwZSBvZiBtZXNzYWdlIHRvIHNlbmQuCj4gICAgQHBhcmFt
IFdyaXRlUmVxdWVzdCAgIFBvaW50ZXJzIHRvIHRoZSBib2R5IHNlY3Rpb25zIG9mIHRoZSByZXF1
ZXN0Lgo+ICAgIEBwYXJhbSBOdW1SZXF1ZXN0cyAgICBUaGUgbnVtYmVyIG9mIGJvZHkgc2VjdGlv
bnMgaW4gdGhlIHJlcXVlc3QuCj4gLSAgQHBhcmFtIExlblB0ciAgICAgICAgIFRoZSByZXR1cm5l
ZCBsZW5ndGggb2YgdGhlIHJlcGx5Lgo+IC0gIEBwYXJhbSBSZXN1bHRQdHIgICAgICBUaGUgcmV0
dXJuZWQgYm9keSBvZiB0aGUgcmVwbHkuCj4gKyAgQHBhcmFtIEJ1ZmZlclNpemUgICAgIElOOiBz
aXplIG9mIHRoZSBidWZmZXIKPiArICAgICAgICAgICAgICAgICAgICAgICAgT1VUOiBUaGUgcmV0
dXJuZWQgbGVuZ3RoIG9mIHRoZSByZXBseS4KPiArICBAcGFyYW0gQnVmZmVyICAgICAgICAgVGhl
IHJldHVybmVkIGJvZHkgb2YgdGhlIHJlcGx5Lgo+Cj4gICAgQHJldHVybiAgWEVOU1RPUkVfU1RB
VFVTX1NVQ0NFU1Mgb24gc3VjY2Vzcy4gIE90aGVyd2lzZSBhbiBlcnJubyBpbmRpY2F0aW5nCj4g
ICAgICAgICAgICAgdGhlIGNhdXNlIG9mIGZhaWx1cmUuCj4gQEAgLTc2OSwxNSArNzcwLDEzIEBA
IFhlblN0b3JlVGFsa3YgKAo+ICAgIElOICBlbnVtIHhzZF9zb2NrbXNnX3R5cGUgICBSZXF1ZXN0
VHlwZSwKPiAgICBJTiAgQ09OU1QgV1JJVEVfUkVRVUVTVCAgICAgKldyaXRlUmVxdWVzdCwKPiAg
ICBJTiAgVUlOVDMyICAgICAgICAgICAgICAgICAgTnVtUmVxdWVzdHMsCj4gLSAgT1VUIFVJTlQz
MiAgICAgICAgICAgICAgICAgICpMZW5QdHIgT1BUSU9OQUwsCj4gLSAgT1VUIFZPSUQgICAgICAg
ICAgICAgICAgICAgICoqUmVzdWx0UHRyIE9QVElPTkFMCj4gKyAgSU4gT1VUIFVJTlROICAgICAg
ICAgICAgICAgICpCdWZmZXJTaXplIE9QVElPTkFMLAo+ICsgIE9VVCBWT0lEICAgICAgICAgICAg
ICAgICAgICAqQnVmZmVyIE9QVElPTkFMCj4gICAgKQo+ICB7Cj4gICAgc3RydWN0IHhzZF9zb2Nr
bXNnIE1lc3NhZ2U7Cj4gICAgVUlOVE4gICAgICAgICAgICAgIEluZGV4Owo+ICAgIFhFTlNUT1JF
X1NUQVRVUyAgICBTdGF0dXM7Cj4gLSAgVk9JRCAgICAgICAgICAgICAgICpCdWZmZXI7Cj4gLSAg
VUlOVE4gICAgICAgICAgICAgIEJ1ZmZlclNpemU7Cj4KPiAgICBpZiAoVHJhbnNhY3Rpb24gPT0g
WFNUX05JTCkgewo+ICAgICAgTWVzc2FnZS50eF9pZCA9IDA7Cj4gQEAgLTgwNSwzMiArODA0LDE1
IEBAIFhlblN0b3JlVGFsa3YgKAo+ICAgICAgfQo+ICAgIH0KPgo+IC0gIGlmIChSZXN1bHRQdHIp
IHsKPiAtICAgIEJ1ZmZlciA9IEFsbG9jYXRlUG9vbCAoWEVOU1RPUkVfUEFZTE9BRF9NQVggKyAx
KTsKPiAtICAgIEJ1ZmZlclNpemUgPSBYRU5TVE9SRV9QQVlMT0FEX01BWDsKPiAtICB9IGVsc2Ug
ewo+IC0gICAgQnVmZmVyID0gTlVMTDsKPiAtICAgIEJ1ZmZlclNpemUgPSAwOwo+IC0gIH0KPiAt
Cj4gICAgLy8KPiAgICAvLyBXYWl0IGZvciBhIHJlcGx5IHRvIG91ciByZXF1ZXN0Cj4gICAgLy8K
PiAgICBTdGF0dXMgPSBYZW5TdG9yZVByb2Nlc3NNZXNzYWdlIChNZXNzYWdlLnJlcV9pZCwgTWVz
c2FnZS50eF9pZCwKPiAtICAgICZCdWZmZXJTaXplLCBCdWZmZXIpOwo+ICsgICAgQnVmZmVyU2l6
ZSwgQnVmZmVyKTsKCigyKSBTaW5jZSB3ZSdyZSB0b3VjaGluZyB0aGlzIC0tIHBsZWFzZSBmaXgg
dGhlIGluZGVudGF0aW9uLgoKPgo+ICAgIGlmIChTdGF0dXMgIT0gWEVOU1RPUkVfU1RBVFVTX1NV
Q0NFU1MpIHsKPiAgICAgIERFQlVHICgoREVCVUdfRVJST1IsICJYZW5TdG9yZSwgZXJyb3Igd2hp
bGUgcmVhZGluZyB0aGUgcmluZyAoJWQpLlxuIiwKPiAgICAgICAgICBTdGF0dXMpKTsKPiAtICAg
IEZyZWVQb29sIChCdWZmZXIpOwo+IC0gICAgcmV0dXJuIFN0YXR1czsKPiAtICB9Cj4gLQo+IC0g
IGlmIChSZXN1bHRQdHIpIHsKPiAtICAgICpSZXN1bHRQdHIgPSBCdWZmZXI7Cj4gLSAgICBpZiAo
TGVuUHRyKSB7Cj4gLSAgICAgICpMZW5QdHIgPSBCdWZmZXJTaXplOwo+IC0gICAgfQo+ICAgIH0K
Pgo+ICBFcnJvcjoKPiBAQCAtODQ4LDggKzgzMCw5IEBAIFhlblN0b3JlVGFsa3YgKAo+ICAgIEBw
YXJhbSBSZXF1ZXN0VHlwZSAgICBUaGUgdHlwZSBvZiBtZXNzYWdlIHRvIHNlbmQuCj4gICAgQHBh
cmFtIEJvZHkgICAgICAgICAgIFRoZSBib2R5IG9mIHRoZSByZXF1ZXN0Lgo+ICAgIEBwYXJhbSBT
dWJQYXRoICAgICAgICBJZiAhTlVMTCBhbmQgbm90ICIiLCAiLyRTdWJQYXRoIiBpcyBhcHBlbmQg
dG8gQm9keS4KPiAtICBAcGFyYW0gTGVuUHRyICAgICAgICAgVGhlIHJldHVybmVkIGxlbmd0aCBv
ZiB0aGUgcmVwbHkuCj4gLSAgQHBhcmFtIFJlc3VsdCAgICAgICAgIFRoZSByZXR1cm5lZCBib2R5
IG9mIHRoZSByZXBseS4KPiArICBAcGFyYW0gQnVmZmVyU2l6ZSAgICAgSU46IHNpemVmIG9mIHRo
ZSBidWZmZXIKPiArICAgICAgICAgICAgICAgICAgICAgICAgT1VUOiBUaGUgcmV0dXJuZWQgbGVu
Z3RoIG9mIHRoZSByZXBseS4KPiArICBAcGFyYW0gQnVmZmVyICAgICAgICAgVGhlIHJldHVybmVk
IGJvZHkgb2YgdGhlIHJlcGx5Lgo+Cj4gICAgQHJldHVybiAgMCBvbiBzdWNjZXNzLiAgT3RoZXJ3
aXNlIGFuIGVycm5vIGluZGljYXRpbmcKPiAgICAgICAgICAgICB0aGUgY2F1c2Ugb2YgZmFpbHVy
ZS4KPiBAQCAtODYxLDggKzg0NCw4IEBAIFhlblN0b3JlU2luZ2xlICgKPiAgICBJTiAgZW51bSB4
c2Rfc29ja21zZ190eXBlICAgUmVxdWVzdFR5cGUsCj4gICAgSU4gIENPTlNUIENIQVI4ICAgICAg
ICAgICAgICpCb2R5LAo+ICAgIElOICBDT05TVCBDSEFSOCAgICAgICAgICAgICAqU3ViUGF0aCBP
UFRJT05BTCwKPiAtICBPVVQgVUlOVDMyICAgICAgICAgICAgICAgICAgKkxlblB0ciBPUFRJT05B
TCwKPiAtICBPVVQgVk9JRCAgICAgICAgICAgICAgICAgICAgKipSZXN1bHQgT1BUSU9OQUwKPiAr
ICBJTiBPVVQgVUlOVE4gICAgICAgICAgICAgICAgKkJ1ZmZlclNpemUgT1BUSU9OQUwsCj4gKyAg
T1VUIFZPSUQgICAgICAgICAgICAgICAgICAgICpCdWZmZXIgT1BUSU9OQUwKPiAgICApCj4gIHsK
PiAgICBXUklURV9SRVFVRVNUICAgV3JpdGVSZXF1ZXN0WzNdOwo+IEBAIC04NzAsNyArODUzLDcg
QEAgWGVuU3RvcmVTaW5nbGUgKAo+ICAgIFhlblN0b3JlUHJlcGFyZVdyaXRlUmVxdWVzdCAoV3Jp
dGVSZXF1ZXN0LCBCb2R5LCBTdWJQYXRoKTsKPgo+ICAgIHJldHVybiBYZW5TdG9yZVRhbGt2IChU
cmFuc2FjdGlvbiwgUmVxdWVzdFR5cGUsIFdyaXRlUmVxdWVzdCwgMywKPiAtICAgICAgICAgICAg
ICAgICAgICAgICAgTGVuUHRyLCBSZXN1bHQpOwo+ICsgICAgQnVmZmVyU2l6ZSwgQnVmZmVyKTsK
CigzKSBJbmRlbnRhdGlvbi4KCj4gIH0KPgo+ICAvLwo+IEBAIC0xMTA2LDEzICsxMDg5LDE2IEBA
IFhlblN0b3JlTGlzdERpcmVjdG9yeSAoCj4gICAgT1VUIENPTlNUIENIQVI4ICAgICAgICAgICAq
KipEaXJlY3RvcnlMaXN0UHRyCj4gICAgKQo+ICB7Cj4gLSAgQ0hBUjggKlRlbXBTdHI7Cj4gLSAg
VUlOVDMyIExlbiA9IDA7Cj4gKyAgQ0hBUjggICAgICAgICAgICpUZW1wU3RyOwo+ICsgIFVJTlRO
ICAgICAgICAgICBMZW47Cj4gICAgWEVOU1RPUkVfU1RBVFVTIFN0YXR1czsKPgo+ICsgIFRlbXBT
dHIgPSBBbGxvY2F0ZVBvb2wgKFhFTlNUT1JFX1BBWUxPQURfTUFYKTsKCig0KSBTaG91bGQgdGhp
cyBBbGxvY2F0ZVBvb2woKSBiZSBtZW50aW9uZWQgaW4gdGhlIGNvbW1pdCBtZXNzYWdlPyAoQW5k
CnRoZSBvdGhlcnMgYmVsb3csIHRvby4pCgpUaGUgZnVuY3Rpb24gY2FsbHMgU3BsaXQoKSwgYXMg
d2VsbCwgYW5kIHRoYXQgb25lIGFsbG9jYXRlcyBtZW1vcnkgdG9vLgpBcmUgdGhleSBub3QgdXNl
ZCBhdCBFeGl0Qm9vU2VydmljZXMoKT8KCgo+ICsgIExlbiA9IFhFTlNUT1JFX1BBWUxPQURfTUFY
Owo+ICAgIFN0YXR1cyA9IFhlblN0b3JlU2luZ2xlIChUcmFuc2FjdGlvbiwgWFNfRElSRUNUT1JZ
LCBEaXJlY3RvcnlQYXRoLCBOb2RlLCAmTGVuLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAoVk9JRCAqKikgJlRlbXBTdHIpOwo+ICsgICAgVGVtcFN0cik7CgooNSkgSW5kZW50YXRpb24u
Cgo+ICAgIGlmIChTdGF0dXMgIT0gWEVOU1RPUkVfU1RBVFVTX1NVQ0NFU1MpIHsKPiArICAgIEZy
ZWVQb29sIChUZW1wU3RyKTsKPiAgICAgIHJldHVybiBTdGF0dXM7Cj4gICAgfQo+Cj4gQEAgLTEx
NDYsMjEgKzExMzIsMTQgQEAgWGVuU3RvcmVSZWFkICgKPiAgICBJTiAgQ09OU1QgWEVOU1RPUkVf
VFJBTlNBQ1RJT04gKlRyYW5zYWN0aW9uLAo+ICAgIElOICBDT05TVCBDSEFSOCAgICAgICAgICAg
ICAqRGlyZWN0b3J5UGF0aCwKPiAgICBJTiAgQ09OU1QgQ0hBUjggICAgICAgICAgICAgKk5vZGUs
Cj4gLSAgT1VUIFVJTlQzMiAgICAgICAgICAgICAgICAgICpMZW5QdHIgT1BUSU9OQUwsCj4gLSAg
T1VUIFZPSUQgICAgICAgICAgICAgICAgICAgICoqUmVzdWx0Cj4gKyAgSU4gT1VUIFVJTlROICAg
ICAgICAgICAgICAgICpCdWZmZXJTaXplLAo+ICsgIE9VVCBWT0lEICAgICAgICAgICAgICAgICAg
ICAqQnVmZmVyCj4gICAgKQo+ICB7Cj4gLSAgVk9JRCAqVmFsdWU7Cj4gLSAgWEVOU1RPUkVfU1RB
VFVTIFN0YXR1czsKPiAtCj4gLSAgU3RhdHVzID0gWGVuU3RvcmVTaW5nbGUgKFRyYW5zYWN0aW9u
LCBYU19SRUFELCBEaXJlY3RvcnlQYXRoLCBOb2RlLAo+IC0gICAgTGVuUHRyLCAmVmFsdWUpOwo+
IC0gIGlmIChTdGF0dXMgIT0gWEVOU1RPUkVfU1RBVFVTX1NVQ0NFU1MpIHsKPiAtICAgIHJldHVy
biBTdGF0dXM7Cj4gLSAgfQo+IC0KPiAtICAqUmVzdWx0ID0gVmFsdWU7Cj4gLSAgcmV0dXJuIFhF
TlNUT1JFX1NUQVRVU19TVUNDRVNTOwo+ICsgIEFTU0VSVCAoQnVmZmVyU2l6ZSAhPSBOVUxMKTsK
PiArICBBU1NFUlQgKEJ1ZmZlciAhPSBOVUxMKTsKPiArICByZXR1cm4gWGVuU3RvcmVTaW5nbGUg
KFRyYW5zYWN0aW9uLCBYU19SRUFELCBEaXJlY3RvcnlQYXRoLCBOb2RlLAo+ICsgICAgQnVmZmVy
U2l6ZSwgQnVmZmVyKTsKPiAgfQo+Cj4gIFhFTlNUT1JFX1NUQVRVUwo+IEBAIC0xMTk5LDE0ICsx
MTc4LDE2IEBAIFhlblN0b3JlVHJhbnNhY3Rpb25TdGFydCAoCj4gICAgT1VUIFhFTlNUT1JFX1RS
QU5TQUNUSU9OICAqVHJhbnNhY3Rpb24KPiAgICApCj4gIHsKPiAtICBDSEFSOCAqSWRTdHI7Cj4g
KyAgQ0hBUjggICAgICAgICAgIElkU3RyW1hFTlNUT1JFX1BBWUxPQURfTUFYXTsKPiArICBVSU5U
TiAgICAgICAgICAgQnVmZmVyU2l6ZTsKPiAgICBYRU5TVE9SRV9TVEFUVVMgU3RhdHVzOwo+Cj4g
KyAgQnVmZmVyU2l6ZSA9IHNpemVvZiAoSWRTdHIpOwo+ICsKPiAgICBTdGF0dXMgPSBYZW5TdG9y
ZVNpbmdsZSAoWFNUX05JTCwgWFNfVFJBTlNBQ1RJT05fU1RBUlQsICIiLCBOVUxMLAo+IC0gICAg
TlVMTCwgKFZPSUQgKiopICZJZFN0cik7Cj4gKyAgICAmQnVmZmVyU2l6ZSwgSWRTdHIpOwoKKDYp
IEluZGVudGF0aW9uLgoKPiAgICBpZiAoU3RhdHVzID09IFhFTlNUT1JFX1NUQVRVU19TVUNDRVNT
KSB7Cj4gICAgICBUcmFuc2FjdGlvbi0+SWQgPSAoVUlOVDMyKUFzY2lpU3RyRGVjaW1hbFRvVWlu
dG4gKElkU3RyKTsKCig3KSBTb3JyeSBpZiBJJ3ZlIG1pc3NlZCB0aGUgb2J2aW91czogd2hhdCBn
dWFyYW50ZWVzIHRoYXQgSWRTdHIgaXMKTlVMLXRlcm1pbmF0ZWQgaGVyZT8gSW4gdGhlIG90aGVy
IGZ1bmN0aW9ucywgd2UncmUgTlVMLXRlcm1pbmF0aW5nCm91cnNlbHZlcy4KCj4gLSAgICBGcmVl
UG9vbCAoSWRTdHIpOwo+ICAgIH0KPgo+ICAgIHJldHVybiBTdGF0dXM7Cj4gQEAgLTEzNTgsNyAr
MTMzOSwyNCBAQCBYZW5CdXNYZW5TdG9yZVJlYWQgKAo+ICAgIE9VVCBWT0lEICAgICAgICAgICAg
ICAgICAgKipWYWx1ZQo+ICAgICkKPiAgewo+IC0gIHJldHVybiBYZW5TdG9yZVJlYWQgKFRyYW5z
YWN0aW9uLCBUaGlzLT5Ob2RlLCBOb2RlLCBOVUxMLCBWYWx1ZSk7Cj4gKyAgWEVOU1RPUkVfU1RB
VFVTIFN0YXR1czsKPiArICBVSU5UTiAgICAgICAgICAgQnVmZmVyU2l6ZTsKPiArICBWT0lEICAg
ICAgICAgICAgKkJ1ZmZlcjsKPiArCj4gKyAgQnVmZmVyU2l6ZSA9IFhFTlNUT1JFX1BBWUxPQURf
TUFYICsgMTsKPiArICBCdWZmZXIgPSBBbGxvY2F0ZVBvb2wgKEJ1ZmZlclNpemUpOwo+ICsgIGlm
IChCdWZmZXIgPT0gTlVMTCkgewo+ICsgICAgcmV0dXJuIFhFTlNUT1JFX1NUQVRVU19FTk9NRU07
Cj4gKyAgfQo+ICsKPiArICBTdGF0dXMgPSBYZW5TdG9yZVJlYWQgKFRyYW5zYWN0aW9uLCBUaGlz
LT5Ob2RlLCBOb2RlLCAmQnVmZmVyU2l6ZSwgQnVmZmVyKTsKPiArCj4gKyAgaWYgKFN0YXR1cyA9
PSBYRU5TVE9SRV9TVEFUVVNfU1VDQ0VTUykgewo+ICsgICAgKlZhbHVlID0gQnVmZmVyOwo+ICsg
IH0gZWxzZSB7Cj4gKyAgICBGcmVlUG9vbCAoQnVmZmVyKTsKPiArICB9Cj4gKyAgcmV0dXJuIFN0
YXR1czsKPiAgfQo+Cj4gIFhFTlNUT1JFX1NUQVRVUwo+IEBAIC0xMzcwLDcgKzEzNjgsMjQgQEAg
WGVuQnVzWGVuU3RvcmVCYWNrZW5kUmVhZCAoCj4gICAgT1VUIFZPSUQgICAgICAgICAgICAgICAg
ICAqKlZhbHVlCj4gICAgKQo+ICB7Cj4gLSAgcmV0dXJuIFhlblN0b3JlUmVhZCAoVHJhbnNhY3Rp
b24sIFRoaXMtPkJhY2tlbmQsIE5vZGUsIE5VTEwsIFZhbHVlKTsKPiArICBYRU5TVE9SRV9TVEFU
VVMgU3RhdHVzOwo+ICsgIFVJTlROICAgICAgICAgICBCdWZmZXJTaXplOwo+ICsgIFZPSUQgICAg
ICAgICAgICAqQnVmZmVyOwo+ICsKPiArICBCdWZmZXJTaXplID0gWEVOU1RPUkVfUEFZTE9BRF9N
QVggKyAxOwo+ICsgIEJ1ZmZlciA9IEFsbG9jYXRlUG9vbCAoQnVmZmVyU2l6ZSk7Cj4gKyAgaWYg
KEJ1ZmZlciA9PSBOVUxMKSB7Cj4gKyAgICByZXR1cm4gWEVOU1RPUkVfU1RBVFVTX0VOT01FTTsK
PiArICB9Cj4gKwo+ICsgIFN0YXR1cyA9IFhlblN0b3JlUmVhZCAoVHJhbnNhY3Rpb24sIFRoaXMt
PkJhY2tlbmQsIE5vZGUsICZCdWZmZXJTaXplLCBCdWZmZXIpOwo+ICsKPiArICBpZiAoU3RhdHVz
ID09IFhFTlNUT1JFX1NUQVRVU19TVUNDRVNTKSB7Cj4gKyAgICAqVmFsdWUgPSBCdWZmZXI7Cj4g
KyAgfSBlbHNlIHsKPiArICAgIEZyZWVQb29sIChCdWZmZXIpOwo+ICsgIH0KPiArICByZXR1cm4g
U3RhdHVzOwo+ICB9Cj4KPiAgWEVOU1RPUkVfU1RBVFVTCgoKPiBkaWZmIC0tZ2l0IGEvT3ZtZlBr
Zy9YZW5CdXNEeGUvWGVuQnVzLmMgYi9Pdm1mUGtnL1hlbkJ1c0R4ZS9YZW5CdXMuYwo+IGluZGV4
IGJiOGRkYmM0ZDQuLjc4ODM1ZWM3YjMgMTAwNjQ0Cj4gLS0tIGEvT3ZtZlBrZy9YZW5CdXNEeGUv
WGVuQnVzLmMKPiArKysgYi9Pdm1mUGtnL1hlbkJ1c0R4ZS9YZW5CdXMuYwo+IEBAIC04OSwxOSAr
ODksMTggQEAgWGVuQnVzUmVhZERyaXZlclN0YXRlICgKPiAgICBJTiBDT05TVCBDSEFSOCAqUGF0
aAo+ICAgICkKPiAgewo+IC0gIFhlbmJ1c1N0YXRlIFN0YXRlOwo+IC0gIENIQVI4ICpQdHIgPSBO
VUxMOwo+ICsgIFhlbmJ1c1N0YXRlICAgICBTdGF0ZTsKPiArICBDSEFSOCAgICAgICAgICAgQnVm
ZmVyWzRdOwo+ICsgIFVJTlROICAgICAgICAgICBCdWZmZXJTaXplOwo+ICAgIFhFTlNUT1JFX1NU
QVRVUyBTdGF0dXM7Cj4KPiAtICBTdGF0dXMgPSBYZW5TdG9yZVJlYWQgKFhTVF9OSUwsIFBhdGgs
ICJzdGF0ZSIsIE5VTEwsIChWT0lEICoqKSZQdHIpOwo+ICsgIEJ1ZmZlclNpemUgPSBzaXplb2Yg
KEJ1ZmZlcikgLSAxOwo+ICsgIFN0YXR1cyA9IFhlblN0b3JlUmVhZCAoWFNUX05JTCwgUGF0aCwg
InN0YXRlIiwgJkJ1ZmZlclNpemUsIEJ1ZmZlcik7Cj4gICAgaWYgKFN0YXR1cyAhPSBYRU5TVE9S
RV9TVEFUVVNfU1VDQ0VTUykgewo+ICAgICAgU3RhdGUgPSBYZW5idXNTdGF0ZUNsb3NlZDsKPiAg
ICB9IGVsc2Ugewo+IC0gICAgU3RhdGUgPSBBc2NpaVN0ckRlY2ltYWxUb1VpbnRuIChQdHIpOwo+
IC0gIH0KPiAtCj4gLSAgaWYgKFB0ciAhPSBOVUxMKSB7Cj4gLSAgICBGcmVlUG9vbCAoUHRyKTsK
PiArICAgIEJ1ZmZlcltCdWZmZXJTaXplXSA9ICdcMCc7Cj4gKyAgICBTdGF0ZSA9IEFzY2lpU3Ry
RGVjaW1hbFRvVWludG4gKEJ1ZmZlcik7Cj4gICAgfQo+Cj4gICAgcmV0dXJuIFN0YXRlOwo+IEBA
IC0xMjksOCArMTI4LDExIEBAIFhlbkJ1c0FkZERldmljZSAoCj4KPiAgICBpZiAoWGVuU3RvcmVQ
YXRoRXhpc3RzIChYU1RfTklMLCBEZXZpY2VQYXRoLCAiIikpIHsKPiAgICAgIFhFTkJVU19QUklW
QVRFX0RBVEEgKkNoaWxkOwo+IC0gICAgZW51bSB4ZW5idXNfc3RhdGUgU3RhdGU7Cj4gLSAgICBD
SEFSOCAqQmFja2VuZFBhdGg7Cj4gKyAgICBlbnVtIHhlbmJ1c19zdGF0ZSAgIFN0YXRlOwo+ICsg
ICAgQ0hBUjggICAgICAgICAgICAgICBCYWNrZW5kUGF0aFtYRU5TVE9SRV9BQlNfUEFUSF9NQVgg
KyAxXTsKPiArICAgIFVJTlROICAgICAgICAgICAgICAgQmFja2VuZFBhdGhTaXplOwo+ICsKPiAr
ICAgIEJhY2tlbmRQYXRoU2l6ZSA9IHNpemVvZiAoQmFja2VuZFBhdGgpOwo+Cj4gICAgICBDaGls
ZCA9IFhlbkJ1c0RldmljZUluaXRpYWxpemVkIChEZXYsIERldmljZVBhdGgpOwo+ICAgICAgaWYg
KENoaWxkICE9IE5VTEwpIHsKPiBAQCAtMTU1LDE3ICsxNTcsMTggQEAgWGVuQnVzQWRkRGV2aWNl
ICgKPiAgICAgIH0KPgo+ICAgICAgU3RhdHVzWGVuU3RvcmUgPSBYZW5TdG9yZVJlYWQgKFhTVF9O
SUwsIERldmljZVBhdGgsICJiYWNrZW5kIiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBOVUxMLCAoVk9JRCAqKikgJkJhY2tlbmRQYXRoKTsKPiArICAgICAgJkJhY2tlbmRQ
YXRoU2l6ZSwgQmFja2VuZFBhdGgpOwoKKDgpIEluZGVudGF0aW9uLgoKPiAgICAgIGlmIChTdGF0
dXNYZW5TdG9yZSAhPSBYRU5TVE9SRV9TVEFUVVNfU1VDQ0VTUykgewo+ICAgICAgICBERUJVRyAo
KEVGSV9EX0VSUk9SLCAieGVuYnVzOiAlYSBubyBiYWNrZW5kIHBhdGguXG4iLCBEZXZpY2VQYXRo
KSk7Cj4gICAgICAgIFN0YXR1cyA9IEVGSV9OT1RfRk9VTkQ7Cj4gICAgICAgIGdvdG8gb3V0Owo+
ICAgICAgfQo+ICsgICAgQmFja2VuZFBhdGhbQmFja2VuZFBhdGhTaXplXSA9ICdcMCc7CgooOSkg
SSB0aGluayB0aGlzIGNvdWxkIGJlIG9mZi1ieS1vbmUuIEluIHRoZSBvdGhlciBjYXNlcywgeW91
IGRlY3JlbWVudAp0aGUgYnVmZmVyIHNpemUgZmlyc3QsIGJlZm9yZSBwYXNzaW5nIGl0IHRvIFhl
blN0b3JlUmVhZCgpLgoKU29ycnkgaWYgSSBnb3QgY29uZnVzZWQuCgo+Cj4gICAgICBQcml2YXRl
ID0gQWxsb2NhdGVDb3B5UG9vbCAoc2l6ZW9mICgqUHJpdmF0ZSksICZnWGVuQnVzUHJpdmF0ZURh
dGEpOwo+ICAgICAgUHJpdmF0ZS0+WGVuQnVzSW8uVHlwZSA9IEFzY2lpU3RyRHVwIChUeXBlKTsK
PiAgICAgIFByaXZhdGUtPlhlbkJ1c0lvLk5vZGUgPSBBc2NpaVN0ckR1cCAoRGV2aWNlUGF0aCk7
Cj4gLSAgICBQcml2YXRlLT5YZW5CdXNJby5CYWNrZW5kID0gQmFja2VuZFBhdGg7Cj4gKyAgICBQ
cml2YXRlLT5YZW5CdXNJby5CYWNrZW5kID0gQXNjaWlTdHJEdXAgKEJhY2tlbmRQYXRoKTsKCigx
MCkgV2hlcmUgaXMgdGhpcyByZWxlYXNlZD8KCj4gICAgICBQcml2YXRlLT5YZW5CdXNJby5EZXZp
Y2VJZCA9IChVSU5UMTYpQXNjaWlTdHJEZWNpbWFsVG9VaW50biAoSWQpOwo+ICAgICAgUHJpdmF0
ZS0+RGV2ID0gRGV2Owo+Cj4gQEAgLTMwOSwxNyArMzEyLDIwIEBAIFhlbkJ1c1NldFN0YXRlICgK
PiAgICApCj4gIHsKPiAgICBlbnVtIHhlbmJ1c19zdGF0ZSBDdXJyZW50U3RhdGU7Cj4gLSAgWEVO
U1RPUkVfU1RBVFVTIFN0YXR1czsKPiAtICBDSEFSOCAqVGVtcDsKPiArICBYRU5TVE9SRV9TVEFU
VVMgICBTdGF0dXM7Cj4gKyAgQ0hBUjggICAgICAgICAgICAgQnVmZmVyWzRdOwo+ICsgIFVJTlRO
ICAgICAgICAgICAgIEJ1ZmZlclNpemU7Cj4gKwo+ICsgIEJ1ZmZlclNpemUgPSBzaXplb2YgKEJ1
ZmZlcikgLSAxOwo+Cj4gICAgREVCVUcgKChFRklfRF9JTkZPLCAiWGVuQnVzOiBTZXQgc3RhdGUg
dG8gJWRcbiIsIE5ld1N0YXRlKSk7Cj4KPiAtICBTdGF0dXMgPSBYZW5TdG9yZVJlYWQgKFRyYW5z
YWN0aW9uLCBUaGlzLT5Ob2RlLCAic3RhdGUiLCBOVUxMLCAoVk9JRCAqKikmVGVtcCk7Cj4gKyAg
U3RhdHVzID0gWGVuU3RvcmVSZWFkIChUcmFuc2FjdGlvbiwgVGhpcy0+Tm9kZSwgInN0YXRlIiwg
JkJ1ZmZlclNpemUsIEJ1ZmZlcik7Cj4gICAgaWYgKFN0YXR1cyAhPSBYRU5TVE9SRV9TVEFUVVNf
U1VDQ0VTUykgewo+ICAgICAgZ290byBPdXQ7Cj4gICAgfQo+IC0gIEN1cnJlbnRTdGF0ZSA9IEFz
Y2lpU3RyRGVjaW1hbFRvVWludG4gKFRlbXApOwo+IC0gIEZyZWVQb29sIChUZW1wKTsKPiArICBC
dWZmZXJbQnVmZmVyU2l6ZV0gPSAnXDAnOwo+ICsgIEN1cnJlbnRTdGF0ZSA9IEFzY2lpU3RyRGVj
aW1hbFRvVWludG4gKEJ1ZmZlcik7Cj4gICAgaWYgKEN1cnJlbnRTdGF0ZSA9PSBOZXdTdGF0ZSkg
ewo+ICAgICAgZ290byBPdXQ7Cj4gICAgfQoKVGhhbmtzCkxhc3psbwoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApY
ZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

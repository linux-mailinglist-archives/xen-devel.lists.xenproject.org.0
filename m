Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 89BDDB2AA9
	for <lists+xen-devel@lfdr.de>; Sat, 14 Sep 2019 10:56:42 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i93oO-0008G3-65; Sat, 14 Sep 2019 08:53:44 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=rDpt=XJ=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1i93oM-0008Ef-UU
 for xen-devel@lists.xenproject.org; Sat, 14 Sep 2019 08:53:42 +0000
X-Inumbo-ID: 11795d10-d6cd-11e9-a337-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 11795d10-d6cd-11e9-a337-bc764e2007e4;
 Sat, 14 Sep 2019 08:53:06 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 9BE12B673;
 Sat, 14 Sep 2019 08:53:04 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Sat, 14 Sep 2019 10:52:35 +0200
Message-Id: <20190914085251.18816-32-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190914085251.18816-1-jgross@suse.com>
References: <20190914085251.18816-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH v3 31/47] xen/sched: modify
 cpupool_domain_cpumask() to be an unit mask
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Tim Deegan <tim@xen.org>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Dario Faggioli <dfaggioli@suse.com>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Y3B1cG9vbF9kb21haW5fY3B1bWFzaygpIGlzIHVzZWQgYnkgc2NoZWR1bGluZyB0byBzZWxlY3Qg
Y3B1cyBvciB0bwppdGVyYXRlIG92ZXIgY3B1cy4gSW4gb3JkZXIgdG8gc3VwcG9ydCBzY2hlZHVs
aW5nIHVuaXRzIHNwYW5uaW5nCm11bHRpcGxlIGNwdXMgbGV0IGNwdXBvb2xfZG9tYWluX2NwdW1h
c2soKSByZXR1cm4gYSBjcHVtYXNrIHdpdGggb25seQpvbmUgYml0IHNldCBwZXIgc2NoZWR1bGlu
ZyByZXNvdXJjZS4KClNpZ25lZC1vZmYtYnk6IEp1ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNv
bT4KLS0tCiB4ZW4vY29tbW9uL2NwdXBvb2wuYyAgICAgICB8IDI5ICsrKysrKysrKysrKysrKysr
KysrLS0tLS0tLS0tCiB4ZW4vY29tbW9uL3NjaGVkdWxlLmMgICAgICB8ICA1ICsrKy0tCiB4ZW4v
aW5jbHVkZS94ZW4vc2NoZWQtaWYuaCB8ICA1ICsrKystCiAzIGZpbGVzIGNoYW5nZWQsIDI3IGlu
c2VydGlvbnMoKyksIDEyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vY3B1
cG9vbC5jIGIveGVuL2NvbW1vbi9jcHVwb29sLmMKaW5kZXggZmQzMDA0MDkyMi4uYTVmNDExMzkx
NSAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9jcHVwb29sLmMKKysrIGIveGVuL2NvbW1vbi9jcHVw
b29sLmMKQEAgLTM2LDI2ICszNiwzNSBAQCBzdGF0aWMgREVGSU5FX1NQSU5MT0NLKGNwdXBvb2xf
bG9jayk7CiAKIERFRklORV9QRVJfQ1BVKHN0cnVjdCBjcHVwb29sICosIGNwdXBvb2wpOwogCitz
dGF0aWMgdm9pZCBmcmVlX2NwdXBvb2xfc3RydWN0KHN0cnVjdCBjcHVwb29sICpjKQoreworICAg
IGlmICggYyApCisgICAgeworICAgICAgICBmcmVlX2NwdW1hc2tfdmFyKGMtPnJlc192YWxpZCk7
CisgICAgICAgIGZyZWVfY3B1bWFza192YXIoYy0+Y3B1X3ZhbGlkKTsKKyAgICB9CisgICAgeGZy
ZWUoYyk7Cit9CisKIHN0YXRpYyBzdHJ1Y3QgY3B1cG9vbCAqYWxsb2NfY3B1cG9vbF9zdHJ1Y3Qo
dm9pZCkKIHsKICAgICBzdHJ1Y3QgY3B1cG9vbCAqYyA9IHh6YWxsb2Moc3RydWN0IGNwdXBvb2wp
OwogCi0gICAgaWYgKCAhYyB8fCAhemFsbG9jX2NwdW1hc2tfdmFyKCZjLT5jcHVfdmFsaWQpICkK
KyAgICBpZiAoICFjICkKKyAgICAgICAgcmV0dXJuIE5VTEw7CisKKyAgICB6YWxsb2NfY3B1bWFz
a192YXIoJmMtPmNwdV92YWxpZCk7CisgICAgemFsbG9jX2NwdW1hc2tfdmFyKCZjLT5yZXNfdmFs
aWQpOworCisgICAgaWYgKCAhYy0+Y3B1X3ZhbGlkIHx8ICFjLT5yZXNfdmFsaWQgKQogICAgIHsK
LSAgICAgICAgeGZyZWUoYyk7CisgICAgICAgIGZyZWVfY3B1cG9vbF9zdHJ1Y3QoYyk7CiAgICAg
ICAgIGMgPSBOVUxMOwogICAgIH0KIAogICAgIHJldHVybiBjOwogfQogCi1zdGF0aWMgdm9pZCBm
cmVlX2NwdXBvb2xfc3RydWN0KHN0cnVjdCBjcHVwb29sICpjKQotewotICAgIGlmICggYyApCi0g
ICAgICAgIGZyZWVfY3B1bWFza192YXIoYy0+Y3B1X3ZhbGlkKTsKLSAgICB4ZnJlZShjKTsKLX0K
LQogLyoKICAqIGZpbmQgYSBjcHVwb29sIGJ5IGl0J3MgaWQuIHRvIGJlIGNhbGxlZCB3aXRoIGNw
dXBvb2wgbG9jayBoZWxkCiAgKiBpZiBleGFjdCBpcyBub3Qgc3BlY2lmaWVkLCB0aGUgZmlyc3Qg
Y3B1cG9vbCB3aXRoIGFuIGlkIGxhcmdlciBvciBlcXVhbCB0bwpAQCAtMjY5LDYgKzI3OCw3IEBA
IHN0YXRpYyBpbnQgY3B1cG9vbF9hc3NpZ25fY3B1X2xvY2tlZChzdHJ1Y3QgY3B1cG9vbCAqYywg
dW5zaWduZWQgaW50IGNwdSkKICAgICAgICAgY3B1cG9vbF9jcHVfbW92aW5nID0gTlVMTDsKICAg
ICB9CiAgICAgY3B1bWFza19zZXRfY3B1KGNwdSwgYy0+Y3B1X3ZhbGlkKTsKKyAgICBjcHVtYXNr
X2FuZChjLT5yZXNfdmFsaWQsIGMtPmNwdV92YWxpZCwgc2NoZWRfcmVzX21hc2spOwogCiAgICAg
cmN1X3JlYWRfbG9jaygmZG9tbGlzdF9yZWFkX2xvY2spOwogICAgIGZvcl9lYWNoX2RvbWFpbl9p
bl9jcHVwb29sKGQsIGMpCkBAIC0zNjEsNiArMzcxLDcgQEAgc3RhdGljIGludCBjcHVwb29sX3Vu
YXNzaWduX2NwdV9zdGFydChzdHJ1Y3QgY3B1cG9vbCAqYywgdW5zaWduZWQgaW50IGNwdSkKICAg
ICBhdG9taWNfaW5jKCZjLT5yZWZjbnQpOwogICAgIGNwdXBvb2xfY3B1X21vdmluZyA9IGM7CiAg
ICAgY3B1bWFza19jbGVhcl9jcHUoY3B1LCBjLT5jcHVfdmFsaWQpOworICAgIGNwdW1hc2tfYW5k
KGMtPnJlc192YWxpZCwgYy0+Y3B1X3ZhbGlkLCBzY2hlZF9yZXNfbWFzayk7CiAKIG91dDoKICAg
ICBzcGluX3VubG9jaygmY3B1cG9vbF9sb2NrKTsKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vc2No
ZWR1bGUuYyBiL3hlbi9jb21tb24vc2NoZWR1bGUuYwppbmRleCBhNzkwNjVjODI2Li44NzY2MGM2
OTc4IDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3NjaGVkdWxlLmMKKysrIGIveGVuL2NvbW1vbi9z
Y2hlZHVsZS5jCkBAIC01Nyw2ICs1Nyw3IEBAIGludGVnZXJfcGFyYW0oInNjaGVkX3JhdGVsaW1p
dF91cyIsIHNjaGVkX3JhdGVsaW1pdF91cyk7CiAKIC8qIE51bWJlciBvZiB2Y3B1cyBwZXIgc3Ry
dWN0IHNjaGVkX3VuaXQuICovCiBzdGF0aWMgdW5zaWduZWQgaW50IF9fcmVhZF9tb3N0bHkgc2No
ZWRfZ3JhbnVsYXJpdHkgPSAxOworY29uc3QgY3B1bWFza190ICpzY2hlZF9yZXNfbWFzayA9ICZj
cHVtYXNrX2FsbDsKIAogLyogQ29tbW9uIGxvY2sgZm9yIGZyZWUgY3B1cy4gKi8KIHN0YXRpYyBE
RUZJTkVfU1BJTkxPQ0soc2NoZWRfZnJlZV9jcHVfbG9jayk7CkBAIC00MTQsOSArNDE1LDkgQEAg
c3RhdGljIHVuc2lnbmVkIGludCBzY2hlZF9zZWxlY3RfaW5pdGlhbF9jcHUoY29uc3Qgc3RydWN0
IHZjcHUgKnYpCiAgICAgY3B1bWFza19jbGVhcihjcHVzKTsKICAgICBmb3JfZWFjaF9ub2RlX21h
c2sgKCBub2RlLCBkLT5ub2RlX2FmZmluaXR5ICkKICAgICAgICAgY3B1bWFza19vcihjcHVzLCBj
cHVzLCAmbm9kZV90b19jcHVtYXNrKG5vZGUpKTsKLSAgICBjcHVtYXNrX2FuZChjcHVzLCBjcHVz
LCBjcHVwb29sX2RvbWFpbl9jcHVtYXNrKGQpKTsKKyAgICBjcHVtYXNrX2FuZChjcHVzLCBjcHVz
LCBkLT5jcHVwb29sLT5jcHVfdmFsaWQpOwogICAgIGlmICggY3B1bWFza19lbXB0eShjcHVzKSAp
Ci0gICAgICAgIGNwdW1hc2tfY29weShjcHVzLCBjcHVwb29sX2RvbWFpbl9jcHVtYXNrKGQpKTsK
KyAgICAgICAgY3B1bWFza19jb3B5KGNwdXMsIGQtPmNwdXBvb2wtPmNwdV92YWxpZCk7CiAKICAg
ICBpZiAoIHYtPnZjcHVfaWQgPT0gMCApCiAgICAgICAgIGNwdV9yZXQgPSBjcHVtYXNrX2ZpcnN0
KGNwdXMpOwpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL3NjaGVkLWlmLmggYi94ZW4vaW5j
bHVkZS94ZW4vc2NoZWQtaWYuaAppbmRleCA2YTRkYmFjOTM1Li44NGQwNjU4NTc4IDEwMDY0NAot
LS0gYS94ZW4vaW5jbHVkZS94ZW4vc2NoZWQtaWYuaAorKysgYi94ZW4vaW5jbHVkZS94ZW4vc2No
ZWQtaWYuaApAQCAtMjIsNiArMjIsOCBAQCBleHRlcm4gY3B1bWFza190IGNwdXBvb2xfZnJlZV9j
cHVzOwogI2RlZmluZSBTQ0hFRF9ERUZBVUxUX1JBVEVMSU1JVF9VUyAxMDAwCiBleHRlcm4gaW50
IHNjaGVkX3JhdGVsaW1pdF91czsKIAorLyogU2NoZWR1bGluZyByZXNvdXJjZSBtYXNrLiAqLwor
ZXh0ZXJuIGNvbnN0IGNwdW1hc2tfdCAqc2NoZWRfcmVzX21hc2s7CiAKIC8qCiAgKiBJbiBvcmRl
ciB0byBhbGxvdyBhIHNjaGVkdWxlciB0byByZW1hcCB0aGUgbG9jay0+Y3B1IG1hcHBpbmcsCkBA
IC01MjEsNiArNTIzLDcgQEAgc3RydWN0IGNwdXBvb2wKICAgICBpbnQgICAgICAgICAgICAgIGNw
dXBvb2xfaWQ7CiAgICAgdW5zaWduZWQgaW50ICAgICBuX2RvbTsKICAgICBjcHVtYXNrX3Zhcl90
ICAgIGNwdV92YWxpZDsgICAgICAvKiBhbGwgY3B1cyBhc3NpZ25lZCB0byBwb29sICovCisgICAg
Y3B1bWFza192YXJfdCAgICByZXNfdmFsaWQ7ICAgICAgLyogYWxsIHNjaGVkdWxpbmcgcmVzb3Vy
Y2VzIG9mIHBvb2wgKi8KICAgICBzdHJ1Y3QgY3B1cG9vbCAgICpuZXh0OwogICAgIHN0cnVjdCBz
Y2hlZHVsZXIgKnNjaGVkOwogICAgIGF0b21pY190ICAgICAgICAgcmVmY250OwpAQCAtNTM2LDcg
KzUzOSw3IEBAIHN0YXRpYyBpbmxpbmUgY3B1bWFza190ICpjcHVwb29sX2RvbWFpbl9jcHVtYXNr
KGNvbnN0IHN0cnVjdCBkb21haW4gKmQpCiAgICAgICogYmUgaW50ZXJlc3RlZCBpbiBjYWxsaW5n
IHRoaXMgZm9yIHRoZSBpZGxlIGRvbWFpbi4KICAgICAgKi8KICAgICBBU1NFUlQoZC0+Y3B1cG9v
bCAhPSBOVUxMKTsKLSAgICByZXR1cm4gZC0+Y3B1cG9vbC0+Y3B1X3ZhbGlkOworICAgIHJldHVy
biBkLT5jcHVwb29sLT5yZXNfdmFsaWQ7CiB9CiAKIC8qCi0tIAoyLjE2LjQKCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBs
aXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2pl
Y3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

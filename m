Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id BC9911443B2
	for <lists+xen-devel@lfdr.de>; Tue, 21 Jan 2020 18:54:55 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1itxfz-000586-25; Tue, 21 Jan 2020 17:50:55 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=ThP3=3K=intel.com=tamas.lengyel@srs-us1.protection.inumbo.net>)
 id 1itxfx-00056h-Bk
 for xen-devel@lists.xenproject.org; Tue, 21 Jan 2020 17:50:53 +0000
X-Inumbo-ID: 7ae41102-3c76-11ea-bb21-12813bfff9fa
Received: from mga04.intel.com (unknown [192.55.52.120])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 7ae41102-3c76-11ea-bb21-12813bfff9fa;
 Tue, 21 Jan 2020 17:50:17 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 21 Jan 2020 09:50:06 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,346,1574150400"; d="scan'208";a="228929198"
Received: from tlengyel-mobl2.amr.corp.intel.com (HELO localhost.localdomain)
 ([10.251.23.127])
 by orsmga006.jf.intel.com with ESMTP; 21 Jan 2020 09:50:05 -0800
From: Tamas K Lengyel <tamas.lengyel@intel.com>
To: xen-devel@lists.xenproject.org
Date: Tue, 21 Jan 2020 09:49:44 -0800
Message-Id: <a62c17b05d8c2de1d6c2a08874092d81ab86db04.1579628566.git.tamas.lengyel@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.1579628566.git.tamas.lengyel@intel.com>
References: <cover.1579628566.git.tamas.lengyel@intel.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v5 11/18] x86/mem_sharing: Replace
 MEM_SHARING_DEBUG with gdprintk
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Tamas K Lengyel <tamas@tklengyel.com>,
 Tamas K Lengyel <tamas.lengyel@intel.com>, Wei Liu <wl@xen.org>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VXNpbmcgWEVOTE9HX0VSUiBsZXZlbCBzaW5jZSB0aGlzIGlzIG9ubHkgdXNlZCBpbiBkZWJ1ZyBw
YXRocyAoaWUuIGl0J3MKZXhwZWN0ZWQgdGhlIHVzZXIgYWxyZWFkeSBoYXMgbG9nbHZsPWFsbCBz
ZXQpLiBBbHNvIHVzZSAlcGQgdG8gcHJpbnQgdGhlIGRvbWFpbgppZHMuCgpTaWduZWQtb2ZmLWJ5
OiBUYW1hcyBLIExlbmd5ZWwgPHRhbWFzLmxlbmd5ZWxAaW50ZWwuY29tPgotLS0KIHhlbi9hcmNo
L3g4Ni9tbS9tZW1fc2hhcmluZy5jIHwgODIgKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0t
LS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCA0MSBpbnNlcnRpb25zKCspLCA0MSBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvbW0vbWVtX3NoYXJpbmcuYyBiL3hlbi9hcmNoL3g4
Ni9tbS9tZW1fc2hhcmluZy5jCmluZGV4IGRhN2QxNDJhZDguLjIxY2U4ZDMyZjMgMTAwNjQ0Ci0t
LSBhL3hlbi9hcmNoL3g4Ni9tbS9tZW1fc2hhcmluZy5jCisrKyBiL3hlbi9hcmNoL3g4Ni9tbS9t
ZW1fc2hhcmluZy5jCkBAIC00OSw5ICs0OSw2IEBAIHR5cGVkZWYgc3RydWN0IHBnX2xvY2tfZGF0
YSB7CiAKIHN0YXRpYyBERUZJTkVfUEVSX0NQVShwZ19sb2NrX2RhdGFfdCwgX19wbGQpOwogCi0j
ZGVmaW5lIE1FTV9TSEFSSU5HX0RFQlVHKF9mLCBfYS4uLikgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgXAotICAgIGRlYnVndHJhY2VfcHJpbnRrKCJtZW1fc2hhcmluZ19kZWJ1Zzog
JXMoKTogIiBfZiwgX19mdW5jX18sICMjX2EpCi0KIC8qIFJldmVyc2UgbWFwIGRlZmluZXMgKi8K
ICNkZWZpbmUgUk1BUF9IQVNIVEFCX09SREVSICAwCiAjZGVmaW5lIFJNQVBfSEFTSFRBQl9TSVpF
ICAgXApAQCAtNDgyLDkgKzQ3OSw5IEBAIHN0YXRpYyBpbnQgYXVkaXQodm9pZCkKICAgICAgICAg
LyogSWYgd2UgY2FuJ3QgbG9jayBpdCwgaXQncyBkZWZpbml0ZWx5IG5vdCBhIHNoYXJlZCBwYWdl
ICovCiAgICAgICAgIGlmICggIW1lbV9zaGFyaW5nX3BhZ2VfbG9jayhwZykgKQogICAgICAgICB7
Ci0gICAgICAgICAgICBNRU1fU0hBUklOR19ERUJVRygKLSAgICAgICAgICAgICAgICAibWZuICVs
eCBpbiBhdWRpdCBsaXN0LCBidXQgY2Fubm90IGJlIGxvY2tlZCAoJWx4KSFcbiIsCi0gICAgICAg
ICAgICAgICAgbWZuX3gobWZuKSwgcGctPnUuaW51c2UudHlwZV9pbmZvKTsKKyAgICAgICAgICAg
IGdkcHJpbnRrKFhFTkxPR19FUlIsCisgICAgICAgICAgICAgICAgICAgICAibWZuICVseCBpbiBh
dWRpdCBsaXN0LCBidXQgY2Fubm90IGJlIGxvY2tlZCAoJWx4KSFcbiIsCisgICAgICAgICAgICAg
ICAgICAgICBtZm5feChtZm4pLCBwZy0+dS5pbnVzZS50eXBlX2luZm8pOwogICAgICAgICAgICAg
ZXJyb3JzKys7CiAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgfQpAQCAtNDkyLDkgKzQ4
OSw5IEBAIHN0YXRpYyBpbnQgYXVkaXQodm9pZCkKICAgICAgICAgLyogQ2hlY2sgaWYgdGhlIE1G
TiBoYXMgY29ycmVjdCB0eXBlLCBvd25lciBhbmQgaGFuZGxlLiAqLwogICAgICAgICBpZiAoIChw
Zy0+dS5pbnVzZS50eXBlX2luZm8gJiBQR1RfdHlwZV9tYXNrKSAhPSBQR1Rfc2hhcmVkX3BhZ2Ug
KQogICAgICAgICB7Ci0gICAgICAgICAgICBNRU1fU0hBUklOR19ERUJVRygKLSAgICAgICAgICAg
ICAgICAibWZuICVseCBpbiBhdWRpdCBsaXN0LCBidXQgbm90IFBHVF9zaGFyZWRfcGFnZSAoJWx4
KSFcbiIsCi0gICAgICAgICAgICAgICAgbWZuX3gobWZuKSwgcGctPnUuaW51c2UudHlwZV9pbmZv
ICYgUEdUX3R5cGVfbWFzayk7CisgICAgICAgICAgICBnZHByaW50ayhYRU5MT0dfRVJSLAorICAg
ICAgICAgICAgICAgICAgICAgIm1mbiAlbHggaW4gYXVkaXQgbGlzdCwgYnV0IG5vdCBQR1Rfc2hh
cmVkX3BhZ2UgKCVseCkhXG4iLAorICAgICAgICAgICAgICAgICAgICAgbWZuX3gobWZuKSwgcGct
PnUuaW51c2UudHlwZV9pbmZvICYgUEdUX3R5cGVfbWFzayk7CiAgICAgICAgICAgICBlcnJvcnMr
KzsKICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICB9CkBAIC01MDIsMjQgKzQ5OSwyNCBA
QCBzdGF0aWMgaW50IGF1ZGl0KHZvaWQpCiAgICAgICAgIC8qIENoZWNrIHRoZSBwYWdlIG93bmVy
LiAqLwogICAgICAgICBpZiAoIHBhZ2VfZ2V0X293bmVyKHBnKSAhPSBkb21fY293ICkKICAgICAg
ICAgewotICAgICAgICAgICAgTUVNX1NIQVJJTkdfREVCVUcoIm1mbiAlbHggc2hhcmVkLCBidXQg
d3Jvbmcgb3duZXIgJXBkIVxuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mbl94
KG1mbiksIHBhZ2VfZ2V0X293bmVyKHBnKSk7CisgICAgICAgICAgICBnZHByaW50ayhYRU5MT0df
RVJSLCAibWZuICVseCBzaGFyZWQsIGJ1dCB3cm9uZyBvd25lciAoJXBkKSFcbiIsCisgICAgICAg
ICAgICAgICAgICAgICBtZm5feChtZm4pLCBwYWdlX2dldF9vd25lcihwZykpOwogICAgICAgICAg
ICAgZXJyb3JzKys7CiAgICAgICAgIH0KIAogICAgICAgICAvKiBDaGVjayB0aGUgbTJwIGVudHJ5
ICovCiAgICAgICAgIGlmICggIVNIQVJFRF9NMlAoZ2V0X2dwZm5fZnJvbV9tZm4obWZuX3gobWZu
KSkpICkKICAgICAgICAgewotICAgICAgICAgICAgTUVNX1NIQVJJTkdfREVCVUcoIm1mbiAlbHgg
c2hhcmVkLCBidXQgd3JvbmcgbTJwIGVudHJ5ICglbHgpIVxuIiwKLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIG1mbl94KG1mbiksIGdldF9ncGZuX2Zyb21fbWZuKG1mbl94KG1mbikpKTsK
KyAgICAgICAgICAgIGdkcHJpbnRrKFhFTkxPR19FUlIsICJtZm4gJWx4IHNoYXJlZCwgYnV0IHdy
b25nIG0ycCBlbnRyeSAoJWx4KSFcbiIsCisgICAgICAgICAgICAgICAgICAgICBtZm5feChtZm4p
LCBnZXRfZ3Bmbl9mcm9tX21mbihtZm5feChtZm4pKSk7CiAgICAgICAgICAgICBlcnJvcnMrKzsK
ICAgICAgICAgfQogCiAgICAgICAgIC8qIENoZWNrIHdlIGhhdmUgYSBsaXN0ICovCiAgICAgICAg
IGlmICggKCFwZy0+c2hhcmluZykgfHwgcm1hcF9jb3VudChwZykgPT0gMCApCiAgICAgICAgIHsK
LSAgICAgICAgICAgIE1FTV9TSEFSSU5HX0RFQlVHKCJtZm4gJWx4IHNoYXJlZCwgYnV0IGVtcHR5
IGdmbiBsaXN0IVxuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mbl94KG1mbikp
OworICAgICAgICAgICAgZ2RwcmludGsoWEVOTE9HX0VSUiwgIm1mbiAlbHggc2hhcmVkLCBidXQg
ZW1wdHkgZ2ZuIGxpc3QhXG4iLAorICAgICAgICAgICAgICAgICAgICAgbWZuX3gobWZuKSk7CiAg
ICAgICAgICAgICBlcnJvcnMrKzsKICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICB9CkBA
IC01MzgsMjQgKzUzNSwyNiBAQCBzdGF0aWMgaW50IGF1ZGl0KHZvaWQpCiAgICAgICAgICAgICBk
ID0gZ2V0X2RvbWFpbl9ieV9pZChnLT5kb21haW4pOwogICAgICAgICAgICAgaWYgKCBkID09IE5V
TEwgKQogICAgICAgICAgICAgewotICAgICAgICAgICAgICAgIE1FTV9TSEFSSU5HX0RFQlVHKCJV
bmtub3duIGRvbTogJWh1LCBmb3IgUEZOPSVseCwgTUZOPSVseFxuIiwKLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBnLT5kb21haW4sIGctPmdmbiwgbWZuX3gobWZuKSk7CisgICAg
ICAgICAgICAgICAgZ2RwcmludGsoWEVOTE9HX0VSUiwKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAiVW5rbm93biBkb206ICVwZCwgZm9yIFBGTj0lbHgsIE1GTj0lbHhcbiIsCisgICAgICAgICAg
ICAgICAgICAgICAgICAgZCwgZy0+Z2ZuLCBtZm5feChtZm4pKTsKICAgICAgICAgICAgICAgICBl
cnJvcnMrKzsKICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgIH0KICAgICAg
ICAgICAgIG9fbWZuID0gZ2V0X2dmbl9xdWVyeV91bmxvY2tlZChkLCBnLT5nZm4sICZ0KTsKICAg
ICAgICAgICAgIGlmICggIW1mbl9lcShvX21mbiwgbWZuKSApCiAgICAgICAgICAgICB7Ci0gICAg
ICAgICAgICAgICAgTUVNX1NIQVJJTkdfREVCVUcoIkluY29ycmVjdCBQMk0gZm9yIGQ9JWh1LCBQ
Rk49JWx4LiIKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXhwZWN0aW5nIE1G
Tj0lbHgsIGdvdCAlbHhcbiIsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy0+
ZG9tYWluLCBnLT5nZm4sIG1mbl94KG1mbiksIG1mbl94KG9fbWZuKSk7CisgICAgICAgICAgICAg
ICAgZ2RwcmludGsoWEVOTE9HX0VSUiwgIkluY29ycmVjdCBQMk0gZm9yIGQ9JXBkLCBQRk49JWx4
LiIKKyAgICAgICAgICAgICAgICAgICAgICAgICAiRXhwZWN0aW5nIE1GTj0lbHgsIGdvdCAlbHhc
biIsCisgICAgICAgICAgICAgICAgICAgICAgICAgZCwgZy0+Z2ZuLCBtZm5feChtZm4pLCBtZm5f
eChvX21mbikpOwogICAgICAgICAgICAgICAgIGVycm9ycysrOwogICAgICAgICAgICAgfQogICAg
ICAgICAgICAgaWYgKCB0ICE9IHAybV9yYW1fc2hhcmVkICkKICAgICAgICAgICAgIHsKLSAgICAg
ICAgICAgICAgICBNRU1fU0hBUklOR19ERUJVRygiSW5jb3JyZWN0IFAyTSB0eXBlIGZvciBkPSVo
dSwgUEZOPSVseCBNRk49JWx4LiIKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAi
RXhwZWN0aW5nIHQ9JWQsIGdvdCAlZFxuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBnLT5kb21haW4sIGctPmdmbiwgbWZuX3gobWZuKSwgcDJtX3JhbV9zaGFyZWQsIHQpOwor
ICAgICAgICAgICAgICAgIGdkcHJpbnRrKFhFTkxPR19FUlIsCisgICAgICAgICAgICAgICAgICAg
ICAgICAgIkluY29ycmVjdCBQMk0gdHlwZSBmb3IgZD0lcGQsIFBGTj0lbHggTUZOPSVseC4iCisg
ICAgICAgICAgICAgICAgICAgICAgICAgIkV4cGVjdGluZyB0PSVkLCBnb3QgJWRcbiIsCisgICAg
ICAgICAgICAgICAgICAgICAgICAgZCwgZy0+Z2ZuLCBtZm5feChtZm4pLCBwMm1fcmFtX3NoYXJl
ZCwgdCk7CiAgICAgICAgICAgICAgICAgZXJyb3JzKys7CiAgICAgICAgICAgICB9CiAgICAgICAg
ICAgICBwdXRfZG9tYWluKGQpOwpAQCAtNTY0LDEwICs1NjMsMTAgQEAgc3RhdGljIGludCBhdWRp
dCh2b2lkKQogICAgICAgICAvKiBUaGUgdHlwZSBjb3VudCBoYXMgYW4gZXh0cmEgcmVmIGJlY2F1
c2Ugd2UgaGF2ZSBsb2NrZWQgdGhlIHBhZ2UgKi8KICAgICAgICAgaWYgKCAobnJfZ2ZucyArIDEp
ICE9IChwZy0+dS5pbnVzZS50eXBlX2luZm8gJiBQR1RfY291bnRfbWFzaykgKQogICAgICAgICB7
Ci0gICAgICAgICAgICBNRU1fU0hBUklOR19ERUJVRygiTWlzbWF0Y2hlZCBjb3VudHMgZm9yIE1G
Tj0lbHguIgotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5yX2dmbnMgaW4gbGlzdCAl
bHUsIGluIHR5cGVfaW5mbyAlbHhcbiIsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBt
Zm5feChtZm4pLCBucl9nZm5zLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBnLT51
LmludXNlLnR5cGVfaW5mbyAmIFBHVF9jb3VudF9tYXNrKSk7CisgICAgICAgICAgICBnZHByaW50
ayhYRU5MT0dfRVJSLCAiTWlzbWF0Y2hlZCBjb3VudHMgZm9yIE1GTj0lbHguIgorICAgICAgICAg
ICAgICAgICAgICAgIm5yX2dmbnMgaW4gbGlzdCAlbHUsIGluIHR5cGVfaW5mbyAlbHhcbiIsCisg
ICAgICAgICAgICAgICAgICAgICBtZm5feChtZm4pLCBucl9nZm5zLAorICAgICAgICAgICAgICAg
ICAgICAgKHBnLT51LmludXNlLnR5cGVfaW5mbyAmIFBHVF9jb3VudF9tYXNrKSk7CiAgICAgICAg
ICAgICBlcnJvcnMrKzsKICAgICAgICAgfQogCkBAIC01NzgsOCArNTc3LDggQEAgc3RhdGljIGlu
dCBhdWRpdCh2b2lkKQogCiAgICAgaWYgKCBjb3VudF9mb3VuZCAhPSBjb3VudF9leHBlY3RlZCAp
CiAgICAgewotICAgICAgICBNRU1fU0hBUklOR19ERUJVRygiRXhwZWN0ZWQgJWxkIHNoYXJlZCBt
Zm5zLCBmb3VuZCAlbGQuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRfZXhwZWN0
ZWQsIGNvdW50X2ZvdW5kKTsKKyAgICAgICAgZ2RwcmludGsoWEVOTE9HX0VSUiwgIkV4cGVjdGVk
ICVsZCBzaGFyZWQgbWZucywgZm91bmQgJWxkLiIsCisgICAgICAgICAgICAgICAgIGNvdW50X2V4
cGVjdGVkLCBjb3VudF9mb3VuZCk7CiAgICAgICAgIGVycm9ycysrOwogICAgIH0KIApAQCAtNzU3
LDEwICs3NTYsMTAgQEAgc3RhdGljIGludCBkZWJ1Z19tZm4obWZuX3QgbWZuKQogICAgICAgICBy
ZXR1cm4gLUVJTlZBTDsKICAgICB9CiAKLSAgICBNRU1fU0hBUklOR19ERUJVRygKLSAgICAgICAg
IkRlYnVnIHBhZ2U6IE1GTj0lbHggaXMgY2k9JWx4LCB0aT0lbHgsIG93bmVyPSVwZFxuIiwKLSAg
ICAgICAgbWZuX3gocGFnZV90b19tZm4ocGFnZSkpLCBwYWdlLT5jb3VudF9pbmZvLAotICAgICAg
ICBwYWdlLT51LmludXNlLnR5cGVfaW5mbywgcGFnZV9nZXRfb3duZXIocGFnZSkpOworICAgIGdk
cHJpbnRrKFhFTkxPR19FUlIsCisgICAgICAgICAgICAgIkRlYnVnIHBhZ2U6IE1GTj0lbHggaXMg
Y2k9JWx4LCB0aT0lbHgsIG93bmVyX2lkPSVkXG4iLAorICAgICAgICAgICAgIG1mbl94KHBhZ2Vf
dG9fbWZuKHBhZ2UpKSwgcGFnZS0+Y291bnRfaW5mbywKKyAgICAgICAgICAgICBwYWdlLT51Lmlu
dXNlLnR5cGVfaW5mbywgcGFnZV9nZXRfb3duZXIocGFnZSktPmRvbWFpbl9pZCk7CiAKICAgICAv
KiAtMSBiZWNhdXNlIHRoZSBwYWdlIGlzIGxvY2tlZCBhbmQgdGhhdCdzIGFuIGFkZGl0aW9uYWwg
dHlwZSByZWYgKi8KICAgICBudW1fcmVmcyA9ICgoaW50KSAocGFnZS0+dS5pbnVzZS50eXBlX2lu
Zm8gJiBQR1RfY291bnRfbWFzaykpIC0gMTsKQEAgLTc3Niw4ICs3NzUsOSBAQCBzdGF0aWMgaW50
IGRlYnVnX2dmbihzdHJ1Y3QgZG9tYWluICpkLCBnZm5fdCBnZm4pCiAKICAgICBtZm4gPSBnZXRf
Z2ZuX3F1ZXJ5KGQsIGdmbl94KGdmbiksICZwMm10KTsKIAotICAgIE1FTV9TSEFSSU5HX0RFQlVH
KCJEZWJ1ZyBmb3IgZG9tJWQsIGdmbj0lIiBQUklfZ2ZuICJcbiIsCi0gICAgICAgICAgICAgICAg
ICAgICAgZC0+ZG9tYWluX2lkLCBnZm5feChnZm4pKTsKKyAgICBnZHByaW50ayhYRU5MT0dfRVJS
LCAiRGVidWcgZm9yIGRvbSVkLCBnZm49JSIgUFJJX2dmbiAiXG4iLAorICAgICAgICAgICAgIGQt
PmRvbWFpbl9pZCwgZ2ZuX3goZ2ZuKSk7CisKICAgICBudW1fcmVmcyA9IGRlYnVnX21mbihtZm4p
OwogICAgIHB1dF9nZm4oZCwgZ2ZuX3goZ2ZuKSk7CiAKQEAgLTc5MywxMyArNzkzLDEzIEBAIHN0
YXRpYyBpbnQgZGVidWdfZ3JlZihzdHJ1Y3QgZG9tYWluICpkLCBncmFudF9yZWZfdCByZWYpCiAg
ICAgcmMgPSBtZW1fc2hhcmluZ19ncmVmX3RvX2dmbihkLT5ncmFudF90YWJsZSwgcmVmLCAmZ2Zu
LCAmc3RhdHVzKTsKICAgICBpZiAoIHJjICkKICAgICB7Ci0gICAgICAgIE1FTV9TSEFSSU5HX0RF
QlVHKCJBc2tlZCB0byBkZWJ1ZyBbZG9tPSVkLGdyZWY9JXVdOiBlcnJvciAlZC5cbiIsCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgIGQtPmRvbWFpbl9pZCwgcmVmLCByYyk7CisgICAgICAgIGdk
cHJpbnRrKFhFTkxPR19FUlIsICJBc2tlZCB0byBkZWJ1ZyBbZG9tPSVkLGdyZWY9JXVdOiBlcnJv
ciAlZC5cbiIsCisgICAgICAgICAgICAgICAgIGQtPmRvbWFpbl9pZCwgcmVmLCByYyk7CiAgICAg
ICAgIHJldHVybiByYzsKICAgICB9CiAKLSAgICBNRU1fU0hBUklOR19ERUJVRygiPT0+IEdyYW50
IFtkb209JWQscmVmPSVkXSwgc3RhdHVzPSV4LiAiLAotICAgICAgICAgICAgICAgICAgICAgIGQt
PmRvbWFpbl9pZCwgcmVmLCBzdGF0dXMpOworICAgIGdkcHJpbnRrKFhFTkxPR19FUlIsICI9PT4g
R3JhbnQgW2RvbT0lZCxyZWY9JWRdLCBzdGF0dXM9JXguICIsCisgICAgICAgICAgICAgZC0+ZG9t
YWluX2lkLCByZWYsIHN0YXR1cyk7CiAKICAgICByZXR1cm4gZGVidWdfZ2ZuKGQsIGdmbik7CiB9
CkBAIC0xMjc0LDggKzEyNzQsOCBAQCBpbnQgX19tZW1fc2hhcmluZ191bnNoYXJlX3BhZ2Uoc3Ry
dWN0IGRvbWFpbiAqZCwKICBwcml2YXRlX3BhZ2VfZm91bmQ6CiAgICAgaWYgKCBwMm1fY2hhbmdl
X3R5cGVfb25lKGQsIGdmbiwgcDJtX3JhbV9zaGFyZWQsIHAybV9yYW1fcncpICkKICAgICB7Ci0g
ICAgICAgIGdkcHJpbnRrKFhFTkxPR19FUlIsICJDb3VsZCBub3QgY2hhbmdlIHAybSB0eXBlIGQg
JWh1IGdmbiAlbHguXG4iLAotICAgICAgICAgICAgICAgICBkLT5kb21haW5faWQsIGdmbik7Cisg
ICAgICAgIGdkcHJpbnRrKFhFTkxPR19FUlIsICJDb3VsZCBub3QgY2hhbmdlIHAybSB0eXBlIGQg
JXBkIGdmbiAlbHguXG4iLAorICAgICAgICAgICAgICAgICBkLCBnZm4pOwogICAgICAgICBCVUco
KTsKICAgICB9CiAKLS0gCjIuMjAuMQoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhl
bnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5m
by94ZW4tZGV2ZWw=

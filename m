Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 56E5BEB399
	for <lists+xen-devel@lfdr.de>; Thu, 31 Oct 2019 16:12:45 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iQC5O-0006xK-4t; Thu, 31 Oct 2019 15:10:06 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=msrb=YY=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1iQC5M-0006wA-Bo
 for xen-devel@lists.xenproject.org; Thu, 31 Oct 2019 15:10:04 +0000
X-Inumbo-ID: 7de919de-fbf0-11e9-a531-bc764e2007e4
Received: from foss.arm.com (unknown [217.140.110.172])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTP
 id 7de919de-fbf0-11e9-a531-bc764e2007e4;
 Thu, 31 Oct 2019 15:09:53 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 38BAA7CD;
 Thu, 31 Oct 2019 08:09:53 -0700 (PDT)
Received: from e108454-lin.cambridge.arm.com (unknown [10.1.196.50])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id EF0283F71E;
 Thu, 31 Oct 2019 08:09:51 -0700 (PDT)
From: Julien Grall <julien.grall@arm.com>
To: xen-devel@lists.xenproject.org
Date: Thu, 31 Oct 2019 15:09:19 +0000
Message-Id: <20191031150922.22938-17-julien.grall@arm.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20191031150922.22938-1-julien.grall@arm.com>
References: <20191031150922.22938-1-julien.grall@arm.com>
Subject: [Xen-devel] [PATCH for-4.13 v4 16/19] xen/arm: alternative: add
 auto-nop infrastructure
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: jgross@suse.com, Mark Rutland <mark.rutland@arm.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Will Deacon <will.deacon@arm.com>, Julien Grall <julien.grall@arm.com>,
 Volodymyr Babchuk <volodymyr_babchuk@epam.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogTWFyayBSdXRsYW5kIDxtYXJrLnJ1dGxhbmRAYXJtLmNvbT4KCkluIHNvbWUgY2FzZXMs
IG9uZSBzaWRlIG9mIGFuIGFsdGVybmF0aXZlIHNlcXVlbmNlIGlzIHNpbXBseSBhIG51bWJlciBv
ZgpOT1BzIHVzZWQgdG8gYmFsYW5jZSB0aGUgb3RoZXIgc2lkZS4gS2VlcGluZyB0cmFjayBvZiB0
aGlzIG1hbnVhbGx5IGlzCnRlZGlvdXMsIGFuZCB0aGUgcHJlc2VuY2Ugb2YgbGFyZ2UgY2hhaW5z
IG9mIE5PUHMgbWFrZXMgdGhlIGNvZGUgbW9yZQpwYWluZnVsIHRvIHJlYWQgdGhhbiBuZWNlc3Nh
cnkuCgpUbyBhbWVsaW9yYXRlIG1hdHRlcnMsIHRoaXMgcGF0Y2ggYWRkcyBhIG5ldyBhbHRlcm5h
dGl2ZV9lbHNlX25vcF9lbmRpZiwKd2hpY2ggYXV0b21hdGljYWxseSBiYWxhbmNlcyBhbiBhbHRl
cm5hdGl2ZSBzZXF1ZW5jZSB3aXRoIGEgdHJpdmlhbCBOT1AKc2xlZC4KCkluIG1hbnkgY2FzZXMs
IHdlIHdvdWxkIGxpa2UgYSBOT1Atc2xlZCBpbiB0aGUgZGVmYXVsdCBjYXNlLCBhbmQKaW5zdHJ1
Y3Rpb25zIHBhdGNoZWQgaW4gaW4gdGhlIHByZXNlbmNlIG9mIGEgZmVhdHVyZS4gVG8gZW5hYmxl
IHRoZSBOT1BzCnRvIGJlIGdlbmVyYXRlZCBhdXRvbWF0aWNhbGx5IGZvciB0aGlzIGNhc2UsIHRo
aXMgcGF0Y2ggYWxzbyBhZGRzIGEgbmV3CmFsdGVybmF0aXZlX2lmLCBhbmQgdXBkYXRlcyBhbHRl
cm5hdGl2ZV9lbHNlIGFuZCBhbHRlcm5hdGl2ZV9lbmRpZiB0bwp3b3JrIHdpdGggZWl0aGVyIGFs
dGVybmF0aXZlX2lmIG9yIGFsdGVybmF0aXZlX2VuZGlmLgoKVGhlIGFsdGVybmF0aXZlIGluZnJh
c3RydWN0dXJlIHdhcyBvcmlnaW5hbGx5IHBvcnRlZCBmcm9tIExpbnV4LiBTbyB0aGlzCmlzIHBy
ZXR0eSBtdWNoIGEgc3RyYWlnaHQgYmFja3BvcnQgZnJvbSBjb21taXQgNzkyZDQ3Mzc5ZjRkICJh
cm02NDoKYWx0ZXJuYXRpdmU6IGFkZCBhdXRvLW5vcCBpbmZyYXN0cnVjdHVyZSIuIFRoZSBvbmx5
IGRpZmZlcmVuY2UgaXMgdGhlCm5vcHMgbWFjcm8gYWRkZWQgYXMgbm90IHlldCBleGlzdGluZyBp
biBYZW4uCgpTaWduZWQtb2ZmLWJ5OiBNYXJrIFJ1dGxhbmQgPG1hcmsucnV0bGFuZEBhcm0uY29t
Pgpbd2lsbDogdXNlIG5ldyBub3BzIG1hY3JvIHRvIGdlbmVyYXRlIG5vcCBzZXF1ZW5jZXNdClNp
Z25lZC1vZmYtYnk6IFdpbGwgRGVhY29uIDx3aWxsLmRlYWNvbkBhcm0uY29tPgpbanVsaWVuOiBB
ZGQgbm9wcyBhbmQgcG9ydCB0byBYZW5dClNpZ25lZC1vZmYtYnk6IEp1bGllbiBHcmFsbCA8anVs
aWVuLmdyYWxsQGFybS5jb20+ClJldmlld2VkLWJ5OiBWb2xvZHlteXIgQmFiY2h1ayA8dm9sb2R5
bXlyX2JhYmNodWtAZXBhbS5jb20+CkFja2VkLWJ5OiBTdGVmYW5vIFN0YWJlbGxpbmkgPHNzdGFi
ZWxsaW5pQGtlcm5lbC5vcmc+Ci0tLQogICAgQ2hhbmdlcyBpbiB2MzoKICAgICAgICAtIEFkZCBt
aXNzaW5nIGluY2x1ZGUgdG8gZ2V0IGF1dG8tbm9wIGluZnJhc3RydWN0dXJlIGJ1aWxkIG9uCiAg
ICAgICAgICBhcm0zMi4KCiAgICBDaGFuZ2VzIGluIHYyOgogICAgICAgIC0gQWRkIFZvbG9keW15
cidzIHJldmlld2VkLWJ5CiAgICAgICAgLSBBZGQgU3RlZmFubydzIGFja2VkLWJ5Ci0tLQogeGVu
L2luY2x1ZGUvYXNtLWFybS9hbHRlcm5hdGl2ZS5oIHwgNzEgKysrKysrKysrKysrKysrKysrKysr
KysrKysrKystLS0tLS0tLS0tCiB4ZW4vaW5jbHVkZS9hc20tYXJtL21hY3Jvcy5oICAgICAgfCAg
NyArKysrCiAyIGZpbGVzIGNoYW5nZWQsIDYxIGluc2VydGlvbnMoKyksIDE3IGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL2FzbS1hcm0vYWx0ZXJuYXRpdmUuaCBiL3hlbi9p
bmNsdWRlL2FzbS1hcm0vYWx0ZXJuYXRpdmUuaAppbmRleCAyODMwYTZkYTJkLi45MmU4ODhhZmY4
IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20tYXJtL2FsdGVybmF0aXZlLmgKKysrIGIveGVu
L2luY2x1ZGUvYXNtLWFybS9hbHRlcm5hdGl2ZS5oCkBAIC0yLDYgKzIsNyBAQAogI2RlZmluZSBf
X0FTTV9BTFRFUk5BVElWRV9ICiAKICNpbmNsdWRlIDxhc20vY3B1ZmVhdHVyZS5oPgorI2luY2x1
ZGUgPGFzbS9pbnNuLmg+CiAKICNkZWZpbmUgQVJNX0NCX1BBVENIIEFSTV9OQ0FQUwogCkBAIC04
Nyw2ICs4OCw3IEBAIGludCBhcHBseV9hbHRlcm5hdGl2ZXMoY29uc3Qgc3RydWN0IGFsdF9pbnN0
ciAqc3RhcnQsIGNvbnN0IHN0cnVjdCBhbHRfaW5zdHIgKmVuCiAjZWxzZQogCiAjaW5jbHVkZSA8
YXNtL2FzbV9kZWZucy5oPgorI2luY2x1ZGUgPGFzbS9tYWNyb3MuaD4KIAogLm1hY3JvIGFsdGlu
c3RydWN0aW9uX2VudHJ5IG9yaWdfb2Zmc2V0IGFsdF9vZmZzZXQgZmVhdHVyZSBvcmlnX2xlbiBh
bHRfbGVuCiAJLndvcmQgXG9yaWdfb2Zmc2V0IC0gLgpAQCAtMTExLDM0ICsxMTMsNTUgQEAgaW50
IGFwcGx5X2FsdGVybmF0aXZlcyhjb25zdCBzdHJ1Y3QgYWx0X2luc3RyICpzdGFydCwgY29uc3Qg
c3RydWN0IGFsdF9pbnN0ciAqZW4KIC5lbmRtCiAKIC8qCi0gKiBCZWdpbiBhbiBhbHRlcm5hdGl2
ZSBjb2RlIHNlcXVlbmNlLgorICogQWx0ZXJuYXRpdmUgc2VxdWVuY2VzCisgKgorICogVGhlIGNv
ZGUgZm9yIHRoZSBjYXNlIHdoZXJlIHRoZSBjYXBhYmlsaXR5IGlzIG5vdCBwcmVzZW50IHdpbGwg
YmUKKyAqIGFzc2VtYmxlZCBhbmQgbGlua2VkIGFzIG5vcm1hbC4gVGhlcmUgYXJlIG5vIHJlc3Ry
aWN0aW9ucyBvbiB0aGlzCisgKiBjb2RlLgorICoKKyAqIFRoZSBjb2RlIGZvciB0aGUgY2FzZSB3
aGVyZSB0aGUgY2FwYWJpbGl0eSBpcyBwcmVzZW50IHdpbGwgYmUKKyAqIGFzc2VtYmxlZCBpbnRv
IGEgc3BlY2lhbCBzZWN0aW9uIHRvIGJlIHVzZWQgZm9yIGR5bmFtaWMgcGF0Y2hpbmcuCisgKiBD
b2RlIGZvciB0aGF0IGNhc2UgbXVzdDoKKyAqCisgKiAxLiBCZSBleGFjdGx5IHRoZSBzYW1lIGxl
bmd0aCAoaW4gYnl0ZXMpIGFzIHRoZSBkZWZhdWx0IGNvZGUKKyAqICAgIHNlcXVlbmNlLgogICoK
LSAqIFRoZSBjb2RlIHRoYXQgZm9sbG93cyB0aGlzIG1hY3JvIHdpbGwgYmUgYXNzZW1ibGVkIGFu
ZCBsaW5rZWQgYXMKLSAqIG5vcm1hbC4gVGhlcmUgYXJlIG5vIHJlc3RyaWN0aW9ucyBvbiB0aGlz
IGNvZGUuCisgKiAyLiBOb3QgY29udGFpbiBhIGJyYW5jaCB0YXJnZXQgdGhhdCBpcyB1c2VkIG91
dHNpZGUgb2YgdGhlCisgKiAgICBhbHRlcm5hdGl2ZSBzZXF1ZW5jZSBpdCBpcyBkZWZpbmVkIGlu
IChicmFuY2hlcyBpbnRvIGFuCisgKiAgICBhbHRlcm5hdGl2ZSBzZXF1ZW5jZSBhcmUgbm90IGZp
eGVkIHVwKS4KKyAqLworCisvKgorICogQmVnaW4gYW4gYWx0ZXJuYXRpdmUgY29kZSBzZXF1ZW5j
ZS4KICAqLwogLm1hY3JvIGFsdGVybmF0aXZlX2lmX25vdCBjYXAKKwkuc2V0IC5MYXNtX2FsdF9t
b2RlLCAwCiAJLnB1c2hzZWN0aW9uIC5hbHRpbnN0cnVjdGlvbnMsICJhIgogCWFsdGluc3RydWN0
aW9uX2VudHJ5IDY2MWYsIDY2M2YsIFxjYXAsIDY2MmYtNjYxZiwgNjY0Zi02NjNmCiAJLnBvcHNl
Y3Rpb24KIDY2MToKIC5lbmRtCiAKKy5tYWNybyBhbHRlcm5hdGl2ZV9pZiBjYXAKKwkuc2V0IC5M
YXNtX2FsdF9tb2RlLCAxCisJLnB1c2hzZWN0aW9uIC5hbHRpbnN0cnVjdGlvbnMsICJhIgorCWFs
dGluc3RydWN0aW9uX2VudHJ5IDY2M2YsIDY2MWYsIFxjYXAsIDY2NGYtNjYzZiwgNjYyZi02NjFm
CisJLnBvcHNlY3Rpb24KKwkucHVzaHNlY3Rpb24gLmFsdGluc3RyX3JlcGxhY2VtZW50LCAiYXgi
CisJLmFsaWduIDIJLyogU28gR0FTIGtub3dzIGxhYmVsIDY2MSBpcyBzdWl0YWJseSBhbGlnbmVk
ICovCis2NjE6CisuZW5kbQorCiAvKgotICogUHJvdmlkZSB0aGUgYWx0ZXJuYXRpdmUgY29kZSBz
ZXF1ZW5jZS4KLSAqCi0gKiBUaGUgY29kZSB0aGF0IGZvbGxvd3MgdGhpcyBtYWNybyBpcyBhc3Nl
bWJsZWQgaW50byBhIHNwZWNpYWwKLSAqIHNlY3Rpb24gdG8gYmUgdXNlZCBmb3IgZHluYW1pYyBw
YXRjaGluZy4gQ29kZSB0aGF0IGZvbGxvd3MgdGhpcwotICogbWFjcm8gbXVzdDoKLSAqCi0gKiAx
LiBCZSBleGFjdGx5IHRoZSBzYW1lIGxlbmd0aCAoaW4gYnl0ZXMpIGFzIHRoZSBkZWZhdWx0IGNv
ZGUKLSAqICAgIHNlcXVlbmNlLgotICoKLSAqIDIuIE5vdCBjb250YWluIGEgYnJhbmNoIHRhcmdl
dCB0aGF0IGlzIHVzZWQgb3V0c2lkZSBvZiB0aGUKLSAqICAgIGFsdGVybmF0aXZlIHNlcXVlbmNl
IGl0IGlzIGRlZmluZWQgaW4gKGJyYW5jaGVzIGludG8gYW4KLSAqICAgIGFsdGVybmF0aXZlIHNl
cXVlbmNlIGFyZSBub3QgZml4ZWQgdXApLgorICogUHJvdmlkZSB0aGUgb3RoZXIgaGFsZiBvZiB0
aGUgYWx0ZXJuYXRpdmUgY29kZSBzZXF1ZW5jZS4KICAqLwogLm1hY3JvIGFsdGVybmF0aXZlX2Vs
c2UKLTY2MjoJLnB1c2hzZWN0aW9uIC5hbHRpbnN0cl9yZXBsYWNlbWVudCwgImF4IgorNjYyOgor
CS5pZiAuTGFzbV9hbHRfbW9kZT09MAorCS5wdXNoc2VjdGlvbiAuYWx0aW5zdHJfcmVwbGFjZW1l
bnQsICJheCIKKwkuZWxzZQorCS5wb3BzZWN0aW9uCisJLmVuZGlmCiA2NjM6CiAuZW5kbQogCkBA
IC0xNTQsMTIgKzE3NywyNiBAQCBpbnQgYXBwbHlfYWx0ZXJuYXRpdmVzKGNvbnN0IHN0cnVjdCBh
bHRfaW5zdHIgKnN0YXJ0LCBjb25zdCBzdHJ1Y3QgYWx0X2luc3RyICplbgogICogQ29tcGxldGUg
YW4gYWx0ZXJuYXRpdmUgY29kZSBzZXF1ZW5jZS4KICAqLwogLm1hY3JvIGFsdGVybmF0aXZlX2Vu
ZGlmCi02NjQ6CS5wb3BzZWN0aW9uCis2NjQ6CisJLmlmIC5MYXNtX2FsdF9tb2RlPT0wCisJLnBv
cHNlY3Rpb24KKwkuZW5kaWYKIAkub3JnCS4gLSAoNjY0Yi02NjNiKSArICg2NjJiLTY2MWIpCiAJ
Lm9yZwkuIC0gKDY2MmItNjYxYikgKyAoNjY0Yi02NjNiKQogLmVuZG0KIAogLyoKKyAqIFByb3Zp
ZGVzIGEgdHJpdmlhbCBhbHRlcm5hdGl2ZSBvciBkZWZhdWx0IHNlcXVlbmNlIGNvbnNpc3Rpbmcg
c29sZWx5CisgKiBvZiBOT1BzLiBUaGUgbnVtYmVyIG9mIE5PUHMgaXMgY2hvc2VuIGF1dG9tYXRp
Y2FsbHkgdG8gbWF0Y2ggdGhlCisgKiBwcmV2aW91cyBjYXNlLgorICovCisubWFjcm8gYWx0ZXJu
YXRpdmVfZWxzZV9ub3BfZW5kaWYKK2FsdGVybmF0aXZlX2Vsc2UKKwlub3BzCSg2NjJiLTY2MWIp
IC8gQVJDSF9QQVRDSF9JTlNOX1NJWkUKK2FsdGVybmF0aXZlX2VuZGlmCisuZW5kbQorCisvKgog
ICogQ2FsbGJhY2stYmFzZWQgYWx0ZXJuYXRpdmUgZXBpbG9ndWUKICAqLwogLm1hY3JvIGFsdGVy
bmF0aXZlX2NiX2VuZApkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLWFybS9tYWNyb3MuaCBi
L3hlbi9pbmNsdWRlL2FzbS1hcm0vbWFjcm9zLmgKaW5kZXggMWQ0YmI0MWQxNS4uOTFlYTM1MDVl
NCAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUvYXNtLWFybS9tYWNyb3MuaAorKysgYi94ZW4vaW5j
bHVkZS9hc20tYXJtL21hY3Jvcy5oCkBAIC0xMyw0ICsxMywxMSBAQAogIyBlcnJvciAidW5rbm93
biBBUk0gdmFyaWFudCIKICNlbmRpZgogCisgICAgLyogTk9QIHNlcXVlbmNlICAqLworICAgIC5t
YWNybyBub3BzLCBudW0KKyAgICAucmVwdCAgIFxudW0KKyAgICBub3AKKyAgICAuZW5kcgorICAg
IC5lbmRtCisKICNlbmRpZiAvKiBfX0FTTV9BUk1fTUFDUk9TX0ggKi8KLS0gCjIuMTEuMAoKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBt
YWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMu
eGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

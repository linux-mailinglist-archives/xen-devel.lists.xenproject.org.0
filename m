Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 5A693109C06
	for <lists+xen-devel@lfdr.de>; Tue, 26 Nov 2019 11:11:53 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iZXmc-0007la-DW; Tue, 26 Nov 2019 10:09:22 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=XQNV=ZS=amazon.de=prvs=226749d31=wipawel@srs-us1.protection.inumbo.net>)
 id 1iZXmb-0007kv-8H
 for xen-devel@lists.xenproject.org; Tue, 26 Nov 2019 10:09:21 +0000
X-Inumbo-ID: cf10624d-1034-11ea-a39d-12813bfff9fa
Received: from smtp-fw-9101.amazon.com (unknown [207.171.184.25])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id cf10624d-1034-11ea-a39d-12813bfff9fa;
 Tue, 26 Nov 2019 10:09:19 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.de; i=@amazon.de; q=dns/txt; s=amazon201209;
 t=1574762959; x=1606298959;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=2Nz6XePNVDPChadPnrzejSnL93SctnLtn0dX0m8jR2k=;
 b=GvVwips0gIWMX9YYdnmxM3bSXINLcStCCmL6Q3Jphu8C0HA5pK7GmtLP
 lHiJRpv7zs+mQAvsmASa5FBuj6rNW7HUCkkGCv+SnyfGKJkp+WGy7OWNI
 36UruFgJWUNRR7rVZTcPlAcVke/h8x69Pluue2UHFFEdXYRlLyUZFG2Pm 0=;
IronPort-SDR: uS/JxkjB8vbj7oR9tFYYtUrMXvv/TETIyg3jDd2wcwz6YL2Y0IHTdrAv+LC7MDTX21i2YlQowD
 Qx1ric7ZKtdQ==
X-IronPort-AV: E=Sophos;i="5.69,245,1571702400"; 
   d="scan'208";a="1512237"
Received: from sea32-co-svc-lb4-vlan3.sea.corp.amazon.com (HELO
 email-inbound-relay-1e-57e1d233.us-east-1.amazon.com) ([10.47.23.38])
 by smtp-border-fw-out-9101.sea19.amazon.com with ESMTP;
 26 Nov 2019 10:08:56 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan3.iad.amazon.com [10.40.159.166])
 by email-inbound-relay-1e-57e1d233.us-east-1.amazon.com (Postfix) with ESMTPS
 id 64695141A7C; Tue, 26 Nov 2019 10:08:55 +0000 (UTC)
Received: from EX13D03EUC004.ant.amazon.com (10.43.164.33) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.243) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Tue, 26 Nov 2019 10:08:40 +0000
Received: from EX13MTAUEB001.ant.amazon.com (10.43.60.96) by
 EX13D03EUC004.ant.amazon.com (10.43.164.33) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Tue, 26 Nov 2019 10:08:39 +0000
Received: from dev-dsk-wipawel-1a-0c4e6d58.eu-west-1.amazon.com (10.4.134.33)
 by mail-relay.amazon.com (10.43.60.129) with Microsoft SMTP Server id
 15.0.1367.3 via Frontend Transport; Tue, 26 Nov 2019 10:08:38 +0000
From: Pawel Wieczorkiewicz <wipawel@amazon.de>
To: <xen-devel@lists.xenproject.org>
Date: Tue, 26 Nov 2019 10:08:01 +0000
Message-ID: <20191126100801.124844-13-wipawel@amazon.de>
X-Mailer: git-send-email 2.16.5
In-Reply-To: <20191126100801.124844-1-wipawel@amazon.de>
References: <20191126100801.124844-1-wipawel@amazon.de>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH v6 12/12] livepatch: Add python bindings for
 livepatch operations
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Pawel Wieczorkiewicz <wipawel@amazon.de>,
 Ian Jackson <ian.jackson@eu.citrix.com>, mpohlack@amazon.com,
 Wei Liu <wl@xen.org>, =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RXh0ZW5kIHRoZSBYQyBweXRob24gYmluZGluZ3MgbGlicmFyeSB0byBzdXBwb3J0IGFsc28gYWxs
IGNvbW1vbgpsaXZlcGF0Y2ggb3BlcmF0aW9ucyBhbmQgYWN0aW9ucy4KCkFkZCB0aGUgcHl0aG9u
IGJpbmRpbmdzIGZvciB0aGUgZm9sbG93aW5nIG9wZXJhdGlvbnM6Ci0gc3RhdHVzIChweXhjX2xp
dmVwYXRjaF9zdGF0dXMpOgogIFJlcXVpcmVzIGEgcGF5bG9hZCBuYW1lIGFzIGFuIGlucHV0Lgog
IFJldHVybnMgYSBzdGF0dXMgZGljdCBjb250YWluaW5nIGEgc3RhdGUgc3RyaW5nIGFuZCBhIHJl
dHVybiBjb2RlCiAgaW50ZWdlci4KLSBhY3Rpb24gKHB5eGNfbGl2ZXBhdGNoX2FjdGlvbik6CiAg
UmVxdWlyZXMgYSBwYXlsb2FkIG5hbWUgYW5kIGFuIGFjdGlvbiBpZCBhcyBhbiBpbnB1dC4gVGlt
ZW91dCBhbmQKICBmbGFncyBhcmUgb3B0aW9uYWwgcGFyYW1ldGVycy4KICBSZXR1cm5zIE5vbmUg
b3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi4KLSB1cGxvYWQgKHB5eGNfbGl2ZXBhdGNoX3VwbG9hZCk6
CiAgUmVxdWlyZXMgYSBwYXlsb2FkIG5hbWUgYW5kIGEgbW9kdWxlJ3MgZmlsZW5hbWUgYXMgYW4g
aW5wdXQuCiAgUmV0dXJucyBOb25lIG9yIHRocm93cyBhbiBleGNlcHRpb24uCi0gbGlzdCAocHl4
Y19saXZlcGF0Y2hfbGlzdCk6CiAgVGFrZXMgbm8gcGFyYW1ldGVycy4KICBSZXR1cm5zIGEgbGlz
dCBvZiBkaWN0cyBjb250YWluaW5nIGVhY2ggcGF5bG9hZCdzOgogICogbmFtZSBhcyBhIHN0cmlu
ZwogICogc3RhdGUgYXMgYSBzdHJpbmcKICAqIHJldHVybiBjb2RlIGFzIGFuIGludGVnZXIKICAq
IGxpc3Qgb2YgbWV0YWRhdGEga2V5PXZhbHVlIHN0cmluZ3MKCkVhY2ggZnVuY3Rpb25zIHRocm93
cyBhbiBleGNlcHRpb24gZXJyb3IgYmFzZWQgb24gdGhlIGVycm5vIHZhbHVlCnJlY2VpdmVkIGZy
b20gaXRzIGNvcnJlc3BvbmRpbmcgbGlieGMgZnVuY3Rpb24gY2FsbC4KClNpZ25lZC1vZmYtYnk6
IFBhd2VsIFdpZWN6b3JraWV3aWN6IDx3aXBhd2VsQGFtYXpvbi5kZT4KUmV2aWV3ZWQtYnk6IE1h
cnRpbiBNYXplaW4gPGFtYXplaW5AYW1hem9uLmRlPgpSZXZpZXdlZC1ieTogQW5kcmEtSXJpbmEg
UGFyYXNjaGl2IDxhbmRyYXByc0BhbWF6b24uY29tPgpSZXZpZXdlZC1ieTogTGVvbmFyZCBGb2Vy
c3RlciA8Zm9lcnNsZW9AYW1hem9uLmRlPgpSZXZpZXdlZC1ieTogTm9yYmVydCBNYW50aGV5IDxu
bWFudGhleUBhbWF6b24uZGU+CkFja2VkLWJ5OiBNYXJlayBNYXJjenlrb3dza2ktR8OzcmVja2kg
PG1hcm1hcmVrQGludmlzaWJsZXRoaW5nc2xhYi5jb20+ClJldmlld2VkLWJ5OiBSb3NzIExhZ2Vy
d2FsbCA8cm9zcy5sYWdlcndhbGxAY2l0cml4LmNvbT4KLS0tCkNoYW5nZWQgc2luY2UgdjU6CiAg
KiBtaW5vciBmaXhlcyByZXF1ZXN0ZWQgYnkgUm9zcwoKQ2hhbmdlZCBzaW5jZSB2NDoKICAqIGNo
YW5nZWQgZmxhZ3MgZmllbGQgdHlwZSBmcm9tIHVpbnQ2NF90IHRvIHVpbnQzMl90CiAgKiBmaXhl
ZCBsZWFraW5nIGZkIGluIHB5eGNfbGl2ZXBhdGNoX3VwbG9hZCgpCgpDaGFuZ2VkIHNpbmNlIHYz
OgogICogcmV0dXJuIE5vbmUgaW5zdGVhZCBvZiBpbnRlZ2VyIDAgZnJvbSBweXhjX2xpdmVwYXRj
aF9hY3Rpb24oKQogICAgYW5kIHB5eGNfbGl2ZXBhdGNoX3VwbG9hZCgpCiAgKiB1c2UgZnN0YXQo
KSBpbnN0ZWFkIG9mIHN0YXQoKQogICogc2ltcGxpZnkgZXJyb3IgY29uZGl0aW9uIGhhbmRsaW5n
IGNvZGUgZm9yIHB5eGNfbGl2ZXBhdGNoX3VwbG9hZAogICAgYW5kIGFsc28gc2F2ZSBhbmQgcmVz
dG9yZSBlcnJubyB2YWx1ZQogICogY2hlY2sgZG9uZSBhbmQgbGVmdCB2YWx1ZXMgdG8gaGFuZGxl
IGVycm9ycyBpbgogICAgcHl4Y19saXZlcGF0Y2hfbGlzdCgpCiAgKiB1c2UgUHlMaXN0X1NFVF9J
VEVNKCkgdG8gYXZvaWQgdGhlIG5lZWQgZm9yIFB5REVDUkVGCgpDaGFuZ2VkIHNpbmNlIHYxOgog
ICogY2hhbmdlZCBQeUxpc3RfQXBwZW5kKCkgd2l0aCBQeUxpc3RfU2V0SXRlbSgpIGFzIHJlcXVl
c3RlZCBieQogICAgTWFyZWsKLS0tCiB0b29scy9weXRob24veGVuL2xvd2xldmVsL3hjL3hjLmMg
fCAyNjggKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIDEgZmlsZSBjaGFu
Z2VkLCAyNjggaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL3Rvb2xzL3B5dGhvbi94ZW4vbG93
bGV2ZWwveGMveGMuYyBiL3Rvb2xzL3B5dGhvbi94ZW4vbG93bGV2ZWwveGMveGMuYwppbmRleCA0
NGQzNjA2MTQxLi5jYTI0OTE1YWE2IDEwMDY0NAotLS0gYS90b29scy9weXRob24veGVuL2xvd2xl
dmVsL3hjL3hjLmMKKysrIGIvdG9vbHMvcHl0aG9uL3hlbi9sb3dsZXZlbC94Yy94Yy5jCkBAIC0x
OTc5LDYgKzE5NzksMjI1IEBAIHN0YXRpYyBQeU9iamVjdCAqcHlmbGFza19hY2Nlc3MoUHlPYmpl
Y3QgKnNlbGYsIFB5T2JqZWN0ICphcmdzLAogICAgIHJldHVybiBQeV9CdWlsZFZhbHVlKCJpIixy
ZXQpOwogfQogCitzdGF0aWMgUHlPYmplY3QgKnB5eGNfbGl2ZXBhdGNoX3N0YXR1cyhYY09iamVj
dCAqc2VsZiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFB5T2JqZWN0
ICphcmdzLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHlPYmplY3Qg
Kmt3ZHMpCit7CisgICAgeGVuX2xpdmVwYXRjaF9zdGF0dXNfdCBzdGF0dXM7CisgICAgUHlPYmpl
Y3QgKmluZm9fZGljdCA9IE5VTEw7CisgICAgY2hhciAqbmFtZTsKKyAgICBpbnQgcmM7CisKKyAg
ICBzdGF0aWMgY2hhciAqa3dkX2xpc3RbXSA9IHsgIm5hbWUiLCBOVUxMIH07CisKKyAgICBpZiAo
ICFQeUFyZ19QYXJzZVR1cGxlQW5kS2V5d29yZHMoYXJncywga3dkcywgInMiLCBrd2RfbGlzdCwg
Jm5hbWUpICkKKyAgICAgICAgZ290byBlcnJvcjsKKworICAgIHJjID0geGNfbGl2ZXBhdGNoX2dl
dChzZWxmLT54Y19oYW5kbGUsIG5hbWUsICZzdGF0dXMpOworICAgIGlmICggcmMgKQorICAgICAg
ICBnb3RvIGVycm9yOworCisgICAgaW5mb19kaWN0ID0gUHlfQnVpbGRWYWx1ZSgKKyAgICAgICAg
ICAgICJ7czppLHM6aX0iLAorICAgICAgICAgICAgInN0YXRlIiwgICAgc3RhdHVzLnN0YXRlLAor
ICAgICAgICAgICAgInJjIiwgICAgICAgc3RhdHVzLnJjKTsKKworZXJyb3I6CisgICAgcmV0dXJu
IGluZm9fZGljdCA/OiBweXhjX2Vycm9yX3RvX2V4Y2VwdGlvbihzZWxmLT54Y19oYW5kbGUpOwor
fQorCitzdGF0aWMgUHlPYmplY3QgKnB5eGNfbGl2ZXBhdGNoX2FjdGlvbihYY09iamVjdCAqc2Vs
ZiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFB5T2JqZWN0ICphcmdz
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHlPYmplY3QgKmt3ZHMp
Cit7CisgICAgaW50ICgqYWN0aW9uX2Z1bmMpKHhjX2ludGVyZmFjZSAqeGNoLCBjaGFyICpuYW1l
LCB1aW50MzJfdCB0aW1lb3V0LCB1aW50MzJfdCBmbGFncyk7CisgICAgY2hhciAqbmFtZTsKKyAg
ICB1bnNpZ25lZCBpbnQgYWN0aW9uOworICAgIHVpbnQzMl90IHRpbWVvdXQ7CisgICAgdWludDMy
X3QgZmxhZ3M7CisgICAgaW50IHJjID0gLTE7CisKKyAgICBzdGF0aWMgY2hhciAqa3dkX2xpc3Rb
XSA9IHsgIm5hbWUiLCAiYWN0aW9uIiwgInRpbWVvdXQiLCAiZmxhZ3MiLCBOVUxMIH07CisKKyAg
ICBpZiAoICFQeUFyZ19QYXJzZVR1cGxlQW5kS2V5d29yZHMoYXJncywga3dkcywgInNJfElrIiwg
a3dkX2xpc3QsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYW1lLCAm
YWN0aW9uLCAmdGltZW91dCwgJmZsYWdzKSApCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAgICBz
d2l0Y2ggKGFjdGlvbikKKyAgICB7CisgICAgY2FzZSBMSVZFUEFUQ0hfQUNUSU9OX1VOTE9BRDoK
KyAgICAgICAgYWN0aW9uX2Z1bmMgPSB4Y19saXZlcGF0Y2hfdW5sb2FkOworICAgICAgICBicmVh
azsKKyAgICBjYXNlIExJVkVQQVRDSF9BQ1RJT05fUkVWRVJUOgorICAgICAgICBhY3Rpb25fZnVu
YyA9IHhjX2xpdmVwYXRjaF9yZXZlcnQ7CisgICAgICAgIGJyZWFrOworICAgIGNhc2UgTElWRVBB
VENIX0FDVElPTl9BUFBMWToKKyAgICAgICAgYWN0aW9uX2Z1bmMgPSB4Y19saXZlcGF0Y2hfYXBw
bHk7CisgICAgICAgIGJyZWFrOworICAgIGNhc2UgTElWRVBBVENIX0FDVElPTl9SRVBMQUNFOgor
ICAgICAgICBhY3Rpb25fZnVuYyA9IHhjX2xpdmVwYXRjaF9yZXBsYWNlOworICAgICAgICBicmVh
azsKKyAgICBkZWZhdWx0OgorICAgICAgICBnb3RvIGVycm9yOworICAgIH0KKworICAgIHJjID0g
YWN0aW9uX2Z1bmMoc2VsZi0+eGNfaGFuZGxlLCBuYW1lLCB0aW1lb3V0LCBmbGFncyk7CisKK2Vy
cm9yOgorICAgIHJldHVybiByYyA/IHB5eGNfZXJyb3JfdG9fZXhjZXB0aW9uKHNlbGYtPnhjX2hh
bmRsZSkgOiBQeV9Ob25lOworfQorCitzdGF0aWMgUHlPYmplY3QgKnB5eGNfbGl2ZXBhdGNoX3Vw
bG9hZChYY09iamVjdCAqc2VsZiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIFB5T2JqZWN0ICphcmdzLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgUHlPYmplY3QgKmt3ZHMpCit7CisgICAgdW5zaWduZWQgY2hhciAqZmJ1ZiA9IE1BUF9GQUlM
RUQ7CisgICAgY2hhciAqbmFtZSwgKmZpbGVuYW1lOworICAgIHN0cnVjdCBzdGF0IGJ1ZjsKKyAg
ICBpbnQgZmQsIHJjID0gLTEsIHNhdmVkX2Vycm5vOworICAgIHNzaXplX3QgbGVuOworCisgICAg
c3RhdGljIGNoYXIgKmt3ZF9saXN0W10gPSB7ICJuYW1lIiwgImZpbGVuYW1lIiwgTlVMTCB9Owor
CisgICAgaWYgKCAhUHlBcmdfUGFyc2VUdXBsZUFuZEtleXdvcmRzKGFyZ3MsIGt3ZHMsICJzcyIs
IGt3ZF9saXN0LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmFtZSwg
JmZpbGVuYW1lKSkKKyAgICAgICAgZ290byBlcnJvcjsKKworICAgIGZkID0gb3BlbihmaWxlbmFt
ZSwgT19SRE9OTFkpOworICAgIGlmICggZmQgPCAwICkKKyAgICAgICAgZ290byBlcnJvcjsKKwor
ICAgIGlmICggZnN0YXQoZmQsICZidWYpICE9IDAgKQorICAgICAgICBnb3RvIGVycm9yX2ZkOwor
CisgICAgbGVuID0gYnVmLnN0X3NpemU7CisgICAgZmJ1ZiA9IG1tYXAoMCwgbGVuLCBQUk9UX1JF
QUQsIE1BUF9QUklWQVRFLCBmZCwgMCk7CisgICAgaWYgKCBmYnVmID09IE1BUF9GQUlMRUQgKQor
ICAgICAgICBnb3RvIGVycm9yX2ZkOworCisgICAgcmMgPSB4Y19saXZlcGF0Y2hfdXBsb2FkKHNl
bGYtPnhjX2hhbmRsZSwgbmFtZSwgZmJ1ZiwgbGVuKTsKKworICAgIHNhdmVkX2Vycm5vID0gZXJy
bm87CisgICAgbXVubWFwKGZidWYsIGxlbik7CisgICAgZXJybm8gPSBzYXZlZF9lcnJubzsKKwor
ZXJyb3JfZmQ6CisgICAgY2xvc2UoZmQpOworZXJyb3I6CisgICAgcmV0dXJuIHJjID8gcHl4Y19l
cnJvcl90b19leGNlcHRpb24oc2VsZi0+eGNfaGFuZGxlKSA6IFB5X05vbmU7Cit9CisKK3N0YXRp
YyBQeU9iamVjdCAqcHl4Y19saXZlcGF0Y2hfbGlzdChYY09iamVjdCAqc2VsZikKK3sKKyAgICBQ
eU9iamVjdCAqbGlzdCA9IFB5X05vbmU7CisgICAgdW5zaWduZWQgaW50IG5yLCBkb25lLCBsZWZ0
LCBpOworICAgIHhlbl9saXZlcGF0Y2hfc3RhdHVzX3QgKmluZm8gPSBOVUxMOworICAgIGNoYXIg
Km5hbWUgPSBOVUxMOworICAgIGNoYXIgKm1ldGFkYXRhID0gTlVMTDsKKyAgICB1aW50MzJfdCAq
bGVuID0gTlVMTDsKKyAgICB1aW50MzJfdCAqbWV0YWRhdGFfbGVuID0gTlVMTDsKKyAgICB1aW50
MzJfdCBuYW1lX3RvdGFsX3NpemUsIG1ldGFkYXRhX3RvdGFsX3NpemU7CisgICAgdWludDMyX3Qg
bmFtZV9vZmYsIG1ldGFkYXRhX29mZjsKKyAgICBpbnQgcmM7CisKKyAgICBkb25lID0gbGVmdCA9
IDA7CisgICAgcmMgPSB4Y19saXZlcGF0Y2hfbGlzdF9nZXRfc2l6ZXMoc2VsZi0+eGNfaGFuZGxl
LCAmbnIsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5hbWVfdG90YWxf
c2l6ZSwgJm1ldGFkYXRhX3RvdGFsX3NpemUpOworICAgIGlmICggcmMgKQorICAgICAgICBnb3Rv
IGVycm9yOworCisgICAgaWYgKCBuciA9PSAwICkKKyAgICAgICAgcmV0dXJuIFB5TGlzdF9OZXco
MCk7CisKKyAgICByYyA9IEVOT01FTTsKKyAgICBpbmZvID0gbWFsbG9jKG5yICogc2l6ZW9mKCpp
bmZvKSk7CisgICAgaWYgKCAhaW5mbyApCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAgICBuYW1l
ID0gbWFsbG9jKG5hbWVfdG90YWxfc2l6ZSAqIHNpemVvZigqbmFtZSkpOworICAgIGlmICggIW5h
bWUgKQorICAgICAgICBnb3RvIGVycm9yOworCisgICAgbGVuID0gbWFsbG9jKG5yICogc2l6ZW9m
KCpsZW4pKTsKKyAgICBpZiAoICFsZW4gKQorICAgICAgICBnb3RvIGVycm9yOworCisgICAgbWV0
YWRhdGEgPSBtYWxsb2MobWV0YWRhdGFfdG90YWxfc2l6ZSAqIHNpemVvZigqbWV0YWRhdGEpKTsK
KyAgICBpZiAoICFtZXRhZGF0YSApCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAgICBtZXRhZGF0
YV9sZW4gPSBtYWxsb2MobnIgKiBzaXplb2YoKm1ldGFkYXRhX2xlbikpOworICAgIGlmICggIW1l
dGFkYXRhX2xlbiApCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAgICByYyA9IHhjX2xpdmVwYXRj
aF9saXN0KHNlbGYtPnhjX2hhbmRsZSwgbnIsIDAsIGluZm8sCisgICAgICAgICAgICAgICAgICAg
ICAgICAgICBuYW1lLCBsZW4sIG5hbWVfdG90YWxfc2l6ZSwKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgIG1ldGFkYXRhLCBtZXRhZGF0YV9sZW4sIG1ldGFkYXRhX3RvdGFsX3NpemUsCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAmZG9uZSwgJmxlZnQpOworICAgIGlmICggcmMgKQorICAg
ICAgICBnb3RvIGVycm9yOworCisgICAgaWYgKCBkb25lICE9IG5yIHx8IGxlZnQgPiAwICkKKyAg
ICB7CisgICAgICAgIHJjID0gRUZBVUxUOworICAgICAgICBnb3RvIGVycm9yOworICAgIH0KKwor
ICAgIGxpc3QgPSBQeUxpc3RfTmV3KGRvbmUpOworICAgIG5hbWVfb2ZmID0gbWV0YWRhdGFfb2Zm
ID0gMDsKKyAgICBmb3IgKCBpID0gMDsgaSA8IGRvbmU7IGkrKyApCisgICAgeworICAgICAgICBQ
eU9iamVjdCAqaW5mb19kaWN0LCAqbWV0YWRhdGFfbGlzdDsKKyAgICAgICAgY2hhciAqbmFtZV9z
dHIsICptZXRhZGF0YV9zdHI7CisKKyAgICAgICAgbmFtZV9zdHIgPSBuYW1lICsgbmFtZV9vZmY7
CisgICAgICAgIG1ldGFkYXRhX3N0ciA9IG1ldGFkYXRhICsgbWV0YWRhdGFfb2ZmOworCisgICAg
ICAgIG1ldGFkYXRhX2xpc3QgPSBQeUxpc3RfTmV3KDApOworICAgICAgICBmb3IgKCBjaGFyICpz
ID0gbWV0YWRhdGFfc3RyOyBzIDwgbWV0YWRhdGFfc3RyICsgbWV0YWRhdGFfbGVuW2ldOyBzICs9
IHN0cmxlbihzKSArIDEgKQorICAgICAgICB7CisgICAgICAgICAgICBQeU9iamVjdCAqZmllbGQg
PSBQeV9CdWlsZFZhbHVlKCJzIiwgcyk7CisgICAgICAgICAgICBpZiAoIGZpZWxkID09IE5VTEwg
KQorICAgICAgICAgICAgeworICAgICAgICAgICAgICAgIFB5X0RFQ1JFRihsaXN0KTsKKyAgICAg
ICAgICAgICAgICBQeV9ERUNSRUYobWV0YWRhdGFfbGlzdCk7CisgICAgICAgICAgICAgICAgcmMg
PSBFRkFVTFQ7CisgICAgICAgICAgICAgICAgZ290byBlcnJvcjsKKyAgICAgICAgICAgIH0KKwor
ICAgICAgICAgICAgUHlMaXN0X0FwcGVuZChtZXRhZGF0YV9saXN0LCBmaWVsZCk7CisgICAgICAg
ICAgICBQeV9ERUNSRUYoZmllbGQpOworICAgICAgICB9CisKKyAgICAgICAgaW5mb19kaWN0ID0g
UHlfQnVpbGRWYWx1ZSgKKyAgICAgICAgICAgICJ7czpzLHM6aSxzOmksczpOfSIsCisgICAgICAg
ICAgICAibmFtZSIsICAgICBuYW1lX3N0ciwKKyAgICAgICAgICAgICJzdGF0ZSIsICAgIGluZm9b
aV0uc3RhdGUsCisgICAgICAgICAgICAicmMiLCAgICAgICBpbmZvW2ldLnJjLAorICAgICAgICAg
ICAgIm1ldGFkYXRhIiwgbWV0YWRhdGFfbGlzdCk7CisKKyAgICAgICAgaWYgKCBpbmZvX2RpY3Qg
PT0gTlVMTCApCisgICAgICAgIHsKKyAgICAgICAgICAgIFB5X0RFQ1JFRihsaXN0KTsKKyAgICAg
ICAgICAgIFB5X0RFQ1JFRihtZXRhZGF0YV9saXN0KTsKKyAgICAgICAgICAgIHJjID0gRUZBVUxU
OworICAgICAgICAgICAgZ290byBlcnJvcjsKKyAgICAgICAgfQorICAgICAgICBQeUxpc3RfU0VU
X0lURU0obGlzdCwgaSwgaW5mb19kaWN0KTsKKworICAgICAgICBuYW1lX29mZiArPSBsZW5baV07
CisgICAgICAgIG1ldGFkYXRhX29mZiArPSBtZXRhZGF0YV9sZW5baV07CisgICAgfQorCitlcnJv
cjoKKyAgICBmcmVlKGluZm8pOworICAgIGZyZWUobmFtZSk7CisgICAgZnJlZShsZW4pOworICAg
IGZyZWUobWV0YWRhdGEpOworICAgIGZyZWUobWV0YWRhdGFfbGVuKTsKKyAgICByZXR1cm4gcmMg
PyBweXhjX2Vycm9yX3RvX2V4Y2VwdGlvbihzZWxmLT54Y19oYW5kbGUpIDogbGlzdDsKK30KKwog
c3RhdGljIFB5TWV0aG9kRGVmIHB5eGNfbWV0aG9kc1tdID0gewogICAgIHsgImRvbWFpbl9jcmVh
dGUiLCAKICAgICAgIChQeUNGdW5jdGlvbilweXhjX2RvbWFpbl9jcmVhdGUsIApAQCAtMjU0Miw2
ICsyNzYxLDQ0IEBAIHN0YXRpYyBQeU1ldGhvZERlZiBweXhjX21ldGhvZHNbXSA9IHsKICAgICAg
ICJSZXR1cm5zOiBbaW50XTogMCBvbiBhbGwgcGVybWlzc2lvbiBncmFudGVkOyAtMSBpZiBhbnkg
cGVybWlzc2lvbnMgYXJlIFwKICAgICAgICBkZW5pZWRcbiIgfSwgCiAKKyAgICB7ICJsaXZlcGF0
Y2hfc3RhdHVzIiwKKyAgICAgIChQeUNGdW5jdGlvbilweXhjX2xpdmVwYXRjaF9zdGF0dXMsCisg
ICAgICBNRVRIX0tFWVdPUkRTLCAiXG4iCisgICAgICAiR2V0cyBjdXJyZW50IHN0YXRlIGFuZCBy
ZXR1cm4gY29kZSBmb3IgYSBzcGVjaWZpZWQgbW9kdWxlLlxuIgorICAgICAgIiBuYW1lICAgICBb
c3RyXTogTW9kdWxlIG5hbWUgdG8gYmUgdXNlZFxuIgorICAgICAgIlJldHVybnM6IFtkaWN0XSBv
biBzdWNjZXNzOyB0aHJvd2luZyBhbiBleGNlcHRpb24gb24gZXJyb3JcbiIKKyAgICAgICIgc3Rh
dGUgICAgW2ludF06IE1vZHVsZSBjdXJyZW50IHN0YXRlOiBDSEVDS0VEIG9yIEFQUExJRURcbiIK
KyAgICAgICIgcmMgICAgICAgW2ludF06IFJldHVybiBjb2RlIG9mIGxhc3QgbW9kdWxlJ3Mgb3Bl
cmF0aW9uXG4iIH0sCisKKyAgICB7ICJsaXZlcGF0Y2hfdXBsb2FkIiwKKyAgICAgIChQeUNGdW5j
dGlvbilweXhjX2xpdmVwYXRjaF91cGxvYWQsCisgICAgICBNRVRIX0tFWVdPUkRTLCAiXG4iCisg
ICAgICAiVXBsb2FkcyBhIG1vZHVsZSB3aXRoIHNwZWNpZmllZCBuYW1lIGZyb20gZmlsZW5hbWUu
XG4iCisgICAgICAiIG5hbWUgICAgIFtzdHJdOiBNb2R1bGUgbmFtZSB0byBiZSB1c2VkXG4iCisg
ICAgICAiIGZpbGVuYW1lIFtzdHJdOiBGaWxlbmFtZSBvZiBhIG1vZHVsZSB0byBiZSB1cGxvYWRl
ZFxuIgorICAgICAgIlJldHVybnM6IE5vbmUgb24gc3VjY2VzczsgdGhyb3dpbmcgYW4gZXhjZXB0
aW9uIG9uIGVycm9yXG4iIH0sCisKKyAgICB7ICJsaXZlcGF0Y2hfYWN0aW9uIiwKKyAgICAgIChQ
eUNGdW5jdGlvbilweXhjX2xpdmVwYXRjaF9hY3Rpb24sCisgICAgICBNRVRIX0tFWVdPUkRTLCAi
XG4iCisgICAgICAiUGVyZm9ybXMgYW4gYWN0aW9uICh1bmxvYWQsIHJldmVydCwgYXBwbHkgb3Ig
cmVwbGFjZSkgb24gYSBzcGVjaWZpZWQgXAorICAgICAgIG1vZHVsZS5cbiIKKyAgICAgICIgbmFt
ZSAgICAgIFtzdHJdOiBNb2R1bGUgbmFtZSB0byBiZSB1c2VkXG4iCisgICAgICAiIGFjdGlvbiAg
IFt1aW50XTogQWN0aW9uIGVudW0gaWRcbiIKKyAgICAgICIgdGltZW91dCAgW3VpbnRdOiBBY3Rp
b24gc2NoZWR1bGVkIGV4ZWN1dGlvbiB0aW1lb3V0XG4iCisgICAgICAiIGZsYWdzICAgIFt1aW50
XTogRmxhZ3Mgc3BlY2lmeWluZyBhY3Rpb24ncyBleHRyYSBwYXJhbWV0ZXJzXG4iCisgICAgICAi
UmV0dXJuczogTm9uZSBvbiBzdWNjZXNzOyB0aHJvd2luZyBhbiBleGNlcHRpb24gb24gZXJyb3Jc
biIgfSwKKworICAgIHsgImxpdmVwYXRjaF9saXN0IiwKKyAgICAgIChQeUNGdW5jdGlvbilweXhj
X2xpdmVwYXRjaF9saXN0LAorICAgICAgTUVUSF9OT0FSR1MsICJcbiIKKyAgICAgICJMaXN0IGFs
bCB1cGxvYWRlZCBsaXZlcGF0Y2ggbW9kdWxlcyB3aXRoIHRoZWlyIGN1cnJlbnQgc3RhdGUgYW5k
IG1ldGFkYXRhLlxuIgorICAgICAgIlJldHVybnM6IFtsaXN0IG9mIGRpY3RzXSBvbiBzdWNjZXNz
OyB0aHJvd2luZyBhbiBleGNlcHRpb24gb24gZXJyb3JcbiIKKyAgICAgICIgbmFtZSAgICAgW3N0
cl06IE1vZHVsZSBuYW1lXG4iCisgICAgICAiIHN0YXRlICAgIFtpbnRdOiBNb2R1bGUgY3VycmVu
dCBzdGF0ZTogQ0hFQ0tFRCBvciBBUFBMSUVEXG4iCisgICAgICAiIHJjICAgICAgIFtpbnRdOiBS
ZXR1cm4gY29kZSBvZiBsYXN0IG1vZHVsZSdzIG9wZXJhdGlvblxuIgorICAgICAgIiBtZXRhZGF0
YSBbbGlzdF06IExpc3Qgb2YgbW9kdWxlJ3MgbWV0YWRhdGEgJ2tleT12YWx1ZScgc3RyaW5nc1xu
IiB9LAorCiAgICAgeyBOVUxMLCBOVUxMLCAwLCBOVUxMIH0KIH07CiAKQEAgLTI2NTMsNiArMjkx
MCwxNyBAQCBQeU1PRElOSVRfRlVOQyBpbml0eGModm9pZCkKICAgICBQeU1vZHVsZV9BZGRJbnRD
b25zdGFudChtLCAiWEVOX1NDSEVEVUxFUl9DUkVESVQiLCBYRU5fU0NIRURVTEVSX0NSRURJVCk7
CiAgICAgUHlNb2R1bGVfQWRkSW50Q29uc3RhbnQobSwgIlhFTl9TQ0hFRFVMRVJfQ1JFRElUMiIs
IFhFTl9TQ0hFRFVMRVJfQ1JFRElUMik7CiAKKyAgICAvKiBFeHBvc2UgbGl2ZXBhdGNoIGNvbnN0
YW50cyB0byBQeXRob24gKi8KKyAgICBQeU1vZHVsZV9BZGRJbnRDb25zdGFudChtLCAiTElWRVBB
VENIX0FDVElPTl9VTkxPQUQiLCBMSVZFUEFUQ0hfQUNUSU9OX1VOTE9BRCk7CisgICAgUHlNb2R1
bGVfQWRkSW50Q29uc3RhbnQobSwgIkxJVkVQQVRDSF9BQ1RJT05fUkVWRVJUIiwgTElWRVBBVENI
X0FDVElPTl9SRVZFUlQpOworICAgIFB5TW9kdWxlX0FkZEludENvbnN0YW50KG0sICJMSVZFUEFU
Q0hfQUNUSU9OX0FQUExZIiwgTElWRVBBVENIX0FDVElPTl9BUFBMWSk7CisgICAgUHlNb2R1bGVf
QWRkSW50Q29uc3RhbnQobSwgIkxJVkVQQVRDSF9BQ1RJT05fUkVQTEFDRSIsIExJVkVQQVRDSF9B
Q1RJT05fUkVQTEFDRSk7CisKKyAgICBQeU1vZHVsZV9BZGRJbnRDb25zdGFudChtLCAiTElWRVBB
VENIX0FDVElPTl9BUFBMWV9OT0RFUFMiLCBMSVZFUEFUQ0hfQUNUSU9OX0FQUExZX05PREVQUyk7
CisKKyAgICBQeU1vZHVsZV9BZGRJbnRDb25zdGFudChtLCAiTElWRVBBVENIX1NUQVRFX0FQUExJ
RUQiLCBMSVZFUEFUQ0hfU1RBVEVfQVBQTElFRCk7CisgICAgUHlNb2R1bGVfQWRkSW50Q29uc3Rh
bnQobSwgIkxJVkVQQVRDSF9TVEFURV9DSEVDS0VEIiwgTElWRVBBVENIX1NUQVRFX0NIRUNLRUQp
OworCiAjaWYgUFlfTUFKT1JfVkVSU0lPTiA+PSAzCiAgICAgcmV0dXJuIG07CiAjZW5kaWYKLS0g
CjIuMTYuNQoKCgoKQW1hem9uIERldmVsb3BtZW50IENlbnRlciBHZXJtYW55IEdtYkgKS3JhdXNl
bnN0ci4gMzgKMTAxMTcgQmVybGluCkdlc2NoYWVmdHNmdWVocnVuZzogQ2hyaXN0aWFuIFNjaGxh
ZWdlciwgUmFsZiBIZXJicmljaApFaW5nZXRyYWdlbiBhbSBBbXRzZ2VyaWNodCBDaGFybG90dGVu
YnVyZyB1bnRlciBIUkIgMTQ5MTczIEIKU2l0ejogQmVybGluClVzdC1JRDogREUgMjg5IDIzNyA4
NzkKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4t
ZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczov
L2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

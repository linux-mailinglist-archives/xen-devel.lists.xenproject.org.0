Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 79A78AEE4C
	for <lists+xen-devel@lfdr.de>; Tue, 10 Sep 2019 17:15:14 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i7ho6-00020Y-3E; Tue, 10 Sep 2019 15:11:50 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=6bdU=XF=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1i7ho4-000201-CI
 for xen-devel@lists.xenproject.org; Tue, 10 Sep 2019 15:11:48 +0000
X-Inumbo-ID: 4de2ca0e-d3dd-11e9-b299-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 4de2ca0e-d3dd-11e9-b299-bc764e2007e4;
 Tue, 10 Sep 2019 15:11:46 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 66002ACEC;
 Tue, 10 Sep 2019 15:11:45 +0000 (UTC)
To: Juergen Gross <jgross@suse.com>
References: <20190809145833.1020-1-jgross@suse.com>
 <20190809145833.1020-28-jgross@suse.com>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <a33b4012-bef8-531f-6ddc-583ec76449a1@suse.com>
Date: Tue, 10 Sep 2019 17:11:43 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <20190809145833.1020-28-jgross@suse.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v2 27/48] xen/sched: Change vcpu_migrate_*()
 to operate on schedule unit
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: George Dunlap <george.dunlap@eu.citrix.com>, xen-devel@lists.xenproject.org,
 Dario Faggioli <dfaggioli@suse.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMDkuMDguMjAxOSAxNjo1OCwgSnVlcmdlbiBHcm9zcyB3cm90ZToKPiAtLS0gYS94ZW4vY29t
bW9uL3NjaGVkdWxlLmMKPiArKysgYi94ZW4vY29tbW9uL3NjaGVkdWxlLmMKPiBAQCAtNzMzLDM1
ICs3MzMsNDAgQEAgdm9pZCB2Y3B1X3VuYmxvY2soc3RydWN0IHZjcHUgKnYpCj4gIH0KPiAgCj4g
IC8qCj4gLSAqIERvIHRoZSBhY3R1YWwgbW92ZW1lbnQgb2YgYSB2Y3B1IGZyb20gb2xkIHRvIG5l
dyBDUFUuIExvY2tzIGZvciAqYm90aCoKPiArICogRG8gdGhlIGFjdHVhbCBtb3ZlbWVudCBvZiBh
biB1bml0IGZyb20gb2xkIHRvIG5ldyBDUFUuIExvY2tzIGZvciAqYm90aCoKPiAgICogQ1BVcyBu
ZWVkcyB0byBoYXZlIGJlZW4gdGFrZW4gYWxyZWFkeSB3aGVuIGNhbGxpbmcgdGhpcyEKPiAgICov
Cj4gLXN0YXRpYyB2b2lkIHZjcHVfbW92ZV9sb2NrZWQoc3RydWN0IHZjcHUgKnYsIHVuc2lnbmVk
IGludCBuZXdfY3B1KQo+ICtzdGF0aWMgdm9pZCBzY2hlZF91bml0X21vdmVfbG9ja2VkKHN0cnVj
dCBzY2hlZF91bml0ICp1bml0LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHVuc2lnbmVkIGludCBuZXdfY3B1KQo+ICB7Cj4gLSAgICB1bnNpZ25lZCBpbnQgb2xkX2NwdSA9
IHYtPnByb2Nlc3NvcjsKPiArICAgIHVuc2lnbmVkIGludCBvbGRfY3B1ID0gdW5pdC0+cmVzLT5w
cm9jZXNzb3I7Cj4gKyAgICBzdHJ1Y3QgdmNwdSAqdjsKPiAgCj4gICAgICAvKgo+ICAgICAgICog
VHJhbnNmZXIgdXJnZW5jeSBzdGF0dXMgdG8gbmV3IENQVSBiZWZvcmUgc3dpdGNoaW5nIENQVXMs
IGFzCj4gICAgICAgKiBvbmNlIHRoZSBzd2l0Y2ggb2NjdXJzLCB2LT5pc191cmdlbnQgaXMgbm8g
bG9uZ2VyIHByb3RlY3RlZCBieQo+ICAgICAgICogdGhlIHBlci1DUFUgc2NoZWR1bGVyIGxvY2sg
d2UgYXJlIGhvbGRpbmcuCj4gICAgICAgKi8KPiAtICAgIGlmICggdW5saWtlbHkodi0+aXNfdXJn
ZW50KSAmJiAob2xkX2NwdSAhPSBuZXdfY3B1KSApCj4gKyAgICBmb3JfZWFjaF9zY2hlZF91bml0
X3ZjcHUgKCB1bml0LCB2ICkKPiAgICAgIHsKPiAtICAgICAgICBhdG9taWNfaW5jKCZnZXRfc2No
ZWRfcmVzKG5ld19jcHUpLT51cmdlbnRfY291bnQpOwo+IC0gICAgICAgIGF0b21pY19kZWMoJmdl
dF9zY2hlZF9yZXMob2xkX2NwdSktPnVyZ2VudF9jb3VudCk7Cj4gKyAgICAgICAgaWYgKCB1bmxp
a2VseSh2LT5pc191cmdlbnQpICYmIChvbGRfY3B1ICE9IG5ld19jcHUpICkKPiArICAgICAgICB7
Cj4gKyAgICAgICAgICAgIGF0b21pY19pbmMoJmdldF9zY2hlZF9yZXMobmV3X2NwdSktPnVyZ2Vu
dF9jb3VudCk7Cj4gKyAgICAgICAgICAgIGF0b21pY19kZWMoJmdldF9zY2hlZF9yZXMob2xkX2Nw
dSktPnVyZ2VudF9jb3VudCk7Cj4gKyAgICAgICAgfQo+ICAgICAgfQoKU2hvdWxkbid0IGlzX3Vy
Z2VudCBiZWNvbWUgYW4gYXR0cmlidXRlIG9mIHVuaXQgcmF0aGVyIHRoYW4gYSB2Q1BVLAp0b28s
IGVsaW1pbmF0aW5nIHRoZSBuZWVkIGZvciBhIGxvb3AgaGVyZT8gSSBjYW4ndCBzZWUgYSByZWFz
b24Kd2h5IG5vdCwgc2VlaW5nIHRoaXMgY29sbGFwc2luZyBpbnRvIGEgc2luZ2xlIHVyZ2VudF9j
b3VudC4KClRoZW4gYWdhaW4gdGhlIHF1ZXN0aW9uIHJlbWFpbnMgd2hldGhlciB0aGUgbm9uLWRl
ZXAgc2xlZXBpbmcgYXMKYSByZXN1bHQgb2YgYSBub24temVybyB1cmdlbnRfY291bnQgc2hvdWxk
IGluZGVlZCBiZSBkaXN0cmlidXRlZAp0byBhbGwgY29uc3RpdHVlbnRzIG9mIGEgdW5pdC4gSSBj
YW4gc2VlIGFyZ3VtZW50cyBib3RoIGluIGZhdm9yCmFuZCBhZ2FpbnN0LgoKPiAtc3RhdGljIHZv
aWQgdmNwdV9taWdyYXRlX2ZpbmlzaChzdHJ1Y3QgdmNwdSAqdikKPiArc3RhdGljIHZvaWQgc2No
ZWRfdW5pdF9taWdyYXRlX2ZpbmlzaChzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkKPiAgewo+ICAg
ICAgdW5zaWduZWQgbG9uZyBmbGFnczsKPiAgICAgIHVuc2lnbmVkIGludCBvbGRfY3B1LCBuZXdf
Y3B1Owo+ICAgICAgc3BpbmxvY2tfdCAqb2xkX2xvY2ssICpuZXdfbG9jazsKPiAgICAgIGJvb2xf
dCBwaWNrX2NhbGxlZCA9IDA7Cj4gKyAgICBzdHJ1Y3QgdmNwdSAqdjsKPiAgCj4gICAgICAvKgo+
IC0gICAgICogSWYgdGhlIHZjcHUgaXMgY3VycmVudGx5IHJ1bm5pbmcsIHRoaXMgd2lsbCBiZSBo
YW5kbGVkIGJ5Cj4gKyAgICAgKiBJZiB0aGUgdW5pdCBpcyBjdXJyZW50bHkgcnVubmluZywgdGhp
cyB3aWxsIGJlIGhhbmRsZWQgYnkKPiAgICAgICAqIGNvbnRleHRfc2F2ZWQoKTsgYW5kIGluIGFu
eSBjYXNlLCBpZiB0aGUgYml0IGlzIGNsZWFyZWQsIHRoZW4KPiAgICAgICAqIHNvbWVvbmUgZWxz
ZSBoYXMgYWxyZWFkeSBkb25lIHRoZSB3b3JrIHNvIHdlIGRvbid0IG5lZWQgdG8uCj4gICAgICAg
Ki8KPiAtICAgIGlmICggdi0+c2NoZWRfdW5pdC0+aXNfcnVubmluZyB8fAo+IC0gICAgICAgICAh
dGVzdF9iaXQoX1ZQRl9taWdyYXRpbmcsICZ2LT5wYXVzZV9mbGFncykgKQo+IC0gICAgICAgIHJl
dHVybjsKPiArICAgIGZvcl9lYWNoX3NjaGVkX3VuaXRfdmNwdSAoIHVuaXQsIHYgKQo+ICsgICAg
ewo+ICsgICAgICAgIGlmICggdW5pdC0+aXNfcnVubmluZyB8fCAhdGVzdF9iaXQoX1ZQRl9taWdy
YXRpbmcsICZ2LT5wYXVzZV9mbGFncykgKQo+ICsgICAgICAgICAgICByZXR1cm47Cj4gKyAgICB9
CgpEbyB5b3UgcmVhbGx5IG5lZWQgdGhlIGxvb3AgaW52YXJpYW50IHVuaXQtPmlzX3J1bm5pbmcg
dG8gYmUgZXZhbHVhdGVkCm9uY2UgcGVyIGxvb3AgaXRlcmF0aW9uPyAoU2FtZSBhZ2FpbiBmdXJ0
aGVyIGRvd24gYXQgbGVhc3Qgb25jZS4pCgpGdXJ0aGVybW9yZSBJIHdvbmRlciBpZiBWUEZfbWln
cmF0aW5nIHNob3VsZG4ndCBiZWNvbWUgYSBwZXItdW5pdAphdHRyaWJ1dGUuCgo+IEBAIC04NTgs
MjIgKzg3MSwzMCBAQCBzdGF0aWMgdm9pZCB2Y3B1X21pZ3JhdGVfZmluaXNoKHN0cnVjdCB2Y3B1
ICp2KQo+ICAgICAgICogYmVjYXVzZSB0aGV5IGJvdGggaGFwcGVuIGluIChkaWZmZXJlbnQpIHNw
aW5sb2NrIHJlZ2lvbnMsIGFuZCB0aG9zZQo+ICAgICAgICogcmVnaW9ucyBhcmUgc3RyaWN0bHkg
c2VyaWFsaXNlZC4KPiAgICAgICAqLwo+IC0gICAgaWYgKCB2LT5zY2hlZF91bml0LT5pc19ydW5u
aW5nIHx8Cj4gLSAgICAgICAgICF0ZXN0X2FuZF9jbGVhcl9iaXQoX1ZQRl9taWdyYXRpbmcsICZ2
LT5wYXVzZV9mbGFncykgKQo+ICsgICAgZm9yX2VhY2hfc2NoZWRfdW5pdF92Y3B1ICggdW5pdCwg
diApCj4gICAgICB7Cj4gLSAgICAgICAgc2NoZWRfc3Bpbl91bmxvY2tfZG91YmxlKG9sZF9sb2Nr
LCBuZXdfbG9jaywgZmxhZ3MpOwo+IC0gICAgICAgIHJldHVybjsKPiArICAgICAgICBpZiAoIHVu
aXQtPmlzX3J1bm5pbmcgfHwKPiArICAgICAgICAgICAgICF0ZXN0X2FuZF9jbGVhcl9iaXQoX1ZQ
Rl9taWdyYXRpbmcsICZ2LT5wYXVzZV9mbGFncykgKQo+ICsgICAgICAgIHsKPiArICAgICAgICAg
ICAgc2NoZWRfc3Bpbl91bmxvY2tfZG91YmxlKG9sZF9sb2NrLCBuZXdfbG9jaywgZmxhZ3MpOwo+
ICsgICAgICAgICAgICByZXR1cm47Cj4gKyAgICAgICAgfQo+ICAgICAgfQo+ICAKPiAtICAgIHZj
cHVfbW92ZV9sb2NrZWQodiwgbmV3X2NwdSk7Cj4gKyAgICBzY2hlZF91bml0X21vdmVfbG9ja2Vk
KHVuaXQsIG5ld19jcHUpOwo+ICAKPiAgICAgIHNjaGVkX3NwaW5fdW5sb2NrX2RvdWJsZShvbGRf
bG9jaywgbmV3X2xvY2ssIGZsYWdzKTsKPiAgCj4gICAgICBpZiAoIG9sZF9jcHUgIT0gbmV3X2Nw
dSApCj4gLSAgICAgICAgc2NoZWRfbW92ZV9pcnFzKHYtPnNjaGVkX3VuaXQpOwo+ICsgICAgewo+
ICsgICAgICAgIGZvcl9lYWNoX3NjaGVkX3VuaXRfdmNwdSAoIHVuaXQsIHYgKQo+ICsgICAgICAg
ICAgICBzeW5jX3ZjcHVfZXhlY3N0YXRlKHYpOwoKVGhpcyBpcyBuZXcgd2l0aG91dCBiZWluZyBl
eHBsYWluZWQgYW55d2hlcmUuIE9yIHdhaXQsIGl0IGlzIG1lbnRpb25lZAood2l0aCB0aGUgd3Jv
bmcgZnVuY3Rpb24gbmFtZSwgd2hpY2ggaXMgd2h5IGluaXRpYWxseSAtIGJ5IHNlYXJjaGluZyAt
CkkgZGlkbid0IHNwb3QgaXQpLCBidXQgb25seSB3aXRoIGEganVzdGlmaWNhdGlvbiBvZiAibmVl
ZGVkIGFueXdheSIuCgo+IEBAIC0xNzk0LDcgKzE4MTQsNyBAQCB2b2lkIGNvbnRleHRfc2F2ZWQo
c3RydWN0IHZjcHUgKnByZXYpCj4gIAo+ICAgICAgc2NoZWRfY29udGV4dF9zYXZlZCh2Y3B1X3Nj
aGVkdWxlcihwcmV2KSwgcHJldi0+c2NoZWRfdW5pdCk7Cj4gIAo+IC0gICAgdmNwdV9taWdyYXRl
X2ZpbmlzaChwcmV2KTsKPiArICAgIHNjaGVkX3VuaXRfbWlncmF0ZV9maW5pc2gocHJldi0+c2No
ZWRfdW5pdCk7Cj4gIH0KCkJ5IHRoZSBlbmQgb2YgdGhlIHNlcmllcyBjb250ZXh0X3NhdmVkKCkg
c3RpbGwgYWN0cyBvbiB2Q1BVLXMsIG5vdAp1bml0cy4gV2hhdCBpcyB0aGUgbWVhbmluZy9lZmZl
Y3Qgb2YgbXVsdGlwbGUgc2NoZWRfdW5pdF9taWdyYXRlXyooKT8KCkphbgoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlz
dApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

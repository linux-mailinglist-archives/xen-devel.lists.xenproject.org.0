Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 34BEFFC703
	for <lists+xen-devel@lfdr.de>; Thu, 14 Nov 2019 14:10:55 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iVErJ-0007gV-9I; Thu, 14 Nov 2019 13:08:25 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=KGQC=ZG=amazon.de=prvs=2141b557b=wipawel@srs-us1.protection.inumbo.net>)
 id 1iVErH-0007fL-GO
 for xen-devel@lists.xenproject.org; Thu, 14 Nov 2019 13:08:23 +0000
X-Inumbo-ID: cfa7aa49-06df-11ea-a24c-12813bfff9fa
Received: from smtp-fw-9102.amazon.com (unknown [207.171.184.29])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id cfa7aa49-06df-11ea-a24c-12813bfff9fa;
 Thu, 14 Nov 2019 13:08:12 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.de; i=@amazon.de; q=dns/txt; s=amazon201209;
 t=1573736893; x=1605272893;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=S5wJZkZNgEvgR4OD1RjH57qgoUjEHOe2x5Y16wwBsd0=;
 b=r1xzZGNRc/Vqf1qoXuKDYif1NXeGFZLlNNhXn0BcCeqIe6G2AFsJ9Q2I
 gpEhwxkYgd7RGgBxH6GonslVBbANLFQGOpMNKu2bSCzmiKmqTzYH6u+pM
 S0KTgZ7WkMgnXRfsXIh/3fDVBmQBcC+AJXoltpS3BkjS6JJ+R9qG0r3iM c=;
IronPort-SDR: uM2wHZxNmBYXZiwOQtvGwh4BHsMoxOHe1FDmWY5x0SntbisQry6x5rCT/+Tqkk1ldQlcqixqVu
 qcnuTNUZrsFA==
X-IronPort-AV: E=Sophos;i="5.68,304,1569283200"; 
   d="scan'208";a="7280397"
Received: from sea32-co-svc-lb4-vlan3.sea.corp.amazon.com (HELO
 email-inbound-relay-1a-807d4a99.us-east-1.amazon.com) ([10.47.23.38])
 by smtp-border-fw-out-9102.sea19.amazon.com with ESMTP;
 14 Nov 2019 13:08:11 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan3.iad.amazon.com [10.40.159.166])
 by email-inbound-relay-1a-807d4a99.us-east-1.amazon.com (Postfix) with ESMTPS
 id 4A110A2B28; Thu, 14 Nov 2019 13:08:09 +0000 (UTC)
Received: from EX13D03EUA002.ant.amazon.com (10.43.165.166) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.82) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Thu, 14 Nov 2019 13:07:59 +0000
Received: from EX13MTAUWA001.ant.amazon.com (10.43.160.58) by
 EX13D03EUA002.ant.amazon.com (10.43.165.166) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Thu, 14 Nov 2019 13:07:58 +0000
Received: from dev-dsk-wipawel-1a-0c4e6d58.eu-west-1.amazon.com (10.4.134.33)
 by mail-relay.amazon.com (10.43.160.118) with Microsoft SMTP Server
 id
 15.0.1367.3 via Frontend Transport; Thu, 14 Nov 2019 13:07:56 +0000
From: Pawel Wieczorkiewicz <wipawel@amazon.de>
To: <xen-devel@lists.xenproject.org>
Date: Thu, 14 Nov 2019 13:06:53 +0000
Message-ID: <20191114130653.51185-13-wipawel@amazon.de>
X-Mailer: git-send-email 2.16.5
In-Reply-To: <20191114130653.51185-1-wipawel@amazon.de>
References: <20191114130653.51185-1-wipawel@amazon.de>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH v5 12/12] livepatch: Add python bindings for
 livepatch operations
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Pawel Wieczorkiewicz <wipawel@amazon.de>,
 Ian Jackson <ian.jackson@eu.citrix.com>, mpohlack@amazon.com,
 Wei Liu <wl@xen.org>, =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RXh0ZW5kIHRoZSBYQyBweXRob24gYmluZGluZ3MgbGlicmFyeSB0byBzdXBwb3J0IGFsc28gYWxs
IGNvbW1vbgpsaXZlcGF0Y2ggb3BlcmF0aW9ucyBhbmQgYWN0aW9ucy4KCkFkZCB0aGUgcHl0aG9u
IGJpbmRpbmdzIGZvciB0aGUgZm9sbG93aW5nIG9wZXJhdGlvbnM6Ci0gc3RhdHVzIChweXhjX2xp
dmVwYXRjaF9zdGF0dXMpOgogIFJlcXVpcmVzIGEgcGF5bG9hZCBuYW1lIGFzIGFuIGlucHV0Lgog
IFJldHVybnMgYSBzdGF0dXMgZGljdCBjb250YWluaW5nIGEgc3RhdGUgc3RyaW5nIGFuZCBhIHJl
dHVybiBjb2RlCiAgaW50ZWdlci4KLSBhY3Rpb24gKHB5eGNfbGl2ZXBhdGNoX2FjdGlvbik6CiAg
UmVxdWlyZXMgYSBwYXlsb2FkIG5hbWUgYW5kIGFuIGFjdGlvbiBpZCBhcyBhbiBpbnB1dC4gVGlt
ZW91dCBhbmQKICBmbGFncyBhcmUgb3B0aW9uYWwgcGFyYW1ldGVycy4KICBSZXR1cm5zIE5vbmUg
b3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi4KLSB1cGxvYWQgKHB5eGNfbGl2ZXBhdGNoX3VwbG9hZCk6
CiAgUmVxdWlyZXMgYSBwYXlsb2FkIG5hbWUgYW5kIGEgbW9kdWxlJ3MgZmlsZW5hbWUgYXMgYW4g
aW5wdXQuCiAgUmV0dXJucyBOb25lIG9yIHRocm93cyBhbiBleGNlcHRpb24uCi0gbGlzdCAocHl4
Y19saXZlcGF0Y2hfbGlzdCk6CiAgVGFrZXMgbm8gcGFyYW1ldGVycy4KICBSZXR1cm5zIGEgbGlz
dCBvZiBkaWN0cyBjb250YWluaW5nIGVhY2ggcGF5bG9hZCdzOgogICogbmFtZSBhcyBhIHN0cmlu
ZwogICogc3RhdGUgYXMgYSBzdHJpbmcKICAqIHJldHVybiBjb2RlIGFzIGFuIGludGVnZXIKICAq
IGxpc3Qgb2YgbWV0YWRhdGEga2V5PXZhbHVlIHN0cmluZ3MKCkVhY2ggZnVuY3Rpb25zIHRocm93
cyBhbiBleGNlcHRpb24gZXJyb3IgYmFzZWQgb24gdGhlIGVycm5vIHZhbHVlCnJlY2VpdmVkIGZy
b20gaXRzIGNvcnJlc3BvbmRpbmcgbGlieGMgZnVuY3Rpb24gY2FsbC4KClNpZ25lZC1vZmYtYnk6
IFBhd2VsIFdpZWN6b3JraWV3aWN6IDx3aXBhd2VsQGFtYXpvbi5kZT4KUmV2aWV3ZWQtYnk6IE1h
cnRpbiBNYXplaW4gPGFtYXplaW5AYW1hem9uLmRlPgpSZXZpZXdlZC1ieTogQW5kcmEtSXJpbmEg
UGFyYXNjaGl2IDxhbmRyYXByc0BhbWF6b24uY29tPgpSZXZpZXdlZC1ieTogTGVvbmFyZCBGb2Vy
c3RlciA8Zm9lcnNsZW9AYW1hem9uLmRlPgpSZXZpZXdlZC1ieTogTm9yYmVydCBNYW50aGV5IDxu
bWFudGhleUBhbWF6b24uZGU+CkFja2VkLWJ5OiBNYXJlayBNYXJjenlrb3dza2ktR8OzcmVja2kg
PG1hcm1hcmVrQGludmlzaWJsZXRoaW5nc2xhYi5jb20+Ci0tLQpDaGFuZ2VkIHNpbmNlIHY0Ogog
ICogY2hhbmdlZCBmbGFncyBmaWVsZCB0eXBlIGZyb20gdWludDY0X3QgdG8gdWludDMyX3QKICAq
IGZpeGVkIGxlYWtpbmcgZmQgaW4gcHl4Y19saXZlcGF0Y2hfdXBsb2FkKCkKCkNoYW5nZWQgc2lu
Y2UgdjM6CiAgKiByZXR1cm4gTm9uZSBpbnN0ZWFkIG9mIGludGVnZXIgMCBmcm9tIHB5eGNfbGl2
ZXBhdGNoX2FjdGlvbigpCiAgICBhbmQgcHl4Y19saXZlcGF0Y2hfdXBsb2FkKCkKICAqIHVzZSBm
c3RhdCgpIGluc3RlYWQgb2Ygc3RhdCgpCiAgKiBzaW1wbGlmeSBlcnJvciBjb25kaXRpb24gaGFu
ZGxpbmcgY29kZSBmb3IgcHl4Y19saXZlcGF0Y2hfdXBsb2FkCiAgICBhbmQgYWxzbyBzYXZlIGFu
ZCByZXN0b3JlIGVycm5vIHZhbHVlCiAgKiBjaGVjayBkb25lIGFuZCBsZWZ0IHZhbHVlcyB0byBo
YW5kbGUgZXJyb3JzIGluCiAgICBweXhjX2xpdmVwYXRjaF9saXN0KCkKICAqIHVzZSBQeUxpc3Rf
U0VUX0lURU0oKSB0byBhdm9pZCB0aGUgbmVlZCBmb3IgUHlERUNSRUYKCkNoYW5nZWQgc2luY2Ug
djE6CiAgKiBjaGFuZ2VkIFB5TGlzdF9BcHBlbmQoKSB3aXRoIFB5TGlzdF9TZXRJdGVtKCkgYXMg
cmVxdWVzdGVkIGJ5CiAgICBNYXJlawotLS0KIHRvb2xzL3B5dGhvbi94ZW4vbG93bGV2ZWwveGMv
eGMuYyB8IDI2OCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogMSBmaWxl
IGNoYW5nZWQsIDI2OCBpbnNlcnRpb25zKCspCgpkaWZmIC0tZ2l0IGEvdG9vbHMvcHl0aG9uL3hl
bi9sb3dsZXZlbC94Yy94Yy5jIGIvdG9vbHMvcHl0aG9uL3hlbi9sb3dsZXZlbC94Yy94Yy5jCmlu
ZGV4IDQ0ZDM2MDYxNDEuLjlhMWQzYjZiOTIgMTAwNjQ0Ci0tLSBhL3Rvb2xzL3B5dGhvbi94ZW4v
bG93bGV2ZWwveGMveGMuYworKysgYi90b29scy9weXRob24veGVuL2xvd2xldmVsL3hjL3hjLmMK
QEAgLTE5NzksNiArMTk3OSwyMjUgQEAgc3RhdGljIFB5T2JqZWN0ICpweWZsYXNrX2FjY2VzcyhQ
eU9iamVjdCAqc2VsZiwgUHlPYmplY3QgKmFyZ3MsCiAgICAgcmV0dXJuIFB5X0J1aWxkVmFsdWUo
ImkiLHJldCk7CiB9CiAKK3N0YXRpYyBQeU9iamVjdCAqcHl4Y19saXZlcGF0Y2hfc3RhdHVzKFhj
T2JqZWN0ICpzZWxmLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHlP
YmplY3QgKmFyZ3MsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQeU9i
amVjdCAqa3dkcykKK3sKKyAgICB4ZW5fbGl2ZXBhdGNoX3N0YXR1c190IHN0YXR1czsKKyAgICBQ
eU9iamVjdCAqaW5mb19kaWN0ID0gTlVMTDsKKyAgICBjaGFyICpuYW1lOworICAgIGludCByYzsK
KworICAgIHN0YXRpYyBjaGFyICprd2RfbGlzdFtdID0geyAibmFtZSIsIE5VTEwgfTsKKworICAg
IGlmICggIVB5QXJnX1BhcnNlVHVwbGVBbmRLZXl3b3JkcyhhcmdzLCBrd2RzLCAicyIsIGt3ZF9s
aXN0LCAmbmFtZSkgKQorICAgICAgICBnb3RvIGVycm9yOworCisgICAgcmMgPSB4Y19saXZlcGF0
Y2hfZ2V0KHNlbGYtPnhjX2hhbmRsZSwgbmFtZSwgJnN0YXR1cyk7CisgICAgaWYgKCByYyApCisg
ICAgICAgIGdvdG8gZXJyb3I7CisKKyAgICBpbmZvX2RpY3QgPSBQeV9CdWlsZFZhbHVlKAorICAg
ICAgICAgICAgIntzOmksczppfSIsCisgICAgICAgICAgICAic3RhdGUiLCAgICBzdGF0dXMuc3Rh
dGUsCisgICAgICAgICAgICAicmMiLCAgICAgICBzdGF0dXMucmMpOworCitlcnJvcjoKKyAgICBy
ZXR1cm4gaW5mb19kaWN0ID86IHB5eGNfZXJyb3JfdG9fZXhjZXB0aW9uKHNlbGYtPnhjX2hhbmRs
ZSk7Cit9CisKK3N0YXRpYyBQeU9iamVjdCAqcHl4Y19saXZlcGF0Y2hfYWN0aW9uKFhjT2JqZWN0
ICpzZWxmLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHlPYmplY3Qg
KmFyZ3MsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQeU9iamVjdCAq
a3dkcykKK3sKKyAgICBpbnQgKCphY3Rpb25fZnVuYykoeGNfaW50ZXJmYWNlICp4Y2gsIGNoYXIg
Km5hbWUsIHVpbnQzMl90IHRpbWVvdXQsIHVpbnQzMl90IGZsYWdzKTsKKyAgICBjaGFyICpuYW1l
OworICAgIHVuc2lnbmVkIGludCBhY3Rpb247CisgICAgdWludDMyX3QgdGltZW91dDsKKyAgICB1
aW50MzJfdCBmbGFnczsKKyAgICBpbnQgcmMgPSAtMTsKKworICAgIHN0YXRpYyBjaGFyICprd2Rf
bGlzdFtdID0geyAibmFtZSIsICJhY3Rpb24iLCAidGltZW91dCIsICJmbGFncyIsIE5VTEwgfTsK
KworICAgIGlmICggIVB5QXJnX1BhcnNlVHVwbGVBbmRLZXl3b3JkcyhhcmdzLCBrd2RzLCAic0l8
SWsiLCBrd2RfbGlzdCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5h
bWUsICZhY3Rpb24sICZ0aW1lb3V0LCAmZmxhZ3MpICkKKyAgICAgICAgZ290byBlcnJvcjsKKwor
ICAgIHN3aXRjaCAoYWN0aW9uKQorICAgIHsKKyAgICBjYXNlIExJVkVQQVRDSF9BQ1RJT05fVU5M
T0FEOgorICAgICAgICBhY3Rpb25fZnVuYyA9IHhjX2xpdmVwYXRjaF91bmxvYWQ7CisgICAgICAg
IGJyZWFrOworICAgIGNhc2UgTElWRVBBVENIX0FDVElPTl9SRVZFUlQ6CisgICAgICAgIGFjdGlv
bl9mdW5jID0geGNfbGl2ZXBhdGNoX3JldmVydDsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBM
SVZFUEFUQ0hfQUNUSU9OX0FQUExZOgorICAgICAgICBhY3Rpb25fZnVuYyA9IHhjX2xpdmVwYXRj
aF9hcHBseTsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBMSVZFUEFUQ0hfQUNUSU9OX1JFUExB
Q0U6CisgICAgICAgIGFjdGlvbl9mdW5jID0geGNfbGl2ZXBhdGNoX3JlcGxhY2U7CisgICAgICAg
IGJyZWFrOworICAgIGRlZmF1bHQ6CisgICAgICAgIGdvdG8gZXJyb3I7CisgICAgfQorCisgICAg
cmMgPSBhY3Rpb25fZnVuYyhzZWxmLT54Y19oYW5kbGUsIG5hbWUsIHRpbWVvdXQsIGZsYWdzKTsK
KworZXJyb3I6CisgICAgcmV0dXJuIHJjID8gcHl4Y19lcnJvcl90b19leGNlcHRpb24oc2VsZi0+
eGNfaGFuZGxlKSA6IFB5X05vbmU7Cit9CisKK3N0YXRpYyBQeU9iamVjdCAqcHl4Y19saXZlcGF0
Y2hfdXBsb2FkKFhjT2JqZWN0ICpzZWxmLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgUHlPYmplY3QgKmFyZ3MsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBQeU9iamVjdCAqa3dkcykKK3sKKyAgICB1bnNpZ25lZCBjaGFyICpmYnVmID0gTUFQ
X0ZBSUxFRDsKKyAgICBjaGFyICpuYW1lLCAqZmlsZW5hbWU7CisgICAgc3RydWN0IHN0YXQgYnVm
OworICAgIGludCBmZCA9IDAsIHJjID0gLTEsIHNhdmVkX2Vycm5vOworICAgIHNzaXplX3QgbGVu
OworCisgICAgc3RhdGljIGNoYXIgKmt3ZF9saXN0W10gPSB7ICJuYW1lIiwgImZpbGVuYW1lIiwg
TlVMTCB9OworCisgICAgaWYgKCAhUHlBcmdfUGFyc2VUdXBsZUFuZEtleXdvcmRzKGFyZ3MsIGt3
ZHMsICJzcyIsIGt3ZF9saXN0LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAmbmFtZSwgJmZpbGVuYW1lKSkKKyAgICAgICAgZ290byBlcnJvcjsKKworICAgIGZkID0gb3Bl
bihmaWxlbmFtZSwgT19SRE9OTFkpOworICAgIGlmICggZmQgPCAwICkKKyAgICAgICAgZ290byBl
cnJvcjsKKworICAgIGlmICggZnN0YXQoZmQsICZidWYpICE9IDAgKQorICAgICAgICBnb3RvIGVy
cm9yX2ZkOworCisgICAgbGVuID0gYnVmLnN0X3NpemU7CisgICAgZmJ1ZiA9IG1tYXAoMCwgbGVu
LCBQUk9UX1JFQUQsIE1BUF9QUklWQVRFLCBmZCwgMCk7CisgICAgaWYgKCBmYnVmID09IE1BUF9G
QUlMRUQgKQorICAgICAgICBnb3RvIGVycm9yX2ZkOworCisgICAgcmMgPSB4Y19saXZlcGF0Y2hf
dXBsb2FkKHNlbGYtPnhjX2hhbmRsZSwgbmFtZSwgZmJ1ZiwgbGVuKTsKKworICAgIHNhdmVkX2Vy
cm5vID0gZXJybm87CisgICAgbXVubWFwKGZidWYsIGxlbik7CisgICAgZXJybm8gPSBzYXZlZF9l
cnJubzsKKworZXJyb3JfZmQ6CisgICAgY2xvc2UoZmQpOworZXJyb3I6CisgICAgcmV0dXJuIHJj
ID8gcHl4Y19lcnJvcl90b19leGNlcHRpb24oc2VsZi0+eGNfaGFuZGxlKSA6IFB5X05vbmU7Cit9
CisKK3N0YXRpYyBQeU9iamVjdCAqcHl4Y19saXZlcGF0Y2hfbGlzdChYY09iamVjdCAqc2VsZikK
K3sKKyAgICBQeU9iamVjdCAqbGlzdCA9IFB5X05vbmU7CisgICAgdW5zaWduZWQgaW50IG5yLCBk
b25lLCBsZWZ0LCBpOworICAgIHhlbl9saXZlcGF0Y2hfc3RhdHVzX3QgKmluZm8gPSBOVUxMOwor
ICAgIGNoYXIgKm5hbWUgPSBOVUxMOworICAgIGNoYXIgKm1ldGFkYXRhID0gTlVMTDsKKyAgICB1
aW50MzJfdCAqbGVuID0gTlVMTDsKKyAgICB1aW50MzJfdCAqbWV0YWRhdGFfbGVuID0gTlVMTDsK
KyAgICB1aW50MzJfdCBuYW1lX3RvdGFsX3NpemUsIG1ldGFkYXRhX3RvdGFsX3NpemU7CisgICAg
dWludDMyX3QgbmFtZV9vZmYsIG1ldGFkYXRhX29mZjsKKyAgICBpbnQgcmM7CisKKyAgICBkb25l
ID0gbGVmdCA9IDA7CisgICAgcmMgPSB4Y19saXZlcGF0Y2hfbGlzdF9nZXRfc2l6ZXMoc2VsZi0+
eGNfaGFuZGxlLCAmbnIsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5h
bWVfdG90YWxfc2l6ZSwgJm1ldGFkYXRhX3RvdGFsX3NpemUpOworICAgIGlmICggcmMgKQorICAg
ICAgICBnb3RvIGVycm9yOworCisgICAgaWYgKCBuciA9PSAwICkKKyAgICAgICAgcmV0dXJuIFB5
TGlzdF9OZXcoMCk7CisKKyAgICByYyA9IEVOT01FTTsKKyAgICBpbmZvID0gbWFsbG9jKG5yICog
c2l6ZW9mKCppbmZvKSk7CisgICAgaWYgKCAhaW5mbyApCisgICAgICAgIGdvdG8gZXJyb3I7CisK
KyAgICBuYW1lID0gbWFsbG9jKG5hbWVfdG90YWxfc2l6ZSAqIHNpemVvZigqbmFtZSkpOworICAg
IGlmICggIW5hbWUgKQorICAgICAgICBnb3RvIGVycm9yOworCisgICAgbGVuID0gbWFsbG9jKG5y
ICogc2l6ZW9mKCpsZW4pKTsKKyAgICBpZiAoICFsZW4gKQorICAgICAgICBnb3RvIGVycm9yOwor
CisgICAgbWV0YWRhdGEgPSBtYWxsb2MobWV0YWRhdGFfdG90YWxfc2l6ZSAqIHNpemVvZigqbWV0
YWRhdGEpKTsKKyAgICBpZiAoICFtZXRhZGF0YSApCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAg
ICBtZXRhZGF0YV9sZW4gPSBtYWxsb2MobnIgKiBzaXplb2YoKm1ldGFkYXRhX2xlbikpOworICAg
IGlmICggIW1ldGFkYXRhX2xlbiApCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAgICByYyA9IHhj
X2xpdmVwYXRjaF9saXN0KHNlbGYtPnhjX2hhbmRsZSwgbnIsIDAsIGluZm8sCisgICAgICAgICAg
ICAgICAgICAgICAgICAgICBuYW1lLCBsZW4sIG5hbWVfdG90YWxfc2l6ZSwKKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgIG1ldGFkYXRhLCBtZXRhZGF0YV9sZW4sIG1ldGFkYXRhX3RvdGFsX3Np
emUsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAmZG9uZSwgJmxlZnQpOworICAgIGlmICgg
cmMgKQorICAgICAgICBnb3RvIGVycm9yOworCisgICAgaWYgKCBkb25lICE9IG5yIHx8IGxlZnQg
PiAwICkKKyAgICB7CisgICAgICAgIHJjID0gRUZBVUxUOworICAgICAgICBnb3RvIGVycm9yOwor
ICAgIH0KKworICAgIGxpc3QgPSBQeUxpc3RfTmV3KGRvbmUpOworICAgIG5hbWVfb2ZmID0gbWV0
YWRhdGFfb2ZmID0gMDsKKyAgICBmb3IgKCBpID0gMDsgaSA8IGRvbmU7IGkrKyApCisgICAgewor
ICAgICAgICBQeU9iamVjdCAqaW5mb19kaWN0LCAqbWV0YWRhdGFfbGlzdDsKKyAgICAgICAgY2hh
ciAqbmFtZV9zdHIsICptZXRhZGF0YV9zdHI7CisKKyAgICAgICAgbmFtZV9zdHIgPSBuYW1lICsg
bmFtZV9vZmY7CisgICAgICAgIG1ldGFkYXRhX3N0ciA9IG1ldGFkYXRhICsgbWV0YWRhdGFfb2Zm
OworCisgICAgICAgIG1ldGFkYXRhX2xpc3QgPSBQeUxpc3RfTmV3KDApOworICAgICAgICBmb3Ig
KCBjaGFyICpzID0gbWV0YWRhdGFfc3RyOyBzIDwgbWV0YWRhdGFfc3RyICsgbWV0YWRhdGFfbGVu
W2ldOyBzICs9IHN0cmxlbihzKSArIDEgKQorICAgICAgICB7CisgICAgICAgICAgICBQeU9iamVj
dCAqZmllbGQgPSBQeV9CdWlsZFZhbHVlKCJzIiwgcyk7CisgICAgICAgICAgICBpZiAoIGZpZWxk
ID09IE5VTEwgKQorICAgICAgICAgICAgeworICAgICAgICAgICAgICAgIFB5X0RFQ1JFRihsaXN0
KTsKKyAgICAgICAgICAgICAgICBQeV9ERUNSRUYobWV0YWRhdGFfbGlzdCk7CisgICAgICAgICAg
ICAgICAgcmMgPSBFRkFVTFQ7CisgICAgICAgICAgICAgICAgZ290byBlcnJvcjsKKyAgICAgICAg
ICAgIH0KKworICAgICAgICAgICAgUHlMaXN0X0FwcGVuZChtZXRhZGF0YV9saXN0LCBmaWVsZCk7
CisgICAgICAgICAgICBQeV9ERUNSRUYoZmllbGQpOworICAgICAgICB9CisKKyAgICAgICAgaW5m
b19kaWN0ID0gUHlfQnVpbGRWYWx1ZSgKKyAgICAgICAgICAgICJ7czpzLHM6aSxzOmksczpOfSIs
CisgICAgICAgICAgICAibmFtZSIsICAgICBuYW1lX3N0ciwKKyAgICAgICAgICAgICJzdGF0ZSIs
ICAgIGluZm9baV0uc3RhdGUsCisgICAgICAgICAgICAicmMiLCAgICAgICBpbmZvW2ldLnJjLAor
ICAgICAgICAgICAgIm1ldGFkYXRhIiwgbWV0YWRhdGFfbGlzdCk7CisKKyAgICAgICAgaWYgKCBp
bmZvX2RpY3QgPT0gTlVMTCApCisgICAgICAgIHsKKyAgICAgICAgICAgIFB5X0RFQ1JFRihsaXN0
KTsKKyAgICAgICAgICAgIFB5X0RFQ1JFRihtZXRhZGF0YV9saXN0KTsKKyAgICAgICAgICAgIHJj
ID0gRUZBVUxUOworICAgICAgICAgICAgZ290byBlcnJvcjsKKyAgICAgICAgfQorICAgICAgICBQ
eUxpc3RfU0VUX0lURU0obGlzdCwgaSwgaW5mb19kaWN0KTsKKworICAgICAgICBuYW1lX29mZiAr
PSBsZW5baV07CisgICAgICAgIG1ldGFkYXRhX29mZiArPSBtZXRhZGF0YV9sZW5baV07CisgICAg
fQorCitlcnJvcjoKKyAgICBmcmVlKGluZm8pOworICAgIGZyZWUobmFtZSk7CisgICAgZnJlZShs
ZW4pOworICAgIGZyZWUobWV0YWRhdGEpOworICAgIGZyZWUobWV0YWRhdGFfbGVuKTsKKyAgICBy
ZXR1cm4gcmMgPyBweXhjX2Vycm9yX3RvX2V4Y2VwdGlvbihzZWxmLT54Y19oYW5kbGUpIDogbGlz
dDsKK30KKwogc3RhdGljIFB5TWV0aG9kRGVmIHB5eGNfbWV0aG9kc1tdID0gewogICAgIHsgImRv
bWFpbl9jcmVhdGUiLCAKICAgICAgIChQeUNGdW5jdGlvbilweXhjX2RvbWFpbl9jcmVhdGUsIApA
QCAtMjU0Miw2ICsyNzYxLDQ0IEBAIHN0YXRpYyBQeU1ldGhvZERlZiBweXhjX21ldGhvZHNbXSA9
IHsKICAgICAgICJSZXR1cm5zOiBbaW50XTogMCBvbiBhbGwgcGVybWlzc2lvbiBncmFudGVkOyAt
MSBpZiBhbnkgcGVybWlzc2lvbnMgYXJlIFwKICAgICAgICBkZW5pZWRcbiIgfSwgCiAKKyAgICB7
ICJsaXZlcGF0Y2hfc3RhdHVzIiwKKyAgICAgIChQeUNGdW5jdGlvbilweXhjX2xpdmVwYXRjaF9z
dGF0dXMsCisgICAgICBNRVRIX0tFWVdPUkRTLCAiXG4iCisgICAgICAiR2V0cyBjdXJyZW50IHN0
YXRlIGFuZCByZXR1cm4gY29kZSBmb3IgYSBzcGVjaWZpZWQgbW9kdWxlLlxuIgorICAgICAgIiBu
YW1lICAgICBbc3RyXTogTW9kdWxlIG5hbWUgdG8gYmUgdXNlZFxuIgorICAgICAgIlJldHVybnM6
IFtkaWN0XSBvbiBzdWNjZXNzOyB0aHJvd2luZyBhbiBleGNlcHRpb24gb24gZXJyb3JcbiIKKyAg
ICAgICIgc3RhdGUgICAgW2ludF06IE1vZHVsZSBjdXJyZW50IHN0YXRlOiBDSEVDS0VEIG9yIEFQ
UExJRURcbiIKKyAgICAgICIgcmMgICAgICAgW2ludF06IFJldHVybiBjb2RlIG9mIGxhc3QgbW9k
dWxlJ3Mgb3BlcmF0aW9uXG4iIH0sCisKKyAgICB7ICJsaXZlcGF0Y2hfdXBsb2FkIiwKKyAgICAg
IChQeUNGdW5jdGlvbilweXhjX2xpdmVwYXRjaF91cGxvYWQsCisgICAgICBNRVRIX0tFWVdPUkRT
LCAiXG4iCisgICAgICAiVXBsb2FkcyBhIG1vZHVsZSB3aXRoIHNwZWNpZmllZCBuYW1lIGZyb20g
ZmlsZW5hbWUuXG4iCisgICAgICAiIG5hbWUgICAgIFtzdHJdOiBNb2R1bGUgbmFtZSB0byBiZSB1
c2VkXG4iCisgICAgICAiIGZpbGVuYW1lIFtzdHJdOiBGaWxlbmFtZSBvZiBhIG1vZHVsZSB0byBi
ZSB1cGxvYWRlZFxuIgorICAgICAgIlJldHVybnM6IE5vbmUgb24gc3VjY2VzczsgdGhyb3dpbmcg
YW4gZXhjZXB0aW9uIG9uIGVycm9yXG4iIH0sCisKKyAgICB7ICJsaXZlcGF0Y2hfYWN0aW9uIiwK
KyAgICAgIChQeUNGdW5jdGlvbilweXhjX2xpdmVwYXRjaF9hY3Rpb24sCisgICAgICBNRVRIX0tF
WVdPUkRTLCAiXG4iCisgICAgICAiUGVyZm9ybXMgYW4gYWN0aW9uICh1bmxvYWQsIHJldmVydCwg
YXBwbHkgb3IgcmVwbGFjZSkgb24gYSBzcGVjaWZpZWQgXAorICAgICAgIG1vZHVsZS5cbiIKKyAg
ICAgICIgbmFtZSAgICAgIFtzdHJdOiBNb2R1bGUgbmFtZSB0byBiZSB1c2VkXG4iCisgICAgICAi
IGFjdGlvbiAgIFt1aW50XTogQWN0aW9uIGVudW0gaWRcbiIKKyAgICAgICIgdGltZW91dCAgW3Vp
bnRdOiBBY3Rpb24gc2NoZWR1bGVkIGV4ZWN1dGlvbiB0aW1lb3V0XG4iCisgICAgICAiIGZsYWdz
ICAgW3Vsb25nXTogRmxhZ3Mgc3BlY2lmeWluZyBhY3Rpb24ncyBleHRyYSBwYXJhbWV0ZXJzXG4i
CisgICAgICAiUmV0dXJuczogTm9uZSBvbiBzdWNjZXNzOyB0aHJvd2luZyBhbiBleGNlcHRpb24g
b24gZXJyb3JcbiIgfSwKKworICAgIHsgImxpdmVwYXRjaF9saXN0IiwKKyAgICAgIChQeUNGdW5j
dGlvbilweXhjX2xpdmVwYXRjaF9saXN0LAorICAgICAgTUVUSF9OT0FSR1MsICJcbiIKKyAgICAg
ICJMaXN0IGFsbCB1cGxvYWRlZCBsaXZlcGF0Y2ggbW9kdWxlcyB3aXRoIHRoZWlyIGN1cnJlbnQg
c3RhdGUgYW5kIG1ldGFkYXRhLlxuIgorICAgICAgIlJldHVybnM6IFtsaXN0IG9mIGRpY3RzXSBv
biBzdWNjZXNzOyB0aHJvd2luZyBhbiBleGNlcHRpb24gb24gZXJyb3JcbiIKKyAgICAgICIgbmFt
ZSAgICAgW3N0cl06IE1vZHVsZSBuYW1lXG4iCisgICAgICAiIHN0YXRlICAgIFtpbnRdOiBNb2R1
bGUgY3VycmVudCBzdGF0ZTogQ0hFQ0tFRCBvciBBUFBMSUVEXG4iCisgICAgICAiIHJjICAgICAg
IFtpbnRdOiBSZXR1cm4gY29kZSBvZiBsYXN0IG1vZHVsZSdzIG9wZXJhdGlvblxuIgorICAgICAg
IiBtZXRhZGF0YSBbbGlzdF06IExpc3Qgb2YgbW9kdWxlJ3MgbWV0YWRhdGEgJ2tleT12YWx1ZScg
c3RyaW5nc1xuIiB9LAorCiAgICAgeyBOVUxMLCBOVUxMLCAwLCBOVUxMIH0KIH07CiAKQEAgLTI2
NTMsNiArMjkxMCwxNyBAQCBQeU1PRElOSVRfRlVOQyBpbml0eGModm9pZCkKICAgICBQeU1vZHVs
ZV9BZGRJbnRDb25zdGFudChtLCAiWEVOX1NDSEVEVUxFUl9DUkVESVQiLCBYRU5fU0NIRURVTEVS
X0NSRURJVCk7CiAgICAgUHlNb2R1bGVfQWRkSW50Q29uc3RhbnQobSwgIlhFTl9TQ0hFRFVMRVJf
Q1JFRElUMiIsIFhFTl9TQ0hFRFVMRVJfQ1JFRElUMik7CiAKKyAgICAvKiBFeHBvc2UgbGl2ZXBh
dGNoIGNvbnN0YW50cyB0byBQeXRob24gKi8KKyAgICBQeU1vZHVsZV9BZGRJbnRDb25zdGFudCht
LCAiTElWRVBBVENIX0FDVElPTl9VTkxPQUQiLCBMSVZFUEFUQ0hfQUNUSU9OX1VOTE9BRCk7Cisg
ICAgUHlNb2R1bGVfQWRkSW50Q29uc3RhbnQobSwgIkxJVkVQQVRDSF9BQ1RJT05fUkVWRVJUIiwg
TElWRVBBVENIX0FDVElPTl9SRVZFUlQpOworICAgIFB5TW9kdWxlX0FkZEludENvbnN0YW50KG0s
ICJMSVZFUEFUQ0hfQUNUSU9OX0FQUExZIiwgTElWRVBBVENIX0FDVElPTl9BUFBMWSk7CisgICAg
UHlNb2R1bGVfQWRkSW50Q29uc3RhbnQobSwgIkxJVkVQQVRDSF9BQ1RJT05fUkVQTEFDRSIsIExJ
VkVQQVRDSF9BQ1RJT05fUkVQTEFDRSk7CisKKyAgICBQeU1vZHVsZV9BZGRJbnRDb25zdGFudCht
LCAiTElWRVBBVENIX0FDVElPTl9BUFBMWV9OT0RFUFMiLCBMSVZFUEFUQ0hfQUNUSU9OX0FQUExZ
X05PREVQUyk7CisKKyAgICBQeU1vZHVsZV9BZGRJbnRDb25zdGFudChtLCAiTElWRVBBVENIX1NU
QVRFX0FQUExJRUQiLCBMSVZFUEFUQ0hfU1RBVEVfQVBQTElFRCk7CisgICAgUHlNb2R1bGVfQWRk
SW50Q29uc3RhbnQobSwgIkxJVkVQQVRDSF9TVEFURV9DSEVDS0VEIiwgTElWRVBBVENIX1NUQVRF
X0NIRUNLRUQpOworCiAjaWYgUFlfTUFKT1JfVkVSU0lPTiA+PSAzCiAgICAgcmV0dXJuIG07CiAj
ZW5kaWYKLS0gCjIuMTYuNQoKCgoKQW1hem9uIERldmVsb3BtZW50IENlbnRlciBHZXJtYW55IEdt
YkgKS3JhdXNlbnN0ci4gMzgKMTAxMTcgQmVybGluCkdlc2NoYWVmdHNmdWVocnVuZzogQ2hyaXN0
aWFuIFNjaGxhZWdlciwgUmFsZiBIZXJicmljaApFaW5nZXRyYWdlbiBhbSBBbXRzZ2VyaWNodCBD
aGFybG90dGVuYnVyZyB1bnRlciBIUkIgMTQ5MTczIEIKU2l0ejogQmVybGluClVzdC1JRDogREUg
Mjg5IDIzNyA4NzkKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9y
ZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

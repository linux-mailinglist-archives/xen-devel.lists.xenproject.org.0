Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 4DCC61831ED
	for <lists+xen-devel@lfdr.de>; Thu, 12 Mar 2020 14:46:37 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jCO8C-0002Sh-5E; Thu, 12 Mar 2020 13:44:12 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=+15/=45=gmail.com=raistlin.df@srs-us1.protection.inumbo.net>)
 id 1jCO8A-0002Sc-Nf
 for xen-devel@lists.xenproject.org; Thu, 12 Mar 2020 13:44:10 +0000
X-Inumbo-ID: 8cd4c5b2-6467-11ea-bec1-bc764e2007e4
Received: from mail-wm1-f65.google.com (unknown [209.85.128.65])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 8cd4c5b2-6467-11ea-bec1-bc764e2007e4;
 Thu, 12 Mar 2020 13:44:10 +0000 (UTC)
Received: by mail-wm1-f65.google.com with SMTP id e26so6352928wme.5
 for <xen-devel@lists.xenproject.org>; Thu, 12 Mar 2020 06:44:09 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:from:to:cc:date:message-id:user-agent
 :mime-version:content-transfer-encoding;
 bh=rvSgpMRc10wjqlEjUeYgDJmB8sVCTMYc8+s0onQKcm4=;
 b=gofcBWkjQxO1d5l33+MMxe7Y3FAf/k/eUaApjx5fCTtBeRMJEI7fNTgcrak1y0RyBO
 cGxtKkxmiaoetzUbX7rIvoxoZv4nUC9laIy52YaaVS/RJ3DWTmUZGn67CUXRQNaYBxM8
 0wIieeM9DNjGYlie/aerZPmVAAzHDcq+KppOCqak78dFQUHaweOpUJeOmfBdx+PwVP1k
 +kq7libI1Yv+NNsnEY9SwE791PqYvA3L1WPu8aEMor01gNSOEuzziAyklSrwqL7tEi1I
 z+mDODsCWS4GkhYRf2Hdbt05Uz82f3osvE5KtNSIZiX/w9TWJflceippzM60yh2pSyhX
 mxkA==
X-Gm-Message-State: ANhLgQ0DpfGHd9Cku4b8cKpGXzjOycDXMZ9IQkC3ihpwlcmw8ZhIDqFC
 B1wCUlXHF7pFaYcr1Dx/Stg=
X-Google-Smtp-Source: ADFU+vv/EiJPH20iAFaXi5JZDEj4Hmupi6jhfYiUNaG4sMdSrIdKz5IlHg2V1EdZov/HDXqXXpG8pg==
X-Received: by 2002:a1c:a78a:: with SMTP id q132mr5004398wme.107.1584020648989; 
 Thu, 12 Mar 2020 06:44:08 -0700 (PDT)
Received: from [192.168.0.36] (87.78.186.89.cust.ip.kpnqwest.it.
 [89.186.78.87])
 by smtp.gmail.com with ESMTPSA id a186sm12590829wmh.33.2020.03.12.06.44.07
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 12 Mar 2020 06:44:08 -0700 (PDT)
From: Dario Faggioli <dfaggioli@suse.com>
To: xen-devel@lists.xenproject.org
Date: Thu, 12 Mar 2020 14:44:07 +0100
Message-ID: <158402056376.753.7091379488590272336.stgit@Palanthas>
User-Agent: StGit/0.21
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH 0/2] xen: credit2: fix vcpu starvation due to
 too few credits
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Charles Arnold <carnold@suse.com>,
 Jan Beulich <jbeulich@suse.com>, Glen <glenbarney@gmail.com>,
 George Dunlap <george.dunlap@citrix.com>, Tomas Mozes <hydrapolic@gmail.com>,
 Sarah Newman <srn@prgmr.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGVsbG8gZXZlcnlvbmUsCgpUaGVyZSBoYXZlIGJlZW4gcmVwb3J0cyBvZiBhIENyZWRpdDIgaXNz
dWUgZHVlIHRvIHdoaWNoIHZDUFVzIHdoZXJlCmJlaW5nIHN0YXJ2ZWQsIHRvIHRoZSBwb2ludCB0
aGF0IGd1ZXN0IGtlcm5lbCB3b3VsZCBjb21wbGFpbiBvciBldmVuCmNyYXNoLgoKU2VlIHRoZSBm
b2xsb3dpbmcgeGVuLXVzZXJzIGFuZCB4ZW4tZGV2ZWwgdGhyZWFkczoKaHR0cHM6Ly9saXN0cy54
ZW5wcm9qZWN0Lm9yZy9hcmNoaXZlcy9odG1sL3hlbi11c2Vycy8yMDIwLTAyL21zZzAwMDE4Lmh0
bWwKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9hcmNoaXZlcy9odG1sL3hlbi11c2Vycy8y
MDIwLTAyL21zZzAwMDE1Lmh0bWwKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9hcmNoaXZl
cy9odG1sL3hlbi1kZXZlbC8yMDIwLTAyL21zZzAxMTU4Lmh0bWwKCkkgZGlkIHNvbWUgaW52ZXN0
aWdhdGlvbnMsIGFuZCBmaWd1cmVkIG91dCB0aGF0IHRoZSB2Q1BVcyBpbiBxdWVzdGlvbgphcmUg
bm90IHNjaGVkdWxlZCBmb3IgbG9uZyB0aW1lIGludGVydmFscyBiZWNhdXNlIHRoZXkgc29tZWhv
dyBtYW5hZ2UgdG8KYmUgZ2l2ZW4gYW4gYW1vdW50IG9mIGNyZWRpdHMgd2hpY2ggaXMgbGVzcyB0
aGFuIHRoZSBjcmVkaXQgdGhlIGlkbGUKdkNQVSBoYXMuCgpBbiBleGFtcGxlIG9mIHRoaXMgc2l0
dWF0aW9uIGlzIHNob3duIGhlcmUuIEluIGZhY3QsIHdlIGNhbiBzZWUgZDB2MQpzaXR0aW5nIGlu
IHRoZSBydW5xdWV1ZSB3aGlsZSBhbGwgdGhlIENQVXMgYXJlIGlkbGUsIGFzIGl0IGhhcwotMTI1
NDIzODI3MCBjcmVkaXRzLCB3aGljaCBpcyBzbWFsbGVyIHRoYW4gLTJeMzAgPSDiiJIxMDczNzQx
ODI0OgoKICAgIChYRU4pIFJ1bnF1ZXVlIDA6CiAgICAoWEVOKSAgIG5jcHVzICAgICAgICAgICAg
ICA9IDI4CiAgICAoWEVOKSAgIGNwdXMgICAgICAgICAgICAgICA9IDAtMjcKICAgIChYRU4pICAg
bWF4X3dlaWdodCAgICAgICAgID0gMjU2CiAgICAoWEVOKSAgIHBpY2tfYmlhcyAgICAgICAgICA9
IDIyCiAgICAoWEVOKSAgIGluc3Rsb2FkICAgICAgICAgICA9IDEKICAgIChYRU4pICAgYXZlbG9h
ZCAgICAgICAgICAgID0gMjkzMzkxICh+MTExJSkKICAgIChYRU4pICAgaWRsZXJzOiAwMCwwMDAw
MDAwMCwwMDAwMDAwMCwwMDAwMDAwMCwwMDAwMDAwMCwwMDAwMDAwMCwwZmZmZmZmZgogICAgKFhF
TikgICB0aWNrbGVkOiAwMCwwMDAwMDAwMCwwMDAwMDAwMCwwMDAwMDAwMCwwMDAwMDAwMCwwMDAw
MDAwMCwwMDAwMDAwMAogICAgKFhFTikgICBmdWxseSBpZGxlIGNvcmVzOiAwMCwwMDAwMDAwMCww
MDAwMDAwMCwwMDAwMDAwMCwwMDAwMDAwMCwwMDAwMDAwMCwwZmZmZmZmZgogICAgWy4uLl0KICAg
IChYRU4pIFJ1bnF1ZXVlIDA6CiAgICAoWEVOKSBDUFVbMDBdIHJ1bnE9MCwgc2libGluZz0wMCwu
Li4sIGNvcmU9MDAsLi4uCiAgICAoWEVOKSBDUFVbMDFdIHJ1bnE9MCwgc2libGluZz0wMCwuLi4s
IGNvcmU9MDAsLi4uCiAgICBbLi4uXQogICAgKFhFTikgQ1BVWzI2XSBydW5xPTAsIHNpYmxpbmc9
MDAsLi4uLCBjb3JlPTAwLC4uLgogICAgKFhFTikgQ1BVWzI3XSBydW5xPTAsIHNpYmxpbmc9MDAs
Li4uLCBjb3JlPTAwLC4uLgogICAgKFhFTikgUlVOUToKICAgIChYRU4pICAgICAwOiBbMC4xXSBm
bGFncz0wIGNwdT01IGNyZWRpdD0tMTI1NDIzODI3MCBbdz0yNTZdIGxvYWQ9MjYyMTQ0ICh+MTAw
JSkKClRoaXMgaGFwcGVucyBiYWNhdXNlIC0tYWx0aG91Z2ggdmVyeSByYXJlbHktLSB2Q1BVcyBh
cmUgYWxsb3dlZCB0bwpleGVjdXRlIGZvciBtdWNoIG1vcmUgdGhhbiB0aGUgc2NoZWR1bGVyIHdv
dWxkIHdhbnQgdGhlbSB0by4KCkZvciBleGFtcGxlLCBJIGhhdmUgYSB0cmFjZSBzaG93aW5nIHRo
YXQgY3NjaGVkMl9zY2hlZHVsZSgpIGlzIGludm9rZWQgYXQKdD01Nzk3MDc0NjE1NW5zLiBBdCB0
PTU3OTcwNzQ3NjU4bnMgKCsxNTAzbnMpIHRoZSBzX3RpbWVyIGlzIHNldCB0bwpmaXJlIGF0IHQ9
NTc5Nzk0ODUwODNucywgaS5lLiwgODczODkyOG5zIGluIGZ1dHVyZS4gVGhhdCdzIGJlY2F1c2Ug
Y3JlZGl0Cm9mIHNuZXh0IGlzIGV4YWN0bHkgdGhhdCA4NzM4OTI4bnMuIFRoZW4sIHdoYXQgSSBz
ZWUgaXMgdGhhdCB0aGUgbmV4dApjYWxsIHRvIGJ1cm5fY3JlZGl0cygpLCBjb21pbmcgZnJvbSBj
c2NoZWQyX3NjaGVkdWxlKCkgZm9yIHRoZSBzYW1lIHZDUFUKaGFwcGVucyBhdCB0PTYwMDgzMjgz
NjE3bnMuIFRoYXQgaXMgKmEgbG90KiAoMjEwMzc5ODUzNG5zKSBsYXRlciB0aGFuCndoZW4gd2Ug
ZXhwZWN0ZWQgYW5kIGFza2VkLiBPZiBjb3Vyc2UsIHRoYXQgYWxzbyBtZWFucyB0aGF0IGRlbHRh
IGlzCjIxMTI1Mzc0NjJucywgYW5kIHRoZXJlZm9yZSBjcmVkaXRzIHdpbGwgc2luayB0byAtMjEw
Mzc5ODUzNCEKCkFsc28sIHRvIHRoZSBiZXN0IG9mIG15IGN1cnJlbnQga25vd2xlZGdlLCB0aGlz
IGRvZXMgbm90IGxvb2sgbGlrZQpDcmVkaXQyIHJlbGF0ZWQsIGFzIEkndmUgb2JzZXJ2ZWQgaXQg
d2hlbiBydW5uaW5nIHdpdGggQ3JlZGl0MSBhcyB3ZWxsLgpJIHBlcnNvbmFsbHkgZG9uJ3QgdGhp
bmsgaXQgd291bGQgYmUgc2NoZWR1bGluZyByZWxhdGVkLCBpbiBnZW5lcmFsLCBidXQKSSBuZWVk
IHRvIGRvIG1vcmUgaW52ZXN0aWdhdGlvbiB0byBiZSBzdXJlIGFib3V0IHRoYXQgKGFuZC9vciB0
byBmaWd1cmUKb3V0IHdoYXQgdGhlIHJlYWwgcm9vdCBjYXVzZSBpcykuCgpUaGUgcmVhc29uIHdo
eSBDcmVkaXQyIGlzIGFmZmVjdGVkIG11Y2ggbW9yZSB0aGFuIENyZWRpdDEgaXMgYmVjYXVzZSBv
Zgpob3cgdGltZSBhY2NvdW50aW5nIGlzIGRvbmUuIEJhc2ljYWxseSwgdGhlcmUncyB2ZXJ5IHJ1
ZGltZW50YWwgdGltZQphY2NvdW50aW5nIGluIENyZWRpdDEsIHdoaWNoIGlzIGEgdmVyeSBiYWQg
dGhpbmcsIElNTywgYnV0IGluZGVlZCB0aGF0CmlzIGFsc28gd2hhdCBwcmV2ZW50ZWQgZm9yIHRo
aXMgaXNzdWUgdG8gY2F1c2Ugc2V2ZXJlIHN0YWxscy4KCk9uZSBtb3JlIHRoaW5nIGlzIHRoYXQg
Q3JlZGl0MiBnaXZlcyAtMl4zMCBjcmVkaXRzIHRvIHRoZSBpZGxlIHZDUFUsIHdoaWNoCndhcyBj
b25zaWRlcmVkIHRvIGJlIGxvdyBlbm91Z2gsIHdoaWNoIGlzIHRydWUuIEJ1dCBpdCdzIG5vdCBh
IHJvYnVzdApjaG9pY2UsIHNob3VsZCBhbiBpc3N1ZSBsaWtlIHRoZSBvbmUgd2UncmUgZGlzY3Vz
c2luZyBvY2N1ciwgd2hpY2ggaXMKaGFwcGVuaW5nLiA6LSkgVGhlcmVmb3JlLCBJIHRoaW5rIHdl
IHNob3VsZCBsb3dlciB0aGUgY3JlZGl0cyBvZiB0aGUKaWRsZSB2Q1BVIHRvIHRoZSBtaW5pbXVt
IHBvc3NpYmxlIHZhbHVlLCBzbyB0aGF0IGV2ZW4gdW5kZXIgd2hhdGV2ZXIKdW51c3VhbCBvciB3
ZWlyZCBvciBidWdneSBzaXR1YXRpb25zIGxpa2UgdGhpcyBvbmUsIHdlIHdpbGwgbmV2ZXIgcGlj
awppZGxlIGluc3RlYWQgb2YgYW4gYWN0dWFsIHZDUFUgdGhhdCBpcyByZWFkeSB0byBydW4uCgpU
aGlzIGlzIHdoYXQgaXMgZG9uZSBpbiB0aGUgZmlyc3QgcGF0Y2ggb2YgdGhpcyBzZXJpZXMuIFRo
aXMgaXMgYQpyb2J1c3RuZXNzIGltcHJvdmVtZW50IGFuZCBhIGZpeCAob3IgYXQgbGVhc3QgdGhl
IGJlc3Qgd2F5IHdlIGNhbiBkZWFsCndpdGggdGhlIGl0IHdpdGhpbiB0aGUgc2NoZWR1bGVyKSBm
b3IgdGhlIGlzc3VlIGF0IGhhbmQuIEl0IHRoZXJlZm9yZQpzaG91bGQgYmUgYmFja3BvcnRlZC4K
CldoaWxlIGxvb2tpbmcgaW50byB0aGlzLCBJIGFsc28gaGF2ZSBmb3VuZCBvdXQgdGhhdCB0aGVy
ZSBpcyBhbiBhY3R1YWwKYnVnIGluIENyZWRpdDIgY29kZS4gSXQgaXMgc29tZXRoaW5nIEkgaW50
cm9kdWNlZCBteXNlbGYgd2l0aCBjb21taXQKNWU0YjQxOTk2NjdiOSAoInhlbjogY3JlZGl0Mjog
b25seSByZXNldCBjcmVkaXQgb24gcmVzZXQgY29uZGl0aW9uIikuCkluIGZhY3QsIHdoaWxlIGl0
IHdhcyBhbmQgc3RpbGwgaXMgYSBnb29kIGlkZWEgdG8gYXZvaWQgcmVzZXR0aW5nCmNyZWRpdHMg
dG9vIG9mdGVuLCB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhpcyB3YXMganVzdCB3cm9uZy4KCkEg
Zml4IGZvciB0aGlzIGJ1ZyBpcyB3aGF0IGlzIGNvbnRhaW5lZCBpbiBwYXRjaCAyLiBBbmQgaXQg
YWxzbyBzaG91bGQKYmUgYmFja3BvcnRlZC4KCk5vdGUgdGhhdCBwYXRjaCAyIGFsb25lIHdhcyBh
bHNvIGFscmVhZHkgbWl0aWdhdGluZyB0aGUgc3RhbGwvc3RhcnZhdGlvbgppc3N1ZSBxdWl0ZSBz
dWJzdGFudGlhbGx5LiBOZXZlcnRoZWxlc3MsIHRoZSBwcm9wZXIgZml4IGZvciB0aGUgaXNzdWUK
aXRzZWxmIGlzIG1ha2luZyBDcmVkaXQyIG1vcmUgcm9idXN0IGFnYWluc3Qgc2ltaWxhciBwcm9i
bGVtLCBhcyBkb25lIGluCnBhdGNoIDEsIHdoaWxlIHRoaXMgb3RoZXIgYnVnIGp1c3QgaGFwcGVu
cyB0byBiZSBzb21ldGhpbmcgd2hpY2gKaW50ZXJhY3Qgd2l0aCB0aGUgc3ltcHRob21zLgoKVGhp
cyB0byBzYXkgdGhhdCwgYWx0aG91Z2ggYm90aCBwYXRjaGVzIHdpbGwgYmUgYnVncG9ydGVkLCBh
c2JvdGggYXJlCmFjdHVhbCBidWdmaXhlcywgaWYgdGhlcmUgaXMgdGhlIG5lZWQgdG8gYXBwbHkg
c29tZXRoaW5nICJpbiBlbWVyZ2VuY3kiCnRvIGZpeCB0aGUgc3RhcnZhdGlvbiBwcm9ibGVtLCBh
cHBseWluZyBvbmx5IHBhdGNoIDEgaXMgZW5vdWdoLgoKVGhhbmtzIGFuZCBSZWdhcmRzCi0tLQpE
YXJpbyBGYWdnaW9saSAoMik6CiAgICAgIHhlbjogY3JlZGl0MjogYXZvaWQgdkNQVXMgdG8gZXZl
ciByZWFjaCBsb3dlciBjcmVkaXRzIHRoYW4gaWRsZQogICAgICB4ZW46IGNyZWRpdDI6IGZpeCBj
cmVkaXQgcmVzZXQgaGFwcGVuaW5nIHRvbyBmZXcgdGltZXMKCiB0b29scy94ZW50cmFjZS9mb3Jt
YXRzICAgICB8ICAgIDIgKy0KIHRvb2xzL3hlbnRyYWNlL3hlbmFseXplLmMgIHwgICAgOCArKyst
LS0tLQogeGVuL2NvbW1vbi9zY2hlZC9jcmVkaXQyLmMgfCAgIDMyICsrKysrKysrKysrKysrLS0t
LS0tLS0tLS0tLS0tLS0tCiAzIGZpbGVzIGNoYW5nZWQsIDE4IGluc2VydGlvbnMoKyksIDI0IGRl
bGV0aW9ucygtKQotLQpEYXJpbyBGYWdnaW9saSwgUGguRApodHRwOi8vYWJvdXQubWUvZGFyaW8u
ZmFnZ2lvbGkKVmlydHVhbGl6YXRpb24gU29mdHdhcmUgRW5naW5lZXIKU1VTRSBMYWJzLCBTVVNF
IGh0dHBzOi8vd3d3LnN1c2UuY29tLwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCjw8VGhpcyBoYXBwZW5zIGJlY2F1c2Ug
X0lfIGNob29zZSBpdCB0byBoYXBwZW4hPj4gKFJhaXN0bGluIE1hamVyZSkKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxp
c3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVj
dC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

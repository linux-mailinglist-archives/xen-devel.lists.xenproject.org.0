Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 8C0C41344A5
	for <lists+xen-devel@lfdr.de>; Wed,  8 Jan 2020 15:11:03 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ipC0q-00044H-C2; Wed, 08 Jan 2020 14:08:44 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=wfd2=25=bitdefender.com=aisaila@srs-us1.protection.inumbo.net>)
 id 1ipC0o-000442-R6
 for xen-devel@lists.xenproject.org; Wed, 08 Jan 2020 14:08:42 +0000
X-Inumbo-ID: 5da0a41a-3220-11ea-b7ff-12813bfff9fa
Received: from EUR05-VI1-obe.outbound.protection.outlook.com (unknown
 [40.107.21.116]) by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 5da0a41a-3220-11ea-b7ff-12813bfff9fa;
 Wed, 08 Jan 2020 14:08:38 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=jKuzWmBkta4oQa9hqllOktCmFOI5YFf6yS19Pwnvy5WiA6jl1WOnrdT+qdw/29kxyi843PknCQyaELCaiqSgLJ9dlETpyX8QYAkwJkcgbO2bC3NyJidpaRrg+FIuO38j1s6VFqi5+sasr8HrtI5DOh7GLQZo/QTLHG3DQKy5baH+ComnZQMwr3s9BG/l1rnpd3rB30pkcPNvriyLDE1QJAjMpBiEljp/VMPhjdR+z766JtL+65m2nvIKeau4V30XmCpsdPDFlIf0NKjcNrFOFCZgMp2kLecbyx9Y0Csu45cAgPa2IFEQWMaQFJdvlEZVwyLGTezhL83yKxvC9Wl95g==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=zJx4eNboYpQPoIh861Sk3aHxNgfwfUAdp2rk3h9Dzn8=;
 b=R6KCs9DKPklewsyl7IGn8pLv76or3gfE2/q+Aj+hgH1P/p+NhDDV9PkblKMtJorDiO56VLex2Li+mUdY3GY5aA0QxVzCghaaeeqZSspKObRxIk8mrcjIi13hkQ1Ekf9XLTEq9IrveKWLckxVniRBinKHye7h+RbUuuatdSlrFlUOb856pnUtC5Ov8/9OQe7I/CTiskixtfW+XQQKX+rKkzqWm+/9mnXbno/guGPIcoRpdpAx5CpWzU8P7hgvC5FqN0lQNwmXBKOBITJ08Co2hAIWJxNIT+Auo/MPExTXaSvE6m4+evJLAsr0P1MhITQ8DO+Ji1pSKrLZYoTAmT2dzg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=bitdefender.com; dmarc=pass action=none
 header.from=bitdefender.com; dkim=pass header.d=bitdefender.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=bitdefender.onmicrosoft.com; s=selector2-bitdefender-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=zJx4eNboYpQPoIh861Sk3aHxNgfwfUAdp2rk3h9Dzn8=;
 b=j+STwuGFxmfdL7z0CiEy2dM+I1x70nk1Gdlb5yB/ZK3rX7ndOKIkSMlojOPIPa17SSrSl2EJeXY9EuBHtiZlv/gagRJBiMIvZzFGagx7yIKwoK5tQ169O7+eZs4otSaWuR1d+Zu8FiTyttMleZ8Bz+ltpz8pWWI1+l5hHNbt2uo=
Received: from DB6PR02MB2999.eurprd02.prod.outlook.com (10.170.219.144) by
 DB6PR02MB3253.eurprd02.prod.outlook.com (10.170.221.151) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2602.12; Wed, 8 Jan 2020 14:08:36 +0000
Received: from DB6PR02MB2999.eurprd02.prod.outlook.com
 ([fe80::f1c2:7dd1:1131:1c1d]) by DB6PR02MB2999.eurprd02.prod.outlook.com
 ([fe80::f1c2:7dd1:1131:1c1d%7]) with mapi id 15.20.2623.008; Wed, 8 Jan 2020
 14:08:36 +0000
Received: from aisaila-Latitude-E5570.dsd.bitdefender.biz (91.199.104.6) by
 AM4PR05CA0023.eurprd05.prod.outlook.com (2603:10a6:205::36) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2623.9 via Frontend Transport; Wed, 8 Jan 2020 14:08:35 +0000
From: Alexandru Stefan ISAILA <aisaila@bitdefender.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH V7 2/4] x86/altp2m: Add hypercall to set a range of sve
 bits
Thread-Index: AQHVxi0eW7mND/zIzUWDdK2ePPvUVg==
Date: Wed, 8 Jan 2020 14:08:36 +0000
Message-ID: <20200108140810.6528-2-aisaila@bitdefender.com>
References: <20200108140810.6528-1-aisaila@bitdefender.com>
In-Reply-To: <20200108140810.6528-1-aisaila@bitdefender.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: AM4PR05CA0023.eurprd05.prod.outlook.com (2603:10a6:205::36)
 To DB6PR02MB2999.eurprd02.prod.outlook.com
 (2603:10a6:6:17::16)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=aisaila@bitdefender.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [91.199.104.6]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: dc49eeda-0e9f-40e9-f627-08d79444410b
x-ms-traffictypediagnostic: DB6PR02MB3253:|DB6PR02MB3253:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <DB6PR02MB32539FB8CFFAED12B13BE8B3AB3E0@DB6PR02MB3253.eurprd02.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:121;
x-forefront-prvs: 02760F0D1C
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(136003)(396003)(376002)(346002)(366004)(39850400004)(189003)(199004)(66446008)(16526019)(4326008)(66556008)(54906003)(8676002)(81156014)(66476007)(316002)(64756008)(81166006)(2906002)(6506007)(6512007)(7416002)(6916009)(52116002)(26005)(186003)(66946007)(5660300002)(8936002)(36756003)(1076003)(956004)(2616005)(107886003)(86362001)(478600001)(6486002)(71200400001);
 DIR:OUT; SFP:1102; SCL:1; SRVR:DB6PR02MB3253;
 H:DB6PR02MB2999.eurprd02.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: bitdefender.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: Ty66WO7rGUgEn48Ocn5PoqBG9puvdnCpqX6jZl70uhLYCVUtAMpeQATcRTteIMiBgn6epCP+rHrEKPb1KCgJsxnHR7alOscG4MB5lyu5PgzeSU8fYFsMwfWbrrUcWko5PrJAoxPvMUOqZ+8Qy/0eCHGehyVY5iJIjCqqkNm4kZEFHqcTm87pbjnvIyqWT8Yw2snyChQoVP6z9fF1K7fo5yW5isAk+G9VzWBxuy+5xG9vCyRR23/VbWAYJZxDCKV19jA/Jn/0KjTKfpfP/zVEROZ5T2Qh5EPno5w28CY2IEQAG7WQMbMNDVAU5gDAX39Q9XW8kpVPpHYP2uun70eb+yoH/tEZ/0Ie/1e1DoEEo1LDMAWrfmGkHcsB7lMlVFrEb2uWGOfxTTVyjqrWHm2ksz3WPoiFLdYJSq9/FDbS13oq9dApbTXUALdBH+Cyr1Fm
Content-ID: <C7BAD83F8A1A604AB819678340033D14@eurprd02.prod.outlook.com>
MIME-Version: 1.0
X-OriginatorOrg: bitdefender.com
X-MS-Exchange-CrossTenant-Network-Message-Id: dc49eeda-0e9f-40e9-f627-08d79444410b
X-MS-Exchange-CrossTenant-originalarrivaltime: 08 Jan 2020 14:08:36.8193 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 487baf29-f1da-469a-9221-243f830c36f3
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: GxQ5za7hxKicf6zROLAuKYdOpQsD4MRKY5ZsjNxM8GrQGU6o639Oeu8BbD3qCyWiybqStu7m6l9Jj6jY6a9QMN7XX4huwGuVkjOcXfIeAbw=
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DB6PR02MB3253
Subject: [Xen-devel] [PATCH V7 2/4] x86/altp2m: Add hypercall to set a range
 of sve bits
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Petre Ovidiu PIRCALABU <ppircalabu@bitdefender.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Razvan COJOCARU <rcojocaru@bitdefender.com>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tamas K Lengyel <tamas@tklengyel.com>,
 Jan Beulich <jbeulich@suse.com>,
 Alexandru Stefan ISAILA <aisaila@bitdefender.com>,
 =?utf-8?B?Um9nZXIgUGF1IE1vbm7DqQ==?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QnkgZGVmYXVsdCB0aGUgc3ZlIGJpdHMgYXJlIG5vdCBzZXQuDQpUaGlzIHBhdGNoIGFkZHMgYSBu
ZXcgaHlwZXJjYWxsLCB4Y19hbHRwMm1fc2V0X3N1cHJlc3NfdmVfbXVsdGkoKSwNCnRvIHNldCBh
IHJhbmdlIG9mIHN2ZSBiaXRzLg0KVGhlIGNvcmUgZnVuY3Rpb24sIHAybV9zZXRfc3VwcHJlc3Nf
dmVfbXVsdGkoKSwgZG9lcyBub3QgYnJlYWsgaW4gY2FzZQ0Kb2YgYSBlcnJvciBhbmQgaXQgaXMg
ZG9pbmcgYSBiZXN0IGVmZm9ydCBmb3Igc2V0dGluZyB0aGUgYml0cyBpbiB0aGUNCmdpdmVuIHJh
bmdlLiBBIGNoZWNrIGZvciBjb250aW51YXRpb24gaXMgbWFkZSBpbiBvcmRlciB0byBoYXZlDQpw
cmVlbXB0aW9uIG9uIGxhcmdlIHJhbmdlcy4NClRoZSBnZm4gb2YgdGhlIGZpcnN0IGVycm9yIGlz
IHN0b3JlZCBpbg0KeGVuX2h2bV9hbHRwMm1fc3VwcHJlc3NfdmVfbXVsdGkuZmlyc3RfZXJyb3Ig
YW5kIHRoZSBlcnJvciBjb2RlIGlzDQpzdG9yZWQgaW4geGVuX2h2bV9hbHRwMm1fc3VwcHJlc3Nf
dmVfbXVsdGkuZmlyc3RfZXJyb3JfY29kZS4NCklmIG5vIGVycm9yIG9jY3VycmVkIHRoZSB2YWx1
ZXMgd2lsbCBiZSAwLg0KDQpTaWduZWQtb2ZmLWJ5OiBBbGV4YW5kcnUgSXNhaWxhIDxhaXNhaWxh
QGJpdGRlZmVuZGVyLmNvbT4NCg0KLS0tDQpDQzogSWFuIEphY2tzb24gPGlhbi5qYWNrc29uQGV1
LmNpdHJpeC5jb20+DQpDQzogV2VpIExpdSA8d2xAeGVuLm9yZz4NCkNDOiBBbmRyZXcgQ29vcGVy
IDxhbmRyZXcuY29vcGVyM0BjaXRyaXguY29tPg0KQ0M6IEdlb3JnZSBEdW5sYXAgPEdlb3JnZS5E
dW5sYXBAZXUuY2l0cml4LmNvbT4NCkNDOiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+
DQpDQzogSnVsaWVuIEdyYWxsIDxqdWxpZW5AeGVuLm9yZz4NCkNDOiBLb25yYWQgUnplc3p1dGVr
IFdpbGsgPGtvbnJhZC53aWxrQG9yYWNsZS5jb20+DQpDQzogU3RlZmFubyBTdGFiZWxsaW5pIDxz
c3RhYmVsbGluaUBrZXJuZWwub3JnPg0KQ0M6ICJSb2dlciBQYXUgTW9ubsOpIiA8cm9nZXIucGF1
QGNpdHJpeC5jb20+DQpDQzogR2VvcmdlIER1bmxhcCA8Z2VvcmdlLmR1bmxhcEBldS5jaXRyaXgu
Y29tPg0KQ0M6IFJhenZhbiBDb2pvY2FydSA8cmNvam9jYXJ1QGJpdGRlZmVuZGVyLmNvbT4NCkND
OiBUYW1hcyBLIExlbmd5ZWwgPHRhbWFzQHRrbGVuZ3llbC5jb20+DQpDQzogUGV0cmUgUGlyY2Fs
YWJ1IDxwcGlyY2FsYWJ1QGJpdGRlZmVuZGVyLmNvbT4NCi0tLQ0KQ2hhbmdlcyBzaW5jZSBWNjoN
CgktIEZpeCBjb21taXQgbWVzc2FnZQ0KCS0gRml4IGNvbW1lbnRzIGZyb20gc3RydWN0IHhlbl9o
dm1fYWx0cDJtX3N1cHByZXNzX3ZlX211bHRpDQoJLSBTYXZlIHRoZSBmaXJzdCBlcnJvciBmcm9t
IGFsdHAybV9nZXRfZWZmZWN0aXZlX2VudHJ5KCkgYW5kDQpza2lwIHNldF9lbnRyeSgpIGlmIGFu
eSBlcnJvciBvY2N1cnJlZC4NCgktIENhbGwgcDJtX3NldF9zdXBwcmVzc192ZV9tdWx0aSgpIGlu
IHAybV9zZXRfc3VwcHJlc3NfdmUoKS4NCi0tLQ0KIHRvb2xzL2xpYnhjL2luY2x1ZGUveGVuY3Ry
bC5oICAgfCAgNCArKw0KIHRvb2xzL2xpYnhjL3hjX2FsdHAybS5jICAgICAgICAgfCAzMyArKysr
KysrKysrKysrKw0KIHhlbi9hcmNoL3g4Ni9odm0vaHZtLmMgICAgICAgICAgfCAyMCArKysrKysr
KysNCiB4ZW4vYXJjaC94ODYvbW0vcDJtLmMgICAgICAgICAgIHwgNzggKysrKysrKysrKysrKysr
KysrKysrKysrKy0tLS0tLS0tDQogeGVuL2luY2x1ZGUvcHVibGljL2h2bS9odm1fb3AuaCB8IDEz
ICsrKysrKw0KIHhlbi9pbmNsdWRlL3hlbi9tZW1fYWNjZXNzLmggICAgfCAgMyArKw0KIDYgZmls
ZXMgY2hhbmdlZCwgMTMzIGluc2VydGlvbnMoKyksIDE4IGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0t
Z2l0IGEvdG9vbHMvbGlieGMvaW5jbHVkZS94ZW5jdHJsLmggYi90b29scy9saWJ4Yy9pbmNsdWRl
L3hlbmN0cmwuaA0KaW5kZXggNzVmMTkxYWUzYS4uY2M0ZWIxZTNkMyAxMDA2NDQNCi0tLSBhL3Rv
b2xzL2xpYnhjL2luY2x1ZGUveGVuY3RybC5oDQorKysgYi90b29scy9saWJ4Yy9pbmNsdWRlL3hl
bmN0cmwuaA0KQEAgLTE5MjMsNiArMTkyMywxMCBAQCBpbnQgeGNfYWx0cDJtX3N3aXRjaF90b192
aWV3KHhjX2ludGVyZmFjZSAqaGFuZGxlLCB1aW50MzJfdCBkb21pZCwNCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVpbnQxNl90IHZpZXdfaWQpOw0KIGludCB4Y19hbHRwMm1fc2V0X3N1
cHByZXNzX3ZlKHhjX2ludGVyZmFjZSAqaGFuZGxlLCB1aW50MzJfdCBkb21pZCwNCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB1aW50MTZfdCB2aWV3X2lkLCB4ZW5fcGZuX3QgZ2ZuLCBi
b29sIHN2ZSk7DQoraW50IHhjX2FsdHAybV9zZXRfc3VwcmVzc192ZV9tdWx0aSh4Y19pbnRlcmZh
Y2UgKmhhbmRsZSwgdWludDMyX3QgZG9taWQsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1aW50MTZfdCB2aWV3X2lkLCB4ZW5fcGZuX3QgZmlyc3RfZ2ZuLA0KKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgeGVuX3Bmbl90IGxhc3RfZ2ZuLCBib29sIHN2ZSwN
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhlbl9wZm5fdCAqZXJyb3JfZ2Zu
LCBpbnQzMl90ICplcnJvcl9jb2RlKTsNCiBpbnQgeGNfYWx0cDJtX2dldF9zdXBwcmVzc192ZSh4
Y19pbnRlcmZhY2UgKmhhbmRsZSwgdWludDMyX3QgZG9taWQsDQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdWludDE2X3Qgdmlld19pZCwgeGVuX3Bmbl90IGdmbiwgYm9vbCAqc3ZlKTsN
CiBpbnQgeGNfYWx0cDJtX3NldF9tZW1fYWNjZXNzKHhjX2ludGVyZmFjZSAqaGFuZGxlLCB1aW50
MzJfdCBkb21pZCwNCmRpZmYgLS1naXQgYS90b29scy9saWJ4Yy94Y19hbHRwMm0uYyBiL3Rvb2xz
L2xpYnhjL3hjX2FsdHAybS5jDQppbmRleCAwOWRhZDAzNTVlLi40NmZiNzI1ODA2IDEwMDY0NA0K
LS0tIGEvdG9vbHMvbGlieGMveGNfYWx0cDJtLmMNCisrKyBiL3Rvb2xzL2xpYnhjL3hjX2FsdHAy
bS5jDQpAQCAtMjM0LDYgKzIzNCwzOSBAQCBpbnQgeGNfYWx0cDJtX3NldF9zdXBwcmVzc192ZSh4
Y19pbnRlcmZhY2UgKmhhbmRsZSwgdWludDMyX3QgZG9taWQsDQogICAgIHJldHVybiByYzsNCiB9
DQogDQoraW50IHhjX2FsdHAybV9zZXRfc3VwcmVzc192ZV9tdWx0aSh4Y19pbnRlcmZhY2UgKmhh
bmRsZSwgdWludDMyX3QgZG9taWQsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1aW50MTZfdCB2aWV3X2lkLCB4ZW5fcGZuX3QgZmlyc3RfZ2ZuLA0KKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgeGVuX3Bmbl90IGxhc3RfZ2ZuLCBib29sIHN2ZSwNCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhlbl9wZm5fdCAqZXJyb3JfZ2ZuLCBpbnQz
Ml90ICplcnJvcl9jb2RlKQ0KK3sNCisgICAgaW50IHJjOw0KKyAgICBERUNMQVJFX0hZUEVSQ0FM
TF9CVUZGRVIoeGVuX2h2bV9hbHRwMm1fb3BfdCwgYXJnKTsNCisNCisgICAgYXJnID0geGNfaHlw
ZXJjYWxsX2J1ZmZlcl9hbGxvYyhoYW5kbGUsIGFyZywgc2l6ZW9mKCphcmcpKTsNCisgICAgaWYg
KCBhcmcgPT0gTlVMTCApDQorICAgICAgICByZXR1cm4gLTE7DQorDQorICAgIGFyZy0+dmVyc2lv
biA9IEhWTU9QX0FMVFAyTV9JTlRFUkZBQ0VfVkVSU0lPTjsNCisgICAgYXJnLT5jbWQgPSBIVk1P
UF9hbHRwMm1fc2V0X3N1cHByZXNzX3ZlX211bHRpOw0KKyAgICBhcmctPmRvbWFpbiA9IGRvbWlk
Ow0KKyAgICBhcmctPnUuc3VwcHJlc3NfdmVfbXVsdGkudmlldyA9IHZpZXdfaWQ7DQorICAgIGFy
Zy0+dS5zdXBwcmVzc192ZV9tdWx0aS5maXJzdF9nZm4gPSBmaXJzdF9nZm47DQorICAgIGFyZy0+
dS5zdXBwcmVzc192ZV9tdWx0aS5sYXN0X2dmbiA9IGxhc3RfZ2ZuOw0KKyAgICBhcmctPnUuc3Vw
cHJlc3NfdmVfbXVsdGkuc3VwcHJlc3NfdmUgPSBzdmU7DQorDQorICAgIHJjID0geGVuY2FsbDIo
aGFuZGxlLT54Y2FsbCwgX19IWVBFUlZJU09SX2h2bV9vcCwgSFZNT1BfYWx0cDJtLA0KKyAgICAg
ICAgICAgICAgICAgIEhZUEVSQ0FMTF9CVUZGRVJfQVNfQVJHKGFyZykpOw0KKw0KKyAgICBpZiAo
IGFyZy0+dS5zdXBwcmVzc192ZV9tdWx0aS5maXJzdF9lcnJvciApDQorICAgIHsNCisgICAgICAg
ICplcnJvcl9nZm4gPSBhcmctPnUuc3VwcHJlc3NfdmVfbXVsdGkuZmlyc3RfZXJyb3JfZ2ZuOw0K
KyAgICAgICAgKmVycm9yX2NvZGUgPSBhcmctPnUuc3VwcHJlc3NfdmVfbXVsdGkuZmlyc3RfZXJy
b3I7DQorICAgIH0NCisNCisgICAgeGNfaHlwZXJjYWxsX2J1ZmZlcl9mcmVlKGhhbmRsZSwgYXJn
KTsNCisgICAgcmV0dXJuIHJjOw0KK30NCisNCiBpbnQgeGNfYWx0cDJtX3NldF9tZW1fYWNjZXNz
KHhjX2ludGVyZmFjZSAqaGFuZGxlLCB1aW50MzJfdCBkb21pZCwNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHVpbnQxNl90IHZpZXdfaWQsIHhlbl9wZm5fdCBnZm4sDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB4ZW5tZW1fYWNjZXNzX3QgYWNjZXNzKQ0KZGlmZiAtLWdpdCBh
L3hlbi9hcmNoL3g4Ni9odm0vaHZtLmMgYi94ZW4vYXJjaC94ODYvaHZtL2h2bS5jDQppbmRleCA0
NzIzZjVkMDljLi40ZDc5YjQ5MzRlIDEwMDY0NA0KLS0tIGEveGVuL2FyY2gveDg2L2h2bS9odm0u
Yw0KKysrIGIveGVuL2FyY2gveDg2L2h2bS9odm0uYw0KQEAgLTQ1MjAsNiArNDUyMCw3IEBAIHN0
YXRpYyBpbnQgZG9fYWx0cDJtX29wKA0KICAgICBjYXNlIEhWTU9QX2FsdHAybV9kZXN0cm95X3Ay
bToNCiAgICAgY2FzZSBIVk1PUF9hbHRwMm1fc3dpdGNoX3AybToNCiAgICAgY2FzZSBIVk1PUF9h
bHRwMm1fc2V0X3N1cHByZXNzX3ZlOg0KKyAgICBjYXNlIEhWTU9QX2FsdHAybV9zZXRfc3VwcHJl
c3NfdmVfbXVsdGk6DQogICAgIGNhc2UgSFZNT1BfYWx0cDJtX2dldF9zdXBwcmVzc192ZToNCiAg
ICAgY2FzZSBIVk1PUF9hbHRwMm1fc2V0X21lbV9hY2Nlc3M6DQogICAgIGNhc2UgSFZNT1BfYWx0
cDJtX3NldF9tZW1fYWNjZXNzX211bHRpOg0KQEAgLTQ2NzgsNiArNDY3OSwyNSBAQCBzdGF0aWMg
aW50IGRvX2FsdHAybV9vcCgNCiAgICAgICAgIH0NCiAgICAgICAgIGJyZWFrOw0KIA0KKyAgICBj
YXNlIEhWTU9QX2FsdHAybV9zZXRfc3VwcHJlc3NfdmVfbXVsdGk6DQorICAgIHsNCisgICAgICAg
IHVpbnQ2NF90IG1heF9waHlzX2FkZHIgPSAoMVVMIDw8IGQtPmFyY2guY3B1aWQtPmV4dGQubWF4
cGh5c2FkZHIpIC0gMTsNCisNCisgICAgICAgIGEudS5zdXBwcmVzc192ZV9tdWx0aS5sYXN0X2dm
biA9IG1pbihhLnUuc3VwcHJlc3NfdmVfbXVsdGkubGFzdF9nZm4sDQorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3BoeXNfYWRkcik7DQorDQorICAgICAg
ICBpZiAoIGEudS5zdXBwcmVzc192ZV9tdWx0aS5wYWQxIHx8DQorICAgICAgICAgICAgIGEudS5z
dXBwcmVzc192ZV9tdWx0aS5maXJzdF9nZm4gPiBhLnUuc3VwcHJlc3NfdmVfbXVsdGkubGFzdF9n
Zm4gKQ0KKyAgICAgICAgICAgIHJjID0gLUVJTlZBTDsNCisgICAgICAgIGVsc2UNCisgICAgICAg
IHsNCisgICAgICAgICAgICByYyA9IHAybV9zZXRfc3VwcHJlc3NfdmVfbXVsdGkoZCwgJmEudS5z
dXBwcmVzc192ZV9tdWx0aSk7DQorICAgICAgICAgICAgaWYgKCAoIXJjIHx8IHJjID09IC1FUkVT
VEFSVCkgJiYgX19jb3B5X3RvX2d1ZXN0KGFyZywgJmEsIDEpICkNCisgICAgICAgICAgICAgICAg
cmMgPSAtRUZBVUxUOw0KKyAgICAgICAgfQ0KKyAgICAgICAgYnJlYWs7DQorICAgIH0NCisNCiAg
ICAgY2FzZSBIVk1PUF9hbHRwMm1fZ2V0X3N1cHByZXNzX3ZlOg0KICAgICAgICAgaWYgKCBhLnUu
c3VwcHJlc3NfdmUucGFkMSB8fCBhLnUuc3VwcHJlc3NfdmUucGFkMiApDQogICAgICAgICAgICAg
cmMgPSAtRUlOVkFMOw0KZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYyBiL3hlbi9h
cmNoL3g4Ni9tbS9wMm0uYw0KaW5kZXggNWYwNDY5NjBhOS4uMjIzY2EwY2Y0YyAxMDA2NDQNCi0t
LSBhL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYw0KKysrIGIveGVuL2FyY2gveDg2L21tL3AybS5jDQpA
QCAtMzAzMCw0NSArMzAzMCw4NyBAQCBvdXQ6DQogICovDQogaW50IHAybV9zZXRfc3VwcHJlc3Nf
dmUoc3RydWN0IGRvbWFpbiAqZCwgZ2ZuX3QgZ2ZuLCBib29sIHN1cHByZXNzX3ZlLA0KICAgICAg
ICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBhbHRwMm1faWR4KQ0KK3sNCisgICAgaW50
IHJjOw0KKyAgICBzdHJ1Y3QgeGVuX2h2bV9hbHRwMm1fc3VwcHJlc3NfdmVfbXVsdGkgc3ZlID0g
ezB9Ow0KKw0KKyAgICBzdmUudmlldyA9IGFsdHAybV9pZHg7DQorICAgIHN2ZS5zdXBwcmVzc192
ZSA9IHN1cHByZXNzX3ZlOw0KKyAgICBzdmUuZmlyc3RfZ2ZuID0gZ2ZuX3goZ2ZuKTsNCisgICAg
c3ZlLmxhc3RfZ2ZuID0gZ2ZuX3goZ2ZuKTsNCisNCisgICAgaWYgKCAhKHJjID0gcDJtX3NldF9z
dXBwcmVzc192ZV9tdWx0aShkLCAmc3ZlKSkgJiYgc3ZlLmZpcnN0X2Vycm9yICkNCisgICAgICAg
IHJjID0gc3ZlLmZpcnN0X2Vycm9yOw0KKw0KKyAgICByZXR1cm4gcmM7DQorfQ0KKw0KKy8qDQor
ICogU2V0L2NsZWFyIHRoZSAjVkUgc3VwcHJlc3MgYml0IGZvciBtdWx0aXBsZSBwYWdlcy4gIE9u
bHkgYXZhaWxhYmxlIG9uIFZNWC4NCisgKi8NCitpbnQgcDJtX3NldF9zdXBwcmVzc192ZV9tdWx0
aShzdHJ1Y3QgZG9tYWluICpkLA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVj
dCB4ZW5faHZtX2FsdHAybV9zdXBwcmVzc192ZV9tdWx0aSAqc3ZlKQ0KIHsNCiAgICAgc3RydWN0
IHAybV9kb21haW4gKmhvc3RfcDJtID0gcDJtX2dldF9ob3N0cDJtKGQpOw0KICAgICBzdHJ1Y3Qg
cDJtX2RvbWFpbiAqYXAybSA9IE5VTEw7DQotICAgIHN0cnVjdCBwMm1fZG9tYWluICpwMm07DQot
ICAgIG1mbl90IG1mbjsNCi0gICAgcDJtX2FjY2Vzc190IGE7DQotICAgIHAybV90eXBlX3QgdDsN
Ci0gICAgaW50IHJjOw0KKyAgICBzdHJ1Y3QgcDJtX2RvbWFpbiAqcDJtID0gaG9zdF9wMm07DQor
ICAgIHVpbnQ2NF90IHN0YXJ0ID0gc3ZlLT5maXJzdF9nZm47DQorICAgIGludCByYyA9IDA7DQog
DQotICAgIGlmICggYWx0cDJtX2lkeCA+IDAgKQ0KKyAgICBpZiAoIHN2ZS0+dmlldyA+IDAgKQ0K
ICAgICB7DQotICAgICAgICBpZiAoIGFsdHAybV9pZHggPj0gbWluKEFSUkFZX1NJWkUoZC0+YXJj
aC5hbHRwMm1fcDJtKSwgTUFYX0VQVFApIHx8DQotICAgICAgICAgICAgIGQtPmFyY2guYWx0cDJt
X2VwdHBbYXJyYXlfaW5kZXhfbm9zcGVjKGFsdHAybV9pZHgsIE1BWF9FUFRQKV0gPT0NCisgICAg
ICAgIGlmICggc3ZlLT52aWV3ID49IG1pbihBUlJBWV9TSVpFKGQtPmFyY2guYWx0cDJtX3AybSks
IE1BWF9FUFRQKSB8fA0KKyAgICAgICAgICAgICBkLT5hcmNoLmFsdHAybV9lcHRwW2FycmF5X2lu
ZGV4X25vc3BlYyhzdmUtPnZpZXcsIE1BWF9FUFRQKV0gPT0NCiAgICAgICAgICAgICAgbWZuX3go
SU5WQUxJRF9NRk4pICkNCiAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsNCiANCi0gICAgICAg
IHAybSA9IGFwMm0gPSBkLT5hcmNoLmFsdHAybV9wMm1bYXJyYXlfaW5kZXhfbm9zcGVjKGFsdHAy
bV9pZHgsDQorICAgICAgICBwMm0gPSBhcDJtID0gZC0+YXJjaC5hbHRwMm1fcDJtW2FycmF5X2lu
ZGV4X25vc3BlYyhzdmUtPnZpZXcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIEFSUkFZX1NJWkUoZC0+YXJjaC5hbHRwMm1fcDJtKSldOw0KICAgICB9DQotICAgIGVs
c2UNCi0gICAgICAgIHAybSA9IGhvc3RfcDJtOw0KIA0KLSAgICBnZm5fbG9jayhob3N0X3AybSwg
Z2ZuLCAwKTsNCisgICAgcDJtX2xvY2soaG9zdF9wMm0pOw0KIA0KICAgICBpZiAoIGFwMm0gKQ0K
ICAgICAgICAgcDJtX2xvY2soYXAybSk7DQogDQotICAgIHJjID0gYWx0cDJtX2dldF9lZmZlY3Rp
dmVfZW50cnkocDJtLCBnZm4sICZtZm4sICZ0LCAmYSwgQVAyTUdFVF9xdWVyeSk7DQorICAgIHdo
aWxlICggc3ZlLT5sYXN0X2dmbiA+PSBzdGFydCApDQorICAgIHsNCisgICAgICAgIHAybV9hY2Nl
c3NfdCBhOw0KKyAgICAgICAgcDJtX3R5cGVfdCB0Ow0KKyAgICAgICAgbWZuX3QgbWZuOw0KKyAg
ICAgICAgaW50IGVyciA9IDA7DQogDQotICAgIGlmICggcmMgKQ0KLSAgICAgICAgZ290byBvdXQ7
DQorICAgICAgICBpZiAoIChlcnIgPSBhbHRwMm1fZ2V0X2VmZmVjdGl2ZV9lbnRyeShwMm0sIF9n
Zm4oc3RhcnQpLCAmbWZuLCAmdCwgJmEsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBBUDJNR0VUX3F1ZXJ5KSkgJiYNCisgICAgICAgICAgICAgIXN2ZS0+
Zmlyc3RfZXJyb3IgKQ0KKyAgICAgICAgew0KKyAgICAgICAgICAgIHN2ZS0+Zmlyc3RfZXJyb3Jf
Z2ZuID0gc3RhcnQ7IC8qIFNhdmUgdGhlIGdmbiBvZiB0aGUgZmlyc3QgZXJyb3IgKi8NCisgICAg
ICAgICAgICBzdmUtPmZpcnN0X2Vycm9yID0gZXJyOyAvKiBTYXZlIHRoZSBmaXJzdCBlcnJvciBj
b2RlICovDQorICAgICAgICB9DQogDQotICAgIHJjID0gcDJtLT5zZXRfZW50cnkocDJtLCBnZm4s
IG1mbiwgUEFHRV9PUkRFUl80SywgdCwgYSwgc3VwcHJlc3NfdmUpOw0KKyAgICAgICAgaWYgKCAh
ZXJyICYmIChlcnIgPSBwMm0tPnNldF9lbnRyeShwMm0sIF9nZm4oc3RhcnQpLCBtZm4sDQorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBBR0VfT1JERVJfNEssIHQs
IGEsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN2ZS0+c3Vw
cHJlc3NfdmUpKSAmJg0KKyAgICAgICAgICAgICAhc3ZlLT5maXJzdF9lcnJvciApDQorICAgICAg
ICB7DQorICAgICAgICAgICAgc3ZlLT5maXJzdF9lcnJvcl9nZm4gPSBzdGFydDsgLyogU2F2ZSB0
aGUgZ2ZuIG9mIHRoZSBmaXJzdCBlcnJvciAqLw0KKyAgICAgICAgICAgIHN2ZS0+Zmlyc3RfZXJy
b3IgPSBlcnI7IC8qIFNhdmUgdGhlIGZpcnN0IGVycm9yIGNvZGUgKi8NCisgICAgICAgIH0NCisN
CisgICAgICAgIC8qIENoZWNrIGZvciBjb250aW51YXRpb24gaWYgaXQncyBub3QgdGhlIGxhc3Qg
aXRlcmF0aW9uLiAqLw0KKyAgICAgICAgaWYgKCBzdmUtPmxhc3RfZ2ZuID49ICsrc3RhcnQgJiYg
aHlwZXJjYWxsX3ByZWVtcHRfY2hlY2soKSApDQorICAgICAgICB7DQorICAgICAgICAgICAgcmMg
PSAtRVJFU1RBUlQ7DQorICAgICAgICAgICAgYnJlYWs7DQorICAgICAgICB9DQorICAgIH0NCisN
CisgICAgc3ZlLT5maXJzdF9nZm4gPSBzdGFydDsNCiANCi1vdXQ6DQogICAgIGlmICggYXAybSAp
DQogICAgICAgICBwMm1fdW5sb2NrKGFwMm0pOw0KIA0KLSAgICBnZm5fdW5sb2NrKGhvc3RfcDJt
LCBnZm4sIDApOw0KKyAgICBwMm1fdW5sb2NrKGhvc3RfcDJtKTsNCiANCiAgICAgcmV0dXJuIHJj
Ow0KIH0NCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9wdWJsaWMvaHZtL2h2bV9vcC5oIGIveGVu
L2luY2x1ZGUvcHVibGljL2h2bS9odm1fb3AuaA0KaW5kZXggMzUzZjgwMzRkOS4uZDM0NDYwNjg2
NCAxMDA2NDQNCi0tLSBhL3hlbi9pbmNsdWRlL3B1YmxpYy9odm0vaHZtX29wLmgNCisrKyBiL3hl
bi9pbmNsdWRlL3B1YmxpYy9odm0vaHZtX29wLmgNCkBAIC00Niw2ICs0NiwxNiBAQCBzdHJ1Y3Qg
eGVuX2h2bV9hbHRwMm1fc3VwcHJlc3NfdmUgew0KICAgICB1aW50NjRfdCBnZm47DQogfTsNCiAN
CitzdHJ1Y3QgeGVuX2h2bV9hbHRwMm1fc3VwcHJlc3NfdmVfbXVsdGkgew0KKyAgICB1aW50MTZf
dCB2aWV3Ow0KKyAgICB1aW50OF90IHN1cHByZXNzX3ZlOyAvKiBCb29sZWFuIHR5cGUuICovDQor
ICAgIHVpbnQ4X3QgcGFkMTsNCisgICAgaW50MzJfdCBmaXJzdF9lcnJvcjsgLyogU2hvdWxkIGJl
IHNldCB0byAwLiAqLw0KKyAgICB1aW50NjRfdCBmaXJzdF9nZm47IC8qIFZhbHVlIG1heSBiZSB1
cGRhdGVkLiAqLw0KKyAgICB1aW50NjRfdCBsYXN0X2dmbjsNCisgICAgdWludDY0X3QgZmlyc3Rf
ZXJyb3JfZ2ZuOyAvKiBHZm4gb2YgdGhlIGZpcnN0IGVycm9yLiAqLw0KK307DQorDQogI2lmIF9f
WEVOX0lOVEVSRkFDRV9WRVJTSU9OX18gPCAweDAwMDQwOTAwDQogDQogLyogU2V0IHRoZSBsb2dp
Y2FsIGxldmVsIG9mIG9uZSBvZiBhIGRvbWFpbidzIFBDSSBJTlR4IHdpcmVzLiAqLw0KQEAgLTMz
OSw2ICszNDksOCBAQCBzdHJ1Y3QgeGVuX2h2bV9hbHRwMm1fb3Agew0KICNkZWZpbmUgSFZNT1Bf
YWx0cDJtX3ZjcHVfZGlzYWJsZV9ub3RpZnkgIDEzDQogLyogR2V0IHRoZSBhY3RpdmUgdmNwdSBw
Mm0gaW5kZXggKi8NCiAjZGVmaW5lIEhWTU9QX2FsdHAybV9nZXRfcDJtX2lkeCAgICAgICAgICAx
NA0KKy8qIFNldCB0aGUgIlN1cHJlc3MgI1ZFIiBiaXQgZm9yIGEgcmFuZ2Ugb2YgcGFnZXMgKi8N
CisjZGVmaW5lIEhWTU9QX2FsdHAybV9zZXRfc3VwcHJlc3NfdmVfbXVsdGkgMTUNCiAgICAgZG9t
aWRfdCBkb21haW47DQogICAgIHVpbnQxNl90IHBhZDE7DQogICAgIHVpbnQzMl90IHBhZDI7DQpA
QCAtMzUzLDYgKzM2NSw3IEBAIHN0cnVjdCB4ZW5faHZtX2FsdHAybV9vcCB7DQogICAgICAgICBz
dHJ1Y3QgeGVuX2h2bV9hbHRwMm1fY2hhbmdlX2dmbiAgICAgICAgICAgY2hhbmdlX2dmbjsNCiAg
ICAgICAgIHN0cnVjdCB4ZW5faHZtX2FsdHAybV9zZXRfbWVtX2FjY2Vzc19tdWx0aSBzZXRfbWVt
X2FjY2Vzc19tdWx0aTsNCiAgICAgICAgIHN0cnVjdCB4ZW5faHZtX2FsdHAybV9zdXBwcmVzc192
ZSAgICAgICAgICBzdXBwcmVzc192ZTsNCisgICAgICAgIHN0cnVjdCB4ZW5faHZtX2FsdHAybV9z
dXBwcmVzc192ZV9tdWx0aSAgICBzdXBwcmVzc192ZV9tdWx0aTsNCiAgICAgICAgIHN0cnVjdCB4
ZW5faHZtX2FsdHAybV92Y3B1X2Rpc2FibGVfbm90aWZ5ICBkaXNhYmxlX25vdGlmeTsNCiAgICAg
ICAgIHN0cnVjdCB4ZW5faHZtX2FsdHAybV9nZXRfdmNwdV9wMm1faWR4ICAgICBnZXRfdmNwdV9w
Mm1faWR4Ow0KICAgICAgICAgdWludDhfdCBwYWRbNjRdOw0KZGlmZiAtLWdpdCBhL3hlbi9pbmNs
dWRlL3hlbi9tZW1fYWNjZXNzLmggYi94ZW4vaW5jbHVkZS94ZW4vbWVtX2FjY2Vzcy5oDQppbmRl
eCBlNGQyNDUwMmUwLi4wMGU1OTRhMGFkIDEwMDY0NA0KLS0tIGEveGVuL2luY2x1ZGUveGVuL21l
bV9hY2Nlc3MuaA0KKysrIGIveGVuL2luY2x1ZGUveGVuL21lbV9hY2Nlc3MuaA0KQEAgLTc1LDYg
Kzc1LDkgQEAgbG9uZyBwMm1fc2V0X21lbV9hY2Nlc3NfbXVsdGkoc3RydWN0IGRvbWFpbiAqZCwN
CiBpbnQgcDJtX3NldF9zdXBwcmVzc192ZShzdHJ1Y3QgZG9tYWluICpkLCBnZm5fdCBnZm4sIGJv
b2wgc3VwcHJlc3NfdmUsDQogICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGFs
dHAybV9pZHgpOw0KIA0KK2ludCBwMm1fc2V0X3N1cHByZXNzX3ZlX211bHRpKHN0cnVjdCBkb21h
aW4gKmQsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHhlbl9odm1fYWx0
cDJtX3N1cHByZXNzX3ZlX211bHRpICpzdXBwcmVzc192ZSk7DQorDQogaW50IHAybV9nZXRfc3Vw
cHJlc3NfdmUoc3RydWN0IGRvbWFpbiAqZCwgZ2ZuX3QgZ2ZuLCBib29sICpzdXBwcmVzc192ZSwN
CiAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgYWx0cDJtX2lkeCk7DQogDQot
LSANCjIuMTcuMQ0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9y
ZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

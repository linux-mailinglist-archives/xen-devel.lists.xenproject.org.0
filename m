Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 41113B3EBF
	for <lists+xen-devel@lfdr.de>; Mon, 16 Sep 2019 18:19:49 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i9tgD-0006LD-Q1; Mon, 16 Sep 2019 16:16:45 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=Ffgk=XL=redhat.com=lersek@srs-us1.protection.inumbo.net>)
 id 1i9tgC-0006L5-EU
 for xen-devel@lists.xenproject.org; Mon, 16 Sep 2019 16:16:44 +0000
X-Inumbo-ID: 5f91b6b0-d89d-11e9-95f1-12813bfff9fa
Received: from mx1.redhat.com (unknown [209.132.183.28])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 5f91b6b0-d89d-11e9-95f1-12813bfff9fa;
 Mon, 16 Sep 2019 16:16:43 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx01.intmail.prod.int.phx2.redhat.com
 [10.5.11.11])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 54FFB3175298;
 Mon, 16 Sep 2019 16:16:43 +0000 (UTC)
Received: from lacos-laptop-7.usersys.redhat.com (ovpn-124-96.rdu2.redhat.com
 [10.10.124.96])
 by smtp.corp.redhat.com (Postfix) with ESMTP id B08056012A;
 Mon, 16 Sep 2019 16:16:41 +0000 (UTC)
To: devel@edk2.groups.io, anthony.perard@citrix.com
References: <20190913145100.303433-1-anthony.perard@citrix.com>
 <20190913145100.303433-9-anthony.perard@citrix.com>
From: Laszlo Ersek <lersek@redhat.com>
Message-ID: <6c8ab94a-cc2b-9354-207c-620a3939e199@redhat.com>
Date: Mon, 16 Sep 2019 18:16:40 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101
 Thunderbird/52.9.1
MIME-Version: 1.0
In-Reply-To: <20190913145100.303433-9-anthony.perard@citrix.com>
Content-Language: en-US
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.49]); Mon, 16 Sep 2019 16:16:43 +0000 (UTC)
Subject: Re: [Xen-devel] [edk2-devel] [PATCH 08/11] OvmfPkg/XenBus: Change
 XENBUS_PROTOCOL to not return allocated memory
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Jordan Justen <jordan.l.justen@intel.com>,
 Julien Grall <julien.grall@arm.com>, xen-devel@lists.xenproject.org,
 Ard Biesheuvel <ard.biesheuvel@linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMDkvMTMvMTkgMTY6NTAsIEFudGhvbnkgUEVSQVJEIHdyb3RlOgo+IFhzUmVhZCBhbmQgWHNC
YWNrZW5kUmVhZCBvZiB0aGUgWEVOQlVTX1BST1RPQ09MIHJldHVybiBhbGxvY2F0ZWQKPiBtZW1v
cnkgYnV0IHRoaXMgaXNuJ3QgYWxsb3dlZCBkdXJpbmcgdGhlIEV4aXRCb290U2VydmljZXMgY2Fs
bC4gV2UKPiBuZWVkIFhzUmVhZCBhbmQgWHNCYWNrZW5kUmVhZCB0byBkaXNjb25uZWN0IGZyb20g
dGhlIGRldmljZSBzbwo+IFhFTkJVU19QUk9UT0NPTCBpcyBjaGFuZ2VkIHRvIHVzZSBhIGJ1ZmZl
ciBzdXBwbGllZCBieSBhIGNoaWxkIGRyaXZlci4KPiAKPiBSZWY6IGh0dHBzOi8vYnVnemlsbGEu
dGlhbm9jb3JlLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjE5MAo+IFNpZ25lZC1vZmYtYnk6IEFudGhv
bnkgUEVSQVJEIDxhbnRob255LnBlcmFyZEBjaXRyaXguY29tPgo+IC0tLQo+ICBPdm1mUGtnL0lu
Y2x1ZGUvUHJvdG9jb2wvWGVuQnVzLmggfCAzMiArKysrKysrKysrKystLS0tLS0tLS0tCj4gIE92
bWZQa2cvWGVuQnVzRHhlL1hlblN0b3JlLmMgICAgICB8IDQ0ICsrKysrLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQo+ICBPdm1mUGtnL1hlbkJ1c0R4ZS9YZW5TdG9yZS5oICAgICAgfCAgNiArKyst
LQo+ICBPdm1mUGtnL1hlblB2QmxrRHhlL0Jsb2NrRnJvbnQuYyAgfCA0NSArKysrKysrKysrKysr
KysrKystLS0tLS0tLS0tLS0tCj4gIDQgZmlsZXMgY2hhbmdlZCwgNTQgaW5zZXJ0aW9ucygrKSwg
NzMgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL092bWZQa2cvSW5jbHVkZS9Qcm90b2Nv
bC9YZW5CdXMuaCBiL092bWZQa2cvSW5jbHVkZS9Qcm90b2NvbC9YZW5CdXMuaAo+IGluZGV4IDhm
ZjVjYTM1NzUuLmMyMmJkZmIzNjggMTAwNjQ0Cj4gLS0tIGEvT3ZtZlBrZy9JbmNsdWRlL1Byb3Rv
Y29sL1hlbkJ1cy5oCj4gKysrIGIvT3ZtZlBrZy9JbmNsdWRlL1Byb3RvY29sL1hlbkJ1cy5oCj4g
QEAgLTM1LDYgKzM1LDEyIEBAIHR5cGVkZWYgc3RydWN0Cj4gIAo+ICAjZGVmaW5lIFhTVF9OSUwg
KChYRU5TVE9SRV9UUkFOU0FDVElPTiAqKSBOVUxMKQo+ICAKPiArLy8KPiArLy8gV2hlbiByZWFk
aW5nIGEgbm9kZSBmcm9tIHhlbnN0b3JlLCBpZiB0aGUgc2l6ZSBvZiB0aGUgZGF0YSB0byBiZSBy
ZWFkIGlzCj4gKy8vIHVua25vd24sIHRoaXMgdmFsdWUgY2FuIGJlIHVzZSBmb3IgdGhlIHNpemUg
b2YgdGhlIGJ1ZmZlci4KPiArLy8KPiArI2RlZmluZSBYRU5TVE9SRV9QQVlMT0FEX01BWCA0MDk2
Cj4gKwoKVGhpcyBtYWNybyBpcyBhbHJlYWR5IGRlZmluZWQgaW4gIkluZHVzdHJ5U3RhbmRhcmQv
WGVuL2lvL3hzX3dpcmUuaCIuCkNhbiB3ZSBnZXQgaXQgZnJvbSB0aGVyZT8KClRoZSBleHRyYSBk
b2N1bWVudGF0aW9uIGlzIE9LLCBvZiBjb3Vyc2UgKHJlcGxhY2luZyAidGhpcyB2YWx1ZSIgd2l0
aAoiWEVOU1RPUkVfUEFZTE9BRF9NQVgiKS4KCk90aGVyIHRoYW4gdGhhdCwgSSdtIGdvaW5nIHRv
IGhhdmUgdG8gQUNLIHRoaXMgYWZ0ZXIgYSBicmllZiBza2ltIG9ubHkuCgpBY2tlZC1ieTogTGFz
emxvIEVyc2VrIDxsZXJzZWtAcmVkaGF0LmNvbT4KClRoYW5rcwpMYXN6bG8KCj4gIHR5cGVkZWYg
ZW51bSB7Cj4gICAgWEVOU1RPUkVfU1RBVFVTX1NVQ0NFU1MgPSAwLAo+ICAgIFhFTlNUT1JFX1NU
QVRVU19GQUlMLAo+IEBAIC02NCwxOSArNzAsMTcgQEAgdHlwZWRlZiBlbnVtIHsKPiAgLy8vCj4g
IAo+ICAvKioKPiAtICBHZXQgdGhlIGNvbnRlbnRzIG9mIHRoZSBub2RlIE5vZGUgb2YgdGhlIFBW
IGRldmljZS4gUmV0dXJucyB0aGUgY29udGVudHMgaW4KPiAtICAqUmVzdWx0IHdoaWNoIHNob3Vs
ZCBiZSBmcmVlZCBhZnRlciB1c2UuCj4gKyAgR2V0IHRoZSBjb250ZW50cyBvZiB0aGUgbm9kZSBO
b2RlIG9mIHRoZSBQViBkZXZpY2UuCj4gIAo+ICAgIEBwYXJhbSBUaGlzICAgICAgICAgICBBIHBv
aW50ZXIgdG8gWEVOQlVTX1BST1RPQ09MIGluc3RhbmNlLgo+ICAgIEBwYXJhbSBUcmFuc2FjdGlv
biAgICBUaGUgWGVuU3RvcmUgdHJhbnNhY3Rpb24gY292ZXJpbmcgdGhpcyByZXF1ZXN0Lgo+ICAg
IEBwYXJhbSBOb2RlICAgICAgICAgICBUaGUgYmFzZW5hbWUgb2YgdGhlIGZpbGUgdG8gcmVhZC4K
PiAtICBAcGFyYW0gUmVzdWx0ICAgICAgICAgVGhlIHJldHVybmVkIGNvbnRlbnRzIGZyb20gdGhp
cyBmaWxlLgo+ICsgIEBwYXJhbSBCdWZmZXJTaXplICAgICBPbiBpbnB1dCwgYSBwb2ludGVyIHRv
IHRoZSBzaXplIG9mIHRoZSBidWZmZXIgYXQgQnVmZmVyLgo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICBPbiBvdXRwdXQsIHRoZSBzaXplIG9mIHRoZSBkYXRhIHdyaXR0ZW4gdG8gQnVmZmVyLgo+
ICsgIEBwYXJhbSBCdWZmZXIgICAgICAgICBBIHBvaW50ZXIgdG8gYSBidWZmZXIgaW50byB3aGlj
aCB0aGUgZGF0YSByZWFkIHdpbGwgYmUgc2F2ZWQuCj4gIAo+ICAgIEByZXR1cm4gIE9uIHN1Y2Nl
c3MsIFhFTlNUT1JFX1NUQVRVU19TVUNDRVNTLiBPdGhlcndpc2UgYW4gZXJybm8gdmFsdWUKPiAg
ICAgICAgICAgICBpbmRpY2F0aW5nIHRoZSB0eXBlIG9mIGZhaWx1cmUuCj4gLQo+IC0gIEBub3Rl
IFRoZSByZXN1bHRzIGJ1ZmZlciBpcyBtYWxsb2NlZCBhbmQgc2hvdWxkIGJlIGZyZWUnZCBieSB0
aGUKPiAtICAgICAgICBjYWxsZXIuCj4gICoqLwo+ICB0eXBlZGVmCj4gIFhFTlNUT1JFX1NUQVRV
Uwo+IEBAIC04NCwyMyArODgsMjIgQEAgWEVOU1RPUkVfU1RBVFVTCj4gICAgSU4gIFhFTkJVU19Q
Uk9UT0NPTCAgICAgICAqVGhpcywKPiAgICBJTiAgQ09OU1QgWEVOU1RPUkVfVFJBTlNBQ1RJT04g
KlRyYW5zYWN0aW9uLAo+ICAgIElOICBDT05TVCBDSEFSOCAgICAgICAgICAgKk5vZGUsCj4gLSAg
T1VUIFZPSUQgICAgICAgICAgICAgICAgICAqKlJlc3VsdAo+ICsgIElOIE9VVCBVSU5UTiAgICAg
ICAgICAgICAgKkJ1ZmZlclNpemUsCj4gKyAgT1VUIFZPSUQgICAgICAgICAgICAgICAgICAqQnVm
ZmVyCj4gICAgKTsKPiAgCj4gIC8qKgo+IC0gIEdldCB0aGUgY29udGVudHMgb2YgdGhlIG5vZGUg
Tm9kZSBvZiB0aGUgUFYgZGV2aWNlJ3MgYmFja2VuZC4gUmV0dXJucyB0aGUKPiAtICBjb250ZW50
cyBpbiAqUmVzdWx0IHdoaWNoIHNob3VsZCBiZSBmcmVlZCBhZnRlciB1c2UuCj4gKyAgR2V0IHRo
ZSBjb250ZW50cyBvZiB0aGUgbm9kZSBOb2RlIG9mIHRoZSBQViBkZXZpY2UncyBiYWNrZW5kLgo+
ICAKPiAgICBAcGFyYW0gVGhpcyAgICAgICAgICAgQSBwb2ludGVyIHRvIFhFTkJVU19QUk9UT0NP
TCBpbnN0YW5jZS4KPiAgICBAcGFyYW0gVHJhbnNhY3Rpb24gICAgVGhlIFhlblN0b3JlIHRyYW5z
YWN0aW9uIGNvdmVyaW5nIHRoaXMgcmVxdWVzdC4KPiAgICBAcGFyYW0gTm9kZSAgICAgICAgICAg
VGhlIGJhc2VuYW1lIG9mIHRoZSBmaWxlIHRvIHJlYWQuCj4gLSAgQHBhcmFtIFJlc3VsdCAgICAg
ICAgIFRoZSByZXR1cm5lZCBjb250ZW50cyBmcm9tIHRoaXMgZmlsZS4KPiArICBAcGFyYW0gQnVm
ZmVyU2l6ZSAgICAgT24gaW5wdXQsIGEgcG9pbnRlciB0byB0aGUgc2l6ZSBvZiB0aGUgYnVmZmVy
IGF0IEJ1ZmZlci4KPiArICAgICAgICAgICAgICAgICAgICAgICAgT24gb3V0cHV0LCB0aGUgc2l6
ZSBvZiB0aGUgZGF0YSB3cml0dGVuIHRvIEJ1ZmZlci4KPiArICBAcGFyYW0gQnVmZmVyICAgICAg
ICAgQSBwb2ludGVyIHRvIGEgYnVmZmVyIGludG8gd2hpY2ggdGhlIGRhdGEgcmVhZCB3aWxsIGJl
IHNhdmVkLgo+ICAKPiAgICBAcmV0dXJuICBPbiBzdWNjZXNzLCBYRU5TVE9SRV9TVEFUVVNfU1VD
Q0VTUy4gT3RoZXJ3aXNlIGFuIGVycm5vIHZhbHVlCj4gICAgICAgICAgICAgaW5kaWNhdGluZyB0
aGUgdHlwZSBvZiBmYWlsdXJlLgo+IC0KPiAtICBAbm90ZSBUaGUgcmVzdWx0cyBidWZmZXIgaXMg
bWFsbG9jZWQgYW5kIHNob3VsZCBiZSBmcmVlJ2QgYnkgdGhlCj4gLSAgICAgICAgY2FsbGVyLgo+
ICAqKi8KPiAgdHlwZWRlZgo+ICBYRU5TVE9SRV9TVEFUVVMKPiBAQCAtMTA4LDcgKzExMSw4IEBA
IFhFTlNUT1JFX1NUQVRVUwo+ICAgIElOICBYRU5CVVNfUFJPVE9DT0wgICAgICAgKlRoaXMsCj4g
ICAgSU4gIENPTlNUIFhFTlNUT1JFX1RSQU5TQUNUSU9OICpUcmFuc2FjdGlvbiwKPiAgICBJTiAg
Q09OU1QgQ0hBUjggICAgICAgICAgICpOb2RlLAo+IC0gIE9VVCBWT0lEICAgICAgICAgICAgICAg
ICAgKipSZXN1bHQKPiArICBJTiBPVVQgVUlOVE4gICAgICAgICAgICAgICpCdWZmZXJTaXplLAo+
ICsgIE9VVCBWT0lEICAgICAgICAgICAgICAgICAgKkJ1ZmZlcgo+ICAgICk7Cj4gIAo+ICAvKioK
PiBkaWZmIC0tZ2l0IGEvT3ZtZlBrZy9YZW5CdXNEeGUvWGVuU3RvcmUuYyBiL092bWZQa2cvWGVu
QnVzRHhlL1hlblN0b3JlLmMKPiBpbmRleCBiOTU4OGJiOGM2Li5jYjJkOWUxMjE1IDEwMDY0NAo+
IC0tLSBhL092bWZQa2cvWGVuQnVzRHhlL1hlblN0b3JlLmMKPiArKysgYi9Pdm1mUGtnL1hlbkJ1
c0R4ZS9YZW5TdG9yZS5jCj4gQEAgLTEzMzYsMjcgKzEzMzYsMTEgQEAgWGVuQnVzWGVuU3RvcmVS
ZWFkICgKPiAgICBJTiAgWEVOQlVTX1BST1RPQ09MICAgICAgICpUaGlzLAo+ICAgIElOICBDT05T
VCBYRU5TVE9SRV9UUkFOU0FDVElPTiAqVHJhbnNhY3Rpb24sCj4gICAgSU4gIENPTlNUIENIQVI4
ICAgICAgICAgICAqTm9kZSwKPiAtICBPVVQgVk9JRCAgICAgICAgICAgICAgICAgICoqVmFsdWUK
PiArICBJTiBPVVQgVUlOVE4gICAgICAgICAgICAgICpCdWZmZXJTaXplLAo+ICsgIE9VVCBWT0lE
ICAgICAgICAgICAgICAgICAgKkJ1ZmZlcgo+ICAgICkKPiAgewo+IC0gIFhFTlNUT1JFX1NUQVRV
UyBTdGF0dXM7Cj4gLSAgVUlOVE4gICAgICAgICAgIEJ1ZmZlclNpemU7Cj4gLSAgVk9JRCAgICAg
ICAgICAgICpCdWZmZXI7Cj4gLQo+IC0gIEJ1ZmZlclNpemUgPSBYRU5TVE9SRV9QQVlMT0FEX01B
WCArIDE7Cj4gLSAgQnVmZmVyID0gQWxsb2NhdGVQb29sIChCdWZmZXJTaXplKTsKPiAtICBpZiAo
QnVmZmVyID09IE5VTEwpIHsKPiAtICAgIHJldHVybiBYRU5TVE9SRV9TVEFUVVNfRU5PTUVNOwo+
IC0gIH0KPiAtCj4gLSAgU3RhdHVzID0gWGVuU3RvcmVSZWFkIChUcmFuc2FjdGlvbiwgVGhpcy0+
Tm9kZSwgTm9kZSwgJkJ1ZmZlclNpemUsIEJ1ZmZlcik7Cj4gLQo+IC0gIGlmIChTdGF0dXMgPT0g
WEVOU1RPUkVfU1RBVFVTX1NVQ0NFU1MpIHsKPiAtICAgICpWYWx1ZSA9IEJ1ZmZlcjsKPiAtICB9
IGVsc2Ugewo+IC0gICAgRnJlZVBvb2wgKEJ1ZmZlcik7Cj4gLSAgfQo+IC0gIHJldHVybiBTdGF0
dXM7Cj4gKyAgcmV0dXJuIFhlblN0b3JlUmVhZCAoVHJhbnNhY3Rpb24sIFRoaXMtPk5vZGUsIE5v
ZGUsIEJ1ZmZlclNpemUsIEJ1ZmZlcik7Cj4gIH0KPiAgCj4gIFhFTlNUT1JFX1NUQVRVUwo+IEBA
IC0xMzY1LDI3ICsxMzQ5LDExIEBAIFhlbkJ1c1hlblN0b3JlQmFja2VuZFJlYWQgKAo+ICAgIElO
ICBYRU5CVVNfUFJPVE9DT0wgICAgICAgKlRoaXMsCj4gICAgSU4gIENPTlNUIFhFTlNUT1JFX1RS
QU5TQUNUSU9OICpUcmFuc2FjdGlvbiwKPiAgICBJTiAgQ09OU1QgQ0hBUjggICAgICAgICAgICpO
b2RlLAo+IC0gIE9VVCBWT0lEICAgICAgICAgICAgICAgICAgKipWYWx1ZQo+ICsgIElOIE9VVCBV
SU5UTiAgICAgICAgICAgICAgKkJ1ZmZlclNpemUsCj4gKyAgT1VUIFZPSUQgICAgICAgICAgICAg
ICAgICAqQnVmZmVyCj4gICAgKQo+ICB7Cj4gLSAgWEVOU1RPUkVfU1RBVFVTIFN0YXR1czsKPiAt
ICBVSU5UTiAgICAgICAgICAgQnVmZmVyU2l6ZTsKPiAtICBWT0lEICAgICAgICAgICAgKkJ1ZmZl
cjsKPiAtCj4gLSAgQnVmZmVyU2l6ZSA9IFhFTlNUT1JFX1BBWUxPQURfTUFYICsgMTsKPiAtICBC
dWZmZXIgPSBBbGxvY2F0ZVBvb2wgKEJ1ZmZlclNpemUpOwo+IC0gIGlmIChCdWZmZXIgPT0gTlVM
TCkgewo+IC0gICAgcmV0dXJuIFhFTlNUT1JFX1NUQVRVU19FTk9NRU07Cj4gLSAgfQo+IC0KPiAt
ICBTdGF0dXMgPSBYZW5TdG9yZVJlYWQgKFRyYW5zYWN0aW9uLCBUaGlzLT5CYWNrZW5kLCBOb2Rl
LCAmQnVmZmVyU2l6ZSwgQnVmZmVyKTsKPiAtCj4gLSAgaWYgKFN0YXR1cyA9PSBYRU5TVE9SRV9T
VEFUVVNfU1VDQ0VTUykgewo+IC0gICAgKlZhbHVlID0gQnVmZmVyOwo+IC0gIH0gZWxzZSB7Cj4g
LSAgICBGcmVlUG9vbCAoQnVmZmVyKTsKPiAtICB9Cj4gLSAgcmV0dXJuIFN0YXR1czsKPiArICBy
ZXR1cm4gWGVuU3RvcmVSZWFkIChUcmFuc2FjdGlvbiwgVGhpcy0+QmFja2VuZCwgTm9kZSwgQnVm
ZmVyU2l6ZSwgQnVmZmVyKTsKPiAgfQo+ICAKPiAgWEVOU1RPUkVfU1RBVFVTCj4gZGlmZiAtLWdp
dCBhL092bWZQa2cvWGVuQnVzRHhlL1hlblN0b3JlLmggYi9Pdm1mUGtnL1hlbkJ1c0R4ZS9YZW5T
dG9yZS5oCj4gaW5kZXggMTNmN2QxMzJlNi4uY2E4YzA4MDQzMyAxMDA2NDQKPiAtLS0gYS9Pdm1m
UGtnL1hlbkJ1c0R4ZS9YZW5TdG9yZS5oCj4gKysrIGIvT3ZtZlBrZy9YZW5CdXNEeGUvWGVuU3Rv
cmUuaAo+IEBAIC0yODksNyArMjg5LDggQEAgWGVuQnVzWGVuU3RvcmVSZWFkICgKPiAgICBJTiAg
WEVOQlVTX1BST1RPQ09MICAgICAgICpUaGlzLAo+ICAgIElOICBDT05TVCBYRU5TVE9SRV9UUkFO
U0FDVElPTiAqVHJhbnNhY3Rpb24sCj4gICAgSU4gIENPTlNUIENIQVI4ICAgICAgICAgICAqTm9k
ZSwKPiAtICBPVVQgVk9JRCAgICAgICAgICAgICAgICAgICoqVmFsdWUKPiArICBJTiBPVVQgVUlO
VE4gICAgICAgICAgICAgICpCdWZmZXJTaXplLAo+ICsgIE9VVCBWT0lEICAgICAgICAgICAgICAg
ICAgKkJ1ZmZlcgo+ICAgICk7Cj4gIAo+ICBYRU5TVE9SRV9TVEFUVVMKPiBAQCAtMjk4LDcgKzI5
OSw4IEBAIFhlbkJ1c1hlblN0b3JlQmFja2VuZFJlYWQgKAo+ICAgIElOICBYRU5CVVNfUFJPVE9D
T0wgICAgICAgKlRoaXMsCj4gICAgSU4gIENPTlNUIFhFTlNUT1JFX1RSQU5TQUNUSU9OICpUcmFu
c2FjdGlvbiwKPiAgICBJTiAgQ09OU1QgQ0hBUjggICAgICAgICAgICpOb2RlLAo+IC0gIE9VVCBW
T0lEICAgICAgICAgICAgICAgICAgKipWYWx1ZQo+ICsgIElOIE9VVCBVSU5UTiAgICAgICAgICAg
ICAgKkJ1ZmZlclNpemUsCj4gKyAgT1VUIFZPSUQgICAgICAgICAgICAgICAgICAqQnVmZmVyCj4g
ICAgKTsKPiAgCj4gIFhFTlNUT1JFX1NUQVRVUwo+IGRpZmYgLS1naXQgYS9Pdm1mUGtnL1hlblB2
QmxrRHhlL0Jsb2NrRnJvbnQuYyBiL092bWZQa2cvWGVuUHZCbGtEeGUvQmxvY2tGcm9udC5jCj4g
aW5kZXggOGRjYTRjODJmMC4uMjVhMzk4Y2NjNCAxMDA2NDQKPiAtLS0gYS9Pdm1mUGtnL1hlblB2
QmxrRHhlL0Jsb2NrRnJvbnQuYwo+ICsrKyBiL092bWZQa2cvWGVuUHZCbGtEeGUvQmxvY2tGcm9u
dC5jCj4gQEAgLTQxLDE5ICs0MSwyMiBAQCBYZW5CdXNSZWFkVWludDY0ICgKPiAgICApCj4gIHsK
PiAgICBYRU5TVE9SRV9TVEFUVVMgU3RhdHVzOwo+IC0gIENIQVI4ICpQdHI7Cj4gKyAgQ0hBUjgg
ICAgICAgICAgIEJ1ZmZlclsyMl07Cj4gKyAgVUlOVE4gICAgICAgICAgIEJ1ZmZlclNpemU7Cj4g
Kwo+ICsgIEJ1ZmZlclNpemUgPSBzaXplb2YgKEJ1ZmZlcikgLSAxOwo+ICAKPiAgICBpZiAoIUZy
b21CYWNrZW5kKSB7Cj4gLSAgICBTdGF0dXMgPSBUaGlzLT5Yc1JlYWQgKFRoaXMsIFhTVF9OSUws
IE5vZGUsIChWT0lEKiopJlB0cik7Cj4gKyAgICBTdGF0dXMgPSBUaGlzLT5Yc1JlYWQgKFRoaXMs
IFhTVF9OSUwsIE5vZGUsICZCdWZmZXJTaXplLCBCdWZmZXIpOwo+ICAgIH0gZWxzZSB7Cj4gLSAg
ICBTdGF0dXMgPSBUaGlzLT5Yc0JhY2tlbmRSZWFkIChUaGlzLCBYU1RfTklMLCBOb2RlLCAoVk9J
RCoqKSZQdHIpOwo+ICsgICAgU3RhdHVzID0gVGhpcy0+WHNCYWNrZW5kUmVhZCAoVGhpcywgWFNU
X05JTCwgTm9kZSwgJkJ1ZmZlclNpemUsIEJ1ZmZlcik7Cj4gICAgfQo+ICAgIGlmIChTdGF0dXMg
IT0gWEVOU1RPUkVfU1RBVFVTX1NVQ0NFU1MpIHsKPiAgICAgIHJldHVybiBTdGF0dXM7Cj4gICAg
fQo+ICsgIEJ1ZmZlcltCdWZmZXJTaXplXSA9ICdcMCc7Cj4gICAgLy8gQXNjaWlTdHJEZWNpbWFs
VG9VaW50NjQgd2lsbCBBU1NFUlQgaWYgUHRyIG92ZXJmbG93IFVJTlQ2NC4KPiAtICAqVmFsdWVQ
dHIgPSBBc2NpaVN0ckRlY2ltYWxUb1VpbnQ2NCAoUHRyKTsKPiAtICBGcmVlUG9vbCAoUHRyKTsK
PiArICAqVmFsdWVQdHIgPSBBc2NpaVN0ckRlY2ltYWxUb1VpbnQ2NCAoQnVmZmVyKTsKPiAgICBy
ZXR1cm4gU3RhdHVzOwo+ICB9Cj4gIAo+IEBAIC0xNDMsNDMgKzE0Niw0NyBAQCBYZW5QdkJsb2Nr
RnJvbnRJbml0aWFsaXphdGlvbiAoCj4gICAgT1VUIFhFTl9CTE9DS19GUk9OVF9ERVZJQ0UgICoq
RGV2UHRyCj4gICAgKQo+ICB7Cj4gLSAgWEVOU1RPUkVfVFJBTlNBQ1RJT04gVHJhbnNhY3Rpb247
Cj4gLSAgQ0hBUjggKkRldmljZVR5cGU7Cj4gLSAgYmxraWZfc3JpbmdfdCAqU2hhcmVkUmluZzsK
PiAtICBYRU5TVE9SRV9TVEFUVVMgU3RhdHVzOwo+ICsgIFhFTlNUT1JFX1RSQU5TQUNUSU9OICAg
VHJhbnNhY3Rpb247Cj4gKyAgQ0hBUjggICAgICAgICAgICAgICAgICBCdWZmZXJbWEVOU1RPUkVf
UEFZTE9BRF9NQVggKyAxXTsKPiArICBVSU5UTiAgICAgICAgICAgICAgICAgIEJ1ZmZlclNpemU7
Cj4gKyAgYmxraWZfc3JpbmdfdCAgICAgICAgICAqU2hhcmVkUmluZzsKPiArICBYRU5TVE9SRV9T
VEFUVVMgICAgICAgIFN0YXR1czsKPiAgICBYRU5fQkxPQ0tfRlJPTlRfREVWSUNFICpEZXY7Cj4g
LSAgWGVuYnVzU3RhdGUgU3RhdGU7Cj4gLSAgVUlOVDY0IFZhbHVlOwo+IC0gIENIQVI4ICpQYXJh
bXM7Cj4gKyAgWGVuYnVzU3RhdGUgICAgICAgICAgICBTdGF0ZTsKPiArICBVSU5UNjQgICAgICAg
ICAgICAgICAgIFZhbHVlOwo+ICAKPiAgICBBU1NFUlQgKE5vZGVOYW1lICE9IE5VTEwpOwo+ICAK
PiArICBCdWZmZXJTaXplID0gc2l6ZW9mIChCdWZmZXIpIC0gMTsKPiArCj4gICAgRGV2ID0gQWxs
b2NhdGVaZXJvUG9vbCAoc2l6ZW9mIChYRU5fQkxPQ0tfRlJPTlRfREVWSUNFKSk7Cj4gICAgRGV2
LT5TaWduYXR1cmUgPSBYRU5fQkxPQ0tfRlJPTlRfU0lHTkFUVVJFOwo+ICAgIERldi0+Tm9kZU5h
bWUgPSBOb2RlTmFtZTsKPiAgICBEZXYtPlhlbkJ1c0lvID0gWGVuQnVzSW87Cj4gICAgRGV2LT5E
ZXZpY2VJZCA9IFhlbkJ1c0lvLT5EZXZpY2VJZDsKPiAgCj4gLSAgWGVuQnVzSW8tPlhzUmVhZCAo
WGVuQnVzSW8sIFhTVF9OSUwsICJkZXZpY2UtdHlwZSIsIChWT0lEKiopJkRldmljZVR5cGUpOwo+
IC0gIGlmIChBc2NpaVN0ckNtcCAoRGV2aWNlVHlwZSwgImNkcm9tIikgPT0gMCkgewo+ICsgIEJ1
ZmZlclNpemUgPSBzaXplb2YgKEJ1ZmZlcikgLSAxOwo+ICsgIFhlbkJ1c0lvLT5Yc1JlYWQgKFhl
bkJ1c0lvLCBYU1RfTklMLCAiZGV2aWNlLXR5cGUiLCAmQnVmZmVyU2l6ZSwgQnVmZmVyKTsKPiAr
ICBCdWZmZXJbQnVmZmVyU2l6ZV0gPSAnXDAnOwo+ICsgIGlmIChBc2NpaVN0ckNtcCAoQnVmZmVy
LCAiY2Ryb20iKSA9PSAwKSB7Cj4gICAgICBEZXYtPk1lZGlhSW5mby5DZFJvbSA9IFRSVUU7Cj4g
ICAgfSBlbHNlIHsKPiAgICAgIERldi0+TWVkaWFJbmZvLkNkUm9tID0gRkFMU0U7Cj4gICAgfQo+
IC0gIEZyZWVQb29sIChEZXZpY2VUeXBlKTsKPiAgCj4gICAgaWYgKERldi0+TWVkaWFJbmZvLkNk
Um9tKSB7Cj4gLSAgICBTdGF0dXMgPSBYZW5CdXNJby0+WHNCYWNrZW5kUmVhZCAoWGVuQnVzSW8s
IFhTVF9OSUwsICJwYXJhbXMiLCAoVk9JRCoqKSZQYXJhbXMpOwo+ICsgICAgQnVmZmVyU2l6ZSA9
IHNpemVvZiAoQnVmZmVyKSAtIDE7Cj4gKyAgICBTdGF0dXMgPSBYZW5CdXNJby0+WHNCYWNrZW5k
UmVhZCAoWGVuQnVzSW8sIFhTVF9OSUwsICJwYXJhbXMiLAo+ICsgICAgICAmQnVmZmVyU2l6ZSwg
QnVmZmVyKTsKPiAgICAgIGlmIChTdGF0dXMgIT0gWEVOU1RPUkVfU1RBVFVTX1NVQ0NFU1MpIHsK
PiAgICAgICAgREVCVUcgKChFRklfRF9FUlJPUiwgIiVhOiBGYWlsZWQgdG8gcmVhZCBwYXJhbXMg
KCVkKVxuIiwgX19GVU5DVElPTl9fLCBTdGF0dXMpKTsKPiAgICAgICAgZ290byBFcnJvcjsKPiAg
ICAgIH0KPiAtICAgIGlmIChBc2NpaVN0ckxlbiAoUGFyYW1zKSA9PSAwIHx8IEFzY2lpU3RyQ21w
IChQYXJhbXMsICJhaW86IikgPT0gMCkgewo+IC0gICAgICBGcmVlUG9vbCAoUGFyYW1zKTsKPiAr
ICAgIEJ1ZmZlcltCdWZmZXJTaXplXSA9ICdcMCc7Cj4gKyAgICBpZiAoQXNjaWlTdHJMZW4gKEJ1
ZmZlcikgPT0gMCB8fCBBc2NpaVN0ckNtcCAoQnVmZmVyLCAiYWlvOiIpID09IDApIHsKPiAgICAg
ICAgREVCVUcgKChFRklfRF9JTkZPLCAiJWE6IEVtcHR5IGNkcm9tXG4iLCBfX0ZVTkNUSU9OX18p
KTsKPiAgICAgICAgZ290byBFcnJvcjsKPiAgICAgIH0KPiAtICAgIEZyZWVQb29sIChQYXJhbXMp
Owo+ICAgIH0KPiAgCj4gICAgU3RhdHVzID0gWGVuQnVzUmVhZFVpbnQ2NCAoWGVuQnVzSW8sICJi
YWNrZW5kLWlkIiwgRkFMU0UsICZWYWx1ZSk7Cj4gCgoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxA
bGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFu
L2xpc3RpbmZvL3hlbi1kZXZlbA==

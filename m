Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id EC3C02C46E
	for <lists+xen-devel@lfdr.de>; Tue, 28 May 2019 12:36:19 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hVZQ9-0004gx-42; Tue, 28 May 2019 10:33:29 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=31/0=T4=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1hVZQ5-0004c0-NG
 for xen-devel@lists.xenproject.org; Tue, 28 May 2019 10:33:25 +0000
X-Inumbo-ID: 03838b16-8134-11e9-957d-9fa688e50d06
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 03838b16-8134-11e9-957d-9fa688e50d06;
 Tue, 28 May 2019 10:33:21 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 905EAB02F;
 Tue, 28 May 2019 10:33:18 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Tue, 28 May 2019 12:32:22 +0200
Message-Id: <20190528103313.1343-10-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190528103313.1343-1-jgross@suse.com>
References: <20190528103313.1343-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH 09/60] xen/sched: let pick_cpu return a
 scheduler resource
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Tim Deegan <tim@xen.org>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 Robert VanVossen <robert.vanvossen@dornerworks.com>,
 Dario Faggioli <dfaggioli@suse.com>, Julien Grall <julien.grall@arm.com>,
 Josh Whitehead <josh.whitehead@dornerworks.com>,
 Meng Xu <mengxu@cis.upenn.edu>, Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SW5zdGVhZCBvZiByZXR1cm5pbmcgYSBwaHlzaWNhbCBjcHUgbnVtYmVyIGxldCBwaWNrX2NwdSgp
IHJldHVybiBhCnNjaGVkdWxlciByZXNvdXJjZSBpbnN0ZWFkLiBSZW5hbWUgcGlja19jcHUoKSB0
byBwaWNrX3Jlc291cmNlKCkgdG8KcmVmbGVjdCB0aGF0IGNoYW5nZS4KClNpZ25lZC1vZmYtYnk6
IEp1ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNvbT4KLS0tCiB4ZW4vY29tbW9uL3NjaGVkX2Fy
aW5jNjUzLmMgIHwgMTIgKysrKysrLS0tLS0tCiB4ZW4vY29tbW9uL3NjaGVkX2NyZWRpdC5jICAg
IHwgMTYgKysrKysrKystLS0tLS0tLQogeGVuL2NvbW1vbi9zY2hlZF9jcmVkaXQyLmMgICB8IDIy
ICsrKysrKysrKysrLS0tLS0tLS0tLS0KIHhlbi9jb21tb24vc2NoZWRfbnVsbC5jICAgICAgfCAy
MCArKysrKysrKysrKy0tLS0tLS0tLQogeGVuL2NvbW1vbi9zY2hlZF9ydC5jICAgICAgICB8IDE4
ICsrKysrKysrKy0tLS0tLS0tLQogeGVuL2NvbW1vbi9zY2hlZHVsZS5jICAgICAgICB8IDEwICsr
KysrKy0tLS0KIHhlbi9pbmNsdWRlL3hlbi9wZXJmY19kZWZuLmggfCAgMiArLQogeGVuL2luY2x1
ZGUveGVuL3NjaGVkLWlmLmggICB8IDEyICsrKysrKy0tLS0tLQogOCBmaWxlcyBjaGFuZ2VkLCA1
OCBpbnNlcnRpb25zKCspLCA1NCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS94ZW4vY29tbW9u
L3NjaGVkX2FyaW5jNjUzLmMgYi94ZW4vY29tbW9uL3NjaGVkX2FyaW5jNjUzLmMKaW5kZXggODQw
ODkxMzE4ZS4uMzgzZGY3NTBiMCAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9zY2hlZF9hcmluYzY1
My5jCisrKyBiL3hlbi9jb21tb24vc2NoZWRfYXJpbmM2NTMuYwpAQCAtNjAxLDE1ICs2MDEsMTUg
QEAgYTY1M3NjaGVkX2RvX3NjaGVkdWxlKAogfQogCiAvKioKLSAqIFhlbiBzY2hlZHVsZXIgY2Fs
bGJhY2sgZnVuY3Rpb24gdG8gc2VsZWN0IGEgQ1BVIGZvciB0aGUgVkNQVSB0byBydW4gb24KKyAq
IFhlbiBzY2hlZHVsZXIgY2FsbGJhY2sgZnVuY3Rpb24gdG8gc2VsZWN0IGEgcmVzb3VyY2UgZm9y
IHRoZSBWQ1BVIHRvIHJ1biBvbgogICoKICAqIEBwYXJhbSBvcHMgICAgICAgUG9pbnRlciB0byB0
aGlzIGluc3RhbmNlIG9mIHRoZSBzY2hlZHVsZXIgc3RydWN0dXJlCiAgKiBAcGFyYW0gdW5pdCAg
ICAgIFBvaW50ZXIgdG8gc3RydWN0IHNjaGVkX3VuaXQKICAqCi0gKiBAcmV0dXJuICAgICAgICAg
IE51bWJlciBvZiBzZWxlY3RlZCBwaHlzaWNhbCBDUFUKKyAqIEByZXR1cm4gICAgICAgICAgU2No
ZWR1bGVyIHJlc291cmNlIHRvIHJ1biBvbgogICovCi1zdGF0aWMgaW50Ci1hNjUzc2NoZWRfcGlj
a19jcHUoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5p
dCkKK3N0YXRpYyBzdHJ1Y3Qgc2NoZWRfcmVzb3VyY2UgKgorYTY1M3NjaGVkX3BpY2tfcmVzb3Vy
Y2UoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkK
IHsKICAgICBzdHJ1Y3QgdmNwdSAqdmMgPSB1bml0LT52Y3B1OwogICAgIGNwdW1hc2tfdCAqb25s
aW5lOwpAQCAtNjI3LDcgKzYyNyw3IEBAIGE2NTNzY2hlZF9waWNrX2NwdShjb25zdCBzdHJ1Y3Qg
c2NoZWR1bGVyICpvcHMsIHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQogICAgICAgICAgfHwgKGNw
dSA+PSBucl9jcHVfaWRzKSApCiAgICAgICAgIGNwdSA9IHZjLT5wcm9jZXNzb3I7CiAKLSAgICBy
ZXR1cm4gY3B1OworICAgIHJldHVybiBnZXRfc2NoZWRfcmVzKGNwdSk7CiB9CiAKIC8qKgpAQCAt
NzIwLDcgKzcyMCw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyIHNjaGVkX2FyaW5j
NjUzX2RlZiA9IHsKIAogICAgIC5kb19zY2hlZHVsZSAgICA9IGE2NTNzY2hlZF9kb19zY2hlZHVs
ZSwKIAotICAgIC5waWNrX2NwdSAgICAgICA9IGE2NTNzY2hlZF9waWNrX2NwdSwKKyAgICAucGlj
a19yZXNvdXJjZSAgPSBhNjUzc2NoZWRfcGlja19yZXNvdXJjZSwKIAogICAgIC5zd2l0Y2hfc2No
ZWQgICA9IGE2NTNfc3dpdGNoX3NjaGVkLAogCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVk
X2NyZWRpdC5jIGIveGVuL2NvbW1vbi9zY2hlZF9jcmVkaXQuYwppbmRleCAwY2QxMzllYzI5Li43
Zjc1OTZiM2JmIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdC5jCisrKyBiL3hl
bi9jb21tb24vc2NoZWRfY3JlZGl0LmMKQEAgLTg1OCw4ICs4NTgsOCBAQCBfY3NjaGVkX2NwdV9w
aWNrKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywgc3RydWN0IHZjcHUgKnZjLCBib29sX3Qg
Y29tbWl0KQogICAgIHJldHVybiBjcHU7CiB9CiAKLXN0YXRpYyBpbnQKLWNzY2hlZF9jcHVfcGlj
ayhjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQor
c3RhdGljIHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqCitjc2NoZWRfcmVzX3BpY2soY29uc3Qgc3Ry
dWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkKIHsKICAgICBzdHJ1
Y3QgdmNwdSAqdmMgPSB1bml0LT52Y3B1OwogICAgIHN0cnVjdCBjc2NoZWRfdmNwdSAqc3ZjID0g
Q1NDSEVEX1ZDUFUodmMpOwpAQCAtODcyLDcgKzg3Miw3IEBAIGNzY2hlZF9jcHVfcGljayhjb25z
dCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQogICAgICAq
IGdldCBib29zdGVkLCB3aGljaCB3ZSBkb24ndCBkZXNlcnZlIGFzIHdlIGFyZSAib25seSIgbWln
cmF0aW5nLgogICAgICAqLwogICAgIHNldF9iaXQoQ1NDSEVEX0ZMQUdfVkNQVV9NSUdSQVRJTkcs
ICZzdmMtPmZsYWdzKTsKLSAgICByZXR1cm4gX2NzY2hlZF9jcHVfcGljayhvcHMsIHZjLCAxKTsK
KyAgICByZXR1cm4gZ2V0X3NjaGVkX3JlcyhfY3NjaGVkX2NwdV9waWNrKG9wcywgdmMsIDEpKTsK
IH0KIAogc3RhdGljIGlubGluZSB2b2lkCkBAIC05NzIsNyArOTcyLDcgQEAgY3NjaGVkX3ZjcHVf
YWNjdChzdHJ1Y3QgY3NjaGVkX3ByaXZhdGUgKnBydiwgdW5zaWduZWQgaW50IGNwdSkKICAgICAg
ICAgLyoKICAgICAgICAgICogSWYgaXQncyBiZWVuIGFjdGl2ZSBhIHdoaWxlLCBjaGVjayBpZiB3
ZSdkIGJlIGJldHRlciBvZmYKICAgICAgICAgICogbWlncmF0aW5nIGl0IHRvIHJ1biBlbHNld2hl
cmUgKHNlZSBtdWx0aS1jb3JlIGFuZCBtdWx0aS10aHJlYWQKLSAgICAgICAgICogc3VwcG9ydCBp
biBjc2NoZWRfY3B1X3BpY2soKSkuCisgICAgICAgICAqIHN1cHBvcnQgaW4gY3NjaGVkX3Jlc19w
aWNrKCkpLgogICAgICAgICAgKi8KICAgICAgICAgbmV3X2NwdSA9IF9jc2NoZWRfY3B1X3BpY2so
b3BzLCBjdXJyZW50LCAwKTsKIApAQCAtMTAyNywxMSArMTAyNywxMSBAQCBjc2NoZWRfdW5pdF9p
bnNlcnQoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5p
dCkKIAogICAgIEJVR19PTiggaXNfaWRsZV92Y3B1KHZjKSApOwogCi0gICAgLyogY3NjaGVkX2Nw
dV9waWNrKCkgbG9va3MgaW4gdmMtPnByb2Nlc3NvcidzIHJ1bnEsIHNvIHdlIG5lZWQgdGhlIGxv
Y2suICovCisgICAgLyogY3NjaGVkX3Jlc19waWNrKCkgbG9va3MgaW4gdmMtPnByb2Nlc3Nvcidz
IHJ1bnEsIHNvIHdlIG5lZWQgdGhlIGxvY2suICovCiAgICAgbG9jayA9IHZjcHVfc2NoZWR1bGVf
bG9ja19pcnEodmMpOwogCi0gICAgdmMtPnByb2Nlc3NvciA9IGNzY2hlZF9jcHVfcGljayhvcHMs
IHVuaXQpOwotICAgIHVuaXQtPnJlcyA9IGdldF9zY2hlZF9yZXModmMtPnByb2Nlc3Nvcik7Cisg
ICAgdW5pdC0+cmVzID0gY3NjaGVkX3Jlc19waWNrKG9wcywgdW5pdCk7CisgICAgdmMtPnByb2Nl
c3NvciA9IHVuaXQtPnJlcy0+cHJvY2Vzc29yOwogCiAgICAgc3Bpbl91bmxvY2tfaXJxKGxvY2sp
OwogCkBAIC0yMjgyLDcgKzIyODIsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNjaGVkdWxlciBz
Y2hlZF9jcmVkaXRfZGVmID0gewogICAgIC5hZGp1c3RfYWZmaW5pdHk9IGNzY2hlZF9hZmZfY250
bCwKICAgICAuYWRqdXN0X2dsb2JhbCAgPSBjc2NoZWRfc3lzX2NudGwsCiAKLSAgICAucGlja19j
cHUgICAgICAgPSBjc2NoZWRfY3B1X3BpY2ssCisgICAgLnBpY2tfcmVzb3VyY2UgID0gY3NjaGVk
X3Jlc19waWNrLAogICAgIC5kb19zY2hlZHVsZSAgICA9IGNzY2hlZF9zY2hlZHVsZSwKIAogICAg
IC5kdW1wX2NwdV9zdGF0ZSA9IGNzY2hlZF9kdW1wX3BjcHUsCmRpZmYgLS1naXQgYS94ZW4vY29t
bW9uL3NjaGVkX2NyZWRpdDIuYyBiL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0Mi5jCmluZGV4IGM5
MmEwOTA5MDUuLmI3MTgwMmJiYTIgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0
Mi5jCisrKyBiL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0Mi5jCkBAIC02MjUsOSArNjI1LDkgQEAg
c3RhdGljIGlubGluZSBib29sIGhhc19jYXAoY29uc3Qgc3RydWN0IGNzY2hlZDJfdmNwdSAqc3Zj
KQogICogcnVucSwgX2Fsd2F5c18gaGFwcGVucyBieSBtZWFucyBvZiB0aWNrbGluZzoKICAqICAt
IHdoZW4gYSB2Y3B1IHdha2VzIHVwLCBpdCBjYWxscyBjc2NoZWQyX3VuaXRfd2FrZSgpLCB3aGlj
aCBjYWxscwogICogICAgcnVucV90aWNrbGUoKTsKLSAqICAtIHdoZW4gYSBtaWdyYXRpb24gaXMg
aW5pdGlhdGVkIGluIHNjaGVkdWxlLmMsIHdlIGNhbGwgY3NjaGVkMl9jcHVfcGljaygpLAorICog
IC0gd2hlbiBhIG1pZ3JhdGlvbiBpcyBpbml0aWF0ZWQgaW4gc2NoZWR1bGUuYywgd2UgY2FsbCBj
c2NoZWQyX3Jlc19waWNrKCksCiAgKiAgICBjc2NoZWQyX3VuaXRfbWlncmF0ZSgpICh3aGljaCBj
YWxscyBtaWdyYXRlKCkpIGFuZCBjc2NoZWQyX3VuaXRfd2FrZSgpLgotICogICAgY3NjaGVkMl9j
cHVfcGljaygpIGxvb2tzIGZvciB0aGUgbGVhc3QgbG9hZGVkIHJ1bnEgYW5kIHJldHVybiBqdXN0
IGFueQorICogICAgY3NjaGVkMl9yZXNfcGljaygpIGxvb2tzIGZvciB0aGUgbGVhc3QgbG9hZGVk
IHJ1bnEgYW5kIHJldHVybiBqdXN0IGFueQogICogICAgb2YgaXRzIHByb2Nlc3NvcnMuIFRoZW4s
IGNzY2hlZDJfdW5pdF9taWdyYXRlKCkganVzdCBtb3ZlcyB0aGUgdmNwdSB0bwogICogICAgdGhl
IGNob3NlbiBydW5xLCBhbmQgaXQgaXMgYWdhaW4gcnVucV90aWNrbGUoKSwgY2FsbGVkIGJ5CiAg
KiAgICBjc2NoZWQyX3VuaXRfd2FrZSgpIHRoYXQgYWN0dWFsbHkgZGVjaWRlcyB3aGF0IHBjcHUg
dG8gdXNlIHdpdGhpbiB0aGUKQEAgLTY3Niw3ICs2NzYsNyBAQCB2b2lkIHNtdF9pZGxlX21hc2tf
Y2xlYXIodW5zaWduZWQgaW50IGNwdSwgY3B1bWFza190ICptYXNrKQogfQogCiAvKgotICogSW4g
Y3NjaGVkMl9jcHVfcGljaygpLCBpdCBtYXkgbm90IGJlIHBvc3NpYmxlIHRvIGFjdHVhbGx5IGxv
b2sgYXQgcmVtb3RlCisgKiBJbiBjc2NoZWQyX3Jlc19waWNrKCksIGl0IG1heSBub3QgYmUgcG9z
c2libGUgdG8gYWN0dWFsbHkgbG9vayBhdCByZW1vdGUKICAqIHJ1bnF1ZXVlcyAodGhlIHRyeWxv
Y2stcyBvbiB0aGVpciBzcGlubG9ja3MgY2FuIGZhaWwhKS4gSWYgdGhhdCBoYXBwZW5zLAogICog
d2UgcGljaywgaW4gb3JkZXIgb2YgZGVjcmVhc2luZyBwcmVmZXJlbmNlOgogICogIDEpIHN2Yydz
IGN1cnJlbnQgcGNwdSwgaWYgaXQgaXMgcGFydCBvZiBzdmMncyBzb2Z0IGFmZmluaXR5OwpAQCAt
MjIwMSw4ICsyMjAxLDggQEAgY3NjaGVkMl9jb250ZXh0X3NhdmVkKGNvbnN0IHN0cnVjdCBzY2hl
ZHVsZXIgKm9wcywgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiB9CiAKICNkZWZpbmUgTUFYX0xP
QUQgKFNUSU1FX01BWCkKLXN0YXRpYyBpbnQKLWNzY2hlZDJfY3B1X3BpY2soY29uc3Qgc3RydWN0
IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkKK3N0YXRpYyBzdHJ1Y3Qg
c2NoZWRfcmVzb3VyY2UgKgorY3NjaGVkMl9yZXNfcGljayhjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVy
ICpvcHMsIHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQogewogICAgIHN0cnVjdCBjc2NoZWQyX3By
aXZhdGUgKnBydiA9IGNzY2hlZDJfcHJpdihvcHMpOwogICAgIHN0cnVjdCB2Y3B1ICp2YyA9IHVu
aXQtPnZjcHU7CkBAIC0yMjE0LDcgKzIyMTQsNyBAQCBjc2NoZWQyX2NwdV9waWNrKGNvbnN0IHN0
cnVjdCBzY2hlZHVsZXIgKm9wcywgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiAKICAgICBBU1NF
UlQoIWNwdW1hc2tfZW1wdHkoJnBydi0+YWN0aXZlX3F1ZXVlcykpOwogCi0gICAgU0NIRURfU1RB
VF9DUkFOSyhwaWNrX2NwdSk7CisgICAgU0NIRURfU1RBVF9DUkFOSyhwaWNrX3Jlc291cmNlKTsK
IAogICAgIC8qIExvY2tpbmc6CiAgICAgICogLSBSdW5xdWV1ZSBsb2NrIG9mIHZjLT5wcm9jZXNz
b3IgaXMgYWxyZWFkeSBsb2NrZWQKQEAgLTI0MjMsNyArMjQyMyw3IEBAIGNzY2hlZDJfY3B1X3Bp
Y2soY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkK
ICAgICAgICAgICAgICAgICAgICAgKHVuc2lnbmVkIGNoYXIgKikmZCk7CiAgICAgfQogCi0gICAg
cmV0dXJuIG5ld19jcHU7CisgICAgcmV0dXJuIGdldF9zY2hlZF9yZXMobmV3X2NwdSk7CiB9CiAK
IC8qIFdvcmtpbmcgc3RhdGUgb2YgdGhlIGxvYWQtYmFsYW5jaW5nIGFsZ29yaXRobSAqLwpAQCAt
MzEyMCwxMSArMzEyMCwxMSBAQCBjc2NoZWQyX3VuaXRfaW5zZXJ0KGNvbnN0IHN0cnVjdCBzY2hl
ZHVsZXIgKm9wcywgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiAgICAgQVNTRVJUKCFpc19pZGxl
X3ZjcHUodmMpKTsKICAgICBBU1NFUlQobGlzdF9lbXB0eSgmc3ZjLT5ydW5xX2VsZW0pKTsKIAot
ICAgIC8qIGNzY2hlZDJfY3B1X3BpY2soKSBleHBlY3RzIHRoZSBwY3B1IGxvY2sgdG8gYmUgaGVs
ZCAqLworICAgIC8qIGNzY2hlZDJfcmVzX3BpY2soKSBleHBlY3RzIHRoZSBwY3B1IGxvY2sgdG8g
YmUgaGVsZCAqLwogICAgIGxvY2sgPSB2Y3B1X3NjaGVkdWxlX2xvY2tfaXJxKHZjKTsKIAotICAg
IHZjLT5wcm9jZXNzb3IgPSBjc2NoZWQyX2NwdV9waWNrKG9wcywgdW5pdCk7Ci0gICAgdW5pdC0+
cmVzID0gZ2V0X3NjaGVkX3Jlcyh2Yy0+cHJvY2Vzc29yKTsKKyAgICB1bml0LT5yZXMgPSBjc2No
ZWQyX3Jlc19waWNrKG9wcywgdW5pdCk7CisgICAgdmMtPnByb2Nlc3NvciA9IHVuaXQtPnJlcy0+
cHJvY2Vzc29yOwogCiAgICAgc3Bpbl91bmxvY2tfaXJxKGxvY2spOwogCkBAIC00MTAzLDcgKzQx
MDMsNyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHNjaGVkdWxlciBzY2hlZF9jcmVkaXQyX2RlZiA9
IHsKICAgICAuYWRqdXN0X2FmZmluaXR5PSBjc2NoZWQyX2FmZl9jbnRsLAogICAgIC5hZGp1c3Rf
Z2xvYmFsICA9IGNzY2hlZDJfc3lzX2NudGwsCiAKLSAgICAucGlja19jcHUgICAgICAgPSBjc2No
ZWQyX2NwdV9waWNrLAorICAgIC5waWNrX3Jlc291cmNlICA9IGNzY2hlZDJfcmVzX3BpY2ssCiAg
ICAgLm1pZ3JhdGUgICAgICAgID0gY3NjaGVkMl91bml0X21pZ3JhdGUsCiAgICAgLmRvX3NjaGVk
dWxlICAgID0gY3NjaGVkMl9zY2hlZHVsZSwKICAgICAuY29udGV4dF9zYXZlZCAgPSBjc2NoZWQy
X2NvbnRleHRfc2F2ZWQsCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVkX251bGwuYyBiL3hl
bi9jb21tb24vc2NoZWRfbnVsbC5jCmluZGV4IDdjMDFkMDI3MmQuLjFlYTg2NDNhOWMgMTAwNjQ0
Ci0tLSBhL3hlbi9jb21tb24vc2NoZWRfbnVsbC5jCisrKyBiL3hlbi9jb21tb24vc2NoZWRfbnVs
bC5jCkBAIC0yNjksOSArMjY5LDExIEBAIHN0YXRpYyB2b2lkIG51bGxfZnJlZV9kb21kYXRhKGNv
bnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywgdm9pZCAqZGF0YSkKICAqCiAgKiBTbyB0aGlzIGlz
IG5vdCBwYXJ0IG9mIGFueSBob3QgcGF0aC4KICAqLwotc3RhdGljIHVuc2lnbmVkIGludCBwaWNr
X2NwdShzdHJ1Y3QgbnVsbF9wcml2YXRlICpwcnYsIHN0cnVjdCB2Y3B1ICp2KQorc3RhdGljIHN0
cnVjdCBzY2hlZF9yZXNvdXJjZSAqCitwaWNrX3JlcyhzdHJ1Y3QgbnVsbF9wcml2YXRlICpwcnYs
IHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQogewogICAgIHVuc2lnbmVkIGludCBiczsKKyAgICBz
dHJ1Y3QgdmNwdSAqdiA9IHVuaXQtPnZjcHU7CiAgICAgdW5zaWduZWQgaW50IGNwdSA9IHYtPnBy
b2Nlc3NvciwgbmV3X2NwdTsKICAgICBjcHVtYXNrX3QgKmNwdXMgPSBjcHVwb29sX2RvbWFpbl9j
cHVtYXNrKHYtPmRvbWFpbik7CiAKQEAgLTMzNSw3ICszMzcsNyBAQCBzdGF0aWMgdW5zaWduZWQg
aW50IHBpY2tfY3B1KHN0cnVjdCBudWxsX3ByaXZhdGUgKnBydiwgc3RydWN0IHZjcHUgKnYpCiAg
ICAgICAgIF9fdHJhY2VfdmFyKFRSQ19TTlVMTF9QSUNLRURfQ1BVLCAxLCBzaXplb2YoZCksICZk
KTsKICAgICB9CiAKLSAgICByZXR1cm4gbmV3X2NwdTsKKyAgICByZXR1cm4gZ2V0X3NjaGVkX3Jl
cyhuZXdfY3B1KTsKIH0KIAogc3RhdGljIHZvaWQgdmNwdV9hc3NpZ24oc3RydWN0IG51bGxfcHJp
dmF0ZSAqcHJ2LCBzdHJ1Y3QgdmNwdSAqdiwKQEAgLTQyMSw4ICs0MjMsOCBAQCBzdGF0aWMgdm9p
ZCBudWxsX3VuaXRfaW5zZXJ0KGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywKICAgICBsb2Nr
ID0gdmNwdV9zY2hlZHVsZV9sb2NrX2lycSh2KTsKICByZXRyeToKIAotICAgIGNwdSA9IHYtPnBy
b2Nlc3NvciA9IHBpY2tfY3B1KHBydiwgdik7Ci0gICAgdW5pdC0+cmVzID0gZ2V0X3NjaGVkX3Jl
cyhjcHUpOworICAgIHVuaXQtPnJlcyA9IHBpY2tfcmVzKHBydiwgdW5pdCk7CisgICAgY3B1ID0g
di0+cHJvY2Vzc29yID0gdW5pdC0+cmVzLT5wcm9jZXNzb3I7CiAKICAgICBzcGluX3VubG9jayhs
b2NrKTsKIApAQCAtNTc4LDExICs1ODAsMTEgQEAgc3RhdGljIHZvaWQgbnVsbF91bml0X3NsZWVw
KGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywKICAgICBTQ0hFRF9TVEFUX0NSQU5LKHZjcHVf
c2xlZXApOwogfQogCi1zdGF0aWMgaW50IG51bGxfY3B1X3BpY2soY29uc3Qgc3RydWN0IHNjaGVk
dWxlciAqb3BzLCBzdHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkKK3N0YXRpYyBzdHJ1Y3Qgc2NoZWRf
cmVzb3VyY2UgKgorbnVsbF9yZXNfcGljayhjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIHN0
cnVjdCBzY2hlZF91bml0ICp1bml0KQogewotICAgIHN0cnVjdCB2Y3B1ICp2ID0gdW5pdC0+dmNw
dTsKLSAgICBBU1NFUlQoIWlzX2lkbGVfdmNwdSh2KSk7Ci0gICAgcmV0dXJuIHBpY2tfY3B1KG51
bGxfcHJpdihvcHMpLCB2KTsKKyAgICBBU1NFUlQoIWlzX2lkbGVfdmNwdSh1bml0LT52Y3B1KSk7
CisgICAgcmV0dXJuIHBpY2tfcmVzKG51bGxfcHJpdihvcHMpLCB1bml0KTsKIH0KIAogc3RhdGlj
IHZvaWQgbnVsbF91bml0X21pZ3JhdGUoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLApAQCAt
OTAxLDcgKzkwMyw3IEBAIGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgc2NoZWRfbnVsbF9kZWYgPSB7
CiAKICAgICAud2FrZSAgICAgICAgICAgPSBudWxsX3VuaXRfd2FrZSwKICAgICAuc2xlZXAgICAg
ICAgICAgPSBudWxsX3VuaXRfc2xlZXAsCi0gICAgLnBpY2tfY3B1ICAgICAgID0gbnVsbF9jcHVf
cGljaywKKyAgICAucGlja19yZXNvdXJjZSAgPSBudWxsX3Jlc19waWNrLAogICAgIC5taWdyYXRl
ICAgICAgICA9IG51bGxfdW5pdF9taWdyYXRlLAogICAgIC5kb19zY2hlZHVsZSAgICA9IG51bGxf
c2NoZWR1bGUsCiAKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vc2NoZWRfcnQuYyBiL3hlbi9jb21t
b24vc2NoZWRfcnQuYwppbmRleCA3MTVhN2NkMjE4Li5iODBiYzAyMzU3IDEwMDY0NAotLS0gYS94
ZW4vY29tbW9uL3NjaGVkX3J0LmMKKysrIGIveGVuL2NvbW1vbi9zY2hlZF9ydC5jCkBAIC02MzIs
MTIgKzYzMiwxMiBAQCByZXBscV9yZWluc2VydChjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMs
IHN0cnVjdCBydF92Y3B1ICpzdmMpCiB9CiAKIC8qCi0gKiBQaWNrIGEgdmFsaWQgQ1BVIGZvciB0
aGUgdmNwdSB2YwotICogVmFsaWQgQ1BVIG9mIGEgdmNwdSBpcyBpbnRlc2VjdGlvbiBvZiB2Y3B1
J3MgYWZmaW5pdHkKLSAqIGFuZCBhdmFpbGFibGUgY3B1cworICogUGljayBhIHZhbGlkIHJlc291
cmNlIGZvciB0aGUgdmNwdSB2YworICogVmFsaWQgcmVzb3VyY2Ugb2YgYSB2Y3B1IGlzIGludGVz
ZWN0aW9uIG9mIHZjcHUncyBhZmZpbml0eQorICogYW5kIGF2YWlsYWJsZSByZXNvdXJjZXMKICAq
Lwotc3RhdGljIGludAotcnRfY3B1X3BpY2soY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBz
dHJ1Y3Qgc2NoZWRfdW5pdCAqdW5pdCkKK3N0YXRpYyBzdHJ1Y3Qgc2NoZWRfcmVzb3VyY2UgKgor
cnRfcmVzX3BpY2soY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qgc2NoZWRfdW5p
dCAqdW5pdCkKIHsKICAgICBzdHJ1Y3QgdmNwdSAqdmMgPSB1bml0LT52Y3B1OwogICAgIGNwdW1h
c2tfdCBjcHVzOwpAQCAtNjUyLDcgKzY1Miw3IEBAIHJ0X2NwdV9waWNrKGNvbnN0IHN0cnVjdCBz
Y2hlZHVsZXIgKm9wcywgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiAgICAgICAgICAgICA6IGNw
dW1hc2tfY3ljbGUodmMtPnByb2Nlc3NvciwgJmNwdXMpOwogICAgIEFTU0VSVCggIWNwdW1hc2tf
ZW1wdHkoJmNwdXMpICYmIGNwdW1hc2tfdGVzdF9jcHUoY3B1LCAmY3B1cykgKTsKIAotICAgIHJl
dHVybiBjcHU7CisgICAgcmV0dXJuIGdldF9zY2hlZF9yZXMoY3B1KTsKIH0KIAogLyoKQEAgLTg5
Myw4ICs4OTMsOCBAQCBydF91bml0X2luc2VydChjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMs
IHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQogICAgIEJVR19PTiggaXNfaWRsZV92Y3B1KHZjKSAp
OwogCiAgICAgLyogVGhpcyBpcyBzYWZlIGJlY2F1c2UgdmMgaXNuJ3QgeWV0IGJlaW5nIHNjaGVk
dWxlZCAqLwotICAgIHZjLT5wcm9jZXNzb3IgPSBydF9jcHVfcGljayhvcHMsIHVuaXQpOwotICAg
IHVuaXQtPnJlcyA9IGdldF9zY2hlZF9yZXModmMtPnByb2Nlc3Nvcik7CisgICAgdW5pdC0+cmVz
ID0gcnRfcmVzX3BpY2sob3BzLCB1bml0KTsKKyAgICB2Yy0+cHJvY2Vzc29yID0gdW5pdC0+cmVz
LT5wcm9jZXNzb3I7CiAKICAgICBsb2NrID0gdmNwdV9zY2hlZHVsZV9sb2NrX2lycSh2Yyk7CiAK
QEAgLTE1NjMsNyArMTU2Myw3IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyIHNjaGVk
X3J0ZHNfZGVmID0gewogCiAgICAgLmFkanVzdCAgICAgICAgID0gcnRfZG9tX2NudGwsCiAKLSAg
ICAucGlja19jcHUgICAgICAgPSBydF9jcHVfcGljaywKKyAgICAucGlja19yZXNvdXJjZSAgPSBy
dF9yZXNfcGljaywKICAgICAuZG9fc2NoZWR1bGUgICAgPSBydF9zY2hlZHVsZSwKICAgICAuc2xl
ZXAgICAgICAgICAgPSBydF91bml0X3NsZWVwLAogICAgIC53YWtlICAgICAgICAgICA9IHJ0X3Vu
aXRfd2FrZSwKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vc2NoZWR1bGUuYyBiL3hlbi9jb21tb24v
c2NoZWR1bGUuYwppbmRleCAzMmNlMjQ4ZjI0Li41ZGZkYWFlY2UyIDEwMDY0NAotLS0gYS94ZW4v
Y29tbW9uL3NjaGVkdWxlLmMKKysrIGIveGVuL2NvbW1vbi9zY2hlZHVsZS5jCkBAIC02ODcsNyAr
Njg3LDggQEAgc3RhdGljIHZvaWQgdmNwdV9taWdyYXRlX2ZpbmlzaChzdHJ1Y3QgdmNwdSAqdikK
ICAgICAgICAgICAgICAgICBicmVhazsKIAogICAgICAgICAgICAgLyogU2VsZWN0IGEgbmV3IENQ
VS4gKi8KLSAgICAgICAgICAgIG5ld19jcHUgPSBzY2hlZF9waWNrX2NwdSh2Y3B1X3NjaGVkdWxl
cih2KSwgdi0+c2NoZWRfdW5pdCk7CisgICAgICAgICAgICBuZXdfY3B1ID0gc2NoZWRfcGlja19y
ZXNvdXJjZSh2Y3B1X3NjaGVkdWxlcih2KSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHYtPnNjaGVkX3VuaXQpLT5wcm9jZXNzb3I7CiAgICAgICAgICAgICBpZiAo
IChuZXdfbG9jayA9PSBwZXJfY3B1KHNjaGVkdWxlX2RhdGEsIG5ld19jcHUpLnNjaGVkdWxlX2xv
Y2spICYmCiAgICAgICAgICAgICAgICAgIGNwdW1hc2tfdGVzdF9jcHUobmV3X2NwdSwgdi0+ZG9t
YWluLT5jcHVwb29sLT5jcHVfdmFsaWQpICkKICAgICAgICAgICAgICAgICBicmVhazsKQEAgLTc5
Myw4ICs3OTQsOSBAQCB2b2lkIHJlc3RvcmVfdmNwdV9hZmZpbml0eShzdHJ1Y3QgZG9tYWluICpk
KQogICAgICAgICB2LT5zY2hlZF91bml0LT5yZXMgPSBnZXRfc2NoZWRfcmVzKHYtPnByb2Nlc3Nv
cik7CiAKICAgICAgICAgbG9jayA9IHZjcHVfc2NoZWR1bGVfbG9ja19pcnEodik7Ci0gICAgICAg
IHYtPnByb2Nlc3NvciA9IHNjaGVkX3BpY2tfY3B1KHZjcHVfc2NoZWR1bGVyKHYpLCB2LT5zY2hl
ZF91bml0KTsKLSAgICAgICAgdi0+c2NoZWRfdW5pdC0+cmVzID0gZ2V0X3NjaGVkX3Jlcyh2LT5w
cm9jZXNzb3IpOworICAgICAgICB2LT5zY2hlZF91bml0LT5yZXMgPSBzY2hlZF9waWNrX3Jlc291
cmNlKHZjcHVfc2NoZWR1bGVyKHYpLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHYtPnNjaGVkX3VuaXQpOworICAgICAgICB2LT5wcm9jZXNzb3IgPSB2
LT5zY2hlZF91bml0LT5yZXMtPnByb2Nlc3NvcjsKICAgICAgICAgc3Bpbl91bmxvY2tfaXJxKGxv
Y2spOwogCiAgICAgICAgIGlmICggb2xkX2NwdSAhPSB2LT5wcm9jZXNzb3IgKQpAQCAtMTgwMCw3
ICsxODAyLDcgQEAgdm9pZCBfX2luaXQgc2NoZWR1bGVyX2luaXQodm9pZCkKIAogICAgICAgICBz
Y2hlZF90ZXN0X2Z1bmMoaW5pdCk7CiAgICAgICAgIHNjaGVkX3Rlc3RfZnVuYyhkZWluaXQpOwot
ICAgICAgICBzY2hlZF90ZXN0X2Z1bmMocGlja19jcHUpOworICAgICAgICBzY2hlZF90ZXN0X2Z1
bmMocGlja19yZXNvdXJjZSk7CiAgICAgICAgIHNjaGVkX3Rlc3RfZnVuYyhhbGxvY192ZGF0YSk7
CiAgICAgICAgIHNjaGVkX3Rlc3RfZnVuYyhmcmVlX3ZkYXRhKTsKICAgICAgICAgc2NoZWRfdGVz
dF9mdW5jKHN3aXRjaF9zY2hlZCk7CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS94ZW4vcGVyZmNf
ZGVmbi5oIGIveGVuL2luY2x1ZGUveGVuL3BlcmZjX2RlZm4uaAppbmRleCBlZjZmODZiOTFlLi4x
YWQ0Mzg0MDgwIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vcGVyZmNfZGVmbi5oCisrKyBi
L3hlbi9pbmNsdWRlL3hlbi9wZXJmY19kZWZuLmgKQEAgLTY5LDcgKzY5LDcgQEAgUEVSRkNPVU5U
RVIobWlncmF0ZV9vbl9ydW5xLCAgICAgICAgImNzY2hlZDI6IG1pZ3JhdGVfb25fcnVucSIpCiBQ
RVJGQ09VTlRFUihtaWdyYXRlX25vX3J1bnEsICAgICAgICAiY3NjaGVkMjogbWlncmF0ZV9ub19y
dW5xIikKIFBFUkZDT1VOVEVSKHJ1bnRpbWVfbWluX3RpbWVyLCAgICAgICJjc2NoZWQyOiBydW50
aW1lX21pbl90aW1lciIpCiBQRVJGQ09VTlRFUihydW50aW1lX21heF90aW1lciwgICAgICAiY3Nj
aGVkMjogcnVudGltZV9tYXhfdGltZXIiKQotUEVSRkNPVU5URVIocGlja19jcHUsICAgICAgICAg
ICAgICAgImNzY2hlZDI6IHBpY2tfY3B1IikKK1BFUkZDT1VOVEVSKHBpY2tfcmVzb3VyY2UsICAg
ICAgICAgICJjc2NoZWQyOiBwaWNrX3Jlc291cmNlIikKIFBFUkZDT1VOVEVSKG5lZWRfZmFsbGJh
Y2tfY3B1LCAgICAgICJjc2NoZWQyOiBuZWVkX2ZhbGxiYWNrX2NwdSIpCiBQRVJGQ09VTlRFUiht
aWdyYXRlZCwgICAgICAgICAgICAgICAiY3NjaGVkMjogbWlncmF0ZWQiKQogUEVSRkNPVU5URVIo
bWlncmF0ZV9yZXNpc3RlZCwgICAgICAgImNzY2hlZDI6IG1pZ3JhdGVfcmVzaXN0ZWQiKQpkaWZm
IC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL3NjaGVkLWlmLmggYi94ZW4vaW5jbHVkZS94ZW4vc2No
ZWQtaWYuaAppbmRleCBiYzdmMjIzYWFkLi5kYzE0OWJjMTAyIDEwMDY0NAotLS0gYS94ZW4vaW5j
bHVkZS94ZW4vc2NoZWQtaWYuaAorKysgYi94ZW4vaW5jbHVkZS94ZW4vc2NoZWQtaWYuaApAQCAt
MTg5LDggKzE4OSw4IEBAIHN0cnVjdCBzY2hlZHVsZXIgewogICAgIHN0cnVjdCB0YXNrX3NsaWNl
ICgqZG9fc2NoZWR1bGUpIChjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICosIHNfdGltZV90LAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sX3QgdGFza2xldF93b3JrX3Nj
aGVkdWxlZCk7CiAKLSAgICBpbnQgICAgICAgICAgKCpwaWNrX2NwdSkgICAgICAgKGNvbnN0IHN0
cnVjdCBzY2hlZHVsZXIgKiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0
cnVjdCBzY2hlZF91bml0ICopOworICAgIHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqICgqcGlja19y
ZXNvdXJjZSkgKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKiwKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qgc2NoZWRfdW5pdCAqKTsKICAgICB2b2lk
ICAgICAgICAgKCptaWdyYXRlKSAgICAgICAgKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKiwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBzY2hlZF91bml0ICosIHVu
c2lnbmVkIGludCk7CiAgICAgaW50ICAgICAgICAgICgqYWRqdXN0KSAgICAgICAgIChjb25zdCBz
dHJ1Y3Qgc2NoZWR1bGVyICosIHN0cnVjdCBkb21haW4gKiwKQEAgLTM1MSwxNCArMzUxLDE0IEBA
IHN0YXRpYyBpbmxpbmUgdm9pZCBzY2hlZF9taWdyYXRlKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIg
KnMsCiAgICAgZWxzZQogICAgIHsKICAgICAgICAgdW5pdC0+dmNwdS0+cHJvY2Vzc29yID0gY3B1
OwotICAgICAgICB1bml0LT5yZXMgPSBwZXJfY3B1KHNjaGVkX3JlcywgY3B1KTsKKyAgICAgICAg
dW5pdC0+cmVzID0gZ2V0X3NjaGVkX3JlcyhjcHUpOwogICAgIH0KIH0KIAotc3RhdGljIGlubGlu
ZSBpbnQgc2NoZWRfcGlja19jcHUoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqcywKLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBzY2hlZF91bml0ICp1bml0KQorc3RhdGlj
IGlubGluZSBzdHJ1Y3Qgc2NoZWRfcmVzb3VyY2UgKnNjaGVkX3BpY2tfcmVzb3VyY2UoCisgICAg
Y29uc3Qgc3RydWN0IHNjaGVkdWxlciAqcywgc3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiB7Ci0g
ICAgcmV0dXJuIHMtPnBpY2tfY3B1KHMsIHVuaXQpOworICAgIHJldHVybiBzLT5waWNrX3Jlc291
cmNlKHMsIHVuaXQpOwogfQogCiBzdGF0aWMgaW5saW5lIHZvaWQgc2NoZWRfYWRqdXN0X2FmZmlu
aXR5KGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKnMsCi0tIAoyLjE2LjQKCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0
Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qu
b3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

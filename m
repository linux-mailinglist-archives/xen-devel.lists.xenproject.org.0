Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 8F898C01B6
	for <lists+xen-devel@lfdr.de>; Fri, 27 Sep 2019 11:04:09 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iDm7W-0005NZ-Qp; Fri, 27 Sep 2019 09:00:58 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=Rbpq=XW=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1iDm7V-0005N8-DQ
 for xen-devel@lists.xenproject.org; Fri, 27 Sep 2019 09:00:57 +0000
X-Inumbo-ID: 4e3a9844-e105-11e9-bf31-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by localhost (Halon) with ESMTPS
 id 4e3a9844-e105-11e9-bf31-bc764e2007e4;
 Fri, 27 Sep 2019 09:00:52 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 0FA5EAFE1;
 Fri, 27 Sep 2019 09:00:51 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Fri, 27 Sep 2019 11:00:44 +0200
Message-Id: <20190927090048.28872-3-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190927090048.28872-1-jgross@suse.com>
References: <20190927090048.28872-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH v1 2/6] xen: add basic hypervisor filesystem
 support
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QWRkIHRoZSBpbmZyYXN0cnVjdHVyZSBmb3IgdGhlIGh5cGVydmlzb3IgZmlsZXN5c3RlbS4KClRo
aXMgaW5jbHVkZXMgdGhlIGh5cGVyY2FsbCBpbnRlcmZhY2UgYW5kIHRoZSBiYXNlIGZ1bmN0aW9u
cyBmb3IKZW50cnkgY3JlYXRpb24sIGRlbGV0aW9uIGFuZCBtb2RpZmljYXRpb24uCgpJbml0aWFs
bHkgd2Ugc3VwcG9ydCBzdHJpbmcgYW5kIHVuc2lnbmVkIGludGVnZXIgZW50cnkgdHlwZXMuIFRo
ZSBzYXZlZAplbnRyeSBzaXplIGlzIGFuIHVwcGVyIGJvdW5kLCBzbyBmb3IgdW5zaWduZWQgaW50
ZWdlciBlbnRyaWVzIHdlIGFsd2F5cwpzZXQgdGhlIHZhbHVlICIxMSIuCgpTaWduZWQtb2ZmLWJ5
OiBKdWVyZ2VuIEdyb3NzIDxqZ3Jvc3NAc3VzZS5jb20+Ci0tLQpWMToKLSByZW5hbWUgZmlsZXMg
ZnJvbSBmaWxlc3lzdGVtLiogdG8gaHlwZnMuKgotIGFkZCBkdW1teSB3cml0ZSBlbnRyeSBzdXBw
b3J0Ci0gcmVuYW1lIGh5cGVyY2FsbCBmaWxlc3lzdGVtX29wIHRvIGh5cGZzX29wCi0gYWRkIHN1
cHBvcnQgZm9yIHVuc2lnbmVkIGludGVnZXIgZW50cmllcwotLS0KIHhlbi9hcmNoL2FybS90cmFw
cy5jICAgICAgICAgfCAgIDEgKwogeGVuL2FyY2gveDg2L2h2bS9oeXBlcmNhbGwuYyB8ICAgMSAr
CiB4ZW4vYXJjaC94ODYvaHlwZXJjYWxsLmMgICAgIHwgICAxICsKIHhlbi9hcmNoL3g4Ni9wdi9o
eXBlcmNhbGwuYyAgfCAgIDEgKwogeGVuL2NvbW1vbi9NYWtlZmlsZSAgICAgICAgICB8ICAgMSAr
CiB4ZW4vY29tbW9uL2h5cGZzLmMgICAgICAgICAgIHwgMzE0ICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysKIHhlbi9pbmNsdWRlL3B1YmxpYy9lcnJuby5oICAgfCAg
IDEgKwogeGVuL2luY2x1ZGUvcHVibGljL2h5cGZzLmggICB8IDEyMyArKysrKysrKysrKysrKysr
KwogeGVuL2luY2x1ZGUvcHVibGljL3hlbi5oICAgICB8ICAgMSArCiB4ZW4vaW5jbHVkZS94ZW4v
aHlwZXJjYWxsLmggIHwgICA4ICsrCiB4ZW4vaW5jbHVkZS94ZW4vaHlwZnMuaCAgICAgIHwgIDQw
ICsrKysrKwogMTEgZmlsZXMgY2hhbmdlZCwgNDkyIGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2Rl
IDEwMDY0NCB4ZW4vY29tbW9uL2h5cGZzLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCB4ZW4vaW5jbHVk
ZS9wdWJsaWMvaHlwZnMuaAogY3JlYXRlIG1vZGUgMTAwNjQ0IHhlbi9pbmNsdWRlL3hlbi9oeXBm
cy5oCgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL3RyYXBzLmMgYi94ZW4vYXJjaC9hcm0vdHJh
cHMuYwppbmRleCBhM2I5NjFiZDA2Li40YjFhY2Q2N2EyIDEwMDY0NAotLS0gYS94ZW4vYXJjaC9h
cm0vdHJhcHMuYworKysgYi94ZW4vYXJjaC9hcm0vdHJhcHMuYwpAQCAtMTQwMSw2ICsxNDAxLDcg
QEAgc3RhdGljIGFybV9oeXBlcmNhbGxfdCBhcm1faHlwZXJjYWxsX3RhYmxlW10gPSB7CiAjaWZk
ZWYgQ09ORklHX0FSR08KICAgICBIWVBFUkNBTEwoYXJnb19vcCwgNSksCiAjZW5kaWYKKyAgICBI
WVBFUkNBTEwoaHlwZnNfb3AsIDUpLAogfTsKIAogI2lmbmRlZiBOREVCVUcKZGlmZiAtLWdpdCBh
L3hlbi9hcmNoL3g4Ni9odm0vaHlwZXJjYWxsLmMgYi94ZW4vYXJjaC94ODYvaHZtL2h5cGVyY2Fs
bC5jCmluZGV4IDMzZGQyZDk5ZDIuLjIxMGRkYTRmMzggMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4
Ni9odm0vaHlwZXJjYWxsLmMKKysrIGIveGVuL2FyY2gveDg2L2h2bS9oeXBlcmNhbGwuYwpAQCAt
MTQ0LDYgKzE0NCw3IEBAIHN0YXRpYyBjb25zdCBoeXBlcmNhbGxfdGFibGVfdCBodm1faHlwZXJj
YWxsX3RhYmxlW10gPSB7CiAjZW5kaWYKICAgICBIWVBFUkNBTEwoeGVucG11X29wKSwKICAgICBD
T01QQVRfQ0FMTChkbV9vcCksCisgICAgSFlQRVJDQUxMKGh5cGZzX29wKSwKICAgICBIWVBFUkNB
TEwoYXJjaF8xKQogfTsKIApkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L2h5cGVyY2FsbC5jIGIv
eGVuL2FyY2gveDg2L2h5cGVyY2FsbC5jCmluZGV4IGQ0ODNkYmFhNmIuLjhhOGYyMjM0ODEgMTAw
NjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9oeXBlcmNhbGwuYworKysgYi94ZW4vYXJjaC94ODYvaHlw
ZXJjYWxsLmMKQEAgLTczLDYgKzczLDcgQEAgY29uc3QgaHlwZXJjYWxsX2FyZ3NfdCBoeXBlcmNh
bGxfYXJnc190YWJsZVtOUl9oeXBlcmNhbGxzXSA9CiAgICAgQVJHUyhodm1fb3AsIDIpLAogICAg
IEFSR1MoZG1fb3AsIDMpLAogI2VuZGlmCisgICAgQVJHUyhoeXBmc19vcCwgNSksCiAgICAgQVJH
UyhtY2EsIDEpLAogICAgIEFSR1MoYXJjaF8xLCAxKSwKIH07CmRpZmYgLS1naXQgYS94ZW4vYXJj
aC94ODYvcHYvaHlwZXJjYWxsLmMgYi94ZW4vYXJjaC94ODYvcHYvaHlwZXJjYWxsLmMKaW5kZXgg
MGM4NGMwYjNhMC4uZTY4NjAyNDdjYyAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L3B2L2h5cGVy
Y2FsbC5jCisrKyBiL3hlbi9hcmNoL3g4Ni9wdi9oeXBlcmNhbGwuYwpAQCAtODQsNiArODQsNyBA
QCBjb25zdCBoeXBlcmNhbGxfdGFibGVfdCBwdl9oeXBlcmNhbGxfdGFibGVbXSA9IHsKICAgICBI
WVBFUkNBTEwoaHZtX29wKSwKICAgICBDT01QQVRfQ0FMTChkbV9vcCksCiAjZW5kaWYKKyAgICBI
WVBFUkNBTEwoaHlwZnNfb3ApLAogICAgIEhZUEVSQ0FMTChtY2EpLAogICAgIEhZUEVSQ0FMTChh
cmNoXzEpLAogfTsKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vTWFrZWZpbGUgYi94ZW4vY29tbW9u
L01ha2VmaWxlCmluZGV4IDYyYjM0ZTY5ZTkuLmEzZjY2YWEwYzAgMTAwNjQ0Ci0tLSBhL3hlbi9j
b21tb24vTWFrZWZpbGUKKysrIGIveGVuL2NvbW1vbi9NYWtlZmlsZQpAQCAtMTEsNiArMTEsNyBA
QCBvYmoteSArPSBkb21haW4ubwogb2JqLXkgKz0gZXZlbnRfMmwubwogb2JqLXkgKz0gZXZlbnRf
Y2hhbm5lbC5vCiBvYmoteSArPSBldmVudF9maWZvLm8KK29iai15ICs9IGh5cGZzLm8KIG9iai0k
KENPTkZJR19DUkFTSF9ERUJVRykgKz0gZ2Ric3R1Yi5vCiBvYmotJChDT05GSUdfR1JBTlRfVEFC
TEUpICs9IGdyYW50X3RhYmxlLm8KIG9iai15ICs9IGd1ZXN0Y29weS5vCmRpZmYgLS1naXQgYS94
ZW4vY29tbW9uL2h5cGZzLmMgYi94ZW4vY29tbW9uL2h5cGZzLmMKbmV3IGZpbGUgbW9kZSAxMDA2
NDQKaW5kZXggMDAwMDAwMDAwMC4uN2Q5NTk1ZGZhNwotLS0gL2Rldi9udWxsCisrKyBiL3hlbi9j
b21tb24vaHlwZnMuYwpAQCAtMCwwICsxLDMxNCBAQAorLyoqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgor
ICoKKyAqIGh5cGZzLmMKKyAqCisgKiBTaW1wbGUgc3lzZnMtbGlrZSBmaWxlIHN5c3RlbSBmb3Ig
dGhlIGh5cGVydmlzb3IuCisgKi8KKworI2luY2x1ZGUgPHhlbi9saWIuaD4KKyNpbmNsdWRlIDx4
ZW4vaHlwZnMuaD4KKyNpbmNsdWRlIDx4ZW4vZ3Vlc3RfYWNjZXNzLmg+CisjaW5jbHVkZSA8eGVu
L2h5cGVyY2FsbC5oPgorI2luY2x1ZGUgPHB1YmxpYy9oeXBmcy5oPgorCitzdGF0aWMgREVGSU5F
X1NQSU5MT0NLKGh5cGZzX2xvY2spOworCitzdHJ1Y3QgaHlwZnNfZGlyIGh5cGZzX3Jvb3QgPSB7
CisgICAgLmxpc3QgPSBMSVNUX0hFQURfSU5JVChoeXBmc19yb290Lmxpc3QpLAorfTsKKworc3Rh
dGljIHN0cnVjdCBoeXBmc19lbnRyeSBoeXBmc19yb290X2VudHJ5ID0geworICAgIC50eXBlID0g
aHlwZnNfdHlwZV9kaXIsCisgICAgLm5hbWUgPSAiIiwKKyAgICAubGlzdCA9IExJU1RfSEVBRF9J
TklUKGh5cGZzX3Jvb3RfZW50cnkubGlzdCksCisgICAgLnBhcmVudCA9ICZoeXBmc19yb290LAor
ICAgIC5kaXIgPSAmaHlwZnNfcm9vdCwKK307CisKK3N0YXRpYyBpbnQgaHlwZnNfYWRkX2VudHJ5
KHN0cnVjdCBoeXBmc19kaXIgKnBhcmVudCwgc3RydWN0IGh5cGZzX2VudHJ5ICpuZXcpCit7Cisg
ICAgaW50IHJldCA9IC1FTk9FTlQ7CisgICAgc3RydWN0IGxpc3RfaGVhZCAqbDsKKworICAgIGlm
ICggIW5ldy0+Y29udGVudCApCisgICAgICAgIHJldHVybiAtRUlOVkFMOworCisgICAgc3Bpbl9s
b2NrKCZoeXBmc19sb2NrKTsKKworICAgIGxpc3RfZm9yX2VhY2ggKCBsLCAmcGFyZW50LT5saXN0
ICkKKyAgICB7CisgICAgICAgIHN0cnVjdCBoeXBmc19lbnRyeSAqZSA9IGxpc3RfZW50cnkobCwg
c3RydWN0IGh5cGZzX2VudHJ5LCBsaXN0KTsKKyAgICAgICAgaW50IGNtcCA9IHN0cmNtcChlLT5u
YW1lLCBuZXctPm5hbWUpOworCisgICAgICAgIGlmICggY21wID4gMCApCisgICAgICAgIHsKKyAg
ICAgICAgICAgIHJldCA9IDA7CisgICAgICAgICAgICBsaXN0X2FkZF90YWlsKCZuZXctPmxpc3Qs
IGwpOworICAgICAgICAgICAgYnJlYWs7CisgICAgICAgIH0KKyAgICAgICAgaWYgKCBjbXAgPT0g
MCApCisgICAgICAgIHsKKyAgICAgICAgICAgIHJldCA9IC1FRVhJU1Q7CisgICAgICAgICAgICBi
cmVhazsKKyAgICAgICAgfQorICAgIH0KKworICAgIGlmICggcmV0ID09IC1FTk9FTlQgKQorICAg
IHsKKyAgICAgICAgcmV0ID0gMDsKKyAgICAgICAgbGlzdF9hZGRfdGFpbCgmbmV3LT5saXN0LCAm
cGFyZW50LT5saXN0KTsKKyAgICB9CisKKyAgICBpZiAoICFyZXQgKQorICAgIHsKKyAgICAgICAg
dW5zaWduZWQgaW50IHN6ID0gc3RybGVuKG5ldy0+bmFtZSkgKyAxOworCisgICAgICAgIHBhcmVu
dC0+Y29udGVudF9zaXplICs9IHNpemVvZihzdHJ1Y3QgeGVuX2h5cGZzX2RpcmVudHJ5KSArCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJPVU5EVVAoc3osIDQpOworICAgICAgICBu
ZXctPnBhcmVudCA9IHBhcmVudDsKKyAgICB9CisKKyAgICBzcGluX3VubG9jaygmaHlwZnNfbG9j
ayk7CisKKyAgICByZXR1cm4gcmV0OworfQorCitpbnQgaHlwZnNfbmV3X2VudHJ5X2FueShzdHJ1
Y3QgaHlwZnNfZGlyICpwYXJlbnQsIGNvbnN0IGNoYXIgKm5hbWUsCisgICAgICAgICAgICAgICAg
ICAgICAgICBlbnVtIGh5cGZzX2VudHJ5X3R5cGUgdHlwZSwgdm9pZCAqY29udGVudCkKK3sKKyAg
ICBpbnQgcmV0ID0gLUVOT01FTTsKKyAgICBzdHJ1Y3QgaHlwZnNfZW50cnkgKm5ldyA9IHh6YWxs
b2Moc3RydWN0IGh5cGZzX2VudHJ5KTsKKworICAgIGlmICggIW5ldyApCisgICAgICAgIHJldHVy
biByZXQ7CisKKyAgICBuZXctPm5hbWUgPSBuYW1lOworICAgIG5ldy0+dHlwZSA9IHR5cGU7Cisg
ICAgbmV3LT5jb250ZW50ID0gY29udGVudDsKKworICAgIHJldCA9IGh5cGZzX2FkZF9lbnRyeShw
YXJlbnQsIG5ldyk7CisKKyAgICBpZiAoIHJldCApCisgICAgICAgIHhmcmVlKG5ldyk7CisKKyAg
ICByZXR1cm4gcmV0OworfQorCitpbnQgaHlwZnNfbmV3X2VudHJ5X3N0cmluZyhzdHJ1Y3QgaHlw
ZnNfZGlyICpwYXJlbnQsIGNvbnN0IGNoYXIgKm5hbWUsCisgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjaGFyICp2YWwpCit7CisgICAgcmV0dXJuIGh5cGZzX25ld19lbnRyeV9hbnkocGFyZW50
LCBuYW1lLCBoeXBmc190eXBlX3N0cmluZywgdmFsKTsKK30KKworaW50IGh5cGZzX25ld19lbnRy
eV91aW50KHN0cnVjdCBoeXBmc19kaXIgKnBhcmVudCwgY29uc3QgY2hhciAqbmFtZSwKKyAgICAg
ICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgKnZhbCkKK3sKKyAgICByZXR1cm4gaHlw
ZnNfbmV3X2VudHJ5X2FueShwYXJlbnQsIG5hbWUsIGh5cGZzX3R5cGVfdWludCwgdmFsKTsKK30K
KworaW50IGh5cGZzX25ld19kaXIoc3RydWN0IGh5cGZzX2RpciAqcGFyZW50LCBjb25zdCBjaGFy
ICpuYW1lLAorICAgICAgICAgICAgICAgICAgc3RydWN0IGh5cGZzX2RpciAqZGlyKQoreworICAg
IGlmICggIWRpciApCisgICAgICAgIGRpciA9IHh6YWxsb2Moc3RydWN0IGh5cGZzX2Rpcik7CisK
KyAgICByZXR1cm4gaHlwZnNfbmV3X2VudHJ5X2FueShwYXJlbnQsIG5hbWUsIGh5cGZzX3R5cGVf
ZGlyLCBkaXIpOworfQorCitzdGF0aWMgaW50IGh5cGZzX2dldF9wYXRoX3VzZXIoY2hhciAqYnVm
LCBYRU5fR1VFU1RfSEFORExFX1BBUkFNKHZvaWQpIHVhZGRyLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgbGVuKQoreworICAgIGlmICggbGVuID4gWEVOX0hZ
UEZTX01BWF9QQVRITEVOICkKKyAgICAgICAgcmV0dXJuIC1FSU5WQUw7CisKKyAgICBpZiAoIGNv
cHlfZnJvbV9ndWVzdChidWYsIHVhZGRyLCBsZW4pICkKKyAgICAgICAgcmV0dXJuIC1FRkFVTFQ7
CisKKyAgICBidWZbbGVuIC0gMV0gPSAwOworCisgICAgcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBz
dHJ1Y3QgaHlwZnNfZW50cnkgKmh5cGZzX2dldF9lbnRyeV9yZWwoc3RydWN0IGh5cGZzX2VudHJ5
ICpkaXIsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNo
YXIgKnBhdGgpCit7CisgICAgY2hhciAqc2xhc2g7CisgICAgc3RydWN0IGh5cGZzX2VudHJ5ICpl
bnRyeTsKKyAgICBzdHJ1Y3QgbGlzdF9oZWFkICpsOworICAgIHVuc2lnbmVkIGludCBuYW1lX2xl
bjsKKworICAgIGlmICggKnBhdGggPT0gMCApCisgICAgICAgIHJldHVybiBkaXI7CisKKyAgICBp
ZiAoIGRpci0+dHlwZSAhPSBoeXBmc190eXBlX2RpciApCisgICAgICAgIHJldHVybiBOVUxMOwor
CisgICAgc2xhc2ggPSBzdHJjaHIocGF0aCwgJy8nKTsKKyAgICBpZiAoICFzbGFzaCApCisgICAg
ICAgIHNsYXNoID0gc3RyY2hyKHBhdGgsICdcMCcpOworICAgIG5hbWVfbGVuID0gc2xhc2ggLSBw
YXRoOworCisgICAgbGlzdF9mb3JfZWFjaCAoIGwsICZkaXItPmRpci0+bGlzdCApCisgICAgewor
ICAgICAgICBpbnQgY21wOworCisgICAgICAgIGVudHJ5ID0gbGlzdF9lbnRyeShsLCBzdHJ1Y3Qg
aHlwZnNfZW50cnksIGxpc3QpOworICAgICAgICBjbXAgPSBzdHJuY21wKHBhdGgsIGVudHJ5LT5u
YW1lLCBuYW1lX2xlbik7CisgICAgICAgIGlmICggY21wIDwgMCApCisgICAgICAgICAgICByZXR1
cm4gTlVMTDsKKyAgICAgICAgaWYgKCBjbXAgPiAwICkKKyAgICAgICAgICAgIGNvbnRpbnVlOwor
ICAgICAgICBpZiAoIHN0cmxlbihlbnRyeS0+bmFtZSkgPT0gbmFtZV9sZW4gKQorICAgICAgICAg
ICAgcmV0dXJuICpzbGFzaCA/IGh5cGZzX2dldF9lbnRyeV9yZWwoZW50cnksIHNsYXNoICsgMSkg
OiBlbnRyeTsKKyAgICB9CisKKyAgICByZXR1cm4gTlVMTDsKK30KKworc3RydWN0IGh5cGZzX2Vu
dHJ5ICpoeXBmc19nZXRfZW50cnkoY2hhciAqcGF0aCkKK3sKKyAgICBpZiAoIHBhdGhbMF0gIT0g
Jy8nICkKKyAgICAgICAgcmV0dXJuIE5VTEw7CisKKyAgICByZXR1cm4gaHlwZnNfZ2V0X2VudHJ5
X3JlbCgmaHlwZnNfcm9vdF9lbnRyeSwgcGF0aCArIDEpOworfQorCitzdGF0aWMgdW5zaWduZWQg
aW50IGh5cGZzX2dldF9lbnRyeV9sZW4oc3RydWN0IGh5cGZzX2VudHJ5ICplbnRyeSkKK3sKKyAg
ICB1bnNpZ25lZCBpbnQgbGVuID0gMDsKKworICAgIHN3aXRjaCAoIGVudHJ5LT50eXBlICkKKyAg
ICB7CisgICAgY2FzZSBoeXBmc190eXBlX2RpcjoKKyAgICAgICAgbGVuID0gZW50cnktPmRpci0+
Y29udGVudF9zaXplOworICAgICAgICBicmVhazsKKyAgICBjYXNlIGh5cGZzX3R5cGVfc3RyaW5n
OgorICAgICAgICBsZW4gPSBzdHJsZW4oZW50cnktPnN0cl92YWwpICsgMTsKKyAgICAgICAgYnJl
YWs7CisgICAgY2FzZSBoeXBmc190eXBlX3VpbnQ6CisgICAgICAgIGxlbiA9IDExOyAgICAgIC8q
IGxvbmdlc3QgcG9zc2libGUgcHJpbnRlZCB2YWx1ZSArIDEgKi8KKyAgICAgICAgYnJlYWs7Cisg
ICAgfQorCisgICAgcmV0dXJuIGxlbjsKK30KKworbG9uZyBkb19oeXBmc19vcCh1bnNpZ25lZCBp
bnQgY21kLAorICAgICAgICAgICAgICAgICBYRU5fR1VFU1RfSEFORExFX1BBUkFNKHZvaWQpIGFy
ZzEsIHVuc2lnbmVkIGxvbmcgYXJnMiwKKyAgICAgICAgICAgICAgICAgWEVOX0dVRVNUX0hBTkRM
RV9QQVJBTSh2b2lkKSBhcmczLCB1bnNpZ25lZCBsb25nIGFyZzQpCit7CisgICAgaW50IHJldDsK
KyAgICBzdHJ1Y3QgaHlwZnNfZW50cnkgKmVudHJ5OworICAgIHVuc2lnbmVkIGludCBsZW47Cisg
ICAgc3RhdGljIGNoYXIgcGF0aFtYRU5fSFlQRlNfTUFYX1BBVEhMRU5dOworCisgICAgaWYgKCAh
aXNfY29udHJvbF9kb21haW4oY3VycmVudC0+ZG9tYWluKSAmJgorICAgICAgICAgIWlzX2hhcmR3
YXJlX2RvbWFpbihjdXJyZW50LT5kb21haW4pICkKKyAgICAgICAgcmV0dXJuIC1FUEVSTTsKKwor
ICAgIHNwaW5fbG9jaygmaHlwZnNfbG9jayk7CisKKyAgICByZXQgPSBoeXBmc19nZXRfcGF0aF91
c2VyKHBhdGgsIGFyZzEsIGFyZzIpOworICAgIGlmICggcmV0ICkKKyAgICAgICAgZ290byBvdXQ7
CisKKyAgICBlbnRyeSA9IGh5cGZzX2dldF9lbnRyeShwYXRoKTsKKyAgICBpZiAoICFlbnRyeSAp
CisgICAgeworICAgICAgICByZXQgPSAtRU5PRU5UOworICAgICAgICBnb3RvIG91dDsKKyAgICB9
CisKKyAgICBzd2l0Y2ggKCBjbWQgKQorICAgIHsKKyAgICBjYXNlIFhFTl9IWVBGU19PUF9yZWFk
X2NvbnRlbnRzOgorICAgIHsKKyAgICAgICAgY2hhciBidWZbMTJdOworICAgICAgICBjaGFyICp2
YWwgPSBidWY7CisKKyAgICAgICAgbGVuID0gaHlwZnNfZ2V0X2VudHJ5X2xlbihlbnRyeSk7Cisg
ICAgICAgIGlmICggbGVuID4gYXJnNCApCisgICAgICAgIHsKKyAgICAgICAgICAgIHJldCA9IGxl
bjsKKyAgICAgICAgICAgIGJyZWFrOworICAgICAgICB9CisKKyAgICAgICAgc3dpdGNoICggZW50
cnktPnR5cGUgKQorICAgICAgICB7CisgICAgICAgIGNhc2UgaHlwZnNfdHlwZV9kaXI6CisgICAg
ICAgICAgICByZXQgPSAtRUlTRElSOworICAgICAgICAgICAgYnJlYWs7CisgICAgICAgIGNhc2Ug
aHlwZnNfdHlwZV9zdHJpbmc6CisgICAgICAgICAgICB2YWwgPSBlbnRyeS0+c3RyX3ZhbDsKKyAg
ICAgICAgICAgIGJyZWFrOworICAgICAgICBjYXNlIGh5cGZzX3R5cGVfdWludDoKKyAgICAgICAg
ICAgIGxlbiA9IHNucHJpbnRmKGJ1Ziwgc2l6ZW9mKGJ1ZiksICIldSIsICplbnRyeS0+dWludF92
YWwpICsgMTsKKyAgICAgICAgICAgIGJyZWFrOworICAgICAgICB9CisKKyAgICAgICAgaWYgKCAh
cmV0ICYmIGNvcHlfdG9fZ3Vlc3QoYXJnMywgdmFsLCBsZW4pICkKKyAgICAgICAgICAgIHJldCA9
IC1FRkFVTFQ7CisKKyAgICAgICAgYnJlYWs7CisgICAgfQorCisgICAgY2FzZSBYRU5fSFlQRlNf
T1BfcmVhZF9kaXI6CisgICAgeworICAgICAgICBzdHJ1Y3QgbGlzdF9oZWFkICpsOworCisgICAg
ICAgIGlmICggZW50cnktPnR5cGUgIT0gaHlwZnNfdHlwZV9kaXIgKQorICAgICAgICB7CisgICAg
ICAgICAgICByZXQgPSAtRU5PVERJUjsKKyAgICAgICAgICAgIGJyZWFrOworICAgICAgICB9CisK
KyAgICAgICAgbGVuID0gZW50cnktPmRpci0+Y29udGVudF9zaXplOworICAgICAgICBpZiAoIGxl
biA+IGFyZzQgKQorICAgICAgICB7CisgICAgICAgICAgICByZXQgPSBsZW47CisgICAgICAgICAg
ICBicmVhazsKKyAgICAgICAgfQorCisgICAgICAgIGxpc3RfZm9yX2VhY2ggKCBsLCAmZW50cnkt
PmRpci0+bGlzdCApCisgICAgICAgIHsKKyAgICAgICAgICAgIHN0cnVjdCB4ZW5faHlwZnNfZGly
ZW50cnkgZGlyZW50cnk7CisgICAgICAgICAgICBzdHJ1Y3QgaHlwZnNfZW50cnkgKmUgPSBsaXN0
X2VudHJ5KGwsIHN0cnVjdCBoeXBmc19lbnRyeSwgbGlzdCk7CisgICAgICAgICAgICB1bnNpZ25l
ZCBpbnQgZV9sZW4gPSBzdHJsZW4oZS0+bmFtZSkgKyAxOworCisgICAgICAgICAgICBlX2xlbiA9
IHNpemVvZihkaXJlbnRyeSkgKyBST1VORFVQKGVfbGVuLCA0KTsKKyAgICAgICAgICAgIGRpcmVu
dHJ5LmZsYWdzID0gKGUtPnR5cGUgPT0gaHlwZnNfdHlwZV9kaXIpID8gWEVOX0hZUEZTX0lTRElS
IDogMDsKKyAgICAgICAgICAgIGRpcmVudHJ5Lm9mZl9uZXh0ID0gbGlzdF9pc19sYXN0KGwsICZl
bnRyeS0+ZGlyLT5saXN0KSA/IDAgOiBlX2xlbjsKKyAgICAgICAgICAgIGRpcmVudHJ5LmNvbnRl
bnRfbGVuID0gaHlwZnNfZ2V0X2VudHJ5X2xlbihlKTsKKyAgICAgICAgICAgIGlmICggY29weV90
b19ndWVzdChhcmczLCAmZGlyZW50cnksIDEpICkKKyAgICAgICAgICAgIHsKKyAgICAgICAgICAg
ICAgICByZXQgPSAtRUZBVUxUOworICAgICAgICAgICAgICAgIGdvdG8gb3V0OworICAgICAgICAg
ICAgfQorCisgICAgICAgICAgICBpZiAoIGNvcHlfdG9fZ3Vlc3Rfb2Zmc2V0KGFyZzMsIHNpemVv
ZihkaXJlbnRyeSksIGUtPm5hbWUsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cmxlbihlLT5uYW1lKSArIDEpICkKKyAgICAgICAgICAgIHsKKyAgICAgICAgICAgICAg
ICByZXQgPSAtRUZBVUxUOworICAgICAgICAgICAgICAgIGdvdG8gb3V0OworICAgICAgICAgICAg
fQorCisgICAgICAgICAgICBndWVzdF9oYW5kbGVfYWRkX29mZnNldChhcmczLCBlX2xlbik7Cisg
ICAgICAgIH0KKworICAgICAgICBicmVhazsKKyAgICB9CisKKyAgICBjYXNlIFhFTl9IWVBGU19P
UF93cml0ZV9jb250ZW50czoKKyAgICAgICAgcmV0ID0gLUVBQ0NFUzsKKyAgICAgICAgYnJlYWs7
CisKKyAgICBkZWZhdWx0OgorICAgICAgICByZXQgPSAtRU5PU1lTOworICAgICAgICBicmVhazsK
KyAgICB9CisKKyBvdXQ6CisgICAgc3Bpbl91bmxvY2soJmh5cGZzX2xvY2spOworCisgICAgcmV0
dXJuIHJldDsKK30KZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3B1YmxpYy9lcnJuby5oIGIveGVu
L2luY2x1ZGUvcHVibGljL2Vycm5vLmgKaW5kZXggZTFkMDJmY2RkZi4uNWM1M2FmNmFmOSAxMDA2
NDQKLS0tIGEveGVuL2luY2x1ZGUvcHVibGljL2Vycm5vLmgKKysrIGIveGVuL2luY2x1ZGUvcHVi
bGljL2Vycm5vLmgKQEAgLTc4LDYgKzc4LDcgQEAgWEVOX0VSUk5PKEVCVVNZLAkxNikJLyogRGV2
aWNlIG9yIHJlc291cmNlIGJ1c3kgKi8KIFhFTl9FUlJOTyhFRVhJU1QsCTE3KQkvKiBGaWxlIGV4
aXN0cyAqLwogWEVOX0VSUk5PKEVYREVWLAkxOCkJLyogQ3Jvc3MtZGV2aWNlIGxpbmsgKi8KIFhF
Tl9FUlJOTyhFTk9ERVYsCTE5KQkvKiBObyBzdWNoIGRldmljZSAqLworWEVOX0VSUk5PKEVOT1RE
SVIsCTIwKQkvKiBOb3QgYSBkaXJlY3RvcnkgKi8KIFhFTl9FUlJOTyhFSVNESVIsCTIxKQkvKiBJ
cyBhIGRpcmVjdG9yeSAqLwogWEVOX0VSUk5PKEVJTlZBTCwJMjIpCS8qIEludmFsaWQgYXJndW1l
bnQgKi8KIFhFTl9FUlJOTyhFTkZJTEUsCTIzKQkvKiBGaWxlIHRhYmxlIG92ZXJmbG93ICovCmRp
ZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9wdWJsaWMvaHlwZnMuaCBiL3hlbi9pbmNsdWRlL3B1Ymxp
Yy9oeXBmcy5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAuLjg4MjJlMmZi
MTUKLS0tIC9kZXYvbnVsbAorKysgYi94ZW4vaW5jbHVkZS9wdWJsaWMvaHlwZnMuaApAQCAtMCww
ICsxLDEyMyBAQAorLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgorICogWGVuIEh5cGVydmlzb3IgRmls
ZXN5c3RlbQorICoKKyAqIENvcHlyaWdodCAoYykgMjAxOSwgU1VTRSBTb2Z0d2FyZSBTb2x1dGlv
bnMgR2VybWFueSBHbWJICisgKgorICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJl
ZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weQorICogb2YgdGhpcyBz
b2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJl
IiksIHRvCisgKiBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNs
dWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZQorICogcmlnaHRzIHRvIHVzZSwgY29weSwgbW9k
aWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yCisgKiBz
ZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9t
IHRoZSBTb2Z0d2FyZSBpcworICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBm
b2xsb3dpbmcgY29uZGl0aW9uczoKKyAqCisgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBh
bmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgorICogYWxsIGNv
cGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCisgKgorICogVEhF
IFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJ
TkQsIEVYUFJFU1MgT1IKKyAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8g
VEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAorICogRklUTkVTUyBGT1IgQSBQQVJU
SUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhF
CisgKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlN
LCBEQU1BR0VTIE9SIE9USEVSCisgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9G
IENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORworICogRlJPTSwgT1VUIE9GIE9S
IElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUgorICog
REVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgorICoKKyAqLworCisjaWZuZGVmIF9fWEVOX1BVQkxJ
Q19IWVBGU19IX18KKyNkZWZpbmUgX19YRU5fUFVCTElDX0hZUEZTX0hfXworCisjaW5jbHVkZSAi
eGVuLmgiCisKKy8qCisgKiBEZWZpbml0aW9ucyBmb3IgdGhlIF9fSFlQRVJWSVNPUl9oeXBmc19v
cCBoeXBlcmNhbGwuCisgKi8KKworLyogTWF4aW11bSBsZW5ndGggb2YgYSBwYXRoIGluIHRoZSBm
aWxlc3lzdGVtLiAqLworI2RlZmluZSBYRU5fSFlQRlNfTUFYX1BBVEhMRU4gMTAyNAorCitzdHJ1
Y3QgeGVuX2h5cGZzX2RpcmVudHJ5IHsKKyAgICB1aW50MTZfdCBmbGFnczsKKyNkZWZpbmUgWEVO
X0hZUEZTX0lTRElSICAgICAgMHgwMDAxCisjZGVmaW5lIFhFTl9IWVBGU19XUklURUFCTEUgIDB4
MDAwMgorICAgIC8qIE9mZnNldCBpbiBieXRlcyB0byBuZXh0IGVudHJ5ICgwID09IHRoaXMgaXMg
dGhlIGxhc3QgZW50cnkpLiAqLworICAgIHVpbnQxNl90IG9mZl9uZXh0OworICAgIHVpbnQzMl90
IGNvbnRlbnRfbGVuOworICAgIGNoYXIgbmFtZVtYRU5fRkxFWF9BUlJBWV9ESU1dOworfTsKKwor
LyoKKyAqIEh5cGVyY2FsbCBvcGVyYXRpb25zLgorICovCisKKy8qCisgKiBYRU5fSFlQRlNfT1Bf
cmVhZF9jb250ZW50cworICoKKyAqIFJlYWQgY29udGVudHMgb2YgYSBmaWxlc3lzdGVtIGVudHJ5
LgorICoKKyAqIFJldHVybnMgdGhlIGNvbnRlbnRzIG9mIGFuIGVudHJ5IGluIHRoZSBidWZmZXIg
c3VwcGxpZWQgYnkgdGhlIGNhbGxlci4KKyAqIE9ubHkgdGV4dCBkYXRhIHdpdGggYSB0cmFpbGlu
ZyB6ZXJvIGJ5dGUgaXMgcmV0dXJuZWQuCisgKgorICogYXJnMTogWEVOX0dVRVNUX0hBTkRMRShw
YXRoIG5hbWUpCisgKiBhcmcyOiBsZW5ndGggb2YgcGF0aCBuYW1lIChpbmNsdWRpbmcgdHJhaWxp
bmcgemVybyBieXRlKQorICogYXJnMzogWEVOX0dVRVNUX0hBTkRMRShjb250ZW50IGJ1ZmZlcikK
KyAqIGFyZzQ6IGNvbnRlbnQgYnVmZmVyIHNpemUKKyAqCisgKiBQb3NzaWJsZSByZXR1cm4gdmFs
dWVzOgorICogMDogc3VjY2VzcworICogLUVQRVJNOiAgIG9wZXJhdGlvbiBub3QgcGVybWl0dGVk
CisgKiAtRU5PRU5UOiAgZW50cnkgbm90IGZvdW5kCisgKiAtRUFDQ0VTUzogYWNjZXNzIHRvIGVu
dHJ5IG5vdCBwZXJtaXR0ZWQKKyAqIC1FSVNESVI6ICBlbnRyeSBpcyBhIGRpcmVjdG9yeQorICog
LUVJTlZBTDogIGludmFsaWQgcGFyYW1ldGVyCisgKiBwb3NpdGl2ZSB2YWx1ZTogY29udGVudCBi
dWZmZXIgd2FzIHRvbyBzbWFsbCwgcmV0dXJuZWQgdmFsdWUgaXMgbmVlZGVkIHNpemUKKyAqLwor
I2RlZmluZSBYRU5fSFlQRlNfT1BfcmVhZF9jb250ZW50cyAgICAgMQorCisvKgorICogWEVOX0hZ
UEZTX09QX3JlYWRfZGlyCisgKgorICogUmVhZCBkaXJlY3RvcnkgZW50cmllcyBvZiBhIGRpcmVj
dG9yeS4KKyAqCisgKiBSZXR1cm5zIGEgc3RydWN0IHhlbl9mc19kaXJlbnRyeSBmb3IgZWFjaCBl
bnRyeSBpbiBhIGRpcmVjdG9yeS4KKyAqCisgKiBhcmcxOiBYRU5fR1VFU1RfSEFORExFKHBhdGgg
bmFtZSkKKyAqIGFyZzI6IGxlbmd0aCBvZiBwYXRoIG5hbWUgKGluY2x1ZGluZyB0cmFpbGluZyB6
ZXJvIGJ5dGUpCisgKiBhcmczOiBYRU5fR1VFU1RfSEFORExFKGNvbnRlbnQgYnVmZmVyKQorICog
YXJnNDogY29udGVudCBidWZmZXIgc2l6ZQorICoKKyAqIFBvc3NpYmxlIHJldHVybiB2YWx1ZXM6
CisgKiAwOiBzdWNjZXNzCisgKiAtRVBFUk06ICAgb3BlcmF0aW9uIG5vdCBwZXJtaXR0ZWQKKyAq
IC1FTk9FTlQ6ICBlbnRyeSBub3QgZm91bmQKKyAqIC1FQUNDRVNTOiBhY2Nlc3MgdG8gZW50cnkg
bm90IHBlcm1pdHRlZAorICogLUVOT1RESVI6IGVudHJ5IGlzIG5vdCBhIGRpcmVjdG9yeQorICog
LUVJTlZBTDogIGludmFsaWQgcGFyYW1ldGVyCisgKiBwb3NpdGl2ZSB2YWx1ZTogY29udGVudCBi
dWZmZXIgd2FzIHRvbyBzbWFsbCwgcmV0dXJuZWQgdmFsdWUgaXMgbmVlZGVkIHNpemUKKyAqLwor
I2RlZmluZSBYRU5fSFlQRlNfT1BfcmVhZF9kaXIgICAgICAgICAgMgorCisvKgorICogWEVOX0hZ
UEZTX09QX3JlYWRfY29udGVudHMKKyAqCisgKiBXcml0ZSBjb250ZW50cyBvZiBhIGZpbGVzeXN0
ZW0gZW50cnkuCisgKgorICogV3JpdGVzIGFuIGVudHJ5IHdpdGggdGhlIGNvbnRlbnRzIG9mIGEg
YnVmZmVyIHN1cHBsaWVkIGJ5IHRoZSBjYWxsZXIuCisgKiBPbmx5IHRleHQgZGF0YSB3aXRoIGEg
dHJhaWxpbmcgemVybyBieXRlIGNhbiBiZSB3cml0dGVuLgorICoKKyAqIGFyZzE6IFhFTl9HVUVT
VF9IQU5ETEUocGF0aCBuYW1lKQorICogYXJnMjogbGVuZ3RoIG9mIHBhdGggbmFtZSAoaW5jbHVk
aW5nIHRyYWlsaW5nIHplcm8gYnl0ZSkKKyAqIGFyZzM6IFhFTl9HVUVTVF9IQU5ETEUoY29udGVu
dCBidWZmZXIpCisgKiBhcmc0OiBjb250ZW50IGJ1ZmZlciBzaXplCisgKgorICogUG9zc2libGUg
cmV0dXJuIHZhbHVlczoKKyAqIDA6IHN1Y2Nlc3MKKyAqIC1FUEVSTTogICBvcGVyYXRpb24gbm90
IHBlcm1pdHRlZAorICogLUVOT0VOVDogIGVudHJ5IG5vdCBmb3VuZAorICogLUVBQ0NFU1M6IGFj
Y2VzcyB0byBlbnRyeSBub3QgcGVybWl0dGVkCisgKiAtRUlTRElSOiAgZW50cnkgaXMgYSBkaXJl
Y3RvcnkKKyAqIC1FSU5WQUw6ICBpbnZhbGlkIHBhcmFtZXRlcgorICogLUVOT01FTTogIG1lbW9y
eSBzaG9ydGFnZSBpbiB0aGUgaHlwZXJ2aXNvcgorICovCisjZGVmaW5lIFhFTl9IWVBGU19PUF93
cml0ZV9jb250ZW50cyAgICAzCisKKyNlbmRpZiAvKiBfX1hFTl9QVUJMSUNfSFlQRlNfSF9fICov
CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9wdWJsaWMveGVuLmggYi94ZW4vaW5jbHVkZS9wdWJs
aWMveGVuLmgKaW5kZXggZDIxOThkZmZhZC4uYmY4MGYxZGE4YyAxMDA2NDQKLS0tIGEveGVuL2lu
Y2x1ZGUvcHVibGljL3hlbi5oCisrKyBiL3hlbi9pbmNsdWRlL3B1YmxpYy94ZW4uaApAQCAtMTMw
LDYgKzEzMCw3IEBAIERFRklORV9YRU5fR1VFU1RfSEFORExFKHhlbl91bG9uZ190KTsKICNkZWZp
bmUgX19IWVBFUlZJU09SX2FyZ29fb3AgICAgICAgICAgICAgIDM5CiAjZGVmaW5lIF9fSFlQRVJW
SVNPUl94ZW5wbXVfb3AgICAgICAgICAgICA0MAogI2RlZmluZSBfX0hZUEVSVklTT1JfZG1fb3Ag
ICAgICAgICAgICAgICAgNDEKKyNkZWZpbmUgX19IWVBFUlZJU09SX2h5cGZzX29wICAgICAgICAg
ICAgIDQyCiAKIC8qIEFyY2hpdGVjdHVyZS1zcGVjaWZpYyBoeXBlcmNhbGwgZGVmaW5pdGlvbnMu
ICovCiAjZGVmaW5lIF9fSFlQRVJWSVNPUl9hcmNoXzAgICAgICAgICAgICAgICA0OApkaWZmIC0t
Z2l0IGEveGVuL2luY2x1ZGUveGVuL2h5cGVyY2FsbC5oIGIveGVuL2luY2x1ZGUveGVuL2h5cGVy
Y2FsbC5oCmluZGV4IGFkOGFkMjdiMjMuLjM0OWEwZjY0ODcgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNs
dWRlL3hlbi9oeXBlcmNhbGwuaAorKysgYi94ZW4vaW5jbHVkZS94ZW4vaHlwZXJjYWxsLmgKQEAg
LTE1MCw2ICsxNTAsMTQgQEAgZG9fZG1fb3AoCiAgICAgdW5zaWduZWQgaW50IG5yX2J1ZnMsCiAg
ICAgWEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh4ZW5fZG1fb3BfYnVmX3QpIGJ1ZnMpOwogCitleHRl
cm4gbG9uZworZG9faHlwZnNfb3AoCisgICAgdW5zaWduZWQgaW50IGNtZCwKKyAgICBYRU5fR1VF
U1RfSEFORExFX1BBUkFNKHZvaWQpIGFyZzEsCisgICAgdW5zaWduZWQgbG9uZyBhcmcyLAorICAg
IFhFTl9HVUVTVF9IQU5ETEVfUEFSQU0odm9pZCkgYXJnMywKKyAgICB1bnNpZ25lZCBsb25nIGFy
ZzQpOworCiAjaWZkZWYgQ09ORklHX0NPTVBBVAogCiBleHRlcm4gaW50CmRpZmYgLS1naXQgYS94
ZW4vaW5jbHVkZS94ZW4vaHlwZnMuaCBiL3hlbi9pbmNsdWRlL3hlbi9oeXBmcy5oCm5ldyBmaWxl
IG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAuLmQyNTM3MjExZjYKLS0tIC9kZXYvbnVsbAor
KysgYi94ZW4vaW5jbHVkZS94ZW4vaHlwZnMuaApAQCAtMCwwICsxLDQwIEBACisjaWZuZGVmIF9f
WEVOX0hZUEZTX0hfXworI2RlZmluZSBfX1hFTl9IWVBGU19IX18KKworI2luY2x1ZGUgPHhlbi9s
aXN0Lmg+CisKK3N0cnVjdCBoeXBmc19kaXIgeworICAgIHVuc2lnbmVkIGludCBjb250ZW50X3Np
emU7CisgICAgc3RydWN0IGxpc3RfaGVhZCBsaXN0OworfTsKKworZW51bSBoeXBmc19lbnRyeV90
eXBlIHsKKyAgICBoeXBmc190eXBlX2RpciwKKyAgICBoeXBmc190eXBlX3N0cmluZywKKyAgICBo
eXBmc190eXBlX3VpbnQKK307CisKK3N0cnVjdCBoeXBmc19lbnRyeSB7CisgICAgZW51bSBoeXBm
c19lbnRyeV90eXBlIHR5cGU7CisgICAgY29uc3QgY2hhciAqbmFtZTsKKyAgICBzdHJ1Y3QgbGlz
dF9oZWFkIGxpc3Q7CisgICAgc3RydWN0IGh5cGZzX2RpciAqcGFyZW50OworICAgIHVuaW9uIHsK
KyAgICAgICAgdm9pZCAqY29udGVudDsKKyAgICAgICAgc3RydWN0IGh5cGZzX2RpciAqZGlyOwor
ICAgICAgICBjaGFyICpzdHJfdmFsOworICAgICAgICB1bnNpZ25lZCBpbnQgKnVpbnRfdmFsOwor
ICAgIH07Cit9OworCitleHRlcm4gc3RydWN0IGh5cGZzX2RpciBoeXBmc19yb290OworCitpbnQg
aHlwZnNfbmV3X2RpcihzdHJ1Y3QgaHlwZnNfZGlyICpwYXJlbnQsIGNvbnN0IGNoYXIgKm5hbWUs
CisgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaHlwZnNfZGlyICpkaXIpOworaW50IGh5cGZzX25l
d19lbnRyeV9zdHJpbmcoc3RydWN0IGh5cGZzX2RpciAqcGFyZW50LCBjb25zdCBjaGFyICpuYW1l
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhciAqdmFsKTsKK2ludCBoeXBmc19uZXdf
ZW50cnlfdWludChzdHJ1Y3QgaHlwZnNfZGlyICpwYXJlbnQsIGNvbnN0IGNoYXIgKm5hbWUsCisg
ICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50ICp2YWwpOworc3RydWN0IGh5cGZz
X2VudHJ5ICpoeXBmc19nZXRfZW50cnkoY2hhciAqcGF0aCk7CisKKyNlbmRpZiAvKiBfX1hFTl9I
WVBGU19IX18gKi8KLS0gCjIuMTYuNAoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhl
bnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5m
by94ZW4tZGV2ZWw=

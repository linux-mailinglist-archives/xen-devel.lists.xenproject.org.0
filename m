Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 19980974BC
	for <lists+xen-devel@lfdr.de>; Wed, 21 Aug 2019 10:23:34 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i0LrV-0008V5-DJ; Wed, 21 Aug 2019 08:20:57 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=BiIg=WR=amazon.de=prvs=129f3311c=wipawel@srs-us1.protection.inumbo.net>)
 id 1i0LrT-0008Rn-8r
 for xen-devel@lists.xen.org; Wed, 21 Aug 2019 08:20:55 +0000
X-Inumbo-ID: 9590834c-c3ec-11e9-adc2-12813bfff9fa
Received: from smtp-fw-9102.amazon.com (unknown [207.171.184.29])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 9590834c-c3ec-11e9-adc2-12813bfff9fa;
 Wed, 21 Aug 2019 08:20:50 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.de; i=@amazon.de; q=dns/txt; s=amazon201209;
 t=1566375650; x=1597911650;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=lAB+FU7pGkIP7OdOzrwgcApWz6XZkWbBT7jjneGSsUo=;
 b=ozd+A4ErW3OcJw8DhlIqZ9z8+FMhEY5mkZnVumu9vxen13jTtyy2HXc8
 rUwubMs0v9ukEoruRn8bE11oXWqKI3XmbB43mSn2kyc19cLCm1zxq8RnP
 g94Fb1Zf1eo6mE9K7u6o1/NHEQf6YDp8AYvW4TQjebr0Rq8AQudo1WmTm Q=;
X-IronPort-AV: E=Sophos;i="5.64,412,1559520000"; d="scan'208";a="695968363"
Received: from sea3-co-svc-lb6-vlan3.sea.amazon.com (HELO
 email-inbound-relay-2a-90c42d1d.us-west-2.amazon.com) ([10.47.22.38])
 by smtp-border-fw-out-9102.sea19.amazon.com with ESMTP;
 21 Aug 2019 08:20:49 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (pdx4-ws-svc-p6-lb7-vlan3.pdx.amazon.com [10.170.41.166])
 by email-inbound-relay-2a-90c42d1d.us-west-2.amazon.com (Postfix) with ESMTPS
 id D4FF9A1DE8; Wed, 21 Aug 2019 08:20:48 +0000 (UTC)
Received: from EX13D03EUC004.ant.amazon.com (10.43.164.33) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.243) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Wed, 21 Aug 2019 08:20:15 +0000
Received: from EX13MTAUWB001.ant.amazon.com (10.43.161.207) by
 EX13D03EUC004.ant.amazon.com (10.43.164.33) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Wed, 21 Aug 2019 08:20:13 +0000
Received: from dev-dsk-wipawel-1a-0c4e6d58.eu-west-1.amazon.com (10.4.134.33)
 by mail-relay.amazon.com (10.43.161.249) with Microsoft SMTP Server
 id
 15.0.1367.3 via Frontend Transport; Wed, 21 Aug 2019 08:20:11 +0000
From: Pawel Wieczorkiewicz <wipawel@amazon.de>
To: <xen-devel@lists.xen.org>, <xen-devel@lists.xenproject.org>
Date: Wed, 21 Aug 2019 08:19:23 +0000
Message-ID: <20190821081931.90887-7-wipawel@amazon.de>
X-Mailer: git-send-email 2.16.5
In-Reply-To: <20190821081931.90887-1-wipawel@amazon.de>
References: <20190821081931.90887-1-wipawel@amazon.de>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH 06/14] livepatch: Add support for apply|revert
 action replacement hooks
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Pawel Wieczorkiewicz <wipawel@amazon.de>, wipawel@amazon.com, Ross
 Lagerwall <ross.lagerwall@citrix.com>, mpohlack@amazon.com,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QnkgZGVmYXVsdCwgaW4gdGhlIHF1aWVzY2luZyB6b25lLCBhIGhvdHBhdGNoIHBheWxvYWQgaXMg
YXBwbGllZCB3aXRoCmFwcGx5X3BheWxvYWQoKSBhbmQgcmV2ZXJ0ZWQgd2l0aCByZXZlcnRfcGF5
bG9hZCgpIGZ1bmN0aW9ucy4gQm90aCBvZgp0aGUgZnVuY3Rpb25zIHJlY2VpdmUgdGhlIHBheWxv
YWQgc3RydWN0IHBvaW50ZXIgYXMgYSBwYXJhbWV0ZXIuIFRoZQpmdW5jdGlvbnMgYXJlIGFsc28g
YSBwbGFjZSB3aGVyZSBzdGFuZGFyZCAnbG9hZCcgYW5kICd1bmxvYWQnIG1vZHVsZQpob29rcyBh
cmUgZXhlY3V0ZWQuCgpUbyBpbmNyZWFzZSBob3RwYXRjaGluZyBzeXN0ZW0ncyBhZ2lsaXR5IGFu
ZCBwcm92aWRlIG1vcmUgZmxleGlhYmxlCmxvbmctdGVybSBob3RwYXRjaCBzb2x1dGlvbiwgYWxs
b3cgdG8gb3ZlcndyaXRlIHRoZSBkZWZhdWx0IGFwcGx5CmFuZCByZXZlcnQgYWN0aW9uIGZ1bmN0
aW9ucyB3aXRoIGhvb2stbGlrZSBzdXBwbGllZCBhbHRlcm5hdGl2ZXMuClRoZSBhbHRlcm5hdGl2
ZSBmdW5jdGlvbnMgYXJlIG9wdGlvbmFsIGFuZCB0aGUgZGVmYXVsdCBmdW5jdGlvbnMgYXJlCnVz
ZWQgYnkgZGVmYXVsdC4KClNpbmNlIHRoZSBhbHRlcm5hdGl2ZSBmdW5jdGlvbnMgaGF2ZSBkaXJl
Y3QgYWNjZXNzIHRvIHRoZSBob3RwYXRjaApwYXlsb2FkIHN0cnVjdHVyZSwgdGhleSBjYW4gYmV0
dGVyIGNvbnRyb2wgY29udGV4dCBvZiB0aGUgJ2xvYWQnIGFuZAondW5sb2FkJyBob29rcyBleGVj
dXRpb24gYXMgd2VsbCBhcyBleGFjdCBpbnN0cnVjdGlvbnMgcmVwbGFjZW1lbnQKd29ya2Zsb3dz
LiBUaGV5IGNhbiBiZSBhbHNvIGVhc2lseSBleHRlbmRlZCB0byBzdXBwb3J0IGV4dHJhIGZlYXR1
cmVzCmluIHRoZSBmdXR1cmUuCgpUbyBzaW1wbGlmeSB0aGUgYWx0ZXJuYXRpdmUgZnVuY3Rpb24g
Z2VuZXJhdGlvbiBtb3ZlIGNvZGUgcmVzcG9uc2libGUKZm9yIHBheWxvYWQgYW5kIGhvdHBhdGNo
IHJlZ2lvbiByZWdpc3RyYXRpb24gb3V0c2lkZSBvZiB0aGUgZnVuY3Rpb24uClRoYXQgd2F5IGl0
IGlzIGd1YXJhbnRlZWQgdGhhdCB0aGUgcmVnaXN0cmF0aW9uIHN0ZXAgb2NjdXJzIGV2ZW4gZm9y
Cm5ld2x5IHN1cHBsaWVkIGZ1bmN0aW9ucy4KClNpZ25lZC1vZmYtYnk6IFBhd2VsIFdpZWN6b3Jr
aWV3aWN6IDx3aXBhd2VsQGFtYXpvbi5kZT4KUmV2aWV3ZWQtYnk6IFBldHJlIEVmdGltZSA8ZXBl
dHJlQGFtYXpvbi5jb20+ClJldmlld2VkLWJ5OiBNYXJ0aW4gUG9obGFjayA8bXBvaGxhY2tAYW1h
em9uLmNvbT4KUmV2aWV3ZWQtYnk6IE5vcmJlcnQgTWFudGhleSA8bm1hbnRoZXlAYW1hem9uLmNv
bT4KUmV2aWV3ZWQtYnk6IEFuZHJhLUlyaW5hIFBhcmFzY2hpdiA8YW5kcmFwcnNAYW1hem9uLmNv
bT4KUmV2aWV3ZWQtYnk6IEJqb2VybiBEb2ViZWwgPGRvZWJlbEBhbWF6b24uY29tPgotLS0KIHhl
bi9jb21tb24vbGl2ZXBhdGNoLmMgICAgICAgICAgICAgIHwgNjYgKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKy0tLS0tLQogeGVuL2luY2x1ZGUveGVuL2xpdmVwYXRjaF9wYXlsb2FkLmgg
fCAxMCArKysrKysKIDIgZmlsZXMgY2hhbmdlZCwgNjYgaW5zZXJ0aW9ucygrKSwgMTAgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9saXZlcGF0Y2guYyBiL3hlbi9jb21tb24v
bGl2ZXBhdGNoLmMKaW5kZXggNDY0YzA3YWQyOC4uMzhmYWI4YjI0MCAxMDA2NDQKLS0tIGEveGVu
L2NvbW1vbi9saXZlcGF0Y2guYworKysgYi94ZW4vY29tbW9uL2xpdmVwYXRjaC5jCkBAIC01ODcs
OCArNTg3LDExIEBAIHN0YXRpYyBpbnQgcHJlcGFyZV9wYXlsb2FkKHN0cnVjdCBwYXlsb2FkICpw
YXlsb2FkLAogICAgIExJVkVQQVRDSF9BU1NJR05fTVVMVElfSE9PSyhlbGYsIHBheWxvYWQtPnVu
bG9hZF9mdW5jcywgcGF5bG9hZC0+bl91bmxvYWRfZnVuY3MsICIubGl2ZXBhdGNoLmhvb2tzLnVu
bG9hZCIpOwogCiAgICAgTElWRVBBVENIX0FTU0lHTl9TSU5HTEVfSE9PSyhlbGYsIHBheWxvYWQt
Pmhvb2tzLmFwcGx5LnByZSwgIi5saXZlcGF0Y2guaG9va3MucHJlYXBwbHkiKTsKKyAgICBMSVZF
UEFUQ0hfQVNTSUdOX1NJTkdMRV9IT09LKGVsZiwgcGF5bG9hZC0+aG9va3MuYXBwbHkuYWN0aW9u
LCAiLmxpdmVwYXRjaC5ob29rcy5hcHBseSIpOwogICAgIExJVkVQQVRDSF9BU1NJR05fU0lOR0xF
X0hPT0soZWxmLCBwYXlsb2FkLT5ob29rcy5hcHBseS5wb3N0LCAiLmxpdmVwYXRjaC5ob29rcy5w
b3N0YXBwbHkiKTsKKwogICAgIExJVkVQQVRDSF9BU1NJR05fU0lOR0xFX0hPT0soZWxmLCBwYXls
b2FkLT5ob29rcy5yZXZlcnQucHJlLCAiLmxpdmVwYXRjaC5ob29rcy5wcmVyZXZlcnQiKTsKKyAg
ICBMSVZFUEFUQ0hfQVNTSUdOX1NJTkdMRV9IT09LKGVsZiwgcGF5bG9hZC0+aG9va3MucmV2ZXJ0
LmFjdGlvbiwgIi5saXZlcGF0Y2guaG9va3MucmV2ZXJ0Iik7CiAgICAgTElWRVBBVENIX0FTU0lH
Tl9TSU5HTEVfSE9PSyhlbGYsIHBheWxvYWQtPmhvb2tzLnJldmVydC5wb3N0LCAiLmxpdmVwYXRj
aC5ob29rcy5wb3N0cmV2ZXJ0Iik7CiAKICAgICBzZWMgPSBsaXZlcGF0Y2hfZWxmX3NlY19ieV9u
YW1lKGVsZiwgRUxGX0JVSUxEX0lEX05PVEUpOwpAQCAtMTExNCw2ICsxMTE3LDExIEBAIHN0YXRp
YyBpbnQgYXBwbHlfcGF5bG9hZChzdHJ1Y3QgcGF5bG9hZCAqZGF0YSkKIAogICAgIGFyY2hfbGl2
ZXBhdGNoX3Jldml2ZSgpOwogCisgICAgcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9p
ZCBhcHBseV9wYXlsb2FkX3RhaWwoc3RydWN0IHBheWxvYWQgKmRhdGEpCit7CiAgICAgLyoKICAg
ICAgKiBXZSBuZWVkIFJDVSB2YXJpYW50ICh3aGljaCBoYXMgYmFycmllcnMpIGluIGNhc2Ugd2Ug
Y3Jhc2ggaGVyZS4KICAgICAgKiBUaGUgYXBwbGllZF9saXN0IGlzIGl0ZXJhdGVkIGJ5IHRoZSB0
cmFwIGNvZGUuCkBAIC0xMTIxLDcgKzExMjksNyBAQCBzdGF0aWMgaW50IGFwcGx5X3BheWxvYWQo
c3RydWN0IHBheWxvYWQgKmRhdGEpCiAgICAgbGlzdF9hZGRfdGFpbF9yY3UoJmRhdGEtPmFwcGxp
ZWRfbGlzdCwgJmFwcGxpZWRfbGlzdCk7CiAgICAgcmVnaXN0ZXJfdmlydHVhbF9yZWdpb24oJmRh
dGEtPnJlZ2lvbik7CiAKLSAgICByZXR1cm4gMDsKKyAgICBkYXRhLT5zdGF0ZSA9IExJVkVQQVRD
SF9TVEFURV9BUFBMSUVEOwogfQogCiBzdGF0aWMgaW50IHJldmVydF9wYXlsb2FkKHN0cnVjdCBw
YXlsb2FkICpkYXRhKQpAQCAtMTE1NCw2ICsxMTYyLDExIEBAIHN0YXRpYyBpbnQgcmV2ZXJ0X3Bh
eWxvYWQoc3RydWN0IHBheWxvYWQgKmRhdGEpCiAgICAgQVNTRVJUKCFsb2NhbF9pcnFfaXNfZW5h
YmxlZCgpKTsKIAogICAgIGFyY2hfbGl2ZXBhdGNoX3Jldml2ZSgpOworICAgIHJldHVybiAwOwor
fQorCitzdGF0aWMgaW5saW5lIHZvaWQgcmV2ZXJ0X3BheWxvYWRfdGFpbChzdHJ1Y3QgcGF5bG9h
ZCAqZGF0YSkKK3sKIAogICAgIC8qCiAgICAgICogV2UgbmVlZCBSQ1UgdmFyaWFudCAod2hpY2gg
aGFzIGJhcnJpZXJzKSBpbiBjYXNlIHdlIGNyYXNoIGhlcmUuCkBAIC0xMTYzLDcgKzExNzYsNyBA
QCBzdGF0aWMgaW50IHJldmVydF9wYXlsb2FkKHN0cnVjdCBwYXlsb2FkICpkYXRhKQogICAgIHVu
cmVnaXN0ZXJfdmlydHVhbF9yZWdpb24oJmRhdGEtPnJlZ2lvbik7CiAKICAgICBkYXRhLT5yZXZl
cnRlZCA9IHRydWU7Ci0gICAgcmV0dXJuIDA7CisgICAgZGF0YS0+c3RhdGUgPSBMSVZFUEFUQ0hf
U1RBVEVfQ0hFQ0tFRDsKIH0KIAogLyoKQEAgLTExODMsMTUgKzExOTYsMzEgQEAgc3RhdGljIHZv
aWQgbGl2ZXBhdGNoX2RvX2FjdGlvbih2b2lkKQogICAgIHN3aXRjaCAoIGxpdmVwYXRjaF93b3Jr
LmNtZCApCiAgICAgewogICAgIGNhc2UgTElWRVBBVENIX0FDVElPTl9BUFBMWToKLSAgICAgICAg
cmMgPSBhcHBseV9wYXlsb2FkKGRhdGEpOworICAgICAgICBpZiAoIGlzX2hvb2tfZW5hYmxlZChk
YXRhLT5ob29rcy5hcHBseS5hY3Rpb24pICkKKyAgICAgICAgeworICAgICAgICAgICAgcHJpbnRr
KFhFTkxPR19JTkZPIExJVkVQQVRDSCAiJXM6IENhbGxpbmcgYXBwbHkgYWN0aW9uIGhvb2sgZnVu
Y3Rpb25cbiIsIGRhdGEtPm5hbWUpOworCisgICAgICAgICAgICByYyA9ICgqZGF0YS0+aG9va3Mu
YXBwbHkuYWN0aW9uKShkYXRhKTsKKyAgICAgICAgfQorICAgICAgICBlbHNlCisgICAgICAgICAg
ICByYyA9IGFwcGx5X3BheWxvYWQoZGF0YSk7CisKICAgICAgICAgaWYgKCByYyA9PSAwICkKLSAg
ICAgICAgICAgIGRhdGEtPnN0YXRlID0gTElWRVBBVENIX1NUQVRFX0FQUExJRUQ7CisgICAgICAg
ICAgICBhcHBseV9wYXlsb2FkX3RhaWwoZGF0YSk7CiAgICAgICAgIGJyZWFrOwogCiAgICAgY2Fz
ZSBMSVZFUEFUQ0hfQUNUSU9OX1JFVkVSVDoKLSAgICAgICAgcmMgPSByZXZlcnRfcGF5bG9hZChk
YXRhKTsKKyAgICAgICAgaWYgKCBpc19ob29rX2VuYWJsZWQoZGF0YS0+aG9va3MucmV2ZXJ0LmFj
dGlvbikgKQorICAgICAgICB7CisgICAgICAgICAgICBwcmludGsoWEVOTE9HX0lORk8gTElWRVBB
VENIICIlczogQ2FsbGluZyByZXZlcnQgYWN0aW9uIGhvb2sgZnVuY3Rpb25cbiIsIGRhdGEtPm5h
bWUpOworCisgICAgICAgICAgICByYyA9ICgqZGF0YS0+aG9va3MucmV2ZXJ0LmFjdGlvbikoZGF0
YSk7CisgICAgICAgIH0KKyAgICAgICAgZWxzZQorICAgICAgICAgICAgcmMgPSByZXZlcnRfcGF5
bG9hZChkYXRhKTsKKwogICAgICAgICBpZiAoIHJjID09IDAgKQotICAgICAgICAgICAgZGF0YS0+
c3RhdGUgPSBMSVZFUEFUQ0hfU1RBVEVfQ0hFQ0tFRDsKKyAgICAgICAgICAgIHJldmVydF9wYXls
b2FkX3RhaWwoZGF0YSk7CiAgICAgICAgIGJyZWFrOwogCiAgICAgY2FzZSBMSVZFUEFUQ0hfQUNU
SU9OX1JFUExBQ0U6CkBAIC0xMjAyLDkgKzEyMzEsMTggQEAgc3RhdGljIHZvaWQgbGl2ZXBhdGNo
X2RvX2FjdGlvbih2b2lkKQogICAgICAgICAgKi8KICAgICAgICAgbGlzdF9mb3JfZWFjaF9lbnRy
eV9zYWZlX3JldmVyc2UgKCBvdGhlciwgdG1wLCAmYXBwbGllZF9saXN0LCBhcHBsaWVkX2xpc3Qg
KQogICAgICAgICB7Ci0gICAgICAgICAgICBvdGhlci0+cmMgPSByZXZlcnRfcGF5bG9hZChvdGhl
cik7CisgICAgICAgICAgICBpZiAoIGlzX2hvb2tfZW5hYmxlZChvdGhlci0+aG9va3MucmV2ZXJ0
LmFjdGlvbikgKQorICAgICAgICAgICAgeworICAgICAgICAgICAgICAgIHByaW50ayhYRU5MT0df
SU5GTyBMSVZFUEFUQ0ggIiVzOiBDYWxsaW5nIHJldmVydCBhY3Rpb24gaG9vayBmdW5jdGlvblxu
Iiwgb3RoZXItPm5hbWUpOworCisgICAgICAgICAgICAgICAgb3RoZXItPnJjID0gKCpvdGhlci0+
aG9va3MucmV2ZXJ0LmFjdGlvbikob3RoZXIpOworICAgICAgICAgICAgfQorICAgICAgICAgICAg
ZWxzZQorICAgICAgICAgICAgICAgIG90aGVyLT5yYyA9IHJldmVydF9wYXlsb2FkKG90aGVyKTsK
KworCiAgICAgICAgICAgICBpZiAoIG90aGVyLT5yYyA9PSAwICkKLSAgICAgICAgICAgICAgICBv
dGhlci0+c3RhdGUgPSBMSVZFUEFUQ0hfU1RBVEVfQ0hFQ0tFRDsKKyAgICAgICAgICAgICAgICBy
ZXZlcnRfcGF5bG9hZF90YWlsKG90aGVyKTsKICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAg
IHsKICAgICAgICAgICAgICAgICByYyA9IC1FSU5WQUw7CkBAIC0xMjE0LDkgKzEyNTIsMTcgQEAg
c3RhdGljIHZvaWQgbGl2ZXBhdGNoX2RvX2FjdGlvbih2b2lkKQogCiAgICAgICAgIGlmICggcmMg
PT0gMCApCiAgICAgICAgIHsKLSAgICAgICAgICAgIHJjID0gYXBwbHlfcGF5bG9hZChkYXRhKTsK
KyAgICAgICAgICAgIGlmICggaXNfaG9va19lbmFibGVkKGRhdGEtPmhvb2tzLmFwcGx5LmFjdGlv
bikgKQorICAgICAgICAgICAgeworICAgICAgICAgICAgICAgIHByaW50ayhYRU5MT0dfSU5GTyBM
SVZFUEFUQ0ggIiVzOiBDYWxsaW5nIGFwcGx5IGFjdGlvbiBob29rIGZ1bmN0aW9uXG4iLCBkYXRh
LT5uYW1lKTsKKworICAgICAgICAgICAgICAgIHJjID0gKCpkYXRhLT5ob29rcy5hcHBseS5hY3Rp
b24pKGRhdGEpOworICAgICAgICAgICAgfQorICAgICAgICAgICAgZWxzZQorICAgICAgICAgICAg
ICAgIHJjID0gYXBwbHlfcGF5bG9hZChkYXRhKTsKKwogICAgICAgICAgICAgaWYgKCByYyA9PSAw
ICkKLSAgICAgICAgICAgICAgICBkYXRhLT5zdGF0ZSA9IExJVkVQQVRDSF9TVEFURV9BUFBMSUVE
OworICAgICAgICAgICAgICAgIGFwcGx5X3BheWxvYWRfdGFpbChkYXRhKTsKICAgICAgICAgfQog
ICAgICAgICBicmVhazsKIApkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL2xpdmVwYXRjaF9w
YXlsb2FkLmggYi94ZW4vaW5jbHVkZS94ZW4vbGl2ZXBhdGNoX3BheWxvYWQuaAppbmRleCBjZDIw
OTQ0Y2M0Li5mZjE2YWYwZGQ2IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vbGl2ZXBhdGNo
X3BheWxvYWQuaAorKysgYi94ZW4vaW5jbHVkZS94ZW4vbGl2ZXBhdGNoX3BheWxvYWQuaApAQCAt
MjIsMTEgKzIyLDEzIEBAIHR5cGVkZWYgdm9pZCBsaXZlcGF0Y2hfbG9hZGNhbGxfdCh2b2lkKTsK
IHR5cGVkZWYgdm9pZCBsaXZlcGF0Y2hfdW5sb2FkY2FsbF90KHZvaWQpOwogCiB0eXBlZGVmIGlu
dCBsaXZlcGF0Y2hfcHJlY2FsbF90KGxpdmVwYXRjaF9wYXlsb2FkX3QgKmFyZyk7Cit0eXBlZGVm
IGludCBsaXZlcGF0Y2hfYWN0aW9uY2FsbF90KGxpdmVwYXRjaF9wYXlsb2FkX3QgKmFyZyk7CiB0
eXBlZGVmIHZvaWQgbGl2ZXBhdGNoX3Bvc3RjYWxsX3QobGl2ZXBhdGNoX3BheWxvYWRfdCAqYXJn
KTsKIAogc3RydWN0IGxpdmVwYXRjaF9ob29rcyB7CiAgICAgc3RydWN0IHsKICAgICAgICAgbGl2
ZXBhdGNoX3ByZWNhbGxfdCAqY29uc3QgKnByZTsKKyAgICAgICAgbGl2ZXBhdGNoX2FjdGlvbmNh
bGxfdCAqY29uc3QgKmFjdGlvbjsKICAgICAgICAgbGl2ZXBhdGNoX3Bvc3RjYWxsX3QgKmNvbnN0
ICpwb3N0OwogICAgIH0gYXBwbHksIHJldmVydDsKIH07CkBAIC05MSw2ICs5MywxMCBAQCBzdHJ1
Y3QgcGF5bG9hZCB7CiAgICAgbGl2ZXBhdGNoX3ByZWNhbGxfdCAqX19hdHRyaWJ1dGVfXygod2Vh
aywgdXNlZCkpIFwKICAgICAgICAgY29uc3QgbGl2ZXBhdGNoX3ByZWFwcGx5X2RhdGFfIyNfZm4g
X19zZWN0aW9uKCIubGl2ZXBhdGNoLmhvb2tzLnByZWFwcGx5IikgPSBfZm47CiAKKyNkZWZpbmUg
TElWRVBBVENIX0FQUExZX0hPT0soX2ZuKSBcCisgICAgbGl2ZXBhdGNoX2FjdGlvbmNhbGxfdCAq
X19hdHRyaWJ1dGVfXygod2VhaywgdXNlZCkpIFwKKyAgICAgICAgY29uc3QgbGl2ZXBhdGNoX2Fw
cGx5X2RhdGFfIyNfZm4gX19zZWN0aW9uKCIubGl2ZXBhdGNoLmhvb2tzLmFwcGx5IikgPSBfZm47
CisKICNkZWZpbmUgTElWRVBBVENIX1BPU1RBUFBMWV9IT09LKF9mbikgXAogICAgIGxpdmVwYXRj
aF9wb3N0Y2FsbF90ICpfX2F0dHJpYnV0ZV9fKCh3ZWFrLCB1c2VkKSkgXAogICAgICAgICBjb25z
dCBsaXZlcGF0Y2hfcG9zdGFwcGx5X2RhdGFfIyNfZm4gX19zZWN0aW9uKCIubGl2ZXBhdGNoLmhv
b2tzLnBvc3RhcHBseSIpID0gX2ZuOwpAQCAtOTksNiArMTA1LDEwIEBAIHN0cnVjdCBwYXlsb2Fk
IHsKICAgICBsaXZlcGF0Y2hfcHJlY2FsbF90ICpfX2F0dHJpYnV0ZV9fKCh3ZWFrLCB1c2VkKSkg
XAogICAgICAgICBjb25zdCBsaXZlcGF0Y2hfcHJlcmV2ZXJ0X2RhdGFfIyNfZm4gX19zZWN0aW9u
KCIubGl2ZXBhdGNoLmhvb2tzLnByZXJldmVydCIpID0gX2ZuOwogCisjZGVmaW5lIExJVkVQQVRD
SF9SRVZFUlRfSE9PSyhfZm4pIFwKKyAgICBsaXZlcGF0Y2hfYWN0aW9uY2FsbF90ICpfX2F0dHJp
YnV0ZV9fKCh3ZWFrLCB1c2VkKSkgXAorICAgICAgICBjb25zdCBsaXZlcGF0Y2hfcmV2ZXJ0X2Rh
dGFfIyNfZm4gX19zZWN0aW9uKCIubGl2ZXBhdGNoLmhvb2tzLnJldmVydCIpID0gX2ZuOworCiAj
ZGVmaW5lIExJVkVQQVRDSF9QT1NUUkVWRVJUX0hPT0soX2ZuKSBcCiAgICAgbGl2ZXBhdGNoX3Bv
c3RjYWxsX3QgKl9fYXR0cmlidXRlX18oKHdlYWssIHVzZWQpKSBcCiAgICAgICAgIGNvbnN0IGxp
dmVwYXRjaF9wb3N0cmV2ZXJ0X2RhdGFfIyNfZm4gX19zZWN0aW9uKCIubGl2ZXBhdGNoLmhvb2tz
LnBvc3RyZXZlcnQiKSA9IF9mbjsKLS0gCjIuMTYuNQoKCgoKQW1hem9uIERldmVsb3BtZW50IENl
bnRlciBHZXJtYW55IEdtYkgKS3JhdXNlbnN0ci4gMzgKMTAxMTcgQmVybGluCkdlc2NoYWVmdHNm
dWVocnVuZzogQ2hyaXN0aWFuIFNjaGxhZWdlciwgUmFsZiBIZXJicmljaApFaW5nZXRyYWdlbiBh
bSBBbXRzZ2VyaWNodCBDaGFybG90dGVuYnVyZyB1bnRlciBIUkIgMTQ5MTczIEIKU2l0ejogQmVy
bGluClVzdC1JRDogREUgMjg5IDIzNyA4NzkKCgoKCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxp
c3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9s
aXN0aW5mby94ZW4tZGV2ZWw=

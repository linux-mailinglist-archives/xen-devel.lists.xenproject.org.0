Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 5D0E47D94A
	for <lists+xen-devel@lfdr.de>; Thu,  1 Aug 2019 12:21:48 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ht8B3-0001wj-4b; Thu, 01 Aug 2019 10:19:17 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=TV56=V5=intel.com=chao.gao@srs-us1.protection.inumbo.net>)
 id 1ht8B1-0001uo-4C
 for xen-devel@lists.xenproject.org; Thu, 01 Aug 2019 10:19:15 +0000
X-Inumbo-ID: cefbbf68-b445-11e9-bc44-2f52c2679fc3
Received: from mga17.intel.com (unknown [192.55.52.151])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id cefbbf68-b445-11e9-bc44-2f52c2679fc3;
 Thu, 01 Aug 2019 10:19:13 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga003.jf.intel.com ([10.7.209.27])
 by fmsmga107.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 01 Aug 2019 03:19:12 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,333,1559545200"; d="scan'208";a="175207944"
Received: from gao-cwp.sh.intel.com ([10.239.159.26])
 by orsmga003.jf.intel.com with ESMTP; 01 Aug 2019 03:19:11 -0700
From: Chao Gao <chao.gao@intel.com>
To: xen-devel@lists.xenproject.org
Date: Thu,  1 Aug 2019 18:22:46 +0800
Message-Id: <1564654971-31328-12-git-send-email-chao.gao@intel.com>
X-Mailer: git-send-email 1.9.1
In-Reply-To: <1564654971-31328-1-git-send-email-chao.gao@intel.com>
References: <1564654971-31328-1-git-send-email-chao.gao@intel.com>
Subject: [Xen-devel] [PATCH v8 11/16] microcode: pass a patch pointer to
 apply_microcode()
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Ashok Raj <ashok.raj@intel.com>, Wei Liu <wl@xen.org>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Jan Beulich <jbeulich@suse.com>,
 Chao Gao <chao.gao@intel.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

YXBwbHlfbWljcm9jb2RlKCkncyBhbHdheXMgbG9hZGluZyB0aGUgY2FjaGVkIHVjb2RlIHBhdGNo
IGZvcmNlcwphIHBhdGNoIHRvIGJlIHN0b3JlZCBiZWZvcmUgYmVpbmcgbG9hZGluZy4gTWFrZSBh
cHBseV9taWNyb2NvZGUoKQphY2NlcHQgYSBwYXRjaCBwb2ludGVyIHRvIHJlbW92ZSB0aGUgbGlt
aXRhdGlvbiBzbyB0aGF0IGEgcGF0Y2gKY2FuIGJlIHN0b3JlZCBhZnRlciBhIHN1Y2Nlc3NmdWwg
bG9hZGluZy4KClNpZ25lZC1vZmYtYnk6IENoYW8gR2FvIDxjaGFvLmdhb0BpbnRlbC5jb20+Ci0t
LQpDaGFuZ2VzIGluIHY4OgogLSBuZXcKLS0tCiB4ZW4vYXJjaC94ODYvbWljcm9jb2RlLmMgICAg
ICAgIHwgMiArLQogeGVuL2FyY2gveDg2L21pY3JvY29kZV9hbWQuYyAgICB8IDUgKystLS0KIHhl
bi9hcmNoL3g4Ni9taWNyb2NvZGVfaW50ZWwuYyAgfCA1ICsrLS0tCiB4ZW4vaW5jbHVkZS9hc20t
eDg2L21pY3JvY29kZS5oIHwgMiArLQogNCBmaWxlcyBjaGFuZ2VkLCA2IGluc2VydGlvbnMoKyks
IDggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L21pY3JvY29kZS5jIGIv
eGVuL2FyY2gveDg2L21pY3JvY29kZS5jCmluZGV4IDA4MmIyOWMuLjAzYmMwYWEgMTAwNjQ0Ci0t
LSBhL3hlbi9hcmNoL3g4Ni9taWNyb2NvZGUuYworKysgYi94ZW4vYXJjaC94ODYvbWljcm9jb2Rl
LmMKQEAgLTIwOCw3ICsyMDgsNyBAQCBpbnQgbWljcm9jb2RlX3Jlc3VtZV9jcHUodm9pZCkKIAog
ICAgIGVyciA9IG1pY3JvY29kZV9vcHMtPmNvbGxlY3RfY3B1X2luZm8oc2lnKTsKICAgICBpZiAo
IGxpa2VseSghZXJyKSApCi0gICAgICAgIGVyciA9IG1pY3JvY29kZV9vcHMtPmFwcGx5X21pY3Jv
Y29kZSgpOworICAgICAgICBlcnIgPSBtaWNyb2NvZGVfb3BzLT5hcHBseV9taWNyb2NvZGUobWlj
cm9jb2RlX2NhY2hlKTsKICAgICBzcGluX3VubG9jaygmbWljcm9jb2RlX211dGV4KTsKIAogICAg
IHJldHVybiBlcnI7CmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvbWljcm9jb2RlX2FtZC5jIGIv
eGVuL2FyY2gveDg2L21pY3JvY29kZV9hbWQuYwppbmRleCAzZDE1MDVkLi5mZWQwNDRhIDEwMDY0
NAotLS0gYS94ZW4vYXJjaC94ODYvbWljcm9jb2RlX2FtZC5jCisrKyBiL3hlbi9hcmNoL3g4Ni9t
aWNyb2NvZGVfYW1kLmMKQEAgLTI0Nyw3ICsyNDcsNyBAQCBzdGF0aWMgZW51bSBtaWNyb2NvZGVf
bWF0Y2hfcmVzdWx0IGNvbXBhcmVfcGF0Y2goCiAgICAgcmV0dXJuIE1JU19VQ09ERTsKIH0KIAot
c3RhdGljIGludCBhcHBseV9taWNyb2NvZGUodm9pZCkKK3N0YXRpYyBpbnQgYXBwbHlfbWljcm9j
b2RlKGNvbnN0IHN0cnVjdCBtaWNyb2NvZGVfcGF0Y2ggKnBhdGNoKQogewogICAgIHVuc2lnbmVk
IGxvbmcgZmxhZ3M7CiAgICAgdWludDMyX3QgcmV2OwpAQCAtMjU1LDcgKzI1NSw2IEBAIHN0YXRp
YyBpbnQgYXBwbHlfbWljcm9jb2RlKHZvaWQpCiAgICAgdW5zaWduZWQgaW50IGNwdSA9IHNtcF9w
cm9jZXNzb3JfaWQoKTsKICAgICBzdHJ1Y3QgY3B1X3NpZ25hdHVyZSAqc2lnID0gJnBlcl9jcHUo
Y3B1X3NpZywgY3B1KTsKICAgICBjb25zdCBzdHJ1Y3QgbWljcm9jb2RlX2hlYWRlcl9hbWQgKmhk
cjsKLSAgICBjb25zdCBzdHJ1Y3QgbWljcm9jb2RlX3BhdGNoICpwYXRjaCA9IG1pY3JvY29kZV9n
ZXRfY2FjaGUoKTsKIAogICAgIGlmICggIW1hdGNoX2NwdShwYXRjaCkgKQogICAgICAgICByZXR1
cm4gLUVJTlZBTDsKQEAgLTU2Miw3ICs1NjEsNyBAQCBzdGF0aWMgaW50IGNwdV9yZXF1ZXN0X21p
Y3JvY29kZShjb25zdCB2b2lkICpidWYsIHNpemVfdCBidWZzaXplKQogCiAgICAgICAgIGlmICgg
bWF0Y2hfY3B1KG1pY3JvY29kZV9nZXRfY2FjaGUoKSkgKQogICAgICAgICB7Ci0gICAgICAgICAg
ICBlcnJvciA9IGFwcGx5X21pY3JvY29kZSgpOworICAgICAgICAgICAgZXJyb3IgPSBhcHBseV9t
aWNyb2NvZGUobWljcm9jb2RlX2dldF9jYWNoZSgpKTsKICAgICAgICAgICAgIGlmICggZXJyb3Ig
KQogICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICB9CmRpZmYgLS1naXQgYS94ZW4vYXJj
aC94ODYvbWljcm9jb2RlX2ludGVsLmMgYi94ZW4vYXJjaC94ODYvbWljcm9jb2RlX2ludGVsLmMK
aW5kZXggODY3ZTRmMi4uYmNiNDhiYyAxMDA2NDQKLS0tIGEveGVuL2FyY2gveDg2L21pY3JvY29k
ZV9pbnRlbC5jCisrKyBiL3hlbi9hcmNoL3g4Ni9taWNyb2NvZGVfaW50ZWwuYwpAQCAtMzE4LDcg
KzMxOCw3IEBAIHN0YXRpYyBpbnQgZ2V0X21hdGNoaW5nX21pY3JvY29kZShjb25zdCB2b2lkICpt
YykKICAgICByZXR1cm4gMTsKIH0KIAotc3RhdGljIGludCBhcHBseV9taWNyb2NvZGUodm9pZCkK
K3N0YXRpYyBpbnQgYXBwbHlfbWljcm9jb2RlKGNvbnN0IHN0cnVjdCBtaWNyb2NvZGVfcGF0Y2gg
KnBhdGNoKQogewogICAgIHVuc2lnbmVkIGxvbmcgZmxhZ3M7CiAgICAgdWludDY0X3QgbXNyX2Nv
bnRlbnQ7CkBAIC0zMjYsNyArMzI2LDYgQEAgc3RhdGljIGludCBhcHBseV9taWNyb2NvZGUodm9p
ZCkKICAgICB1bnNpZ25lZCBpbnQgY3B1X251bSA9IHJhd19zbXBfcHJvY2Vzc29yX2lkKCk7CiAg
ICAgc3RydWN0IGNwdV9zaWduYXR1cmUgKnNpZyA9ICZ0aGlzX2NwdShjcHVfc2lnKTsKICAgICBj
b25zdCBzdHJ1Y3QgbWljcm9jb2RlX2ludGVsICptY19pbnRlbDsKLSAgICBjb25zdCBzdHJ1Y3Qg
bWljcm9jb2RlX3BhdGNoICpwYXRjaCA9IG1pY3JvY29kZV9nZXRfY2FjaGUoKTsKIAogICAgIGlm
ICggIW1hdGNoX2NwdShwYXRjaCkgKQogICAgICAgICByZXR1cm4gLUVJTlZBTDsKQEAgLTQyMSw3
ICs0MjAsNyBAQCBzdGF0aWMgaW50IGNwdV9yZXF1ZXN0X21pY3JvY29kZShjb25zdCB2b2lkICpi
dWYsIHNpemVfdCBzaXplKQogICAgICAgICBlcnJvciA9IG9mZnNldDsKIAogICAgIGlmICggIWVy
cm9yICYmIG1hdGNoX2NwdShtaWNyb2NvZGVfZ2V0X2NhY2hlKCkpICkKLSAgICAgICAgZXJyb3Ig
PSBhcHBseV9taWNyb2NvZGUoKTsKKyAgICAgICAgZXJyb3IgPSBhcHBseV9taWNyb2NvZGUobWlj
cm9jb2RlX2dldF9jYWNoZSgpKTsKIAogICAgIHJldHVybiBlcnJvcjsKIH0KZGlmZiAtLWdpdCBh
L3hlbi9pbmNsdWRlL2FzbS14ODYvbWljcm9jb2RlLmggYi94ZW4vaW5jbHVkZS9hc20teDg2L21p
Y3JvY29kZS5oCmluZGV4IGM4ZDJjNGYuLjhjN2RlOWQgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRl
L2FzbS14ODYvbWljcm9jb2RlLmgKKysrIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9taWNyb2NvZGUu
aApAQCAtMjIsNyArMjIsNyBAQCBzdHJ1Y3QgbWljcm9jb2RlX3BhdGNoIHsKIHN0cnVjdCBtaWNy
b2NvZGVfb3BzIHsKICAgICBpbnQgKCpjcHVfcmVxdWVzdF9taWNyb2NvZGUpKGNvbnN0IHZvaWQg
KmJ1Ziwgc2l6ZV90IHNpemUpOwogICAgIGludCAoKmNvbGxlY3RfY3B1X2luZm8pKHN0cnVjdCBj
cHVfc2lnbmF0dXJlICpjc2lnKTsKLSAgICBpbnQgKCphcHBseV9taWNyb2NvZGUpKHZvaWQpOwor
ICAgIGludCAoKmFwcGx5X21pY3JvY29kZSkoY29uc3Qgc3RydWN0IG1pY3JvY29kZV9wYXRjaCAq
cGF0Y2gpOwogICAgIGludCAoKnN0YXJ0X3VwZGF0ZSkodm9pZCk7CiAgICAgdm9pZCAoKmVuZF91
cGRhdGUpKHZvaWQpOwogICAgIHZvaWQgKCpmcmVlX3BhdGNoKSh2b2lkICptYyk7Ci0tIAoxLjgu
My4xCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVu
LWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6
Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

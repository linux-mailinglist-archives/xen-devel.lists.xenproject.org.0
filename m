Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 086E03495EF
	for <lists+xen-devel@lfdr.de>; Thu, 25 Mar 2021 16:47:45 +0100 (CET)
Received: from list by lists.xenproject.org with outflank-mailman.101429.194058 (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1lPSCp-0007jw-LC; Thu, 25 Mar 2021 15:47:31 +0000
X-Outflank-Mailman: Message body and most headers restored to incoming version
Received: by outflank-mailman (output) from mailman id 101429.194058; Thu, 25 Mar 2021 15:47:31 +0000
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1lPSCp-0007jI-HT; Thu, 25 Mar 2021 15:47:31 +0000
Received: by outflank-mailman (input) for mailman id 101429;
 Thu, 25 Mar 2021 15:47:30 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.92) (envelope-from
 <SRS0=cfrO=IX=citrix.com=anthony.perard@srs-us1.protection.inumbo.net>)
 id 1lPSCo-0007dH-GF
 for xen-devel@lists.xenproject.org; Thu, 25 Mar 2021 15:47:30 +0000
Received: from esa5.hc3370-68.iphmx.com (unknown [216.71.155.168])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 57f45469-8c1e-4477-a1fa-29e94f4b75ff;
 Thu, 25 Mar 2021 15:47:26 +0000 (UTC)
X-BeenThere: xen-devel@lists.xenproject.org
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Errors-To: xen-devel-bounces@lists.xenproject.org
Precedence: list
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>
X-Inumbo-ID: 57f45469-8c1e-4477-a1fa-29e94f4b75ff
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
  d=citrix.com; s=securemail; t=1616687246;
  h=from:to:cc:subject:date:message-id:in-reply-to:
   references:mime-version:content-transfer-encoding;
  bh=kR85HuAEtSi2+1CX5gncd/zpXFCfU6BegJnoHsZGfX8=;
  b=eOSoFdl1aBmnE5Nky8HC7DBCduwtIYICvtqcU9c56VJ+zxkb4a4pdY+/
   GJE1wsdATHGqgn6Jy+VL6kqa0qwA2JZxpGVxdb3s0Nhj2763wLjb15gFo
   df96mchgerVt1PnrIoGLpmC2tzMTj80P5Xb2GO04JIc8psW1TTSHfNMKa
   c=;
Authentication-Results: esa5.hc3370-68.iphmx.com; dkim=none (message not signed) header.i=none
IronPort-SDR: 28IfOMmo3K9HzOIx7zzQWMVhHTAoCEwTANEpGlFfWKhQ6rbPKk/G2BJVdKIaHmdx9hwPaMSRcN
 gymDz0SgkjjK66OC9UiZTTSf0wOZeRKlZzAC5NMQcq6PRH+zESX+PJaAlrHbc0tmDuFv9ytCgh
 Htx/w/K8JUjz/fNT2tknJP9uktCZzne6/6c0e5WAzBGM8GkepoGe0agXheb4pMXY3skFKF8Syx
 YuMRBeSmVbpu/y8SpC6XP5If4/4p5+f0kST46au63LPAw27amEwbGuw3tDTHXKXwoTNmJxV3Ca
 yh4=
X-SBRS: 5.1
X-MesageID: 40017829
X-Ironport-Server: esa5.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
IronPort-HdrOrdr: A9a23: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
 DRPFJLhvc6b1M=
X-IronPort-AV: E=Sophos;i="5.81,277,1610427600"; 
   d="scan'208";a="40017829"
From: Anthony PERARD <anthony.perard@citrix.com>
To: <devel@edk2.groups.io>
CC: <xen-devel@lists.xenproject.org>, Jordan Justen
	<jordan.l.justen@intel.com>, Anthony PERARD <anthony.perard@citrix.com>, "Ard
 Biesheuvel" <ard.biesheuvel@linaro.org>, Laszlo Ersek <lersek@redhat.com>,
	Julien Grall <julien@xen.org>, =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?=
	<roger.pau@citrix.com>
Subject: [PATCH v2 6/7] OvmfPkg/XenPlatformPei: Calibrate APIC timer frequency
Date: Thu, 25 Mar 2021 15:47:12 +0000
Message-ID: <20210325154713.670104-7-anthony.perard@citrix.com>
X-Mailer: git-send-email 2.31.0
In-Reply-To: <20210325154713.670104-1-anthony.perard@citrix.com>
References: <20210325154713.670104-1-anthony.perard@citrix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64

Q2FsY3VsYXRlIHRoZSBmcmVxdWVuY3kgb2YgdGhlIEFQSUMgdGltZXIgdGhhdCBYZW4gcHJvdmlk
ZXMuCgpFdmVuIHRob3VnaCB0aGUgZnJlcXVlbmN5IGlzIGN1cnJlbnRseSBoYXJkLWNvZGVkLCBp
dCBpc24ndCBwYXJ0IG9mCnRoZSBwdWJsaWMgQUJJIHRoYXQgWGVuIHByb3ZpZGVzIGFuZCB0aHVz
IG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuIE9WTUYKbmVlZHMgdG8gZGV0ZXJtaW5lIHRoZSBmcmVx
dWVuY3kgYnkgYW4gb3RoZXIgbWVhbi4KCkZvcnR1bmF0ZWx5LCBYZW4gcHJvdmlkZXMgYSB3YXkg
dG8gZGV0ZXJtaW5lcyB0aGUgZnJlcXVlbmN5IG9mIHRoZQpUU0MsIHNvIHdlIGNhbiB1c2UgVFND
IHRvIGNhbGlicmF0ZSB0aGUgZnJlcXVlbmN5IG9mIHRoZSBBUElDIHRpbWVyLgpUaGF0IGluZm9y
bWF0aW9uIGlzIGZvdW5kIGluIHRoZSBzaGFyZWRfaW5mbyBwYWdlIHdoaWNoIHdlIG1hcCBhbmQK
dW5tYXAgb25jZSBkb25lIChYZW5CdXNEeGUgaXMgZ29pbmcgdG8gbWFwIHRoZSBwYWdlIHNvbWV3
aGVyZSBlbHNlKS4KClRoZSBzaGFyZWRfaW5mbyBwYWdlIGlzIG1hcCBhdCB0aGUgaGlnaGVzdCBw
aHlzaWNhbCBhZGRyZXNzIGFsbG93ZWQgYXMKaXQgZG9lc24ndCBuZWVkIHRvIGJlIGluIHRoZSBS
QU0sIHRodXMgdGhlcmUncyBhIGNhbGwgdG8gdXBkYXRlIHRoZQpwYWdlIHRhYmxlLgoKVGhlIGNh
bGN1bGF0ZWQgZnJlcXVlbmN5IGlzIG9ubHkgbG9nZ2VkIGluIHRoaXMgcGF0Y2gsIGl0IHdpbGwg
YmUgdXNlZAppbiBhIGZvbGxvd2luZyBwYXRjaC4KClJlZjogaHR0cHM6Ly9idWd6aWxsYS50aWFu
b2NvcmUub3JnL3Nob3dfYnVnLmNnaT9pZD0yNDkwClNpZ25lZC1vZmYtYnk6IEFudGhvbnkgUEVS
QVJEIDxhbnRob255LnBlcmFyZEBjaXRyaXguY29tPgotLS0KQ0M6IFJvZ2VyIFBhdSBNb25uw6kg
PHJvZ2VyLnBhdUBjaXRyaXguY29tPgotLS0KCk5vdGVzOgogICAgdjI6CiAgICAtIGZpeCBDYW1l
bENhc2VzCiAgICAtIFVzZSBVNjQgbXVsdGlwbGljYXRpb24gYW5kIGRpdmlzaW9uIGhlbHBlcnMK
ICAgIC0gZG9uJ3QgcmVhZCBUc2NTaGlmdCBmcm9tIHRoZSBTaGFyZWRJbmZvIHBhZ2UgYWdhaW4K
ICAgIC0gY2hhbmdlIHRoZSBsb2NhdGlvbiBvZiB0aGUgc2hhcmVkIGluZm8gcGFnZSB0byBiZSBv
dXRzaWRlIG9mIHRoZSByYW0KICAgIC0gY2hlY2sgZm9yIG92ZXJmbG93IGluIFhlbkRlbGF5CiAg
ICAtIGNoZWNrIGZvciBvdmVyZmxvdyB3aGVuIGNhbGN1bGF0aW5nIHRoZSBjYWxjdWxhdGluZyBB
UElDIGZyZXF1ZW5jeQoKIE92bWZQa2cvWGVuUGxhdGZvcm1QZWkvWGVuUGxhdGZvcm1QZWkuaW5m
IHwgICAyICsKIE92bWZQa2cvWGVuUGxhdGZvcm1QZWkvUGxhdGZvcm0uaCAgICAgICAgIHwgICA1
ICsKIE92bWZQa2cvWGVuUGxhdGZvcm1QZWkvUGxhdGZvcm0uYyAgICAgICAgIHwgICAxICsKIE92
bWZQa2cvWGVuUGxhdGZvcm1QZWkvWGVuLmMgICAgICAgICAgICAgIHwgMTc3ICsrKysrKysrKysr
KysrKysrKysrKysKIDQgZmlsZXMgY2hhbmdlZCwgMTg1IGluc2VydGlvbnMoKykKCmRpZmYgLS1n
aXQgYS9Pdm1mUGtnL1hlblBsYXRmb3JtUGVpL1hlblBsYXRmb3JtUGVpLmluZiBiL092bWZQa2cv
WGVuUGxhdGZvcm1QZWkvWGVuUGxhdGZvcm1QZWkuaW5mCmluZGV4IDg3OTBkOTA3ZDNlYy4uNTcz
MmQyMTg4ODcxIDEwMDY0NAotLS0gYS9Pdm1mUGtnL1hlblBsYXRmb3JtUGVpL1hlblBsYXRmb3Jt
UGVpLmluZgorKysgYi9Pdm1mUGtnL1hlblBsYXRmb3JtUGVpL1hlblBsYXRmb3JtUGVpLmluZgpA
QCAtNTIsNiArNTIsNyBAQCBbTGlicmFyeUNsYXNzZXNdCiAgIERlYnVnTGliDQogICBIb2JMaWIN
CiAgIElvTGliDQorICBMb2NhbEFwaWNMaWINCiAgIFBjaUxpYg0KICAgUmVzb3VyY2VQdWJsaWNh
dGlvbkxpYg0KICAgUGVpU2VydmljZXNMaWINCkBAIC01OSw2ICs2MCw3IEBAIFtMaWJyYXJ5Q2xh
c3Nlc10KICAgTXRyckxpYg0KICAgTWVtRW5jcnlwdFNldkxpYg0KICAgUGNkTGliDQorICBTYWZl
SW50TGliDQogICBYZW5IeXBlcmNhbGxMaWINCiANCiBbUGNkXQ0KZGlmZiAtLWdpdCBhL092bWZQ
a2cvWGVuUGxhdGZvcm1QZWkvUGxhdGZvcm0uaCBiL092bWZQa2cvWGVuUGxhdGZvcm1QZWkvUGxh
dGZvcm0uaAppbmRleCBlNzBjYTU4MDc4ZWIuLjc3ZDg4ZmMxNTlkNyAxMDA2NDQKLS0tIGEvT3Zt
ZlBrZy9YZW5QbGF0Zm9ybVBlaS9QbGF0Zm9ybS5oCisrKyBiL092bWZQa2cvWGVuUGxhdGZvcm1Q
ZWkvUGxhdGZvcm0uaApAQCAtMTMyLDYgKzEzMiwxMSBAQCBQaHlzaWNhbEFkZHJlc3NJZGVudGl0
eU1hcHBpbmcgKAogICBJTiBFRklfUEhZU0lDQUxfQUREUkVTUyBBZGRyZXNzVG9NYXANCiAgICk7
DQogDQorVk9JRA0KK0NhbGlicmF0ZUxhcGljVGltZXIgKA0KKyAgVk9JRA0KKyAgKTsNCisNCiBl
eHRlcm4gRUZJX0JPT1RfTU9ERSBtQm9vdE1vZGU7DQogDQogZXh0ZXJuIFVJTlQ4IG1QaHlzTWVt
QWRkcmVzc1dpZHRoOw0KZGlmZiAtLWdpdCBhL092bWZQa2cvWGVuUGxhdGZvcm1QZWkvUGxhdGZv
cm0uYyBiL092bWZQa2cvWGVuUGxhdGZvcm1QZWkvUGxhdGZvcm0uYwppbmRleCA3MTdmZDBhYjFh
NDUuLmU5NTExZWI0MGM2MiAxMDA2NDQKLS0tIGEvT3ZtZlBrZy9YZW5QbGF0Zm9ybVBlaS9QbGF0
Zm9ybS5jCisrKyBiL092bWZQa2cvWGVuUGxhdGZvcm1QZWkvUGxhdGZvcm0uYwpAQCAtNDQ4LDYg
KzQ0OCw3IEBAIEluaXRpYWxpemVYZW5QbGF0Zm9ybSAoCiAgIEluaXRpYWxpemVSYW1SZWdpb25z
ICgpOw0KIA0KICAgSW5pdGlhbGl6ZVhlbiAoKTsNCisgIENhbGlicmF0ZUxhcGljVGltZXIgKCk7
DQogDQogICBpZiAobUJvb3RNb2RlICE9IEJPT1RfT05fUzNfUkVTVU1FKSB7DQogICAgIFJlc2Vy
dmVFbXVWYXJpYWJsZU52U3RvcmUgKCk7DQpkaWZmIC0tZ2l0IGEvT3ZtZlBrZy9YZW5QbGF0Zm9y
bVBlaS9YZW4uYyBiL092bWZQa2cvWGVuUGxhdGZvcm1QZWkvWGVuLmMKaW5kZXggYjJhN2QxYzIx
ZGFjLi43NTI0YWFhMTFhMjkgMTAwNjQ0Ci0tLSBhL092bWZQa2cvWGVuUGxhdGZvcm1QZWkvWGVu
LmMKKysrIGIvT3ZtZlBrZy9YZW5QbGF0Zm9ybVBlaS9YZW4uYwpAQCAtMjEsOCArMjEsMTAgQEAK
ICNpbmNsdWRlIDxMaWJyYXJ5L0NwdUxpYi5oPg0KICNpbmNsdWRlIDxMaWJyYXJ5L0RlYnVnTGli
Lmg+DQogI2luY2x1ZGUgPExpYnJhcnkvSG9iTGliLmg+DQorI2luY2x1ZGUgPExpYnJhcnkvTG9j
YWxBcGljTGliLmg+DQogI2luY2x1ZGUgPExpYnJhcnkvTWVtb3J5QWxsb2NhdGlvbkxpYi5oPg0K
ICNpbmNsdWRlIDxMaWJyYXJ5L1BjZExpYi5oPg0KKyNpbmNsdWRlIDxMaWJyYXJ5L1NhZmVJbnRM
aWIuaD4NCiAjaW5jbHVkZSA8R3VpZC9YZW5JbmZvLmg+DQogI2luY2x1ZGUgPEluZHVzdHJ5U3Rh
bmRhcmQvRTgyMC5oPg0KICNpbmNsdWRlIDxMaWJyYXJ5L1Jlc291cmNlUHVibGljYXRpb25MaWIu
aD4NCkBAIC00NTcsMyArNDU5LDE3OCBAQCBQaHlzaWNhbEFkZHJlc3NJZGVudGl0eU1hcHBpbmcg
KAogDQogICByZXR1cm4gRUZJX1NVQ0NFU1M7DQogfQ0KKw0KK1NUQVRJQw0KK0VGSV9TVEFUVVMN
CitNYXBTaGFyZWRJbmZvUGFnZSAoDQorICBJTiBWT0lEICpQYWdlUHRyDQorICApDQorew0KKyAg
eGVuX2FkZF90b19waHlzbWFwX3QgIFBhcmFtZXRlcnM7DQorICBJTlROICAgICAgICAgICAgICAg
ICAgUmV0dXJuQ29kZTsNCisNCisgIFBhcmFtZXRlcnMuZG9taWQgPSBET01JRF9TRUxGOw0KKyAg
UGFyYW1ldGVycy5zcGFjZSA9IFhFTk1BUFNQQUNFX3NoYXJlZF9pbmZvOw0KKyAgUGFyYW1ldGVy
cy5pZHggPSAwOw0KKyAgUGFyYW1ldGVycy5ncGZuID0gKFVJTlROKVBhZ2VQdHIgPj4gRUZJX1BB
R0VfU0hJRlQ7DQorICBSZXR1cm5Db2RlID0gWGVuSHlwZXJjYWxsTWVtb3J5T3AgKFhFTk1FTV9h
ZGRfdG9fcGh5c21hcCwgJlBhcmFtZXRlcnMpOw0KKyAgaWYgKFJldHVybkNvZGUgIT0gMCkgew0K
KyAgICByZXR1cm4gRUZJX05PX01BUFBJTkc7DQorICB9DQorICByZXR1cm4gRUZJX1NVQ0NFU1M7
DQorfQ0KKw0KK1NUQVRJQw0KK1ZPSUQNCitVbm1hcFhlblBhZ2UgKA0KKyAgSU4gVk9JRCAqUGFn
ZVB0cg0KKyAgKQ0KK3sNCisgIHhlbl9yZW1vdmVfZnJvbV9waHlzbWFwX3QgUGFyYW1ldGVyczsN
CisgIElOVE4gICAgICAgICAgICAgICAgICAgICAgUmV0dXJuQ29kZTsNCisNCisgIFBhcmFtZXRl
cnMuZG9taWQgPSBET01JRF9TRUxGOw0KKyAgUGFyYW1ldGVycy5ncGZuID0gKFVJTlROKVBhZ2VQ
dHIgPj4gRUZJX1BBR0VfU0hJRlQ7DQorICBSZXR1cm5Db2RlID0gWGVuSHlwZXJjYWxsTWVtb3J5
T3AgKFhFTk1FTV9yZW1vdmVfZnJvbV9waHlzbWFwLCAmUGFyYW1ldGVycyk7DQorICBBU1NFUlQg
KFJldHVybkNvZGUgPT0gMCk7DQorfQ0KKw0KKw0KK1NUQVRJQw0KK1VJTlQ2NA0KK0dldENwdUZy
ZXEgKA0KKyAgSU4gWEVOX1ZDUFVfVElNRV9JTkZPICpWY3B1VGltZQ0KKyAgKQ0KK3sNCisgIFVJ
TlQzMiBWZXJzaW9uOw0KKyAgVUlOVDMyIFRzY1RvU3lzdGVtTXVsdGlwbGllcjsNCisgIElOVDgg
ICBUc2NTaGlmdDsNCisgIFVJTlQ2NCBDcHVGcmVxOw0KKw0KKyAgZG8gew0KKyAgICBWZXJzaW9u
ID0gVmNwdVRpbWUtPlZlcnNpb247DQorICAgIE1lbW9yeUZlbmNlICgpOw0KKyAgICBUc2NUb1N5
c3RlbU11bHRpcGxpZXIgPSBWY3B1VGltZS0+VHNjVG9TeXN0ZW1NdWx0aXBsaWVyOw0KKyAgICBU
c2NTaGlmdCA9IFZjcHVUaW1lLT5Uc2NTaGlmdDsNCisgICAgTWVtb3J5RmVuY2UgKCk7DQorICB9
IHdoaWxlICgoKFZlcnNpb24gJiAxKSAhPSAwKSAmJiAoVmVyc2lvbiAhPSBWY3B1VGltZS0+VmVy
c2lvbikpOw0KKw0KKyAgQ3B1RnJlcSA9IERpdlU2NHgzMiAoTFNoaWZ0VTY0ICgxMDAwMDAwMDAw
VUxMLCAzMiksIFRzY1RvU3lzdGVtTXVsdGlwbGllcik7DQorICBpZiAoVHNjU2hpZnQgPj0gMCkg
ew0KKyAgICAgIENwdUZyZXEgPSBSU2hpZnRVNjQgKENwdUZyZXEsIFRzY1NoaWZ0KTsNCisgIH0g
ZWxzZSB7DQorICAgICAgQ3B1RnJlcSA9IExTaGlmdFU2NCAoQ3B1RnJlcSwgLVRzY1NoaWZ0KTsN
CisgIH0NCisgIHJldHVybiBDcHVGcmVxOw0KK30NCisNCitTVEFUSUMNCitWT0lEDQorWGVuRGVs
YXkgKA0KKyAgSU4gWEVOX1ZDUFVfVElNRV9JTkZPICpWY3B1VGltZUluZm8sDQorICBJTiBVSU5U
NjQgICAgICAgICAgICAgRGVsYXlOcw0KKyAgKQ0KK3sNCisgIFVJTlQ2NCAgICAgICAgVGljazsN
CisgIFVJTlQ2NCAgICAgICAgQ3B1RnJlcTsNCisgIFVJTlQ2NCAgICAgICAgRGVsYXk7DQorICBV
SU5UNjQgICAgICAgIERlbGF5VGljazsNCisgIFVJTlQ2NCAgICAgICAgTmV3VGljazsNCisgIFJF
VFVSTl9TVEFUVVMgU3RhdHVzOw0KKw0KKyAgVGljayA9IEFzbVJlYWRUc2MgKCk7DQorDQorICBD
cHVGcmVxID0gR2V0Q3B1RnJlcSAoVmNwdVRpbWVJbmZvKTsNCisgIFN0YXR1cyA9IFNhZmVVaW50
NjRNdWx0IChEZWxheU5zLCBDcHVGcmVxLCAmRGVsYXkpOw0KKyAgQVNTRVJUX0VGSV9FUlJPUiAo
U3RhdHVzKTsNCisgIGlmIChFRklfRVJST1IgKFN0YXR1cykpIHsNCisgICAgREVCVUcgKChERUJV
R19FUlJPUiwNCisgICAgICAgICJYZW5EZWxheSAoJWxkIG5zKTogZGVsYXkgdG9vIGJpZyBpbiBy
ZWxhdGlvbiB0byBDUFUgZnJlcSAlbGQgSHpcbiIsDQorICAgICAgICBEZWxheU5zLCBDcHVGcmVx
KSk7DQorICAgIENwdURlYWRMb29wICgpOw0KKyAgfQ0KKw0KKyAgRGVsYXlUaWNrID0gRGl2VTY0
eDMyIChEZWxheSwgMTAwMDAwMDAwMFVMKTsNCisNCisgIE5ld1RpY2sgPSBUaWNrICsgRGVsYXlU
aWNrOw0KKw0KKyAgLy8NCisgIC8vIENoZWNrIGZvciBvdmVyZmxvdw0KKyAgLy8NCisgIGlmIChO
ZXdUaWNrIDwgVGljaykgew0KKyAgICAvLw0KKyAgICAvLyBPdmVyZmxvdywgd2FpdCBmb3IgVFND
IHRvIGFsc28gb3ZlcmZsb3cNCisgICAgLy8NCisgICAgd2hpbGUgKEFzbVJlYWRUc2MgKCkgPj0g
VGljaykgew0KKyAgICAgIENwdVBhdXNlICgpOw0KKyAgICB9DQorICB9DQorDQorICB3aGlsZSAo
QXNtUmVhZFRzYyAoKSA8PSBOZXdUaWNrKSB7DQorICAgIENwdVBhdXNlICgpOw0KKyAgfQ0KK30N
CisNCisNCisvKioNCisgIENhbGN1bGF0ZSB0aGUgZnJlcXVlbmN5IG9mIHRoZSBMb2NhbCBBcGlj
IFRpbWVyDQorKiovDQorVk9JRA0KK0NhbGlicmF0ZUxhcGljVGltZXIgKA0KKyAgVk9JRA0KKyAg
KQ0KK3sNCisgIFhFTl9TSEFSRURfSU5GTyAgICAgICAqU2hhcmVkSW5mbzsNCisgIFhFTl9WQ1BV
X1RJTUVfSU5GTyAgICAqVmNwdVRpbWVJbmZvOw0KKyAgVUlOVDMyICAgICAgICAgICAgICAgIFRp
bWVyVGljaywgVGltZXJUaWNrMiwgRGlmZlRpbWVyOw0KKyAgVUlOVDY0ICAgICAgICAgICAgICAg
IFRzY1RpY2ssIFRzY1RpY2syOw0KKyAgVUlOVDY0ICAgICAgICAgICAgICAgIEZyZXE7DQorICBV
SU5UNjQgICAgICAgICAgICAgICAgRGl2aWRlbmQ7DQorICBFRklfU1RBVFVTICAgICAgICAgICAg
U3RhdHVzOw0KKw0KKw0KKyAgU2hhcmVkSW5mbyA9IChWT0lEKikoKDFVTEwgPDwgbVBoeXNNZW1B
ZGRyZXNzV2lkdGgpIC0gRUZJX1BBR0VfU0laRSk7DQorICBTdGF0dXMgPSBQaHlzaWNhbEFkZHJl
c3NJZGVudGl0eU1hcHBpbmcgKChFRklfUEhZU0lDQUxfQUREUkVTUylTaGFyZWRJbmZvKTsNCisg
IEFTU0VSVF9FRklfRVJST1IgKFN0YXR1cyk7DQorICBpZiAoRUZJX0VSUk9SIChTdGF0dXMpKSB7
DQorICAgIERFQlVHICgoREVCVUdfRVJST1IsDQorICAgICAgICAiRmFpbGVkIHRvIGFkZCBwYWdl
IHRhYmxlIGVudHJ5IGZvciBYZW4gc2hhcmVkIGluZm8gcGFnZTogJXJcbiIsDQorICAgICAgICBT
dGF0dXMpKTsNCisgICAgcmV0dXJuOw0KKyAgfQ0KKw0KKyAgU3RhdHVzID0gTWFwU2hhcmVkSW5m
b1BhZ2UgKFNoYXJlZEluZm8pOw0KKyAgQVNTRVJUX0VGSV9FUlJPUiAoU3RhdHVzKTsNCisgIGlm
IChFRklfRVJST1IgKFN0YXR1cykpIHsNCisgICAgREVCVUcgKChERUJVR19FUlJPUiwgIkZhaWxl
ZCB0byBtYXAgWGVuJ3Mgc2hhcmVkIGluZm8gcGFnZTogJXJcbiIsDQorICAgICAgICBTdGF0dXMp
KTsNCisgICAgcmV0dXJuOw0KKyAgfQ0KKw0KKyAgVmNwdVRpbWVJbmZvID0gJlNoYXJlZEluZm8t
PlZjcHVJbmZvWzBdLlRpbWU7DQorDQorICBJbml0aWFsaXplQXBpY1RpbWVyICgxLCBNQVhfVUlO
VDMyLCBUUlVFLCAwKTsNCisgIERpc2FibGVBcGljVGltZXJJbnRlcnJ1cHQgKCk7DQorDQorICBU
aW1lclRpY2sgPSBHZXRBcGljVGltZXJDdXJyZW50Q291bnQgKCk7DQorICBUc2NUaWNrID0gQXNt
UmVhZFRzYyAoKTsNCisgIFhlbkRlbGF5IChWY3B1VGltZUluZm8sIDEwMDAwMDBVTEwpOw0KKyAg
VGltZXJUaWNrMiA9IEdldEFwaWNUaW1lckN1cnJlbnRDb3VudCAoKTsNCisgIFRzY1RpY2syID0g
QXNtUmVhZFRzYyAoKTsNCisNCisNCisgIERpZmZUaW1lciA9IFRpbWVyVGljayAtIFRpbWVyVGlj
azI7DQorICBTdGF0dXMgPSBTYWZlVWludDY0TXVsdCAoR2V0Q3B1RnJlcSAoVmNwdVRpbWVJbmZv
KSwgRGlmZlRpbWVyLCAmRGl2aWRlbmQpOw0KKyAgQVNTRVJUX0VGSV9FUlJPUiAoU3RhdHVzKTsN
CisgIGlmIChFRklfRVJST1IgKFN0YXR1cykpIHsNCisgICAgREVCVUcgKChERUJVR19FUlJPUiwg
Im92ZXJmbG93IHdoaWxlIGNhbGN1bGF0aW5nIEFQSUMgZnJlcXVlbmN5XG4iKSk7DQorICAgIERF
QlVHICgoREVCVUdfRVJST1IsICJDUFUgZnJlcTogJWxkIEh6OyBBUElDIHRpbWVyIHRpY2sgY291
bnQgZm9yIDEgbXM6ICVkXG4iLA0KKyAgICAgICAgR2V0Q3B1RnJlcSAoVmNwdVRpbWVJbmZvKSwg
RGlmZlRpbWVyKSk7DQorICAgIENwdURlYWRMb29wICgpOw0KKyAgfQ0KKw0KKyAgRnJlcSA9IERp
dlU2NHg2NFJlbWFpbmRlciAoRGl2aWRlbmQsIFRzY1RpY2syIC0gVHNjVGljaywgTlVMTCk7DQor
ICBERUJVRyAoKERFQlVHX0lORk8sICJBUElDIEZyZXEgJSA4bHUgSHpcbiIsIEZyZXEpKTsNCisN
CisgIFVubWFwWGVuUGFnZSAoU2hhcmVkSW5mbyk7DQorfQ0KLS0gCkFudGhvbnkgUEVSQVJECgo=


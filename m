Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 35964110116
	for <lists+xen-devel@lfdr.de>; Tue,  3 Dec 2019 16:21:36 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ic9vt-0003tP-03; Tue, 03 Dec 2019 15:17:45 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=pRqY=ZZ=citrix.com=roger.pau@srs-us1.protection.inumbo.net>)
 id 1ic9vr-0003tJ-5p
 for xen-devel@lists.xenproject.org; Tue, 03 Dec 2019 15:17:43 +0000
X-Inumbo-ID: 0c40a6b2-15e0-11ea-81e1-12813bfff9fa
Received: from esa4.hc3370-68.iphmx.com (unknown [216.71.155.144])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 0c40a6b2-15e0-11ea-81e1-12813bfff9fa;
 Tue, 03 Dec 2019 15:17:41 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1575386261;
 h=date:from:to:cc:subject:message-id:references:
 mime-version:content-transfer-encoding:in-reply-to;
 bh=UYLHBfPc9AGAfPl7TcZxUSTDCuObwRSXAKfI4wJZ6jU=;
 b=XpcOpGMZV2VmpBobipniqdK4RL6+6tXpTOhHXpc4cJ1itQIitnLLC8x/
 aw0hxfVH0Jyz/iTup6WHoEosMXl85d0mltJr7gV5lNGJpFqW1BsP/G3+5
 QUpZI6LiRZ+wf1wNuFKc41VP/4GngxggfHPoabvCoTCITGUHb0Q1ubmvk U=;
Authentication-Results: esa4.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=roger.pau@citrix.com;
 spf=Pass smtp.mailfrom=roger.pau@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa4.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 roger.pau@citrix.com) identity=pra; client-ip=162.221.158.21;
 receiver=esa4.hc3370-68.iphmx.com;
 envelope-from="roger.pau@citrix.com";
 x-sender="roger.pau@citrix.com"; x-conformance=sidf_compatible
Received-SPF: Pass (esa4.hc3370-68.iphmx.com: domain of
 roger.pau@citrix.com designates 162.221.158.21 as permitted
 sender) identity=mailfrom; client-ip=162.221.158.21;
 receiver=esa4.hc3370-68.iphmx.com;
 envelope-from="roger.pau@citrix.com";
 x-sender="roger.pau@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83
 ip4:168.245.78.127 ~all"
Received-SPF: None (esa4.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa4.hc3370-68.iphmx.com;
 envelope-from="roger.pau@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: QvJG6ritkmtOG2ysPUvrVwQjr5f5ODarr/6EIlWR6DIhTyDm2XVZQeFxfIqKMoZ3nGBpRUwpJD
 c3BebJNh19/tG0f32yYlK8tKVZxzfg4GxVJSx6xeiEgqxjpH+1X49DZ/nTC72OL6laolOXuHIG
 vcbHiyFVnevrBit/ns0YG0rtbOh18lsb0OB95E+8I862krnu7LX62bJHaBKISkmgk4gZV+tcdi
 kAvCuzkQJanue6SG/0RBwHb8dIi+u9VoMZOueja7Vc+Lj3hDk0HYwymmU/IFMgV+mHiy18Nq71
 YxY=
X-SBRS: 2.7
X-MesageID: 9676871
X-Ironport-Server: esa4.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.69,273,1571716800"; 
   d="scan'208";a="9676871"
Date: Tue, 3 Dec 2019 16:17:33 +0100
From: Roger Pau =?iso-8859-1?Q?Monn=E9?= <roger.pau@citrix.com>
To: Marek =?iso-8859-1?Q?Marczykowski-G=F3recki?=
 <marmarek@invisiblethingslab.com>
Message-ID: <20191203151733.GF980@Air-de-Roger>
References: <20191203054222.7966-1-marmarek@invisiblethingslab.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20191203054222.7966-1-marmarek@invisiblethingslab.com>
User-Agent: Mutt/1.12.2 (2019-09-21)
X-ClientProxiedBy: AMSPEX02CAS02.citrite.net (10.69.22.113) To
 AMSPEX02CL02.citrite.net (10.69.22.126)
Subject: Re: [Xen-devel] [PATCH v1] xen-pciback: optionally allow interrupt
 enable flag writes
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 Stefano Stabellini <sstabellini@kernel.org>,
 YueHaibing <yuehaibing@huawei.com>, open list <linux-kernel@vger.kernel.org>,
 Simon Gaiser <simon@invisiblethingslab.com>,
 Ross Lagerwall <ross.lagerwall@citrix.com>, xen-devel@lists.xenproject.org,
 Boris Ostrovsky <boris.ostrovsky@oracle.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gVHVlLCBEZWMgMDMsIDIwMTkgYXQgMDY6NDE6NTZBTSArMDEwMCwgTWFyZWsgTWFyY3p5a293
c2tpLUfDs3JlY2tpIHdyb3RlOgo+IFFFTVUgcnVubmluZyBpbiBhIHN0dWJkb20gbmVlZHMgdG8g
YmUgYWJsZSB0byBzZXQgSU5UWF9ESVNBQkxFLCBhbmQgdGhlCj4gTVNJKC1YKSBlbmFibGUgZmxh
Z3MgaW4gdGhlIFBDSSBjb25maWcgc3BhY2UuIFRoaXMgYWRkcyBhbiBhdHRyaWJ1dGUKPiAnYWxs
b3dfaW50ZXJydXB0X2NvbnRyb2wnIHdoaWNoIHdoZW4gc2V0IGZvciBhIFBDSSBkZXZpY2UgYWxs
b3dzIHdyaXRlcwo+IHRvIHRoaXMgZmxhZyhzKS4gVGhlIHRvb2xzdGFjayB3aWxsIG5lZWQgdG8g
c2V0IHRoaXMgZm9yIHN0dWJkb21zLgo+IFdoZW4gZW5hYmxlZCwgZ3Vlc3QgKHN0dWJkb21haW4p
IHdpbGwgYmUgYWxsb3dlZCB0byBzZXQgcmVsZXZhbnQgZW5hYmxlCj4gZmxhZ3MsIGJ1dCBvbmx5
IG9uZSBhdCBhIHRpbWUgLSBpLmUuIGl0IHJlZnVzZXMgdG8gZW5hYmxlIG1vcmUgdGhhbiBvbmUK
PiBvZiBJTlR4LCBNU0ksIE1TSS1YIGF0IGEgdGltZS4KPiAKPiBUaGlzIGZ1bmN0aW9uYWxpdHkg
aXMgbmVlZGVkIG9ubHkgZm9yIGNvbmZpZyBzcGFjZSBhY2Nlc3MgZG9uZSBieSBkZXZpY2UKPiBt
b2RlbCAoc3R1YmRvbWFpbikgc2VydmluZyBhIEhWTSB3aXRoIHRoZSBhY3R1YWwgUENJIGRldmlj
ZS4gSXQgaXMgbm90Cj4gbmVjZXNzYXJ5IGFuZCB1bnNhZmUgdG8gZW5hYmxlIGRpcmVjdCBhY2Nl
c3MgdG8gdGhvc2UgYml0cyBmb3IgUFYgZG9tYWluCj4gd2l0aCB0aGUgZGV2aWNlIGF0dGFjaGVk
LiBGb3IgUFYgZG9tYWlucywgdGhlcmUgYXJlIHNlcGFyYXRlIHByb3RvY29sCj4gbWVzc2FnZXMg
KFhFTl9QQ0lfT1Bfe2VuYWJsZSxkaXNhYmxlfV97bXNpLG1zaXh9KSBmb3IgdGhpcyBwdXJwb3Nl
Lgo+IFRob3NlIG9wcyBpbiBhZGRpdGlvbiB0byBzZXR0aW5nIGVuYWJsZSBiaXRzLCBhbHNvIGNv
bmZpZ3VyZSBNU0koLVgpIGluCj4gZG9tMCBrZXJuZWwgLSB3aGljaCBpcyB1bmRlc2lyYWJsZSBm
b3IgUENJIHBhc3N0aHJvdWdoIHRvIEhWTSBndWVzdHMuCj4gCj4gVGhpcyBzaG91bGQgbm90IGlu
dHJvZHVjZSBhbnkgbmV3IHNlY3VyaXR5IGlzc3VlcyBzaW5jZSBhIG1hbGljaW91cwo+IGd1ZXN0
IChvciBzdHViZG9tKSBjYW4gYWxyZWFkeSBnZW5lcmF0ZSBNU0lzIHRocm91Z2ggb3RoZXIgd2F5
cywgc2VlCj4gWzFdIHBhZ2UgOC4gQWRkaXRpb25hbGx5LCB3aGVuIHFlbXUgcnVucyBpbiBkb20w
LCBpdCBhbHJlYWR5IGhhdmUgZGlyZWN0Cj4gYWNjZXNzIHRvIHRob3NlIGJpdHMuCj4gCj4gVGhp
cyBpcyB0aGUgc2Vjb25kIGl0ZXJhdGlvbiBvZiB0aGlzIGZlYXR1cmUuIEZpcnN0IHdhcyBwcm9w
b3NlZCBhcyBhCj4gZGlyZWN0IFhlbiBpbnRlcmZhY2UgdGhyb3VnaCBhIG5ldyBoeXBlcmNhbGws
IGJ1dCB1bHRpbWF0ZWx5IGl0IHdhcwo+IHJlamVjdGVkIGJ5IHRoZSBtYWludGFpbmVyLCBiZWNh
dXNlIG9mIG1peGluZyBwY2liYWNrIGFuZCBoeXBlcmNhbGxzIGZvcgo+IFBDSSBjb25maWcgc3Bh
Y2UgYWNjZXNzIGlzbid0IGEgZ29vZCBkZXNpZ24uIEZ1bGwgZGlzY3Vzc2lvbiBhdCBbMl0uCj4g
Cj4gWzFdOiBodHRwczovL2ludmlzaWJsZXRoaW5nc2xhYi5jb20vcmVzb3VyY2VzLzIwMTEvU29m
dHdhcmUlMjBBdHRhY2tzJTIwb24lMjBJbnRlbCUyMFZULWQucGRmCj4gWzJdOiBodHRwczovL3hl
bi5tYXJrbWFpbC5vcmcvdGhyZWFkL3NtcGdwd3M0dW1keml6emUKPiAKPiBbcGFydCBvZiB0aGUg
Y29tbWl0IG1lc3NhZ2UgYW5kIHN5c2ZzIGhhbmRsaW5nXQo+IFNpZ25lZC1vZmYtYnk6IFNpbW9u
IEdhaXNlciA8c2ltb25AaW52aXNpYmxldGhpbmdzbGFiLmNvbT4KPiBbdGhlIHJlc3RdCj4gU2ln
bmVkLW9mZi1ieTogTWFyZWsgTWFyY3p5a293c2tpLUfDs3JlY2tpIDxtYXJtYXJla0BpbnZpc2li
bGV0aGluZ3NsYWIuY29tPgo+IC0tLQo+IEknbSBub3QgdmVyeSBoYXBweSBhYm91dCBjb2RlIGR1
cGxpY2F0aW9uIHJlZ2FyZGluZyBNU0kvTVNJLVgvSU5UeAo+IGV4Y2x1c2l2aXR5IHRlc3QsIGJ1
dCBJIGRvbid0IGhhdmUgYmV0dGVyIGlkZWFzIGhvdyB0byBzdHJ1Y3R1cmUgaXQuIEFueQo+IHN1
Z2dlc3Rpb25zPwoKQ2FuJ3QgeW91IGNyZWF0ZSBhIGhlbHBlciB0aGF0IHJldHVybnMgdGhlIGN1
cnJlbnRseSBlbmFibGVkIGludGVycnVwdAptb2RlPwoKSSBleHBlY3QgcmV0dXJuaW5nIGFuIGVu
dW0gKGllOiBOT05FLCBJTlRYLCBNU0ksIE1TSVgpIHNob3VsZCBiZSBmaW5lCnNpbmNlIG5vIHR3
byBvZiB0aG9zZSBzaG91bGQgYmUgZW5hYmxlZCBhdCB0aGUgc2FtZSB0aW1lLgoKPiAtLS0KPiAg
Li4uL3hlbi94ZW4tcGNpYmFjay9jb25mX3NwYWNlX2NhcGFiaWxpdHkuYyAgIHwgMTEzICsrKysr
KysrKysrKysrKysrKwo+ICBkcml2ZXJzL3hlbi94ZW4tcGNpYmFjay9jb25mX3NwYWNlX2hlYWRl
ci5jICAgfCAgMzAgKysrKysKPiAgZHJpdmVycy94ZW4veGVuLXBjaWJhY2svcGNpX3N0dWIuYyAg
ICAgICAgICAgIHwgIDY2ICsrKysrKysrKysKPiAgZHJpdmVycy94ZW4veGVuLXBjaWJhY2svcGNp
YmFjay5oICAgICAgICAgICAgIHwgICAxICsKPiAgNCBmaWxlcyBjaGFuZ2VkLCAyMTAgaW5zZXJ0
aW9ucygrKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3hlbi94ZW4tcGNpYmFjay9jb25mX3Nw
YWNlX2NhcGFiaWxpdHkuYyBiL2RyaXZlcnMveGVuL3hlbi1wY2liYWNrL2NvbmZfc3BhY2VfY2Fw
YWJpbGl0eS5jCj4gaW5kZXggZTU2OTQxMzNlYmU1Li5jNWE3YzU4ZmYzZTMgMTAwNjQ0Cj4gLS0t
IGEvZHJpdmVycy94ZW4veGVuLXBjaWJhY2svY29uZl9zcGFjZV9jYXBhYmlsaXR5LmMKPiArKysg
Yi9kcml2ZXJzL3hlbi94ZW4tcGNpYmFjay9jb25mX3NwYWNlX2NhcGFiaWxpdHkuYwo+IEBAIC0x
ODksNiArMTg5LDEwOSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGNvbmZpZ19maWVsZCBjYXBsaXN0
X3BtW10gPSB7Cj4gIAl7fQo+ICB9Owo+ICAKPiArc3RhdGljIHN0cnVjdCBtc2lfbXNpeF9maWVs
ZF9jb25maWcgewo+ICsJdTE2IGVuYWJsZV9iaXQ7ICAvKiBiaXQgZm9yIGVuYWJsaW5nIE1TSS9N
U0ktWCAqLwo+ICsJaW50IG90aGVyX2NhcDsgIC8qIHRoZSBvdGhlciBjYXBhYmlsaXR5IGZvciBl
eGNsdXNpdmVuZXNzIGNoZWNrICovCgpOaXQ6IGp1c3Qgb25lIHNwYWNlIGJldHdlZW4gdGhlIGRl
Y2xhcmF0aW9uIGFuZCB0aGUgY29tbWVudCBJTU8uCgpBbHNvIGNhcGFiaWxpdHkgSUQgaXMgbm90
IGEgc2lnbmVkIHZhbHVlLCBoZW5jZSB1bnNpZ25lZCBpbnQgd291bGQKZmVlbCBtb3JlIG5hdHVy
YWwuCgo+ICt9IG1zaV9maWVsZF9jb25maWcgPSB7Cj4gKwkuZW5hYmxlX2JpdCA9IFBDSV9NU0lf
RkxBR1NfRU5BQkxFLAo+ICsJLm90aGVyX2NhcCA9IFBDSV9DQVBfSURfTVNJWCwKPiArfSwgbXNp
eF9maWVsZF9jb25maWcgPSB7Cj4gKwkuZW5hYmxlX2JpdCA9IFBDSV9NU0lYX0ZMQUdTX0VOQUJM
RSwKPiArCS5vdGhlcl9jYXAgPSBQQ0lfQ0FQX0lEX01TSSwKPiArfTsKCkkgdGhpbmsgaXQgd291
bGQgYmUgbW9yZSBoZWxwZnVsIHRvIHN0b3JlIHRoZSBjdXJyZW50IGNhcGFiaWxpdHkgSUQKcmF0
aGVyIHRoZSBvbmUgeW91IG5lZWQgdG8gY2hlY2sgYWdhaW5zdC4gVGhlbiBpZiB5b3UgaGFkIGEg
aGVscGVyCnRoYXQgcmV0dXJucyB0aGUgY3VycmVudGx5IGVuYWJsZWQgaW50ZXJydXB0IG1vZGUg
eW91IHdvdWxkIGhhdmUgdG8KY2hlY2sgdGhhdCBlaXRoZXIgaXQncyBOT05FIG9yIG1hdGNoZXMg
dGhlIGNhcGFiaWxpdHkgcmVxdWVzdGVkIHRvIGJlCmVuYWJsZWQuCgo+ICsKPiArc3RhdGljIHZv
aWQgKm1zaV9maWVsZF9pbml0KHN0cnVjdCBwY2lfZGV2ICpkZXYsIGludCBvZmZzZXQpCj4gK3sK
PiArCXJldHVybiAmbXNpX2ZpZWxkX2NvbmZpZzsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgKm1z
aXhfZmllbGRfaW5pdChzdHJ1Y3QgcGNpX2RldiAqZGV2LCBpbnQgb2Zmc2V0KQo+ICt7Cj4gKwly
ZXR1cm4gJm1zaXhfZmllbGRfY29uZmlnOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IG1zaV9tc2l4
X2ZsYWdzX3dyaXRlKHN0cnVjdCBwY2lfZGV2ICpkZXYsIGludCBvZmZzZXQsIHUxNiBuZXdfdmFs
dWUsCj4gKwkJCSB2b2lkICpkYXRhKQo+ICt7Cj4gKwlpbnQgZXJyOwo+ICsJdTE2IG9sZF92YWx1
ZTsKPiArCXN0cnVjdCBtc2lfbXNpeF9maWVsZF9jb25maWcgKmZpZWxkX2NvbmZpZyA9IGRhdGE7
Cj4gKwlzdHJ1Y3QgeGVuX3BjaWJrX2Rldl9kYXRhICpkZXZfZGF0YSA9IHBjaV9nZXRfZHJ2ZGF0
YShkZXYpOwoKY29uc3QgZm9yIGJvdGggdGhlIGFib3ZlLgoKPiArCWludCBvdGhlcl9jYXBfb2Zm
c2V0OwoKdW5zaWduZWQgaW50Cgo+ICsJdTE2IG90aGVyX2NhcF9lbmFibGVfYml0Owo+ICsJdTE2
IG90aGVyX2NhcF92YWx1ZTsKPiArCj4gKwlpZiAoeGVuX3BjaWJrX3Blcm1pc3NpdmUgfHwgZGV2
X2RhdGEtPnBlcm1pc3NpdmUpCj4gKwkJZ290byB3cml0ZTsKPiArCj4gKwllcnIgPSBwY2lfcmVh
ZF9jb25maWdfd29yZChkZXYsIG9mZnNldCwgJm9sZF92YWx1ZSk7Cj4gKwlpZiAoZXJyKQo+ICsJ
CXJldHVybiBlcnI7Cj4gKwo+ICsJaWYgKG5ld192YWx1ZSA9PSBvbGRfdmFsdWUpCj4gKwkJcmV0
dXJuIDA7Cj4gKwo+ICsJaWYgKCFkZXZfZGF0YS0+YWxsb3dfaW50ZXJydXB0X2NvbnRyb2wgfHwK
PiArCSAgICAobmV3X3ZhbHVlIF4gb2xkX3ZhbHVlKSAmIH5maWVsZF9jb25maWctPmVuYWJsZV9i
aXQpCj4gKwkJcmV0dXJuIFBDSUJJT1NfU0VUX0ZBSUxFRDsKPiArCj4gKwlpZiAobmV3X3ZhbHVl
ICYgZmllbGRfY29uZmlnLT5lbmFibGVfYml0KSB7Cj4gKwkJLyogZG9uJ3QgYWxsb3cgZW5hYmxp
bmcgdG9nZXRoZXIgd2l0aCBJTlR4ICovCj4gKwkJZXJyID0gcGNpX3JlYWRfY29uZmlnX3dvcmQo
ZGV2LCBQQ0lfQ09NTUFORCwgJm90aGVyX2NhcF92YWx1ZSk7Cj4gKwkJaWYgKGVycikKPiArCQkJ
cmV0dXJuIGVycjsKPiArCQlpZiAoIShvdGhlcl9jYXBfdmFsdWUgJiBQQ0lfQ09NTUFORF9JTlRY
X0RJU0FCTEUpKQo+ICsJCQlyZXR1cm4gUENJQklPU19TRVRfRkFJTEVEOwo+ICsKPiArCQkvKiBh
bmQgdGhlIG90aGVyIE1TSSgtWCkgKi8KPiArCQlzd2l0Y2ggKGZpZWxkX2NvbmZpZy0+b3RoZXJf
Y2FwKSB7Cj4gKwkJY2FzZSBQQ0lfQ0FQX0lEX01TSToKPiArCQkJb3RoZXJfY2FwX29mZnNldCA9
IGRldi0+bXNpX2NhcCArIFBDSV9NU0lfRkxBR1M7Cj4gKwkJCW90aGVyX2NhcF9lbmFibGVfYml0
ID0gUENJX01TSV9GTEFHU19FTkFCTEU7Cj4gKwkJCWJyZWFrOwo+ICsJCWNhc2UgUENJX0NBUF9J
RF9NU0lYOgo+ICsJCQlvdGhlcl9jYXBfb2Zmc2V0ID0gZGV2LT5tc2l4X2NhcCArIFBDSV9NU0lY
X0ZMQUdTOwo+ICsJCQlvdGhlcl9jYXBfZW5hYmxlX2JpdCA9IFBDSV9NU0lYX0ZMQUdTX0VOQUJM
RTsKPiArCQkJYnJlYWs7CgpJIHRoaW5rIHlvdSBzaG91bGQgY2hlY2sgd2hldGhlciB0aGUgb3Ro
ZXIgY2FwYWJpbGl0eSBleGlzdHMuIEkgZ3Vlc3MKbXNpe3h9X2NhcCB3aWxsIGJlIDAgaWYgbm90
IHByZXNlbnQ/Cgo+ICsJCWRlZmF1bHQ6Cj4gKwkJCUJVR19PTigxKTsKCkRvZXNuJ3QgTGludXgg
aGF2ZSBhIHBsYWluIEJVRygpOz8KCj4gKwkJfQo+ICsJCWVyciA9IHBjaV9yZWFkX2NvbmZpZ193
b3JkKGRldiwKPiArCQkJCQkgICBvdGhlcl9jYXBfb2Zmc2V0LAo+ICsJCQkJCSAgICZvdGhlcl9j
YXBfdmFsdWUpOwo+ICsJCWlmIChlcnIpCj4gKwkJCXJldHVybiBlcnI7Cj4gKwo+ICsJCWlmIChv
dGhlcl9jYXBfdmFsdWUgJiBvdGhlcl9jYXBfZW5hYmxlX2JpdCkKPiArCQkJcmV0dXJuIFBDSUJJ
T1NfU0VUX0ZBSUxFRDsKPiArCX0KPiArCj4gK3dyaXRlOgo+ICsJcmV0dXJuIHBjaV93cml0ZV9j
b25maWdfd29yZChkZXYsIG9mZnNldCwgbmV3X3ZhbHVlKTsKPiArfQo+ICsKPiArc3RhdGljIGNv
bnN0IHN0cnVjdCBjb25maWdfZmllbGQgY2FwbGlzdF9tc2l4W10gPSB7Cj4gKwl7Cj4gKwkJLm9m
ZnNldCAgICA9IFBDSV9NU0lYX0ZMQUdTLAo+ICsJCS5zaXplICAgICAgPSAyLAo+ICsJCS5pbml0
ICAgICAgPSBtc2l4X2ZpZWxkX2luaXQsCj4gKwkJLnUudy5yZWFkICA9IHhlbl9wY2lia19yZWFk
X2NvbmZpZ193b3JkLAo+ICsJCS51Lncud3JpdGUgPSBtc2lfbXNpeF9mbGFnc193cml0ZSwKPiAr
CX0sCj4gKwl7fQo+ICt9Owo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBjb25maWdfZmllbGQg
Y2FwbGlzdF9tc2lbXSA9IHsKPiArCXsKPiArCQkub2Zmc2V0ICAgID0gUENJX01TSV9GTEFHUywK
PiArCQkuc2l6ZSAgICAgID0gMiwKPiArCQkuaW5pdCAgICAgID0gbXNpX2ZpZWxkX2luaXQsCj4g
KwkJLnUudy5yZWFkICA9IHhlbl9wY2lia19yZWFkX2NvbmZpZ193b3JkLAo+ICsJCS51Lncud3Jp
dGUgPSBtc2lfbXNpeF9mbGFnc193cml0ZSwKPiArCX0sCj4gKwl7fQo+ICt9Owo+ICsKPiAgc3Rh
dGljIHN0cnVjdCB4ZW5fcGNpYmtfY29uZmlnX2NhcGFiaWxpdHkgeGVuX3BjaWJrX2NvbmZpZ19j
YXBhYmlsaXR5X3BtID0gewo+ICAJLmNhcGFiaWxpdHkgPSBQQ0lfQ0FQX0lEX1BNLAo+ICAJLmZp
ZWxkcyA9IGNhcGxpc3RfcG0sCj4gQEAgLTE5NywxMSArMzAwLDIxIEBAIHN0YXRpYyBzdHJ1Y3Qg
eGVuX3BjaWJrX2NvbmZpZ19jYXBhYmlsaXR5IHhlbl9wY2lia19jb25maWdfY2FwYWJpbGl0eV92
cGQgPSB7Cj4gIAkuY2FwYWJpbGl0eSA9IFBDSV9DQVBfSURfVlBELAo+ICAJLmZpZWxkcyA9IGNh
cGxpc3RfdnBkLAo+ICB9Owo+ICtzdGF0aWMgc3RydWN0IHhlbl9wY2lia19jb25maWdfY2FwYWJp
bGl0eSB4ZW5fcGNpYmtfY29uZmlnX2NhcGFiaWxpdHlfbXNpID0gewo+ICsJLmNhcGFiaWxpdHkg
PSBQQ0lfQ0FQX0lEX01TSSwKPiArCS5maWVsZHMgPSBjYXBsaXN0X21zaSwKPiArfTsKPiArc3Rh
dGljIHN0cnVjdCB4ZW5fcGNpYmtfY29uZmlnX2NhcGFiaWxpdHkgeGVuX3BjaWJrX2NvbmZpZ19j
YXBhYmlsaXR5X21zaXggPSB7Cj4gKwkuY2FwYWJpbGl0eSA9IFBDSV9DQVBfSURfTVNJWCwKPiAr
CS5maWVsZHMgPSBjYXBsaXN0X21zaXgsCj4gK307Cj4gIAo+ICBpbnQgeGVuX3BjaWJrX2NvbmZp
Z19jYXBhYmlsaXR5X2luaXQodm9pZCkKPiAgewo+ICAJcmVnaXN0ZXJfY2FwYWJpbGl0eSgmeGVu
X3BjaWJrX2NvbmZpZ19jYXBhYmlsaXR5X3ZwZCk7Cj4gIAlyZWdpc3Rlcl9jYXBhYmlsaXR5KCZ4
ZW5fcGNpYmtfY29uZmlnX2NhcGFiaWxpdHlfcG0pOwo+ICsJcmVnaXN0ZXJfY2FwYWJpbGl0eSgm
eGVuX3BjaWJrX2NvbmZpZ19jYXBhYmlsaXR5X21zaSk7Cj4gKwlyZWdpc3Rlcl9jYXBhYmlsaXR5
KCZ4ZW5fcGNpYmtfY29uZmlnX2NhcGFiaWxpdHlfbXNpeCk7Cj4gIAo+ICAJcmV0dXJuIDA7Cj4g
IH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy94ZW4veGVuLXBjaWJhY2svY29uZl9zcGFjZV9oZWFk
ZXIuYyBiL2RyaXZlcnMveGVuL3hlbi1wY2liYWNrL2NvbmZfc3BhY2VfaGVhZGVyLmMKPiBpbmRl
eCAxMGFlMjRiNWE3NmUuLjFlMGZmZjAyZTIxYiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3hlbi94
ZW4tcGNpYmFjay9jb25mX3NwYWNlX2hlYWRlci5jCj4gKysrIGIvZHJpdmVycy94ZW4veGVuLXBj
aWJhY2svY29uZl9zcGFjZV9oZWFkZXIuYwo+IEBAIC02NCw2ICs2NCw3IEBAIHN0YXRpYyBpbnQg
Y29tbWFuZF93cml0ZShzdHJ1Y3QgcGNpX2RldiAqZGV2LCBpbnQgb2Zmc2V0LCB1MTYgdmFsdWUs
IHZvaWQgKmRhdGEpCj4gIAlpbnQgZXJyOwo+ICAJdTE2IHZhbDsKPiAgCXN0cnVjdCBwY2lfY21k
X2luZm8gKmNtZCA9IGRhdGE7Cj4gKwl1MTYgY2FwX3ZhbHVlOwo+ICAKPiAgCWRldl9kYXRhID0g
cGNpX2dldF9kcnZkYXRhKGRldik7Cj4gIAlpZiAoIXBjaV9pc19lbmFibGVkKGRldikgJiYgaXNf
ZW5hYmxlX2NtZCh2YWx1ZSkpIHsKPiBAQCAtMTE3LDYgKzExOCwzNSBAQCBzdGF0aWMgaW50IGNv
bW1hbmRfd3JpdGUoc3RydWN0IHBjaV9kZXYgKmRldiwgaW50IG9mZnNldCwgdTE2IHZhbHVlLCB2
b2lkICpkYXRhKQo+ICAJCXBjaV9jbGVhcl9td2koZGV2KTsKPiAgCX0KPiAgCj4gKwlpZiAoZGV2
X2RhdGEgJiYgZGV2X2RhdGEtPmFsbG93X2ludGVycnVwdF9jb250cm9sKSB7Cj4gKwkJaWYgKCEo
Y21kLT52YWwgJiBQQ0lfQ09NTUFORF9JTlRYX0RJU0FCTEUpICYmCj4gKwkJICAgICh2YWx1ZSAm
IFBDSV9DT01NQU5EX0lOVFhfRElTQUJMRSkpIHsKPiArCQkJcGNpX2ludHgoZGV2LCAwKTsKPiAr
CQl9IGVsc2UgaWYgKChjbWQtPnZhbCAmIFBDSV9DT01NQU5EX0lOVFhfRElTQUJMRSkgJiYKPiAr
CQkgICAgISh2YWx1ZSAmIFBDSV9DT01NQU5EX0lOVFhfRElTQUJMRSkpIHsKPiArCQkJLyogRG8g
bm90IGFsbG93IGVuYWJsaW5nIElOVHggdG9nZXRoZXIgd2l0aCBNU0kgb3IgTVNJLVguICovCj4g
KwkJCS8qIERvIG5vdCB0cnVzdCBkZXYtPm1zaSh4KV9lbmFibGVkIGhlcmUsIGFzIGVuYWJsaW5n
IGNvdWxkIGJlIGRvbmUKPiArCQkJICogYnlwYXNzaW5nIHRoZSBwY2lfKm1zaSogZnVuY3Rpb25z
LCBieSB0aGUgcWVtdS4KPiArCQkJICovCj4gKwkJCWVyciA9IHBjaV9yZWFkX2NvbmZpZ193b3Jk
KGRldiwKPiArCQkJCQkJICAgZGV2LT5tc2lfY2FwICsgUENJX01TSV9GTEFHUywKPiArCQkJCQkJ
ICAgJmNhcF92YWx1ZSk7Cj4gKwkJCWlmICghZXJyICYmIChjYXBfdmFsdWUgJiBQQ0lfTVNJX0ZM
QUdTX0VOQUJMRSkpCj4gKwkJCQllcnIgPSAtRUJVU1k7Cj4gKwkJCWlmICghZXJyKQo+ICsJCQkJ
ZXJyID0gcGNpX3JlYWRfY29uZmlnX3dvcmQoZGV2LAo+ICsJCQkJCQkJICAgZGV2LT5tc2l4X2Nh
cCArIFBDSV9NU0lYX0ZMQUdTLAo+ICsJCQkJCQkJICAgJmNhcF92YWx1ZSk7Cj4gKwkJCWlmICgh
ZXJyICYmIChjYXBfdmFsdWUgJiBQQ0lfTVNJWF9GTEFHU19FTkFCTEUpKQo+ICsJCQkJZXJyID0g
LUVCVVNZOwoKU2hvdWxkbid0IHRoaXMgcmV0dXJuIFBDSS1zdHlsZSBlcnJvcnM/CgpJIHRoaW5r
IFBDSUJJT1NfU0VUX0ZBSUxFRCB3b3VsZCBiZSBtb3JlIGFwcHJvcHJpYXRlIGhlcmUuIE5vdGUg
c3VyZQp3aGV0aGVyIHlvdSBzaG91bGQgdGVybWluYXRlIHRoZSBmdW5jdGlvbiBoZXJlIGluIHRo
YXQgY2FzZSwgb3IgZWxzZQp0aGUgZXJyb3IgaXMgbG9zdCBhbmQgbm90IHJldHVybmVkIHRvIHRo
ZSBjYWxsZXIsIHlldCB0aGUgZnVuY3Rpb24KZmFpbGVkIGF0IGxlYXN0IHBhcnRpYWxseS4KCj4g
KwkJCWlmIChlcnIpCj4gKwkJCQlwcl93YXJuKCIlczogY2Fubm90IGVuYWJsZSBJTlR4ICglZClc
biIsCgpUaGlzIHNob3VsZCBiZSByYXRlbGltaXRlZCBzaW5jZSBpdCdzIGd1ZXN0IHRyaWdnZXJh
YmxlLgoKPiArCQkJCQlwY2lfbmFtZShkZXYpLCBlcnIpOwo+ICsJCQllbHNlCj4gKwkJCQlwY2lf
aW50eChkZXYsIDEpOwo+ICsJCX0KPiArCX0KPiArCj4gIAljbWQtPnZhbCA9IHZhbHVlOwo+ICAK
PiAgCWlmICgheGVuX3BjaWJrX3Blcm1pc3NpdmUgJiYgKCFkZXZfZGF0YSB8fCAhZGV2X2RhdGEt
PnBlcm1pc3NpdmUpKQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3hlbi94ZW4tcGNpYmFjay9wY2lf
c3R1Yi5jIGIvZHJpdmVycy94ZW4veGVuLXBjaWJhY2svcGNpX3N0dWIuYwo+IGluZGV4IDA5NzQx
MGE3Y2RiNy4uN2FmOTNkNjVlZDUxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMveGVuL3hlbi1wY2li
YWNrL3BjaV9zdHViLmMKPiArKysgYi9kcml2ZXJzL3hlbi94ZW4tcGNpYmFjay9wY2lfc3R1Yi5j
Cj4gQEAgLTMwNCw2ICszMDQsOCBAQCB2b2lkIHBjaXN0dWJfcHV0X3BjaV9kZXYoc3RydWN0IHBj
aV9kZXYgKmRldikKPiAgCXhlbl9wY2lia19jb25maWdfcmVzZXRfZGV2KGRldik7Cj4gIAl4ZW5f
cGNpYmtfY29uZmlnX2ZyZWVfZHluX2ZpZWxkcyhkZXYpOwo+ICAKPiArCWRldl9kYXRhLT5hbGxv
d19pbnRlcnJ1cHRfY29udHJvbCA9IDA7CgpXaHkgZG8geW91IG5lZWQgdG8gZG8gdGhpcyBoZXJl
PyBJIGRvbid0IHNlZSBhbnkgb3RoZXIgb3B0aW9ucyBiZWluZwpjbGVhcmVkIGhlcmUgKEkgd291
bGQgZXhwZWN0IGZvciBleGFtcGxlIHBlcm1pc3NpdmUgdG8gYWxzbyBiZQpjbGVhcmVkIGlmIHJl
cXVpcmVkKS4KCj4gKwo+ICAJeGVuX3VucmVnaXN0ZXJfZGV2aWNlX2RvbWFpbl9vd25lcihkZXYp
Owo+ICAKPiAgCXNwaW5fbG9ja19pcnFzYXZlKCZmb3VuZF9wc2Rldi0+bG9jaywgZmxhZ3MpOwo+
IEBAIC0xNDMxLDYgKzE0MzMsNjUgQEAgc3RhdGljIHNzaXplX3QgcGVybWlzc2l2ZV9zaG93KHN0
cnVjdCBkZXZpY2VfZHJpdmVyICpkcnYsIGNoYXIgKmJ1ZikKPiAgfQo+ICBzdGF0aWMgRFJJVkVS
X0FUVFJfUlcocGVybWlzc2l2ZSk7Cj4gIAo+ICtzdGF0aWMgc3NpemVfdCBhbGxvd19pbnRlcnJ1
cHRfY29udHJvbF9zdG9yZShzdHJ1Y3QgZGV2aWNlX2RyaXZlciAqZHJ2LAo+ICsJCQkJCSAgICAg
Y29uc3QgY2hhciAqYnVmLCBzaXplX3QgY291bnQpCj4gK3sKPiArCWludCBkb21haW4sIGJ1cywg
c2xvdCwgZnVuYzsKPiArCWludCBlcnI7Cj4gKwlzdHJ1Y3QgcGNpc3R1Yl9kZXZpY2UgKnBzZGV2
Owo+ICsJc3RydWN0IHhlbl9wY2lia19kZXZfZGF0YSAqZGV2X2RhdGE7Cj4gKwo+ICsJZXJyID0g
c3RyX3RvX3Nsb3QoYnVmLCAmZG9tYWluLCAmYnVzLCAmc2xvdCwgJmZ1bmMpOwo+ICsJaWYgKGVy
cikKPiArCQlnb3RvIG91dDsKPiArCj4gKwlwc2RldiA9IHBjaXN0dWJfZGV2aWNlX2ZpbmQoZG9t
YWluLCBidXMsIHNsb3QsIGZ1bmMpOwo+ICsJaWYgKCFwc2Rldikgewo+ICsJCWVyciA9IC1FTk9E
RVY7Cj4gKwkJZ290byBvdXQ7Cj4gKwl9Cj4gKwo+ICsJZGV2X2RhdGEgPSBwY2lfZ2V0X2RydmRh
dGEocHNkZXYtPmRldik7Cj4gKwkvKiB0aGUgZHJpdmVyIGRhdGEgZm9yIGEgZGV2aWNlIHNob3Vs
ZCBuZXZlciBiZSBudWxsIGF0IHRoaXMgcG9pbnQgKi8KPiArCWlmICghZGV2X2RhdGEpIHsKPiAr
CQllcnIgPSAtRU5YSU87Cj4gKwkJZ290byByZWxlYXNlOwo+ICsJfQo+ICsJZGV2X2RhdGEtPmFs
bG93X2ludGVycnVwdF9jb250cm9sID0gMTsKPiArcmVsZWFzZToKPiArCXBjaXN0dWJfZGV2aWNl
X3B1dChwc2Rldik7Cj4gK291dDoKPiArCWlmICghZXJyKQo+ICsJCWVyciA9IGNvdW50Owo+ICsJ
cmV0dXJuIGVycjsKPiArfQo+ICsKPiArc3RhdGljIHNzaXplX3QgYWxsb3dfaW50ZXJydXB0X2Nv
bnRyb2xfc2hvdyhzdHJ1Y3QgZGV2aWNlX2RyaXZlciAqZHJ2LAo+ICsJCQkJCSAgICBjaGFyICpi
dWYpCj4gK3sKPiArCXN0cnVjdCBwY2lzdHViX2RldmljZSAqcHNkZXY7Cj4gKwlzdHJ1Y3QgeGVu
X3BjaWJrX2Rldl9kYXRhICpkZXZfZGF0YTsKPiArCXNpemVfdCBjb3VudCA9IDA7Cj4gKwl1bnNp
Z25lZCBsb25nIGZsYWdzOwo+ICsKPiArCXNwaW5fbG9ja19pcnFzYXZlKCZwY2lzdHViX2Rldmlj
ZXNfbG9jaywgZmxhZ3MpOwo+ICsJbGlzdF9mb3JfZWFjaF9lbnRyeShwc2RldiwgJnBjaXN0dWJf
ZGV2aWNlcywgZGV2X2xpc3QpIHsKPiArCQlpZiAoY291bnQgPj0gUEFHRV9TSVpFKQo+ICsJCQli
cmVhazsKPiArCQlpZiAoIXBzZGV2LT5kZXYpCj4gKwkJCWNvbnRpbnVlOwo+ICsJCWRldl9kYXRh
ID0gcGNpX2dldF9kcnZkYXRhKHBzZGV2LT5kZXYpOwo+ICsJCWlmICghZGV2X2RhdGEgfHwgIWRl
dl9kYXRhLT5hbGxvd19pbnRlcnJ1cHRfY29udHJvbCkKPiArCQkJY29udGludWU7Cj4gKwkJY291
bnQgKz0KPiArCQkgICAgc2NucHJpbnRmKGJ1ZiArIGNvdW50LCBQQUdFX1NJWkUgLSBjb3VudCwg
IiVzXG4iLAo+ICsJCQkgICAgICBwY2lfbmFtZShwc2Rldi0+ZGV2KSk7Cj4gKwl9Cj4gKwlzcGlu
X3VubG9ja19pcnFyZXN0b3JlKCZwY2lzdHViX2RldmljZXNfbG9jaywgZmxhZ3MpOwo+ICsJcmV0
dXJuIGNvdW50Owo+ICt9Cj4gK3N0YXRpYyBEUklWRVJfQVRUUl9SVyhhbGxvd19pbnRlcnJ1cHRf
Y29udHJvbCk7CgpUaGlzIGlzIG1vc3RseSBhIGNsb25lIG9mIHBlcm1pc3NpdmVfe3N0b3JlL3No
b3d9LCBJIHdvbmRlciBpZiB0aG9zZQpmdW5jdGlvbnMgY291bGQgYmUgZ2VuZXJhbGl6ZWQgc2lu
Y2UgaXQncyBqdXN0IHJlcGVhdGVkIGJvaWxlcnBsYXRlCmNvZGUgaW4gb3JkZXIgdG8gZmV0Y2gg
YWxsb3dfaW50ZXJydXB0X2NvbnRyb2wgb3IgcGVybWlzc2l2ZS4gQW55d2F5LApsaWtlbHkgbm90
IHBhcnQgb2YgdGhpcyBwYXRjaC4KClRoYW5rcywgUm9nZXIuCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1k
ZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21h
aWxtYW4vbGlzdGluZm8veGVuLWRldmVs

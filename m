Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 422984C477
	for <lists+xen-devel@lfdr.de>; Thu, 20 Jun 2019 02:33:50 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hdkz9-0000Bf-5L; Thu, 20 Jun 2019 00:31:27 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=Y7lb=UT=gmail.com=christopher.w.clark@srs-us1.protection.inumbo.net>)
 id 1hdkz6-0000Aw-W7
 for xen-devel@lists.xenproject.org; Thu, 20 Jun 2019 00:31:25 +0000
X-Inumbo-ID: bb0a0b81-92f2-11e9-8980-bc764e045a96
Received: from mail-io1-xd44.google.com (unknown [2607:f8b0:4864:20::d44])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id bb0a0b81-92f2-11e9-8980-bc764e045a96;
 Thu, 20 Jun 2019 00:31:23 +0000 (UTC)
Received: by mail-io1-xd44.google.com with SMTP id k20so13512ios.10
 for <xen-devel@lists.xenproject.org>; Wed, 19 Jun 2019 17:31:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=Lzz+KQrHRLJ/adNCZGvpyblUPrhS5dxCfOzVt9up/WQ=;
 b=pTPwI0Z7koqx/eoEznnAfrOJtcnFEsATY7Oam3HIbz9/XtS3nnA2IEiTlJQNH3ptl3
 1MlJQgyUclYOu3hIqof2O43eDDTaZ62zP0VVTDXXROW8tE1ES0+WMDIUPcT658ZRyOa9
 q6FwlGmO+PXWV4yOLo1gnJFAElQY7oxdchHJ2D14fQMdNQqs5fMcgYm3CrysF76cqsB1
 LPbdbPYcUgzIPuj4foVDSPWthWmuErh9WxXWUkrIKzBDz1R3pydVEl01KKwZGVbedXkk
 Jc748Sxr1WLiKPhfAyATSR1e/wGoKclt7vH/NjIaM0UlC5n7azlvNm+lnqd4nMiLryVO
 l7Kg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=Lzz+KQrHRLJ/adNCZGvpyblUPrhS5dxCfOzVt9up/WQ=;
 b=JqV9sUzU6FDWEgQwsrwVWWx/xzTyUl2MD3HCpDgwploNxsuPsUDXKFIEOpHltWmE7k
 ZcymE9hddZPnY/TvkVPEGhvX9z4djz4vnnrt8/SxsaeV+mLimlWJywA+6FIbSBZ6zmlK
 bdigHCxW0RqSIl1mEs5b8lRJ+aAHMsENmKHsoI2sVOb096SF2rvY/xA115sBW8bCdak7
 eUU2ig7hlf5Y53/OXDzVcIbN5FQ0SztgFhbzCxoSeDFLr9lvSAaJqjyg35nrfpfC+R/1
 oTMdqeMKPSkQaVMmfhoeE9S4UYmEiPReMA1InKkkMDeMwIhHVIqdB76dazK+hcIfOdiB
 8xXw==
X-Gm-Message-State: APjAAAVcCj+ZKHPXEt2HSPLCSk52Eosipq9pdd6w5cHC3KuZwhP6qi7H
 a2wobPTWWGvqrHTuGc24m5SMcqgmGO0=
X-Google-Smtp-Source: APXvYqwk2d7Lwq7qU6NyK3Q2aSmUrmCQ11RuTGQFzxhU0klz2hcDAAtFpKCev7NfZkbr82du/Pknvg==
X-Received: by 2002:a02:6a19:: with SMTP id l25mr95790256jac.123.1560990682225; 
 Wed, 19 Jun 2019 17:31:22 -0700 (PDT)
Received: from desktop.ice.pyrology.org
 (static-50-53-74-115.bvtn.or.frontiernet.net. [50.53.74.115])
 by smtp.gmail.com with ESMTPSA id e188sm22579016ioa.3.2019.06.19.17.31.19
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Wed, 19 Jun 2019 17:31:21 -0700 (PDT)
From: Christopher Clark <christopher.w.clark@gmail.com>
To: xen-devel@lists.xenproject.org
Date: Wed, 19 Jun 2019 17:30:48 -0700
Message-Id: <20190620003053.21993-5-christopher.w.clark@gmail.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190620003053.21993-1-christopher.w.clark@gmail.com>
References: <20190620003053.21993-1-christopher.w.clark@gmail.com>
Subject: [Xen-devel] [RFC 4/9] XSM: Add hook for nested xen version op;
 revises non-nested version op
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Wei Liu <wl@xen.org>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Rich Persaud <persaur@gmail.com>,
 Jan Beulich <jbeulich@suse.com>, Daniel De Graaf <dgdegra@tycho.nsa.gov>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RXhwYW5kIFhTTSBjb250cm9sIHRvIHRoZSBmdWxsIHNldCBvZiBYZW4gdmVyc2lvbiBvcHMsIHRv
IGFsbG93IGZvcgpncmFudWxhciBjb250cm9sIG92ZXIgb3BzIGEgZG9tYWluIGlzIGFsbG93ZWQg
dG8gaXNzdWUgZm9yIHRoZSBuZXN0ZWQgY2FzZS4KCkFwcGxpZXMgY29uc3QgdG8gYXJncyBvZiB4
c21fZGVmYXVsdF9hY3Rpb24uCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RvcGhlciBDbGFyayA8Y2hy
aXN0b3BoZXIuY2xhcmtAc3RhcmxhYi5pbz4KLS0tCiB0b29scy9mbGFzay9wb2xpY3kvbW9kdWxl
cy9kb20wLnRlICAgICAgICAgICB8ICA3ICsrLQogdG9vbHMvZmxhc2svcG9saWN5L21vZHVsZXMv
Z3Vlc3RfZmVhdHVyZXMudGUgfCAgNSArLQogdG9vbHMvZmxhc2svcG9saWN5L21vZHVsZXMveGVu
LnRlICAgICAgICAgICAgfCAgMyArKwogdG9vbHMvZmxhc2svcG9saWN5L3BvbGljeS9pbml0aWFs
X3NpZHMgICAgICAgfCAgMyArKwogeGVuL2FyY2gveDg2L2d1ZXN0L3hlbi1uZXN0ZWQuYyAgICAg
ICAgICAgICAgfCAgNiArLS0KIHhlbi9pbmNsdWRlL3hzbS9kdW1teS5oICAgICAgICAgICAgICAg
ICAgICAgIHwgMTIgKysrKy0KIHhlbi9pbmNsdWRlL3hzbS94c20uaCAgICAgICAgICAgICAgICAg
ICAgICAgIHwgMTMgKysrKysrCiB4ZW4veHNtL2R1bW15LmMgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB8ICAzICsrCiB4ZW4veHNtL2ZsYXNrL2hvb2tzLmMgICAgICAgICAgICAgICAgICAg
ICAgICB8IDQ5ICsrKysrKysrKysrKysrLS0tLS0tCiB4ZW4veHNtL2ZsYXNrL3BvbGljeS9hY2Nl
c3NfdmVjdG9ycyAgICAgICAgICB8ICA2ICsrKwogeGVuL3hzbS9mbGFzay9wb2xpY3kvaW5pdGlh
bF9zaWRzICAgICAgICAgICAgfCAgMSArCiAxMSBmaWxlcyBjaGFuZ2VkLCA4NiBpbnNlcnRpb25z
KCspLCAyMiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS90b29scy9mbGFzay9wb2xpY3kvbW9k
dWxlcy9kb20wLnRlIGIvdG9vbHMvZmxhc2svcG9saWN5L21vZHVsZXMvZG9tMC50ZQppbmRleCA5
OTcwZjlkYzA4Li45ZWQ3Y2NiNTdiIDEwMDY0NAotLS0gYS90b29scy9mbGFzay9wb2xpY3kvbW9k
dWxlcy9kb20wLnRlCisrKyBiL3Rvb2xzL2ZsYXNrL3BvbGljeS9tb2R1bGVzL2RvbTAudGUKQEAg
LTIyLDkgKzIyLDkgQEAgYWxsb3cgZG9tMF90IHhlbl90OnhlbjIgewogIyBBbGxvdyBkb20wIHRv
IHVzZSBhbGwgWEVOVkVSXyBzdWJvcHMgdGhhdCBoYXZlIGNoZWNrcy4KICMgTm90ZSB0aGF0IGRv
bTAgaXMgcGFydCBvZiBkb21haW5fdHlwZSBzbyB0aGlzIGhhcyBkdXBsaWNhdGVzLgogYWxsb3cg
ZG9tMF90IHhlbl90OnZlcnNpb24gewotCXhlbl9leHRyYXZlcnNpb24geGVuX2NvbXBpbGVfaW5m
byB4ZW5fY2FwYWJpbGl0aWVzCisJeGVuX3ZlcnNpb24geGVuX2V4dHJhdmVyc2lvbiB4ZW5fY29t
cGlsZV9pbmZvIHhlbl9jYXBhYmlsaXRpZXMKIAl4ZW5fY2hhbmdlc2V0IHhlbl9wYWdlc2l6ZSB4
ZW5fZ3Vlc3RfaGFuZGxlIHhlbl9jb21tYW5kbGluZQotCXhlbl9idWlsZF9pZAorCXhlbl9idWls
ZF9pZCB4ZW5fZ2V0X2ZlYXR1cmVzIHhlbl9wbGF0Zm9ybV9wYXJhbWV0ZXJzCiB9OwogCiBhbGxv
dyBkb20wX3QgeGVuX3Q6bW11IG1lbW9yeW1hcDsKQEAgLTQzLDYgKzQzLDkgQEAgYWxsb3cgZG9t
MF90IGRvbTBfdDpkb21haW4yIHsKIH07CiBhbGxvdyBkb20wX3QgZG9tMF90OnJlc291cmNlIHsg
YWRkIHJlbW92ZSB9OwogCisjIEFsbG93IGRvbTAgdG8gY29tbXVuaWNhdGUgd2l0aCBhIG5lc3Rl
ZCBYZW4gaHlwZXJ2aXNvcgorYWxsb3cgZG9tMF90IG5lc3RlZHhlbl90OnZlcnNpb24geyB4ZW5f
dmVyc2lvbiB4ZW5fZ2V0X2ZlYXR1cmVzIH07CisKICMgVGhlc2UgcGVybWlzc2lvbnMgYWxsb3cg
dXNpbmcgdGhlIEZMQVNLIHNlY3VyaXR5IHNlcnZlciB0byBjb21wdXRlIGFjY2VzcwogIyBjaGVj
a3MgbG9jYWxseSwgd2hpY2ggY291bGQgYmUgdXNlZCBieSBhIGRvbWFpbiBvciBzZXJ2aWNlIChz
dWNoIGFzIHhlbnN0b3JlKQogIyB0aGF0IGRvZXMgbm90IGhhdmUgaXRzIG93biBzZWN1cml0eSBz
ZXJ2ZXIgdG8gbWFrZSBhY2Nlc3MgZGVjaXNpb25zIGJhc2VkIG9uCmRpZmYgLS1naXQgYS90b29s
cy9mbGFzay9wb2xpY3kvbW9kdWxlcy9ndWVzdF9mZWF0dXJlcy50ZSBiL3Rvb2xzL2ZsYXNrL3Bv
bGljeS9tb2R1bGVzL2d1ZXN0X2ZlYXR1cmVzLnRlCmluZGV4IDI3OTdhMjI3NjEuLmJhYWRlMTVm
MmUgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2ZsYXNrL3BvbGljeS9tb2R1bGVzL2d1ZXN0X2ZlYXR1cmVz
LnRlCisrKyBiL3Rvb2xzL2ZsYXNrL3BvbGljeS9tb2R1bGVzL2d1ZXN0X2ZlYXR1cmVzLnRlCkBA
IC0yMSw4ICsyMSw5IEBAIGlmIChndWVzdF93cml0ZWNvbnNvbGUpIHsKIAogIyBGb3Igbm9ybWFs
IGd1ZXN0cywgYWxsb3cgYWxsIHF1ZXJpZXMgZXhjZXB0IFhFTlZFUl9jb21tYW5kbGluZS4KIGFs
bG93IGRvbWFpbl90eXBlIHhlbl90OnZlcnNpb24gewotICAgIHhlbl9leHRyYXZlcnNpb24geGVu
X2NvbXBpbGVfaW5mbyB4ZW5fY2FwYWJpbGl0aWVzCi0gICAgeGVuX2NoYW5nZXNldCB4ZW5fcGFn
ZXNpemUgeGVuX2d1ZXN0X2hhbmRsZQorICAgIHhlbl92ZXJzaW9uIHhlbl9leHRyYXZlcnNpb24g
eGVuX2NvbXBpbGVfaW5mbyB4ZW5fY2FwYWJpbGl0aWVzCisgICAgeGVuX2NoYW5nZXNldCB4ZW5f
cGFnZXNpemUgeGVuX2d1ZXN0X2hhbmRsZSB4ZW5fZ2V0X2ZlYXR1cmVzCisgICAgeGVuX3BsYXRm
b3JtX3BhcmFtZXRlcnMKIH07CiAKICMgVmVyc2lvbiBxdWVyaWVzIGRvbid0IG5lZWQgYXVkaXRp
bmcgd2hlbiBkZW5pZWQuICBUaGV5IGNhbiBiZQpkaWZmIC0tZ2l0IGEvdG9vbHMvZmxhc2svcG9s
aWN5L21vZHVsZXMveGVuLnRlIGIvdG9vbHMvZmxhc2svcG9saWN5L21vZHVsZXMveGVuLnRlCmlu
ZGV4IDNkYmY5M2QyYjguLmZiZDgyMzM0ZmQgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2ZsYXNrL3BvbGlj
eS9tb2R1bGVzL3hlbi50ZQorKysgYi90b29scy9mbGFzay9wb2xpY3kvbW9kdWxlcy94ZW4udGUK
QEAgLTI2LDYgKzI2LDkgQEAgYXR0cmlidXRlIG1sc19wcml2OwogIyBUaGUgaHlwZXJ2aXNvciBp
dHNlbGYKIHR5cGUgeGVuX3QsIHhlbl90eXBlLCBtbHNfcHJpdjsKIAorIyBBIG5lc3RlZCBYZW4g
aHlwZXJ2aXNvciwgaWYgYW55Cit0eXBlIG5lc3RlZHhlbl90LCB4ZW5fdHlwZTsKKwogIyBEb21h
aW4gMAogZGVjbGFyZV9zaW5nbGV0b25fZG9tYWluKGRvbTBfdCwgbWxzX3ByaXYpOwogCmRpZmYg
LS1naXQgYS90b29scy9mbGFzay9wb2xpY3kvcG9saWN5L2luaXRpYWxfc2lkcyBiL3Rvb2xzL2Zs
YXNrL3BvbGljeS9wb2xpY3kvaW5pdGlhbF9zaWRzCmluZGV4IDZiN2I3ZWZmMjEuLjUwYjY0OGRm
M2IgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2ZsYXNrL3BvbGljeS9wb2xpY3kvaW5pdGlhbF9zaWRzCisr
KyBiL3Rvb2xzL2ZsYXNrL3BvbGljeS9wb2xpY3kvaW5pdGlhbF9zaWRzCkBAIC0xNiwzICsxNiw2
IEBAIHNpZCBkZXZpY2UgZ2VuX2NvbnRleHQoc3lzdGVtX3U6b2JqZWN0X3I6ZGV2aWNlX3QsczAp
CiAjIEluaXRpYWwgU0lEcyB1c2VkIGJ5IHRoZSB0b29sc3RhY2sgZm9yIGRvbWFpbnMgd2l0aG91
dCBkZWZpbmVkIGxhYmVscwogc2lkIGRvbVUgZ2VuX2NvbnRleHQoc3lzdGVtX3U6c3lzdGVtX3I6
ZG9tVV90LHMwKQogc2lkIGRvbURNIGdlbl9jb250ZXh0KHN5c3RlbV91OnN5c3RlbV9yOmRtX2Rv
bV90LHMwKQorCisjIEluaXRpYWwgU0lEIGZvciBuZXN0ZWQgWGVuIG9uIFhlbgorc2lkIG5lc3Rl
ZHhlbiBnZW5fY29udGV4dChzeXN0ZW1fdTpzeXN0ZW1fcjpuZXN0ZWR4ZW5fdCxzMCkKZGlmZiAt
LWdpdCBhL3hlbi9hcmNoL3g4Ni9ndWVzdC94ZW4tbmVzdGVkLmMgYi94ZW4vYXJjaC94ODYvZ3Vl
c3QveGVuLW5lc3RlZC5jCmluZGV4IDc0NDU5MmFhMGMuLmZjZmE1ZTEwODcgMTAwNjQ0Ci0tLSBh
L3hlbi9hcmNoL3g4Ni9ndWVzdC94ZW4tbmVzdGVkLmMKKysrIGIveGVuL2FyY2gveDg2L2d1ZXN0
L3hlbi1uZXN0ZWQuYwpAQCAtNDcsOSArNDcsOSBAQCBsb25nIGRvX25lc3RlZF94ZW5fdmVyc2lv
bihpbnQgY21kLCBYRU5fR1VFU1RfSEFORExFX1BBUkFNKHZvaWQpIGFyZykKICAgICBpZiAoICF4
ZW5fbmVzdGVkICkKICAgICAgICAgcmV0dXJuIC1FTk9TWVM7CiAKLSAgICAvKiBGSVhNRTogYXBw
bHkgWFNNIGNoZWNrIGhlcmUgKi8KLSAgICBpZiAoICFpc19jb250cm9sX2RvbWFpbihjdXJyZW50
LT5kb21haW4pICkKLSAgICAgICAgcmV0dXJuIC1FUEVSTTsKKyAgICByZXQgPSB4c21fbmVzdGVk
X3hlbl92ZXJzaW9uKFhTTV9QUklWLCBjdXJyZW50LT5kb21haW4sIGNtZCk7CisgICAgaWYgKCBy
ZXQgKQorICAgICAgICByZXR1cm4gcmV0OwogCiAgICAgZ3ByaW50ayhYRU5MT0dfREVCVUcsICJO
ZXN0ZWQgeGVuX3ZlcnNpb246ICVkLlxuIiwgY21kKTsKIApkaWZmIC0tZ2l0IGEveGVuL2luY2x1
ZGUveHNtL2R1bW15LmggYi94ZW4vaW5jbHVkZS94c20vZHVtbXkuaAppbmRleCAwMWQyODE0ZmVk
Li44MDExYmYyY2I0IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94c20vZHVtbXkuaAorKysgYi94
ZW4vaW5jbHVkZS94c20vZHVtbXkuaApAQCAtNjksNyArNjksNyBAQCB2b2lkIF9feHNtX2FjdGlv
bl9taXNtYXRjaF9kZXRlY3RlZCh2b2lkKTsKICNlbmRpZiAvKiBDT05GSUdfWFNNICovCiAKIHN0
YXRpYyBhbHdheXNfaW5saW5lIGludCB4c21fZGVmYXVsdF9hY3Rpb24oCi0gICAgeHNtX2RlZmF1
bHRfdCBhY3Rpb24sIHN0cnVjdCBkb21haW4gKnNyYywgc3RydWN0IGRvbWFpbiAqdGFyZ2V0KQor
ICAgIHhzbV9kZWZhdWx0X3QgYWN0aW9uLCBjb25zdCBzdHJ1Y3QgZG9tYWluICpzcmMsIGNvbnN0
IHN0cnVjdCBkb21haW4gKnRhcmdldCkKIHsKICAgICBzd2l0Y2ggKCBhY3Rpb24gKSB7CiAgICAg
Y2FzZSBYU01fSE9PSzoKQEAgLTczOSw2ICs3MzksMTYgQEAgc3RhdGljIFhTTV9JTkxJTkUgaW50
IHhzbV9hcmdvX3NlbmQoY29uc3Qgc3RydWN0IGRvbWFpbiAqZCwKIAogI2VuZGlmIC8qIENPTkZJ
R19BUkdPICovCiAKKyNpZmRlZiBDT05GSUdfWEVOX05FU1RFRAorc3RhdGljIFhTTV9JTkxJTkUg
aW50IHhzbV9uZXN0ZWRfeGVuX3ZlcnNpb24oWFNNX0RFRkFVTFRfQVJHCisgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgZG9tYWluICpkLAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50
IGNtZCkKK3sKKyAgICBYU01fQVNTRVJUX0FDVElPTihYU01fUFJJVik7CisgICAgcmV0dXJuIHhz
bV9kZWZhdWx0X2FjdGlvbihhY3Rpb24sIGQsIE5VTEwpOworfQorI2VuZGlmCisKICNpbmNsdWRl
IDxwdWJsaWMvdmVyc2lvbi5oPgogc3RhdGljIFhTTV9JTkxJTkUgaW50IHhzbV94ZW5fdmVyc2lv
biAoWFNNX0RFRkFVTFRfQVJHIHVpbnQzMl90IG9wKQogewpkaWZmIC0tZ2l0IGEveGVuL2luY2x1
ZGUveHNtL3hzbS5oIGIveGVuL2luY2x1ZGUveHNtL3hzbS5oCmluZGV4IGI2MTQxZjZhYjEuLjk2
MDQ0Y2I1NWEgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hzbS94c20uaAorKysgYi94ZW4vaW5j
bHVkZS94c20veHNtLmgKQEAgLTE4Nyw2ICsxODcsOSBAQCBzdHJ1Y3QgeHNtX29wZXJhdGlvbnMg
ewogICAgIGludCAoKmFyZ29fcmVnaXN0ZXJfYW55X3NvdXJjZSkgKGNvbnN0IHN0cnVjdCBkb21h
aW4gKmQpOwogICAgIGludCAoKmFyZ29fc2VuZCkgKGNvbnN0IHN0cnVjdCBkb21haW4gKmQsIGNv
bnN0IHN0cnVjdCBkb21haW4gKnQpOwogI2VuZGlmCisjaWZkZWYgQ09ORklHX1hFTl9ORVNURUQK
KyAgICBpbnQgKCpuZXN0ZWRfeGVuX3ZlcnNpb24pIChjb25zdCBzdHJ1Y3QgZG9tYWluICpkLCB1
bnNpZ25lZCBpbnQgY21kKTsKKyNlbmRpZgogfTsKIAogI2lmZGVmIENPTkZJR19YU00KQEAgLTcy
Myw2ICs3MjYsMTYgQEAgc3RhdGljIGlubGluZSBpbnQgeHNtX2FyZ29fc2VuZChjb25zdCBzdHJ1
Y3QgZG9tYWluICpkLCBjb25zdCBzdHJ1Y3QgZG9tYWluICp0KQogCiAjZW5kaWYgLyogQ09ORklH
X0FSR08gKi8KIAorI2lmZGVmIENPTkZJR19YRU5fTkVTVEVECitzdGF0aWMgaW5saW5lIGludCB4
c21fbmVzdGVkX3hlbl92ZXJzaW9uKHhzbV9kZWZhdWx0X3QgZGVmLAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgZG9tYWluICpkLAorICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgY21kKQorewor
ICAgIHJldHVybiB4c21fb3BzLT5uZXN0ZWRfeGVuX3ZlcnNpb24oZCwgY21kKTsKK30KKworI2Vu
ZGlmIC8qIENPTkZJR19YRU5fTkVTVEVEICovCisKICNlbmRpZiAvKiBYU01fTk9fV1JBUFBFUlMg
Ki8KIAogI2lmZGVmIENPTkZJR19NVUxUSUJPT1QKZGlmZiAtLWdpdCBhL3hlbi94c20vZHVtbXku
YyBiL3hlbi94c20vZHVtbXkuYwppbmRleCBjOWE1NjZmMmI1Li5lZDBhNGIwNjkxIDEwMDY0NAot
LS0gYS94ZW4veHNtL2R1bW15LmMKKysrIGIveGVuL3hzbS9kdW1teS5jCkBAIC0xNTcsNCArMTU3
LDcgQEAgdm9pZCBfX2luaXQgeHNtX2ZpeHVwX29wcyAoc3RydWN0IHhzbV9vcGVyYXRpb25zICpv
cHMpCiAgICAgc2V0X3RvX2R1bW15X2lmX251bGwob3BzLCBhcmdvX3JlZ2lzdGVyX2FueV9zb3Vy
Y2UpOwogICAgIHNldF90b19kdW1teV9pZl9udWxsKG9wcywgYXJnb19zZW5kKTsKICNlbmRpZgor
I2lmZGVmIENPTkZJR19YRU5fTkVTVEVECisgICAgc2V0X3RvX2R1bW15X2lmX251bGwob3BzLCBu
ZXN0ZWRfeGVuX3ZlcnNpb24pOworI2VuZGlmCiB9CmRpZmYgLS1naXQgYS94ZW4veHNtL2ZsYXNr
L2hvb2tzLmMgYi94ZW4veHNtL2ZsYXNrL2hvb2tzLmMKaW5kZXggYTdkNjkwYWMzYy4uMjgzNTI3
OWZlNyAxMDA2NDQKLS0tIGEveGVuL3hzbS9mbGFzay9ob29rcy5jCisrKyBiL3hlbi94c20vZmxh
c2svaG9va3MuYwpAQCAtMTY2Niw0NiArMTY2Niw1NiBAQCBzdGF0aWMgaW50IGZsYXNrX2RtX29w
KHN0cnVjdCBkb21haW4gKmQpCiAKICNlbmRpZiAvKiBDT05GSUdfWDg2ICovCiAKLXN0YXRpYyBp
bnQgZmxhc2tfeGVuX3ZlcnNpb24gKHVpbnQzMl90IG9wKQorc3RhdGljIGludCBkb21haW5faGFz
X3hlbl92ZXJzaW9uIChjb25zdCBzdHJ1Y3QgZG9tYWluICpkLCB1MzIgdHNpZCwKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3Qgb3ApCiB7Ci0gICAgdTMyIGRzaWQg
PSBkb21haW5fc2lkKGN1cnJlbnQtPmRvbWFpbik7CisgICAgdTMyIGRzaWQgPSBkb21haW5fc2lk
KGQpOwogCiAgICAgc3dpdGNoICggb3AgKQogICAgIHsKICAgICBjYXNlIFhFTlZFUl92ZXJzaW9u
OgotICAgIGNhc2UgWEVOVkVSX3BsYXRmb3JtX3BhcmFtZXRlcnM6Ci0gICAgY2FzZSBYRU5WRVJf
Z2V0X2ZlYXR1cmVzOgotICAgICAgICAvKiBUaGVzZSBzdWItb3BzIGlnbm9yZSB0aGUgcGVybWlz
c2lvbiBjaGVja3MgYW5kIHJldHVybiBkYXRhLiAqLwotICAgICAgICByZXR1cm4gMDsKKyAgICAg
ICAgcmV0dXJuIGF2Y19oYXNfcGVybShkc2lkLCB0c2lkLCBTRUNDTEFTU19WRVJTSU9OLAorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIFZFUlNJT05fX1hFTl9WRVJTSU9OLCBOVUxMKTsKICAg
ICBjYXNlIFhFTlZFUl9leHRyYXZlcnNpb246Ci0gICAgICAgIHJldHVybiBhdmNfaGFzX3Blcm0o
ZHNpZCwgU0VDSU5JVFNJRF9YRU4sIFNFQ0NMQVNTX1ZFUlNJT04sCisgICAgICAgIHJldHVybiBh
dmNfaGFzX3Blcm0oZHNpZCwgdHNpZCwgU0VDQ0xBU1NfVkVSU0lPTiwKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBWRVJTSU9OX19YRU5fRVhUUkFWRVJTSU9OLCBOVUxMKTsKICAgICBjYXNl
IFhFTlZFUl9jb21waWxlX2luZm86Ci0gICAgICAgIHJldHVybiBhdmNfaGFzX3Blcm0oZHNpZCwg
U0VDSU5JVFNJRF9YRU4sIFNFQ0NMQVNTX1ZFUlNJT04sCisgICAgICAgIHJldHVybiBhdmNfaGFz
X3Blcm0oZHNpZCwgdHNpZCwgU0VDQ0xBU1NfVkVSU0lPTiwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBWRVJTSU9OX19YRU5fQ09NUElMRV9JTkZPLCBOVUxMKTsKICAgICBjYXNlIFhFTlZF
Ul9jYXBhYmlsaXRpZXM6Ci0gICAgICAgIHJldHVybiBhdmNfaGFzX3Blcm0oZHNpZCwgU0VDSU5J
VFNJRF9YRU4sIFNFQ0NMQVNTX1ZFUlNJT04sCisgICAgICAgIHJldHVybiBhdmNfaGFzX3Blcm0o
ZHNpZCwgdHNpZCwgU0VDQ0xBU1NfVkVSU0lPTiwKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBWRVJTSU9OX19YRU5fQ0FQQUJJTElUSUVTLCBOVUxMKTsKICAgICBjYXNlIFhFTlZFUl9jaGFu
Z2VzZXQ6Ci0gICAgICAgIHJldHVybiBhdmNfaGFzX3Blcm0oZHNpZCwgU0VDSU5JVFNJRF9YRU4s
IFNFQ0NMQVNTX1ZFUlNJT04sCisgICAgICAgIHJldHVybiBhdmNfaGFzX3Blcm0oZHNpZCwgdHNp
ZCwgU0VDQ0xBU1NfVkVSU0lPTiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWRVJTSU9O
X19YRU5fQ0hBTkdFU0VULCBOVUxMKTsKKyAgICBjYXNlIFhFTlZFUl9wbGF0Zm9ybV9wYXJhbWV0
ZXJzOgorICAgICAgICByZXR1cm4gYXZjX2hhc19wZXJtKGRzaWQsIHRzaWQsIFNFQ0NMQVNTX1ZF
UlNJT04sCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgVkVSU0lPTl9fWEVOX1BMQVRGT1JN
X1BBUkFNRVRFUlMsIE5VTEwpOworICAgIGNhc2UgWEVOVkVSX2dldF9mZWF0dXJlczoKKyAgICAg
ICAgcmV0dXJuIGF2Y19oYXNfcGVybShkc2lkLCB0c2lkLCBTRUNDTEFTU19WRVJTSU9OLAorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIFZFUlNJT05fX1hFTl9HRVRfRkVBVFVSRVMsIE5VTEwp
OwogICAgIGNhc2UgWEVOVkVSX3BhZ2VzaXplOgotICAgICAgICByZXR1cm4gYXZjX2hhc19wZXJt
KGRzaWQsIFNFQ0lOSVRTSURfWEVOLCBTRUNDTEFTU19WRVJTSU9OLAorICAgICAgICByZXR1cm4g
YXZjX2hhc19wZXJtKGRzaWQsIHRzaWQsIFNFQ0NMQVNTX1ZFUlNJT04sCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgVkVSU0lPTl9fWEVOX1BBR0VTSVpFLCBOVUxMKTsKICAgICBjYXNlIFhF
TlZFUl9ndWVzdF9oYW5kbGU6Ci0gICAgICAgIHJldHVybiBhdmNfaGFzX3Blcm0oZHNpZCwgU0VD
SU5JVFNJRF9YRU4sIFNFQ0NMQVNTX1ZFUlNJT04sCisgICAgICAgIHJldHVybiBhdmNfaGFzX3Bl
cm0oZHNpZCwgdHNpZCwgU0VDQ0xBU1NfVkVSU0lPTiwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBWRVJTSU9OX19YRU5fR1VFU1RfSEFORExFLCBOVUxMKTsKICAgICBjYXNlIFhFTlZFUl9j
b21tYW5kbGluZToKLSAgICAgICAgcmV0dXJuIGF2Y19oYXNfcGVybShkc2lkLCBTRUNJTklUU0lE
X1hFTiwgU0VDQ0xBU1NfVkVSU0lPTiwKKyAgICAgICAgcmV0dXJuIGF2Y19oYXNfcGVybShkc2lk
LCB0c2lkLCBTRUNDTEFTU19WRVJTSU9OLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZF
UlNJT05fX1hFTl9DT01NQU5ETElORSwgTlVMTCk7CiAgICAgY2FzZSBYRU5WRVJfYnVpbGRfaWQ6
Ci0gICAgICAgIHJldHVybiBhdmNfaGFzX3Blcm0oZHNpZCwgU0VDSU5JVFNJRF9YRU4sIFNFQ0NM
QVNTX1ZFUlNJT04sCisgICAgICAgIHJldHVybiBhdmNfaGFzX3Blcm0oZHNpZCwgdHNpZCwgU0VD
Q0xBU1NfVkVSU0lPTiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWRVJTSU9OX19YRU5f
QlVJTERfSUQsIE5VTEwpOwogICAgIGRlZmF1bHQ6CiAgICAgICAgIHJldHVybiAtRVBFUk07CiAg
ICAgfQogfQogCitzdGF0aWMgaW50IGZsYXNrX3hlbl92ZXJzaW9uICh1aW50MzJfdCBvcCkKK3sK
KyAgICByZXR1cm4gZG9tYWluX2hhc194ZW5fdmVyc2lvbihjdXJyZW50LT5kb21haW4sIFNFQ0lO
SVRTSURfWEVOLCBvcCk7Cit9CisKIHN0YXRpYyBpbnQgZmxhc2tfZG9tYWluX3Jlc291cmNlX21h
cChzdHJ1Y3QgZG9tYWluICpkKQogewogICAgIHJldHVybiBjdXJyZW50X2hhc19wZXJtKGQsIFNF
Q0NMQVNTX0RPTUFJTjIsIERPTUFJTjJfX1JFU09VUkNFX01BUCk7CkBAIC0xNzM4LDYgKzE3NDgs
MTQgQEAgc3RhdGljIGludCBmbGFza19hcmdvX3NlbmQoY29uc3Qgc3RydWN0IGRvbWFpbiAqZCwg
Y29uc3Qgc3RydWN0IGRvbWFpbiAqdCkKIAogI2VuZGlmCiAKKyNpZmRlZiBDT05GSUdfWEVOX05F
U1RFRAorc3RhdGljIGludCBmbGFza19uZXN0ZWRfeGVuX3ZlcnNpb24oY29uc3Qgc3RydWN0IGRv
bWFpbiAqZCwgdW5zaWduZWQgaW50IG9wKQoreworICAgIHJldHVybiBkb21haW5faGFzX3hlbl92
ZXJzaW9uKGQsIFNFQ0lOSVRTSURfTkVTVEVEWEVOLCBvcCk7Cit9CisKKyNlbmRpZgorCiBsb25n
IGRvX2ZsYXNrX29wKFhFTl9HVUVTVF9IQU5ETEVfUEFSQU0oeHNtX29wX3QpIHVfZmxhc2tfb3Ap
OwogaW50IGNvbXBhdF9mbGFza19vcChYRU5fR1VFU1RfSEFORExFX1BBUkFNKHhzbV9vcF90KSB1
X2ZsYXNrX29wKTsKIApAQCAtMTg3Nyw2ICsxODk1LDkgQEAgc3RhdGljIHN0cnVjdCB4c21fb3Bl
cmF0aW9ucyBmbGFza19vcHMgPSB7CiAgICAgLmFyZ29fcmVnaXN0ZXJfYW55X3NvdXJjZSA9IGZs
YXNrX2FyZ29fcmVnaXN0ZXJfYW55X3NvdXJjZSwKICAgICAuYXJnb19zZW5kID0gZmxhc2tfYXJn
b19zZW5kLAogI2VuZGlmCisjaWZkZWYgQ09ORklHX1hFTl9ORVNURUQKKyAgICAubmVzdGVkX3hl
bl92ZXJzaW9uID0gZmxhc2tfbmVzdGVkX3hlbl92ZXJzaW9uLAorI2VuZGlmCiB9OwogCiB2b2lk
IF9faW5pdCBmbGFza19pbml0KGNvbnN0IHZvaWQgKnBvbGljeV9idWZmZXIsIHNpemVfdCBwb2xp
Y3lfc2l6ZSkKZGlmZiAtLWdpdCBhL3hlbi94c20vZmxhc2svcG9saWN5L2FjY2Vzc192ZWN0b3Jz
IGIveGVuL3hzbS9mbGFzay9wb2xpY3kvYWNjZXNzX3ZlY3RvcnMKaW5kZXggMTk0ZDc0M2E3MS4u
N2UwZDVhYTdiZiAxMDA2NDQKLS0tIGEveGVuL3hzbS9mbGFzay9wb2xpY3kvYWNjZXNzX3ZlY3Rv
cnMKKysrIGIveGVuL3hzbS9mbGFzay9wb2xpY3kvYWNjZXNzX3ZlY3RvcnMKQEAgLTUxMCw2ICs1
MTAsOCBAQCBjbGFzcyBzZWN1cml0eQogIwogY2xhc3MgdmVyc2lvbgogeworIyBCYXNpYyBpbmZv
cm1hdGlvbgorICAgIHhlbl92ZXJzaW9uCiAjIEV4dHJhIGluZm9ybWF0aW9ucyAoLXVuc3RhYmxl
KS4KICAgICB4ZW5fZXh0cmF2ZXJzaW9uCiAjIENvbXBpbGUgaW5mb3JtYXRpb24gb2YgdGhlIGh5
cGVydmlzb3IuCkBAIC01MTgsNiArNTIwLDEwIEBAIGNsYXNzIHZlcnNpb24KICAgICB4ZW5fY2Fw
YWJpbGl0aWVzCiAjIFNvdXJjZSBjb2RlIGNoYW5nZXNldC4KICAgICB4ZW5fY2hhbmdlc2V0Cisj
IEh5cGVydmlzb3IgdmlydCBzdGFydAorICAgIHhlbl9wbGF0Zm9ybV9wYXJhbWV0ZXJzCisjIFF1
ZXJ5IGZvciBiaXRtYXAgb2YgcGxhdGZvcm0gZmVhdHVyZXMKKyAgICB4ZW5fZ2V0X2ZlYXR1cmVz
CiAjIFBhZ2Ugc2l6ZSB0aGUgaHlwZXJ2aXNvciB1c2VzLgogICAgIHhlbl9wYWdlc2l6ZQogIyBB
biB2YWx1ZSB0aGF0IHRoZSBjb250cm9sIHN0YWNrIGNhbiBjaG9vc2UuCmRpZmYgLS1naXQgYS94
ZW4veHNtL2ZsYXNrL3BvbGljeS9pbml0aWFsX3NpZHMgYi94ZW4veHNtL2ZsYXNrL3BvbGljeS9p
bml0aWFsX3NpZHMKaW5kZXggN2VjYTcwZDMzOS4uYzY4NGNkYTg3MyAxMDA2NDQKLS0tIGEveGVu
L3hzbS9mbGFzay9wb2xpY3kvaW5pdGlhbF9zaWRzCisrKyBiL3hlbi94c20vZmxhc2svcG9saWN5
L2luaXRpYWxfc2lkcwpAQCAtMTUsNCArMTUsNSBAQCBzaWQgaXJxCiBzaWQgZGV2aWNlCiBzaWQg
ZG9tVQogc2lkIGRvbURNCitzaWQgbmVzdGVkeGVuCiAjIEZMQVNLCi0tIAoyLjE3LjEKCgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFp
bGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhl
bnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

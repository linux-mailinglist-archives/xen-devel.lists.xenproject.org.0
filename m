Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 622E1B0EBFF
	for <lists+xen-devel@lfdr.de>; Wed, 23 Jul 2025 09:33:25 +0200 (CEST)
Received: from list by lists.xenproject.org with outflank-mailman.1053385.1422154 (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ueTyU-0001jP-KX; Wed, 23 Jul 2025 07:33:14 +0000
X-Outflank-Mailman: Message body and most headers restored to incoming version
Received: by outflank-mailman (output) from mailman id 1053385.1422154; Wed, 23 Jul 2025 07:33:14 +0000
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ueTyU-0001hp-HV; Wed, 23 Jul 2025 07:33:14 +0000
Received: by outflank-mailman (input) for mailman id 1053385;
 Wed, 23 Jul 2025 07:33:12 +0000
Received: from se1-gles-flk1-in.inumbo.com ([94.247.172.50]
 helo=se1-gles-flk1.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.92) (envelope-from
 <SRS0=GKM/=2E=amd.com=Jiqian.Chen@srs-se1.protection.inumbo.net>)
 id 1ueTyS-0001hj-IQ
 for xen-devel@lists.xenproject.org; Wed, 23 Jul 2025 07:33:12 +0000
Received: from NAM11-CO1-obe.outbound.protection.outlook.com
 (mail-co1nam11on2060e.outbound.protection.outlook.com
 [2a01:111:f403:2416::60e])
 by se1-gles-flk1.inumbo.com (Halon) with ESMTPS
 id 475ea538-6797-11f0-b895-0df219b8e170;
 Wed, 23 Jul 2025 09:33:10 +0200 (CEST)
Received: from BL1PR12MB5849.namprd12.prod.outlook.com (2603:10b6:208:384::18)
 by DS0PR12MB8218.namprd12.prod.outlook.com (2603:10b6:8:f2::15) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.8964.21; Wed, 23 Jul
 2025 07:33:05 +0000
Received: from BL1PR12MB5849.namprd12.prod.outlook.com
 ([fe80::b77f:9333:3a5a:d285]) by BL1PR12MB5849.namprd12.prod.outlook.com
 ([fe80::b77f:9333:3a5a:d285%4]) with mapi id 15.20.8922.037; Wed, 23 Jul 2025
 07:33:05 +0000
X-BeenThere: xen-devel@lists.xenproject.org
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Errors-To: xen-devel-bounces@lists.xenproject.org
Precedence: list
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>
X-Inumbo-ID: 475ea538-6797-11f0-b895-0df219b8e170
ARC-Seal: i=1; a=rsa-sha256; s=arcselector10001; d=microsoft.com; cv=none;
 b=EuQ+sdH0CIO367ebHXGGWpe8TGH4YeFYAhCb/9olQbkxkosU8XzzzKZyVDGDYN4L/tOwWdzpfxQPklPDGtrcdyr7J/zWXcZUMYFP598t76WPPo+u1rHBhKuH1Ytu4TGzbjLPcPl5k+nszLqx4ZbVZJPB1GrliDuNACvaCC/+3FPd2E/No/1veeeagZYT5hfJCB+lUyym/IL1nLyi315m15Zy0KcuJRcl9b6aCJPjkB6OKh+9CWMhOG/20K/kiNe2loTPc5YXj29sMyjKj7mMUbtfFlw606CBB13f+2JmC1Wav1UMdWaXAj2rFm7AtZqLMLHxyUFucD6crvh0BqHi7w==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector10001;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=N2qJYs1rYf1efpNnhhs2assMCOl2hdTSEVTsa+DsN8U=;
 b=c/tJeEVecCtPENNOlxMTqn0jv0/VZM2Wtoomm1Zm9E+5geMimjI/VQCkWmtykQAN8Ji4RQ0qDUTgSd36+5YsMJmdWjoXuyQiH83FVF7Gzr2jV5HBnQfokZRCcdRBsGOj3Y4KyoAPBCWA/nGJO4pH/tvUPBsduLw3WyIIwFEYrPmlqTcBQxfjIFEwu6SL4cfGR/5Ax7zagw/HcwdqPxf3cHD6O0iAVUVGl/hXKxoSfnxBarvCLsOlISEVu5nG8EwM37BZafXrlwI9Y3Du430p24k4qSL0tQ8xk9e28RHtSte5qRFKv/+sFfzFA3uob7sQNGthw/ocNwIBpdnwPYTfZg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=amd.com; dmarc=pass action=none header.from=amd.com; dkim=pass
 header.d=amd.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=amd.com; s=selector1;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=N2qJYs1rYf1efpNnhhs2assMCOl2hdTSEVTsa+DsN8U=;
 b=vblYWiGCzhVxuhuX5l6R7TQAtwf1rjLXGQwS4nSM6gz5WHPJHlgYwAoMrZghDcjruDJWM2pUf6J5kCynBKu1xmW8ciesT+exstfJR4b8S64r5zH5N4HLD3CXfP4Cs2EbKn+hXLzNdatBk/Vmk4KmN7aDaPXfAQFofsiE3RDTCwg=
From: "Chen, Jiqian" <Jiqian.Chen@amd.com>
To: =?utf-8?B?Um9nZXIgUGF1IE1vbm7DqQ==?= <roger.pau@citrix.com>
CC: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>, "Huang,
 Ray" <Ray.Huang@amd.com>, "Chen, Jiqian" <Jiqian.Chen@amd.com>
Subject: Re: [PATCH v7 3/8] vpci: Hide legacy capability when it fails to
 initialize
Thread-Topic: [PATCH v7 3/8] vpci: Hide legacy capability when it fails to
 initialize
Thread-Index: AQHb7LJzFFVezah4/kGQrp4S/ItUhbQ81G0AgAMfVQA=
Date: Wed, 23 Jul 2025 07:33:04 +0000
Message-ID:
 <BL1PR12MB584951B8BE1340D0ED4C8DC5E75FA@BL1PR12MB5849.namprd12.prod.outlook.com>
References: <20250704070803.314366-1-Jiqian.Chen@amd.com>
 <20250704070803.314366-4-Jiqian.Chen@amd.com>
 <aH5hUC1JBYLyF0h6@macbook.local>
In-Reply-To: <aH5hUC1JBYLyF0h6@macbook.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-ms-exchange-imapappendstamp: BL1PR12MB5849.namprd12.prod.outlook.com
 (15.20.8922.036)
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=amd.com;
x-ms-exchange-messagesentrepresentingtype: 1
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: BL1PR12MB5849:EE_|DS0PR12MB8218:EE_
x-ms-office365-filtering-correlation-id: 597bfc9c-63cd-4811-f309-08ddc9bb2994
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;ARA:13230040|366016|1800799024|376014|38070700018;
x-microsoft-antispam-message-info:
 =?utf-8?B?MGpndGZNYmQvMWpGTGZ0MWJFM090MmExcStYRXp1bUdFd1RVVGJSb3dISi9l?=
 =?utf-8?B?d2d3R2dOSVpvZUVUbHd2NzJMaDBBYnQ1enlVUWsvdmxacTZ0eFoyRjRLSVBj?=
 =?utf-8?B?T2M3NTd4NUE5ckRCRDdqK1M4VVorSmNxYkc3UHR5RWZWVElTVzlYbWxiRTFN?=
 =?utf-8?B?ajBYS0kvZmhTTFFHZWdrQk9mQTlxWWsyUXdQbERUdDRCRUZIWS9ocVJqY3ZX?=
 =?utf-8?B?dUZVK3lZajRaU2FVUXpFN1orSDJXcmFFNEVLTzhWTERKdFFYYm1tdUE3alVK?=
 =?utf-8?B?aEVDVTdoOTIwYStBNk5DeWRCSUhKdDBNNXBXNWdQK2ZlUDBNWE1vOXl5WW50?=
 =?utf-8?B?TGFrNXIrQk13Yjd0WG9GM01PanJDejRwWlg3OXdiSWhRZlRadk5lT3lrUUpI?=
 =?utf-8?B?UlNBVy9FWjJ6UTdMZ0NWWHVGczRuMEtLRjRzblRQYWF2NFUzQ1JqTkN3aDcr?=
 =?utf-8?B?MjU1QmRMdXJ2MnBtQzhSdDF6aExCR0ZEc3VYaFdVZ2UrdUY2S3JJdTVUYW9n?=
 =?utf-8?B?ZDJwT01rcFlBRklVbEdQcXlYRzhSenBXRWVIQytkNlhkK01LU2FBdUZjY3kw?=
 =?utf-8?B?R0RjbWpKMkU4Zi9YdWQxajRFZ0hSY05ob0hFSFI2dVpyY2xrL1NYSStxdUhB?=
 =?utf-8?B?MDZaQ1lHcUtlUkdCdVREYkJEeGZFVU4yVW96NmhWTlNpNkZwWGlKdm5vZVo4?=
 =?utf-8?B?eE9Yd2owWjE0a0VCaXRDUzM4amE3VWYzZ2JXcTRkOTMrU0VzeGIrdjBtbUdX?=
 =?utf-8?B?bW5GM0I3ckdaVkQrSEgwRTRGZ3JUcnBqTVo2bGV6RkxvTHFlSThVdUcvYVND?=
 =?utf-8?B?VC9aN1gyc3RXNjZRcnpRbElJMVMzYWNwUDlIWGJCd1p4L0NZMTdQa3FhekZk?=
 =?utf-8?B?VTc0Z0dFS2xEa3N5eFAxeEhvVmFpQm1PYlBqSnRrTWc0UWxFR2E0c296aW1L?=
 =?utf-8?B?STI2am5RNU5ReXpsczg5WDVHbkZIc3JmYTltbE16ZTY5eGJsVGpOR09oZE9p?=
 =?utf-8?B?ZGhuTGsyalFzaFRab3U4ZHVOTXhYTGE0NVFvVkJDbk1VbElUVU1WWUJnTnZ3?=
 =?utf-8?B?L051bmlHdHNWYTFLbkFnVDRBVkdjNGNnUFJqYThEdG1sSnVYOFQ2UmtDZ05O?=
 =?utf-8?B?WngxeGJDNnJEWjgwcEs1REhsWERqMkpyTzB1Zm5kbm52NUJFREFISnFjTXNC?=
 =?utf-8?B?VFRIMUNTZnZYeHY3Wnh4ZFl1UTlMREFweldoSWtXWU9xcXd5RUV2aUhiU1c3?=
 =?utf-8?B?cGlxL2Q0MDgxT0F5QlM3dTNycWNYYXE3SGpieldsalFvbEZ4RytCVHFaajM0?=
 =?utf-8?B?VFBtR1c2TVN5QVR3RnFXZHVhWWlJcmxmRGVmbzAzUjI5bnU0cHJZYW5aRUI0?=
 =?utf-8?B?ZHN0dVlpS3FCS2p6NmIybllMMDVCaVpxaU53bGZpTGszcUo3TGtuWTdqNTBt?=
 =?utf-8?B?WFpBMDA1YWxNcTNNaW95SWUxNXJ0R3VmbEtscnY0Vkh6WFpzVGVqdGYrYm5F?=
 =?utf-8?B?dW83anh3WDI4bndlQzI3dEkvN2liSFV4NytWaEN4NVZiWXdOMzVZZmI5WDl2?=
 =?utf-8?B?c3p3MzFMMXE1aGRyUFdzczRwZEhvRkI1VGNaQ2VDeTcxcVM0Z2RKWlBzb1JO?=
 =?utf-8?B?aUxYTGdkWEJkZ3RlUEpKdWZ1cjBQUVBJUk5BWklUT0hOUnh4N014QVdoZUdn?=
 =?utf-8?B?MGZaUG1ER203Vkk3STc3ZjlRQk9GUjFKKzhLRzZNNFhQOExwbVpoaTQzMVly?=
 =?utf-8?B?bDRjdXlJNjFJa0lXUWlFQ21GY0VDNmVPTGdRcjJsOUlsSlRGc0RCZVZkczJr?=
 =?utf-8?B?clNKNTlPNGxmMmgybzNJc2pvM2lXVCs4ajBsMzRoOTBoZDgxVUNrVG9MK09Z?=
 =?utf-8?B?dFpsZkl6S1UzbVdxQXJ0SVlKOGxhUHlSa3pCeDJuS0tKK0JHSlZPVU10aUVm?=
 =?utf-8?B?aG96M1VXQzhQZGRHRzRVMUgvSUFOdk5yYTRrNjk4RHYvNFNOTVF1Mnpud2hL?=
 =?utf-8?B?eWpFOE1lRGpnPT0=?=
x-forefront-antispam-report:
 CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:BL1PR12MB5849.namprd12.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230040)(366016)(1800799024)(376014)(38070700018);DIR:OUT;SFP:1101;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0:
 =?utf-8?B?QWlhYVk4b1lGREJxZHR6RElXeG1YdjBUWHdmRTY4RlhDTDNDemlrWU0xS0VU?=
 =?utf-8?B?YVhTVW03WnZ2U1JrMEEvZFI4QkRxU1FNUWxtYk1pcFYrbzRNdTB6eWVEN1VZ?=
 =?utf-8?B?VHF6bzRvRGRwbjhvMFhTWEZqRUhJak9JVHNFd3BjQzU1TkZUWkgvdzRtS2FM?=
 =?utf-8?B?RktidjZ2VmNva3ZSV014MDl4OWkzOXRBbUYxekhrMnRuTTFubmlKTXZUc1M0?=
 =?utf-8?B?b0lCOEV0SllETlprZVJBcUlwaFdpKy92RDQ0RzcxRXJKNzBtNWZ1UGtRbnpH?=
 =?utf-8?B?VnQvVTZkNmE1b1hESEt0Y2Z3ZnVyT3hMODVDenFOeEVPdkVwSS9DcVBHckNC?=
 =?utf-8?B?QzBVSjBBZXBjb1IwVWhweG9IUUc1QnZhWnoyeHV1TFo2VTlyZnNDK2x0UWdk?=
 =?utf-8?B?NmExOHB3cFhvZFBXdG5QR0VORGIyZTNvRFo1cGVpU1ZvY3IxTW9QWnl4cGxx?=
 =?utf-8?B?UnlZd21CVmhRVkQ3V3dQbDcvUThKOEtPT0xiS3JraTRCVHBmSW56aGx2bWdO?=
 =?utf-8?B?UE96T29KdEIrcEdJY1BnN05aeWtudXV2aFN3THJsU05md2JjQnFGVHpodGxJ?=
 =?utf-8?B?OGEyaStOcnVpR213V0lRWmVwMWRmbmw2OTlmRnY4QXBuZnAyNUV0YTlKVGxC?=
 =?utf-8?B?ZDkwSkVQUFE5OGFqM2VtV1V3c1hOT2poRU1xbk5UdjRjTkp0RXJjZFYwMmlo?=
 =?utf-8?B?cVJod3BSSGJTL25WNjg0YjRBTUg3RnQ5alZ5cVQrYXpiaE5HaU41Qnd1alR6?=
 =?utf-8?B?N2w4a2hvNDBSU0V3WThBV2JGKzdRaTZQWGRmNThFSVZMcVUzU0d3MFhRdWRG?=
 =?utf-8?B?U1BnblVSS1RhYmFOVXRMdXlFamtJZGhadTBCNHhzdFBsMDNGakRMaGV5WFcx?=
 =?utf-8?B?a0RFZDhhaGJodHRvK2lqWUQ2S2RUL0Z4WXNlYWhEOTR0SC9xVXpiZnBwb3F0?=
 =?utf-8?B?djJsY3Znak1IWjdodFIzOXV1WkFLN0hwNm1GS1R3MzI3dmZRYWViS0haOE9P?=
 =?utf-8?B?QzdYOEUwVFVJejA4TTN3WklIejJDdDJTRmFOQ0ozUlpoK1dyRWFkeVBoWklh?=
 =?utf-8?B?MUs3V3BvTjcwUi9TQVdHMVl5d0JGYTFyblcyRU9CWnFLSVhwRUJWZkY5Tk9R?=
 =?utf-8?B?Q2lhRXFQVEt6VUtYNVpWYnRabmVuQXhIMXYyTTBGWjdBb0JiTVhMY25rR0lx?=
 =?utf-8?B?SVJGV2tYZlp6akR3enNBRE5tbWlXTGkzN1JtY21lSy9sYlRSQStCV0VKVFNI?=
 =?utf-8?B?cUY0SjJBZDRQcTVPdFBTYVZtaWVaNmVCckxMZko1NFdYVmpNMktJNmp3UTVz?=
 =?utf-8?B?RWRkSndHbXdhQzV0cWVXM25pTitPYlBsY3RjWXN3RlRNNXJxTk41cXRHTFht?=
 =?utf-8?B?T0VIZ2hXQWJxUkJ4STN5NEZMcmVrd3BTYTRCQ1ZvOFd6bFRlVEovQXdFOTBN?=
 =?utf-8?B?WUVDYzNFSWNCek9uNVhjZ2dwS3ZLdkozalhzb20xOVJpOS9ydHpsRjRIQVNB?=
 =?utf-8?B?bkhUL3NPTXh2aVFmSSt4TEVSZDlFQ1J1MU5KZXU3em1FT3lNWU16dmppeWc0?=
 =?utf-8?B?L1I3NUYvYjMrR1ZTVk82TUo3cHZaVllEdjBXZ2cvYllyNkwzUUUrTDRqVGZH?=
 =?utf-8?B?eTZ3czVDS2ZldVNiZzZPaXhhM2k1YVV3K2FRbDFTWDlwUVBrMFh3Q1lGTzZ3?=
 =?utf-8?B?RmdHd0xYcWV5UXV2VW1DNjExZkpmOWZMM053SmM5bWtkMkJaMkZhWWczdlhh?=
 =?utf-8?B?MWtiK1dQVjc2dEFvaFUyVHU4cVBveHhrczJvemt4azVKQUFNYVkzY25RWnl0?=
 =?utf-8?B?dlpycmwwRUp3V1JtQnp5ekFPOU52bjk2OGdHOWlDSEt5TUFzZTNIQWYvbVF5?=
 =?utf-8?B?SEU5MURBWDRnTlA2eS9xdjV2SVBGbFZGSTRsQTJrUnk1NkdLMWRzRXRPMkVt?=
 =?utf-8?B?OGtYRFlpUDlWS3lvUWlkazJtdzZpZ3hyVU9QUEdLOVA1bWNFK25JS1pQcytq?=
 =?utf-8?B?RWd3T3RTVnpraHVlNEVkYzdQRlBhYkpKZVdSL2xOOVZWWDQyQkZ3dDE2RzhG?=
 =?utf-8?B?R04zV1c1cEZEMlB5QTRJMklZMTZxSEx5RXZPWVlIOTJRRVpmZHZFbWdiV3Ri?=
 =?utf-8?Q?msHY=3D?=
Content-Type: text/plain; charset="utf-8"
Content-ID: <12E472F6AE88C5439F43A10BF9BDB460@amdcloud.onmicrosoft.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: amd.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: BL1PR12MB5849.namprd12.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 597bfc9c-63cd-4811-f309-08ddc9bb2994
X-MS-Exchange-CrossTenant-originalarrivaltime: 23 Jul 2025 07:33:05.0052
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 3dd8961f-e488-4e60-8e11-a82d994e183d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: pScrxHurLz4tkBxdNt7KulEi8nI1fYDIweQwWrWmjRTGGS2P1r66nPMoJmFW93CWl/CGyNiwNij9P4KL37rbqQ==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DS0PR12MB8218

T24gMjAyNS83LzIxIDIzOjQ4LCBSb2dlciBQYXUgTW9ubsOpIHdyb3RlOg0KPiBPbiBGcmksIEp1
bCAwNCwgMjAyNSBhdCAwMzowNzo1OFBNICswODAwLCBKaXFpYW4gQ2hlbiB3cm90ZToNCj4+IFdo
ZW4gdnBjaSBmYWlscyB0byBpbml0aWFsaXplIGEgbGVnYWN5IGNhcGFiaWxpdHkgb2YgZGV2aWNl
LCBpdCBqdXN0DQo+PiByZXR1cm5zIGFuIGVycm9yIGFuZCB2UENJIGdldHMgZGlzYWJsZWQgZm9y
IHRoZSB3aG9sZSBkZXZpY2UuICBUaGF0DQo+PiBtb3N0IGxpa2VseSByZW5kZXJzIHRoZSBkZXZp
Y2UgdW51c2FibGUsIHBsdXMgcG9zc2libHkgY2F1c2luZyBpc3N1ZXMNCj4+IHRvIFhlbiBpdHNl
bGYgaWYgZ3Vlc3QgYXR0ZW1wdHMgdG8gcHJvZ3JhbSB0aGUgbmF0aXZlIE1TSSBvciBNU0ktWA0K
Pj4gY2FwYWJpbGl0aWVzIGlmIHByZXNlbnQuDQo+Pg0KPj4gU28sIGFkZCBuZXcgZnVuY3Rpb24g
dG8gaGlkZSBsZWdhY3kgY2FwYWJpbGl0eSB3aGVuIGluaXRpYWxpemF0aW9uDQo+PiBmYWlscy4g
QW5kIHJlbW92ZSB0aGUgZmFpbGVkIGxlZ2FjeSBjYXBhYmlsaXR5IGZyb20gdGhlIHZwY2kgZW11
bGF0ZWQNCj4+IGxlZ2FjeSBjYXBhYmlsaXR5IGxpc3QuDQo+Pg0KPj4gU2lnbmVkLW9mZi1ieTog
SmlxaWFuIENoZW4gPEppcWlhbi5DaGVuQGFtZC5jb20+DQo+PiAtLS0NCj4+IGNjOiAiUm9nZXIg
UGF1IE1vbm7DqSIgPHJvZ2VyLnBhdUBjaXRyaXguY29tPg0KPj4gLS0tDQo+PiB2Ni0+djcgY2hh
bmdlczoNCj4+ICogQ2hhbmdlIHRoZSBwb2ludGVyIHBhcmFtZXRlciBvZiB2cGNpX2dldF9yZWdp
c3RlcigpLA0KPj4gICB2cGNpX2dldF9wcmV2aW91c19jYXBfcmVnaXN0ZXIoKSBhbmQgdnBjaV9j
YXBhYmlsaXR5X2hpZGUoKSB0byBiZSBjb25zdC4NCj4+DQo+PiB2NS0+djYgY2hhbmdlczoNCj4+
ICogUmVuYW1lIHBhcmFtZXRlciBybSB0byByIGluIHZwY2lfZ2V0X3JlZ2lzdGVyKCkuDQo+PiAq
IFVzZSBmb3IgbG9vcCB0byBjb21wYWN0IHRoZSBjb2RlIG9mIHZwY2lfZ2V0X3ByZXZpb3VzX2Nh
cF9yZWdpc3RlcigpLg0KPj4gKiBSZW5hbWUgcHJldl9uZXh0X3IgdG8gcHJldl9yIGluIHZwY2lf
Y2FwYWJpbGl0eV9oaWRlKCgpLg0KPj4gKiBBZGQgcHJpbnRpbmcgd2hlbiBjYXAgaW5pdCwgY2xl
YW51cCBhbmQgaGlkZSBmYWlsLg0KPj4NCj4+IHY0LT52NSBjaGFuZ2VzOg0KPj4gKiBNb2RpZnkg
dnBjaV9nZXRfcmVnaXN0ZXIoKSB0byBkZWxldGUgc29tZSB1bm5lY2Vzc2FyeSBjaGVjaywgc28g
dGhhdA0KPj4gICBJIGRvbid0IG5lZWQgdG8gbW92ZSBmdW5jdGlvbiB2cGNpX3JlZ2lzdGVyX2Nt
cCgpLg0KPj4gKiBSZW5hbWUgdnBjaV9jYXBhYmlsaXR5X21hc2soKSB0byB2cGNpX2NhcGFiaWxp
dHlfaGlkZSgpLg0KPj4NCj4+IHYzLT52NCBjaGFuZ2VzOg0KPj4gKiBNb2RpZnkgdGhlIGNvbW1p
dCBtZXNzYWdlLg0KPj4gKiBJbiBmdW5jdGlvbiB2cGNpX2dldF9wcmV2aW91c19jYXBfcmVnaXN0
ZXIoKSwgYWRkIGFuIEFTU0VSVF9VTlJFQUNIQUJMRSgpIGlmIG9mZnNldCBiZWxvdyAweDQwLg0K
Pj4gKiBNb2RpZnkgdnBjaV9jYXBhYmlsaXR5X21hc2soKSB0byByZXR1cm4gZXJyb3IgaW5zdGVh
ZCBvZiB1c2luZyBBU1NFUlQuDQo+PiAqIFVzZSB2cGNpX3JlbW92ZV9yZWdpc3RlciB0byByZW1v
dmUgUENJX0NBUF9MSVNUX0lEIHJlZ2lzdGVyIGluc3RlYWQgb2Ygb3BlbiBjb2RlLg0KPj4gKiBB
ZGQgY2hlY2sgImlmICggIW9mZnNldCApIiBpbiB2cGNpX2NhcGFiaWxpdHlfbWFzaygpLg0KPj4N
Cj4+IHYyLT52MyBjaGFuZ2VzOg0KPj4gKiBTZXBhcmF0ZWQgZnJvbSB0aGUgbGFzdCB2ZXJzaW9u
IHBhdGNoICJ2cGNpOiBIaWRlIGNhcGFiaWxpdHkgd2hlbiBpdCBmYWlscyB0byBpbml0aWFsaXpl
Ig0KPj4gKiBXaG9sZSBpbXBsZW1lbnRhdGlvbiBjaGFuZ2VkIGJlY2F1c2UgbGFzdCB2ZXJzaW9u
IGlzIHdyb25nLg0KPj4gICBUaGlzIHZlcnNpb24gYWRkcyBhIG5ldyBoZWxwZXIgZnVuY3Rpb24g
dnBjaV9nZXRfcmVnaXN0ZXIoKSBhbmQgdXNlcyBpdCB0byBnZXQNCj4+ICAgdGFyZ2V0IGhhbmRs
ZXIgYW5kIHByZXZpb3VzIGhhbmRsZXIgZnJvbSB2cGNpLT5oYW5kbGVycywgdGhlbiByZW1vdmUg
dGhlIHRhcmdldC4NCj4+DQo+PiB2MS0+djIgY2hhbmdlczoNCj4+ICogUmVtb3ZlZCB0aGUgInBy
aW9yaXRpZXMiIG9mIGluaXRpYWxpemluZyBjYXBhYmlsaXRpZXMgc2luY2UgaXQgaXNuJ3QgdXNl
ZCBhbnltb3JlLg0KPj4gKiBBZGRlZCBuZXcgZnVuY3Rpb24gdnBjaV9jYXBhYmlsaXR5X21hc2so
KSBhbmQgdnBjaV9leHRfY2FwYWJpbGl0eV9tYXNrKCkgdG8NCj4+ICAgcmVtb3ZlIGZhaWxlZCBj
YXBhYmlsaXR5IGZyb20gbGlzdC4NCj4+ICogQ2FsbGVkIHZwY2lfbWFrZV9tc2l4X2hvbGUoKSBp
biB0aGUgZW5kIG9mIGluaXRfbXNpeCgpLg0KPj4NCj4+IEJlc3QgcmVnYXJkcywNCj4+IEppcWlh
biBDaGVuLg0KPj4gLS0tDQo+PiAgeGVuL2RyaXZlcnMvdnBjaS92cGNpLmMgfCAxMDkgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLQ0KPj4gIDEgZmlsZSBjaGFuZ2VkLCAx
MDggaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQ0KPj4NCj4+IGRpZmYgLS1naXQgYS94ZW4v
ZHJpdmVycy92cGNpL3ZwY2kuYyBiL3hlbi9kcml2ZXJzL3ZwY2kvdnBjaS5jDQo+PiBpbmRleCBl
N2U1YjY0ZjFiZTQuLmE5MWMzZDRhMTQxNSAxMDA2NDQNCj4+IC0tLSBhL3hlbi9kcml2ZXJzL3Zw
Y2kvdnBjaS5jDQo+PiArKysgYi94ZW4vZHJpdmVycy92cGNpL3ZwY2kuYw0KPj4gQEAgLTgzLDYg
KzgzLDg4IEBAIHN0YXRpYyBpbnQgYXNzaWduX3ZpcnR1YWxfc2JkZihzdHJ1Y3QgcGNpX2RldiAq
cGRldikNCj4+ICANCj4+ICAjZW5kaWYgLyogQ09ORklHX0hBU19WUENJX0dVRVNUX1NVUFBPUlQg
Ki8NCj4+ICANCj4+ICtzdGF0aWMgc3RydWN0IHZwY2lfcmVnaXN0ZXIgKnZwY2lfZ2V0X3JlZ2lz
dGVyKGNvbnN0IHN0cnVjdCB2cGNpICp2cGNpLA0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IG9mZnNldCwNCj4+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBzaXpl
KQ0KPj4gK3sNCj4+ICsgICAgc3RydWN0IHZwY2lfcmVnaXN0ZXIgKnI7DQo+PiArDQo+PiArICAg
IEFTU0VSVChzcGluX2lzX2xvY2tlZCgmdnBjaS0+bG9jaykpOw0KPj4gKw0KPj4gKyAgICBsaXN0
X2Zvcl9lYWNoX2VudHJ5ICggciwgJnZwY2ktPmhhbmRsZXJzLCBub2RlICkNCj4+ICsgICAgew0K
Pj4gKyAgICAgICAgaWYgKCByLT5vZmZzZXQgPT0gb2Zmc2V0ICYmIHItPnNpemUgPT0gc2l6ZSAp
DQo+PiArICAgICAgICAgICAgcmV0dXJuIHI7DQo+PiArDQo+PiArICAgICAgICBpZiAoIG9mZnNl
dCA8PSByLT5vZmZzZXQgKQ0KPj4gKyAgICAgICAgICAgIGJyZWFrOw0KPj4gKyAgICB9DQo+PiAr
DQo+PiArICAgIHJldHVybiBOVUxMOw0KPj4gK30NCj4+ICsNCj4+ICtzdGF0aWMgc3RydWN0IHZw
Y2lfcmVnaXN0ZXIgKnZwY2lfZ2V0X3ByZXZpb3VzX2NhcF9yZWdpc3RlcigNCj4+ICsgICAgY29u
c3Qgc3RydWN0IHZwY2kgKnZwY2ksIHVuc2lnbmVkIGludCBvZmZzZXQpDQo+PiArew0KPj4gKyAg
ICB1aW50MzJfdCBuZXh0Ow0KPj4gKyAgICBzdHJ1Y3QgdnBjaV9yZWdpc3RlciAqcjsNCj4+ICsN
Cj4+ICsgICAgaWYgKCBvZmZzZXQgPCAweDQwICkNCj4+ICsgICAgew0KPj4gKyAgICAgICAgQVNT
RVJUX1VOUkVBQ0hBQkxFKCk7DQo+PiArICAgICAgICByZXR1cm4gTlVMTDsNCj4+ICsgICAgfQ0K
Pj4gKw0KPj4gKyAgICBmb3IgKCByID0gdnBjaV9nZXRfcmVnaXN0ZXIodnBjaSwgUENJX0NBUEFC
SUxJVFlfTElTVCwgMSk7IHI7DQo+PiArICAgICAgICAgIHIgPSBuZXh0ID49IDB4NDAgPyB2cGNp
X2dldF9yZWdpc3Rlcih2cGNpLA0KPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgbmV4dCArIFBDSV9DQVBfTElTVF9ORVhULCAxKQ0KPj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgIDogTlVMTCApDQo+PiArICAgIHsNCj4+ICsgICAgICAgIG5leHQg
PSAodWludDMyX3QpKHVpbnRwdHJfdClyLT5wcml2YXRlOw0KPiANCj4gQm90aCAnbmV4dCcgdHlw
ZSBhbmQgdGhlIGV4cGxpY2l0IHRydW5jYXRpb24gZG9uZSBoZXJlIHdvdWxkIGJldHRlcg0KPiB1
c2UgInVuc2lnbmVkIGludCIgdG8gbWF0Y2ggdGhlIHR5cGUgb2YgdGhlIGlucHV0IG9mZnNldCBw
YXJhbWV0ZXI/DQpNYWtlIHNlbnNlLCB3aWxsIGNoYW5nZS4NCg0KPiANCj4+ICsgICAgICAgIEFT
U0VSVChuZXh0ID09ICh1aW50cHRyX3Qpci0+cHJpdmF0ZSk7DQo+PiArICAgICAgICBpZiAoIG5l
eHQgPT0gb2Zmc2V0ICkNCj4+ICsgICAgICAgICAgICBicmVhazsNCj4+ICsgICAgfQ0KPj4gKw0K
Pj4gKyAgICByZXR1cm4gcjsNCj4+ICt9DQo+PiArDQo+PiArc3RhdGljIGludCB2cGNpX2NhcGFi
aWxpdHlfaGlkZShjb25zdCBzdHJ1Y3QgcGNpX2RldiAqcGRldiwgdW5zaWduZWQgaW50IGNhcCkN
Cj4+ICt7DQo+PiArICAgIGNvbnN0IHVuc2lnbmVkIGludCBvZmZzZXQgPSBwY2lfZmluZF9jYXBf
b2Zmc2V0KHBkZXYtPnNiZGYsIGNhcCk7DQo+PiArICAgIHN0cnVjdCB2cGNpX3JlZ2lzdGVyICpw
cmV2X3IsICpuZXh0X3I7DQo+PiArICAgIHN0cnVjdCB2cGNpICp2cGNpID0gcGRldi0+dnBjaTsN
Cj4+ICsNCj4+ICsgICAgaWYgKCAhb2Zmc2V0ICkNCj4+ICsgICAgew0KPj4gKyAgICAgICAgQVNT
RVJUX1VOUkVBQ0hBQkxFKCk7DQo+PiArICAgICAgICByZXR1cm4gMDsNCj4+ICsgICAgfQ0KPj4g
Kw0KPj4gKyAgICBzcGluX2xvY2soJnZwY2ktPmxvY2spOw0KPj4gKyAgICBwcmV2X3IgPSB2cGNp
X2dldF9wcmV2aW91c19jYXBfcmVnaXN0ZXIodnBjaSwgb2Zmc2V0KTsNCj4+ICsgICAgbmV4dF9y
ID0gdnBjaV9nZXRfcmVnaXN0ZXIodnBjaSwgb2Zmc2V0ICsgUENJX0NBUF9MSVNUX05FWFQsIDEp
Ow0KPj4gKyAgICBpZiAoICFwcmV2X3IgfHwgIW5leHRfciApDQo+PiArICAgIHsNCj4+ICsgICAg
ICAgIHNwaW5fdW5sb2NrKCZ2cGNpLT5sb2NrKTsNCj4+ICsgICAgICAgIHJldHVybiAtRU5PREVW
Ow0KPj4gKyAgICB9DQo+PiArDQo+PiArICAgIHByZXZfci0+cHJpdmF0ZSA9IG5leHRfci0+cHJp
dmF0ZTsNCj4+ICsgICAgLyoNCj4+ICsgICAgICogTm90IGNhbGxpbmcgdnBjaV9yZW1vdmVfcmVn
aXN0ZXIoKSBoZXJlIGlzIHRvIGF2b2lkIHJlZG9pbmcNCj4+ICsgICAgICogdGhlIHJlZ2lzdGVy
IHNlYXJjaA0KPj4gKyAgICAgKi8NCj4+ICsgICAgbGlzdF9kZWwoJm5leHRfci0+bm9kZSk7DQo+
PiArICAgIHNwaW5fdW5sb2NrKCZ2cGNpLT5sb2NrKTsNCj4+ICsgICAgeGZyZWUobmV4dF9yKTsN
Cj4+ICsNCj4+ICsgICAgaWYgKCAhaXNfaGFyZHdhcmVfZG9tYWluKHBkZXYtPmRvbWFpbikgKQ0K
Pj4gKyAgICAgICAgcmV0dXJuIHZwY2lfcmVtb3ZlX3JlZ2lzdGVyKHZwY2ksIG9mZnNldCArIFBD
SV9DQVBfTElTVF9JRCwgMSk7DQo+PiArDQo+PiArICAgIHJldHVybiAwOw0KPj4gK30NCj4+ICsN
Cj4+ICBzdGF0aWMgaW50IHZwY2lfaW5pdF9jYXBhYmlsaXRpZXMoc3RydWN0IHBjaV9kZXYgKnBk
ZXYpDQo+PiAgew0KPj4gICAgICBmb3IgKCB1bnNpZ25lZCBpbnQgaSA9IDA7IGkgPCBOVU1fVlBD
SV9JTklUOyBpKysgKQ0KPj4gQEAgLTEwMyw3ICsxODUsMzIgQEAgc3RhdGljIGludCB2cGNpX2lu
aXRfY2FwYWJpbGl0aWVzKHN0cnVjdCBwY2lfZGV2ICpwZGV2KQ0KPj4gIA0KPj4gICAgICAgICAg
cmMgPSBjYXBhYmlsaXR5LT5pbml0KHBkZXYpOw0KPj4gICAgICAgICAgaWYgKCByYyApDQo+PiAt
ICAgICAgICAgICAgcmV0dXJuIHJjOw0KPj4gKyAgICAgICAgew0KPj4gKyAgICAgICAgICAgIGNv
bnN0IGNoYXIgKnR5cGUgPSBpc19leHQgPyAiZXh0ZW5kZWQiIDogImxlZ2FjeSI7DQo+PiArDQo+
PiArICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19XQVJOSU5HICIlcGQgJXBwOiBpbml0ICVzIGNh
cCAldSBmYWlsIHJjPSVkLCBtYXNrIGl0XG4iLA0KPiANCj4gTml0OiBpbiBvcmRlciB0byBhdm9p
ZCB0aGUgc3RyaWN0bHkgc3BlYWtpbmcgb3Zlcmx5IGxvbmcgbGluZSBoZXJlIHlvdQ0KPiBjb3Vs
ZCBzcGxpdCBpdCBsaWtlOg0KPiANCj4gICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19XQVJOSU5H
DQo+ICAgICAgICAgICAgICAgICAgICAiJXBkICVwcDogaW5pdCAlcyBjYXAgJXUgZmFpbCByYz0l
ZCwgbWFzayBpdFxuIiwNCj4gICAgICAgICAgICAgICAgICAgIHBkZXYtPmRvbWFpbiwgLi4uDQpX
aWxsIGRvLg0KPiANCj4+ICsgICAgICAgICAgICAgICAgICAgcGRldi0+ZG9tYWluLCAmcGRldi0+
c2JkZiwgdHlwZSwgY2FwLCByYyk7DQo+PiArDQo+PiArICAgICAgICAgICAgaWYgKCBjYXBhYmls
aXR5LT5jbGVhbnVwICkNCj4+ICsgICAgICAgICAgICB7DQo+PiArICAgICAgICAgICAgICAgIHJj
ID0gY2FwYWJpbGl0eS0+Y2xlYW51cChwZGV2KTsNCj4+ICsgICAgICAgICAgICAgICAgaWYgKCBy
YyApDQo+PiArICAgICAgICAgICAgICAgIHsNCj4+ICsgICAgICAgICAgICAgICAgICAgIHByaW50
ayhYRU5MT0dfRVJSICIlcGQgJXBwOiBjbGVhbiAlcyBjYXAgJXUgZmFpbCByYz0lZFxuIiwNCj4+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBwZGV2LT5kb21haW4sICZwZGV2LT5zYmRmLCB0
eXBlLCBjYXAsIHJjKTsNCj4gDQo+IEkgdGhpbmsgaXQgd291bGQgYmUgZmluZSB0byBub3QgcmV0
dXJuIGVycm9yIGhlcmUgZm9yIHRoZSBoYXJkd2FyZQ0KPiBkb21haW4sIGFuZCB0cnkgdG8gbWFz
ayB0aGUgY2FwYWJpbGl0eSBldmVuIGlmIGNsZWFudXAoKSBoYXMgZmFpbGVkPw0KPiANCj4gRm9y
IHRoZSBoYXJkd2FyZSBkb21haW4gaXQncyBsaWtlbHkgYmV0dGVyIHRvIG5vdCBmYWlsIGFuZCBh
dHRlbXB0IHRvDQo+IG1hc2ssIHJhdGhlciB0aGFuIGZhaWwgYW5kIHRoZW4gZW5kIHVwIGV4cG9z
aW5nIHRoZSBkZXZpY2Ugd2l0aG91dCBhbnkNCj4ga2luZCBvZiB2UENJIG1lZGlhdGlvbi4gIEZv
ciBkb21VIHRoZSBwcm9wb3NlZCBiZWhhdmlvciBpcyBmaW5lLg0KR290IGl0Lg0KU28gaGVyZSBz
aG91bGQgYmU/DQogICAgICAgICAgICAgICAgaWYgKCByYyAmJiAhaXNfaGFyZHdhcmVfZG9tYWlu
KHBkZXYtPmRvbWFpbikgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAg
cHJpbnRrKFhFTkxPR19FUlIgIiVwZCAlcHA6IGNsZWFuICVzIGNhcCAldSBmYWlsIHJjPSVkXG4i
LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcGRldi0+ZG9tYWluLCAmcGRldi0+c2JkZiwg
dHlwZSwgY2FwLCByYyk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByYzsNCiAgICAgICAg
ICAgICAgICB9DQpvcg0KICAgICAgICAgICAgICAgIGlmICggcmMgKQ0KICAgICAgICAgICAgICAg
IHsNCiAgICAgICAgICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19FUlIgIiVwZCAlcHA6IGNsZWFu
ICVzIGNhcCAldSBmYWlsIHJjPSVkXG4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcGRl
di0+ZG9tYWluLCAmcGRldi0+c2JkZiwgdHlwZSwgY2FwLCByYyk7DQogICAgICAgICAgICAgICAg
ICAgIGlmICggIWlzX2hhcmR3YXJlX2RvbWFpbihwZGV2LT5kb21haW4pICkNCiAgICAgICAgICAg
ICAgICAgICAgICAgIHJldHVybiByYzsNCiAgICAgICAgICAgICAgICB9DQoNCj4gDQo+IFRoYW5r
cywgUm9nZXIuDQoNCi0tIA0KQmVzdCByZWdhcmRzLA0KSmlxaWFuIENoZW4uDQo=


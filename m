Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 43BCA3348E
	for <lists+xen-devel@lfdr.de>; Mon,  3 Jun 2019 18:07:43 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hXpRZ-00022i-FF; Mon, 03 Jun 2019 16:04:17 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=fnY6=UC=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hXpRX-00021c-LF
 for xen-devel@lists.xenproject.org; Mon, 03 Jun 2019 16:04:15 +0000
X-Inumbo-ID: 3b6717de-8619-11e9-8860-e3f31b8f3fad
Received: from foss.arm.com (unknown [217.140.101.70])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTP
 id 3b6717de-8619-11e9-8860-e3f31b8f3fad;
 Mon, 03 Jun 2019 16:04:14 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.72.51.249])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id D36C680D;
 Mon,  3 Jun 2019 09:04:13 -0700 (PDT)
Received: from e108454-lin.cambridge.arm.com (e108454-lin.cambridge.arm.com
 [10.1.196.50])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 9C0A73F246;
 Mon,  3 Jun 2019 09:04:11 -0700 (PDT)
From: Julien Grall <julien.grall@arm.com>
To: xen-devel@lists.xenproject.org
Date: Mon,  3 Jun 2019 17:03:43 +0100
Message-Id: <20190603160350.29806-8-julien.grall@arm.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20190603160350.29806-1-julien.grall@arm.com>
References: <20190603160350.29806-1-julien.grall@arm.com>
Subject: [Xen-devel] [PATCH v3 07/14] xen: Introduce HAS_M2P config and use
 to protect mfn_to_gmfn call
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, andrii_anisov@epam.com,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 oleksandr_tyshchenko@epam.com, Julien Grall <julien.grall@arm.com>,
 Jan Beulich <jbeulich@suse.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

V2hpbGUgQXJtIG5ldmVyIGhhZCBhIE0yUCwgdGhlIGltcGxlbWVudGF0aW9uIG9mIG1mbl90b19n
bWZuIGlzIHByZXR0eQpib2d1cyBhcyB3ZSBkaXJlY3RseSByZXR1cm4gdGhlIE1GTiBwYXNzZWQg
aW4gcGFyYW1ldGVyLgoKVGhhbmtmdWxseSwgdGhlIHVzZSBvZiBtZm5fdG9fZ21mbiBpcyBwcmV0
dHkgbGltaXRlZCBvbiBBcm0gdG9kYXkuIFRoZXJlCmFyZSBvbmx5IDMgY2FsbGVyczoKICAgIC0g
aW9tbXVfaHdkb21faW5pdDogbWZuX3RvX2dtZm4gaXMgdXNlZCBmb3IgY3JlYXRpbmcgSU9NTVUK
ICAgIHBhZ2UtdGFibGVzIHdoZW4gdGhlIFAyTSBpcyBub3Qgc2hhcmVkIHdpdGggdGhlIElPTU1V
LiBObyBpc3N1ZXMgc28KICAgIGZhciBhcyBBcm0gZG9lcyBub3QgeWV0IHN1cHBvcnQgbm9uLXNo
YXJlZCBQMk0gY2FzZS4KICAgIC0gbWVtb3J5X2V4Y2hhbmdlOiBBcm0gY2Fubm90IG5vdCB1c2Ug
aXQgYmVjYXVzZSBzdGVhbF9wYWdlIGlzIG5vdAogICAgaW1wbGVtZW50ZWQuCiAgICAtIGdldGRv
bWFpbmluZm86IFRvb2xzdGFjayBtYXkgbWFwIHRoZSBzaGFyZWQgcGFnZS4gSXQgbG9va3MgbGlr
ZQogICAgdGhpcyBpcyBtb3N0bHkgdXNlZCBmb3IgbWFwcGluZyB0aGUgUDJNIG9mIFBWIGd1ZXN0
LiBUaGVyZWZvcmUgdGhlCiAgICBpc3N1ZSBtaWdodCBiZSBtaW5vci4KCkltcGxlbWVudGluZyB0
aGUgTTJQIG9uIEFybSBpcyBub3QgcGxhbm5lZC4gVGhlIE0yUCB3b3VsZCByZXF1aXJlIHNpZ25p
ZmljYW50CmFtb3VudCBvZiBWQSBhZGRyZXNzICh2ZXJ5IHRvdWdoIG9uIDMyLWJpdCkgdGhhdCBj
YW4gaGFyZGx5IGJlIGp1c3RpZmllZCB3aXRoCnRoZSBjdXJyZW50IHVzZSBvZiBtZm5fdG9fZ21m
bi4KICAgIC0gaW9tbXVfaHdkb21faW5pdDogbWZuX3RvX2dtZm4gaXMgdXNlZCBiZWNhdXNlIHRo
ZSBjcmVhdGluZyBvZiB0aGUKICAgIElPTU1VIHBhZ2UtdGFibGVzIGlzIGRlbGF5ZWQgdW50aWwg
dGhlIGZpcnN0IGRldmljZSBpcyBhc3NpZ25lZC4KICAgIEluIHRoZSBlbWJlZGRlZCBjYXNlLCB3
ZSB3aWxsIGtub3duIGluIG1vc3Qgb2YgdGhlIHRpbWVzIHdoYXQKICAgIGRldmljZXMgYXJlIGFz
c2lnbmVkIGR1cmluZyB0aGUgZG9tYWluIGNyZWF0aW9uLiBTbyBpdCBpcyBwb3NzaWJsZQogICAg
dG8gdGFrZSB0byBlbmFibGUgdGhlIElPTU1VIGZyb20gc3RhcnQuIFNlZSBbMV0gZm9yIHRoZSBw
YXRjaC4KICAgIC0gbWVtb3J5X2V4Y2hhbmdlOiBUaGlzIGRvZXMgbm90IHdvcmsgYW5kIEkgaGF2
ZW4ndCBzZWVuIGFueQogICAgcmVxdWVzdCBmb3IgaXQgc28gZmFyLgogICAgLSBnZXRkb21haW5p
bmZvOiBUaGUgc3RydWN0dXJlIG9uIEFybSBkb2VzIG5vdCBzZWVtIHRvIGNvbnRhaW4gYSBsb3QK
ICAgIG9mIHVzZWZ1bCBpbmZvcm1hdGlvbiBvbiBBcm0uIEl0IGlzIHVuY2xlYXIgd2hldGhlciB3
ZSB3YW50IHRvCiAgICBhbGxvdyB0aGUgdG9vbHN0YWNrIG1hcHBpbmcgaXQgb24gQXJtLgoKVGhp
cyBwYXRjaCBpbnRyb2R1Y2VzIGEgY29uZmlnIG9wdGlvbiBIQVNfTTJQIHRvIHRlbGwgd2hldGhl
ciBhbgphcmNoaXRlY3R1cmUgaW1wbGVtZW50cyB0aGUgTTJQLgogICAgLSBpb21tdV9od2RvbV9p
bml0OiBGb3Igbm93LCB3ZSByZXF1aXJlIHRoZSBNMlAgc3VwcG9ydCB3aGVuIHRoZSBJT01NVQog
ICAgaXMgbm90IHNoYXJpbmcgdGhlIFAyTS4KICAgIC0gbWVtb3J5X2V4Y2hhbmdlOiBUaGUgaHlw
ZXJjYWxsIGlzIG1hcmtlZCBhcyBub3Qgc3VwcG9ydGVkIHdoZW4gdGhlCiAgICBNMlAgZG9lcyBu
b3QgZXhpc3QuCiAgICAtIGdldGRvbWFpbmluZm86IEEgbmV3IGhlbHBlciBpcyBpbnRyb2R1Y2Vk
IHRvIHdyYXAgdGhlIGNhbGwgdG8KICAgIG1mbl90b19nZm4vbWZuX3RvX2dtZm4uIEZvciBBcm0s
IGEgZml4ZWQgdmFsdWUgd2lsbCBiZSBwcm92aWRlZCB0aGF0IHdpbGwKICAgIGZhaWwgb24gbWFw
cGluZyBpZiB1c2VkLgoKWzFdIGh0dHBzOi8vcGF0Y2h3b3JrLmtlcm5lbC5vcmcvcGF0Y2gvOTcx
OTkxMy8KClNpZ25lZC1vZmYtYnkgSnVsaWVuIEdyYWxsIDxqdWxpZW4uZ3JhbGxAYXJtLmNvbT4K
Ci0tLQoKQ2M6IG9sZWtzYW5kcl90eXNoY2hlbmtvQGVwYW0uY29tCkNjOiBhbmRyaWlfYW5pc292
QGVwYW0uY29tCgogICAgQ2hhbmdlcyBpbiB2MzoKICAgICAgICAtIE1vdmUgdGhlIEJVR19PTigp
IGluIGRvbWFpbl9zaGFyZWRfaW5mb19nZm4oKQogICAgICAgIC0gVXNlIGEgZml4ZWQgdmFsdWUg
d2hlbiB0aGUgZmllbGQgc2hhcmVkX2luZm9fZnJhbWUgaXMgbm90CiAgICAgICAgc3VwcG9ydGVk
LgogICAgICAgIC0gQWRkIGFuIEFTU0VSVF9VTlJFQUNIQUJMRSBpbiBpb21tdV9od2RvbV9pbml0
ICsgbW92ZSBwcmludGsKICAgICAgICB3aXRoaW4gdGhlICNpZmRlZi4KCiAgICBDaGFuZ2VzIGlu
IHYyOgogICAgICAgIC0gQWRkIGEgd2FybmluZyBpbiBwdWJsaWMgaGVhZGVycwogICAgICAgIC0g
Q29uc3RpZnkgbG9jYWwgdmFyaWFibGUgaW4gZG9tYWluX3NoYXJlZF9pbmZvX2dmbgogICAgICAg
IC0gSW52ZXJ0IHRoZSBuYW1pbmcgKF9kIC8gZCkgaW4gZG9tYWluX3NoYXJlZF9pbmZvX2dmbgog
ICAgICAgIC0gVXNlIC1FT1BOT1RTVVBQIHJhdGhlciB0aGFuIC1FTk9TWVMKICAgICAgICAtIFJl
d29yayBob3cgdGhlIG1lbW9yeV9leGNoYW5nZSBoeXBlcmNhbGwgaXMgcmVtb3ZlZCBmcm9tIEFy
bQotLS0KIHhlbi9hcmNoL3g4Ni9LY29uZmlnICAgICAgICAgICAgfCAgMSArCiB4ZW4vY29tbW9u
L0tjb25maWcgICAgICAgICAgICAgIHwgIDMgKysrCiB4ZW4vY29tbW9uL2RvbWN0bC5jICAgICAg
ICAgICAgIHwgIDkgKysrKysrKy0tCiB4ZW4vY29tbW9uL21lbW9yeS5jICAgICAgICAgICAgIHwg
IDQgKysrKwogeGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvaW9tbXUuYyB8ICA4ICsrKysrKystCiB4
ZW4vaW5jbHVkZS9hc20tYXJtL2RvbWFpbi5oICAgIHwgIDUgKysrKysKIHhlbi9pbmNsdWRlL3B1
YmxpYy9kb21jdGwuaCAgICAgfCAgNiArKysrKysKIHhlbi9pbmNsdWRlL3hlbi9kb21haW4uaCAg
ICAgICAgfCAxMiArKysrKysrKysrKysKIDggZmlsZXMgY2hhbmdlZCwgNDUgaW5zZXJ0aW9ucygr
KSwgMyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvS2NvbmZpZyBiL3hl
bi9hcmNoL3g4Ni9LY29uZmlnCmluZGV4IGY1MDJkNzY1YmEuLmM3OGVhZjgyMGEgMTAwNjQ0Ci0t
LSBhL3hlbi9hcmNoL3g4Ni9LY29uZmlnCisrKyBiL3hlbi9hcmNoL3g4Ni9LY29uZmlnCkBAIC0x
Nyw2ICsxNyw3IEBAIGNvbmZpZyBYODYKIAlzZWxlY3QgSEFTX0lPUE9SVFMKIAlzZWxlY3QgSEFT
X0tFWEVDCiAJc2VsZWN0IE1FTV9BQ0NFU1NfQUxXQVlTX09OCisJc2VsZWN0IEhBU19NMlAKIAlz
ZWxlY3QgSEFTX01FTV9QQUdJTkcKIAlzZWxlY3QgSEFTX01FTV9TSEFSSU5HCiAJc2VsZWN0IEhB
U19OUzE2NTUwCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL0tjb25maWcgYi94ZW4vY29tbW9uL0tj
b25maWcKaW5kZXggMTBhNzU5YjMxZi4uYWFlNGM5MzAwMiAxMDA2NDQKLS0tIGEveGVuL2NvbW1v
bi9LY29uZmlnCisrKyBiL3hlbi9jb21tb24vS2NvbmZpZwpAQCAtNjYsNiArNjYsOSBAQCBjb25m
aWcgSEFTX0dEQlNYCiBjb25maWcgSEFTX0lPUE9SVFMKIAlib29sCiAKK2NvbmZpZyBIQVNfTTJQ
CisJYm9vbAorCiBjb25maWcgTkVFRFNfTElCRUxGCiAJYm9vbAogCmRpZmYgLS1naXQgYS94ZW4v
Y29tbW9uL2RvbWN0bC5jIGIveGVuL2NvbW1vbi9kb21jdGwuYwppbmRleCBiYWRlOWE2M2IxLi41
NzQ2ZGFlYjgwIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL2RvbWN0bC5jCisrKyBiL3hlbi9jb21t
b24vZG9tY3RsLmMKQEAgLTE1NCw2ICsxNTQsNyBAQCB2b2lkIGdldGRvbWFpbmluZm8oc3RydWN0
IGRvbWFpbiAqZCwgc3RydWN0IHhlbl9kb21jdGxfZ2V0ZG9tYWluaW5mbyAqaW5mbykKICAgICB1
NjQgY3B1X3RpbWUgPSAwOwogICAgIGludCBmbGFncyA9IFhFTl9ET01JTkZfYmxvY2tlZDsKICAg
ICBzdHJ1Y3QgdmNwdV9ydW5zdGF0ZV9pbmZvIHJ1bnN0YXRlOworICAgIGdmbl90IHNoYXJlZF9p
bmZvX2ZyYW1lOwogCiAgICAgaW5mby0+ZG9tYWluID0gZC0+ZG9tYWluX2lkOwogICAgIGluZm8t
Pm1heF92Y3B1X2lkID0gWEVOX0lOVkFMSURfTUFYX1ZDUFVfSUQ7CkBAIC0yMDUsOCArMjA2LDEy
IEBAIHZvaWQgZ2V0ZG9tYWluaW5mbyhzdHJ1Y3QgZG9tYWluICpkLCBzdHJ1Y3QgeGVuX2RvbWN0
bF9nZXRkb21haW5pbmZvICppbmZvKQogICAgIGluZm8tPm91dHN0YW5kaW5nX3BhZ2VzID0gZC0+
b3V0c3RhbmRpbmdfcGFnZXM7CiAgICAgaW5mby0+c2hyX3BhZ2VzICAgICAgICAgPSBhdG9taWNf
cmVhZCgmZC0+c2hyX3BhZ2VzKTsKICAgICBpbmZvLT5wYWdlZF9wYWdlcyAgICAgICA9IGF0b21p
Y19yZWFkKCZkLT5wYWdlZF9wYWdlcyk7Ci0gICAgaW5mby0+c2hhcmVkX2luZm9fZnJhbWUgPSBt
Zm5fdG9fZ21mbihkLCB2aXJ0X3RvX21mbihkLT5zaGFyZWRfaW5mbykpOwotICAgIEJVR19PTihT
SEFSRURfTTJQKGluZm8tPnNoYXJlZF9pbmZvX2ZyYW1lKSk7CisKKyAgICBzaGFyZWRfaW5mb19m
cmFtZSA9IGRvbWFpbl9zaGFyZWRfaW5mb19nZm4oZCk7CisgICAgaWYgKCBnZm5fZXEoc2hhcmVk
X2luZm9fZnJhbWUsIElOVkFMSURfR0ZOKSApCisgICAgICAgIGluZm8tPnNoYXJlZF9pbmZvX2Zy
YW1lID0gWEVOX0lOVkFMSURfU0hBUkVEX0lORk9fRlJBTUU7CisgICAgZWxzZQorICAgICAgICBp
bmZvLT5zaGFyZWRfaW5mb19mcmFtZSA9IGdmbl94KHNoYXJlZF9pbmZvX2ZyYW1lKTsKIAogICAg
IGluZm8tPmNwdXBvb2wgPSBkLT5jcHVwb29sID8gZC0+Y3B1cG9vbC0+Y3B1cG9vbF9pZCA6IENQ
VVBPT0xJRF9OT05FOwogCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL21lbW9yeS5jIGIveGVuL2Nv
bW1vbi9tZW1vcnkuYwppbmRleCA1MjBkNmY0ODAzLi43YTk0MjUwZTUwIDEwMDY0NAotLS0gYS94
ZW4vY29tbW9uL21lbW9yeS5jCisrKyBiL3hlbi9jb21tb24vbWVtb3J5LmMKQEAgLTUwNCw2ICs1
MDQsNyBAQCBzdGF0aWMgYm9vbCBwcm9wYWdhdGVfbm9kZSh1bnNpZ25lZCBpbnQgeG1mLCB1bnNp
Z25lZCBpbnQgKm1lbWZsYWdzKQogCiBzdGF0aWMgbG9uZyBtZW1vcnlfZXhjaGFuZ2UoWEVOX0dV
RVNUX0hBTkRMRV9QQVJBTSh4ZW5fbWVtb3J5X2V4Y2hhbmdlX3QpIGFyZykKIHsKKyNpZmRlZiBD
T05GSUdfTTJQCiAgICAgc3RydWN0IHhlbl9tZW1vcnlfZXhjaGFuZ2UgZXhjaDsKICAgICBQQUdF
X0xJU1RfSEVBRChpbl9jaHVua19saXN0KTsKICAgICBQQUdFX0xJU1RfSEVBRChvdXRfY2h1bmtf
bGlzdCk7CkBAIC03OTQsNiArNzk1LDkgQEAgc3RhdGljIGxvbmcgbWVtb3J5X2V4Y2hhbmdlKFhF
Tl9HVUVTVF9IQU5ETEVfUEFSQU0oeGVuX21lbW9yeV9leGNoYW5nZV90KSBhcmcpCiAgICAgaWYg
KCBfX2NvcHlfZmllbGRfdG9fZ3Vlc3QoYXJnLCAmZXhjaCwgbnJfZXhjaGFuZ2VkKSApCiAgICAg
ICAgIHJjID0gLUVGQVVMVDsKICAgICByZXR1cm4gcmM7CisjZWxzZSAvKiAhQ09ORklHX00yUCAq
LworICAgIHJldHVybiAtRU9QTk9UU1VQUDsKKyNlbmRpZgogfQogCiBpbnQgeGVubWVtX2FkZF90
b19waHlzbWFwKHN0cnVjdCBkb21haW4gKmQsIHN0cnVjdCB4ZW5fYWRkX3RvX3BoeXNtYXAgKnhh
dHAsCmRpZmYgLS1naXQgYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5jIGIveGVuL2Ry
aXZlcnMvcGFzc3Rocm91Z2gvaW9tbXUuYwppbmRleCA3OWVjNjcxOWY1Li40MzE3NDE3NmMyIDEw
MDY0NAotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5jCisrKyBiL3hlbi9kcml2
ZXJzL3Bhc3N0aHJvdWdoL2lvbW11LmMKQEAgLTE4OCw5ICsxODgsMTAgQEAgdm9pZCBfX2h3ZG9t
X2luaXQgaW9tbXVfaHdkb21faW5pdChzdHJ1Y3QgZG9tYWluICpkKQogICAgIGhkLT5uZWVkX3N5
bmMgPSBpb21tdV9od2RvbV9zdHJpY3QgJiYgIWlvbW11X3VzZV9oYXBfcHQoZCk7CiAgICAgaWYg
KCBuZWVkX2lvbW11X3B0X3N5bmMoZCkgKQogICAgIHsKKyAgICAgICAgaW50IHJjID0gMDsKKyNp
ZmRlZiBDT05GSUdfSEFTX00yUAogICAgICAgICBzdHJ1Y3QgcGFnZV9pbmZvICpwYWdlOwogICAg
ICAgICB1bnNpZ25lZCBpbnQgaSA9IDAsIGZsdXNoX2ZsYWdzID0gMDsKLSAgICAgICAgaW50IHJj
ID0gMDsKIAogICAgICAgICBwYWdlX2xpc3RfZm9yX2VhY2ggKCBwYWdlLCAmZC0+cGFnZV9saXN0
ICkKICAgICAgICAgewpAQCAtMjIxLDYgKzIyMiwxMSBAQCB2b2lkIF9faHdkb21faW5pdCBpb21t
dV9od2RvbV9pbml0KHN0cnVjdCBkb21haW4gKmQpCiAgICAgICAgIGlmICggcmMgKQogICAgICAg
ICAgICAgcHJpbnRrKFhFTkxPR19XQVJOSU5HICJkJWQ6IElPTU1VIG1hcHBpbmcgZmFpbGVkOiAl
ZFxuIiwKICAgICAgICAgICAgICAgICAgICBkLT5kb21haW5faWQsIHJjKTsKKyNlbHNlCisgICAg
ICAgIEFTU0VSVF9VTlJFQUNIQUJMRSgpOworICAgICAgICByYyA9IC1FT1BOT1RTVVBQOworI2Vu
ZGlmCisKICAgICB9CiAKICAgICBoZC0+cGxhdGZvcm1fb3BzLT5od2RvbV9pbml0KGQpOwpkaWZm
IC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLWFybS9kb21haW4uaCBiL3hlbi9pbmNsdWRlL2FzbS1h
cm0vZG9tYWluLmgKaW5kZXggMzEyZmVjODkzMi4uZDYxYjAxODhkYSAxMDA2NDQKLS0tIGEveGVu
L2luY2x1ZGUvYXNtLWFybS9kb21haW4uaAorKysgYi94ZW4vaW5jbHVkZS9hc20tYXJtL2RvbWFp
bi5oCkBAIC0yNjcsNiArMjY3LDExIEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBmcmVlX3ZjcHVfZ3Vl
c3RfY29udGV4dChzdHJ1Y3QgdmNwdV9ndWVzdF9jb250ZXh0ICp2Z2MpCiAKIHN0YXRpYyBpbmxp
bmUgdm9pZCBhcmNoX3ZjcHVfYmxvY2soc3RydWN0IHZjcHUgKnYpIHt9CiAKK3N0YXRpYyBpbmxp
bmUgZ2ZuX3QgZG9tYWluX3NoYXJlZF9pbmZvX2dmbihzdHJ1Y3QgZG9tYWluICpkKQoreworICAg
IHJldHVybiBJTlZBTElEX0dGTjsKK30KKwogI2VuZGlmIC8qIF9fQVNNX0RPTUFJTl9IX18gKi8K
IAogLyoKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3B1YmxpYy9kb21jdGwuaCBiL3hlbi9pbmNs
dWRlL3B1YmxpYy9kb21jdGwuaAppbmRleCAxOTQ4NmQ1ZTMyLi45ZTlkMjhhOGRhIDEwMDY0NAot
LS0gYS94ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmgKKysrIGIveGVuL2luY2x1ZGUvcHVibGlj
L2RvbWN0bC5oCkBAIC0xMTgsNiArMTE4LDEyIEBAIHN0cnVjdCB4ZW5fZG9tY3RsX2dldGRvbWFp
bmluZm8gewogICAgIHVpbnQ2NF9hbGlnbmVkX3Qgb3V0c3RhbmRpbmdfcGFnZXM7CiAgICAgdWlu
dDY0X2FsaWduZWRfdCBzaHJfcGFnZXM7CiAgICAgdWludDY0X2FsaWduZWRfdCBwYWdlZF9wYWdl
czsKKyNkZWZpbmUgWEVOX0lOVkFMSURfU0hBUkVEX0lORk9fRlJBTUUgKH4odWludDY0X3QpMCkK
KyAgICAvKgorICAgICAqIEdGTiBvZiBzaGFyZWRfaW5mbyBzdHJ1Y3QuIFNvbWUgYXJjaGl0ZWN0
dXJlcyAoZS5nIEFybSkgbWF5IG5vdAorICAgICAqIHByb3ZpZGUgYSBtYXBwYWJsZSBhZGRyZXNz
IGluIHRoZSBmaWVsZC4gSW4gdGhhdCBjYXNlLCB0aGUgZmllbGQKKyAgICAgKiB3aWxsIGJlIHNl
dCB0byBYRU5fSU5WQUxJRF9TSEFSRURfSU5GT19GUkFNRS4KKyAgICAgKi8KICAgICB1aW50NjRf
YWxpZ25lZF90IHNoYXJlZF9pbmZvX2ZyYW1lOyAvKiBHTUZOIG9mIHNoYXJlZF9pbmZvIHN0cnVj
dCAqLwogICAgIHVpbnQ2NF9hbGlnbmVkX3QgY3B1X3RpbWU7CiAgICAgdWludDMyX3QgbnJfb25s
aW5lX3ZjcHVzOyAgICAvKiBOdW1iZXIgb2YgVkNQVXMgY3VycmVudGx5IG9ubGluZS4gKi8KZGlm
ZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9kb21haW4uaCBiL3hlbi9pbmNsdWRlL3hlbi9kb21h
aW4uaAppbmRleCBkMWJmYzgyZjU3Li5mNWI5ZjNlZjJhIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVk
ZS94ZW4vZG9tYWluLmgKKysrIGIveGVuL2luY2x1ZGUveGVuL2RvbWFpbi5oCkBAIC0xMTgsNCAr
MTE4LDE2IEBAIHN0cnVjdCB2bnVtYV9pbmZvIHsKIAogdm9pZCB2bnVtYV9kZXN0cm95KHN0cnVj
dCB2bnVtYV9pbmZvICp2bnVtYSk7CiAKKyNpZmRlZiBDT05GSUdfSEFTX00yUAorI2RlZmluZSBk
b21haW5fc2hhcmVkX2luZm9fZ2ZuKGQpICh7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwK
KyAgICBjb25zdCBzdHJ1Y3QgZG9tYWluICpkXyA9IChkKTsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBcCisgICAgZ2ZuX3QgZ2ZuXzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgXAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKKyAgICBnZm5fID0gbWZuX3RvX2dmbihkXywg
X21mbihfX3ZpcnRfdG9fbWZuKGRfLT5zaGFyZWRfaW5mbykpKTtcCisgICAgQlVHX09OKFNIQVJF
RF9NMlAoZ2ZuX3goZ2ZuXykpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAorICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFwKKyAgICBnZm5fOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBcCit9KQorI2VuZGlmCisKICNlbmRpZiAvKiBfX1hFTl9ET01BSU5fSF9fICov
Ci0tIAoyLjExLjAKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9y
ZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

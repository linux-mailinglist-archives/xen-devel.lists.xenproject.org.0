Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 9F87FAA1E2
	for <lists+xen-devel@lfdr.de>; Thu,  5 Sep 2019 13:44:11 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i5q8C-0001yV-RQ; Thu, 05 Sep 2019 11:40:52 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=C2sq=XA=bombadil.srs.infradead.org=batv+6d116066f5ba208d77c0+5856+infradead.org+hch@srs-us1.protection.inumbo.net>)
 id 1i5q8A-0001yC-Ur
 for xen-devel@lists.xenproject.org; Thu, 05 Sep 2019 11:40:50 +0000
X-Inumbo-ID: 01f06584-cfd2-11e9-b299-bc764e2007e4
Received: from bombadil.infradead.org (unknown [2607:7c80:54:e::133])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 01f06584-cfd2-11e9-b299-bc764e2007e4;
 Thu, 05 Sep 2019 11:40:49 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
 d=infradead.org; s=bombadil.20170209; h=Content-Transfer-Encoding:
 MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From:Sender
 :Reply-To:Content-Type:Content-ID:Content-Description:Resent-Date:Resent-From
 :Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:
 List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=EWNScfWDMyrvxl4YkL1REfmmjq71emAlpbDmA+Ece6c=; b=YAz6TZlYaFH5Yk7mw92FLMNIfT
 h3wo5Y5MVVeIdU/4jJtQ8nPvW/Qgbe0iSreVyQ2tweXEWN70cegq4neGZHLR9ntvmNH8T8nBQrcXG
 ngdapn6wkQfjTbEm+0rts5ZSTdDRsamSS5disgDUBY5gEYl5kUvaSpYKMC8KaxmoxU7s3qTSsfzDp
 fVvYmWUyvLlRzPx+0QUWiG4S2TwsTqFicO3toar4abGbKAyXlLSzN9H5YO2xnTqZ8Hd2lpL61mOG5
 uizMAGRTGQ9hA9Vzvh4oa20Pdx6hEzMW80Dsg7bJnkPIWiLrM7Ox6W+Y7RAS7BagJyMTfklMy8zk0
 ShFeYJeA==;
Received: from 213-225-38-191.nat.highway.a1.net ([213.225.38.191]
 helo=localhost)
 by bombadil.infradead.org with esmtpsa (Exim 4.92 #3 (Red Hat Linux))
 id 1i5q87-0004qN-0k; Thu, 05 Sep 2019 11:40:47 +0000
From: Christoph Hellwig <hch@lst.de>
To: Stefano Stabellini <sstabellini@kernel.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>, gross@suse.com,
 boris.ostrovsky@oracle.com
Date: Thu,  5 Sep 2019 13:33:59 +0200
Message-Id: <20190905113408.3104-3-hch@lst.de>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190905113408.3104-1-hch@lst.de>
References: <20190905113408.3104-1-hch@lst.de>
MIME-Version: 1.0
X-SRS-Rewrite: SMTP reverse-path rewritten from <hch@infradead.org> by
 bombadil.infradead.org. See http://www.infradead.org/rpr.html
Subject: [Xen-devel] [PATCH 02/11] xen/arm: consolidate page-coherent.h
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: xen-devel@lists.xenproject.org, iommu@lists.linux-foundation.org,
 x86@kernel.org, linux-kernel@vger.kernel.org,
 linux-arm-kernel@lists.infradead.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

U2hhcmVkIHRoZSBkdXBsaWNhdGUgYXJtL2FybTY0IGNvZGUgaW4gaW5jbHVkZS94ZW4vYXJtL3Bh
Z2UtY29oZXJlbnQuaC4KClNpZ25lZC1vZmYtYnk6IENocmlzdG9waCBIZWxsd2lnIDxoY2hAbHN0
LmRlPgotLS0KIGFyY2gvYXJtL2luY2x1ZGUvYXNtL3hlbi9wYWdlLWNvaGVyZW50LmggICB8IDc1
IC0tLS0tLS0tLS0tLS0tLS0tLS0tCiBhcmNoL2FybTY0L2luY2x1ZGUvYXNtL3hlbi9wYWdlLWNv
aGVyZW50LmggfCA3NSAtLS0tLS0tLS0tLS0tLS0tLS0tLQogaW5jbHVkZS94ZW4vYXJtL3BhZ2Ut
Y29oZXJlbnQuaCAgICAgICAgICAgIHwgODAgKysrKysrKysrKysrKysrKysrKysrKwogMyBmaWxl
cyBjaGFuZ2VkLCA4MCBpbnNlcnRpb25zKCspLCAxNTAgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0
IGEvYXJjaC9hcm0vaW5jbHVkZS9hc20veGVuL3BhZ2UtY29oZXJlbnQuaCBiL2FyY2gvYXJtL2lu
Y2x1ZGUvYXNtL3hlbi9wYWdlLWNvaGVyZW50LmgKaW5kZXggNjAyYWMwMmYxNTRjLi4yN2U5ODQ5
Nzc0MDIgMTAwNjQ0Ci0tLSBhL2FyY2gvYXJtL2luY2x1ZGUvYXNtL3hlbi9wYWdlLWNvaGVyZW50
LmgKKysrIGIvYXJjaC9hcm0vaW5jbHVkZS9hc20veGVuL3BhZ2UtY29oZXJlbnQuaApAQCAtMSw3
NyArMSwyIEBACiAvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCAqLwotI2lmbmRl
ZiBfQVNNX0FSTV9YRU5fUEFHRV9DT0hFUkVOVF9ICi0jZGVmaW5lIF9BU01fQVJNX1hFTl9QQUdF
X0NPSEVSRU5UX0gKLQotI2luY2x1ZGUgPGxpbnV4L2RtYS1tYXBwaW5nLmg+Ci0jaW5jbHVkZSA8
YXNtL3BhZ2UuaD4KICNpbmNsdWRlIDx4ZW4vYXJtL3BhZ2UtY29oZXJlbnQuaD4KLQotc3RhdGlj
IGlubGluZSB2b2lkICp4ZW5fYWxsb2NfY29oZXJlbnRfcGFnZXMoc3RydWN0IGRldmljZSAqaHdk
ZXYsIHNpemVfdCBzaXplLAotCQlkbWFfYWRkcl90ICpkbWFfaGFuZGxlLCBnZnBfdCBmbGFncywg
dW5zaWduZWQgbG9uZyBhdHRycykKLXsKLQlyZXR1cm4gZG1hX2RpcmVjdF9hbGxvYyhod2Rldiwg
c2l6ZSwgZG1hX2hhbmRsZSwgZmxhZ3MsIGF0dHJzKTsKLX0KLQotc3RhdGljIGlubGluZSB2b2lk
IHhlbl9mcmVlX2NvaGVyZW50X3BhZ2VzKHN0cnVjdCBkZXZpY2UgKmh3ZGV2LCBzaXplX3Qgc2l6
ZSwKLQkJdm9pZCAqY3B1X2FkZHIsIGRtYV9hZGRyX3QgZG1hX2hhbmRsZSwgdW5zaWduZWQgbG9u
ZyBhdHRycykKLXsKLQlkbWFfZGlyZWN0X2ZyZWUoaHdkZXYsIHNpemUsIGNwdV9hZGRyLCBkbWFf
aGFuZGxlLCBhdHRycyk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCB4ZW5fZG1hX3N5bmNfc2lu
Z2xlX2Zvcl9jcHUoc3RydWN0IGRldmljZSAqaHdkZXYsCi0JCWRtYV9hZGRyX3QgaGFuZGxlLCBz
aXplX3Qgc2l6ZSwgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyKQotewotCXVuc2lnbmVkIGxv
bmcgcGZuID0gUEZOX0RPV04oaGFuZGxlKTsKLQotCWlmIChwZm5fdmFsaWQocGZuKSkKLQkJZG1h
X2RpcmVjdF9zeW5jX3NpbmdsZV9mb3JfY3B1KGh3ZGV2LCBoYW5kbGUsIHNpemUsIGRpcik7Ci0J
ZWxzZQotCQlfX3hlbl9kbWFfc3luY19zaW5nbGVfZm9yX2NwdShod2RldiwgaGFuZGxlLCBzaXpl
LCBkaXIpOwotfQotCi1zdGF0aWMgaW5saW5lIHZvaWQgeGVuX2RtYV9zeW5jX3NpbmdsZV9mb3Jf
ZGV2aWNlKHN0cnVjdCBkZXZpY2UgKmh3ZGV2LAotCQlkbWFfYWRkcl90IGhhbmRsZSwgc2l6ZV90
IHNpemUsIGVudW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpcikKLXsKLQl1bnNpZ25lZCBsb25nIHBm
biA9IFBGTl9ET1dOKGhhbmRsZSk7Ci0JaWYgKHBmbl92YWxpZChwZm4pKQotCQlkbWFfZGlyZWN0
X3N5bmNfc2luZ2xlX2Zvcl9kZXZpY2UoaHdkZXYsIGhhbmRsZSwgc2l6ZSwgZGlyKTsKLQllbHNl
Ci0JCV9feGVuX2RtYV9zeW5jX3NpbmdsZV9mb3JfZGV2aWNlKGh3ZGV2LCBoYW5kbGUsIHNpemUs
IGRpcik7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCB4ZW5fZG1hX21hcF9wYWdlKHN0cnVjdCBk
ZXZpY2UgKmh3ZGV2LCBzdHJ1Y3QgcGFnZSAqcGFnZSwKLQkgICAgIGRtYV9hZGRyX3QgZGV2X2Fk
ZHIsIHVuc2lnbmVkIGxvbmcgb2Zmc2V0LCBzaXplX3Qgc2l6ZSwKLQkgICAgIGVudW0gZG1hX2Rh
dGFfZGlyZWN0aW9uIGRpciwgdW5zaWduZWQgbG9uZyBhdHRycykKLXsKLQl1bnNpZ25lZCBsb25n
IHBhZ2VfcGZuID0gcGFnZV90b194ZW5fcGZuKHBhZ2UpOwotCXVuc2lnbmVkIGxvbmcgZGV2X3Bm
biA9IFhFTl9QRk5fRE9XTihkZXZfYWRkcik7Ci0JdW5zaWduZWQgbG9uZyBjb21wb3VuZF9wYWdl
cyA9Ci0JCSgxPDxjb21wb3VuZF9vcmRlcihwYWdlKSkgKiBYRU5fUEZOX1BFUl9QQUdFOwotCWJv
b2wgbG9jYWwgPSAocGFnZV9wZm4gPD0gZGV2X3BmbikgJiYKLQkJKGRldl9wZm4gLSBwYWdlX3Bm
biA8IGNvbXBvdW5kX3BhZ2VzKTsKLQotCWlmIChsb2NhbCkKLQkJZG1hX2RpcmVjdF9tYXBfcGFn
ZShod2RldiwgcGFnZSwgb2Zmc2V0LCBzaXplLCBkaXIsIGF0dHJzKTsKLQllbHNlCi0JCV9feGVu
X2RtYV9tYXBfcGFnZShod2RldiwgcGFnZSwgZGV2X2FkZHIsIG9mZnNldCwgc2l6ZSwgZGlyLCBh
dHRycyk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCB4ZW5fZG1hX3VubWFwX3BhZ2Uoc3RydWN0
IGRldmljZSAqaHdkZXYsIGRtYV9hZGRyX3QgaGFuZGxlLAotCQlzaXplX3Qgc2l6ZSwgZW51bSBk
bWFfZGF0YV9kaXJlY3Rpb24gZGlyLCB1bnNpZ25lZCBsb25nIGF0dHJzKQotewotCXVuc2lnbmVk
IGxvbmcgcGZuID0gUEZOX0RPV04oaGFuZGxlKTsKLQkvKgotCSAqIERvbTAgaXMgbWFwcGVkIDE6
MSwgd2hpbGUgdGhlIExpbnV4IHBhZ2UgY2FuIGJlIHNwYW5uZWQgYWNjcm9zcwotCSAqIG11bHRp
cGxlIFhlbiBwYWdlLCBpdCdzIG5vdCBwb3NzaWJsZSB0byBoYXZlIGEgbWl4IG9mIGxvY2FsIGFu
ZAotCSAqIGZvcmVpZ24gWGVuIHBhZ2UuIERvbTAgaXMgbWFwcGVkIDE6MSwgc28gY2FsbGluZyBw
Zm5fdmFsaWQgb24gYQotCSAqIGZvcmVpZ24gbWZuIHdpbGwgYWx3YXlzIHJldHVybiBmYWxzZS4g
SWYgdGhlIHBhZ2UgaXMgbG9jYWwgd2UgY2FuCi0JICogc2FmZWx5IGNhbGwgdGhlIG5hdGl2ZSBk
bWFfb3BzIGZ1bmN0aW9uLCBvdGhlcndpc2Ugd2UgY2FsbCB0aGUgeGVuCi0JICogc3BlY2lmaWMg
ZnVuY3Rpb24uCi0JICovCi0JaWYgKHBmbl92YWxpZChwZm4pKQotCQlkbWFfZGlyZWN0X3VubWFw
X3BhZ2UoaHdkZXYsIGhhbmRsZSwgc2l6ZSwgZGlyLCBhdHRycyk7Ci0JZWxzZQotCQlfX3hlbl9k
bWFfdW5tYXBfcGFnZShod2RldiwgaGFuZGxlLCBzaXplLCBkaXIsIGF0dHJzKTsKLX0KLQotI2Vu
ZGlmIC8qIF9BU01fQVJNX1hFTl9QQUdFX0NPSEVSRU5UX0ggKi8KZGlmZiAtLWdpdCBhL2FyY2gv
YXJtNjQvaW5jbHVkZS9hc20veGVuL3BhZ2UtY29oZXJlbnQuaCBiL2FyY2gvYXJtNjQvaW5jbHVk
ZS9hc20veGVuL3BhZ2UtY29oZXJlbnQuaAppbmRleCBkODhlNTZiOTBiOTMuLjI3ZTk4NDk3NzQw
MiAxMDA2NDQKLS0tIGEvYXJjaC9hcm02NC9pbmNsdWRlL2FzbS94ZW4vcGFnZS1jb2hlcmVudC5o
CisrKyBiL2FyY2gvYXJtNjQvaW5jbHVkZS9hc20veGVuL3BhZ2UtY29oZXJlbnQuaApAQCAtMSw3
NyArMSwyIEBACiAvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCAqLwotI2lmbmRl
ZiBfQVNNX0FSTTY0X1hFTl9QQUdFX0NPSEVSRU5UX0gKLSNkZWZpbmUgX0FTTV9BUk02NF9YRU5f
UEFHRV9DT0hFUkVOVF9ICi0KLSNpbmNsdWRlIDxsaW51eC9kbWEtbWFwcGluZy5oPgotI2luY2x1
ZGUgPGFzbS9wYWdlLmg+CiAjaW5jbHVkZSA8eGVuL2FybS9wYWdlLWNvaGVyZW50Lmg+Ci0KLXN0
YXRpYyBpbmxpbmUgdm9pZCAqeGVuX2FsbG9jX2NvaGVyZW50X3BhZ2VzKHN0cnVjdCBkZXZpY2Ug
Kmh3ZGV2LCBzaXplX3Qgc2l6ZSwKLQkJZG1hX2FkZHJfdCAqZG1hX2hhbmRsZSwgZ2ZwX3QgZmxh
Z3MsIHVuc2lnbmVkIGxvbmcgYXR0cnMpCi17Ci0JcmV0dXJuIGRtYV9kaXJlY3RfYWxsb2MoaHdk
ZXYsIHNpemUsIGRtYV9oYW5kbGUsIGZsYWdzLCBhdHRycyk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUg
dm9pZCB4ZW5fZnJlZV9jb2hlcmVudF9wYWdlcyhzdHJ1Y3QgZGV2aWNlICpod2Rldiwgc2l6ZV90
IHNpemUsCi0JCXZvaWQgKmNwdV9hZGRyLCBkbWFfYWRkcl90IGRtYV9oYW5kbGUsIHVuc2lnbmVk
IGxvbmcgYXR0cnMpCi17Ci0JZG1hX2RpcmVjdF9mcmVlKGh3ZGV2LCBzaXplLCBjcHVfYWRkciwg
ZG1hX2hhbmRsZSwgYXR0cnMpOwotfQotCi1zdGF0aWMgaW5saW5lIHZvaWQgeGVuX2RtYV9zeW5j
X3NpbmdsZV9mb3JfY3B1KHN0cnVjdCBkZXZpY2UgKmh3ZGV2LAotCQlkbWFfYWRkcl90IGhhbmRs
ZSwgc2l6ZV90IHNpemUsIGVudW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpcikKLXsKLQl1bnNpZ25l
ZCBsb25nIHBmbiA9IFBGTl9ET1dOKGhhbmRsZSk7Ci0KLQlpZiAocGZuX3ZhbGlkKHBmbikpCi0J
CWRtYV9kaXJlY3Rfc3luY19zaW5nbGVfZm9yX2NwdShod2RldiwgaGFuZGxlLCBzaXplLCBkaXIp
OwotCWVsc2UKLQkJX194ZW5fZG1hX3N5bmNfc2luZ2xlX2Zvcl9jcHUoaHdkZXYsIGhhbmRsZSwg
c2l6ZSwgZGlyKTsKLX0KLQotc3RhdGljIGlubGluZSB2b2lkIHhlbl9kbWFfc3luY19zaW5nbGVf
Zm9yX2RldmljZShzdHJ1Y3QgZGV2aWNlICpod2RldiwKLQkJZG1hX2FkZHJfdCBoYW5kbGUsIHNp
emVfdCBzaXplLCBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIpCi17Ci0JdW5zaWduZWQgbG9u
ZyBwZm4gPSBQRk5fRE9XTihoYW5kbGUpOwotCWlmIChwZm5fdmFsaWQocGZuKSkKLQkJZG1hX2Rp
cmVjdF9zeW5jX3NpbmdsZV9mb3JfZGV2aWNlKGh3ZGV2LCBoYW5kbGUsIHNpemUsIGRpcik7Ci0J
ZWxzZQotCQlfX3hlbl9kbWFfc3luY19zaW5nbGVfZm9yX2RldmljZShod2RldiwgaGFuZGxlLCBz
aXplLCBkaXIpOwotfQotCi1zdGF0aWMgaW5saW5lIHZvaWQgeGVuX2RtYV9tYXBfcGFnZShzdHJ1
Y3QgZGV2aWNlICpod2Rldiwgc3RydWN0IHBhZ2UgKnBhZ2UsCi0JICAgICBkbWFfYWRkcl90IGRl
dl9hZGRyLCB1bnNpZ25lZCBsb25nIG9mZnNldCwgc2l6ZV90IHNpemUsCi0JICAgICBlbnVtIGRt
YV9kYXRhX2RpcmVjdGlvbiBkaXIsIHVuc2lnbmVkIGxvbmcgYXR0cnMpCi17Ci0JdW5zaWduZWQg
bG9uZyBwYWdlX3BmbiA9IHBhZ2VfdG9feGVuX3BmbihwYWdlKTsKLQl1bnNpZ25lZCBsb25nIGRl
dl9wZm4gPSBYRU5fUEZOX0RPV04oZGV2X2FkZHIpOwotCXVuc2lnbmVkIGxvbmcgY29tcG91bmRf
cGFnZXMgPQotCQkoMTw8Y29tcG91bmRfb3JkZXIocGFnZSkpICogWEVOX1BGTl9QRVJfUEFHRTsK
LQlib29sIGxvY2FsID0gKHBhZ2VfcGZuIDw9IGRldl9wZm4pICYmCi0JCShkZXZfcGZuIC0gcGFn
ZV9wZm4gPCBjb21wb3VuZF9wYWdlcyk7Ci0KLQlpZiAobG9jYWwpCi0JCWRtYV9kaXJlY3RfbWFw
X3BhZ2UoaHdkZXYsIHBhZ2UsIG9mZnNldCwgc2l6ZSwgZGlyLCBhdHRycyk7Ci0JZWxzZQotCQlf
X3hlbl9kbWFfbWFwX3BhZ2UoaHdkZXYsIHBhZ2UsIGRldl9hZGRyLCBvZmZzZXQsIHNpemUsIGRp
ciwgYXR0cnMpOwotfQotCi1zdGF0aWMgaW5saW5lIHZvaWQgeGVuX2RtYV91bm1hcF9wYWdlKHN0
cnVjdCBkZXZpY2UgKmh3ZGV2LCBkbWFfYWRkcl90IGhhbmRsZSwKLQkJc2l6ZV90IHNpemUsIGVu
dW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpciwgdW5zaWduZWQgbG9uZyBhdHRycykKLXsKLQl1bnNp
Z25lZCBsb25nIHBmbiA9IFBGTl9ET1dOKGhhbmRsZSk7Ci0JLyoKLQkgKiBEb20wIGlzIG1hcHBl
ZCAxOjEsIHdoaWxlIHRoZSBMaW51eCBwYWdlIGNhbiBiZSBzcGFubmVkIGFjY3Jvc3MKLQkgKiBt
dWx0aXBsZSBYZW4gcGFnZSwgaXQncyBub3QgcG9zc2libGUgdG8gaGF2ZSBhIG1peCBvZiBsb2Nh
bCBhbmQKLQkgKiBmb3JlaWduIFhlbiBwYWdlLiBEb20wIGlzIG1hcHBlZCAxOjEsIHNvIGNhbGxp
bmcgcGZuX3ZhbGlkIG9uIGEKLQkgKiBmb3JlaWduIG1mbiB3aWxsIGFsd2F5cyByZXR1cm4gZmFs
c2UuIElmIHRoZSBwYWdlIGlzIGxvY2FsIHdlIGNhbgotCSAqIHNhZmVseSBjYWxsIHRoZSBuYXRp
dmUgZG1hX29wcyBmdW5jdGlvbiwgb3RoZXJ3aXNlIHdlIGNhbGwgdGhlIHhlbgotCSAqIHNwZWNp
ZmljIGZ1bmN0aW9uLgotCSAqLwotCWlmIChwZm5fdmFsaWQocGZuKSkKLQkJZG1hX2RpcmVjdF91
bm1hcF9wYWdlKGh3ZGV2LCBoYW5kbGUsIHNpemUsIGRpciwgYXR0cnMpOwotCWVsc2UKLQkJX194
ZW5fZG1hX3VubWFwX3BhZ2UoaHdkZXYsIGhhbmRsZSwgc2l6ZSwgZGlyLCBhdHRycyk7Ci19Ci0K
LSNlbmRpZiAvKiBfQVNNX0FSTTY0X1hFTl9QQUdFX0NPSEVSRU5UX0ggKi8KZGlmZiAtLWdpdCBh
L2luY2x1ZGUveGVuL2FybS9wYWdlLWNvaGVyZW50LmggYi9pbmNsdWRlL3hlbi9hcm0vcGFnZS1j
b2hlcmVudC5oCmluZGV4IDJjYTkxNjRhNzliZi4uYTg0MGQ2OTQ5YTg3IDEwMDY0NAotLS0gYS9p
bmNsdWRlL3hlbi9hcm0vcGFnZS1jb2hlcmVudC5oCisrKyBiL2luY2x1ZGUveGVuL2FybS9wYWdl
LWNvaGVyZW50LmgKQEAgLTIsNiArMiw5IEBACiAjaWZuZGVmIF9YRU5fQVJNX1BBR0VfQ09IRVJF
TlRfSAogI2RlZmluZSBfWEVOX0FSTV9QQUdFX0NPSEVSRU5UX0gKIAorI2luY2x1ZGUgPGxpbnV4
L2RtYS1tYXBwaW5nLmg+CisjaW5jbHVkZSA8YXNtL3BhZ2UuaD4KKwogdm9pZCBfX3hlbl9kbWFf
bWFwX3BhZ2Uoc3RydWN0IGRldmljZSAqaHdkZXYsIHN0cnVjdCBwYWdlICpwYWdlLAogCSAgICAg
ZG1hX2FkZHJfdCBkZXZfYWRkciwgdW5zaWduZWQgbG9uZyBvZmZzZXQsIHNpemVfdCBzaXplLAog
CSAgICAgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyLCB1bnNpZ25lZCBsb25nIGF0dHJzKTsK
QEAgLTEzLDQgKzE2LDgxIEBAIHZvaWQgX194ZW5fZG1hX3N5bmNfc2luZ2xlX2Zvcl9jcHUoc3Ry
dWN0IGRldmljZSAqaHdkZXYsCiB2b2lkIF9feGVuX2RtYV9zeW5jX3NpbmdsZV9mb3JfZGV2aWNl
KHN0cnVjdCBkZXZpY2UgKmh3ZGV2LAogCQlkbWFfYWRkcl90IGhhbmRsZSwgc2l6ZV90IHNpemUs
IGVudW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpcik7CiAKK3N0YXRpYyBpbmxpbmUgdm9pZCAqeGVu
X2FsbG9jX2NvaGVyZW50X3BhZ2VzKHN0cnVjdCBkZXZpY2UgKmh3ZGV2LCBzaXplX3Qgc2l6ZSwK
KwkJZG1hX2FkZHJfdCAqZG1hX2hhbmRsZSwgZ2ZwX3QgZmxhZ3MsIHVuc2lnbmVkIGxvbmcgYXR0
cnMpCit7CisJcmV0dXJuIGRtYV9kaXJlY3RfYWxsb2MoaHdkZXYsIHNpemUsIGRtYV9oYW5kbGUs
IGZsYWdzLCBhdHRycyk7Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZCB4ZW5fZnJlZV9jb2hlcmVu
dF9wYWdlcyhzdHJ1Y3QgZGV2aWNlICpod2Rldiwgc2l6ZV90IHNpemUsCisJCXZvaWQgKmNwdV9h
ZGRyLCBkbWFfYWRkcl90IGRtYV9oYW5kbGUsIHVuc2lnbmVkIGxvbmcgYXR0cnMpCit7CisJZG1h
X2RpcmVjdF9mcmVlKGh3ZGV2LCBzaXplLCBjcHVfYWRkciwgZG1hX2hhbmRsZSwgYXR0cnMpOwor
fQorCitzdGF0aWMgaW5saW5lIHZvaWQgeGVuX2RtYV9zeW5jX3NpbmdsZV9mb3JfY3B1KHN0cnVj
dCBkZXZpY2UgKmh3ZGV2LAorCQlkbWFfYWRkcl90IGhhbmRsZSwgc2l6ZV90IHNpemUsIGVudW0g
ZG1hX2RhdGFfZGlyZWN0aW9uIGRpcikKK3sKKwl1bnNpZ25lZCBsb25nIHBmbiA9IFBGTl9ET1dO
KGhhbmRsZSk7CisKKwlpZiAocGZuX3ZhbGlkKHBmbikpCisJCWRtYV9kaXJlY3Rfc3luY19zaW5n
bGVfZm9yX2NwdShod2RldiwgaGFuZGxlLCBzaXplLCBkaXIpOworCWVsc2UKKwkJX194ZW5fZG1h
X3N5bmNfc2luZ2xlX2Zvcl9jcHUoaHdkZXYsIGhhbmRsZSwgc2l6ZSwgZGlyKTsKK30KKworc3Rh
dGljIGlubGluZSB2b2lkIHhlbl9kbWFfc3luY19zaW5nbGVfZm9yX2RldmljZShzdHJ1Y3QgZGV2
aWNlICpod2RldiwKKwkJZG1hX2FkZHJfdCBoYW5kbGUsIHNpemVfdCBzaXplLCBlbnVtIGRtYV9k
YXRhX2RpcmVjdGlvbiBkaXIpCit7CisJdW5zaWduZWQgbG9uZyBwZm4gPSBQRk5fRE9XTihoYW5k
bGUpOworCWlmIChwZm5fdmFsaWQocGZuKSkKKwkJZG1hX2RpcmVjdF9zeW5jX3NpbmdsZV9mb3Jf
ZGV2aWNlKGh3ZGV2LCBoYW5kbGUsIHNpemUsIGRpcik7CisJZWxzZQorCQlfX3hlbl9kbWFfc3lu
Y19zaW5nbGVfZm9yX2RldmljZShod2RldiwgaGFuZGxlLCBzaXplLCBkaXIpOworfQorCitzdGF0
aWMgaW5saW5lIHZvaWQgeGVuX2RtYV9tYXBfcGFnZShzdHJ1Y3QgZGV2aWNlICpod2Rldiwgc3Ry
dWN0IHBhZ2UgKnBhZ2UsCisJICAgICBkbWFfYWRkcl90IGRldl9hZGRyLCB1bnNpZ25lZCBsb25n
IG9mZnNldCwgc2l6ZV90IHNpemUsCisJICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIs
IHVuc2lnbmVkIGxvbmcgYXR0cnMpCit7CisJdW5zaWduZWQgbG9uZyBwYWdlX3BmbiA9IHBhZ2Vf
dG9feGVuX3BmbihwYWdlKTsKKwl1bnNpZ25lZCBsb25nIGRldl9wZm4gPSBYRU5fUEZOX0RPV04o
ZGV2X2FkZHIpOworCXVuc2lnbmVkIGxvbmcgY29tcG91bmRfcGFnZXMgPQorCQkoMTw8Y29tcG91
bmRfb3JkZXIocGFnZSkpICogWEVOX1BGTl9QRVJfUEFHRTsKKwlib29sIGxvY2FsID0gKHBhZ2Vf
cGZuIDw9IGRldl9wZm4pICYmCisJCShkZXZfcGZuIC0gcGFnZV9wZm4gPCBjb21wb3VuZF9wYWdl
cyk7CisKKwkvKgorCSAqIERvbTAgaXMgbWFwcGVkIDE6MSwgd2hpbGUgdGhlIExpbnV4IHBhZ2Ug
Y2FuIHNwYW4gYWNyb3NzCisJICogbXVsdGlwbGUgWGVuIHBhZ2VzLCBpdCdzIG5vdCBwb3NzaWJs
ZSBmb3IgaXQgdG8gY29udGFpbiBhCisJICogbWl4IG9mIGxvY2FsIGFuZCBmb3JlaWduIFhlbiBw
YWdlcy4gU28gaWYgdGhlIGZpcnN0IHhlbl9wZm4KKwkgKiA9PSBtZm4gdGhlIHBhZ2UgaXMgbG9j
YWwgb3RoZXJ3aXNlIGl0J3MgYSBmb3JlaWduIHBhZ2UKKwkgKiBncmFudC1tYXBwZWQgaW4gZG9t
MC4gSWYgdGhlIHBhZ2UgaXMgbG9jYWwgd2UgY2FuIHNhZmVseQorCSAqIGNhbGwgdGhlIG5hdGl2
ZSBkbWFfb3BzIGZ1bmN0aW9uLCBvdGhlcndpc2Ugd2UgY2FsbCB0aGUgeGVuCisJICogc3BlY2lm
aWMgZnVuY3Rpb24uCisJICovCisJaWYgKGxvY2FsKQorCQlkbWFfZGlyZWN0X21hcF9wYWdlKGh3
ZGV2LCBwYWdlLCBvZmZzZXQsIHNpemUsIGRpciwgYXR0cnMpOworCWVsc2UKKwkJX194ZW5fZG1h
X21hcF9wYWdlKGh3ZGV2LCBwYWdlLCBkZXZfYWRkciwgb2Zmc2V0LCBzaXplLCBkaXIsIGF0dHJz
KTsKK30KKworc3RhdGljIGlubGluZSB2b2lkIHhlbl9kbWFfdW5tYXBfcGFnZShzdHJ1Y3QgZGV2
aWNlICpod2RldiwgZG1hX2FkZHJfdCBoYW5kbGUsCisJCXNpemVfdCBzaXplLCBlbnVtIGRtYV9k
YXRhX2RpcmVjdGlvbiBkaXIsIHVuc2lnbmVkIGxvbmcgYXR0cnMpCit7CisJdW5zaWduZWQgbG9u
ZyBwZm4gPSBQRk5fRE9XTihoYW5kbGUpOworCS8qCisJICogRG9tMCBpcyBtYXBwZWQgMToxLCB3
aGlsZSB0aGUgTGludXggcGFnZSBjYW4gYmUgc3Bhbm5lZCBhY2Nyb3NzCisJICogbXVsdGlwbGUg
WGVuIHBhZ2UsIGl0J3Mgbm90IHBvc3NpYmxlIHRvIGhhdmUgYSBtaXggb2YgbG9jYWwgYW5kCisJ
ICogZm9yZWlnbiBYZW4gcGFnZS4gRG9tMCBpcyBtYXBwZWQgMToxLCBzbyBjYWxsaW5nIHBmbl92
YWxpZCBvbiBhCisJICogZm9yZWlnbiBtZm4gd2lsbCBhbHdheXMgcmV0dXJuIGZhbHNlLiBJZiB0
aGUgcGFnZSBpcyBsb2NhbCB3ZSBjYW4KKwkgKiBzYWZlbHkgY2FsbCB0aGUgbmF0aXZlIGRtYV9v
cHMgZnVuY3Rpb24sIG90aGVyd2lzZSB3ZSBjYWxsIHRoZSB4ZW4KKwkgKiBzcGVjaWZpYyBmdW5j
dGlvbi4KKwkgKi8KKwlpZiAocGZuX3ZhbGlkKHBmbikpCisJCWRtYV9kaXJlY3RfdW5tYXBfcGFn
ZShod2RldiwgaGFuZGxlLCBzaXplLCBkaXIsIGF0dHJzKTsKKwllbHNlCisJCV9feGVuX2RtYV91
bm1hcF9wYWdlKGh3ZGV2LCBoYW5kbGUsIHNpemUsIGRpciwgYXR0cnMpOworfQorCiAjZW5kaWYg
LyogX1hFTl9BUk1fUEFHRV9DT0hFUkVOVF9IICovCi0tIAoyLjIwLjEKCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0
Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qu
b3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id DC437182B3A
	for <lists+xen-devel@lfdr.de>; Thu, 12 Mar 2020 09:31:36 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jCJCz-0004vU-1U; Thu, 12 Mar 2020 08:28:49 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=FfMj=45=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1jCJCx-0004v9-RK
 for xen-devel@lists.xenproject.org; Thu, 12 Mar 2020 08:28:47 +0000
X-Inumbo-ID: 76d89565-643b-11ea-b127-12813bfff9fa
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 76d89565-643b-11ea-b127-12813bfff9fa;
 Thu, 12 Mar 2020 08:28:36 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id 019BBB23A;
 Thu, 12 Mar 2020 08:28:34 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Thu, 12 Mar 2020 09:28:30 +0100
Message-Id: <20200312082831.22280-4-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20200312082831.22280-1-jgross@suse.com>
References: <20200312082831.22280-1-jgross@suse.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v5 3/4] xen/rcu: add assertions to debug build
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 George Dunlap <george.dunlap@citrix.com>, Jan Beulich <jbeulich@suse.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

WGVuJ3MgUkNVIGltcGxlbWVudGF0aW9uIHJlbGllcyBvbiBubyBzb2Z0aXJxIGhhbmRsaW5nIHRh
a2luZyBwbGFjZQp3aGlsZSBiZWluZyBpbiBhIFJDVSBjcml0aWNhbCBzZWN0aW9uLiBBZGQgQVNT
RVJUKClzIGluIGRlYnVnIGJ1aWxkcwppbiBvcmRlciB0byBjYXRjaCBhbnkgdmlvbGF0aW9ucy4K
CkZvciB0aGF0IHB1cnBvc2UgbW9kaWZ5IHJjdV9yZWFkX1t1bl1sb2NrKCkgdG8gdXNlIGEgZGVk
aWNhdGVkIHBlcmNwdQpjb3VudGVyIGluc3RlYWQgb2YgcHJlZW1wdF9bZW58ZGlzXWFibGUoKSBh
cyB0aGlzIGVuYWJsZXMgdG8gdGVzdAp0aGF0IGNvbmRpdGlvbiBpbiBfX2RvX3NvZnRpcnEoKSAo
QVNTRVJUX05PVF9JTl9BVE9NSUMoKSBpcyBub3QKdXNhYmxlIHRoZXJlIGR1ZSB0byBfX2NwdV91
cCgpIGNhbGxpbmcgcHJvY2Vzc19wZW5kaW5nX3NvZnRpcnFzKCkKd2hpbGUgaG9sZGluZyB0aGUg
Y3B1IGhvdHBsdWcgbG9jaykuCgpEcm9wcGluZyB0aGUgbm93IG5vIGxvbmdlciBuZWVkZWQgI2lu
Y2x1ZGUgb2YgcHJlZW1wdC5oIGluIHJjdXBkYXRlLmgKcmVxdWlyZXMgYWRkaW5nIGl0IGluIHNv
bWUgc291cmNlcy4KCldoaWxlIGF0IGl0IHN3aXRjaCB0aGUgcmN1X3JlYWRfW3VuXWxvY2soKSBp
bXBsZW1lbnRhdGlvbiB0byBzdGF0aWMKaW5saW5lIGZ1bmN0aW9ucyBpbnN0ZWFkIG9mIG1hY3Jv
cy4KClNpZ25lZC1vZmYtYnk6IEp1ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNvbT4KLS0tClYz
OgotIGFkZCBiYXJyaWVycyB0byByY3VfW2VufGRpc11hYmxlKCkgKFJvZ2VyIFBhdSBNb25uw6kp
Ci0gYWRkIHJjdV9xdWllc2NlX2FsbG93ZWQoKSB0byBBU1NFUlRfTk9UX0lOX0FUT01JQyAoUm9n
ZXIgUGF1IE1vbm7DqSkKLSBjb252ZXJ0IG1hY3JvcyB0byBzdGF0aWMgaW5saW5lIGZ1bmN0aW9u
cwotIGFkZCBzYW5pdHkgY2hlY2sgaW4gcmN1X3JlYWRfdW5sb2NrKCkKClY0OgotIHVzZSBiYXJy
aWVyKCkgaW4gcmN1X1tlbnxkaXNdYWJsZSgpIChKdWxpZW4gR3JhbGwpCgpWNToKLSB1c2UgcmN1
IGNvdW50ZXIgZXZlbiBpZiBub3QgdXNpbmcgYSBkZWJ1ZyBidWlsZAotLS0KIHhlbi9jb21tb24v
bXVsdGljYWxsLmMgICAgIHwgIDEgKwogeGVuL2NvbW1vbi9wcmVlbXB0LmMgICAgICAgfCAgNSAr
KysrLQogeGVuL2NvbW1vbi9yY3VwZGF0ZS5jICAgICAgfCAgMiArKwogeGVuL2NvbW1vbi9zb2Z0
aXJxLmMgICAgICAgfCAgNCArKystCiB4ZW4vY29tbW9uL3dhaXQuYyAgICAgICAgICB8ICAxICsK
IHhlbi9pbmNsdWRlL3hlbi9yY3VwZGF0ZS5oIHwgMzUgKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKy0tLS0KIDYgZmlsZXMgY2hhbmdlZCwgNDIgaW5zZXJ0aW9ucygrKSwgNiBkZWxldGlv
bnMoLSkKCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL211bHRpY2FsbC5jIGIveGVuL2NvbW1vbi9t
dWx0aWNhbGwuYwppbmRleCA1YTE5OWViZjhmLi42N2YxYTIzNDg1IDEwMDY0NAotLS0gYS94ZW4v
Y29tbW9uL211bHRpY2FsbC5jCisrKyBiL3hlbi9jb21tb24vbXVsdGljYWxsLmMKQEAgLTEwLDYg
KzEwLDcgQEAKICNpbmNsdWRlIDx4ZW4vbXVsdGljYWxsLmg+CiAjaW5jbHVkZSA8eGVuL2d1ZXN0
X2FjY2Vzcy5oPgogI2luY2x1ZGUgPHhlbi9wZXJmYy5oPgorI2luY2x1ZGUgPHhlbi9wcmVlbXB0
Lmg+CiAjaW5jbHVkZSA8eGVuL3RyYWNlLmg+CiAjaW5jbHVkZSA8YXNtL2N1cnJlbnQuaD4KICNp
bmNsdWRlIDxhc20vaGFyZGlycS5oPgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9wcmVlbXB0LmMg
Yi94ZW4vY29tbW9uL3ByZWVtcHQuYwppbmRleCAzYjQxNzhmZDQ0Li44YTM1MWU2NDRiIDEwMDY0
NAotLS0gYS94ZW4vY29tbW9uL3ByZWVtcHQuYworKysgYi94ZW4vY29tbW9uL3ByZWVtcHQuYwpA
QCAtMjEsMTMgKzIxLDE1IEBACiAKICNpbmNsdWRlIDx4ZW4vcHJlZW1wdC5oPgogI2luY2x1ZGUg
PHhlbi9pcnEuaD4KKyNpbmNsdWRlIDx4ZW4vcmN1cGRhdGUuaD4KICNpbmNsdWRlIDxhc20vc3lz
dGVtLmg+CiAKIERFRklORV9QRVJfQ1BVKHVuc2lnbmVkIGludCwgX19wcmVlbXB0X2NvdW50KTsK
IAogYm9vbF90IGluX2F0b21pYyh2b2lkKQogewotICAgIHJldHVybiBwcmVlbXB0X2NvdW50KCkg
fHwgaW5faXJxKCkgfHwgIWxvY2FsX2lycV9pc19lbmFibGVkKCk7CisgICAgcmV0dXJuIHByZWVt
cHRfY291bnQoKSB8fCBpbl9pcnEoKSB8fCAhbG9jYWxfaXJxX2lzX2VuYWJsZWQoKSB8fAorICAg
ICAgICAgICAhcmN1X3F1aWVzY2VfYWxsb3dlZCgpOwogfQogCiAjaWZuZGVmIE5ERUJVRwpAQCAt
MzYsNSArMzgsNiBAQCB2b2lkIEFTU0VSVF9OT1RfSU5fQVRPTUlDKHZvaWQpCiAgICAgQVNTRVJU
KCFwcmVlbXB0X2NvdW50KCkpOwogICAgIEFTU0VSVCghaW5faXJxKCkpOwogICAgIEFTU0VSVChs
b2NhbF9pcnFfaXNfZW5hYmxlZCgpKTsKKyAgICBBU1NFUlQocmN1X3F1aWVzY2VfYWxsb3dlZCgp
KTsKIH0KICNlbmRpZgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9yY3VwZGF0ZS5jIGIveGVuL2Nv
bW1vbi9yY3VwZGF0ZS5jCmluZGV4IGM1ZWY2YWNiMWUuLmQ3MzczNTIzNWQgMTAwNjQ0Ci0tLSBh
L3hlbi9jb21tb24vcmN1cGRhdGUuYworKysgYi94ZW4vY29tbW9uL3JjdXBkYXRlLmMKQEAgLTQ2
LDYgKzQ2LDggQEAKICNpbmNsdWRlIDx4ZW4vY3B1Lmg+CiAjaW5jbHVkZSA8eGVuL3N0b3BfbWFj
aGluZS5oPgogCitERUZJTkVfUEVSX0NQVSh1bnNpZ25lZCBpbnQsIHJjdV9sb2NrX2NudCk7CisK
IC8qIEdsb2JhbCBjb250cm9sIHZhcmlhYmxlcyBmb3IgcmN1cGRhdGUgY2FsbGJhY2sgbWVjaGFu
aXNtLiAqLwogc3RhdGljIHN0cnVjdCByY3VfY3RybGJsayB7CiAgICAgbG9uZyBjdXI7ICAgICAg
ICAgICAvKiBDdXJyZW50IGJhdGNoIG51bWJlci4gICAgICAgICAgICAgICAgICAgICAgKi8KZGlm
ZiAtLWdpdCBhL3hlbi9jb21tb24vc29mdGlycS5jIGIveGVuL2NvbW1vbi9zb2Z0aXJxLmMKaW5k
ZXggMDBkNjc2YjYyYy4uZWJhNjVjNWZjMCAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9zb2Z0aXJx
LmMKKysrIGIveGVuL2NvbW1vbi9zb2Z0aXJxLmMKQEAgLTMxLDYgKzMxLDggQEAgc3RhdGljIHZv
aWQgX19kb19zb2Z0aXJxKHVuc2lnbmVkIGxvbmcgaWdub3JlX21hc2spCiAgICAgdW5zaWduZWQg
bG9uZyBwZW5kaW5nOwogICAgIGJvb2wgcmN1X2FsbG93ZWQgPSAhKGlnbm9yZV9tYXNrICYgKDF1
bCA8PCBSQ1VfU09GVElSUSkpOwogCisgICAgQVNTRVJUKCFyY3VfYWxsb3dlZCB8fCByY3VfcXVp
ZXNjZV9hbGxvd2VkKCkpOworCiAgICAgZm9yICggOyA7ICkKICAgICB7CiAgICAgICAgIC8qCkBA
IC01OCw3ICs2MCw3IEBAIHZvaWQgcHJvY2Vzc19wZW5kaW5nX3NvZnRpcnFzKHZvaWQpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICgxdWwgPDwgU0NIRURfU0xBVkVfU09GVElSUSk7
CiAKICAgICAvKiBCbG9jayBSQ1UgcHJvY2Vzc2luZyBpbiBjYXNlIG9mIHJjdV9yZWFkX2xvY2so
KSBoZWxkLiAqLwotICAgIGlmICggcHJlZW1wdF9jb3VudCgpICkKKyAgICBpZiAoICFyY3VfcXVp
ZXNjZV9hbGxvd2VkKCkgKQogICAgICAgICBpZ25vcmVfbWFzayB8PSAxdWwgPDwgUkNVX1NPRlRJ
UlE7CiAKICAgICBBU1NFUlQoIWluX2lycSgpICYmIGxvY2FsX2lycV9pc19lbmFibGVkKCkpOwpk
aWZmIC0tZ2l0IGEveGVuL2NvbW1vbi93YWl0LmMgYi94ZW4vY29tbW9uL3dhaXQuYwppbmRleCAy
NDcxNmU3Njc2Li45Y2RiMTc0MDM2IDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3dhaXQuYworKysg
Yi94ZW4vY29tbW9uL3dhaXQuYwpAQCAtMTksNiArMTksNyBAQAogICogYWxvbmcgd2l0aCB0aGlz
IHByb2dyYW07IElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KICAq
LwogCisjaW5jbHVkZSA8eGVuL3ByZWVtcHQuaD4KICNpbmNsdWRlIDx4ZW4vc2NoZWQuaD4KICNp
bmNsdWRlIDx4ZW4vc29mdGlycS5oPgogI2luY2x1ZGUgPHhlbi93YWl0Lmg+CmRpZmYgLS1naXQg
YS94ZW4vaW5jbHVkZS94ZW4vcmN1cGRhdGUuaCBiL3hlbi9pbmNsdWRlL3hlbi9yY3VwZGF0ZS5o
CmluZGV4IDMxYzhiODZkMTMuLmJlODA3Njk0ZTcgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hl
bi9yY3VwZGF0ZS5oCisrKyBiL3hlbi9pbmNsdWRlL3hlbi9yY3VwZGF0ZS5oCkBAIC0zMiwxMiAr
MzIsMzIgQEAKICNkZWZpbmUgX19YRU5fUkNVUERBVEVfSAogCiAjaW5jbHVkZSA8eGVuL2NhY2hl
Lmg+CisjaW5jbHVkZSA8eGVuL2NvbXBpbGVyLmg+CiAjaW5jbHVkZSA8eGVuL3NwaW5sb2NrLmg+
CiAjaW5jbHVkZSA8eGVuL2NwdW1hc2suaD4KLSNpbmNsdWRlIDx4ZW4vcHJlZW1wdC5oPgorI2lu
Y2x1ZGUgPHhlbi9wZXJjcHUuaD4KIAogI2RlZmluZSBfX3JjdQogCitERUNMQVJFX1BFUl9DUFUo
dW5zaWduZWQgaW50LCByY3VfbG9ja19jbnQpOworCitzdGF0aWMgaW5saW5lIHZvaWQgcmN1X3F1
aWVzY2VfZGlzYWJsZSh2b2lkKQoreworICAgIHRoaXNfY3B1KHJjdV9sb2NrX2NudCkrKzsKKyAg
ICBiYXJyaWVyKCk7Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZCByY3VfcXVpZXNjZV9lbmFibGUo
dm9pZCkKK3sKKyAgICBiYXJyaWVyKCk7CisgICAgdGhpc19jcHUocmN1X2xvY2tfY250KS0tOwor
fQorCitzdGF0aWMgaW5saW5lIGJvb2wgcmN1X3F1aWVzY2VfYWxsb3dlZCh2b2lkKQoreworICAg
IHJldHVybiAhdGhpc19jcHUocmN1X2xvY2tfY250KTsKK30KKwogLyoqCiAgKiBzdHJ1Y3QgcmN1
X2hlYWQgLSBjYWxsYmFjayBzdHJ1Y3R1cmUgZm9yIHVzZSB3aXRoIFJDVQogICogQG5leHQ6IG5l
eHQgdXBkYXRlIHJlcXVlc3RzIGluIGEgbGlzdApAQCAtOTEsMTYgKzExMSwyMyBAQCB0eXBlZGVm
IHN0cnVjdCBfcmN1X3JlYWRfbG9jayByY3VfcmVhZF9sb2NrX3Q7CiAgKiB3aWxsIGJlIGRlZmVy
cmVkIHVudGlsIHRoZSBvdXRlcm1vc3QgUkNVIHJlYWQtc2lkZSBjcml0aWNhbCBzZWN0aW9uCiAg
KiBjb21wbGV0ZXMuCiAgKgotICogSXQgaXMgaWxsZWdhbCB0byBibG9jayB3aGlsZSBpbiBhbiBS
Q1UgcmVhZC1zaWRlIGNyaXRpY2FsIHNlY3Rpb24uCisgKiBJdCBpcyBpbGxlZ2FsIHRvIHByb2Nl
c3Mgc29mdGlycXMgd2hpbGUgaW4gYW4gUkNVIHJlYWQtc2lkZSBjcml0aWNhbCBzZWN0aW9uLgog
ICovCi0jZGVmaW5lIHJjdV9yZWFkX2xvY2soeCkgICAgICAgKHsgKCh2b2lkKSh4KSk7IHByZWVt
cHRfZGlzYWJsZSgpOyB9KQorc3RhdGljIGlubGluZSB2b2lkIHJjdV9yZWFkX2xvY2socmN1X3Jl
YWRfbG9ja190ICpsb2NrKQoreworICAgIHJjdV9xdWllc2NlX2Rpc2FibGUoKTsKK30KIAogLyoq
CiAgKiByY3VfcmVhZF91bmxvY2sgLSBtYXJrcyB0aGUgZW5kIG9mIGFuIFJDVSByZWFkLXNpZGUg
Y3JpdGljYWwgc2VjdGlvbi4KICAqCiAgKiBTZWUgcmN1X3JlYWRfbG9jaygpIGZvciBtb3JlIGlu
Zm9ybWF0aW9uLgogICovCi0jZGVmaW5lIHJjdV9yZWFkX3VubG9jayh4KSAgICAgKHsgKCh2b2lk
KSh4KSk7IHByZWVtcHRfZW5hYmxlKCk7IH0pCitzdGF0aWMgaW5saW5lIHZvaWQgcmN1X3JlYWRf
dW5sb2NrKHJjdV9yZWFkX2xvY2tfdCAqbG9jaykKK3sKKyAgICBBU1NFUlQoIXJjdV9xdWllc2Nl
X2FsbG93ZWQoKSk7CisgICAgcmN1X3F1aWVzY2VfZW5hYmxlKCk7Cit9CiAKIC8qCiAgKiBTbyB3
aGVyZSBpcyByY3Vfd3JpdGVfbG9jaygpPyAgSXQgZG9lcyBub3QgZXhpc3QsIGFzIHRoZXJlIGlz
IG5vCi0tIAoyLjE2LjQKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0
Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRl
dmVs

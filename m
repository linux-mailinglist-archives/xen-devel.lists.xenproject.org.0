Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 5A8C1C141E
	for <lists+xen-devel@lfdr.de>; Sun, 29 Sep 2019 11:46:59 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iEVjq-0007If-8W; Sun, 29 Sep 2019 09:43:34 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=kiTL=XY=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1iEVjp-0007Ia-Bf
 for xen-devel@lists.xen.org; Sun, 29 Sep 2019 09:43:33 +0000
X-Inumbo-ID: 9857d1c8-e29d-11e9-bf31-bc764e2007e4
Received: from foss.arm.com (unknown [217.140.110.172])
 by localhost (Halon) with ESMTP
 id 9857d1c8-e29d-11e9-bf31-bc764e2007e4;
 Sun, 29 Sep 2019 09:43:30 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 3553C28;
 Sun, 29 Sep 2019 02:43:30 -0700 (PDT)
Received: from [10.37.8.142] (unknown [10.37.8.142])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 8A1F83F534;
 Sun, 29 Sep 2019 02:43:28 -0700 (PDT)
To: Stefano Stabellini <sstabellini@kernel.org>
References: <alpine.DEB.2.21.1909261608430.2594@sstabellini-ThinkPad-T480s>
 <20190926231144.16297-5-sstabellini@kernel.org>
From: Julien Grall <julien.grall@arm.com>
Message-ID: <d3ef8cc1-6fe7-bdee-690e-c59b362bbc8f@arm.com>
Date: Sun, 29 Sep 2019 10:43:27 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190926231144.16297-5-sstabellini@kernel.org>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v6 5/8] xen/arm: assign devices to boot
 domains
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Volodymyr_Babchuk@epam.com, Achin.Gupta@arm.com, andrii_anisov@epam.com,
 Stefano Stabellini <stefanos@xilinx.com>, xen-devel@lists.xen.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGksCgpPbiA5LzI3LzE5IDEyOjExIEFNLCBTdGVmYW5vIFN0YWJlbGxpbmkgd3JvdGU6Cj4gU2Nh
biB0aGUgdXNlciBwcm92aWRlZCBkdGIgZnJhZ21lbnQgYXQgYm9vdC4gRm9yIGVhY2ggZGV2aWNl
IG5vZGUsIG1hcAo+IG1lbW9yeSB0byBndWVzdHMsIGFuZCByb3V0ZSBpbnRlcnJ1cHRzIGFuZCBz
ZXR1cCB0aGUgaW9tbXUuCj4gCj4gVGhlIG1lbW9yeSByZWdpb24gdG8gcmVtYXAgaXMgc3BlY2lm
aWVkIGJ5IHRoZSAieGVuLHJlZyIgcHJvcGVydHkuCj4gCj4gVGhlIGlvbW11IGlzIHNldHVwIGJ5
IHBhc3NpbmcgdGhlIG5vZGUgb2YgdGhlIGRldmljZSB0byBhc3NpZ24gb24gdGhlCj4gaG9zdCBk
ZXZpY2UgdHJlZS4gVGhlIHBhdGggaXMgc3BlY2lmaWVkIGluIHRoZSBkZXZpY2UgdHJlZSBmcmFn
bWVudCBhcwo+IHRoZSAieGVuLHBhdGgiIHN0cmluZyBwcm9wZXJ0eS4KPiAKPiBUaGUgaW50ZXJy
dXB0cyBhcmUgcmVtYXBwZWQgYmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIGZyb20gdGhlCj4gY29y
cmVzcG9uZGluZyBub2RlIG9uIHRoZSBob3N0IGRldmljZSB0cmVlLiBDYWxsCj4gaGFuZGxlX2Rl
dmljZV9pbnRlcnJ1cHRzIHRvIHJlbWFwIGludGVycnVwdHMuIEludGVycnVwdHMgcmVsYXRlZCBk
ZXZpY2UKPiB0cmVlIHByb3BlcnRpZXMgYXJlIGNvcGllZCBmcm9tIHRoZSBkZXZpY2UgdHJlZSBm
cmFnbWVudCwgc2FtZSBhcyBhbGwKPiB0aGUgb3RoZXIgcHJvcGVydGllcy4KPiAKPiBBbHNvIHNl
dCBhZGQgdGhlIG5ldyBmbGFnIFhFTl9ET01DVExfQ0RGX2lvbW11IHNvIHRoYXQgZG9tMGxlc3Mg
ZG9tVQo+IGNhbiB1c2UgdGhlIElPTU1VIGlmIGEgcGFydGlhbCBkdGIgaXMgc3BlY2lmaWVkLgo+
IAo+IFNpZ25lZC1vZmYtYnk6IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3RlZmFub3NAeGlsaW54LmNv
bT4KPiAtLS0KPiBDaGFuZ2VzIGluIHY2Ogo+IC0gdHVybiBkcHJpbnRrcyBpbnRvIHByaW50a3MK
PiAtIHJldHVybiBlcnJvciBvbiBwYWdlIGFsaWdubWVudCBjaGVjayBmYWlsdXJlCj4gLSBzZXQg
WEVOX0RPTUNUTF9DREZfaW9tbXUgaWYgcGFydGlhbCBkdGIgaXMgc3BlY2lmaWVkCj4gCj4gQ2hh
bmdlcyBpbiB2NToKPiAtIHVzZSBsb2NhbCB2YXJpYWJsZSBmb3IgbmFtZQo+IC0gdXNlIG1hcF9y
ZWdpb25zX3AybXQKPiAtIGFkZCB3YXJuaW5nIGZvciBub3QgcGFnZSBhbGlnbmVkIGFkZHJlc3Nl
cy9zaXplcwo+IC0gaW50cm9kdWNlIGhhbmRsZV9wYXNzdGhyb3VnaF9wcm9wCj4gCj4gQ2hhbmdl
cyBpbiB2NDoKPiAtIHVzZSB1bnNpZ25lZAo+IC0gaW1wcm92ZSBjb21taXQgbWVzc2FnZQo+IC0g
Y29kZSBzdHlsZQo+IC0gdXNlIGR0X3Byb3BfY21wCj4gLSB1c2UgZGV2aWNlX3RyZWVfZ2V0X3Jl
Zwo+IC0gZG9uJ3QgY29weSBvdmVyIHhlbixyZWcgYW5kIHhlbixwYXRoCj4gLSBkb24ndCBjcmVh
dGUgc3BlY2lhbCBpbnRlcnJ1cHQgcHJvcGVydGllcyBmb3IgZG9tVTogY29weSB0aGVtIGZyb20g
dGhlCj4gICAgZnJhZ21lbnQKPiAtIGluLWNvZGUgY29tbWVudAo+IAo+IENoYW5nZXMgaW4gdjM6
Cj4gLSBpbXByb3ZlIGNvbW1pdCBtZXNzYWdlCj4gLSByZW1vdmUgc3VwZXJmbHVvdXMgY2FzdAo+
IC0gbWVyZ2UgY29kZSB3aXRoIHRoZSBjb3B5IGNvZGUKPiAtIGFkZCBpbnRlcnJ1cC1wYXJlbnQK
PiAtIGRlbW92ZSBkZXB0aCA+IDIgY2hlY2sKPiAtIHJldXNlIGNvZGUgZnJvbSBoYW5kbGVfZGV2
aWNlX2ludGVycnVwdHMKPiAtIGNvcHkgaW50ZXJydXB0cyBmcm9tIGhvc3QgZHQKPiAKPiBDaGFu
Z2VzIGluIHYyOgo+IC0gcmVuYW1lICJwYXRoIiB0byAieGVuLHBhdGgiCj4gLSBncmFtbWFyIGZp
eAo+IC0gdXNlIGdhZGRyX3RvX2dmbiBhbmQgbWFkZHJfdG9fbWZuCj4gLSByZW1vdmUgZGVwdGgg
PD0gMiBsaW1pdGF0aW9uIGluIHNjYW5uaW5nIHRoZSBkdGIgZnJhZ21lbnQKPiAtIGludHJvZHVj
ZSBhbmQgcGFyc2UgeGVuLHJlZwo+IC0gY29kZSBzdHlsZQo+IC0gc3VwcG9ydCBtb3JlIHRoYW4g
b25lIGludGVycnVwdCBwZXIgZGV2aWNlCj4gLSBzcGVjaWZ5IG9ubHkgdGhlIEdJQyBpcyBzdXBw
b3J0ZWQKPiAtLS0KPiAgIHhlbi9hcmNoL2FybS9kb21haW5fYnVpbGQuYyB8IDEwNCArKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrLS0KPiAgIDEgZmlsZSBjaGFuZ2VkLCAxMDEgaW5z
ZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJt
L2RvbWFpbl9idWlsZC5jIGIveGVuL2FyY2gvYXJtL2RvbWFpbl9idWlsZC5jCj4gaW5kZXggMDhk
NmQyMzhlMy4uYTQ2MTgxNjM0NSAxMDA2NDQKPiAtLS0gYS94ZW4vYXJjaC9hcm0vZG9tYWluX2J1
aWxkLmMKPiArKysgYi94ZW4vYXJjaC9hcm0vZG9tYWluX2J1aWxkLmMKPiBAQCAtMTY5OSw2ICsx
Njk5LDg4IEBAIHN0YXRpYyBpbnQgX19pbml0IG1ha2VfdnBsMDExX3VhcnRfbm9kZShzdHJ1Y3Qg
a2VybmVsX2luZm8gKmtpbmZvKQo+ICAgfQo+ICAgI2VuZGlmCj4gICAKPiArLyoKPiArICogU2Nh
biBkZXZpY2UgdHJlZSBwcm9wZXJ0aWVzIGZvciBwYXNzdGhyb3VnaCBzcGVjaWZpYyBpbmZvcm1h
dGlvbi4KPiArICogUmV0dXJucyAtRU5PRU5UIHdoZW4gbm8gcGFzc3Rocm91Z2ggcHJvcGVydGll
cyBhcmUgZm91bmQKClN1Y2ggdGhpbmdzIG9ubHkgd29yayBpZiB5b3UgY29udHJvbCB0aGUgcmV0
dXJuIHZhbHVlLiBMb29raW5nIGF0IHRoZSAKY29kZSwgeW91IHByb3BhZ2F0ZSB0aGUgdmFsdWUg
ZnJvbSBpb21tdV9hc3NpZ25fZHRfZGV2aWNlKCkuIFdoaWxlIHRvZGF5IAp3ZSByZXR1cm4gLUVJ
TlZBTCB3aGVuIHRoZSBkZXZpY2UgaXMgbm90IHByb3RlY3RlZCwgaXQgbWF5IG1ha2Ugc2Vuc2Ug
dG8gCnJldHVybiAtRU5PRU5UIChhZnRlciBhbGwgdGhlIGRldmljZSBpcyBub3QgYmVoaW5kIGFu
IElPTU1VIGFuZCAKdGhlcmVmb3JlIHRlY2huaWNhbGx5IG5vdCBmb3VuZCkuCgpZb3Ugd291bGQg
ZW5kIHVwIHRvIHByZXNlbnQgdGhlIHByb3BlcnR5IHdoZW4gaXQgc2hvdWxkIG5vdC4gU28gaXQg
d291bGQgCmJlIGJldHRlciB0byBjb25zaWRlciByZXR1cm5pbmcgYSBwb3NpdGl2ZSB2YWx1ZSB3
aGVuIHRoZSBwcm9wZXJ0eSBuZWVkcyAKdG8gYmUgY29waWVkLgoKPiArICogICAgICAgICA8IDAg
b24gZXJyb3IKPiArICogICAgICAgICAwIG9uIHN1Y2Nlc3MKPiArICovCj4gK3N0YXRpYyBpbnQg
X19pbml0IGhhbmRsZV9wYXNzdGhyb3VnaF9wcm9wKHN0cnVjdCBrZXJuZWxfaW5mbyAqa2luZm8s
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVj
dCBmZHRfcHJvcGVydHkgKnByb3AsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGNvbnN0IGNoYXIgKm5hbWUsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVpbnQzMl90IGFkZHJlc3NfY2VsbHMsIHVpbnQzMl90IHNpemVfY2Vs
bHMpCj4gK3sKPiArICAgIGNvbnN0IF9fYmUzMiAqY2VsbDsKPiArICAgIHVuc2lnbmVkIGludCBp
LCBsZW47Cj4gKyAgICBzdHJ1Y3QgZHRfZGV2aWNlX25vZGUgKm5vZGU7Cj4gKyAgICBpbnQgcmVz
Owo+ICsKPiArICAgIC8qIHhlbixyZWcgc3BlY2lmaWVzIHdoZXJlIHRvIG1hcCB0aGUgTU1JTyBy
ZWdpb24gKi8KPiArICAgIGlmICggZHRfcHJvcF9jbXAoInhlbixyZWciLCBuYW1lKSA9PSAwICkK
PiArICAgIHsKPiArICAgICAgICBwYWRkcl90IG1zdGFydCwgc2l6ZSwgZ3N0YXJ0OwoKTklUOiBO
ZXdsaW5lIGJldHdlZW4gZGVjbGFyYXRpb24gYW5kIGNvZGUuCgo+ICsgICAgICAgIGNlbGwgPSAo
Y29uc3QgX19iZTMyICopcHJvcC0+ZGF0YTsKPiArICAgICAgICBsZW4gPSBmZHQzMl90b19jcHUo
cHJvcC0+bGVuKSAvCj4gKyAgICAgICAgICAgICgoYWRkcmVzc19jZWxscyAqIDIgKyBzaXplX2Nl
bGxzKSAqIHNpemVvZih1aW50MzJfdCkpOwoKTklUOiBUaGUgaW5kZW50YXRpb24gbG9va3MgaW5j
b3JyZWN0LiBJIG1pc3NlZCB0aGlzIG9uZSBvbiB0aGUgcHJldmlvdXMgCnJldmlldy4KCj4gKwo+
ICsgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKQo+ICsgICAgICAgIHsKPiArICAg
ICAgICAgICAgZGV2aWNlX3RyZWVfZ2V0X3JlZygmY2VsbCwgYWRkcmVzc19jZWxscywgc2l6ZV9j
ZWxscywKPiArICAgICAgICAgICAgICAgICAgICAmbXN0YXJ0LCAmc2l6ZSk7CgpTYW1lIGhlcmUu
IEl0IG1pZ2h0IGJlIHdvcnRoIGNoZWNraW5nIHlvdXIgZWRpdG9yIGNvbmZpZ3VyYXRpb24gdG8g
YXZvaWQgCnN1Y2ggdGhpbmdzIGhhcHBlbmluZyBpbiB0aGUgZnV0dXJlLi4uCgo+ICsgICAgICAg
ICAgICBnc3RhcnQgPSBkdF9uZXh0X2NlbGwoYWRkcmVzc19jZWxscywgJmNlbGwpOwo+ICsKPiAr
ICAgICAgICAgICAgaWYgKCBnc3RhcnQgJiB+UEFHRV9NQVNLIHx8IG1zdGFydCAmIH5QQUdFX01B
U0sgfHwgc2l6ZSAmIH5QQUdFX01BU0sgKQo+ICsgICAgICAgICAgICB7Cj4gKyAgICAgICAgICAg
ICAgICBwcmludGsoWEVOTE9HX0VSUgo+ICsgICAgICAgICAgICAgICAgICAgICAgICJEb21VIHBh
c3N0aHJvdWdoIGNvbmZpZyBoYXMgbm90IHBhZ2UgYWxpZ25lZCBhZGRyZXNzZXMvc2l6ZXNcbiIp
Owo+ICsgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gKyAgICAgICAgICAgIH0KPiAr
Cj4gKyAgICAgICAgICAgIHJlcyA9IG1hcF9yZWdpb25zX3AybXQoa2luZm8tPmQsCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FkZHJfdG9fZ2ZuKGdzdGFydCksCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUEZOX0RPV04oc2l6ZSksCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFkZHJfdG9fbWZuKG1zdGFydCksCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcDJtX21taW9fZGlyZWN0X2Rldik7Cj4g
KyAgICAgICAgICAgIGlmICggcmVzIDwgMCApCj4gKyAgICAgICAgICAgIHsKPiArICAgICAgICAg
ICAgICAgIHByaW50ayhYRU5MT0dfRVJSCj4gKyAgICAgICAgICAgICAgICAgICAgICAgIkZhaWxl
ZCB0byBtYXAgJSJQUklwYWRkciIgdG8gdGhlIGd1ZXN0IGF0JSJQUklwYWRkciJcbiIsCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgbXN0YXJ0LCBnc3RhcnQpOwo+ICsgICAgICAgICAgICAgICAg
cmV0dXJuIC1FRkFVTFQ7Cj4gKyAgICAgICAgICAgIH0KPiArICAgICAgICB9Cj4gKwo+ICsgICAg
ICAgIHJldHVybiAwOwo+ICsgICAgfQo+ICsgICAgLyoKPiArICAgICAqIHhlbixwYXRoIHNwZWNp
ZmllcyB0aGUgY29ycmVzcG9uZGluZyBub2RlIGluIHRoZSBob3N0IERULgo+ICsgICAgICogQm90
aCBpbnRlcnJ1cHQgbWFwcGluZ3MgYW5kIElPTU1VIHNldHRpbmdzIGFyZSBiYXNlZCBvbiBpdCwK
PiArICAgICAqIGFzIHRoZXkgYXJlIGRvbmUgYmFzZWQgb24gdGhlIGNvcnJlc3BvbmRpbmcgaG9z
dCBEVCBub2RlLgo+ICsgICAgICovCj4gKyAgICBlbHNlIGlmICggZHRfcHJvcF9jbXAoInhlbixw
YXRoIiwgbmFtZSkgPT0gMCApCj4gKyAgICB7Cj4gKyAgICAgICAgbm9kZSA9IGR0X2ZpbmRfbm9k
ZV9ieV9wYXRoKHByb3AtPmRhdGEpOwo+ICsgICAgICAgIGlmICggbm9kZSA9PSBOVUxMICkKPiAr
ICAgICAgICB7Cj4gKyAgICAgICAgICAgIHByaW50ayhYRU5MT0dfRVJSICJDb3VsZG4ndCBmaW5k
IG5vZGUgJXMgaW4gaG9zdF9kdCFcbiIsCj4gKyAgICAgICAgICAgICAgICAgICAoY2hhciAqKXBy
b3AtPmRhdGEpOwo+ICsgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiArICAgICAgICB9Cj4g
Kwo+ICsgICAgICAgIHJlcyA9IGlvbW11X2Fzc2lnbl9kdF9kZXZpY2Uoa2luZm8tPmQsIG5vZGUp
Owo+ICsgICAgICAgIGlmICggcmVzIDwgMCApCj4gKyAgICAgICAgICAgIHJldHVybiByZXM7ID4g
Kwo+ICsgICAgICAgIHJlcyA9IGhhbmRsZV9kZXZpY2VfaW50ZXJydXB0cyhraW5mby0+ZCwgbm9k
ZSwgdHJ1ZSk7Cj4gKyAgICAgICAgaWYgKCByZXMgPCAwICkKPiArICAgICAgICAgICAgcmV0dXJu
IHJlczsKClNhbWUgaGVyZS4KCj4gKwo+ICsgICAgICAgIHJldHVybiAwOwo+ICsgICAgfQo+ICsK
PiArICAgIHJldHVybiAtRU5PRU5UOwo+ICt9Cj4gKwo+ICAgc3RhdGljIGludCBfX2luaXQgaGFu
ZGxlX3Byb3BfcGZkdChzdHJ1Y3Qga2VybmVsX2luZm8gKmtpbmZvLAo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2b2lkICpwZmR0LCBpbnQgbm9kZW9mZiwKPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgYWRkcmVzc19jZWxs
cywgdWludDMyX3Qgc2l6ZV9jZWxscywKPiBAQCAtMTcwNyw2ICsxNzg5LDcgQEAgc3RhdGljIGlu
dCBfX2luaXQgaGFuZGxlX3Byb3BfcGZkdChzdHJ1Y3Qga2VybmVsX2luZm8gKmtpbmZvLAo+ICAg
ICAgIHZvaWQgKmZkdCA9IGtpbmZvLT5mZHQ7Cj4gICAgICAgaW50IHByb3BvZmYsIG5hbWVvZmYs
IHJlczsKPiAgICAgICBjb25zdCBzdHJ1Y3QgZmR0X3Byb3BlcnR5ICpwcm9wOwo+ICsgICAgY29u
c3QgY2hhciAqbmFtZTsKPiAgIAo+ICAgICAgIGZvciAoIHByb3BvZmYgPSBmZHRfZmlyc3RfcHJv
cGVydHlfb2Zmc2V0KHBmZHQsIG5vZGVvZmYpOwo+ICAgICAgICAgICAgIHByb3BvZmYgPj0gMDsK
PiBAQCAtMTcxNSwxMSArMTc5OCwyMyBAQCBzdGF0aWMgaW50IF9faW5pdCBoYW5kbGVfcHJvcF9w
ZmR0KHN0cnVjdCBrZXJuZWxfaW5mbyAqa2luZm8sCj4gICAgICAgICAgIGlmICggIShwcm9wID0g
ZmR0X2dldF9wcm9wZXJ0eV9ieV9vZmZzZXQocGZkdCwgcHJvcG9mZiwgTlVMTCkpICkKPiAgICAg
ICAgICAgICAgIHJldHVybiAtRkRUX0VSUl9JTlRFUk5BTDsKPiAgIAo+ICsgICAgICAgIHJlcyA9
IDA7Cj4gICAgICAgICAgIG5hbWVvZmYgPSBmZHQzMl90b19jcHUocHJvcC0+bmFtZW9mZik7Cj4g
LSAgICAgICAgcmVzID0gZmR0X3Byb3BlcnR5KGZkdCwgZmR0X3N0cmluZyhwZmR0LCBuYW1lb2Zm
KSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcC0+ZGF0YSwgZmR0MzJfdG9fY3B1
KHByb3AtPmxlbikpOwo+IC0gICAgICAgIGlmICggcmVzICkKPiArICAgICAgICBuYW1lID0gZmR0
X3N0cmluZyhwZmR0LCBuYW1lb2ZmKTsKPiArCj4gKyAgICAgICAgaWYgKCBzY2FuX3Bhc3N0aHJv
dWdoX3Byb3AgKQo+ICsgICAgICAgICAgICByZXMgPSBoYW5kbGVfcGFzc3Rocm91Z2hfcHJvcChr
aW5mbywgcHJvcCwgbmFtZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgYWRkcmVzc19jZWxscywgc2l6ZV9jZWxscyk7Cj4gKyAgICAgICAgaWYgKCByZXMgPCAw
ICYmIHJlcyAhPSAtRU5PRU5UICkKPiAgICAgICAgICAgICAgIHJldHVybiByZXM7Cj4gKwo+ICsg
ICAgICAgIC8qIGNvcHkgYWxsIG90aGVyIHByb3BlcnRpZXMgKi8KCkFzIHlvdSBub3cgbW92ZWQg
dGhlIGNvZGUgdG8gcGFzc3Rocm91Z2ggcHJvcGVydGllcyBpbiBhIHNlcGFyYXRlIApmdW5jdGlv
biwgaXQgbm93IGEgYml0IHVuY2xlYXIgd2hhdCAib3RoZXIiIG1lYW4gaGVyZS4KCj4gKyAgICAg
ICAgaWYgKCAhc2Nhbl9wYXNzdGhyb3VnaF9wcm9wIHx8IHJlcyA9PSAtRU5PRU5UICkKPiArICAg
ICAgICB7Cj4gKyAgICAgICAgICAgIHJlcyA9IGZkdF9wcm9wZXJ0eShmZHQsIG5hbWUsIHByb3At
PmRhdGEsIGZkdDMyX3RvX2NwdShwcm9wLT5sZW4pKTsKPiArICAgICAgICAgICAgaWYgKCByZXMg
KQo+ICsgICAgICAgICAgICAgICAgcmV0dXJuIHJlczsKPiArICAgICAgICB9Cj4gICAgICAgfQo+
ICAgCj4gICAgICAgLyogRkRUX0VSUl9OT1RGT1VORCA9PiBUaGVyZSBpcyBubyBtb3JlIHByb3Bl
cnRpZXMgZm9yIHRoaXMgbm9kZSAqLwo+IEBAIC0yMjc3LDYgKzIzNzIsOSBAQCB2b2lkIF9faW5p
dCBjcmVhdGVfZG9tVXModm9pZCkKPiAgICAgICAgICAgICAgIHBhbmljKCJNaXNzaW5nIHByb3Bl
cnR5ICdjcHVzJyBmb3IgZG9tYWluICVzXG4iLAo+ICAgICAgICAgICAgICAgICAgICAgZHRfbm9k
ZV9uYW1lKG5vZGUpKTsKPiAgIAo+ICsgICAgICAgIGlmICggZHRfZmluZF9jb21wYXRpYmxlX25v
ZGUobm9kZSwgTlVMTCwgIm11bHRpYm9vdCxkZXZpY2UtdHJlZSIpICkKPiArICAgICAgICAgICAg
ZF9jZmcuZmxhZ3MgfD0gWEVOX0RPTUNUTF9DREZfaW9tbXU7Cj4gKwo+ICAgICAgICAgICBkID0g
ZG9tYWluX2NyZWF0ZSgrK21heF9pbml0X2RvbWlkLCAmZF9jZmcsIGZhbHNlKTsKPiAgICAgICAg
ICAgaWYgKCBJU19FUlIoZCkgKQo+ICAgICAgICAgICAgICAgcGFuaWMoIkVycm9yIGNyZWF0aW5n
IGRvbWFpbiAlc1xuIiwgZHRfbm9kZV9uYW1lKG5vZGUpKTsKPiAKCkNoZWVycywKCi0tIApKdWxp
ZW4gR3JhbGwKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
Clhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0
dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 0D0A488205
	for <lists+xen-devel@lfdr.de>; Fri,  9 Aug 2019 20:09:39 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hw9GY-0002ba-6w; Fri, 09 Aug 2019 18:05:26 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=5OiB=WF=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hw9GW-0002bV-1G
 for xen-devel@lists.xen.org; Fri, 09 Aug 2019 18:05:24 +0000
X-Inumbo-ID: 4134f05c-bad0-11e9-8980-bc764e045a96
Received: from foss.arm.com (unknown [217.140.110.172])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTP
 id 4134f05c-bad0-11e9-8980-bc764e045a96;
 Fri, 09 Aug 2019 18:05:22 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id E78A015A2;
 Fri,  9 Aug 2019 11:05:21 -0700 (PDT)
Received: from [10.1.196.50] (e108454-lin.cambridge.arm.com [10.1.196.50])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 259743F694;
 Fri,  9 Aug 2019 11:05:21 -0700 (PDT)
To: Stefano Stabellini <sstabellini@kernel.org>
References: <alpine.DEB.2.21.1908081609510.22196@sstabellini-ThinkPad-T480s>
 <20190808231242.26424-1-sstabellini@kernel.org>
From: Julien Grall <julien.grall@arm.com>
Message-ID: <7caa16d8-f8d6-eb7c-cc6a-2cdd0655a544@arm.com>
Date: Fri, 9 Aug 2019 19:05:20 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190808231242.26424-1-sstabellini@kernel.org>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v3 1/6] xen/arm: introduce handle_interrupts
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Volodymyr_Babchuk@epam.com, Achin.Gupta@arm.com, andrii_anisov@epam.com,
 Stefano Stabellini <stefanos@xilinx.com>, xen-devel@lists.xen.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGkgU3RlZmFubywKCk9uIDA5LzA4LzIwMTkgMDA6MTIsIFN0ZWZhbm8gU3RhYmVsbGluaSB3cm90
ZToKPiBNb3ZlIHRoZSBpbnRlcnJ1cHQgaGFuZGxpbmcgY29kZSBvdXQgb2YgaGFuZGxlX2Rldmlj
ZSB0byBhIG5ldyBmdW5jdGlvbgo+IHNvIHRoYXQgaXQgY2FuIGJlIHJldXNlZCBmb3IgZG9tMGxl
c3MgVk1zIGxhdGVyLgo+IAo+IFNpZ25lZC1vZmYtYnk6IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3Rl
ZmFub3NAeGlsaW54LmNvbT4KPiAtLS0KPiBDaGFuZ2VzIGluIHYzOgo+IC0gYWRkIHBhdGNoCj4g
Cj4gVGhlIGRpZmYgaXMgaGFyZCB0byByZWFkIGJ1dCBJIGp1c3QgbW92ZWQgdGhlIGludGVycnVw
dHMgcmVsYXRlZCBjb2RlCj4gZnJvbSBoYW5kbGVfZGV2aWNlcyB0byBhIG5ldyBmdW5jdGlvbiBo
YW5kbGVfaW50ZXJydXB0cywgYW5kIHZlcnkgbGl0dGxlCj4gZWxzZS4KPiAtLS0KPiAgIHhlbi9h
cmNoL2FybS9kb21haW5fYnVpbGQuYyB8IDc5ICsrKysrKysrKysrKysrKysrKysrKysrLS0tLS0t
LS0tLS0tLS0KPiAgIDEgZmlsZSBjaGFuZ2VkLCA0OSBpbnNlcnRpb25zKCspLCAzMCBkZWxldGlv
bnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL2RvbWFpbl9idWlsZC5jIGIveGVu
L2FyY2gvYXJtL2RvbWFpbl9idWlsZC5jCj4gaW5kZXggNGM4NDA0MTU1YS4uMDBkZGIzYjA1ZCAx
MDA2NDQKPiAtLS0gYS94ZW4vYXJjaC9hcm0vZG9tYWluX2J1aWxkLmMKPiArKysgYi94ZW4vYXJj
aC9hcm0vZG9tYWluX2J1aWxkLmMKPiBAQCAtMTIyMCw0MSArMTIyMCwxOSBAQCBzdGF0aWMgaW50
IF9faW5pdCBtYXBfZGV2aWNlX2NoaWxkcmVuKHN0cnVjdCBkb21haW4gKmQsCj4gICB9Cj4gICAK
PiAgIC8qCj4gLSAqIEZvciBhIGdpdmVuIGRldmljZSBub2RlOgo+IC0gKiAgLSBHaXZlIHBlcm1p
c3Npb24gdG8gdGhlIGd1ZXN0IHRvIG1hbmFnZSBJUlEgYW5kIE1NSU8gcmFuZ2UKPiAtICogIC0g
UmV0cmlldmUgdGhlIElSUSBjb25maWd1cmF0aW9uIChpLmUgZWRnZS9sZXZlbCkgZnJvbSBkZXZp
Y2UgdHJlZQo+IC0gKiBXaGVuIHRoZSBkZXZpY2UgaXMgbm90IG1hcmtlZCBmb3IgZ3Vlc3QgcGFz
c3Rocm91Z2g6Cj4gLSAqICAtIEFzc2lnbiB0aGUgZGV2aWNlIHRvIHRoZSBndWVzdCBpZiBpdCdz
IHByb3RlY3RlZCBieSBhbiBJT01NVQo+IC0gKiAgLSBNYXAgdGhlIElSUXMgYW5kIGlvbWVtIHJl
Z2lvbnMgdG8gRE9NMAo+ICsgKiBSZXR1cm46Cj4gKyAqICAgPCAwIG9uIGVycm9yCj4gKyAqICAg
MCAgIG9uIG5vIG1hcHBpbmcgcmVxdWlyZWQKPiArICogICAxICAgSVJRIG1hcHBpbmcgZG9uZQoK
VGhpcyBmZWVscyBhIGJpdCBvZGQgdG8gZGVzY3JpYmUgdGhlIHJldHVybiB2YWx1ZSBhbmQgbm90
IHdoYXQgdGhlIGZ1bmN0aW9uIGRvZXMuCgpCdXQgSSBkb24ndCB1bmRlcnN0YW5kIHdoeSB5b3Ug
bmVlZCB0byB0ZWxsIHRoZSBjYWxsZXIgd2hldGhlciBtYXBwaW5nIHdlcmUgZG9uZSAKb3Igbm90
LiBUaGlzIGlzIGFscmVhZHkgY29udmV5ZWQgYnkgIm5lZWRfbWFwcGluZyIgcHJvdmlkZWQgYnkg
dGhlIGNhbGxlci4KCkxvb2tpbmcgYXQgdGhlIG9ubHkgcGxhY2Ugd2hlcmUgeW91IG1ha2UgdGhl
IGRpc3RpbmN0aW9uIGJldHdlZW4gMCBhbmQgMSAocGF0Y2ggCiMzKSwgeW91IGhhdmUKCisgICAg
ICAgICAgICByID0gaGFuZGxlX2ludGVycnVwdHMoZCwgbm9kZSwgdHJ1ZSk7CisgICAgICAgICAg
ICBpZiAoIHIgPCAwICkKKyAgICAgICAgICAgICAgICByZXR1cm4gcjsKKyAgICAgICAgICAgIGlm
ICggciA+IDAgKQorICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLyogZG8gc29tZXRoaW5n
ICovCisgICAgICAgICAgICB9CgoKTm90IGxvb2tpbmcgYXQgdGhlIGNvZGUgYmVsb3cgKHdoaWNo
IGxvb2tzIHdyb25nKSwgYXMgeW91IGFsd2F5cyBwYXNzIHRydWUgaGVyZSwgCnIgY2FuIGVpdGhl
ciBiZSBhbiBlcnJvciBvciAxLgoKPiAgICAqLwo+IC1zdGF0aWMgaW50IF9faW5pdCBoYW5kbGVf
ZGV2aWNlKHN0cnVjdCBkb21haW4gKmQsIHN0cnVjdCBkdF9kZXZpY2Vfbm9kZSAqZGV2LAo+IC0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAybV90eXBlX3QgcDJtdCkKPiArc3RhdGlj
IGludCBfX2luaXQgaGFuZGxlX2ludGVycnVwdHMoc3RydWN0IGRvbWFpbiAqZCwKCkhvdyBhYm91
dCBoYW5kbGVfZGV2aWNlX2ludGVycnVwdHM/IE9yIG1hcF9kZXZpY2VfaW50ZXJydXB0cz8KCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkdF9kZXZpY2Vfbm9k
ZSAqZGV2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIG5lZWRf
bWFwcGluZykKPiAgIHsKPiAtICAgIHVuc2lnbmVkIGludCBuaXJxOwo+IC0gICAgdW5zaWduZWQg
aW50IG5hZGRyOwo+IC0gICAgdW5zaWduZWQgaW50IGk7Cj4gLSAgICBpbnQgcmVzOwo+ICsgICAg
aW50IGksIG5pcnEsIHJlczsKCnJlcyB3aWxsIGJlIHVzZWQgdW5pdGlhbGl6ZWQgaWYgdGhlIGRl
dmljZSBoYXMgbm8gaW50ZXJydXB0cy4KCj4gICAgICAgc3RydWN0IGR0X3Jhd19pcnEgcmlycTsK
PiAtICAgIHU2NCBhZGRyLCBzaXplOwo+IC0gICAgYm9vbCBuZWVkX21hcHBpbmcgPSAhZHRfZGV2
aWNlX2Zvcl9wYXNzdGhyb3VnaChkZXYpOwo+ICAgCj4gICAgICAgbmlycSA9IGR0X251bWJlcl9v
Zl9pcnEoZGV2KTsKPiAtICAgIG5hZGRyID0gZHRfbnVtYmVyX29mX2FkZHJlc3MoZGV2KTsKPiAt
Cj4gLSAgICBkdF9kcHJpbnRrKCIlcyBwYXNzdGhyb3VnaCA9ICVkIG5pcnEgPSAlZCBuYWRkciA9
ICV1XG4iLAo+IC0gICAgICAgICAgICAgICBkdF9ub2RlX2Z1bGxfbmFtZShkZXYpLCBuZWVkX21h
cHBpbmcsIG5pcnEsIG5hZGRyKTsKPiAtCj4gLSAgICBpZiAoIGR0X2RldmljZV9pc19wcm90ZWN0
ZWQoZGV2KSAmJiBuZWVkX21hcHBpbmcgKQo+IC0gICAgewo+IC0gICAgICAgIGR0X2RwcmludGso
IiVzIHNldHVwIGlvbW11XG4iLCBkdF9ub2RlX2Z1bGxfbmFtZShkZXYpKTsKPiAtICAgICAgICBy
ZXMgPSBpb21tdV9hc3NpZ25fZHRfZGV2aWNlKGQsIGRldik7Cj4gLSAgICAgICAgaWYgKCByZXMg
KQo+IC0gICAgICAgIHsKPiAtICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19FUlIgIkZhaWxlZCB0
byBzZXR1cCB0aGUgSU9NTVUgZm9yICVzXG4iLAo+IC0gICAgICAgICAgICAgICAgICAgZHRfbm9k
ZV9mdWxsX25hbWUoZGV2KSk7Cj4gLSAgICAgICAgICAgIHJldHVybiByZXM7Cj4gLSAgICAgICAg
fQo+IC0gICAgfQo+ICAgCj4gICAgICAgLyogR2l2ZSBwZXJtaXNzaW9uIGFuZCBtYXAgSVJRcyAq
Lwo+ICAgICAgIGZvciAoIGkgPSAwOyBpIDwgbmlycTsgaSsrICkKPiBAQCAtMTI5MSw2ICsxMjY5
LDQ3IEBAIHN0YXRpYyBpbnQgX19pbml0IGhhbmRsZV9kZXZpY2Uoc3RydWN0IGRvbWFpbiAqZCwg
c3RydWN0IGR0X2RldmljZV9ub2RlICpkZXYsCj4gICAgICAgICAgICAgICByZXR1cm4gcmVzOwo+
ICAgICAgIH0KPiAgIAo+ICsgICAgcmV0dXJuICEhKG5lZWRfbWFwcGluZyAmJiByZXMgPT0gMCk7
CgpXaHkgZG8geW91IG5lZWQgdGhlICEhIGhlcmU/IChhICYmIGIpIGlzIGFscmVhZHkgYSBib29s
ZWFuLiBCdXQgdGhpcyBsb29rcyAKcHJldHR5IHdyb25nIGFzIHlvdSB3b3VsZCByZXR1cm4gMCB3
aGVuIHJlcyBpcyBub24temVybyAoaS5lIGFuIGVycm9yKSBhbmQgCm5lZWRfbWFwcGluZyBpcyB0
cnVlLgoKQnV0IGxvb2tpbmcgYXQgdGhlIGNvZGUsIHJlcyBjYW5ub3QgYmUgMCBoZXJlLi4uIFNv
IHdoeSBhcmUgeW91IGNoZWNraW5nICJyZXMiIGhlcmU/Cgo+ICt9Cj4gKwo+ICsvKgo+ICsgKiBG
b3IgYSBnaXZlbiBkZXZpY2Ugbm9kZToKPiArICogIC0gR2l2ZSBwZXJtaXNzaW9uIHRvIHRoZSBn
dWVzdCB0byBtYW5hZ2UgSVJRIGFuZCBNTUlPIHJhbmdlCj4gKyAqICAtIFJldHJpZXZlIHRoZSBJ
UlEgY29uZmlndXJhdGlvbiAoaS5lIGVkZ2UvbGV2ZWwpIGZyb20gZGV2aWNlIHRyZWUKPiArICog
V2hlbiB0aGUgZGV2aWNlIGlzIG5vdCBtYXJrZWQgZm9yIGd1ZXN0IHBhc3N0aHJvdWdoOgo+ICsg
KiAgLSBBc3NpZ24gdGhlIGRldmljZSB0byB0aGUgZ3Vlc3QgaWYgaXQncyBwcm90ZWN0ZWQgYnkg
YW4gSU9NTVUKPiArICogIC0gTWFwIHRoZSBJUlFzIGFuZCBpb21lbSByZWdpb25zIHRvIERPTTAK
PiArICovCj4gK3N0YXRpYyBpbnQgX19pbml0IGhhbmRsZV9kZXZpY2Uoc3RydWN0IGRvbWFpbiAq
ZCwgc3RydWN0IGR0X2RldmljZV9ub2RlICpkZXYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcDJtX3R5cGVfdCBwMm10KQo+ICt7Cj4gKyAgICB1bnNpZ25lZCBpbnQgbmFkZHI7
Cj4gKyAgICB1bnNpZ25lZCBpbnQgaTsKPiArICAgIGludCByZXM7Cj4gKyAgICB1NjQgYWRkciwg
c2l6ZTsKPiArICAgIGJvb2wgbmVlZF9tYXBwaW5nID0gIWR0X2RldmljZV9mb3JfcGFzc3Rocm91
Z2goZGV2KTsKPiArCj4gKyAgICBuYWRkciA9IGR0X251bWJlcl9vZl9hZGRyZXNzKGRldik7Cj4g
Kwo+ICsgICAgZHRfZHByaW50aygiJXMgcGFzc3Rocm91Z2ggPSAlZCBuYWRkciA9ICV1XG4iLAo+
ICsgICAgICAgICAgICAgICBkdF9ub2RlX2Z1bGxfbmFtZShkZXYpLCBuZWVkX21hcHBpbmcsIG5h
ZGRyKTsKPiArCj4gKyAgICBpZiAoIGR0X2RldmljZV9pc19wcm90ZWN0ZWQoZGV2KSAmJiBuZWVk
X21hcHBpbmcgKQo+ICsgICAgewo+ICsgICAgICAgIGR0X2RwcmludGsoIiVzIHNldHVwIGlvbW11
XG4iLCBkdF9ub2RlX2Z1bGxfbmFtZShkZXYpKTsKPiArICAgICAgICByZXMgPSBpb21tdV9hc3Np
Z25fZHRfZGV2aWNlKGQsIGRldik7Cj4gKyAgICAgICAgaWYgKCByZXMgKQo+ICsgICAgICAgIHsK
PiArICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19FUlIgIkZhaWxlZCB0byBzZXR1cCB0aGUgSU9N
TVUgZm9yICVzXG4iLAo+ICsgICAgICAgICAgICAgICAgICAgZHRfbm9kZV9mdWxsX25hbWUoZGV2
KSk7Cj4gKyAgICAgICAgICAgIHJldHVybiByZXM7Cj4gKyAgICAgICAgfQo+ICsgICAgfQo+ICsK
PiArICAgIHJlcyA9IGhhbmRsZV9pbnRlcnJ1cHRzKGQsIGRldiwgbmVlZF9tYXBwaW5nKTsKPiAr
ICAgIGlmICggcmVzIDwgMCApCj4gKyAgICAgICAgcmV0dXJuIHJlczsKPiArCj4gICAgICAgLyog
R2l2ZSBwZXJtaXNzaW9uIGFuZCBtYXAgTU1JT3MgKi8KPiAgICAgICBmb3IgKCBpID0gMDsgaSA8
IG5hZGRyOyBpKysgKQo+ICAgICAgIHsKPiAKCkNoZWVycywKCi0tIApKdWxpZW4gR3JhbGwKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBt
YWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMu
eGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

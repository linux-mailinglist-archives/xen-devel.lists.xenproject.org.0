Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 57DB53472B
	for <lists+xen-devel@lfdr.de>; Tue,  4 Jun 2019 14:44:58 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hY8mM-0002NW-HZ; Tue, 04 Jun 2019 12:43:02 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=8ILU=UD=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hY8mL-0002NP-Qb
 for xen-devel@lists.xenproject.org; Tue, 04 Jun 2019 12:43:01 +0000
X-Inumbo-ID: 48ed6ac2-86c6-11e9-8980-bc764e045a96
Received: from prv1-mh.provo.novell.com (unknown [137.65.248.33])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 48ed6ac2-86c6-11e9-8980-bc764e045a96;
 Tue, 04 Jun 2019 12:43:00 +0000 (UTC)
Received: from INET-PRV1-MTA by prv1-mh.provo.novell.com
 with Novell_GroupWise; Tue, 04 Jun 2019 06:42:59 -0600
Message-Id: <5CF667500200007800235116@prv1-mh.provo.novell.com>
X-Mailer: Novell GroupWise Internet Agent 18.1.1 
Date: Tue, 04 Jun 2019 06:42:56 -0600
From: "Jan Beulich" <JBeulich@suse.com>
To: "xen-devel" <xen-devel@lists.xenproject.org>
References: <5CF664580200007800235089@prv1-mh.provo.novell.com>
In-Reply-To: <5CF664580200007800235089@prv1-mh.provo.novell.com>
Mime-Version: 1.0
Content-Disposition: inline
Subject: [Xen-devel] [PATCH v2 2/4] PCI: move pdev_list field to common
 structure
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, WeiLiu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <Ian.Jackson@eu.citrix.com>,
 =?UTF-8?Q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@cirix.com>,
 Tim Deegan <tim@xen.org>, Julien Grall <julien.grall@arm.com>,
 Roger Pau Monne <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SXRzIG1hbmFnZW1lbnQgc2hvdWxkbid0IGJlIGFyY2gtc3BlY2lmaWMsIGFuZCBpbiBwYXJ0aWN1
bGFyIHRoZXJlCnNob3VsZCBiZSBubyBuZWVkIGZvciBzcGVjaWFsIHByZWNhdXRpb25zIHdoZW4g
Y3JlYXRpbmcgdGhlIHNwZWNpYWwKZG9tYWlucy4KCkF0IHRoaXMgb2NjYXNpb24KLSBjb3JyZWN0
IHBhcmVudGhlc2l6YXRpb24gb2YgZm9yX2VhY2hfcGRldigpLAotIHN0b3Agb3Blbi1jb2Rpbmcg
Zm9yX2VhY2hfcGRldigpIGluIHZQQ0kgY29kZS4KClNpZ25lZC1vZmYtYnk6IEphbiBCZXVsaWNo
IDxqYmV1bGljaEBzdXNlLmNvbT4KCi0tLSBhL3hlbi9hcmNoL3g4Ni9kb21haW4uYworKysgYi94
ZW4vYXJjaC94ODYvZG9tYWluLmMKQEAgLTQ5Niw3ICs0OTYsNiBAQCBpbnQgYXJjaF9kb21haW5f
Y3JlYXRlKHN0cnVjdCBkb21haW4gKmQsCiAgICAgdWludDMyX3QgZW1mbGFnczsKICAgICBpbnQg
cmM7CiAKLSAgICBJTklUX0xJU1RfSEVBRCgmZC0+YXJjaC5wZGV2X2xpc3QpOwogICAgIElOSVRf
UEFHRV9MSVNUX0hFQUQoJmQtPmFyY2gucmVsbWVtX2xpc3QpOwogCiAgICAgc3Bpbl9sb2NrX2lu
aXQoJmQtPmFyY2guZTgyMF9sb2NrKTsKLS0tIGEveGVuL2FyY2gveDg2L21tLmMKKysrIGIveGVu
L2FyY2gveDg2L21tLmMKQEAgLTI5MSw3ICsyOTEsNiBAQCB2b2lkIF9faW5pdCBhcmNoX2luaXRf
bWVtb3J5KHZvaWQpCiAgICAgICovCiAgICAgZG9tX3hlbiA9IGRvbWFpbl9jcmVhdGUoRE9NSURf
WEVOLCBOVUxMLCBmYWxzZSk7CiAgICAgQlVHX09OKElTX0VSUihkb21feGVuKSk7Ci0gICAgSU5J
VF9MSVNUX0hFQUQoJmRvbV94ZW4tPmFyY2gucGRldl9saXN0KTsKIAogICAgIC8qCiAgICAgICog
SW5pdGlhbGlzZSBvdXIgRE9NSURfSU8gZG9tYWluLgotLS0gYS94ZW4vY29tbW9uL2RvbWFpbi5j
CisrKyBiL3hlbi9jb21tb24vZG9tYWluLmMKQEAgLTM4OSw2ICszODksMTAgQEAgc3RydWN0IGRv
bWFpbiAqZG9tYWluX2NyZWF0ZShkb21pZF90IGRvbQogCiAgICAgcndsb2NrX2luaXQoJmQtPnZu
dW1hX3J3bG9jayk7CiAKKyNpZmRlZiBDT05GSUdfSEFTX1BDSQorICAgIElOSVRfTElTVF9IRUFE
KCZkLT5wZGV2X2xpc3QpOworI2VuZGlmCisKICAgICBlcnIgPSAtRU5PTUVNOwogICAgIGlmICgg
IXphbGxvY19jcHVtYXNrX3ZhcigmZC0+ZGlydHlfY3B1bWFzaykgKQogICAgICAgICBnb3RvIGZh
aWw7Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9wY2lfYW1kX2lvbW11LmMKKysr
IGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL3BjaV9hbWRfaW9tbXUuYwpAQCAtMzE1LDcg
KzMxNSw3IEBAIHN0YXRpYyBpbnQgcmVhc3NpZ25fZGV2aWNlKHN0cnVjdCBkb21haW4KIAogICAg
IGlmICggZGV2Zm4gPT0gcGRldi0+ZGV2Zm4gKQogICAgIHsKLSAgICAgICAgbGlzdF9tb3ZlKCZw
ZGV2LT5kb21haW5fbGlzdCwgJnRhcmdldC0+YXJjaC5wZGV2X2xpc3QpOworICAgICAgICBsaXN0
X21vdmUoJnBkZXYtPmRvbWFpbl9saXN0LCAmdGFyZ2V0LT5wZGV2X2xpc3QpOwogICAgICAgICBw
ZGV2LT5kb21haW4gPSB0YXJnZXQ7CiAgICAgfQogCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL3BjaS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3BjaS5jCkBAIC00NjcsNyAr
NDY3LDcgQEAgc3RhdGljIHZvaWQgX3BjaV9oaWRlX2RldmljZShzdHJ1Y3QgcGNpXwogICAgIGlm
ICggcGRldi0+ZG9tYWluICkKICAgICAgICAgcmV0dXJuOwogICAgIHBkZXYtPmRvbWFpbiA9IGRv
bV94ZW47Ci0gICAgbGlzdF9hZGQoJnBkZXYtPmRvbWFpbl9saXN0LCAmZG9tX3hlbi0+YXJjaC5w
ZGV2X2xpc3QpOworICAgIGxpc3RfYWRkKCZwZGV2LT5kb21haW5fbGlzdCwgJmRvbV94ZW4tPnBk
ZXZfbGlzdCk7CiB9CiAKIGludCBfX2luaXQgcGNpX2hpZGVfZGV2aWNlKHVuc2lnbmVkIGludCBz
ZWcsIHVuc2lnbmVkIGludCBidXMsCkBAIC04MDMsNyArODAzLDcgQEAgaW50IHBjaV9hZGRfZGV2
aWNlKHUxNiBzZWcsIHU4IGJ1cywgdTggZAogICAgICAgICAgICAgZ290byBvdXQ7CiAgICAgICAg
IH0KIAotICAgICAgICBsaXN0X2FkZCgmcGRldi0+ZG9tYWluX2xpc3QsICZoYXJkd2FyZV9kb21h
aW4tPmFyY2gucGRldl9saXN0KTsKKyAgICAgICAgbGlzdF9hZGQoJnBkZXYtPmRvbWFpbl9saXN0
LCAmaGFyZHdhcmVfZG9tYWluLT5wZGV2X2xpc3QpOwogICAgIH0KICAgICBlbHNlCiAgICAgICAg
IGlvbW11X2VuYWJsZV9kZXZpY2UocGRldik7CkBAIC0xMTUzLDcgKzExNTMsNyBAQCBzdGF0aWMg
aW50IF9faHdkb21faW5pdCBfc2V0dXBfaHdkb21fcGNpCiAgICAgICAgICAgICBpZiAoICFwZGV2
LT5kb21haW4gKQogICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIHBkZXYtPmRvbWFpbiA9
IGN0eHQtPmQ7Ci0gICAgICAgICAgICAgICAgbGlzdF9hZGQoJnBkZXYtPmRvbWFpbl9saXN0LCAm
Y3R4dC0+ZC0+YXJjaC5wZGV2X2xpc3QpOworICAgICAgICAgICAgICAgIGxpc3RfYWRkKCZwZGV2
LT5kb21haW5fbGlzdCwgJmN0eHQtPmQtPnBkZXZfbGlzdCk7CiAgICAgICAgICAgICAgICAgc2V0
dXBfb25lX2h3ZG9tX2RldmljZShjdHh0LCBwZGV2KTsKICAgICAgICAgICAgIH0KICAgICAgICAg
ICAgIGVsc2UgaWYgKCBwZGV2LT5kb21haW4gPT0gZG9tX3hlbiApCi0tLSBhL3hlbi9kcml2ZXJz
L3Bhc3N0aHJvdWdoL3Z0ZC9pb21tdS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3Z0
ZC9pb21tdS5jCkBAIC0yNDUzLDcgKzI0NTMsNyBAQCBzdGF0aWMgaW50IHJlYXNzaWduX2Rldmlj
ZV9vd25lcnNoaXAoCiAKICAgICBpZiAoIGRldmZuID09IHBkZXYtPmRldmZuICkKICAgICB7Ci0g
ICAgICAgIGxpc3RfbW92ZSgmcGRldi0+ZG9tYWluX2xpc3QsICZ0YXJnZXQtPmFyY2gucGRldl9s
aXN0KTsKKyAgICAgICAgbGlzdF9tb3ZlKCZwZGV2LT5kb21haW5fbGlzdCwgJnRhcmdldC0+cGRl
dl9saXN0KTsKICAgICAgICAgcGRldi0+ZG9tYWluID0gdGFyZ2V0OwogICAgIH0KIAotLS0gYS94
ZW4vZHJpdmVycy92cGNpL2hlYWRlci5jCisrKyBiL3hlbi9kcml2ZXJzL3ZwY2kvaGVhZGVyLmMK
QEAgLTI2Nyw3ICsyNjcsNyBAQCBzdGF0aWMgaW50IG1vZGlmeV9iYXJzKGNvbnN0IHN0cnVjdCBw
Y2lfCiAgICAgICogQ2hlY2sgZm9yIG92ZXJsYXBzIHdpdGggb3RoZXIgQkFScy4gTm90ZSB0aGF0
IG9ubHkgQkFScyB0aGF0IGFyZQogICAgICAqIGN1cnJlbnRseSBtYXBwZWQgKGVuYWJsZWQpIGFy
ZSBjaGVja2VkIGZvciBvdmVybGFwcy4KICAgICAgKi8KLSAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5
KHRtcCwgJnBkZXYtPmRvbWFpbi0+YXJjaC5wZGV2X2xpc3QsIGRvbWFpbl9saXN0KQorICAgIGZv
cl9lYWNoX3BkZXYgKCBwZGV2LT5kb21haW4sIHRtcCApCiAgICAgewogICAgICAgICBpZiAoIHRt
cCA9PSBwZGV2ICkKICAgICAgICAgewotLS0gYS94ZW4vZHJpdmVycy92cGNpL21zaS5jCisrKyBi
L3hlbi9kcml2ZXJzL3ZwY2kvbXNpLmMKQEAgLTI4Miw3ICsyODIsNyBAQCB2b2lkIHZwY2lfZHVt
cF9tc2kodm9pZCkKIAogICAgICAgICBwcmludGsoInZQQ0kgTVNJL01TSS1YIGQlZFxuIiwgZC0+
ZG9tYWluX2lkKTsKIAotICAgICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5ICggcGRldiwgJmQtPmFy
Y2gucGRldl9saXN0LCBkb21haW5fbGlzdCApCisgICAgICAgIGZvcl9lYWNoX3BkZXYgKCBkLCBw
ZGV2ICkKICAgICAgICAgewogICAgICAgICAgICAgY29uc3Qgc3RydWN0IHZwY2lfbXNpICptc2k7
CiAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgdnBjaV9tc2l4ICptc2l4OwotLS0gYS94ZW4vaW5j
bHVkZS9hc20teDg2L2RvbWFpbi5oCisrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvZG9tYWluLmgK
QEAgLTI5OCw4ICsyOTgsNiBAQCBzdHJ1Y3QgYXJjaF9kb21haW4KIAogICAgIGJvb2xfdCBzM19p
bnRlZ3JpdHk7CiAKLSAgICBzdHJ1Y3QgbGlzdF9oZWFkIHBkZXZfbGlzdDsKLQogICAgIHVuaW9u
IHsKICAgICAgICAgc3RydWN0IHB2X2RvbWFpbiBwdjsKICAgICAgICAgc3RydWN0IGh2bV9kb21h
aW4gaHZtOwpAQCAtNDc2LDggKzQ3NCw2IEBAIHN0cnVjdCBhcmNoX2RvbWFpbgogI2RlZmluZSBo
YXNfcGlycShkKSAgICAgICAgKCEhKChkKS0+YXJjaC5lbXVsYXRpb25fZmxhZ3MgJiBYODZfRU1V
X1VTRV9QSVJRKSkKICNkZWZpbmUgaGFzX3ZwY2koZCkgICAgICAgICghISgoZCktPmFyY2guZW11
bGF0aW9uX2ZsYWdzICYgWDg2X0VNVV9WUENJKSkKIAotI2RlZmluZSBoYXNfYXJjaF9wZGV2cyhk
KSAgICAoIWxpc3RfZW1wdHkoJihkKS0+YXJjaC5wZGV2X2xpc3QpKQotCiAjZGVmaW5lIGdkdF9s
ZHRfcHRfaWR4KHYpIFwKICAgICAgICgodiktPnZjcHVfaWQgPj4gKFBBR0VUQUJMRV9PUkRFUiAt
IEdEVF9MRFRfVkNQVV9TSElGVCkpCiAjZGVmaW5lIHB2X2dkdF9wdGVzKHYpIFwKLS0tIGEveGVu
L2luY2x1ZGUveGVuL3BjaS5oCisrKyBiL3hlbi9pbmNsdWRlL3hlbi9wY2kuaApAQCAtMTIxLDcg
KzEyMSw5IEBAIHN0cnVjdCBwY2lfZGV2IHsKIH07CiAKICNkZWZpbmUgZm9yX2VhY2hfcGRldihk
b21haW4sIHBkZXYpIFwKLSAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5KHBkZXYsICYoZG9tYWluLT5h
cmNoLnBkZXZfbGlzdCksIGRvbWFpbl9saXN0KQorICAgIGxpc3RfZm9yX2VhY2hfZW50cnkocGRl
diwgJihkb21haW4pLT5wZGV2X2xpc3QsIGRvbWFpbl9saXN0KQorCisjZGVmaW5lIGhhc19hcmNo
X3BkZXZzKGQpICghbGlzdF9lbXB0eSgmKGQpLT5wZGV2X2xpc3QpKQogCiAvKgogICogVGhlIHBj
aWRldnNfbG9jayBwcm90ZWN0IGFsbGRldnNfbGlzdCwgYW5kIHRoZSBhc3NpZ25tZW50IGZvciB0
aGUgCi0tLSBhL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC5oCisrKyBiL3hlbi9pbmNsdWRlL3hlbi9z
Y2hlZC5oCkBAIC0zNzAsNiArMzcwLDEwIEBAIHN0cnVjdCBkb21haW4KIAogICAgIGludDY0X3Qg
ICAgICAgICAgdGltZV9vZmZzZXRfc2Vjb25kczsKIAorI2lmZGVmIENPTkZJR19IQVNfUENJCisg
ICAgc3RydWN0IGxpc3RfaGVhZCBwZGV2X2xpc3Q7CisjZW5kaWYKKwogI2lmZGVmIENPTkZJR19I
QVNfUEFTU1RIUk9VR0gKICAgICBzdHJ1Y3QgZG9tYWluX2lvbW11IGlvbW11OwogI2VuZGlmCgoK
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2
ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xp
c3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

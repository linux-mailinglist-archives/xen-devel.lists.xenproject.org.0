Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 9C24EC110B
	for <lists+xen-devel@lfdr.de>; Sat, 28 Sep 2019 16:24:12 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iEDb6-0003kq-8E; Sat, 28 Sep 2019 14:21:20 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=9Ov/=XX=invisiblethingslab.com=marmarek@srs-us1.protection.inumbo.net>)
 id 1iEDb4-0003jx-Ma
 for xen-devel@lists.xenproject.org; Sat, 28 Sep 2019 14:21:18 +0000
X-Inumbo-ID: 3b1c8f8c-e1fb-11e9-969b-12813bfff9fa
Received: from out5-smtp.messagingengine.com (unknown [66.111.4.29])
 by localhost (Halon) with ESMTPS
 id 3b1c8f8c-e1fb-11e9-969b-12813bfff9fa;
 Sat, 28 Sep 2019 14:21:15 +0000 (UTC)
Received: from compute7.internal (compute7.nyi.internal [10.202.2.47])
 by mailout.nyi.internal (Postfix) with ESMTP id 8FEB321731;
 Sat, 28 Sep 2019 10:21:15 -0400 (EDT)
Received: from mailfrontend2 ([10.202.2.163])
 by compute7.internal (MEProxy); Sat, 28 Sep 2019 10:21:15 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=
 messagingengine.com; h=cc:content-transfer-encoding:content-type
 :date:from:in-reply-to:message-id:mime-version:references
 :subject:to:x-me-proxy:x-me-proxy:x-me-sender:x-me-sender
 :x-sasl-enc; s=fm3; bh=wwYkWjrYfCujVde3AkWQVL4DLVVmqV5do1n+Or3fk
 wA=; b=FNF1SD/k8ydlYvYA5+EJ1t4Vl3vI43PDvRa6FhGs7YVcVfmMAyxqcWudm
 fnWrUlpja6WgQHC8f0ofVeIXKJLLrtnntPIenbIl8D2/ONeT9jeuBKYX+4OCZ3B6
 WqBQmIz6Mji4N1g6yrQpykDKlHV/xFF7qctKWRuPX6cc2H7CDeswq21G9VYdv9ST
 KAgo8uqNj9RXEdJFbzkO36xUci+J/PjeP+WJ5ZGkTk/uMzcpKkFCyzf4HwIEiY1Z
 /c9el2ZfyPLT4C4TliVrUJtLspopjCz7YXwzLgyTwdPO5glKYvG/N/3JXyEQ/f9J
 zn8i+2KsW11tTsAe9tz9O3UoO9m6g==
X-ME-Sender: <xms:W2yPXQVj6uAj53VqVAjhBdasKSb3swT5udvkwdSYgp4ZR7YmJh33dg>
X-ME-Proxy-Cause: gggruggvucftvghtrhhoucdtuddrgedufedrfeekgdejgecutefuodetggdotefrodftvf
 curfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfghnecu
 uegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenuc
 fjughrpefhvffufffkofgjfhggtgfgsehtkeertdertdejnecuhfhrohhmpeforghrvghk
 ucforghrtgiihihkohifshhkihdqifpkrhgvtghkihcuoehmrghrmhgrrhgvkhesihhnvh
 hishhisghlvghthhhinhhgshhlrggsrdgtohhmqeenucfkphepledurdeihedrfeegrdef
 feenucfrrghrrghmpehmrghilhhfrhhomhepmhgrrhhmrghrvghksehinhhvihhsihgslh
 gvthhhihhnghhslhgrsgdrtghomhenucevlhhushhtvghrufhiiigvpedv
X-ME-Proxy: <xmx:W2yPXSa1ftBqHB9bOf3Qt4X2J05OB1Ed2JnWLJMGE_x9h2I7wv-qKg>
 <xmx:W2yPXe16_DxdGG-YNHR-eRO8jBpGihYc-xD-SrbxaxVH91F_tPgF4A>
 <xmx:W2yPXciSA_XmcQsNdQzUWy0iELF3paHNg3pow0FDZe-cIFuZvdnPeQ>
 <xmx:W2yPXfNrISpl7Wsn5nsoa0I9AlazFj22k9TT-5LE7sQh8eVr5S4t1w>
Received: from localhost.localdomain (ip5b412221.dynamic.kabel-deutschland.de
 [91.65.34.33])
 by mail.messagingengine.com (Postfix) with ESMTPA id 7FDB5D6005F;
 Sat, 28 Sep 2019 10:21:14 -0400 (EDT)
From: =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>
To: xen-devel@lists.xenproject.org
Date: Sat, 28 Sep 2019 16:20:37 +0200
Message-Id: <d08745ac0de6d8115a40fd5984a0984d245919f8.1569680095.git-series.marmarek@invisiblethingslab.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <cover.ab9be47e05c2dc2aa047d0a810c29ecd14bfe463.1569680095.git-series.marmarek@invisiblethingslab.com>
References: <cover.ab9be47e05c2dc2aa047d0a810c29ecd14bfe463.1569680095.git-series.marmarek@invisiblethingslab.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v8 4/4] libxl: don't try to manipulate json
 config for stubdomain
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Anthony PERARD <anthony.perard@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Wei Liu <wei.liu2@citrix.com>,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Wei Liu <wl@xen.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

U3R1YmRvbWFpbiBkbyBub3QgaGF2ZSBpdCdzIG93biBjb25maWcgZmlsZSAtIGl0cyBjb25maWd1
cmF0aW9uIGlzCmRlcml2ZWQgZnJvbSB0YXJnZXQgZG9tYWlucy4gRG8gbm90IHRyeSB0byBtYW5p
cHVsYXRlIGl0IHdoZW4gYXR0YWNoaW5nClBDSSBkZXZpY2UuCgpUaGlzIGJ1ZyBwcmV2ZW50ZWQg
c3RhcnRpbmcgSFZNIHdpdGggc3R1YmRvbWFpbiBhbmQgUENJIHBhc3N0aHJvdWdoCmRldmljZSBh
dHRhY2hlZC4KClNpZ25lZC1vZmYtYnk6IE1hcmVrIE1hcmN6eWtvd3NraS1Hw7NyZWNraSA8bWFy
bWFyZWtAaW52aXNpYmxldGhpbmdzbGFiLmNvbT4KQWNrZWQtYnk6IFdlaSBMaXUgPHdlaS5saXUy
QGNpdHJpeC5jb20+Ci0tLQpDaGFuZ2VzIGluIHYzOgogLSBza2lwIGxpYnhsX19kbV9jaGVja19z
dGFydCB0b28sIGFzIHN0dWJkb21haW4gaXMgZ3VhcmFudGVlZCB0byBiZQogICBydW5uaW5nIGF0
IHRoaXMgc3RhZ2UgYWxyZWFkeQogLSBkbyBub3QgaW5pdCBkX2NvbmZpZyBhdCBhbGwsIGFzIGl0
IGlzIHVzZWQgb25seSBmb3IganNvbiBtYW5pcHVsYXRpb24KQ2hhbmdlcyBpbiB2NDoKIC0gYWRq
dXN0IGNvbW1lbnQgc3R5bGUKQ2hhbmdlcyBpbiB2ODoKIC0gcmViYXNlIG9uIHN0YWdpbmcKLS0t
CiB0b29scy9saWJ4bC9saWJ4bF9wY2kuYyB8IDQyICsrKysrKysrKysrKysrKysrKysrKysrKysr
Ky0tLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDI3IGluc2VydGlvbnMoKyksIDE1IGRl
bGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhsL2xpYnhsX3BjaS5jIGIvdG9vbHMv
bGlieGwvbGlieGxfcGNpLmMKaW5kZXggYmEwMjg3ZC4uZGM5NjE2MyAxMDA2NDQKLS0tIGEvdG9v
bHMvbGlieGwvbGlieGxfcGNpLmMKKysrIGIvdG9vbHMvbGlieGwvbGlieGxfcGNpLmMKQEAgLTEy
Niw4ICsxMjYsMTEgQEAgc3RhdGljIGludCBsaWJ4bF9fZGV2aWNlX3BjaV9hZGRfeGVuc3RvcmUo
bGlieGxfX2djICpnYywKICAgICBpbnQgcmM7CiAgICAgbGlieGxfZG9tYWluX2NvbmZpZyBkX2Nv
bmZpZzsKICAgICBsaWJ4bF9fZG9tYWluX3VzZXJkYXRhX2xvY2sgKmxvY2sgPSBOVUxMOworICAg
IGJvb2wgaXNfc3R1YmRvbWFpbiA9IGxpYnhsX2lzX3N0dWJkb20oQ1RYLCBkb21pZCwgTlVMTCk7
CiAKLSAgICBsaWJ4bF9kb21haW5fY29uZmlnX2luaXQoJmRfY29uZmlnKTsKKyAgICAvKiBTdHVi
ZG9tYWluIGRvZXNuJ3QgaGF2ZSBvd24gY29uZmlnLiAqLworICAgIGlmICghaXNfc3R1YmRvbWFp
bikKKyAgICAgICAgbGlieGxfZG9tYWluX2NvbmZpZ19pbml0KCZkX2NvbmZpZyk7CiAKICAgICBi
ZV9wYXRoID0gbGlieGxfX2RvbWFpbl9kZXZpY2VfYmFja2VuZF9wYXRoKGdjLCAwLCBkb21pZCwg
MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExJQlhM
X19ERVZJQ0VfS0lORF9QQ0kpOwpAQCAtMTUzLDI3ICsxNTYsMzUgQEAgc3RhdGljIGludCBsaWJ4
bF9fZGV2aWNlX3BjaV9hZGRfeGVuc3RvcmUobGlieGxfX2djICpnYywKICAgICBpZiAoIXN0YXJ0
aW5nKQogICAgICAgICBmbGV4YXJyYXlfYXBwZW5kX3BhaXIoYmFjaywgInN0YXRlIiwgR0NTUFJJ
TlRGKCIlZCIsIFhlbmJ1c1N0YXRlUmVjb25maWd1cmluZykpOwogCi0gICAgbG9jayA9IGxpYnhs
X19sb2NrX2RvbWFpbl91c2VyZGF0YShnYywgZG9taWQpOwotICAgIGlmICghbG9jaykgewotICAg
ICAgICByYyA9IEVSUk9SX0xPQ0tfRkFJTDsKLSAgICAgICAgZ290byBvdXQ7Ci0gICAgfQorICAg
IC8qCisgICAgICogU3R1YmRvbWluIGNvbmZpZyBpcyBkZXJpdmVkIGZyb20gaXRzIHRhcmdldCBk
b21haW4sIGl0IGRvZXNuJ3QgaGF2ZQorICAgICAqIGl0cyBvd24gZmlsZS4KKyAgICAgKi8KKyAg
ICBpZiAoIWlzX3N0dWJkb21haW4pIHsKKyAgICAgICAgbG9jayA9IGxpYnhsX19sb2NrX2RvbWFp
bl91c2VyZGF0YShnYywgZG9taWQpOworICAgICAgICBpZiAoIWxvY2spIHsKKyAgICAgICAgICAg
IHJjID0gRVJST1JfTE9DS19GQUlMOworICAgICAgICAgICAgZ290byBvdXQ7CisgICAgICAgIH0K
IAotICAgIHJjID0gbGlieGxfX2dldF9kb21haW5fY29uZmlndXJhdGlvbihnYywgZG9taWQsICZk
X2NvbmZpZyk7Ci0gICAgaWYgKHJjKSBnb3RvIG91dDsKKyAgICAgICAgcmMgPSBsaWJ4bF9fZ2V0
X2RvbWFpbl9jb25maWd1cmF0aW9uKGdjLCBkb21pZCwgJmRfY29uZmlnKTsKKyAgICAgICAgaWYg
KHJjKSBnb3RvIG91dDsKIAotICAgIGRldmljZV9hZGRfZG9tYWluX2NvbmZpZyhnYywgJmRfY29u
ZmlnLCAmbGlieGxfX3BjaWRldl9kZXZ0eXBlLAotICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwY2lkZXYpOworICAgICAgICBkZXZpY2VfYWRkX2RvbWFpbl9jb25maWcoZ2MsICZkX2NvbmZp
ZywgJmxpYnhsX19wY2lkZXZfZGV2dHlwZSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHBjaWRldik7CiAKLSAgICByYyA9IGxpYnhsX19kbV9jaGVja19zdGFydChnYywgJmRfY29u
ZmlnLCBkb21pZCk7Ci0gICAgaWYgKHJjKSBnb3RvIG91dDsKKyAgICAgICAgcmMgPSBsaWJ4bF9f
ZG1fY2hlY2tfc3RhcnQoZ2MsICZkX2NvbmZpZywgZG9taWQpOworICAgICAgICBpZiAocmMpIGdv
dG8gb3V0OworICAgIH0KIAogICAgIGZvciAoOzspIHsKICAgICAgICAgcmMgPSBsaWJ4bF9feHNf
dHJhbnNhY3Rpb25fc3RhcnQoZ2MsICZ0KTsKICAgICAgICAgaWYgKHJjKSBnb3RvIG91dDsKIAot
ICAgICAgICByYyA9IGxpYnhsX19zZXRfZG9tYWluX2NvbmZpZ3VyYXRpb24oZ2MsIGRvbWlkLCAm
ZF9jb25maWcpOwotICAgICAgICBpZiAocmMpIGdvdG8gb3V0OworICAgICAgICBpZiAobG9jaykg
eworICAgICAgICAgICAgcmMgPSBsaWJ4bF9fc2V0X2RvbWFpbl9jb25maWd1cmF0aW9uKGdjLCBk
b21pZCwgJmRfY29uZmlnKTsKKyAgICAgICAgICAgIGlmIChyYykgZ290byBvdXQ7CisgICAgICAg
IH0KIAogICAgICAgICBsaWJ4bF9feHNfd3JpdGV2KGdjLCB0LCBiZV9wYXRoLCBsaWJ4bF9feHNf
a3ZzX29mX2ZsZXhhcnJheShnYywgYmFjaykpOwogCkBAIC0xODUsNyArMTk2LDggQEAgc3RhdGlj
IGludCBsaWJ4bF9fZGV2aWNlX3BjaV9hZGRfeGVuc3RvcmUobGlieGxfX2djICpnYywKIG91dDoK
ICAgICBsaWJ4bF9feHNfdHJhbnNhY3Rpb25fYWJvcnQoZ2MsICZ0KTsKICAgICBpZiAobG9jaykg
bGlieGxfX3VubG9ja19kb21haW5fdXNlcmRhdGEobG9jayk7Ci0gICAgbGlieGxfZG9tYWluX2Nv
bmZpZ19kaXNwb3NlKCZkX2NvbmZpZyk7CisgICAgaWYgKCFpc19zdHViZG9tYWluKQorICAgICAg
ICBsaWJ4bF9kb21haW5fY29uZmlnX2Rpc3Bvc2UoJmRfY29uZmlnKTsKICAgICByZXR1cm4gcmM7
CiB9CiAKLS0gCmdpdC1zZXJpZXMgMC45LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3Rz
LnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0
aW5mby94ZW4tZGV2ZWw=

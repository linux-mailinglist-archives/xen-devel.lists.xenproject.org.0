Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 0FFDF83E48
	for <lists+xen-devel@lfdr.de>; Wed,  7 Aug 2019 02:25:57 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hv9jY-0004eR-0O; Wed, 07 Aug 2019 00:23:16 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=PRvR=WD=kernel.org=sstabellini@srs-us1.protection.inumbo.net>)
 id 1hv9jX-0004dn-Ai
 for xen-devel@lists.xenproject.org; Wed, 07 Aug 2019 00:23:15 +0000
X-Inumbo-ID: 8b3e6983-b8a9-11e9-8980-bc764e045a96
Received: from mail.kernel.org (unknown [198.145.29.99])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 8b3e6983-b8a9-11e9-8980-bc764e045a96;
 Wed, 07 Aug 2019 00:23:13 +0000 (UTC)
Received: from sstabellini-ThinkPad-T480s.xilinx.com
 (c-67-164-102-47.hsd1.ca.comcast.net [67.164.102.47])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 25CF5217D7;
 Wed,  7 Aug 2019 00:23:13 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=default; t=1565137393;
 bh=xnN7N9SBAauUcp9S3b/w79ZpDs9tT93O9O8L4dJP124=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=i6yo3+Nf52JavZbWcnKwa3hTrL8mOPNBpndy6+rNpYMbRXjQlqEpRa8WF92x8z2Iy
 2zBMfwPHccd2zCbgDjGmpaEvuDxCXY6auyEB+s4zVkqN+kMZarYlz279hRO2sImIoP
 nJ1tJnksMN96Fc1J8HQVWRtWg0CoHGlqGqdY57PY=
From: Stefano Stabellini <sstabellini@kernel.org>
To: xen-devel@lists.xenproject.org
Date: Tue,  6 Aug 2019 17:23:08 -0700
Message-Id: <20190807002311.9906-3-sstabellini@kernel.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <alpine.DEB.2.21.1908061708420.2451@sstabellini-ThinkPad-T480s>
References: <alpine.DEB.2.21.1908061708420.2451@sstabellini-ThinkPad-T480s>
Subject: [Xen-devel] [PATCH v4 3/6] xen: extend XEN_DOMCTL_memory_mapping to
 handle memory policy
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <stefanos@xilinx.com>, julien.grall@arm.com,
 sstabellini@kernel.org, JBeulich@suse.com, andrew.cooper3@citrix.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

UmV1c2UgdGhlIGV4aXN0aW5nIHBhZGRpbmcgZmllbGQgdG8gcGFzcyBtZW1vcnkgcG9saWN5IGlu
Zm9ybWF0aW9uLiBPbgpBcm0sIHRoZSBjYWxsZXIgY2FuIHNwZWNpZnkgd2hldGhlciB0aGUgbWVt
b3J5IHNob3VsZCBiZSBtYXBwZWQgYXMKRGV2aWNlLW5HblJFIChEZXZpY2UgTWVtb3J5IG9uIEFy
bXY3KSBhdCBzdGFnZS0yLCB3aGljaCBpcyB0aGUgZGVmYXVsdAphbmQgdGhlIG9ubHkgcG9zc2li
aWxpdHkgdG9kYXksIG9yIGNhY2hlYWJsZSBtZW1vcnkgd3JpdGUtYmFjay4gVGhlCnJlc3VsdGlu
ZyBtZW1vcnkgYXR0cmlidXRlcyB3aWxsIGJlIGEgY29tYmluYXRpb24gb2Ygc3RhZ2UtMiBhbmQg
c3RhZ2UtMQptZW1vcnkgYXR0cmlidXRlczogaXQgd2lsbCBhY3R1YWxseSBiZSB0aGUgc3Ryb25n
ZXN0IGJldHdlZW4gdGhlIDIKc3RhZ2VzIGF0dHJpYnV0ZXMuCgpPbiB4ODYsIHRoZSBvbmx5IG9w
dGlvbiBpcyB1bmNhY2hhYmxlLiBUaGUgY3VycmVudCBiZWhhdmlvciBiZWNvbWVzIHRoZQpkZWZh
dWx0IChudW1lcmljYWxseSAnMCcpLiBBbHNvIGV4cGxpY2l0ZWx5IHNldCB0aGUgbWVtb3J5X3Bv
bGljeSBmaWVsZAp0byAwIGluIGxpYnhjLgoKT24gQXJtLCBtYXAgRGV2aWNlLW5HblJFIGFzIHAy
bV9tbWlvX2RpcmVjdF9kZXYgKGFzIGl0IGlzIGFscmVhZHkgZG9uZQp0b2RheSkgYW5kIFdCIGNh
Y2hlYWJsZSBtZW1vcnkgYXMgcDJtX21taW9fZGlyZWN0X2MuCgpPbiB4ODYsIHRoZXJlIGlzIGp1
c3Qgb25lIHBvbGljeSB3aGljaCBpcyB0aGUgZGVmYXVsdC4KClNpZ25lZC1vZmYtYnk6IFN0ZWZh
bm8gU3RhYmVsbGluaSA8c3RlZmFub3NAeGlsaW54LmNvbT4KQ0M6IEpCZXVsaWNoQHN1c2UuY29t
CkNDOiBhbmRyZXcuY29vcGVyM0BjaXRyaXguY29tCgotLS0KCkNoYW5nZXMgaW4gdjQ6Ci0gcmV0
dXJuIC1FSU5WQUwgb24gWEVOX0RPTUNUTF9tZW1vcnlfbWFwcGluZyBvbiBkZWZhdWx0IGxhYmVs
Ci0gdXNlIE1FTU9SWV9QT0xJQ1lfREVGQVVMVCBpbnN0ZWFkIG9mIDAKLSB1aW50MzJfdCBtZW1v
cnlfcG9saWN5IC0+IHVuc2lnbmVkIGludCBtZW1vcnlfcG9saWN5Ci0gY2FjaGU9IC0+IHBvbGlj
eT0KLSBNRU1PUllfUE9MSUNZX1g4Nl9VQ19NSU5VUyAtPiBNRU1PUllfUE9MSUNZX0RFRkFVTFQK
LSBBUk0gLT4gQXJtCgpDaGFuZ2VzIGluIHYzOgotIGVycm9yIGhhbmRsaW5nIGluIGRlZmF1bHQg
bGFiZWwgb2YgdGhlIHN3aXRjaAotIHNldCBtZW1vcnlfcG9saWN5IHRvIDAgaW4gbGlieGMKLSBp
bXByb3ZlIGNvbW1pdCBtZXNzYWdlCi0gaW1wcm92ZSBjb21tZW50cwotIHMvRGV2aWNlLW5HUkUv
RGV2aWNlLW5HblJFL2cKLSBhZGQgaW4tY29kZSBjb21tZW50Ci0gcy9NRU1PUllfUE9MSUNZX1g4
Nl9VQy9NRU1PUllfUE9MSUNZX1g4Nl9VQ19NSU5VUy9nCi0gI2lmZGVmIGh5cGVyY2FsbCBkZWZp
bmVzIGFjY29yZGluZyB0byBhcmNoCgpDaGFuZ2VzIGluIHYyOgotIHJlYmFzZQotIHVzZSBwMm1f
bW1pb19kaXJlY3RfYwotIHVzZSBFT1BOT1RTVVBQCi0gcmVuYW1lIGNhY2hlX3BvbGljeSB0byBt
ZW1vcnkgcG9saWN5Ci0gcmVuYW1lIE1FTU9SWV9QT0xJQ1lfREVWTUVNIHRvIE1FTU9SWV9QT0xJ
Q1lfQVJNX0RFVl9uR1JFCi0gcmVuYW1lIE1FTU9SWV9QT0xJQ1lfTUVNT1JZIHRvIE1FTU9SWV9Q
T0xJQ1lfQVJNX01FTV9XQgotIGFkZCBNRU1PUllfUE9MSUNZX1g4Nl9VQwotIGFkZCBNRU1PUllf
UE9MSUNZX0RFRkFVTFQgYW5kIHVzZSBpdAotLS0KIHRvb2xzL2xpYnhjL3hjX2RvbWFpbi5jICAg
ICB8ICAxICsKIHhlbi9jb21tb24vZG9tY3RsLmMgICAgICAgICB8IDI1ICsrKysrKysrKysrKysr
KysrKysrKysrLS0KIHhlbi9pbmNsdWRlL3B1YmxpYy9kb21jdGwuaCB8IDIwICsrKysrKysrKysr
KysrKysrKystCiAzIGZpbGVzIGNoYW5nZWQsIDQzIGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25z
KC0pCgpkaWZmIC0tZ2l0IGEvdG9vbHMvbGlieGMveGNfZG9tYWluLmMgYi90b29scy9saWJ4Yy94
Y19kb21haW4uYwppbmRleCAwNWQ3NzFmMmNlLi4wNzVmZmI5ZWQxIDEwMDY0NAotLS0gYS90b29s
cy9saWJ4Yy94Y19kb21haW4uYworKysgYi90b29scy9saWJ4Yy94Y19kb21haW4uYwpAQCAtMjA3
MCw2ICsyMDcwLDcgQEAgaW50IHhjX2RvbWFpbl9tZW1vcnlfbWFwcGluZygKICAgICBkb21jdGwu
Y21kID0gWEVOX0RPTUNUTF9tZW1vcnlfbWFwcGluZzsKICAgICBkb21jdGwuZG9tYWluID0gZG9t
aWQ7CiAgICAgZG9tY3RsLnUubWVtb3J5X21hcHBpbmcuYWRkX21hcHBpbmcgPSBhZGRfbWFwcGlu
ZzsKKyAgICBkb21jdGwudS5tZW1vcnlfbWFwcGluZy5tZW1vcnlfcG9saWN5ID0gTUVNT1JZX1BP
TElDWV9ERUZBVUxUOwogICAgIG1heF9iYXRjaF9zeiA9IG5yX21mbnM7CiAgICAgZG8KICAgICB7
CmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL2RvbWN0bC5jIGIveGVuL2NvbW1vbi9kb21jdGwuYwpp
bmRleCAyNjc0Y2FhMDA1Li4wNjM1MjNjN2Y3IDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL2RvbWN0
bC5jCisrKyBiL3hlbi9jb21tb24vZG9tY3RsLmMKQEAgLTkyMCw2ICs5MjAsNyBAQCBsb25nIGRv
X2RvbWN0bChYRU5fR1VFU1RfSEFORExFX1BBUkFNKHhlbl9kb21jdGxfdCkgdV9kb21jdGwpCiAg
ICAgICAgIHVuc2lnbmVkIGxvbmcgbWZuX2VuZCA9IG1mbiArIG5yX21mbnMgLSAxOwogICAgICAg
ICBpbnQgYWRkID0gb3AtPnUubWVtb3J5X21hcHBpbmcuYWRkX21hcHBpbmc7CiAgICAgICAgIHAy
bV90eXBlX3QgcDJtdDsKKyAgICAgICAgdW5zaWduZWQgaW50IG1lbW9yeV9wb2xpY3kgPSBvcC0+
dS5tZW1vcnlfbWFwcGluZy5tZW1vcnlfcG9saWN5OwogCiAgICAgICAgIHJldCA9IC1FSU5WQUw7
CiAgICAgICAgIGlmICggbWZuX2VuZCA8IG1mbiB8fCAvKiB3cmFwPyAqLwpAQCAtOTUwLDkgKzk1
MSwyOSBAQCBsb25nIGRvX2RvbWN0bChYRU5fR1VFU1RfSEFORExFX1BBUkFNKHhlbl9kb21jdGxf
dCkgdV9kb21jdGwpCiAgICAgICAgIGlmICggYWRkICkKICAgICAgICAgewogICAgICAgICAgICAg
cHJpbnRrKFhFTkxPR19HX0RFQlVHCi0gICAgICAgICAgICAgICAgICAgIm1lbW9yeV9tYXA6YWRk
OiBkb20lZCBnZm49JWx4IG1mbj0lbHggbnI9JWx4XG4iLAotICAgICAgICAgICAgICAgICAgIGQt
PmRvbWFpbl9pZCwgZ2ZuLCBtZm4sIG5yX21mbnMpOworICAgICAgICAgICAgICAgICAgICJtZW1v
cnlfbWFwOmFkZDogZG9tJWQgZ2ZuPSVseCBtZm49JWx4IG5yPSVseCBwb2xpY3k9JXVcbiIsCisg
ICAgICAgICAgICAgICAgICAgZC0+ZG9tYWluX2lkLCBnZm4sIG1mbiwgbnJfbWZucywgbWVtb3J5
X3BvbGljeSk7CiAKKyAgICAgICAgICAgIHN3aXRjaCAoIG1lbW9yeV9wb2xpY3kgKQorICAgICAg
ICAgICAgeworI2lmZGVmIENPTkZJR19BUk0KKyAgICAgICAgICAgICAgICBjYXNlIE1FTU9SWV9Q
T0xJQ1lfQVJNX01FTV9XQjoKKyAgICAgICAgICAgICAgICAgICAgcDJtdCA9IHAybV9tbWlvX2Rp
cmVjdF9jOworICAgICAgICAgICAgICAgICAgICBicmVhazsKKyAgICAgICAgICAgICAgICBjYXNl
IE1FTU9SWV9QT0xJQ1lfQVJNX0RFVl9uR25SRToKKyAgICAgICAgICAgICAgICAgICAgcDJtdCA9
IHAybV9tbWlvX2RpcmVjdF9kZXY7CisgICAgICAgICAgICAgICAgICAgIGJyZWFrOworI2VuZGlm
CisjaWZkZWYgQ09ORklHX1g4NgorICAgICAgICAgICAgICAgIGNhc2UgTUVNT1JZX1BPTElDWV9E
RUZBVUxUOgorICAgICAgICAgICAgICAgICAgICBwMm10ID0gcDJtX21taW9fZGlyZWN0OworICAg
ICAgICAgICAgICAgICAgICBicmVhazsKKyNlbmRpZgorICAgICAgICAgICAgICAgIGRlZmF1bHQ6
CisgICAgICAgICAgICAgICAgICAgIGRvbWN0bF9sb2NrX3JlbGVhc2UoKTsKKyAgICAgICAgICAg
ICAgICAgICAgcmV0ID0gLUVJTlZBTDsKKyAgICAgICAgICAgICAgICAgICAgZ290byBkb21jdGxf
b3V0X3VubG9ja19kb21vbmx5OworICAgICAgICAgICAgfQogICAgICAgICAgICAgcmV0ID0gbWFw
X21taW9fcmVnaW9ucyhkLCBfZ2ZuKGdmbiksIG5yX21mbnMsIF9tZm4obWZuKSwgcDJtdCk7CiAg
ICAgICAgICAgICBpZiAoIHJldCA8IDAgKQogICAgICAgICAgICAgICAgIHByaW50ayhYRU5MT0df
R19XQVJOSU5HCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmggYi94ZW4v
aW5jbHVkZS9wdWJsaWMvZG9tY3RsLmgKaW5kZXggMTk0ODZkNWUzMi4uYjkwNzg0MDBmYSAxMDA2
NDQKLS0tIGEveGVuL2luY2x1ZGUvcHVibGljL2RvbWN0bC5oCisrKyBiL3hlbi9pbmNsdWRlL3B1
YmxpYy9kb21jdGwuaApAQCAtNTcxLDEyICs1NzEsMzAgQEAgc3RydWN0IHhlbl9kb21jdGxfYmlu
ZF9wdF9pcnEgewogKi8KICNkZWZpbmUgRFBDSV9BRERfTUFQUElORyAgICAgICAgIDEKICNkZWZp
bmUgRFBDSV9SRU1PVkVfTUFQUElORyAgICAgIDAKKy8qCisgKiBEZWZhdWx0IG1lbW9yeSBwb2xp
Y3kuIENvcnJlc3BvbmRzIHRvOgorICogQXJtOiBNRU1PUllfUE9MSUNZX0FSTV9ERVZfbkduUkUK
KyAqIHg4NjogTWVtb3J5IHR5cGUgVU5DQUNIQUJMRQorICovCisjZGVmaW5lIE1FTU9SWV9QT0xJ
Q1lfREVGQVVMVCAgICAgICAgIDAKKyNpZiBkZWZpbmVkKF9fYXJtX18pIHx8IGRlZmluZWQgKF9f
YWFyY2g2NF9fKQorLyogQXJtIG9ubHkuIE91dGVyIFNoYXJlYWJsZSwgRGV2aWNlLW5HblJFIG1l
bW9yeSAoRGV2aWNlIE1lbW9yeSBvbiBBcm12NykgKi8KKyMgZGVmaW5lIE1FTU9SWV9QT0xJQ1lf
QVJNX0RFVl9uR25SRSAgICAgIDAKKy8qIEFybSBvbmx5LiBPdXRlciBTaGFyZWFibGUsIE91dGVy
L0lubmVyIFdyaXRlLUJhY2sgQ2FjaGVhYmxlIG1lbW9yeSAqLworIyBkZWZpbmUgTUVNT1JZX1BP
TElDWV9BUk1fTUVNX1dCICAgICAgICAgMQorLyoKKyAqIE9uIEFybSwgTUVNT1JZX1BPTElDWSBz
ZWxlY3RzIHRoZSBzdGFnZS0yIG1lbW9yeSBhdHRyaWJ1dGVzLCBidXQgbm90ZQorICogdGhhdCB0
aGUgcmVzdWx0aW5nIG1lbW9yeSBhdHRyaWJ1dGVzIHdpbGwgYmUgYSBjb21iaW5hdGlvbiBvZiBz
dGFnZS0yCisgKiBhbmQgc3RhZ2UtMSBtZW1vcnkgYXR0cmlidXRlczogaXQgd2lsbCBiZSB0aGUg
c3Ryb25nZXN0IGJldHdlZW4gdGhlIDIKKyAqIHN0YWdlcyBhdHRyaWJ1dGVzLgorICovCisjZW5k
aWYKIHN0cnVjdCB4ZW5fZG9tY3RsX21lbW9yeV9tYXBwaW5nIHsKICAgICB1aW50NjRfYWxpZ25l
ZF90IGZpcnN0X2dmbjsgLyogZmlyc3QgcGFnZSAoaHZtIGd1ZXN0IHBoeXMgcGFnZSkgaW4gcmFu
Z2UgKi8KICAgICB1aW50NjRfYWxpZ25lZF90IGZpcnN0X21mbjsgLyogZmlyc3QgcGFnZSAobWFj
aGluZSBwYWdlKSBpbiByYW5nZSAqLwogICAgIHVpbnQ2NF9hbGlnbmVkX3QgbnJfbWZuczsgICAv
KiBudW1iZXIgb2YgcGFnZXMgaW4gcmFuZ2UgKD4wKSAqLwogICAgIHVpbnQzMl90IGFkZF9tYXBw
aW5nOyAgICAgICAvKiBhZGQgb3IgcmVtb3ZlIG1hcHBpbmcgKi8KLSAgICB1aW50MzJfdCBwYWRk
aW5nOyAgICAgICAgICAgLyogcGFkZGluZyBmb3IgNjQtYml0IGFsaWduZWQgc3RydWN0dXJlICov
CisgICAgdWludDMyX3QgbWVtb3J5X3BvbGljeTsgICAgICAvKiBjYWNoZWFiaWxpdHkgb2YgdGhl
IG1lbW9yeSBtYXBwaW5nICovCiB9OwogCiAKLS0gCjIuMTcuMQoKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVu
LWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcv
bWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

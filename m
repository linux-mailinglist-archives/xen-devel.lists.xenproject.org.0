Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 24344B7A5D
	for <lists+xen-devel@lfdr.de>; Thu, 19 Sep 2019 15:24:03 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iAwNw-0007hF-Kp; Thu, 19 Sep 2019 13:22:12 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=5hYN=XO=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1iAwNv-0007gy-Bs
 for xen-devel@lists.xenproject.org; Thu, 19 Sep 2019 13:22:11 +0000
X-Inumbo-ID: 7bbfc724-dae0-11e9-b299-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 7bbfc724-dae0-11e9-b299-bc764e2007e4;
 Thu, 19 Sep 2019 13:22:10 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 456C1AF1D;
 Thu, 19 Sep 2019 13:22:09 +0000 (UTC)
From: Jan Beulich <jbeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
References: <aa62726c-5aa4-8bcd-dc35-61eb8dfeaee3@suse.com>
Message-ID: <06a35251-013f-d215-d70c-70a4c98ac86e@suse.com>
Date: Thu, 19 Sep 2019 15:22:17 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.9.0
MIME-Version: 1.0
In-Reply-To: <aa62726c-5aa4-8bcd-dc35-61eb8dfeaee3@suse.com>
Content-Language: en-US
Subject: [Xen-devel] [PATCH v6 2/8] AMD/IOMMU: make phantom functions share
 interrupt remapping tables
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

UmF0aGVyIHRoYW4gZHVwbGljYXRpbmcgZW50cmllcyBpbiBhbWRfaW9tbXVfbXNpX21zZ191cGRh
dGVfaXJlKCksIHNoYXJlCnRoZSB0YWJsZXMuIFRoaXMgbWFpbmx5IHJlcXVpcmVzIHNvbWUgY2Fy
ZSB3aGlsZSBmcmVlaW5nIHRoZW0sIHRvIGF2b2lkCmZyZWVpbmcgbWVtb3J5IGJsb2NrcyB0d2lj
ZS4KClNpZ25lZC1vZmYtYnk6IEphbiBCZXVsaWNoIDxqYmV1bGljaEBzdXNlLmNvbT4KQWNrZWQt
Ynk6IEFuZHJldyBDb29wZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+Ci0tLQp2NTogTmV3
LgoKLS0tCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfaW5pdC5jICAgICAgfCAg
IDQzICsrKysrKysrKysrKysrKy0tLS0tLS0tLQogeGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1k
L2lvbW11X2ludHIuYyAgICAgIHwgICA0NSArKysrKysrKysrKysrLS0tLS0tLS0tLS0tLQogeGVu
L2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL3BjaV9hbWRfaW9tbXUuYyAgIHwgICAgMiAtCiB4ZW4v
aW5jbHVkZS9hc20teDg2L2FtZC1pb21tdS5oICAgICAgICAgICAgICAgfCAgICAyIC0KIHhlbi9p
bmNsdWRlL2FzbS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtcHJvdG8uaCB8ICAgIDIgLQogNSBmaWxl
cyBjaGFuZ2VkLCA1MyBpbnNlcnRpb25zKCspLCA0MSBkZWxldGlvbnMoLSkKCi0tLSBhL3hlbi9k
cml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0LmMKKysrIGIveGVuL2RyaXZlcnMvcGFz
c3Rocm91Z2gvYW1kL2lvbW11X2luaXQuYwpAQCAtMTExMSw3ICsxMTExLDcgQEAgc3RhdGljIHZv
aWQgX19pbml0IGFtZF9pb21tdV9pbml0X2NsZWFudQogICAgICAgICBhbWRfaW9tbXVfZnJlZV9p
bnRyZW1hcF90YWJsZShsaXN0X2ZpcnN0X2VudHJ5KCZhbWRfaW9tbXVfaGVhZCwKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgYW1k
X2lvbW11LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGxpc3QpLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOVUxM
KTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTlVMTCwgMCk7CiAKICAg
ICAvKiBmcmVlIGFtZCBpb21tdSBsaXN0ICovCiAgICAgbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZl
ICggaW9tbXUsIG5leHQsICZhbWRfaW9tbXVfaGVhZCwgbGlzdCApCkBAIC0xMTc2LDcgKzExNzYs
NyBAQCBpbnQgaXRlcmF0ZV9pdnJzX21hcHBpbmdzKGludCAoKmhhbmRsZXIpCiB9CiAKIGludCBp
dGVyYXRlX2l2cnNfZW50cmllcyhpbnQgKCpoYW5kbGVyKShjb25zdCBzdHJ1Y3QgYW1kX2lvbW11
ICosCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGl2cnNf
bWFwcGluZ3MgKikpCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ry
dWN0IGl2cnNfbWFwcGluZ3MgKiwgdWludDE2X3QgYmRmKSkKIHsKICAgICB1MTYgc2VnID0gMDsK
ICAgICBpbnQgcmMgPSAwOwpAQCAtMTE5Myw3ICsxMTkzLDcgQEAgaW50IGl0ZXJhdGVfaXZyc19l
bnRyaWVzKGludCAoKmhhbmRsZXIpKAogICAgICAgICAgICAgY29uc3Qgc3RydWN0IGFtZF9pb21t
dSAqaW9tbXUgPSBtYXBbYmRmXS5pb21tdTsKIAogICAgICAgICAgICAgaWYgKCBpb21tdSAmJiBt
YXBbYmRmXS5kdGVfcmVxdWVzdG9yX2lkID09IGJkZiApCi0gICAgICAgICAgICAgICAgcmMgPSBo
YW5kbGVyKGlvbW11LCAmbWFwW2JkZl0pOworICAgICAgICAgICAgICAgIHJjID0gaGFuZGxlcihp
b21tdSwgJm1hcFtiZGZdLCBiZGYpOwogICAgICAgICB9CiAgICAgfSB3aGlsZSAoICFyYyAmJiAr
K3NlZyApOwogCkBAIC0xMjg2LDIwICsxMjg2LDI5IEBAIHN0YXRpYyBpbnQgX19pbml0IGFtZF9p
b21tdV9zZXR1cF9kZXZpY2UKIAogICAgICAgICAgICAgaWYgKCBwZGV2ICkKICAgICAgICAgICAg
IHsKLSAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgcmVxX2lkID0gYmRmOwotCi0gICAgICAg
ICAgICAgICAgZG8gewotICAgICAgICAgICAgICAgICAgICBpdnJzX21hcHBpbmdzW3JlcV9pZF0u
aW50cmVtYXBfdGFibGUgPQotICAgICAgICAgICAgICAgICAgICAgICAgYW1kX2lvbW11X2FsbG9j
X2ludHJlbWFwX3RhYmxlKAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl2cnNfbWFwcGlu
Z3NbYmRmXS5pb21tdSwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAmaXZyc19tYXBwaW5n
c1tyZXFfaWRdLmludHJlbWFwX2ludXNlKTsKLSAgICAgICAgICAgICAgICAgICAgaWYgKCAhaXZy
c19tYXBwaW5nc1tyZXFfaWRdLmludHJlbWFwX3RhYmxlICkKLSAgICAgICAgICAgICAgICAgICAg
ICAgIHJldHVybiAtRU5PTUVNOwotCi0gICAgICAgICAgICAgICAgICAgIGlmICggIXBkZXYtPnBo
YW50b21fc3RyaWRlICkKLSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwotICAgICAgICAg
ICAgICAgICAgICByZXFfaWQgKz0gcGRldi0+cGhhbnRvbV9zdHJpZGU7Ci0gICAgICAgICAgICAg
ICAgfSB3aGlsZSAoIFBDSV9TTE9UKHJlcV9pZCkgPT0gcGRldi0+c2JkZi5kZXYgKTsKKyAgICAg
ICAgICAgICAgICBpdnJzX21hcHBpbmdzW2JkZl0uaW50cmVtYXBfdGFibGUgPQorICAgICAgICAg
ICAgICAgICAgICBhbWRfaW9tbXVfYWxsb2NfaW50cmVtYXBfdGFibGUoCisgICAgICAgICAgICAg
ICAgICAgICAgICBpdnJzX21hcHBpbmdzW2JkZl0uaW9tbXUsCisgICAgICAgICAgICAgICAgICAg
ICAgICAmaXZyc19tYXBwaW5nc1tiZGZdLmludHJlbWFwX2ludXNlKTsKKyAgICAgICAgICAgICAg
ICBpZiAoICFpdnJzX21hcHBpbmdzW2JkZl0uaW50cmVtYXBfdGFibGUgKQorICAgICAgICAgICAg
ICAgICAgICByZXR1cm4gLUVOT01FTTsKKworICAgICAgICAgICAgICAgIGlmICggcGRldi0+cGhh
bnRvbV9zdHJpZGUgKQorICAgICAgICAgICAgICAgIHsKKyAgICAgICAgICAgICAgICAgICAgdW5z
aWduZWQgaW50IHJlcV9pZCA9IGJkZjsKKworICAgICAgICAgICAgICAgICAgICBmb3IgKCA7IDsg
KQorICAgICAgICAgICAgICAgICAgICB7CisgICAgICAgICAgICAgICAgICAgICAgICByZXFfaWQg
Kz0gcGRldi0+cGhhbnRvbV9zdHJpZGU7CisgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIFBD
SV9TTE9UKHJlcV9pZCkgIT0gcGRldi0+c2JkZi5kZXYgKQorICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGJyZWFrOworCisgICAgICAgICAgICAgICAgICAgICAgICBpdnJzX21hcHBpbmdzW3Jl
cV9pZF0uaW50cmVtYXBfdGFibGUgPQorICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl2cnNf
bWFwcGluZ3NbYmRmXS5pbnRyZW1hcF90YWJsZTsKKyAgICAgICAgICAgICAgICAgICAgICAgIGl2
cnNfbWFwcGluZ3NbcmVxX2lkXS5pbnRyZW1hcF9pbnVzZSA9CisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaXZyc19tYXBwaW5nc1tiZGZdLmludHJlbWFwX2ludXNlOworICAgICAgICAgICAg
ICAgICAgICB9CisgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogCiAgICAgICAgICAg
ICBhbWRfaW9tbXVfc2V0X2ludHJlbWFwX3RhYmxlKAotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhy
b3VnaC9hbWQvaW9tbXVfaW50ci5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9p
b21tdV9pbnRyLmMKQEAgLTcxMSwzMyArNzExLDIwIEBAIGludCBhbWRfaW9tbXVfbXNpX21zZ191
cGRhdGVfaXJlKAogCiAgICAgaWYgKCBtc2lfZGVzYy0+cmVtYXBfaW5kZXggPj0gMCAmJiAhbXNn
ICkKICAgICB7Ci0gICAgICAgIGRvIHsKLSAgICAgICAgICAgIHVwZGF0ZV9pbnRyZW1hcF9lbnRy
eV9mcm9tX21zaV9tc2coaW9tbXUsIGJkZiwgbnIsCi0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZtc2lfZGVzYy0+cmVtYXBfaW5kZXgsCi0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5VTEwsIE5VTEwpOwotICAgICAg
ICAgICAgaWYgKCAhcGRldiB8fCAhcGRldi0+cGhhbnRvbV9zdHJpZGUgKQotICAgICAgICAgICAg
ICAgIGJyZWFrOwotICAgICAgICAgICAgYmRmICs9IHBkZXYtPnBoYW50b21fc3RyaWRlOwotICAg
ICAgICB9IHdoaWxlICggUENJX1NMT1QoYmRmKSA9PSBQQ0lfU0xPVChwZGV2LT5kZXZmbikgKTsK
KyAgICAgICAgdXBkYXRlX2ludHJlbWFwX2VudHJ5X2Zyb21fbXNpX21zZyhpb21tdSwgYmRmLCBu
ciwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbXNpX2Rlc2Mt
PnJlbWFwX2luZGV4LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IE5VTEwsIE5VTEwpOwogCiAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgbnI7ICsraSApCiAgICAg
ICAgICAgICBtc2lfZGVzY1tpXS5yZW1hcF9pbmRleCA9IC0xOwotICAgICAgICBpZiAoIHBkZXYg
KQotICAgICAgICAgICAgYmRmID0gUENJX0JERjIocGRldi0+YnVzLCBwZGV2LT5kZXZmbik7CiAg
ICAgfQogCiAgICAgaWYgKCAhbXNnICkKICAgICAgICAgcmV0dXJuIDA7CiAKLSAgICBkbyB7Ci0g
ICAgICAgIHJjID0gdXBkYXRlX2ludHJlbWFwX2VudHJ5X2Zyb21fbXNpX21zZyhpb21tdSwgYmRm
LCBuciwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZt
c2lfZGVzYy0+cmVtYXBfaW5kZXgsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBtc2csICZkYXRhKTsKLSAgICAgICAgaWYgKCByYyB8fCAhcGRldiB8fCAh
cGRldi0+cGhhbnRvbV9zdHJpZGUgKQotICAgICAgICAgICAgYnJlYWs7Ci0gICAgICAgIGJkZiAr
PSBwZGV2LT5waGFudG9tX3N0cmlkZTsKLSAgICB9IHdoaWxlICggUENJX1NMT1QoYmRmKSA9PSBQ
Q0lfU0xPVChwZGV2LT5kZXZmbikgKTsKLQorICAgIHJjID0gdXBkYXRlX2ludHJlbWFwX2VudHJ5
X2Zyb21fbXNpX21zZyhpb21tdSwgYmRmLCBuciwKKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgJm1zaV9kZXNjLT5yZW1hcF9pbmRleCwKKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnLCAmZGF0YSk7CiAgICAgaWYgKCAhcmMg
KQogICAgIHsKICAgICAgICAgZm9yICggaSA9IDE7IGkgPCBucjsgKytpICkKQEAgLTc5MCwxMiAr
Nzc3LDI3IEBAIHZvaWQgYW1kX2lvbW11X3JlYWRfbXNpX2Zyb21faXJlKAogfQogCiBpbnQgYW1k
X2lvbW11X2ZyZWVfaW50cmVtYXBfdGFibGUoCi0gICAgY29uc3Qgc3RydWN0IGFtZF9pb21tdSAq
aW9tbXUsIHN0cnVjdCBpdnJzX21hcHBpbmdzICppdnJzX21hcHBpbmcpCisgICAgY29uc3Qgc3Ry
dWN0IGFtZF9pb21tdSAqaW9tbXUsIHN0cnVjdCBpdnJzX21hcHBpbmdzICppdnJzX21hcHBpbmcs
CisgICAgdWludDE2X3QgYmRmKQogewogICAgIHZvaWQgKip0YmxwOwogCiAgICAgaWYgKCBpdnJz
X21hcHBpbmcgKQogICAgIHsKKyAgICAgICAgdW5zaWduZWQgaW50IGk7CisKKyAgICAgICAgLyoK
KyAgICAgICAgICogUENJIGRldmljZSBwaGFudG9tIGZ1bmN0aW9ucyB1c2UgdGhlIHNhbWUgdGFi
bGVzIGFzIHRoZWlyICJiYXNlIgorICAgICAgICAgKiBmdW5jdGlvbjogTG9vayBhaGVhZCB0byB6
YXAgdGhlIHBvaW50ZXJzLgorICAgICAgICAgKi8KKyAgICAgICAgZm9yICggaSA9IDE7IFBDSV9G
VU5DKGJkZiArIGkpICYmIGJkZiArIGkgPCBpdnJzX2JkZl9lbnRyaWVzOyArK2kgKQorICAgICAg
ICAgICAgaWYgKCBpdnJzX21hcHBpbmdbaV0uaW50cmVtYXBfdGFibGUgPT0KKyAgICAgICAgICAg
ICAgICAgaXZyc19tYXBwaW5nLT5pbnRyZW1hcF90YWJsZSApCisgICAgICAgICAgICB7CisgICAg
ICAgICAgICAgICAgaXZyc19tYXBwaW5nW2ldLmludHJlbWFwX3RhYmxlID0gTlVMTDsKKyAgICAg
ICAgICAgICAgICBpdnJzX21hcHBpbmdbaV0uaW50cmVtYXBfaW51c2UgPSBOVUxMOworICAgICAg
ICAgICAgfQorCiAgICAgICAgIFhGUkVFKGl2cnNfbWFwcGluZy0+aW50cmVtYXBfaW51c2UpOwog
ICAgICAgICB0YmxwID0gJml2cnNfbWFwcGluZy0+aW50cmVtYXBfdGFibGU7CiAgICAgfQpAQCAt
OTM0LDcgKzkzNiw4IEBAIHN0YXRpYyB2b2lkIGR1bXBfaW50cmVtYXBfdGFibGUoY29uc3Qgc3QK
IH0KIAogc3RhdGljIGludCBkdW1wX2ludHJlbWFwX21hcHBpbmcoY29uc3Qgc3RydWN0IGFtZF9p
b21tdSAqaW9tbXUsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgaXZy
c19tYXBwaW5ncyAqaXZyc19tYXBwaW5nKQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc3RydWN0IGl2cnNfbWFwcGluZ3MgKml2cnNfbWFwcGluZywKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVpbnQxNl90IHVudXNlZCkKIHsKICAgICB1bnNpZ25lZCBsb25nIGZs
YWdzOwogCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9wY2lfYW1kX2lvbW11LmMK
KysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL3BjaV9hbWRfaW9tbXUuYwpAQCAtNTE5
LDcgKzUxOSw3IEBAIHN0YXRpYyBpbnQgYW1kX2lvbW11X3JlbW92ZV9kZXZpY2UodTggZGUKICAg
ICBpZiAoIGFtZF9pb21tdV9wZXJkZXZfaW50cmVtYXAgJiYKICAgICAgICAgIGl2cnNfbWFwcGlu
Z3NbYmRmXS5kdGVfcmVxdWVzdG9yX2lkID09IGJkZiAmJgogICAgICAgICAgaXZyc19tYXBwaW5n
c1tiZGZdLmludHJlbWFwX3RhYmxlICkKLSAgICAgICAgYW1kX2lvbW11X2ZyZWVfaW50cmVtYXBf
dGFibGUoaW9tbXUsICZpdnJzX21hcHBpbmdzW2JkZl0pOworICAgICAgICBhbWRfaW9tbXVfZnJl
ZV9pbnRyZW1hcF90YWJsZShpb21tdSwgJml2cnNfbWFwcGluZ3NbYmRmXSwgYmRmKTsKIAogICAg
IHJldHVybiAwOwogfQotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L2FtZC1pb21tdS5oCisrKyBi
L3hlbi9pbmNsdWRlL2FzbS14ODYvYW1kLWlvbW11LmgKQEAgLTEzMSw3ICsxMzEsNyBAQCBleHRl
cm4gdTggaXZoZF90eXBlOwogc3RydWN0IGl2cnNfbWFwcGluZ3MgKmdldF9pdnJzX21hcHBpbmdz
KHUxNiBzZWcpOwogaW50IGl0ZXJhdGVfaXZyc19tYXBwaW5ncyhpbnQgKCopKHUxNiBzZWcsIHN0
cnVjdCBpdnJzX21hcHBpbmdzICopKTsKIGludCBpdGVyYXRlX2l2cnNfZW50cmllcyhpbnQgKCop
KGNvbnN0IHN0cnVjdCBhbWRfaW9tbXUgKiwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cnVjdCBpdnJzX21hcHBpbmdzICopKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCBpdnJzX21hcHBpbmdzICosIHVpbnQxNl90KSk7CiAKIC8qIGlvbW11IHRh
YmxlcyBpbiBndWVzdCBzcGFjZSAqLwogc3RydWN0IG1taW9fcmVnIHsKLS0tIGEveGVuL2luY2x1
ZGUvYXNtLXg4Ni9odm0vc3ZtL2FtZC1pb21tdS1wcm90by5oCisrKyBiL3hlbi9pbmNsdWRlL2Fz
bS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtcHJvdG8uaApAQCAtMTAxLDcgKzEwMSw3IEBAIGludCBh
bWRfaW9tbXVfc2V0dXBfaW9hcGljX3JlbWFwcGluZyh2b2kKIHZvaWQgKmFtZF9pb21tdV9hbGxv
Y19pbnRyZW1hcF90YWJsZSgKICAgICBjb25zdCBzdHJ1Y3QgYW1kX2lvbW11ICosIHVuc2lnbmVk
IGxvbmcgKiopOwogaW50IGFtZF9pb21tdV9mcmVlX2ludHJlbWFwX3RhYmxlKAotICAgIGNvbnN0
IHN0cnVjdCBhbWRfaW9tbXUgKiwgc3RydWN0IGl2cnNfbWFwcGluZ3MgKik7CisgICAgY29uc3Qg
c3RydWN0IGFtZF9pb21tdSAqLCBzdHJ1Y3QgaXZyc19tYXBwaW5ncyAqLCB1aW50MTZfdCk7CiB2
b2lkIGFtZF9pb21tdV9pb2FwaWNfdXBkYXRlX2lyZSgKICAgICB1bnNpZ25lZCBpbnQgYXBpYywg
dW5zaWduZWQgaW50IHJlZywgdW5zaWduZWQgaW50IHZhbHVlKTsKIHVuc2lnbmVkIGludCBhbWRf
aW9tbXVfcmVhZF9pb2FwaWNfZnJvbV9pcmUoCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlz
dHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xp
c3RpbmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id E83D1123719
	for <lists+xen-devel@lfdr.de>; Tue, 17 Dec 2019 21:18:38 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ihJGS-0005Or-Rs; Tue, 17 Dec 2019 20:16:16 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=UMsG=2H=citrix.com=andrew.cooper3@srs-us1.protection.inumbo.net>)
 id 1ihJGR-0005OY-9V
 for xen-devel@lists.xenproject.org; Tue, 17 Dec 2019 20:16:15 +0000
X-Inumbo-ID: 0e30e31c-210a-11ea-a1e1-bc764e2007e4
Received: from esa3.hc3370-68.iphmx.com (unknown [216.71.145.155])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 0e30e31c-210a-11ea-a1e1-bc764e2007e4;
 Tue, 17 Dec 2019 20:16:06 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1576613766;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=BJyXIpkCPt9JZU9N+q+I1imLp9WhWhx0vZTrqg9EqXM=;
 b=eC0ZPPGD1MkL6m1eZxo+4yJqQHf3ImTjEVwSoTnVnS0QcofrwpQlaA2T
 3ZDk4LSXqNLOrUoNhhwbkBHFRgVfHHjGgp2wL0vcX6UvppedoF13gPZzP
 Ecnq6KSJ47kgI3ur8WJz90yWWy7Uk63lgZVr79GmFSN0dO7144IazbvHh k=;
Authentication-Results: esa3.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=andrew.cooper3@citrix.com;
 spf=Pass smtp.mailfrom=Andrew.Cooper3@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa3.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 andrew.cooper3@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa3.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="andrew.cooper3@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: Pass (esa3.hc3370-68.iphmx.com: domain of
 Andrew.Cooper3@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa3.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="Andrew.Cooper3@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83
 ip4:168.245.78.127 ~all"
Received-SPF: None (esa3.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa3.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: CfxPR4I4OBFF9AMufUYeJraWCeHu++YL/H7MooABj7Y7R6QCIa1i2xBshWFtBnTvphG0L1QEWo
 R9oOCS4r/0C+2xEB9isAMcJEMpTWl7E+NVtGibHwiCQS+AxJjNS6bXl+gDbUvZ45KpVXNdO596
 fyowi8FHxlVC+CzGJ3Rnax3VOu4ursILtwBkPejmQr5fEtjrbSz8JlNT2xt2PKCX7Rq1rbuzHh
 flYZIEvVJWFEAOsMtazaZJqKD8cdqHlwf8Kr3r2IEEe2QqDkjm+hFYFb69Odgo+qJQcZjqOAfy
 t8Q=
X-SBRS: 2.7
X-MesageID: 9830371
X-Ironport-Server: esa3.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.69,326,1571716800"; 
   d="scan'208";a="9830371"
From: Andrew Cooper <andrew.cooper3@citrix.com>
To: Xen-devel <xen-devel@lists.xenproject.org>
Date: Tue, 17 Dec 2019 20:15:49 +0000
Message-ID: <20191217201550.15864-4-andrew.cooper3@citrix.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20191217201550.15864-1-andrew.cooper3@citrix.com>
References: <20191217201550.15864-1-andrew.cooper3@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH 3/4] tools/dombuilder: Remove p2m_guest from the
 common interface
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Andrew Cooper <andrew.cooper3@citrix.com>,
 Varad Gautam <vrd@amazon.de>, Ian Jackson <Ian.Jackson@citrix.com>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SW4tZ3Vlc3QgcDJtJ3MgYXJlIGEgY29uY2VwdCBzcGVjaWZpYyB0byB4ODYgUFYgZ3Vlc3RzLiAg
YWxsb2NfcDJtX2xpc3QoKSBpcwp0aGUgb25seSBob29rIHdoaWNoIGluaXRpYWxpc2VzIGRvbS0+
cDJtX2d1ZXN0LCBtYWtpbmcKeGNfZG9tX3VwZGF0ZV9ndWVzdF9wMm0oKSBhIG5vcCBmb3Igbm9u
LVBWIGd1ZXN0cy4KCk1vdmUgcDJtX2d1ZXN0IGludG8geGNfZG9tX2ltYWdlX3g4NiBhbmQgYWRq
dXN0IGFsbG9jX3AybV9saXN0KCkgdG8gbWF0Y2guCgpEcm9wIHhjX2RvbV91cGRhdGVfZ3Vlc3Rf
cDJtKCkgZW50aXJlbHkuCgpPbmUgY2FsbGVyLCBtb3ZlX2wzX2JlbG93XzRHKCksIG9ubHkgdXNl
cyBpdCB0byBtb2RpZnkgYSBzaW5nbGUgZW50cnksIHNvCnJld3JpdGluZyB0aGUgd2hvbGUgZ3Vl
c3QgcDJtIGlzIHdhc3RlZnVsIC0gb3BlbmNvZGUgdGhlIHNpbmdsZSB1cGRhdGUKaW5zdGVhZC4g
IFRoZSBvdGhlciBjYWxsZXIgaXMgY29tbW9uIGNvZGUuICBJbnN0ZWFkLCBtb3ZlIHRoZSBsb2dp
YyBpbnRvIHRoZQpzZXR1cF9wZ3RhYmxlcygpIGhvb2tzLCB3aGljaCBrbm93IHRoZWlyIG93biBz
aXplb2ZfcGZuIGFuZCBjYW4gZG8gYXdheSB3aXRoCnRoZSBzd2l0Y2ggc3RhdGVtZW50LgoKTm8g
Y2hhbmdlIGluIHRoZSBjb25zdHJ1Y3RlZCBndWVzdHMuCgpTaWduZWQtb2ZmLWJ5OiBBbmRyZXcg
Q29vcGVyIDxhbmRyZXcuY29vcGVyM0BjaXRyaXguY29tPgotLS0KQ0M6IElhbiBKYWNrc29uIDxJ
YW4uSmFja3NvbkBjaXRyaXguY29tPgpDQzogV2VpIExpdSA8d2xAeGVuLm9yZz4KQ0M6IFN0ZWZh
bm8gU3RhYmVsbGluaSA8c3N0YWJlbGxpbmlAa2VybmVsLm9yZz4KQ0M6IEp1bGllbiBHcmFsbCA8
anVsaWVuQHhlbi5vcmc+CkNDOiBWb2xvZHlteXIgQmFiY2h1ayA8Vm9sb2R5bXlyX0JhYmNodWtA
ZXBhbS5jb20+CkNDOiBWYXJhZCBHYXV0YW0gPHZyZEBhbWF6b24uZGU+Ci0tLQogc3R1YmRvbS9n
cnViL2tleGVjLmMgICAgICAgICB8ICA4IC0tLS0tLS0tCiB0b29scy9saWJ4Yy9pbmNsdWRlL3hj
X2RvbS5oIHwgIDIgLS0KIHRvb2xzL2xpYnhjL3hjX2RvbV9ib290LmMgICAgfCAgMiAtLQogdG9v
bHMvbGlieGMveGNfZG9tX2NvcmUuYyAgICB8IDQwIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KIHRvb2xzL2xpYnhjL3hjX2RvbV94ODYuYyAgICAgfCA0MSArKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLQogNSBmaWxlcyBjaGFuZ2VkLCAzNSBp
bnNlcnRpb25zKCspLCA1OCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9zdHViZG9tL2dydWIv
a2V4ZWMuYyBiL3N0dWJkb20vZ3J1Yi9rZXhlYy5jCmluZGV4IDYxY2EwODJkNDIuLjEwODkxZWFi
Y2MgMTAwNjQ0Ci0tLSBhL3N0dWJkb20vZ3J1Yi9rZXhlYy5jCisrKyBiL3N0dWJkb20vZ3J1Yi9r
ZXhlYy5jCkBAIC0zMjAsMTQgKzMyMCw2IEBAIHZvaWQga2V4ZWModm9pZCAqa2VybmVsLCBsb25n
IGtlcm5lbF9zaXplLCB2b2lkICptb2R1bGUsIGxvbmcgbW9kdWxlX3NpemUsIGNoYXIKICAgICBk
b19leGNoYW5nZShkb20sIFBIWVNfUEZOKF9ib290X3RhcmdldCAtIGRvbS0+cGFybXMudmlydF9i
YXNlKSwKICAgICAgICAgICAgIHZpcnRfdG9fbWZuKCZfYm9vdF9wYWdlKSk7CiAKLSAgICAvKiBN
YWtlIHN1cmUgdGhlIGJvb3RzdHJhcCBwYWdlIHRhYmxlIGRvZXMgbm90IFJXLW1hcCBhbnkgb2Yg
b3VyIGN1cnJlbnQKLSAgICAgKiBwYWdlIHRhYmxlIGZyYW1lcyAqLwotICAgIGlmICggKHJjID0g
eGNfZG9tX3VwZGF0ZV9ndWVzdF9wMm0oZG9tKSkpIHsKLSAgICAgICAgcHJpbnRrKCJ4Y19kb21f
dXBkYXRlX2d1ZXN0X3AybSByZXR1cm5lZCAlZFxuIiwgcmMpOwotICAgICAgICBlcnJudW0gPSBF
UlJfQk9PVF9GQUlMVVJFOwotICAgICAgICBnb3RvIG91dDsKLSAgICB9Ci0KICAgICBpZiAoIGRv
bS0+YXJjaF9ob29rcy0+c2V0dXBfcGd0YWJsZXMgKQogICAgICAgICBpZiAoIChyYyA9IGRvbS0+
YXJjaF9ob29rcy0+c2V0dXBfcGd0YWJsZXMoZG9tKSkpIHsKICAgICAgICAgICAgIHByaW50aygi
c2V0dXBfcGd0YWJsZXMgcmV0dXJuZWQgJWRcbiIsIHJjKTsKZGlmZiAtLWdpdCBhL3Rvb2xzL2xp
YnhjL2luY2x1ZGUveGNfZG9tLmggYi90b29scy9saWJ4Yy9pbmNsdWRlL3hjX2RvbS5oCmluZGV4
IDlmZjFjYjhiMDcuLmI3ZDBmYWY3ZTEgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhjL2luY2x1ZGUv
eGNfZG9tLmgKKysrIGIvdG9vbHMvbGlieGMvaW5jbHVkZS94Y19kb20uaApAQCAtMTMzLDcgKzEz
Myw2IEBAIHN0cnVjdCB4Y19kb21faW1hZ2UgewogICAgICAqIE5vdGUgdGhhdCB0aGUgaW5wdXQg
aXMgb2Zmc2V0IGJ5IHJhbWJhc2UuCiAgICAgICovCiAgICAgeGVuX3Bmbl90ICpwMm1faG9zdDsK
LSAgICB2b2lkICpwMm1fZ3Vlc3Q7CiAKICAgICAvKiBwaHlzaWNhbCBtZW1vcnkKICAgICAgKgpA
QCAtMzMxLDcgKzMzMCw2IEBAIGludCB4Y19kb21fZGV2aWNldHJlZV9tZW0oc3RydWN0IHhjX2Rv
bV9pbWFnZSAqZG9tLCBjb25zdCB2b2lkICptZW0sCiBpbnQgeGNfZG9tX3BhcnNlX2ltYWdlKHN0
cnVjdCB4Y19kb21faW1hZ2UgKmRvbSk7CiBpbnQgeGNfZG9tX3NldF9hcmNoX2hvb2tzKHN0cnVj
dCB4Y19kb21faW1hZ2UgKmRvbSk7CiBpbnQgeGNfZG9tX2J1aWxkX2ltYWdlKHN0cnVjdCB4Y19k
b21faW1hZ2UgKmRvbSk7Ci1pbnQgeGNfZG9tX3VwZGF0ZV9ndWVzdF9wMm0oc3RydWN0IHhjX2Rv
bV9pbWFnZSAqZG9tKTsKIAogaW50IHhjX2RvbV9ib290X3hlbl9pbml0KHN0cnVjdCB4Y19kb21f
aW1hZ2UgKmRvbSwgeGNfaW50ZXJmYWNlICp4Y2gsCiAgICAgICAgICAgICAgICAgICAgICAgICAg
dWludDMyX3QgZG9taWQpOwpkaWZmIC0tZ2l0IGEvdG9vbHMvbGlieGMveGNfZG9tX2Jvb3QuYyBi
L3Rvb2xzL2xpYnhjL3hjX2RvbV9ib290LmMKaW5kZXggNzlkYmJmNjU3MS4uYmI1OTliMzNiYSAx
MDA2NDQKLS0tIGEvdG9vbHMvbGlieGMveGNfZG9tX2Jvb3QuYworKysgYi90b29scy9saWJ4Yy94
Y19kb21fYm9vdC5jCkBAIC0xOTcsOCArMTk3LDYgQEAgaW50IHhjX2RvbV9ib290X2ltYWdlKHN0
cnVjdCB4Y19kb21faW1hZ2UgKmRvbSkKICAgICAgICAgcmV0dXJuIC0xOwogCiAgICAgLyogaW5p
dGlhbCBtbSBzZXR1cCAqLwotICAgIGlmICggKHJjID0geGNfZG9tX3VwZGF0ZV9ndWVzdF9wMm0o
ZG9tKSkgIT0gMCApCi0gICAgICAgIHJldHVybiByYzsKICAgICBpZiAoIGRvbS0+YXJjaF9ob29r
cy0+c2V0dXBfcGd0YWJsZXMgJiYKICAgICAgICAgIChyYyA9IGRvbS0+YXJjaF9ob29rcy0+c2V0
dXBfcGd0YWJsZXMoZG9tKSkgIT0gMCApCiAgICAgICAgIHJldHVybiByYzsKZGlmZiAtLWdpdCBh
L3Rvb2xzL2xpYnhjL3hjX2RvbV9jb3JlLmMgYi90b29scy9saWJ4Yy94Y19kb21fY29yZS5jCmlu
ZGV4IGZjNzc4MDRhN2UuLmYzMGM3M2I1ZTggMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhjL3hjX2Rv
bV9jb3JlLmMKKysrIGIvdG9vbHMvbGlieGMveGNfZG9tX2NvcmUuYwpAQCAtOTY5LDQ2ICs5Njks
NiBAQCBpbnQgeGNfZG9tX21lbV9pbml0KHN0cnVjdCB4Y19kb21faW1hZ2UgKmRvbSwgdW5zaWdu
ZWQgaW50IG1lbV9tYikKICAgICByZXR1cm4gMDsKIH0KIAotaW50IHhjX2RvbV91cGRhdGVfZ3Vl
c3RfcDJtKHN0cnVjdCB4Y19kb21faW1hZ2UgKmRvbSkKLXsKLSAgICB1aW50MzJfdCAqcDJtXzMy
OwotICAgIHVpbnQ2NF90ICpwMm1fNjQ7Ci0gICAgeGVuX3Bmbl90IGk7Ci0KLSAgICBpZiAoICFk
b20tPnAybV9ndWVzdCApCi0gICAgICAgIHJldHVybiAwOwotCi0gICAgc3dpdGNoICggZG9tLT5h
cmNoX2hvb2tzLT5zaXplb2ZfcGZuICkKLSAgICB7Ci0gICAgY2FzZSA0OgotICAgICAgICBET01Q
UklOVEYoIiVzOiBkc3QgMzJiaXQsIHBhZ2VzIDB4JSIgUFJJcGZuICIiLAotICAgICAgICAgICAg
ICAgICAgX19GVU5DVElPTl9fLCBkb20tPnAybV9zaXplKTsKLSAgICAgICAgcDJtXzMyID0gZG9t
LT5wMm1fZ3Vlc3Q7Ci0gICAgICAgIGZvciAoIGkgPSAwOyBpIDwgZG9tLT5wMm1fc2l6ZTsgaSsr
ICkKLSAgICAgICAgICAgIGlmICggZG9tLT5wMm1faG9zdFtpXSAhPSBJTlZBTElEX1BGTiApCi0g
ICAgICAgICAgICAgICAgcDJtXzMyW2ldID0gZG9tLT5wMm1faG9zdFtpXTsKLSAgICAgICAgICAg
IGVsc2UKLSAgICAgICAgICAgICAgICBwMm1fMzJbaV0gPSAodWludDMyX3QpIC0gMTsKLSAgICAg
ICAgYnJlYWs7Ci0gICAgY2FzZSA4OgotICAgICAgICBET01QUklOVEYoIiVzOiBkc3QgNjRiaXQs
IHBhZ2VzIDB4JSIgUFJJcGZuICIiLAotICAgICAgICAgICAgICAgICAgX19GVU5DVElPTl9fLCBk
b20tPnAybV9zaXplKTsKLSAgICAgICAgcDJtXzY0ID0gZG9tLT5wMm1fZ3Vlc3Q7Ci0gICAgICAg
IGZvciAoIGkgPSAwOyBpIDwgZG9tLT5wMm1fc2l6ZTsgaSsrICkKLSAgICAgICAgICAgIGlmICgg
ZG9tLT5wMm1faG9zdFtpXSAhPSBJTlZBTElEX1BGTiApCi0gICAgICAgICAgICAgICAgcDJtXzY0
W2ldID0gZG9tLT5wMm1faG9zdFtpXTsKLSAgICAgICAgICAgIGVsc2UKLSAgICAgICAgICAgICAg
ICBwMm1fNjRbaV0gPSAodWludDY0X3QpIC0gMTsKLSAgICAgICAgYnJlYWs7Ci0gICAgZGVmYXVs
dDoKLSAgICAgICAgeGNfZG9tX3BhbmljKGRvbS0+eGNoLCBYQ19JTlRFUk5BTF9FUlJPUiwKLSAg
ICAgICAgICAgICAgICAgICAgICJzaXplb2ZfcGZuIGlzIGludmFsaWQgKGlzICVkLCBjYW4gYmUg
NCBvciA4KSIsCi0gICAgICAgICAgICAgICAgICAgICBkb20tPmFyY2hfaG9va3MtPnNpemVvZl9w
Zm4pOwotICAgICAgICByZXR1cm4gLTE7Ci0gICAgfQotICAgIHJldHVybiAwOwotfQotCiBzdGF0
aWMgaW50IHhjX2RvbV9idWlsZF9tb2R1bGUoc3RydWN0IHhjX2RvbV9pbWFnZSAqZG9tLCB1bnNp
Z25lZCBpbnQgbW9kKQogewogICAgIHNpemVfdCB1bnppcGxlbiwgbW9kdWxlbGVuOwpkaWZmIC0t
Z2l0IGEvdG9vbHMvbGlieGMveGNfZG9tX3g4Ni5jIGIvdG9vbHMvbGlieGMveGNfZG9tX3g4Ni5j
CmluZGV4IGQyYWNmZjEwNjEuLmYyMTY2MmM4YjkgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhjL3hj
X2RvbV94ODYuYworKysgYi90b29scy9saWJ4Yy94Y19kb21feDg2LmMKQEAgLTEwNCw2ICsxMDQs
OSBAQCBzdHJ1Y3QgeGNfZG9tX2ltYWdlX3g4NiB7CiAjZGVmaW5lIE1BUFBJTkdfTUFYIDIKICAg
ICBzdHJ1Y3QgeGNfZG9tX3g4Nl9tYXBwaW5nIG1hcHNbTUFQUElOR19NQVhdOwogICAgIGNvbnN0
IHN0cnVjdCB4Y19kb21fcGFyYW1zICpwYXJhbXM7CisKKyAgICAvKiBQVjogUG9pbnRlciB0byB0
aGUgaW4tZ3Vlc3QgUDJNLiAqLworICAgIHZvaWQgKnAybV9ndWVzdDsKIH07CiAKIC8qIGdldCBn
dWVzdCBJTyBBQkkgcHJvdG9jb2wgKi8KQEAgLTI5Niw2ICsyOTksOCBAQCBzdGF0aWMgeGVuX3Bm
bl90IG1vdmVfbDNfYmVsb3dfNEcoc3RydWN0IHhjX2RvbV9pbWFnZSAqZG9tLAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHhlbl9wZm5fdCBsM3BmbiwKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB4ZW5fcGZuX3QgbDNtZm4pCiB7CisgICAgc3RydWN0IHhjX2Rv
bV9pbWFnZV94ODYgKmRvbXg4NiA9IGRvbS0+YXJjaF9wcml2YXRlOworICAgIHVpbnQzMl90ICpw
Mm1fZ3Vlc3QgPSBkb214ODYtPnAybV9ndWVzdDsKICAgICB4ZW5fcGZuX3QgbmV3X2wzbWZuOwog
ICAgIHN0cnVjdCB4Y19tbXUgKm1tdTsKICAgICB2b2lkICpsM3RhYjsKQEAgLTMxMyw5ICszMTgs
NyBAQCBzdGF0aWMgeGVuX3Bmbl90IG1vdmVfbDNfYmVsb3dfNEcoc3RydWN0IHhjX2RvbV9pbWFn
ZSAqZG9tLAogICAgIGlmICggIW5ld19sM21mbiApCiAgICAgICAgIGdvdG8gb3V0OwogCi0gICAg
ZG9tLT5wMm1faG9zdFtsM3Bmbl0gPSBuZXdfbDNtZm47Ci0gICAgaWYgKCB4Y19kb21fdXBkYXRl
X2d1ZXN0X3AybShkb20pICE9IDAgKQotICAgICAgICBnb3RvIG91dDsKKyAgICBwMm1fZ3Vlc3Rb
bDNwZm5dID0gZG9tLT5wMm1faG9zdFtsM3Bmbl0gPSBuZXdfbDNtZm47CiAKICAgICBpZiAoIHhj
X2FkZF9tbXVfdXBkYXRlKGRvbS0+eGNoLCBtbXUsCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAoKCh1bnNpZ25lZCBsb25nIGxvbmcpbmV3X2wzbWZuKQpAQCAtNDQ0LDcgKzQ0NywxNyBAQCBz
dGF0aWMgaW50IHNldHVwX3BndGFibGVzX3B2KHN0cnVjdCB4Y19kb21faW1hZ2UgKmRvbSkKIHN0
YXRpYyBpbnQgc2V0dXBfcGd0YWJsZXNfeDg2XzMyX3BhZShzdHJ1Y3QgeGNfZG9tX2ltYWdlICpk
b20pCiB7CiAgICAgc3RydWN0IHhjX2RvbV9pbWFnZV94ODYgKmRvbXg4NiA9IGRvbS0+YXJjaF9w
cml2YXRlOwotICAgIHhlbl9wZm5fdCBsM21mbiwgbDNwZm47CisgICAgdWludDMyX3QgKnAybV9n
dWVzdCA9IGRvbXg4Ni0+cDJtX2d1ZXN0OworICAgIHhlbl9wZm5fdCBsM21mbiwgbDNwZm4sIGk7
CisKKyAgICAvKiBDb3B5IGRvbS0+cDJtX2hvc3RbXSBpbnRvIHRoZSBndWVzdC4gKi8KKyAgICBm
b3IgKCBpID0gMDsgaSA8IGRvbS0+cDJtX3NpemU7ICsraSApCisgICAgeworICAgICAgICBpZiAo
IGRvbS0+cDJtX2hvc3RbaV0gIT0gSU5WQUxJRF9QRk4gKQorICAgICAgICAgICAgcDJtX2d1ZXN0
W2ldID0gZG9tLT5wMm1faG9zdFtpXTsKKyAgICAgICAgZWxzZQorICAgICAgICAgICAgcDJtX2d1
ZXN0W2ldID0gLTE7CisgICAgfQogCiAgICAgbDNwZm4gPSBkb214ODYtPm1hcHNbMF0ubHZsc1sy
XS5wZm47CiAgICAgbDNtZm4gPSB4Y19kb21fcDJtKGRvbSwgbDNwZm4pOwpAQCAtNDg4LDYgKzUw
MSwxOSBAQCBzdGF0aWMgaW50IGFsbG9jX3BndGFibGVzX3g4Nl82NChzdHJ1Y3QgeGNfZG9tX2lt
YWdlICpkb20pCiAKIHN0YXRpYyBpbnQgc2V0dXBfcGd0YWJsZXNfeDg2XzY0KHN0cnVjdCB4Y19k
b21faW1hZ2UgKmRvbSkKIHsKKyAgICBzdHJ1Y3QgeGNfZG9tX2ltYWdlX3g4NiAqZG9teDg2ID0g
ZG9tLT5hcmNoX3ByaXZhdGU7CisgICAgdWludDY0X3QgKnAybV9ndWVzdCA9IGRvbXg4Ni0+cDJt
X2d1ZXN0OworICAgIHhlbl9wZm5fdCBpOworCisgICAgLyogQ29weSBkb20tPnAybV9ob3N0W10g
aW50byB0aGUgZ3Vlc3QuICovCisgICAgZm9yICggaSA9IDA7IGkgPCBkb20tPnAybV9zaXplOyAr
K2kgKQorICAgIHsKKyAgICAgICAgaWYgKCBkb20tPnAybV9ob3N0W2ldICE9IElOVkFMSURfUEZO
ICkKKyAgICAgICAgICAgIHAybV9ndWVzdFtpXSA9IGRvbS0+cDJtX2hvc3RbaV07CisgICAgICAg
IGVsc2UKKyAgICAgICAgICAgIHAybV9ndWVzdFtpXSA9IC0xOworICAgIH0KKwogICAgIHJldHVy
biBzZXR1cF9wZ3RhYmxlc19wdihkb20pOwogfQogCkBAIC00OTUsMTEgKzUyMSwxNCBAQCBzdGF0
aWMgaW50IHNldHVwX3BndGFibGVzX3g4Nl82NChzdHJ1Y3QgeGNfZG9tX2ltYWdlICpkb20pCiAK
IHN0YXRpYyBpbnQgYWxsb2NfcDJtX2xpc3Qoc3RydWN0IHhjX2RvbV9pbWFnZSAqZG9tLCBzaXpl
X3QgcDJtX2FsbG9jX3NpemUpCiB7CisgICAgc3RydWN0IHhjX2RvbV9pbWFnZV94ODYgKmRvbXg4
NiA9IGRvbS0+YXJjaF9wcml2YXRlOworCiAgICAgaWYgKCB4Y19kb21fYWxsb2Nfc2VnbWVudChk
b20sICZkb20tPnAybV9zZWcsICJwaHlzMm1hY2giLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgMCwgcDJtX2FsbG9jX3NpemUpICkKICAgICAgICAgcmV0dXJuIC0xOwotICAgIGRvbS0+
cDJtX2d1ZXN0ID0geGNfZG9tX3NlZ190b19wdHIoZG9tLCAmZG9tLT5wMm1fc2VnKTsKLSAgICBp
ZiAoIGRvbS0+cDJtX2d1ZXN0ID09IE5VTEwgKQorCisgICAgZG9teDg2LT5wMm1fZ3Vlc3QgPSB4
Y19kb21fc2VnX3RvX3B0cihkb20sICZkb20tPnAybV9zZWcpOworICAgIGlmICggZG9teDg2LT5w
Mm1fZ3Vlc3QgPT0gTlVMTCApCiAgICAgICAgIHJldHVybiAtMTsKIAogICAgIHJldHVybiAwOwot
LSAKMi4xMS4wCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcK
aHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

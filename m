Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 8AB4C18FD6
	for <lists+xen-devel@lfdr.de>; Thu,  9 May 2019 20:03:37 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hOnM6-0005uv-MZ; Thu, 09 May 2019 18:01:18 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=UEDQ=TJ=kernel.org=sstabellini@srs-us1.protection.inumbo.net>)
 id 1hOnM6-0005uq-2F
 for xen-devel@lists.xenproject.org; Thu, 09 May 2019 18:01:18 +0000
X-Inumbo-ID: 70cdea04-7284-11e9-9224-7f9cc61e2d14
Received: from mail.kernel.org (unknown [198.145.29.99])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 70cdea04-7284-11e9-9224-7f9cc61e2d14;
 Thu, 09 May 2019 18:01:16 +0000 (UTC)
Received: from localhost (c-67-164-102-47.hsd1.ca.comcast.net [67.164.102.47])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256
 bits)) (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 9D6E42085A;
 Thu,  9 May 2019 18:01:15 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=default; t=1557424876;
 bh=zDJGVUNhmI09DBr5yd1H0/CVGYHXnnAeZ0qxMVq9tDc=;
 h=Date:From:To:cc:Subject:In-Reply-To:References:From;
 b=ov0tsUPwBy8OOUM+ivrva82q3czidH4x3D91Lk4ntoeYPJxb5i+2UlDeO9k4SwwXH
 KP8+v09WVjVlKPjgR6awAa+L2a/c83CpEiDKx9daCJD8J0iZFKOcN5DQxHvtoNzHzp
 ANZiJhNbUILh0MNeYtM1SR4z51c7K2rXnboTbCh0=
Date: Thu, 9 May 2019 11:01:14 -0700 (PDT)
From: Stefano Stabellini <sstabellini@kernel.org>
X-X-Sender: sstabellini@sstabellini-ThinkPad-T480s
To: Julien Grall <julien.grall@arm.com>
In-Reply-To: <20190507151458.29350-7-julien.grall@arm.com>
Message-ID: <alpine.DEB.2.21.1905091057200.25766@sstabellini-ThinkPad-T480s>
References: <20190507151458.29350-1-julien.grall@arm.com>
 <20190507151458.29350-7-julien.grall@arm.com>
User-Agent: Alpine 2.21 (DEB 202 2017-01-01)
MIME-Version: 1.0
Subject: Re: [Xen-devel] [PATCH 06/14] xen: Convert hotplug page function to
 use typesafe MFN
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wei.liu2@citrix.com>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Jan Beulich <jbeulich@suse.com>, xen-devel@lists.xenproject.org,
 =?UTF-8?Q?Roger_Pau_Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gVHVlLCA3IE1heSAyMDE5LCBKdWxpZW4gR3JhbGwgd3JvdGU6Cj4gQ29udmVydCBvbmxpbmVf
cGFnZSwgb2ZmbGluZV9wYWdlIGFuZCBxdWVyeV9wYWdlX29mZmxpbmUgdG8gdXNlCj4gdHlwZXNh
ZmUgTUZOLgoKSSB3b3VsZCBsaWtlIHRvIGhhdmUgYSBzdGF0ZW1lbnQgaW4gdGhlIGNvbW1pdCBt
ZXNzYWdlIG1lbnRpb25pbmcgdGhlCmNoYW5nZXMgYmVsb3cgdG8gbWNpX2FjdGlvbl9hZGRfcGFn
ZW9mZmxpbmUgYW5kIG1jX21lbWVycl9kaGFuZGxlci4KCkZyb20gYW4gQVJNIHBvaW50IG9mIHZp
ZXcsIGl0IGlzIGZpbmUuCgoKCj4gTm90ZSwgZm9yIGNsYXJpdHksIHRoZSB3b3JkcyBoYXZlIGJl
ZW4gcmUtb3JkZXJlZCBpbiB0aGUgZXJyb3IgbWVzc2FnZQo+IHVwZGF0ZWQgYnkgdGhpcyBwYXRj
aC4KPiAKPiBObyBmdW5jdGlvbmFsIGNoYW5nZXMuCj4gCj4gU2lnbmVkLW9mZi1ieTogSnVsaWVu
IEdyYWxsIDxqdWxpZW4uZ3JhbGxAYXJtLmNvbT4KPiBBY2tlZC1ieTogSmFuIEJldWxpY2ggPGpi
ZXVsaWNoQHN1c2UuY29tPgo+IAo+IC0tLQo+ICAgICBDaGFuZ2VzOgo+ICAgICAgICAgLSBVcGRh
dGUgZXJyb3IgbWVzc2FnZQo+ICAgICAgICAgLSBBZGQgSmFuJ3MgYWNrZWQtYnkKPiAtLS0KPiAg
eGVuL2FyY2gveDg2L2NwdS9tY2hlY2svbWNhY3Rpb24uYyB8IDE4ICsrKysrKysrKystLS0tLS0t
LQo+ICB4ZW4vY29tbW9uL3BhZ2VfYWxsb2MuYyAgICAgICAgICAgIHwgMjQgKysrKysrKysrKysr
LS0tLS0tLS0tLS0tCj4gIHhlbi9jb21tb24vc3lzY3RsLmMgICAgICAgICAgICAgICAgfCAxNCAr
KysrKysrLS0tLS0tLQo+ICB4ZW4vaW5jbHVkZS94ZW4vbW0uaCAgICAgICAgICAgICAgIHwgIDYg
KysrLS0tCj4gIDQgZmlsZXMgY2hhbmdlZCwgMzIgaW5zZXJ0aW9ucygrKSwgMzAgZGVsZXRpb25z
KC0pCj4gCj4gZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9jcHUvbWNoZWNrL21jYWN0aW9uLmMg
Yi94ZW4vYXJjaC94ODYvY3B1L21jaGVjay9tY2FjdGlvbi5jCj4gaW5kZXggZTQyMjY3NDE0ZS4u
NjkzMzJmYjg0ZCAxMDA2NDQKPiAtLS0gYS94ZW4vYXJjaC94ODYvY3B1L21jaGVjay9tY2FjdGlv
bi5jCj4gKysrIGIveGVuL2FyY2gveDg2L2NwdS9tY2hlY2svbWNhY3Rpb24uYwo+IEBAIC02LDcg
KzYsNyBAQAo+ICAKPiAgc3RhdGljIHN0cnVjdCBtY2luZm9fcmVjb3ZlcnkgKgo+ICBtY2lfYWN0
aW9uX2FkZF9wYWdlb2ZmbGluZShpbnQgYmFuaywgc3RydWN0IG1jX2luZm8gKm1pLAo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRfdCBtZm4sIHVpbnQzMl90IHN0YXR1cykKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgbWZuX3QgbWZuLCB1aW50MzJfdCBzdGF0dXMpCj4g
IHsKPiAgICAgIHN0cnVjdCBtY2luZm9fcmVjb3ZlcnkgKnJlYzsKPiAgCj4gQEAgLTIyLDcgKzIy
LDcgQEAgbWNpX2FjdGlvbl9hZGRfcGFnZW9mZmxpbmUoaW50IGJhbmssIHN0cnVjdCBtY19pbmZv
ICptaSwKPiAgCj4gICAgICByZWMtPm1jX2JhbmsgPSBiYW5rOwo+ICAgICAgcmVjLT5hY3Rpb25f
dHlwZXMgPSBNQ19BQ1RJT05fUEFHRV9PRkZMSU5FOwo+IC0gICAgcmVjLT5hY3Rpb25faW5mby5w
YWdlX3JldGlyZS5tZm4gPSBtZm47Cj4gKyAgICByZWMtPmFjdGlvbl9pbmZvLnBhZ2VfcmV0aXJl
Lm1mbiA9IG1mbl94KG1mbik7Cj4gICAgICByZWMtPmFjdGlvbl9pbmZvLnBhZ2VfcmV0aXJlLnN0
YXR1cyA9IHN0YXR1czsKPiAgICAgIHJldHVybiByZWM7Cj4gIH0KPiBAQCAtNDIsNyArNDIsOCBA
QCBtY19tZW1lcnJfZGhhbmRsZXIoc3RydWN0IG1jYV9iaW5mbyAqYmluZm8sCj4gICAgICBzdHJ1
Y3QgbWNpbmZvX2JhbmsgKmJhbmsgPSBiaW5mby0+bWliOwo+ICAgICAgc3RydWN0IG1jaW5mb19n
bG9iYWwgKmdsb2JhbCA9IGJpbmZvLT5taWc7Cj4gICAgICBzdHJ1Y3QgZG9tYWluICpkOwo+IC0g
ICAgdW5zaWduZWQgbG9uZyBtZm4sIGdmbjsKPiArICAgIG1mbl90IG1mbjsKPiArICAgIHVuc2ln
bmVkIGxvbmcgZ2ZuOwo+ICAgICAgdWludDMyX3Qgc3RhdHVzOwo+ICAgICAgaW50IHZtY2VfdmNw
dWlkOwo+ICAgICAgdW5zaWduZWQgaW50IG1jX3ZjcHVpZDsKPiBAQCAtNTQsMTEgKzU1LDEyIEBA
IG1jX21lbWVycl9kaGFuZGxlcihzdHJ1Y3QgbWNhX2JpbmZvICpiaW5mbywKPiAgICAgICAgICBy
ZXR1cm47Cj4gICAgICB9Cj4gIAo+IC0gICAgbWZuID0gYmFuay0+bWNfYWRkciA+PiBQQUdFX1NI
SUZUOwo+ICsgICAgbWZuID0gbWFkZHJfdG9fbWZuKGJhbmstPm1jX2FkZHIpOwo+ICAgICAgaWYg
KCBvZmZsaW5lX3BhZ2UobWZuLCAxLCAmc3RhdHVzKSApCj4gICAgICB7Cj4gICAgICAgICAgZHBy
aW50ayhYRU5MT0dfV0FSTklORywKPiAtICAgICAgICAgICAgICAgICJGYWlsZWQgdG8gb2ZmbGlu
ZSBwYWdlICVseCBmb3IgTUNFIGVycm9yXG4iLCBtZm4pOwo+ICsgICAgICAgICAgICAgICAgIkZh
aWxlZCB0byBvZmZsaW5lIHBhZ2UgJSJQUklfbWZuIiBmb3IgTUNFIGVycm9yXG4iLAo+ICsgICAg
ICAgICAgICAgICAgbWZuX3gobWZuKSk7Cj4gICAgICAgICAgcmV0dXJuOwo+ICAgICAgfQo+ICAK
PiBAQCAtODksMTAgKzkxLDEwIEBAIG1jX21lbWVycl9kaGFuZGxlcihzdHJ1Y3QgbWNhX2JpbmZv
ICpiaW5mbywKPiAgICAgICAgICAgICAgICAgIEFTU0VSVChkKTsKPiAgICAgICAgICAgICAgICAg
IGdmbiA9IGdldF9ncGZuX2Zyb21fbWZuKChiYW5rLT5tY19hZGRyKSA+PiBQQUdFX1NISUZUKTsK
PiAgCj4gLSAgICAgICAgICAgICAgICBpZiAoIHVubW1hcF9icm9rZW5fcGFnZShkLCBfbWZuKG1m
biksIGdmbikgKQo+ICsgICAgICAgICAgICAgICAgaWYgKCB1bm1tYXBfYnJva2VuX3BhZ2UoZCwg
bWZuLCBnZm4pICkKPiAgICAgICAgICAgICAgICAgIHsKPiAtICAgICAgICAgICAgICAgICAgICBw
cmludGsoIlVubWFwIGJyb2tlbiBtZW1vcnkgJWx4IGZvciBET00lZCBmYWlsZWRcbiIsCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgIG1mbiwgZC0+ZG9tYWluX2lkKTsKPiArICAgICAgICAg
ICAgICAgICAgICBwcmludGsoIlVubWFwIGJyb2tlbiBtZW1vcnkgJSJQUklfbWZuIiBmb3IgRE9N
JWQgZmFpbGVkXG4iLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBtZm5feChtZm4pLCBk
LT5kb21haW5faWQpOwo+ICAgICAgICAgICAgICAgICAgICAgIGdvdG8gdm1jZV9mYWlsZWQ7Cj4g
ICAgICAgICAgICAgICAgICB9Cj4gIAo+IGRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3BhZ2VfYWxs
b2MuYyBiL3hlbi9jb21tb24vcGFnZV9hbGxvYy5jCj4gaW5kZXggYmU0NDE1ODAzMy4uZjQ0NWY3
ZGFlYyAxMDA2NDQKPiAtLS0gYS94ZW4vY29tbW9uL3BhZ2VfYWxsb2MuYwo+ICsrKyBiL3hlbi9j
b21tb24vcGFnZV9hbGxvYy5jCj4gQEAgLTE1NjgsMjMgKzE1NjgsMjMgQEAgc3RhdGljIGludCBy
ZXNlcnZlX2hlYXBfcGFnZShzdHJ1Y3QgcGFnZV9pbmZvICpwZykKPiAgCj4gIH0KPiAgCj4gLWlu
dCBvZmZsaW5lX3BhZ2UodW5zaWduZWQgbG9uZyBtZm4sIGludCBicm9rZW4sIHVpbnQzMl90ICpz
dGF0dXMpCj4gK2ludCBvZmZsaW5lX3BhZ2UobWZuX3QgbWZuLCBpbnQgYnJva2VuLCB1aW50MzJf
dCAqc3RhdHVzKQo+ICB7Cj4gICAgICB1bnNpZ25lZCBsb25nIG9sZF9pbmZvID0gMDsKPiAgICAg
IHN0cnVjdCBkb21haW4gKm93bmVyOwo+ICAgICAgc3RydWN0IHBhZ2VfaW5mbyAqcGc7Cj4gIAo+
IC0gICAgaWYgKCAhbWZuX3ZhbGlkKF9tZm4obWZuKSkgKQo+ICsgICAgaWYgKCAhbWZuX3ZhbGlk
KG1mbikgKQo+ICAgICAgewo+ICAgICAgICAgIGRwcmludGsoWEVOTE9HX1dBUk5JTkcsCj4gLSAg
ICAgICAgICAgICAgICAidHJ5IHRvIG9mZmxpbmUgcGFnZSBvdXQgb2YgcmFuZ2UgJWx4XG4iLCBt
Zm4pOwo+ICsgICAgICAgICAgICAgICAgInRyeSB0byBvZmZsaW5lIG91dCBvZiByYW5nZSBwYWdl
ICUiUFJJX21mbiJcbiIsIG1mbl94KG1mbikpOwo+ICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+
ICAgICAgfQo+ICAKPiAgICAgICpzdGF0dXMgPSAwOwo+IC0gICAgcGcgPSBtZm5fdG9fcGFnZShf
bWZuKG1mbikpOwo+ICsgICAgcGcgPSBtZm5fdG9fcGFnZShtZm4pOwo+ICAKPiAtICAgIGlmICgg
aXNfeGVuX2ZpeGVkX21mbihtZm4pICkKPiArICAgIGlmICggaXNfeGVuX2ZpeGVkX21mbihtZm5f
eChtZm4pKSApCj4gICAgICB7Cj4gICAgICAgICAgKnN0YXR1cyA9IFBHX09GRkxJTkVfWEVOUEFH
RSB8IFBHX09GRkxJTkVfRkFJTEVEIHwKPiAgICAgICAgICAgIChET01JRF9YRU4gPDwgUEdfT0ZG
TElORV9PV05FUl9TSElGVCk7Cj4gQEAgLTE1OTUsNyArMTU5NSw3IEBAIGludCBvZmZsaW5lX3Bh
Z2UodW5zaWduZWQgbG9uZyBtZm4sIGludCBicm9rZW4sIHVpbnQzMl90ICpzdGF0dXMpCj4gICAg
ICAgKiBOLkIuIHhlbidzIHR4dCBpbiB4ODZfNjQgaXMgbWFya2VkIHJlc2VydmVkIGFuZCBoYW5k
bGVkIGFscmVhZHkuCj4gICAgICAgKiBBbHNvIGtleGVjIHJhbmdlIGlzIHJlc2VydmVkLgo+ICAg
ICAgICovCj4gLSAgICBpZiAoICFwYWdlX2lzX3JhbV90eXBlKG1mbiwgUkFNX1RZUEVfQ09OVkVO
VElPTkFMKSApCj4gKyAgICBpZiAoICFwYWdlX2lzX3JhbV90eXBlKG1mbl94KG1mbiksIFJBTV9U
WVBFX0NPTlZFTlRJT05BTCkgKQo+ICAgICAgewo+ICAgICAgICAgICpzdGF0dXMgPSBQR19PRkZM
SU5FX0ZBSUxFRCB8IFBHX09GRkxJTkVfTk9UX0NPTlZfUkFNOwo+ICAgICAgICAgIHJldHVybiAt
RUlOVkFMOwo+IEBAIC0xNjc3LDE5ICsxNjc3LDE5IEBAIGludCBvZmZsaW5lX3BhZ2UodW5zaWdu
ZWQgbG9uZyBtZm4sIGludCBicm9rZW4sIHVpbnQzMl90ICpzdGF0dXMpCj4gICAqICAgVGhlIGNh
bGxlciBzaG91bGQgbWFrZSBzdXJlIGVuZF9wZm4gPD0gbWF4X3BhZ2UsCj4gICAqICAgaWYgbm90
LCBleHBhbmRfcGFnZXMoKSBzaG91bGQgYmUgY2FsbGVkIHByaW9yIHRvIG9ubGluZV9wYWdlKCku
Cj4gICAqLwo+IC11bnNpZ25lZCBpbnQgb25saW5lX3BhZ2UodW5zaWduZWQgbG9uZyBtZm4sIHVp
bnQzMl90ICpzdGF0dXMpCj4gK3Vuc2lnbmVkIGludCBvbmxpbmVfcGFnZShtZm5fdCBtZm4sIHVp
bnQzMl90ICpzdGF0dXMpCj4gIHsKPiAgICAgIHVuc2lnbmVkIGxvbmcgeCwgbngsIHk7Cj4gICAg
ICBzdHJ1Y3QgcGFnZV9pbmZvICpwZzsKPiAgICAgIGludCByZXQ7Cj4gIAo+IC0gICAgaWYgKCAh
bWZuX3ZhbGlkKF9tZm4obWZuKSkgKQo+ICsgICAgaWYgKCAhbWZuX3ZhbGlkKG1mbikgKQo+ICAg
ICAgewo+ICAgICAgICAgIGRwcmludGsoWEVOTE9HX1dBUk5JTkcsICJjYWxsIGV4cGFuZF9wYWdl
cygpIGZpcnN0XG4iKTsKPiAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAgICAgIH0KPiAgCj4g
LSAgICBwZyA9IG1mbl90b19wYWdlKF9tZm4obWZuKSk7Cj4gKyAgICBwZyA9IG1mbl90b19wYWdl
KG1mbik7Cj4gIAo+ICAgICAgc3Bpbl9sb2NrKCZoZWFwX2xvY2spOwo+ICAKPiBAQCAtMTczMCwx
MSArMTczMCwxMSBAQCB1bnNpZ25lZCBpbnQgb25saW5lX3BhZ2UodW5zaWduZWQgbG9uZyBtZm4s
IHVpbnQzMl90ICpzdGF0dXMpCj4gICAgICByZXR1cm4gcmV0Owo+ICB9Cj4gIAo+IC1pbnQgcXVl
cnlfcGFnZV9vZmZsaW5lKHVuc2lnbmVkIGxvbmcgbWZuLCB1aW50MzJfdCAqc3RhdHVzKQo+ICtp
bnQgcXVlcnlfcGFnZV9vZmZsaW5lKG1mbl90IG1mbiwgdWludDMyX3QgKnN0YXR1cykKPiAgewo+
ICAgICAgc3RydWN0IHBhZ2VfaW5mbyAqcGc7Cj4gIAo+IC0gICAgaWYgKCAhbWZuX3ZhbGlkKF9t
Zm4obWZuKSkgfHwgIXBhZ2VfaXNfcmFtX3R5cGUobWZuLCBSQU1fVFlQRV9DT05WRU5USU9OQUwp
ICkKPiArICAgIGlmICggIW1mbl92YWxpZChtZm4pIHx8ICFwYWdlX2lzX3JhbV90eXBlKG1mbl94
KG1mbiksIFJBTV9UWVBFX0NPTlZFTlRJT05BTCkgKQo+ICAgICAgewo+ICAgICAgICAgIGRwcmlu
dGsoWEVOTE9HX1dBUk5JTkcsICJjYWxsIGV4cGFuZF9wYWdlcygpIGZpcnN0XG4iKTsKPiAgICAg
ICAgICByZXR1cm4gLUVJTlZBTDsKPiBAQCAtMTc0Myw3ICsxNzQzLDcgQEAgaW50IHF1ZXJ5X3Bh
Z2Vfb2ZmbGluZSh1bnNpZ25lZCBsb25nIG1mbiwgdWludDMyX3QgKnN0YXR1cykKPiAgICAgICpz
dGF0dXMgPSAwOwo+ICAgICAgc3Bpbl9sb2NrKCZoZWFwX2xvY2spOwo+ICAKPiAtICAgIHBnID0g
bWZuX3RvX3BhZ2UoX21mbihtZm4pKTsKPiArICAgIHBnID0gbWZuX3RvX3BhZ2UobWZuKTsKPiAg
Cj4gICAgICBpZiAoIHBhZ2Vfc3RhdGVfaXMocGcsIG9mZmxpbmluZykgKQo+ICAgICAgICAgICpz
dGF0dXMgfD0gUEdfT0ZGTElORV9TVEFUVVNfT0ZGTElORV9QRU5ESU5HOwo+IGRpZmYgLS1naXQg
YS94ZW4vY29tbW9uL3N5c2N0bC5jIGIveGVuL2NvbW1vbi9zeXNjdGwuYwo+IGluZGV4IGMwYWE2
YmRlNGUuLmFiMTYxNzkzZTUgMTAwNjQ0Cj4gLS0tIGEveGVuL2NvbW1vbi9zeXNjdGwuYwo+ICsr
KyBiL3hlbi9jb21tb24vc3lzY3RsLmMKPiBAQCAtMTg2LDcgKzE4Niw3IEBAIGxvbmcgZG9fc3lz
Y3RsKFhFTl9HVUVTVF9IQU5ETEVfUEFSQU0oeGVuX3N5c2N0bF90KSB1X3N5c2N0bCkKPiAgICAg
IGNhc2UgWEVOX1NZU0NUTF9wYWdlX29mZmxpbmVfb3A6Cj4gICAgICB7Cj4gICAgICAgICAgdWlu
dDMyX3QgKnN0YXR1cywgKnB0cjsKPiAtICAgICAgICB1bnNpZ25lZCBsb25nIHBmbjsKPiArICAg
ICAgICBtZm5fdCBtZm47Cj4gIAo+ICAgICAgICAgIHJldCA9IHhzbV9wYWdlX29mZmxpbmUoWFNN
X0hPT0ssIG9wLT51LnBhZ2Vfb2ZmbGluZS5jbWQpOwo+ICAgICAgICAgIGlmICggcmV0ICkKPiBA
QCAtMjA1LDIxICsyMDUsMjEgQEAgbG9uZyBkb19zeXNjdGwoWEVOX0dVRVNUX0hBTkRMRV9QQVJB
TSh4ZW5fc3lzY3RsX3QpIHVfc3lzY3RsKQo+ICAgICAgICAgIG1lbXNldChzdGF0dXMsIFBHX09G
RkxJTkVfSU5WQUxJRCwgc2l6ZW9mKHVpbnQzMl90KSAqCj4gICAgICAgICAgICAgICAgICAgICAg
ICAob3AtPnUucGFnZV9vZmZsaW5lLmVuZCAtIG9wLT51LnBhZ2Vfb2ZmbGluZS5zdGFydCArIDEp
KTsKPiAgCj4gLSAgICAgICAgZm9yICggcGZuID0gb3AtPnUucGFnZV9vZmZsaW5lLnN0YXJ0Owo+
IC0gICAgICAgICAgICAgIHBmbiA8PSBvcC0+dS5wYWdlX29mZmxpbmUuZW5kOwo+IC0gICAgICAg
ICAgICAgIHBmbiArKyApCj4gKyAgICAgICAgZm9yICggbWZuID0gX21mbihvcC0+dS5wYWdlX29m
ZmxpbmUuc3RhcnQpOwo+ICsgICAgICAgICAgICAgIG1mbl94KG1mbikgPD0gb3AtPnUucGFnZV9v
ZmZsaW5lLmVuZDsKPiArICAgICAgICAgICAgICBtZm4gPSBtZm5fYWRkKG1mbiwgMSkgKQo+ICAg
ICAgICAgIHsKPiAgICAgICAgICAgICAgc3dpdGNoICggb3AtPnUucGFnZV9vZmZsaW5lLmNtZCAp
Cj4gICAgICAgICAgICAgIHsKPiAgICAgICAgICAgICAgICAgIC8qIFNoYWxsIHJldmVydCBoZXIg
aWYgZmFpbGVkLCBvciBsZWF2ZSBjYWxsZXIgZG8gaXQ/ICovCj4gICAgICAgICAgICAgICAgICBj
YXNlIHN5c2N0bF9wYWdlX29mZmxpbmU6Cj4gLSAgICAgICAgICAgICAgICAgICAgcmV0ID0gb2Zm
bGluZV9wYWdlKHBmbiwgMCwgcHRyKyspOwo+ICsgICAgICAgICAgICAgICAgICAgIHJldCA9IG9m
ZmxpbmVfcGFnZShtZm4sIDAsIHB0cisrKTsKPiAgICAgICAgICAgICAgICAgICAgICBicmVhazsK
PiAgICAgICAgICAgICAgICAgIGNhc2Ugc3lzY3RsX3BhZ2Vfb25saW5lOgo+IC0gICAgICAgICAg
ICAgICAgICAgIHJldCA9IG9ubGluZV9wYWdlKHBmbiwgcHRyKyspOwo+ICsgICAgICAgICAgICAg
ICAgICAgIHJldCA9IG9ubGluZV9wYWdlKG1mbiwgcHRyKyspOwo+ICAgICAgICAgICAgICAgICAg
ICAgIGJyZWFrOwo+ICAgICAgICAgICAgICAgICAgY2FzZSBzeXNjdGxfcXVlcnlfcGFnZV9vZmZs
aW5lOgo+IC0gICAgICAgICAgICAgICAgICAgIHJldCA9IHF1ZXJ5X3BhZ2Vfb2ZmbGluZShwZm4s
IHB0cisrKTsKPiArICAgICAgICAgICAgICAgICAgICByZXQgPSBxdWVyeV9wYWdlX29mZmxpbmUo
bWZuLCBwdHIrKyk7Cj4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gICAgICAgICAgICAg
ICAgICBkZWZhdWx0Ogo+ICAgICAgICAgICAgICAgICAgICAgIHJldCA9IC1FSU5WQUw7Cj4gZGlm
ZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9tbS5oIGIveGVuL2luY2x1ZGUveGVuL21tLmgKPiBp
bmRleCBlOTcxMTQ3MjM0Li4zYmE3MTY4Y2M5IDEwMDY0NAo+IC0tLSBhL3hlbi9pbmNsdWRlL3hl
bi9tbS5oCj4gKysrIGIveGVuL2luY2x1ZGUveGVuL21tLmgKPiBAQCAtMjA2LDkgKzIwNiw5IEBA
IHVuc2lnbmVkIGxvbmcgYXZhaWxfZG9taGVhcF9wYWdlcyh2b2lkKTsKPiAgdW5zaWduZWQgbG9u
ZyBhdmFpbF9ub2RlX2hlYXBfcGFnZXModW5zaWduZWQgaW50KTsKPiAgI2RlZmluZSBhbGxvY19k
b21oZWFwX3BhZ2UoZCxmKSAoYWxsb2NfZG9taGVhcF9wYWdlcyhkLDAsZikpCj4gICNkZWZpbmUg
ZnJlZV9kb21oZWFwX3BhZ2UocCkgIChmcmVlX2RvbWhlYXBfcGFnZXMocCwwKSkKPiAtdW5zaWdu
ZWQgaW50IG9ubGluZV9wYWdlKHVuc2lnbmVkIGxvbmcgbWZuLCB1aW50MzJfdCAqc3RhdHVzKTsK
PiAtaW50IG9mZmxpbmVfcGFnZSh1bnNpZ25lZCBsb25nIG1mbiwgaW50IGJyb2tlbiwgdWludDMy
X3QgKnN0YXR1cyk7Cj4gLWludCBxdWVyeV9wYWdlX29mZmxpbmUodW5zaWduZWQgbG9uZyBtZm4s
IHVpbnQzMl90ICpzdGF0dXMpOwo+ICt1bnNpZ25lZCBpbnQgb25saW5lX3BhZ2UobWZuX3QgbWZu
LCB1aW50MzJfdCAqc3RhdHVzKTsKPiAraW50IG9mZmxpbmVfcGFnZShtZm5fdCBtZm4sIGludCBi
cm9rZW4sIHVpbnQzMl90ICpzdGF0dXMpOwo+ICtpbnQgcXVlcnlfcGFnZV9vZmZsaW5lKG1mbl90
IG1mbiwgdWludDMyX3QgKnN0YXR1cyk7Cj4gIHVuc2lnbmVkIGxvbmcgdG90YWxfZnJlZV9wYWdl
cyh2b2lkKTsKPiAgCj4gIHZvaWQgaGVhcF9pbml0X2xhdGUodm9pZCk7Cj4gLS0gCj4gMi4xMS4w
Cj4gCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4t
ZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczov
L2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

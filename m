Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id F0B336C189
	for <lists+xen-devel@lfdr.de>; Wed, 17 Jul 2019 21:36:44 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hnpgh-0000IV-96; Wed, 17 Jul 2019 19:34:03 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=K8rP=VO=gmail.com=tamas.k.lengyel@srs-us1.protection.inumbo.net>)
 id 1hnpgg-0000IL-3M
 for xen-devel@lists.xenproject.org; Wed, 17 Jul 2019 19:34:02 +0000
X-Inumbo-ID: d2f84668-a8c9-11e9-b34d-ef1fc16ccd93
Received: from mail-io1-f66.google.com (unknown [209.85.166.66])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id d2f84668-a8c9-11e9-b34d-ef1fc16ccd93;
 Wed, 17 Jul 2019 19:33:59 +0000 (UTC)
Received: by mail-io1-f66.google.com with SMTP id o9so47686592iom.3
 for <xen-devel@lists.xenproject.org>; Wed, 17 Jul 2019 12:33:59 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=bhWcJS8ddgdUot0n7cOWsB1nWNTTcu28PhAqbt9unzE=;
 b=rce9aksren0NUfpFpaHvSv5PuZS+YsziuobuSK+M36Qj5BJrEbILpuadtSAql1CuMQ
 M+qmg8y0mo8iZnKbRhM63PicD1dseSt/MLElvotlNyr4dwYuaeKZMzTJtZbOedAbGlHS
 yOK57++MAZgCKwhPIyKsPyWfUq8SBw6tpifHnx1Kq5KjNLwB8L5gMXltz6zVMNtH6lY0
 vktqKeQD5TphJrGz61MCR58Doq/csFneYlOiDZoVpX3/RATuwyhIBmgD5ktJemvRmGt9
 hToHHNxUyub5nFtpe1KDd5Bk5vE/l53swImeY7JTXkkId31kXjcrshJVJi0jFC0ciusv
 XVWA==
X-Gm-Message-State: APjAAAUaoEJV2naFtcbiF3rYYgdDBxmDvqxqud7weV5kYdUbahHvxad6
 1eCsk+618EyM6Kx1UONHqNFAHVn8hTQ=
X-Google-Smtp-Source: APXvYqzrM8D7/bpoymNk7/JIn6lgsbg1TXAklNJxkyfJnaG4sM7EImy+PUeVAPjyK7Hwmcn2ZiWtGQ==
X-Received: by 2002:a5d:8794:: with SMTP id f20mr37851018ion.128.1563392038669; 
 Wed, 17 Jul 2019 12:33:58 -0700 (PDT)
Received: from l1.lan (c-71-205-12-124.hsd1.co.comcast.net. [71.205.12.124])
 by smtp.gmail.com with ESMTPSA id v13sm21743421ioq.13.2019.07.17.12.33.56
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Wed, 17 Jul 2019 12:33:57 -0700 (PDT)
From: Tamas K Lengyel <tamas@tklengyel.com>
To: xen-devel@lists.xenproject.org
Date: Wed, 17 Jul 2019 13:33:34 -0600
Message-Id: <20190717193335.11991-5-tamas@tklengyel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190717193335.11991-1-tamas@tklengyel.com>
References: <20190717193335.11991-1-tamas@tklengyel.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v6 4/5] x86/mem_sharing: compile mem_sharing
 subsystem only when kconfig is enabled
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Tamas K Lengyel <tamas@tklengyel.com>, Wei Liu <wei.liu2@citrix.com>,
 Razvan Cojocaru <rcojocaru@bitdefender.com>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Jan Beulich <jbeulich@suse.com>,
 Daniel De Graaf <dgdegra@tycho.nsa.gov>,
 Roger Pau Monne <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RGlzYWJsZSBpdCBieSBkZWZhdWx0IGFzIGl0IGlzIG9ubHkgYW4gZXhwZXJpbWVudGFsIHN1YnN5
c3RlbS4KClNpZ25lZC1vZmYtYnk6IFRhbWFzIEsgTGVuZ3llbCA8dGFtYXNAdGtsZW5neWVsLmNv
bT4KQWNrZWQtYnk6IERhbmllbCBEZSBHcmFhZiA8ZGdkZWdyYUB0eWNoby5uc2EuZ292PgpBY2tl
ZC1ieTogUmF6dmFuIENvam9jYXJ1IDxyY29qb2NhcnVAYml0ZGVmZW5kZXIuY29tPgpBY2tlZC1i
eTogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgpDYzogQW5kcmV3IENvb3BlciA8YW5k
cmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KQ2M6IFdlaSBMaXUgPHdlaS5saXUyQGNpdHJpeC5jb20+
CkNjOiBSb2dlciBQYXUgTW9ubmUgPHJvZ2VyLnBhdUBjaXRyaXguY29tPgpDYzogR2VvcmdlIER1
bmxhcCA8R2VvcmdlLkR1bmxhcEBldS5jaXRyaXguY29tPgpDYzogSWFuIEphY2tzb24gPGlhbi5q
YWNrc29uQGV1LmNpdHJpeC5jb20+CkNjOiBKdWxpZW4gR3JhbGwgPGp1bGllbi5ncmFsbEBhcm0u
Y29tPgpDYzogS29ucmFkIFJ6ZXN6dXRlayBXaWxrIDxrb25yYWQud2lsa0BvcmFjbGUuY29tPgpD
YzogU3RlZmFubyBTdGFiZWxsaW5pIDxzc3RhYmVsbGluaUBrZXJuZWwub3JnPgpDYzogVGltIERl
ZWdhbiA8dGltQHhlbi5vcmc+CkNjOiBHZW9yZ2UgRHVubGFwIDxnZW9yZ2UuZHVubGFwQGV1LmNp
dHJpeC5jb20+Ci0tLS0KdjY6IHJlYmFzZSBvbiBzdGFnaW5nCi0tLQogeGVuL2FyY2gveDg2L0tj
b25maWcgICAgICAgICAgICAgIHwgIDYgKysrKystCiB4ZW4vYXJjaC94ODYvZG9tYWluLmMgICAg
ICAgICAgICAgfCAgMiArKwogeGVuL2FyY2gveDg2L2RvbWN0bC5jICAgICAgICAgICAgIHwgIDIg
KysKIHhlbi9hcmNoL3g4Ni9tbS9NYWtlZmlsZSAgICAgICAgICB8ICAyICstCiB4ZW4vYXJjaC94
ODYveDg2XzY0L2NvbXBhdC9tbS5jICAgfCAgMiArKwogeGVuL2FyY2gveDg2L3g4Nl82NC9tbS5j
ICAgICAgICAgIHwgIDIgKysKIHhlbi9jb21tb24vS2NvbmZpZyAgICAgICAgICAgICAgICB8ICAz
IC0tLQogeGVuL2NvbW1vbi9kb21haW4uYyAgICAgICAgICAgICAgIHwgIDYgKysrLS0tCiB4ZW4v
Y29tbW9uL2dyYW50X3RhYmxlLmMgICAgICAgICAgfCAgMiArLQogeGVuL2NvbW1vbi9tZW1vcnku
YyAgICAgICAgICAgICAgIHwgIDIgKy0KIHhlbi9jb21tb24vdm1fZXZlbnQuYyAgICAgICAgICAg
ICB8ICA2ICsrKy0tLQogeGVuL2luY2x1ZGUvYXNtLXg4Ni9tZW1fc2hhcmluZy5oIHwgMjggKysr
KysrKysrKysrKysrKysrKysrKysrKysrKwogeGVuL2luY2x1ZGUvYXNtLXg4Ni9tbS5oICAgICAg
ICAgIHwgIDMgKysrCiB4ZW4vaW5jbHVkZS94ZW4vbW0uaCAgICAgICAgICAgICAgfCAgMiArLQog
eGVuL2luY2x1ZGUveGVuL3NjaGVkLmggICAgICAgICAgIHwgIDIgKy0KIHhlbi9pbmNsdWRlL3hz
bS9kdW1teS5oICAgICAgICAgICB8ICAyICstCiB4ZW4vaW5jbHVkZS94c20veHNtLmggICAgICAg
ICAgICAgfCAgNCArKy0tCiB4ZW4veHNtL2R1bW15LmMgICAgICAgICAgICAgICAgICAgfCAgMiAr
LQogeGVuL3hzbS9mbGFzay9ob29rcy5jICAgICAgICAgICAgIHwgIDQgKystLQogMTkgZmlsZXMg
Y2hhbmdlZCwgNjEgaW5zZXJ0aW9ucygrKSwgMjEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEv
eGVuL2FyY2gveDg2L0tjb25maWcgYi94ZW4vYXJjaC94ODYvS2NvbmZpZwppbmRleCBmNTAyZDc2
NWJhLi4yODhkYzZjMDQyIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvS2NvbmZpZworKysgYi94
ZW4vYXJjaC94ODYvS2NvbmZpZwpAQCAtMTgsNyArMTgsNiBAQCBjb25maWcgWDg2CiAJc2VsZWN0
IEhBU19LRVhFQwogCXNlbGVjdCBNRU1fQUNDRVNTX0FMV0FZU19PTgogCXNlbGVjdCBIQVNfTUVN
X1BBR0lORwotCXNlbGVjdCBIQVNfTUVNX1NIQVJJTkcKIAlzZWxlY3QgSEFTX05TMTY1NTAKIAlz
ZWxlY3QgSEFTX1BBU1NUSFJPVUdICiAJc2VsZWN0IEhBU19QQ0kKQEAgLTE5OSw2ICsxOTgsMTEg
QEAgY29uZmlnIFBWX1NISU1fRVhDTFVTSVZFCiAJICBmaXJtd2FyZSwgYW5kIHdpbGwgbm90IGZ1
bmN0aW9uIGNvcnJlY3RseSBpbiBvdGhlciBzY2VuYXJpb3MuCiAKIAkgIElmIHVuc3VyZSwgc2F5
IE4uCisKK2NvbmZpZyBNRU1fU0hBUklORworCWJvb2wgIlhlbiBtZW1vcnkgc2hhcmluZyBzdXBw
b3J0IiBpZiBFWFBFUlQgPSAieSIKKwlkZXBlbmRzIG9uIEhWTQorCiBlbmRtZW51CiAKIHNvdXJj
ZSAiY29tbW9uL0tjb25maWciCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvZG9tYWluLmMgYi94
ZW4vYXJjaC94ODYvZG9tYWluLmMKaW5kZXggZTc5MWQ4Njg5Mi4uZWE1NTE2MDg4NyAxMDA2NDQK
LS0tIGEveGVuL2FyY2gveDg2L2RvbWFpbi5jCisrKyBiL3hlbi9hcmNoL3g4Ni9kb21haW4uYwpA
QCAtMjA5NSw2ICsyMDk1LDcgQEAgaW50IGRvbWFpbl9yZWxpbnF1aXNoX3Jlc291cmNlcyhzdHJ1
Y3QgZG9tYWluICpkKQogICAgICAgICAgICAgZC0+YXJjaC5hdXRvX3VubWFzayA9IDA7CiAgICAg
ICAgIH0KIAorI2lmZGVmIENPTkZJR19NRU1fU0hBUklORwogICAgIFBST0dSRVNTKHNoYXJlZCk6
CiAKICAgICAgICAgaWYgKCBpc19odm1fZG9tYWluKGQpICkKQEAgLTIxMDUsNiArMjEwNiw3IEBA
IGludCBkb21haW5fcmVsaW5xdWlzaF9yZXNvdXJjZXMoc3RydWN0IGRvbWFpbiAqZCkKICAgICAg
ICAgICAgIGlmICggcmV0ICkKICAgICAgICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgICB9
CisjZW5kaWYKIAogICAgICAgICBzcGluX2xvY2soJmQtPnBhZ2VfYWxsb2NfbG9jayk7CiAgICAg
ICAgIHBhZ2VfbGlzdF9zcGxpY2UoJmQtPmFyY2gucmVsbWVtX2xpc3QsICZkLT5wYWdlX2xpc3Qp
OwpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L2RvbWN0bC5jIGIveGVuL2FyY2gveDg2L2RvbWN0
bC5jCmluZGV4IGM4Mjc3OTAyMDIuLjJkNDVlNWI4YTggMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4
Ni9kb21jdGwuYworKysgYi94ZW4vYXJjaC94ODYvZG9tY3RsLmMKQEAgLTEyMzYsOSArMTIzNiwx
MSBAQCBsb25nIGFyY2hfZG9fZG9tY3RsKAogICAgICAgICBicmVhazsKICAgICB9CiAKKyNpZmRl
ZiBDT05GSUdfTUVNX1NIQVJJTkcKICAgICBjYXNlIFhFTl9ET01DVExfbWVtX3NoYXJpbmdfb3A6
CiAgICAgICAgIHJldCA9IG1lbV9zaGFyaW5nX2RvbWN0bChkLCAmZG9tY3RsLT51Lm1lbV9zaGFy
aW5nX29wKTsKICAgICAgICAgYnJlYWs7CisjZW5kaWYKIAogI2lmIFAyTV9BVURJVCAmJiBkZWZp
bmVkKENPTkZJR19IVk0pCiAgICAgY2FzZSBYRU5fRE9NQ1RMX2F1ZGl0X3AybToKZGlmZiAtLWdp
dCBhL3hlbi9hcmNoL3g4Ni9tbS9NYWtlZmlsZSBiL3hlbi9hcmNoL3g4Ni9tbS9NYWtlZmlsZQpp
bmRleCA1YTE3NjQ2Zjk4Li41MDEwYTI5ZDZjIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYvbW0v
TWFrZWZpbGUKKysrIGIveGVuL2FyY2gveDg2L21tL01ha2VmaWxlCkBAIC02LDcgKzYsNyBAQCBv
YmotJChDT05GSUdfSFZNKSArPSBndWVzdF93YWxrXzIubyBndWVzdF93YWxrXzMubyBndWVzdF93
YWxrXzQubwogb2JqLSQoQ09ORklHX1NIQURPV19QQUdJTkcpICs9IGd1ZXN0X3dhbGtfMi5vIGd1
ZXN0X3dhbGtfMy5vIGd1ZXN0X3dhbGtfNC5vCiBvYmotJChDT05GSUdfTUVNX0FDQ0VTUykgKz0g
bWVtX2FjY2Vzcy5vCiBvYmoteSArPSBtZW1fcGFnaW5nLm8KLW9iai15ICs9IG1lbV9zaGFyaW5n
Lm8KK29iai0kKENPTkZJR19NRU1fU0hBUklORykgKz0gbWVtX3NoYXJpbmcubwogb2JqLXkgKz0g
cDJtLm8gcDJtLXB0Lm8KIG9iai0kKENPTkZJR19IVk0pICs9IHAybS1lcHQubyBwMm0tcG9kLm8K
IG9iai15ICs9IHBhZ2luZy5vCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYveDg2XzY0L2NvbXBh
dC9tbS5jIGIveGVuL2FyY2gveDg2L3g4Nl82NC9jb21wYXQvbW0uYwppbmRleCAzMjQxMGVkMjcz
Li5kNGM2YmUzMDMyIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYveDg2XzY0L2NvbXBhdC9tbS5j
CisrKyBiL3hlbi9hcmNoL3g4Ni94ODZfNjQvY29tcGF0L21tLmMKQEAgLTE1Miw4ICsxNTIsMTAg
QEAgaW50IGNvbXBhdF9hcmNoX21lbW9yeV9vcCh1bnNpZ25lZCBsb25nIGNtZCwgWEVOX0dVRVNU
X0hBTkRMRV9QQVJBTSh2b2lkKSBhcmcpCiAgICAgY2FzZSBYRU5NRU1fcGFnaW5nX29wOgogICAg
ICAgICByZXR1cm4gbWVtX3BhZ2luZ19tZW1vcChndWVzdF9oYW5kbGVfY2FzdChhcmcsIHhlbl9t
ZW1fcGFnaW5nX29wX3QpKTsKIAorI2lmZGVmIENPTkZJR19NRU1fU0hBUklORwogICAgIGNhc2Ug
WEVOTUVNX3NoYXJpbmdfb3A6CiAgICAgICAgIHJldHVybiBtZW1fc2hhcmluZ19tZW1vcChndWVz
dF9oYW5kbGVfY2FzdChhcmcsIHhlbl9tZW1fc2hhcmluZ19vcF90KSk7CisjZW5kaWYKIAogICAg
IGRlZmF1bHQ6CiAgICAgICAgIHJjID0gLUVOT1NZUzsKZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4
Ni94ODZfNjQvbW0uYyBiL3hlbi9hcmNoL3g4Ni94ODZfNjQvbW0uYwppbmRleCA4OTliODgzYjJk
Li4xOTE5Y2FlMThiIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94ODYveDg2XzY0L21tLmMKKysrIGIv
eGVuL2FyY2gveDg2L3g4Nl82NC9tbS5jCkBAIC05OTMsOCArOTkzLDEwIEBAIGxvbmcgc3ViYXJj
aF9tZW1vcnlfb3AodW5zaWduZWQgbG9uZyBjbWQsIFhFTl9HVUVTVF9IQU5ETEVfUEFSQU0odm9p
ZCkgYXJnKQogICAgIGNhc2UgWEVOTUVNX3BhZ2luZ19vcDoKICAgICAgICAgcmV0dXJuIG1lbV9w
YWdpbmdfbWVtb3AoZ3Vlc3RfaGFuZGxlX2Nhc3QoYXJnLCB4ZW5fbWVtX3BhZ2luZ19vcF90KSk7
CiAKKyNpZmRlZiBDT05GSUdfTUVNX1NIQVJJTkcKICAgICBjYXNlIFhFTk1FTV9zaGFyaW5nX29w
OgogICAgICAgICByZXR1cm4gbWVtX3NoYXJpbmdfbWVtb3AoZ3Vlc3RfaGFuZGxlX2Nhc3QoYXJn
LCB4ZW5fbWVtX3NoYXJpbmdfb3BfdCkpOworI2VuZGlmCiAKICAgICBkZWZhdWx0OgogICAgICAg
ICByYyA9IC1FTk9TWVM7CmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL0tjb25maWcgYi94ZW4vY29t
bW9uL0tjb25maWcKaW5kZXggOTEyNjMwYTRmYi4uMTY4MjlmNjI3NCAxMDA2NDQKLS0tIGEveGVu
L2NvbW1vbi9LY29uZmlnCisrKyBiL3hlbi9jb21tb24vS2NvbmZpZwpAQCAtNDgsOSArNDgsNiBA
QCBjb25maWcgTUVNX0FDQ0VTUwogY29uZmlnIEhBU19NRU1fUEFHSU5HCiAJYm9vbAogCi1jb25m
aWcgSEFTX01FTV9TSEFSSU5HCi0JYm9vbAotCiBjb25maWcgSEFTX1BEWAogCWJvb2wKIApkaWZm
IC0tZ2l0IGEveGVuL2NvbW1vbi9kb21haW4uYyBiL3hlbi9jb21tb24vZG9tYWluLmMKaW5kZXgg
OGE1ZmE4NjYyYi4uNTVhYTc1OWI3NSAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9kb21haW4uYwor
KysgYi94ZW4vY29tbW9uL2RvbWFpbi5jCkBAIC03NCw3ICs3NCw3IEBAIGludGVnZXJfcGFyYW0o
ImhhcmR3YXJlX2RvbSIsIGhhcmR3YXJlX2RvbWlkKTsKIC8qIFByaXZhdGUgZG9tYWluIHN0cnVj
dHMgZm9yIERPTUlEX1hFTiwgRE9NSURfSU8sIGV0Yy4gKi8KIHN0cnVjdCBkb21haW4gKl9fcmVh
ZF9tb3N0bHkgZG9tX3hlbjsKIHN0cnVjdCBkb21haW4gKl9fcmVhZF9tb3N0bHkgZG9tX2lvOwot
I2lmZGVmIENPTkZJR19IQVNfTUVNX1NIQVJJTkcKKyNpZmRlZiBDT05GSUdfTUVNX1NIQVJJTkcK
IHN0cnVjdCBkb21haW4gKl9fcmVhZF9tb3N0bHkgZG9tX2NvdzsKICNlbmRpZgogCkBAIC01NDks
NyArNTQ5LDcgQEAgdm9pZCBfX2luaXQgc2V0dXBfc3lzdGVtX2RvbWFpbnModm9pZCkKICAgICBp
ZiAoIElTX0VSUihkb21faW8pICkKICAgICAgICAgcGFuaWMoIkZhaWxlZCB0byBjcmVhdGUgZFtJ
T106ICVsZFxuIiwgUFRSX0VSUihkb21faW8pKTsKIAotI2lmZGVmIENPTkZJR19IQVNfTUVNX1NI
QVJJTkcKKyNpZmRlZiBDT05GSUdfTUVNX1NIQVJJTkcKICAgICAvKgogICAgICAqIEluaXRpYWxp
c2Ugb3VyIENPVyBkb21haW4uCiAgICAgICogVGhpcyBkb21haW4gb3ducyBzaGFyYWJsZSBwYWdl
cy4KQEAgLTk2Niw3ICs5NjYsNyBAQCBzdGF0aWMgdm9pZCBjb21wbGV0ZV9kb21haW5fZGVzdHJv
eShzdHJ1Y3QgcmN1X2hlYWQgKmhlYWQpCiAgICAgeGZyZWUoZC0+dm1fZXZlbnRfcGFnaW5nKTsK
ICNlbmRpZgogICAgIHhmcmVlKGQtPnZtX2V2ZW50X21vbml0b3IpOwotI2lmZGVmIENPTkZJR19I
QVNfTUVNX1NIQVJJTkcKKyNpZmRlZiBDT05GSUdfTUVNX1NIQVJJTkcKICAgICB4ZnJlZShkLT52
bV9ldmVudF9zaGFyZSk7CiAjZW5kaWYKIApkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9ncmFudF90
YWJsZS5jIGIveGVuL2NvbW1vbi9ncmFudF90YWJsZS5jCmluZGV4IGI2YjQ1YzIxZTEuLjk3Njk1
YTIyMWEgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vZ3JhbnRfdGFibGUuYworKysgYi94ZW4vY29t
bW9uL2dyYW50X3RhYmxlLmMKQEAgLTM3OTgsNyArMzc5OCw3IEBAIHZvaWQgZ3JhbnRfdGFibGVf
aW5pdF92Y3B1KHN0cnVjdCB2Y3B1ICp2KQogICAgIHYtPm1hcHRyYWNrX3RhaWwgPSBNQVBUUkFD
S19UQUlMOwogfQogCi0jaWZkZWYgQ09ORklHX0hBU19NRU1fU0hBUklORworI2lmZGVmIENPTkZJ
R19NRU1fU0hBUklORwogaW50IG1lbV9zaGFyaW5nX2dyZWZfdG9fZ2ZuKHN0cnVjdCBncmFudF90
YWJsZSAqZ3QsIGdyYW50X3JlZl90IHJlZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBn
Zm5fdCAqZ2ZuLCB1aW50MTZfdCAqc3RhdHVzKQogewpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9t
ZW1vcnkuYyBiL3hlbi9jb21tb24vbWVtb3J5LmMKaW5kZXggMzBkMjEwZmMwOC4uZDliMzVhNjA4
YyAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9tZW1vcnkuYworKysgYi94ZW4vY29tbW9uL21lbW9y
eS5jCkBAIC0xNjc2LDcgKzE2NzYsNyBAQCBpbnQgY2hlY2tfZ2V0X3BhZ2VfZnJvbV9nZm4oc3Ry
dWN0IGRvbWFpbiAqZCwgZ2ZuX3QgZ2ZuLCBib29sIHJlYWRvbmx5LAogICAgICAgICByZXR1cm4g
LUVBR0FJTjsKICAgICB9CiAjZW5kaWYKLSNpZmRlZiBDT05GSUdfSEFTX01FTV9TSEFSSU5HCisj
aWZkZWYgQ09ORklHX01FTV9TSEFSSU5HCiAgICAgaWYgKCAocSAmIFAyTV9VTlNIQVJFKSAmJiBw
Mm1faXNfc2hhcmVkKHAybXQpICkKICAgICB7CiAgICAgICAgIGlmICggcGFnZSApCmRpZmYgLS1n
aXQgYS94ZW4vY29tbW9uL3ZtX2V2ZW50LmMgYi94ZW4vY29tbW9uL3ZtX2V2ZW50LmMKaW5kZXgg
ZTg3MjY4MDVlNy4uMmExYzg3ZTQ0YiAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi92bV9ldmVudC5j
CisrKyBiL3hlbi9jb21tb24vdm1fZXZlbnQuYwpAQCAtNTMxLDcgKzUzMSw3IEBAIHN0YXRpYyB2
b2lkIG1vbml0b3Jfbm90aWZpY2F0aW9uKHN0cnVjdCB2Y3B1ICp2LCB1bnNpZ25lZCBpbnQgcG9y
dCkKICAgICB2bV9ldmVudF9yZXN1bWUodi0+ZG9tYWluLCB2LT5kb21haW4tPnZtX2V2ZW50X21v
bml0b3IpOwogfQogCi0jaWZkZWYgQ09ORklHX0hBU19NRU1fU0hBUklORworI2lmZGVmIENPTkZJ
R19NRU1fU0hBUklORwogLyogUmVnaXN0ZXJlZCB3aXRoIFhlbi1ib3VuZCBldmVudCBjaGFubmVs
IGZvciBpbmNvbWluZyBub3RpZmljYXRpb25zLiAqLwogc3RhdGljIHZvaWQgbWVtX3NoYXJpbmdf
bm90aWZpY2F0aW9uKHN0cnVjdCB2Y3B1ICp2LCB1bnNpZ25lZCBpbnQgcG9ydCkKIHsKQEAgLTU2
MSw3ICs1NjEsNyBAQCB2b2lkIHZtX2V2ZW50X2NsZWFudXAoc3RydWN0IGRvbWFpbiAqZCkKICAg
ICAgICAgZGVzdHJveV93YWl0cXVldWVfaGVhZCgmZC0+dm1fZXZlbnRfbW9uaXRvci0+d3EpOwog
ICAgICAgICAodm9pZCl2bV9ldmVudF9kaXNhYmxlKGQsICZkLT52bV9ldmVudF9tb25pdG9yKTsK
ICAgICB9Ci0jaWZkZWYgQ09ORklHX0hBU19NRU1fU0hBUklORworI2lmZGVmIENPTkZJR19NRU1f
U0hBUklORwogICAgIGlmICggdm1fZXZlbnRfY2hlY2tfcmluZyhkLT52bV9ldmVudF9zaGFyZSkg
KQogICAgIHsKICAgICAgICAgZGVzdHJveV93YWl0cXVldWVfaGVhZCgmZC0+dm1fZXZlbnRfc2hh
cmUtPndxKTsKQEAgLTcwMyw3ICs3MDMsNyBAQCBpbnQgdm1fZXZlbnRfZG9tY3RsKHN0cnVjdCBk
b21haW4gKmQsIHN0cnVjdCB4ZW5fZG9tY3RsX3ZtX2V2ZW50X29wICp2ZWMpCiAgICAgfQogICAg
IGJyZWFrOwogCi0jaWZkZWYgQ09ORklHX0hBU19NRU1fU0hBUklORworI2lmZGVmIENPTkZJR19N
RU1fU0hBUklORwogICAgIGNhc2UgWEVOX0RPTUNUTF9WTV9FVkVOVF9PUF9TSEFSSU5HOgogICAg
IHsKICAgICAgICAgcmMgPSAtRUlOVkFMOwpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLXg4
Ni9tZW1fc2hhcmluZy5oIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9tZW1fc2hhcmluZy5oCmluZGV4
IGFmZDBjMTcyOTIuLmRiMjI0Njg3NDQgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL2FzbS14ODYv
bWVtX3NoYXJpbmcuaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L21lbV9zaGFyaW5nLmgKQEAg
LTI0LDYgKzI0LDggQEAKICNpbmNsdWRlIDxwdWJsaWMvZG9tY3RsLmg+CiAjaW5jbHVkZSA8cHVi
bGljL21lbW9yeS5oPgogCisjaWZkZWYgQ09ORklHX01FTV9TSEFSSU5HCisKIC8qIEF1ZGl0aW5n
IG9mIG1lbW9yeSBzaGFyaW5nIGNvZGU/ICovCiAjaWZuZGVmIE5ERUJVRwogI2RlZmluZSBNRU1f
U0hBUklOR19BVURJVCAxCkBAIC05OSw0ICsxMDEsMzAgQEAgaW50IG1lbV9zaGFyaW5nX2RvbWN0
bChzdHJ1Y3QgZG9tYWluICpkLAogICovCiBpbnQgcmVsaW5xdWlzaF9zaGFyZWRfcGFnZXMoc3Ry
dWN0IGRvbWFpbiAqZCk7CiAKKyNlbHNlCisKK3N0YXRpYyBpbmxpbmUgdW5zaWduZWQgaW50IG1l
bV9zaGFyaW5nX2dldF9ucl9zYXZlZF9tZm5zKHZvaWQpCit7CisgICAgcmV0dXJuIDA7Cit9Citz
dGF0aWMgaW5saW5lIHVuc2lnbmVkIGludCBtZW1fc2hhcmluZ19nZXRfbnJfc2hhcmVkX21mbnMo
dm9pZCkKK3sKKyAgICByZXR1cm4gMDsKK30KK3N0YXRpYyBpbmxpbmUgaW50IG1lbV9zaGFyaW5n
X3Vuc2hhcmVfcGFnZShzdHJ1Y3QgZG9tYWluICpkLAorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgZ2ZuLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQxNl90IGZsYWdzKQoreworICAgIEFTU0VSVF9V
TlJFQUNIQUJMRSgpOworICAgIHJldHVybiAtRU9QTk9UU1VQUDsKK30KK3N0YXRpYyBpbmxpbmUg
aW50IG1lbV9zaGFyaW5nX25vdGlmeV9lbm9tZW0oc3RydWN0IGRvbWFpbiAqZCwgdW5zaWduZWQg
bG9uZyBnZm4sCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIGFsbG93X3NsZWVw
KQoreworICAgIEFTU0VSVF9VTlJFQUNIQUJMRSgpOworICAgIHJldHVybiAtRU9QTk9UU1VQUDsK
K30KKworI2VuZGlmCisKICNlbmRpZiAvKiBfX01FTV9TSEFSSU5HX0hfXyAqLwpkaWZmIC0tZ2l0
IGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9tbS5oIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9tbS5oCmlu
ZGV4IDA4N2FkOTczNTEuLjM1YzI1MjcyNjUgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL2FzbS14
ODYvbW0uaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L21tLmgKQEAgLTEyNyw2ICsxMjcsOCBA
QCBzdHJ1Y3QgcGFnZV9pbmZvCiAgICAgICAgIC8qIEZvciBub24tcGlubmFibGUgc2luZ2xlLXBh
Z2Ugc2hhZG93cywgYSBoaWdoZXIgZW50cnkgdGhhdCBwb2ludHMKICAgICAgICAgICogYXQgdXMu
ICovCiAgICAgICAgIHBhZGRyX3QgdXA7CisKKyNpZmRlZiBDT05GSUdfTUVNX1NIQVJJTkcKICAg
ICAgICAgLyogRm9yIHNoYXJlZC9zaGFyYWJsZSBwYWdlcywgd2UgdXNlIGEgZG91Ymx5LWxpbmtl
ZCBsaXN0CiAgICAgICAgICAqIG9mIGFsbCB0aGUge3Bmbixkb21haW59IHBhaXJzIHRoYXQgbWFw
IHRoaXMgcGFnZS4gV2UgYWxzbyBpbmNsdWRlCiAgICAgICAgICAqIGFuIG9wYXF1ZSBoYW5kbGUs
IHdoaWNoIGlzIGVmZmVjdGl2ZWx5IGEgdmVyc2lvbiwgc28gdGhhdCBjbGllbnRzCkBAIC0xMzQs
NiArMTM2LDcgQEAgc3RydWN0IHBhZ2VfaW5mbwogICAgICAgICAgKiBUaGlzIGxpc3QgaXMgYWxs
b2NhdGVkIGFuZCBmcmVlZCB3aGVuIGEgcGFnZSBpcyBzaGFyZWQvdW5zaGFyZWQuCiAgICAgICAg
ICAqLwogICAgICAgICBzdHJ1Y3QgcGFnZV9zaGFyaW5nX2luZm8gKnNoYXJpbmc7CisjZW5kaWYK
ICAgICB9OwogCiAgICAgLyogUmVmZXJlbmNlIGNvdW50IGFuZCB2YXJpb3VzIFBHQ194eHggZmxh
Z3MgYW5kIGZpZWxkcy4gKi8KZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9tbS5oIGIveGVu
L2luY2x1ZGUveGVuL21tLmgKaW5kZXggNDdjODQxMmIzYS4uOTc3ZTQ1YWFlNyAxMDA2NDQKLS0t
IGEveGVuL2luY2x1ZGUveGVuL21tLmgKKysrIGIveGVuL2luY2x1ZGUveGVuL21tLmgKQEAgLTI3
NSw3ICsyNzUsNyBAQCBzdHJ1Y3QgbnBmZWMgewogCiAvKiBQcml2YXRlIGRvbWFpbiBzdHJ1Y3Rz
IGZvciBET01JRF9YRU4sIERPTUlEX0lPLCBldGMuICovCiBleHRlcm4gc3RydWN0IGRvbWFpbiAq
ZG9tX3hlbiwgKmRvbV9pbzsKLSNpZmRlZiBDT05GSUdfSEFTX01FTV9TSEFSSU5HCisjaWZkZWYg
Q09ORklHX01FTV9TSEFSSU5HCiBleHRlcm4gc3RydWN0IGRvbWFpbiAqZG9tX2NvdzsKICNlbHNl
CiAjIGRlZmluZSBkb21fY293IE5VTEwKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9zY2hl
ZC5oIGIveGVuL2luY2x1ZGUveGVuL3NjaGVkLmgKaW5kZXggOTdhM2FiNTVhYS4uYjQwYzhmZDEz
OCAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUveGVuL3NjaGVkLmgKKysrIGIveGVuL2luY2x1ZGUv
eGVuL3NjaGVkLmgKQEAgLTQ1OSw3ICs0NTksNyBAQCBzdHJ1Y3QgZG9tYWluCiAgICAgLyogVmFy
aW91cyB2bV9ldmVudHMgKi8KIAogICAgIC8qIE1lbW9yeSBzaGFyaW5nIHN1cHBvcnQgKi8KLSNp
ZmRlZiBDT05GSUdfSEFTX01FTV9TSEFSSU5HCisjaWZkZWYgQ09ORklHX01FTV9TSEFSSU5HCiAg
ICAgc3RydWN0IHZtX2V2ZW50X2RvbWFpbiAqdm1fZXZlbnRfc2hhcmU7CiAjZW5kaWYKICAgICAv
KiBNZW1vcnkgcGFnaW5nIHN1cHBvcnQgKi8KZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hzbS9k
dW1teS5oIGIveGVuL2luY2x1ZGUveHNtL2R1bW15LmgKaW5kZXggMDFkMjgxNGZlZC4uZWY1MmJi
MTc2NCAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUveHNtL2R1bW15LmgKKysrIGIveGVuL2luY2x1
ZGUveHNtL2R1bW15LmgKQEAgLTU5Nyw3ICs1OTcsNyBAQCBzdGF0aWMgWFNNX0lOTElORSBpbnQg
eHNtX21lbV9wYWdpbmcoWFNNX0RFRkFVTFRfQVJHIHN0cnVjdCBkb21haW4gKmQpCiB9CiAjZW5k
aWYKIAotI2lmZGVmIENPTkZJR19IQVNfTUVNX1NIQVJJTkcKKyNpZmRlZiBDT05GSUdfTUVNX1NI
QVJJTkcKIHN0YXRpYyBYU01fSU5MSU5FIGludCB4c21fbWVtX3NoYXJpbmcoWFNNX0RFRkFVTFRf
QVJHIHN0cnVjdCBkb21haW4gKmQpCiB7CiAgICAgWFNNX0FTU0VSVF9BQ1RJT04oWFNNX0RNX1BS
SVYpOwpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveHNtL3hzbS5oIGIveGVuL2luY2x1ZGUveHNt
L3hzbS5oCmluZGV4IGI2MTQxZjZhYjEuLmUyMmQ2MTYwYjUgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNs
dWRlL3hzbS94c20uaAorKysgYi94ZW4vaW5jbHVkZS94c20veHNtLmgKQEAgLTE1MCw3ICsxNTAs
NyBAQCBzdHJ1Y3QgeHNtX29wZXJhdGlvbnMgewogICAgIGludCAoKm1lbV9wYWdpbmcpIChzdHJ1
Y3QgZG9tYWluICpkKTsKICNlbmRpZgogCi0jaWZkZWYgQ09ORklHX0hBU19NRU1fU0hBUklORwor
I2lmZGVmIENPTkZJR19NRU1fU0hBUklORwogICAgIGludCAoKm1lbV9zaGFyaW5nKSAoc3RydWN0
IGRvbWFpbiAqZCk7CiAjZW5kaWYKIApAQCAtNTk3LDcgKzU5Nyw3IEBAIHN0YXRpYyBpbmxpbmUg
aW50IHhzbV9tZW1fcGFnaW5nICh4c21fZGVmYXVsdF90IGRlZiwgc3RydWN0IGRvbWFpbiAqZCkK
IH0KICNlbmRpZgogCi0jaWZkZWYgQ09ORklHX0hBU19NRU1fU0hBUklORworI2lmZGVmIENPTkZJ
R19NRU1fU0hBUklORwogc3RhdGljIGlubGluZSBpbnQgeHNtX21lbV9zaGFyaW5nICh4c21fZGVm
YXVsdF90IGRlZiwgc3RydWN0IGRvbWFpbiAqZCkKIHsKICAgICByZXR1cm4geHNtX29wcy0+bWVt
X3NoYXJpbmcoZCk7CmRpZmYgLS1naXQgYS94ZW4veHNtL2R1bW15LmMgYi94ZW4veHNtL2R1bW15
LmMKaW5kZXggYzlhNTY2ZjJiNS4uNTcwNWU1Mjc5MSAxMDA2NDQKLS0tIGEveGVuL3hzbS9kdW1t
eS5jCisrKyBiL3hlbi94c20vZHVtbXkuYwpAQCAtMTI4LDcgKzEyOCw3IEBAIHZvaWQgX19pbml0
IHhzbV9maXh1cF9vcHMgKHN0cnVjdCB4c21fb3BlcmF0aW9ucyAqb3BzKQogICAgIHNldF90b19k
dW1teV9pZl9udWxsKG9wcywgbWVtX3BhZ2luZyk7CiAjZW5kaWYKIAotI2lmZGVmIENPTkZJR19I
QVNfTUVNX1NIQVJJTkcKKyNpZmRlZiBDT05GSUdfTUVNX1NIQVJJTkcKICAgICBzZXRfdG9fZHVt
bXlfaWZfbnVsbChvcHMsIG1lbV9zaGFyaW5nKTsKICNlbmRpZgogCmRpZmYgLS1naXQgYS94ZW4v
eHNtL2ZsYXNrL2hvb2tzLmMgYi94ZW4veHNtL2ZsYXNrL2hvb2tzLmMKaW5kZXggYTdkNjkwYWMz
Yy4uNzkxYzFmNjZhZiAxMDA2NDQKLS0tIGEveGVuL3hzbS9mbGFzay9ob29rcy5jCisrKyBiL3hl
bi94c20vZmxhc2svaG9va3MuYwpAQCAtMTI2Miw3ICsxMjYyLDcgQEAgc3RhdGljIGludCBmbGFz
a19tZW1fcGFnaW5nKHN0cnVjdCBkb21haW4gKmQpCiB9CiAjZW5kaWYKIAotI2lmZGVmIENPTkZJ
R19IQVNfTUVNX1NIQVJJTkcKKyNpZmRlZiBDT05GSUdfTUVNX1NIQVJJTkcKIHN0YXRpYyBpbnQg
Zmxhc2tfbWVtX3NoYXJpbmcoc3RydWN0IGRvbWFpbiAqZCkKIHsKICAgICByZXR1cm4gY3VycmVu
dF9oYXNfcGVybShkLCBTRUNDTEFTU19ET01BSU4yLCBET01BSU4yX19NRU1fU0hBUklORyk7CkBA
IC0xODI5LDcgKzE4MjksNyBAQCBzdGF0aWMgc3RydWN0IHhzbV9vcGVyYXRpb25zIGZsYXNrX29w
cyA9IHsKICAgICAubWVtX3BhZ2luZyA9IGZsYXNrX21lbV9wYWdpbmcsCiAjZW5kaWYKIAotI2lm
ZGVmIENPTkZJR19IQVNfTUVNX1NIQVJJTkcKKyNpZmRlZiBDT05GSUdfTUVNX1NIQVJJTkcKICAg
ICAubWVtX3NoYXJpbmcgPSBmbGFza19tZW1fc2hhcmluZywKICNlbmRpZgogCi0tIAoyLjIwLjEK
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2
ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xp
c3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

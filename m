Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2A66210C8EF
	for <lists+xen-devel@lfdr.de>; Thu, 28 Nov 2019 13:52:54 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iaJFv-000508-E1; Thu, 28 Nov 2019 12:50:47 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=XtxL=ZU=amazon.com=prvs=228fc64b1=pdurrant@srs-us1.protection.inumbo.net>)
 id 1iaJFt-0004zz-Jg
 for xen-devel@lists.xenproject.org; Thu, 28 Nov 2019 12:50:45 +0000
X-Inumbo-ID: b0fc6e7c-11dd-11ea-a3d2-12813bfff9fa
Received: from smtp-fw-6002.amazon.com (unknown [52.95.49.90])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id b0fc6e7c-11dd-11ea-a3d2-12813bfff9fa;
 Thu, 28 Nov 2019 12:50:44 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.com; i=@amazon.com; q=dns/txt; s=amazon201209;
 t=1574945445; x=1606481445;
 h=from:to:cc:subject:date:message-id:mime-version:
 content-transfer-encoding;
 bh=ruFKRpo4AJ04DbsWBdi29MotfKvUiVP2DaM7VBqLzPM=;
 b=DXl14RCfKMA6IbPmIea+oCvTQkLwpzeRNDoDGJoc8QrKz8FIxd3SEJfS
 E4cOTomVmqwCRg3AKMCt1cdegg9UE1Wa4SXmKTenGRBGphVmeiUAj9fp1
 Rh6CR34tb5fgi2e2xhDcycP6KT0QC0Br3XxH6gXGGH3nQE/LLFWa/1irM U=;
IronPort-SDR: 44qX0txYXhNX5CVdRxs/Ew5PhllR5DQkODQpl9yZtYBYznuRFPVI1GPmAC7lc7LuUck7SSj91m
 7C3eEonBcNKw==
X-IronPort-AV: E=Sophos;i="5.69,253,1571702400"; 
   d="scan'208";a="5298430"
Received: from iad6-co-svc-p1-lb1-vlan3.amazon.com (HELO
 email-inbound-relay-2a-8549039f.us-west-2.amazon.com) ([10.124.125.6])
 by smtp-border-fw-out-6002.iad6.amazon.com with ESMTP;
 28 Nov 2019 12:50:43 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (pdx4-ws-svc-p6-lb7-vlan2.pdx.amazon.com [10.170.41.162])
 by email-inbound-relay-2a-8549039f.us-west-2.amazon.com (Postfix) with ESMTPS
 id 465EDA07C8; Thu, 28 Nov 2019 12:50:41 +0000 (UTC)
Received: from EX13D32EUC001.ant.amazon.com (10.43.164.159) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.243) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Thu, 28 Nov 2019 12:50:40 +0000
Received: from EX13MTAUWB001.ant.amazon.com (10.43.161.207) by
 EX13D32EUC001.ant.amazon.com (10.43.164.159) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Thu, 28 Nov 2019 12:50:39 +0000
Received: from u2f063a87eabd5f.cbg10.amazon.com (10.125.106.135) by
 mail-relay.amazon.com (10.43.161.249) with Microsoft SMTP Server id
 15.0.1367.3 via Frontend Transport; Thu, 28 Nov 2019 12:50:35 +0000
From: Paul Durrant <pdurrant@amazon.com>
To: <xen-devel@lists.xenproject.org>
Date: Thu, 28 Nov 2019 12:50:32 +0000
Message-ID: <20191128125032.902-1-pdurrant@amazon.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH-for-4.13 v3] Rationalize max_grant_frames and
 max_maptrack_frames handling
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Paul Durrant <pdurrant@amazon.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 George Dunlap <george.dunlap@citrix.com>,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Jan Beulich <jbeulich@suse.com>,
 Anthony PERARD <anthony.perard@citrix.com>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogR2VvcmdlIER1bmxhcCA8Z2VvcmdlLmR1bmxhcEBjaXRyaXguY29tPgoKWGVuIHVzZWQg
dG8gaGF2ZSBzaW5nbGUsIHN5c3RlbS13aWRlIGxpbWl0cyBmb3IgdGhlIG51bWJlciBvZiBncmFu
dApmcmFtZXMgYW5kIG1hcHRyYWNrIGZyYW1lcyBhIGd1ZXN0IHdhcyBhbGxvd2VkIHRvIGNyZWF0
ZS4gSW5jcmVhc2luZwpvciBkZWNyZWFzaW5nIHRoaXMgc2luZ2xlIGxpbWl0IG9uIHRoZSBYZW4g
Y29tbWFuZC1saW5lIHdvdWxkIGNoYW5nZQp0aGUgbGltaXQgZm9yIGFsbCBndWVzdHMgb24gdGhl
IHN5c3RlbS4KCkxhdGVyLCBwZXItZG9tYWluIGxpbWl0cyBmb3IgdGhlc2UgdmFsdWVzIHdhcyBj
cmVhdGVkLiBUaGUgc3lzdGVtLXdpZGUKbGltaXRzIGJlY2FtZSBzdHJpY3QgbGltaXRzOiBkb21h
aW5zIGNvdWxkIG5vdCBiZSBjcmVhdGVkIHdpdGggaGlnaGVyCmxpbWl0cywgYnV0IGNvdWxkIGJl
IGNyZWF0ZWQgd2l0aCBsb3dlciBsaW1pdHMuIEhvd2V2ZXIsIHRoYXQgY2hhbmdlCmFsc28gaW50
cm9kdWNlZCBhIHJhbmdlIG9mIGRpZmZlcmVudCAiZGVmYXVsdCIgdmFsdWVzIGludG8gdmFyaW91
cwpwbGFjZXMgaW4gdGhlIHRvb2xzdGFjazoKCi0gVGhlIHB5dGhvbiBsaWJ4YyBiaW5kaW5ncyBo
YXJkLWNvZGVkIHRoZXNlIHZhbHVlcyB0byAzMiBhbmQgMTAyNCwKICByZXNwZWN0aXZlbHkKLSBU
aGUgbGlieGwgZGVmYXVsdCB2YWx1ZXMgYXJlIDMyIGFuZCAxMDI0IHJlc3BlY3RpdmVseS4KLSB4
bCB3aWxsIHVzZSB0aGUgbGlieGwgZGVmYXVsdCBmb3IgbWFwdHJhY2ssIGJ1dCBkb2VzIGl0cyBv
d24gZGVmYXVsdAogIGNhbGN1bGF0aW9uIGZvciBncmFudCBmcmFtZXM6IGVpdGhlciAzMiBvciA2
NCwgYmFzZWQgb24gdGhlIG1heAogIHBvc3NpYmxlIG1mbi4KClRoZXNlIGRlZmF1bHRzIGludGVy
YWN0IHBvb3JseSB3aXRoIHRoZSBoeXBlcnZpc29yIGNvbW1hbmQtbGluZSBsaW1pdDoKCi0gVGhl
IGh5cGVydmlzb3IgY29tbWFuZC1saW5lIGxpbWl0IGNhbm5vdCBiZSB1c2VkIHRvIHJhaXNlIHRo
ZSBsaW1pdAogIGZvciBhbGwgZ3Vlc3RzIGFueW1vcmUsIGFzIHRoZSBkZWZhdWx0IGluIHRoZSB0
b29sc3RhY2sgd2lsbAogIGVmZmVjdGl2ZWx5IG92ZXJyaWRlIHRoaXMuCi0gSWYgeW91IHVzZSB0
aGUgaHlwZXJ2aXNvciBjb21tYW5kLWxpbmUgbGltaXQgdG8gKnJlZHVjZSogdGhlIGxpbWl0LAog
IHRoZW4gdGhlICJkZWZhdWx0IiB2YWx1ZXMgZ2VuZXJhdGVkIGJ5IHRoZSB0b29sc3RhY2sgYXJl
IHRvbyBoaWdoLAogIGFuZCBhbGwgZ3Vlc3QgY3JlYXRpb25zIHdpbGwgZmFpbC4KCkluIG90aGVy
IHdvcmRzLCB0aGUgdG9vbHN0YWNrIGRlZmF1bHRzIHJlcXVpcmUgYW55IGNoYW5nZSB0byBiZQpl
ZmZlY3RlZCBieSBoYXZpbmcgdGhlIGFkbWluIGV4cGxpY2l0bHkgc3BlY2lmeSBhIG5ldyB2YWx1
ZSBpbiBldmVyeQpndWVzdC4KCkluIG9yZGVyIHRvIGFkZHJlc3MgdGhpcywgaGF2ZSBncmFudF90
YWJsZV9pbml0IHRyZWF0IG5lZ2F0aXZlIHZhbHVlcwpmb3IgbWF4X2dyYW50X2ZyYW1lcyBhbmQg
bWF4X21hcHRyYWNrX2ZyYW1lcyBhcyBpbnN0cnVjdGlvbnMgdG8gdXNlIHRoZQpzeXN0ZW0td2lk
ZSBkZWZhdWx0LCBhbmQgaGF2ZSBhbGwgdGhlIGFib3ZlIHRvb2xzdGFja3MgZGVmYXVsdCB0byBw
YXNzaW5nCi0xIHVubGVzcyBhIGRpZmZlcmVudCB2YWx1ZSBpcyBleHBsaWNpdGx5IGNvbmZpZ3Vy
ZWQuCgpUaGlzIHJlc3RvcmVzIHRoZSBvbGQgYmVoYXZpb3IgaW4gdGhhdCBjaGFuZ2luZyB0aGUg
aHlwZXJ2aXNvciBjb21tYW5kLWxpbmUKb3B0aW9uIGNhbiBjaGFuZ2UgdGhlIGJlaGF2aW9yIGZv
ciBhbGwgZ3Vlc3RzLCB3aGlsZSByZXRhaW5pbmcgdGhlIGFiaWxpdHkKdG8gc2V0IHBlci1ndWVz
dCB2YWx1ZXMuICBJdCBhbHNvIHJlbW92ZXMgdGhlIGJ1ZyB0aGF0IHJlZHVjaW5nIHRoZQpzeXN0
ZW0td2lkZSBtYXggd2lsbCBjYXVzZSBhbGwgZG9tYWlucyB3aXRob3V0IGV4cGxpY2l0IGxpbWl0
cyB0byBmYWlsLgoKTk9URTogLSBUaGUgT2NhbWwgYmluZGluZ3MgcmVxdWlyZSB0aGUgY2FsbGVy
IHRvIGFsd2F5cyBzcGVjaWZ5IGEgdmFsdWUsCiAgICAgICAgYW5kIHRoZSBjb2RlIHRvIHN0YXJ0
IGEgeGVuc3RvcmVkIHN0dWJkb21haW4gaGFyZC1jb2RlcyB0aGVzZSB0byA0CglhbmQgMTI4IHJl
c3BlY3RpdmVseTsgdGhpcyBiZWhhdm91ciB3aWxsIG5vdCBiZSBtb2RpZmllZC4KClNpZ25lZC1v
ZmYtYnk6IEdlb3JnZSBEdW5sYXAgPGdlb3JnZS5kdW5sYXBAY2l0cml4LmNvbT4KU2lnbmVkLW9m
Zi1ieTogUGF1bCBEdXJyYW50IDxwZHVycmFudEBhbWF6b24uY29tPgotLS0KQ2M6IElhbiBKYWNr
c29uIDxpYW4uamFja3NvbkBldS5jaXRyaXguY29tPgpDYzogV2VpIExpdSA8d2xAeGVuLm9yZz4K
Q2M6IEFuZHJldyBDb29wZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+CkNjOiBHZW9yZ2Ug
RHVubGFwIDxHZW9yZ2UuRHVubGFwQGV1LmNpdHJpeC5jb20+CkNjOiBKYW4gQmV1bGljaCA8amJl
dWxpY2hAc3VzZS5jb20+CkNjOiBKdWxpZW4gR3JhbGwgPGp1bGllbkB4ZW4ub3JnPgpDYzogS29u
cmFkIFJ6ZXN6dXRlayBXaWxrIDxrb25yYWQud2lsa0BvcmFjbGUuY29tPgpDYzogU3RlZmFubyBT
dGFiZWxsaW5pIDxzc3RhYmVsbGluaUBrZXJuZWwub3JnPgpDYzogQW50aG9ueSBQRVJBUkQgPGFu
dGhvbnkucGVyYXJkQGNpdHJpeC5jb20+CkNjOiAiTWFyZWsgTWFyY3p5a293c2tpLUfDs3JlY2tp
IiA8bWFybWFyZWtAaW52aXNpYmxldGhpbmdzbGFiLmNvbT4KQ2M6IFZvbG9keW15ciBCYWJjaHVr
IDxWb2xvZHlteXJfQmFiY2h1a0BlcGFtLmNvbT4KQ2M6ICJSb2dlciBQYXUgTW9ubsOpIiA8cm9n
ZXIucGF1QGNpdHJpeC5jb20+Cgp2MzoKIC0gTWFrZSBzdXJlIHRoYXQgc3BlY2lmaWVkIHZhbHVl
cyBjYW5ub3QgYmUgbmVnYXRpdmUgb3Igb3ZlcmZsb3cgYQogICBzaWduZWQgaW50Cgp2MjoKIC0g
cmUtd29ya2VkIEdlb3JnZSdzIG9yaWdpbmFsIGNvbW1pdCBtYXNzYWdlIGEgbGl0dGxlCiAtIGZp
eGVkIHRoZSB0ZXh0IGluIHhsLmNvbmYuNS5wb2QKIC0gdXNlIC0xIGFzIHRoZSBzZW50aW5lbCB2
YWx1ZSBmb3IgJ2RlZmF1bHQnIGFuZCA8IDAgZm9yIGNoZWNraW5nIGl0Ci0tLQogZG9jcy9tYW4v
eGwuY29uZi41LnBvZCAgICAgICAgICAgIHwgIDYgKystLQogdG9vbHMvbGlieGwvbGlieGwuaCAg
ICAgICAgICAgICAgIHwgIDQgKy0tCiB0b29scy9saWJ4bC9saWJ4bF90eXBlcy5pZGwgICAgICAg
fCAgNCArLS0KIHRvb2xzL2xpYnhsL2xpYnhsdV9jZmcuYyAgICAgICAgICB8IDI0ICsrKysrKysr
KysrKysrLS0KIHRvb2xzL2xpYnhsL2xpYnhsdXRpbC5oICAgICAgICAgICB8ICAyICsrCiB0b29s
cy9weXRob24veGVuL2xvd2xldmVsL3hjL3hjLmMgfCAgNCArLS0KIHRvb2xzL3hsL3hsLmMgICAg
ICAgICAgICAgICAgICAgICB8IDE1ICsrKystLS0tLS0KIHRvb2xzL3hsL3hsX3BhcnNlLmMgICAg
ICAgICAgICAgICB8ICA5ICsrKystLQogeGVuL2FyY2gvYXJtL3NldHVwLmMgICAgICAgICAgICAg
IHwgIDIgKy0KIHhlbi9hcmNoL3g4Ni9zZXR1cC5jICAgICAgICAgICAgICB8ICA0ICstLQogeGVu
L2NvbW1vbi9ncmFudF90YWJsZS5jICAgICAgICAgIHwgNDYgKysrKysrKysrKysrKysrKysrKysr
KysrKysrKy0tLQogeGVuL2luY2x1ZGUvcHVibGljL2RvbWN0bC5oICAgICAgIHwgMTAgKysrKy0t
LQogeGVuL2luY2x1ZGUveGVuL2dyYW50X3RhYmxlLmggICAgIHwgIDggKysrLS0tCiAxMyBmaWxl
cyBjaGFuZ2VkLCAxMDAgaW5zZXJ0aW9ucygrKSwgMzggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0
IGEvZG9jcy9tYW4veGwuY29uZi41LnBvZCBiL2RvY3MvbWFuL3hsLmNvbmYuNS5wb2QKaW5kZXgg
OTYyMTQ0ZTM4ZS4uMjA3YWIzZTc3YSAxMDA2NDQKLS0tIGEvZG9jcy9tYW4veGwuY29uZi41LnBv
ZAorKysgYi9kb2NzL21hbi94bC5jb25mLjUucG9kCkBAIC04MSwxMyArODEsMTUgQEAgRGVmYXVs
dDogQzwvdmFyL2xvY2sveGw+CiAKIFNldHMgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBDPG1h
eF9ncmFudF9mcmFtZXM+IGRvbWFpbiBjb25maWcgdmFsdWUuCiAKLURlZmF1bHQ6IEM8MzI+IG9u
IGhvc3RzIHVwIHRvIDE2VEIgb2YgbWVtb3J5LCBDPDY0PiBvbiBob3N0cyBsYXJnZXIgdGhhbiAx
NlRCCitEZWZhdWx0OiB2YWx1ZSBvZiBYZW4gY29tbWFuZCBsaW5lIEI8Z250dGFiX21heF9mcmFt
ZXM+IHBhcmFtZXRlciAob3IgaXRzCitkZWZhdWx0IHZhbHVlIGlmIHVuc3BlY2lmaWVkKS4KIAog
PWl0ZW0gQjxtYXhfbWFwdHJhY2tfZnJhbWVzPU5VTUJFUj4KIAogU2V0cyB0aGUgZGVmYXVsdCB2
YWx1ZSBmb3IgdGhlIEM8bWF4X21hcHRyYWNrX2ZyYW1lcz4gZG9tYWluIGNvbmZpZyB2YWx1ZS4K
IAotRGVmYXVsdDogQzwxMDI0PgorRGVmYXVsdDogdmFsdWUgb2YgWGVuIGNvbW1hbmQgbGluZSBC
PGdudHRhYl9tYXhfbWFwdHJhY2tfZnJhbWVzPgorcGFyYW1ldGVyIChvciBpdHMgZGVmYXVsdCB2
YWx1ZSBpZiB1bnNwZWNpZmllZCkuCiAKID1pdGVtIEI8dmlmLmRlZmF1bHQuc2NyaXB0PSJQQVRI
Ij4KIApkaWZmIC0tZ2l0IGEvdG9vbHMvbGlieGwvbGlieGwuaCBiL3Rvb2xzL2xpYnhsL2xpYnhs
LmgKaW5kZXggNDliNTZmYTFhMy4uYTJhNWQzMjFjNSAxMDA2NDQKLS0tIGEvdG9vbHMvbGlieGwv
bGlieGwuaAorKysgYi90b29scy9saWJ4bC9saWJ4bC5oCkBAIC0zNjQsOCArMzY0LDggQEAKICAq
LwogI2RlZmluZSBMSUJYTF9IQVZFX0JVSUxESU5GT19HUkFOVF9MSU1JVFMgMQogCi0jZGVmaW5l
IExJQlhMX01BWF9HUkFOVF9GUkFNRVNfREVGQVVMVCAzMgotI2RlZmluZSBMSUJYTF9NQVhfTUFQ
VFJBQ0tfRlJBTUVTX0RFRkFVTFQgMTAyNAorI2RlZmluZSBMSUJYTF9NQVhfR1JBTlRfRlJBTUVT
X0RFRkFVTFQgLTEKKyNkZWZpbmUgTElCWExfTUFYX01BUFRSQUNLX0ZSQU1FU19ERUZBVUxUIC0x
CiAKIC8qCiAgKiBMSUJYTF9IQVZFX0JVSUxESU5GT18qIGluZGljYXRlcyB0aGF0IGxpYnhsX2Rv
bWFpbl9idWlsZF9pbmZvIGhhcwpkaWZmIC0tZ2l0IGEvdG9vbHMvbGlieGwvbGlieGxfdHlwZXMu
aWRsIGIvdG9vbHMvbGlieGwvbGlieGxfdHlwZXMuaWRsCmluZGV4IDA1NDZkNzg2NWEuLjYzZTI5
YmIyZmIgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhsL2xpYnhsX3R5cGVzLmlkbAorKysgYi90b29s
cy9saWJ4bC9saWJ4bF90eXBlcy5pZGwKQEAgLTUxMSw4ICs1MTEsOCBAQCBsaWJ4bF9kb21haW5f
YnVpbGRfaW5mbyA9IFN0cnVjdCgiZG9tYWluX2J1aWxkX2luZm8iLFsKIAogICAgICgidm51bWFf
bm9kZXMiLCBBcnJheShsaWJ4bF92bm9kZV9pbmZvLCAibnVtX3ZudW1hX25vZGVzIikpLAogCi0g
ICAgKCJtYXhfZ3JhbnRfZnJhbWVzIiwgICAgdWludDMyLCB7J2luaXRfdmFsJzogJ0xJQlhMX01B
WF9HUkFOVF9GUkFNRVNfREVGQVVMVCd9KSwKLSAgICAoIm1heF9tYXB0cmFja19mcmFtZXMiLCB1
aW50MzIsIHsnaW5pdF92YWwnOiAnTElCWExfTUFYX01BUFRSQUNLX0ZSQU1FU19ERUZBVUxUJ30p
LAorICAgICgibWF4X2dyYW50X2ZyYW1lcyIsICAgIGludGVnZXIsIHsnaW5pdF92YWwnOiAnTElC
WExfTUFYX0dSQU5UX0ZSQU1FU19ERUZBVUxUJ30pLAorICAgICgibWF4X21hcHRyYWNrX2ZyYW1l
cyIsIGludGVnZXIsIHsnaW5pdF92YWwnOiAnTElCWExfTUFYX01BUFRSQUNLX0ZSQU1FU19ERUZB
VUxUJ30pLAogICAgIAogICAgICgiZGV2aWNlX21vZGVsX3ZlcnNpb24iLCBsaWJ4bF9kZXZpY2Vf
bW9kZWxfdmVyc2lvbiksCiAgICAgKCJkZXZpY2VfbW9kZWxfc3R1YmRvbWFpbiIsIGxpYnhsX2Rl
ZmJvb2wpLApkaWZmIC0tZ2l0IGEvdG9vbHMvbGlieGwvbGlieGx1X2NmZy5jIGIvdG9vbHMvbGli
eGwvbGlieGx1X2NmZy5jCmluZGV4IDcyODE1ZDI1ZGQuLjA5ZDVjNzhhNDYgMTAwNjQ0Ci0tLSBh
L3Rvb2xzL2xpYnhsL2xpYnhsdV9jZmcuYworKysgYi90b29scy9saWJ4bC9saWJ4bHVfY2ZnLmMK
QEAgLTI2OCw4ICsyNjgsOSBAQCBpbnQgeGx1X2NmZ19yZXBsYWNlX3N0cmluZyhjb25zdCBYTFVf
Q29uZmlnICpjZmcsIGNvbnN0IGNoYXIgKm4sCiAgICAgcmV0dXJuIDA7CiB9CiAKLWludCB4bHVf
Y2ZnX2dldF9sb25nKGNvbnN0IFhMVV9Db25maWcgKmNmZywgY29uc3QgY2hhciAqbiwKLSAgICAg
ICAgICAgICAgICAgICAgIGxvbmcgKnZhbHVlX3IsIGludCBkb250X3dhcm4pIHsKK2ludCB4bHVf
Y2ZnX2dldF9ib3VuZGVkX2xvbmcoY29uc3QgWExVX0NvbmZpZyAqY2ZnLCBjb25zdCBjaGFyICpu
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25nIG1pbiwgbG9uZyBtYXgsIGxvbmcg
KnZhbHVlX3IsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBkb250X3dhcm4pIHsK
ICAgICBsb25nIGw7CiAgICAgWExVX0NvbmZpZ1NldHRpbmcgKnNldDsKICAgICBpbnQgZTsKQEAg
LTMwMywxMCArMzA0LDI5IEBAIGludCB4bHVfY2ZnX2dldF9sb25nKGNvbnN0IFhMVV9Db25maWcg
KmNmZywgY29uc3QgY2hhciAqbiwKICAgICAgICAgICAgICAgICAgICAgY2ZnLT5jb25maWdfc291
cmNlLCBzZXQtPmxpbmVubywgbik7CiAgICAgICAgIHJldHVybiBFSU5WQUw7CiAgICAgfQorICAg
IGlmIChsIDwgbWluKQorICAgICAgICBpZiAoIWRvbnRfd2FybikKKyAgICAgICAgICAgIGZwcmlu
dGYoY2ZnLT5yZXBvcnQsCisgICAgICAgICAgICAgICAgICAgICIlczolZDogd2FybmluZzogdmFs
dWUgYCVsZCcgaXMgc21hbGxlciB0aGFuIG1pbmltdW0gYm91bmQgJyVsZCdcbiIsCisgICAgICAg
ICAgICAgICAgICAgIGNmZy0+Y29uZmlnX3NvdXJjZSwgc2V0LT5saW5lbm8sIGwsIG1pbik7Cisg
ICAgICAgIHJldHVybiBFSU5WQUw7CisgICAgaWYgKGwgPiBtYXgpCisgICAgICAgIGlmICghZG9u
dF93YXJuKQorICAgICAgICAgICAgZnByaW50ZihjZmctPnJlcG9ydCwKKyAgICAgICAgICAgICAg
ICAgICAgIiVzOiVkOiB3YXJuaW5nOiB2YWx1ZSBgJWxkJyBpcyBncmVhdGVyIHRoYW4gbWF4aW11
bSBib3VuZCAnJWxkJ1xuIiwKKyAgICAgICAgICAgICAgICAgICAgY2ZnLT5jb25maWdfc291cmNl
LCBzZXQtPmxpbmVubywgbCwgbWF4KTsKKyAgICAgICAgcmV0dXJuIEVJTlZBTDsKKwogICAgICp2
YWx1ZV9yPSBsOwogICAgIHJldHVybiAwOwogfQogCitpbnQgeGx1X2NmZ19nZXRfbG9uZyhjb25z
dCBYTFVfQ29uZmlnICpjZmcsIGNvbnN0IGNoYXIgKm4sCisgICAgICAgICAgICAgICAgICAgICBs
b25nICp2YWx1ZV9yLCBpbnQgZG9udF93YXJuKSB7CisgICAgcmV0dXJuIHhsdV9jZmdfZ2V0X2Jv
dW5kZWRfbG9uZyhjZmcsIG4sIExPTkdfTUlOLCBMT05HX01BWCwgdmFsdWVfciwKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbnRfd2Fybik7Cit9CisKIGludCB4bHVfY2Zn
X2dldF9kZWZib29sKGNvbnN0IFhMVV9Db25maWcgKmNmZywgY29uc3QgY2hhciAqbiwgbGlieGxf
ZGVmYm9vbCAqYiwKICAgICAgICAgICAgICAgICAgICAgIGludCBkb250X3dhcm4pCiB7CmRpZmYg
LS1naXQgYS90b29scy9saWJ4bC9saWJ4bHV0aWwuaCBiL3Rvb2xzL2xpYnhsL2xpYnhsdXRpbC5o
CmluZGV4IDA1N2NjMjVjYjIuLjkyZTM1YzU0NjIgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhsL2xp
YnhsdXRpbC5oCisrKyBiL3Rvb2xzL2xpYnhsL2xpYnhsdXRpbC5oCkBAIC02Myw2ICs2Myw4IEBA
IGludCB4bHVfY2ZnX3JlcGxhY2Vfc3RyaW5nKGNvbnN0IFhMVV9Db25maWcgKmNmZywgY29uc3Qg
Y2hhciAqbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIgKip2YWx1ZV9yLCBpbnQg
ZG9udF93YXJuKTsKIGludCB4bHVfY2ZnX2dldF9sb25nKGNvbnN0IFhMVV9Db25maWcqLCBjb25z
dCBjaGFyICpuLCBsb25nICp2YWx1ZV9yLAogICAgICAgICAgICAgICAgICAgICAgaW50IGRvbnRf
d2Fybik7CitpbnQgeGx1X2NmZ19nZXRfYm91bmRlZF9sb25nKGNvbnN0IFhMVV9Db25maWcqLCBj
b25zdCBjaGFyICpuLCBsb25nIG1pbiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9u
ZyBtYXgsIGxvbmcgKnZhbHVlX3IsIGludCBkb250X3dhcm4pOwogaW50IHhsdV9jZmdfZ2V0X2Rl
ZmJvb2woY29uc3QgWExVX0NvbmZpZyosIGNvbnN0IGNoYXIgKm4sIGxpYnhsX2RlZmJvb2wgKmIs
CiAgICAgICAgICAgICAgICAgICAgICBpbnQgZG9udF93YXJuKTsKIApkaWZmIC0tZ2l0IGEvdG9v
bHMvcHl0aG9uL3hlbi9sb3dsZXZlbC94Yy94Yy5jIGIvdG9vbHMvcHl0aG9uL3hlbi9sb3dsZXZl
bC94Yy94Yy5jCmluZGV4IDQ0ZDM2MDYxNDEuLmE3NTFlODU5MTAgMTAwNjQ0Ci0tLSBhL3Rvb2xz
L3B5dGhvbi94ZW4vbG93bGV2ZWwveGMveGMuYworKysgYi90b29scy9weXRob24veGVuL2xvd2xl
dmVsL3hjL3hjLmMKQEAgLTEyNyw4ICsxMjcsOCBAQCBzdGF0aWMgUHlPYmplY3QgKnB5eGNfZG9t
YWluX2NyZWF0ZShYY09iamVjdCAqc2VsZiwKICAgICAgICAgfSwKICAgICAgICAgLm1heF92Y3B1
cyA9IDEsCiAgICAgICAgIC5tYXhfZXZ0Y2huX3BvcnQgPSAtMSwgLyogTm8gbGltaXQuICovCi0g
ICAgICAgIC5tYXhfZ3JhbnRfZnJhbWVzID0gMzIsCi0gICAgICAgIC5tYXhfbWFwdHJhY2tfZnJh
bWVzID0gMTAyNCwKKyAgICAgICAgLm1heF9ncmFudF9mcmFtZXMgPSAtMSwKKyAgICAgICAgLm1h
eF9tYXB0cmFja19mcmFtZXMgPSAtMSwKICAgICB9OwogCiAgICAgc3RhdGljIGNoYXIgKmt3ZF9s
aXN0W10gPSB7ICJkb21pZCIsICJzc2lkcmVmIiwgImhhbmRsZSIsICJmbGFncyIsCmRpZmYgLS1n
aXQgYS90b29scy94bC94bC5jIGIvdG9vbHMveGwveGwuYwppbmRleCBkZGQyOWIzZjFiLi45MjFj
NjRmNWVkIDEwMDY0NAotLS0gYS90b29scy94bC94bC5jCisrKyBiL3Rvb2xzL3hsL3hsLmMKQEAg
LTIzLDYgKzIzLDcgQEAKICNpbmNsdWRlIDxjdHlwZS5oPgogI2luY2x1ZGUgPGludHR5cGVzLmg+
CiAjaW5jbHVkZSA8cmVnZXguaD4KKyNpbmNsdWRlIDxsaW1pdHMuaD4KIAogI2luY2x1ZGUgPGxp
YnhsLmg+CiAjaW5jbHVkZSA8bGlieGxfdXRpbHMuaD4KQEAgLTk2LDcgKzk3LDYgQEAgc3RhdGlj
IHZvaWQgcGFyc2VfZ2xvYmFsX2NvbmZpZyhjb25zdCBjaGFyICpjb25maWdmaWxlLAogICAgIFhM
VV9Db25maWcgKmNvbmZpZzsKICAgICBpbnQgZTsKICAgICBjb25zdCBjaGFyICpidWY7Ci0gICAg
bGlieGxfcGh5c2luZm8gcGh5c2luZm87CiAKICAgICBjb25maWcgPSB4bHVfY2ZnX2luaXQoc3Rk
ZXJyLCBjb25maWdmaWxlKTsKICAgICBpZiAoIWNvbmZpZykgewpAQCAtMTk3LDE2ICsxOTcsMTEg
QEAgc3RhdGljIHZvaWQgcGFyc2VfZ2xvYmFsX2NvbmZpZyhjb25zdCBjaGFyICpjb25maWdmaWxl
LAogICAgIHhsdV9jZmdfcmVwbGFjZV9zdHJpbmcgKGNvbmZpZywgImNvbG8uZGVmYXVsdC5wcm94
eXNjcmlwdCIsCiAgICAgICAgICZkZWZhdWx0X2NvbG9fcHJveHlfc2NyaXB0LCAwKTsKIAotICAg
IGlmICgheGx1X2NmZ19nZXRfbG9uZyAoY29uZmlnLCAibWF4X2dyYW50X2ZyYW1lcyIsICZsLCAw
KSkKKyAgICBpZiAoIXhsdV9jZmdfZ2V0X2JvdW5kZWRfbG9uZyAoY29uZmlnLCAibWF4X2dyYW50
X2ZyYW1lcyIsIDAsIElOVF9NQVgsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICZsLCAwKSkKICAgICAgICAgbWF4X2dyYW50X2ZyYW1lcyA9IGw7Ci0gICAgZWxzZSB7Ci0gICAg
ICAgIGxpYnhsX3BoeXNpbmZvX2luaXQoJnBoeXNpbmZvKTsKLSAgICAgICAgbWF4X2dyYW50X2Zy
YW1lcyA9IChsaWJ4bF9nZXRfcGh5c2luZm8oY3R4LCAmcGh5c2luZm8pICE9IDAgfHwKLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAhKHBoeXNpbmZvLm1heF9wb3NzaWJsZV9tZm4gPj4gMzIp
KQotICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAzMiA6IDY0OwotICAgICAgICBsaWJ4bF9w
aHlzaW5mb19kaXNwb3NlKCZwaHlzaW5mbyk7Ci0gICAgfQotICAgIGlmICgheGx1X2NmZ19nZXRf
bG9uZyAoY29uZmlnLCAibWF4X21hcHRyYWNrX2ZyYW1lcyIsICZsLCAwKSkKKyAgICBpZiAoIXhs
dV9jZmdfZ2V0X2JvdW5kZWRfbG9uZyAoY29uZmlnLCAibWF4X21hcHRyYWNrX2ZyYW1lcyIsIDAs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9NQVgsICZsLCAwKSkKICAg
ICAgICAgbWF4X21hcHRyYWNrX2ZyYW1lcyA9IGw7CiAKICAgICBsaWJ4bF9jcHVfYml0bWFwX2Fs
bG9jKGN0eCwgJmdsb2JhbF92bV9hZmZpbml0eV9tYXNrLCAwKTsKZGlmZiAtLWdpdCBhL3Rvb2xz
L3hsL3hsX3BhcnNlLmMgYi90b29scy94bC94bF9wYXJzZS5jCmluZGV4IDExMmY4ZWUwMjYuLjU1
NTk5MWRhZTMgMTAwNjQ0Ci0tLSBhL3Rvb2xzL3hsL3hsX3BhcnNlLmMKKysrIGIvdG9vbHMveGwv
eGxfcGFyc2UuYwpAQCAtMTQxMSwxMyArMTQxMSwxNiBAQCB2b2lkIHBhcnNlX2NvbmZpZ19kYXRh
KGNvbnN0IGNoYXIgKmNvbmZpZ19zb3VyY2UsCiAgICAgICAgICF4bHVfY2ZnX2dldF9zdHJpbmcg
KGNvbmZpZywgImNwdXNfc29mdCIsICZidWYsIDApKQogICAgICAgICBwYXJzZV92Y3B1X2FmZmlu
aXR5KGJfaW5mbywgY3B1cywgYnVmLCBudW1fY3B1cywgZmFsc2UpOwogCi0gICAgaWYgKCF4bHVf
Y2ZnX2dldF9sb25nIChjb25maWcsICJtYXhfZ3JhbnRfZnJhbWVzIiwgJmwsIDApKQorICAgIGlm
ICgheGx1X2NmZ19nZXRfYm91bmRlZF9sb25nIChjb25maWcsICJtYXhfZ3JhbnRfZnJhbWVzIiwg
MCwgSU5UX01BWCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmwsIDApKQog
ICAgICAgICBiX2luZm8tPm1heF9ncmFudF9mcmFtZXMgPSBsOwogICAgIGVsc2UKICAgICAgICAg
Yl9pbmZvLT5tYXhfZ3JhbnRfZnJhbWVzID0gbWF4X2dyYW50X2ZyYW1lczsKLSAgICBpZiAoIXhs
dV9jZmdfZ2V0X2xvbmcgKGNvbmZpZywgIm1heF9tYXB0cmFja19mcmFtZXMiLCAmbCwgMCkpCisK
KyAgICBpZiAoIXhsdV9jZmdfZ2V0X2JvdW5kZWRfbG9uZyAoY29uZmlnLCAibWF4X21hcHRyYWNr
X2ZyYW1lcyIsIDAsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9NQVgs
ICZsLCAwKSkKICAgICAgICAgYl9pbmZvLT5tYXhfbWFwdHJhY2tfZnJhbWVzID0gbDsKLSAgICBl
bHNlIGlmIChtYXhfbWFwdHJhY2tfZnJhbWVzICE9IC0xKQorICAgIGVsc2UKICAgICAgICAgYl9p
bmZvLT5tYXhfbWFwdHJhY2tfZnJhbWVzID0gbWF4X21hcHRyYWNrX2ZyYW1lczsKIAogICAgIGxp
YnhsX2RlZmJvb2xfc2V0KCZiX2luZm8tPmNsYWltX21vZGUsIGNsYWltX21vZGUpOwpkaWZmIC0t
Z2l0IGEveGVuL2FyY2gvYXJtL3NldHVwLmMgYi94ZW4vYXJjaC9hcm0vc2V0dXAuYwppbmRleCA1
MWQzMjEwNmI3Li4zYzg5OWNkNGEwIDEwMDY0NAotLS0gYS94ZW4vYXJjaC9hcm0vc2V0dXAuYwor
KysgYi94ZW4vYXJjaC9hcm0vc2V0dXAuYwpAQCAtNzg5LDcgKzc4OSw3IEBAIHZvaWQgX19pbml0
IHN0YXJ0X3hlbih1bnNpZ25lZCBsb25nIGJvb3RfcGh5c19vZmZzZXQsCiAgICAgICAgIC5mbGFn
cyA9IFhFTl9ET01DVExfQ0RGX2h2bSB8IFhFTl9ET01DVExfQ0RGX2hhcCwKICAgICAgICAgLm1h
eF9ldnRjaG5fcG9ydCA9IC0xLAogICAgICAgICAubWF4X2dyYW50X2ZyYW1lcyA9IGdudHRhYl9k
b20wX2ZyYW1lcygpLAotICAgICAgICAubWF4X21hcHRyYWNrX2ZyYW1lcyA9IG9wdF9tYXhfbWFw
dHJhY2tfZnJhbWVzLAorICAgICAgICAubWF4X21hcHRyYWNrX2ZyYW1lcyA9IC0xLAogICAgIH07
CiAgICAgaW50IHJjOwogCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvc2V0dXAuYyBiL3hlbi9h
cmNoL3g4Ni9zZXR1cC5jCmluZGV4IDAwZWU4N2JkZTUuLjdkMjdmMzYwNTMgMTAwNjQ0Ci0tLSBh
L3hlbi9hcmNoL3g4Ni9zZXR1cC5jCisrKyBiL3hlbi9hcmNoL3g4Ni9zZXR1cC5jCkBAIC02OTcs
OCArNjk3LDggQEAgdm9pZCBfX2luaXQgbm9yZXR1cm4gX19zdGFydF94ZW4odW5zaWduZWQgbG9u
ZyBtYmlfcCkKICAgICBzdHJ1Y3QgeGVuX2RvbWN0bF9jcmVhdGVkb21haW4gZG9tMF9jZmcgPSB7
CiAgICAgICAgIC5mbGFncyA9IElTX0VOQUJMRUQoQ09ORklHX1RCT09UKSA/IFhFTl9ET01DVExf
Q0RGX3MzX2ludGVncml0eSA6IDAsCiAgICAgICAgIC5tYXhfZXZ0Y2huX3BvcnQgPSAtMSwKLSAg
ICAgICAgLm1heF9ncmFudF9mcmFtZXMgPSBvcHRfbWF4X2dyYW50X2ZyYW1lcywKLSAgICAgICAg
Lm1heF9tYXB0cmFja19mcmFtZXMgPSBvcHRfbWF4X21hcHRyYWNrX2ZyYW1lcywKKyAgICAgICAg
Lm1heF9ncmFudF9mcmFtZXMgPSAtMSwKKyAgICAgICAgLm1heF9tYXB0cmFja19mcmFtZXMgPSAt
MSwKICAgICB9OwogCiAgICAgLyogQ3JpdGljYWwgcmVnaW9uIHdpdGhvdXQgSURUIG9yIFRTUy4g
IEFueSBmYXVsdCBpcyBkZWFkbHkhICovCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL2dyYW50X3Rh
YmxlLmMgYi94ZW4vY29tbW9uL2dyYW50X3RhYmxlLmMKaW5kZXggYjM0ZDUyMGY2ZC4uZjUwNTNh
NmVlOCAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9ncmFudF90YWJsZS5jCisrKyBiL3hlbi9jb21t
b24vZ3JhbnRfdGFibGUuYwpAQCAtODQsMTEgKzg0LDQzIEBAIHN0cnVjdCBncmFudF90YWJsZSB7
CiAgICAgc3RydWN0IGdyYW50X3RhYmxlX2FyY2ggYXJjaDsKIH07CiAKK3N0YXRpYyBpbnQgX19p
bml0IHBhcnNlX2dudHRhYl9saW1pdChjb25zdCBjaGFyICpwYXJhbSwgY29uc3QgY2hhciAqYXJn
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCAqdmFs
cCkKK3sKKyAgICBjb25zdCBjaGFyICplOworICAgIHVuc2lnbmVkIGxvbmcgdmFsOworCisgICAg
dmFsID0gc2ltcGxlX3N0cnRvdWwoYXJnLCAmZSwgMCk7CisgICAgaWYgKCAqZSApCisgICAgICAg
IHJldHVybiAtRUlOVkFMOworCisgICAgaWYgKCB2YWwgPj0gMCAmJiB2YWwgPD0gSU5UX01BWCAp
CisgICAgICAgICp2YWxwID0gdmFsOworICAgIGVsc2UKKyAgICAgICAgcHJpbnRrKCIlczogdmFs
dWUgJyVzJyBpcyBvdXQgb2YgcmFuZ2U7IHVzaW5nIHZhbHVlICcldSdcbiIsCisgICAgICAgICAg
ICAgICBwYXJhbSwgYXJnLCAqdmFscCk7CisKKyAgICByZXR1cm4gMDsKK30KKwogdW5zaWduZWQg
aW50IF9fcmVhZF9tb3N0bHkgb3B0X21heF9ncmFudF9mcmFtZXMgPSA2NDsKLWludGVnZXJfcnVu
dGltZV9wYXJhbSgiZ250dGFiX21heF9mcmFtZXMiLCBvcHRfbWF4X2dyYW50X2ZyYW1lcyk7CisK
K3N0YXRpYyBpbnQgX19pbml0IHBhcnNlX2dudHRhYl9tYXhfZnJhbWVzKGNvbnN0IGNoYXIgKmFy
ZykKK3sKKyAgICByZXR1cm4gcGFyc2VfZ250dGFiX2xpbWl0KCJnbnR0YWJfbWF4X2ZyYW1lcyIs
IGFyZywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZvcHRfbWF4X2dyYW50X2ZyYW1l
cyk7Cit9CitjdXN0b21fcnVudGltZV9wYXJhbSgiZ250dGFiX21heF9mcmFtZXMiLCBwYXJzZV9n
bnR0YWJfbWF4X2ZyYW1lcyk7CiAKIHVuc2lnbmVkIGludCBfX3JlYWRfbW9zdGx5IG9wdF9tYXhf
bWFwdHJhY2tfZnJhbWVzID0gMTAyNDsKLWludGVnZXJfcnVudGltZV9wYXJhbSgiZ250dGFiX21h
eF9tYXB0cmFja19mcmFtZXMiLCBvcHRfbWF4X21hcHRyYWNrX2ZyYW1lcyk7CisKK3N0YXRpYyBp
bnQgX19pbml0IHBhcnNlX2dudHRhYl9tYXhfbWFwdHJhY2tfZnJhbWVzKGNvbnN0IGNoYXIgKmFy
ZykKK3sKKyAgICByZXR1cm4gcGFyc2VfZ250dGFiX2xpbWl0KCJnbnR0YWJfbWF4X21hcHRyYWNr
X2ZyYW1lcyIsIGFyZywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZvcHRfbWF4X21h
cHRyYWNrX2ZyYW1lcyk7Cit9CitjdXN0b21fcnVudGltZV9wYXJhbSgiZ250dGFiX21heF9tYXB0
cmFja19mcmFtZXMiLAorICAgICAgICAgICAgICAgICAgICAgcGFyc2VfZ250dGFiX21heF9tYXB0
cmFja19mcmFtZXMpOwogCiAjaWZuZGVmIEdOVFRBQl9NQVhfVkVSU0lPTgogI2RlZmluZSBHTlRU
QUJfTUFYX1ZFUlNJT04gMgpAQCAtMTgzNywxMiArMTg2OSwxOCBAQCBhY3RpdmVfYWxsb2NfZmFp
bGVkOgogICAgIHJldHVybiAtRU5PTUVNOwogfQogCi1pbnQgZ3JhbnRfdGFibGVfaW5pdChzdHJ1
Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBpbnQgbWF4X2dyYW50X2ZyYW1lcywKLSAgICAgICAgICAg
ICAgICAgICAgIHVuc2lnbmVkIGludCBtYXhfbWFwdHJhY2tfZnJhbWVzKQoraW50IGdyYW50X3Rh
YmxlX2luaXQoc3RydWN0IGRvbWFpbiAqZCwgaW50IG1heF9ncmFudF9mcmFtZXMsCisgICAgICAg
ICAgICAgICAgICAgICBpbnQgbWF4X21hcHRyYWNrX2ZyYW1lcykKIHsKICAgICBzdHJ1Y3QgZ3Jh
bnRfdGFibGUgKmd0OwogICAgIGludCByZXQgPSAtRU5PTUVNOwogCisgICAgLyogRGVmYXVsdCB0
byBtYXhpbXVtIHZhbHVlIGlmIG5vIHZhbHVlIHdhcyBzcGVjaWZpZWQgKi8KKyAgICBpZiAoIG1h
eF9ncmFudF9mcmFtZXMgPCAwICkKKyAgICAgICAgbWF4X2dyYW50X2ZyYW1lcyA9IG9wdF9tYXhf
Z3JhbnRfZnJhbWVzOworICAgIGlmICggbWF4X21hcHRyYWNrX2ZyYW1lcyA8IDAgKQorICAgICAg
ICBtYXhfbWFwdHJhY2tfZnJhbWVzID0gb3B0X21heF9tYXB0cmFja19mcmFtZXM7CisKICAgICBp
ZiAoIG1heF9ncmFudF9mcmFtZXMgPCBJTklUSUFMX05SX0dSQU5UX0ZSQU1FUyB8fAogICAgICAg
ICAgbWF4X2dyYW50X2ZyYW1lcyA+IG9wdF9tYXhfZ3JhbnRfZnJhbWVzIHx8CiAgICAgICAgICBt
YXhfbWFwdHJhY2tfZnJhbWVzID4gb3B0X21heF9tYXB0cmFja19mcmFtZXMgKQpkaWZmIC0tZ2l0
IGEveGVuL2luY2x1ZGUvcHVibGljL2RvbWN0bC5oIGIveGVuL2luY2x1ZGUvcHVibGljL2RvbWN0
bC5oCmluZGV4IDlmMmNmZDYwMmMuLmUzMTNkYTQ5OWYgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRl
L3B1YmxpYy9kb21jdGwuaAorKysgYi94ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmgKQEAgLTgy
LDEzICs4MiwxNSBAQCBzdHJ1Y3QgeGVuX2RvbWN0bF9jcmVhdGVkb21haW4gewogICAgIHVpbnQz
Ml90IGlvbW11X29wdHM7CiAKICAgICAvKgotICAgICAqIFZhcmlvdXMgZG9tYWluIGxpbWl0cywg
d2hpY2ggaW1wYWN0IHRoZSBxdWFudGl0eSBvZiByZXNvdXJjZXMgKGdsb2JhbAotICAgICAqIG1h
cHBpbmcgc3BhY2UsIHhlbmhlYXAsIGV0YykgYSBndWVzdCBtYXkgY29uc3VtZS4KKyAgICAgKiBW
YXJpb3VzIGRvbWFpbiBsaW1pdHMsIHdoaWNoIGltcGFjdCB0aGUgcXVhbnRpdHkgb2YgcmVzb3Vy
Y2VzCisgICAgICogKGdsb2JhbCBtYXBwaW5nIHNwYWNlLCB4ZW5oZWFwLCBldGMpIGEgZ3Vlc3Qg
bWF5IGNvbnN1bWUuICBGb3IKKyAgICAgKiBtYXhfZ3JhbnRfZnJhbWVzIGFuZCBtYXhfbWFwdHJh
Y2tfZnJhbWVzLCA8IDAgbWVhbnMgInVzZSB0aGUKKyAgICAgKiBkZWZhdWx0IG1heGltdW0gdmFs
dWUgaW4gdGhlIGh5cGVydmlzb3IiLgogICAgICAqLwogICAgIHVpbnQzMl90IG1heF92Y3B1czsK
ICAgICB1aW50MzJfdCBtYXhfZXZ0Y2huX3BvcnQ7Ci0gICAgdWludDMyX3QgbWF4X2dyYW50X2Zy
YW1lczsKLSAgICB1aW50MzJfdCBtYXhfbWFwdHJhY2tfZnJhbWVzOworICAgIGludDMyX3QgbWF4
X2dyYW50X2ZyYW1lczsKKyAgICBpbnQzMl90IG1heF9tYXB0cmFja19mcmFtZXM7CiAKICAgICBz
dHJ1Y3QgeGVuX2FyY2hfZG9tYWluY29uZmlnIGFyY2g7CiB9OwpkaWZmIC0tZ2l0IGEveGVuL2lu
Y2x1ZGUveGVuL2dyYW50X3RhYmxlLmggYi94ZW4vaW5jbHVkZS94ZW4vZ3JhbnRfdGFibGUuaApp
bmRleCA2ZjkzNDVkOWVmLi4zNDg4NmJiNmY4IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4v
Z3JhbnRfdGFibGUuaAorKysgYi94ZW4vaW5jbHVkZS94ZW4vZ3JhbnRfdGFibGUuaApAQCAtMzYs
OCArMzYsOCBAQCBleHRlcm4gdW5zaWduZWQgaW50IG9wdF9tYXhfZ3JhbnRfZnJhbWVzOwogZXh0
ZXJuIHVuc2lnbmVkIGludCBvcHRfbWF4X21hcHRyYWNrX2ZyYW1lczsKIAogLyogQ3JlYXRlL2Rl
c3Ryb3kgcGVyLWRvbWFpbiBncmFudCB0YWJsZSBjb250ZXh0LiAqLwotaW50IGdyYW50X3RhYmxl
X2luaXQoc3RydWN0IGRvbWFpbiAqZCwgdW5zaWduZWQgaW50IG1heF9ncmFudF9mcmFtZXMsCi0g
ICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgbWF4X21hcHRyYWNrX2ZyYW1lcyk7Citp
bnQgZ3JhbnRfdGFibGVfaW5pdChzdHJ1Y3QgZG9tYWluICpkLCBpbnQgbWF4X2dyYW50X2ZyYW1l
cywKKyAgICAgICAgICAgICAgICAgICAgIGludCBtYXhfbWFwdHJhY2tfZnJhbWVzKTsKIHZvaWQg
Z3JhbnRfdGFibGVfZGVzdHJveSgKICAgICBzdHJ1Y3QgZG9tYWluICpkKTsKIHZvaWQgZ3JhbnRf
dGFibGVfaW5pdF92Y3B1KHN0cnVjdCB2Y3B1ICp2KTsKQEAgLTY4LDggKzY4LDggQEAgaW50IGdu
dHRhYl9nZXRfc3RhdHVzX2ZyYW1lKHN0cnVjdCBkb21haW4gKmQsIHVuc2lnbmVkIGxvbmcgaWR4
LAogI2RlZmluZSBvcHRfbWF4X21hcHRyYWNrX2ZyYW1lcyAwCiAKIHN0YXRpYyBpbmxpbmUgaW50
IGdyYW50X3RhYmxlX2luaXQoc3RydWN0IGRvbWFpbiAqZCwKLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IG1heF9ncmFudF9mcmFtZXMsCi0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBtYXhfbWFwdHJhY2tfZnJhbWVz
KQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgbWF4X2dyYW50X2ZyYW1l
cywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IG1heF9tYXB0cmFja19m
cmFtZXMpCiB7CiAgICAgcmV0dXJuIDA7CiB9Ci0tIAoyLjIwLjEKCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhl
bi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3Jn
L21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

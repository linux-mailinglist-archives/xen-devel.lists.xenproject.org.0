Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 3E89280197D
	for <lists+xen-devel@lfdr.de>; Sat,  2 Dec 2023 02:27:44 +0100 (CET)
Received: from list by lists.xenproject.org with outflank-mailman.645833.1008277 (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1r9Emw-00032j-FI; Sat, 02 Dec 2023 01:27:22 +0000
X-Outflank-Mailman: Message body and most headers restored to incoming version
Received: by outflank-mailman (output) from mailman id 645833.1008277; Sat, 02 Dec 2023 01:27:22 +0000
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.92)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1r9Emw-0002uL-45; Sat, 02 Dec 2023 01:27:22 +0000
Received: by outflank-mailman (input) for mailman id 645833;
 Sat, 02 Dec 2023 01:27:20 +0000
Received: from se1-gles-flk1-in.inumbo.com ([94.247.172.50]
 helo=se1-gles-flk1.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.92) (envelope-from
 <SRS0=jVJG=HN=epam.com=prvs=6700ee1bd8=volodymyr_babchuk@srs-se1.protection.inumbo.net>)
 id 1r9Emt-000271-O8
 for xen-devel@lists.xenproject.org; Sat, 02 Dec 2023 01:27:19 +0000
Received: from mx0b-0039f301.pphosted.com (mx0b-0039f301.pphosted.com
 [148.163.137.242]) by se1-gles-flk1.inumbo.com (Halon) with ESMTPS
 id ed06d412-90b1-11ee-9b0f-b553b5be7939;
 Sat, 02 Dec 2023 02:27:16 +0100 (CET)
Received: from pps.filterd (m0174680.ppops.net [127.0.0.1])
 by mx0b-0039f301.pphosted.com (8.17.1.19/8.17.1.19) with ESMTP id
 3B20exWb004068; Sat, 2 Dec 2023 01:27:14 GMT
Received: from eur02-vi1-obe.outbound.protection.outlook.com
 (mail-vi1eur02lp2040.outbound.protection.outlook.com [104.47.11.40])
 by mx0b-0039f301.pphosted.com (PPS) with ESMTPS id 3uqt8mg1hm-4
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Sat, 02 Dec 2023 01:27:14 +0000
Received: from VI1PR03MB3710.eurprd03.prod.outlook.com (2603:10a6:803:31::18)
 by DU0PR03MB8599.eurprd03.prod.outlook.com (2603:10a6:10:3e6::18)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.7046.27; Sat, 2 Dec
 2023 01:27:09 +0000
Received: from VI1PR03MB3710.eurprd03.prod.outlook.com
 ([fe80::8e03:368:1fd7:1822]) by VI1PR03MB3710.eurprd03.prod.outlook.com
 ([fe80::8e03:368:1fd7:1822%6]) with mapi id 15.20.7046.027; Sat, 2 Dec 2023
 01:27:08 +0000
X-BeenThere: xen-devel@lists.xenproject.org
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Errors-To: xen-devel-bounces@lists.xenproject.org
Precedence: list
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>
X-Inumbo-ID: ed06d412-90b1-11ee-9b0f-b553b5be7939
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=LmNB+vq+TOgQkcGi81io7BXU1Y49/WmBS+YUC0NuOXDV6Yzk2lNrVuOoPfZZ4AY2g4WPSiNx8GI1/l/86DLzzHkKTKXW1nrpWF1EYgu+mZ5VGyzBRc8Pjm+kaF+67k/NqvVIpKXa8tMFedEBq1XEQlGzsJ+4b922DlPDLt639pC04KvR7b5BXvQ/8Y/fYJet7AKSo16tSGMYvnD5uC+DGy3g5OLl5f3w0f8F707PVv/Hs+wIYovUyodQ+5W1St2Fzn+22qAYlAG+VwDkn5paApHlbd0wheZ8cnG7LYirglGLVFrJT71BMIT12iURasru0Zfl7/rPnOlEZtqfDLegVA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=HU3w/MVRT7OnffWTfx0/oqZxB5j1V8feoRNAk0O5Ezo=;
 b=jq8IEYCGGOrhw2u32VsxwnUSe9zGje8Hg+hE4V7vAs+T49Sbxgtjz5v4szGRUPlS/44u/94qtGgI2YmaWq8TlNgRcACThbsq/gtTkeQKYP6lgLTnD2w9Tyzebay+Q7tYhAmA9Ch05zo4a1mkBhkcupmMSXIAyFrIsmxvYieLiSiDCKDw/5oW7P2QeAdHd3czatRjFXaoiFGAWFPZKgouesF5VHVMGlBbhsXH8fEw7OEXaWnMwltahJzoXutgs0DhSFZcUCi9u12gXYVR6FcI6twfx5wzfpcqlLYw3+yAeeZvdGemF9Yvmvo+9/O0trLgIHXHgytTJG284i+dOC7fiA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=epam.com; dmarc=pass action=none header.from=epam.com;
 dkim=pass header.d=epam.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=epam.com; s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=HU3w/MVRT7OnffWTfx0/oqZxB5j1V8feoRNAk0O5Ezo=;
 b=LHdYUO2H4ADVu2K5xxb9f9z95unZ3poZ9Y4mndVEwMJNmuhf6dlyUWNcilrV2R6kB3DLUj11xictAhe99x0/a3z722GdVQ2oLEgi08bTp+QL84bN0Al2+yVqnMEmMBpnTIpar4eAYSoPttm+FrkwPDAOpV7nhrX8ipd17TqRXMp4fCz1ExgklBYIBI6zXvcST0YXSyL5t2tV2HD5OqgDZJ0TPqvdWgUAvx/k+nN/rPOXJbbtw2fricXkhJnTaS3ay9SPxYl/80cILpPE+nG1M7exs5cKL7jXc5Q9kTaGhgcG7MjbShTz+p2ovMfD2hJciS+5f+i6cWytuAyNULnhVA==
From: Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
CC: Stewart Hildebrand <stewart.hildebrand@amd.com>,
        Oleksandr Andrushchenko
	<Oleksandr_Andrushchenko@epam.com>,
        =?utf-8?B?Um9nZXIgUGF1IE1vbm7DqQ==?=
	<roger.pau@citrix.com>,
        Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>
Subject: [PATCH v11 10/17] vpci/header: handle p2m range sets per BAR
Thread-Topic: [PATCH v11 10/17] vpci/header: handle p2m range sets per BAR
Thread-Index: AQHaJL6ovuONmUhRl0Ozo/OYp0VBgw==
Date: Sat, 2 Dec 2023 01:27:05 +0000
Message-ID: <20231202012556.2012281-11-volodymyr_babchuk@epam.com>
References: <20231202012556.2012281-1-volodymyr_babchuk@epam.com>
In-Reply-To: <20231202012556.2012281-1-volodymyr_babchuk@epam.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-mailer: git-send-email 2.42.0
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: VI1PR03MB3710:EE_|DU0PR03MB8599:EE_
x-ms-office365-filtering-correlation-id: 8c0d6dd1-22ac-4fdf-8f1a-08dbf2d5cd2c
x-ld-processed: b41b72d0-4e9f-4c26-8a69-f949f367c91d,ExtAddr
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: 
 ACc05rBYttSwdH0bhs5E9hNr/W3ulRZmqIMNWEWDv0GCUayoROtm5kKes8ORIyHI/3pdc33pdRKzrXEeBAbHZBOaBE3A4qxG+tadd1++YLaKn7pyPlq1DBC0l7UefgMD3lmb0NtI6qF2M5iJoKHZHdnP0r/BdNiAAYtR1kEnlP08R8jTdmmu5cyIvkiiw9kQyUfN20nbldXCnKEVIthybf+PfGFSP0DEV6dMxOhWxuIp1nfLOnpKyh3IroN6XrcxNxVMpIjlUFuO4BdaZKuSPwhGHi2J2DpwBJkdsjt40cj/CU4SJxN2ZgHPcFoHJTAxVA8+W2709iZCHzvfzR31rcVCZV/eVD3s/JDehTHUM3NgITLWJv+Fd6eV6RUZmiYnf+k2Pah38MbCypllkEhbLQYusy/NWKAIfphbOpdRapdtks8FLz5dOrZ9MGTQDWeUijCdncuuCV15RWyo+yBx+45/xE595MRNOvNDpXdqGWYgcVWlXezl2isx4fYww7PS/5mInujOTnHQqO/fNzM29BGm/lrCzwKXr2SfqUcPoAIyEUgWGBW1SIpjpj4hB/L9melAjtv28CZSfORoW9Eev5Nr0VfVOisl1idwI3V7Q9+cFNrm4yqjHXgAATL8aI1+JBQ9OGWmzT9zeQEheiTll2rr38WckUCIuoamW2Q0lZI=
x-forefront-antispam-report: 
 CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:VI1PR03MB3710.eurprd03.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230031)(136003)(396003)(39860400002)(346002)(376002)(366004)(230922051799003)(230273577357003)(230173577357003)(186009)(64100799003)(451199024)(1800799012)(5660300002)(86362001)(4326008)(8676002)(8936002)(2906002)(30864003)(38070700009)(41300700001)(36756003)(2616005)(107886003)(1076003)(6512007)(6506007)(55236004)(83380400001)(6486002)(478600001)(26005)(71200400001)(6666004)(38100700002)(122000001)(316002)(91956017)(54906003)(64756008)(66446008)(6916009)(66476007)(66556008)(76116006)(66946007);DIR:OUT;SFP:1101;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: 
 =?utf-8?B?T1BUOXRaTEdMSWd1aEFzK21XZWlGQXB5TU1CUUJ2NjVwY0FwckRFRWpBUERp?=
 =?utf-8?B?Y0FSUjZXVFVvKzV4eUlZZENMalZkaGJodEFTaHhCWUdqY1BlNWoycDZMc08x?=
 =?utf-8?B?Um1SejJxR2ZkeDZoaTYrS2gvQ1llL21QV3g1NjJSRWoralg2NVBzdDlJZFQw?=
 =?utf-8?B?SmlDa1c1UXJEdEZ5aGVBMlFMQ2dxYW95NWM4VlJ2bXFWQS9xSi9jZG53Rm1r?=
 =?utf-8?B?V1pvTnJ0aHkzWDRWOTVVcjN4SnZCVzZXQTFkUG5wd3h6d0E0Uko3QVlxaU9t?=
 =?utf-8?B?Q0s5dlRtYnhHNHptaU5nQmhDNi9qeTJWeXFpVXVOQldzRWNHSjVIRlVxc011?=
 =?utf-8?B?VjFjbWt3NFg4S08zeWNRTHkwcXo2VDkvTXpGRnBYMWM1a05RZHNNSW9ROUJ1?=
 =?utf-8?B?Y3BWRlJIdVZ3OGVCNmhyNnluQjA2d2QrS25ERGRESzZ1am9wd1NVb2FxUG9n?=
 =?utf-8?B?R1ExWEFyenYyY0RYY1gyd1craytPbzVSR3U4SDhtMHVOME5IV0E2MHM4VDZG?=
 =?utf-8?B?dElINFlmOU5rQ2ZqTG9iaWdlbmlQQWpkeCs2OFJxTDUvSjQ3ZG1HRkNVUVFk?=
 =?utf-8?B?U1hJelZxT3RCYWxadUFuVVBwWk9NRFIyV0NQTXdKQUc1V0NPVHUrUFpXdTZJ?=
 =?utf-8?B?eUJlUXVrbXRjbVR1UE5Pa2pGQzIwclE2RU8zRWZLdEZ3RnRtWk9zMWROelhY?=
 =?utf-8?B?WUdveG02cWZuVDU4ZlJkQXpVNW14TlMzOWZOV05wdGVodXJNby91V1hVd1gv?=
 =?utf-8?B?bjVMcllMazg4eFR5NVYvWGJEaGtLN1l3cHh4M29iYTc3dlJoK2h6eGJiSnZw?=
 =?utf-8?B?VDlmck8wblVkZk5wWjVvZmlIb2k4SmYwZ2dHbnJwa2ZiM2FCeS8xNHc5akFZ?=
 =?utf-8?B?cjcvSk9EcWdPbnZhRW9zNFVaR1pzT2RMb2RkbWJlbTh3NVplN1JTUWNObFlt?=
 =?utf-8?B?N2hkUGZ3NytZOG0wQ0Q1SUFQM2ZNZk9JazFzYkgza0ZxcGpuUTFhT1FHOG5M?=
 =?utf-8?B?a0ZpM1NqaG9lbDJ2NXJ5VURvK2NNSVg4eHE5SzFwY21mVTk3eHUxMDMvZ3Rl?=
 =?utf-8?B?RmNHVG1jUHhWTUZUczdlbGJPQU9MSlhTSStlN1FERU05MTZCNHQ3bFBIWDJI?=
 =?utf-8?B?MS9NR2Rab1hvZTBza1Q0bUxlamgzRVo2MVVXOXRweFFNQWhmWTR1N1kvOWFr?=
 =?utf-8?B?aVdhWnR5dmphOGNqTUxjem5sTEY4dDEzay9zOE4rUDJhOVcvUWRRZGhUWWdC?=
 =?utf-8?B?Ry9YbkxxVDNnVHgvbGZ4VW5LSzJRbWVDaXd3a0o1Z2RkU2RNc3FnOVBSNDhC?=
 =?utf-8?B?SDBIcTd3YnNFanJBdVluNXFlVEpFbXlXRVVuRTdjdHBDNmxrRkJIRFU3YmNK?=
 =?utf-8?B?L1IzZXZTZ0RCL2krM0RjVWJKNU1NUXNvQ3JZcEpTOHFhT1FaaG9EMEJJUGVG?=
 =?utf-8?B?aHJ1L0o2bitHTDdqa3o0QWY5WEtxTG90Z0hRaTVUQTZkQXp0ZmpnREdQRUl1?=
 =?utf-8?B?K0dGYXFsKzJyeHI0OC9oYWpROFNNMXZpb2w0K3AvTEZVWDMvQlp3UlhrSDRk?=
 =?utf-8?B?WGpQRXNNdlZrM0Q3VmVSL3BMMzVzekg4MWZkcGQxNzJPSkNyajNhTG5QOHZy?=
 =?utf-8?B?dHJTQVhTb3lGT2F6Y3ZlZlcwWlMvNmtSQTRkcHp0TWhFRWN5c3RiM2QreFow?=
 =?utf-8?B?QWdEdVBRWVEybVM4b2I0Mmc0VlpCWEpBTWlmd0pVeTBtcy94OXc0Z2tadTFS?=
 =?utf-8?B?ZHVoczN6emh2RUFrUFYwOGtLV3I2T2NhQndTRUo5bkFnK080TkhJTnE1Z0w2?=
 =?utf-8?B?amVRb2lrcndlZ0tIQkQwOURHbDZaKzltRHFQK3loV3hQWjN6WUk5ZUpTSFFr?=
 =?utf-8?B?cEZJOTV2UU5Iek1CdGpHNnFrZTJ1RFdhdnpIeXlmbFUxSVd4RUNOMU9jaENr?=
 =?utf-8?B?c1VDaWJsVUZKckRmTlZXVldaZFJiYzBKY2wzazNBZHVDMko1NHZra3Y2eXA0?=
 =?utf-8?B?a0paTmZLSXFxajFYZjB3WDhmcHg4M1pnSEJsZWgyWFpNdkpObC9PcjhPWkJv?=
 =?utf-8?B?YnlMSmtRTjJ5a0svODd0SC90amJ6OWxXVVQwdFQzelo0UkdJN2EvMzM4TUpM?=
 =?utf-8?B?elpveVZERFNtUyt5NmNxanJYSStjWnZydU9nb01sdE9WMEZkZWNhb3c3amRn?=
 =?utf-8?B?QUE9PQ==?=
Content-Type: text/plain; charset="utf-8"
Content-ID: <17F77D55BA824E4184BB3E1AAC4D11DB@eurprd03.prod.outlook.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: epam.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: VI1PR03MB3710.eurprd03.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 8c0d6dd1-22ac-4fdf-8f1a-08dbf2d5cd2c
X-MS-Exchange-CrossTenant-originalarrivaltime: 02 Dec 2023 01:27:05.4098
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: b41b72d0-4e9f-4c26-8a69-f949f367c91d
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: qXvwjJSqm2E1ESW1zU1Ri18Umjfw4XchjKLd5GHJJwKzNP5oQujUKwrmV7jy+C2xZPRh2mzUdPEGukXbSXJQ7H2UxUQnLmoMheeHEm5di/o=
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DU0PR03MB8599
X-Proofpoint-ORIG-GUID: 4Swmap5dXgCDj_U_mu-8DJ8dqBQi8fJV
X-Proofpoint-GUID: 4Swmap5dXgCDj_U_mu-8DJ8dqBQi8fJV
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.272,Aquarius:18.0.997,Hydra:6.0.619,FMLib:17.11.176.26
 definitions=2023-12-01_24,2023-11-30_01,2023-05-22_02
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0 spamscore=0 bulkscore=0
 phishscore=0 suspectscore=0 impostorscore=0 mlxscore=0 adultscore=0
 malwarescore=0 lowpriorityscore=0 mlxlogscore=999 clxscore=1015
 priorityscore=1501 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.12.0-2311060000 definitions=main-2312020008

RnJvbTogT2xla3NhbmRyIEFuZHJ1c2hjaGVua28gPG9sZWtzYW5kcl9hbmRydXNoY2hlbmtvQGVw
YW0uY29tPg0KDQpJbnN0ZWFkIG9mIGhhbmRsaW5nIGEgc2luZ2xlIHJhbmdlIHNldCwgdGhhdCBj
b250YWlucyBhbGwgdGhlIG1lbW9yeQ0KcmVnaW9ucyBvZiBhbGwgdGhlIEJBUnMgYW5kIFJPTSwg
aGF2ZSB0aGVtIHBlciBCQVIuDQpBcyB0aGUgcmFuZ2Ugc2V0cyBhcmUgbm93IGNyZWF0ZWQgd2hl
biBhIFBDSSBkZXZpY2UgaXMgYWRkZWQgYW5kIGRlc3Ryb3llZA0Kd2hlbiBpdCBpcyByZW1vdmVk
IHNvIG1ha2UgdGhlbSBuYW1lZCBhbmQgYWNjb3VudGVkLg0KDQpOb3RlIHRoYXQgcmFuZ2VzZXRz
IHdlcmUgY2hvc2VuIGhlcmUgZGVzcGl0ZSB0aGVyZSBiZWluZyBvbmx5IHVwIHRvDQozIHNlcGFy
YXRlIHJhbmdlcyBpbiBlYWNoIHNldCAodHlwaWNhbGx5IGp1c3QgMSkuIEJ1dCByYW5nZXNldCBw
ZXIgQkFSDQp3YXMgY2hvc2VuIGZvciB0aGUgZWFzZSBvZiBpbXBsZW1lbnRhdGlvbiBhbmQgZXhp
c3RpbmcgY29kZSByZS11c2FiaWxpdHkuDQoNCkFsc28gbm90ZSB0aGF0IGVycm9yIGhhbmRsaW5n
IG9mIHZwY2lfcHJvY2Vzc19wZW5kaW5nKCkgaXMgc2xpZ2h0bHkNCm1vZGlmaWVkLCBhbmQgdGhh
dCB2UENJIGhhbmRsZXJzIGFyZSBubyBsb25nZXIgcmVtb3ZlZCBpZiB0aGUgY3JlYXRpb24NCm9m
IHRoZSBtYXBwaW5ncyBpbiB2cGNpX3Byb2Nlc3NfcGVuZGluZygpIGZhaWxzLCBhcyB0aGF0J3Mg
dW5saWtlbHkgdG8NCmxlYWQgdG8gYSBmdW5jdGlvbmFsIGRldmljZSBpbiBhbnkgY2FzZS4NCg0K
VGhpcyBpcyBpbiBwcmVwYXJhdGlvbiBvZiBtYWtpbmcgbm9uLWlkZW50aXR5IG1hcHBpbmdzIGlu
IHAybSBmb3IgdGhlIE1NSU9zLg0KDQpTaWduZWQtb2ZmLWJ5OiBPbGVrc2FuZHIgQW5kcnVzaGNo
ZW5rbyA8b2xla3NhbmRyX2FuZHJ1c2hjaGVua29AZXBhbS5jb20+DQpTaWduZWQtb2ZmLWJ5OiBW
b2xvZHlteXIgQmFiY2h1ayA8dm9sb2R5bXlyX2JhYmNodWtAZXBhbS5jb20+DQpSZXZpZXdlZC1i
eTogUm9nZXIgUGF1IE1vbm7DqSA8cm9nZXIucGF1QGNpdHJpeC5jb20+DQoNCi0tLQ0KSW4gdjEx
Og0KLSBNb2RpZmllZCBjb21taXQgbWVzc2FnZSB0byBub3RlIGNoYW5nZXMgaW4gZXJyb3IgaGFu
ZGxpbmcgaW4NCnZwY2lfcHJvY2Vzc19wZW5kaW5nKCkNCi0gUmVtb3ZlZCByZWR1bmRhbnQgQVNT
RVJUKCkgaW4gZGVmZXJfbWFwLiBUaGVyZSBpcyBubyByZWFzb24gdG8NCmludHJvZHVjZSBpdCBp
biB0aGlzIHBhdGNoIGFuZCB0aGVyZSBpcyBubyBvdGhlciBwYXRjaCB3aGVyZQ0KaW50cm9kdWNp
bmcgdGhhdCBBU1NFUlQoKSB3YXMgYXBwcm9wcmlhdGUuDQotIEZpeGVkIGZvcm1hdHRpbmcNCi0g
dnBjaV9wcm9jZXNzX3BlbmRpbmcoKSBjbGVhcnMgdi0+dnBjaS5wZGV2IGlmIGl0IGZhaWxlZA0K
ICBjaGVja3MgYXQgdGhlIGJlZ2lubmluZw0KLSBBZGRlZCBSb2dlcidzIFItQiB0YWcNCkluIHYx
MDoNCi0gQWRkZWQgYWRkaXRpb25hbCBjaGVja3MgdG8gdnBjaV9wcm9jZXNzX3BlbmRpbmcoKQ0K
LSB2cGNpX3Byb2Nlc3NfcGVuZGluZygpIG5vdyBjbGVhcnMgcmFuZ2VzZXQgaW4gY2FzZSBvZiBm
YWlsdXJlDQotIEZpeGVkIGxvY2tzIGluIHZwY2lfcHJvY2Vzc19wZW5kaW5nKCkNCi0gRml4ZWQg
Y29kaW5nIHN0eWxlIGlzc3Vlcw0KLSBGaXhlZCBlcnJvciBoYW5kbGluZyBpbiBpbml0X2JhcnMN
CkluIHY5Og0KLSByZW1vdmVkIGQtPnZwY2kubWFwX3BlbmRpbmcgaW4gZmF2b3Igb2YgY2hlY2tp
bmcgdi0+dnBjaS5wZGV2ICE9DQpOVUxMDQotIHByaW50ayAtPiBncHJpbnRrDQotIHJlbmFtZWQg
YmFyIHZhcmlhYmxlIHRvIGZpeCBzaGFkb3dpbmcNCi0gZml4ZWQgYnVnIHdpdGggaXRlcmF0aW5n
IG9uIHJlbW90ZSBkZXZpY2UncyBCQVJzDQotIHJlbGF4ZWQgbG9jayBpbiB2cGNpX3Byb2Nlc3Nf
cGVuZGluZw0KLSByZW1vdmVkIHN0YWxlIGNvbW1lbnQNClNpbmNlIHY2Og0KLSB1cGRhdGUgYWNj
b3JkaW5nIHRvIHRoZSBuZXcgbG9ja2luZyBzY2hlbWUNCi0gcmVtb3ZlIG9kZCBmYWlsIGxhYmVs
IGluIG1vZGlmeV9iYXJzDQpTaW5jZSB2NToNCi0gZml4IGNvbW1lbnRzDQotIG1vdmUgcmFuZ2Vz
ZXQgYWxsb2NhdGlvbiB0byBpbml0X2JhcnMgYW5kIG9ubHkgYWxsb2NhdGUNCiAgZm9yIE1BUFBB
QkxFIEJBUnMNCi0gY2hlY2sgZm9yIG92ZXJsYXAgd2l0aCB0aGUgYWxyZWFkeSBzZXR1cCBCQVIg
cmFuZ2VzDQpTaW5jZSB2NDoNCi0gdXNlIG5hbWVkIHJhbmdlIHNldHMgZm9yIEJBUnMgKEphbikN
Ci0gY2hhbmdlcyByZXF1aXJlZCBieSB0aGUgbmV3IGxvY2tpbmcgc2NoZW1lDQotIHVwZGF0ZWQg
Y29tbWl0IG1lc3NhZ2UgKEphbikNClNpbmNlIHYzOg0KLSByZS13b3JrIHZwY2lfY2FuY2VsX3Bl
bmRpbmcgYWNjb3JkaW5nbHkgdG8gdGhlIHBlci1CQVIgaGFuZGxpbmcNCi0gcy9udW1fbWVtX3Jh
bmdlcy9tYXBfcGVuZGluZyBhbmQgcy91aW50OF90L2Jvb2wNCi0gQVNTRVJUKGJhci0+bWVtKSBp
biBtb2RpZnlfYmFycw0KLSBjcmVhdGUgYW5kIGRlc3Ryb3kgdGhlIHJhbmdlc2V0cyBvbiBhZGQv
cmVtb3ZlDQotLS0NCiB4ZW4vZHJpdmVycy92cGNpL2hlYWRlci5jIHwgMjU3ICsrKysrKysrKysr
KysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tDQogeGVuL2RyaXZlcnMvdnBjaS92cGNpLmMgICB8
ICAgNiArDQogeGVuL2luY2x1ZGUveGVuL3ZwY2kuaCAgICB8ICAgMiArLQ0KIDMgZmlsZXMgY2hh
bmdlZCwgMTg1IGluc2VydGlvbnMoKyksIDgwIGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEv
eGVuL2RyaXZlcnMvdnBjaS9oZWFkZXIuYyBiL3hlbi9kcml2ZXJzL3ZwY2kvaGVhZGVyLmMNCmlu
ZGV4IDQzMjE2NDI5ZDkuLjdjODRjZWU1ZDEgMTAwNjQ0DQotLS0gYS94ZW4vZHJpdmVycy92cGNp
L2hlYWRlci5jDQorKysgYi94ZW4vZHJpdmVycy92cGNpL2hlYWRlci5jDQpAQCAtMTYxLDYzICsx
NjEsMTA3IEBAIHN0YXRpYyB2b2lkIG1vZGlmeV9kZWNvZGluZyhjb25zdCBzdHJ1Y3QgcGNpX2Rl
diAqcGRldiwgdWludDE2X3QgY21kLA0KIA0KIGJvb2wgdnBjaV9wcm9jZXNzX3BlbmRpbmcoc3Ry
dWN0IHZjcHUgKnYpDQogew0KLSAgICBpZiAoIHYtPnZwY2kubWVtICkNCisgICAgc3RydWN0IHBj
aV9kZXYgKnBkZXYgPSB2LT52cGNpLnBkZXY7DQorICAgIHN0cnVjdCBtYXBfZGF0YSBkYXRhID0g
ew0KKyAgICAgICAgLmQgPSB2LT5kb21haW4sDQorICAgICAgICAubWFwID0gdi0+dnBjaS5jbWQg
JiBQQ0lfQ09NTUFORF9NRU1PUlksDQorICAgIH07DQorICAgIHN0cnVjdCB2cGNpX2hlYWRlciAq
aGVhZGVyID0gTlVMTDsNCisgICAgdW5zaWduZWQgaW50IGk7DQorDQorICAgIGlmICggIXBkZXYg
KQ0KKyAgICAgICAgcmV0dXJuIGZhbHNlOw0KKw0KKyAgICByZWFkX2xvY2soJnYtPmRvbWFpbi0+
cGNpX2xvY2spOw0KKw0KKyAgICBpZiAoICFwZGV2LT52cGNpIHx8ICh2LT5kb21haW4gIT0gcGRl
di0+ZG9tYWluKSApDQorICAgIHsNCisgICAgICAgIHYtPnZwY2kucGRldiA9IE5VTEw7DQorICAg
ICAgICByZWFkX3VubG9jaygmdi0+ZG9tYWluLT5wY2lfbG9jayk7DQorICAgICAgICByZXR1cm4g
ZmFsc2U7DQorICAgIH0NCisNCisgICAgaGVhZGVyID0gJnBkZXYtPnZwY2ktPmhlYWRlcjsNCisg
ICAgZm9yICggaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGhlYWRlci0+YmFycyk7IGkrKyApDQogICAg
IHsNCi0gICAgICAgIHN0cnVjdCBtYXBfZGF0YSBkYXRhID0gew0KLSAgICAgICAgICAgIC5kID0g
di0+ZG9tYWluLA0KLSAgICAgICAgICAgIC5tYXAgPSB2LT52cGNpLmNtZCAmIFBDSV9DT01NQU5E
X01FTU9SWSwNCi0gICAgICAgIH07DQotICAgICAgICBpbnQgcmMgPSByYW5nZXNldF9jb25zdW1l
X3Jhbmdlcyh2LT52cGNpLm1lbSwgbWFwX3JhbmdlLCAmZGF0YSk7DQorICAgICAgICBzdHJ1Y3Qg
dnBjaV9iYXIgKmJhciA9ICZoZWFkZXItPmJhcnNbaV07DQorICAgICAgICBpbnQgcmM7DQorDQor
ICAgICAgICBpZiAoIHJhbmdlc2V0X2lzX2VtcHR5KGJhci0+bWVtKSApDQorICAgICAgICAgICAg
Y29udGludWU7DQorDQorICAgICAgICByYyA9IHJhbmdlc2V0X2NvbnN1bWVfcmFuZ2VzKGJhci0+
bWVtLCBtYXBfcmFuZ2UsICZkYXRhKTsNCiANCiAgICAgICAgIGlmICggcmMgPT0gLUVSRVNUQVJU
ICkNCisgICAgICAgIHsNCisgICAgICAgICAgICByZWFkX3VubG9jaygmdi0+ZG9tYWluLT5wY2lf
bG9jayk7DQogICAgICAgICAgICAgcmV0dXJuIHRydWU7DQorICAgICAgICB9DQogDQotICAgICAg
ICB3cml0ZV9sb2NrKCZ2LT5kb21haW4tPnBjaV9sb2NrKTsNCi0gICAgICAgIHNwaW5fbG9jaygm
di0+dnBjaS5wZGV2LT52cGNpLT5sb2NrKTsNCi0gICAgICAgIC8qIERpc2FibGUgbWVtb3J5IGRl
Y29kaW5nIHVuY29uZGl0aW9uYWxseSBvbiBmYWlsdXJlLiAqLw0KLSAgICAgICAgbW9kaWZ5X2Rl
Y29kaW5nKHYtPnZwY2kucGRldiwNCi0gICAgICAgICAgICAgICAgICAgICAgICByYyA/IHYtPnZw
Y2kuY21kICYgflBDSV9DT01NQU5EX01FTU9SWSA6IHYtPnZwY2kuY21kLA0KLSAgICAgICAgICAg
ICAgICAgICAgICAgICFyYyAmJiB2LT52cGNpLnJvbV9vbmx5KTsNCi0gICAgICAgIHNwaW5fdW5s
b2NrKCZ2LT52cGNpLnBkZXYtPnZwY2ktPmxvY2spOw0KLQ0KLSAgICAgICAgcmFuZ2VzZXRfZGVz
dHJveSh2LT52cGNpLm1lbSk7DQotICAgICAgICB2LT52cGNpLm1lbSA9IE5VTEw7DQogICAgICAg
ICBpZiAoIHJjICkNCi0gICAgICAgICAgICAvKg0KLSAgICAgICAgICAgICAqIEZJWE1FOiBpbiBj
YXNlIG9mIGZhaWx1cmUgcmVtb3ZlIHRoZSBkZXZpY2UgZnJvbSB0aGUgZG9tYWluLg0KLSAgICAg
ICAgICAgICAqIE5vdGUgdGhhdCB0aGVyZSBtaWdodCBzdGlsbCBiZSBsZWZ0b3ZlciBtYXBwaW5n
cy4gV2hpbGUgdGhpcyBpcw0KLSAgICAgICAgICAgICAqIHNhZmUgZm9yIERvbTAsIGZvciBEb21V
cyB0aGUgZG9tYWluIHdpbGwgbGlrZWx5IG5lZWQgdG8gYmUNCi0gICAgICAgICAgICAgKiBraWxs
ZWQgaW4gb3JkZXIgdG8gYXZvaWQgbGVha2luZyBzdGFsZSBwMm0gbWFwcGluZ3Mgb24NCi0gICAg
ICAgICAgICAgKiBmYWlsdXJlLg0KLSAgICAgICAgICAgICAqLw0KLSAgICAgICAgICAgIHZwY2lf
ZGVhc3NpZ25fZGV2aWNlKHYtPnZwY2kucGRldik7DQotICAgICAgICB3cml0ZV91bmxvY2soJnYt
PmRvbWFpbi0+cGNpX2xvY2spOw0KKyAgICAgICAgew0KKyAgICAgICAgICAgIHNwaW5fbG9jaygm
cGRldi0+dnBjaS0+bG9jayk7DQorICAgICAgICAgICAgLyogRGlzYWJsZSBtZW1vcnkgZGVjb2Rp
bmcgdW5jb25kaXRpb25hbGx5IG9uIGZhaWx1cmUuICovDQorICAgICAgICAgICAgbW9kaWZ5X2Rl
Y29kaW5nKHBkZXYsIHYtPnZwY2kuY21kICYgflBDSV9DT01NQU5EX01FTU9SWSwNCisgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZmFsc2UpOw0KKyAgICAgICAgICAgIHNwaW5fdW5sb2NrKCZw
ZGV2LT52cGNpLT5sb2NrKTsNCisNCisgICAgICAgICAgICAvKiBDbGVhbiBhbGwgdGhlIHJhbmdl
c2V0cyAqLw0KKyAgICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgQVJSQVlfU0laRShoZWFkZXIt
PmJhcnMpOyBpKysgKQ0KKyAgICAgICAgICAgICAgICBpZiAoICFyYW5nZXNldF9pc19lbXB0eSho
ZWFkZXItPmJhcnNbaV0ubWVtKSApDQorICAgICAgICAgICAgICAgICAgICAgcmFuZ2VzZXRfZW1w
dHkoaGVhZGVyLT5iYXJzW2ldLm1lbSk7DQorDQorICAgICAgICAgICAgdi0+dnBjaS5wZGV2ID0g
TlVMTDsNCisNCisgICAgICAgICAgICByZWFkX3VubG9jaygmdi0+ZG9tYWluLT5wY2lfbG9jayk7
DQorDQorICAgICAgICAgICAgaWYgKCAhaXNfaGFyZHdhcmVfZG9tYWluKHYtPmRvbWFpbikgKQ0K
KyAgICAgICAgICAgICAgICBkb21haW5fY3Jhc2godi0+ZG9tYWluKTsNCisNCisgICAgICAgICAg
ICByZXR1cm4gZmFsc2U7DQorICAgICAgICB9DQogICAgIH0NCisgICAgdi0+dnBjaS5wZGV2ID0g
TlVMTDsNCisNCisgICAgc3Bpbl9sb2NrKCZwZGV2LT52cGNpLT5sb2NrKTsNCisgICAgbW9kaWZ5
X2RlY29kaW5nKHBkZXYsIHYtPnZwY2kuY21kLCB2LT52cGNpLnJvbV9vbmx5KTsNCisgICAgc3Bp
bl91bmxvY2soJnBkZXYtPnZwY2ktPmxvY2spOw0KKw0KKyAgICByZWFkX3VubG9jaygmdi0+ZG9t
YWluLT5wY2lfbG9jayk7DQogDQogICAgIHJldHVybiBmYWxzZTsNCiB9DQogDQogc3RhdGljIGlu
dCBfX2luaXQgYXBwbHlfbWFwKHN0cnVjdCBkb21haW4gKmQsIGNvbnN0IHN0cnVjdCBwY2lfZGV2
ICpwZGV2LA0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgcmFuZ2VzZXQgKm1l
bSwgdWludDE2X3QgY21kKQ0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MTZfdCBj
bWQpDQogew0KICAgICBzdHJ1Y3QgbWFwX2RhdGEgZGF0YSA9IHsgLmQgPSBkLCAubWFwID0gdHJ1
ZSB9Ow0KLSAgICBpbnQgcmM7DQorICAgIHN0cnVjdCB2cGNpX2hlYWRlciAqaGVhZGVyID0gJnBk
ZXYtPnZwY2ktPmhlYWRlcjsNCisgICAgaW50IHJjID0gMDsNCisgICAgdW5zaWduZWQgaW50IGk7
DQogDQogICAgIEFTU0VSVChyd19pc193cml0ZV9sb2NrZWQoJmQtPnBjaV9sb2NrKSk7DQogDQot
ICAgIHdoaWxlICggKHJjID0gcmFuZ2VzZXRfY29uc3VtZV9yYW5nZXMobWVtLCBtYXBfcmFuZ2Us
ICZkYXRhKSkgPT0gLUVSRVNUQVJUICkNCisgICAgZm9yICggaSA9IDA7IGkgPCBBUlJBWV9TSVpF
KGhlYWRlci0+YmFycyk7IGkrKyApDQogICAgIHsNCi0gICAgICAgIC8qDQotICAgICAgICAgKiBJ
dCdzIHNhZmUgdG8gZHJvcCBhbmQgcmVhY3F1aXJlIHRoZSBsb2NrIGluIHRoaXMgY29udGV4dA0K
LSAgICAgICAgICogd2l0aG91dCByaXNraW5nIHBkZXYgZGlzYXBwZWFyaW5nIGJlY2F1c2UgZGV2
aWNlcyBjYW5ub3QgYmUNCi0gICAgICAgICAqIHJlbW92ZWQgdW50aWwgdGhlIGluaXRpYWwgZG9t
YWluIGhhcyBiZWVuIHN0YXJ0ZWQuDQotICAgICAgICAgKi8NCi0gICAgICAgIHdyaXRlX3VubG9j
aygmZC0+cGNpX2xvY2spOw0KLSAgICAgICAgcHJvY2Vzc19wZW5kaW5nX3NvZnRpcnFzKCk7DQot
ICAgICAgICB3cml0ZV9sb2NrKCZkLT5wY2lfbG9jayk7DQotICAgIH0NCisgICAgICAgIHN0cnVj
dCB2cGNpX2JhciAqYmFyID0gJmhlYWRlci0+YmFyc1tpXTsNCisNCisgICAgICAgIGlmICggcmFu
Z2VzZXRfaXNfZW1wdHkoYmFyLT5tZW0pICkNCisgICAgICAgICAgICBjb250aW51ZTsNCiANCi0g
ICAgcmFuZ2VzZXRfZGVzdHJveShtZW0pOw0KKyAgICAgICAgd2hpbGUgKCAocmMgPSByYW5nZXNl
dF9jb25zdW1lX3JhbmdlcyhiYXItPm1lbSwgbWFwX3JhbmdlLA0KKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmZGF0YSkpID09IC1FUkVTVEFSVCApDQorICAg
ICAgICB7DQorICAgICAgICAgICAgLyoNCisgICAgICAgICAgICAgKiBJdCdzIHNhZmUgdG8gZHJv
cCBhbmQgcmVhY3F1aXJlIHRoZSBsb2NrIGluIHRoaXMgY29udGV4dA0KKyAgICAgICAgICAgICAq
IHdpdGhvdXQgcmlza2luZyBwZGV2IGRpc2FwcGVhcmluZyBiZWNhdXNlIGRldmljZXMgY2Fubm90
IGJlDQorICAgICAgICAgICAgICogcmVtb3ZlZCB1bnRpbCB0aGUgaW5pdGlhbCBkb21haW4gaGFz
IGJlZW4gc3RhcnRlZC4NCisgICAgICAgICAgICAgKi8NCisgICAgICAgICAgICB3cml0ZV91bmxv
Y2soJmQtPnBjaV9sb2NrKTsNCisgICAgICAgICAgICBwcm9jZXNzX3BlbmRpbmdfc29mdGlycXMo
KTsNCisgICAgICAgICAgICB3cml0ZV9sb2NrKCZkLT5wY2lfbG9jayk7DQorICAgICAgICB9DQor
ICAgIH0NCiAgICAgaWYgKCAhcmMgKQ0KICAgICAgICAgbW9kaWZ5X2RlY29kaW5nKHBkZXYsIGNt
ZCwgZmFsc2UpOw0KIA0KQEAgLTIyNSw3ICsyNjksNyBAQCBzdGF0aWMgaW50IF9faW5pdCBhcHBs
eV9tYXAoc3RydWN0IGRvbWFpbiAqZCwgY29uc3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYsDQogfQ0K
IA0KIHN0YXRpYyB2b2lkIGRlZmVyX21hcChzdHJ1Y3QgZG9tYWluICpkLCBzdHJ1Y3QgcGNpX2Rl
diAqcGRldiwNCi0gICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHJhbmdlc2V0ICptZW0sIHVp
bnQxNl90IGNtZCwgYm9vbCByb21fb25seSkNCisgICAgICAgICAgICAgICAgICAgICAgdWludDE2
X3QgY21kLCBib29sIHJvbV9vbmx5KQ0KIHsNCiAgICAgc3RydWN0IHZjcHUgKmN1cnIgPSBjdXJy
ZW50Ow0KIA0KQEAgLTIzNiw3ICsyODAsNiBAQCBzdGF0aWMgdm9pZCBkZWZlcl9tYXAoc3RydWN0
IGRvbWFpbiAqZCwgc3RydWN0IHBjaV9kZXYgKnBkZXYsDQogICAgICAqIHN0YXJ0ZWQgZm9yIHRo
ZSBzYW1lIGRldmljZSBpZiB0aGUgZG9tYWluIGlzIG5vdCB3ZWxsLWJlaGF2ZWQuDQogICAgICAq
Lw0KICAgICBjdXJyLT52cGNpLnBkZXYgPSBwZGV2Ow0KLSAgICBjdXJyLT52cGNpLm1lbSA9IG1l
bTsNCiAgICAgY3Vyci0+dnBjaS5jbWQgPSBjbWQ7DQogICAgIGN1cnItPnZwY2kucm9tX29ubHkg
PSByb21fb25seTsNCiAgICAgLyoNCkBAIC0yNTAsMzMgKzI5MywzMyBAQCBzdGF0aWMgdm9pZCBk
ZWZlcl9tYXAoc3RydWN0IGRvbWFpbiAqZCwgc3RydWN0IHBjaV9kZXYgKnBkZXYsDQogc3RhdGlj
IGludCBtb2RpZnlfYmFycyhjb25zdCBzdHJ1Y3QgcGNpX2RldiAqcGRldiwgdWludDE2X3QgY21k
LCBib29sIHJvbV9vbmx5KQ0KIHsNCiAgICAgc3RydWN0IHZwY2lfaGVhZGVyICpoZWFkZXIgPSAm
cGRldi0+dnBjaS0+aGVhZGVyOw0KLSAgICBzdHJ1Y3QgcmFuZ2VzZXQgKm1lbSA9IHJhbmdlc2V0
X25ldyhOVUxMLCBOVUxMLCAwKTsNCiAgICAgc3RydWN0IHBjaV9kZXYgKnRtcCwgKmRldiA9IE5V
TEw7DQogICAgIGNvbnN0IHN0cnVjdCBkb21haW4gKmQ7DQogICAgIGNvbnN0IHN0cnVjdCB2cGNp
X21zaXggKm1zaXggPSBwZGV2LT52cGNpLT5tc2l4Ow0KLSAgICB1bnNpZ25lZCBpbnQgaTsNCisg
ICAgdW5zaWduZWQgaW50IGksIGo7DQogICAgIGludCByYzsNCiANCiAgICAgQVNTRVJUKHJ3X2lz
X3dyaXRlX2xvY2tlZCgmcGRldi0+ZG9tYWluLT5wY2lfbG9jaykpOw0KIA0KLSAgICBpZiAoICFt
ZW0gKQ0KLSAgICAgICAgcmV0dXJuIC1FTk9NRU07DQotDQogICAgIC8qDQotICAgICAqIENyZWF0
ZSBhIHJhbmdlc2V0IHRoYXQgcmVwcmVzZW50cyB0aGUgY3VycmVudCBkZXZpY2UgQkFScyBtZW1v
cnkgcmVnaW9uDQotICAgICAqIGFuZCBjb21wYXJlIGl0IGFnYWluc3QgYWxsIHRoZSBjdXJyZW50
bHkgYWN0aXZlIEJBUiBtZW1vcnkgcmVnaW9ucy4gSWYNCi0gICAgICogYW4gb3ZlcmxhcCBpcyBm
b3VuZCwgc3VidHJhY3QgaXQgZnJvbSB0aGUgcmVnaW9uIHRvIGJlIG1hcHBlZC91bm1hcHBlZC4N
CisgICAgICogQ3JlYXRlIGEgcmFuZ2VzZXQgcGVyIEJBUiB0aGF0IHJlcHJlc2VudHMgdGhlIGN1
cnJlbnQgZGV2aWNlIG1lbW9yeQ0KKyAgICAgKiByZWdpb24gYW5kIGNvbXBhcmUgaXQgYWdhaW5z
dCBhbGwgdGhlIGN1cnJlbnRseSBhY3RpdmUgQkFSIG1lbW9yeQ0KKyAgICAgKiByZWdpb25zLiBJ
ZiBhbiBvdmVybGFwIGlzIGZvdW5kLCBzdWJ0cmFjdCBpdCBmcm9tIHRoZSByZWdpb24gdG8gYmUN
CisgICAgICogbWFwcGVkL3VubWFwcGVkLg0KICAgICAgKg0KLSAgICAgKiBGaXJzdCBmaWxsIHRo
ZSByYW5nZXNldCB3aXRoIGFsbCB0aGUgQkFScyBvZiB0aGlzIGRldmljZSBvciB3aXRoIHRoZSBS
T00NCisgICAgICogRmlyc3QgZmlsbCB0aGUgcmFuZ2VzZXRzIHdpdGggdGhlIEJBUiBvZiB0aGlz
IGRldmljZSBvciB3aXRoIHRoZSBST00NCiAgICAgICogQkFSIG9ubHksIGRlcGVuZGluZyBvbiB3
aGV0aGVyIHRoZSBndWVzdCBpcyB0b2dnbGluZyB0aGUgbWVtb3J5IGRlY29kZQ0KICAgICAgKiBi
aXQgb2YgdGhlIGNvbW1hbmQgcmVnaXN0ZXIsIG9yIHRoZSBlbmFibGUgYml0IG9mIHRoZSBST00g
QkFSIHJlZ2lzdGVyLg0KICAgICAgKi8NCiAgICAgZm9yICggaSA9IDA7IGkgPCBBUlJBWV9TSVpF
KGhlYWRlci0+YmFycyk7IGkrKyApDQogICAgIHsNCi0gICAgICAgIGNvbnN0IHN0cnVjdCB2cGNp
X2JhciAqYmFyID0gJmhlYWRlci0+YmFyc1tpXTsNCisgICAgICAgIHN0cnVjdCB2cGNpX2JhciAq
YmFyID0gJmhlYWRlci0+YmFyc1tpXTsNCiAgICAgICAgIHVuc2lnbmVkIGxvbmcgc3RhcnQgPSBQ
Rk5fRE9XTihiYXItPmFkZHIpOw0KICAgICAgICAgdW5zaWduZWQgbG9uZyBlbmQgPSBQRk5fRE9X
TihiYXItPmFkZHIgKyBiYXItPnNpemUgLSAxKTsNCiANCisgICAgICAgIGlmICggIWJhci0+bWVt
ICkNCisgICAgICAgICAgICBjb250aW51ZTsNCisNCiAgICAgICAgIGlmICggIU1BUFBBQkxFX0JB
UihiYXIpIHx8DQogICAgICAgICAgICAgIChyb21fb25seSA/IGJhci0+dHlwZSAhPSBWUENJX0JB
Ul9ST00NCiAgICAgICAgICAgICAgICAgICAgICAgIDogKGJhci0+dHlwZSA9PSBWUENJX0JBUl9S
T00gJiYgIWhlYWRlci0+cm9tX2VuYWJsZWQpKSB8fA0KQEAgLTI5MiwxNCArMzM1LDMxIEBAIHN0
YXRpYyBpbnQgbW9kaWZ5X2JhcnMoY29uc3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYsIHVpbnQxNl90
IGNtZCwgYm9vbCByb21fb25seSkNCiAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgIH0N
CiANCi0gICAgICAgIHJjID0gcmFuZ2VzZXRfYWRkX3JhbmdlKG1lbSwgc3RhcnQsIGVuZCk7DQor
ICAgICAgICByYyA9IHJhbmdlc2V0X2FkZF9yYW5nZShiYXItPm1lbSwgc3RhcnQsIGVuZCk7DQog
ICAgICAgICBpZiAoIHJjICkNCiAgICAgICAgIHsNCiAgICAgICAgICAgICBwcmludGsoWEVOTE9H
X0dfV0FSTklORyAiRmFpbGVkIHRvIGFkZCBbJWx4LCAlbHhdOiAlZFxuIiwNCiAgICAgICAgICAg
ICAgICAgICAgc3RhcnQsIGVuZCwgcmMpOw0KLSAgICAgICAgICAgIHJhbmdlc2V0X2Rlc3Ryb3ko
bWVtKTsNCiAgICAgICAgICAgICByZXR1cm4gcmM7DQogICAgICAgICB9DQorDQorICAgICAgICAv
KiBDaGVjayBmb3Igb3ZlcmxhcCB3aXRoIHRoZSBhbHJlYWR5IHNldHVwIEJBUiByYW5nZXMuICov
DQorICAgICAgICBmb3IgKCBqID0gMDsgaiA8IGk7IGorKyApDQorICAgICAgICB7DQorICAgICAg
ICAgICAgc3RydWN0IHZwY2lfYmFyICpwcmV2X2JhciA9ICZoZWFkZXItPmJhcnNbal07DQorDQor
ICAgICAgICAgICAgaWYgKCByYW5nZXNldF9pc19lbXB0eShwcmV2X2Jhci0+bWVtKSApDQorICAg
ICAgICAgICAgICAgIGNvbnRpbnVlOw0KKw0KKyAgICAgICAgICAgIHJjID0gcmFuZ2VzZXRfcmVt
b3ZlX3JhbmdlKHByZXZfYmFyLT5tZW0sIHN0YXJ0LCBlbmQpOw0KKyAgICAgICAgICAgIGlmICgg
cmMgKQ0KKyAgICAgICAgICAgIHsNCisgICAgICAgICAgICAgICAgZ3ByaW50ayhYRU5MT0dfV0FS
TklORywNCisgICAgICAgICAgICAgICAgICAgICAgICIlcHA6IGZhaWxlZCB0byByZW1vdmUgb3Zl
cmxhcHBpbmcgcmFuZ2UgWyVseCwgJWx4XTogJWRcbiIsDQorICAgICAgICAgICAgICAgICAgICAg
ICAgJnBkZXYtPnNiZGYsIHN0YXJ0LCBlbmQsIHJjKTsNCisgICAgICAgICAgICAgICAgcmV0dXJu
IHJjOw0KKyAgICAgICAgICAgIH0NCisgICAgICAgIH0NCiAgICAgfQ0KIA0KICAgICAvKiBSZW1v
dmUgYW55IE1TSVggcmVnaW9ucyBpZiBwcmVzZW50LiAqLw0KQEAgLTMwOSwxNCArMzY5LDIxIEBA
IHN0YXRpYyBpbnQgbW9kaWZ5X2JhcnMoY29uc3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYsIHVpbnQx
Nl90IGNtZCwgYm9vbCByb21fb25seSkNCiAgICAgICAgIHVuc2lnbmVkIGxvbmcgZW5kID0gUEZO
X0RPV04odm1zaXhfdGFibGVfYWRkcihwZGV2LT52cGNpLCBpKSArDQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHZtc2l4X3RhYmxlX3NpemUocGRldi0+dnBjaSwgaSkgLSAx
KTsNCiANCi0gICAgICAgIHJjID0gcmFuZ2VzZXRfcmVtb3ZlX3JhbmdlKG1lbSwgc3RhcnQsIGVu
ZCk7DQotICAgICAgICBpZiAoIHJjICkNCisgICAgICAgIGZvciAoIGogPSAwOyBqIDwgQVJSQVlf
U0laRShoZWFkZXItPmJhcnMpOyBqKysgKQ0KICAgICAgICAgew0KLSAgICAgICAgICAgIHByaW50
ayhYRU5MT0dfR19XQVJOSU5HDQotICAgICAgICAgICAgICAgICAgICJGYWlsZWQgdG8gcmVtb3Zl
IE1TSVggdGFibGUgWyVseCwgJWx4XTogJWRcbiIsDQotICAgICAgICAgICAgICAgICAgIHN0YXJ0
LCBlbmQsIHJjKTsNCi0gICAgICAgICAgICByYW5nZXNldF9kZXN0cm95KG1lbSk7DQotICAgICAg
ICAgICAgcmV0dXJuIHJjOw0KKyAgICAgICAgICAgIGNvbnN0IHN0cnVjdCB2cGNpX2JhciAqYmFy
ID0gJmhlYWRlci0+YmFyc1tqXTsNCisNCisgICAgICAgICAgICBpZiAoIHJhbmdlc2V0X2lzX2Vt
cHR5KGJhci0+bWVtKSApDQorICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KKw0KKyAgICAgICAg
ICAgIHJjID0gcmFuZ2VzZXRfcmVtb3ZlX3JhbmdlKGJhci0+bWVtLCBzdGFydCwgZW5kKTsNCisg
ICAgICAgICAgICBpZiAoIHJjICkNCisgICAgICAgICAgICB7DQorICAgICAgICAgICAgICAgIGdw
cmludGsoWEVOTE9HX1dBUk5JTkcsDQorICAgICAgICAgICAgICAgICAgICAgICAiJXBwOiBmYWls
ZWQgdG8gcmVtb3ZlIE1TSVggdGFibGUgWyVseCwgJWx4XTogJWRcbiIsDQorICAgICAgICAgICAg
ICAgICAgICAgICAgJnBkZXYtPnNiZGYsIHN0YXJ0LCBlbmQsIHJjKTsNCisgICAgICAgICAgICAg
ICAgcmV0dXJuIHJjOw0KKyAgICAgICAgICAgIH0NCiAgICAgICAgIH0NCiAgICAgfQ0KIA0KQEAg
LTM1NiwyNyArNDIzLDM3IEBAIHN0YXRpYyBpbnQgbW9kaWZ5X2JhcnMoY29uc3Qgc3RydWN0IHBj
aV9kZXYgKnBkZXYsIHVpbnQxNl90IGNtZCwgYm9vbCByb21fb25seSkNCiANCiAgICAgICAgICAg
ICBmb3IgKCBpID0gMDsgaSA8IEFSUkFZX1NJWkUodG1wLT52cGNpLT5oZWFkZXIuYmFycyk7IGkr
KyApDQogICAgICAgICAgICAgew0KLSAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgdnBjaV9i
YXIgKmJhciA9ICZ0bXAtPnZwY2ktPmhlYWRlci5iYXJzW2ldOw0KLSAgICAgICAgICAgICAgICB1
bnNpZ25lZCBsb25nIHN0YXJ0ID0gUEZOX0RPV04oYmFyLT5hZGRyKTsNCi0gICAgICAgICAgICAg
ICAgdW5zaWduZWQgbG9uZyBlbmQgPSBQRk5fRE9XTihiYXItPmFkZHIgKyBiYXItPnNpemUgLSAx
KTsNCi0NCi0gICAgICAgICAgICAgICAgaWYgKCAhYmFyLT5lbmFibGVkIHx8DQotICAgICAgICAg
ICAgICAgICAgICAgIXJhbmdlc2V0X292ZXJsYXBzX3JhbmdlKG1lbSwgc3RhcnQsIGVuZCkgfHwN
Ci0gICAgICAgICAgICAgICAgICAgICAvKg0KLSAgICAgICAgICAgICAgICAgICAgICAqIElmIG9u
bHkgdGhlIFJPTSBlbmFibGUgYml0IGlzIHRvZ2dsZWQgY2hlY2sgYWdhaW5zdA0KLSAgICAgICAg
ICAgICAgICAgICAgICAqIG90aGVyIEJBUnMgaW4gdGhlIHNhbWUgZGV2aWNlIGZvciBvdmVybGFw
cywgYnV0IG5vdA0KLSAgICAgICAgICAgICAgICAgICAgICAqIGFnYWluc3QgdGhlIHNhbWUgUk9N
IEJBUi4NCi0gICAgICAgICAgICAgICAgICAgICAgKi8NCi0gICAgICAgICAgICAgICAgICAgICAo
cm9tX29ubHkgJiYgdG1wID09IHBkZXYgJiYgYmFyLT50eXBlID09IFZQQ0lfQkFSX1JPTSkgKQ0K
KyAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgdnBjaV9iYXIgKnJlbW90ZV9iYXIgPSAmdG1w
LT52cGNpLT5oZWFkZXIuYmFyc1tpXTsNCisgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBz
dGFydCA9IFBGTl9ET1dOKHJlbW90ZV9iYXItPmFkZHIpOw0KKyAgICAgICAgICAgICAgICB1bnNp
Z25lZCBsb25nIGVuZCA9IFBGTl9ET1dOKHJlbW90ZV9iYXItPmFkZHIgKw0KKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZV9iYXItPnNpemUgLSAxKTsN
CisNCisgICAgICAgICAgICAgICAgaWYgKCAhcmVtb3RlX2Jhci0+ZW5hYmxlZCApDQogICAgICAg
ICAgICAgICAgICAgICBjb250aW51ZTsNCiANCi0gICAgICAgICAgICAgICAgcmMgPSByYW5nZXNl
dF9yZW1vdmVfcmFuZ2UobWVtLCBzdGFydCwgZW5kKTsNCi0gICAgICAgICAgICAgICAgaWYgKCBy
YyApDQorICAgICAgICAgICAgICAgIGZvciAoIGogPSAwOyBqIDwgQVJSQVlfU0laRShoZWFkZXIt
PmJhcnMpOyBqKyspDQogICAgICAgICAgICAgICAgIHsNCi0gICAgICAgICAgICAgICAgICAgIHBy
aW50ayhYRU5MT0dfR19XQVJOSU5HICJGYWlsZWQgdG8gcmVtb3ZlIFslbHgsICVseF06ICVkXG4i
LA0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0LCBlbmQsIHJjKTsNCi0gICAgICAg
ICAgICAgICAgICAgIHJhbmdlc2V0X2Rlc3Ryb3kobWVtKTsNCi0gICAgICAgICAgICAgICAgICAg
IHJldHVybiByYzsNCisgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCB2cGNpX2JhciAq
YmFyID0gJmhlYWRlci0+YmFyc1tqXTsNCisNCisgICAgICAgICAgICAgICAgICAgIGlmICggIXJh
bmdlc2V0X292ZXJsYXBzX3JhbmdlKGJhci0+bWVtLCBzdGFydCwgZW5kKSB8fA0KKyAgICAgICAg
ICAgICAgICAgICAgICAgICAvKg0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgKiBJZiBvbmx5
IHRoZSBST00gZW5hYmxlIGJpdCBpcyB0b2dnbGVkIGNoZWNrIGFnYWluc3QNCisgICAgICAgICAg
ICAgICAgICAgICAgICAgICogb3RoZXIgQkFScyBpbiB0aGUgc2FtZSBkZXZpY2UgZm9yIG92ZXJs
YXBzLCBidXQgbm90DQorICAgICAgICAgICAgICAgICAgICAgICAgICAqIGFnYWluc3QgdGhlIHNh
bWUgUk9NIEJBUi4NCisgICAgICAgICAgICAgICAgICAgICAgICAgICovDQorICAgICAgICAgICAg
ICAgICAgICAgICAgIChyb21fb25seSAmJg0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgdG1w
ID09IHBkZXYgJiYNCisgICAgICAgICAgICAgICAgICAgICAgICAgIGJhci0+dHlwZSA9PSBWUENJ
X0JBUl9ST00pICkNCisgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCisNCisgICAg
ICAgICAgICAgICAgICAgIHJjID0gcmFuZ2VzZXRfcmVtb3ZlX3JhbmdlKGJhci0+bWVtLCBzdGFy
dCwgZW5kKTsNCisgICAgICAgICAgICAgICAgICAgIGlmICggcmMgKQ0KKyAgICAgICAgICAgICAg
ICAgICAgew0KKyAgICAgICAgICAgICAgICAgICAgICAgIGdwcmludGsoWEVOTE9HX1dBUk5JTkcs
DQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJXBwOiBmYWlsZWQgdG8gcmVtb3Zl
IFslbHgsICVseF06ICVkXG4iLA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnBk
ZXYtPnNiZGYsIHN0YXJ0LCBlbmQsIHJjKTsNCisgICAgICAgICAgICAgICAgICAgICAgICByZXR1
cm4gcmM7DQorICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgIH0NCiAgICAg
ICAgICAgICB9DQogICAgICAgICB9DQpAQCAtNDAwLDEwICs0NzcsMTAgQEAgc3RhdGljIGludCBt
b2RpZnlfYmFycyhjb25zdCBzdHJ1Y3QgcGNpX2RldiAqcGRldiwgdWludDE2X3QgY21kLCBib29s
IHJvbV9vbmx5KQ0KICAgICAgICAgICogd2lsbCBhbHdheXMgYmUgdG8gZXN0YWJsaXNoIG1hcHBp
bmdzIGFuZCBwcm9jZXNzIGFsbCB0aGUgQkFScy4NCiAgICAgICAgICAqLw0KICAgICAgICAgQVNT
RVJUKChjbWQgJiBQQ0lfQ09NTUFORF9NRU1PUlkpICYmICFyb21fb25seSk7DQotICAgICAgICBy
ZXR1cm4gYXBwbHlfbWFwKHBkZXYtPmRvbWFpbiwgcGRldiwgbWVtLCBjbWQpOw0KKyAgICAgICAg
cmV0dXJuIGFwcGx5X21hcChwZGV2LT5kb21haW4sIHBkZXYsIGNtZCk7DQogICAgIH0NCiANCi0g
ICAgZGVmZXJfbWFwKGRldi0+ZG9tYWluLCBkZXYsIG1lbSwgY21kLCByb21fb25seSk7DQorICAg
IGRlZmVyX21hcChkZXYtPmRvbWFpbiwgZGV2LCBjbWQsIHJvbV9vbmx5KTsNCiANCiAgICAgcmV0
dXJuIDA7DQogfQ0KQEAgLTU5OCw2ICs2NzUsMTggQEAgc3RhdGljIHZvaWQgY2ZfY2hlY2sgcm9t
X3dyaXRlKA0KICAgICAgICAgcm9tLT5hZGRyID0gdmFsICYgUENJX1JPTV9BRERSRVNTX01BU0s7
DQogfQ0KIA0KK3N0YXRpYyBpbnQgYmFyX2FkZF9yYW5nZXNldChjb25zdCBzdHJ1Y3QgcGNpX2Rl
diAqcGRldiwgc3RydWN0IHZwY2lfYmFyICpiYXIsDQorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHVuc2lnbmVkIGludCBpKQ0KK3sNCisgICAgY2hhciBzdHJbMzJdOw0KKw0KKyAgICBzbnBy
aW50ZihzdHIsIHNpemVvZihzdHIpLCAiJXBwOkJBUiV1IiwgJnBkZXYtPnNiZGYsIGkpOw0KKw0K
KyAgICBiYXItPm1lbSA9IHJhbmdlc2V0X25ldyhwZGV2LT5kb21haW4sIHN0ciwgUkFOR0VTRVRG
X25vX3ByaW50KTsNCisNCisgICAgcmV0dXJuICFiYXItPm1lbSA/IC1FTk9NRU0gOiAwOw0KK30N
CisNCiBzdGF0aWMgaW50IGNmX2NoZWNrIGluaXRfYmFycyhzdHJ1Y3QgcGNpX2RldiAqcGRldikN
CiB7DQogICAgIHVpbnQxNl90IGNtZDsNCkBAIC02NzksNiArNzY4LDEwIEBAIHN0YXRpYyBpbnQg
Y2ZfY2hlY2sgaW5pdF9iYXJzKHN0cnVjdCBwY2lfZGV2ICpwZGV2KQ0KICAgICAgICAgZWxzZQ0K
ICAgICAgICAgICAgIGJhcnNbaV0udHlwZSA9IFZQQ0lfQkFSX01FTTMyOw0KIA0KKyAgICAgICAg
cmMgPSBiYXJfYWRkX3Jhbmdlc2V0KHBkZXYsICZiYXJzW2ldLCBpKTsNCisgICAgICAgIGlmICgg
cmMgKQ0KKyAgICAgICAgICAgIGdvdG8gZmFpbDsNCisNCiAgICAgICAgIHJjID0gcGNpX3NpemVf
bWVtX2JhcihwZGV2LT5zYmRmLCByZWcsICZhZGRyLCAmc2l6ZSwNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAoaSA9PSBudW1fYmFycyAtIDEpID8gUENJX0JBUl9MQVNUIDogMCk7DQog
ICAgICAgICBpZiAoIHJjIDwgMCApDQpAQCAtNzI4LDYgKzgyMSwxMiBAQCBzdGF0aWMgaW50IGNm
X2NoZWNrIGluaXRfYmFycyhzdHJ1Y3QgcGNpX2RldiAqcGRldikNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHJvbV9yZWcsIDQsIHJvbSk7DQogICAgICAgICAgICAgaWYgKCBy
YyApDQogICAgICAgICAgICAgICAgIHJvbS0+dHlwZSA9IFZQQ0lfQkFSX0VNUFRZOw0KKyAgICAg
ICAgICAgIGVsc2UNCisgICAgICAgICAgICB7DQorICAgICAgICAgICAgICAgIHJjID0gYmFyX2Fk
ZF9yYW5nZXNldChwZGV2LCByb20sIGkpOw0KKyAgICAgICAgICAgICAgICBpZiAoIHJjICkNCisg
ICAgICAgICAgICAgICAgICAgIGdvdG8gZmFpbDsNCisgICAgICAgICAgICB9DQogICAgICAgICB9
DQogICAgIH0NCiAgICAgZWxzZQ0KZGlmZiAtLWdpdCBhL3hlbi9kcml2ZXJzL3ZwY2kvdnBjaS5j
IGIveGVuL2RyaXZlcnMvdnBjaS92cGNpLmMNCmluZGV4IDlkYWNiY2Y5NTguLjg4NjVjMTU4MGUg
MTAwNjQ0DQotLS0gYS94ZW4vZHJpdmVycy92cGNpL3ZwY2kuYw0KKysrIGIveGVuL2RyaXZlcnMv
dnBjaS92cGNpLmMNCkBAIC0zOCw2ICszOCw4IEBAIGV4dGVybiB2cGNpX3JlZ2lzdGVyX2luaXRf
dCAqY29uc3QgX19lbmRfdnBjaV9hcnJheVtdOw0KIA0KIHZvaWQgdnBjaV9kZWFzc2lnbl9kZXZp
Y2Uoc3RydWN0IHBjaV9kZXYgKnBkZXYpDQogew0KKyAgICB1bnNpZ25lZCBpbnQgaTsNCisNCiAg
ICAgQVNTRVJUKHJ3X2lzX3dyaXRlX2xvY2tlZCgmcGRldi0+ZG9tYWluLT5wY2lfbG9jaykpOw0K
IA0KICAgICBpZiAoICFoYXNfdnBjaShwZGV2LT5kb21haW4pIHx8ICFwZGV2LT52cGNpICkNCkBA
IC02Myw2ICs2NSwxMCBAQCB2b2lkIHZwY2lfZGVhc3NpZ25fZGV2aWNlKHN0cnVjdCBwY2lfZGV2
ICpwZGV2KQ0KICAgICAgICAgICAgIGlmICggcGRldi0+dnBjaS0+bXNpeC0+dGFibGVbaV0gKQ0K
ICAgICAgICAgICAgICAgICBpb3VubWFwKHBkZXYtPnZwY2ktPm1zaXgtPnRhYmxlW2ldKTsNCiAg
ICAgfQ0KKw0KKyAgICBmb3IgKCBpID0gMDsgaSA8IEFSUkFZX1NJWkUocGRldi0+dnBjaS0+aGVh
ZGVyLmJhcnMpOyBpKysgKQ0KKyAgICAgICAgcmFuZ2VzZXRfZGVzdHJveShwZGV2LT52cGNpLT5o
ZWFkZXIuYmFyc1tpXS5tZW0pOw0KKw0KICAgICB4ZnJlZShwZGV2LT52cGNpLT5tc2l4KTsNCiAg
ICAgeGZyZWUocGRldi0+dnBjaS0+bXNpKTsNCiAgICAgeGZyZWUocGRldi0+dnBjaSk7DQpkaWZm
IC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL3ZwY2kuaCBiL3hlbi9pbmNsdWRlL3hlbi92cGNpLmgN
CmluZGV4IDIwMjhmMjE1MWYuLjE4YTBlY2EzZGEgMTAwNjQ0DQotLS0gYS94ZW4vaW5jbHVkZS94
ZW4vdnBjaS5oDQorKysgYi94ZW4vaW5jbHVkZS94ZW4vdnBjaS5oDQpAQCAtNzIsNiArNzIsNyBA
QCBzdHJ1Y3QgdnBjaSB7DQogICAgICAgICAgICAgLyogR3Vlc3QgYWRkcmVzcy4gKi8NCiAgICAg
ICAgICAgICB1aW50NjRfdCBndWVzdF9hZGRyOw0KICAgICAgICAgICAgIHVpbnQ2NF90IHNpemU7
DQorICAgICAgICAgICAgc3RydWN0IHJhbmdlc2V0ICptZW07DQogICAgICAgICAgICAgZW51bSB7
DQogICAgICAgICAgICAgICAgIFZQQ0lfQkFSX0VNUFRZLA0KICAgICAgICAgICAgICAgICBWUENJ
X0JBUl9JTywNCkBAIC0xNTYsNyArMTU3LDYgQEAgc3RydWN0IHZwY2kgew0KIA0KIHN0cnVjdCB2
cGNpX3ZjcHUgew0KICAgICAvKiBQZXItdmNwdSBzdHJ1Y3R1cmUgdG8gc3RvcmUgc3RhdGUgd2hp
bGUge3VufW1hcHBpbmcgb2YgUENJIEJBUnMuICovDQotICAgIHN0cnVjdCByYW5nZXNldCAqbWVt
Ow0KICAgICBzdHJ1Y3QgcGNpX2RldiAqcGRldjsNCiAgICAgdWludDE2X3QgY21kOw0KICAgICBi
b29sIHJvbV9vbmx5IDogMTsNCi0tIA0KMi40Mi4wDQo=


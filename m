Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 433EFB04C8
	for <lists+xen-devel@lfdr.de>; Wed, 11 Sep 2019 22:11:06 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i88ra-0002zR-Tw; Wed, 11 Sep 2019 20:05:14 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=L0xq=XG=citrix.com=andrew.cooper3@srs-us1.protection.inumbo.net>)
 id 1i88rZ-0002zH-79
 for xen-devel@lists.xenproject.org; Wed, 11 Sep 2019 20:05:13 +0000
X-Inumbo-ID: 75c8370a-d4cf-11e9-83dd-12813bfff9fa
Received: from esa1.hc3370-68.iphmx.com (unknown [216.71.145.142])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 75c8370a-d4cf-11e9-83dd-12813bfff9fa;
 Wed, 11 Sep 2019 20:05:11 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1568232312;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=EFnsOsGQ4CPWA4IpIutS5XNwHkOuU3XzDAJN+8JtXFE=;
 b=YbKccwAAGmDdc8ERovwskz35zz4e2pkORTXYvm8O1jCHHnMeZhSt/apD
 Rgw8Hi2HTiGtmzhNKp3yy7u0uj4v5mOsENIHTlIxkNrxmVGUntxJ/wNja
 iMWfkMqQ7ylTW4XbMl8YZNoihEKGvEFMJ63rPdWlvxeEzVCzuLYlPRc2F w=;
Authentication-Results: esa1.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=andrew.cooper3@citrix.com;
 spf=Pass smtp.mailfrom=Andrew.Cooper3@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa1.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 andrew.cooper3@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="andrew.cooper3@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: Pass (esa1.hc3370-68.iphmx.com: domain of
 Andrew.Cooper3@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="Andrew.Cooper3@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83 ~all"
Received-SPF: None (esa1.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: YdciJxz1xjqXtNIFvRyhJYBA30Mpis1j+EWu6jaHRfWCr2CVwDOHUQhafHIvkXU9w3ZJ0vrQqW
 rbFisIEQmUjzH6x3Rr3eThDKgCfyz2E0UKyKiu0B6UqT1WBEhnkKdeX5umxGj/UqVbgDvLlQj4
 72qZoyk8PJpiKEbYVoTgv64WrrK4z4eOb29TSQSKDN5JPu9JeO77heVhI4nlEVDJ6crNMmq2Kl
 CY14KFXUqToEqwCi3cwnNoIGAo+JGe6sAOa4rRNrremsFvpjqJ4/tQPXfkAO74hLaifhmCHc9K
 gOE=
X-SBRS: 2.7
X-MesageID: 5506243
X-Ironport-Server: esa1.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.64,494,1559534400"; 
   d="scan'208";a="5506243"
From: Andrew Cooper <andrew.cooper3@citrix.com>
To: Xen-devel <xen-devel@lists.xenproject.org>
Date: Wed, 11 Sep 2019 21:04:57 +0100
Message-ID: <20190911200504.5693-2-andrew.cooper3@citrix.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20190911200504.5693-1-andrew.cooper3@citrix.com>
References: <20190911200504.5693-1-andrew.cooper3@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH 1/8] libx86: Introduce
 x86_cpu_policies_are_compatible()
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>, Wei Liu <wl@xen.org>,
 Jan Beulich <JBeulich@suse.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBoZWxwZXIgd2lsbCBldmVudHVhbGx5IGJlIHRoZSBjb3JlICJjYW4gYSBndWVzdCBjb25m
aXVyZWQgbGlrZSB0aGlzIHJ1bgpvbiB0aGUgQ1BVPyIgbG9naWMuICBGb3Igbm93LCBpdCBpcyBq
dXN0IGVub3VnaCBvZiBhIHN0dWIgdG8gYWxsb3cgdXMgdG8KcmVwbGFjZSB0aGUgaHlwZXJjYWxs
IGludGVyZmFjZSB3aGlsZSByZXRhaW5pbmcgdGhlIHByZXZpb3VzIGJlaGF2aW91ci4KCkl0IHdp
bGwgYmUgZXhwYW5kZWQgYXMgdmFyaW91cyBvdGhlciBiaXRzIG9mIENQVUlEIGhhbmRsaW5nIGdl
dCBjbGVhbmVkIHVwLgoKU2lnbmVkLW9mZi1ieTogQW5kcmV3IENvb3BlciA8YW5kcmV3LmNvb3Bl
cjNAY2l0cml4LmNvbT4KLS0tCkNDOiBKYW4gQmV1bGljaCA8SkJldWxpY2hAc3VzZS5jb20+CkND
OiBXZWkgTGl1IDx3bEB4ZW4ub3JnPgpDQzogUm9nZXIgUGF1IE1vbm7DqSA8cm9nZXIucGF1QGNp
dHJpeC5jb20+Ci0tLQogdG9vbHMvdGVzdHMvY3B1LXBvbGljeS9NYWtlZmlsZSAgICAgICAgICB8
ICAgMiArLQogdG9vbHMvdGVzdHMvY3B1LXBvbGljeS90ZXN0LWNwdS1wb2xpY3kuYyB8IDExMSAr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKystCiB4ZW4vaW5jbHVkZS94ZW4vbGliL3g4Ni9j
cHUtcG9saWN5LmggICAgIHwgIDE5ICsrKysrKwogeGVuL2xpYi94ODYvTWFrZWZpbGUgICAgICAg
ICAgICAgICAgICAgICB8ICAgMSArCiB4ZW4vbGliL3g4Ni9wb2xpY3kuYyAgICAgICAgICAgICAg
ICAgICAgIHwgIDUzICsrKysrKysrKysrKysrKwogNSBmaWxlcyBjaGFuZ2VkLCAxODMgaW5zZXJ0
aW9ucygrKSwgMyBkZWxldGlvbnMoLSkKIGNyZWF0ZSBtb2RlIDEwMDY0NCB4ZW4vbGliL3g4Ni9w
b2xpY3kuYwoKZGlmZiAtLWdpdCBhL3Rvb2xzL3Rlc3RzL2NwdS1wb2xpY3kvTWFrZWZpbGUgYi90
b29scy90ZXN0cy9jcHUtcG9saWN5L01ha2VmaWxlCmluZGV4IGZiNTQ4YzliOWEuLjcwZmYxNTRk
YTYgMTAwNjQ0Ci0tLSBhL3Rvb2xzL3Rlc3RzL2NwdS1wb2xpY3kvTWFrZWZpbGUKKysrIGIvdG9v
bHMvdGVzdHMvY3B1LXBvbGljeS9NYWtlZmlsZQpAQCAtMzksNyArMzksNyBAQCBDRkxBR1MgKz0g
JChBUFBFTkRfQ0ZMQUdTKQogCiB2cGF0aCAlLmMgLi4vLi4vLi4veGVuL2xpYi94ODYKIAotdGVz
dC1jcHUtcG9saWN5OiB0ZXN0LWNwdS1wb2xpY3kubyBtc3IubyBjcHVpZC5vCit0ZXN0LWNwdS1w
b2xpY3k6IHRlc3QtY3B1LXBvbGljeS5vIG1zci5vIGNwdWlkLm8gcG9saWN5Lm8KIAkkKENDKSAk
KENGTEFHUykgJF4gLW8gJEAKIAogLWluY2x1ZGUgJChERVBTX0lOQ0xVREUpCmRpZmYgLS1naXQg
YS90b29scy90ZXN0cy9jcHUtcG9saWN5L3Rlc3QtY3B1LXBvbGljeS5jIGIvdG9vbHMvdGVzdHMv
Y3B1LXBvbGljeS90ZXN0LWNwdS1wb2xpY3kuYwppbmRleCBmZTAwY2Q0Mjc2Li4xMGNmYTdjZDk3
IDEwMDY0NAotLS0gYS90b29scy90ZXN0cy9jcHUtcG9saWN5L3Rlc3QtY3B1LXBvbGljeS5jCisr
KyBiL3Rvb2xzL3Rlc3RzL2NwdS1wb2xpY3kvdGVzdC1jcHUtcG9saWN5LmMKQEAgLTksOCArOSw3
IEBACiAKICNpbmNsdWRlIDx4ZW4tdG9vbHMvbGlicy5oPgogI2luY2x1ZGUgPHhlbi9hc20veDg2
LXZlbmRvcnMuaD4KLSNpbmNsdWRlIDx4ZW4vbGliL3g4Ni9jcHVpZC5oPgotI2luY2x1ZGUgPHhl
bi9saWIveDg2L21zci5oPgorI2luY2x1ZGUgPHhlbi9saWIveDg2L2NwdS1wb2xpY3kuaD4KICNp
bmNsdWRlIDx4ZW4vZG9tY3RsLmg+CiAKIHN0YXRpYyB1bnNpZ25lZCBpbnQgbnJfZmFpbHVyZXM7
CkBAIC01MDMsNiArNTAyLDExMSBAQCBzdGF0aWMgdm9pZCB0ZXN0X2NwdWlkX291dF9vZl9yYW5n
ZV9jbGVhcmluZyh2b2lkKQogICAgIH0KIH0KIAorc3RhdGljIHZvaWQgdGVzdF9pc19jb21wYXRp
YmxlX3N1Y2Nlc3Modm9pZCkKK3sKKyAgICBzdGF0aWMgc3RydWN0IHRlc3QgeworICAgICAgICBj
b25zdCBjaGFyICpuYW1lOworICAgICAgICBzdHJ1Y3QgY3B1aWRfcG9saWN5IGhvc3RfY3B1aWQ7
CisgICAgICAgIHN0cnVjdCBjcHVpZF9wb2xpY3kgZ3Vlc3RfY3B1aWQ7CisgICAgICAgIHN0cnVj
dCBtc3JfcG9saWN5IGhvc3RfbXNyOworICAgICAgICBzdHJ1Y3QgbXNyX3BvbGljeSBndWVzdF9t
c3I7CisgICAgfSB0ZXN0c1tdID0geworICAgICAgICB7CisgICAgICAgICAgICAubmFtZSA9ICJI
b3N0IENQVUlEIGZhdWx0aW5nLCBHdWVzdCBub3QiLAorICAgICAgICAgICAgLmhvc3RfbXNyID0g
eworICAgICAgICAgICAgICAgIC5wbGFmb3JtX2luZm8uY3B1aWRfZmF1bHRpbmcgPSB0cnVlLAor
ICAgICAgICAgICAgfSwKKyAgICAgICAgfSwKKyAgICAgICAgeworICAgICAgICAgICAgLm5hbWUg
PSAiSG9zdCBDUFVJRCBmYXVsdGluZywgR3Vlc3Qgd2FudGVkIiwKKyAgICAgICAgICAgIC5ob3N0
X21zciA9IHsKKyAgICAgICAgICAgICAgICAucGxhZm9ybV9pbmZvLmNwdWlkX2ZhdWx0aW5nID0g
dHJ1ZSwKKyAgICAgICAgICAgIH0sCisgICAgICAgICAgICAuZ3Vlc3RfbXNyID0geworICAgICAg
ICAgICAgICAgIC5wbGFmb3JtX2luZm8uY3B1aWRfZmF1bHRpbmcgPSB0cnVlLAorICAgICAgICAg
ICAgfSwKKyAgICAgICAgfSwKKyAgICB9OworICAgIHN0cnVjdCBjcHVfcG9saWN5X2Vycm9ycyBu
b19lcnJvcnMgPSBJTklUX0NQVV9QT0xJQ1lfRVJST1JTOworCisgICAgcHJpbnRmKCJUZXN0aW5n
IHBvbGljeSBjb21wYXRpYmlsaXR5IHN1Y2Nlc3M6XG4iKTsKKworICAgIGZvciAoIHNpemVfdCBp
ID0gMDsgaSA8IEFSUkFZX1NJWkUodGVzdHMpOyArK2kgKQorICAgIHsKKyAgICAgICAgc3RydWN0
IHRlc3QgKnQgPSAmdGVzdHNbaV07CisgICAgICAgIHN0cnVjdCBjcHVfcG9saWN5IHN5cyA9IHsK
KyAgICAgICAgICAgICZ0LT5ob3N0X2NwdWlkLAorICAgICAgICAgICAgJnQtPmhvc3RfbXNyLAor
ICAgICAgICB9LCBuZXcgPSB7CisgICAgICAgICAgICAmdC0+Z3Vlc3RfY3B1aWQsCisgICAgICAg
ICAgICAmdC0+Z3Vlc3RfbXNyLAorICAgICAgICB9OworICAgICAgICBzdHJ1Y3QgY3B1X3BvbGlj
eV9lcnJvcnMgZSA9IElOSVRfQ1BVX1BPTElDWV9FUlJPUlM7CisgICAgICAgIGludCByZXMgPSB4
ODZfY3B1X3BvbGljaWVzX2FyZV9jb21wYXRpYmxlKCZzeXMsICZuZXcsICZlKTsKKworICAgICAg
ICAvKiBDaGVjayB0aGUgZXhwZWN0ZWQgZXJyb3Igb3V0cHV0LiAqLworICAgICAgICBpZiAoIHJl
cyAhPSAwIHx8IG1lbWNtcCgmbm9fZXJyb3JzLCAmZSwgc2l6ZW9mKG5vX2Vycm9ycykpICkKKyAg
ICAgICAgICAgIGZhaWwoIiAgVGVzdCAnJXMnIGV4cGVjdGVkIG5vIGVycm9yc1xuIgorICAgICAg
ICAgICAgICAgICAiICAgIGdvdCByZXMgJWQgeyBsZWFmICUwOHgsIHN1YmxlYWYgJTA4eCwgbXNy
ICUwOHggfVxuIiwKKyAgICAgICAgICAgICAgICAgdC0+bmFtZSwgcmVzLCBlLmxlYWYsIGUuc3Vi
bGVhZiwgZS5tc3IpOworICAgIH0KK30KKworc3RhdGljIHZvaWQgdGVzdF9pc19jb21wYXRpYmxl
X2ZhaWx1cmUodm9pZCkKK3sKKyAgICBzdGF0aWMgc3RydWN0IHRlc3QgeworICAgICAgICBjb25z
dCBjaGFyICpuYW1lOworICAgICAgICBzdHJ1Y3QgY3B1aWRfcG9saWN5IGhvc3RfY3B1aWQ7Cisg
ICAgICAgIHN0cnVjdCBjcHVpZF9wb2xpY3kgZ3Vlc3RfY3B1aWQ7CisgICAgICAgIHN0cnVjdCBt
c3JfcG9saWN5IGhvc3RfbXNyOworICAgICAgICBzdHJ1Y3QgbXNyX3BvbGljeSBndWVzdF9tc3I7
CisgICAgICAgIHN0cnVjdCBjcHVfcG9saWN5X2Vycm9ycyBlOworICAgIH0gdGVzdHNbXSA9IHsK
KyAgICAgICAgeworICAgICAgICAgICAgLm5hbWUgPSAiSG9zdCBiYXNpYy5tYXhfbGVhZiBvdXQg
b2YgcmFuZ2UiLAorICAgICAgICAgICAgLmd1ZXN0X2NwdWlkLmJhc2ljLm1heF9sZWFmID0gMSwK
KyAgICAgICAgICAgIC5lID0geyAwLCAtMSwgLTEgfSwKKyAgICAgICAgfSwKKyAgICAgICAgewor
ICAgICAgICAgICAgLm5hbWUgPSAiSG9zdCBleHRkLm1heF9sZWFmIG91dCBvZiByYW5nZSIsCisg
ICAgICAgICAgICAuZ3Vlc3RfY3B1aWQuZXh0ZC5tYXhfbGVhZiA9IDEsCisgICAgICAgICAgICAu
ZSA9IHsgMHg4MDAwMDAwOCwgLTEsIC0xIH0sCisgICAgICAgIH0sCisgICAgICAgIHsKKyAgICAg
ICAgICAgIC5uYW1lID0gIkhvc3Qgbm8gQ1BVSUQgZmF1bHRpbmcsIEd1ZXN0IHdhbnRlZCIsCisg
ICAgICAgICAgICAuZ3Vlc3RfbXNyID0geworICAgICAgICAgICAgICAgIC5wbGFmb3JtX2luZm8u
Y3B1aWRfZmF1bHRpbmcgPSB0cnVlLAorICAgICAgICAgICAgfSwKKyAgICAgICAgICAgIC5lID0g
eyAtMSwgLTEsIDB4Y2UgfSwKKyAgICAgICAgfSwKKyAgICB9OworCisgICAgcHJpbnRmKCJUZXN0
aW5nIHBvbGljeSBjb21wYXRpYmlsaXR5IGZhaWx1cmU6XG4iKTsKKworICAgIGZvciAoIHNpemVf
dCBpID0gMDsgaSA8IEFSUkFZX1NJWkUodGVzdHMpOyArK2kgKQorICAgIHsKKyAgICAgICAgc3Ry
dWN0IHRlc3QgKnQgPSAmdGVzdHNbaV07CisgICAgICAgIHN0cnVjdCBjcHVfcG9saWN5IHN5cyA9
IHsKKyAgICAgICAgICAgICZ0LT5ob3N0X2NwdWlkLAorICAgICAgICAgICAgJnQtPmhvc3RfbXNy
LAorICAgICAgICB9LCBuZXcgPSB7CisgICAgICAgICAgICAmdC0+Z3Vlc3RfY3B1aWQsCisgICAg
ICAgICAgICAmdC0+Z3Vlc3RfbXNyLAorICAgICAgICB9OworICAgICAgICBzdHJ1Y3QgY3B1X3Bv
bGljeV9lcnJvcnMgZSA9IElOSVRfQ1BVX1BPTElDWV9FUlJPUlM7CisgICAgICAgIGludCByZXMg
PSB4ODZfY3B1X3BvbGljaWVzX2FyZV9jb21wYXRpYmxlKCZzeXMsICZuZXcsICZlKTsKKworICAg
ICAgICAvKiBDaGVjayB0aGUgZXhwZWN0ZWQgZXJyb3Igb3V0cHV0LiAqLworICAgICAgICBpZiAo
IHJlcyA9PSAwIHx8IG1lbWNtcCgmdC0+ZSwgJmUsIHNpemVvZih0LT5lKSkgKQorICAgICAgICAg
ICAgZmFpbCgiICBUZXN0ICclcycgcmVzICVkXG4iCisgICAgICAgICAgICAgICAgICIgICAgZXhw
ZWN0ZWQgeyBsZWFmICUwOHgsIHN1YmxlYWYgJTA4eCwgbXNyICUwOHggfVxuIgorICAgICAgICAg
ICAgICAgICAiICAgIGdvdCAgICAgIHsgbGVhZiAlMDh4LCBzdWJsZWFmICUwOHgsIG1zciAlMDh4
IH1cbiIsCisgICAgICAgICAgICAgICAgIHQtPm5hbWUsIHJlcywKKyAgICAgICAgICAgICAgICAg
dC0+ZS5sZWFmLCB0LT5lLnN1YmxlYWYsIHQtPmUubXNyLAorICAgICAgICAgICAgICAgICBlLmxl
YWYsIGUuc3VibGVhZiwgZS5tc3IpOworICAgIH0KK30KKwogaW50IG1haW4oaW50IGFyZ2MsIGNo
YXIgKiphcmd2KQogewogICAgIHByaW50ZigiQ1BVIFBvbGljeSB1bml0IHRlc3RzXG4iKTsKQEAg
LTUxNiw2ICs2MjAsOSBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAgICAgdGVz
dF9tc3Jfc2VyaWFsaXNlX3N1Y2Nlc3MoKTsKICAgICB0ZXN0X21zcl9kZXNlcmlhbGlzZV9mYWls
dXJlKCk7CiAKKyAgICB0ZXN0X2lzX2NvbXBhdGlibGVfc3VjY2VzcygpOworICAgIHRlc3RfaXNf
Y29tcGF0aWJsZV9mYWlsdXJlKCk7CisKICAgICBpZiAoIG5yX2ZhaWx1cmVzICkKICAgICAgICAg
cHJpbnRmKCJEb25lOiAldSBmYWlsdXJlc1xuIiwgbnJfZmFpbHVyZXMpOwogICAgIGVsc2UKZGlm
ZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9saWIveDg2L2NwdS1wb2xpY3kuaCBiL3hlbi9pbmNs
dWRlL3hlbi9saWIveDg2L2NwdS1wb2xpY3kuaAppbmRleCA2ZjA3YzRiNDkzLi42NWVjNzE4MzVi
IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS94ZW4vbGliL3g4Ni9jcHUtcG9saWN5LmgKKysrIGIv
eGVuL2luY2x1ZGUveGVuL2xpYi94ODYvY3B1LXBvbGljeS5oCkBAIC0xMSw2ICsxMSwyNSBAQCBz
dHJ1Y3QgY3B1X3BvbGljeQogICAgIHN0cnVjdCBtc3JfcG9saWN5ICptc3I7CiB9OwogCitzdHJ1
Y3QgY3B1X3BvbGljeV9lcnJvcnMKK3sKKyAgICB1aW50MzJfdCBsZWFmLCBzdWJsZWFmOworICAg
IHVpbnQzMl90IG1zcjsKK307CisKKyNkZWZpbmUgSU5JVF9DUFVfUE9MSUNZX0VSUk9SUyB7IH4w
dSwgfjB1LCB+MHUgfQorCisvKgorICogQ2FsY3VsYXRlIHdoZXRoZXIgdHdvIHBvbGljaWVzIGFy
ZSBjb21wYXRpYmxlLgorICoKKyAqIGkuZS4gQ2FuIGEgVk0gY29uZmlndXJlZCB3aXRoIEBndWVz
dCBydW4gb24gYSBDUFUgc3VwcG9ydGluZyBAaG9zdC4KKyAqCisgKiBGb3IgdHlwaWNhbCB1c2Fn
ZSwgQGhvc3Qgc2hvdWxkIGJlIGEgc3lzdGVtIHBvbGljeS4KKyAqLworaW50IHg4Nl9jcHVfcG9s
aWNpZXNfYXJlX2NvbXBhdGlibGUoY29uc3Qgc3RydWN0IGNwdV9wb2xpY3kgKmhvc3QsCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgY3B1X3BvbGljeSAq
Z3Vlc3QsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgY3B1X3Bv
bGljeV9lcnJvcnMgKmUpOworCiAjZW5kaWYgLyogIVhFTl9MSUJfWDg2X1BPTElDSUVTX0ggKi8K
IAogLyoKZGlmZiAtLWdpdCBhL3hlbi9saWIveDg2L01ha2VmaWxlIGIveGVuL2xpYi94ODYvTWFr
ZWZpbGUKaW5kZXggMmY5NjkxZTk2NC4uNzgwZWEwNWRiMSAxMDA2NDQKLS0tIGEveGVuL2xpYi94
ODYvTWFrZWZpbGUKKysrIGIveGVuL2xpYi94ODYvTWFrZWZpbGUKQEAgLTEsMiArMSwzIEBACiBv
YmoteSArPSBjcHVpZC5vCiBvYmoteSArPSBtc3Iubworb2JqLXkgKz0gcG9saWN5Lm8KZGlmZiAt
LWdpdCBhL3hlbi9saWIveDg2L3BvbGljeS5jIGIveGVuL2xpYi94ODYvcG9saWN5LmMKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMC4uMzE1NWUwN2E3YwotLS0gL2Rldi9udWxs
CisrKyBiL3hlbi9saWIveDg2L3BvbGljeS5jCkBAIC0wLDAgKzEsNTMgQEAKKyNpbmNsdWRlICJw
cml2YXRlLmgiCisKKyNpbmNsdWRlIDx4ZW4vbGliL3g4Ni9jcHUtcG9saWN5Lmg+CisKK2ludCB4
ODZfY3B1X3BvbGljaWVzX2FyZV9jb21wYXRpYmxlKGNvbnN0IHN0cnVjdCBjcHVfcG9saWN5ICpo
b3N0LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IGNw
dV9wb2xpY3kgKmd1ZXN0LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ry
dWN0IGNwdV9wb2xpY3lfZXJyb3JzICplKQoreworICAgIHVpbnQzMl90IGxlYWYgPSAtMSwgc3Vi
bGVhZiA9IC0xLCBtc3IgPSAtMTsKKyAgICBpbnQgcmV0ID0gLUVJTlZBTDsKKworI2RlZmluZSBO
QSBYRU5fQ1BVSURfTk9fU1VCTEVBRgorI2RlZmluZSBGQUlMX0NQVUlEKGwsIHMpIGRvIHsgbGVh
ZiA9IChsKTsgc3VibGVhZiA9IChzKTsgZ290byBvdXQ7IH0gd2hpbGUgKCAwICkKKyNkZWZpbmUg
RkFJTF9NU1IobSkgZG8geyBtc3IgPSAobSk7IGdvdG8gb3V0OyB9IHdoaWxlICggMCApCisKKyAg
ICBpZiAoIGd1ZXN0LT5jcHVpZC0+YmFzaWMubWF4X2xlYWYgPiBob3N0LT5jcHVpZC0+YmFzaWMu
bWF4X2xlYWYgKQorICAgICAgICBGQUlMX0NQVUlEKDAsIE5BKTsKKworICAgIGlmICggZ3Vlc3Qt
PmNwdWlkLT5leHRkLm1heF9sZWFmID4gaG9zdC0+Y3B1aWQtPmV4dGQubWF4X2xlYWYgKQorICAg
ICAgICBGQUlMX0NQVUlEKDB4ODAwMDAwMDgsIE5BKTsKKworICAgIC8qIFRPRE86IEF1ZGl0IG1v
cmUgQ1BVSUQgZGF0YS4gKi8KKworICAgIGlmICggfmhvc3QtPm1zci0+cGxhZm9ybV9pbmZvLnJh
dyAmIGd1ZXN0LT5tc3ItPnBsYWZvcm1faW5mby5yYXcgKQorICAgICAgICBGQUlMX01TUihNU1Jf
SU5URUxfUExBVEZPUk1fSU5GTyk7CisKKyN1bmRlZiBGQUlMX01TUgorI3VuZGVmIEZBSUxfQ1BV
SUQKKyN1bmRlZiBOQQorCisgICAgLyogU3VjY2Vzcy4gKi8KKyAgICByZXQgPSAwOworCisgb3V0
OgorICAgIGlmICggcmV0ICYmIGUgKQorICAgIHsKKyAgICAgICAgZS0+bGVhZiA9IGxlYWY7Cisg
ICAgICAgIGUtPnN1YmxlYWYgPSBzdWJsZWFmOworICAgICAgICBlLT5tc3IgPSBtc3I7CisgICAg
fQorCisgICAgcmV0dXJuIHJldDsKK30KKworLyoKKyAqIExvY2FsIHZhcmlhYmxlczoKKyAqIG1v
ZGU6IEMKKyAqIGMtZmlsZS1zdHlsZTogIkJTRCIKKyAqIGMtYmFzaWMtb2Zmc2V0OiA0CisgKiB0
YWItd2lkdGg6IDQKKyAqIGluZGVudC10YWJzLW1vZGU6IG5pbAorICogRW5kOgorICovCi0tIAoy
LjExLjAKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpY
ZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRw
czovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

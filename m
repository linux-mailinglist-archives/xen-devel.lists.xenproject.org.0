Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 164A217EF6E
	for <lists+xen-devel@lfdr.de>; Tue, 10 Mar 2020 04:47:23 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jBVny-0006zF-Hl; Tue, 10 Mar 2020 03:43:42 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=pT5j=43=intel.com=kevin.tian@srs-us1.protection.inumbo.net>)
 id 1jBVnx-0006zA-85
 for xen-devel@lists.xenproject.org; Tue, 10 Mar 2020 03:43:41 +0000
X-Inumbo-ID: 53a1cc00-6281-11ea-8f6d-bc764e2007e4
Received: from mga11.intel.com (unknown [192.55.52.93])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 53a1cc00-6281-11ea-8f6d-bc764e2007e4;
 Tue, 10 Mar 2020 03:43:38 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga002.fm.intel.com ([10.253.24.26])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 09 Mar 2020 20:43:37 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.70,535,1574150400"; d="scan'208";a="276781609"
Received: from fmsmsx103.amr.corp.intel.com ([10.18.124.201])
 by fmsmga002.fm.intel.com with ESMTP; 09 Mar 2020 20:43:37 -0700
Received: from fmsmsx155.amr.corp.intel.com (10.18.116.71) by
 FMSMSX103.amr.corp.intel.com (10.18.124.201) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Mon, 9 Mar 2020 20:43:37 -0700
Received: from shsmsx102.ccr.corp.intel.com (10.239.4.154) by
 FMSMSX155.amr.corp.intel.com (10.18.116.71) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Mon, 9 Mar 2020 20:43:37 -0700
Received: from shsmsx104.ccr.corp.intel.com ([169.254.5.206]) by
 shsmsx102.ccr.corp.intel.com ([169.254.2.50]) with mapi id 14.03.0439.000;
 Tue, 10 Mar 2020 11:43:33 +0800
From: "Tian, Kevin" <kevin.tian@intel.com>
To: Jan Beulich <jbeulich@suse.com>, "xen-devel@lists.xenproject.org"
 <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH v3] IOMMU: make DMA containment of quarantined devices
 optional
Thread-Index: AQHV9gMvA8DkILGx5UOf5iWNvNKXRqhBK2Cg
Date: Tue, 10 Mar 2020 03:43:33 +0000
Message-ID: <AADFC41AFE54684AB9EE6CBC0274A5D19D7C5CDC@SHSMSX104.ccr.corp.intel.com>
References: <83253657-b3b4-a045-b829-f8f4c4aeae28@suse.com>
In-Reply-To: <83253657-b3b4-a045-b829-f8f4c4aeae28@suse.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ctpclassification: CTP_NT
x-titus-metadata-40: eyJDYXRlZ29yeUxhYmVscyI6IiIsIk1ldGFkYXRhIjp7Im5zIjoiaHR0cDpcL1wvd3d3LnRpdHVzLmNvbVwvbnNcL0ludGVsMyIsImlkIjoiMmJkMmUzMDktNGMyNi00MGEzLTk0ZTctYjVkYzdkOTJhNzI5IiwicHJvcHMiOlt7Im4iOiJDVFBDbGFzc2lmaWNhdGlvbiIsInZhbHMiOlt7InZhbHVlIjoiQ1RQX05UIn1dfV19LCJTdWJqZWN0TGFiZWxzIjpbXSwiVE1DVmVyc2lvbiI6IjE3LjEwLjE4MDQuNDkiLCJUcnVzdGVkTGFiZWxIYXNoIjoid0xqRUxMUkl4V2ZHNWNJZFlUNzAwWjdjdGRrUkxHN2hUZVhlamVzT2VzMUJNcGlvSDhpTXRwNUZ1ZEdKaGFSViJ9
dlp-product: dlpe-windows
dlp-version: 11.2.0.6
dlp-reaction: no-action
x-originating-ip: [10.239.127.40]
MIME-Version: 1.0
Subject: Re: [Xen-devel] [PATCH v3] IOMMU: make DMA containment of
 quarantined devices optional
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>, Paul Durrant <paul@xen.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

PiBGcm9tOiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+DQo+IFNlbnQ6IE1vbmRheSwg
TWFyY2ggOSwgMjAyMCA3OjA5IFBNDQo+IA0KPiBDb250YWluaW5nIHN0aWxsIGluIGZsaWdodCBE
TUEgd2FzIGludHJvZHVjZWQgdG8gd29yayBhcm91bmQgY2VydGFpbg0KPiBkZXZpY2VzIC8gc3lz
dGVtcyBoYW5naW5nIGhhcmQgdXBvbiBoaXR0aW5nIGEgIm5vdC1wcmVzZW50IiBJT01NVSBmYXVs
dC4NCj4gUGFzc2luZyB0aHJvdWdoIChzdWNoKSBkZXZpY2VzIChvbiBzdWNoIHN5c3RlbXMpIGlz
IGluaGVyZW50bHkgaW5zZWN1cmUNCj4gKGFzIGd1ZXN0cyBjb3VsZCBlYXNpbHkgYXJyYW5nZSBm
b3IgSU9NTVUgZmF1bHRzIG9mIGFueSBraW5kIHRvIG9jY3VyKS4NCj4gRGVmYXVsdGluZyB0byBh
IG1vZGUgd2hlcmUgYWRtaW5zIG1heSBub3QgZXZlbiBiZWNvbWUgYXdhcmUgb2YgaXNzdWVzDQo+
IHdpdGggZGV2aWNlcyBjYW4gYmUgY29uc2lkZXJlZCB1bmRlc2lyYWJsZS4gVGhlcmVmb3JlIGNv
bnZlcnQgdGhpcyBtb2RlDQo+IG9mIG9wZXJhdGlvbiB0byBhbiBvcHRpb25hbCBvbmUsIG5vdCBv
bmUgZW5hYmxlZCBieSBkZWZhdWx0Lg0KPiANCj4gVGhpcyBpbnZvbHZlcyByZXN1cnJlY3Rpbmcg
Y29kZSBjb21taXQgZWEzODg2NzgzMWRhICgieDg2IC8gaW9tbXU6IHNldA0KPiB1cCBhIHNjcmF0
Y2ggcGFnZSBpbiB0aGUgcXVhcmFudGluZSBkb21haW4iKSBkaWQgcmVtb3ZlLCBpbiBhIHNsaWdo
dGx5DQo+IGV4dGVuZGVkIGFuZCBhYnN0cmFjdGVkIGZhc2hpb24uIEhlcmUsIGluc3RlYWQgb2Yg
cmVpbnRyb2R1Y2luZyBhIHByZXR0eQ0KPiBwb2ludGxlc3MgdXNlIG9mICJnb3RvIiBpbiBkb21h
aW5fY29udGV4dF91bm1hcCgpLCBhbmQgaW5zdGVhZCBvZiBtYWtpbmcNCj4gdGhlIGZ1bmN0aW9u
IChhdCBsZWFzdCB0ZW1wb3JhcmlseSkgaW5jb25zaXN0ZW50LCB0YWtlIHRoZSBvcHBvcnR1bml0
eQ0KPiBhbmQgcmVwbGFjZSB0aGUgb3RoZXIgc2ltaWxhcmx5IHBvaW50bGVzcyAiZ290byIgYXMg
d2VsbC4NCj4gDQo+IEluIG9yZGVyIHRvIGtleSB0aGUgcmUtaW5zdGF0ZWQgYnlwYXNzZXMgb2Zm
IG9mIHRoZXJlIChub3QpIGJlaW5nIGEgcm9vdA0KPiBwYWdlIHRhYmxlIHRoaXMgZnVydGhlciBy
ZXF1aXJlcyBtb3ZpbmcgdGhlIGFsbG9jYXRlX2RvbWFpbl9yZXNvdXJjZXMoKQ0KPiBpbnZvY2F0
aW9uIGZyb20gcmVhc3NpZ25fZGV2aWNlKCkgdG8gYW1kX2lvbW11X3NldHVwX2RvbWFpbl9kZXZp
Y2UoKQ0KPiAob3INCj4gZWxzZSByZWFzc2lnbl9kZXZpY2UoKSB3b3VsZCBhbGxvY2F0ZSBhIHJv
b3QgcGFnZSB0YWJsZSBhbnl3YXkpOyB0aGlzIGlzDQo+IGJlbmlnbiB0byB0aGUgc2Vjb25kIGNh
bGxlciBvZiB0aGUgbGF0dGVyIGZ1bmN0aW9uLg0KPiANCj4gVGFrZSB0aGUgb3Bwb3J0dW5pdHkg
YW5kIGFsc28gbGltaXQgdGhlIGNvbnRyb2wgdG8gYnVpbGRzIHN1cHBvcnRpbmcNCj4gUENJLg0K
PiANCj4gU2lnbmVkLW9mZi1ieTogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPg0KPiAt
LS0NCj4gSSdtIGhhcHB5IHRvIHRha2UgYmV0dGVyIHN1Z2dlc3Rpb25zIHRvIHJlcGxhY2UgdGhl
ICJmdWxsIiBjb21tYW5kIGxpbmUNCj4gb3B0aW9uIGFuZCBLY29uZmlnIHByb21wdCB0b2tlbnMu
IEkgZG9uJ3QgdGhpbmsgdGhvdWdoIHRoYXQgImZhdWx0IiBhbmQNCj4gIndyaXRlLWZhdWx0IiBh
cmUgcmVhbGx5IHN1aXRhYmxlIHRoZXJlLg0KDQpJIHRoaW5rIHdlIG1heSBqdXN0IGFsbG93IGJv
dGggci93IGFjY2VzcyB0byBzY3JhdGNoIHBhZ2UgZm9yIHN1Y2ggYm9ndXMNCmRldmljZSwgd2hp
Y2ggbWF5IG1ha2UgJ2Z1bGwnIG1vcmUgcmVhc29uYWJsZSBzaW5jZSB3ZSBub3cgZnVsbHkNCmNv
bnRhaW4gaW4tZmx5IERNQXMuIEknbSBub3Qgc3VyZSBhYm91dCB0aGUgdmFsdWUgb2Yga2VlcGlu
ZyB3cml0ZS1mYXVsdA0KYWxvbmUgZm9yIHN1Y2ggZGV2aWNlcyAoanVzdCBiZWNhdXNlIG9uZSBv
YnNlcnZlZCBoaXMgc3BlY2lmaWMgZGV2aWNlIG9ubHkgDQpoYXMgcHJvYmxlbSB3aXRoIHJlYWQt
ZmF1bHQpLg0KDQphbHRlcm5hdGl2ZWx5IEkgYWxzbyB0aG91Z2h0IGFib3V0IHdoZXRoZXIgd2hp
dGVsaXN0aW5nIHRoZSBwcm9ibGVtYXRpYyANCmRldmljZXMgdGhyb3VnaCBhbm90aGVyIG9wdGlv
biAoZS5nLiBub2ZhdWx0PWI6ZDpmKSBjb3VsZCBwcm92aWRlIG1vcmUNCnZhbHVlLiBJbiBjb25j
ZXB0IGFueSBJT01NVSBwYWdlIHRhYmxlIChkb20wLCBkb21faW8gb3IgZG9tVSkgDQpmb3Igc3Vj
aCBib2d1cyBkZXZpY2Ugc2hvdWxkIG5vdCBpbmNsdWRlIGludmFsaWQgZW50cnksIGV2ZW4gd2hl
biANCnF1YXJhbnRpbmUgaXMgbm90IHNwZWNpZmllZC4gSG93ZXZlciBJJ20gbm90IHN1cmUgd2hl
dGhlciBpdCdzIHdvcnRoeSBvZiANCmdvaW5nIHNvIGZhci4uLg0KDQo+IC0tLQ0KPiBUaGlzIHBh
dGNoIGNvbnRleHR1YWxseSBkZXBlbmRzIG9uICJbUEFUQ0ggdjIgMC81XSBJT01NVTogcmVzdHJp
Y3QNCj4gdmlzaWJpbGl0eS9zY29wZSBpZiBjZXJ0YWluIHZhcmlhYmxlcyIuDQo+IC0tLQ0KPiB2
MzogSU9NTVVfcXVhcmFudGluZV9iYXNpYyAtPiBJT01NVV9xdWFyYW50aW5lX2ZhdWx0LA0KPiAg
ICAgSU9NTVVfcXVhcmFudGluZV9mdWxsIC0+IElPTU1VX3F1YXJhbnRpbmVfd3JpdGVfZmF1bHQu
IEtjb25maWcNCj4gICAgIG9wdGlvbiAoY2hvaWNlKSB0byBzZWxlY3QgZGVmYXVsdC4gTGltaXQg
dG8gSEFTX1BDSS4NCj4gdjI6IERvbid0IHVzZSB0cnVlL2ZhbHNlLiBJbnRyb2R1Y2UgUVVBUkFO
VElORV9TS0lQKCkgKGFsYmVpdCBJJ20gbm90DQo+ICAgICByZWFsbHkgY29udmluY2VkIHRoaXMg
aXMgYW4gaW1wcm92ZW1lbnQpLiBBZGQgY29tbWVudC4NCj4gDQo+IC0tLSBhL2RvY3MvbWlzYy94
ZW4tY29tbWFuZC1saW5lLnBhbmRvYw0KPiArKysgYi9kb2NzL21pc2MveGVuLWNvbW1hbmQtbGlu
ZS5wYW5kb2MNCj4gQEAgLTEyMzgsNyArMTIzOCw3IEBAIGRldGVjdGlvbiBvZiBzeXN0ZW1zIGtu
b3duIHRvIG1pc2JlaGF2ZQ0KPiAgPiBEZWZhdWx0OiBgbmV3YCB1bmxlc3MgZGlyZWN0ZWQtRU9J
IGlzIHN1cHBvcnRlZA0KPiANCj4gICMjIyBpb21tdQ0KPiAtICAgID0gTGlzdCBvZiBbIDxib29s
PiwgdmVyYm9zZSwgZGVidWcsIGZvcmNlLCByZXF1aXJlZCwgcXVhcmFudGluZSwNCj4gKyAgICA9
IExpc3Qgb2YgWyA8Ym9vbD4sIHZlcmJvc2UsIGRlYnVnLCBmb3JjZSwgcmVxdWlyZWQsIHF1YXJh
bnRpbmVbPWZ1bGxdLA0KPiAgICAgICAgICAgICAgICAgIHNoYXJlcHQsIGludHJlbWFwLCBpbnRw
b3N0LCBjcmFzaC1kaXNhYmxlLA0KPiAgICAgICAgICAgICAgICAgIHNub29wLCBxaW52YWwsIGln
ZngsIGFtZC1pb21tdS1wZXJkZXYtaW50cmVtYXAsDQo+ICAgICAgICAgICAgICAgICAgZG9tMC17
cGFzc3Rocm91Z2gsc3RyaWN0fSBdDQo+IEBAIC0xMjc2LDExICsxMjc2LDE1IEBAIGJvb2xlYW4g
KGUuZy4gYGlvbW11PW5vYCkgY2FuIG92ZXJyaWRlIHQNCj4gICAgICB3aWxsIHByZXZlbnQgWGVu
IGZyb20gYm9vdGluZyBpZiBJT01NVXMgYXJlbid0IGRpc2NvdmVyZWQgYW5kIGVuYWJsZWQNCj4g
ICAgICBzdWNjZXNzZnVsbHkuDQo+IA0KPiAtKiAgIFRoZSBgcXVhcmFudGluZWAgYm9vbGVhbiBj
YW4gYmUgdXNlZCB0byBjb250cm9sIFhlbidzIGJlaGF2aW9yIHdoZW4NCj4gLSAgICBkZS1hc3Np
Z25pbmcgZGV2aWNlcyBmcm9tIGd1ZXN0cy4gIElmIGVuYWJsZWQgKHRoZSBkZWZhdWx0KSwgWGVu
IGFsd2F5cw0KPiAtICAgIHF1YXJhbnRpbmVzIHN1Y2ggZGV2aWNlczsgdGhleSBtdXN0IGJlIGV4
cGxpY2l0bHkgYXNzaWduZWQgYmFjayB0byBEb20wDQo+IC0gICAgYmVmb3JlIHRoZXkgY2FuIGJl
IHVzZWQgdGhlcmUgYWdhaW4uICBJZiBkaXNhYmxlZCwgWGVuIHdpbGwgb25seQ0KPiAtICAgIHF1
YXJhbnRpbmUgZGV2aWNlcyB0aGUgdG9vbHN0YWNrIGhhc3MgYXJyYW5nZWQgZm9yIGdldHRpbmcg
cXVhcmFudGluZWQuDQo+ICsqICAgVGhlIGBxdWFyYW50aW5lYCBvcHRpb24gY2FuIGJlIHVzZWQg
dG8gY29udHJvbCBYZW4ncyBiZWhhdmlvciB3aGVuDQo+ICsgICAgZGUtYXNzaWduaW5nIGRldmlj
ZXMgZnJvbSBndWVzdHMuICBJZiBzZXQgdG8gdHJ1ZSAodGhlIGRlZmF1bHQpLCBYZW4NCj4gKyAg
ICBhbHdheXMgcXVhcmFudGluZXMgc3VjaCBkZXZpY2VzOyB0aGV5IG11c3QgYmUgZXhwbGljaXRs
eSBhc3NpZ25lZCBiYWNrDQo+ICsgICAgdG8gRG9tMCBiZWZvcmUgdGhleSBjYW4gYmUgdXNlZCB0
aGVyZSBhZ2Fpbi4gIElmIHNldCB0byAiZnVsbCIsIHN0aWxsDQo+ICsgICAgYWN0aXZlIERNQSB3
aWxsIGFkZGl0aW9uYWxseSBiZSBkaXJlY3RlZCB0byBhICJzaW5rIiBwYWdlLiAgSWYgc2V0IHRv
DQo+ICsgICAgZmFsc2UsIFhlbiB3aWxsIG9ubHkgcXVhcmFudGluZSBkZXZpY2VzIHRoZSB0b29s
c3RhY2sgaGFzIGFycmFuZ2VkIGZvcg0KPiArICAgIGdldHRpbmcgcXVhcmFudGluZWQuDQo+ICsN
Cj4gKyAgICBUaGlzIG9wdGlvbiBpcyBvbmx5IHZhbGlkIG9uIGJ1aWxkcyBzdXBwb3J0aW5nIFBD
SS4NCj4gDQo+ICAqICAgVGhlIGBzaGFyZXB0YCBib29sZWFuIGNvbnRyb2xzIHdoZXRoZXIgdGhl
IElPTU1VIHBhZ2V0YWJsZXMgYXJlDQo+IHNoYXJlZA0KPiAgICAgIHdpdGggdGhlIENQVS1zaWRl
IEhBUCBwYWdldGFibGVzLCBvciBhbGxvY2F0ZWQgc2VwYXJhdGVseS4gIFNoYXJpbmcNCj4gLS0t
IGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvS2NvbmZpZw0KPiArKysgYi94ZW4vZHJpdmVycy9w
YXNzdGhyb3VnaC9LY29uZmlnDQo+IEBAIC0yOCwzICsyOCwzMSBAQCBlbmRpZg0KPiANCj4gIGNv
bmZpZyBJT01NVV9GT1JDRV9QVF9TSEFSRQ0KPiAgCWJvb2wNCj4gKw0KPiArY2hvaWNlDQo+ICsJ
cHJvbXB0ICJJT01NVSBkZXZpY2UgcXVhcmFudGluaW5nIGRlZmF1bHQgYmVoYXZpb3IiDQo+ICsJ
ZGVwZW5kcyBvbiBIQVNfUENJDQo+ICsJZGVmYXVsdCBJT01NVV9RVUFSQU5USU5FX0JBU0lDDQo+
ICsJLS0taGVscC0tLQ0KPiArCSAgV2hlbiBhIFBDSSBkZXZpY2UgaXMgYXNzaWduZWQgdG8gYW4g
dW50cnVzdGVkIGRvbWFpbiwgaXQgaXMgcG9zc2libGUNCj4gKwkgIGZvciB0aGF0IGRvbWFpbiB0
byBwcm9ncmFtIHRoZSBkZXZpY2UgdG8gRE1BIHRvIGFuIGFyYml0cmFyeQ0KPiBhZGRyZXNzLg0K
PiArCSAgVGhlIElPTU1VIGlzIHVzZWQgdG8gcHJvdGVjdCB0aGUgaG9zdCBmcm9tIG1hbGljaW91
cyBETUEgYnkNCj4gbWFraW5nDQo+ICsJICBzdXJlIHRoYXQgdGhlIGRldmljZSBhZGRyZXNzZXMg
Y2FuIG9ubHkgdGFyZ2V0IG1lbW9yeSBhc3NpZ25lZCB0bw0KPiB0aGUNCj4gKwkgIGd1ZXN0LiAg
SG93ZXZlciwgd2hlbiB0aGUgZ3Vlc3QgZG9tYWluIGlzIHRvcm4gZG93biwgYXNzaWduaW5nIHRo
ZQ0KPiArCSAgZGV2aWNlIGJhY2sgdG8gdGhlIGhhcmR3YXJlIGRvbWFpbiB3b3VsZCBhbGxvdyBh
bnkgaW4tZmxpZ2h0IERNQQ0KPiB0bw0KPiArCSAgcG90ZW50aWFsbHkgdGFyZ2V0IGNyaXRpY2Fs
IGhvc3QgZGF0YS4gIFRvIGF2b2lkIHRoaXMsIHF1YXJhbnRpbmluZw0KPiArCSAgc2hvbGQgYmUg
ZW5hYmxlZC4gIFF1YXJhbnRpbmluZyBjYW4gYmUgZG9uZSBpbiB0d28gd2F5czogSW4gaXRzDQo+
IGJhc2ljDQo+ICsJICBmb3JtLCBhbGwgaW4tZmxpZ2h0IERNQSB3aWxsIHNpbXBseSBiZSBmb3Jj
ZWQgdG8gZW5jb3VudGVyIElPTU1VDQo+ICsJICBmYXVsdHMuICBTaW5jZSB0aGVyZSBhcmUgc3lz
dGVtcyB3aGVyZSBkb2luZyBzbyBjYW4gY2F1c2UgaG9zdA0KPiArCSAgbG9ja3VwLCBhbiBhbHRl
cm5hdGl2ZSBmb3JtIGlzIGF2YWlsYWJsZSB3aGVyZSB3cml0ZXMgdG8gbWVtb3J5IHdpbGwNCj4g
KwkgIGJlIG1hZGUgZmF1bHQsIGJ1dCByZWFkcyB3aWxsIGJlIGRpcmVjdGVkIHRvIGEgZHVtbXkg
cGFnZS4gIFRoZQ0KPiArCSAgaW1wbGljYXRpb24gaGVyZSBpcyB0aGF0IHN1Y2ggcmVhZHMgd2ls
bCBnbyB1bm5vdGljZWQsIGkuZS4gYW4gYWRtaW4NCj4gKwkgIG1heSBub3QgYmVjb21lIGF3YXJl
IG9mIHRoZSB1bmRlcmx5aW5nIHByb2JsZW0uDQo+ICsNCj4gKwljb25maWcgSU9NTVVfUVVBUkFO
VElORV9OT05FDQo+ICsJCWJvb2wgIm5vbmUiDQo+ICsJY29uZmlnIElPTU1VX1FVQVJBTlRJTkVf
QkFTSUMNCj4gKwkJYm9vbCAiYmFzaWMiDQo+ICsJY29uZmlnIElPTU1VX1FVQVJBTlRJTkVfRlVM
TA0KPiArCQlib29sICJmdWxsIg0KPiArZW5kY2hvaWNlDQo+IC0tLSBhL3hlbi9kcml2ZXJzL3Bh
c3N0aHJvdWdoL2FtZC9wY2lfYW1kX2lvbW11LmMNCj4gKysrIGIveGVuL2RyaXZlcnMvcGFzc3Ro
cm91Z2gvYW1kL3BjaV9hbWRfaW9tbXUuYw0KPiBAQCAtMjUsNiArMjUsOSBAQA0KPiAgI2luY2x1
ZGUgImlvbW11LmgiDQo+ICAjaW5jbHVkZSAiLi4vYXRzLmgiDQo+IA0KPiArLyogZG9tX2lvIGlz
IHVzZWQgYXMgYSBzZW50aW5lbCBmb3IgcXVhcmFudGluZWQgZGV2aWNlcyAqLw0KPiArI2RlZmlu
ZSBRVUFSQU5USU5FX1NLSVAoZCkgKChkKSA9PSBkb21faW8gJiYgIWRvbV9pb21tdShkKS0NCj4g
PmFyY2gucm9vdF90YWJsZSkNCj4gKw0KPiAgc3RhdGljIGJvb2xfdCBfX3JlYWRfbW9zdGx5IGlu
aXRfZG9uZTsNCj4gDQo+ICBzdGF0aWMgY29uc3Qgc3RydWN0IGlvbW11X2luaXRfb3BzIF9pb21t
dV9pbml0X29wczsNCj4gQEAgLTgyLDE4ICs4NSwzNSBAQCBpbnQgZ2V0X2RtYV9yZXF1ZXN0b3Jf
aWQodWludDE2X3Qgc2VnLCB1DQo+ICAgICAgcmV0dXJuIHJlcV9pZDsNCj4gIH0NCj4gDQo+IC1z
dGF0aWMgdm9pZCBhbWRfaW9tbXVfc2V0dXBfZG9tYWluX2RldmljZSgNCj4gK3N0YXRpYyBpbnQg
X19tdXN0X2NoZWNrIGFsbG9jYXRlX2RvbWFpbl9yZXNvdXJjZXMoc3RydWN0IGRvbWFpbl9pb21t
dQ0KPiAqaGQpDQo+ICt7DQo+ICsgICAgaW50IHJjOw0KPiArDQo+ICsgICAgc3Bpbl9sb2NrKCZo
ZC0+YXJjaC5tYXBwaW5nX2xvY2spOw0KPiArICAgIHJjID0gYW1kX2lvbW11X2FsbG9jX3Jvb3Qo
aGQpOw0KPiArICAgIHNwaW5fdW5sb2NrKCZoZC0+YXJjaC5tYXBwaW5nX2xvY2spOw0KPiArDQo+
ICsgICAgcmV0dXJuIHJjOw0KPiArfQ0KPiArDQo+ICtzdGF0aWMgaW50IF9fbXVzdF9jaGVjayBh
bWRfaW9tbXVfc2V0dXBfZG9tYWluX2RldmljZSgNCj4gICAgICBzdHJ1Y3QgZG9tYWluICpkb21h
aW4sIHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11LA0KPiAgICAgIHVpbnQ4X3QgZGV2Zm4sIHN0cnVj
dCBwY2lfZGV2ICpwZGV2KQ0KPiAgew0KPiAgICAgIHN0cnVjdCBhbWRfaW9tbXVfZHRlICp0YWJs
ZSwgKmR0ZTsNCj4gICAgICB1bnNpZ25lZCBsb25nIGZsYWdzOw0KPiAtICAgIGludCByZXFfaWQs
IHZhbGlkID0gMTsNCj4gKyAgICBpbnQgcmVxX2lkLCB2YWxpZCA9IDEsIHJjOw0KPiAgICAgIHU4
IGJ1cyA9IHBkZXYtPmJ1czsNCj4gLSAgICBjb25zdCBzdHJ1Y3QgZG9tYWluX2lvbW11ICpoZCA9
IGRvbV9pb21tdShkb21haW4pOw0KPiArICAgIHN0cnVjdCBkb21haW5faW9tbXUgKmhkID0gZG9t
X2lvbW11KGRvbWFpbik7DQo+ICsNCj4gKyAgICBpZiAoIFFVQVJBTlRJTkVfU0tJUChkb21haW4p
ICkNCj4gKyAgICAgICAgcmV0dXJuIDA7DQo+ICsNCj4gKyAgICBCVUdfT04oIWhkLT5hcmNoLnBh
Z2luZ19tb2RlIHx8ICFpb21tdS0+ZGV2X3RhYmxlLmJ1ZmZlcik7DQo+IA0KPiAtICAgIEJVR19P
TiggIWhkLT5hcmNoLnJvb3RfdGFibGUgfHwgIWhkLT5hcmNoLnBhZ2luZ19tb2RlIHx8DQo+IC0g
ICAgICAgICAgICAhaW9tbXUtPmRldl90YWJsZS5idWZmZXIgKTsNCj4gKyAgICByYyA9IGFsbG9j
YXRlX2RvbWFpbl9yZXNvdXJjZXMoaGQpOw0KPiArICAgIGlmICggcmMgKQ0KPiArICAgICAgICBy
ZXR1cm4gcmM7DQo+IA0KPiAgICAgIGlmICggaW9tbXVfaHdkb21fcGFzc3Rocm91Z2ggJiYgaXNf
aGFyZHdhcmVfZG9tYWluKGRvbWFpbikgKQ0KPiAgICAgICAgICB2YWxpZCA9IDA7DQo+IEBAIC0x
NDgsNiArMTY4LDggQEAgc3RhdGljIHZvaWQgYW1kX2lvbW11X3NldHVwX2RvbWFpbl9kZXZpYw0K
PiANCj4gICAgICAgICAgYW1kX2lvbW11X2ZsdXNoX2lvdGxiKGRldmZuLCBwZGV2LA0KPiBJTlZf
SU9NTVVfQUxMX1BBR0VTX0FERFJFU1MsIDApOw0KPiAgICAgIH0NCj4gKw0KPiArICAgIHJldHVy
biAwOw0KPiAgfQ0KPiANCj4gIGludCBfX2luaXQgYWNwaV9pdnJzX2luaXQodm9pZCkNCj4gQEAg
LTIxNywxNyArMjM5LDYgQEAgaW50IGFtZF9pb21tdV9hbGxvY19yb290KHN0cnVjdCBkb21haW5f
aQ0KPiAgICAgIHJldHVybiAwOw0KPiAgfQ0KPiANCj4gLXN0YXRpYyBpbnQgX19tdXN0X2NoZWNr
IGFsbG9jYXRlX2RvbWFpbl9yZXNvdXJjZXMoc3RydWN0IGRvbWFpbl9pb21tdQ0KPiAqaGQpDQo+
IC17DQo+IC0gICAgaW50IHJjOw0KPiAtDQo+IC0gICAgc3Bpbl9sb2NrKCZoZC0+YXJjaC5tYXBw
aW5nX2xvY2spOw0KPiAtICAgIHJjID0gYW1kX2lvbW11X2FsbG9jX3Jvb3QoaGQpOw0KPiAtICAg
IHNwaW5fdW5sb2NrKCZoZC0+YXJjaC5tYXBwaW5nX2xvY2spOw0KPiAtDQo+IC0gICAgcmV0dXJu
IHJjOw0KPiAtfQ0KPiAtDQo+ICBpbnQgYW1kX2lvbW11X2dldF9wYWdpbmdfbW9kZSh1bnNpZ25l
ZCBsb25nIGVudHJpZXMpDQo+ICB7DQo+ICAgICAgaW50IGxldmVsID0gMTsNCj4gQEAgLTI5MSw2
ICszMDIsOSBAQCBzdGF0aWMgdm9pZCBhbWRfaW9tbXVfZGlzYWJsZV9kb21haW5fZGV2DQo+ICAg
ICAgaW50IHJlcV9pZDsNCj4gICAgICB1OCBidXMgPSBwZGV2LT5idXM7DQo+IA0KPiArICAgIGlm
ICggUVVBUkFOVElORV9TS0lQKGRvbWFpbikgKQ0KPiArICAgICAgICByZXR1cm47DQo+ICsNCj4g
ICAgICBCVUdfT04gKCBpb21tdS0+ZGV2X3RhYmxlLmJ1ZmZlciA9PSBOVUxMICk7DQo+ICAgICAg
cmVxX2lkID0gZ2V0X2RtYV9yZXF1ZXN0b3JfaWQoaW9tbXUtPnNlZywgUENJX0JERjIoYnVzLCBk
ZXZmbikpOw0KPiAgICAgIHRhYmxlID0gaW9tbXUtPmRldl90YWJsZS5idWZmZXI7DQo+IEBAIC0z
MzcsNyArMzUxLDYgQEAgc3RhdGljIGludCByZWFzc2lnbl9kZXZpY2Uoc3RydWN0IGRvbWFpbg0K
PiAgew0KPiAgICAgIHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11Ow0KPiAgICAgIGludCBiZGYsIHJj
Ow0KPiAtICAgIHN0cnVjdCBkb21haW5faW9tbXUgKnQgPSBkb21faW9tbXUodGFyZ2V0KTsNCj4g
DQo+ICAgICAgYmRmID0gUENJX0JERjIocGRldi0+YnVzLCBwZGV2LT5kZXZmbik7DQo+ICAgICAg
aW9tbXUgPSBmaW5kX2lvbW11X2Zvcl9kZXZpY2UocGRldi0+c2VnLCBiZGYpOw0KPiBAQCAtMzU4
LDExICszNzEsMTAgQEAgc3RhdGljIGludCByZWFzc2lnbl9kZXZpY2Uoc3RydWN0IGRvbWFpbg0K
PiAgICAgICAgICBwZGV2LT5kb21haW4gPSB0YXJnZXQ7DQo+ICAgICAgfQ0KPiANCj4gLSAgICBy
YyA9IGFsbG9jYXRlX2RvbWFpbl9yZXNvdXJjZXModCk7DQo+ICsgICAgcmMgPSBhbWRfaW9tbXVf
c2V0dXBfZG9tYWluX2RldmljZSh0YXJnZXQsIGlvbW11LCBkZXZmbiwgcGRldik7DQo+ICAgICAg
aWYgKCByYyApDQo+ICAgICAgICAgIHJldHVybiByYzsNCj4gDQo+IC0gICAgYW1kX2lvbW11X3Nl
dHVwX2RvbWFpbl9kZXZpY2UodGFyZ2V0LCBpb21tdSwgZGV2Zm4sIHBkZXYpOw0KPiAgICAgIEFN
RF9JT01NVV9ERUJVRygiUmUtYXNzaWduICUwNHg6JTAyeDolMDJ4LiV1IGZyb20gZG9tJWQgdG8N
Cj4gZG9tJWRcbiIsDQo+ICAgICAgICAgICAgICAgICAgICAgIHBkZXYtPnNlZywgcGRldi0+YnVz
LCBQQ0lfU0xPVChkZXZmbiksIFBDSV9GVU5DKGRldmZuKSwNCj4gICAgICAgICAgICAgICAgICAg
ICAgc291cmNlLT5kb21haW5faWQsIHRhcmdldC0+ZG9tYWluX2lkKTsNCj4gQEAgLTUxOSw4ICs1
MzEsNyBAQCBzdGF0aWMgaW50IGFtZF9pb21tdV9hZGRfZGV2aWNlKHU4IGRldmZuDQo+ICAgICAg
ICAgIHNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmlvbW11LT5sb2NrLCBmbGFncyk7DQo+ICAgICAg
fQ0KPiANCj4gLSAgICBhbWRfaW9tbXVfc2V0dXBfZG9tYWluX2RldmljZShwZGV2LT5kb21haW4s
IGlvbW11LCBkZXZmbiwgcGRldik7DQo+IC0gICAgcmV0dXJuIDA7DQo+ICsgICAgcmV0dXJuIGFt
ZF9pb21tdV9zZXR1cF9kb21haW5fZGV2aWNlKHBkZXYtPmRvbWFpbiwgaW9tbXUsIGRldmZuLA0K
PiBwZGV2KTsNCj4gIH0NCj4gDQo+ICBzdGF0aWMgaW50IGFtZF9pb21tdV9yZW1vdmVfZGV2aWNl
KHU4IGRldmZuLCBzdHJ1Y3QgcGNpX2RldiAqcGRldikNCj4gLS0tIGEveGVuL2RyaXZlcnMvcGFz
c3Rocm91Z2gvaW9tbXUuYw0KPiArKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5j
DQo+IEBAIC0zMSw5ICszMSwyNCBAQCBib29sX3QgX19pbml0ZGF0YSBpb21tdV9lbmFibGUgPSAx
Ow0KPiAgYm9vbF90IF9fcmVhZF9tb3N0bHkgaW9tbXVfZW5hYmxlZDsNCj4gIGJvb2xfdCBfX3Jl
YWRfbW9zdGx5IGZvcmNlX2lvbW11Ow0KPiAgYm9vbF90IF9fcmVhZF9tb3N0bHkgaW9tbXVfdmVy
Ym9zZTsNCj4gLWJvb2wgX19yZWFkX21vc3RseSBpb21tdV9xdWFyYW50aW5lID0gdHJ1ZTsNCj4g
IGJvb2xfdCBfX3JlYWRfbW9zdGx5IGlvbW11X2NyYXNoX2Rpc2FibGU7DQo+IA0KPiArI2RlZmlu
ZSBJT01NVV9xdWFyYW50aW5lX25vbmUgICAgICAgIDAgLyogYWthIGZhbHNlICovDQo+ICsjZGVm
aW5lIElPTU1VX3F1YXJhbnRpbmVfZmF1bHQgICAgICAgMSAvKiBha2EgdHJ1ZSAqLw0KPiArI2Rl
ZmluZSBJT01NVV9xdWFyYW50aW5lX3dyaXRlX2ZhdWx0IDINCj4gKyNpZmRlZiBDT05GSUdfSEFT
X1BDSQ0KPiArdWludDhfdCBfX3JlYWRfbW9zdGx5IGlvbW11X3F1YXJhbnRpbmUgPQ0KPiArIyBp
ZiBkZWZpbmVkKENPTkZJR19JT01NVV9RVUFSQU5USU5FX05PTkUpDQo+ICsgICAgSU9NTVVfcXVh
cmFudGluZV9ub25lOw0KPiArIyBlbGlmIGRlZmluZWQoQ09ORklHX0lPTU1VX1FVQVJBTlRJTkVf
QkFTSUMpDQo+ICsgICAgSU9NTVVfcXVhcmFudGluZV9mYXVsdDsNCj4gKyMgZWxpZiBkZWZpbmVk
KENPTkZJR19JT01NVV9RVUFSQU5USU5FX0ZVTEwpDQo+ICsgICAgSU9NTVVfcXVhcmFudGluZV93
cml0ZV9mYXVsdDsNCj4gKyMgZW5kaWYNCj4gKyNlbHNlDQo+ICsjIGRlZmluZSBpb21tdV9xdWFy
YW50aW5lIElPTU1VX3F1YXJhbnRpbmVfbm9uZQ0KPiArI2VuZGlmIC8qIENPTkZJR19IQVNfUENJ
ICovDQo+ICsNCj4gIHN0YXRpYyBib29sIF9faHdkb21faW5pdGRhdGEgaW9tbXVfaHdkb21fbm9u
ZTsNCj4gIGJvb2wgX19od2RvbV9pbml0ZGF0YSBpb21tdV9od2RvbV9zdHJpY3Q7DQo+ICBib29s
IF9fcmVhZF9tb3N0bHkgaW9tbXVfaHdkb21fcGFzc3Rocm91Z2g7DQo+IEBAIC02OCw4ICs4Mywx
MiBAQCBzdGF0aWMgaW50IF9faW5pdCBwYXJzZV9pb21tdV9wYXJhbShjb25zDQo+ICAgICAgICAg
IGVsc2UgaWYgKCAodmFsID0gcGFyc2VfYm9vbGVhbigiZm9yY2UiLCBzLCBzcykpID49IDAgfHwN
Cj4gICAgICAgICAgICAgICAgICAgICh2YWwgPSBwYXJzZV9ib29sZWFuKCJyZXF1aXJlZCIsIHMs
IHNzKSkgPj0gMCApDQo+ICAgICAgICAgICAgICBmb3JjZV9pb21tdSA9IHZhbDsNCj4gKyNpZmRl
ZiBDT05GSUdfSEFTX1BDSQ0KPiAgICAgICAgICBlbHNlIGlmICggKHZhbCA9IHBhcnNlX2Jvb2xl
YW4oInF1YXJhbnRpbmUiLCBzLCBzcykpID49IDAgKQ0KPiAgICAgICAgICAgICAgaW9tbXVfcXVh
cmFudGluZSA9IHZhbDsNCj4gKyAgICAgICAgZWxzZSBpZiAoIHNzID09IHMgKyAxNSAmJiAhc3Ry
bmNtcChzLCAicXVhcmFudGluZT1mdWxsIiwgMTUpICkNCj4gKyAgICAgICAgICAgIGlvbW11X3F1
YXJhbnRpbmUgPSBJT01NVV9xdWFyYW50aW5lX3dyaXRlX2ZhdWx0Ow0KPiArI2VuZGlmDQo+ICAj
aWZkZWYgQ09ORklHX1g4Ng0KPiAgICAgICAgICBlbHNlIGlmICggKHZhbCA9IHBhcnNlX2Jvb2xl
YW4oImlnZngiLCBzLCBzcykpID49IDAgKQ0KPiAgICAgICAgICAgICAgaW9tbXVfaWdmeCA9IHZh
bDsNCj4gQEAgLTQ0OCw3ICs0NjcsNyBAQCBzdGF0aWMgaW50IF9faW5pdCBpb21tdV9xdWFyYW50
aW5lX2luaXQoDQo+ICAgICAgZG9tX2lvLT5vcHRpb25zIHw9IFhFTl9ET01DVExfQ0RGX2lvbW11
Ow0KPiANCj4gICAgICByYyA9IGlvbW11X2RvbWFpbl9pbml0KGRvbV9pbywgMCk7DQo+IC0gICAg
aWYgKCByYyApDQo+ICsgICAgaWYgKCByYyB8fCBpb21tdV9xdWFyYW50aW5lIDwgSU9NTVVfcXVh
cmFudGluZV93cml0ZV9mYXVsdCApDQo+ICAgICAgICAgIHJldHVybiByYzsNCj4gDQo+ICAgICAg
aWYgKCAhaGQtPnBsYXRmb3JtX29wcy0+cXVhcmFudGluZV9pbml0ICkNCj4gLS0tIGEveGVuL2Ry
aXZlcnMvcGFzc3Rocm91Z2gvdnRkL2lvbW11LmMNCj4gKysrIGIveGVuL2RyaXZlcnMvcGFzc3Ro
cm91Z2gvdnRkL2lvbW11LmMNCj4gQEAgLTQxLDYgKzQxLDkgQEANCj4gICNpbmNsdWRlICJ2dGQu
aCINCj4gICNpbmNsdWRlICIuLi9hdHMuaCINCj4gDQo+ICsvKiBkb21faW8gaXMgdXNlZCBhcyBh
IHNlbnRpbmVsIGZvciBxdWFyYW50aW5lZCBkZXZpY2VzICovDQo+ICsjZGVmaW5lIFFVQVJBTlRJ
TkVfU0tJUChkKSAoKGQpID09IGRvbV9pbyAmJiAhZG9tX2lvbW11KGQpLQ0KPiA+YXJjaC5wZ2Rf
bWFkZHIpDQo+ICsNCj4gIHN0cnVjdCBtYXBwZWRfcm1yciB7DQo+ICAgICAgc3RydWN0IGxpc3Rf
aGVhZCBsaXN0Ow0KPiAgICAgIHU2NCBiYXNlLCBlbmQ7DQo+IEBAIC0xMjk0LDYgKzEyOTcsOSBA
QCBpbnQgZG9tYWluX2NvbnRleHRfbWFwcGluZ19vbmUoDQo+ICAgICAgaW50IGFnYXcsIHJjLCBy
ZXQ7DQo+ICAgICAgYm9vbF90IGZsdXNoX2Rldl9pb3RsYjsNCj4gDQo+ICsgICAgaWYgKCBRVUFS
QU5USU5FX1NLSVAoZG9tYWluKSApDQo+ICsgICAgICAgIHJldHVybiAwOw0KPiArDQo+ICAgICAg
QVNTRVJUKHBjaWRldnNfbG9ja2VkKCkpOw0KPiAgICAgIHNwaW5fbG9jaygmaW9tbXUtPmxvY2sp
Ow0KPiAgICAgIG1hZGRyID0gYnVzX3RvX2NvbnRleHRfbWFkZHIoaW9tbXUsIGJ1cyk7DQo+IEBA
IC0xNTQ4LDYgKzE1NTQsOSBAQCBpbnQgZG9tYWluX2NvbnRleHRfdW5tYXBfb25lKA0KPiAgICAg
IGludCBpb21tdV9kb21pZCwgcmMsIHJldDsNCj4gICAgICBib29sX3QgZmx1c2hfZGV2X2lvdGxi
Ow0KPiANCj4gKyAgICBpZiAoIFFVQVJBTlRJTkVfU0tJUChkb21haW4pICkNCj4gKyAgICAgICAg
cmV0dXJuIDA7DQo+ICsNCj4gICAgICBBU1NFUlQocGNpZGV2c19sb2NrZWQoKSk7DQo+ICAgICAg
c3Bpbl9sb2NrKCZpb21tdS0+bG9jayk7DQo+IA0KPiBAQCAtMTYwOSw3ICsxNjE4LDcgQEAgc3Rh
dGljIGludCBkb21haW5fY29udGV4dF91bm1hcChzdHJ1Y3QgZA0KPiAgew0KPiAgICAgIHN0cnVj
dCBhY3BpX2RyaGRfdW5pdCAqZHJoZDsNCj4gICAgICBzdHJ1Y3QgdnRkX2lvbW11ICppb21tdTsN
Cj4gLSAgICBpbnQgcmV0ID0gMDsNCj4gKyAgICBpbnQgcmV0Ow0KPiAgICAgIHU4IHNlZyA9IHBk
ZXYtPnNlZywgYnVzID0gcGRldi0+YnVzLCB0bXBfYnVzLCB0bXBfZGV2Zm4sIHNlY2J1czsNCj4g
ICAgICBpbnQgZm91bmQgPSAwOw0KPiANCj4gQEAgLTE2MjUsMTQgKzE2MzQsMTIgQEAgc3RhdGlj
IGludCBkb21haW5fY29udGV4dF91bm1hcChzdHJ1Y3QgZA0KPiAgICAgICAgICAgICAgcHJpbnRr
KFZURFBSRUZJWCAiZCVkOkhvc3RicmlkZ2U6IHNraXAgJTA0eDolMDJ4OiUwMnguJXUNCj4gdW5t
YXBcbiIsDQo+ICAgICAgICAgICAgICAgICAgICAgZG9tYWluLT5kb21haW5faWQsIHNlZywgYnVz
LA0KPiAgICAgICAgICAgICAgICAgICAgIFBDSV9TTE9UKGRldmZuKSwgUENJX0ZVTkMoZGV2Zm4p
KTsNCj4gLSAgICAgICAgaWYgKCAhaXNfaGFyZHdhcmVfZG9tYWluKGRvbWFpbikgKQ0KPiAtICAg
ICAgICAgICAgcmV0dXJuIC1FUEVSTTsNCj4gLSAgICAgICAgZ290byBvdXQ7DQo+ICsgICAgICAg
IHJldHVybiBpc19oYXJkd2FyZV9kb21haW4oZG9tYWluKSA/IDAgOiAtRVBFUk07DQo+IA0KPiAg
ICAgIGNhc2UgREVWX1RZUEVfUENJZV9CUklER0U6DQo+ICAgICAgY2FzZSBERVZfVFlQRV9QQ0ll
MlBDSV9CUklER0U6DQo+ICAgICAgY2FzZSBERVZfVFlQRV9MRUdBQ1lfUENJX0JSSURHRToNCj4g
LSAgICAgICAgZ290byBvdXQ7DQo+ICsgICAgICAgIHJldHVybiAwOw0KPiANCj4gICAgICBjYXNl
IERFVl9UWVBFX1BDSWVfRU5EUE9JTlQ6DQo+ICAgICAgICAgIGlmICggaW9tbXVfZGVidWcgKQ0K
PiBAQCAtMTY3NiwxMCArMTY4MywxMiBAQCBzdGF0aWMgaW50IGRvbWFpbl9jb250ZXh0X3VubWFw
KHN0cnVjdCBkDQo+ICAgICAgICAgIGRwcmludGsoWEVOTE9HX0VSUiBWVERQUkVGSVgsDQo+ICJk
JWQ6dW5rbm93bigldSk6ICUwNHg6JTAyeDolMDJ4LiV1XG4iLA0KPiAgICAgICAgICAgICAgICAg
IGRvbWFpbi0+ZG9tYWluX2lkLCBwZGV2LT50eXBlLA0KPiAgICAgICAgICAgICAgICAgIHNlZywg
YnVzLCBQQ0lfU0xPVChkZXZmbiksIFBDSV9GVU5DKGRldmZuKSk7DQo+IC0gICAgICAgIHJldCA9
IC1FSU5WQUw7DQo+IC0gICAgICAgIGdvdG8gb3V0Ow0KPiArICAgICAgICByZXR1cm4gLUVJTlZB
TDsNCj4gICAgICB9DQo+IA0KPiArICAgIGlmICggUVVBUkFOVElORV9TS0lQKGRvbWFpbikgKQ0K
PiArICAgICAgICByZXR1cm4gcmV0Ow0KPiArDQo+ICAgICAgLyoNCj4gICAgICAgKiBpZiBubyBv
dGhlciBkZXZpY2VzIHVuZGVyIHRoZSBzYW1lIGlvbW11IG93bmVkIGJ5IHRoaXMgZG9tYWluLA0K
PiAgICAgICAqIGNsZWFyIGlvbW11IGluIGlvbW11X2JpdG1hcCBhbmQgY2xlYXIgZG9tYWluX2lk
IGluIGRvbWlkX2JpdG1wDQo+IEBAIC0xNzA1LDE2ICsxNzE0LDEyIEBAIHN0YXRpYyBpbnQgZG9t
YWluX2NvbnRleHRfdW5tYXAoc3RydWN0IGQNCj4gDQo+ICAgICAgICAgIGlvbW11X2RvbWlkID0g
ZG9tYWluX2lvbW11X2RvbWlkKGRvbWFpbiwgaW9tbXUpOw0KPiAgICAgICAgICBpZiAoIGlvbW11
X2RvbWlkID09IC0xICkNCj4gLSAgICAgICAgew0KPiAtICAgICAgICAgICAgcmV0ID0gLUVJTlZB
TDsNCj4gLSAgICAgICAgICAgIGdvdG8gb3V0Ow0KPiAtICAgICAgICB9DQo+ICsgICAgICAgICAg
ICByZXR1cm4gLUVJTlZBTDsNCj4gDQo+ICAgICAgICAgIGNsZWFyX2JpdChpb21tdV9kb21pZCwg
aW9tbXUtPmRvbWlkX2JpdG1hcCk7DQo+ICAgICAgICAgIGlvbW11LT5kb21pZF9tYXBbaW9tbXVf
ZG9taWRdID0gMDsNCj4gICAgICB9DQo+IA0KPiAtb3V0Og0KPiAgICAgIHJldHVybiByZXQ7DQo+
ICB9DQo+IA0KPiAtLS0gYS94ZW4vaW5jbHVkZS94ZW4vaW9tbXUuaA0KPiArKysgYi94ZW4vaW5j
bHVkZS94ZW4vaW9tbXUuaA0KPiBAQCAtNTMsNyArNTMsOSBAQCBzdGF0aWMgaW5saW5lIGJvb2xf
dCBkZm5fZXEoZGZuX3QgeCwgZGZuDQo+ICB9DQo+IA0KPiAgZXh0ZXJuIGJvb2xfdCBpb21tdV9l
bmFibGUsIGlvbW11X2VuYWJsZWQ7DQo+IC1leHRlcm4gYm9vbCBmb3JjZV9pb21tdSwgaW9tbXVf
cXVhcmFudGluZSwgaW9tbXVfdmVyYm9zZTsNCj4gK2V4dGVybiBib29sIGZvcmNlX2lvbW11LCBp
b21tdV92ZXJib3NlOw0KPiArLyogQm9vbGVhbiBleGNlcHQgZm9yIHRoZSBzcGVjaWZpYyBwdXJw
b3NlcyBvZg0KPiBkcml2ZXJzL3Bhc3N0aHJvdWdoL2lvbW11LmMuICovDQo+ICtleHRlcm4gdWlu
dDhfdCBpb21tdV9xdWFyYW50aW5lOw0KPiANCj4gICNpZmRlZiBDT05GSUdfWDg2DQo+ICBleHRl
cm4gZW51bSBfX3BhY2tlZCBpb21tdV9pbnRyZW1hcCB7DQpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZl
bEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxt
YW4vbGlzdGluZm8veGVuLWRldmVs

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 0D3B1105511
	for <lists+xen-devel@lfdr.de>; Thu, 21 Nov 2019 16:06:18 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iXnyX-0001wS-4Q; Thu, 21 Nov 2019 15:02:29 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=gidU=ZN=bitdefender.com=aisaila@srs-us1.protection.inumbo.net>)
 id 1iXnyV-0001wI-Fb
 for xen-devel@lists.xenproject.org; Thu, 21 Nov 2019 15:02:27 +0000
X-Inumbo-ID: ed33291c-0c6f-11ea-adbe-bc764e2007e4
Received: from EUR04-VI1-obe.outbound.protection.outlook.com (unknown
 [2a01:111:f400:fe0e::714])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id ed33291c-0c6f-11ea-adbe-bc764e2007e4;
 Thu, 21 Nov 2019 15:02:25 +0000 (UTC)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=bN9dM0VYm9QkFNYa8ZnMh4wyBb0J3pe1hU4eFVBkObS9s9ofzwQZ4XTJHY/NuRsWRqN0LlInLub+KcBd9H911EXt2Lzj9qcCcryXhD1aV2lFPVOWHgUhcp8UTFk3GdT1LLhFJCdcChMSSJkWEFuplWp0bQn8xgfNV2RTjbGusONdgczJjKawcjqbxeVOuOUMJVXa35Fq5j7YKbChLPTRErKUA5esfe8OhuHPeimd8EHcrtOB4bgPk/KPG8DIs6/uJEK0QcK9DYSz2h9KcF6vFhbBFll5TepwHQJezjbZ83sTJNA5f85D/eumPzXhK0wdMBGId+QY886+aEj0HgU79w==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=oX2Gn/OCswMxcRBFpIBBybEAaMTTuWUmwwv01x0P22g=;
 b=Up/P61/LC4DNZDkOJlChmrvYfEA6kldLO3SSvWuybby4Cd4MR1CIo1koOTHodjuBNxwK+TRSSFgr3jcM6N06dyhLsHZN2CQbgKsoatYJBatDdzeJifmrlvl7qy8NJPoL2DTIP3V0Esn8fX5rcroWtPPtUbcOVEOfo2olkvpA2UnP07pi5Ce4HZMk+XFL+ItIYNYwlhghqBawWx1mBdooENpaPAXDGm389NpJ9C3RVzsxVCovmBWZt01ZXIMl0vhvZNFmvtBhWfIm/2t9Io1aNzpUgX2+OK8HarqDhsATW7UvVHjjCCWmo9qe45qva3YQiSores36JUL2tKlsmQC5Xg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=bitdefender.com; dmarc=pass action=none
 header.from=bitdefender.com; dkim=pass header.d=bitdefender.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=bitdefender.onmicrosoft.com; s=selector2-bitdefender-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=oX2Gn/OCswMxcRBFpIBBybEAaMTTuWUmwwv01x0P22g=;
 b=Sl4bLRXxXkSvz5H62iRlDrw2j3jJFI/IxCj5Nyv3Jz2/xu7R436fEgVveMUDex+5BAEHAcnxzJuOoWznphcvSbg+NpGw39SNRuw2F9R1bFst0XA4JemeyzVU/nk74Exh/P3OL5zpjCw3svAcw90gjkm0svoWLsBeY69zeeHXXw8=
Received: from AM0PR02MB5553.eurprd02.prod.outlook.com (10.255.30.78) by
 AM0PR02MB5858.eurprd02.prod.outlook.com (52.132.213.14) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2451.30; Thu, 21 Nov 2019 15:02:23 +0000
Received: from AM0PR02MB5553.eurprd02.prod.outlook.com
 ([fe80::8cec:7638:734c:89d]) by AM0PR02MB5553.eurprd02.prod.outlook.com
 ([fe80::8cec:7638:734c:89d%4]) with mapi id 15.20.2474.019; Thu, 21 Nov 2019
 15:02:23 +0000
From: Alexandru Stefan ISAILA <aisaila@bitdefender.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH V3 2/2] x86/mm: Make use of the default access param from
 xc_altp2m_create_view
Thread-Index: AQHVoHytGfGqS+cYyU6c6j3Ysa8x8g==
Date: Thu, 21 Nov 2019 15:02:23 +0000
Message-ID: <20191121150124.15865-2-aisaila@bitdefender.com>
References: <20191121150124.15865-1-aisaila@bitdefender.com>
In-Reply-To: <20191121150124.15865-1-aisaila@bitdefender.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: FR2P281CA0005.DEUP281.PROD.OUTLOOK.COM
 (2603:10a6:d10:a::15) To AM0PR02MB5553.eurprd02.prod.outlook.com
 (2603:10a6:208:160::14)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=aisaila@bitdefender.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [91.199.104.6]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: dda0c9cd-0cbd-4676-b696-08d76e93d03f
x-ms-traffictypediagnostic: AM0PR02MB5858:|AM0PR02MB5858:|AM0PR02MB5858:
x-ms-exchange-transport-forked: True
x-microsoft-antispam-prvs: <AM0PR02MB585849E30128AB371902C83DAB4E0@AM0PR02MB5858.eurprd02.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:2958;
x-forefront-prvs: 0228DDDDD7
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(346002)(376002)(39860400002)(366004)(396003)(136003)(189003)(199004)(2501003)(3846002)(54906003)(5640700003)(26005)(6436002)(66066001)(186003)(5660300002)(386003)(6506007)(6512007)(2351001)(7736002)(52116002)(36756003)(305945005)(7416002)(76176011)(316002)(81156014)(81166006)(99286004)(64756008)(66476007)(50226002)(8936002)(66556008)(66446008)(66946007)(2906002)(14454004)(6486002)(4326008)(8676002)(25786009)(71200400001)(71190400001)(6916009)(102836004)(86362001)(478600001)(1076003)(14444005)(256004)(11346002)(446003)(2616005)(6116002);
 DIR:OUT; SFP:1102; SCL:1; SRVR:AM0PR02MB5858;
 H:AM0PR02MB5553.eurprd02.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: bitdefender.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: 6rI5KPy5oTDcxxuWCtJni1iOd9yVWn9dyWeq/KUtp/pnBhxgL4gTnMFFmizWMQK4veztQ/FH+kIR5NL25Sef3UcY/mv30rPRQMcfsm1fTNBII2PL+C5ewtDzjcULJyE4aeDYFdF8Wr5coF+wEw933F7eOWTu6xq22od3IPGc8Z4Levdyrpf+5g+hJohEhbU6YhB7kM67OmPi7V861wWWR5oVDUxeAN3sMipsSQLy9dCdhT20s5/9rrqG5dTk/5gwm9rYhEiLM52zZtqer/+/Gw9cYyqwLpwLDqkRcjHaK9Ki2Rc1KcH3HoC997XGW30JWqAFVmcNGFN0Vum2GQL1LsAyU1pp/JA8zUGbNAThSbj4teTYdN5Ba85/N/DBGdx4pJ8ea9pyQw2mE8uY9nEr0E0rkU+SrBFu8sbn88bYcIEFMiRlfxaHF+MOZcz8KUJ2
Content-ID: <1FB06FA4CA58054E99AD7EB8AFC996C2@eurprd02.prod.outlook.com>
MIME-Version: 1.0
X-OriginatorOrg: bitdefender.com
X-MS-Exchange-CrossTenant-Network-Message-Id: dda0c9cd-0cbd-4676-b696-08d76e93d03f
X-MS-Exchange-CrossTenant-originalarrivaltime: 21 Nov 2019 15:02:23.0987 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 487baf29-f1da-469a-9221-243f830c36f3
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: AjoY2ckbJNw59PkC6eq7/zukuBMvfcWSVEYtuztX/vzgNRP8nKWNlU2QAg1/ve/DNguzDePam2OEtK5oWU8/oRmTzLWyA+4Zsm2uHn1jeSU=
X-MS-Exchange-Transport-CrossTenantHeadersStamped: AM0PR02MB5858
Subject: [Xen-devel] [PATCH V3 2/2] x86/mm: Make use of the default access
 param from xc_altp2m_create_view
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Petre Ovidiu PIRCALABU <ppircalabu@bitdefender.com>,
 Kevin Tian <kevin.tian@intel.com>, Stefano Stabellini <sstabellini@kernel.org>,
 Julien Grall <julien@xen.org>, Razvan COJOCARU <rcojocaru@bitdefender.com>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tamas K Lengyel <tamas@tklengyel.com>,
 Jan Beulich <jbeulich@suse.com>, Jun Nakajima <jun.nakajima@intel.com>,
 Alexandru Stefan ISAILA <aisaila@bitdefender.com>,
 =?utf-8?B?Um9nZXIgUGF1IE1vbm7DqQ==?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QXQgdGhpcyBtb21lbnQgdGhlIGRlZmF1bHRfYWNjZXNzIHBhcmFtIGZyb20geGNfYWx0cDJtX2Ny
ZWF0ZV92aWV3IGlzDQpub3QgdXNlZC4NCg0KVGhpcyBwYXRjaCBhc3NpZ25zIGRlZmF1bHRfYWNj
ZXNzIHRvIHAybS0+ZGVmYXVsdF9hY2Nlc3MgYXQgdGhlIHRpbWUgb2YNCmluaXRpYWxpemluZyBh
IG5ldyBhbHRwMm0gdmlldy4NCg0KU2lnbmVkLW9mZi1ieTogQWxleGFuZHJ1IElzYWlsYSA8YWlz
YWlsYUBiaXRkZWZlbmRlci5jb20+DQotLS0NCkNDOiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3Vz
ZS5jb20+DQpDQzogQW5kcmV3IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4NCkND
OiBXZWkgTGl1IDx3bEB4ZW4ub3JnPg0KQ0M6ICJSb2dlciBQYXUgTW9ubsOpIiA8cm9nZXIucGF1
QGNpdHJpeC5jb20+DQpDQzogR2VvcmdlIER1bmxhcCA8R2VvcmdlLkR1bmxhcEBldS5jaXRyaXgu
Y29tPg0KQ0M6IElhbiBKYWNrc29uIDxpYW4uamFja3NvbkBldS5jaXRyaXguY29tPg0KQ0M6IEp1
bGllbiBHcmFsbCA8anVsaWVuQHhlbi5vcmc+DQpDQzogS29ucmFkIFJ6ZXN6dXRlayBXaWxrIDxr
b25yYWQud2lsa0BvcmFjbGUuY29tPg0KQ0M6IFN0ZWZhbm8gU3RhYmVsbGluaSA8c3N0YWJlbGxp
bmlAa2VybmVsLm9yZz4NCkNDOiBSYXp2YW4gQ29qb2NhcnUgPHJjb2pvY2FydUBiaXRkZWZlbmRl
ci5jb20+DQpDQzogVGFtYXMgSyBMZW5neWVsIDx0YW1hc0B0a2xlbmd5ZWwuY29tPg0KQ0M6IFBl
dHJlIFBpcmNhbGFidSA8cHBpcmNhbGFidUBiaXRkZWZlbmRlci5jb20+DQpDQzogR2VvcmdlIER1
bmxhcCA8Z2VvcmdlLmR1bmxhcEBldS5jaXRyaXguY29tPg0KQ0M6IEp1biBOYWthamltYSA8anVu
Lm5ha2FqaW1hQGludGVsLmNvbT4NCkNDOiBLZXZpbiBUaWFuIDxrZXZpbi50aWFuQGludGVsLmNv
bT4NCi0tLQ0KQ2hhbmdlcyBzaW5jZSBWMjoNCgktIERyb3Agc3RhdGljIGZyb20geGVubWVtX2Fj
Y2Vzc190b19wMm1fYWNjZXNzKCkgYW5kIGRlY2xhcmUgaXQNCmluIG1lbV9hY2Nlc3MuaA0KCS0g
VXNlIHhlbm1lbV9hY2Nlc3NfdG9fcDJtX2FjY2VzcygpIGluIHAybV9pbml0X25leHRfYWx0cDJt
KCkNCgktIFB1bGwgb3V0IHRoZSBwMm0gc3BlY2lmaWNzIGZyb20gcDJtX2luaXRfYWx0cDJtX2Vw
dCgpLg0KLS0tDQogeGVuL2FyY2gveDg2L2h2bS9odm0uYyAgICAgICAgICB8ICAzICsrLQ0KIHhl
bi9hcmNoL3g4Ni9tbS9tZW1fYWNjZXNzLmMgICAgfCAgNiArKystLS0NCiB4ZW4vYXJjaC94ODYv
bW0vcDJtLWVwdC5jICAgICAgIHwgIDYgLS0tLS0tDQogeGVuL2FyY2gveDg2L21tL3AybS5jICAg
ICAgICAgICB8IDI5ICsrKysrKysrKysrKysrKysrKysrKysrKystLS0tDQogeGVuL2luY2x1ZGUv
YXNtLXg4Ni9wMm0uaCAgICAgICB8ICAzICsrLQ0KIHhlbi9pbmNsdWRlL3B1YmxpYy9odm0vaHZt
X29wLmggfCAgMiAtLQ0KIHhlbi9pbmNsdWRlL3hlbi9tZW1fYWNjZXNzLmggICAgfCAgNCArKysr
DQogNyBmaWxlcyBjaGFuZ2VkLCAzNiBpbnNlcnRpb25zKCspLCAxNyBkZWxldGlvbnMoLSkNCg0K
ZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9odm0vaHZtLmMgYi94ZW4vYXJjaC94ODYvaHZtL2h2
bS5jDQppbmRleCA4YTJkNDMyNWY5Li44MmVhZDkxY2FkIDEwMDY0NA0KLS0tIGEveGVuL2FyY2gv
eDg2L2h2bS9odm0uYw0KKysrIGIveGVuL2FyY2gveDg2L2h2bS9odm0uYw0KQEAgLTQ2ODcsNyAr
NDY4Nyw4IEBAIHN0YXRpYyBpbnQgZG9fYWx0cDJtX29wKA0KICAgICB9DQogDQogICAgIGNhc2Ug
SFZNT1BfYWx0cDJtX2NyZWF0ZV9wMm06DQotICAgICAgICBpZiAoICEocmMgPSBwMm1faW5pdF9u
ZXh0X2FsdHAybShkLCAmYS51LnZpZXcudmlldykpICkNCisgICAgICAgIGlmICggIShyYyA9IHAy
bV9pbml0X25leHRfYWx0cDJtKGQsICZhLnUudmlldy52aWV3LA0KKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgYS51LnZpZXcuaHZtbWVtX2RlZmF1bHRfYWNjZXNzKSkg
KQ0KICAgICAgICAgICAgIHJjID0gX19jb3B5X3RvX2d1ZXN0KGFyZywgJmEsIDEpID8gLUVGQVVM
VCA6IDA7DQogICAgICAgICBicmVhazsNCiANCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvbW0v
bWVtX2FjY2Vzcy5jIGIveGVuL2FyY2gveDg2L21tL21lbV9hY2Nlc3MuYw0KaW5kZXggMzIwYjlm
ZTYyMS4uMDYzOTA1Njc0OCAxMDA2NDQNCi0tLSBhL3hlbi9hcmNoL3g4Ni9tbS9tZW1fYWNjZXNz
LmMNCisrKyBiL3hlbi9hcmNoL3g4Ni9tbS9tZW1fYWNjZXNzLmMNCkBAIC0zMTQsOSArMzE0LDkg
QEAgc3RhdGljIGludCBzZXRfbWVtX2FjY2VzcyhzdHJ1Y3QgZG9tYWluICpkLCBzdHJ1Y3QgcDJt
X2RvbWFpbiAqcDJtLA0KICAgICByZXR1cm4gcmM7DQogfQ0KIA0KLXN0YXRpYyBib29sIHhlbm1l
bV9hY2Nlc3NfdG9fcDJtX2FjY2VzcyhzdHJ1Y3QgcDJtX2RvbWFpbiAqcDJtLA0KLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ZW5tZW1fYWNjZXNzX3QgeGFjY2VzcywN
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcDJtX2FjY2Vzc190ICpw
YWNjZXNzKQ0KK2Jvb2wgeGVubWVtX2FjY2Vzc190b19wMm1fYWNjZXNzKHN0cnVjdCBwMm1fZG9t
YWluICpwMm0sDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGVubWVtX2FjY2Vz
c190IHhhY2Nlc3MsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcDJtX2FjY2Vz
c190ICpwYWNjZXNzKQ0KIHsNCiAgICAgc3RhdGljIGNvbnN0IHAybV9hY2Nlc3NfdCBtZW1hY2Nl
c3NbXSA9IHsNCiAjZGVmaW5lIEFDQ0VTUyhhYykgW1hFTk1FTV9hY2Nlc3NfIyNhY10gPSBwMm1f
YWNjZXNzXyMjYWMNCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvbW0vcDJtLWVwdC5jIGIveGVu
L2FyY2gveDg2L21tL3AybS1lcHQuYw0KaW5kZXggZjA2ZTUxOTA0YS4uMmJkYzkzYjY4OSAxMDA2
NDQNCi0tLSBhL3hlbi9hcmNoL3g4Ni9tbS9wMm0tZXB0LmMNCisrKyBiL3hlbi9hcmNoL3g4Ni9t
bS9wMm0tZXB0LmMNCkBAIC0xMzU3LDEzICsxMzU3LDcgQEAgdm9pZCBwMm1faW5pdF9hbHRwMm1f
ZXB0KHN0cnVjdCBkb21haW4gKmQsIHVuc2lnbmVkIGludCBpKQ0KICAgICBzdHJ1Y3QgcDJtX2Rv
bWFpbiAqaG9zdHAybSA9IHAybV9nZXRfaG9zdHAybShkKTsNCiAgICAgc3RydWN0IGVwdF9kYXRh
ICplcHQ7DQogDQotICAgIHAybS0+ZGVmYXVsdF9hY2Nlc3MgPSBob3N0cDJtLT5kZWZhdWx0X2Fj
Y2VzczsNCi0gICAgcDJtLT5kb21haW4gPSBob3N0cDJtLT5kb21haW47DQotDQotICAgIHAybS0+
Z2xvYmFsX2xvZ2RpcnR5ID0gaG9zdHAybS0+Z2xvYmFsX2xvZ2RpcnR5Ow0KICAgICBwMm0tPmVw
dC5hZCA9IGhvc3RwMm0tPmVwdC5hZDsNCi0gICAgcDJtLT5taW5fcmVtYXBwZWRfZ2ZuID0gZ2Zu
X3goSU5WQUxJRF9HRk4pOw0KLSAgICBwMm0tPm1heF9tYXBwZWRfcGZuID0gcDJtLT5tYXhfcmVt
YXBwZWRfZ2ZuID0gMDsNCiAgICAgZXB0ID0gJnAybS0+ZXB0Ow0KICAgICBlcHQtPm1mbiA9IHBh
Z2V0YWJsZV9nZXRfcGZuKHAybV9nZXRfcGFnZXRhYmxlKHAybSkpOw0KICAgICBkLT5hcmNoLmFs
dHAybV9lcHRwW2ldID0gZXB0LT5lcHRwOw0KZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9tbS9w
Mm0uYyBiL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYw0KaW5kZXggMmI1MWE3ZjUwZi4uMThmNWIyZWYy
OSAxMDA2NDQNCi0tLSBhL3hlbi9hcmNoL3g4Ni9tbS9wMm0uYw0KKysrIGIveGVuL2FyY2gveDg2
L21tL3AybS5jDQpAQCAtMjUsNiArMjUsNyBAQA0KIA0KICNpbmNsdWRlIDx4ZW4vZ3Vlc3RfYWNj
ZXNzLmg+IC8qIGNvcHlfZnJvbV9ndWVzdCgpICovDQogI2luY2x1ZGUgPHhlbi9pb21tdS5oPg0K
KyNpbmNsdWRlIDx4ZW4vbWVtX2FjY2Vzcy5oPg0KICNpbmNsdWRlIDx4ZW4vdm1fZXZlbnQuaD4N
CiAjaW5jbHVkZSA8eGVuL2V2ZW50Lmg+DQogI2luY2x1ZGUgPHB1YmxpYy92bV9ldmVudC5oPg0K
QEAgLTI1MzMsNyArMjUzNCw4IEBAIHZvaWQgcDJtX2ZsdXNoX2FsdHAybShzdHJ1Y3QgZG9tYWlu
ICpkKQ0KICAgICBhbHRwMm1fbGlzdF91bmxvY2soZCk7DQogfQ0KIA0KLXN0YXRpYyBpbnQgcDJt
X2FjdGl2YXRlX2FsdHAybShzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBpbnQgaWR4KQ0KK3N0
YXRpYyBpbnQgcDJtX2FjdGl2YXRlX2FsdHAybShzdHJ1Y3QgZG9tYWluICpkLCB1bnNpZ25lZCBp
bnQgaWR4LA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMm1fYWNjZXNzX3QgaHZt
bWVtX2RlZmF1bHRfYWNjZXNzKQ0KIHsNCiAgICAgc3RydWN0IHAybV9kb21haW4gKmhvc3RwMm0s
ICpwMm07DQogICAgIGludCByYzsNCkBAIC0yNTU5LDYgKzI1NjEsMTIgQEAgc3RhdGljIGludCBw
Mm1fYWN0aXZhdGVfYWx0cDJtKHN0cnVjdCBkb21haW4gKmQsIHVuc2lnbmVkIGludCBpZHgpDQog
ICAgICAgICBnb3RvIG91dDsNCiAgICAgfQ0KIA0KKyAgICBwMm0tPmRlZmF1bHRfYWNjZXNzID0g
aHZtbWVtX2RlZmF1bHRfYWNjZXNzOw0KKyAgICBwMm0tPmRvbWFpbiA9IGhvc3RwMm0tPmRvbWFp
bjsNCisgICAgcDJtLT5nbG9iYWxfbG9nZGlydHkgPSBob3N0cDJtLT5nbG9iYWxfbG9nZGlydHk7
DQorICAgIHAybS0+bWluX3JlbWFwcGVkX2dmbiA9IGdmbl94KElOVkFMSURfR0ZOKTsNCisgICAg
cDJtLT5tYXhfbWFwcGVkX3BmbiA9IHAybS0+bWF4X3JlbWFwcGVkX2dmbiA9IDA7DQorDQogICAg
IHAybV9pbml0X2FsdHAybV9lcHQoZCwgaWR4KTsNCiANCiAgb3V0Og0KQEAgLTI1NzAsNiArMjU3
OCw3IEBAIHN0YXRpYyBpbnQgcDJtX2FjdGl2YXRlX2FsdHAybShzdHJ1Y3QgZG9tYWluICpkLCB1
bnNpZ25lZCBpbnQgaWR4KQ0KIGludCBwMm1faW5pdF9hbHRwMm1fYnlfaWQoc3RydWN0IGRvbWFp
biAqZCwgdW5zaWduZWQgaW50IGlkeCkNCiB7DQogICAgIGludCByYyA9IC1FSU5WQUw7DQorICAg
IHN0cnVjdCBwMm1fZG9tYWluICpob3N0cDJtID0gcDJtX2dldF9ob3N0cDJtKGQpOw0KIA0KICAg
ICBpZiAoIGlkeCA+PSBNQVhfQUxUUDJNICkNCiAgICAgICAgIHJldHVybiByYzsNCkBAIC0yNTc3
LDE2ICsyNTg2LDIzIEBAIGludCBwMm1faW5pdF9hbHRwMm1fYnlfaWQoc3RydWN0IGRvbWFpbiAq
ZCwgdW5zaWduZWQgaW50IGlkeCkNCiAgICAgYWx0cDJtX2xpc3RfbG9jayhkKTsNCiANCiAgICAg
aWYgKCBkLT5hcmNoLmFsdHAybV9lcHRwW2lkeF0gPT0gbWZuX3goSU5WQUxJRF9NRk4pICkNCi0g
ICAgICAgIHJjID0gcDJtX2FjdGl2YXRlX2FsdHAybShkLCBpZHgpOw0KKyAgICAgICAgcmMgPSBw
Mm1fYWN0aXZhdGVfYWx0cDJtKGQsIGlkeCwgaG9zdHAybS0+ZGVmYXVsdF9hY2Nlc3MpOw0KIA0K
ICAgICBhbHRwMm1fbGlzdF91bmxvY2soZCk7DQogICAgIHJldHVybiByYzsNCiB9DQogDQotaW50
IHAybV9pbml0X25leHRfYWx0cDJtKHN0cnVjdCBkb21haW4gKmQsIHVpbnQxNl90ICppZHgpDQor
aW50IHAybV9pbml0X25leHRfYWx0cDJtKHN0cnVjdCBkb21haW4gKmQsIHVpbnQxNl90ICppZHgs
DQorICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQxNl90IGh2bW1lbV9kZWZhdWx0X2FjY2Vz
cykNCiB7DQogICAgIGludCByYyA9IC1FSU5WQUw7DQogICAgIHVuc2lnbmVkIGludCBpOw0KKyAg
ICBwMm1fYWNjZXNzX3QgYTsNCisgICAgc3RydWN0IHAybV9kb21haW4gKnAybTsNCisNCisNCisg
ICAgaWYgKCBodm1tZW1fZGVmYXVsdF9hY2Nlc3MgPiBYRU5NRU1fYWNjZXNzX2RlZmF1bHQgKQ0K
KyAgICAgICAgcmV0dXJuIHJjOw0KIA0KICAgICBhbHRwMm1fbGlzdF9sb2NrKGQpOw0KIA0KQEAg
LTI1OTUsNyArMjYxMSwxMiBAQCBpbnQgcDJtX2luaXRfbmV4dF9hbHRwMm0oc3RydWN0IGRvbWFp
biAqZCwgdWludDE2X3QgKmlkeCkNCiAgICAgICAgIGlmICggZC0+YXJjaC5hbHRwMm1fZXB0cFtp
XSAhPSBtZm5feChJTlZBTElEX01GTikgKQ0KICAgICAgICAgICAgIGNvbnRpbnVlOw0KIA0KLSAg
ICAgICAgcmMgPSBwMm1fYWN0aXZhdGVfYWx0cDJtKGQsIGkpOw0KKyAgICAgICAgcDJtID0gZC0+
YXJjaC5hbHRwMm1fcDJtW2ldOw0KKw0KKyAgICAgICAgaWYgKCAheGVubWVtX2FjY2Vzc190b19w
Mm1fYWNjZXNzKHAybSwgaHZtbWVtX2RlZmF1bHRfYWNjZXNzLCAmYSkgKQ0KKyAgICAgICAgICAg
IHJldHVybiAtRUlOVkFMOw0KKw0KKyAgICAgICAgcmMgPSBwMm1fYWN0aXZhdGVfYWx0cDJtKGQs
IGksIGEpOw0KIA0KICAgICAgICAgaWYgKCAhcmMgKQ0KICAgICAgICAgICAgICppZHggPSBpOw0K
ZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL2FzbS14ODYvcDJtLmggYi94ZW4vaW5jbHVkZS9hc20t
eDg2L3AybS5oDQppbmRleCA5NDI4NWRiMWI0Li4zMjFkNWU3MGE4IDEwMDY0NA0KLS0tIGEveGVu
L2luY2x1ZGUvYXNtLXg4Ni9wMm0uaA0KKysrIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9wMm0uaA0K
QEAgLTg4NCw3ICs4ODQsOCBAQCBib29sIHAybV9hbHRwMm1fZ2V0X29yX3Byb3BhZ2F0ZShzdHJ1
Y3QgcDJtX2RvbWFpbiAqYXAybSwgdW5zaWduZWQgbG9uZyBnZm5fbCwNCiBpbnQgcDJtX2luaXRf
YWx0cDJtX2J5X2lkKHN0cnVjdCBkb21haW4gKmQsIHVuc2lnbmVkIGludCBpZHgpOw0KIA0KIC8q
IEZpbmQgYW4gYXZhaWxhYmxlIGFsdGVybmF0ZSBwMm0gYW5kIG1ha2UgaXQgdmFsaWQgKi8NCi1p
bnQgcDJtX2luaXRfbmV4dF9hbHRwMm0oc3RydWN0IGRvbWFpbiAqZCwgdWludDE2X3QgKmlkeCk7
DQoraW50IHAybV9pbml0X25leHRfYWx0cDJtKHN0cnVjdCBkb21haW4gKmQsIHVpbnQxNl90ICpp
ZHgsDQorICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQxNl90IGh2bW1lbV9kZWZhdWx0X2Fj
Y2Vzcyk7DQogDQogLyogTWFrZSBhIHNwZWNpZmljIGFsdGVybmF0ZSBwMm0gaW52YWxpZCAqLw0K
IGludCBwMm1fZGVzdHJveV9hbHRwMm1fYnlfaWQoc3RydWN0IGRvbWFpbiAqZCwgdW5zaWduZWQg
aW50IGlkeCk7DQpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvcHVibGljL2h2bS9odm1fb3AuaCBi
L3hlbi9pbmNsdWRlL3B1YmxpYy9odm0vaHZtX29wLmgNCmluZGV4IDEwYmEwMTQ5ZjEuLmJkNDRj
ZDBmNTggMTAwNjQ0DQotLS0gYS94ZW4vaW5jbHVkZS9wdWJsaWMvaHZtL2h2bV9vcC5oDQorKysg
Yi94ZW4vaW5jbHVkZS9wdWJsaWMvaHZtL2h2bV9vcC5oDQpAQCAtMjUyLDggKzI1Miw2IEBAIERF
RklORV9YRU5fR1VFU1RfSEFORExFKHhlbl9odm1fYWx0cDJtX3ZjcHVfZGlzYWJsZV9ub3RpZnlf
dCk7DQogc3RydWN0IHhlbl9odm1fYWx0cDJtX3ZpZXcgew0KICAgICAvKiBJTi9PVVQgdmFyaWFi
bGUgKi8NCiAgICAgdWludDE2X3QgdmlldzsNCi0gICAgLyogQ3JlYXRlIHZpZXcgb25seTogZGVm
YXVsdCBhY2Nlc3MgdHlwZQ0KLSAgICAgKiBOT1RFOiBjdXJyZW50bHkgaWdub3JlZCAqLw0KICAg
ICB1aW50MTZfdCBodm1tZW1fZGVmYXVsdF9hY2Nlc3M7IC8qIHhlbm1lbV9hY2Nlc3NfdCAqLw0K
IH07DQogdHlwZWRlZiBzdHJ1Y3QgeGVuX2h2bV9hbHRwMm1fdmlldyB4ZW5faHZtX2FsdHAybV92
aWV3X3Q7DQpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUveGVuL21lbV9hY2Nlc3MuaCBiL3hlbi9p
bmNsdWRlL3hlbi9tZW1fYWNjZXNzLmgNCmluZGV4IDAwZTU5NGEwYWQuLmUwYWI1YjI3NzUgMTAw
NjQ0DQotLS0gYS94ZW4vaW5jbHVkZS94ZW4vbWVtX2FjY2Vzcy5oDQorKysgYi94ZW4vaW5jbHVk
ZS94ZW4vbWVtX2FjY2Vzcy5oDQpAQCAtNTgsNiArNTgsMTAgQEAgdHlwZWRlZiBlbnVtIHsNCiAg
ICAgLyogTk9URTogQXNzdW1lZCB0byBiZSBvbmx5IDQgYml0cyByaWdodCBub3cgb24geDg2LiAq
Lw0KIH0gcDJtX2FjY2Vzc190Ow0KIA0KK2Jvb2wgeGVubWVtX2FjY2Vzc190b19wMm1fYWNjZXNz
KHN0cnVjdCBwMm1fZG9tYWluICpwMm0sDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHhlbm1lbV9hY2Nlc3NfdCB4YWNjZXNzLA0KKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBwMm1fYWNjZXNzX3QgKnBhY2Nlc3MpOw0KKw0KIC8qDQogICog
U2V0IGFjY2VzcyB0eXBlIGZvciBhIHJlZ2lvbiBvZiBnZm5zLg0KICAqIElmIGdmbiA9PSBJTlZB
TElEX0dGTiwgc2V0cyB0aGUgZGVmYXVsdCBhY2Nlc3MgdHlwZS4NCi0tIA0KMi4xNy4xDQoNCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBt
YWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMu
eGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

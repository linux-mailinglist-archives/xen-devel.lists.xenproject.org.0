Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 599CFBB98D
	for <lists+xen-devel@lfdr.de>; Mon, 23 Sep 2019 18:26:50 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iCR6w-0001iN-51; Mon, 23 Sep 2019 16:22:50 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=cYas=XS=citrix.com=paul.durrant@srs-us1.protection.inumbo.net>)
 id 1iCR6u-0001iI-JP
 for xen-devel@lists.xenproject.org; Mon, 23 Sep 2019 16:22:48 +0000
X-Inumbo-ID: 60d8e364-de1e-11e9-b76c-bc764e2007e4
Received: from esa5.hc3370-68.iphmx.com (unknown [216.71.155.168])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 60d8e364-de1e-11e9-b76c-bc764e2007e4;
 Mon, 23 Sep 2019 16:22:47 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1569255767;
 h=from:to:cc:subject:date:message-id:references:
 in-reply-to:content-transfer-encoding:mime-version;
 bh=jYyitHFzWp+RvOfWMH1lyxSkP+/z1Oc11rekwIWpJq0=;
 b=LEN7VRuJnY3Zubx7Kwoq/8Dp0qAT+S2GkaqSQug96JyHPeZSMesDpOcg
 QvvfWK+Z3kOhjJ/U67M7NFCR8SoDDvDp9t1J+i72KZzkJ2StXgoYVKdNN
 07GkQHUI0uLzwTgPqWWQaijsswmbNM2T1vzZaBwHmYJhOut6wr0FZ6wbt I=;
Authentication-Results: esa5.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=Paul.Durrant@citrix.com;
 spf=Pass smtp.mailfrom=Paul.Durrant@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 Paul.Durrant@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="Paul.Durrant@citrix.com"; x-conformance=sidf_compatible
Received-SPF: Pass (esa5.hc3370-68.iphmx.com: domain of
 Paul.Durrant@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="Paul.Durrant@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83 ~all"
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: hnbvoy1v4RiQ9eWlVQDfCRVO3OAVmERHcmOi8SQNOR9dHoJ7c+UHyoRcWLfraumVVXu4vG2UbL
 7aFmAkvk1SqUphR8uTe9NN//ott4ldbpayxvCrw/kOWIxNpANgfDifJowDCSLyYVGvQiMBWAn/
 GSRkt64AeHFeio6F6TlzroGvori0KVwlMuRIlv1gdsowpQzgTurMnmRmC3bIIjXmZCjqQuhmlr
 j4xoeoG1RK8mPaQQ8q5KXl2nZjolC27VA1fJY8WncgWzMhCR0wpUKIIIVazItXhIcaqxhYuU+X
 4Ds=
X-SBRS: 2.7
X-MesageID: 6155603
X-Ironport-Server: esa5.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.64,541,1559534400"; 
   d="scan'208";a="6155603"
From: Paul Durrant <Paul.Durrant@citrix.com>
To: 'Jan Beulich' <jbeulich@suse.com>, "xen-devel@lists.xenproject.org"
 <xen-devel@lists.xenproject.org>
Thread-Topic: [Xen-devel] [PATCH v6 5/8] AMD/IOMMU: restrict interrupt
 remapping table sizes
Thread-Index: AQHVbu2nVcbxF8Syq0aIAlrkcouT7Kc5d7KQ
Date: Mon, 23 Sep 2019 16:22:35 +0000
Message-ID: <1376e63e5f2849bab87a32a01b8ab2a8@AMSPEX02CL03.citrite.net>
References: <aa62726c-5aa4-8bcd-dc35-61eb8dfeaee3@suse.com>
 <6e78af43-45f4-b2b1-26e5-04dfb40f1858@suse.com>
In-Reply-To: <6e78af43-45f4-b2b1-26e5-04dfb40f1858@suse.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-exchange-transport-fromentityheader: Hosted
MIME-Version: 1.0
Subject: Re: [Xen-devel] [PATCH v6 5/8] AMD/IOMMU: restrict interrupt
 remapping table sizes
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <Andrew.Cooper3@citrix.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBYZW4tZGV2ZWwgPHhlbi1kZXZl
bC1ib3VuY2VzQGxpc3RzLnhlbnByb2plY3Qub3JnPiBPbiBCZWhhbGYgT2YgSmFuIEJldWxpY2gN
Cj4gU2VudDogMTkgU2VwdGVtYmVyIDIwMTkgMTQ6MjQNCj4gVG86IHhlbi1kZXZlbEBsaXN0cy54
ZW5wcm9qZWN0Lm9yZw0KPiBDYzogQW5kcmV3IENvb3BlciA8QW5kcmV3LkNvb3BlcjNAY2l0cml4
LmNvbT47IFN1cmF2ZWUgU3V0aGlrdWxwYW5pdCA8c3VyYXZlZS5zdXRoaWt1bHBhbml0QGFtZC5j
b20+DQo+IFN1YmplY3Q6IFtYZW4tZGV2ZWxdIFtQQVRDSCB2NiA1LzhdIEFNRC9JT01NVTogcmVz
dHJpY3QgaW50ZXJydXB0IHJlbWFwcGluZyB0YWJsZSBzaXplcw0KPiANCj4gVGhlcmUncyBubyBw
b2ludCBzZXR0aW5nIHVwIHRhYmxlcyB3aXRoIG1vcmUgc3BhY2UgdGhhbiBhIFBDSSBkZXZpY2Ug
Y2FuDQo+IHVzZS4gRm9yIGJvdGggTVNJIGFuZCBNU0ktWCB3ZSBjYW4gZGV0ZXJtaW5lIGhvdyBt
YW55IGludGVycnVwdHMgY291bGQNCj4gYmUgc2V0IHVwIGF0IG1vc3QuIFRhYmxlcyBhbGxvY2F0
ZWQgZHVyaW5nIEFDUEkgdGFibGUgcGFyc2luZywgaG93ZXZlciwNCj4gd2lsbCAoZm9yIG5vdyBh
dCBsZWFzdCkgY29udGludWUgdG8gYmUgc2V0IHVwIHRvIGhhdmUgbWF4aW11bSBzaXplLg0KPiAN
Cj4gTm90ZSB0aGF0IHVudGlsIHdlIHdvdWxkIHdhbnQgdG8gdXNlIHN1Yi1wYWdlIGFsbG9jYXRp
b25zIGhlcmUgdGhlcmUncw0KPiBubyBwb2ludCBjaGVja2luZyB3aGV0aGVyIGJvdGggTVNJIGFu
ZCBNU0ktWCBhcmUgc3VwcG9ydGVkIGJ5IGEgZGV2aWNlIC0NCj4gYW4gb3JkZXItMCBhbGxvY2F0
aW9uIHdpbGwgZml0IHRoZSBkdWFsIGNhc2UgaW4gYW55IGV2ZW50LCBubyBtYXR0ZXINCj4gdGhh
dCB0aGUgTVNJLVggdmVjdG9yIGNvdW50IG1heSBiZSBzbWFsbGVyIHRoYW4gdGhlIE1TSSBvbmUu
DQo+IA0KPiBPbiBteSBSb21lIHN5c3RlbSB0aGlzIHJlZHVjZXMgc3BhY2UgbmVlZGVkIGZyb20g
anVzdCBvdmVyIDFrIHBhZ2VzIHRvDQo+IGFib3V0IDEyNS4NCj4gDQo+IFN1Z2dlc3RlZC1ieTog
QW5kcmV3IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4NCj4gU2lnbmVkLW9mZi1i
eTogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPg0KDQpSZXZpZXdlZC1ieTogUGF1bCBE
dXJyYW50IDxwYXVsLmR1cnJhbnRAY2l0cml4LmNvbT4NCg0KPiAtLS0NCj4gdjY6IERvbid0IGFs
bG9jYXRlIGFueSBJUlQgYXQgYWxsIHdoZW4gZGV2aWNlIGlzIG5laXRoZXIgTVNJLVggbm9yDQo+
ICAgICBNU0ktY2FwYWJsZS4gUmUtYmFzZSBvdmVyIGNoYW5nZXMgZWFybGllciBpbiB0aGlzIHNl
cmllcy4NCj4gdjU6IE5ldy4NCj4gDQo+IC0tLQ0KPiAgeGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gv
YW1kL2lvbW11X2FjcGkuYyAgICAgIHwgICAgNCArLQ0KPiAgeGVuL2RyaXZlcnMvcGFzc3Rocm91
Z2gvYW1kL2lvbW11X2luaXQuYyAgICAgIHwgICAxMyArKysrLS0tLS0NCj4gIHhlbi9kcml2ZXJz
L3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMgICAgICB8ICAgMzYgKysrKysrKysrKysrKysr
LS0tLS0tLS0tLS0NCj4gIHhlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9tYXAuYyAg
ICAgICB8ICAgMjAgKysrKysrKysrKy0tLS0NCj4gIHhlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2Ft
ZC9wY2lfYW1kX2lvbW11LmMgICB8ICAgMTggKysrKysrKy0tLS0tLQ0KPiAgeGVuL2luY2x1ZGUv
YXNtLXg4Ni9odm0vc3ZtL2FtZC1pb21tdS1kZWZzLmggIHwgICAgMyAtLQ0KPiAgeGVuL2luY2x1
ZGUvYXNtLXg4Ni9odm0vc3ZtL2FtZC1pb21tdS1wcm90by5oIHwgICAgNSArKy0NCj4gIDcgZmls
ZXMgY2hhbmdlZCwgNTkgaW5zZXJ0aW9ucygrKSwgNDAgZGVsZXRpb25zKC0pDQo+IA0KPiAtLS0g
YS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfYWNwaS5jDQo+ICsrKyBiL3hlbi9k
cml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9hY3BpLmMNCj4gQEAgLTc3LDcgKzc3LDcgQEAg
c3RhdGljIHZvaWQgX19pbml0IGFkZF9pdnJzX21hcHBpbmdfZW50cg0KPiAgICAgICAgICB7DQo+
ICAgICAgICAgICAgICBpZiAoICFzaGFyZWRfaW50cmVtYXBfdGFibGUgKQ0KPiAgICAgICAgICAg
ICAgICAgIHNoYXJlZF9pbnRyZW1hcF90YWJsZSA9IGFtZF9pb21tdV9hbGxvY19pbnRyZW1hcF90
YWJsZSgNCj4gLSAgICAgICAgICAgICAgICAgICAgaW9tbXUsICZzaGFyZWRfaW50cmVtYXBfaW51
c2UpOw0KPiArICAgICAgICAgICAgICAgICAgICBpb21tdSwgJnNoYXJlZF9pbnRyZW1hcF9pbnVz
ZSwgMCk7DQo+IA0KPiAgICAgICAgICAgICAgaWYgKCAhc2hhcmVkX2ludHJlbWFwX3RhYmxlICkN
Cj4gICAgICAgICAgICAgICAgICBwYW5pYygiTm8gbWVtb3J5IGZvciBzaGFyZWQgSVJUXG4iKTsN
Cj4gQEAgLTg5LDcgKzg5LDcgQEAgc3RhdGljIHZvaWQgX19pbml0IGFkZF9pdnJzX21hcHBpbmdf
ZW50cg0KPiAgICAgICAgICB7DQo+ICAgICAgICAgICAgICBpdnJzX21hcHBpbmdzW2FsaWFzX2lk
XS5pbnRyZW1hcF90YWJsZSA9DQo+ICAgICAgICAgICAgICAgICAgYW1kX2lvbW11X2FsbG9jX2lu
dHJlbWFwX3RhYmxlKA0KPiAtICAgICAgICAgICAgICAgICAgICBpb21tdSwgJml2cnNfbWFwcGlu
Z3NbYWxpYXNfaWRdLmludHJlbWFwX2ludXNlKTsNCj4gKyAgICAgICAgICAgICAgICAgICAgaW9t
bXUsICZpdnJzX21hcHBpbmdzW2FsaWFzX2lkXS5pbnRyZW1hcF9pbnVzZSwgMCk7DQo+IA0KPiAg
ICAgICAgICAgICAgaWYgKCAhaXZyc19tYXBwaW5nc1thbGlhc19pZF0uaW50cmVtYXBfdGFibGUg
KQ0KPiAgICAgICAgICAgICAgICAgIHBhbmljKCJObyBtZW1vcnkgZm9yICUwNHg6JTAyeDolMDJ4
LiV1J3MgSVJUXG4iLA0KPiAtLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVf
aW5pdC5jDQo+ICsrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0LmMN
Cj4gQEAgLTEyODQsMTIgKzEyODQsMTQgQEAgc3RhdGljIGludCBfX2luaXQgYW1kX2lvbW11X3Nl
dHVwX2RldmljZQ0KPiAgICAgICAgICAgICAgICAgIHBjaWRldnNfdW5sb2NrKCk7DQo+ICAgICAg
ICAgICAgICB9DQo+IA0KPiAtICAgICAgICAgICAgaWYgKCBwZGV2ICkNCj4gKyAgICAgICAgICAg
IGlmICggcGRldiAmJiAocGRldi0+bXNpeCB8fCBwZGV2LT5tc2lfbWF4dmVjKSApDQo+ICAgICAg
ICAgICAgICB7DQo+ICAgICAgICAgICAgICAgICAgaXZyc19tYXBwaW5nc1tiZGZdLmludHJlbWFw
X3RhYmxlID0NCj4gICAgICAgICAgICAgICAgICAgICAgYW1kX2lvbW11X2FsbG9jX2ludHJlbWFw
X3RhYmxlKA0KPiAgICAgICAgICAgICAgICAgICAgICAgICAgaXZyc19tYXBwaW5nc1tiZGZdLmlv
bW11LA0KPiAtICAgICAgICAgICAgICAgICAgICAgICAgJml2cnNfbWFwcGluZ3NbYmRmXS5pbnRy
ZW1hcF9pbnVzZSk7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAmaXZyc19tYXBwaW5nc1ti
ZGZdLmludHJlbWFwX2ludXNlLA0KPiArICAgICAgICAgICAgICAgICAgICAgICAgcGRldi0+bXNp
eCA/IHBkZXYtPm1zaXgtPm5yX2VudHJpZXMNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgOiBwZGV2LT5tc2lfbWF4dmVjKTsNCj4gICAgICAgICAgICAgICAgICBpZiAoICFp
dnJzX21hcHBpbmdzW2JkZl0uaW50cmVtYXBfdGFibGUgKQ0KPiAgICAgICAgICAgICAgICAgICAg
ICByZXR1cm4gLUVOT01FTTsNCj4gDQo+IEBAIC0xMzEyLDExICsxMzE0LDggQEAgc3RhdGljIGlu
dCBfX2luaXQgYW1kX2lvbW11X3NldHVwX2RldmljZQ0KPiAgICAgICAgICAgICAgfQ0KPiANCj4g
ICAgICAgICAgICAgIGFtZF9pb21tdV9zZXRfaW50cmVtYXBfdGFibGUoDQo+IC0gICAgICAgICAg
ICAgICAgZHRlLA0KPiAtICAgICAgICAgICAgICAgIGl2cnNfbWFwcGluZ3NbYmRmXS5pbnRyZW1h
cF90YWJsZQ0KPiAtICAgICAgICAgICAgICAgID8gdmlydF90b19tYWRkcihpdnJzX21hcHBpbmdz
W2JkZl0uaW50cmVtYXBfdGFibGUpDQo+IC0gICAgICAgICAgICAgICAgOiAwLA0KPiAtICAgICAg
ICAgICAgICAgIGlvbW11X2ludHJlbWFwKTsNCj4gKyAgICAgICAgICAgICAgICBkdGUsIGl2cnNf
bWFwcGluZ3NbYmRmXS5pbnRyZW1hcF90YWJsZSwNCj4gKyAgICAgICAgICAgICAgICBpdnJzX21h
cHBpbmdzW2JkZl0uaW9tbXUsIGlvbW11X2ludHJlbWFwKTsNCj4gICAgICAgICAgfQ0KPiAgICAg
IH0NCj4gDQo+IC0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMN
Cj4gKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2ludHIuYw0KPiBAQCAt
NjksNyArNjksOCBAQCB1bmlvbiBpcnRlX2NwdHIgew0KPiAgICAgIGNvbnN0IHVuaW9uIGlydGUx
MjggKnB0cjEyODsNCj4gIH0gX190cmFuc3BhcmVudF9fOw0KPiANCj4gLSNkZWZpbmUgSU5UUkVN
QVBfTUFYX0VOVFJJRVMgKDEgPDwgSU9NTVVfSU5UUkVNQVBfT1JERVIpDQo+ICsjZGVmaW5lIElO
VFJFTUFQX01BWF9PUkRFUiAgIDB4Qg0KPiArI2RlZmluZSBJTlRSRU1BUF9NQVhfRU5UUklFUyAo
MSA8PCBJTlRSRU1BUF9NQVhfT1JERVIpDQo+IA0KPiAgc3RydWN0IGlvYXBpY19zYmRmIGlvYXBp
Y19zYmRmW01BWF9JT19BUElDU107DQo+ICBzdHJ1Y3QgaHBldF9zYmRmIGhwZXRfc2JkZjsNCj4g
QEAgLTgwLDE3ICs4MSwxMyBAQCB1bnNpZ25lZCBpbnQgbnJfaW9hcGljX3NiZGY7DQo+IA0KPiAg
c3RhdGljIHZvaWQgZHVtcF9pbnRyZW1hcF90YWJsZXModW5zaWduZWQgY2hhciBrZXkpOw0KPiAN
Cj4gLXN0YXRpYyB1bnNpZ25lZCBpbnQgX19pbml0IGludHJlbWFwX3RhYmxlX29yZGVyKGNvbnN0
IHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11KQ0KPiAtew0KPiAtICAgIHJldHVybiBpb21tdS0+Y3Ry
bC5nYV9lbg0KPiAtICAgICAgICAgICA/IGdldF9vcmRlcl9mcm9tX2J5dGVzKElOVFJFTUFQX01B
WF9FTlRSSUVTICogc2l6ZW9mKHVuaW9uIGlydGUxMjgpKQ0KPiAtICAgICAgICAgICA6IGdldF9v
cmRlcl9mcm9tX2J5dGVzKElOVFJFTUFQX01BWF9FTlRSSUVTICogc2l6ZW9mKHVuaW9uIGlydGUz
MikpOw0KPiAtfQ0KPiArI2RlZmluZSBpbnRyZW1hcF9wYWdlX29yZGVyKGlydCkgUEZOX09SREVS
KHZpcnRfdG9fcGFnZShpcnQpKQ0KPiANCj4gIHVuc2lnbmVkIGludCBhbWRfaW9tbXVfaW50cmVt
YXBfdGFibGVfb3JkZXIoDQo+ICAgICAgY29uc3Qgdm9pZCAqaXJ0LCBjb25zdCBzdHJ1Y3QgYW1k
X2lvbW11ICppb21tdSkNCj4gIHsNCj4gLSAgICByZXR1cm4gSU9NTVVfSU5UUkVNQVBfT1JERVI7
DQo+ICsgICAgcmV0dXJuIGludHJlbWFwX3BhZ2Vfb3JkZXIoaXJ0KSArIFBBR0VfU0hJRlQgLQ0K
PiArICAgICAgICAgICAoaW9tbXUtPmN0cmwuZ2FfZW4gPyA0IDogMik7DQo+ICB9DQo+IA0KPiAg
c3RhdGljIHVuc2lnbmVkIGludCBpbnRyZW1hcF90YWJsZV9lbnRyaWVzKA0KPiBAQCAtODI1LDcg
KzgyMiwxMCBAQCBpbnQgYW1kX2lvbW11X2ZyZWVfaW50cmVtYXBfdGFibGUoDQo+IA0KPiAgICAg
IGlmICggKnRibHAgKQ0KPiAgICAgIHsNCj4gLSAgICAgICAgX19mcmVlX2FtZF9pb21tdV90YWJs
ZXMoKnRibHAsIGludHJlbWFwX3RhYmxlX29yZGVyKGlvbW11KSk7DQo+ICsgICAgICAgIHVuc2ln
bmVkIGludCBvcmRlciA9IGludHJlbWFwX3BhZ2Vfb3JkZXIoKnRibHApOw0KPiArDQo+ICsgICAg
ICAgIGludHJlbWFwX3BhZ2Vfb3JkZXIoKnRibHApID0gMDsNCj4gKyAgICAgICAgX19mcmVlX2Ft
ZF9pb21tdV90YWJsZXMoKnRibHAsIG9yZGVyKTsNCj4gICAgICAgICAgKnRibHAgPSBOVUxMOw0K
PiAgICAgIH0NCj4gDQo+IEBAIC04MzMsMTUgKzgzMywyMyBAQCBpbnQgYW1kX2lvbW11X2ZyZWVf
aW50cmVtYXBfdGFibGUoDQo+ICB9DQo+IA0KPiAgdm9pZCAqYW1kX2lvbW11X2FsbG9jX2ludHJl
bWFwX3RhYmxlKA0KPiAtICAgIGNvbnN0IHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11LCB1bnNpZ25l
ZCBsb25nICoqaW51c2VfbWFwKQ0KPiArICAgIGNvbnN0IHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11
LCB1bnNpZ25lZCBsb25nICoqaW51c2VfbWFwLCB1bnNpZ25lZCBpbnQgbnIpDQo+ICB7DQo+IC0g
ICAgdW5zaWduZWQgaW50IG9yZGVyID0gaW50cmVtYXBfdGFibGVfb3JkZXIoaW9tbXUpOw0KPiAt
ICAgIHZvaWQgKnRiID0gX19hbGxvY19hbWRfaW9tbXVfdGFibGVzKG9yZGVyKTsNCj4gKyAgICB1
bnNpZ25lZCBpbnQgb3JkZXI7DQo+ICsgICAgdm9pZCAqdGI7DQo+IA0KPiArICAgIGlmICggIW5y
ICkNCj4gKyAgICAgICAgbnIgPSBJTlRSRU1BUF9NQVhfRU5UUklFUzsNCj4gKw0KPiArICAgIG9y
ZGVyID0gaW9tbXUtPmN0cmwuZ2FfZW4NCj4gKyAgICAgICAgICAgID8gZ2V0X29yZGVyX2Zyb21f
Ynl0ZXMobnIgKiBzaXplb2YodW5pb24gaXJ0ZTEyOCkpDQo+ICsgICAgICAgICAgICA6IGdldF9v
cmRlcl9mcm9tX2J5dGVzKG5yICogc2l6ZW9mKHVuaW9uIGlydGUzMikpOw0KPiArDQo+ICsgICAg
dGIgPSBfX2FsbG9jX2FtZF9pb21tdV90YWJsZXMob3JkZXIpOw0KPiAgICAgIGlmICggdGIgKQ0K
PiAgICAgIHsNCj4gLSAgICAgICAgdW5zaWduZWQgaW50IG5yID0gaW50cmVtYXBfdGFibGVfZW50
cmllcyh0YiwgaW9tbXUpOw0KPiAtDQo+ICsgICAgICAgIGludHJlbWFwX3BhZ2Vfb3JkZXIodGIp
ID0gb3JkZXI7DQo+ICsgICAgICAgIG5yID0gaW50cmVtYXBfdGFibGVfZW50cmllcyh0YiwgaW9t
bXUpOw0KPiAgICAgICAgICAqaW51c2VfbWFwID0geHphbGxvY19hcnJheSh1bnNpZ25lZCBsb25n
LCBCSVRTX1RPX0xPTkdTKG5yKSk7DQo+ICAgICAgICAgIGlmICggKmludXNlX21hcCApDQo+ICAg
ICAgICAgICAgICBtZW1zZXQodGIsIDAsIFBBR0VfU0laRSA8PCBvcmRlcik7DQo+IC0tLSBhL3hl
bi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9tYXAuYw0KPiArKysgYi94ZW4vZHJpdmVy
cy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfbWFwLmMNCj4gQEAgLTExMywxMiArMTEzLDIyIEBAIHZv
aWQgYW1kX2lvbW11X3NldF9yb290X3BhZ2VfdGFibGUoc3RydWMNCj4gIH0NCj4gDQo+ICB2b2lk
IF9faW5pdCBhbWRfaW9tbXVfc2V0X2ludHJlbWFwX3RhYmxlKA0KPiAtICAgIHN0cnVjdCBhbWRf
aW9tbXVfZHRlICpkdGUsIHVpbnQ2NF90IGludHJlbWFwX3B0ciwgYm9vbCB2YWxpZCkNCj4gKyAg
ICBzdHJ1Y3QgYW1kX2lvbW11X2R0ZSAqZHRlLCBjb25zdCB2b2lkICpwdHIsDQo+ICsgICAgY29u
c3Qgc3RydWN0IGFtZF9pb21tdSAqaW9tbXUsIGJvb2wgdmFsaWQpDQo+ICB7DQo+IC0gICAgZHRl
LT5pdF9yb290ID0gaW50cmVtYXBfcHRyID4+IDY7DQo+IC0gICAgZHRlLT5pbnRfdGFiX2xlbiA9
IGludHJlbWFwX3B0ciA/IElPTU1VX0lOVFJFTUFQX09SREVSIDogMDsNCj4gLSAgICBkdGUtPmlu
dF9jdGwgPSBpbnRyZW1hcF9wdHIgPyBJT01NVV9ERVZfVEFCTEVfSU5UX0NPTlRST0xfVFJBTlNM
QVRFRA0KPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IElPTU1VX0RFVl9UQUJM
RV9JTlRfQ09OVFJPTF9BQk9SVEVEOw0KPiArICAgIGlmICggcHRyICkNCj4gKyAgICB7DQo+ICsg
ICAgICAgIGR0ZS0+aXRfcm9vdCA9IHZpcnRfdG9fbWFkZHIocHRyKSA+PiA2Ow0KPiArICAgICAg
ICBkdGUtPmludF90YWJfbGVuID0gYW1kX2lvbW11X2ludHJlbWFwX3RhYmxlX29yZGVyKHB0ciwg
aW9tbXUpOw0KPiArICAgICAgICBkdGUtPmludF9jdGwgPSBJT01NVV9ERVZfVEFCTEVfSU5UX0NP
TlRST0xfVFJBTlNMQVRFRDsNCj4gKyAgICB9DQo+ICsgICAgZWxzZQ0KPiArICAgIHsNCj4gKyAg
ICAgICAgZHRlLT5pdF9yb290ID0gMDsNCj4gKyAgICAgICAgZHRlLT5pbnRfdGFiX2xlbiA9IDA7
DQo+ICsgICAgICAgIGR0ZS0+aW50X2N0bCA9IElPTU1VX0RFVl9UQUJMRV9JTlRfQ09OVFJPTF9B
Qk9SVEVEOw0KPiArICAgIH0NCj4gKw0KPiAgICAgIGR0ZS0+aWcgPSBmYWxzZTsgLyogdW5tYXBw
ZWQgaW50ZXJydXB0cyByZXN1bHQgaW4gaS9vIHBhZ2UgZmF1bHRzICovDQo+ICAgICAgZHRlLT5p
diA9IHZhbGlkOw0KPiAgfQ0KPiAtLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvcGNp
X2FtZF9pb21tdS5jDQo+ICsrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9wY2lfYW1k
X2lvbW11LmMNCj4gQEAgLTQ3MCwxOCArNDcwLDIyIEBAIHN0YXRpYyBpbnQgYW1kX2lvbW11X2Fk
ZF9kZXZpY2UodTggZGV2Zm4NCj4gICAgICB7DQo+ICAgICAgICAgIHVuc2lnbmVkIGxvbmcgZmxh
Z3M7DQo+IA0KPiAtICAgICAgICBpdnJzX21hcHBpbmdzW2JkZl0uaW50cmVtYXBfdGFibGUgPQ0K
PiAtICAgICAgICAgICAgYW1kX2lvbW11X2FsbG9jX2ludHJlbWFwX3RhYmxlKA0KPiAtICAgICAg
ICAgICAgICAgIGlvbW11LCAmaXZyc19tYXBwaW5nc1tiZGZdLmludHJlbWFwX2ludXNlKTsNCj4g
LSAgICAgICAgaWYgKCAhaXZyc19tYXBwaW5nc1tiZGZdLmludHJlbWFwX3RhYmxlICkNCj4gLSAg
ICAgICAgICAgIHJldHVybiAtRU5PTUVNOw0KPiArICAgICAgICBpZiAoIHBkZXYtPm1zaXggfHwg
cGRldi0+bXNpX21heHZlYyApDQo+ICsgICAgICAgIHsNCj4gKyAgICAgICAgICAgIGl2cnNfbWFw
cGluZ3NbYmRmXS5pbnRyZW1hcF90YWJsZSA9DQo+ICsgICAgICAgICAgICAgICAgYW1kX2lvbW11
X2FsbG9jX2ludHJlbWFwX3RhYmxlKA0KPiArICAgICAgICAgICAgICAgICAgICBpb21tdSwgJml2
cnNfbWFwcGluZ3NbYmRmXS5pbnRyZW1hcF9pbnVzZSwNCj4gKyAgICAgICAgICAgICAgICAgICAg
cGRldi0+bXNpeCA/IHBkZXYtPm1zaXgtPm5yX2VudHJpZXMNCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICA6IHBkZXYtPm1zaV9tYXh2ZWMpOw0KPiArICAgICAgICAgICAgaWYgKCAh
aXZyc19tYXBwaW5nc1tiZGZdLmludHJlbWFwX3RhYmxlICkNCj4gKyAgICAgICAgICAgICAgICBy
ZXR1cm4gLUVOT01FTTsNCj4gKyAgICAgICAgfQ0KPiANCj4gICAgICAgICAgc3Bpbl9sb2NrX2ly
cXNhdmUoJmlvbW11LT5sb2NrLCBmbGFncyk7DQo+IA0KPiAgICAgICAgICBhbWRfaW9tbXVfc2V0
X2ludHJlbWFwX3RhYmxlKA0KPiAgICAgICAgICAgICAgaW9tbXUtPmRldl90YWJsZS5idWZmZXIg
KyAoYmRmICogSU9NTVVfREVWX1RBQkxFX0VOVFJZX1NJWkUpLA0KPiAtICAgICAgICAgICAgdmly
dF90b19tYWRkcihpdnJzX21hcHBpbmdzW2JkZl0uaW50cmVtYXBfdGFibGUpLA0KPiAtICAgICAg
ICAgICAgaW9tbXVfaW50cmVtYXApOw0KPiArICAgICAgICAgICAgaXZyc19tYXBwaW5nc1tiZGZd
LmludHJlbWFwX3RhYmxlLCBpb21tdSwgaW9tbXVfaW50cmVtYXApOw0KPiANCj4gICAgICAgICAg
YW1kX2lvbW11X2ZsdXNoX2RldmljZShpb21tdSwgYmRmKTsNCj4gDQo+IC0tLSBhL3hlbi9pbmNs
dWRlL2FzbS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtZGVmcy5oDQo+ICsrKyBiL3hlbi9pbmNsdWRl
L2FzbS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtZGVmcy5oDQo+IEBAIC0xMDcsOSArMTA3LDYgQEAN
Cj4gICNkZWZpbmUgSU9NTVVfREVWX1RBQkxFX0lOVF9DT05UUk9MX0ZPUldBUkRFRAkweDENCj4g
ICNkZWZpbmUgSU9NTVVfREVWX1RBQkxFX0lOVF9DT05UUk9MX1RSQU5TTEFURUQJMHgyDQo+IA0K
PiAtLyogRm9yIG5vdywgd2UgYWx3YXlzIGFsbG9jYXRlIHRoZSBtYXhpbXVtOiAyMDQ4IGVudHJp
ZXMuICovDQo+IC0jZGVmaW5lIElPTU1VX0lOVFJFTUFQX09SREVSCQkJMHhCDQo+IC0NCj4gIHN0
cnVjdCBhbWRfaW9tbXVfZHRlIHsNCj4gICAgICAvKiAwIC0gNjMgKi8NCj4gICAgICBib29sIHY6
MTsNCj4gLS0tIGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9odm0vc3ZtL2FtZC1pb21tdS1wcm90by5o
DQo+ICsrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtcHJvdG8uaA0K
PiBAQCAtNzIsNyArNzIsOCBAQCBpbnQgX19tdXN0X2NoZWNrIGFtZF9pb21tdV9mbHVzaF9pb3Rs
Yl9hDQo+ICAvKiBkZXZpY2UgdGFibGUgZnVuY3Rpb25zICovDQo+ICBpbnQgZ2V0X2RtYV9yZXF1
ZXN0b3JfaWQodWludDE2X3Qgc2VnLCB1aW50MTZfdCBiZGYpOw0KPiAgdm9pZCBhbWRfaW9tbXVf
c2V0X2ludHJlbWFwX3RhYmxlKHN0cnVjdCBhbWRfaW9tbXVfZHRlICpkdGUsDQo+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDY0X3QgaW50cmVtYXBfcHRyLA0KPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZvaWQgKnB0ciwNCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgYW1kX2lvbW11ICppb21t
dSwNCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHZhbGlkKTsNCj4g
IHZvaWQgYW1kX2lvbW11X3NldF9yb290X3BhZ2VfdGFibGUoc3RydWN0IGFtZF9pb21tdV9kdGUg
KmR0ZSwNCj4gIAkJCQkgICB1aW50NjRfdCByb290X3B0ciwgdWludDE2X3QgZG9tYWluX2lkLA0K
PiBAQCAtOTksNyArMTAwLDcgQEAgc3RydWN0IGFtZF9pb21tdSAqZmluZF9pb21tdV9mb3JfZGV2
aWNlKA0KPiAgYm9vbCBpb3Zfc3VwcG9ydHNfeHQodm9pZCk7DQo+ICBpbnQgYW1kX2lvbW11X3Nl
dHVwX2lvYXBpY19yZW1hcHBpbmcodm9pZCk7DQo+ICB2b2lkICphbWRfaW9tbXVfYWxsb2NfaW50
cmVtYXBfdGFibGUoDQo+IC0gICAgY29uc3Qgc3RydWN0IGFtZF9pb21tdSAqLCB1bnNpZ25lZCBs
b25nICoqKTsNCj4gKyAgICBjb25zdCBzdHJ1Y3QgYW1kX2lvbW11ICosIHVuc2lnbmVkIGxvbmcg
KiosIHVuc2lnbmVkIGludCBucik7DQo+ICBpbnQgYW1kX2lvbW11X2ZyZWVfaW50cmVtYXBfdGFi
bGUoDQo+ICAgICAgY29uc3Qgc3RydWN0IGFtZF9pb21tdSAqLCBzdHJ1Y3QgaXZyc19tYXBwaW5n
cyAqLCB1aW50MTZfdCk7DQo+ICB1bnNpZ25lZCBpbnQgYW1kX2lvbW11X2ludHJlbWFwX3RhYmxl
X29yZGVyKA0KPiANCj4gDQo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fDQo+IFhlbi1kZXZlbCBtYWlsaW5nIGxpc3QNCj4gWGVuLWRldmVsQGxpc3RzLnhl
bnByb2plY3Qub3JnDQo+IGh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0
aW5mby94ZW4tZGV2ZWwNCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qu
b3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2
ZWw=

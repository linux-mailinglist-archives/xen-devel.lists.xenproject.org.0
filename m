Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 07C35B4E75
	for <lists+xen-devel@lfdr.de>; Tue, 17 Sep 2019 14:51:33 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iACri-0003Pp-OS; Tue, 17 Sep 2019 12:45:54 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=CyFt=XM=citrix.com=paul.durrant@srs-us1.protection.inumbo.net>)
 id 1iACrg-0003Pk-TW
 for xen-devel@lists.xenproject.org; Tue, 17 Sep 2019 12:45:52 +0000
X-Inumbo-ID: 0e85f86a-d949-11e9-960b-12813bfff9fa
Received: from esa1.hc3370-68.iphmx.com (unknown [216.71.145.142])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 0e85f86a-d949-11e9-960b-12813bfff9fa;
 Tue, 17 Sep 2019 12:45:41 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1568724342;
 h=from:to:cc:subject:date:message-id:references:
 in-reply-to:content-transfer-encoding:mime-version;
 bh=If78Ga2ToTHWszlkbu9PIQYxsZYnIIcF4U+woYCyKAU=;
 b=X7vFSukBYbzxR/dPzNshiajfh7StERVXtad3SDdzdiNwAUdEI8O/lK7v
 GSSdybq0MzzaDpL66JYNQmAaaSsbM4vmE34crVQB92xjvVCEh9Zvs60fk
 xBYs1IArX/jXtDKp2nl11MQBt5LBm21CSjhIiX0oZGEJmZ7RetQDpgFXY 4=;
Authentication-Results: esa1.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=Paul.Durrant@citrix.com;
 spf=Pass smtp.mailfrom=Paul.Durrant@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa1.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 Paul.Durrant@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="Paul.Durrant@citrix.com"; x-conformance=sidf_compatible
Received-SPF: Pass (esa1.hc3370-68.iphmx.com: domain of
 Paul.Durrant@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="Paul.Durrant@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83 ~all"
Received-SPF: None (esa1.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: qL1dLpiAeV8X7MmyfIBVfTdozL6bQ2++R4sUCmcjrCyoEiJFXKZqffnYuEI/xbIpJCHSFaH23w
 zPA+KR8GOAoSKFtatq+PpKrRKXYJuxasuVsHS57zca3tyQ1C4WB7S628lxrkqcZ2f0GFBwmoRM
 cdIDGH3DnUWZl5UdWvXAM4uVww/VxljSTQnEjBNFA1IVYZGyH5SN6k93fzhcX4JVpkm1HDGwwW
 ldSNrDAOClK8R7uNdK1/6//9f7P9vqsd5FEUIdCv3kRq9TTkiCFMIVCrd93aycx+KHHfB0tAuZ
 0yo=
X-SBRS: 2.7
X-MesageID: 5723466
X-Ironport-Server: esa1.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.64,516,1559534400"; 
   d="scan'208";a="5723466"
From: Paul Durrant <Paul.Durrant@citrix.com>
To: 'Jan Beulich' <jbeulich@suse.com>, "xen-devel@lists.xenproject.org"
 <xen-devel@lists.xenproject.org>
Thread-Topic: [Xen-devel] [PATCH v2 4/9] x86/HVM: move NOFLUSH handling out of
 hvm_set_cr3()
Thread-Index: AQHVbR9++bfXxouIhUeVJ1WnPk72p6cvz94g
Date: Tue, 17 Sep 2019 12:45:36 +0000
Message-ID: <d337fda7232b4b099e16de5615c68558@AMSPEX02CL03.citrite.net>
References: <625c29ba-cfb8-88ee-eb15-5f2019198865@suse.com>
 <8e2aae32-917c-8035-1aef-8b47c321e42b@suse.com>
In-Reply-To: <8e2aae32-917c-8035-1aef-8b47c321e42b@suse.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-exchange-transport-fromentityheader: Hosted
MIME-Version: 1.0
Subject: Re: [Xen-devel] [PATCH v2 4/9] x86/HVM: move NOFLUSH handling out
 of hvm_set_cr3()
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Kevin Tian <kevin.tian@intel.com>, Jun Nakajima <jun.nakajima@intel.com>,
 Wei Liu <wl@xen.org>, Paul Durrant <paul@xen.org>,
 Andrew Cooper <Andrew.Cooper3@citrix.com>,
 George Dunlap <George.Dunlap@citrix.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>, Boris
 Ostrovsky <boris.ostrovsky@oracle.com>, Roger Pau Monne <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBYZW4tZGV2ZWwgPHhlbi1kZXZl
bC1ib3VuY2VzQGxpc3RzLnhlbnByb2plY3Qub3JnPiBPbiBCZWhhbGYgT2YgSmFuIEJldWxpY2gN
Cj4gU2VudDogMTcgU2VwdGVtYmVyIDIwMTkgMDc6MTUNCj4gVG86IHhlbi1kZXZlbEBsaXN0cy54
ZW5wcm9qZWN0Lm9yZw0KPiBDYzogS2V2aW4gVGlhbiA8a2V2aW4udGlhbkBpbnRlbC5jb20+OyBT
dXJhdmVlIFN1dGhpa3VscGFuaXQgPHN1cmF2ZWUuc3V0aGlrdWxwYW5pdEBhbWQuY29tPjsgV2Vp
IExpdQ0KPiA8d2xAeGVuLm9yZz47IFBhdWwgRHVycmFudCA8cGF1bEB4ZW4ub3JnPjsgR2Vvcmdl
IER1bmxhcCA8R2VvcmdlLkR1bmxhcEBjaXRyaXguY29tPjsgQW5kcmV3IENvb3Blcg0KPiA8QW5k
cmV3LkNvb3BlcjNAY2l0cml4LmNvbT47IEp1biBOYWthamltYSA8anVuLm5ha2FqaW1hQGludGVs
LmNvbT47IEJvcmlzIE9zdHJvdnNreQ0KPiA8Ym9yaXMub3N0cm92c2t5QG9yYWNsZS5jb20+OyBS
b2dlciBQYXUgTW9ubmUgPHJvZ2VyLnBhdUBjaXRyaXguY29tPg0KPiBTdWJqZWN0OiBbWGVuLWRl
dmVsXSBbUEFUQ0ggdjIgNC85XSB4ODYvSFZNOiBtb3ZlIE5PRkxVU0ggaGFuZGxpbmcgb3V0IG9m
IGh2bV9zZXRfY3IzKCkNCj4gDQo+IFRoZSBiaXQgaXMgbWVhbmluZ2Z1bCBvbmx5IGZvciBNT1Yt
dG8tQ1IzIGluc25zLCBub3QgYW55d2hlcmUgZWxzZSwgaW4NCj4gcGFydGljdWxhciBub3Qgd2hl
biBsb2FkaW5nIG5lc3RlZCBndWVzdCBzdGF0ZS4NCj4gDQo+IFNpZ25lZC1vZmYtYnk6IEphbiBC
ZXVsaWNoIDxqYmV1bGljaEBzdXNlLmNvbT4NCj4gDQo+IC0tLSBhL3hlbi9hcmNoL3g4Ni9odm0v
ZW11bGF0ZS5jDQo+ICsrKyBiL3hlbi9hcmNoL3g4Ni9odm0vZW11bGF0ZS5jDQo+IEBAIC0yMDgw
LDYgKzIwODAsOCBAQCBzdGF0aWMgaW50IGh2bWVtdWxfd3JpdGVfY3IoDQo+ICAgICAgSFZNVFJB
Q0VfTE9OR18yRChDUl9XUklURSwgcmVnLCBUUkNfUEFSX0xPTkcodmFsKSk7DQo+ICAgICAgc3dp
dGNoICggcmVnICkNCj4gICAgICB7DQo+ICsgICAgICAgIGJvb2wgbm9mbHVzaDsNCj4gKw0KDQpJ
IHNhaWQgdGhpcyBiZWZvcmUuLi4gSSB0aGluayB0aGUgdGlnaHRlciBjYXNlLXNjb3BlIGlzIGJl
dHRlci4gQ29zbWV0aWNhbGx5IGl0IG1heSBsb29rIGEgbGl0dGxlIG9kZCwgYnV0IHN1cmVseSBp
dCBnaXZlcyB0aGUgY29tcGlsZXIgYSBiZXR0ZXIgY2hhbmNlIHRvIG9wdGltaXplPw0KDQogIFBh
dWwNCg0KPiAgICAgIGNhc2UgMDoNCj4gICAgICAgICAgcmMgPSBodm1fc2V0X2NyMCh2YWwsIHRy
dWUpOw0KPiAgICAgICAgICBicmVhazsNCj4gQEAgLTIwOTAsNyArMjA5MiwxMCBAQCBzdGF0aWMg
aW50IGh2bWVtdWxfd3JpdGVfY3IoDQo+ICAgICAgICAgIGJyZWFrOw0KPiANCj4gICAgICBjYXNl
IDM6DQo+IC0gICAgICAgIHJjID0gaHZtX3NldF9jcjModmFsLCB0cnVlKTsNCj4gKyAgICAgICAg
bm9mbHVzaCA9IGh2bV9wY2lkX2VuYWJsZWQoY3VycmVudCkgJiYgKHZhbCAmIFg4Nl9DUjNfTk9G
TFVTSCk7DQo+ICsgICAgICAgIGlmICggbm9mbHVzaCApDQo+ICsgICAgICAgICAgICB2YWwgJj0g
flg4Nl9DUjNfTk9GTFVTSDsNCj4gKyAgICAgICAgcmMgPSBodm1fc2V0X2NyMyh2YWwsIG5vZmx1
c2gsIHRydWUpOw0KPiAgICAgICAgICBicmVhazsNCj4gDQo+ICAgICAgY2FzZSA0Og0KPiAtLS0g
YS94ZW4vYXJjaC94ODYvaHZtL2h2bS5jDQo+ICsrKyBiL3hlbi9hcmNoL3g4Ni9odm0vaHZtLmMN
Cj4gQEAgLTIwNTksMTIgKzIwNTksMTcgQEAgaW50IGh2bV9tb3ZfdG9fY3IodW5zaWduZWQgaW50
IGNyLCB1bnNpZw0KPiANCj4gICAgICBzd2l0Y2ggKCBjciApDQo+ICAgICAgew0KPiArICAgICAg
ICBib29sIG5vZmx1c2g7DQo+ICsNCj4gICAgICBjYXNlIDA6DQo+ICAgICAgICAgIHJjID0gaHZt
X3NldF9jcjAodmFsLCB0cnVlKTsNCj4gICAgICAgICAgYnJlYWs7DQo+IA0KPiAgICAgIGNhc2Ug
MzoNCj4gLSAgICAgICAgcmMgPSBodm1fc2V0X2NyMyh2YWwsIHRydWUpOw0KPiArICAgICAgICBu
b2ZsdXNoID0gaHZtX3BjaWRfZW5hYmxlZChjdXJyKSAmJiAodmFsICYgWDg2X0NSM19OT0ZMVVNI
KTsNCj4gKyAgICAgICAgaWYgKCBub2ZsdXNoICkNCj4gKyAgICAgICAgICAgIHZhbCAmPSB+WDg2
X0NSM19OT0ZMVVNIOw0KPiArICAgICAgICByYyA9IGh2bV9zZXRfY3IzKHZhbCwgbm9mbHVzaCwg
dHJ1ZSk7DQo+ICAgICAgICAgIGJyZWFrOw0KPiANCj4gICAgICBjYXNlIDQ6DQo+IEBAIC0yMjgy
LDEyICsyMjg3LDExIEBAIGludCBodm1fc2V0X2NyMCh1bnNpZ25lZCBsb25nIHZhbHVlLCBib28N
Cj4gICAgICByZXR1cm4gWDg2RU1VTF9PS0FZOw0KPiAgfQ0KPiANCj4gLWludCBodm1fc2V0X2Ny
Myh1bnNpZ25lZCBsb25nIHZhbHVlLCBib29sIG1heV9kZWZlcikNCj4gK2ludCBodm1fc2V0X2Ny
Myh1bnNpZ25lZCBsb25nIHZhbHVlLCBib29sIG5vZmx1c2gsIGJvb2wgbWF5X2RlZmVyKQ0KPiAg
ew0KPiAgICAgIHN0cnVjdCB2Y3B1ICp2ID0gY3VycmVudDsNCj4gICAgICBzdHJ1Y3QgcGFnZV9p
bmZvICpwYWdlOw0KPiAgICAgIHVuc2lnbmVkIGxvbmcgb2xkID0gdi0+YXJjaC5odm0uZ3Vlc3Rf
Y3JbM107DQo+IC0gICAgYm9vbCBub2ZsdXNoID0gZmFsc2U7DQo+IA0KPiAgICAgIGlmICggbWF5
X2RlZmVyICYmIHVubGlrZWx5KHYtPmRvbWFpbi0+YXJjaC5tb25pdG9yLndyaXRlX2N0cmxyZWdf
ZW5hYmxlZCAmDQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9uaXRvcl9jdHJs
cmVnX2JpdG1hc2soVk1fRVZFTlRfWDg2X0NSMykpICkNCj4gQEAgLTIyOTksMTcgKzIzMDMsMTIg
QEAgaW50IGh2bV9zZXRfY3IzKHVuc2lnbmVkIGxvbmcgdmFsdWUsIGJvbw0KPiAgICAgICAgICAg
ICAgLyogVGhlIGFjdHVhbCB3cml0ZSB3aWxsIG9jY3VyIGluIGh2bV9kb19yZXN1bWUoKSwgaWYg
cGVybWl0dGVkLiAqLw0KPiAgICAgICAgICAgICAgdi0+YXJjaC52bV9ldmVudC0+d3JpdGVfZGF0
YS5kb193cml0ZS5jcjMgPSAxOw0KPiAgICAgICAgICAgICAgdi0+YXJjaC52bV9ldmVudC0+d3Jp
dGVfZGF0YS5jcjMgPSB2YWx1ZTsNCj4gKyAgICAgICAgICAgIHYtPmFyY2gudm1fZXZlbnQtPndy
aXRlX2RhdGEuY3IzX25vZmx1c2ggPSBub2ZsdXNoOw0KPiANCj4gICAgICAgICAgICAgIHJldHVy
biBYODZFTVVMX09LQVk7DQo+ICAgICAgICAgIH0NCj4gICAgICB9DQo+IA0KPiAtICAgIGlmICgg
aHZtX3BjaWRfZW5hYmxlZCh2KSApIC8qIENsZWFyIHRoZSBub2ZsdXNoIGJpdC4gKi8NCj4gLSAg
ICB7DQo+IC0gICAgICAgIG5vZmx1c2ggPSB2YWx1ZSAmIFg4Nl9DUjNfTk9GTFVTSDsNCj4gLSAg
ICAgICAgdmFsdWUgJj0gflg4Nl9DUjNfTk9GTFVTSDsNCj4gLSAgICB9DQo+IC0NCj4gICAgICBp
ZiAoIGh2bV9wYWdpbmdfZW5hYmxlZCh2KSAmJiAhcGFnaW5nX21vZGVfaGFwKHYtPmRvbWFpbikg
JiYNCj4gICAgICAgICAgICh2YWx1ZSAhPSB2LT5hcmNoLmh2bS5ndWVzdF9jclszXSkgKQ0KPiAg
ICAgIHsNCj4gQEAgLTMwMDQsNyArMzAwMyw3IEBAIHZvaWQgaHZtX3Rhc2tfc3dpdGNoKA0KPiAg
ICAgIGlmICggdGFza19zd2l0Y2hfbG9hZF9zZWcoeDg2X3NlZ19sZHRyLCB0c3MubGR0LCBuZXdf
Y3BsLCAwKSApDQo+ICAgICAgICAgIGdvdG8gb3V0Ow0KPiANCj4gLSAgICByYyA9IGh2bV9zZXRf
Y3IzKHRzcy5jcjMsIHRydWUpOw0KPiArICAgIHJjID0gaHZtX3NldF9jcjModHNzLmNyMywgZmFs
c2UsIHRydWUpOw0KPiAgICAgIGlmICggcmMgPT0gWDg2RU1VTF9FWENFUFRJT04gKQ0KPiAgICAg
ICAgICBodm1faW5qZWN0X2h3X2V4Y2VwdGlvbihUUkFQX2dwX2ZhdWx0LCAwKTsNCj4gICAgICBp
ZiAoIHJjICE9IFg4NkVNVUxfT0tBWSApDQo+IC0tLSBhL3hlbi9hcmNoL3g4Ni9odm0vc3ZtL25l
c3RlZHN2bS5jDQo+ICsrKyBiL3hlbi9hcmNoL3g4Ni9odm0vc3ZtL25lc3RlZHN2bS5jDQo+IEBA
IC0zMjQsNyArMzI0LDcgQEAgc3RhdGljIGludCBuc3ZtX3ZjcHVfaG9zdHJlc3RvcmUoc3RydWN0
DQo+ICAgICAgICAgIHYtPmFyY2guZ3Vlc3RfdGFibGUgPSBwYWdldGFibGVfbnVsbCgpOw0KPiAg
ICAgICAgICAvKiBodm1fc2V0X2NyMygpIGJlbG93IHNldHMgdi0+YXJjaC5odm0uZ3Vlc3RfY3Jb
M10gZm9yIHVzLiAqLw0KPiAgICAgIH0NCj4gLSAgICByYyA9IGh2bV9zZXRfY3IzKG4xdm1jYi0+
X2NyMywgdHJ1ZSk7DQo+ICsgICAgcmMgPSBodm1fc2V0X2NyMyhuMXZtY2ItPl9jcjMsIGZhbHNl
LCB0cnVlKTsNCj4gICAgICBpZiAoIHJjID09IFg4NkVNVUxfRVhDRVBUSU9OICkNCj4gICAgICAg
ICAgaHZtX2luamVjdF9od19leGNlcHRpb24oVFJBUF9ncF9mYXVsdCwgMCk7DQo+ICAgICAgaWYg
KHJjICE9IFg4NkVNVUxfT0tBWSkNCj4gQEAgLTU4NCw3ICs1ODQsNyBAQCBzdGF0aWMgaW50IG5z
dm1fdm1jYl9wcmVwYXJlNHZtcnVuKHN0cnVjDQo+ICAgICAgICAgIG5lc3RlZHN2bV92bWNiX3Nl
dF9uZXN0ZWRwMm0odiwgbnNfdm1jYiwgbjJ2bWNiKTsNCj4gDQo+ICAgICAgICAgIC8qIGh2bV9z
ZXRfY3IzKCkgYmVsb3cgc2V0cyB2LT5hcmNoLmh2bS5ndWVzdF9jclszXSBmb3IgdXMuICovDQo+
IC0gICAgICAgIHJjID0gaHZtX3NldF9jcjMobnNfdm1jYi0+X2NyMywgdHJ1ZSk7DQo+ICsgICAg
ICAgIHJjID0gaHZtX3NldF9jcjMobnNfdm1jYi0+X2NyMywgZmFsc2UsIHRydWUpOw0KPiAgICAg
ICAgICBpZiAoIHJjID09IFg4NkVNVUxfRVhDRVBUSU9OICkNCj4gICAgICAgICAgICAgIGh2bV9p
bmplY3RfaHdfZXhjZXB0aW9uKFRSQVBfZ3BfZmF1bHQsIDApOw0KPiAgICAgICAgICBpZiAocmMg
IT0gWDg2RU1VTF9PS0FZKQ0KPiBAQCAtNTk4LDcgKzU5OCw3IEBAIHN0YXRpYyBpbnQgbnN2bV92
bWNiX3ByZXBhcmU0dm1ydW4oc3RydWMNCj4gICAgICAgICAgICogd2UgYXNzdW1lIGl0IGludGVy
Y2VwdHMgcGFnZSBmYXVsdHMuDQo+ICAgICAgICAgICAqLw0KPiAgICAgICAgICAvKiBodm1fc2V0
X2NyMygpIGJlbG93IHNldHMgdi0+YXJjaC5odm0uZ3Vlc3RfY3JbM10gZm9yIHVzLiAqLw0KPiAt
ICAgICAgICByYyA9IGh2bV9zZXRfY3IzKG5zX3ZtY2ItPl9jcjMsIHRydWUpOw0KPiArICAgICAg
ICByYyA9IGh2bV9zZXRfY3IzKG5zX3ZtY2ItPl9jcjMsIGZhbHNlLCB0cnVlKTsNCj4gICAgICAg
ICAgaWYgKCByYyA9PSBYODZFTVVMX0VYQ0VQVElPTiApDQo+ICAgICAgICAgICAgICBodm1faW5q
ZWN0X2h3X2V4Y2VwdGlvbihUUkFQX2dwX2ZhdWx0LCAwKTsNCj4gICAgICAgICAgaWYgKHJjICE9
IFg4NkVNVUxfT0tBWSkNCj4gLS0tIGEveGVuL2FyY2gveDg2L2h2bS92bV9ldmVudC5jDQo+ICsr
KyBiL3hlbi9hcmNoL3g4Ni9odm0vdm1fZXZlbnQuYw0KPiBAQCAtMTEwLDcgKzExMCw3IEBAIHZv
aWQgaHZtX3ZtX2V2ZW50X2RvX3Jlc3VtZShzdHJ1Y3QgdmNwdQ0KPiANCj4gICAgICBpZiAoIHVu
bGlrZWx5KHctPmRvX3dyaXRlLmNyMykgKQ0KPiAgICAgIHsNCj4gLSAgICAgICAgaWYgKCBodm1f
c2V0X2NyMyh3LT5jcjMsIGZhbHNlKSA9PSBYODZFTVVMX0VYQ0VQVElPTiApDQo+ICsgICAgICAg
IGlmICggaHZtX3NldF9jcjMody0+Y3IzLCB3LT5jcjNfbm9mbHVzaCwgZmFsc2UpID09IFg4NkVN
VUxfRVhDRVBUSU9OICkNCj4gICAgICAgICAgICAgIGh2bV9pbmplY3RfaHdfZXhjZXB0aW9uKFRS
QVBfZ3BfZmF1bHQsIDApOw0KPiANCj4gICAgICAgICAgdy0+ZG9fd3JpdGUuY3IzID0gMDsNCj4g
LS0tIGEveGVuL2FyY2gveDg2L2h2bS92bXgvdnZteC5jDQo+ICsrKyBiL3hlbi9hcmNoL3g4Ni9o
dm0vdm14L3Z2bXguYw0KPiBAQCAtMTAzMiw3ICsxMDMyLDcgQEAgc3RhdGljIHZvaWQgbG9hZF9z
aGFkb3dfZ3Vlc3Rfc3RhdGUoc3RydQ0KPiAgICAgIGlmICggcmMgPT0gWDg2RU1VTF9FWENFUFRJ
T04gKQ0KPiAgICAgICAgICBodm1faW5qZWN0X2h3X2V4Y2VwdGlvbihUUkFQX2dwX2ZhdWx0LCAw
KTsNCj4gDQo+IC0gICAgcmMgPSBodm1fc2V0X2NyMyhnZXRfdnZtY3ModiwgR1VFU1RfQ1IzKSwg
dHJ1ZSk7DQo+ICsgICAgcmMgPSBodm1fc2V0X2NyMyhnZXRfdnZtY3ModiwgR1VFU1RfQ1IzKSwg
ZmFsc2UsIHRydWUpOw0KPiAgICAgIGlmICggcmMgPT0gWDg2RU1VTF9FWENFUFRJT04gKQ0KPiAg
ICAgICAgICBodm1faW5qZWN0X2h3X2V4Y2VwdGlvbihUUkFQX2dwX2ZhdWx0LCAwKTsNCj4gDQo+
IEBAIC0xMjQ2LDcgKzEyNDYsNyBAQCBzdGF0aWMgdm9pZCBsb2FkX3Z2bWNzX2hvc3Rfc3RhdGUo
c3RydWN0DQo+ICAgICAgaWYgKCByYyA9PSBYODZFTVVMX0VYQ0VQVElPTiApDQo+ICAgICAgICAg
IGh2bV9pbmplY3RfaHdfZXhjZXB0aW9uKFRSQVBfZ3BfZmF1bHQsIDApOw0KPiANCj4gLSAgICBy
YyA9IGh2bV9zZXRfY3IzKGdldF92dm1jcyh2LCBIT1NUX0NSMyksIHRydWUpOw0KPiArICAgIHJj
ID0gaHZtX3NldF9jcjMoZ2V0X3Z2bWNzKHYsIEhPU1RfQ1IzKSwgZmFsc2UsIHRydWUpOw0KPiAg
ICAgIGlmICggcmMgPT0gWDg2RU1VTF9FWENFUFRJT04gKQ0KPiAgICAgICAgICBodm1faW5qZWN0
X2h3X2V4Y2VwdGlvbihUUkFQX2dwX2ZhdWx0LCAwKTsNCj4gDQo+IC0tLSBhL3hlbi9pbmNsdWRl
L2FzbS14ODYvZG9tYWluLmgNCj4gKysrIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9kb21haW4uaA0K
PiBAQCAtMjc0LDYgKzI3NCw4IEBAIHN0cnVjdCBtb25pdG9yX3dyaXRlX2RhdGEgew0KPiAgICAg
ICAgICB1bnNpZ25lZCBpbnQgY3I0IDogMTsNCj4gICAgICB9IGRvX3dyaXRlOw0KPiANCj4gKyAg
ICBib29sIGNyM19ub2ZsdXNoOw0KPiArDQo+ICAgICAgdWludDMyX3QgbXNyOw0KPiAgICAgIHVp
bnQ2NF90IHZhbHVlOw0KPiAgICAgIHVpbnQ2NF90IGNyMDsNCj4gLS0tIGEveGVuL2luY2x1ZGUv
YXNtLXg4Ni9odm0vc3VwcG9ydC5oDQo+ICsrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvaHZtL3N1
cHBvcnQuaA0KPiBAQCAtMTM1LDcgKzEzNSw3IEBAIHZvaWQgaHZtX3NoYWRvd19oYW5kbGVfY2Qo
c3RydWN0IHZjcHUgKnYNCj4gICAqLw0KPiAgaW50IGh2bV9zZXRfZWZlcih1aW50NjRfdCB2YWx1
ZSk7DQo+ICBpbnQgaHZtX3NldF9jcjAodW5zaWduZWQgbG9uZyB2YWx1ZSwgYm9vbCBtYXlfZGVm
ZXIpOw0KPiAtaW50IGh2bV9zZXRfY3IzKHVuc2lnbmVkIGxvbmcgdmFsdWUsIGJvb2wgbWF5X2Rl
ZmVyKTsNCj4gK2ludCBodm1fc2V0X2NyMyh1bnNpZ25lZCBsb25nIHZhbHVlLCBib29sIG5vZmx1
c2gsIGJvb2wgbWF5X2RlZmVyKTsNCj4gIGludCBodm1fc2V0X2NyNCh1bnNpZ25lZCBsb25nIHZh
bHVlLCBib29sIG1heV9kZWZlcik7DQo+ICBpbnQgaHZtX2Rlc2NyaXB0b3JfYWNjZXNzX2ludGVy
Y2VwdCh1aW50NjRfdCBleGl0X2luZm8sDQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1aW50NjRfdCB2bXhfZXhpdF9xdWFsaWZpY2F0aW9uLA0KPiANCj4gDQo+IF9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQo+IFhlbi1kZXZlbCBt
YWlsaW5nIGxpc3QNCj4gWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnDQo+IGh0dHBzOi8v
bGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWwNCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5n
IGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJv
amVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

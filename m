Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 35EE06ACD6
	for <lists+xen-devel@lfdr.de>; Tue, 16 Jul 2019 18:33:58 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hnQLa-0001rQ-KW; Tue, 16 Jul 2019 16:30:34 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=LiPz=VN=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hnQLY-0001rL-PE
 for xen-devel@lists.xenproject.org; Tue, 16 Jul 2019 16:30:32 +0000
X-Inumbo-ID: 03f722d6-a7e7-11e9-8ec4-9b1935685f07
Received: from m4a0040g.houston.softwaregrp.com (unknown [15.124.2.86])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 03f722d6-a7e7-11e9-8ec4-9b1935685f07;
 Tue, 16 Jul 2019 16:30:26 +0000 (UTC)
Received: FROM m4a0040g.houston.softwaregrp.com (15.120.17.147) BY
 m4a0040g.houston.softwaregrp.com WITH ESMTP; 
 Tue, 16 Jul 2019 16:26:35 +0000
Received: from M9W0067.microfocus.com (2002:f79:be::f79:be) by
 M4W0335.microfocus.com (2002:f78:1193::f78:1193) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10; Tue, 16 Jul 2019 16:30:17 +0000
Received: from NAM02-BL2-obe.outbound.protection.outlook.com (15.124.72.10) by
 M9W0067.microfocus.com (15.121.0.190) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10 via Frontend Transport; Tue, 16 Jul 2019 16:30:17 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=Yv84C7HklOkfD9IPEh6tjqm3EPbrEs003+rCKMtGg1pcQ6g7SkRhC+2/4AKm0GqqQEpgPXIAKZV5HFRsS5Rk/FBLGhxuzdqfsIMQIDSQTOGcfVvPi9RdRD9Z1qApAOs8YNhx5snFtwhQ3anqEDfoOG0hDdKGJtZHLheTr/R+fg1DM6Dz50wW3Lhs++Xc3CenjNx35eMp8fXAIp8iL2bMrFf7/5KesPZYr51hIRS/kmRxgwTuVQUYimydDYhHBewgbQ3JqnL0z+rPbOVK3N0dKAjG33JKbuDZT+KkM3tOTwOHNwGvvfpAyObmmLsaATJAZBc0FJd6szFvEAZH79YAcA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=L4Gp7fWNTXaeSrGCl+wjv31xF/KYNMFYjqKltoOSKC0=;
 b=fmIG1QBxljT14s2ATXO7jKWaK4ERIeHAlPWXLK5bUCylDXr6o/M8J8TTmZp8xl1jCkOV38TL0Pb3T+BvgdRarCqsAgV3PVCz+1ZpUwdXA6XgionjTIKqotAG+s/VaOFW2F3D41G1F0UVJucT6QXI9G+eLFI++jNvQLKTM16nrTxXTExQItsSL91YTvb802+GaLrVaAGzGEHhqIIi3c3pWbj8MgTkLzApO+qFkVh0vbxk1hituoYLhpxm1KVRWK8MxaZCNo9ogKZAyuaF8WRea24PCa56VHWYsvk/UP2iG/xEFNMmYyBg0F10fyJOF0ZXawCpMY2xwNW5i4v1M2arSQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=pass
 smtp.mailfrom=suse.com;dmarc=pass action=none header.from=suse.com;dkim=pass
 header.d=suse.com;arc=none
Received: from DM6PR18MB3401.namprd18.prod.outlook.com (10.255.174.218) by
 DM6SPR01MB0073.namprd18.prod.outlook.com (20.179.55.90) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2073.14; Tue, 16 Jul 2019 16:30:15 +0000
Received: from DM6PR18MB3401.namprd18.prod.outlook.com
 ([fe80::1fe:35f6:faf3:78c7]) by DM6PR18MB3401.namprd18.prod.outlook.com
 ([fe80::1fe:35f6:faf3:78c7%7]) with mapi id 15.20.2073.012; Tue, 16 Jul 2019
 16:30:15 +0000
From: Jan Beulich <JBeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH v3 00/14] x86: AMD x2APIC support
Thread-Index: AQHVO/O/ZQ7A1jEOCk+lXAlfr+dqKQ==
Date: Tue, 16 Jul 2019 16:30:15 +0000
Message-ID: <6272c301-a905-38cf-dd1a-645f3d703241@suse.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
x-clientproxiedby: DB6PR07CA0192.eurprd07.prod.outlook.com
 (2603:10a6:6:42::22) To DM6PR18MB3401.namprd18.prod.outlook.com
 (2603:10b6:5:1cc::26)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=JBeulich@suse.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [87.234.252.170]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: 10f919f7-ad00-4a28-29c1-08d70a0ae1b3
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328)(49563074)(7193020);
 SRVR:DM6SPR01MB0073; 
x-ms-traffictypediagnostic: DM6SPR01MB0073:
x-microsoft-antispam-prvs: <DM6SPR01MB0073B1F77E5BF8E9B74A2C86B3CE0@DM6SPR01MB0073.namprd18.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:7691;
x-forefront-prvs: 0100732B76
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(4636009)(39860400002)(396003)(346002)(136003)(366004)(376002)(189003)(199004)(6116002)(68736007)(3846002)(8936002)(66066001)(71190400001)(71200400001)(66446008)(81166006)(66946007)(66576008)(66476007)(66556008)(8676002)(478600001)(25786009)(99936001)(64756008)(5660300002)(31686004)(7736002)(80792005)(81156014)(186003)(6916009)(2616005)(476003)(2501003)(102836004)(14454004)(52116002)(26005)(6506007)(386003)(6512007)(486006)(53936002)(6486002)(2906002)(6436002)(5024004)(2351001)(316002)(14444005)(256004)(86362001)(305945005)(5640700003)(99286004)(4326008)(36756003)(31696002)(54906003);
 DIR:OUT; SFP:1102; SCL:1; SRVR:DM6SPR01MB0073;
 H:DM6PR18MB3401.namprd18.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; MX:1; A:1; 
received-spf: None (protection.outlook.com: suse.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: RKqnqZ7qbO63GPD7Mt997EjbBrFywoAQLEyb7Vrt0NRNdFTJLByzefH4AqkC2i4l0tZ5LFmVpBmCb38qFbbHc8YwiQ1YJc0rAc0fOgyxL3Cgw7gDUuG0U2QaTj31hBynu+1opBmNeG5aRJ2OqIynOAHKp17KLVfRAnbqOTHWXlhIiqVLwM2qr+/ZMgfUBVn8Fk2ambrKdjyugsAsjLfdQ4Vk53QO53RYuNRhdpvMLR5+7uhrTONZRBcVQK/VaaJUQ5TXg+ILahvRsx8xvQUnVWF7/N/re+w4mkgmJFh7bDTpJqesPujLd0O5LKvtDvo6aq0WciGhOx19c0R9C663KplvO6IxN7+kjvdy1h/vEuko8/u8rsQLVgaqUGJxtGMqKWsBUOtKMTAy0ngAiztmmgypQ/dDQs3Ex14lG3FGWuE=
Content-Type: multipart/mixed;
 boundary="_015_6272c301a90538cfdd1a645f3d703241susecom_"
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-Network-Message-Id: 10f919f7-ad00-4a28-29c1-08d70a0ae1b3
X-MS-Exchange-CrossTenant-originalarrivaltime: 16 Jul 2019 16:30:15.4896 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 856b813c-16e5-49a5-85ec-6f081e13b527
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: JBeulich@suse.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6SPR01MB0073
X-OriginatorOrg: suse.com
Subject: [Xen-devel] [PATCH v3 00/14] x86: AMD x2APIC support
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 Brian Woods <brian.woods@amd.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; charset="utf-8"
Content-ID: <D289F995DFC21F44B1AB2B1ADC7CB9EE@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

RGVzcGl0ZSB0aGUgdGl0bGUgdGhpcyBpcyBhY3R1YWxseSBhbGwgQU1EIElPTU1VIHNpZGUgd29y
azsgYWxsIHg4Ng0Kc2lkZSBhZGp1c3RtZW50cyBoYXZlIGFscmVhZHkgYmVlbiBjYXJyaWVkIG91
dC4NCg0KVGhlIGZpcnN0IGFuZCBsYXN0IHBhdGNoZXMgYXJlbid0IHJlYWxseSB4MkFQSUMgcmVs
YXRlZCwgYnV0IHdlcmUgZm91bmQNCmhlbHBmdWwgaW4gdGhlIGNvdXJzZSBvZiB0aGUgcmUtd29y
ayBkb25lIGZvciB0aGlzIHZlcnNpb24uIFRoZSBmaXJzdA0Kb25lIGxpdmVzIGluIGl0cyBwbGFj
ZSBmb3IgZWFzeSBiYWNrcG9ydGluZy4NCg0KTm90ZSB0aGF0IHRoaXMgc2VyaWVzIG5vdyBkZXBl
bmRzIG9uIHRoZSB2NCAieDg2OiBJUlEgbWFuYWdlbWVudA0KYWRqdXN0bWVudHMiIG9uZSwgaW4g
cGFydGljdWxhciBvbiBhdCBsZWFzdCAieDg2L0lPTU1VOiBkb24ndCByZXN0cmljdA0KSVJRIGFm
ZmluaXRpZXMgdG8gb25saW5lIENQVXMiLg0KDQpTZWUgaW5kaXZpZHVhbCBwYXRjaGVzIGZvciBj
aGFuZ2VzIGZyb20gdjIuDQoNCjAxOiBmcmVlIG1vcmUgbWVtb3J5IHdoZW4gY2xlYW5pbmcgdXAg
YWZ0ZXIgZXJyb3INCjAyOiB1c2UgYml0IGZpZWxkIGZvciBleHRlbmRlZCBmZWF0dXJlIHJlZ2lz
dGVyDQowMzogdXNlIGJpdCBmaWVsZCBmb3IgY29udHJvbCByZWdpc3Rlcg0KMDQ6IHVzZSBiaXQg
ZmllbGQgZm9yIElSVEUNCjA1OiBwYXNzIElPTU1VIHRvIGl0ZXJhdGVfaXZyc19lbnRyaWVzKCkg
Y2FsbGJhY2sNCjA2OiBwYXNzIElPTU1VIHRvIGFtZF9pb21tdV9hbGxvY19pbnRyZW1hcF90YWJs
ZSgpDQowNzogcGFzcyBJT01NVSB0byB7Z2V0LGZyZWUsdXBkYXRlfV9pbnRyZW1hcF9lbnRyeSgp
DQowODogaW50cm9kdWNlIDEyOC1iaXQgSVJURSBub24tZ3Vlc3QtQVBJQyBJUlRFIGZvcm1hdA0K
MDk6IHNwbGl0IGFtZF9pb21tdV9pbml0X29uZSgpDQoxMDogYWxsb3cgZW5hYmxpbmcgd2l0aCBJ
UlEgbm90IHlldCBzZXQgdXANCjExOiBhZGp1c3Qgc2V0dXAgb2YgaW50ZXJuYWwgaW50ZXJydXB0
IGZvciB4MkFQSUMgbW9kZQ0KMTI6IGVuYWJsZSB4MkFQSUMgbW9kZSB3aGVuIGF2YWlsYWJsZQ0K
MTM6IGNvcnJlY3QgSVJURSB1cGRhdGluZw0KMTQ6IHByb2Nlc3Mgc29mdGlycXMgd2hpbGUgZHVt
cGluZyBJUlRzDQoNCkZ1bGwgc2V0IG9mIHBhdGNoZXMgb25jZSBhZ2FpbiBhdHRhY2hlZCBoZXJl
IGR1ZSB0byBzdGlsbCB1bnJlc29sdmVkDQplbWFpbCBpc3N1ZXMgb3ZlciBoZXJlLg0KDQpKYW4N
Cg==

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-free-on-cleanup.patch"
Content-Description: AMD-IOMMU-free-on-cleanup.patch
Content-Disposition: attachment; filename="AMD-IOMMU-free-on-cleanup.patch";
	size=1353; creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <F4B9BCD2F1C10E44AC10117E52F0ADC0@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBmcmVlIG1vcmUgbWVtb3J5IHdoZW4gY2xlYW5pbmcgdXAgYWZ0ZXIgZXJyb3IK
ClRoZSBpbnRlcnJ1cHQgcmVtYXBwaW5nIGluLXVzZSBiaXRtYXBzIHdlcmUgbGVha2VkIGluIGFs
bCBjYXNlcy4gVGhlCnJpbmcgYnVmZmVycyBhbmQgdGhlIG1hcHBpbmcgb2YgdGhlIE1NSU8gc3Bh
Y2Ugd2VyZSBsZWFrZWQgZm9yIGFueSBJT01NVQp0aGF0IGhhZG4ndCBiZWVuIGVuYWJsZWQgeWV0
LgoKU2lnbmVkLW9mZi1ieTogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgotLS0KdjM6
IE5ldy4KCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0LmMKKysr
IGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2luaXQuYwpAQCAtMTA3MCwxMyAr
MTA3MCwxMiBAQCBzdGF0aWMgdm9pZCBfX2luaXQgYW1kX2lvbW11X2luaXRfY2xlYW51CiAgICAg
ewogICAgICAgICBsaXN0X2RlbCgmaW9tbXUtPmxpc3QpOwogICAgICAgICBpZiAoIGlvbW11LT5l
bmFibGVkICkKLSAgICAgICAgewogICAgICAgICAgICAgZGlzYWJsZV9pb21tdShpb21tdSk7Ci0g
ICAgICAgICAgICBkZWFsbG9jYXRlX3JpbmdfYnVmZmVyKCZpb21tdS0+Y21kX2J1ZmZlcik7Ci0g
ICAgICAgICAgICBkZWFsbG9jYXRlX3JpbmdfYnVmZmVyKCZpb21tdS0+ZXZlbnRfbG9nKTsKLSAg
ICAgICAgICAgIGRlYWxsb2NhdGVfcmluZ19idWZmZXIoJmlvbW11LT5wcHJfbG9nKTsKLSAgICAg
ICAgICAgIHVubWFwX2lvbW11X21taW9fcmVnaW9uKGlvbW11KTsKLSAgICAgICAgfQorCisgICAg
ICAgIGRlYWxsb2NhdGVfcmluZ19idWZmZXIoJmlvbW11LT5jbWRfYnVmZmVyKTsKKyAgICAgICAg
ZGVhbGxvY2F0ZV9yaW5nX2J1ZmZlcigmaW9tbXUtPmV2ZW50X2xvZyk7CisgICAgICAgIGRlYWxs
b2NhdGVfcmluZ19idWZmZXIoJmlvbW11LT5wcHJfbG9nKTsKKyAgICAgICAgdW5tYXBfaW9tbXVf
bW1pb19yZWdpb24oaW9tbXUpOwogICAgICAgICB4ZnJlZShpb21tdSk7CiAgICAgfQogCi0tLSBh
L3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMKKysrIGIveGVuL2RyaXZl
cnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2ludHIuYwpAQCAtNjEwLDYgKzYxMCw4IEBAIGludCBf
X2luaXQgYW1kX2lvbW11X2ZyZWVfaW50cmVtYXBfdGFibGUKIHsKICAgICB2b2lkICp0YiA9IGl2
cnNfbWFwcGluZy0+aW50cmVtYXBfdGFibGU7CiAKKyAgICBYRlJFRShpdnJzX21hcHBpbmctPmlu
dHJlbWFwX2ludXNlKTsKKwogICAgIGlmICggdGIgKQogICAgIHsKICAgICAgICAgX19mcmVlX2Ft
ZF9pb21tdV90YWJsZXModGIsIElOVFJFTUFQX1RBQkxFX09SREVSKTsK

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-bitfield-ext-feat.patch"
Content-Description: AMD-IOMMU-bitfield-ext-feat.patch
Content-Disposition: attachment;
	filename="AMD-IOMMU-bitfield-ext-feat.patch"; size=14747;
	creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <CE744160B214B84880FE599F4485C2AD@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiB1c2UgYml0IGZpZWxkIGZvciBleHRlbmRlZCBmZWF0dXJlIHJlZ2lzdGVyCgpU
aGlzIGFsc28gdGFrZXMgY2FyZSBvZiBzZXZlcmFsIG9mIHRoZSBzaGlmdCB2YWx1ZXMgd3Jvbmds
eSBoYXZpbmcgYmVlbgpzcGVjaWZpZWQgYXMgaGV4IHJhdGhlciB0aGFuIGRlYy4KClRha2UgdGhl
IG9wcG9ydHVuaXR5IGFuZAotIHJlcGxhY2UgYSByZWFkbCgpIHBhaXIgYnkgYSBzaW5nbGUgcmVh
ZHEoKSwKLSBhZGQgZnVydGhlciBmaWVsZHMuCgpTaWduZWQtb2ZmLWJ5OiBKYW4gQmV1bGljaCA8
amJldWxpY2hAc3VzZS5jb20+Ci0tLQp2MzogQW5vdGhlciBhdHRlbXB0IGF0IGRlcml2aW5nIG1h
c2tzIGZyb20gYml0ZmllbGRzLCBob3BlZnVsbHkgYmV0dGVyCiAgICBsaWtlZCBieSBjbGFuZyAo
bWluZSB3YXMgZmluZSBldmVuIHdpdGggdGhlIHYyIHZhcmlhbnQpLgp2MjogQ29ycmVjdCBzYXRz
X3N1cCBwb3NpdGlvbiBhbmQgbmFtZS4gUmUtYmFzZSBvdmVyIG5ldyBlYXJsaWVyIHBhdGNoLgoK
LS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2RldGVjdC5jCisrKyBiL3hl
bi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9kZXRlY3QuYwpAQCAtNjAsNDkgKzYwLDc3
IEBAIHN0YXRpYyBpbnQgX19pbml0IGdldF9pb21tdV9jYXBhYmlsaXRpZXMKIAogdm9pZCBfX2lu
aXQgZ2V0X2lvbW11X2ZlYXR1cmVzKHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11KQogewotICAgIHUz
MiBsb3csIGhpZ2g7Ci0gICAgaW50IGkgPSAwIDsKICAgICBjb25zdCBzdHJ1Y3QgYW1kX2lvbW11
ICpmaXJzdDsKLSAgICBzdGF0aWMgY29uc3QgY2hhciAqX19pbml0ZGF0YSBmZWF0dXJlX3N0cltd
ID0gewotICAgICAgICAiLSBQcmVmZXRjaCBQYWdlcyBDb21tYW5kIiwgCi0gICAgICAgICItIFBl
cmlwaGVyYWwgUGFnZSBTZXJ2aWNlIFJlcXVlc3QiLCAKLSAgICAgICAgIi0gWDJBUElDIFN1cHBv
cnRlZCIsIAotICAgICAgICAiLSBOWCBiaXQgU3VwcG9ydGVkIiwgCi0gICAgICAgICItIEd1ZXN0
IFRyYW5zbGF0aW9uIiwgCi0gICAgICAgICItIFJlc2VydmVkIGJpdCBbNV0iLAotICAgICAgICAi
LSBJbnZhbGlkYXRlIEFsbCBDb21tYW5kIiwgCi0gICAgICAgICItIEd1ZXN0IEFQSUMgc3VwcG9y
dGVkIiwgCi0gICAgICAgICItIEhhcmR3YXJlIEVycm9yIFJlZ2lzdGVycyIsIAotICAgICAgICAi
LSBQZXJmb3JtYW5jZSBDb3VudGVycyIsIAotICAgICAgICBOVUxMCi0gICAgfTsKLQogICAgIEFT
U0VSVCggaW9tbXUtPm1taW9fYmFzZSApOwogCiAgICAgaWYgKCAhaW9tbXVfaGFzX2NhcChpb21t
dSwgUENJX0NBUF9FRlJTVVBfU0hJRlQpICkKICAgICB7Ci0gICAgICAgIGlvbW11LT5mZWF0dXJl
cyA9IDA7CisgICAgICAgIGlvbW11LT5mZWF0dXJlcy5yYXcgPSAwOwogICAgICAgICByZXR1cm47
CiAgICAgfQogCi0gICAgbG93ID0gcmVhZGwoaW9tbXUtPm1taW9fYmFzZSArIElPTU1VX0VYVF9G
RUFUVVJFX01NSU9fT0ZGU0VUKTsKLSAgICBoaWdoID0gcmVhZGwoaW9tbXUtPm1taW9fYmFzZSAr
IElPTU1VX0VYVF9GRUFUVVJFX01NSU9fT0ZGU0VUICsgNCk7Ci0KLSAgICBpb21tdS0+ZmVhdHVy
ZXMgPSAoKHU2NCloaWdoIDw8IDMyKSB8IGxvdzsKKyAgICBpb21tdS0+ZmVhdHVyZXMucmF3ID0K
KyAgICAgICAgcmVhZHEoaW9tbXUtPm1taW9fYmFzZSArIElPTU1VX0VYVF9GRUFUVVJFX01NSU9f
T0ZGU0VUKTsKIAogICAgIC8qIERvbid0IGxvZyB0aGUgc2FtZSBzZXQgb2YgZmVhdHVyZXMgb3Zl
ciBhbmQgb3Zlci4gKi8KICAgICBmaXJzdCA9IGxpc3RfZmlyc3RfZW50cnkoJmFtZF9pb21tdV9o
ZWFkLCBzdHJ1Y3QgYW1kX2lvbW11LCBsaXN0KTsKLSAgICBpZiAoIGlvbW11ICE9IGZpcnN0ICYm
IGlvbW11LT5mZWF0dXJlcyA9PSBmaXJzdC0+ZmVhdHVyZXMgKQorICAgIGlmICggaW9tbXUgIT0g
Zmlyc3QgJiYgaW9tbXUtPmZlYXR1cmVzLnJhdyA9PSBmaXJzdC0+ZmVhdHVyZXMucmF3ICkKICAg
ICAgICAgcmV0dXJuOwogCiAgICAgcHJpbnRrKCJBTUQtVmk6IElPTU1VIEV4dGVuZGVkIEZlYXR1
cmVzOlxuIik7CiAKLSAgICB3aGlsZSAoIGZlYXR1cmVfc3RyW2ldICkKKyNkZWZpbmUgRkVBVChm
bGQsIHN0cikgZG8geyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKKyAgICBp
ZiAoIC0tKCh1bmlvbiBhbWRfaW9tbXVfZXh0X2ZlYXR1cmVzKXt9KS5mbGRzLmZsZCA+IDEgKSAg
IFwKKyAgICAgICAgcHJpbnRrKCAiLSAiIHN0ciAiOiAlI3hcbiIsIGlvbW11LT5mZWF0dXJlcy5m
bGRzLmZsZCk7IFwKKyAgICBlbHNlIGlmICggaW9tbXUtPmZlYXR1cmVzLmZsZHMuZmxkICkgICAg
ICAgICAgICAgICAgICAgICAgIFwKKyAgICAgICAgcHJpbnRrKCAiLSAiIHN0ciAiXG4iKTsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKK30gd2hpbGUgKCBmYWxzZSApCisKKyAgICBG
RUFUKHByZWZfc3VwLCAgICAgICAgICAgIlByZWZldGNoIFBhZ2VzIENvbW1hbmQiKTsKKyAgICBG
RUFUKHBwcl9zdXAsICAgICAgICAgICAgIlBlcmlwaGVyYWwgUGFnZSBTZXJ2aWNlIFJlcXVlc3Qi
KTsKKyAgICBGRUFUKHh0X3N1cCwgICAgICAgICAgICAgIngyQVBJQyIpOworICAgIEZFQVQobnhf
c3VwLCAgICAgICAgICAgICAiTlggYml0Iik7CisgICAgRkVBVChnYXBwaV9zdXAsICAgICAgICAg
ICJHdWVzdCBBUElDIFBoeXNpY2FsIFByb2Nlc3NvciBJbnRlcnJ1cHQiKTsKKyAgICBGRUFUKGlh
X3N1cCwgICAgICAgICAgICAgIkludmFsaWRhdGUgQWxsIENvbW1hbmQiKTsKKyAgICBGRUFUKGdh
X3N1cCwgICAgICAgICAgICAgIkd1ZXN0IEFQSUMiKTsKKyAgICBGRUFUKGhlX3N1cCwgICAgICAg
ICAgICAgIkhhcmR3YXJlIEVycm9yIFJlZ2lzdGVycyIpOworICAgIEZFQVQocGNfc3VwLCAgICAg
ICAgICAgICAiUGVyZm9ybWFuY2UgQ291bnRlcnMiKTsKKyAgICBGRUFUKGhhdHMsICAgICAgICAg
ICAgICAgIkhvc3QgQWRkcmVzcyBUcmFuc2xhdGlvbiBTaXplIik7CisKKyAgICBpZiAoIGlvbW11
LT5mZWF0dXJlcy5mbGRzLmd0X3N1cCApCiAgICAgewotICAgICAgICBpZiAoIGFtZF9pb21tdV9o
YXNfZmVhdHVyZShpb21tdSwgaSkgKQotICAgICAgICAgICAgcHJpbnRrKCAiICVzXG4iLCBmZWF0
dXJlX3N0cltpXSk7Ci0gICAgICAgIGkrKzsKKyAgICAgICAgRkVBVChnYXRzLCAgICAgICAgICAg
Ikd1ZXN0IEFkZHJlc3MgVHJhbnNsYXRpb24gU2l6ZSIpOworICAgICAgICBGRUFUKGdseF9zdXAs
ICAgICAgICAiR3Vlc3QgQ1IzIFJvb3QgVGFibGUgTGV2ZWwiKTsKKyAgICAgICAgRkVBVChwYXNf
bWF4LCAgICAgICAgIk1heGltdW0gUEFTSUQiKTsKICAgICB9CisKKyAgICBGRUFUKHNtaWZfc3Vw
LCAgICAgICAgICAgIlNNSSBGaWx0ZXIgUmVnaXN0ZXIiKTsKKyAgICBGRUFUKHNtaWZfcmMsICAg
ICAgICAgICAgIlNNSSBGaWx0ZXIgUmVnaXN0ZXIgQ291bnQiKTsKKyAgICBGRUFUKGdhbV9zdXAs
ICAgICAgICAgICAgIkd1ZXN0IFZpcnR1YWwgQVBJQyBNb2RlcyIpOworICAgIEZFQVQoZHVhbF9w
cHJfbG9nX3N1cCwgICAiRHVhbCBQUFIgTG9nIik7CisgICAgRkVBVChkdWFsX2V2ZW50X2xvZ19z
dXAsICJEdWFsIEV2ZW50IExvZyIpOworICAgIEZFQVQoc2F0c19zdXAsICAgICAgICAgICAiU2Vj
dXJlIEFUUyIpOworICAgIEZFQVQodXNfc3VwLCAgICAgICAgICAgICAiVXNlciAvIFN1cGVydmlz
b3IgUGFnZSBQcm90ZWN0aW9uIik7CisgICAgRkVBVChkZXZfdGJsX3NlZ19zdXAsICAgICJEZXZp
Y2UgVGFibGUgU2VnbWVudGF0aW9uIik7CisgICAgRkVBVChwcHJfZWFybHlfb2Zfc3VwLCAgICJQ
UFIgTG9nIE92ZXJmbG93IEVhcmx5IFdhcm5pbmciKTsKKyAgICBGRUFUKHBwcl9hdXRvX3JzcF9z
dXAsICAgIlBQUiBBdXRvbWF0aWMgUmVzcG9uc2UiKTsKKyAgICBGRUFUKG1hcmNfc3VwLCAgICAg
ICAgICAgIk1lbW9yeSBBY2Nlc3MgUm91dGluZyBhbmQgQ29udHJvbCIpOworICAgIEZFQVQoYmxr
X3N0b3BfbXJrX3N1cCwgICAiQmxvY2sgU3RvcE1hcmsgTWVzc2FnZSIpOworICAgIEZFQVQocGVy
Zl9vcHRfc3VwICwgICAgICAiUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uIik7CisgICAgRkVBVCht
c2lfY2FwX21taW9fc3VwLCAgICJNU0kgQ2FwYWJpbGl0eSBNTUlPIEFjY2VzcyIpOworICAgIEZF
QVQoZ2lvX3N1cCwgICAgICAgICAgICAiR3Vlc3QgSS9PIFByb3RlY3Rpb24iKTsKKyAgICBGRUFU
KGhhX3N1cCwgICAgICAgICAgICAgIkhvc3QgQWNjZXNzIik7CisgICAgRkVBVChlcGhfc3VwLCAg
ICAgICAgICAgICJFbmhhbmNlZCBQUFIgSGFuZGxpbmciKTsKKyAgICBGRUFUKGF0dHJfZndfc3Vw
LCAgICAgICAgIkF0dHJpYnV0ZSBGb3J3YXJkIik7CisgICAgRkVBVChoZF9zdXAsICAgICAgICAg
ICAgICJIb3N0IERpcnR5Iik7CisgICAgRkVBVChpbnZfaW90bGJfdHlwZV9zdXAsICJJbnZhbGlk
YXRlIElPVExCIFR5cGUiKTsKKyAgICBGRUFUKHZpb21tdV9zdXAsICAgICAgICAgIlZpcnR1YWxp
emVkIElPTU1VIik7CisgICAgRkVBVCh2bV9ndWFyZF9pb19zdXAsICAgICJWTUd1YXJkIEkvTyBT
dXBwb3J0Iik7CisgICAgRkVBVCh2bV90YWJsZV9zaXplLCAgICAgICJWTSBUYWJsZSBTaXplIik7
CisgICAgRkVBVChnYV91cGRhdGVfZGlzX3N1cCwgICJHdWVzdCBBY2Nlc3MgQml0IFVwZGF0ZSBE
aXNhYmxlIik7CisKKyN1bmRlZiBGRUFUCisjdW5kZWYgTUFTSwogfQogCiBpbnQgX19pbml0IGFt
ZF9pb21tdV9kZXRlY3Rfb25lX2FjcGkoCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2Ft
ZC9pb21tdV9ndWVzdC5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9n
dWVzdC5jCkBAIC02MzgsNyArNjM4LDcgQEAgc3RhdGljIHVpbnQ2NF90IGlvbW11X21taW9fcmVh
ZDY0KHN0cnVjdAogICAgICAgICB2YWwgPSByZWdfdG9fdTY0KGlvbW11LT5yZWdfc3RhdHVzKTsK
ICAgICAgICAgYnJlYWs7CiAgICAgY2FzZSBJT01NVV9FWFRfRkVBVFVSRV9NTUlPX09GRlNFVDoK
LSAgICAgICAgdmFsID0gcmVnX3RvX3U2NChpb21tdS0+cmVnX2V4dF9mZWF0dXJlKTsKKyAgICAg
ICAgdmFsID0gaW9tbXUtPnJlZ19leHRfZmVhdHVyZS5yYXc7CiAgICAgICAgIGJyZWFrOwogCiAg
ICAgZGVmYXVsdDoKQEAgLTgwMiwzOSArODAyLDI2IEBAIGludCBndWVzdF9pb21tdV9zZXRfYmFz
ZShzdHJ1Y3QgZG9tYWluICoKIC8qIEluaXRpYWxpemUgbW1pbyByZWFkIG9ubHkgYml0cyAqLwog
c3RhdGljIHZvaWQgZ3Vlc3RfaW9tbXVfcmVnX2luaXQoc3RydWN0IGd1ZXN0X2lvbW11ICppb21t
dSkKIHsKLSAgICB1aW50MzJfdCBsb3dlciwgdXBwZXI7CisgICAgdW5pb24gYW1kX2lvbW11X2V4
dF9mZWF0dXJlcyBlZiA9IHsKKyAgICAgICAgLyogU3VwcG9ydCBwcmVmZXRjaCAqLworICAgICAg
ICAuZmxkcy5wcmVmX3N1cCA9IDEsCisgICAgICAgIC8qIFN1cHBvcnQgUFBSIGxvZyAqLworICAg
ICAgICAuZmxkcy5wcHJfc3VwID0gMSwKKyAgICAgICAgLyogU3VwcG9ydCBndWVzdCB0cmFuc2xh
dGlvbiAqLworICAgICAgICAuZmxkcy5ndF9zdXAgPSAxLAorICAgICAgICAvKiBTdXBwb3J0IGlu
dmFsaWRhdGUgYWxsIGNvbW1hbmQgKi8KKyAgICAgICAgLmZsZHMuaWFfc3VwID0gMSwKKyAgICAg
ICAgLyogSG9zdCB0cmFuc2xhdGlvbiBzaXplIGhhcyA2IGxldmVscyAqLworICAgICAgICAuZmxk
cy5oYXRzID0gSE9TVF9BRERSRVNTX1NJWkVfNl9MRVZFTCwKKyAgICAgICAgLyogR3Vlc3QgdHJh
bnNsYXRpb24gc2l6ZSBoYXMgNiBsZXZlbHMgKi8KKyAgICAgICAgLmZsZHMuZ2F0cyA9IEdVRVNU
X0FERFJFU1NfU0laRV82X0xFVkVMLAorICAgICAgICAvKiBTaW5nbGUgbGV2ZWwgZ0NSMyAqLwor
ICAgICAgICAuZmxkcy5nbHhfc3VwID0gR1VFU1RfQ1IzXzFfTEVWRUwsCisgICAgICAgIC8qIDkg
Yml0IFBBU0lEICovCisgICAgICAgIC5mbGRzLnBhc19tYXggPSBQQVNNQVhfOV9iaXQsCisgICAg
fTsKIAotICAgIGxvd2VyID0gdXBwZXIgPSAwOwotICAgIC8qIFN1cHBvcnQgcHJlZmV0Y2ggKi8K
LSAgICBpb21tdV9zZXRfYml0KCZsb3dlcixJT01NVV9FWFRfRkVBVFVSRV9QUkVGU1VQX1NISUZU
KTsKLSAgICAvKiBTdXBwb3J0IFBQUiBsb2cgKi8KLSAgICBpb21tdV9zZXRfYml0KCZsb3dlcixJ
T01NVV9FWFRfRkVBVFVSRV9QUFJTVVBfU0hJRlQpOwotICAgIC8qIFN1cHBvcnQgZ3Vlc3QgdHJh
bnNsYXRpb24gKi8KLSAgICBpb21tdV9zZXRfYml0KCZsb3dlcixJT01NVV9FWFRfRkVBVFVSRV9H
VFNVUF9TSElGVCk7Ci0gICAgLyogU3VwcG9ydCBpbnZhbGlkYXRlIGFsbCBjb21tYW5kICovCi0g
ICAgaW9tbXVfc2V0X2JpdCgmbG93ZXIsSU9NTVVfRVhUX0ZFQVRVUkVfSUFTVVBfU0hJRlQpOwot
Ci0gICAgLyogSG9zdCB0cmFuc2xhdGlvbiBzaXplIGhhcyA2IGxldmVscyAqLwotICAgIHNldF9m
aWVsZF9pbl9yZWdfdTMyKEhPU1RfQUREUkVTU19TSVpFXzZfTEVWRUwsIGxvd2VyLAotICAgICAg
ICAgICAgICAgICAgICAgICAgIElPTU1VX0VYVF9GRUFUVVJFX0hBVFNfTUFTSywKLSAgICAgICAg
ICAgICAgICAgICAgICAgICBJT01NVV9FWFRfRkVBVFVSRV9IQVRTX1NISUZULAotICAgICAgICAg
ICAgICAgICAgICAgICAgICZsb3dlcik7Ci0gICAgLyogR3Vlc3QgdHJhbnNsYXRpb24gc2l6ZSBo
YXMgNiBsZXZlbHMgKi8KLSAgICBzZXRfZmllbGRfaW5fcmVnX3UzMihHVUVTVF9BRERSRVNTX1NJ
WkVfNl9MRVZFTCwgbG93ZXIsCi0gICAgICAgICAgICAgICAgICAgICAgICAgSU9NTVVfRVhUX0ZF
QVRVUkVfR0FUU19NQVNLLAotICAgICAgICAgICAgICAgICAgICAgICAgIElPTU1VX0VYVF9GRUFU
VVJFX0dBVFNfU0hJRlQsCi0gICAgICAgICAgICAgICAgICAgICAgICAgJmxvd2VyKTsKLSAgICAv
KiBTaW5nbGUgbGV2ZWwgZ0NSMyAqLwotICAgIHNldF9maWVsZF9pbl9yZWdfdTMyKEdVRVNUX0NS
M18xX0xFVkVMLCBsb3dlciwKLSAgICAgICAgICAgICAgICAgICAgICAgICBJT01NVV9FWFRfRkVB
VFVSRV9HTFhTVVBfTUFTSywKLSAgICAgICAgICAgICAgICAgICAgICAgICBJT01NVV9FWFRfRkVB
VFVSRV9HTFhTVVBfU0hJRlQsICZsb3dlcik7Ci0gICAgLyogOSBiaXQgUEFTSUQgKi8KLSAgICBz
ZXRfZmllbGRfaW5fcmVnX3UzMihQQVNNQVhfOV9iaXQsIHVwcGVyLAotICAgICAgICAgICAgICAg
ICAgICAgICAgIElPTU1VX0VYVF9GRUFUVVJFX1BBU01BWF9NQVNLLAotICAgICAgICAgICAgICAg
ICAgICAgICAgIElPTU1VX0VYVF9GRUFUVVJFX1BBU01BWF9TSElGVCwgJnVwcGVyKTsKLQotICAg
IGlvbW11LT5yZWdfZXh0X2ZlYXR1cmUubG8gPSBsb3dlcjsKLSAgICBpb21tdS0+cmVnX2V4dF9m
ZWF0dXJlLmhpID0gdXBwZXI7CisgICAgaW9tbXUtPnJlZ19leHRfZmVhdHVyZSA9IGVmOwogfQog
CiBzdGF0aWMgaW50IGd1ZXN0X2lvbW11X21taW9fcmFuZ2Uoc3RydWN0IHZjcHUgKnYsIHVuc2ln
bmVkIGxvbmcgYWRkcikKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2lu
aXQuYworKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfaW5pdC5jCkBAIC04
ODMsNyArODgzLDcgQEAgc3RhdGljIHZvaWQgZW5hYmxlX2lvbW11KHN0cnVjdCBhbWRfaW9tbQog
ICAgIHJlZ2lzdGVyX2lvbW11X2V2ZW50X2xvZ19pbl9tbWlvX3NwYWNlKGlvbW11KTsKICAgICBy
ZWdpc3Rlcl9pb21tdV9leGNsdXNpb25fcmFuZ2UoaW9tbXUpOwogCi0gICAgaWYgKCBhbWRfaW9t
bXVfaGFzX2ZlYXR1cmUoaW9tbXUsIElPTU1VX0VYVF9GRUFUVVJFX1BQUlNVUF9TSElGVCkgKQor
ICAgIGlmICggaW9tbXUtPmZlYXR1cmVzLmZsZHMucHByX3N1cCApCiAgICAgICAgIHJlZ2lzdGVy
X2lvbW11X3Bwcl9sb2dfaW5fbW1pb19zcGFjZShpb21tdSk7CiAKICAgICBkZXNjID0gaXJxX3Rv
X2Rlc2MoaW9tbXUtPm1zaS5pcnEpOwpAQCAtODk3LDE1ICs4OTcsMTUgQEAgc3RhdGljIHZvaWQg
ZW5hYmxlX2lvbW11KHN0cnVjdCBhbWRfaW9tbQogICAgIHNldF9pb21tdV9jb21tYW5kX2J1ZmZl
cl9jb250cm9sKGlvbW11LCBJT01NVV9DT05UUk9MX0VOQUJMRUQpOwogICAgIHNldF9pb21tdV9l
dmVudF9sb2dfY29udHJvbChpb21tdSwgSU9NTVVfQ09OVFJPTF9FTkFCTEVEKTsKIAotICAgIGlm
ICggYW1kX2lvbW11X2hhc19mZWF0dXJlKGlvbW11LCBJT01NVV9FWFRfRkVBVFVSRV9QUFJTVVBf
U0hJRlQpICkKKyAgICBpZiAoIGlvbW11LT5mZWF0dXJlcy5mbGRzLnBwcl9zdXAgKQogICAgICAg
ICBzZXRfaW9tbXVfcHByX2xvZ19jb250cm9sKGlvbW11LCBJT01NVV9DT05UUk9MX0VOQUJMRUQp
OwogCi0gICAgaWYgKCBhbWRfaW9tbXVfaGFzX2ZlYXR1cmUoaW9tbXUsIElPTU1VX0VYVF9GRUFU
VVJFX0dUU1VQX1NISUZUKSApCisgICAgaWYgKCBpb21tdS0+ZmVhdHVyZXMuZmxkcy5ndF9zdXAg
KQogICAgICAgICBzZXRfaW9tbXVfZ3Vlc3RfdHJhbnNsYXRpb25fY29udHJvbChpb21tdSwgSU9N
TVVfQ09OVFJPTF9FTkFCTEVEKTsKIAogICAgIHNldF9pb21tdV90cmFuc2xhdGlvbl9jb250cm9s
KGlvbW11LCBJT01NVV9DT05UUk9MX0VOQUJMRUQpOwogCi0gICAgaWYgKCBhbWRfaW9tbXVfaGFz
X2ZlYXR1cmUoaW9tbXUsIElPTU1VX0VYVF9GRUFUVVJFX0lBU1VQX1NISUZUKSApCisgICAgaWYg
KCBpb21tdS0+ZmVhdHVyZXMuZmxkcy5pYV9zdXAgKQogICAgICAgICBhbWRfaW9tbXVfZmx1c2hf
YWxsX2NhY2hlcyhpb21tdSk7CiAKICAgICBpb21tdS0+ZW5hYmxlZCA9IDE7CkBAIC05MjgsMTAg
KzkyOCwxMCBAQCBzdGF0aWMgdm9pZCBkaXNhYmxlX2lvbW11KHN0cnVjdCBhbWRfaW9tCiAgICAg
c2V0X2lvbW11X2NvbW1hbmRfYnVmZmVyX2NvbnRyb2woaW9tbXUsIElPTU1VX0NPTlRST0xfRElT
QUJMRUQpOwogICAgIHNldF9pb21tdV9ldmVudF9sb2dfY29udHJvbChpb21tdSwgSU9NTVVfQ09O
VFJPTF9ESVNBQkxFRCk7CiAKLSAgICBpZiAoIGFtZF9pb21tdV9oYXNfZmVhdHVyZShpb21tdSwg
SU9NTVVfRVhUX0ZFQVRVUkVfUFBSU1VQX1NISUZUKSApCisgICAgaWYgKCBpb21tdS0+ZmVhdHVy
ZXMuZmxkcy5wcHJfc3VwICkKICAgICAgICAgc2V0X2lvbW11X3Bwcl9sb2dfY29udHJvbChpb21t
dSwgSU9NTVVfQ09OVFJPTF9ESVNBQkxFRCk7CiAKLSAgICBpZiAoIGFtZF9pb21tdV9oYXNfZmVh
dHVyZShpb21tdSwgSU9NTVVfRVhUX0ZFQVRVUkVfR1RTVVBfU0hJRlQpICkKKyAgICBpZiAoIGlv
bW11LT5mZWF0dXJlcy5mbGRzLmd0X3N1cCApCiAgICAgICAgIHNldF9pb21tdV9ndWVzdF90cmFu
c2xhdGlvbl9jb250cm9sKGlvbW11LCBJT01NVV9DT05UUk9MX0RJU0FCTEVEKTsKIAogICAgIHNl
dF9pb21tdV90cmFuc2xhdGlvbl9jb250cm9sKGlvbW11LCBJT01NVV9DT05UUk9MX0RJU0FCTEVE
KTsKQEAgLTEwMjcsNyArMTAyNyw3IEBAIHN0YXRpYyBpbnQgX19pbml0IGFtZF9pb21tdV9pbml0
X29uZShzdHIKIAogICAgIGdldF9pb21tdV9mZWF0dXJlcyhpb21tdSk7CiAKLSAgICBpZiAoIGlv
bW11LT5mZWF0dXJlcyApCisgICAgaWYgKCBpb21tdS0+ZmVhdHVyZXMucmF3ICkKICAgICAgICAg
aW9tbXV2Ml9lbmFibGVkID0gMTsKIAogICAgIGlmICggYWxsb2NhdGVfY21kX2J1ZmZlcihpb21t
dSkgPT0gTlVMTCApCkBAIC0xMDM2LDkgKzEwMzYsOCBAQCBzdGF0aWMgaW50IF9faW5pdCBhbWRf
aW9tbXVfaW5pdF9vbmUoc3RyCiAgICAgaWYgKCBhbGxvY2F0ZV9ldmVudF9sb2coaW9tbXUpID09
IE5VTEwgKQogICAgICAgICBnb3RvIGVycm9yX291dDsKIAotICAgIGlmICggYW1kX2lvbW11X2hh
c19mZWF0dXJlKGlvbW11LCBJT01NVV9FWFRfRkVBVFVSRV9QUFJTVVBfU0hJRlQpICkKLSAgICAg
ICAgaWYgKCBhbGxvY2F0ZV9wcHJfbG9nKGlvbW11KSA9PSBOVUxMICkKLSAgICAgICAgICAgIGdv
dG8gZXJyb3Jfb3V0OworICAgIGlmICggaW9tbXUtPmZlYXR1cmVzLmZsZHMucHByX3N1cCAmJiAh
YWxsb2NhdGVfcHByX2xvZyhpb21tdSkgKQorICAgICAgICBnb3RvIGVycm9yX291dDsKIAogICAg
IGlmICggIXNldF9pb21tdV9pbnRlcnJ1cHRfaGFuZGxlcihpb21tdSkgKQogICAgICAgICBnb3Rv
IGVycm9yX291dDsKQEAgLTEzODgsNyArMTM4Nyw3IEBAIHZvaWQgYW1kX2lvbW11X3Jlc3VtZSh2
b2lkKQogICAgIH0KIAogICAgIC8qIGZsdXNoIGFsbCBjYWNoZSBlbnRyaWVzIGFmdGVyIGlvbW11
IHJlLWVuYWJsZWQgKi8KLSAgICBpZiAoICFhbWRfaW9tbXVfaGFzX2ZlYXR1cmUoaW9tbXUsIElP
TU1VX0VYVF9GRUFUVVJFX0lBU1VQX1NISUZUKSApCisgICAgaWYgKCAhaW9tbXUtPmZlYXR1cmVz
LmZsZHMuaWFfc3VwICkKICAgICB7CiAgICAgICAgIGludmFsaWRhdGVfYWxsX2RldmljZXMoKTsK
ICAgICAgICAgaW52YWxpZGF0ZV9hbGxfZG9tYWluX3BhZ2VzKCk7Ci0tLSBhL3hlbi9pbmNsdWRl
L2FzbS14ODYvYW1kLWlvbW11LmgKKysrIGIveGVuL2luY2x1ZGUvYXNtLXg4Ni9hbWQtaW9tbXUu
aApAQCAtODMsNyArODMsNyBAQCBzdHJ1Y3QgYW1kX2lvbW11IHsKICAgICBpb21tdV9jYXBfdCBj
YXA7CiAKICAgICB1OCBodF9mbGFnczsKLSAgICB1NjQgZmVhdHVyZXM7CisgICAgdW5pb24gYW1k
X2lvbW11X2V4dF9mZWF0dXJlcyBmZWF0dXJlczsKIAogICAgIHZvaWQgKm1taW9fYmFzZTsKICAg
ICB1bnNpZ25lZCBsb25nIG1taW9fYmFzZV9waHlzOwpAQCAtMTc0LDcgKzE3NCw3IEBAIHN0cnVj
dCBndWVzdF9pb21tdSB7CiAgICAgLyogTU1JTyByZWdzICovCiAgICAgc3RydWN0IG1taW9fcmVn
ICAgICAgICAgcmVnX2N0cmw7ICAgICAgICAgICAgICAvKiBNTUlPIG9mZnNldCAwMDE4aCAqLwog
ICAgIHN0cnVjdCBtbWlvX3JlZyAgICAgICAgIHJlZ19zdGF0dXM7ICAgICAgICAgICAgLyogTU1J
TyBvZmZzZXQgMjAyMGggKi8KLSAgICBzdHJ1Y3QgbW1pb19yZWcgICAgICAgICByZWdfZXh0X2Zl
YXR1cmU7ICAgICAgIC8qIE1NSU8gb2Zmc2V0IDAwMzBoICovCisgICAgdW5pb24gYW1kX2lvbW11
X2V4dF9mZWF0dXJlcyByZWdfZXh0X2ZlYXR1cmU7ICAvKiBNTUlPIG9mZnNldCAwMDMwaCAqLwog
CiAgICAgLyogZ3Vlc3QgaW50ZXJydXB0IHNldHRpbmdzICovCiAgICAgc3RydWN0IGd1ZXN0X2lv
bW11X21zaSAgbXNpOwotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11
LWRlZnMuaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LWRlZnMu
aApAQCAtMzQ2LDI2ICszNDYsNTcgQEAgc3RydWN0IGFtZF9pb21tdV9kdGUgewogI2RlZmluZSBJ
T01NVV9FWENMVVNJT05fTElNSVRfSElHSF9NQVNLCQkweEZGRkZGRkZGCiAjZGVmaW5lIElPTU1V
X0VYQ0xVU0lPTl9MSU1JVF9ISUdIX1NISUZUCTAKIAotLyogRXh0ZW5kZWQgRmVhdHVyZSBSZWdp
c3RlciovCisvKiBFeHRlbmRlZCBGZWF0dXJlIFJlZ2lzdGVyICovCiAjZGVmaW5lIElPTU1VX0VY
VF9GRUFUVVJFX01NSU9fT0ZGU0VUICAgICAgICAgICAgICAgICAgIDB4MzAKLSNkZWZpbmUgSU9N
TVVfRVhUX0ZFQVRVUkVfUFJFRlNVUF9TSElGVCAgICAgICAgICAgICAgICAgMHgwCi0jZGVmaW5l
IElPTU1VX0VYVF9GRUFUVVJFX1BQUlNVUF9TSElGVCAgICAgICAgICAgICAgICAgIDB4MQotI2Rl
ZmluZSBJT01NVV9FWFRfRkVBVFVSRV9YVFNVUF9TSElGVCAgICAgICAgICAgICAgICAgICAweDIK
LSNkZWZpbmUgSU9NTVVfRVhUX0ZFQVRVUkVfTlhTVVBfU0hJRlQgICAgICAgICAgICAgICAgICAg
MHgzCi0jZGVmaW5lIElPTU1VX0VYVF9GRUFUVVJFX0dUU1VQX1NISUZUICAgICAgICAgICAgICAg
ICAgIDB4NAotI2RlZmluZSBJT01NVV9FWFRfRkVBVFVSRV9JQVNVUF9TSElGVCAgICAgICAgICAg
ICAgICAgICAweDYKLSNkZWZpbmUgSU9NTVVfRVhUX0ZFQVRVUkVfR0FTVVBfU0hJRlQgICAgICAg
ICAgICAgICAgICAgMHg3Ci0jZGVmaW5lIElPTU1VX0VYVF9GRUFUVVJFX0hFU1VQX1NISUZUICAg
ICAgICAgICAgICAgICAgIDB4OAotI2RlZmluZSBJT01NVV9FWFRfRkVBVFVSRV9QQ1NVUF9TSElG
VCAgICAgICAgICAgICAgICAgICAweDkKLSNkZWZpbmUgSU9NTVVfRVhUX0ZFQVRVUkVfSEFUU19T
SElGVCAgICAgICAgICAgICAgICAgICAgMHgxMAotI2RlZmluZSBJT01NVV9FWFRfRkVBVFVSRV9I
QVRTX01BU0sgICAgICAgICAgICAgICAgICAgICAweDAwMDAwQzAwCi0jZGVmaW5lIElPTU1VX0VY
VF9GRUFUVVJFX0dBVFNfU0hJRlQgICAgICAgICAgICAgICAgICAgIDB4MTIKLSNkZWZpbmUgSU9N
TVVfRVhUX0ZFQVRVUkVfR0FUU19NQVNLICAgICAgICAgICAgICAgICAgICAgMHgwMDAwMzAwMAot
I2RlZmluZSBJT01NVV9FWFRfRkVBVFVSRV9HTFhTVVBfU0hJRlQgICAgICAgICAgICAgICAgICAw
eDE0Ci0jZGVmaW5lIElPTU1VX0VYVF9GRUFUVVJFX0dMWFNVUF9NQVNLICAgICAgICAgICAgICAg
ICAgIDB4MDAwMEMwMDAKIAotI2RlZmluZSBJT01NVV9FWFRfRkVBVFVSRV9QQVNNQVhfU0hJRlQg
ICAgICAgICAgICAgICAgICAweDAKLSNkZWZpbmUgSU9NTVVfRVhUX0ZFQVRVUkVfUEFTTUFYX01B
U0sgICAgICAgICAgICAgICAgICAgMHgwMDAwMDAxRgordW5pb24gYW1kX2lvbW11X2V4dF9mZWF0
dXJlcyB7CisgICAgdWludDY0X3QgcmF3OworICAgIHN0cnVjdCB7CisgICAgICAgIHVuc2lnbmVk
IGludCBwcmVmX3N1cDoxOworICAgICAgICB1bnNpZ25lZCBpbnQgcHByX3N1cDoxOworICAgICAg
ICB1bnNpZ25lZCBpbnQgeHRfc3VwOjE7CisgICAgICAgIHVuc2lnbmVkIGludCBueF9zdXA6MTsK
KyAgICAgICAgdW5zaWduZWQgaW50IGd0X3N1cDoxOworICAgICAgICB1bnNpZ25lZCBpbnQgZ2Fw
cGlfc3VwOjE7CisgICAgICAgIHVuc2lnbmVkIGludCBpYV9zdXA6MTsKKyAgICAgICAgdW5zaWdu
ZWQgaW50IGdhX3N1cDoxOworICAgICAgICB1bnNpZ25lZCBpbnQgaGVfc3VwOjE7CisgICAgICAg
IHVuc2lnbmVkIGludCBwY19zdXA6MTsKKyAgICAgICAgdW5zaWduZWQgaW50IGhhdHM6MjsKKyAg
ICAgICAgdW5zaWduZWQgaW50IGdhdHM6MjsKKyAgICAgICAgdW5zaWduZWQgaW50IGdseF9zdXA6
MjsKKyAgICAgICAgdW5zaWduZWQgaW50IHNtaWZfc3VwOjI7CisgICAgICAgIHVuc2lnbmVkIGlu
dCBzbWlmX3JjOjM7CisgICAgICAgIHVuc2lnbmVkIGludCBnYW1fc3VwOjM7CisgICAgICAgIHVu
c2lnbmVkIGludCBkdWFsX3Bwcl9sb2dfc3VwOjI7CisgICAgICAgIHVuc2lnbmVkIGludCA6MjsK
KyAgICAgICAgdW5zaWduZWQgaW50IGR1YWxfZXZlbnRfbG9nX3N1cDoyOworICAgICAgICB1bnNp
Z25lZCBpbnQgOjE7CisgICAgICAgIHVuc2lnbmVkIGludCBzYXRzX3N1cDoxOworICAgICAgICB1
bnNpZ25lZCBpbnQgcGFzX21heDo1OworICAgICAgICB1bnNpZ25lZCBpbnQgdXNfc3VwOjE7Cisg
ICAgICAgIHVuc2lnbmVkIGludCBkZXZfdGJsX3NlZ19zdXA6MjsKKyAgICAgICAgdW5zaWduZWQg
aW50IHBwcl9lYXJseV9vZl9zdXA6MTsKKyAgICAgICAgdW5zaWduZWQgaW50IHBwcl9hdXRvX3Jz
cF9zdXA6MTsKKyAgICAgICAgdW5zaWduZWQgaW50IG1hcmNfc3VwOjI7CisgICAgICAgIHVuc2ln
bmVkIGludCBibGtfc3RvcF9tcmtfc3VwOjE7CisgICAgICAgIHVuc2lnbmVkIGludCBwZXJmX29w
dF9zdXA6MTsKKyAgICAgICAgdW5zaWduZWQgaW50IG1zaV9jYXBfbW1pb19zdXA6MTsKKyAgICAg
ICAgdW5zaWduZWQgaW50IDoxOworICAgICAgICB1bnNpZ25lZCBpbnQgZ2lvX3N1cDoxOworICAg
ICAgICB1bnNpZ25lZCBpbnQgaGFfc3VwOjE7CisgICAgICAgIHVuc2lnbmVkIGludCBlcGhfc3Vw
OjE7CisgICAgICAgIHVuc2lnbmVkIGludCBhdHRyX2Z3X3N1cDoxOworICAgICAgICB1bnNpZ25l
ZCBpbnQgaGRfc3VwOjE7CisgICAgICAgIHVuc2lnbmVkIGludCA6MTsKKyAgICAgICAgdW5zaWdu
ZWQgaW50IGludl9pb3RsYl90eXBlX3N1cDoxOworICAgICAgICB1bnNpZ25lZCBpbnQgdmlvbW11
X3N1cDoxOworICAgICAgICB1bnNpZ25lZCBpbnQgdm1fZ3VhcmRfaW9fc3VwOjE7CisgICAgICAg
IHVuc2lnbmVkIGludCB2bV90YWJsZV9zaXplOjQ7CisgICAgICAgIHVuc2lnbmVkIGludCBnYV91
cGRhdGVfZGlzX3N1cDoxOworICAgICAgICB1bnNpZ25lZCBpbnQgOjI7CisgICAgfSBmbGRzOwor
fTsKIAogLyogU3RhdHVzIFJlZ2lzdGVyKi8KICNkZWZpbmUgSU9NTVVfU1RBVFVTX01NSU9fT0ZG
U0VUCQkweDIwMjAKLS0tIGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9odm0vc3ZtL2FtZC1pb21tdS1w
cm90by5oCisrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtcHJvdG8u
aApAQCAtMjE5LDEzICsyMTksNiBAQCBzdGF0aWMgaW5saW5lIGludCBpb21tdV9oYXNfY2FwKHN0
cnVjdCBhCiAgICAgcmV0dXJuICEhKGlvbW11LT5jYXAuaGVhZGVyICYgKDF1IDw8IGJpdCkpOwog
fQogCi1zdGF0aWMgaW5saW5lIGludCBhbWRfaW9tbXVfaGFzX2ZlYXR1cmUoc3RydWN0IGFtZF9p
b21tdSAqaW9tbXUsIHVpbnQzMl90IGJpdCkKLXsKLSAgICBpZiAoICFpb21tdV9oYXNfY2FwKGlv
bW11LCBQQ0lfQ0FQX0VGUlNVUF9TSElGVCkgKQotICAgICAgICByZXR1cm4gMDsKLSAgICByZXR1
cm4gISEoaW9tbXUtPmZlYXR1cmVzICYgKDFVIDw8IGJpdCkpOwotfQotCiAvKiBhY2Nlc3MgdGFp
bCBvciBoZWFkIHBvaW50ZXIgb2YgcmluZyBidWZmZXIgKi8KIHN0YXRpYyBpbmxpbmUgdWludDMy
X3QgaW9tbXVfZ2V0X3JiX3BvaW50ZXIodWludDMyX3QgcmVnKQogewo=

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-bitfield-control.patch"
Content-Description: AMD-IOMMU-bitfield-control.patch
Content-Disposition: attachment;
	filename="AMD-IOMMU-bitfield-control.patch"; size=19430;
	creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <2C98F85E27A8D9488DEDAB41847C4D86@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiB1c2UgYml0IGZpZWxkIGZvciBjb250cm9sIHJlZ2lzdGVyCgpBbHNvIGludHJv
ZHVjZSBhIGZpZWxkIGluIHN0cnVjdCBhbWRfaW9tbXUgY2FjaGluZyB0aGUgbW9zdCByZWNlbnRs
eQp3cml0dGVuIGNvbnRyb2wgcmVnaXN0ZXIuIEFsbCB3cml0ZXMgc2hvdWxkIG5vdyBoYXBwZW4g
ZXhjbHVzaXZlbHkgZnJvbQp0aGF0IGNhY2hlZCB2YWx1ZSwgc3VjaCB0aGF0IGl0IGlzIGd1YXJh
bnRlZWQgdG8gYmUgdXAgdG8gZGF0ZS4KClRha2UgdGhlIG9wcG9ydHVuaXR5IGFuZCBhZGQgZnVy
dGhlciBmaWVsZHMuIEFsc28gY29udmVydCBhIGZldyBib29sZWFuCmZ1bmN0aW9uIHBhcmFtZXRl
cnMgdG8gYm9vbCwgc3VjaCB0aGF0IHVzZSBvZiAhISBjYW4gYmUgYXZvaWRlZC4KCkJlY2F1c2Ug
b2YgdGhlcmUgbm93IGJlaW5nIGRlZmluaXRpb25zIGJleW9uZCBiaXQgMzEsIHdyaXRlbCgpIGFs
c28gZ2V0cwpyZXBsYWNlZCBieSB3cml0ZXEoKSB3aGVuIHVwZGF0aW5nIGhhcmR3YXJlLgoKU2ln
bmVkLW9mZi1ieTogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgpBY2tlZC1ieTogQW5k
cmV3IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KLS0tCnYzOiBTd2l0Y2ggYm9v
bGVhbiBiaXRmaWVsZHMgdG8gYm9vbC4KdjI6IEFkZCBkb21haW5faWRfcG5lIGZpZWxkLiBNZW50
aW9uIHdyaXRlbCgpIC0+IHdyaXRlcSgpIGNoYW5nZS4KCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0
aHJvdWdoL2FtZC9pb21tdV9ndWVzdC5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2Ft
ZC9pb21tdV9ndWVzdC5jCkBAIC0zMTcsNyArMzE3LDcgQEAgc3RhdGljIGludCBkb19pbnZhbGlk
YXRlX2lvdGxiX3BhZ2VzKHN0cgogCiBzdGF0aWMgaW50IGRvX2NvbXBsZXRpb25fd2FpdChzdHJ1
Y3QgZG9tYWluICpkLCBjbWRfZW50cnlfdCAqY21kKQogewotICAgIGJvb2xfdCBjb21fd2FpdF9p
bnRfZW4sIGNvbV93YWl0X2ludCwgaSwgczsKKyAgICBib29sIGNvbV93YWl0X2ludCwgaSwgczsK
ICAgICBzdHJ1Y3QgZ3Vlc3RfaW9tbXUgKmlvbW11OwogICAgIHVuc2lnbmVkIGxvbmcgZ2ZuOwog
ICAgIHAybV90eXBlX3QgcDJtdDsKQEAgLTM1NCwxMiArMzU0LDEwIEBAIHN0YXRpYyBpbnQgZG9f
Y29tcGxldGlvbl93YWl0KHN0cnVjdCBkb20KICAgICAgICAgdW5tYXBfZG9tYWluX3BhZ2UodmFk
ZHIpOwogICAgIH0KIAotICAgIGNvbV93YWl0X2ludF9lbiA9IGlvbW11X2dldF9iaXQoaW9tbXUt
PnJlZ19jdHJsLmxvLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSU9NTVVf
Q09OVFJPTF9DT01QX1dBSVRfSU5UX1NISUZUKTsKICAgICBjb21fd2FpdF9pbnQgPSBpb21tdV9n
ZXRfYml0KGlvbW11LT5yZWdfc3RhdHVzLmxvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgSU9NTVVfU1RBVFVTX0NPTVBfV0FJVF9JTlRfU0hJRlQpOwogCi0gICAgaWYgKCBjb21f
d2FpdF9pbnRfZW4gJiYgY29tX3dhaXRfaW50ICkKKyAgICBpZiAoIGlvbW11LT5yZWdfY3RybC5j
b21fd2FpdF9pbnRfZW4gJiYgY29tX3dhaXRfaW50ICkKICAgICAgICAgZ3Vlc3RfaW9tbXVfZGVs
aXZlcl9tc2koZCk7CiAKICAgICByZXR1cm4gMDsKQEAgLTUyMSw0MCArNTE5LDE3IEBAIHN0YXRp
YyB2b2lkIGd1ZXN0X2lvbW11X3Byb2Nlc3NfY29tbWFuZCgKICAgICByZXR1cm47CiB9CiAKLXN0
YXRpYyBpbnQgZ3Vlc3RfaW9tbXVfd3JpdGVfY3RybChzdHJ1Y3QgZ3Vlc3RfaW9tbXUgKmlvbW11
LCB1aW50NjRfdCBuZXdjdHJsKQorc3RhdGljIGludCBndWVzdF9pb21tdV93cml0ZV9jdHJsKHN0
cnVjdCBndWVzdF9pb21tdSAqaW9tbXUsIHVpbnQ2NF90IHZhbCkKIHsKLSAgICBib29sX3QgY21k
X2VuLCBldmVudF9lbiwgaW9tbXVfZW4sIHBwcl9lbiwgcHByX2xvZ19lbjsKLSAgICBib29sX3Qg
Y21kX2VuX29sZCwgZXZlbnRfZW5fb2xkLCBpb21tdV9lbl9vbGQ7Ci0gICAgYm9vbF90IGNtZF9y
dW47Ci0KLSAgICBpb21tdV9lbiA9IGlvbW11X2dldF9iaXQobmV3Y3RybCwKLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgSU9NTVVfQ09OVFJPTF9UUkFOU0xBVElPTl9FTkFCTEVfU0hJRlQp
OwotICAgIGlvbW11X2VuX29sZCA9IGlvbW11X2dldF9iaXQoaW9tbXUtPnJlZ19jdHJsLmxvLAot
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSU9NTVVfQ09OVFJPTF9UUkFOU0xBVElP
Tl9FTkFCTEVfU0hJRlQpOwotCi0gICAgY21kX2VuID0gaW9tbXVfZ2V0X2JpdChuZXdjdHJsLAot
ICAgICAgICAgICAgICAgICAgICAgICAgICAgSU9NTVVfQ09OVFJPTF9DT01NQU5EX0JVRkZFUl9F
TkFCTEVfU0hJRlQpOwotICAgIGNtZF9lbl9vbGQgPSBpb21tdV9nZXRfYml0KGlvbW11LT5yZWdf
Y3RybC5sbywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJT01NVV9DT05UUk9MX0NP
TU1BTkRfQlVGRkVSX0VOQUJMRV9TSElGVCk7Ci0gICAgY21kX3J1biA9IGlvbW11X2dldF9iaXQo
aW9tbXUtPnJlZ19zdGF0dXMubG8sCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgSU9NTVVf
U1RBVFVTX0NNRF9CVUZGRVJfUlVOX1NISUZUKTsKLSAgICBldmVudF9lbiA9IGlvbW11X2dldF9i
aXQobmV3Y3RybCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSU9NTVVfQ09OVFJPTF9F
VkVOVF9MT0dfRU5BQkxFX1NISUZUKTsKLSAgICBldmVudF9lbl9vbGQgPSBpb21tdV9nZXRfYml0
KGlvbW11LT5yZWdfY3RybC5sbywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElP
TU1VX0NPTlRST0xfRVZFTlRfTE9HX0VOQUJMRV9TSElGVCk7Ci0KLSAgICBwcHJfZW4gPSBpb21t
dV9nZXRfYml0KG5ld2N0cmwsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICBJT01NVV9DT05U
Uk9MX1BQUl9FTkFCTEVfU0hJRlQpOwotICAgIHBwcl9sb2dfZW4gPSBpb21tdV9nZXRfYml0KG5l
d2N0cmwsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSU9NTVVfQ09OVFJPTF9QUFJf
TE9HX0VOQUJMRV9TSElGVCk7CisgICAgdW5pb24gYW1kX2lvbW11X2NvbnRyb2wgbmV3Y3RybCA9
IHsgLnJhdyA9IHZhbCB9OwogCi0gICAgaWYgKCBpb21tdV9lbiApCisgICAgaWYgKCBuZXdjdHJs
LmlvbW11X2VuICkKICAgICB7CiAgICAgICAgIGd1ZXN0X2lvbW11X2VuYWJsZShpb21tdSk7CiAg
ICAgICAgIGd1ZXN0X2lvbW11X2VuYWJsZV9kZXZfdGFibGUoaW9tbXUpOwogICAgIH0KIAotICAg
IGlmICggaW9tbXVfZW4gJiYgY21kX2VuICkKKyAgICBpZiAoIG5ld2N0cmwuaW9tbXVfZW4gJiYg
bmV3Y3RybC5jbWRfYnVmX2VuICkKICAgICB7CiAgICAgICAgIGd1ZXN0X2lvbW11X2VuYWJsZV9y
aW5nX2J1ZmZlcihpb21tdSwgJmlvbW11LT5jbWRfYnVmZmVyLAogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKGNtZF9lbnRyeV90KSk7CkBAIC01NjIsNyArNTM3
LDcgQEAgc3RhdGljIGludCBndWVzdF9pb21tdV93cml0ZV9jdHJsKHN0cnVjdAogICAgICAgICB0
YXNrbGV0X3NjaGVkdWxlKCZpb21tdS0+Y21kX2J1ZmZlcl90YXNrbGV0KTsKICAgICB9CiAKLSAg
ICBpZiAoIGlvbW11X2VuICYmIGV2ZW50X2VuICkKKyAgICBpZiAoIG5ld2N0cmwuaW9tbXVfZW4g
JiYgbmV3Y3RybC5ldmVudF9sb2dfZW4gKQogICAgIHsKICAgICAgICAgZ3Vlc3RfaW9tbXVfZW5h
YmxlX3JpbmdfYnVmZmVyKGlvbW11LCAmaW9tbXUtPmV2ZW50X2xvZywKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVvZihldmVudF9lbnRyeV90KSk7CkBAIC01NzAs
NyArNTQ1LDcgQEAgc3RhdGljIGludCBndWVzdF9pb21tdV93cml0ZV9jdHJsKHN0cnVjdAogICAg
ICAgICBndWVzdF9pb21tdV9jbGVhcl9zdGF0dXMoaW9tbXUsIElPTU1VX1NUQVRVU19FVkVOVF9P
VkVSRkxPV19TSElGVCk7CiAgICAgfQogCi0gICAgaWYgKCBpb21tdV9lbiAmJiBwcHJfZW4gJiYg
cHByX2xvZ19lbiApCisgICAgaWYgKCBuZXdjdHJsLmlvbW11X2VuICYmIG5ld2N0cmwucHByX2Vu
ICYmIG5ld2N0cmwucHByX2xvZ19lbiApCiAgICAgewogICAgICAgICBndWVzdF9pb21tdV9lbmFi
bGVfcmluZ19idWZmZXIoaW9tbXUsICZpb21tdS0+cHByX2xvZywKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHNpemVvZihwcHJfZW50cnlfdCkpOwpAQCAtNTc4LDE5ICs1
NTMsMjEgQEAgc3RhdGljIGludCBndWVzdF9pb21tdV93cml0ZV9jdHJsKHN0cnVjdAogICAgICAg
ICBndWVzdF9pb21tdV9jbGVhcl9zdGF0dXMoaW9tbXUsIElPTU1VX1NUQVRVU19QUFJfTE9HX09W
RVJGTE9XX1NISUZUKTsKICAgICB9CiAKLSAgICBpZiAoIGlvbW11X2VuICYmIGNtZF9lbl9vbGQg
JiYgIWNtZF9lbiApCisgICAgaWYgKCBuZXdjdHJsLmlvbW11X2VuICYmIGlvbW11LT5yZWdfY3Ry
bC5jbWRfYnVmX2VuICYmCisgICAgICAgICAhbmV3Y3RybC5jbWRfYnVmX2VuICkKICAgICB7CiAg
ICAgICAgIC8qIERpc2FibGUgaW9tbXUgY29tbWFuZCBwcm9jZXNzaW5nICovCiAgICAgICAgIHRh
c2tsZXRfa2lsbCgmaW9tbXUtPmNtZF9idWZmZXJfdGFza2xldCk7CiAgICAgfQogCi0gICAgaWYg
KCBldmVudF9lbl9vbGQgJiYgIWV2ZW50X2VuICkKKyAgICBpZiAoIGlvbW11LT5yZWdfY3RybC5l
dmVudF9sb2dfZW4gJiYgIW5ld2N0cmwuZXZlbnRfbG9nX2VuICkKICAgICAgICAgZ3Vlc3RfaW9t
bXVfY2xlYXJfc3RhdHVzKGlvbW11LCBJT01NVV9TVEFUVVNfRVZFTlRfTE9HX1JVTl9TSElGVCk7
CiAKLSAgICBpZiAoIGlvbW11X2VuX29sZCAmJiAhaW9tbXVfZW4gKQorICAgIGlmICggaW9tbXUt
PnJlZ19jdHJsLmlvbW11X2VuICYmICFuZXdjdHJsLmlvbW11X2VuICkKICAgICAgICAgZ3Vlc3Rf
aW9tbXVfZGlzYWJsZShpb21tdSk7CiAKLSAgICB1NjRfdG9fcmVnKCZpb21tdS0+cmVnX2N0cmws
IG5ld2N0cmwpOworICAgIGlvbW11LT5yZWdfY3RybCA9IG5ld2N0cmw7CisKICAgICByZXR1cm4g
MDsKIH0KIApAQCAtNjMyLDcgKzYwOSw3IEBAIHN0YXRpYyB1aW50NjRfdCBpb21tdV9tbWlvX3Jl
YWQ2NChzdHJ1Y3QKICAgICAgICAgdmFsID0gcmVnX3RvX3U2NChpb21tdS0+cHByX2xvZy5yZWdf
dGFpbCk7CiAgICAgICAgIGJyZWFrOwogICAgIGNhc2UgSU9NTVVfQ09OVFJPTF9NTUlPX09GRlNF
VDoKLSAgICAgICAgdmFsID0gcmVnX3RvX3U2NChpb21tdS0+cmVnX2N0cmwpOworICAgICAgICB2
YWwgPSBpb21tdS0+cmVnX2N0cmwucmF3OwogICAgICAgICBicmVhazsKICAgICBjYXNlIElPTU1V
X1NUQVRVU19NTUlPX09GRlNFVDoKICAgICAgICAgdmFsID0gcmVnX3RvX3U2NChpb21tdS0+cmVn
X3N0YXR1cyk7Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0LmMK
KysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2luaXQuYwpAQCAtNDEsNyAr
NDEsNyBAQCBMSVNUX0hFQURfUkVBRF9NT1NUTFkoYW1kX2lvbW11X2hlYWQpOwogc3RydWN0IHRh
YmxlX3N0cnVjdCBkZXZpY2VfdGFibGU7CiBib29sX3QgaW9tbXV2Ml9lbmFibGVkOwogCi1zdGF0
aWMgaW50IGlvbW11X2hhc19odF9mbGFnKHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11LCB1OCBtYXNr
KQorc3RhdGljIGJvb2wgaW9tbXVfaGFzX2h0X2ZsYWcoc3RydWN0IGFtZF9pb21tdSAqaW9tbXUs
IHU4IG1hc2spCiB7CiAgICAgcmV0dXJuIGlvbW11LT5odF9mbGFncyAmIG1hc2s7CiB9CkBAIC02
OSwzMSArNjksMTggQEAgc3RhdGljIHZvaWQgX19pbml0IHVubWFwX2lvbW11X21taW9fcmVnaQog
CiBzdGF0aWMgdm9pZCBzZXRfaW9tbXVfaHRfZmxhZ3Moc3RydWN0IGFtZF9pb21tdSAqaW9tbXUp
CiB7Ci0gICAgdTMyIGVudHJ5OwotICAgIGVudHJ5ID0gcmVhZGwoaW9tbXUtPm1taW9fYmFzZSAr
IElPTU1VX0NPTlRST0xfTU1JT19PRkZTRVQpOwotCiAgICAgLyogU2V0dXAgSFQgZmxhZ3MgKi8K
ICAgICBpZiAoIGlvbW11X2hhc19jYXAoaW9tbXUsIFBDSV9DQVBfSFRfVFVOTkVMX1NISUZUKSAp
Ci0gICAgICAgIGlvbW11X2hhc19odF9mbGFnKGlvbW11LCBBQ1BJX0lWSERfVFRfRU5BQkxFKSA/
Ci0gICAgICAgICAgICBpb21tdV9zZXRfYml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9IVF9UVU5O
RUxfVFJBTlNMQVRJT05fU0hJRlQpIDoKLSAgICAgICAgICAgIGlvbW11X2NsZWFyX2JpdCgmZW50
cnksIElPTU1VX0NPTlRST0xfSFRfVFVOTkVMX1RSQU5TTEFUSU9OX1NISUZUKTsKLQotICAgIGlv
bW11X2hhc19odF9mbGFnKGlvbW11LCBBQ1BJX0lWSERfUkVTX1BBU1NfUFcpID8KLSAgICAgICAg
aW9tbXVfc2V0X2JpdCgmZW50cnksIElPTU1VX0NPTlRST0xfUkVTUF9QQVNTX1BPU1RFRF9XUklU
RV9TSElGVCk6Ci0gICAgICAgIGlvbW11X2NsZWFyX2JpdCgmZW50cnksIElPTU1VX0NPTlRST0xf
UkVTUF9QQVNTX1BPU1RFRF9XUklURV9TSElGVCk7Ci0KLSAgICBpb21tdV9oYXNfaHRfZmxhZyhp
b21tdSwgQUNQSV9JVkhEX0lTT0MpID8KLSAgICAgICAgaW9tbXVfc2V0X2JpdCgmZW50cnksIElP
TU1VX0NPTlRST0xfSVNPQ0hST05PVVNfU0hJRlQpOgotICAgICAgICBpb21tdV9jbGVhcl9iaXQo
JmVudHJ5LCBJT01NVV9DT05UUk9MX0lTT0NIUk9OT1VTX1NISUZUKTsKLQotICAgIGlvbW11X2hh
c19odF9mbGFnKGlvbW11LCBBQ1BJX0lWSERfUEFTU19QVykgPwotICAgICAgICBpb21tdV9zZXRf
Yml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9QQVNTX1BPU1RFRF9XUklURV9TSElGVCk6Ci0gICAg
ICAgIGlvbW11X2NsZWFyX2JpdCgmZW50cnksIElPTU1VX0NPTlRST0xfUEFTU19QT1NURURfV1JJ
VEVfU0hJRlQpOworICAgICAgICBpb21tdS0+Y3RybC5odF90dW5fZW4gPSBpb21tdV9oYXNfaHRf
ZmxhZyhpb21tdSwgQUNQSV9JVkhEX1RUX0VOQUJMRSk7CisKKyAgICBpb21tdS0+Y3RybC5wYXNz
X3B3ICAgICA9IGlvbW11X2hhc19odF9mbGFnKGlvbW11LCBBQ1BJX0lWSERfUEFTU19QVyk7Cisg
ICAgaW9tbXUtPmN0cmwucmVzX3Bhc3NfcHcgPSBpb21tdV9oYXNfaHRfZmxhZyhpb21tdSwgQUNQ
SV9JVkhEX1JFU19QQVNTX1BXKTsKKyAgICBpb21tdS0+Y3RybC5pc29jICAgICAgICA9IGlvbW11
X2hhc19odF9mbGFnKGlvbW11LCBBQ1BJX0lWSERfSVNPQyk7CiAKICAgICAvKiBGb3JjZSBjb2hl
cmVudCAqLwotICAgIGlvbW11X3NldF9iaXQoJmVudHJ5LCBJT01NVV9DT05UUk9MX0NPSEVSRU5U
X1NISUZUKTsKKyAgICBpb21tdS0+Y3RybC5jb2hlcmVudCA9IHRydWU7CiAKLSAgICB3cml0ZWwo
ZW50cnksIGlvbW11LT5tbWlvX2Jhc2UrSU9NTVVfQ09OVFJPTF9NTUlPX09GRlNFVCk7CisgICAg
d3JpdGVxKGlvbW11LT5jdHJsLnJhdywgaW9tbXUtPm1taW9fYmFzZSArIElPTU1VX0NPTlRST0xf
TU1JT19PRkZTRVQpOwogfQogCiBzdGF0aWMgdm9pZCByZWdpc3Rlcl9pb21tdV9kZXZfdGFibGVf
aW5fbW1pb19zcGFjZShzdHJ1Y3QgYW1kX2lvbW11ICppb21tdSkKQEAgLTIwNSw1NSArMTkyLDM3
IEBAIHN0YXRpYyB2b2lkIHJlZ2lzdGVyX2lvbW11X3Bwcl9sb2dfaW5fbW0KIAogCiBzdGF0aWMg
dm9pZCBzZXRfaW9tbXVfdHJhbnNsYXRpb25fY29udHJvbChzdHJ1Y3QgYW1kX2lvbW11ICppb21t
dSwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQg
ZW5hYmxlKQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBl
bmFibGUpCiB7Ci0gICAgdTMyIGVudHJ5OworICAgIGlvbW11LT5jdHJsLmlvbW11X2VuID0gZW5h
YmxlOwogCi0gICAgZW50cnkgPSByZWFkbChpb21tdS0+bW1pb19iYXNlICsgSU9NTVVfQ09OVFJP
TF9NTUlPX09GRlNFVCk7Ci0KLSAgICBlbmFibGUgPwotICAgICAgICBpb21tdV9zZXRfYml0KCZl
bnRyeSwgSU9NTVVfQ09OVFJPTF9UUkFOU0xBVElPTl9FTkFCTEVfU0hJRlQpIDoKLSAgICAgICAg
aW9tbXVfY2xlYXJfYml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9UUkFOU0xBVElPTl9FTkFCTEVf
U0hJRlQpOwotCi0gICAgd3JpdGVsKGVudHJ5LCBpb21tdS0+bW1pb19iYXNlK0lPTU1VX0NPTlRS
T0xfTU1JT19PRkZTRVQpOworICAgIHdyaXRlcShpb21tdS0+Y3RybC5yYXcsIGlvbW11LT5tbWlv
X2Jhc2UgKyBJT01NVV9DT05UUk9MX01NSU9fT0ZGU0VUKTsKIH0KIAogc3RhdGljIHZvaWQgc2V0
X2lvbW11X2d1ZXN0X3RyYW5zbGF0aW9uX2NvbnRyb2woc3RydWN0IGFtZF9pb21tdSAqaW9tbXUs
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgZW5h
YmxlKQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9v
bCBlbmFibGUpCiB7Ci0gICAgdTMyIGVudHJ5OwotCi0gICAgZW50cnkgPSByZWFkbChpb21tdS0+
bW1pb19iYXNlICsgSU9NTVVfQ09OVFJPTF9NTUlPX09GRlNFVCk7CisgICAgaW9tbXUtPmN0cmwu
Z3RfZW4gPSBlbmFibGU7CiAKLSAgICBlbmFibGUgPwotICAgICAgICBpb21tdV9zZXRfYml0KCZl
bnRyeSwgSU9NTVVfQ09OVFJPTF9HVF9FTkFCTEVfU0hJRlQpIDoKLSAgICAgICAgaW9tbXVfY2xl
YXJfYml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9HVF9FTkFCTEVfU0hJRlQpOwotCi0gICAgd3Jp
dGVsKGVudHJ5LCBpb21tdS0+bW1pb19iYXNlK0lPTU1VX0NPTlRST0xfTU1JT19PRkZTRVQpOwor
ICAgIHdyaXRlcShpb21tdS0+Y3RybC5yYXcsIGlvbW11LT5tbWlvX2Jhc2UgKyBJT01NVV9DT05U
Uk9MX01NSU9fT0ZGU0VUKTsKIAogICAgIGlmICggZW5hYmxlICkKICAgICAgICAgQU1EX0lPTU1V
X0RFQlVHKCJHdWVzdCBUcmFuc2xhdGlvbiBFbmFibGVkLlxuIik7CiB9CiAKIHN0YXRpYyB2b2lk
IHNldF9pb21tdV9jb21tYW5kX2J1ZmZlcl9jb250cm9sKHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11
LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlu
dCBlbmFibGUpCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBi
b29sIGVuYWJsZSkKIHsKLSAgICB1MzIgZW50cnk7Ci0KLSAgICBlbnRyeSA9IHJlYWRsKGlvbW11
LT5tbWlvX2Jhc2UgKyBJT01NVV9DT05UUk9MX01NSU9fT0ZGU0VUKTsKLQotICAgIC8qcmVzZXQg
aGVhZCBhbmQgdGFpbCBwb2ludGVyIG1hbnVhbGx5IGJlZm9yZSBlbmFibGVtZW50ICovCisgICAg
LyogUmVzZXQgaGVhZCBhbmQgdGFpbCBwb2ludGVyIG1hbnVhbGx5IGJlZm9yZSBlbmFibGVtZW50
ICovCiAgICAgaWYgKCBlbmFibGUgKQogICAgIHsKICAgICAgICAgd3JpdGVxKDAsIGlvbW11LT5t
bWlvX2Jhc2UgKyBJT01NVV9DTURfQlVGRkVSX0hFQURfT0ZGU0VUKTsKICAgICAgICAgd3JpdGVx
KDAsIGlvbW11LT5tbWlvX2Jhc2UgKyBJT01NVV9DTURfQlVGRkVSX1RBSUxfT0ZGU0VUKTsKLQot
ICAgICAgICBpb21tdV9zZXRfYml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9DT01NQU5EX0JVRkZF
Ul9FTkFCTEVfU0hJRlQpOwogICAgIH0KLSAgICBlbHNlCi0gICAgICAgIGlvbW11X2NsZWFyX2Jp
dCgmZW50cnksIElPTU1VX0NPTlRST0xfQ09NTUFORF9CVUZGRVJfRU5BQkxFX1NISUZUKTsKIAot
ICAgIHdyaXRlbChlbnRyeSwgaW9tbXUtPm1taW9fYmFzZStJT01NVV9DT05UUk9MX01NSU9fT0ZG
U0VUKTsKKyAgICBpb21tdS0+Y3RybC5jbWRfYnVmX2VuID0gZW5hYmxlOworCisgICAgd3JpdGVx
KGlvbW11LT5jdHJsLnJhdywgaW9tbXUtPm1taW9fYmFzZSArIElPTU1VX0NPTlRST0xfTU1JT19P
RkZTRVQpOwogfQogCiBzdGF0aWMgdm9pZCByZWdpc3Rlcl9pb21tdV9leGNsdXNpb25fcmFuZ2Uo
c3RydWN0IGFtZF9pb21tdSAqaW9tbXUpCkBAIC0yOTUsNTcgKzI2NCwzOCBAQCBzdGF0aWMgdm9p
ZCByZWdpc3Rlcl9pb21tdV9leGNsdXNpb25fcmFuCiB9CiAKIHN0YXRpYyB2b2lkIHNldF9pb21t
dV9ldmVudF9sb2dfY29udHJvbChzdHJ1Y3QgYW1kX2lvbW11ICppb21tdSwKLSAgICAgICAgICAg
IGludCBlbmFibGUpCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9v
bCBlbmFibGUpCiB7Ci0gICAgdTMyIGVudHJ5OwotCi0gICAgZW50cnkgPSByZWFkbChpb21tdS0+
bW1pb19iYXNlICsgSU9NTVVfQ09OVFJPTF9NTUlPX09GRlNFVCk7Ci0KLSAgICAvKnJlc2V0IGhl
YWQgYW5kIHRhaWwgcG9pbnRlciBtYW51YWxseSBiZWZvcmUgZW5hYmxlbWVudCAqLworICAgIC8q
IFJlc2V0IGhlYWQgYW5kIHRhaWwgcG9pbnRlciBtYW51YWxseSBiZWZvcmUgZW5hYmxlbWVudCAq
LwogICAgIGlmICggZW5hYmxlICkKICAgICB7CiAgICAgICAgIHdyaXRlcSgwLCBpb21tdS0+bW1p
b19iYXNlICsgSU9NTVVfRVZFTlRfTE9HX0hFQURfT0ZGU0VUKTsKICAgICAgICAgd3JpdGVxKDAs
IGlvbW11LT5tbWlvX2Jhc2UgKyBJT01NVV9FVkVOVF9MT0dfVEFJTF9PRkZTRVQpOwotCi0gICAg
ICAgIGlvbW11X3NldF9iaXQoJmVudHJ5LCBJT01NVV9DT05UUk9MX0VWRU5UX0xPR19JTlRfU0hJ
RlQpOwotICAgICAgICBpb21tdV9zZXRfYml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9FVkVOVF9M
T0dfRU5BQkxFX1NISUZUKTsKLSAgICB9Ci0gICAgZWxzZQotICAgIHsKLSAgICAgICAgaW9tbXVf
Y2xlYXJfYml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9FVkVOVF9MT0dfSU5UX1NISUZUKTsKLSAg
ICAgICAgaW9tbXVfY2xlYXJfYml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9FVkVOVF9MT0dfRU5B
QkxFX1NISUZUKTsKICAgICB9CiAKLSAgICBpb21tdV9jbGVhcl9iaXQoJmVudHJ5LCBJT01NVV9D
T05UUk9MX0NPTVBfV0FJVF9JTlRfU0hJRlQpOworICAgIGlvbW11LT5jdHJsLmV2ZW50X2ludF9l
biA9IGVuYWJsZTsKKyAgICBpb21tdS0+Y3RybC5ldmVudF9sb2dfZW4gPSBlbmFibGU7CisgICAg
aW9tbXUtPmN0cmwuY29tX3dhaXRfaW50X2VuID0gZmFsc2U7CiAKLSAgICB3cml0ZWwoZW50cnks
IGlvbW11LT5tbWlvX2Jhc2UgKyBJT01NVV9DT05UUk9MX01NSU9fT0ZGU0VUKTsKKyAgICB3cml0
ZXEoaW9tbXUtPmN0cmwucmF3LCBpb21tdS0+bW1pb19iYXNlICsgSU9NTVVfQ09OVFJPTF9NTUlP
X09GRlNFVCk7CiB9CiAKIHN0YXRpYyB2b2lkIHNldF9pb21tdV9wcHJfbG9nX2NvbnRyb2woc3Ry
dWN0IGFtZF9pb21tdSAqaW9tbXUsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGludCBlbmFibGUpCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJv
b2wgZW5hYmxlKQogewotICAgIHUzMiBlbnRyeTsKLQotICAgIGVudHJ5ID0gcmVhZGwoaW9tbXUt
Pm1taW9fYmFzZSArIElPTU1VX0NPTlRST0xfTU1JT19PRkZTRVQpOwotCi0gICAgLypyZXNldCBo
ZWFkIGFuZCB0YWlsIHBvaW50ZXIgbWFudWFsbHkgYmVmb3JlIGVuYWJsZW1lbnQgKi8KKyAgICAv
KiBSZXNldCBoZWFkIGFuZCB0YWlsIHBvaW50ZXIgbWFudWFsbHkgYmVmb3JlIGVuYWJsZW1lbnQg
Ki8KICAgICBpZiAoIGVuYWJsZSApCiAgICAgewogICAgICAgICB3cml0ZXEoMCwgaW9tbXUtPm1t
aW9fYmFzZSArIElPTU1VX1BQUl9MT0dfSEVBRF9PRkZTRVQpOwogICAgICAgICB3cml0ZXEoMCwg
aW9tbXUtPm1taW9fYmFzZSArIElPTU1VX1BQUl9MT0dfVEFJTF9PRkZTRVQpOwotCi0gICAgICAg
IGlvbW11X3NldF9iaXQoJmVudHJ5LCBJT01NVV9DT05UUk9MX1BQUl9FTkFCTEVfU0hJRlQpOwot
ICAgICAgICBpb21tdV9zZXRfYml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9QUFJfTE9HX0lOVF9T
SElGVCk7Ci0gICAgICAgIGlvbW11X3NldF9iaXQoJmVudHJ5LCBJT01NVV9DT05UUk9MX1BQUl9M
T0dfRU5BQkxFX1NISUZUKTsKLSAgICB9Ci0gICAgZWxzZQotICAgIHsKLSAgICAgICAgaW9tbXVf
Y2xlYXJfYml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9QUFJfRU5BQkxFX1NISUZUKTsKLSAgICAg
ICAgaW9tbXVfY2xlYXJfYml0KCZlbnRyeSwgSU9NTVVfQ09OVFJPTF9QUFJfTE9HX0lOVF9TSElG
VCk7Ci0gICAgICAgIGlvbW11X2NsZWFyX2JpdCgmZW50cnksIElPTU1VX0NPTlRST0xfUFBSX0xP
R19FTkFCTEVfU0hJRlQpOwogICAgIH0KIAotICAgIHdyaXRlbChlbnRyeSwgaW9tbXUtPm1taW9f
YmFzZSArIElPTU1VX0NPTlRST0xfTU1JT19PRkZTRVQpOworICAgIGlvbW11LT5jdHJsLnBwcl9l
biA9IGVuYWJsZTsKKyAgICBpb21tdS0+Y3RybC5wcHJfaW50X2VuID0gZW5hYmxlOworICAgIGlv
bW11LT5jdHJsLnBwcl9sb2dfZW4gPSBlbmFibGU7CisKKyAgICB3cml0ZXEoaW9tbXUtPmN0cmwu
cmF3LCBpb21tdS0+bW1pb19iYXNlICsgSU9NTVVfQ09OVFJPTF9NTUlPX09GRlNFVCk7CisKICAg
ICBpZiAoIGVuYWJsZSApCiAgICAgICAgIEFNRF9JT01NVV9ERUJVRygiUFBSIExvZyBFbmFibGVk
LlxuIik7CiB9CkBAIC0zOTgsNyArMzQ4LDcgQEAgc3RhdGljIGludCBpb21tdV9yZWFkX2xvZyhz
dHJ1Y3QgYW1kX2lvbQogLyogcmVzZXQgZXZlbnQgbG9nIG9yIHBwciBsb2cgd2hlbiBvdmVyZmxv
dyAqLwogc3RhdGljIHZvaWQgaW9tbXVfcmVzZXRfbG9nKHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11
LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCByaW5nX2J1ZmZlciAqbG9nLAot
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKCpjdHJsX2Z1bmMpKHN0cnVjdCBhbWRf
aW9tbXUgKmlvbW11LCBpbnQpKQorICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKCpj
dHJsX2Z1bmMpKHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11LCBib29sKSkKIHsKICAgICB1MzIgZW50
cnk7CiAgICAgaW50IGxvZ19ydW4sIHJ1bl9iaXQ7CkBAIC02MTUsMTEgKzU2NSwxMSBAQCBzdGF0
aWMgdm9pZCBpb21tdV9jaGVja19ldmVudF9sb2coc3RydWN0CiAgICAgICAgIGlvbW11X3Jlc2V0
X2xvZyhpb21tdSwgJmlvbW11LT5ldmVudF9sb2csIHNldF9pb21tdV9ldmVudF9sb2dfY29udHJv
bCk7CiAgICAgZWxzZQogICAgIHsKLSAgICAgICAgZW50cnkgPSByZWFkbChpb21tdS0+bW1pb19i
YXNlICsgSU9NTVVfQ09OVFJPTF9NTUlPX09GRlNFVCk7Ci0gICAgICAgIGlmICggIShlbnRyeSAm
IElPTU1VX0NPTlRST0xfRVZFTlRfTE9HX0lOVF9NQVNLKSApCisgICAgICAgIGlmICggIWlvbW11
LT5jdHJsLmV2ZW50X2ludF9lbiApCiAgICAgICAgIHsKLSAgICAgICAgICAgIGVudHJ5IHw9IElP
TU1VX0NPTlRST0xfRVZFTlRfTE9HX0lOVF9NQVNLOwotICAgICAgICAgICAgd3JpdGVsKGVudHJ5
LCBpb21tdS0+bW1pb19iYXNlICsgSU9NTVVfQ09OVFJPTF9NTUlPX09GRlNFVCk7CisgICAgICAg
ICAgICBpb21tdS0+Y3RybC5ldmVudF9pbnRfZW4gPSB0cnVlOworICAgICAgICAgICAgd3JpdGVx
KGlvbW11LT5jdHJsLnJhdywKKyAgICAgICAgICAgICAgICAgICBpb21tdS0+bW1pb19iYXNlICsg
SU9NTVVfQ09OVFJPTF9NTUlPX09GRlNFVCk7CiAgICAgICAgICAgICAvKgogICAgICAgICAgICAg
ICogUmUtc2NoZWR1bGUgdGhlIHRhc2tsZXQgdG8gaGFuZGxlIGV2ZW50dWFsIGxvZyBlbnRyaWVz
IGFkZGVkCiAgICAgICAgICAgICAgKiBiZXR3ZWVuIHJlYWRpbmcgdGhlIGxvZyBhYm92ZSBhbmQg
cmUtZW5hYmxpbmcgdGhlIGludGVycnVwdC4KQEAgLTcwNCwxMSArNjU0LDExIEBAIHN0YXRpYyB2
b2lkIGlvbW11X2NoZWNrX3Bwcl9sb2coc3RydWN0IGEKICAgICAgICAgaW9tbXVfcmVzZXRfbG9n
KGlvbW11LCAmaW9tbXUtPnBwcl9sb2csIHNldF9pb21tdV9wcHJfbG9nX2NvbnRyb2wpOwogICAg
IGVsc2UKICAgICB7Ci0gICAgICAgIGVudHJ5ID0gcmVhZGwoaW9tbXUtPm1taW9fYmFzZSArIElP
TU1VX0NPTlRST0xfTU1JT19PRkZTRVQpOwotICAgICAgICBpZiAoICEoZW50cnkgJiBJT01NVV9D
T05UUk9MX1BQUl9MT0dfSU5UX01BU0spICkKKyAgICAgICAgaWYgKCAhaW9tbXUtPmN0cmwucHBy
X2ludF9lbiApCiAgICAgICAgIHsKLSAgICAgICAgICAgIGVudHJ5IHw9IElPTU1VX0NPTlRST0xf
UFBSX0xPR19JTlRfTUFTSzsKLSAgICAgICAgICAgIHdyaXRlbChlbnRyeSwgaW9tbXUtPm1taW9f
YmFzZSArIElPTU1VX0NPTlRST0xfTU1JT19PRkZTRVQpOworICAgICAgICAgICAgaW9tbXUtPmN0
cmwucHByX2ludF9lbiA9IHRydWU7CisgICAgICAgICAgICB3cml0ZXEoaW9tbXUtPmN0cmwucmF3
LAorICAgICAgICAgICAgICAgICAgIGlvbW11LT5tbWlvX2Jhc2UgKyBJT01NVV9DT05UUk9MX01N
SU9fT0ZGU0VUKTsKICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgKiBSZS1zY2hlZHVsZSB0
aGUgdGFza2xldCB0byBoYW5kbGUgZXZlbnR1YWwgbG9nIGVudHJpZXMgYWRkZWQKICAgICAgICAg
ICAgICAqIGJldHdlZW4gcmVhZGluZyB0aGUgbG9nIGFib3ZlIGFuZCByZS1lbmFibGluZyB0aGUg
aW50ZXJydXB0LgpAQCAtNzU0LDcgKzcwNCw2IEBAIHN0YXRpYyB2b2lkIGRvX2FtZF9pb21tdV9p
cnEodW5zaWduZWQgbG8KIHN0YXRpYyB2b2lkIGlvbW11X2ludGVycnVwdF9oYW5kbGVyKGludCBp
cnEsIHZvaWQgKmRldl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0
cnVjdCBjcHVfdXNlcl9yZWdzICpyZWdzKQogewotICAgIHUzMiBlbnRyeTsKICAgICB1bnNpZ25l
ZCBsb25nIGZsYWdzOwogICAgIHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11ID0gZGV2X2lkOwogCkBA
IC03NjQsMTAgKzcxMyw5IEBAIHN0YXRpYyB2b2lkIGlvbW11X2ludGVycnVwdF9oYW5kbGVyKGlu
dAogICAgICAqIFNpbGVuY2UgaW50ZXJydXB0cyBmcm9tIGJvdGggZXZlbnQgYW5kIFBQUiBieSBj
bGVhcmluZyB0aGUKICAgICAgKiBlbmFibGUgbG9nZ2luZyBiaXRzIGluIHRoZSBjb250cm9sIHJl
Z2lzdGVyCiAgICAgICovCi0gICAgZW50cnkgPSByZWFkbChpb21tdS0+bW1pb19iYXNlICsgSU9N
TVVfQ09OVFJPTF9NTUlPX09GRlNFVCk7Ci0gICAgaW9tbXVfY2xlYXJfYml0KCZlbnRyeSwgSU9N
TVVfQ09OVFJPTF9FVkVOVF9MT0dfSU5UX1NISUZUKTsKLSAgICBpb21tdV9jbGVhcl9iaXQoJmVu
dHJ5LCBJT01NVV9DT05UUk9MX1BQUl9MT0dfSU5UX1NISUZUKTsKLSAgICB3cml0ZWwoZW50cnks
IGlvbW11LT5tbWlvX2Jhc2UgKyBJT01NVV9DT05UUk9MX01NSU9fT0ZGU0VUKTsKKyAgICBpb21t
dS0+Y3RybC5ldmVudF9pbnRfZW4gPSBmYWxzZTsKKyAgICBpb21tdS0+Y3RybC5wcHJfaW50X2Vu
ID0gZmFsc2U7CisgICAgd3JpdGVxKGlvbW11LT5jdHJsLnJhdywgaW9tbXUtPm1taW9fYmFzZSAr
IElPTU1VX0NPTlRST0xfTU1JT19PRkZTRVQpOwogCiAgICAgc3Bpbl91bmxvY2tfaXJxcmVzdG9y
ZSgmaW9tbXUtPmxvY2ssIGZsYWdzKTsKIAotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2L2FtZC1p
b21tdS5oCisrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvYW1kLWlvbW11LmgKQEAgLTg4LDYgKzg4
LDggQEAgc3RydWN0IGFtZF9pb21tdSB7CiAgICAgdm9pZCAqbW1pb19iYXNlOwogICAgIHVuc2ln
bmVkIGxvbmcgbW1pb19iYXNlX3BoeXM7CiAKKyAgICB1bmlvbiBhbWRfaW9tbXVfY29udHJvbCBj
dHJsOworCiAgICAgc3RydWN0IHRhYmxlX3N0cnVjdCBkZXZfdGFibGU7CiAgICAgc3RydWN0IHJp
bmdfYnVmZmVyIGNtZF9idWZmZXI7CiAgICAgc3RydWN0IHJpbmdfYnVmZmVyIGV2ZW50X2xvZzsK
QEAgLTE3Miw3ICsxNzQsNyBAQCBzdHJ1Y3QgZ3Vlc3RfaW9tbXUgewogICAgIHVpbnQ2NF90ICAg
ICAgICAgICAgICAgIG1taW9fYmFzZTsgICAgICAgICAgICAgLyogTU1JTyBiYXNlIGFkZHJlc3Mg
Ki8KIAogICAgIC8qIE1NSU8gcmVncyAqLwotICAgIHN0cnVjdCBtbWlvX3JlZyAgICAgICAgIHJl
Z19jdHJsOyAgICAgICAgICAgICAgLyogTU1JTyBvZmZzZXQgMDAxOGggKi8KKyAgICB1bmlvbiBh
bWRfaW9tbXVfY29udHJvbCByZWdfY3RybDsgICAgICAgICAgICAgIC8qIE1NSU8gb2Zmc2V0IDAw
MThoICovCiAgICAgc3RydWN0IG1taW9fcmVnICAgICAgICAgcmVnX3N0YXR1czsgICAgICAgICAg
ICAvKiBNTUlPIG9mZnNldCAyMDIwaCAqLwogICAgIHVuaW9uIGFtZF9pb21tdV9leHRfZmVhdHVy
ZXMgcmVnX2V4dF9mZWF0dXJlOyAgLyogTU1JTyBvZmZzZXQgMDAzMGggKi8KIAotLS0gYS94ZW4v
aW5jbHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LWRlZnMuaAorKysgYi94ZW4vaW5jbHVk
ZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LWRlZnMuaApAQCAtMjk1LDM4ICsyOTUsNTYgQEAg
c3RydWN0IGFtZF9pb21tdV9kdGUgewogCiAvKiBDb250cm9sIFJlZ2lzdGVyICovCiAjZGVmaW5l
IElPTU1VX0NPTlRST0xfTU1JT19PRkZTRVQJCQkweDE4Ci0jZGVmaW5lIElPTU1VX0NPTlRST0xf
VFJBTlNMQVRJT05fRU5BQkxFX01BU0sJCTB4MDAwMDAwMDEKLSNkZWZpbmUgSU9NTVVfQ09OVFJP
TF9UUkFOU0xBVElPTl9FTkFCTEVfU0hJRlQJCTAKLSNkZWZpbmUgSU9NTVVfQ09OVFJPTF9IVF9U
VU5ORUxfVFJBTlNMQVRJT05fTUFTSwkweDAwMDAwMDAyCi0jZGVmaW5lIElPTU1VX0NPTlRST0xf
SFRfVFVOTkVMX1RSQU5TTEFUSU9OX1NISUZUCTEKLSNkZWZpbmUgSU9NTVVfQ09OVFJPTF9FVkVO
VF9MT0dfRU5BQkxFX01BU0sJCTB4MDAwMDAwMDQKLSNkZWZpbmUgSU9NTVVfQ09OVFJPTF9FVkVO
VF9MT0dfRU5BQkxFX1NISUZUCQkyCi0jZGVmaW5lIElPTU1VX0NPTlRST0xfRVZFTlRfTE9HX0lO
VF9NQVNLCQkweDAwMDAwMDA4Ci0jZGVmaW5lIElPTU1VX0NPTlRST0xfRVZFTlRfTE9HX0lOVF9T
SElGVAkJMwotI2RlZmluZSBJT01NVV9DT05UUk9MX0NPTVBfV0FJVF9JTlRfTUFTSwkJMHgwMDAw
MDAxMAotI2RlZmluZSBJT01NVV9DT05UUk9MX0NPTVBfV0FJVF9JTlRfU0hJRlQJCTQKLSNkZWZp
bmUgSU9NTVVfQ09OVFJPTF9JTlZBTElEQVRJT05fVElNRU9VVF9NQVNLCQkweDAwMDAwMEUwCi0j
ZGVmaW5lIElPTU1VX0NPTlRST0xfSU5WQUxJREFUSU9OX1RJTUVPVVRfU0hJRlQJNQotI2RlZmlu
ZSBJT01NVV9DT05UUk9MX1BBU1NfUE9TVEVEX1dSSVRFX01BU0sJCTB4MDAwMDAxMDAKLSNkZWZp
bmUgSU9NTVVfQ09OVFJPTF9QQVNTX1BPU1RFRF9XUklURV9TSElGVAkJOAotI2RlZmluZSBJT01N
VV9DT05UUk9MX1JFU1BfUEFTU19QT1NURURfV1JJVEVfTUFTSwkweDAwMDAwMjAwCi0jZGVmaW5l
IElPTU1VX0NPTlRST0xfUkVTUF9QQVNTX1BPU1RFRF9XUklURV9TSElGVAk5Ci0jZGVmaW5lIElP
TU1VX0NPTlRST0xfQ09IRVJFTlRfTUFTSwkJCTB4MDAwMDA0MDAKLSNkZWZpbmUgSU9NTVVfQ09O
VFJPTF9DT0hFUkVOVF9TSElGVAkJCTEwCi0jZGVmaW5lIElPTU1VX0NPTlRST0xfSVNPQ0hST05P
VVNfTUFTSwkJCTB4MDAwMDA4MDAKLSNkZWZpbmUgSU9NTVVfQ09OVFJPTF9JU09DSFJPTk9VU19T
SElGVAkJCTExCi0jZGVmaW5lIElPTU1VX0NPTlRST0xfQ09NTUFORF9CVUZGRVJfRU5BQkxFX01B
U0sJMHgwMDAwMTAwMAotI2RlZmluZSBJT01NVV9DT05UUk9MX0NPTU1BTkRfQlVGRkVSX0VOQUJM
RV9TSElGVAkxMgotI2RlZmluZSBJT01NVV9DT05UUk9MX1BQUl9MT0dfRU5BQkxFX01BU0sJCTB4
MDAwMDIwMDAKLSNkZWZpbmUgSU9NTVVfQ09OVFJPTF9QUFJfTE9HX0VOQUJMRV9TSElGVAkJMTMK
LSNkZWZpbmUgSU9NTVVfQ09OVFJPTF9QUFJfTE9HX0lOVF9NQVNLCQkJMHgwMDAwNDAwMAotI2Rl
ZmluZSBJT01NVV9DT05UUk9MX1BQUl9MT0dfSU5UX1NISUZUCQkJMTQKLSNkZWZpbmUgSU9NTVVf
Q09OVFJPTF9QUFJfRU5BQkxFX01BU0sJCQkweDAwMDA4MDAwCi0jZGVmaW5lIElPTU1VX0NPTlRS
T0xfUFBSX0VOQUJMRV9TSElGVAkJCTE1Ci0jZGVmaW5lIElPTU1VX0NPTlRST0xfR1RfRU5BQkxF
X01BU0sJCQkweDAwMDEwMDAwCi0jZGVmaW5lIElPTU1VX0NPTlRST0xfR1RfRU5BQkxFX1NISUZU
CQkJMTYKLSNkZWZpbmUgSU9NTVVfQ09OVFJPTF9SRVNUQVJUX01BU0sJCQkweDgwMDAwMDAwCi0j
ZGVmaW5lIElPTU1VX0NPTlRST0xfUkVTVEFSVF9TSElGVAkJCTMxCisKK3VuaW9uIGFtZF9pb21t
dV9jb250cm9sIHsKKyAgICB1aW50NjRfdCByYXc7CisgICAgc3RydWN0IHsKKyAgICAgICAgYm9v
bCBpb21tdV9lbjoxOworICAgICAgICBib29sIGh0X3R1bl9lbjoxOworICAgICAgICBib29sIGV2
ZW50X2xvZ19lbjoxOworICAgICAgICBib29sIGV2ZW50X2ludF9lbjoxOworICAgICAgICBib29s
IGNvbV93YWl0X2ludF9lbjoxOworICAgICAgICB1bnNpZ25lZCBpbnQgaW52X3RpbWVvdXQ6MzsK
KyAgICAgICAgYm9vbCBwYXNzX3B3OjE7CisgICAgICAgIGJvb2wgcmVzX3Bhc3NfcHc6MTsKKyAg
ICAgICAgYm9vbCBjb2hlcmVudDoxOworICAgICAgICBib29sIGlzb2M6MTsKKyAgICAgICAgYm9v
bCBjbWRfYnVmX2VuOjE7CisgICAgICAgIGJvb2wgcHByX2xvZ19lbjoxOworICAgICAgICBib29s
IHBwcl9pbnRfZW46MTsKKyAgICAgICAgYm9vbCBwcHJfZW46MTsKKyAgICAgICAgYm9vbCBndF9l
bjoxOworICAgICAgICBib29sIGdhX2VuOjE7CisgICAgICAgIHVuc2lnbmVkIGludCBjcnc6NDsK
KyAgICAgICAgYm9vbCBzbWlmX2VuOjE7CisgICAgICAgIGJvb2wgc2xmX3diX2RpczoxOworICAg
ICAgICBib29sIHNtaWZfbG9nX2VuOjE7CisgICAgICAgIHVuc2lnbmVkIGludCBnYW1fZW46MzsK
KyAgICAgICAgYm9vbCBnYV9sb2dfZW46MTsKKyAgICAgICAgYm9vbCBnYV9pbnRfZW46MTsKKyAg
ICAgICAgdW5zaWduZWQgaW50IGR1YWxfcHByX2xvZ19lbjoyOworICAgICAgICB1bnNpZ25lZCBp
bnQgZHVhbF9ldmVudF9sb2dfZW46MjsKKyAgICAgICAgdW5zaWduZWQgaW50IGRldl90Ymxfc2Vn
X2VuOjM7CisgICAgICAgIHVuc2lnbmVkIGludCBwcml2X2FicnRfZW46MjsKKyAgICAgICAgYm9v
bCBwcHJfYXV0b19yc3BfZW46MTsKKyAgICAgICAgYm9vbCBtYXJjX2VuOjE7CisgICAgICAgIGJv
b2wgYmxrX3N0b3BfbXJrX2VuOjE7CisgICAgICAgIGJvb2wgcHByX2F1dG9fcnNwX2FvbjoxOwor
ICAgICAgICBib29sIGRvbWFpbl9pZF9wbmU6MTsKKyAgICAgICAgdW5zaWduZWQgaW50IDoxOwor
ICAgICAgICBib29sIGVwaF9lbjoxOworICAgICAgICB1bnNpZ25lZCBpbnQgaGFkX3VwZGF0ZToy
OworICAgICAgICBib29sIGdkX3VwZGF0ZV9kaXM6MTsKKyAgICAgICAgdW5zaWduZWQgaW50IDox
OworICAgICAgICBib29sIHh0X2VuOjE7CisgICAgICAgIGJvb2wgaW50X2NhcF94dF9lbjoxOwor
ICAgICAgICBib29sIHZjbWRfZW46MTsKKyAgICAgICAgYm9vbCB2aW9tbXVfZW46MTsKKyAgICAg
ICAgYm9vbCBnYV91cGRhdGVfZGlzOjE7CisgICAgICAgIGJvb2wgZ2FwcGlfZW46MTsKKyAgICAg
ICAgdW5zaWduZWQgaW50IDo4OworICAgIH07Cit9OwogCiAvKiBFeGNsdXNpb24gUmVnaXN0ZXIg
Ki8KICNkZWZpbmUgSU9NTVVfRVhDTFVTSU9OX0JBU0VfTE9XX09GRlNFVAkJMHgyMAo=

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-bitfield-IRTE.patch"
Content-Description: AMD-IOMMU-bitfield-IRTE.patch
Content-Disposition: attachment; filename="AMD-IOMMU-bitfield-IRTE.patch";
	size=9235; creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <9D68B5548E18C84593DE0DAB73A715F0@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiB1c2UgYml0IGZpZWxkIGZvciBJUlRFCgpBdCB0aGUgc2FtZSB0aW1lIHJlc3Ry
aWN0IGl0cyBzY29wZSB0byBqdXN0IHRoZSBzaW5nbGUgc291cmNlIGZpbGUKYWN0dWFsbHkgdXNp
bmcgaXQsIGFuZCBhYnN0cmFjdCBhY2Nlc3NlcyBieSBpbnRyb2R1Y2luZyBhIHVuaW9uIG9mCnBv
aW50ZXJzLiAoQSB1bmlvbiBvZiB0aGUgYWN0dWFsIHRhYmxlIGVudHJpZXMgaXMgbm90IHVzZWQg
dG8gbWFrZSBpdAppbXBvc3NpYmxlIHRvIFt3cm9uZ2x5LCBvbmNlIHRoZSAxMjgtYml0IGZvcm0g
Z2V0cyBhZGRlZF0gcGVyZm9ybQpwb2ludGVyIGFyaXRobWV0aWMgLyBhcnJheSBhY2Nlc3NlcyBv
biBkZXJpdmVkIHR5cGVzLikKCkFsc28gbW92ZSBhd2F5IGZyb20gdXBkYXRpbmcgdGhlIGVudHJp
ZXMgcGllY2VtZWFsOiBDb25zdHJ1Y3QgYSBmdWxsIG5ldwplbnRyeSwgYW5kIHdyaXRlIGl0IG91
dC4KClNpZ25lZC1vZmYtYnk6IEphbiBCZXVsaWNoIDxqYmV1bGljaEBzdXNlLmNvbT4KLS0tCnYz
OiBTd2l0Y2ggYm9vbGVhbiBiaXRmaWVsZHMgdG8gYm9vbC4KdjI6IG5hbWUge2dldCxmcmVlfV9p
bnRyZW1hcF9lbnRyeSgpJ3MgbGFzdCBwYXJhbWV0ZXIgImluZGV4IiBpbnN0ZWFkIG9mCiAgICAi
b2Zmc2V0Ii4gSW50cm9kdWNlIHVuaW9uIGlydGUzMi4KCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0
aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1k
L2lvbW11X2ludHIuYwpAQCAtMjMsNiArMjMsMjggQEAKICNpbmNsdWRlIDxhc20vaW9fYXBpYy5o
PgogI2luY2x1ZGUgPHhlbi9rZXloYW5kbGVyLmg+CiAKK3N0cnVjdCBpcnRlX2Jhc2ljIHsKKyAg
ICBib29sIHJlbWFwX2VuOjE7CisgICAgYm9vbCBzdXBfaW9fcGY6MTsKKyAgICB1bnNpZ25lZCBp
bnQgaW50X3R5cGU6MzsKKyAgICBib29sIHJxX2VvaToxOworICAgIGJvb2wgZG06MTsKKyAgICBi
b29sIGd1ZXN0X21vZGU6MTsgLyogTUJaICovCisgICAgdW5zaWduZWQgaW50IGRlc3Q6ODsKKyAg
ICB1bnNpZ25lZCBpbnQgdmVjdG9yOjg7CisgICAgdW5zaWduZWQgaW50IDo4OworfTsKKwordW5p
b24gaXJ0ZTMyIHsKKyAgICB1aW50MzJfdCByYXdbMV07CisgICAgc3RydWN0IGlydGVfYmFzaWMg
YmFzaWM7Cit9OworCit1bmlvbiBpcnRlX3B0ciB7CisgICAgdm9pZCAqcHRyOworICAgIHVuaW9u
IGlydGUzMiAqcHRyMzI7Cit9OworCiAjZGVmaW5lIElOVFJFTUFQX1RBQkxFX09SREVSICAgIDEK
ICNkZWZpbmUgSU5UUkVNQVBfTEVOR1RIIDB4QgogI2RlZmluZSBJTlRSRU1BUF9FTlRSSUVTICgx
IDw8IElOVFJFTUFQX0xFTkdUSCkKQEAgLTEwMSw0NyArMTIzLDQ0IEBAIHN0YXRpYyB1bnNpZ25l
ZCBpbnQgYWxsb2NfaW50cmVtYXBfZW50cnkKICAgICByZXR1cm4gc2xvdDsKIH0KIAotc3RhdGlj
IHUzMiAqZ2V0X2ludHJlbWFwX2VudHJ5KGludCBzZWcsIGludCBiZGYsIGludCBvZmZzZXQpCitz
dGF0aWMgdW5pb24gaXJ0ZV9wdHIgZ2V0X2ludHJlbWFwX2VudHJ5KHVuc2lnbmVkIGludCBzZWcs
IHVuc2lnbmVkIGludCBiZGYsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHVuc2lnbmVkIGludCBpbmRleCkKIHsKLSAgICB1MzIgKnRhYmxlID0gZ2V0X2l2cnNfbWFw
cGluZ3Moc2VnKVtiZGZdLmludHJlbWFwX3RhYmxlOworICAgIHVuaW9uIGlydGVfcHRyIHRhYmxl
ID0geworICAgICAgICAucHRyID0gZ2V0X2l2cnNfbWFwcGluZ3Moc2VnKVtiZGZdLmludHJlbWFw
X3RhYmxlCisgICAgfTsKKworICAgIEFTU0VSVCh0YWJsZS5wdHIgJiYgKGluZGV4IDwgSU5UUkVN
QVBfRU5UUklFUykpOwogCi0gICAgQVNTRVJUKCAodGFibGUgIT0gTlVMTCkgJiYgKG9mZnNldCA8
IElOVFJFTUFQX0VOVFJJRVMpICk7CisgICAgdGFibGUucHRyMzIgKz0gaW5kZXg7CiAKLSAgICBy
ZXR1cm4gdGFibGUgKyBvZmZzZXQ7CisgICAgcmV0dXJuIHRhYmxlOwogfQogCi1zdGF0aWMgdm9p
ZCBmcmVlX2ludHJlbWFwX2VudHJ5KGludCBzZWcsIGludCBiZGYsIGludCBvZmZzZXQpCi17Ci0g
ICAgdTMyICplbnRyeSA9IGdldF9pbnRyZW1hcF9lbnRyeShzZWcsIGJkZiwgb2Zmc2V0KTsKLQot
ICAgIG1lbXNldChlbnRyeSwgMCwgc2l6ZW9mKHUzMikpOwotICAgIF9fY2xlYXJfYml0KG9mZnNl
dCwgZ2V0X2l2cnNfbWFwcGluZ3Moc2VnKVtiZGZdLmludHJlbWFwX2ludXNlKTsKLX0KLQotc3Rh
dGljIHZvaWQgdXBkYXRlX2ludHJlbWFwX2VudHJ5KHUzMiogZW50cnksIHU4IHZlY3RvciwgdTgg
aW50X3R5cGUsCi0gICAgdTggZGVzdF9tb2RlLCB1OCBkZXN0KQotewotICAgIHNldF9maWVsZF9p
bl9yZWdfdTMyKElPTU1VX0NPTlRST0xfRU5BQkxFRCwgMCwKLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBJTlRfUkVNQVBfRU5UUllfUkVNQVBFTl9NQVNLLAotICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9SRU1BUEVOX1NISUZULCBlbnRyeSk7Ci0gICAgc2V0
X2ZpZWxkX2luX3JlZ191MzIoSU9NTVVfQ09OVFJPTF9ESVNBQkxFRCwgKmVudHJ5LAotICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9TVVBJT1BGX01BU0ssCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgSU5UX1JFTUFQX0VOVFJZX1NVUElPUEZfU0hJRlQsIGVu
dHJ5KTsKLSAgICBzZXRfZmllbGRfaW5fcmVnX3UzMihpbnRfdHlwZSwgKmVudHJ5LAotICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9JTlRUWVBFX01BU0ssCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgSU5UX1JFTUFQX0VOVFJZX0lOVFRZUEVfU0hJRlQsIGVu
dHJ5KTsKLSAgICBzZXRfZmllbGRfaW5fcmVnX3UzMihJT01NVV9DT05UUk9MX0RJU0FCTEVELCAq
ZW50cnksCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgSU5UX1JFTUFQX0VOVFJZX1JFUUVP
SV9NQVNLLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9SRVFF
T0lfU0hJRlQsIGVudHJ5KTsKLSAgICBzZXRfZmllbGRfaW5fcmVnX3UzMigodTMyKWRlc3RfbW9k
ZSwgKmVudHJ5LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9E
TV9NQVNLLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9ETV9T
SElGVCwgZW50cnkpOwotICAgIHNldF9maWVsZF9pbl9yZWdfdTMyKCh1MzIpZGVzdCwgKmVudHJ5
LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9ERVNUX01BU1Qs
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgSU5UX1JFTUFQX0VOVFJZX0RFU1RfU0hJRlQs
IGVudHJ5KTsKLSAgICBzZXRfZmllbGRfaW5fcmVnX3UzMigodTMyKXZlY3RvciwgKmVudHJ5LAot
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9WRUNUT1JfTUFTSywK
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfUkVNQVBfRU5UUllfVkVDVE9SX1NISUZU
LCBlbnRyeSk7CitzdGF0aWMgdm9pZCBmcmVlX2ludHJlbWFwX2VudHJ5KHVuc2lnbmVkIGludCBz
ZWcsIHVuc2lnbmVkIGludCBiZGYsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVu
c2lnbmVkIGludCBpbmRleCkKK3sKKyAgICB1bmlvbiBpcnRlX3B0ciBlbnRyeSA9IGdldF9pbnRy
ZW1hcF9lbnRyeShzZWcsIGJkZiwgaW5kZXgpOworCisgICAgQUNDRVNTX09OQ0UoZW50cnkucHRy
MzItPnJhd1swXSkgPSAwOworCisgICAgX19jbGVhcl9iaXQoaW5kZXgsIGdldF9pdnJzX21hcHBp
bmdzKHNlZylbYmRmXS5pbnRyZW1hcF9pbnVzZSk7Cit9CisKK3N0YXRpYyB2b2lkIHVwZGF0ZV9p
bnRyZW1hcF9lbnRyeSh1bmlvbiBpcnRlX3B0ciBlbnRyeSwgdW5zaWduZWQgaW50IHZlY3RvciwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgaW50X3R5cGUs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGRlc3RfbW9k
ZSwgdW5zaWduZWQgaW50IGRlc3QpCit7CisgICAgc3RydWN0IGlydGVfYmFzaWMgYmFzaWMgPSB7
CisgICAgICAgIC5yZW1hcF9lbiA9IHRydWUsCisgICAgICAgIC5pbnRfdHlwZSA9IGludF90eXBl
LAorICAgICAgICAuZG0gPSBkZXN0X21vZGUsCisgICAgICAgIC5kZXN0ID0gZGVzdCwKKyAgICAg
ICAgLnZlY3RvciA9IHZlY3RvciwKKyAgICB9OworCisgICAgQUNDRVNTX09OQ0UoZW50cnkucHRy
MzItPnJhd1swXSkgPQorICAgICAgICBjb250YWluZXJfb2YoJmJhc2ljLCB1bmlvbiBpcnRlMzIs
IGJhc2ljKS0+cmF3WzBdOwogfQogCiBzdGF0aWMgaW5saW5lIGludCBnZXRfcnRlX2luZGV4KGNv
bnN0IHN0cnVjdCBJT19BUElDX3JvdXRlX2VudHJ5ICpydGUpCkBAIC0xNjMsNyArMTgyLDcgQEAg
c3RhdGljIGludCB1cGRhdGVfaW50cmVtYXBfZW50cnlfZnJvbV9pbwogICAgIHUxNiAqaW5kZXgp
CiB7CiAgICAgdW5zaWduZWQgbG9uZyBmbGFnczsKLSAgICB1MzIqIGVudHJ5OworICAgIHVuaW9u
IGlydGVfcHRyIGVudHJ5OwogICAgIHU4IGRlbGl2ZXJ5X21vZGUsIGRlc3QsIHZlY3RvciwgZGVz
dF9tb2RlOwogICAgIGludCByZXFfaWQ7CiAgICAgc3BpbmxvY2tfdCAqbG9jazsKQEAgLTIwMSwx
MiArMjIwLDggQEAgc3RhdGljIGludCB1cGRhdGVfaW50cmVtYXBfZW50cnlfZnJvbV9pbwogICAg
ICAgICAgKiBzbyBuZWVkIHRvIHJlY292ZXIgdmVjdG9yIGFuZCBkZWxpdmVyeSBtb2RlIGZyb20g
SVJURS4KICAgICAgICAgICovCiAgICAgICAgIEFTU0VSVChnZXRfcnRlX2luZGV4KHJ0ZSkgPT0g
b2Zmc2V0KTsKLSAgICAgICAgdmVjdG9yID0gZ2V0X2ZpZWxkX2Zyb21fcmVnX3UzMigqZW50cnks
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSU5UX1JFTUFQX0VOVFJZ
X1ZFQ1RPUl9NQVNLLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElO
VF9SRU1BUF9FTlRSWV9WRUNUT1JfU0hJRlQpOwotICAgICAgICBkZWxpdmVyeV9tb2RlID0gZ2V0
X2ZpZWxkX2Zyb21fcmVnX3UzMigqZW50cnksCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9JTlRUWVBFX01BU0ssCi0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9J
TlRUWVBFX1NISUZUKTsKKyAgICAgICAgdmVjdG9yID0gZW50cnkucHRyMzItPmJhc2ljLnZlY3Rv
cjsKKyAgICAgICAgZGVsaXZlcnlfbW9kZSA9IGVudHJ5LnB0cjMyLT5iYXNpYy5pbnRfdHlwZTsK
ICAgICB9CiAgICAgdXBkYXRlX2ludHJlbWFwX2VudHJ5KGVudHJ5LCB2ZWN0b3IsIGRlbGl2ZXJ5
X21vZGUsIGRlc3RfbW9kZSwgZGVzdCk7CiAKQEAgLTIyOCw3ICsyNDMsNyBAQCBpbnQgX19pbml0
IGFtZF9pb21tdV9zZXR1cF9pb2FwaWNfcmVtYXBwCiB7CiAgICAgc3RydWN0IElPX0FQSUNfcm91
dGVfZW50cnkgcnRlOwogICAgIHVuc2lnbmVkIGxvbmcgZmxhZ3M7Ci0gICAgdTMyKiBlbnRyeTsK
KyAgICB1bmlvbiBpcnRlX3B0ciBlbnRyeTsKICAgICBpbnQgYXBpYywgcGluOwogICAgIHU4IGRl
bGl2ZXJ5X21vZGUsIGRlc3QsIHZlY3RvciwgZGVzdF9tb2RlOwogICAgIHUxNiBzZWcsIGJkZiwg
cmVxX2lkOwpAQCAtNDA3LDE2ICs0MjIsMTQgQEAgdW5zaWduZWQgaW50IGFtZF9pb21tdV9yZWFk
X2lvYXBpY19mcm9tXwogICAgICAgICB1MTYgYmRmID0gaW9hcGljX3NiZGZbaWR4XS5iZGY7CiAg
ICAgICAgIHUxNiBzZWcgPSBpb2FwaWNfc2JkZltpZHhdLnNlZzsKICAgICAgICAgdTE2IHJlcV9p
ZCA9IGdldF9pbnRyZW1hcF9yZXF1ZXN0b3JfaWQoc2VnLCBiZGYpOwotICAgICAgICBjb25zdCB1
MzIgKmVudHJ5ID0gZ2V0X2ludHJlbWFwX2VudHJ5KHNlZywgcmVxX2lkLCBvZmZzZXQpOworICAg
ICAgICB1bmlvbiBpcnRlX3B0ciBlbnRyeSA9IGdldF9pbnRyZW1hcF9lbnRyeShzZWcsIHJlcV9p
ZCwgb2Zmc2V0KTsKIAogICAgICAgICBBU1NFUlQob2Zmc2V0ID09ICh2YWwgJiAoSU5UUkVNQVBf
RU5UUklFUyAtIDEpKSk7CiAgICAgICAgIHZhbCAmPSB+KElOVFJFTUFQX0VOVFJJRVMgLSAxKTsK
LSAgICAgICAgdmFsIHw9IGdldF9maWVsZF9mcm9tX3JlZ191MzIoKmVudHJ5LAotICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfUkVNQVBfRU5UUllfSU5UVFlQRV9NQVNL
LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfUkVNQVBfRU5UUllf
SU5UVFlQRV9TSElGVCkgPDwgODsKLSAgICAgICAgdmFsIHw9IGdldF9maWVsZF9mcm9tX3JlZ191
MzIoKmVudHJ5LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfUkVN
QVBfRU5UUllfVkVDVE9SX01BU0ssCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIElOVF9SRU1BUF9FTlRSWV9WRUNUT1JfU0hJRlQpOworICAgICAgICB2YWwgfD0gTUFTS19J
TlNSKGVudHJ5LnB0cjMyLT5iYXNpYy5pbnRfdHlwZSwKKyAgICAgICAgICAgICAgICAgICAgICAg
ICBJT19BUElDX1JFRElSX0RFTElWX01PREVfTUFTSyk7CisgICAgICAgIHZhbCB8PSBNQVNLX0lO
U1IoZW50cnkucHRyMzItPmJhc2ljLnZlY3RvciwKKyAgICAgICAgICAgICAgICAgICAgICAgICBJ
T19BUElDX1JFRElSX1ZFQ1RPUl9NQVNLKTsKICAgICB9CiAKICAgICByZXR1cm4gdmFsOwpAQCAt
NDI3LDcgKzQ0MCw3IEBAIHN0YXRpYyBpbnQgdXBkYXRlX2ludHJlbWFwX2VudHJ5X2Zyb21fbXMK
ICAgICBpbnQgKnJlbWFwX2luZGV4LCBjb25zdCBzdHJ1Y3QgbXNpX21zZyAqbXNnLCB1MzIgKmRh
dGEpCiB7CiAgICAgdW5zaWduZWQgbG9uZyBmbGFnczsKLSAgICB1MzIqIGVudHJ5OworICAgIHVu
aW9uIGlydGVfcHRyIGVudHJ5OwogICAgIHUxNiByZXFfaWQsIGFsaWFzX2lkOwogICAgIHU4IGRl
bGl2ZXJ5X21vZGUsIGRlc3QsIHZlY3RvciwgZGVzdF9tb2RlOwogICAgIHNwaW5sb2NrX3QgKmxv
Y2s7CkBAIC01ODEsNyArNTk0LDcgQEAgdm9pZCBhbWRfaW9tbXVfcmVhZF9tc2lfZnJvbV9pcmUo
CiAgICAgY29uc3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBtc2lfZGVzYy0+ZGV2OwogICAgIHUx
NiBiZGYgPSBwZGV2ID8gUENJX0JERjIocGRldi0+YnVzLCBwZGV2LT5kZXZmbikgOiBocGV0X3Ni
ZGYuYmRmOwogICAgIHUxNiBzZWcgPSBwZGV2ID8gcGRldi0+c2VnIDogaHBldF9zYmRmLnNlZzsK
LSAgICBjb25zdCB1MzIgKmVudHJ5OworICAgIHVuaW9uIGlydGVfcHRyIGVudHJ5OwogCiAgICAg
aWYgKCBJU19FUlJfT1JfTlVMTChfZmluZF9pb21tdV9mb3JfZGV2aWNlKHNlZywgYmRmKSkgKQog
ICAgICAgICByZXR1cm47CkBAIC01OTcsMTIgKzYxMCwxMCBAQCB2b2lkIGFtZF9pb21tdV9yZWFk
X21zaV9mcm9tX2lyZSgKICAgICB9CiAKICAgICBtc2ctPmRhdGEgJj0gfihJTlRSRU1BUF9FTlRS
SUVTIC0gMSk7Ci0gICAgbXNnLT5kYXRhIHw9IGdldF9maWVsZF9mcm9tX3JlZ191MzIoKmVudHJ5
LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRS
WV9JTlRUWVBFX01BU0ssCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
SU5UX1JFTUFQX0VOVFJZX0lOVFRZUEVfU0hJRlQpIDw8IDg7Ci0gICAgbXNnLT5kYXRhIHw9IGdl
dF9maWVsZF9mcm9tX3JlZ191MzIoKmVudHJ5LAotICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9WRUNUT1JfTUFTSywKLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfUkVNQVBfRU5UUllfVkVDVE9SX1NISUZUKTsK
KyAgICBtc2ctPmRhdGEgfD0gTUFTS19JTlNSKGVudHJ5LnB0cjMyLT5iYXNpYy5pbnRfdHlwZSwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TSV9EQVRBX0RFTElWRVJZX01PREVfTUFTSyk7
CisgICAgbXNnLT5kYXRhIHw9IE1BU0tfSU5TUihlbnRyeS5wdHIzMi0+YmFzaWMudmVjdG9yLAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNJX0RBVEFfVkVDVE9SX01BU0spOwogfQogCiBp
bnQgX19pbml0IGFtZF9pb21tdV9mcmVlX2ludHJlbWFwX3RhYmxlKAotLS0gYS94ZW4vaW5jbHVk
ZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LWRlZnMuaAorKysgYi94ZW4vaW5jbHVkZS9hc20t
eDg2L2h2bS9zdm0vYW1kLWlvbW11LWRlZnMuaApAQCAtNDY5LDIyICs0NjksNiBAQCBzdHJ1Y3Qg
YW1kX2lvbW11X3B0ZSB7CiAjZGVmaW5lIElPTU1VX0NPTlRST0xfRElTQUJMRUQJMAogI2RlZmlu
ZSBJT01NVV9DT05UUk9MX0VOQUJMRUQJMQogCi0vKiBpbnRlcnJ1cHQgcmVtYXBwaW5nIHRhYmxl
ICovCi0jZGVmaW5lIElOVF9SRU1BUF9FTlRSWV9SRU1BUEVOX01BU0sgICAgMHgwMDAwMDAwMQot
I2RlZmluZSBJTlRfUkVNQVBfRU5UUllfUkVNQVBFTl9TSElGVCAgIDAKLSNkZWZpbmUgSU5UX1JF
TUFQX0VOVFJZX1NVUElPUEZfTUFTSyAgICAweDAwMDAwMDAyCi0jZGVmaW5lIElOVF9SRU1BUF9F
TlRSWV9TVVBJT1BGX1NISUZUICAgMQotI2RlZmluZSBJTlRfUkVNQVBfRU5UUllfSU5UVFlQRV9N
QVNLICAgIDB4MDAwMDAwMUMKLSNkZWZpbmUgSU5UX1JFTUFQX0VOVFJZX0lOVFRZUEVfU0hJRlQg
ICAyCi0jZGVmaW5lIElOVF9SRU1BUF9FTlRSWV9SRVFFT0lfTUFTSyAgICAgMHgwMDAwMDAyMAot
I2RlZmluZSBJTlRfUkVNQVBfRU5UUllfUkVRRU9JX1NISUZUICAgIDUKLSNkZWZpbmUgSU5UX1JF
TUFQX0VOVFJZX0RNX01BU0sgICAgICAgICAweDAwMDAwMDQwCi0jZGVmaW5lIElOVF9SRU1BUF9F
TlRSWV9ETV9TSElGVCAgICAgICAgNgotI2RlZmluZSBJTlRfUkVNQVBfRU5UUllfREVTVF9NQVNU
ICAgICAgIDB4MDAwMEZGMDAKLSNkZWZpbmUgSU5UX1JFTUFQX0VOVFJZX0RFU1RfU0hJRlQgICAg
ICA4Ci0jZGVmaW5lIElOVF9SRU1BUF9FTlRSWV9WRUNUT1JfTUFTSyAgICAgMHgwMEZGMDAwMAot
I2RlZmluZSBJTlRfUkVNQVBfRU5UUllfVkVDVE9SX1NISUZUICAgIDE2Ci0KICNkZWZpbmUgSU5W
X0lPTU1VX0FMTF9QQUdFU19BRERSRVNTICAgICAgKCgxVUxMIDw8IDYzKSAtIDEpCiAKICNkZWZp
bmUgSU9NTVVfUklOR19CVUZGRVJfUFRSX01BU0sgICAgICAgICAgICAgICAgICAweDAwMDdGRkYw
Cg==

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-iterate_ivrs_entries-IOMMU.patch"
Content-Description: AMD-IOMMU-iterate_ivrs_entries-IOMMU.patch
Content-Disposition: attachment;
	filename="AMD-IOMMU-iterate_ivrs_entries-IOMMU.patch"; size=5085;
	creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <8F07C227B753C0429D1754C1ACEB6C67@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBwYXNzIElPTU1VIHRvIGl0ZXJhdGVfaXZyc19lbnRyaWVzKCkgY2FsbGJhY2sK
CkJvdGggdXNlcnMgd2lsbCB3YW50IHRvIGtub3cgSU9NTVUgcHJvcGVydGllcyAoc3BlY2lmaWNh
bGx5IHRoZSBJUlRFCnNpemUpIHN1YnNlcXVlbnRseS4gTGV2ZXJhZ2UgdGhpcyB0byBhdm9pZCBw
b2ludGxlc3MgY2FsbHMgdG8gdGhlCmNhbGxiYWNrIHdoZW4gSVZSUyBtYXBwaW5nIHRhYmxlIGVu
dHJpZXMgYXJlIHVucG9wdWxhdGVkLiBUbyBhdm9pZApsZWFraW5nIGludGVycnVwdCByZW1hcHBp
bmcgdGFibGVzIChib2d1c2x5KSBhbGxvY2F0ZWQgZm9yIElPTU1Vcwp0aGVtc2VsdmVzLCB0aGlz
IHJlcXVpcmVzIHN1cHByZXNzaW5nIHRoZWlyIGFsbG9jYXRpb24gaW4gdGhlIGZpcnN0CnBsYWNl
LCB0YWtpbmcgYSBzdGVwIGZ1cnRoZXIgd2hhdCBjb21taXQgNzU3MTIyYzBjZiAoJ0FNRC9JT01N
VTogZG9uJ3QKImFkZCIgSU9NTVVzJykgaGFkIGRvbmUuCgpBZGRpdGlvbmFsbHkgc3VwcHJlc3Mg
dGhlIGNhbGwgZm9yIGFsaWFzIGVudHJpZXMsIGFzIGFnYWluIGJvdGggdXNlcnMKZG9uJ3QgY2Fy
ZSBhYm91dCB0aGVzZSBhbnl3YXkuIEluIGZhY3QgdGhpcyBlbGltaW5hdGVzIGEgZmFpciBiaXQg
b2YKcmVkdW5kYW5jeSBmcm9tIGR1bXAgb3V0cHV0LgoKU2lnbmVkLW9mZi1ieTogSmFuIEJldWxp
Y2ggPGpiZXVsaWNoQHN1c2UuY29tPgotLS0KdjM6IE5ldy4KLS0tClRCRDogQWxvbmcgdGhlIGxp
bmVzIG9mIGF2b2lkaW5nIHRoZSBJUlQgYWxsb2NhdGlvbiBmb3IgdGhlIElPTU1VcywgaXMKICAg
ICB0aGVyZSBhIHdheSB0byByZWNvZ25pemUgdGhlIG1hbnkgQ1BVLXByb3ZpZGVkIGRldmljZXMg
bWFueSBvZgogICAgIHdoaWNoIGNhbid0IGdlbmVyYXRlIGludGVycnVwdHMgYW55d2F5LCBhbmQg
YXZvaWQgYWxsb2NhdGlvbnMgZm9yCiAgICAgdGhlbSBhcyB3ZWxsPyBJdCdzIDMyayBwZXIgZGV2
aWNlLCBhZnRlciBhbGwuIEFub3RoZXIgb3B0aW9uIG1pZ2h0CiAgICAgYmUgb24tZGVtYW5kIGFs
bG9jYXRpb24gb2YgdGhlIHRhYmxlcywgYnV0IHF1aXRlIHBvc3NpYmx5IHdlJ2QgZ2V0CiAgICAg
aW50byB0cm91YmxlIHdpdGggZXJyb3IgaGFuZGxpbmcgdGhlcmUuCgotLS0gYS94ZW4vZHJpdmVy
cy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfYWNwaS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL2FtZC9pb21tdV9hY3BpLmMKQEAgLTY1LDcgKzY1LDExIEBAIHN0YXRpYyB2b2lkIF9faW5p
dCBhZGRfaXZyc19tYXBwaW5nX2VudHIKICAgICAvKiBvdmVycmlkZSBmbGFncyBmb3IgcmFuZ2Ug
b2YgZGV2aWNlcyAqLwogICAgIGl2cnNfbWFwcGluZ3NbYmRmXS5kZXZpY2VfZmxhZ3MgPSBmbGFn
czsKIAotICAgIGlmIChpdnJzX21hcHBpbmdzW2FsaWFzX2lkXS5pbnRyZW1hcF90YWJsZSA9PSBO
VUxMICkKKyAgICAvKiBEb24ndCBtYXAgYW4gSU9NTVUgYnkgaXRzZWxmLiAqLworICAgIGlmICgg
aW9tbXUtPmJkZiA9PSBiZGYgKQorICAgICAgICByZXR1cm47CisKKyAgICBpZiAoICFpdnJzX21h
cHBpbmdzW2FsaWFzX2lkXS5pbnRyZW1hcF90YWJsZSApCiAgICAgewogICAgICAgICAgLyogYWxs
b2NhdGUgcGVyLWRldmljZSBpbnRlcnJ1cHQgcmVtYXBwaW5nIHRhYmxlICovCiAgICAgICAgICBp
ZiAoIGFtZF9pb21tdV9wZXJkZXZfaW50cmVtYXAgKQpAQCAtODEsOCArODUsOSBAQCBzdGF0aWMg
dm9pZCBfX2luaXQgYWRkX2l2cnNfbWFwcGluZ19lbnRyCiAgICAgICAgICAgICAgaXZyc19tYXBw
aW5nc1thbGlhc19pZF0uaW50cmVtYXBfaW51c2UgPSBzaGFyZWRfaW50cmVtYXBfaW51c2U7CiAg
ICAgICAgICB9CiAgICAgfQotICAgIC8qIEFzc2lnbiBJT01NVSBoYXJkd2FyZSwgYnV0IGRvbid0
IG1hcCBhbiBJT01NVSBieSBpdHNlbGYuICovCi0gICAgaXZyc19tYXBwaW5nc1tiZGZdLmlvbW11
ID0gaW9tbXUtPmJkZiAhPSBiZGYgPyBpb21tdSA6IE5VTEw7CisKKyAgICAvKiBBc3NpZ24gSU9N
TVUgaGFyZHdhcmUuICovCisgICAgaXZyc19tYXBwaW5nc1tiZGZdLmlvbW11ID0gaW9tbXU7CiB9
CiAKIHN0YXRpYyBzdHJ1Y3QgYW1kX2lvbW11ICogX19pbml0IGZpbmRfaW9tbXVfZnJvbV9iZGZf
Y2FwKAotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfaW5pdC5jCisrKyBi
L3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0LmMKQEAgLTEwNjksNyArMTA2
OSw4IEBAIGludCBpdGVyYXRlX2l2cnNfbWFwcGluZ3MoaW50ICgqaGFuZGxlcikKICAgICByZXR1
cm4gcmM7CiB9CiAKLWludCBpdGVyYXRlX2l2cnNfZW50cmllcyhpbnQgKCpoYW5kbGVyKSh1MTYg
c2VnLCBzdHJ1Y3QgaXZyc19tYXBwaW5ncyAqKSkKK2ludCBpdGVyYXRlX2l2cnNfZW50cmllcyhp
bnQgKCpoYW5kbGVyKShjb25zdCBzdHJ1Y3QgYW1kX2lvbW11ICosCisgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGl2cnNfbWFwcGluZ3MgKikpCiB7CiAgICAg
dTE2IHNlZyA9IDA7CiAgICAgaW50IHJjID0gMDsKQEAgLTEwODIsNyArMTA4MywxMiBAQCBpbnQg
aXRlcmF0ZV9pdnJzX2VudHJpZXMoaW50ICgqaGFuZGxlcikoCiAgICAgICAgICAgICBicmVhazsK
ICAgICAgICAgc2VnID0gSVZSU19NQVBQSU5HU19TRUcobWFwKTsKICAgICAgICAgZm9yICggYmRm
ID0gMDsgIXJjICYmIGJkZiA8IGl2cnNfYmRmX2VudHJpZXM7ICsrYmRmICkKLSAgICAgICAgICAg
IHJjID0gaGFuZGxlcihzZWcsIG1hcCArIGJkZik7CisgICAgICAgIHsKKyAgICAgICAgICAgIGNv
bnN0IHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11ID0gbWFwW2JkZl0uaW9tbXU7CisKKyAgICAgICAg
ICAgIGlmICggaW9tbXUgJiYgbWFwW2JkZl0uZHRlX3JlcXVlc3Rvcl9pZCA9PSBiZGYgKQorICAg
ICAgICAgICAgICAgIHJjID0gaGFuZGxlcihpb21tdSwgJm1hcFtiZGZdKTsKKyAgICAgICAgfQog
ICAgIH0gd2hpbGUgKCAhcmMgJiYgKytzZWcgKTsKIAogICAgIHJldHVybiByYzsKLS0tIGEveGVu
L2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2ludHIuYworKysgYi94ZW4vZHJpdmVycy9w
YXNzdGhyb3VnaC9hbWQvaW9tbXVfaW50ci5jCkBAIC02MTcsNyArNjE3LDcgQEAgdm9pZCBhbWRf
aW9tbXVfcmVhZF9tc2lfZnJvbV9pcmUoCiB9CiAKIGludCBfX2luaXQgYW1kX2lvbW11X2ZyZWVf
aW50cmVtYXBfdGFibGUoCi0gICAgdTE2IHNlZywgc3RydWN0IGl2cnNfbWFwcGluZ3MgKml2cnNf
bWFwcGluZykKKyAgICBjb25zdCBzdHJ1Y3QgYW1kX2lvbW11ICppb21tdSwgc3RydWN0IGl2cnNf
bWFwcGluZ3MgKml2cnNfbWFwcGluZykKIHsKICAgICB2b2lkICp0YiA9IGl2cnNfbWFwcGluZy0+
aW50cmVtYXBfdGFibGU7CiAKQEAgLTY5MywxNCArNjkzLDE1IEBAIHN0YXRpYyB2b2lkIGR1bXBf
aW50cmVtYXBfdGFibGUoY29uc3QgdTMKICAgICB9CiB9CiAKLXN0YXRpYyBpbnQgZHVtcF9pbnRy
ZW1hcF9tYXBwaW5nKHUxNiBzZWcsIHN0cnVjdCBpdnJzX21hcHBpbmdzICppdnJzX21hcHBpbmcp
CitzdGF0aWMgaW50IGR1bXBfaW50cmVtYXBfbWFwcGluZyhjb25zdCBzdHJ1Y3QgYW1kX2lvbW11
ICppb21tdSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBpdnJzX21h
cHBpbmdzICppdnJzX21hcHBpbmcpCiB7CiAgICAgdW5zaWduZWQgbG9uZyBmbGFnczsKIAogICAg
IGlmICggIWl2cnNfbWFwcGluZyApCiAgICAgICAgIHJldHVybiAwOwogCi0gICAgcHJpbnRrKCIg
ICUwNHg6JTAyeDolMDJ4OiV1OlxuIiwgc2VnLAorICAgIHByaW50aygiICAlMDR4OiUwMng6JTAy
eDoldTpcbiIsIGlvbW11LT5zZWcsCiAgICAgICAgICAgIFBDSV9CVVMoaXZyc19tYXBwaW5nLT5k
dGVfcmVxdWVzdG9yX2lkKSwKICAgICAgICAgICAgUENJX1NMT1QoaXZyc19tYXBwaW5nLT5kdGVf
cmVxdWVzdG9yX2lkKSwKICAgICAgICAgICAgUENJX0ZVTkMoaXZyc19tYXBwaW5nLT5kdGVfcmVx
dWVzdG9yX2lkKSk7Ci0tLSBhL3hlbi9pbmNsdWRlL2FzbS14ODYvYW1kLWlvbW11LmgKKysrIGIv
eGVuL2luY2x1ZGUvYXNtLXg4Ni9hbWQtaW9tbXUuaApAQCAtMTI5LDcgKzEyOSw4IEBAIGV4dGVy
biB1OCBpdmhkX3R5cGU7CiAKIHN0cnVjdCBpdnJzX21hcHBpbmdzICpnZXRfaXZyc19tYXBwaW5n
cyh1MTYgc2VnKTsKIGludCBpdGVyYXRlX2l2cnNfbWFwcGluZ3MoaW50ICgqKSh1MTYgc2VnLCBz
dHJ1Y3QgaXZyc19tYXBwaW5ncyAqKSk7Ci1pbnQgaXRlcmF0ZV9pdnJzX2VudHJpZXMoaW50ICgq
KSh1MTYgc2VnLCBzdHJ1Y3QgaXZyc19tYXBwaW5ncyAqKSk7CitpbnQgaXRlcmF0ZV9pdnJzX2Vu
dHJpZXMoaW50ICgqKShjb25zdCBzdHJ1Y3QgYW1kX2lvbW11ICosCisgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgaXZyc19tYXBwaW5ncyAqKSk7CiAKIC8qIGlvbW11IHRh
YmxlcyBpbiBndWVzdCBzcGFjZSAqLwogc3RydWN0IG1taW9fcmVnIHsKLS0tIGEveGVuL2luY2x1
ZGUvYXNtLXg4Ni9odm0vc3ZtL2FtZC1pb21tdS1wcm90by5oCisrKyBiL3hlbi9pbmNsdWRlL2Fz
bS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtcHJvdG8uaApAQCAtOTgsNyArOTgsOCBAQCBzdHJ1Y3Qg
YW1kX2lvbW11ICpmaW5kX2lvbW11X2Zvcl9kZXZpY2UoCiAvKiBpbnRlcnJ1cHQgcmVtYXBwaW5n
ICovCiBpbnQgYW1kX2lvbW11X3NldHVwX2lvYXBpY19yZW1hcHBpbmcodm9pZCk7CiB2b2lkICph
bWRfaW9tbXVfYWxsb2NfaW50cmVtYXBfdGFibGUodW5zaWduZWQgbG9uZyAqKik7Ci1pbnQgYW1k
X2lvbW11X2ZyZWVfaW50cmVtYXBfdGFibGUodTE2IHNlZywgc3RydWN0IGl2cnNfbWFwcGluZ3Mg
Kik7CitpbnQgYW1kX2lvbW11X2ZyZWVfaW50cmVtYXBfdGFibGUoCisgICAgY29uc3Qgc3RydWN0
IGFtZF9pb21tdSAqLCBzdHJ1Y3QgaXZyc19tYXBwaW5ncyAqKTsKIHZvaWQgYW1kX2lvbW11X2lv
YXBpY191cGRhdGVfaXJlKAogICAgIHVuc2lnbmVkIGludCBhcGljLCB1bnNpZ25lZCBpbnQgcmVn
LCB1bnNpZ25lZCBpbnQgdmFsdWUpOwogdW5zaWduZWQgaW50IGFtZF9pb21tdV9yZWFkX2lvYXBp
Y19mcm9tX2lyZSgK

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-alloc-IRT-IOMMU.patch"
Content-Description: AMD-IOMMU-alloc-IRT-IOMMU.patch
Content-Disposition: attachment; filename="AMD-IOMMU-alloc-IRT-IOMMU.patch";
	size=2173; creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <16D0539DE2E53942AF3A675403446831@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBwYXNzIElPTU1VIHRvIGFtZF9pb21tdV9hbGxvY19pbnRyZW1hcF90YWJsZSgp
CgpUaGUgZnVuY3Rpb24gd2lsbCB3YW50IHRvIGtub3cgSU9NTVUgcHJvcGVydGllcyAoc3BlY2lm
aWNhbGx5IHRoZSBJUlRFCnNpemUpIHN1YnNlcXVlbnRseS4KCkNvcnJlY3QgaW5kZW50YXRpb24g
b2Ygb25lIG9mIHRoZSBjYWxsIHNpdGVzIGF0IHRoaXMgb2NjYXNpb24uCgpTaWduZWQtb2ZmLWJ5
OiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+Ci0tLQp2MzogTmV3LgoKLS0tIGEveGVu
L2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2FjcGkuYworKysgYi94ZW4vZHJpdmVycy9w
YXNzdGhyb3VnaC9hbWQvaW9tbXVfYWNwaS5jCkBAIC03NCwxMiArNzQsMTQgQEAgc3RhdGljIHZv
aWQgX19pbml0IGFkZF9pdnJzX21hcHBpbmdfZW50cgogICAgICAgICAgLyogYWxsb2NhdGUgcGVy
LWRldmljZSBpbnRlcnJ1cHQgcmVtYXBwaW5nIHRhYmxlICovCiAgICAgICAgICBpZiAoIGFtZF9p
b21tdV9wZXJkZXZfaW50cmVtYXAgKQogICAgICAgICAgICAgIGl2cnNfbWFwcGluZ3NbYWxpYXNf
aWRdLmludHJlbWFwX3RhYmxlID0KLSAgICAgICAgICAgICAgICBhbWRfaW9tbXVfYWxsb2NfaW50
cmVtYXBfdGFibGUoCi0gICAgICAgICAgICAgICAgICAgICZpdnJzX21hcHBpbmdzW2FsaWFzX2lk
XS5pbnRyZW1hcF9pbnVzZSk7CisgICAgICAgICAgICAgICAgIGFtZF9pb21tdV9hbGxvY19pbnRy
ZW1hcF90YWJsZSgKKyAgICAgICAgICAgICAgICAgICAgIGlvbW11LAorICAgICAgICAgICAgICAg
ICAgICAgJml2cnNfbWFwcGluZ3NbYWxpYXNfaWRdLmludHJlbWFwX2ludXNlKTsKICAgICAgICAg
IGVsc2UKICAgICAgICAgIHsKICAgICAgICAgICAgICBpZiAoIHNoYXJlZF9pbnRyZW1hcF90YWJs
ZSA9PSBOVUxMICApCiAgICAgICAgICAgICAgICAgIHNoYXJlZF9pbnRyZW1hcF90YWJsZSA9IGFt
ZF9pb21tdV9hbGxvY19pbnRyZW1hcF90YWJsZSgKKyAgICAgICAgICAgICAgICAgICAgIGlvbW11
LAogICAgICAgICAgICAgICAgICAgICAgJnNoYXJlZF9pbnRyZW1hcF9pbnVzZSk7CiAgICAgICAg
ICAgICAgaXZyc19tYXBwaW5nc1thbGlhc19pZF0uaW50cmVtYXBfdGFibGUgPSBzaGFyZWRfaW50
cmVtYXBfdGFibGU7CiAgICAgICAgICAgICAgaXZyc19tYXBwaW5nc1thbGlhc19pZF0uaW50cmVt
YXBfaW51c2UgPSBzaGFyZWRfaW50cmVtYXBfaW51c2U7Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0
aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1k
L2lvbW11X2ludHIuYwpAQCAtNjMyLDcgKzYzMiw4IEBAIGludCBfX2luaXQgYW1kX2lvbW11X2Zy
ZWVfaW50cmVtYXBfdGFibGUKICAgICByZXR1cm4gMDsKIH0KIAotdm9pZCogX19pbml0IGFtZF9p
b21tdV9hbGxvY19pbnRyZW1hcF90YWJsZSh1bnNpZ25lZCBsb25nICoqaW51c2VfbWFwKQordm9p
ZCAqX19pbml0IGFtZF9pb21tdV9hbGxvY19pbnRyZW1hcF90YWJsZSgKKyAgICBjb25zdCBzdHJ1
Y3QgYW1kX2lvbW11ICppb21tdSwgdW5zaWduZWQgbG9uZyAqKmludXNlX21hcCkKIHsKICAgICB2
b2lkICp0YjsKICAgICB0YiA9IF9fYWxsb2NfYW1kX2lvbW11X3RhYmxlcyhJTlRSRU1BUF9UQUJM
RV9PUkRFUik7Ci0tLSBhL3hlbi9pbmNsdWRlL2FzbS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtcHJv
dG8uaAorKysgYi94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LXByb3RvLmgK
QEAgLTk3LDcgKzk3LDggQEAgc3RydWN0IGFtZF9pb21tdSAqZmluZF9pb21tdV9mb3JfZGV2aWNl
KAogCiAvKiBpbnRlcnJ1cHQgcmVtYXBwaW5nICovCiBpbnQgYW1kX2lvbW11X3NldHVwX2lvYXBp
Y19yZW1hcHBpbmcodm9pZCk7Ci12b2lkICphbWRfaW9tbXVfYWxsb2NfaW50cmVtYXBfdGFibGUo
dW5zaWduZWQgbG9uZyAqKik7Cit2b2lkICphbWRfaW9tbXVfYWxsb2NfaW50cmVtYXBfdGFibGUo
CisgICAgY29uc3Qgc3RydWN0IGFtZF9pb21tdSAqLCB1bnNpZ25lZCBsb25nICoqKTsKIGludCBh
bWRfaW9tbXVfZnJlZV9pbnRyZW1hcF90YWJsZSgKICAgICBjb25zdCBzdHJ1Y3QgYW1kX2lvbW11
ICosIHN0cnVjdCBpdnJzX21hcHBpbmdzICopOwogdm9pZCBhbWRfaW9tbXVfaW9hcGljX3VwZGF0
ZV9pcmUoCg==

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-get-IRTE-IOMMU.patch"
Content-Description: AMD-IOMMU-get-IRTE-IOMMU.patch
Content-Disposition: attachment; filename="AMD-IOMMU-get-IRTE-IOMMU.patch";
	size=5931; creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <71BC889A0AFFA24B910CFEC56FDE1DF4@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBwYXNzIElPTU1VIHRvIHtnZXQsZnJlZSx1cGRhdGV9X2ludHJlbWFwX2VudHJ5
KCkKClRoZSBmdW5jdGlvbnMgd2lsbCB3YW50IHRvIGtub3cgSU9NTVUgcHJvcGVydGllcyAoc3Bl
Y2lmaWNhbGx5IHRoZSBJUlRFCnNpemUpIHN1YnNlcXVlbnRseS4KClJhdGhlciB0aGFuIGludHJv
ZHVjaW5nIGEgc2Vjb25kIGVycm9yIHBhdGggYm9ndXNseSByZXR1cm5pbmcgLUUuLi4gZnJvbQph
bWRfaW9tbXVfcmVhZF9pb2FwaWNfZnJvbV9pcmUoKSwgYWxzbyBjaGFuZ2UgdGhlIGV4aXN0aW5n
IG9uZSB0byBmb2xsb3cKVlQtZCBpbiByZXR1cm5pbmcgdGhlIHJhdyAodW50cmFuc2xhdGVkKSBJ
Ty1BUElDIFJURS4KClNpZ25lZC1vZmYtYnk6IEphbiBCZXVsaWNoIDxqYmV1bGljaEBzdXNlLmNv
bT4KLS0tCnYzOiBOZXcuCgotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVf
aW50ci5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMKQEAg
LTEyMywxMSArMTIzLDExIEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgYWxsb2NfaW50cmVtYXBfZW50
cnkKICAgICByZXR1cm4gc2xvdDsKIH0KIAotc3RhdGljIHVuaW9uIGlydGVfcHRyIGdldF9pbnRy
ZW1hcF9lbnRyeSh1bnNpZ25lZCBpbnQgc2VnLCB1bnNpZ25lZCBpbnQgYmRmLAotICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgaW5kZXgpCitzdGF0
aWMgdW5pb24gaXJ0ZV9wdHIgZ2V0X2ludHJlbWFwX2VudHJ5KGNvbnN0IHN0cnVjdCBhbWRfaW9t
bXUgKmlvbW11LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNp
Z25lZCBpbnQgYmRmLCB1bnNpZ25lZCBpbnQgaW5kZXgpCiB7CiAgICAgdW5pb24gaXJ0ZV9wdHIg
dGFibGUgPSB7Ci0gICAgICAgIC5wdHIgPSBnZXRfaXZyc19tYXBwaW5ncyhzZWcpW2JkZl0uaW50
cmVtYXBfdGFibGUKKyAgICAgICAgLnB0ciA9IGdldF9pdnJzX21hcHBpbmdzKGlvbW11LT5zZWcp
W2JkZl0uaW50cmVtYXBfdGFibGUKICAgICB9OwogCiAgICAgQVNTRVJUKHRhYmxlLnB0ciAmJiAo
aW5kZXggPCBJTlRSRU1BUF9FTlRSSUVTKSk7CkBAIC0xMzcsMTggKzEzNywxOSBAQCBzdGF0aWMg
dW5pb24gaXJ0ZV9wdHIgZ2V0X2ludHJlbWFwX2VudHJ5CiAgICAgcmV0dXJuIHRhYmxlOwogfQog
Ci1zdGF0aWMgdm9pZCBmcmVlX2ludHJlbWFwX2VudHJ5KHVuc2lnbmVkIGludCBzZWcsIHVuc2ln
bmVkIGludCBiZGYsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGlu
dCBpbmRleCkKK3N0YXRpYyB2b2lkIGZyZWVfaW50cmVtYXBfZW50cnkoY29uc3Qgc3RydWN0IGFt
ZF9pb21tdSAqaW9tbXUsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVk
IGludCBiZGYsIHVuc2lnbmVkIGludCBpbmRleCkKIHsKLSAgICB1bmlvbiBpcnRlX3B0ciBlbnRy
eSA9IGdldF9pbnRyZW1hcF9lbnRyeShzZWcsIGJkZiwgaW5kZXgpOworICAgIHVuaW9uIGlydGVf
cHRyIGVudHJ5ID0gZ2V0X2ludHJlbWFwX2VudHJ5KGlvbW11LCBiZGYsIGluZGV4KTsKIAogICAg
IEFDQ0VTU19PTkNFKGVudHJ5LnB0cjMyLT5yYXdbMF0pID0gMDsKIAotICAgIF9fY2xlYXJfYml0
KGluZGV4LCBnZXRfaXZyc19tYXBwaW5ncyhzZWcpW2JkZl0uaW50cmVtYXBfaW51c2UpOworICAg
IF9fY2xlYXJfYml0KGluZGV4LCBnZXRfaXZyc19tYXBwaW5ncyhpb21tdS0+c2VnKVtiZGZdLmlu
dHJlbWFwX2ludXNlKTsKIH0KIAotc3RhdGljIHZvaWQgdXBkYXRlX2ludHJlbWFwX2VudHJ5KHVu
aW9uIGlydGVfcHRyIGVudHJ5LCB1bnNpZ25lZCBpbnQgdmVjdG9yLAotICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBpbnRfdHlwZSwKK3N0YXRpYyB2b2lkIHVw
ZGF0ZV9pbnRyZW1hcF9lbnRyeShjb25zdCBzdHJ1Y3QgYW1kX2lvbW11ICppb21tdSwKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlvbiBpcnRlX3B0ciBlbnRyeSwKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgdmVjdG9yLCB1bnNpZ25l
ZCBpbnQgaW50X3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWdu
ZWQgaW50IGRlc3RfbW9kZSwgdW5zaWduZWQgaW50IGRlc3QpCiB7CiAgICAgc3RydWN0IGlydGVf
YmFzaWMgYmFzaWMgPSB7CkBAIC0yMTIsNyArMjEzLDcgQEAgc3RhdGljIGludCB1cGRhdGVfaW50
cmVtYXBfZW50cnlfZnJvbV9pbwogICAgICAgICBsb191cGRhdGUgPSAxOwogICAgIH0KIAotICAg
IGVudHJ5ID0gZ2V0X2ludHJlbWFwX2VudHJ5KGlvbW11LT5zZWcsIHJlcV9pZCwgb2Zmc2V0KTsK
KyAgICBlbnRyeSA9IGdldF9pbnRyZW1hcF9lbnRyeShpb21tdSwgcmVxX2lkLCBvZmZzZXQpOwog
ICAgIGlmICggIWxvX3VwZGF0ZSApCiAgICAgewogICAgICAgICAvKgpAQCAtMjIzLDcgKzIyNCw3
IEBAIHN0YXRpYyBpbnQgdXBkYXRlX2ludHJlbWFwX2VudHJ5X2Zyb21faW8KICAgICAgICAgdmVj
dG9yID0gZW50cnkucHRyMzItPmJhc2ljLnZlY3RvcjsKICAgICAgICAgZGVsaXZlcnlfbW9kZSA9
IGVudHJ5LnB0cjMyLT5iYXNpYy5pbnRfdHlwZTsKICAgICB9Ci0gICAgdXBkYXRlX2ludHJlbWFw
X2VudHJ5KGVudHJ5LCB2ZWN0b3IsIGRlbGl2ZXJ5X21vZGUsIGRlc3RfbW9kZSwgZGVzdCk7Cisg
ICAgdXBkYXRlX2ludHJlbWFwX2VudHJ5KGlvbW11LCBlbnRyeSwgdmVjdG9yLCBkZWxpdmVyeV9t
b2RlLCBkZXN0X21vZGUsIGRlc3QpOwogCiAgICAgc3Bpbl91bmxvY2tfaXJxcmVzdG9yZShsb2Nr
LCBmbGFncyk7CiAKQEAgLTI4OCw4ICsyODksOCBAQCBpbnQgX19pbml0IGFtZF9pb21tdV9zZXR1
cF9pb2FwaWNfcmVtYXBwCiAgICAgICAgICAgICBzcGluX2xvY2tfaXJxc2F2ZShsb2NrLCBmbGFn
cyk7CiAgICAgICAgICAgICBvZmZzZXQgPSBhbGxvY19pbnRyZW1hcF9lbnRyeShzZWcsIHJlcV9p
ZCwgMSk7CiAgICAgICAgICAgICBCVUdfT04ob2Zmc2V0ID49IElOVFJFTUFQX0VOVFJJRVMpOwot
ICAgICAgICAgICAgZW50cnkgPSBnZXRfaW50cmVtYXBfZW50cnkoaW9tbXUtPnNlZywgcmVxX2lk
LCBvZmZzZXQpOwotICAgICAgICAgICAgdXBkYXRlX2ludHJlbWFwX2VudHJ5KGVudHJ5LCB2ZWN0
b3IsCisgICAgICAgICAgICBlbnRyeSA9IGdldF9pbnRyZW1hcF9lbnRyeShpb21tdSwgcmVxX2lk
LCBvZmZzZXQpOworICAgICAgICAgICAgdXBkYXRlX2ludHJlbWFwX2VudHJ5KGlvbW11LCBlbnRy
eSwgdmVjdG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGl2ZXJ5X21v
ZGUsIGRlc3RfbW9kZSwgZGVzdCk7CiAgICAgICAgICAgICBzcGluX3VubG9ja19pcnFyZXN0b3Jl
KGxvY2ssIGZsYWdzKTsKIApAQCAtNDEzLDcgKzQxNCw3IEBAIHVuc2lnbmVkIGludCBhbWRfaW9t
bXVfcmVhZF9pb2FwaWNfZnJvbV8KIAogICAgIGlkeCA9IGlvYXBpY19pZF90b19pbmRleChJT19B
UElDX0lEKGFwaWMpKTsKICAgICBpZiAoIGlkeCA9PSBNQVhfSU9fQVBJQ1MgKQotICAgICAgICBy
ZXR1cm4gLUVJTlZBTDsKKyAgICAgICAgcmV0dXJuIHZhbDsKIAogICAgIG9mZnNldCA9IGlvYXBp
Y19zYmRmW2lkeF0ucGluXzJfaWR4W3Bpbl07CiAKQEAgLTQyMiw5ICs0MjMsMTMgQEAgdW5zaWdu
ZWQgaW50IGFtZF9pb21tdV9yZWFkX2lvYXBpY19mcm9tXwogICAgICAgICB1MTYgYmRmID0gaW9h
cGljX3NiZGZbaWR4XS5iZGY7CiAgICAgICAgIHUxNiBzZWcgPSBpb2FwaWNfc2JkZltpZHhdLnNl
ZzsKICAgICAgICAgdTE2IHJlcV9pZCA9IGdldF9pbnRyZW1hcF9yZXF1ZXN0b3JfaWQoc2VnLCBi
ZGYpOwotICAgICAgICB1bmlvbiBpcnRlX3B0ciBlbnRyeSA9IGdldF9pbnRyZW1hcF9lbnRyeShz
ZWcsIHJlcV9pZCwgb2Zmc2V0KTsKKyAgICAgICAgY29uc3Qgc3RydWN0IGFtZF9pb21tdSAqaW9t
bXUgPSBmaW5kX2lvbW11X2Zvcl9kZXZpY2Uoc2VnLCBiZGYpOworICAgICAgICB1bmlvbiBpcnRl
X3B0ciBlbnRyeTsKIAorICAgICAgICBpZiAoICFpb21tdSApCisgICAgICAgICAgICByZXR1cm4g
dmFsOwogICAgICAgICBBU1NFUlQob2Zmc2V0ID09ICh2YWwgJiAoSU5UUkVNQVBfRU5UUklFUyAt
IDEpKSk7CisgICAgICAgIGVudHJ5ID0gZ2V0X2ludHJlbWFwX2VudHJ5KGlvbW11LCByZXFfaWQs
IG9mZnNldCk7CiAgICAgICAgIHZhbCAmPSB+KElOVFJFTUFQX0VOVFJJRVMgLSAxKTsKICAgICAg
ICAgdmFsIHw9IE1BU0tfSU5TUihlbnRyeS5wdHIzMi0+YmFzaWMuaW50X3R5cGUsCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgSU9fQVBJQ19SRURJUl9ERUxJVl9NT0RFX01BU0spOwpAQCAtNDU0
LDcgKzQ1OSw3IEBAIHN0YXRpYyBpbnQgdXBkYXRlX2ludHJlbWFwX2VudHJ5X2Zyb21fbXMKICAg
ICAgICAgbG9jayA9IGdldF9pbnRyZW1hcF9sb2NrKGlvbW11LT5zZWcsIHJlcV9pZCk7CiAgICAg
ICAgIHNwaW5fbG9ja19pcnFzYXZlKGxvY2ssIGZsYWdzKTsKICAgICAgICAgZm9yICggaSA9IDA7
IGkgPCBucjsgKytpICkKLSAgICAgICAgICAgIGZyZWVfaW50cmVtYXBfZW50cnkoaW9tbXUtPnNl
ZywgcmVxX2lkLCAqcmVtYXBfaW5kZXggKyBpKTsKKyAgICAgICAgICAgIGZyZWVfaW50cmVtYXBf
ZW50cnkoaW9tbXUsIHJlcV9pZCwgKnJlbWFwX2luZGV4ICsgaSk7CiAgICAgICAgIHNwaW5fdW5s
b2NrX2lycXJlc3RvcmUobG9jaywgZmxhZ3MpOwogICAgICAgICBnb3RvIGRvbmU7CiAgICAgfQpA
QCAtNDc5LDggKzQ4NCw4IEBAIHN0YXRpYyBpbnQgdXBkYXRlX2ludHJlbWFwX2VudHJ5X2Zyb21f
bXMKICAgICAgICAgKnJlbWFwX2luZGV4ID0gb2Zmc2V0OwogICAgIH0KIAotICAgIGVudHJ5ID0g
Z2V0X2ludHJlbWFwX2VudHJ5KGlvbW11LT5zZWcsIHJlcV9pZCwgb2Zmc2V0KTsKLSAgICB1cGRh
dGVfaW50cmVtYXBfZW50cnkoZW50cnksIHZlY3RvciwgZGVsaXZlcnlfbW9kZSwgZGVzdF9tb2Rl
LCBkZXN0KTsKKyAgICBlbnRyeSA9IGdldF9pbnRyZW1hcF9lbnRyeShpb21tdSwgcmVxX2lkLCBv
ZmZzZXQpOworICAgIHVwZGF0ZV9pbnRyZW1hcF9lbnRyeShpb21tdSwgZW50cnksIHZlY3Rvciwg
ZGVsaXZlcnlfbW9kZSwgZGVzdF9tb2RlLCBkZXN0KTsKICAgICBzcGluX3VubG9ja19pcnFyZXN0
b3JlKGxvY2ssIGZsYWdzKTsKIAogICAgICpkYXRhID0gKG1zZy0+ZGF0YSAmIH4oSU5UUkVNQVBf
RU5UUklFUyAtIDEpKSB8IG9mZnNldDsKQEAgLTU5NCwxMiArNTk5LDEzIEBAIHZvaWQgYW1kX2lv
bW11X3JlYWRfbXNpX2Zyb21faXJlKAogICAgIGNvbnN0IHN0cnVjdCBwY2lfZGV2ICpwZGV2ID0g
bXNpX2Rlc2MtPmRldjsKICAgICB1MTYgYmRmID0gcGRldiA/IFBDSV9CREYyKHBkZXYtPmJ1cywg
cGRldi0+ZGV2Zm4pIDogaHBldF9zYmRmLmJkZjsKICAgICB1MTYgc2VnID0gcGRldiA/IHBkZXYt
PnNlZyA6IGhwZXRfc2JkZi5zZWc7CisgICAgY29uc3Qgc3RydWN0IGFtZF9pb21tdSAqaW9tbXUg
PSBfZmluZF9pb21tdV9mb3JfZGV2aWNlKHNlZywgYmRmKTsKICAgICB1bmlvbiBpcnRlX3B0ciBl
bnRyeTsKIAotICAgIGlmICggSVNfRVJSX09SX05VTEwoX2ZpbmRfaW9tbXVfZm9yX2RldmljZShz
ZWcsIGJkZikpICkKKyAgICBpZiAoIElTX0VSUl9PUl9OVUxMKGlvbW11KSApCiAgICAgICAgIHJl
dHVybjsKIAotICAgIGVudHJ5ID0gZ2V0X2ludHJlbWFwX2VudHJ5KHNlZywgZ2V0X2RtYV9yZXF1
ZXN0b3JfaWQoc2VnLCBiZGYpLCBvZmZzZXQpOworICAgIGVudHJ5ID0gZ2V0X2ludHJlbWFwX2Vu
dHJ5KGlvbW11LCBnZXRfZG1hX3JlcXVlc3Rvcl9pZChzZWcsIGJkZiksIG9mZnNldCk7CiAKICAg
ICBpZiAoIG1zaV9kZXNjLT5tc2lfYXR0cmliLnR5cGUgPT0gUENJX0NBUF9JRF9NU0kgKQogICAg
IHsK

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-128bit-IRTE.patch"
Content-Description: AMD-IOMMU-128bit-IRTE.patch
Content-Disposition: attachment; filename="AMD-IOMMU-128bit-IRTE.patch";
	size=16780; creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <7C2B542CF8E7664DA57E86E32950B1B3@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBpbnRyb2R1Y2UgMTI4LWJpdCBJUlRFIG5vbi1ndWVzdC1BUElDIElSVEUgZm9y
bWF0CgpUaGlzIGlzIGluIHByZXBhcmF0aW9uIG9mIGFjdHVhbGx5IGVuYWJsaW5nIHgyQVBJQyBt
b2RlLCB3aGljaCByZXF1aXJlcwp0aGlzIHdpZGVyIElSVEUgZm9ybWF0IHRvIGJlIHVzZWQuCgpB
IHNwZWNpZmljIHJlbWFyayByZWdhcmRpbmcgdGhlIGZpcnN0IGh1bmsgY2hhbmdpbmcKYW1kX2lv
bW11X2lvYXBpY191cGRhdGVfaXJlKCk6IFRoaXMgYnlwYXNzIHdhcyBpbnRyb2R1Y2VkIGZvciBY
U0EtMzYsCmkuZS4gYnkgOTRkNGExMTE5ZCAoIkFNRCxJT01NVTogQ2xlYW4gdXAgb2xkIGVudHJp
ZXMgaW4gcmVtYXBwaW5nCnRhYmxlcyB3aGVuIGNyZWF0aW5nIG5ldyBvbmUiKS4gT3RoZXIgY29k
ZSBpbnRyb2R1Y2VkIGJ5IHRoYXQgY2hhbmdlIGhhcwptZWFud2hpbGUgZGlzYXBwZWFyZWQgb3Ig
ZnVydGhlciBjaGFuZ2VkLCBhbmQgSSB3b25kZXIgaWYgLSByYXRoZXIgdGhhbgphZGRpbmcgYW4g
eDJhcGljX2VuYWJsZWQgY2hlY2sgdG8gdGhlIGNvbmRpdGlvbmFsIC0gdGhlIGJ5cGFzcyBjb3Vs
ZG4ndApiZSBkZWxldGVkIGFsdG9nZXRoZXIuIEZvciBub3cgdGhlIGdvYWwgaXMgdG8gYWZmZWN0
IHRoZSBub24teDJBUElDCnBhdGhzIGFzIGxpdHRsZSBhcyBwb3NzaWJsZS4KClRha2UgdGhlIGxp
YmVydHkgYW5kIHVzZSB0aGUgbmV3ICJmcmVzaCIgZmxhZyB0byBzdXBwcmVzcyBhbiB1bm5lZWRl
ZApmbHVzaCBpbiB1cGRhdGVfaW50cmVtYXBfZW50cnlfZnJvbV9pb2FwaWMoKS4KClNpZ25lZC1v
ZmYtYnk6IEphbiBCZXVsaWNoIDxqYmV1bGljaEBzdXNlLmNvbT4KLS0tCnYzOiBBdm9pZCB1bnJl
bGF0ZWQgdHlwZSBjaGFuZ2VzIGluIHVwZGF0ZV9pbnRyZW1hcF9lbnRyeV9mcm9tX2lvYXBpYygp
LgogICAgRHJvcCBpcnRlX21vZGUgZW51bSBhbmQgdmFyaWFibGUuIENvbnZlcnQgSU5UUkVNQVBf
VEFCTEVfT1JERVIgaW50bwogICAgYSBzdGF0aWMgaGVscGVyLiBDb21tZW50IGJhcnJpZXIoKSB1
c2VzLiBTd2l0Y2ggYm9vbGVhbiBiaXRmaWVsZHMgdG8KICAgIGJvb2wuCnYyOiBBZGQgY2FzdCBp
biBnZXRfZnVsbF9kZXN0KCkuIFJlLWJhc2Ugb3ZlciBjaGFuZ2VzIGVhcmxpZXIgaW4gdGhlCiAg
ICBzZXJpZXMuIERvbid0IHVzZSBjbXB4Y2hnMTZiLiBVc2UgYmFycmllcigpIGluc3RlYWQgb2Yg
d21iKCkuCi0tLQpOb3RlIHRoYXQgQU1EJ3MgZG9jIHNheXMgTG93ZXN0IFByaW9yaXR5ICgiQXJi
aXRyYXRlZCIgYnkgdGhlaXIgbmFtaW5nKQptb2RlIGlzIHVuYXZhaWxhYmxlIGluIHgyQVBJQyBt
b2RlLCBidXQgdGhleSd2ZSBjb25maXJtZWQgdGhpcyB0byBiZSBhCm1pc3Rha2Ugb24gdGhlaXIg
cGFydC4KCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMKKysr
IGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2ludHIuYwpAQCAtNDAsMTIgKzQw
LDM4IEBAIHVuaW9uIGlydGUzMiB7CiAgICAgc3RydWN0IGlydGVfYmFzaWMgYmFzaWM7CiB9Owog
CitzdHJ1Y3QgaXJ0ZV9mdWxsIHsKKyAgICBib29sIHJlbWFwX2VuOjE7CisgICAgYm9vbCBzdXBf
aW9fcGY6MTsKKyAgICB1bnNpZ25lZCBpbnQgaW50X3R5cGU6MzsKKyAgICBib29sIHJxX2VvaTox
OworICAgIGJvb2wgZG06MTsKKyAgICBib29sIGd1ZXN0X21vZGU6MTsgLyogTUJaICovCisgICAg
dW5zaWduZWQgaW50IGRlc3RfbG86MjQ7CisgICAgdW5zaWduZWQgaW50IDozMjsKKyAgICB1bnNp
Z25lZCBpbnQgdmVjdG9yOjg7CisgICAgdW5zaWduZWQgaW50IDoyNDsKKyAgICB1bnNpZ25lZCBp
bnQgOjI0OworICAgIHVuc2lnbmVkIGludCBkZXN0X2hpOjg7Cit9OworCit1bmlvbiBpcnRlMTI4
IHsKKyAgICB1aW50NjRfdCByYXdbMl07CisgICAgc3RydWN0IGlydGVfZnVsbCBmdWxsOworfTsK
KwogdW5pb24gaXJ0ZV9wdHIgewogICAgIHZvaWQgKnB0cjsKICAgICB1bmlvbiBpcnRlMzIgKnB0
cjMyOworICAgIHVuaW9uIGlydGUxMjggKnB0cjEyODsKIH07CiAKLSNkZWZpbmUgSU5UUkVNQVBf
VEFCTEVfT1JERVIgICAgMQordW5pb24gaXJ0ZV9jcHRyIHsKKyAgICBjb25zdCB2b2lkICpwdHI7
CisgICAgY29uc3QgdW5pb24gaXJ0ZTMyICpwdHIzMjsKKyAgICBjb25zdCB1bmlvbiBpcnRlMTI4
ICpwdHIxMjg7Cit9IF9fdHJhbnNwYXJlbnRfXzsKKwogI2RlZmluZSBJTlRSRU1BUF9MRU5HVEgg
MHhCCiAjZGVmaW5lIElOVFJFTUFQX0VOVFJJRVMgKDEgPDwgSU5UUkVNQVBfTEVOR1RIKQogCkBA
IC01OCw2ICs4NCwxMyBAQCB1bnNpZ25lZCBpbnQgbnJfaW9hcGljX3NiZGY7CiAKIHN0YXRpYyB2
b2lkIGR1bXBfaW50cmVtYXBfdGFibGVzKHVuc2lnbmVkIGNoYXIga2V5KTsKIAorc3RhdGljIHVu
c2lnbmVkIGludCBfX2luaXQgaW50cmVtYXBfdGFibGVfb3JkZXIoY29uc3Qgc3RydWN0IGFtZF9p
b21tdSAqaW9tbXUpCit7CisgICAgcmV0dXJuIGlvbW11LT5jdHJsLmdhX2VuCisgICAgICAgICAg
ID8gZ2V0X29yZGVyX2Zyb21fYnl0ZXMoSU5UUkVNQVBfRU5UUklFUyAqIHNpemVvZih1bmlvbiBp
cnRlMTI4KSkKKyAgICAgICAgICAgOiBnZXRfb3JkZXJfZnJvbV9ieXRlcyhJTlRSRU1BUF9FTlRS
SUVTICogc2l6ZW9mKHVuaW9uIGlydGUzMikpOworfQorCiB1bnNpZ25lZCBpbnQgaW9hcGljX2lk
X3RvX2luZGV4KHVuc2lnbmVkIGludCBhcGljX2lkKQogewogICAgIHVuc2lnbmVkIGludCBpZHg7
CkBAIC0xMzIsNyArMTY1LDEwIEBAIHN0YXRpYyB1bmlvbiBpcnRlX3B0ciBnZXRfaW50cmVtYXBf
ZW50cnkKIAogICAgIEFTU0VSVCh0YWJsZS5wdHIgJiYgKGluZGV4IDwgSU5UUkVNQVBfRU5UUklF
UykpOwogCi0gICAgdGFibGUucHRyMzIgKz0gaW5kZXg7CisgICAgaWYgKCBpb21tdS0+Y3RybC5n
YV9lbiApCisgICAgICAgIHRhYmxlLnB0cjEyOCArPSBpbmRleDsKKyAgICBlbHNlCisgICAgICAg
IHRhYmxlLnB0cjMyICs9IGluZGV4OwogCiAgICAgcmV0dXJuIHRhYmxlOwogfQpAQCAtMTQyLDcg
KzE3OCwxNSBAQCBzdGF0aWMgdm9pZCBmcmVlX2ludHJlbWFwX2VudHJ5KGNvbnN0IHN0CiB7CiAg
ICAgdW5pb24gaXJ0ZV9wdHIgZW50cnkgPSBnZXRfaW50cmVtYXBfZW50cnkoaW9tbXUsIGJkZiwg
aW5kZXgpOwogCi0gICAgQUNDRVNTX09OQ0UoZW50cnkucHRyMzItPnJhd1swXSkgPSAwOworICAg
IGlmICggaW9tbXUtPmN0cmwuZ2FfZW4gKQorICAgIHsKKyAgICAgICAgQUNDRVNTX09OQ0UoZW50
cnkucHRyMTI4LT5yYXdbMF0pID0gMDsKKyAgICAgICAgLyogTG93IGhhbGYgKGNvbnRhaW5pbmcg
UmVtYXBFbikgbmVlZHMgdG8gYmUgY2xlYXJlZCBmaXJzdC4gKi8KKyAgICAgICAgYmFycmllcigp
OworICAgICAgICBlbnRyeS5wdHIxMjgtPnJhd1sxXSA9IDA7CisgICAgfQorICAgIGVsc2UKKyAg
ICAgICAgQUNDRVNTX09OQ0UoZW50cnkucHRyMzItPnJhd1swXSkgPSAwOwogCiAgICAgX19jbGVh
cl9iaXQoaW5kZXgsIGdldF9pdnJzX21hcHBpbmdzKGlvbW11LT5zZWcpW2JkZl0uaW50cmVtYXBf
aW51c2UpOwogfQpAQCAtMTUyLDE2ICsxOTYsNDAgQEAgc3RhdGljIHZvaWQgdXBkYXRlX2ludHJl
bWFwX2VudHJ5KGNvbnN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWdu
ZWQgaW50IHZlY3RvciwgdW5zaWduZWQgaW50IGludF90eXBlLAogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBkZXN0X21vZGUsIHVuc2lnbmVkIGludCBkZXN0
KQogewotICAgIHN0cnVjdCBpcnRlX2Jhc2ljIGJhc2ljID0gewotICAgICAgICAucmVtYXBfZW4g
PSB0cnVlLAotICAgICAgICAuaW50X3R5cGUgPSBpbnRfdHlwZSwKLSAgICAgICAgLmRtID0gZGVz
dF9tb2RlLAotICAgICAgICAuZGVzdCA9IGRlc3QsCi0gICAgICAgIC52ZWN0b3IgPSB2ZWN0b3Is
Ci0gICAgfTsKKyAgICBpZiAoIGlvbW11LT5jdHJsLmdhX2VuICkKKyAgICB7CisgICAgICAgIHN0
cnVjdCBpcnRlX2Z1bGwgZnVsbCA9IHsKKyAgICAgICAgICAgIC5yZW1hcF9lbiA9IHRydWUsCisg
ICAgICAgICAgICAuaW50X3R5cGUgPSBpbnRfdHlwZSwKKyAgICAgICAgICAgIC5kbSA9IGRlc3Rf
bW9kZSwKKyAgICAgICAgICAgIC5kZXN0X2xvID0gZGVzdCwKKyAgICAgICAgICAgIC5kZXN0X2hp
ID0gZGVzdCA+PiAyNCwKKyAgICAgICAgICAgIC52ZWN0b3IgPSB2ZWN0b3IsCisgICAgICAgIH07
CisKKyAgICAgICAgQUNDRVNTX09OQ0UoZW50cnkucHRyMTI4LT5yYXdbMF0pID0gMDsKKyAgICAg
ICAgLyogTG93IGhhbGYsIGluIHBhcnRpY3VsYXIgUmVtYXBFbiwgbmVlZHMgdG8gYmUgY2xlYXJl
ZCBmaXJzdC4gKi8KKyAgICAgICAgYmFycmllcigpOworICAgICAgICBlbnRyeS5wdHIxMjgtPnJh
d1sxXSA9CisgICAgICAgICAgICBjb250YWluZXJfb2YoJmZ1bGwsIHVuaW9uIGlydGUxMjgsIGZ1
bGwpLT5yYXdbMV07CisgICAgICAgIC8qIEhpZ2ggaGFsZiBuZWVkcyB0byBiZSBzZXQgYmVmb3Jl
IGxvdyBvbmUgKGNvbnRhaW5pbmcgUmVtYXBFbikuICovCisgICAgICAgIGJhcnJpZXIoKTsKKyAg
ICAgICAgQUNDRVNTX09OQ0UoZW50cnkucHRyMTI4LT5yYXdbMF0pID0KKyAgICAgICAgICAgIGNv
bnRhaW5lcl9vZigmZnVsbCwgdW5pb24gaXJ0ZTEyOCwgZnVsbCktPnJhd1swXTsKKyAgICB9Cisg
ICAgZWxzZQorICAgIHsKKyAgICAgICAgc3RydWN0IGlydGVfYmFzaWMgYmFzaWMgPSB7CisgICAg
ICAgICAgICAucmVtYXBfZW4gPSB0cnVlLAorICAgICAgICAgICAgLmludF90eXBlID0gaW50X3R5
cGUsCisgICAgICAgICAgICAuZG0gPSBkZXN0X21vZGUsCisgICAgICAgICAgICAuZGVzdCA9IGRl
c3QsCisgICAgICAgICAgICAudmVjdG9yID0gdmVjdG9yLAorICAgICAgICB9OwogCi0gICAgQUND
RVNTX09OQ0UoZW50cnkucHRyMzItPnJhd1swXSkgPQotICAgICAgICBjb250YWluZXJfb2YoJmJh
c2ljLCB1bmlvbiBpcnRlMzIsIGJhc2ljKS0+cmF3WzBdOworICAgICAgICBBQ0NFU1NfT05DRShl
bnRyeS5wdHIzMi0+cmF3WzBdKSA9CisgICAgICAgICAgICBjb250YWluZXJfb2YoJmJhc2ljLCB1
bmlvbiBpcnRlMzIsIGJhc2ljKS0+cmF3WzBdOworICAgIH0KIH0KIAogc3RhdGljIGlubGluZSBp
bnQgZ2V0X3J0ZV9pbmRleChjb25zdCBzdHJ1Y3QgSU9fQVBJQ19yb3V0ZV9lbnRyeSAqcnRlKQpA
QCAtMTc1LDYgKzI0MywxMSBAQCBzdGF0aWMgaW5saW5lIHZvaWQgc2V0X3J0ZV9pbmRleChzdHJ1
Y3QKICAgICBydGUtPmRlbGl2ZXJ5X21vZGUgPSBvZmZzZXQgPj4gODsKIH0KIAorc3RhdGljIGlu
bGluZSB1bnNpZ25lZCBpbnQgZ2V0X2Z1bGxfZGVzdChjb25zdCB1bmlvbiBpcnRlMTI4ICplbnRy
eSkKK3sKKyAgICByZXR1cm4gZW50cnktPmZ1bGwuZGVzdF9sbyB8ICgodW5zaWduZWQgaW50KWVu
dHJ5LT5mdWxsLmRlc3RfaGkgPDwgMjQpOworfQorCiBzdGF0aWMgaW50IHVwZGF0ZV9pbnRyZW1h
cF9lbnRyeV9mcm9tX2lvYXBpYygKICAgICBpbnQgYmRmLAogICAgIHN0cnVjdCBhbWRfaW9tbXUg
KmlvbW11LApAQCAtMTg0LDEwICsyNTcsMTEgQEAgc3RhdGljIGludCB1cGRhdGVfaW50cmVtYXBf
ZW50cnlfZnJvbV9pbwogewogICAgIHVuc2lnbmVkIGxvbmcgZmxhZ3M7CiAgICAgdW5pb24gaXJ0
ZV9wdHIgZW50cnk7Ci0gICAgdTggZGVsaXZlcnlfbW9kZSwgZGVzdCwgdmVjdG9yLCBkZXN0X21v
ZGU7CisgICAgdWludDhfdCBkZWxpdmVyeV9tb2RlLCB2ZWN0b3IsIGRlc3RfbW9kZTsKICAgICBp
bnQgcmVxX2lkOwogICAgIHNwaW5sb2NrX3QgKmxvY2s7Ci0gICAgdW5zaWduZWQgaW50IG9mZnNl
dDsKKyAgICB1bnNpZ25lZCBpbnQgZGVzdCwgb2Zmc2V0OworICAgIGJvb2wgZnJlc2ggPSBmYWxz
ZTsKIAogICAgIHJlcV9pZCA9IGdldF9pbnRyZW1hcF9yZXF1ZXN0b3JfaWQoaW9tbXUtPnNlZywg
YmRmKTsKICAgICBsb2NrID0gZ2V0X2ludHJlbWFwX2xvY2soaW9tbXUtPnNlZywgcmVxX2lkKTsK
QEAgLTE5NSw3ICsyNjksNyBAQCBzdGF0aWMgaW50IHVwZGF0ZV9pbnRyZW1hcF9lbnRyeV9mcm9t
X2lvCiAgICAgZGVsaXZlcnlfbW9kZSA9IHJ0ZS0+ZGVsaXZlcnlfbW9kZTsKICAgICB2ZWN0b3Ig
PSBydGUtPnZlY3RvcjsKICAgICBkZXN0X21vZGUgPSBydGUtPmRlc3RfbW9kZTsKLSAgICBkZXN0
ID0gcnRlLT5kZXN0LmxvZ2ljYWwubG9naWNhbF9kZXN0OworICAgIGRlc3QgPSB4MmFwaWNfZW5h
YmxlZCA/IHJ0ZS0+ZGVzdC5kZXN0MzIgOiBydGUtPmRlc3QubG9naWNhbC5sb2dpY2FsX2Rlc3Q7
CiAKICAgICBzcGluX2xvY2tfaXJxc2F2ZShsb2NrLCBmbGFncyk7CiAKQEAgLTIxMCwyNSArMjg0
LDQwIEBAIHN0YXRpYyBpbnQgdXBkYXRlX2ludHJlbWFwX2VudHJ5X2Zyb21faW8KICAgICAgICAg
ICAgIHJldHVybiAtRU5PU1BDOwogICAgICAgICB9CiAgICAgICAgICppbmRleCA9IG9mZnNldDsK
LSAgICAgICAgbG9fdXBkYXRlID0gMTsKKyAgICAgICAgZnJlc2ggPSB0cnVlOwogICAgIH0KIAog
ICAgIGVudHJ5ID0gZ2V0X2ludHJlbWFwX2VudHJ5KGlvbW11LCByZXFfaWQsIG9mZnNldCk7Ci0g
ICAgaWYgKCAhbG9fdXBkYXRlICkKKyAgICBpZiAoIGZyZXNoICkKKyAgICAgICAgLyogbm90aGlu
ZyAqLzsKKyAgICBlbHNlIGlmICggIWxvX3VwZGF0ZSApCiAgICAgewogICAgICAgICAvKgogICAg
ICAgICAgKiBMb3cgaGFsZiBvZiBpbmNvbWluZyBSVEUgaXMgYWxyZWFkeSBpbiByZW1hcHBlZCBm
b3JtYXQsCiAgICAgICAgICAqIHNvIG5lZWQgdG8gcmVjb3ZlciB2ZWN0b3IgYW5kIGRlbGl2ZXJ5
IG1vZGUgZnJvbSBJUlRFLgogICAgICAgICAgKi8KICAgICAgICAgQVNTRVJUKGdldF9ydGVfaW5k
ZXgocnRlKSA9PSBvZmZzZXQpOwotICAgICAgICB2ZWN0b3IgPSBlbnRyeS5wdHIzMi0+YmFzaWMu
dmVjdG9yOworICAgICAgICBpZiAoIGlvbW11LT5jdHJsLmdhX2VuICkKKyAgICAgICAgICAgIHZl
Y3RvciA9IGVudHJ5LnB0cjEyOC0+ZnVsbC52ZWN0b3I7CisgICAgICAgIGVsc2UKKyAgICAgICAg
ICAgIHZlY3RvciA9IGVudHJ5LnB0cjMyLT5iYXNpYy52ZWN0b3I7CisgICAgICAgIC8qIFRoZSBJ
bnRUeXBlIGZpZWxkcyBtYXRjaCBmb3IgYm90aCBmb3JtYXRzLiAqLwogICAgICAgICBkZWxpdmVy
eV9tb2RlID0gZW50cnkucHRyMzItPmJhc2ljLmludF90eXBlOwogICAgIH0KKyAgICBlbHNlIGlm
ICggeDJhcGljX2VuYWJsZWQgKQorICAgIHsKKyAgICAgICAgLyoKKyAgICAgICAgICogSGlnaCBo
YWxmIG9mIGluY29taW5nIFJURSB3YXMgcmVhZCBmcm9tIHRoZSBJL08gQVBJQyBhbmQgaGVuY2Ug
bWF5CisgICAgICAgICAqIG5vdCBob2xkIHRoZSBmdWxsIGRlc3RpbmF0aW9uLCBzbyBuZWVkIHRv
IHJlY292ZXIgZnVsbCBkZXN0aW5hdGlvbgorICAgICAgICAgKiBmcm9tIElSVEUuCisgICAgICAg
ICAqLworICAgICAgICBkZXN0ID0gZ2V0X2Z1bGxfZGVzdChlbnRyeS5wdHIxMjgpOworICAgIH0K
ICAgICB1cGRhdGVfaW50cmVtYXBfZW50cnkoaW9tbXUsIGVudHJ5LCB2ZWN0b3IsIGRlbGl2ZXJ5
X21vZGUsIGRlc3RfbW9kZSwgZGVzdCk7CiAKICAgICBzcGluX3VubG9ja19pcnFyZXN0b3JlKGxv
Y2ssIGZsYWdzKTsKIAotICAgIGlmICggaW9tbXUtPmVuYWJsZWQgKQorICAgIGlmICggaW9tbXUt
PmVuYWJsZWQgJiYgIWZyZXNoICkKICAgICB7CiAgICAgICAgIHNwaW5fbG9ja19pcnFzYXZlKCZp
b21tdS0+bG9jaywgZmxhZ3MpOwogICAgICAgICBhbWRfaW9tbXVfZmx1c2hfaW50cmVtYXAoaW9t
bXUsIHJlcV9pZCk7CkBAIC0yODYsNiArMzc1LDE4IEBAIGludCBfX2luaXQgYW1kX2lvbW11X3Nl
dHVwX2lvYXBpY19yZW1hcHAKICAgICAgICAgICAgIGRlc3RfbW9kZSA9IHJ0ZS5kZXN0X21vZGU7
CiAgICAgICAgICAgICBkZXN0ID0gcnRlLmRlc3QubG9naWNhbC5sb2dpY2FsX2Rlc3Q7CiAKKyAg
ICAgICAgICAgIGlmICggaW9tbXUtPmN0cmwueHRfZW4gKQorICAgICAgICAgICAgeworICAgICAg
ICAgICAgICAgIC8qCisgICAgICAgICAgICAgICAgICogSW4geDJBUElDIG1vZGUgd2UgaGF2ZSBu
byB3YXkgb2YgZGlzY292ZXJpbmcgdGhlIGhpZ2ggMjQKKyAgICAgICAgICAgICAgICAgKiBiaXRz
IG9mIHRoZSBkZXN0aW5hdGlvbiBvZiBhbiBhbHJlYWR5IGVuYWJsZWQgaW50ZXJydXB0LgorICAg
ICAgICAgICAgICAgICAqIFdlIGNvbWUgaGVyZSBlYXJsaWVyIHRoYW4gZm9yIHhBUElDIG1vZGUs
IHNvIG5vIGludGVycnVwdHMKKyAgICAgICAgICAgICAgICAgKiBzaG91bGQgaGF2ZSBiZWVuIHNl
dCB1cCBiZWZvcmUuCisgICAgICAgICAgICAgICAgICovCisgICAgICAgICAgICAgICAgQU1EX0lP
TU1VX0RFQlVHKCJVbm1hc2tlZCBJTy1BUElDIyV1IGVudHJ5ICV1IGluIHgyQVBJQyBtb2RlXG4i
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJT19BUElDX0lEKGFwaWMpLCBwaW4p
OworICAgICAgICAgICAgfQorCiAgICAgICAgICAgICBzcGluX2xvY2tfaXJxc2F2ZShsb2NrLCBm
bGFncyk7CiAgICAgICAgICAgICBvZmZzZXQgPSBhbGxvY19pbnRyZW1hcF9lbnRyeShzZWcsIHJl
cV9pZCwgMSk7CiAgICAgICAgICAgICBCVUdfT04ob2Zmc2V0ID49IElOVFJFTUFQX0VOVFJJRVMp
OwpAQCAtMzIwLDcgKzQyMSw4IEBAIHZvaWQgYW1kX2lvbW11X2lvYXBpY191cGRhdGVfaXJlKAog
ICAgIHN0cnVjdCBJT19BUElDX3JvdXRlX2VudHJ5IG5ld19ydGUgPSB7IDAgfTsKICAgICB1bnNp
Z25lZCBpbnQgcnRlX2xvID0gKHJlZyAmIDEpID8gcmVnIC0gMSA6IHJlZzsKICAgICB1bnNpZ25l
ZCBpbnQgcGluID0gKHJlZyAtIDB4MTApIC8gMjsKLSAgICBpbnQgc2F2ZWRfbWFzaywgc2VnLCBi
ZGYsIHJjOworICAgIGludCBzZWcsIGJkZiwgcmM7CisgICAgYm9vbCBzYXZlZF9tYXNrLCBmcmVz
aCA9IGZhbHNlOwogICAgIHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11OwogICAgIHVuc2lnbmVkIGlu
dCBpZHg7CiAKQEAgLTM2MiwxMiArNDY0LDIyIEBAIHZvaWQgYW1kX2lvbW11X2lvYXBpY191cGRh
dGVfaXJlKAogICAgICAgICAqKCgodTMyICopJm5ld19ydGUpICsgMSkgPSB2YWx1ZTsKICAgICB9
CiAKLSAgICBpZiAoIG5ld19ydGUubWFzayAmJgotICAgICAgICAgaW9hcGljX3NiZGZbaWR4XS5w
aW5fMl9pZHhbcGluXSA+PSBJTlRSRU1BUF9FTlRSSUVTICkKKyAgICBpZiAoIGlvYXBpY19zYmRm
W2lkeF0ucGluXzJfaWR4W3Bpbl0gPj0gSU5UUkVNQVBfRU5UUklFUyApCiAgICAgewogICAgICAg
ICBBU1NFUlQoc2F2ZWRfbWFzayk7Ci0gICAgICAgIF9faW9fYXBpY193cml0ZShhcGljLCByZWcs
IHZhbHVlKTsKLSAgICAgICAgcmV0dXJuOworCisgICAgICAgIC8qCisgICAgICAgICAqIFRoZXJl
J3Mgbm93aGVyZSBleGNlcHQgdGhlIElSVEUgdG8gc3RvcmUgYSBmdWxsIDMyLWJpdCBkZXN0aW5h
dGlvbiwKKyAgICAgICAgICogc28gd2UgbWF5IG5vdCBieXBhc3MgZW50cnkgYWxsb2NhdGlvbiBh
bmQgdXBkYXRpbmcgb2YgdGhlIGxvdyBSVEUKKyAgICAgICAgICogaGFsZiBpbiB0aGUgKHVzdWFs
KSBjYXNlIG9mIHRoZSBoaWdoIFJURSBoYWxmIGdldHRpbmcgd3JpdHRlbiBmaXJzdC4KKyAgICAg
ICAgICovCisgICAgICAgIGlmICggbmV3X3J0ZS5tYXNrICYmICF4MmFwaWNfZW5hYmxlZCApCisg
ICAgICAgIHsKKyAgICAgICAgICAgIF9faW9fYXBpY193cml0ZShhcGljLCByZWcsIHZhbHVlKTsK
KyAgICAgICAgICAgIHJldHVybjsKKyAgICAgICAgfQorCisgICAgICAgIGZyZXNoID0gdHJ1ZTsK
ICAgICB9CiAKICAgICAvKiBtYXNrIHRoZSBpbnRlcnJ1cHQgd2hpbGUgd2UgY2hhbmdlIHRoZSBp
bnRyZW1hcCB0YWJsZSAqLwpAQCAtMzk2LDggKzUwOCwxMiBAQCB2b2lkIGFtZF9pb21tdV9pb2Fw
aWNfdXBkYXRlX2lyZSgKICAgICBpZiAoIHJlZyA9PSBydGVfbG8gKQogICAgICAgICByZXR1cm47
CiAKLSAgICAvKiB1bm1hc2sgdGhlIGludGVycnVwdCBhZnRlciB3ZSBoYXZlIHVwZGF0ZWQgdGhl
IGludHJlbWFwIHRhYmxlICovCi0gICAgaWYgKCAhc2F2ZWRfbWFzayApCisgICAgLyoKKyAgICAg
KiBVbm1hc2sgdGhlIGludGVycnVwdCBhZnRlciB3ZSBoYXZlIHVwZGF0ZWQgdGhlIGludHJlbWFw
IHRhYmxlLiBBbHNvCisgICAgICogd3JpdGUgdGhlIGxvdyBoYWxmIGlmIGEgZnJlc2ggZW50cnkg
d2FzIGFsbG9jYXRlZCBmb3IgYSBoaWdoIGhhbGYKKyAgICAgKiB1cGRhdGUgaW4geDJBUElDIG1v
ZGUuCisgICAgICovCisgICAgaWYgKCAhc2F2ZWRfbWFzayB8fCAoeDJhcGljX2VuYWJsZWQgJiYg
ZnJlc2gpICkKICAgICB7CiAgICAgICAgIG9sZF9ydGUubWFzayA9IHNhdmVkX21hc2s7CiAgICAg
ICAgIF9faW9fYXBpY193cml0ZShhcGljLCBydGVfbG8sICooKHUzMiAqKSZvbGRfcnRlKSk7CkBA
IC00MTEsMzEgKzUyNyw0MCBAQCB1bnNpZ25lZCBpbnQgYW1kX2lvbW11X3JlYWRfaW9hcGljX2Zy
b21fCiAgICAgdW5zaWduZWQgaW50IG9mZnNldDsKICAgICB1bnNpZ25lZCBpbnQgdmFsID0gX19p
b19hcGljX3JlYWQoYXBpYywgcmVnKTsKICAgICB1bnNpZ25lZCBpbnQgcGluID0gKHJlZyAtIDB4
MTApIC8gMjsKKyAgICB1aW50MTZfdCBzZWcsIGJkZiwgcmVxX2lkOworICAgIGNvbnN0IHN0cnVj
dCBhbWRfaW9tbXUgKmlvbW11OworICAgIHVuaW9uIGlydGVfcHRyIGVudHJ5OwogCiAgICAgaWR4
ID0gaW9hcGljX2lkX3RvX2luZGV4KElPX0FQSUNfSUQoYXBpYykpOwogICAgIGlmICggaWR4ID09
IE1BWF9JT19BUElDUyApCiAgICAgICAgIHJldHVybiB2YWw7CiAKICAgICBvZmZzZXQgPSBpb2Fw
aWNfc2JkZltpZHhdLnBpbl8yX2lkeFtwaW5dOworICAgIGlmICggb2Zmc2V0ID49IElOVFJFTUFQ
X0VOVFJJRVMgKQorICAgICAgICByZXR1cm4gdmFsOwogCi0gICAgaWYgKCAhKHJlZyAmIDEpICYm
IG9mZnNldCA8IElOVFJFTUFQX0VOVFJJRVMgKQotICAgIHsKLSAgICAgICAgdTE2IGJkZiA9IGlv
YXBpY19zYmRmW2lkeF0uYmRmOwotICAgICAgICB1MTYgc2VnID0gaW9hcGljX3NiZGZbaWR4XS5z
ZWc7Ci0gICAgICAgIHUxNiByZXFfaWQgPSBnZXRfaW50cmVtYXBfcmVxdWVzdG9yX2lkKHNlZywg
YmRmKTsKLSAgICAgICAgY29uc3Qgc3RydWN0IGFtZF9pb21tdSAqaW9tbXUgPSBmaW5kX2lvbW11
X2Zvcl9kZXZpY2Uoc2VnLCBiZGYpOwotICAgICAgICB1bmlvbiBpcnRlX3B0ciBlbnRyeTsKKyAg
ICBzZWcgPSBpb2FwaWNfc2JkZltpZHhdLnNlZzsKKyAgICBiZGYgPSBpb2FwaWNfc2JkZltpZHhd
LmJkZjsKKyAgICBpb21tdSA9IGZpbmRfaW9tbXVfZm9yX2RldmljZShzZWcsIGJkZik7CisgICAg
aWYgKCAhaW9tbXUgKQorICAgICAgICByZXR1cm4gdmFsOworICAgIHJlcV9pZCA9IGdldF9pbnRy
ZW1hcF9yZXF1ZXN0b3JfaWQoc2VnLCBiZGYpOworICAgIGVudHJ5ID0gZ2V0X2ludHJlbWFwX2Vu
dHJ5KGlvbW11LCByZXFfaWQsIG9mZnNldCk7CiAKLSAgICAgICAgaWYgKCAhaW9tbXUgKQotICAg
ICAgICAgICAgcmV0dXJuIHZhbDsKKyAgICBpZiAoICEocmVnICYgMSkgKQorICAgIHsKICAgICAg
ICAgQVNTRVJUKG9mZnNldCA9PSAodmFsICYgKElOVFJFTUFQX0VOVFJJRVMgLSAxKSkpOwotICAg
ICAgICBlbnRyeSA9IGdldF9pbnRyZW1hcF9lbnRyeShpb21tdSwgcmVxX2lkLCBvZmZzZXQpOwog
ICAgICAgICB2YWwgJj0gfihJTlRSRU1BUF9FTlRSSUVTIC0gMSk7CisgICAgICAgIC8qIFRoZSBJ
bnRUeXBlIGZpZWxkcyBtYXRjaCBmb3IgYm90aCBmb3JtYXRzLiAqLwogICAgICAgICB2YWwgfD0g
TUFTS19JTlNSKGVudHJ5LnB0cjMyLT5iYXNpYy5pbnRfdHlwZSwKICAgICAgICAgICAgICAgICAg
ICAgICAgICBJT19BUElDX1JFRElSX0RFTElWX01PREVfTUFTSyk7Ci0gICAgICAgIHZhbCB8PSBN
QVNLX0lOU1IoZW50cnkucHRyMzItPmJhc2ljLnZlY3RvciwKKyAgICAgICAgdmFsIHw9IE1BU0tf
SU5TUihpb21tdS0+Y3RybC5nYV9lbgorICAgICAgICAgICAgICAgICAgICAgICAgID8gZW50cnku
cHRyMTI4LT5mdWxsLnZlY3RvcgorICAgICAgICAgICAgICAgICAgICAgICAgIDogZW50cnkucHRy
MzItPmJhc2ljLnZlY3RvciwKICAgICAgICAgICAgICAgICAgICAgICAgICBJT19BUElDX1JFRElS
X1ZFQ1RPUl9NQVNLKTsKICAgICB9CisgICAgZWxzZSBpZiAoIHgyYXBpY19lbmFibGVkICkKKyAg
ICAgICAgdmFsID0gZ2V0X2Z1bGxfZGVzdChlbnRyeS5wdHIxMjgpOwogCiAgICAgcmV0dXJuIHZh
bDsKIH0KQEAgLTQ0Nyw5ICs1NzIsOSBAQCBzdGF0aWMgaW50IHVwZGF0ZV9pbnRyZW1hcF9lbnRy
eV9mcm9tX21zCiAgICAgdW5zaWduZWQgbG9uZyBmbGFnczsKICAgICB1bmlvbiBpcnRlX3B0ciBl
bnRyeTsKICAgICB1MTYgcmVxX2lkLCBhbGlhc19pZDsKLSAgICB1OCBkZWxpdmVyeV9tb2RlLCBk
ZXN0LCB2ZWN0b3IsIGRlc3RfbW9kZTsKKyAgICB1aW50OF90IGRlbGl2ZXJ5X21vZGUsIHZlY3Rv
ciwgZGVzdF9tb2RlOwogICAgIHNwaW5sb2NrX3QgKmxvY2s7Ci0gICAgdW5zaWduZWQgaW50IG9m
ZnNldCwgaTsKKyAgICB1bnNpZ25lZCBpbnQgZGVzdCwgb2Zmc2V0LCBpOwogCiAgICAgcmVxX2lk
ID0gZ2V0X2RtYV9yZXF1ZXN0b3JfaWQoaW9tbXUtPnNlZywgYmRmKTsKICAgICBhbGlhc19pZCA9
IGdldF9pbnRyZW1hcF9yZXF1ZXN0b3JfaWQoaW9tbXUtPnNlZywgYmRmKTsKQEAgLTQ3MCw3ICs1
OTUsMTIgQEAgc3RhdGljIGludCB1cGRhdGVfaW50cmVtYXBfZW50cnlfZnJvbV9tcwogICAgIGRl
c3RfbW9kZSA9IChtc2ctPmFkZHJlc3NfbG8gPj4gTVNJX0FERFJfREVTVE1PREVfU0hJRlQpICYg
MHgxOwogICAgIGRlbGl2ZXJ5X21vZGUgPSAobXNnLT5kYXRhID4+IE1TSV9EQVRBX0RFTElWRVJZ
X01PREVfU0hJRlQpICYgMHgxOwogICAgIHZlY3RvciA9IChtc2ctPmRhdGEgPj4gTVNJX0RBVEFf
VkVDVE9SX1NISUZUKSAmIE1TSV9EQVRBX1ZFQ1RPUl9NQVNLOwotICAgIGRlc3QgPSAobXNnLT5h
ZGRyZXNzX2xvID4+IE1TSV9BRERSX0RFU1RfSURfU0hJRlQpICYgMHhmZjsKKworICAgIGlmICgg
eDJhcGljX2VuYWJsZWQgKQorICAgICAgICBkZXN0ID0gbXNnLT5kZXN0MzI7CisgICAgZWxzZQor
ICAgICAgICBkZXN0ID0gTUFTS19FWFRSKG1zZy0+YWRkcmVzc19sbywgTVNJX0FERFJfREVTVF9J
RF9NQVNLKTsKKwogICAgIG9mZnNldCA9ICpyZW1hcF9pbmRleDsKICAgICBpZiAoIG9mZnNldCA+
PSBJTlRSRU1BUF9FTlRSSUVTICkKICAgICB7CkBAIC02MTYsMTAgKzc0NiwyMSBAQCB2b2lkIGFt
ZF9pb21tdV9yZWFkX21zaV9mcm9tX2lyZSgKICAgICB9CiAKICAgICBtc2ctPmRhdGEgJj0gfihJ
TlRSRU1BUF9FTlRSSUVTIC0gMSk7CisgICAgLyogVGhlIEludFR5cGUgZmllbGRzIG1hdGNoIGZv
ciBib3RoIGZvcm1hdHMuICovCiAgICAgbXNnLT5kYXRhIHw9IE1BU0tfSU5TUihlbnRyeS5wdHIz
Mi0+YmFzaWMuaW50X3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0lfREFUQV9E
RUxJVkVSWV9NT0RFX01BU0spOwotICAgIG1zZy0+ZGF0YSB8PSBNQVNLX0lOU1IoZW50cnkucHRy
MzItPmJhc2ljLnZlY3RvciwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TSV9EQVRBX1ZF
Q1RPUl9NQVNLKTsKKyAgICBpZiAoIGlvbW11LT5jdHJsLmdhX2VuICkKKyAgICB7CisgICAgICAg
IG1zZy0+ZGF0YSB8PSBNQVNLX0lOU1IoZW50cnkucHRyMTI4LT5mdWxsLnZlY3RvciwKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBNU0lfREFUQV9WRUNUT1JfTUFTSyk7CisgICAgICAg
IG1zZy0+ZGVzdDMyID0gZ2V0X2Z1bGxfZGVzdChlbnRyeS5wdHIxMjgpOworICAgIH0KKyAgICBl
bHNlCisgICAgeworICAgICAgICBtc2ctPmRhdGEgfD0gTUFTS19JTlNSKGVudHJ5LnB0cjMyLT5i
YXNpYy52ZWN0b3IsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNJX0RBVEFfVkVD
VE9SX01BU0spOworICAgICAgICBtc2ctPmRlc3QzMiA9IGVudHJ5LnB0cjMyLT5iYXNpYy5kZXN0
OworICAgIH0KIH0KIAogaW50IF9faW5pdCBhbWRfaW9tbXVfZnJlZV9pbnRyZW1hcF90YWJsZSgK
QEAgLTYzMSw3ICs3NzIsNyBAQCBpbnQgX19pbml0IGFtZF9pb21tdV9mcmVlX2ludHJlbWFwX3Rh
YmxlCiAKICAgICBpZiAoIHRiICkKICAgICB7Ci0gICAgICAgIF9fZnJlZV9hbWRfaW9tbXVfdGFi
bGVzKHRiLCBJTlRSRU1BUF9UQUJMRV9PUkRFUik7CisgICAgICAgIF9fZnJlZV9hbWRfaW9tbXVf
dGFibGVzKHRiLCBpbnRyZW1hcF90YWJsZV9vcmRlcihpb21tdSkpOwogICAgICAgICBpdnJzX21h
cHBpbmctPmludHJlbWFwX3RhYmxlID0gTlVMTDsKICAgICB9CiAKQEAgLTY0MSwxMCArNzgyLDEw
IEBAIGludCBfX2luaXQgYW1kX2lvbW11X2ZyZWVfaW50cmVtYXBfdGFibGUKIHZvaWQgKl9faW5p
dCBhbWRfaW9tbXVfYWxsb2NfaW50cmVtYXBfdGFibGUoCiAgICAgY29uc3Qgc3RydWN0IGFtZF9p
b21tdSAqaW9tbXUsIHVuc2lnbmVkIGxvbmcgKippbnVzZV9tYXApCiB7Ci0gICAgdm9pZCAqdGI7
Ci0gICAgdGIgPSBfX2FsbG9jX2FtZF9pb21tdV90YWJsZXMoSU5UUkVNQVBfVEFCTEVfT1JERVIp
OworICAgIHZvaWQgKnRiID0gX19hbGxvY19hbWRfaW9tbXVfdGFibGVzKGludHJlbWFwX3RhYmxl
X29yZGVyKGlvbW11KSk7CisKICAgICBCVUdfT04odGIgPT0gTlVMTCk7Ci0gICAgbWVtc2V0KHRi
LCAwLCBQQUdFX1NJWkUgKiAoMVVMIDw8IElOVFJFTUFQX1RBQkxFX09SREVSKSk7CisgICAgbWVt
c2V0KHRiLCAwLCBQQUdFX1NJWkUgPDwgaW50cmVtYXBfdGFibGVfb3JkZXIoaW9tbXUpKTsKICAg
ICAqaW51c2VfbWFwID0geHphbGxvY19hcnJheSh1bnNpZ25lZCBsb25nLCBCSVRTX1RPX0xPTkdT
KElOVFJFTUFQX0VOVFJJRVMpKTsKICAgICBCVUdfT04oKmludXNlX21hcCA9PSBOVUxMKTsKICAg
ICByZXR1cm4gdGI7CkBAIC02ODUsMTggKzgyNiwyOSBAQCBpbnQgX19pbml0IGFtZF9zZXR1cF9o
cGV0X21zaShzdHJ1Y3QgbXNpCiAgICAgcmV0dXJuIHJjOwogfQogCi1zdGF0aWMgdm9pZCBkdW1w
X2ludHJlbWFwX3RhYmxlKGNvbnN0IHUzMiAqdGFibGUpCitzdGF0aWMgdm9pZCBkdW1wX2ludHJl
bWFwX3RhYmxlKGNvbnN0IHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11LAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB1bmlvbiBpcnRlX2NwdHIgdGJsKQogewotICAgIHUzMiBjb3VudDsK
KyAgICB1bnNpZ25lZCBpbnQgY291bnQ7CiAKLSAgICBpZiAoICF0YWJsZSApCisgICAgaWYgKCAh
dGJsLnB0ciApCiAgICAgICAgIHJldHVybjsKIAogICAgIGZvciAoIGNvdW50ID0gMDsgY291bnQg
PCBJTlRSRU1BUF9FTlRSSUVTOyBjb3VudCsrICkKICAgICB7Ci0gICAgICAgIGlmICggIXRhYmxl
W2NvdW50XSApCi0gICAgICAgICAgICBjb250aW51ZTsKLSAgICAgICAgcHJpbnRrKCIgICAgSVJU
RVslMDN4XSAlMDh4XG4iLCBjb3VudCwgdGFibGVbY291bnRdKTsKKyAgICAgICAgaWYgKCBpb21t
dS0+Y3RybC5nYV9lbiApCisgICAgICAgIHsKKyAgICAgICAgICAgIGlmICggIXRibC5wdHIxMjhb
Y291bnRdLnJhd1swXSAmJiAhdGJsLnB0cjEyOFtjb3VudF0ucmF3WzFdICkKKyAgICAgICAgICAg
ICAgICBjb250aW51ZTsKKyAgICAgICAgICAgIHByaW50aygiICAgIElSVEVbJTAzeF0gJTAxNmx4
XyUwMTZseFxuIiwKKyAgICAgICAgICAgICAgICAgICBjb3VudCwgdGJsLnB0cjEyOFtjb3VudF0u
cmF3WzFdLCB0YmwucHRyMTI4W2NvdW50XS5yYXdbMF0pOworICAgICAgICB9CisgICAgICAgIGVs
c2UKKyAgICAgICAgeworICAgICAgICAgICAgaWYgKCAhdGJsLnB0cjMyW2NvdW50XS5yYXdbMF0g
KQorICAgICAgICAgICAgICAgIGNvbnRpbnVlOworICAgICAgICAgICAgcHJpbnRrKCIgICAgSVJU
RVslMDN4XSAlMDh4XG4iLCBjb3VudCwgdGJsLnB0cjMyW2NvdW50XS5yYXdbMF0pOworICAgICAg
ICB9CiAgICAgfQogfQogCkBAIC03MTQsNyArODY2LDcgQEAgc3RhdGljIGludCBkdW1wX2ludHJl
bWFwX21hcHBpbmcoY29uc3QgcwogICAgICAgICAgICBQQ0lfRlVOQyhpdnJzX21hcHBpbmctPmR0
ZV9yZXF1ZXN0b3JfaWQpKTsKIAogICAgIHNwaW5fbG9ja19pcnFzYXZlKCYoaXZyc19tYXBwaW5n
LT5pbnRyZW1hcF9sb2NrKSwgZmxhZ3MpOwotICAgIGR1bXBfaW50cmVtYXBfdGFibGUoaXZyc19t
YXBwaW5nLT5pbnRyZW1hcF90YWJsZSk7CisgICAgZHVtcF9pbnRyZW1hcF90YWJsZShpb21tdSwg
aXZyc19tYXBwaW5nLT5pbnRyZW1hcF90YWJsZSk7CiAgICAgc3Bpbl91bmxvY2tfaXJxcmVzdG9y
ZSgmKGl2cnNfbWFwcGluZy0+aW50cmVtYXBfbG9jayksIGZsYWdzKTsKIAogICAgIHJldHVybiAw
OwpAQCAtNzMxLDYgKzg4Myw4IEBAIHN0YXRpYyB2b2lkIGR1bXBfaW50cmVtYXBfdGFibGVzKHVu
c2lnbmUKICAgICBwcmludGsoIi0tLSBEdW1waW5nIFNoYXJlZCBJT01NVSBJbnRlcnJ1cHQgUmVt
YXBwaW5nIFRhYmxlIC0tLVxuIik7CiAKICAgICBzcGluX2xvY2tfaXJxc2F2ZSgmc2hhcmVkX2lu
dHJlbWFwX2xvY2ssIGZsYWdzKTsKLSAgICBkdW1wX2ludHJlbWFwX3RhYmxlKHNoYXJlZF9pbnRy
ZW1hcF90YWJsZSk7CisgICAgZHVtcF9pbnRyZW1hcF90YWJsZShsaXN0X2ZpcnN0X2VudHJ5KCZh
bWRfaW9tbXVfaGVhZCwgc3RydWN0IGFtZF9pb21tdSwKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgbGlzdCksCisgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZWRf
aW50cmVtYXBfdGFibGUpOwogICAgIHNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJnNoYXJlZF9pbnRy
ZW1hcF9sb2NrLCBmbGFncyk7CiB9Cg==

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-split-init-one.patch"
Content-Description: AMD-IOMMU-split-init-one.patch
Content-Disposition: attachment; filename="AMD-IOMMU-split-init-one.patch";
	size=1603; creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <12685D02BAFEF54EA4F353F2A845989A@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBzcGxpdCBhbWRfaW9tbXVfaW5pdF9vbmUoKQoKTWFwcGluZyB0aGUgTU1JTyBz
cGFjZSBhbmQgb2J0YWluaW5nIGZlYXR1cmUgaW5mb3JtYXRpb24gbmVlZHMgdG8gaGFwcGVuCnNs
aWdodGx5IGVhcmxpZXIsIHN1Y2ggdGhhdCBmb3IgeDJBUElDIHN1cHBvcnQgd2UgY2FuIHNldCBY
VEVuIHByaW9yIHRvCmNhbGxpbmcgYW1kX2lvbW11X3VwZGF0ZV9pdnJzX21hcHBpbmdfYWNwaSgp
IGFuZAphbWRfaW9tbXVfc2V0dXBfaW9hcGljX3JlbWFwcGluZygpLgoKU2lnbmVkLW9mZi1ieTog
SmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgpSZXZpZXdlZC1ieTogQW5kcmV3IENvb3Bl
ciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL2FtZC9pb21tdV9pbml0LmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lv
bW11X2luaXQuYwpAQCAtOTcwLDE0ICs5NzAsNiBAQCBzdGF0aWMgdm9pZCAqIF9faW5pdCBhbGxv
Y2F0ZV9wcHJfbG9nKHN0CiAKIHN0YXRpYyBpbnQgX19pbml0IGFtZF9pb21tdV9pbml0X29uZShz
dHJ1Y3QgYW1kX2lvbW11ICppb21tdSkKIHsKLSAgICBpZiAoIG1hcF9pb21tdV9tbWlvX3JlZ2lv
bihpb21tdSkgIT0gMCApCi0gICAgICAgIGdvdG8gZXJyb3Jfb3V0OwotCi0gICAgZ2V0X2lvbW11
X2ZlYXR1cmVzKGlvbW11KTsKLQotICAgIGlmICggaW9tbXUtPmZlYXR1cmVzLnJhdyApCi0gICAg
ICAgIGlvbW11djJfZW5hYmxlZCA9IDE7Ci0KICAgICBpZiAoIGFsbG9jYXRlX2NtZF9idWZmZXIo
aW9tbXUpID09IE5VTEwgKQogICAgICAgICBnb3RvIGVycm9yX291dDsKIApAQCAtMTIwMiw2ICsx
MTk0LDIzIEBAIHN0YXRpYyBib29sX3QgX19pbml0IGFtZF9zcDUxMDBfZXJyYXR1bTIKICAgICBy
ZXR1cm4gMDsKIH0KIAorc3RhdGljIGludCBfX2luaXQgYW1kX2lvbW11X3ByZXBhcmVfb25lKHN0
cnVjdCBhbWRfaW9tbXUgKmlvbW11KQoreworICAgIGludCByYyA9IGFsbG9jX2l2cnNfbWFwcGlu
Z3MoaW9tbXUtPnNlZyk7CisKKyAgICBpZiAoICFyYyApCisgICAgICAgIHJjID0gbWFwX2lvbW11
X21taW9fcmVnaW9uKGlvbW11KTsKKyAgICBpZiAoIHJjICkKKyAgICAgICAgcmV0dXJuIHJjOwor
CisgICAgZ2V0X2lvbW11X2ZlYXR1cmVzKGlvbW11KTsKKworICAgIGlmICggaW9tbXUtPmZlYXR1
cmVzLnJhdyApCisgICAgICAgIGlvbW11djJfZW5hYmxlZCA9IHRydWU7CisKKyAgICByZXR1cm4g
MDsKK30KKwogaW50IF9faW5pdCBhbWRfaW9tbXVfaW5pdCh2b2lkKQogewogICAgIHN0cnVjdCBh
bWRfaW9tbXUgKmlvbW11OwpAQCAtMTIzMiw3ICsxMjQxLDcgQEAgaW50IF9faW5pdCBhbWRfaW9t
bXVfaW5pdCh2b2lkKQogICAgIHJhZGl4X3RyZWVfaW5pdCgmaXZyc19tYXBzKTsKICAgICBmb3Jf
ZWFjaF9hbWRfaW9tbXUgKCBpb21tdSApCiAgICAgewotICAgICAgICByYyA9IGFsbG9jX2l2cnNf
bWFwcGluZ3MoaW9tbXUtPnNlZyk7CisgICAgICAgIHJjID0gYW1kX2lvbW11X3ByZXBhcmVfb25l
KGlvbW11KTsKICAgICAgICAgaWYgKCByYyApCiAgICAgICAgICAgICBnb3RvIGVycm9yX291dDsK
ICAgICB9Cg==

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-enable-no-IRQ.patch"
Content-Description: AMD-IOMMU-enable-no-IRQ.patch
Content-Disposition: attachment; filename="AMD-IOMMU-enable-no-IRQ.patch";
	size=1830; creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <077062D82E0B11418E42BC4E5AC5495B@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBhbGxvdyBlbmFibGluZyB3aXRoIElSUSBub3QgeWV0IHNldCB1cAoKRWFybHkg
ZW5hYmxpbmcgKHRvIGVudGVyIHgyQVBJQyBtb2RlKSByZXF1aXJlcyBkZWZlcnJpbmcgb2YgdGhl
IElSUQpzZXR1cC4gQ29kZSB0byBhY3R1YWxseSBkbyB0aGF0IHNldHVwIGluIHRoZSB4MkFQSUMg
Y2FzZSB3aWxsIGdldCBhZGRlZApzdWJzZXF1ZW50bHkuCgpTaWduZWQtb2ZmLWJ5OiBKYW4gQmV1
bGljaCA8amJldWxpY2hAc3VzZS5jb20+CkFja2VkLWJ5OiBBbmRyZXcgQ29vcGVyIDxhbmRyZXcu
Y29vcGVyM0BjaXRyaXguY29tPgotLS0KdjM6IFJlLWJhc2UuCgotLS0gYS94ZW4vZHJpdmVycy9w
YXNzdGhyb3VnaC9hbWQvaW9tbXVfaW5pdC5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdo
L2FtZC9pb21tdV9pbml0LmMKQEAgLTgxNCw3ICs4MTQsNiBAQCBzdGF0aWMgdm9pZCBhbWRfaW9t
bXVfZXJyYXR1bV83NDZfd29ya2FyCiBzdGF0aWMgdm9pZCBlbmFibGVfaW9tbXUoc3RydWN0IGFt
ZF9pb21tdSAqaW9tbXUpCiB7CiAgICAgdW5zaWduZWQgbG9uZyBmbGFnczsKLSAgICBzdHJ1Y3Qg
aXJxX2Rlc2MgKmRlc2M7CiAKICAgICBzcGluX2xvY2tfaXJxc2F2ZSgmaW9tbXUtPmxvY2ssIGZs
YWdzKTsKIApAQCAtODM0LDE5ICs4MzMsMjcgQEAgc3RhdGljIHZvaWQgZW5hYmxlX2lvbW11KHN0
cnVjdCBhbWRfaW9tbQogICAgIGlmICggaW9tbXUtPmZlYXR1cmVzLmZsZHMucHByX3N1cCApCiAg
ICAgICAgIHJlZ2lzdGVyX2lvbW11X3Bwcl9sb2dfaW5fbW1pb19zcGFjZShpb21tdSk7CiAKLSAg
ICBkZXNjID0gaXJxX3RvX2Rlc2MoaW9tbXUtPm1zaS5pcnEpOwotICAgIHNwaW5fbG9jaygmZGVz
Yy0+bG9jayk7Ci0gICAgc2V0X21zaV9hZmZpbml0eShkZXNjLCBOVUxMKTsKLSAgICBzcGluX3Vu
bG9jaygmZGVzYy0+bG9jayk7CisgICAgaWYgKCBpb21tdS0+bXNpLmlycSA+IDAgKQorICAgIHsK
KyAgICAgICAgc3RydWN0IGlycV9kZXNjICpkZXNjID0gaXJxX3RvX2Rlc2MoaW9tbXUtPm1zaS5p
cnEpOworCisgICAgICAgIHNwaW5fbG9jaygmZGVzYy0+bG9jayk7CisgICAgICAgIHNldF9tc2lf
YWZmaW5pdHkoZGVzYywgTlVMTCk7CisgICAgICAgIHNwaW5fdW5sb2NrKCZkZXNjLT5sb2NrKTsK
KyAgICB9CiAKICAgICBhbWRfaW9tbXVfbXNpX2VuYWJsZShpb21tdSwgSU9NTVVfQ09OVFJPTF9F
TkFCTEVEKTsKIAogICAgIHNldF9pb21tdV9odF9mbGFncyhpb21tdSk7CiAgICAgc2V0X2lvbW11
X2NvbW1hbmRfYnVmZmVyX2NvbnRyb2woaW9tbXUsIElPTU1VX0NPTlRST0xfRU5BQkxFRCk7Ci0g
ICAgc2V0X2lvbW11X2V2ZW50X2xvZ19jb250cm9sKGlvbW11LCBJT01NVV9DT05UUk9MX0VOQUJM
RUQpOwogCi0gICAgaWYgKCBpb21tdS0+ZmVhdHVyZXMuZmxkcy5wcHJfc3VwICkKLSAgICAgICAg
c2V0X2lvbW11X3Bwcl9sb2dfY29udHJvbChpb21tdSwgSU9NTVVfQ09OVFJPTF9FTkFCTEVEKTsK
KyAgICBpZiAoIGlvbW11LT5tc2kuaXJxID4gMCApCisgICAgeworICAgICAgICBzZXRfaW9tbXVf
ZXZlbnRfbG9nX2NvbnRyb2woaW9tbXUsIElPTU1VX0NPTlRST0xfRU5BQkxFRCk7CisKKyAgICAg
ICAgaWYgKCBpb21tdS0+ZmVhdHVyZXMuZmxkcy5wcHJfc3VwICkKKyAgICAgICAgICAgIHNldF9p
b21tdV9wcHJfbG9nX2NvbnRyb2woaW9tbXUsIElPTU1VX0NPTlRST0xfRU5BQkxFRCk7CisgICAg
fQogCiAgICAgaWYgKCBpb21tdS0+ZmVhdHVyZXMuZmxkcy5ndF9zdXAgKQogICAgICAgICBzZXRf
aW9tbXVfZ3Vlc3RfdHJhbnNsYXRpb25fY29udHJvbChpb21tdSwgSU9NTVVfQ09OVFJPTF9FTkFC
TEVEKTsK

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-x2APIC-control.patch"
Content-Description: AMD-IOMMU-x2APIC-control.patch
Content-Disposition: attachment; filename="AMD-IOMMU-x2APIC-control.patch";
	size=6338; creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <9F0911FA4F3863449451BA45E88BAB2B@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBhZGp1c3Qgc2V0dXAgb2YgaW50ZXJuYWwgaW50ZXJydXB0IGZvciB4MkFQSUMg
bW9kZQoKSW4gb3JkZXIgdG8gYmUgYWJsZSB0byBleHByZXNzIGFsbCBwb3NzaWJsZSBkZXN0aW5h
dGlvbnMgd2UgbmVlZCB0byBtYWtlCnVzZSBvZiB0aGlzIG5vbi1NU0ktY2FwYWJpbGl0eSBiYXNl
ZCBtZWNoYW5pc20uIFRoZSBuZXcgSVJRIGNvbnRyb2xsZXIKc3RydWN0dXJlIGNhbiByZS11c2Ug
Y2VydGFpbiBNU0kgZnVuY3Rpb25zLCB0aG91Z2guCgpGb3Igbm93IGdlbmVyYWwgYW5kIFBQUiBp
bnRlcnJ1cHRzIHN0aWxsIHNoYXJlIGEgc2luZ2xlIHZlY3RvciwgSVJRLCBhbmQKaGVuY2UgaGFu
ZGxlci4KClNpZ25lZC1vZmYtYnk6IEphbiBCZXVsaWNoIDxqYmV1bGljaEBzdXNlLmNvbT4KUmV2
aWV3ZWQtYnk6IEFuZHJldyBDb29wZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+Ci0tLQp2
MzogUmUtYmFzZS4KCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0
LmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2luaXQuYwpAQCAtNDcy
LDYgKzQ3Miw0NCBAQCBzdGF0aWMgaHdfaXJxX2NvbnRyb2xsZXIgaW9tbXVfbWFza2FibGVfCiAg
ICAgLnNldF9hZmZpbml0eSA9IHNldF9tc2lfYWZmaW5pdHksCiB9OwogCitzdGF0aWMgdm9pZCBz
ZXRfeDJhcGljX2FmZmluaXR5KHN0cnVjdCBpcnFfZGVzYyAqZGVzYywgY29uc3QgY3B1bWFza190
ICptYXNrKQoreworICAgIHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11ID0gZGVzYy0+YWN0aW9uLT5k
ZXZfaWQ7CisgICAgdW5zaWduZWQgaW50IGRlc3QgPSBzZXRfZGVzY19hZmZpbml0eShkZXNjLCBt
YXNrKTsKKyAgICB1bmlvbiBhbWRfaW9tbXVfeDJhcGljX2NvbnRyb2wgY3RybCA9IHt9OworICAg
IHVuc2lnbmVkIGxvbmcgZmxhZ3M7CisKKyAgICBpZiAoIGRlc3QgPT0gQkFEX0FQSUNJRCApCisg
ICAgICAgIHJldHVybjsKKworICAgIG1zaV9jb21wb3NlX21zZyhkZXNjLT5hcmNoLnZlY3Rvciwg
TlVMTCwgJmlvbW11LT5tc2kubXNnKTsKKyAgICBpb21tdS0+bXNpLm1zZy5kZXN0MzIgPSBkZXN0
OworCisgICAgY3RybC5kZXN0X21vZGUgPSBNQVNLX0VYVFIoaW9tbXUtPm1zaS5tc2cuYWRkcmVz
c19sbywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0lfQUREUl9ERVNUTU9ERV9N
QVNLKTsKKyAgICBjdHJsLmludF90eXBlID0gTUFTS19FWFRSKGlvbW11LT5tc2kubXNnLmRhdGEs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0lfREFUQV9ERUxJVkVSWV9NT0RFX01B
U0spOworICAgIGN0cmwudmVjdG9yID0gZGVzYy0+YXJjaC52ZWN0b3I7CisgICAgY3RybC5kZXN0
X2xvID0gZGVzdDsKKyAgICBjdHJsLmRlc3RfaGkgPSBkZXN0ID4+IDI0OworCisgICAgc3Bpbl9s
b2NrX2lycXNhdmUoJmlvbW11LT5sb2NrLCBmbGFncyk7CisgICAgd3JpdGVxKGN0cmwucmF3LCBp
b21tdS0+bW1pb19iYXNlICsgSU9NTVVfWFRfSU5UX0NUUkxfTU1JT19PRkZTRVQpOworICAgIHdy
aXRlcShjdHJsLnJhdywgaW9tbXUtPm1taW9fYmFzZSArIElPTU1VX1hUX1BQUl9JTlRfQ1RSTF9N
TUlPX09GRlNFVCk7CisgICAgc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmaW9tbXUtPmxvY2ssIGZs
YWdzKTsKK30KKworc3RhdGljIGh3X2lycV9jb250cm9sbGVyIGlvbW11X3gyYXBpY190eXBlID0g
eworICAgIC50eXBlbmFtZSAgICAgPSAiSU9NTVUteDJBUElDIiwKKyAgICAuc3RhcnR1cCAgICAg
ID0gaXJxX3N0YXJ0dXBfbm9uZSwKKyAgICAuc2h1dGRvd24gICAgID0gaXJxX3NodXRkb3duX25v
bmUsCisgICAgLmVuYWJsZSAgICAgICA9IGlycV9lbmFibGVfbm9uZSwKKyAgICAuZGlzYWJsZSAg
ICAgID0gaXJxX2Rpc2FibGVfbm9uZSwKKyAgICAuYWNrICAgICAgICAgID0gYWNrX25vbm1hc2th
YmxlX21zaV9pcnEsCisgICAgLmVuZCAgICAgICAgICA9IGVuZF9ub25tYXNrYWJsZV9tc2lfaXJx
LAorICAgIC5zZXRfYWZmaW5pdHkgPSBzZXRfeDJhcGljX2FmZmluaXR5LAorfTsKKwogc3RhdGlj
IHZvaWQgcGFyc2VfZXZlbnRfbG9nX2VudHJ5KHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11LCB1MzIg
ZW50cnlbXSkKIHsKICAgICB1MTYgZG9tYWluX2lkLCBkZXZpY2VfaWQsIGZsYWdzOwpAQCAtNzI2
LDggKzc2NCw2IEBAIHN0YXRpYyB2b2lkIGlvbW11X2ludGVycnVwdF9oYW5kbGVyKGludAogc3Rh
dGljIGJvb2xfdCBfX2luaXQgc2V0X2lvbW11X2ludGVycnVwdF9oYW5kbGVyKHN0cnVjdCBhbWRf
aW9tbXUgKmlvbW11KQogewogICAgIGludCBpcnEsIHJldDsKLSAgICBod19pcnFfY29udHJvbGxl
ciAqaGFuZGxlcjsKLSAgICB1MTYgY29udHJvbDsKIAogICAgIGlycSA9IGNyZWF0ZV9pcnEoTlVN
QV9OT19OT0RFKTsKICAgICBpZiAoIGlycSA8PSAwICkKQEAgLTc0NywyMCArNzgzLDQzIEBAIHN0
YXRpYyBib29sX3QgX19pbml0IHNldF9pb21tdV9pbnRlcnJ1cHQKICAgICAgICAgICAgICAgICAg
ICAgICAgIFBDSV9TTE9UKGlvbW11LT5iZGYpLCBQQ0lfRlVOQyhpb21tdS0+YmRmKSk7CiAgICAg
ICAgIHJldHVybiAwOwogICAgIH0KLSAgICBjb250cm9sID0gcGNpX2NvbmZfcmVhZDE2KGlvbW11
LT5zZWcsIFBDSV9CVVMoaW9tbXUtPmJkZiksCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBQQ0lfU0xPVChpb21tdS0+YmRmKSwgUENJX0ZVTkMoaW9tbXUtPmJkZiksCi0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpb21tdS0+bXNpLm1zaV9hdHRyaWIucG9zICsgUENJX01TSV9G
TEFHUyk7Ci0gICAgaW9tbXUtPm1zaS5tc2kubnZlYyA9IDE7Ci0gICAgaWYgKCBpc19tYXNrX2Jp
dF9zdXBwb3J0KGNvbnRyb2wpICkKLSAgICB7Ci0gICAgICAgIGlvbW11LT5tc2kubXNpX2F0dHJp
Yi5tYXNrYml0ID0gMTsKLSAgICAgICAgaW9tbXUtPm1zaS5tc2kubXBvcyA9IG1zaV9tYXNrX2Jp
dHNfcmVnKGlvbW11LT5tc2kubXNpX2F0dHJpYi5wb3MsCi0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBpc182NGJpdF9hZGRyZXNzKGNvbnRyb2wpKTsKLSAg
ICAgICAgaGFuZGxlciA9ICZpb21tdV9tYXNrYWJsZV9tc2lfdHlwZTsKKworICAgIGlmICggaW9t
bXUtPmN0cmwuaW50X2NhcF94dF9lbiApCisgICAgeworICAgICAgICBzdHJ1Y3QgaXJxX2Rlc2Mg
KmRlc2MgPSBpcnFfdG9fZGVzYyhpcnEpOworCisgICAgICAgIGlvbW11LT5tc2kubXNpX2F0dHJp
Yi5wb3MgPSBNU0lfVFlQRV9JT01NVTsKKyAgICAgICAgaW9tbXUtPm1zaS5tc2lfYXR0cmliLm1h
c2tiaXQgPSAwOworICAgICAgICBpb21tdS0+bXNpLm1zaV9hdHRyaWIuaXNfNjQgPSAxOworCisg
ICAgICAgIGRlc2MtPm1zaV9kZXNjID0gJmlvbW11LT5tc2k7CisgICAgICAgIGRlc2MtPmhhbmRs
ZXIgPSAmaW9tbXVfeDJhcGljX3R5cGU7CisKKyAgICAgICAgcmV0ID0gMDsKICAgICB9CiAgICAg
ZWxzZQotICAgICAgICBoYW5kbGVyID0gJmlvbW11X21zaV90eXBlOwotICAgIHJldCA9IF9fc2V0
dXBfbXNpX2lycShpcnFfdG9fZGVzYyhpcnEpLCAmaW9tbXUtPm1zaSwgaGFuZGxlcik7CisgICAg
eworICAgICAgICBod19pcnFfY29udHJvbGxlciAqaGFuZGxlcjsKKyAgICAgICAgdTE2IGNvbnRy
b2w7CisKKyAgICAgICAgY29udHJvbCA9IHBjaV9jb25mX3JlYWQxNihpb21tdS0+c2VnLCBQQ0lf
QlVTKGlvbW11LT5iZGYpLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBDSV9T
TE9UKGlvbW11LT5iZGYpLCBQQ0lfRlVOQyhpb21tdS0+YmRmKSwKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpb21tdS0+bXNpLm1zaV9hdHRyaWIucG9zICsgUENJX01TSV9GTEFH
Uyk7CisKKyAgICAgICAgaW9tbXUtPm1zaS5tc2kubnZlYyA9IDE7CisgICAgICAgIGlmICggaXNf
bWFza19iaXRfc3VwcG9ydChjb250cm9sKSApCisgICAgICAgIHsKKyAgICAgICAgICAgIGlvbW11
LT5tc2kubXNpX2F0dHJpYi5tYXNrYml0ID0gMTsKKyAgICAgICAgICAgIGlvbW11LT5tc2kubXNp
Lm1wb3MgPSBtc2lfbWFza19iaXRzX3JlZyhpb21tdS0+bXNpLm1zaV9hdHRyaWIucG9zLAorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzXzY0Yml0
X2FkZHJlc3MoY29udHJvbCkpOworICAgICAgICAgICAgaGFuZGxlciA9ICZpb21tdV9tYXNrYWJs
ZV9tc2lfdHlwZTsKKyAgICAgICAgfQorICAgICAgICBlbHNlCisgICAgICAgICAgICBoYW5kbGVy
ID0gJmlvbW11X21zaV90eXBlOworCisgICAgICAgIHJldCA9IF9fc2V0dXBfbXNpX2lycShpcnFf
dG9fZGVzYyhpcnEpLCAmaW9tbXUtPm1zaSwgaGFuZGxlcik7CisgICAgfQorCiAgICAgaWYgKCAh
cmV0ICkKICAgICAgICAgcmV0ID0gcmVxdWVzdF9pcnEoaXJxLCAwLCBpb21tdV9pbnRlcnJ1cHRf
aGFuZGxlciwgImFtZF9pb21tdSIsIGlvbW11KTsKICAgICBpZiAoIHJldCApCkBAIC04MzgsOCAr
ODk3LDE5IEBAIHN0YXRpYyB2b2lkIGVuYWJsZV9pb21tdShzdHJ1Y3QgYW1kX2lvbW0KICAgICAg
ICAgc3RydWN0IGlycV9kZXNjICpkZXNjID0gaXJxX3RvX2Rlc2MoaW9tbXUtPm1zaS5pcnEpOwog
CiAgICAgICAgIHNwaW5fbG9jaygmZGVzYy0+bG9jayk7Ci0gICAgICAgIHNldF9tc2lfYWZmaW5p
dHkoZGVzYywgTlVMTCk7Ci0gICAgICAgIHNwaW5fdW5sb2NrKCZkZXNjLT5sb2NrKTsKKworICAg
ICAgICBpZiAoIGlvbW11LT5jdHJsLmludF9jYXBfeHRfZW4gKQorICAgICAgICB7CisgICAgICAg
ICAgICBzZXRfeDJhcGljX2FmZmluaXR5KGRlc2MsIE5VTEwpOworICAgICAgICAgICAgc3Bpbl91
bmxvY2soJmRlc2MtPmxvY2spOworICAgICAgICB9CisgICAgICAgIGVsc2UKKyAgICAgICAgewor
ICAgICAgICAgICAgc2V0X21zaV9hZmZpbml0eShkZXNjLCBOVUxMKTsKKyAgICAgICAgICAgIHNw
aW5fdW5sb2NrKCZkZXNjLT5sb2NrKTsKKworICAgICAgICAgICAgYW1kX2lvbW11X21zaV9lbmFi
bGUoaW9tbXUsIElPTU1VX0NPTlRST0xfRU5BQkxFRCk7CisgICAgICAgIH0KICAgICB9CiAKICAg
ICBhbWRfaW9tbXVfbXNpX2VuYWJsZShpb21tdSwgSU9NTVVfQ09OVFJPTF9FTkFCTEVEKTsKQEAg
LTg3OSw3ICs5NDksOSBAQCBzdGF0aWMgdm9pZCBkaXNhYmxlX2lvbW11KHN0cnVjdCBhbWRfaW9t
CiAgICAgICAgIHJldHVybjsKICAgICB9CiAKLSAgICBhbWRfaW9tbXVfbXNpX2VuYWJsZShpb21t
dSwgSU9NTVVfQ09OVFJPTF9ESVNBQkxFRCk7CisgICAgaWYgKCAhaW9tbXUtPmN0cmwuaW50X2Nh
cF94dF9lbiApCisgICAgICAgIGFtZF9pb21tdV9tc2lfZW5hYmxlKGlvbW11LCBJT01NVV9DT05U
Uk9MX0RJU0FCTEVEKTsKKwogICAgIHNldF9pb21tdV9jb21tYW5kX2J1ZmZlcl9jb250cm9sKGlv
bW11LCBJT01NVV9DT05UUk9MX0RJU0FCTEVEKTsKICAgICBzZXRfaW9tbXVfZXZlbnRfbG9nX2Nv
bnRyb2woaW9tbXUsIElPTU1VX0NPTlRST0xfRElTQUJMRUQpOwogCi0tLSBhL3hlbi9pbmNsdWRl
L2FzbS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtZGVmcy5oCisrKyBiL3hlbi9pbmNsdWRlL2FzbS14
ODYvaHZtL3N2bS9hbWQtaW9tbXUtZGVmcy5oCkBAIC00MTYsNiArNDE2LDI1IEBAIHVuaW9uIGFt
ZF9pb21tdV9leHRfZmVhdHVyZXMgewogICAgIH0gZmxkczsKIH07CiAKKy8qIHgyQVBJQyBDb250
cm9sIFJlZ2lzdGVycyAqLworI2RlZmluZSBJT01NVV9YVF9JTlRfQ1RSTF9NTUlPX09GRlNFVAkJ
MHgwMTcwCisjZGVmaW5lIElPTU1VX1hUX1BQUl9JTlRfQ1RSTF9NTUlPX09GRlNFVAkweDAxNzgK
KyNkZWZpbmUgSU9NTVVfWFRfR0FfSU5UX0NUUkxfTU1JT19PRkZTRVQJMHgwMTgwCisKK3VuaW9u
IGFtZF9pb21tdV94MmFwaWNfY29udHJvbCB7CisgICAgdWludDY0X3QgcmF3OworICAgIHN0cnVj
dCB7CisgICAgICAgIHVuc2lnbmVkIGludCA6MjsKKyAgICAgICAgdW5zaWduZWQgaW50IGRlc3Rf
bW9kZToxOworICAgICAgICB1bnNpZ25lZCBpbnQgOjU7CisgICAgICAgIHVuc2lnbmVkIGludCBk
ZXN0X2xvOjI0OworICAgICAgICB1bnNpZ25lZCBpbnQgdmVjdG9yOjg7CisgICAgICAgIHVuc2ln
bmVkIGludCBpbnRfdHlwZToxOyAvKiBETSBpbiBJT01NVSBzcGVjIDMuMDQgKi8KKyAgICAgICAg
dW5zaWduZWQgaW50IDoxNTsKKyAgICAgICAgdW5zaWduZWQgaW50IGRlc3RfaGk6ODsKKyAgICB9
OworfTsKKwogLyogU3RhdHVzIFJlZ2lzdGVyKi8KICNkZWZpbmUgSU9NTVVfU1RBVFVTX01NSU9f
T0ZGU0VUCQkweDIwMjAKICNkZWZpbmUgSU9NTVVfU1RBVFVTX0VWRU5UX09WRVJGTE9XX01BU0sJ
MHgwMDAwMDAwMQo=

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-enable-x2APIC.patch"
Content-Description: AMD-IOMMU-enable-x2APIC.patch
Content-Disposition: attachment; filename="AMD-IOMMU-enable-x2APIC.patch";
	size=9791; creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <8A157F1618266E4292F96CEA349E6B07@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBlbmFibGUgeDJBUElDIG1vZGUgd2hlbiBhdmFpbGFibGUKCkluIG9yZGVyIGZv
ciB0aGUgQ1BVcyB0byB1c2UgeDJBUElDIG1vZGUsIHRoZSBJT01NVShzKSBmaXJzdCBuZWVkIHRv
IGJlCnN3aXRjaGVkIGludG8gc3VpdGFibGUgc3RhdGUuCgpUaGUgcG9zdC1BUC1icmluZ3VwIElS
USBhZmZpbml0eSBhZGp1c3RtZW50IGlzIGRvbmUgYWxzbyBmb3IgdGhlIG5vbi0KeDJBUElDIGNh
c2UsIG1hdGNoaW5nIHdoYXQgVlQtZCBkb2VzLgoKU2lnbmVkLW9mZi1ieTogSmFuIEJldWxpY2gg
PGpiZXVsaWNoQHN1c2UuY29tPgotLS0KdjM6IFNldCBHQUVuIChhbmQgb3RoZXIgY29udHJvbCBy
ZWdpc3RlciBiaXRzKSBlYXJsaWVyLiBBbHNvIGNsZWFyIHRoZQogICAgYml0cyBlbmFibGVkIGhl
cmUgaW4gYW1kX2lvbW11X2luaXRfY2xlYW51cCgpLiBSZS1iYXNlLiBQYXNzIE5VTEwKICAgIENQ
VSBtYXNrIHRvIHNldF97eDJhcGljLG1zaX1fYWZmaW5pdHkoKS4KdjI6IERyb3AgY3B1X2hhc19j
eDE2IGNoZWNrLiBBZGQgY29tbWVudC4KLS0tClRCRDogSW5zdGVhZCBvZiB0aGUgc3lzdGVtX3N0
YXRlIGNoZWNrIGluIGlvdl9lbmFibGVfeHQoKSB0aGUgZnVuY3Rpb24KICAgICBjb3VsZCBhbHNv
IHphcCBpdHMgb3duIGhvb2sgcG9pbnRlciwgYXQgd2hpY2ggcG9pbnQgaXQgY291bGQgYWxzbwog
ICAgIGJlY29tZSBfX2luaXQuIFRoaXMgd291bGQsIGhvd2V2ZXIsIHJlcXVpcmUgdGhhdCBlaXRo
ZXIKICAgICByZXN1bWVfeDJhcGljKCkgYmUgYm91bmQgdG8gaWdub3JlIGlvbW11X2VuYWJsZV94
MmFwaWMoKSBlcnJvcnMKICAgICBmb3JldmVyLCBvciB0aGF0IGlvbW11X2VuYWJsZV94MmFwaWMo
KSBiZSBzbGlnaHRseSByZS1hcnJhbmdlZCB0bwogICAgIG5vdCByZXR1cm4gLUVPUE5PVFNVUFAg
d2hlbiBmaW5kaW5nIGEgTlVMTCBob29rIGR1cmluZyByZXN1bWUuCgotLS0gYS94ZW4vZHJpdmVy
cy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfaW5pdC5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL2FtZC9pb21tdV9pbml0LmMKQEAgLTgzNCw2ICs4MzQsMzAgQEAgc3RhdGljIGJvb2xfdCBf
X2luaXQgc2V0X2lvbW11X2ludGVycnVwdAogICAgIHJldHVybiAxOwogfQogCitpbnQgaW92X2Fk
anVzdF9pcnFfYWZmaW5pdGllcyh2b2lkKQoreworICAgIGNvbnN0IHN0cnVjdCBhbWRfaW9tbXUg
KmlvbW11OworCisgICAgaWYgKCAhaW9tbXVfZW5hYmxlZCApCisgICAgICAgIHJldHVybiAwOwor
CisgICAgZm9yX2VhY2hfYW1kX2lvbW11ICggaW9tbXUgKQorICAgIHsKKyAgICAgICAgc3RydWN0
IGlycV9kZXNjICpkZXNjID0gaXJxX3RvX2Rlc2MoaW9tbXUtPm1zaS5pcnEpOworICAgICAgICB1
bnNpZ25lZCBsb25nIGZsYWdzOworCisgICAgICAgIHNwaW5fbG9ja19pcnFzYXZlKCZkZXNjLT5s
b2NrLCBmbGFncyk7CisgICAgICAgIGlmICggaW9tbXUtPmN0cmwuaW50X2NhcF94dF9lbiApCisg
ICAgICAgICAgICBzZXRfeDJhcGljX2FmZmluaXR5KGRlc2MsIE5VTEwpOworICAgICAgICBlbHNl
CisgICAgICAgICAgICBzZXRfbXNpX2FmZmluaXR5KGRlc2MsIE5VTEwpOworICAgICAgICBzcGlu
X3VubG9ja19pcnFyZXN0b3JlKCZkZXNjLT5sb2NrLCBmbGFncyk7CisgICAgfQorCisgICAgcmV0
dXJuIDA7Cit9CitfX2luaXRjYWxsKGlvdl9hZGp1c3RfaXJxX2FmZmluaXRpZXMpOworCiAvKgog
ICogRmFtaWx5MTVoIE1vZGVsIDEwaC0xZmggZXJyYXR1bSA3NDYgKElPTU1VIExvZ2dpbmcgTWF5
IFN0YWxsIFRyYW5zbGF0aW9ucykKICAqIFdvcmthcm91bmQ6CkBAIC0xMDQ3LDcgKzEwNzEsNyBA
QCBzdGF0aWMgdm9pZCAqIF9faW5pdCBhbGxvY2F0ZV9wcHJfbG9nKHN0CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIElPTU1VX1BQUl9MT0dfREVGQVVMVF9FTlRSSUVTLCAiUFBSIExv
ZyIpOwogfQogCi1zdGF0aWMgaW50IF9faW5pdCBhbWRfaW9tbXVfaW5pdF9vbmUoc3RydWN0IGFt
ZF9pb21tdSAqaW9tbXUpCitzdGF0aWMgaW50IF9faW5pdCBhbWRfaW9tbXVfaW5pdF9vbmUoc3Ry
dWN0IGFtZF9pb21tdSAqaW9tbXUsIGJvb2wgaW50cikKIHsKICAgICBpZiAoIGFsbG9jYXRlX2Nt
ZF9idWZmZXIoaW9tbXUpID09IE5VTEwgKQogICAgICAgICBnb3RvIGVycm9yX291dDsKQEAgLTEw
NTgsNyArMTA4Miw3IEBAIHN0YXRpYyBpbnQgX19pbml0IGFtZF9pb21tdV9pbml0X29uZShzdHIK
ICAgICBpZiAoIGlvbW11LT5mZWF0dXJlcy5mbGRzLnBwcl9zdXAgJiYgIWFsbG9jYXRlX3Bwcl9s
b2coaW9tbXUpICkKICAgICAgICAgZ290byBlcnJvcl9vdXQ7CiAKLSAgICBpZiAoICFzZXRfaW9t
bXVfaW50ZXJydXB0X2hhbmRsZXIoaW9tbXUpICkKKyAgICBpZiAoIGludHIgJiYgIXNldF9pb21t
dV9pbnRlcnJ1cHRfaGFuZGxlcihpb21tdSkgKQogICAgICAgICBnb3RvIGVycm9yX291dDsKIAog
ICAgIC8qIFRvIG1ha2Ugc3VyZSB0aGF0IGRldmljZV90YWJsZS5idWZmZXIgaGFzIGJlZW4gc3Vj
Y2Vzc2Z1bGx5IGFsbG9jYXRlZCAqLwpAQCAtMTA4Nyw4ICsxMTExLDE2IEBAIHN0YXRpYyB2b2lk
IF9faW5pdCBhbWRfaW9tbXVfaW5pdF9jbGVhbnUKICAgICBsaXN0X2Zvcl9lYWNoX2VudHJ5X3Nh
ZmUgKCBpb21tdSwgbmV4dCwgJmFtZF9pb21tdV9oZWFkLCBsaXN0ICkKICAgICB7CiAgICAgICAg
IGxpc3RfZGVsKCZpb21tdS0+bGlzdCk7CisKKyAgICAgICAgaW9tbXUtPmN0cmwuZ2FfZW4gPSAw
OworICAgICAgICBpb21tdS0+Y3RybC54dF9lbiA9IDA7CisgICAgICAgIGlvbW11LT5jdHJsLmlu
dF9jYXBfeHRfZW4gPSAwOworCiAgICAgICAgIGlmICggaW9tbXUtPmVuYWJsZWQgKQogICAgICAg
ICAgICAgZGlzYWJsZV9pb21tdShpb21tdSk7CisgICAgICAgIGVsc2UgaWYgKCBpb21tdS0+bW1p
b19iYXNlICkKKyAgICAgICAgICAgIHdyaXRlcShpb21tdS0+Y3RybC5yYXcsCisgICAgICAgICAg
ICAgICAgICAgaW9tbXUtPm1taW9fYmFzZSArIElPTU1VX0NPTlRST0xfTU1JT19PRkZTRVQpOwog
CiAgICAgICAgIGRlYWxsb2NhdGVfcmluZ19idWZmZXIoJmlvbW11LT5jbWRfYnVmZmVyKTsKICAg
ICAgICAgZGVhbGxvY2F0ZV9yaW5nX2J1ZmZlcigmaW9tbXUtPmV2ZW50X2xvZyk7CkBAIC0xMjkw
LDcgKzEzMjIsNyBAQCBzdGF0aWMgaW50IF9faW5pdCBhbWRfaW9tbXVfcHJlcGFyZV9vbmUoCiAg
ICAgcmV0dXJuIDA7CiB9CiAKLWludCBfX2luaXQgYW1kX2lvbW11X2luaXQodm9pZCkKK2ludCBf
X2luaXQgYW1kX2lvbW11X3ByZXBhcmUoYm9vbCB4dCkKIHsKICAgICBzdHJ1Y3QgYW1kX2lvbW11
ICppb21tdTsKICAgICBpbnQgcmMgPSAtRU5PREVWOwpAQCAtMTMwNSw5ICsxMzM3LDE0IEBAIGlu
dCBfX2luaXQgYW1kX2lvbW11X2luaXQodm9pZCkKICAgICBpZiAoIHVubGlrZWx5KGFjcGlfZ2Js
X0ZBRFQuYm9vdF9mbGFncyAmIEFDUElfRkFEVF9OT19NU0kpICkKICAgICAgICAgZ290byBlcnJv
cl9vdXQ7CiAKKyAgICAvKiBIYXZlIHdlIGJlZW4gaGVyZSBiZWZvcmU/ICovCisgICAgaWYgKCBp
dmhkX3R5cGUgKQorICAgICAgICByZXR1cm4gMDsKKwogICAgIHJjID0gYW1kX2lvbW11X2dldF9z
dXBwb3J0ZWRfaXZoZF90eXBlKCk7CiAgICAgaWYgKCByYyA8IDAgKQogICAgICAgICBnb3RvIGVy
cm9yX291dDsKKyAgICBCVUdfT04oIXJjKTsKICAgICBpdmhkX3R5cGUgPSByYzsKIAogICAgIHJj
ID0gYW1kX2lvbW11X2dldF9pdnJzX2Rldl9lbnRyaWVzKCk7CkBAIC0xMzIzLDkgKzEzNjAsMzcg
QEAgaW50IF9faW5pdCBhbWRfaW9tbXVfaW5pdCh2b2lkKQogICAgICAgICByYyA9IGFtZF9pb21t
dV9wcmVwYXJlX29uZShpb21tdSk7CiAgICAgICAgIGlmICggcmMgKQogICAgICAgICAgICAgZ290
byBlcnJvcl9vdXQ7CisKKyAgICAgICAgcmMgPSAtRU5PREVWOworICAgICAgICBpZiAoIHh0ICYm
ICghaW9tbXUtPmZlYXR1cmVzLmZsZHMuZ2Ffc3VwIHx8ICFpb21tdS0+ZmVhdHVyZXMuZmxkcy54
dF9zdXApICkKKyAgICAgICAgICAgIGdvdG8gZXJyb3Jfb3V0OworICAgIH0KKworICAgIGZvcl9l
YWNoX2FtZF9pb21tdSAoIGlvbW11ICkKKyAgICB7CisgICAgICAgIC8qIE5COiBUaGVyZSdzIG5v
IG5lZWQgdG8gYWN0dWFsbHkgd3JpdGUgdGhlc2Ugb3V0IHJpZ2h0IGhlcmUuICovCisgICAgICAg
IGlvbW11LT5jdHJsLmdhX2VuIHw9IHh0OworICAgICAgICBpb21tdS0+Y3RybC54dF9lbiA9IHh0
OworICAgICAgICBpb21tdS0+Y3RybC5pbnRfY2FwX3h0X2VuID0geHQ7CiAgICAgfQogCiAgICAg
cmMgPSBhbWRfaW9tbXVfdXBkYXRlX2l2cnNfbWFwcGluZ19hY3BpKCk7CisKKyBlcnJvcl9vdXQ6
CisgICAgaWYgKCByYyApCisgICAgeworICAgICAgICBhbWRfaW9tbXVfaW5pdF9jbGVhbnVwKCk7
CisgICAgICAgIGl2aGRfdHlwZSA9IDA7CisgICAgfQorCisgICAgcmV0dXJuIHJjOworfQorCitp
bnQgX19pbml0IGFtZF9pb21tdV9pbml0KGJvb2wgeHQpCit7CisgICAgc3RydWN0IGFtZF9pb21t
dSAqaW9tbXU7CisgICAgaW50IHJjID0gYW1kX2lvbW11X3ByZXBhcmUoeHQpOworCiAgICAgaWYg
KCByYyApCiAgICAgICAgIGdvdG8gZXJyb3Jfb3V0OwogCkBAIC0xMzUxLDcgKzE0MTYsMTIgQEAg
aW50IF9faW5pdCBhbWRfaW9tbXVfaW5pdCh2b2lkKQogICAgIC8qIHBlciBpb21tdSBpbml0aWFs
aXphdGlvbiAgKi8KICAgICBmb3JfZWFjaF9hbWRfaW9tbXUgKCBpb21tdSApCiAgICAgewotICAg
ICAgICByYyA9IGFtZF9pb21tdV9pbml0X29uZShpb21tdSk7CisgICAgICAgIC8qCisgICAgICAg
ICAqIFNldHRpbmcgdXAgb2YgdGhlIElPTU1VIGludGVycnVwdHMgY2Fubm90IG9jY3VyIHlldCBh
dCB0aGUgKHZlcnkKKyAgICAgICAgICogZWFybHkpIHRpbWUgd2UgZ2V0IGhlcmUgd2hlbiBlbmFi
bGluZyB4MkFQSUMgbW9kZS4gU3VwcHJlc3MgaXQKKyAgICAgICAgICogaGVyZSwgYW5kIGRvIGl0
IGV4cGxpY2l0bHkgaW4gYW1kX2lvbW11X2luaXRfaW50ZXJydXB0KCkuCisgICAgICAgICAqLwor
ICAgICAgICByYyA9IGFtZF9pb21tdV9pbml0X29uZShpb21tdSwgIXh0KTsKICAgICAgICAgaWYg
KCByYyApCiAgICAgICAgICAgICBnb3RvIGVycm9yX291dDsKICAgICB9CkBAIC0xMzYzLDYgKzE0
MzMsNDAgQEAgZXJyb3Jfb3V0OgogICAgIHJldHVybiByYzsKIH0KIAoraW50IF9faW5pdCBhbWRf
aW9tbXVfaW5pdF9pbnRlcnJ1cHQodm9pZCkKK3sKKyAgICBzdHJ1Y3QgYW1kX2lvbW11ICppb21t
dTsKKyAgICBpbnQgcmMgPSAwOworCisgICAgZm9yX2VhY2hfYW1kX2lvbW11ICggaW9tbXUgKQor
ICAgIHsKKyAgICAgICAgc3RydWN0IGlycV9kZXNjICpkZXNjOworCisgICAgICAgIGlmICggIXNl
dF9pb21tdV9pbnRlcnJ1cHRfaGFuZGxlcihpb21tdSkgKQorICAgICAgICB7CisgICAgICAgICAg
ICByYyA9IC1FSU87CisgICAgICAgICAgICBicmVhazsKKyAgICAgICAgfQorCisgICAgICAgIGRl
c2MgPSBpcnFfdG9fZGVzYyhpb21tdS0+bXNpLmlycSk7CisKKyAgICAgICAgc3Bpbl9sb2NrKCZk
ZXNjLT5sb2NrKTsKKyAgICAgICAgQVNTRVJUKGlvbW11LT5jdHJsLmludF9jYXBfeHRfZW4pOwor
ICAgICAgICBzZXRfeDJhcGljX2FmZmluaXR5KGRlc2MsICZjcHVfb25saW5lX21hcCk7CisgICAg
ICAgIHNwaW5fdW5sb2NrKCZkZXNjLT5sb2NrKTsKKworICAgICAgICBzZXRfaW9tbXVfZXZlbnRf
bG9nX2NvbnRyb2woaW9tbXUsIElPTU1VX0NPTlRST0xfRU5BQkxFRCk7CisKKyAgICAgICAgaWYg
KCBpb21tdS0+ZmVhdHVyZXMuZmxkcy5wcHJfc3VwICkKKyAgICAgICAgICAgIHNldF9pb21tdV9w
cHJfbG9nX2NvbnRyb2woaW9tbXUsIElPTU1VX0NPTlRST0xfRU5BQkxFRCk7CisgICAgfQorCisg
ICAgaWYgKCByYyApCisgICAgICAgIGFtZF9pb21tdV9pbml0X2NsZWFudXAoKTsKKworICAgIHJl
dHVybiByYzsKK30KKwogc3RhdGljIHZvaWQgaW52YWxpZGF0ZV9hbGxfZG9tYWluX3BhZ2VzKHZv
aWQpCiB7CiAgICAgc3RydWN0IGRvbWFpbiAqZDsKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91
Z2gvYW1kL2lvbW11X2ludHIuYworKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9t
bXVfaW50ci5jCkBAIC03OTEsNiArNzkxLDM1IEBAIHZvaWQgKl9faW5pdCBhbWRfaW9tbXVfYWxs
b2NfaW50cmVtYXBfdGEKICAgICByZXR1cm4gdGI7CiB9CiAKK2Jvb2wgX19pbml0IGlvdl9zdXBw
b3J0c194dCh2b2lkKQoreworICAgIHVuc2lnbmVkIGludCBhcGljOworCisgICAgaWYgKCAhaW9t
bXVfZW5hYmxlIHx8ICFpb21tdV9pbnRyZW1hcCApCisgICAgICAgIHJldHVybiBmYWxzZTsKKwor
ICAgIGlmICggYW1kX2lvbW11X3ByZXBhcmUodHJ1ZSkgKQorICAgICAgICByZXR1cm4gZmFsc2U7
CisKKyAgICBmb3IgKCBhcGljID0gMDsgYXBpYyA8IG5yX2lvYXBpY3M7IGFwaWMrKyApCisgICAg
eworICAgICAgICB1bnNpZ25lZCBpbnQgaWR4ID0gaW9hcGljX2lkX3RvX2luZGV4KElPX0FQSUNf
SUQoYXBpYykpOworCisgICAgICAgIGlmICggaWR4ID09IE1BWF9JT19BUElDUyApCisgICAgICAg
ICAgICByZXR1cm4gZmFsc2U7CisKKyAgICAgICAgaWYgKCAhZmluZF9pb21tdV9mb3JfZGV2aWNl
KGlvYXBpY19zYmRmW2lkeF0uc2VnLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgaW9hcGljX3NiZGZbaWR4XS5iZGYpICkKKyAgICAgICAgeworICAgICAgICAgICAgQU1EX0lP
TU1VX0RFQlVHKCJObyBJT01NVSBmb3IgSU8tQVBJQyAlI3ggKElEICV4KVxuIiwKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBhcGljLCBJT19BUElDX0lEKGFwaWMpKTsKKyAgICAgICAgICAg
IHJldHVybiBmYWxzZTsKKyAgICAgICAgfQorICAgIH0KKworICAgIHJldHVybiB0cnVlOworfQor
CiBpbnQgX19pbml0IGFtZF9zZXR1cF9ocGV0X21zaShzdHJ1Y3QgbXNpX2Rlc2MgKm1zaV9kZXNj
KQogewogICAgIHNwaW5sb2NrX3QgKmxvY2s7Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdo
L2FtZC9wY2lfYW1kX2lvbW11LmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL3Bj
aV9hbWRfaW9tbXUuYwpAQCAtMTcwLDcgKzE3MCw4IEBAIHN0YXRpYyBpbnQgX19pbml0IGlvdl9k
ZXRlY3Qodm9pZCkKICAgICBpZiAoICFpb21tdV9lbmFibGUgJiYgIWlvbW11X2ludHJlbWFwICkK
ICAgICAgICAgcmV0dXJuIDA7CiAKLSAgICBpZiAoIGFtZF9pb21tdV9pbml0KCkgIT0gMCApCisg
ICAgZWxzZSBpZiAoIChpbml0X2RvbmUgPyBhbWRfaW9tbXVfaW5pdF9pbnRlcnJ1cHQoKQorICAg
ICAgICAgICAgICAgICAgICAgICAgIDogYW1kX2lvbW11X2luaXQoZmFsc2UpKSAhPSAwICkKICAg
ICB7CiAgICAgICAgIHByaW50aygiQU1ELVZpOiBFcnJvciBpbml0aWFsaXphdGlvblxuIik7CiAg
ICAgICAgIHJldHVybiAtRU5PREVWOwpAQCAtMTgzLDYgKzE4NCwyNSBAQCBzdGF0aWMgaW50IF9f
aW5pdCBpb3ZfZGV0ZWN0KHZvaWQpCiAgICAgcmV0dXJuIHNjYW5fcGNpX2RldmljZXMoKTsKIH0K
IAorc3RhdGljIGludCBpb3ZfZW5hYmxlX3h0KHZvaWQpCit7CisgICAgaW50IHJjOworCisgICAg
aWYgKCBzeXN0ZW1fc3RhdGUgPj0gU1lTX1NUQVRFX2FjdGl2ZSApCisgICAgICAgIHJldHVybiAw
OworCisgICAgaWYgKCAocmMgPSBhbWRfaW9tbXVfaW5pdCh0cnVlKSkgIT0gMCApCisgICAgewor
ICAgICAgICBwcmludGsoIkFNRC1WaTogRXJyb3IgJWQgaW5pdGlhbGl6aW5nIGZvciB4MkFQSUMg
bW9kZVxuIiwgcmMpOworICAgICAgICAvKiAtRU5YSU8gaGFzIHNwZWNpYWwgbWVhbmluZyB0byB0
aGUgY2FsbGVyIC0gY29udmVydCBpdC4gKi8KKyAgICAgICAgcmV0dXJuIHJjICE9IC1FTlhJTyA/
IHJjIDogLUVOT0RBVEE7CisgICAgfQorCisgICAgaW5pdF9kb25lID0gdHJ1ZTsKKworICAgIHJl
dHVybiAwOworfQorCiBpbnQgYW1kX2lvbW11X2FsbG9jX3Jvb3Qoc3RydWN0IGRvbWFpbl9pb21t
dSAqaGQpCiB7CiAgICAgaWYgKCB1bmxpa2VseSghaGQtPmFyY2gucm9vdF90YWJsZSkgKQpAQCAt
NTU5LDExICs1NzksMTMgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBpb21tdV9vcHMgX19pbml0Y29u
cwogICAgIC5mcmVlX3BhZ2VfdGFibGUgPSBkZWFsbG9jYXRlX3BhZ2VfdGFibGUsCiAgICAgLnJl
YXNzaWduX2RldmljZSA9IHJlYXNzaWduX2RldmljZSwKICAgICAuZ2V0X2RldmljZV9ncm91cF9p
ZCA9IGFtZF9pb21tdV9ncm91cF9pZCwKKyAgICAuZW5hYmxlX3gyYXBpYyA9IGlvdl9lbmFibGVf
eHQsCiAgICAgLnVwZGF0ZV9pcmVfZnJvbV9hcGljID0gYW1kX2lvbW11X2lvYXBpY191cGRhdGVf
aXJlLAogICAgIC51cGRhdGVfaXJlX2Zyb21fbXNpID0gYW1kX2lvbW11X21zaV9tc2dfdXBkYXRl
X2lyZSwKICAgICAucmVhZF9hcGljX2Zyb21faXJlID0gYW1kX2lvbW11X3JlYWRfaW9hcGljX2Zy
b21faXJlLAogICAgIC5yZWFkX21zaV9mcm9tX2lyZSA9IGFtZF9pb21tdV9yZWFkX21zaV9mcm9t
X2lyZSwKICAgICAuc2V0dXBfaHBldF9tc2kgPSBhbWRfc2V0dXBfaHBldF9tc2ksCisgICAgLmFk
anVzdF9pcnFfYWZmaW5pdGllcyA9IGlvdl9hZGp1c3RfaXJxX2FmZmluaXRpZXMsCiAgICAgLnN1
c3BlbmQgPSBhbWRfaW9tbXVfc3VzcGVuZCwKICAgICAucmVzdW1lID0gYW1kX2lvbW11X3Jlc3Vt
ZSwKICAgICAuc2hhcmVfcDJtID0gYW1kX2lvbW11X3NoYXJlX3AybSwKQEAgLTU3NCw0ICs1OTYs
NSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGlvbW11X29wcyBfX2luaXRjb25zCiBzdGF0aWMgY29u
c3Qgc3RydWN0IGlvbW11X2luaXRfb3BzIF9faW5pdGNvbnN0cmVsIF9pb21tdV9pbml0X29wcyA9
IHsKICAgICAub3BzID0gJl9pb21tdV9vcHMsCiAgICAgLnNldHVwID0gaW92X2RldGVjdCwKKyAg
ICAuc3VwcG9ydHNfeDJhcGljID0gaW92X3N1cHBvcnRzX3h0LAogfTsKLS0tIGEveGVuL2luY2x1
ZGUvYXNtLXg4Ni9odm0vc3ZtL2FtZC1pb21tdS1wcm90by5oCisrKyBiL3hlbi9pbmNsdWRlL2Fz
bS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtcHJvdG8uaApAQCAtNDgsOCArNDgsMTEgQEAgaW50IGFt
ZF9pb21tdV9kZXRlY3RfYWNwaSh2b2lkKTsKIHZvaWQgZ2V0X2lvbW11X2ZlYXR1cmVzKHN0cnVj
dCBhbWRfaW9tbXUgKmlvbW11KTsKIAogLyogYW1kLWlvbW11LWluaXQgZnVuY3Rpb25zICovCi1p
bnQgYW1kX2lvbW11X2luaXQodm9pZCk7CitpbnQgYW1kX2lvbW11X3ByZXBhcmUoYm9vbCB4dCk7
CitpbnQgYW1kX2lvbW11X2luaXQoYm9vbCB4dCk7CitpbnQgYW1kX2lvbW11X2luaXRfaW50ZXJy
dXB0KHZvaWQpOwogaW50IGFtZF9pb21tdV91cGRhdGVfaXZyc19tYXBwaW5nX2FjcGkodm9pZCk7
CitpbnQgaW92X2FkanVzdF9pcnFfYWZmaW5pdGllcyh2b2lkKTsKIAogLyogbWFwcGluZyBmdW5j
dGlvbnMgKi8KIGludCBfX211c3RfY2hlY2sgYW1kX2lvbW11X21hcF9wYWdlKHN0cnVjdCBkb21h
aW4gKmQsIGRmbl90IGRmbiwKQEAgLTk2LDYgKzk5LDcgQEAgdm9pZCBhbWRfaW9tbXVfZmx1c2hf
YWxsX2NhY2hlcyhzdHJ1Y3QgYQogc3RydWN0IGFtZF9pb21tdSAqZmluZF9pb21tdV9mb3JfZGV2
aWNlKGludCBzZWcsIGludCBiZGYpOwogCiAvKiBpbnRlcnJ1cHQgcmVtYXBwaW5nICovCitib29s
IGlvdl9zdXBwb3J0c194dCh2b2lkKTsKIGludCBhbWRfaW9tbXVfc2V0dXBfaW9hcGljX3JlbWFw
cGluZyh2b2lkKTsKIHZvaWQgKmFtZF9pb21tdV9hbGxvY19pbnRyZW1hcF90YWJsZSgKICAgICBj
b25zdCBzdHJ1Y3QgYW1kX2lvbW11ICosIHVuc2lnbmVkIGxvbmcgKiopOwo=

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-IRTE-update-ordering.patch"
Content-Description: AMD-IOMMU-IRTE-update-ordering.patch
Content-Disposition: attachment;
	filename="AMD-IOMMU-IRTE-update-ordering.patch"; size=4693;
	creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <92D64BBCCE992B48B591D92B05F03058@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBjb3JyZWN0IElSVEUgdXBkYXRpbmcKCkZsdXNoaW5nIGRpZG4ndCBnZXQgZG9u
ZSBhbG9uZyB0aGUgbGluZXMgb2Ygd2hhdCB0aGUgc3BlY2lmaWNhdGlvbiBzYXlzLgpNYXJrIGVu
dHJpZXMgdG8gYmUgdXBkYXRlZCBhcyBub3QgcmVtYXBwZWQgKHdoaWNoIHdpbGwgcmVzdWx0IGlu
CmludGVycnVwdCByZXF1ZXN0cyB0byBnZXQgdGFyZ2V0IGFib3J0ZWQsIGJ1dCB0aGUgaW50ZXJy
dXB0cyBzaG91bGQgYmUKbWFza2VkIGFueXdheSBhdCB0aGF0IHBvaW50IGluIHRpbWUpLCBpc3N1
ZSB0aGUgZmx1c2gsIGFuZCBvbmx5IHRoZW4Kd3JpdGUgdGhlIG5ldyBlbnRyeS4KCkluIHVwZGF0
ZV9pbnRyZW1hcF9lbnRyeV9mcm9tX21zaV9tc2coKSBhbHNvIGZvbGQgdGhlIGR1cGxpY2F0ZSBp
bml0aWFsCmxvY2sgZGV0ZXJtaW5hdGlvbiBhbmQgYWNxdWlyZSBpbnRvIGp1c3QgYSBzaW5nbGUg
aW5zdGFuY2UuCgpTaWduZWQtb2ZmLWJ5OiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+
Ci0tLQpSRkM6IFB1dHRpbmcgdGhlIGZsdXNoIGludm9jYXRpb25zIGluIGxvb3BzIGlzbid0IG92
ZXJseSBuaWNlLCBidXQgSQogICAgIGRvbid0IHRoaW5rIHRoaXMgY2FuIHJlYWxseSBiZSBhYnVz
ZWQsIHNpbmNlIGNhbGxlcnMgdXAgdGhlIHN0YWNrCiAgICAgaG9sZCBmdXJ0aGVyIGxvY2tzLiBO
ZXZlcnRoZWxlc3MgSSdkIGxpa2UgdG8gYXNrIGZvciBiZXR0ZXIKICAgICBzdWdnZXN0aW9ucy4K
LS0tCnYzOiBSZW1vdmUgc3RhbGUgcGFydHMgb2YgZGVzY3JpcHRpb24uIFJlLWJhc2UuCnYyOiBQ
YXJ0cyBtb3JwaGVkIGludG8gZWFybGllciBwYXRjaC4KCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0
aHJvdWdoL2FtZC9pb21tdV9pbnRyLmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1k
L2lvbW11X2ludHIuYwpAQCAtMjA3LDkgKzIwNyw3IEBAIHN0YXRpYyB2b2lkIHVwZGF0ZV9pbnRy
ZW1hcF9lbnRyeShjb25zdAogICAgICAgICAgICAgLnZlY3RvciA9IHZlY3RvciwKICAgICAgICAg
fTsKIAotICAgICAgICBBQ0NFU1NfT05DRShlbnRyeS5wdHIxMjgtPnJhd1swXSkgPSAwOwotICAg
ICAgICAvKiBMb3cgaGFsZiwgaW4gcGFydGljdWxhciBSZW1hcEVuLCBuZWVkcyB0byBiZSBjbGVh
cmVkIGZpcnN0LiAqLwotICAgICAgICBiYXJyaWVyKCk7CisgICAgICAgIEFTU0VSVCghZW50cnku
cHRyMTI4LT5mdWxsLnJlbWFwX2VuKTsKICAgICAgICAgZW50cnkucHRyMTI4LT5yYXdbMV0gPQog
ICAgICAgICAgICAgY29udGFpbmVyX29mKCZmdWxsLCB1bmlvbiBpcnRlMTI4LCBmdWxsKS0+cmF3
WzFdOwogICAgICAgICAvKiBIaWdoIGhhbGYgbmVlZHMgdG8gYmUgc2V0IGJlZm9yZSBsb3cgb25l
IChjb250YWluaW5nIFJlbWFwRW4pLiAqLwpAQCAtMjg4LDYgKzI4NiwyMCBAQCBzdGF0aWMgaW50
IHVwZGF0ZV9pbnRyZW1hcF9lbnRyeV9mcm9tX2lvCiAgICAgfQogCiAgICAgZW50cnkgPSBnZXRf
aW50cmVtYXBfZW50cnkoaW9tbXUsIHJlcV9pZCwgb2Zmc2V0KTsKKworICAgIC8qIFRoZSBSZW1h
cEVuIGZpZWxkcyBtYXRjaCBmb3IgYWxsIGZvcm1hdHMuICovCisgICAgd2hpbGUgKCBpb21tdS0+
ZW5hYmxlZCAmJiBlbnRyeS5wdHIzMi0+YmFzaWMucmVtYXBfZW4gKQorICAgIHsKKyAgICAgICAg
ZW50cnkucHRyMzItPmJhc2ljLnJlbWFwX2VuID0gZmFsc2U7CisgICAgICAgIHNwaW5fdW5sb2Nr
KGxvY2spOworCisgICAgICAgIHNwaW5fbG9jaygmaW9tbXUtPmxvY2spOworICAgICAgICBhbWRf
aW9tbXVfZmx1c2hfaW50cmVtYXAoaW9tbXUsIHJlcV9pZCk7CisgICAgICAgIHNwaW5fdW5sb2Nr
KCZpb21tdS0+bG9jayk7CisKKyAgICAgICAgc3Bpbl9sb2NrKGxvY2spOworICAgIH0KKwogICAg
IGlmICggZnJlc2ggKQogICAgICAgICAvKiBub3RoaW5nICovOwogICAgIGVsc2UgaWYgKCAhbG9f
dXBkYXRlICkKQEAgLTMxNywxMyArMzI5LDYgQEAgc3RhdGljIGludCB1cGRhdGVfaW50cmVtYXBf
ZW50cnlfZnJvbV9pbwogCiAgICAgc3Bpbl91bmxvY2tfaXJxcmVzdG9yZShsb2NrLCBmbGFncyk7
CiAKLSAgICBpZiAoIGlvbW11LT5lbmFibGVkICYmICFmcmVzaCApCi0gICAgewotICAgICAgICBz
cGluX2xvY2tfaXJxc2F2ZSgmaW9tbXUtPmxvY2ssIGZsYWdzKTsKLSAgICAgICAgYW1kX2lvbW11
X2ZsdXNoX2ludHJlbWFwKGlvbW11LCByZXFfaWQpOwotICAgICAgICBzcGluX3VubG9ja19pcnFy
ZXN0b3JlKCZpb21tdS0+bG9jaywgZmxhZ3MpOwotICAgIH0KLQogICAgIHNldF9ydGVfaW5kZXgo
cnRlLCBvZmZzZXQpOwogCiAgICAgcmV0dXJuIDA7CkBAIC01NzksMTkgKzU4NCwyNyBAQCBzdGF0
aWMgaW50IHVwZGF0ZV9pbnRyZW1hcF9lbnRyeV9mcm9tX21zCiAgICAgcmVxX2lkID0gZ2V0X2Rt
YV9yZXF1ZXN0b3JfaWQoaW9tbXUtPnNlZywgYmRmKTsKICAgICBhbGlhc19pZCA9IGdldF9pbnRy
ZW1hcF9yZXF1ZXN0b3JfaWQoaW9tbXUtPnNlZywgYmRmKTsKIAorICAgIGxvY2sgPSBnZXRfaW50
cmVtYXBfbG9jayhpb21tdS0+c2VnLCByZXFfaWQpOworICAgIHNwaW5fbG9ja19pcnFzYXZlKGxv
Y2ssIGZsYWdzKTsKKwogICAgIGlmICggbXNnID09IE5VTEwgKQogICAgIHsKLSAgICAgICAgbG9j
ayA9IGdldF9pbnRyZW1hcF9sb2NrKGlvbW11LT5zZWcsIHJlcV9pZCk7Ci0gICAgICAgIHNwaW5f
bG9ja19pcnFzYXZlKGxvY2ssIGZsYWdzKTsKICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBucjsg
KytpICkKICAgICAgICAgICAgIGZyZWVfaW50cmVtYXBfZW50cnkoaW9tbXUsIHJlcV9pZCwgKnJl
bWFwX2luZGV4ICsgaSk7CiAgICAgICAgIHNwaW5fdW5sb2NrX2lycXJlc3RvcmUobG9jaywgZmxh
Z3MpOwotICAgICAgICBnb3RvIGRvbmU7Ci0gICAgfQogCi0gICAgbG9jayA9IGdldF9pbnRyZW1h
cF9sb2NrKGlvbW11LT5zZWcsIHJlcV9pZCk7CisgICAgICAgIGlmICggaW9tbXUtPmVuYWJsZWQg
KQorICAgICAgICB7CisgICAgICAgICAgICBzcGluX2xvY2tfaXJxc2F2ZSgmaW9tbXUtPmxvY2ss
IGZsYWdzKTsKKyAgICAgICAgICAgIGFtZF9pb21tdV9mbHVzaF9pbnRyZW1hcChpb21tdSwgcmVx
X2lkKTsKKyAgICAgICAgICAgIGlmICggYWxpYXNfaWQgIT0gcmVxX2lkICkKKyAgICAgICAgICAg
ICAgICBhbWRfaW9tbXVfZmx1c2hfaW50cmVtYXAoaW9tbXUsIGFsaWFzX2lkKTsKKyAgICAgICAg
ICAgIHNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmlvbW11LT5sb2NrLCBmbGFncyk7CisgICAgICAg
IH0KKworICAgICAgICByZXR1cm4gMDsKKyAgICB9CiAKLSAgICBzcGluX2xvY2tfaXJxc2F2ZShs
b2NrLCBmbGFncyk7CiAgICAgZGVzdF9tb2RlID0gKG1zZy0+YWRkcmVzc19sbyA+PiBNU0lfQURE
Ul9ERVNUTU9ERV9TSElGVCkgJiAweDE7CiAgICAgZGVsaXZlcnlfbW9kZSA9IChtc2ctPmRhdGEg
Pj4gTVNJX0RBVEFfREVMSVZFUllfTU9ERV9TSElGVCkgJiAweDE7CiAgICAgdmVjdG9yID0gKG1z
Zy0+ZGF0YSA+PiBNU0lfREFUQV9WRUNUT1JfU0hJRlQpICYgTVNJX0RBVEFfVkVDVE9SX01BU0s7
CkBAIC02MTUsNiArNjI4LDIyIEBAIHN0YXRpYyBpbnQgdXBkYXRlX2ludHJlbWFwX2VudHJ5X2Zy
b21fbXMKICAgICB9CiAKICAgICBlbnRyeSA9IGdldF9pbnRyZW1hcF9lbnRyeShpb21tdSwgcmVx
X2lkLCBvZmZzZXQpOworCisgICAgLyogVGhlIFJlbWFwRW4gZmllbGRzIG1hdGNoIGZvciBhbGwg
Zm9ybWF0cy4gKi8KKyAgICB3aGlsZSAoIGlvbW11LT5lbmFibGVkICYmIGVudHJ5LnB0cjMyLT5i
YXNpYy5yZW1hcF9lbiApCisgICAgeworICAgICAgICBlbnRyeS5wdHIzMi0+YmFzaWMucmVtYXBf
ZW4gPSBmYWxzZTsKKyAgICAgICAgc3Bpbl91bmxvY2sobG9jayk7CisKKyAgICAgICAgc3Bpbl9s
b2NrKCZpb21tdS0+bG9jayk7CisgICAgICAgIGFtZF9pb21tdV9mbHVzaF9pbnRyZW1hcChpb21t
dSwgcmVxX2lkKTsKKyAgICAgICAgaWYgKCBhbGlhc19pZCAhPSByZXFfaWQgKQorICAgICAgICAg
ICAgYW1kX2lvbW11X2ZsdXNoX2ludHJlbWFwKGlvbW11LCBhbGlhc19pZCk7CisgICAgICAgIHNw
aW5fdW5sb2NrKCZpb21tdS0+bG9jayk7CisKKyAgICAgICAgc3Bpbl9sb2NrKGxvY2spOworICAg
IH0KKwogICAgIHVwZGF0ZV9pbnRyZW1hcF9lbnRyeShpb21tdSwgZW50cnksIHZlY3RvciwgZGVs
aXZlcnlfbW9kZSwgZGVzdF9tb2RlLCBkZXN0KTsKICAgICBzcGluX3VubG9ja19pcnFyZXN0b3Jl
KGxvY2ssIGZsYWdzKTsKIApAQCAtNjM0LDE2ICs2NjMsNiBAQCBzdGF0aWMgaW50IHVwZGF0ZV9p
bnRyZW1hcF9lbnRyeV9mcm9tX21zCiAgICAgICAgICAgICAgICBnZXRfaXZyc19tYXBwaW5ncyhp
b21tdS0+c2VnKVthbGlhc19pZF0uaW50cmVtYXBfdGFibGUpOwogICAgIH0KIAotZG9uZToKLSAg
ICBpZiAoIGlvbW11LT5lbmFibGVkICkKLSAgICB7Ci0gICAgICAgIHNwaW5fbG9ja19pcnFzYXZl
KCZpb21tdS0+bG9jaywgZmxhZ3MpOwotICAgICAgICBhbWRfaW9tbXVfZmx1c2hfaW50cmVtYXAo
aW9tbXUsIHJlcV9pZCk7Ci0gICAgICAgIGlmICggYWxpYXNfaWQgIT0gcmVxX2lkICkKLSAgICAg
ICAgICAgIGFtZF9pb21tdV9mbHVzaF9pbnRyZW1hcChpb21tdSwgYWxpYXNfaWQpOwotICAgICAg
ICBzcGluX3VubG9ja19pcnFyZXN0b3JlKCZpb21tdS0+bG9jaywgZmxhZ3MpOwotICAgIH0KLQog
ICAgIHJldHVybiAwOwogfQogCg==

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; name="AMD-IOMMU-IRT-dump-softirqs.patch"
Content-Description: AMD-IOMMU-IRT-dump-softirqs.patch
Content-Disposition: attachment;
	filename="AMD-IOMMU-IRT-dump-softirqs.patch"; size=1245;
	creation-date="Tue, 16 Jul 2019 16:30:15 GMT";
	modification-date="Tue, 16 Jul 2019 16:30:15 GMT"
Content-ID: <DE174DD50D687D4996CA287E321E767C@namprd18.prod.outlook.com>
Content-Transfer-Encoding: base64

QU1EL0lPTU1VOiBwcm9jZXNzIHNvZnRpcnFzIHdoaWxlIGR1bXBpbmcgSVJUcwoKV2hlbiB0aGVy
ZSBhcmUgc3VmZmljaWVudGx5IG1hbnkgZGV2aWNlcyBsaXN0ZWQgaW4gdGhlIEFDUEkgdGFibGVz
IChubwptYXR0ZXIgaWYgdGhleSBhY3R1YWxseSBleGlzdCksIG91dHB1dCBtYXkgdGFrZSB3YXkg
bG9uZ2VyIHRoYW4gdGhlCndhdGNoZG9nIHdvdWxkIGxpa2UuCgpTaWduZWQtb2ZmLWJ5OiBKYW4g
QmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+Ci0tLQp2MzogTmV3LgotLS0KVEJEOiBTZWVpbmcg
dGhlIHZvbHVtZSBvZiBvdXRwdXQgSSB3b25kZXIgd2hldGhlciB3ZSBzaG91bGQgZnVydGhlcgog
ICAgIHN1cHByZXNzIGxvZ2dpbmcgaGVhZGVycyBvZiBkZXZpY2VzIHdoaWNoIGhhdmUgbm8gYWN0
aXZlIGVudHJ5CiAgICAgKGkuZS4gZW1pdCB0aGUgaGVhZGVyIG9ubHkgdXBvbiBmaW5kaW5nIHRo
ZSBmaXJzdCBJUlRFIHdvcnRoCiAgICAgbG9nZ2luZykuIEFuZCB3aGlsZSBtaW5vciBmb3IgdGhl
IHRvdGFsIHZvbHVtZSBvZiBvdXRwdXQgSSdtCiAgICAgYWxzbyB1bmNvbnZpbmNlZCBsb2dnaW5n
IGJvdGggYSAicGVyIGRldmljZSIgaGVhZGVyIGxpbmUgYW5kIGEKICAgICAic2hhcmVkIiBvbmUg
bWFrZXMgc2Vuc2UsIHdoZW4gb25seSBvbmUgb2YgdGhlIHR3byBjYW4gYWN0dWFsbHkKICAgICBi
ZSBmb2xsb3dlZCBieSBhY3R1YWwgY29udGVudHMuCgotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhy
b3VnaC9hbWQvaW9tbXVfaW50ci5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9p
b21tdV9pbnRyLmMKQEAgLTIyLDYgKzIyLDcgQEAKICNpbmNsdWRlIDxhc20vaHZtL3N2bS9hbWQt
aW9tbXUtcHJvdG8uaD4KICNpbmNsdWRlIDxhc20vaW9fYXBpYy5oPgogI2luY2x1ZGUgPHhlbi9r
ZXloYW5kbGVyLmg+CisjaW5jbHVkZSA8eGVuL3NvZnRpcnEuaD4KIAogc3RydWN0IGlydGVfYmFz
aWMgewogICAgIGJvb2wgcmVtYXBfZW46MTsKQEAgLTkxNyw2ICs5MTgsOCBAQCBzdGF0aWMgaW50
IGR1bXBfaW50cmVtYXBfbWFwcGluZyhjb25zdCBzCiAgICAgZHVtcF9pbnRyZW1hcF90YWJsZShp
b21tdSwgaXZyc19tYXBwaW5nLT5pbnRyZW1hcF90YWJsZSk7CiAgICAgc3Bpbl91bmxvY2tfaXJx
cmVzdG9yZSgmKGl2cnNfbWFwcGluZy0+aW50cmVtYXBfbG9jayksIGZsYWdzKTsKIAorICAgIHBy
b2Nlc3NfcGVuZGluZ19zb2Z0aXJxcygpOworCiAgICAgcmV0dXJuIDA7CiB9CiAK

--_015_6272c301a90538cfdd1a645f3d703241susecom_
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: base64
Content-Disposition: inline

X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVs
IG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0
cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

--_015_6272c301a90538cfdd1a645f3d703241susecom_--


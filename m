Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B711C87D95
	for <lists+xen-devel@lfdr.de>; Fri,  9 Aug 2019 17:03:33 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hw6ML-0007FY-9I; Fri, 09 Aug 2019 14:59:13 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=yG4W=WF=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1hw6M3-0006eT-QY
 for xen-devel@lists.xenproject.org; Fri, 09 Aug 2019 14:58:55 +0000
X-Inumbo-ID: 332b17b5-bab6-11e9-8980-bc764e045a96
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 332b17b5-bab6-11e9-8980-bc764e045a96;
 Fri, 09 Aug 2019 14:58:52 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 5BB57B0B6;
 Fri,  9 Aug 2019 14:58:51 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Fri,  9 Aug 2019 16:58:23 +0200
Message-Id: <20190809145833.1020-39-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190809145833.1020-1-jgross@suse.com>
References: <20190809145833.1020-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH v2 38/48] xen/sched: move per-cpu variable
 scheduler to struct sched_resource
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Tim Deegan <tim@xen.org>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Dario Faggioli <dfaggioli@suse.com>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGF2aW5nIGEgcG9pbnRlciB0byBzdHJ1Y3Qgc2NoZWR1bGVyIGluIHN0cnVjdCBzY2hlZF9yZXNv
dXJjZSBpbnN0ZWFkCm9mIHBlciBjcHUgaXMgZW5vdWdoLgoKU2lnbmVkLW9mZi1ieTogSnVlcmdl
biBHcm9zcyA8amdyb3NzQHN1c2UuY29tPgotLS0KVjE6IG5ldyBwYXRjaAotLS0KIHhlbi9jb21t
b24vc2NoZWRfY3JlZGl0LmMgIHwgMTggKysrKysrKysrKystLS0tLS0tCiB4ZW4vY29tbW9uL3Nj
aGVkX2NyZWRpdDIuYyB8ICAzICsrLQogeGVuL2NvbW1vbi9zY2hlZHVsZS5jICAgICAgfCAxNSAr
KysrKysrLS0tLS0tLS0KIHhlbi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oIHwgIDIgKy0KIDQgZmls
ZXMgY2hhbmdlZCwgMjEgaW5zZXJ0aW9ucygrKSwgMTcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0
IGEveGVuL2NvbW1vbi9zY2hlZF9jcmVkaXQuYyBiL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0LmMK
aW5kZXggYWViNjU5NTc3ZS4uYTY1NzUxMDY4ZCAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9zY2hl
ZF9jcmVkaXQuYworKysgYi94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdC5jCkBAIC0zNTIsOSArMzUy
LDEwIEBAIERFRklORV9QRVJfQ1BVKHVuc2lnbmVkIGludCwgbGFzdF90aWNrbGVfY3B1KTsKIHN0
YXRpYyBpbmxpbmUgdm9pZCBfX3J1bnFfdGlja2xlKHN0cnVjdCBjc2NoZWRfdW5pdCAqbmV3KQog
ewogICAgIHVuc2lnbmVkIGludCBjcHUgPSBzY2hlZF91bml0X2NwdShuZXctPnVuaXQpOworICAg
IHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqc2QgPSBnZXRfc2NoZWRfcmVzKGNwdSk7CiAgICAgc3Ry
dWN0IHNjaGVkX3VuaXQgKnVuaXQgPSBuZXctPnVuaXQ7CiAgICAgc3RydWN0IGNzY2hlZF91bml0
ICogY29uc3QgY3VyID0gQ1NDSEVEX1VOSVQoY3Vycl9vbl9jcHUoY3B1KSk7Ci0gICAgc3RydWN0
IGNzY2hlZF9wcml2YXRlICpwcnYgPSBDU0NIRURfUFJJVihwZXJfY3B1KHNjaGVkdWxlciwgY3B1
KSk7CisgICAgc3RydWN0IGNzY2hlZF9wcml2YXRlICpwcnYgPSBDU0NIRURfUFJJVihzZC0+c2No
ZWR1bGVyKTsKICAgICBjcHVtYXNrX3QgbWFzaywgaWRsZV9tYXNrLCAqb25saW5lOwogICAgIGlu
dCBiYWxhbmNlX3N0ZXAsIGlkbGVyc19lbXB0eTsKIApAQCAtOTMxLDcgKzkzMiw4IEBAIGNzY2hl
ZF91bml0X2FjY3Qoc3RydWN0IGNzY2hlZF9wcml2YXRlICpwcnYsIHVuc2lnbmVkIGludCBjcHUp
CiB7CiAgICAgc3RydWN0IHNjaGVkX3VuaXQgKmN1cnJ1bml0ID0gY3VycmVudC0+c2NoZWRfdW5p
dDsKICAgICBzdHJ1Y3QgY3NjaGVkX3VuaXQgKiBjb25zdCBzdmMgPSBDU0NIRURfVU5JVChjdXJy
dW5pdCk7Ci0gICAgY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzID0gcGVyX2NwdShzY2hlZHVs
ZXIsIGNwdSk7CisgICAgc3RydWN0IHNjaGVkX3Jlc291cmNlICpzZCA9IGdldF9zY2hlZF9yZXMo
Y3B1KTsKKyAgICBjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMgPSBzZC0+c2NoZWR1bGVyOwog
CiAgICAgQVNTRVJUKCBzY2hlZF91bml0X2NwdShjdXJydW5pdCkgPT0gY3B1ICk7CiAgICAgQVNT
RVJUKCBzdmMtPnNkb20gIT0gTlVMTCApOwpAQCAtOTg3LDggKzk4OSw3IEBAIGNzY2hlZF91bml0
X2FjY3Qoc3RydWN0IGNzY2hlZF9wcml2YXRlICpwcnYsIHVuc2lnbmVkIGludCBjcHUpCiAgICAg
ICAgICAgICAgKiBpZGxlcnMuIEJ1dCwgaWYgd2UgYXJlIGhlcmUsIGl0IG1lYW5zIHRoZXJlIGlz
IHNvbWVvbmUgcnVubmluZwogICAgICAgICAgICAgICogb24gaXQsIGFuZCBoZW5jZSB0aGUgYml0
IG11c3QgYmUgemVybyBhbHJlYWR5LgogICAgICAgICAgICAgICovCi0gICAgICAgICAgICBBU1NF
UlQoIWNwdW1hc2tfdGVzdF9jcHUoY3B1LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIENTQ0hFRF9QUklWKHBlcl9jcHUoc2NoZWR1bGVyLCBjcHUpKS0+aWRsZXJzKSk7Cisg
ICAgICAgICAgICBBU1NFUlQoIWNwdW1hc2tfdGVzdF9jcHUoY3B1LCBDU0NIRURfUFJJVihzZC0+
c2NoZWR1bGVyKS0+aWRsZXJzKSk7CiAgICAgICAgICAgICBjcHVfcmFpc2Vfc29mdGlycShjcHUs
IFNDSEVEVUxFX1NPRlRJUlEpOwogICAgICAgICB9CiAgICAgfQpAQCAtMTA4Myw2ICsxMDg0LDcg
QEAgY3NjaGVkX3VuaXRfc2xlZXAoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qg
c2NoZWRfdW5pdCAqdW5pdCkKIHsKICAgICBzdHJ1Y3QgY3NjaGVkX3VuaXQgKiBjb25zdCBzdmMg
PSBDU0NIRURfVU5JVCh1bml0KTsKICAgICB1bnNpZ25lZCBpbnQgY3B1ID0gc2NoZWRfdW5pdF9j
cHUodW5pdCk7CisgICAgc3RydWN0IHNjaGVkX3Jlc291cmNlICpzZCA9IGdldF9zY2hlZF9yZXMo
Y3B1KTsKIAogICAgIFNDSEVEX1NUQVRfQ1JBTksodW5pdF9zbGVlcCk7CiAKQEAgLTEwOTUsNyAr
MTA5Nyw3IEBAIGNzY2hlZF91bml0X3NsZWVwKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywg
c3RydWN0IHNjaGVkX3VuaXQgKnVuaXQpCiAgICAgICAgICAqIEJ1dCwgd2UgYXJlIGhlcmUgYmVj
YXVzZSB1bml0IGlzIGdvaW5nIHRvIHNsZWVwIHdoaWxlIHJ1bm5pbmcgb24gY3B1LAogICAgICAg
ICAgKiBzbyB0aGUgYml0IG11c3QgYmUgemVybyBhbHJlYWR5LgogICAgICAgICAgKi8KLSAgICAg
ICAgQVNTRVJUKCFjcHVtYXNrX3Rlc3RfY3B1KGNwdSwgQ1NDSEVEX1BSSVYocGVyX2NwdShzY2hl
ZHVsZXIsIGNwdSkpLT5pZGxlcnMpKTsKKyAgICAgICAgQVNTRVJUKCFjcHVtYXNrX3Rlc3RfY3B1
KGNwdSwgQ1NDSEVEX1BSSVYoc2QtPnNjaGVkdWxlciktPmlkbGVycykpOwogICAgICAgICBjcHVf
cmFpc2Vfc29mdGlycShjcHUsIFNDSEVEVUxFX1NPRlRJUlEpOwogICAgIH0KICAgICBlbHNlIGlm
ICggX191bml0X29uX3J1bnEoc3ZjKSApCkBAIC0xNTc1LDggKzE1NzcsOSBAQCBzdGF0aWMgdm9p
ZAogY3NjaGVkX3RpY2sodm9pZCAqX2NwdSkKIHsKICAgICB1bnNpZ25lZCBpbnQgY3B1ID0gKHVu
c2lnbmVkIGxvbmcpX2NwdTsKKyAgICBzdHJ1Y3Qgc2NoZWRfcmVzb3VyY2UgKnNkID0gZ2V0X3Nj
aGVkX3JlcyhjcHUpOwogICAgIHN0cnVjdCBjc2NoZWRfcGNwdSAqc3BjID0gQ1NDSEVEX1BDUFUo
Y3B1KTsKLSAgICBzdHJ1Y3QgY3NjaGVkX3ByaXZhdGUgKnBydiA9IENTQ0hFRF9QUklWKHBlcl9j
cHUoc2NoZWR1bGVyLCBjcHUpKTsKKyAgICBzdHJ1Y3QgY3NjaGVkX3ByaXZhdGUgKnBydiA9IENT
Q0hFRF9QUklWKHNkLT5zY2hlZHVsZXIpOwogCiAgICAgc3BjLT50aWNrKys7CiAKQEAgLTE2MDEs
NyArMTYwNCw4IEBAIGNzY2hlZF90aWNrKHZvaWQgKl9jcHUpCiBzdGF0aWMgc3RydWN0IGNzY2hl
ZF91bml0ICoKIGNzY2hlZF9ydW5xX3N0ZWFsKGludCBwZWVyX2NwdSwgaW50IGNwdSwgaW50IHBy
aSwgaW50IGJhbGFuY2Vfc3RlcCkKIHsKLSAgICBjb25zdCBzdHJ1Y3QgY3NjaGVkX3ByaXZhdGUg
KiBjb25zdCBwcnYgPSBDU0NIRURfUFJJVihwZXJfY3B1KHNjaGVkdWxlciwgY3B1KSk7CisgICAg
c3RydWN0IHNjaGVkX3Jlc291cmNlICpzZCA9IGdldF9zY2hlZF9yZXMoY3B1KTsKKyAgICBjb25z
dCBzdHJ1Y3QgY3NjaGVkX3ByaXZhdGUgKiBjb25zdCBwcnYgPSBDU0NIRURfUFJJVihzZC0+c2No
ZWR1bGVyKTsKICAgICBjb25zdCBzdHJ1Y3QgY3NjaGVkX3BjcHUgKiBjb25zdCBwZWVyX3BjcHUg
PSBDU0NIRURfUENQVShwZWVyX2NwdSk7CiAgICAgc3RydWN0IGNzY2hlZF91bml0ICpzcGVlcjsK
ICAgICBzdHJ1Y3QgbGlzdF9oZWFkICppdGVyOwpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hl
ZF9jcmVkaXQyLmMgYi94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdDIuYwppbmRleCBhZjA2ZDAyMDU2
Li4xOWZkMGUwMDhjIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdDIuYworKysg
Yi94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdDIuYwpAQCAtMzI2Niw4ICszMjY2LDkgQEAgcnVucV9j
YW5kaWRhdGUoc3RydWN0IGNzY2hlZDJfcnVucXVldWVfZGF0YSAqcnFkLAogICAgICAgICAgICAg
ICAgdW5zaWduZWQgaW50ICpza2lwcGVkKQogewogICAgIHN0cnVjdCBsaXN0X2hlYWQgKml0ZXIs
ICp0ZW1wOworICAgIHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqc2QgPSBnZXRfc2NoZWRfcmVzKGNw
dSk7CiAgICAgc3RydWN0IGNzY2hlZDJfdW5pdCAqc25leHQgPSBOVUxMOwotICAgIHN0cnVjdCBj
c2NoZWQyX3ByaXZhdGUgKnBydiA9IGNzY2hlZDJfcHJpdihwZXJfY3B1KHNjaGVkdWxlciwgY3B1
KSk7CisgICAgc3RydWN0IGNzY2hlZDJfcHJpdmF0ZSAqcHJ2ID0gY3NjaGVkMl9wcml2KHNkLT5z
Y2hlZHVsZXIpOwogICAgIGJvb2wgeWllbGQgPSBmYWxzZSwgc29mdF9hZmZfcHJlZW1wdCA9IGZh
bHNlOwogCiAgICAgKnNraXBwZWQgPSAwOwpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZHVs
ZS5jIGIveGVuL2NvbW1vbi9zY2hlZHVsZS5jCmluZGV4IGJlNWYwM2I2MjYuLjYzNWVlODhjMzEg
MTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vc2NoZWR1bGUuYworKysgYi94ZW4vY29tbW9uL3NjaGVk
dWxlLmMKQEAgLTY5LDcgKzY5LDYgQEAgc3RhdGljIHZvaWQgdmNwdV9zaW5nbGVzaG90X3RpbWVy
X2ZuKHZvaWQgKmRhdGEpOwogc3RhdGljIHZvaWQgcG9sbF90aW1lcl9mbih2b2lkICpkYXRhKTsK
IAogLyogVGhpcyBpcyBnbG9iYWwgZm9yIG5vdyBzbyB0aGF0IHByaXZhdGUgaW1wbGVtZW50YXRp
b25zIGNhbiByZWFjaCBpdCAqLwotREVGSU5FX1BFUl9DUFUoc3RydWN0IHNjaGVkdWxlciAqLCBz
Y2hlZHVsZXIpOwogREVGSU5FX1BFUl9DUFVfUkVBRF9NT1NUTFkoc3RydWN0IHNjaGVkX3Jlc291
cmNlICosIHNjaGVkX3Jlcyk7CiBzdGF0aWMgREVGSU5FX1BFUl9DUFVfUkVBRF9NT1NUTFkodW5z
aWduZWQgaW50LCBzY2hlZF9yZXNfaWR4KTsKIApAQCAtMTg4LDcgKzE4Nyw3IEBAIHN0YXRpYyBp
bmxpbmUgc3RydWN0IHNjaGVkdWxlciAqdW5pdF9zY2hlZHVsZXIoY29uc3Qgc3RydWN0IHNjaGVk
X3VuaXQgKnVuaXQpCiAgICAgICovCiAKICAgICBBU1NFUlQoaXNfaWRsZV9kb21haW4oZCkpOwot
ICAgIHJldHVybiBwZXJfY3B1KHNjaGVkdWxlciwgdW5pdC0+cmVzLT5wcm9jZXNzb3IpOworICAg
IHJldHVybiB1bml0LT5yZXMtPnNjaGVkdWxlcjsKIH0KIAogc3RhdGljIGlubGluZSBzdHJ1Y3Qg
c2NoZWR1bGVyICp2Y3B1X3NjaGVkdWxlcihjb25zdCBzdHJ1Y3QgdmNwdSAqdikKQEAgLTE4NzYs
OCArMTg3NSw4IEBAIHN0YXRpYyBib29sIHNjaGVkX3Rhc2tsZXRfY2hlY2sodW5zaWduZWQgaW50
IGNwdSkKIHN0YXRpYyBzdHJ1Y3Qgc2NoZWRfdW5pdCAqZG9fc2NoZWR1bGUoc3RydWN0IHNjaGVk
X3VuaXQgKnByZXYsIHNfdGltZV90IG5vdywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdW5zaWduZWQgaW50IGNwdSkKIHsKLSAgICBzdHJ1Y3Qgc2NoZWR1bGVyICpzY2hl
ZCA9IHBlcl9jcHUoc2NoZWR1bGVyLCBjcHUpOwogICAgIHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAq
c2QgPSBnZXRfc2NoZWRfcmVzKGNwdSk7CisgICAgc3RydWN0IHNjaGVkdWxlciAqc2NoZWQgPSBz
ZC0+c2NoZWR1bGVyOwogICAgIHN0cnVjdCBzY2hlZF91bml0ICpuZXh0OwogCiAgICAgLyogZ2V0
IHBvbGljeS1zcGVjaWZpYyBkZWNpc2lvbiBvbiBzY2hlZHVsaW5nLi4uICovCkBAIC0yMjg1LDcg
KzIyODQsNyBAQCBzdGF0aWMgaW50IGNwdV9zY2hlZHVsZV91cCh1bnNpZ25lZCBpbnQgY3B1KQog
ICAgIHNkLT5jcHVzID0gY3B1bWFza19vZihjcHUpOwogICAgIHNldF9zY2hlZF9yZXMoY3B1LCBz
ZCk7CiAKLSAgICBwZXJfY3B1KHNjaGVkdWxlciwgY3B1KSA9ICZzY2hlZF9pZGxlX29wczsKKyAg
ICBzZC0+c2NoZWR1bGVyID0gJnNjaGVkX2lkbGVfb3BzOwogICAgIHNwaW5fbG9ja19pbml0KCZz
ZC0+X2xvY2spOwogICAgIHNkLT5zY2hlZHVsZV9sb2NrID0gJnNjaGVkX2ZyZWVfY3B1X2xvY2s7
CiAgICAgaW5pdF90aW1lcigmc2QtPnNfdGltZXIsIHNfdGltZXJfZm4sIE5VTEwsIGNwdSk7CkBA
IC0yNDk2LDcgKzI0OTUsNyBAQCBpbnQgc2NoZWR1bGVfY3B1X3N3aXRjaCh1bnNpZ25lZCBpbnQg
Y3B1LCBzdHJ1Y3QgY3B1cG9vbCAqYykKIHsKICAgICBzdHJ1Y3QgdmNwdSAqaWRsZTsKICAgICB2
b2lkICpwcHJpdiwgKnBwcml2X29sZCwgKnZwcml2LCAqdnByaXZfb2xkOwotICAgIHN0cnVjdCBz
Y2hlZHVsZXIgKm9sZF9vcHMgPSBwZXJfY3B1KHNjaGVkdWxlciwgY3B1KTsKKyAgICBzdHJ1Y3Qg
c2NoZWR1bGVyICpvbGRfb3BzID0gZ2V0X3NjaGVkX3JlcyhjcHUpLT5zY2hlZHVsZXI7CiAgICAg
c3RydWN0IHNjaGVkdWxlciAqbmV3X29wcyA9IChjID09IE5VTEwpID8gJnNjaGVkX2lkbGVfb3Bz
IDogYy0+c2NoZWQ7CiAgICAgc3RydWN0IGNwdXBvb2wgKm9sZF9wb29sID0gcGVyX2NwdShjcHVw
b29sLCBjcHUpOwogICAgIHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqc2QgPSBnZXRfc2NoZWRfcmVz
KGNwdSk7CkBAIC0yNTYwLDcgKzI1NTksNyBAQCBpbnQgc2NoZWR1bGVfY3B1X3N3aXRjaCh1bnNp
Z25lZCBpbnQgY3B1LCBzdHJ1Y3QgY3B1cG9vbCAqYykKICAgICBwcHJpdl9vbGQgPSBzZC0+c2No
ZWRfcHJpdjsKICAgICBuZXdfbG9jayA9IHNjaGVkX3N3aXRjaF9zY2hlZChuZXdfb3BzLCBjcHUs
IHBwcml2LCB2cHJpdik7CiAKLSAgICBwZXJfY3B1KHNjaGVkdWxlciwgY3B1KSA9IG5ld19vcHM7
CisgICAgc2QtPnNjaGVkdWxlciA9IG5ld19vcHM7CiAgICAgc2QtPnNjaGVkX3ByaXYgPSBwcHJp
djsKIAogICAgIC8qCkBAIC0yNjYwLDcgKzI2NTksNyBAQCB2b2lkIHNjaGVkX3RpY2tfc3VzcGVu
ZCh2b2lkKQogICAgIHN0cnVjdCBzY2hlZHVsZXIgKnNjaGVkOwogICAgIHVuc2lnbmVkIGludCBj
cHUgPSBzbXBfcHJvY2Vzc29yX2lkKCk7CiAKLSAgICBzY2hlZCA9IHBlcl9jcHUoc2NoZWR1bGVy
LCBjcHUpOworICAgIHNjaGVkID0gZ2V0X3NjaGVkX3JlcyhjcHUpLT5zY2hlZHVsZXI7CiAgICAg
c2NoZWRfZG9fdGlja19zdXNwZW5kKHNjaGVkLCBjcHUpOwogICAgIHJjdV9pZGxlX2VudGVyKGNw
dSk7CiAgICAgcmN1X2lkbGVfdGltZXJfc3RhcnQoKTsKQEAgLTI2NzMsNyArMjY3Miw3IEBAIHZv
aWQgc2NoZWRfdGlja19yZXN1bWUodm9pZCkKIAogICAgIHJjdV9pZGxlX3RpbWVyX3N0b3AoKTsK
ICAgICByY3VfaWRsZV9leGl0KGNwdSk7Ci0gICAgc2NoZWQgPSBwZXJfY3B1KHNjaGVkdWxlciwg
Y3B1KTsKKyAgICBzY2hlZCA9IGdldF9zY2hlZF9yZXMoY3B1KS0+c2NoZWR1bGVyOwogICAgIHNj
aGVkX2RvX3RpY2tfcmVzdW1lKHNjaGVkLCBjcHUpOwogfQogCmRpZmYgLS1naXQgYS94ZW4vaW5j
bHVkZS94ZW4vc2NoZWQtaWYuaCBiL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oCmluZGV4IGVi
NmI5ZWY1NWMuLjk0MDU3ZWE5ZGQgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC1p
Zi5oCisrKyBiL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oCkBAIC0zNiw2ICszNiw3IEBAIGV4
dGVybiBjb25zdCBjcHVtYXNrX3QgKnNjaGVkX3Jlc19tYXNrOwogICogYXMgdGhlIHJlc3Qgb2Yg
dGhlIHN0cnVjdC4gIEp1c3QgaGF2ZSB0aGUgc2NoZWR1bGVyIHBvaW50IHRvIHRoZQogICogb25l
IGl0IHdhbnRzIChUaGlzIG1heSBiZSB0aGUgb25lIHJpZ2h0IGluIGZyb250IG9mIGl0KS4qLwog
c3RydWN0IHNjaGVkX3Jlc291cmNlIHsKKyAgICBzdHJ1Y3Qgc2NoZWR1bGVyICAgKnNjaGVkdWxl
cjsKICAgICBzcGlubG9ja190ICAgICAgICAgKnNjaGVkdWxlX2xvY2ssCiAgICAgICAgICAgICAg
ICAgICAgICAgIF9sb2NrOwogICAgIHN0cnVjdCBzY2hlZF91bml0ICAqY3VycjsgICAgICAgICAg
IC8qIGN1cnJlbnQgdGFzayAgICAgICAgICAgICAgICAgICAgKi8KQEAgLTUwLDcgKzUxLDYgQEAg
c3RydWN0IHNjaGVkX3Jlc291cmNlIHsKIAogI2RlZmluZSBjdXJyX29uX2NwdShjKSAgICAoZ2V0
X3NjaGVkX3JlcyhjKS0+Y3VycikKIAotREVDTEFSRV9QRVJfQ1BVKHN0cnVjdCBzY2hlZHVsZXIg
Kiwgc2NoZWR1bGVyKTsKIERFQ0xBUkVfUEVSX0NQVShzdHJ1Y3QgY3B1cG9vbCAqLCBjcHVwb29s
KTsKIERFQ0xBUkVfUEVSX0NQVShzdHJ1Y3Qgc2NoZWRfcmVzb3VyY2UgKiwgc2NoZWRfcmVzKTsK
IAotLSAKMi4xNi40CgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5v
cmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZl
bA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 5D0B4142A87
	for <lists+xen-devel@lfdr.de>; Mon, 20 Jan 2020 13:23:49 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1itW3I-0001BJ-AQ; Mon, 20 Jan 2020 12:21:08 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=Nhcu=3J=suse.de=tzimmermann@srs-us1.protection.inumbo.net>)
 id 1itW3G-0001B1-4V
 for xen-devel@lists.xenproject.org; Mon, 20 Jan 2020 12:21:06 +0000
X-Inumbo-ID: 4efe9dd2-3b7f-11ea-9fd7-bc764e2007e4
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 4efe9dd2-3b7f-11ea-9fd7-bc764e2007e4;
 Mon, 20 Jan 2020 12:20:56 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id BE049AC2F;
 Mon, 20 Jan 2020 12:20:54 +0000 (UTC)
From: Thomas Zimmermann <tzimmermann@suse.de>
To: airlied@linux.ie, daniel@ffwll.ch, kraxel@redhat.com,
 maarten.lankhorst@linux.intel.com, mripard@kernel.org, hdegoede@redhat.com,
 david@lechnology.com, noralf@tronnes.org, sean@poorly.run,
 oleksandr_andrushchenko@epam.com, sam@ravnborg.org,
 laurent.pinchart@ideasonboard.com, emil.velikov@collabora.com
Date: Mon, 20 Jan 2020 13:20:49 +0100
Message-Id: <20200120122051.25178-3-tzimmermann@suse.de>
X-Mailer: git-send-email 2.24.1
In-Reply-To: <20200120122051.25178-1-tzimmermann@suse.de>
References: <20200120122051.25178-1-tzimmermann@suse.de>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v3 2/4] drm: Initialize struct
 drm_crtc_state.no_vblank from device settings
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: xen-devel@lists.xenproject.org, Thomas Zimmermann <tzimmermann@suse.de>,
 dri-devel@lists.freedesktop.org, virtualization@lists.linux-foundation.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QXQgdGhlIGVuZCBvZiBhIGNvbW1pdCwgYXRvbWljIGhlbHBlcnMgY2FuIGdlbmVyYXRlIGEgVkJM
QU5LIGV2ZW50CmF1dG9tYXRpY2FsbHkuIE9yaWdpbmFsbHkgaW1wbGVtZW50ZWQgZm9yIHdyaXRl
YmFjayBjb25uZWN0b3JzLCB0aGUKZnVuY3Rpb25hbGl0eSBjYW4gYmUgdXNlZCBieSBhbnkgZHJp
dmVyIGFuZC9vciBoYXJkd2FyZSB3aXRob3V0IHByb3BlcgpWQkxBTksgaW50ZXJydXB0LgoKRmly
c3Qgb2YgYWxsLCB0aGUgcGF0Y2ggdXBkYXRlcyB0aGUgZG9jdW1lbnRhdGlvbiB0byBtYWtlIHRo
aXMgYmVoYXZpb3VyCm9mZmljaWFsOiBzZXR0aW5ncyBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUubm9f
dmJsYW5rIHRvIHRydWUgZW5hYmxlcwphdXRvbWF0aWMgVkJMQU5LIGdlbmVyYXRpb24uCgpBdG9t
aWMgbW9kZXNldHRpbmcgaGVscGVyIHNldCB0aGUgaW5pdGlhbCB2YWx1ZSBvZiBub192Ymxhbmsg
aW4KZHJtX2F0b21pY19oZWxwZXJfY2hlY2tfbW9kZXNldCgpLiBJZiB2YmxhbmtpbmcgaGFzIGJl
ZW4gaW5pdGlhbGl6ZWQKZm9yIGEgQ1JUQywgbm9fYmxhbmsgaXMgZGlzYWJsZWQuIE90aGVyd2lz
ZSBpdCdzIGVuYWJsZWQuIEhlbmNlLAphdG9taWMgaGVscGVycyB3aWxsIGF1dG9tYXRpY2FsbHkg
c2VuZCBvdXQgVkJMQU5LIGV2ZW50cyB3aXRoIGFueQpkcml2ZXIgdGhhdCBkaWQgbm90IGluaXRp
YWxpemUgdmJsYW5raW5nLgoKQXMgZHJpdmVycyBwcmV2aW91c2x5IHNlbmQgb3V0IFZCTEFOSyBl
dmVudHMgYnkgdGhlbXNlbHZlcywgYWxsCmFmZmVjdGVkIGRyaXZlcnMgaGF2ZSB0byBiZSB1cGRh
dGVkIGFzIHdlbGwuIFVzdWFsbHksIGRlbGV0aW5nIHRoZQpkcml2ZXIncyB2YmxhbmtpbmcgY29k
ZSBpcyBzdWZmaWNpZW50LiBYZW4gaW1wbGVtZW50cyBpdHMgb3duIGxvZ2ljCmZvciBnZW5lcmF0
aW5nIGV2ZW50cyBhbmQgdGhlcmVmb3JlIG5lZWRzIHRvIG92ZXJyaWRlIG5vX3ZibGFuawp3aXRo
IGEgdmFsdWUgb2YgZmFsc2UuCgp2MzoKCSogc3F1YXNoIGFsbCByZWxhdGVkIGNoYW5nZXMgcGF0
Y2hlcyBpbnRvIHRoaXMgcGF0Y2gKClNpZ25lZC1vZmYtYnk6IFRob21hcyBaaW1tZXJtYW5uIDx0
emltbWVybWFubkBzdXNlLmRlPgotLS0KIGRyaXZlcnMvZ3B1L2RybS9hcmMvYXJjcGd1X2NydGMu
YyAgICAgICAgfCAxNiAtLS0tLS0tLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2JvY2hzL2JvY2hz
X2ttcy5jICAgICAgICB8ICA5IC0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vY2lycnVzL2NpcnJ1
cy5jICAgICAgICAgIHwgIDggLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfaGVs
cGVyLmMgICAgICB8IDEwICsrKysrKysrLQogZHJpdmVycy9ncHUvZHJtL2RybV9taXBpX2RiaS5j
ICAgICAgICAgICB8ICA5IC0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3ZibGFuay5jICAg
ICAgICAgICAgIHwgIDkgKysrKysrKysKIGRyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX2Rpc3BsYXku
YyAgICAgICAgfCAxNCAtLS0tLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS90aW55L2dtMTJ1MzIw
LmMgICAgICAgICAgfCAgOSAtLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL3RpbnkvaWxpOTIyNS5j
ICAgICAgICAgICB8ICA5IC0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vdGlueS9yZXBhcGVyLmMg
ICAgICAgICAgIHwgIDkgLS0tLS0tLS0KIGRyaXZlcnMvZ3B1L2RybS90aW55L3N0NzU4Ni5jICAg
ICAgICAgICAgfCAgOSAtLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL3Zib3h2aWRlby92Ym94X21v
ZGUuYyAgICB8IDEyIC0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVf
ZGlzcGxheS5jIHwgIDggLS0tLS0tLQogZHJpdmVycy9ncHUvZHJtL3hlbi94ZW5fZHJtX2Zyb250
X2ttcy5jICB8IDEzICsrKysrKysrKysrKwogaW5jbHVkZS9kcm0vZHJtX2NydGMuaCAgICAgICAg
ICAgICAgICAgICB8IDI3ICsrKysrKysrKysrKysrKysrKy0tLS0tLQogaW5jbHVkZS9kcm0vZHJt
X3NpbXBsZV9rbXNfaGVscGVyLmggICAgICB8ICA3ICsrKystLQogMTYgZmlsZXMgY2hhbmdlZCwg
NTYgaW5zZXJ0aW9ucygrKSwgMTIyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9hcmMvYXJjcGd1X2NydGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9hcmMvYXJjcGd1X2Ny
dGMuYwppbmRleCA4YWUxZTFmOTdhNzMuLmJlN2MyOWNlYzMxOCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL2FyYy9hcmNwZ3VfY3J0Yy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hcmMvYXJj
cGd1X2NydGMuYwpAQCAtOSw3ICs5LDYgQEAKICNpbmNsdWRlIDxkcm0vZHJtX2RldmljZS5oPgog
I2luY2x1ZGUgPGRybS9kcm1fZmJfY21hX2hlbHBlci5oPgogI2luY2x1ZGUgPGRybS9kcm1fZ2Vt
X2NtYV9oZWxwZXIuaD4KLSNpbmNsdWRlIDxkcm0vZHJtX3ZibGFuay5oPgogI2luY2x1ZGUgPGRy
bS9kcm1fcGxhbmVfaGVscGVyLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9wcm9iZV9oZWxwZXIuaD4K
ICNpbmNsdWRlIDxsaW51eC9jbGsuaD4KQEAgLTEzOCwyNCArMTM3LDkgQEAgc3RhdGljIHZvaWQg
YXJjX3BndV9jcnRjX2F0b21pY19kaXNhYmxlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAkJCSAg
ICAgIH5BUkNQR1VfQ1RSTF9FTkFCTEVfTUFTSyk7CiB9CiAKLXN0YXRpYyB2b2lkIGFyY19wZ3Vf
Y3J0Y19hdG9taWNfYmVnaW4oc3RydWN0IGRybV9jcnRjICpjcnRjLAotCQkJCSAgICAgIHN0cnVj
dCBkcm1fY3J0Y19zdGF0ZSAqc3RhdGUpCi17Ci0Jc3RydWN0IGRybV9wZW5kaW5nX3ZibGFua19l
dmVudCAqZXZlbnQgPSBjcnRjLT5zdGF0ZS0+ZXZlbnQ7Ci0KLQlpZiAoZXZlbnQpIHsKLQkJY3J0
Yy0+c3RhdGUtPmV2ZW50ID0gTlVMTDsKLQotCQlzcGluX2xvY2tfaXJxKCZjcnRjLT5kZXYtPmV2
ZW50X2xvY2spOwotCQlkcm1fY3J0Y19zZW5kX3ZibGFua19ldmVudChjcnRjLCBldmVudCk7Ci0J
CXNwaW5fdW5sb2NrX2lycSgmY3J0Yy0+ZGV2LT5ldmVudF9sb2NrKTsKLQl9Ci19Ci0KIHN0YXRp
YyBjb25zdCBzdHJ1Y3QgZHJtX2NydGNfaGVscGVyX2Z1bmNzIGFyY19wZ3VfY3J0Y19oZWxwZXJf
ZnVuY3MgPSB7CiAJLm1vZGVfdmFsaWQJPSBhcmNfcGd1X2NydGNfbW9kZV92YWxpZCwKIAkubW9k
ZV9zZXRfbm9mYgk9IGFyY19wZ3VfY3J0Y19tb2RlX3NldF9ub2ZiLAotCS5hdG9taWNfYmVnaW4J
PSBhcmNfcGd1X2NydGNfYXRvbWljX2JlZ2luLAogCS5hdG9taWNfZW5hYmxlCT0gYXJjX3BndV9j
cnRjX2F0b21pY19lbmFibGUsCiAJLmF0b21pY19kaXNhYmxlCT0gYXJjX3BndV9jcnRjX2F0b21p
Y19kaXNhYmxlLAogfTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9ib2Nocy9ib2Noc19r
bXMuYyBiL2RyaXZlcnMvZ3B1L2RybS9ib2Nocy9ib2Noc19rbXMuYwppbmRleCAzZjAwMDZjMjQ3
MGQuLmZmMjc1ZmFlZTg4ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2JvY2hzL2JvY2hz
X2ttcy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9ib2Nocy9ib2Noc19rbXMuYwpAQCAtNyw3ICs3
LDYgQEAKICNpbmNsdWRlIDxkcm0vZHJtX2F0b21pY19oZWxwZXIuaD4KICNpbmNsdWRlIDxkcm0v
ZHJtX2dlbV9mcmFtZWJ1ZmZlcl9oZWxwZXIuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3Byb2JlX2hl
bHBlci5oPgotI2luY2x1ZGUgPGRybS9kcm1fdmJsYW5rLmg+CiAKICNpbmNsdWRlICJib2Nocy5o
IgogCkBAIC01NywxNiArNTYsOCBAQCBzdGF0aWMgdm9pZCBib2Noc19waXBlX3VwZGF0ZShzdHJ1
Y3QgZHJtX3NpbXBsZV9kaXNwbGF5X3BpcGUgKnBpcGUsCiAJCQkgICAgICBzdHJ1Y3QgZHJtX3Bs
YW5lX3N0YXRlICpvbGRfc3RhdGUpCiB7CiAJc3RydWN0IGJvY2hzX2RldmljZSAqYm9jaHMgPSBw
aXBlLT5jcnRjLmRldi0+ZGV2X3ByaXZhdGU7Ci0Jc3RydWN0IGRybV9jcnRjICpjcnRjID0gJnBp
cGUtPmNydGM7CiAKIAlib2Noc19wbGFuZV91cGRhdGUoYm9jaHMsIHBpcGUtPnBsYW5lLnN0YXRl
KTsKLQotCWlmIChjcnRjLT5zdGF0ZS0+ZXZlbnQpIHsKLQkJc3Bpbl9sb2NrX2lycSgmY3J0Yy0+
ZGV2LT5ldmVudF9sb2NrKTsKLQkJZHJtX2NydGNfc2VuZF92YmxhbmtfZXZlbnQoY3J0YywgY3J0
Yy0+c3RhdGUtPmV2ZW50KTsKLQkJY3J0Yy0+c3RhdGUtPmV2ZW50ID0gTlVMTDsKLQkJc3Bpbl91
bmxvY2tfaXJxKCZjcnRjLT5kZXYtPmV2ZW50X2xvY2spOwotCX0KIH0KIAogc3RhdGljIGNvbnN0
IHN0cnVjdCBkcm1fc2ltcGxlX2Rpc3BsYXlfcGlwZV9mdW5jcyBib2Noc19waXBlX2Z1bmNzID0g
ewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2NpcnJ1cy9jaXJydXMuYyBiL2RyaXZlcnMv
Z3B1L2RybS9jaXJydXMvY2lycnVzLmMKaW5kZXggMjQ4YzlmNzY1YzQ1Li5hOTFmYjBkNzI4MmMg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9jaXJydXMvY2lycnVzLmMKKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2NpcnJ1cy9jaXJydXMuYwpAQCAtMzgsNyArMzgsNiBAQAogI2luY2x1ZGUgPGRy
bS9kcm1fbW9kZXNldF9oZWxwZXJfdnRhYmxlcy5oPgogI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVf
aGVscGVyLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9zaW1wbGVfa21zX2hlbHBlci5oPgotI2luY2x1
ZGUgPGRybS9kcm1fdmJsYW5rLmg+CiAKICNkZWZpbmUgRFJJVkVSX05BTUUgImNpcnJ1cyIKICNk
ZWZpbmUgRFJJVkVSX0RFU0MgInFlbXUgY2lycnVzIHZnYSIKQEAgLTQzNCwxMyArNDMzLDYgQEAg
c3RhdGljIHZvaWQgY2lycnVzX3BpcGVfdXBkYXRlKHN0cnVjdCBkcm1fc2ltcGxlX2Rpc3BsYXlf
cGlwZSAqcGlwZSwKIAogCWlmIChkcm1fYXRvbWljX2hlbHBlcl9kYW1hZ2VfbWVyZ2VkKG9sZF9z
dGF0ZSwgc3RhdGUsICZyZWN0KSkKIAkJY2lycnVzX2ZiX2JsaXRfcmVjdChwaXBlLT5wbGFuZS5z
dGF0ZS0+ZmIsICZyZWN0KTsKLQotCWlmIChjcnRjLT5zdGF0ZS0+ZXZlbnQpIHsKLQkJc3Bpbl9s
b2NrX2lycSgmY3J0Yy0+ZGV2LT5ldmVudF9sb2NrKTsKLQkJZHJtX2NydGNfc2VuZF92Ymxhbmtf
ZXZlbnQoY3J0YywgY3J0Yy0+c3RhdGUtPmV2ZW50KTsKLQkJY3J0Yy0+c3RhdGUtPmV2ZW50ID0g
TlVMTDsKLQkJc3Bpbl91bmxvY2tfaXJxKCZjcnRjLT5kZXYtPmV2ZW50X2xvY2spOwotCX0KIH0K
IAogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fc2ltcGxlX2Rpc3BsYXlfcGlwZV9mdW5jcyBjaXJy
dXNfcGlwZV9mdW5jcyA9IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWlj
X2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9hdG9taWNfaGVscGVyLmMKaW5kZXggNDUx
MWMyZTA3YmI5Li42ZTljNzMwYTg5MTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1f
YXRvbWljX2hlbHBlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fYXRvbWljX2hlbHBlci5j
CkBAIC01ODMsNiArNTgzLDcgQEAgbW9kZV92YWxpZChzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAq
c3RhdGUpCiAgKiAmZHJtX2NydGNfc3RhdGUuY29ubmVjdG9yc19jaGFuZ2VkIGlzIHNldCB3aGVu
IGEgY29ubmVjdG9yIGlzIGFkZGVkIG9yCiAgKiByZW1vdmVkIGZyb20gdGhlIENSVEMuICAmZHJt
X2NydGNfc3RhdGUuYWN0aXZlX2NoYW5nZWQgaXMgc2V0IHdoZW4KICAqICZkcm1fY3J0Y19zdGF0
ZS5hY3RpdmUgY2hhbmdlcywgd2hpY2ggaXMgdXNlZCBmb3IgRFBNUy4KKyAqICZkcm1fY3J0Y19z
dGF0ZS5ub192YmxhbmsgaXMgc2V0IGZyb20gdGhlIHJlc3VsdCBvZiBkcm1fY3J0Y19oYXNfdmJs
YW5rKCkuCiAgKiBTZWUgYWxzbzogZHJtX2F0b21pY19jcnRjX25lZWRzX21vZGVzZXQoKQogICoK
ICAqIElNUE9SVEFOVDoKQEAgLTY0OSw2ICs2NTAsMTEgQEAgZHJtX2F0b21pY19oZWxwZXJfY2hl
Y2tfbW9kZXNldChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LAogCiAJCQlyZXR1cm4gLUVJTlZBTDsK
IAkJfQorCisJCWlmIChkcm1fY3J0Y19oYXNfdmJsYW5rKGNydGMpKQorCQkJbmV3X2NydGNfc3Rh
dGUtPm5vX3ZibGFuayA9IGZhbHNlOworCQllbHNlCisJCQluZXdfY3J0Y19zdGF0ZS0+bm9fdmJs
YW5rID0gdHJ1ZTsKIAl9CiAKIAlyZXQgPSBoYW5kbGVfY29uZmxpY3RpbmdfZW5jb2RlcnMoc3Rh
dGUsIGZhbHNlKTsKQEAgLTIyMTUsNyArMjIyMSw5IEBAIEVYUE9SVF9TWU1CT0woZHJtX2F0b21p
Y19oZWxwZXJfd2FpdF9mb3JfZGVwZW5kZW5jaWVzKTsKICAqIHdoZW4gYSBqb2IgaXMgcXVldWVk
LCBhbmQgYW55IGNoYW5nZSB0byB0aGUgcGlwZWxpbmUgdGhhdCBkb2VzIG5vdCB0b3VjaCB0aGUK
ICAqIGNvbm5lY3RvciBpcyBsZWFkaW5nIHRvIHRpbWVvdXRzIHdoZW4gY2FsbGluZwogICogZHJt
X2F0b21pY19oZWxwZXJfd2FpdF9mb3JfdmJsYW5rcygpIG9yCi0gKiBkcm1fYXRvbWljX2hlbHBl
cl93YWl0X2Zvcl9mbGlwX2RvbmUoKS4KKyAqIGRybV9hdG9taWNfaGVscGVyX3dhaXRfZm9yX2Zs
aXBfZG9uZSgpLiBJbiBhZGRpdGlvbiB0byB3cml0ZWJhY2sKKyAqIGNvbm5lY3RvcnMsIHRoaXMg
ZnVuY3Rpb24gY2FuIGFsc28gZmFrZSBWQkxBTksgZXZlbnRzIGZvciBDUlRDcyB3aXRob3V0Cisg
KiBWQkxBTksgaW50ZXJydXB0LgogICoKICAqIFRoaXMgaXMgcGFydCBvZiB0aGUgYXRvbWljIGhl
bHBlciBzdXBwb3J0IGZvciBub25ibG9ja2luZyBjb21taXRzLCBzZWUKICAqIGRybV9hdG9taWNf
aGVscGVyX3NldHVwX2NvbW1pdCgpIGZvciBhbiBvdmVydmlldy4KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9kcm1fbWlwaV9kYmkuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fbWlwaV9kYmku
YwppbmRleCAxNmJmZjFiZTRiOGEuLjEzYjc1M2NiM2Y2NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2RybV9taXBpX2RiaS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fbWlwaV9kYmku
YwpAQCAtMjQsNyArMjQsNiBAQAogI2luY2x1ZGUgPGRybS9kcm1fbW9kZXMuaD4KICNpbmNsdWRl
IDxkcm0vZHJtX3Byb2JlX2hlbHBlci5oPgogI2luY2x1ZGUgPGRybS9kcm1fcmVjdC5oPgotI2lu
Y2x1ZGUgPGRybS9kcm1fdmJsYW5rLmg+CiAjaW5jbHVkZSA8dmlkZW8vbWlwaV9kaXNwbGF5Lmg+
CiAKICNkZWZpbmUgTUlQSV9EQklfTUFYX1NQSV9SRUFEX1NQRUVEIDIwMDAwMDAgLyogMk1IeiAq
LwpAQCAtMjk5LDE4ICsyOTgsMTAgQEAgdm9pZCBtaXBpX2RiaV9waXBlX3VwZGF0ZShzdHJ1Y3Qg
ZHJtX3NpbXBsZV9kaXNwbGF5X3BpcGUgKnBpcGUsCiAJCQkgIHN0cnVjdCBkcm1fcGxhbmVfc3Rh
dGUgKm9sZF9zdGF0ZSkKIHsKIAlzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSA9IHBpcGUt
PnBsYW5lLnN0YXRlOwotCXN0cnVjdCBkcm1fY3J0YyAqY3J0YyA9ICZwaXBlLT5jcnRjOwogCXN0
cnVjdCBkcm1fcmVjdCByZWN0OwogCiAJaWYgKGRybV9hdG9taWNfaGVscGVyX2RhbWFnZV9tZXJn
ZWQob2xkX3N0YXRlLCBzdGF0ZSwgJnJlY3QpKQogCQltaXBpX2RiaV9mYl9kaXJ0eShzdGF0ZS0+
ZmIsICZyZWN0KTsKLQotCWlmIChjcnRjLT5zdGF0ZS0+ZXZlbnQpIHsKLQkJc3Bpbl9sb2NrX2ly
cSgmY3J0Yy0+ZGV2LT5ldmVudF9sb2NrKTsKLQkJZHJtX2NydGNfc2VuZF92YmxhbmtfZXZlbnQo
Y3J0YywgY3J0Yy0+c3RhdGUtPmV2ZW50KTsKLQkJc3Bpbl91bmxvY2tfaXJxKCZjcnRjLT5kZXYt
PmV2ZW50X2xvY2spOwotCQljcnRjLT5zdGF0ZS0+ZXZlbnQgPSBOVUxMOwotCX0KIH0KIEVYUE9S
VF9TWU1CT0wobWlwaV9kYmlfcGlwZV91cGRhdGUpOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vZHJtX3ZibGFuay5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV92YmxhbmsuYwppbmRleCBj
MjAxMDI4OTk0MTEuLmQxZDM5YWU0N2IwZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2Ry
bV92YmxhbmsuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3ZibGFuay5jCkBAIC02OSw2ICs2
OSwxMiBAQAogICogJmRybV9kcml2ZXIubWF4X3ZibGFua19jb3VudC4gSW4gdGhhdCBjYXNlIHRo
ZSB2YmxhbmsgY29yZSBvbmx5IGRpc2FibGVzIHRoZQogICogdmJsYW5rcyBhZnRlciBhIHRpbWVy
IGhhcyBleHBpcmVkLCB3aGljaCBjYW4gYmUgY29uZmlndXJlZCB0aHJvdWdoIHRoZQogICogYGB2
YmxhbmtvZmZkZWxheWBgIG1vZHVsZSBwYXJhbWV0ZXIuCisgKgorICogRHJpdmVycyBmb3IgaGFy
ZHdhcmUgd2l0aG91dCBzdXBwb3J0IGZvciB2ZXJ0aWNhbC1ibGFua2luZyBpbnRlcnJ1cHRzCisg
KiBtdXN0IG5vdCBjYWxsIGRybV92YmxhbmtfaW5pdCgpLiBGb3Igc3VjaCBkcml2ZXJzLCBhdG9t
aWMgaGVscGVycyB3aWxsCisgKiBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIHZibGFuayBldmVudHMg
YXMgcGFydCBvZiB0aGUgZGlzcGxheSB1cGRhdGUuIFRoaXMKKyAqIGZ1bmN0aW9uYWxpdHkgYWxz
byBjYW4gYmUgY29udHJvbGxlZCBieSB0aGUgZHJpdmVyIGJ5IGVuYWJsaW5nIGFuZCBkaXNhYmxp
bmcKKyAqIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZS5ub192YmxhbmsuCiAgKi8KIAogLyogUmV0cnkg
dGltZXN0YW1wIGNhbGN1bGF0aW9uIHVwIHRvIDMgdGltZXMgdG8gc2F0aXNmeQpAQCAtNTEwLDYg
KzUxNiw5IEBAIEVYUE9SVF9TWU1CT0woZHJtX3ZibGFua19pbml0KTsKICAqIGluaXRpYWxpemVk
IGZvciBhIENSVEMuIEZvciBtb3N0IGhhcmR3YXJlIHRoaXMgbWVhbnMgdGhhdCB2YmxhbmtpbmcK
ICAqIGNhbiBhbHNvIGJlIGVuYWJsZWQgb24gdGhlIENSVEMuCiAgKgorICogQXRvbWljIGhlbHBl
cnMgdXNlIHRoaXMgZnVuY3Rpb24gdG8gaW5pdGlhbGl6ZQorICogJmRybV9jcnRjX3N0YXRlLm5v
X3ZibGFuay4gU2VlIGFsc28gZHJtX2F0b21pY19oZWxwZXJfY2hlY2tfbW9kZXNldCgpLgorICoK
ICAqIFJldHVybnM6CiAgKiBUcnVlIGlmIHZibGFua2luZyBoYXMgYmVlbiBpbml0aWFsaXplZCBm
b3IgdGhlIGdpdmVuIENSVEMsIGZhbHNlCiAgKiBvdGhlcndpc2UuCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vcXhsL3F4bF9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9k
aXNwbGF5LmMKaW5kZXggMTZkNzNiMjJmM2Y1Li5hYjRmOGRkMDA0MDAgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9xeGwvcXhsX2Rpc3BsYXkuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vcXhs
L3F4bF9kaXNwbGF5LmMKQEAgLTMxLDcgKzMxLDYgQEAKICNpbmNsdWRlIDxkcm0vZHJtX2dlbV9m
cmFtZWJ1ZmZlcl9oZWxwZXIuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3BsYW5lX2hlbHBlci5oPgog
I2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+Ci0jaW5jbHVkZSA8ZHJtL2RybV92Ymxh
bmsuaD4KIAogI2luY2x1ZGUgInF4bF9kcnYuaCIKICNpbmNsdWRlICJxeGxfb2JqZWN0LmgiCkBA
IC0zNzIsMTkgKzM3MSw2IEBAIHN0YXRpYyB2b2lkIHF4bF9jcnRjX3VwZGF0ZV9tb25pdG9yc19j
b25maWcoc3RydWN0IGRybV9jcnRjICpjcnRjLAogc3RhdGljIHZvaWQgcXhsX2NydGNfYXRvbWlj
X2ZsdXNoKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKIAkJCQkgIHN0cnVjdCBkcm1fY3J0Y19zdGF0
ZSAqb2xkX2NydGNfc3RhdGUpCiB7Ci0Jc3RydWN0IGRybV9kZXZpY2UgKmRldiA9IGNydGMtPmRl
djsKLQlzdHJ1Y3QgZHJtX3BlbmRpbmdfdmJsYW5rX2V2ZW50ICpldmVudDsKLQl1bnNpZ25lZCBs
b25nIGZsYWdzOwotCi0JaWYgKGNydGMtPnN0YXRlICYmIGNydGMtPnN0YXRlLT5ldmVudCkgewot
CQlldmVudCA9IGNydGMtPnN0YXRlLT5ldmVudDsKLQkJY3J0Yy0+c3RhdGUtPmV2ZW50ID0gTlVM
TDsKLQotCQlzcGluX2xvY2tfaXJxc2F2ZSgmZGV2LT5ldmVudF9sb2NrLCBmbGFncyk7Ci0JCWRy
bV9jcnRjX3NlbmRfdmJsYW5rX2V2ZW50KGNydGMsIGV2ZW50KTsKLQkJc3Bpbl91bmxvY2tfaXJx
cmVzdG9yZSgmZGV2LT5ldmVudF9sb2NrLCBmbGFncyk7Ci0JfQotCiAJcXhsX2NydGNfdXBkYXRl
X21vbml0b3JzX2NvbmZpZyhjcnRjLCAiZmx1c2giKTsKIH0KIApkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL3RpbnkvZ20xMnUzMjAuYyBiL2RyaXZlcnMvZ3B1L2RybS90aW55L2dtMTJ1MzIw
LmMKaW5kZXggOTRmYjFmNTkzNTY0Li5hNDgxNzM0NDFhZTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS90aW55L2dtMTJ1MzIwLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3RpbnkvZ20xMnUz
MjAuYwpAQCAtMjIsNyArMjIsNiBAQAogI2luY2x1ZGUgPGRybS9kcm1fbW9kZXNldF9oZWxwZXJf
dnRhYmxlcy5oPgogI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+CiAjaW5jbHVkZSA8
ZHJtL2RybV9zaW1wbGVfa21zX2hlbHBlci5oPgotI2luY2x1ZGUgPGRybS9kcm1fdmJsYW5rLmg+
CiAKIHN0YXRpYyBib29sIGVjb19tb2RlOwogbW9kdWxlX3BhcmFtKGVjb19tb2RlLCBib29sLCAw
NjQ0KTsKQEAgLTYxMCwxOCArNjA5LDEwIEBAIHN0YXRpYyB2b2lkIGdtMTJ1MzIwX3BpcGVfdXBk
YXRlKHN0cnVjdCBkcm1fc2ltcGxlX2Rpc3BsYXlfcGlwZSAqcGlwZSwKIAkJCQkgc3RydWN0IGRy
bV9wbGFuZV9zdGF0ZSAqb2xkX3N0YXRlKQogewogCXN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnN0
YXRlID0gcGlwZS0+cGxhbmUuc3RhdGU7Ci0Jc3RydWN0IGRybV9jcnRjICpjcnRjID0gJnBpcGUt
PmNydGM7CiAJc3RydWN0IGRybV9yZWN0IHJlY3Q7CiAKIAlpZiAoZHJtX2F0b21pY19oZWxwZXJf
ZGFtYWdlX21lcmdlZChvbGRfc3RhdGUsIHN0YXRlLCAmcmVjdCkpCiAJCWdtMTJ1MzIwX2ZiX21h
cmtfZGlydHkocGlwZS0+cGxhbmUuc3RhdGUtPmZiLCAmcmVjdCk7Ci0KLQlpZiAoY3J0Yy0+c3Rh
dGUtPmV2ZW50KSB7Ci0JCXNwaW5fbG9ja19pcnEoJmNydGMtPmRldi0+ZXZlbnRfbG9jayk7Ci0J
CWRybV9jcnRjX3NlbmRfdmJsYW5rX2V2ZW50KGNydGMsIGNydGMtPnN0YXRlLT5ldmVudCk7Ci0J
CWNydGMtPnN0YXRlLT5ldmVudCA9IE5VTEw7Ci0JCXNwaW5fdW5sb2NrX2lycSgmY3J0Yy0+ZGV2
LT5ldmVudF9sb2NrKTsKLQl9CiB9CiAKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX3NpbXBsZV9k
aXNwbGF5X3BpcGVfZnVuY3MgZ20xMnUzMjBfcGlwZV9mdW5jcyA9IHsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS90aW55L2lsaTkyMjUuYyBiL2RyaXZlcnMvZ3B1L2RybS90aW55L2lsaTky
MjUuYwppbmRleCBjNjZhY2M1NjZjMmIuLjgwMmZiOGRkZTFiNiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL3RpbnkvaWxpOTIyNS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aW55L2lsaTky
MjUuYwpAQCAtMjYsNyArMjYsNiBAQAogI2luY2x1ZGUgPGRybS9kcm1fZ2VtX2ZyYW1lYnVmZmVy
X2hlbHBlci5oPgogI2luY2x1ZGUgPGRybS9kcm1fbWlwaV9kYmkuaD4KICNpbmNsdWRlIDxkcm0v
ZHJtX3JlY3QuaD4KLSNpbmNsdWRlIDxkcm0vZHJtX3ZibGFuay5oPgogCiAjZGVmaW5lIElMSTky
MjVfRFJJVkVSX1JFQURfQ09ERQkweDAwCiAjZGVmaW5lIElMSTkyMjVfRFJJVkVSX09VVFBVVF9D
T05UUk9MCTB4MDEKQEAgLTE2NSwxOCArMTY0LDEwIEBAIHN0YXRpYyB2b2lkIGlsaTkyMjVfcGlw
ZV91cGRhdGUoc3RydWN0IGRybV9zaW1wbGVfZGlzcGxheV9waXBlICpwaXBlLAogCQkJCXN0cnVj
dCBkcm1fcGxhbmVfc3RhdGUgKm9sZF9zdGF0ZSkKIHsKIAlzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRl
ICpzdGF0ZSA9IHBpcGUtPnBsYW5lLnN0YXRlOwotCXN0cnVjdCBkcm1fY3J0YyAqY3J0YyA9ICZw
aXBlLT5jcnRjOwogCXN0cnVjdCBkcm1fcmVjdCByZWN0OwogCiAJaWYgKGRybV9hdG9taWNfaGVs
cGVyX2RhbWFnZV9tZXJnZWQob2xkX3N0YXRlLCBzdGF0ZSwgJnJlY3QpKQogCQlpbGk5MjI1X2Zi
X2RpcnR5KHN0YXRlLT5mYiwgJnJlY3QpOwotCi0JaWYgKGNydGMtPnN0YXRlLT5ldmVudCkgewot
CQlzcGluX2xvY2tfaXJxKCZjcnRjLT5kZXYtPmV2ZW50X2xvY2spOwotCQlkcm1fY3J0Y19zZW5k
X3ZibGFua19ldmVudChjcnRjLCBjcnRjLT5zdGF0ZS0+ZXZlbnQpOwotCQlzcGluX3VubG9ja19p
cnEoJmNydGMtPmRldi0+ZXZlbnRfbG9jayk7Ci0JCWNydGMtPnN0YXRlLT5ldmVudCA9IE5VTEw7
Ci0JfQogfQogCiBzdGF0aWMgdm9pZCBpbGk5MjI1X3BpcGVfZW5hYmxlKHN0cnVjdCBkcm1fc2lt
cGxlX2Rpc3BsYXlfcGlwZSAqcGlwZSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90aW55
L3JlcGFwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS90aW55L3JlcGFwZXIuYwppbmRleCA3NmQxNzky
MDA3NzUuLjE4MzQ4NDU5NWFlYSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3RpbnkvcmVw
YXBlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aW55L3JlcGFwZXIuYwpAQCAtMzMsNyArMzMs
NiBAQAogI2luY2x1ZGUgPGRybS9kcm1fZ2VtX2ZyYW1lYnVmZmVyX2hlbHBlci5oPgogI2luY2x1
ZGUgPGRybS9kcm1fbW9kZXMuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3JlY3QuaD4KLSNpbmNsdWRl
IDxkcm0vZHJtX3ZibGFuay5oPgogI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+CiAj
aW5jbHVkZSA8ZHJtL2RybV9zaW1wbGVfa21zX2hlbHBlci5oPgogCkBAIC04NTYsMTggKzg1NSwx
MCBAQCBzdGF0aWMgdm9pZCByZXBhcGVyX3BpcGVfdXBkYXRlKHN0cnVjdCBkcm1fc2ltcGxlX2Rp
c3BsYXlfcGlwZSAqcGlwZSwKIAkJCQlzdHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpvbGRfc3RhdGUp
CiB7CiAJc3RydWN0IGRybV9wbGFuZV9zdGF0ZSAqc3RhdGUgPSBwaXBlLT5wbGFuZS5zdGF0ZTsK
LQlzdHJ1Y3QgZHJtX2NydGMgKmNydGMgPSAmcGlwZS0+Y3J0YzsKIAlzdHJ1Y3QgZHJtX3JlY3Qg
cmVjdDsKIAogCWlmIChkcm1fYXRvbWljX2hlbHBlcl9kYW1hZ2VfbWVyZ2VkKG9sZF9zdGF0ZSwg
c3RhdGUsICZyZWN0KSkKIAkJcmVwYXBlcl9mYl9kaXJ0eShzdGF0ZS0+ZmIpOwotCi0JaWYgKGNy
dGMtPnN0YXRlLT5ldmVudCkgewotCQlzcGluX2xvY2tfaXJxKCZjcnRjLT5kZXYtPmV2ZW50X2xv
Y2spOwotCQlkcm1fY3J0Y19zZW5kX3ZibGFua19ldmVudChjcnRjLCBjcnRjLT5zdGF0ZS0+ZXZl
bnQpOwotCQlzcGluX3VubG9ja19pcnEoJmNydGMtPmRldi0+ZXZlbnRfbG9jayk7Ci0JCWNydGMt
PnN0YXRlLT5ldmVudCA9IE5VTEw7Ci0JfQogfQogCiBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9z
aW1wbGVfZGlzcGxheV9waXBlX2Z1bmNzIHJlcGFwZXJfcGlwZV9mdW5jcyA9IHsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS90aW55L3N0NzU4Ni5jIGIvZHJpdmVycy9ncHUvZHJtL3Rpbnkv
c3Q3NTg2LmMKaW5kZXggMDYwY2M3NTYxOTRmLi45ZWY1NTlkZDMxOTEgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS90aW55L3N0NzU4Ni5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90aW55L3N0
NzU4Ni5jCkBAIC0yMyw3ICsyMyw2IEBACiAjaW5jbHVkZSA8ZHJtL2RybV9nZW1fZnJhbWVidWZm
ZXJfaGVscGVyLmg+CiAjaW5jbHVkZSA8ZHJtL2RybV9taXBpX2RiaS5oPgogI2luY2x1ZGUgPGRy
bS9kcm1fcmVjdC5oPgotI2luY2x1ZGUgPGRybS9kcm1fdmJsYW5rLmg+CiAKIC8qIGNvbnRyb2xs
ZXItc3BlY2lmaWMgY29tbWFuZHMgKi8KICNkZWZpbmUgU1Q3NTg2X0RJU1BfTU9ERV9HUkFZCTB4
MzgKQEAgLTE1OSwxOCArMTU4LDEwIEBAIHN0YXRpYyB2b2lkIHN0NzU4Nl9waXBlX3VwZGF0ZShz
dHJ1Y3QgZHJtX3NpbXBsZV9kaXNwbGF5X3BpcGUgKnBpcGUsCiAJCQkgICAgICAgc3RydWN0IGRy
bV9wbGFuZV9zdGF0ZSAqb2xkX3N0YXRlKQogewogCXN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnN0
YXRlID0gcGlwZS0+cGxhbmUuc3RhdGU7Ci0Jc3RydWN0IGRybV9jcnRjICpjcnRjID0gJnBpcGUt
PmNydGM7CiAJc3RydWN0IGRybV9yZWN0IHJlY3Q7CiAKIAlpZiAoZHJtX2F0b21pY19oZWxwZXJf
ZGFtYWdlX21lcmdlZChvbGRfc3RhdGUsIHN0YXRlLCAmcmVjdCkpCiAJCXN0NzU4Nl9mYl9kaXJ0
eShzdGF0ZS0+ZmIsICZyZWN0KTsKLQotCWlmIChjcnRjLT5zdGF0ZS0+ZXZlbnQpIHsKLQkJc3Bp
bl9sb2NrX2lycSgmY3J0Yy0+ZGV2LT5ldmVudF9sb2NrKTsKLQkJZHJtX2NydGNfc2VuZF92Ymxh
bmtfZXZlbnQoY3J0YywgY3J0Yy0+c3RhdGUtPmV2ZW50KTsKLQkJc3Bpbl91bmxvY2tfaXJxKCZj
cnRjLT5kZXYtPmV2ZW50X2xvY2spOwotCQljcnRjLT5zdGF0ZS0+ZXZlbnQgPSBOVUxMOwotCX0K
IH0KIAogc3RhdGljIHZvaWQgc3Q3NTg2X3BpcGVfZW5hYmxlKHN0cnVjdCBkcm1fc2ltcGxlX2Rp
c3BsYXlfcGlwZSAqcGlwZSwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92Ym94dmlkZW8v
dmJveF9tb2RlLmMgYi9kcml2ZXJzL2dwdS9kcm0vdmJveHZpZGVvL3Zib3hfbW9kZS5jCmluZGV4
IDE5NjEyMTMyYzhhMy4uOGI3ZjAwNWM0ZDIwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
dmJveHZpZGVvL3Zib3hfbW9kZS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92Ym94dmlkZW8vdmJv
eF9tb2RlLmMKQEAgLTE4LDcgKzE4LDYgQEAKICNpbmNsdWRlIDxkcm0vZHJtX2dlbV9mcmFtZWJ1
ZmZlcl9oZWxwZXIuaD4KICNpbmNsdWRlIDxkcm0vZHJtX3BsYW5lX2hlbHBlci5oPgogI2luY2x1
ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+Ci0jaW5jbHVkZSA8ZHJtL2RybV92YmxhbmsuaD4K
IAogI2luY2x1ZGUgImhnc21pX2NoYW5uZWxzLmgiCiAjaW5jbHVkZSAidmJveF9kcnYuaCIKQEAg
LTIyNiwxNyArMjI1LDYgQEAgc3RhdGljIHZvaWQgdmJveF9jcnRjX2F0b21pY19kaXNhYmxlKHN0
cnVjdCBkcm1fY3J0YyAqY3J0YywKIHN0YXRpYyB2b2lkIHZib3hfY3J0Y19hdG9taWNfZmx1c2go
c3RydWN0IGRybV9jcnRjICpjcnRjLAogCQkJCSAgIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSAqb2xk
X2NydGNfc3RhdGUpCiB7Ci0Jc3RydWN0IGRybV9wZW5kaW5nX3ZibGFua19ldmVudCAqZXZlbnQ7
Ci0JdW5zaWduZWQgbG9uZyBmbGFnczsKLQotCWlmIChjcnRjLT5zdGF0ZSAmJiBjcnRjLT5zdGF0
ZS0+ZXZlbnQpIHsKLQkJZXZlbnQgPSBjcnRjLT5zdGF0ZS0+ZXZlbnQ7Ci0JCWNydGMtPnN0YXRl
LT5ldmVudCA9IE5VTEw7Ci0KLQkJc3Bpbl9sb2NrX2lycXNhdmUoJmNydGMtPmRldi0+ZXZlbnRf
bG9jaywgZmxhZ3MpOwotCQlkcm1fY3J0Y19zZW5kX3ZibGFua19ldmVudChjcnRjLCBldmVudCk7
Ci0JCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJmNydGMtPmRldi0+ZXZlbnRfbG9jaywgZmxhZ3Mp
OwotCX0KIH0KIAogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1fY3J0Y19oZWxwZXJfZnVuY3MgdmJv
eF9jcnRjX2hlbHBlcl9mdW5jcyA9IHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92aXJ0
aW8vdmlydGdwdV9kaXNwbGF5LmMgYi9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZGlz
cGxheS5jCmluZGV4IDA5NjYyMDhlYzMwZC4uZWNmNGJhN2NjMzJiIDEwMDY0NAotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZGlzcGxheS5jCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS92aXJ0aW8vdmlydGdwdV9kaXNwbGF5LmMKQEAgLTMwLDcgKzMwLDYgQEAKICNpbmNsdWRlIDxk
cm0vZHJtX2ZvdXJjYy5oPgogI2luY2x1ZGUgPGRybS9kcm1fZ2VtX2ZyYW1lYnVmZmVyX2hlbHBl
ci5oPgogI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVfaGVscGVyLmg+Ci0jaW5jbHVkZSA8ZHJtL2Ry
bV92YmxhbmsuaD4KIAogI2luY2x1ZGUgInZpcnRncHVfZHJ2LmgiCiAKQEAgLTEyMSwxMyArMTIw
LDYgQEAgc3RhdGljIGludCB2aXJ0aW9fZ3B1X2NydGNfYXRvbWljX2NoZWNrKHN0cnVjdCBkcm1f
Y3J0YyAqY3J0YywKIHN0YXRpYyB2b2lkIHZpcnRpb19ncHVfY3J0Y19hdG9taWNfZmx1c2goc3Ry
dWN0IGRybV9jcnRjICpjcnRjLAogCQkJCQkgc3RydWN0IGRybV9jcnRjX3N0YXRlICpvbGRfc3Rh
dGUpCiB7Ci0JdW5zaWduZWQgbG9uZyBmbGFnczsKLQotCXNwaW5fbG9ja19pcnFzYXZlKCZjcnRj
LT5kZXYtPmV2ZW50X2xvY2ssIGZsYWdzKTsKLQlpZiAoY3J0Yy0+c3RhdGUtPmV2ZW50KQotCQlk
cm1fY3J0Y19zZW5kX3ZibGFua19ldmVudChjcnRjLCBjcnRjLT5zdGF0ZS0+ZXZlbnQpOwotCWNy
dGMtPnN0YXRlLT5ldmVudCA9IE5VTEw7Ci0Jc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmY3J0Yy0+
ZGV2LT5ldmVudF9sb2NrLCBmbGFncyk7CiB9CiAKIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX2Ny
dGNfaGVscGVyX2Z1bmNzIHZpcnRpb19ncHVfY3J0Y19oZWxwZXJfZnVuY3MgPSB7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0veGVuL3hlbl9kcm1fZnJvbnRfa21zLmMgYi9kcml2ZXJzL2dw
dS9kcm0veGVuL3hlbl9kcm1fZnJvbnRfa21zLmMKaW5kZXggNGYzNGM1MjA4MTgwLi5lZmRlNDU2
MTgzNmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS94ZW4veGVuX2RybV9mcm9udF9rbXMu
YworKysgYi9kcml2ZXJzL2dwdS9kcm0veGVuL3hlbl9kcm1fZnJvbnRfa21zLmMKQEAgLTIyMCw2
ICsyMjAsMTggQEAgc3RhdGljIGJvb2wgZGlzcGxheV9zZW5kX3BhZ2VfZmxpcChzdHJ1Y3QgZHJt
X3NpbXBsZV9kaXNwbGF5X3BpcGUgKnBpcGUsCiAJcmV0dXJuIGZhbHNlOwogfQogCitzdGF0aWMg
aW50IGRpc3BsYXlfY2hlY2soc3RydWN0IGRybV9zaW1wbGVfZGlzcGxheV9waXBlICpwaXBlLAor
CQkJIHN0cnVjdCBkcm1fcGxhbmVfc3RhdGUgKnBsYW5lX3N0YXRlLAorCQkJIHN0cnVjdCBkcm1f
Y3J0Y19zdGF0ZSAqY3J0Y19zdGF0ZSkKK3sKKwkvKiBNYWtlIHN1cmUgdGhhdCBEUk0gaGVscGVy
cyBkb24ndCBzZW5kIFZCTEFOSyBldmVudHMKKwkgKiBhdXRvbWF0aWNhbGx5LiBYZW4gaGFzIGl0
J3Mgb3duIGxvZ2ljIHRvIGRvIHNvLgorCSAqLworCWNydGNfc3RhdGUtPm5vX3ZibGFuayA9IGZh
bHNlOworCisJcmV0dXJuIDA7Cit9CisKIHN0YXRpYyB2b2lkIGRpc3BsYXlfdXBkYXRlKHN0cnVj
dCBkcm1fc2ltcGxlX2Rpc3BsYXlfcGlwZSAqcGlwZSwKIAkJCSAgIHN0cnVjdCBkcm1fcGxhbmVf
c3RhdGUgKm9sZF9wbGFuZV9zdGF0ZSkKIHsKQEAgLTI4NCw2ICsyOTYsNyBAQCBzdGF0aWMgY29u
c3Qgc3RydWN0IGRybV9zaW1wbGVfZGlzcGxheV9waXBlX2Z1bmNzIGRpc3BsYXlfZnVuY3MgPSB7
CiAJLmVuYWJsZSA9IGRpc3BsYXlfZW5hYmxlLAogCS5kaXNhYmxlID0gZGlzcGxheV9kaXNhYmxl
LAogCS5wcmVwYXJlX2ZiID0gZHJtX2dlbV9mYl9zaW1wbGVfZGlzcGxheV9waXBlX3ByZXBhcmVf
ZmIsCisJLmNoZWNrID0gZGlzcGxheV9jaGVjaywKIAkudXBkYXRlID0gZGlzcGxheV91cGRhdGUs
CiB9OwogCmRpZmYgLS1naXQgYS9pbmNsdWRlL2RybS9kcm1fY3J0Yy5oIGIvaW5jbHVkZS9kcm0v
ZHJtX2NydGMuaAppbmRleCA1ZTliMTVhMGU4YzUuLjUzNjNlMzFjOWFiZSAxMDA2NDQKLS0tIGEv
aW5jbHVkZS9kcm0vZHJtX2NydGMuaAorKysgYi9pbmNsdWRlL2RybS9kcm1fY3J0Yy5oCkBAIC0x
NzQsMTIgKzE3NCwyMiBAQCBzdHJ1Y3QgZHJtX2NydGNfc3RhdGUgewogCSAqIEBub192Ymxhbms6
CiAJICoKIAkgKiBSZWZsZWN0cyB0aGUgYWJpbGl0eSBvZiBhIENSVEMgdG8gc2VuZCBWQkxBTksg
ZXZlbnRzLiBUaGlzIHN0YXRlCi0JICogdXN1YWxseSBkZXBlbmRzIG9uIHRoZSBwaXBlbGluZSBj
b25maWd1cmF0aW9uLCBhbmQgdGhlIG1haW4gdXN1YWdlCi0JICogaXMgQ1JUQ3MgZmVlZGluZyBh
IHdyaXRlYmFjayBjb25uZWN0b3Igb3BlcmF0aW5nIGluIG9uZXNob3QgbW9kZS4KLQkgKiBJbiB0
aGlzIGNhc2UgdGhlIFZCTEFOSyBldmVudCBpcyBvbmx5IGdlbmVyYXRlZCB3aGVuIGEgam9iIGlz
IHF1ZXVlZAotCSAqIHRvIHRoZSB3cml0ZWJhY2sgY29ubmVjdG9yLCBhbmQgd2Ugd2FudCB0aGUg
Y29yZSB0byBmYWtlIFZCTEFOSwotCSAqIGV2ZW50cyB3aGVuIHRoaXMgcGFydCBvZiB0aGUgcGlw
ZWxpbmUgaGFzbid0IGNoYW5nZWQgYnV0IG90aGVycyBoYWQKLQkgKiBvciB3aGVuIHRoZSBDUlRD
IGFuZCBjb25uZWN0b3JzIGFyZSBiZWluZyBkaXNhYmxlZC4KKwkgKiB1c3VhbGx5IGRlcGVuZHMg
b24gdGhlIHBpcGVsaW5lIGNvbmZpZ3VyYXRpb24uIElmIHNldCB0byB0cnVlLCBEUk0KKwkgKiBh
dG9taWMgaGVscGVycyB3aWxsIHNlbmRvdXQgYSBmYWtlIFZCTEFOSyBldmVudCBkdXJpbmcgZGlz
cGxheQorCSAqIHVwZGF0ZXMuCisJICoKKwkgKiBPbmUgdXNhZ2UgaXMgZm9yIGRyaXZlcnMgYW5k
L29yIGhhcmR3YXJlIHdpdGhvdXQgc3VwcG9ydCBmb3IgVkJMQU5LCisJICogaW50ZXJydXB0cy4g
U3VjaCBkcml2ZXJzIHR5cGljYWxseSBkbyBub3QgaW5pdGlhbGl6ZSB2YmxhbmtpbmcKKwkgKiAo
aS5lLiwgY2FsbCBkcm1fdmJsYW5rX2luaXQoKSB3aXQgdGhlIG51bWJlciBvZiBDUlRDcykuIEZv
ciBDUlRDcworCSAqIHdpdGhvdXQgaW5pdGlhbGl6ZWQgdmJsYW5raW5nLCB0aGUgZmllbGQgaXMg
aW5pdGlhbGl6ZWQgdG8gdHJ1ZSBhbmQKKwkgKiBhIFZCTEFOSyBldmVudCB3aWxsIGJlIHNlbmQg
b3V0IG9uIGVhY2ggdXBkYXRlIG9mIHRoZSBkaXNwbGF5CisJICogcGlwZWxpbmUuCisJICoKKwkg
KiBBbm90aGVyIHVzYWdlIGlzIENSVENzIGZlZWRpbmcgYSB3cml0ZWJhY2sgY29ubmVjdG9yIG9w
ZXJhdGluZyBpbgorCSAqIG9uZXNob3QgbW9kZS4gSW4gdGhpcyBjYXNlIHRoZSBWQkxBTksgZXZl
bnQgaXMgb25seSBnZW5lcmF0ZWQgd2hlbgorCSAqIGEgam9iIGlzIHF1ZXVlZCB0byB0aGUgd3Jp
dGViYWNrIGNvbm5lY3RvciwgYW5kIHdlIHdhbnQgdGhlIGNvcmUKKwkgKiB0byBmYWtlIFZCTEFO
SyBldmVudHMgd2hlbiB0aGlzIHBhcnQgb2YgdGhlIHBpcGVsaW5lIGhhc24ndCBjaGFuZ2VkCisJ
ICogYnV0IG90aGVycyBoYWQgb3Igd2hlbiB0aGUgQ1JUQyBhbmQgY29ubmVjdG9ycyBhcmUgYmVp
bmcgZGlzYWJsZWQuCiAJICoKIAkgKiBfX2RybV9hdG9taWNfaGVscGVyX2NydGNfZHVwbGljYXRl
X3N0YXRlKCkgd2lsbCBub3QgcmVzZXQgdGhlIHZhbHVlCiAJICogZnJvbSB0aGUgY3VycmVudCBz
dGF0ZSwgdGhlIENSVEMgZHJpdmVyIGlzIHRoZW4gcmVzcG9uc2libGUgZm9yCkBAIC0zMzUsNyAr
MzQ1LDEwIEBAIHN0cnVjdCBkcm1fY3J0Y19zdGF0ZSB7CiAJICogIC0gRXZlbnRzIGZvciBkaXNh
YmxlZCBDUlRDcyBhcmUgbm90IGFsbG93ZWQsIGFuZCBkcml2ZXJzIGNhbiBpZ25vcmUKIAkgKiAg
ICB0aGF0IGNhc2UuCiAJICoKLQkgKiBUaGlzIGNhbiBiZSBoYW5kbGVkIGJ5IHRoZSBkcm1fY3J0
Y19zZW5kX3ZibGFua19ldmVudCgpIGZ1bmN0aW9uLAorCSAqIEZvciB2ZXJ5IHNpbXBsZSBoYXJk
d2FyZSB3aXRob3V0IFZCTEFOSyBpbnRlcnJ1cHQsIGVuYWJsaW5nCisJICogJnN0cnVjdCBkcm1f
Y3J0Y19zdGF0ZS5ub192YmxhbmsgbWFrZXMgRFJNJ3MgYXRvbWljIGNvbW1pdCBoZWxwZXJzCisJ
ICogc2VuZCB0aGUgZXZlbnQgYXQgYW4gYXBwcm9wcmlhdGUgdGltZS4gRm9yIG1vcmUgY29tcGxl
eCBoYXJkd2FyZSB0aGlzCisJICogY2FuIGJlIGhhbmRsZWQgYnkgdGhlIGRybV9jcnRjX3NlbmRf
dmJsYW5rX2V2ZW50KCkgZnVuY3Rpb24sCiAJICogd2hpY2ggdGhlIGRyaXZlciBzaG91bGQgY2Fs
bCBvbiB0aGUgcHJvdmlkZWQgZXZlbnQgdXBvbiBjb21wbGV0aW9uIG9mCiAJICogdGhlIGF0b21p
YyBjb21taXQuIE5vdGUgdGhhdCBpZiB0aGUgZHJpdmVyIHN1cHBvcnRzIHZibGFuayBzaWduYWxs
aW5nCiAJICogYW5kIHRpbWVzdGFtcGluZyB0aGUgdmJsYW5rIGNvdW50ZXJzIGFuZCB0aW1lc3Rh
bXBzIG11c3QgYWdyZWUgd2l0aApkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX3NpbXBsZV9r
bXNfaGVscGVyLmggYi9pbmNsdWRlL2RybS9kcm1fc2ltcGxlX2ttc19oZWxwZXIuaAppbmRleCAx
NWFmZWU5Y2YwNDkuLmUyNTNiYTdiZWE5ZCAxMDA2NDQKLS0tIGEvaW5jbHVkZS9kcm0vZHJtX3Np
bXBsZV9rbXNfaGVscGVyLmgKKysrIGIvaW5jbHVkZS9kcm0vZHJtX3NpbXBsZV9rbXNfaGVscGVy
LmgKQEAgLTEwMCw4ICsxMDAsMTEgQEAgc3RydWN0IGRybV9zaW1wbGVfZGlzcGxheV9waXBlX2Z1
bmNzIHsKIAkgKiBUaGlzIGlzIHRoZSBmdW5jdGlvbiBkcml2ZXJzIHNob3VsZCBzdWJtaXQgdGhl
CiAJICogJmRybV9wZW5kaW5nX3ZibGFua19ldmVudCBmcm9tLiBVc2luZyBlaXRoZXIKIAkgKiBk
cm1fY3J0Y19hcm1fdmJsYW5rX2V2ZW50KCksIHdoZW4gdGhlIGRyaXZlciBzdXBwb3J0cyB2Ymxh
bmsKLQkgKiBpbnRlcnJ1cHQgaGFuZGxpbmcsIG9yIGRybV9jcnRjX3NlbmRfdmJsYW5rX2V2ZW50
KCkgZGlyZWN0bHkgaW4gY2FzZQotCSAqIHRoZSBoYXJkd2FyZSBsYWNrcyB2Ymxhbmsgc3VwcG9y
dCBlbnRpcmVseS4KKwkgKiBpbnRlcnJ1cHQgaGFuZGxpbmcsIG9yIGRybV9jcnRjX3NlbmRfdmJs
YW5rX2V2ZW50KCkgZm9yIG1vcmUKKwkgKiBjb21wbGV4IGNhc2UuIEluIGNhc2UgdGhlIGhhcmR3
YXJlIGxhY2tzIHZibGFuayBzdXBwb3J0IGVudGlyZWx5LAorCSAqIGRyaXZlcnMgY2FuIHNldCAm
c3RydWN0IGRybV9jcnRjX3N0YXRlLm5vX3ZibGFuayBpbgorCSAqICZzdHJ1Y3QgZHJtX3NpbXBs
ZV9kaXNwbGF5X3BpcGVfZnVuY3MuY2hlY2sgYW5kIGxldCBEUk0ncworCSAqIGF0b21pYyBoZWxw
ZXIgZmFrZSBhIHZibGFuayBldmVudC4KIAkgKi8KIAl2b2lkICgqdXBkYXRlKShzdHJ1Y3QgZHJt
X3NpbXBsZV9kaXNwbGF5X3BpcGUgKnBpcGUsCiAJCSAgICAgICBzdHJ1Y3QgZHJtX3BsYW5lX3N0
YXRlICpvbGRfcGxhbmVfc3RhdGUpOwotLSAKMi4yNC4xCgoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2
ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWls
bWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id B0777260E2
	for <lists+xen-devel@lfdr.de>; Wed, 22 May 2019 11:58:50 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hTNyz-0007cQ-6X; Wed, 22 May 2019 09:56:25 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=3DNt=TW=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hTNyx-0007cL-L6
 for xen-devel@lists.xenproject.org; Wed, 22 May 2019 09:56:23 +0000
X-Inumbo-ID: d90ecfa0-7c77-11e9-92d3-4ba0d47950b3
Received: from prv1-mh.provo.novell.com (unknown [137.65.248.33])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id d90ecfa0-7c77-11e9-92d3-4ba0d47950b3;
 Wed, 22 May 2019 09:56:20 +0000 (UTC)
Received: from INET-PRV1-MTA by prv1-mh.provo.novell.com
 with Novell_GroupWise; Wed, 22 May 2019 03:56:18 -0600
Message-Id: <5CE51CBD0200007800231438@prv1-mh.provo.novell.com>
X-Mailer: Novell GroupWise Internet Agent 18.1.0 
Date: Wed, 22 May 2019 03:56:13 -0600
From: "Jan Beulich" <JBeulich@suse.com>
To: <aisaila@bitdefender.com>
References: <20190520125454.14805-1-aisaila@bitdefender.com>
 <20190520125454.14805-2-aisaila@bitdefender.com>
In-Reply-To: <20190520125454.14805-2-aisaila@bitdefender.com>
Mime-Version: 1.0
Content-Disposition: inline
Subject: Re: [Xen-devel] [PATCH v4 2/2] x86/emulate: Send vm_event from
 emulate
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Tamas K Lengyel <tamas@tklengyel.com>, Wei Liu <wei.liu2@citrix.com>,
 Razvan Cojocaru <rcojocaru@bitdefender.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Paul Durrant <paul.durrant@citrix.com>,
 xen-devel <xen-devel@lists.xenproject.org>,
 Roger Pau Monne <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Pj4+IE9uIDIwLjA1LjE5IGF0IDE0OjU1LCA8YWlzYWlsYUBiaXRkZWZlbmRlci5jb20+IHdyb3Rl
Ogo+IFRoaXMgcGF0Y2ggYWltcyB0byBoYXZlIG1lbSBhY2Nlc3Mgdm0gZXZlbnRzIHNlbnQgZnJv
bSB0aGUgZW11bGF0b3IuCj4gVGhpcyBpcyB1c2VmdWwgaW4gdGhlIGNhc2Ugb2YgZW11bGF0ZWQg
aW5zdHJ1Y3Rpb25zIHRoYXQgY2F1c2UKPiBwYWdlLXdhbGtzIG9uIGFjY2VzcyBwcm90ZWN0ZWQg
cGFnZXMuCj4gCj4gV2UgdXNlIGh2bWVtdWxfbWFwX2xpbmVhcl9hZGRyKCkgcm8gaW50ZXJjZXB0
IHIvdyBhY2Nlc3MgYW5kCj4gaHZtZW11bF9pbnNuX2ZldGNoKCkgdG8gaW50ZXJjZXB0IGV4ZWMg
YWNjZXNzLgoKSSdtIGFmcmFpZCBJIGRvbid0IHVuZGVyc3RhbmQgdGhpcyBzZW50ZW5jZS4gT3Ig
d2FpdCAtIGlzIHRoaXMgYQpzaW1wbGUgdHlwbywgYW5kIHlvdSBtZWFuICJ0byIgaW5zdGVhZCBv
ZiAicm8iPwoKPiBGaXJzdCB3ZSB0cnkgdG8gc2VuZCBhIHZtIGV2ZW50IGFuZCBpZiB0aGUgZXZl
bnQgaXMgc2VudCB0aGVuIGVtdWxhdGlvbgo+IHJldHVybnMgWDg2RU1VTF9BQ0NFU1NfRVhDRVBU
SU9OLiBJZiB0aGUgZXZlbnQgaXMgbm90IHNlbnQgdGhlbiB0aGUKPiBlbXVsYXRpb24gZ29lcyBv
biBhcyBleHBlY3RlZC4KClBlcmhhcHMgaXQncyBvYnZpb3VzIGZvciBhIHZtLWV2ZW50IHBlcnNv
biB3aHkgc3VjY2Vzc2Z1bCBzZW5kaW5nCm9mIGFuIGV2ZW50IGlzIHRvIHJlc3VsdCBpbiBYODZF
TVVMX0FDQ0VTU19FWENFUFRJT04sIGJ1dCBpdCdzIG5vdAp0byBtZSwgZGVzcGl0ZSBoYXZpbmcg
bG9va2VkIGF0IHByaW9yIHZlcnNpb25zLiBDYW4gdGhpcyAob2RkIGF0IHRoZQpmaXJzdCBnbGFu
Y2UpIGJlaGF2aW9yIHBsZWFzZSBiZSBicmllZmx5IGV4cGxhaW5lZCBoZXJlPwoKPiAtLS0gYS94
ZW4vYXJjaC94ODYvaHZtL2VtdWxhdGUuYwo+ICsrKyBiL3hlbi9hcmNoL3g4Ni9odm0vZW11bGF0
ZS5jCj4gQEAgLTE1LDYgKzE1LDcgQEAKPiAgI2luY2x1ZGUgPHhlbi9wYWdpbmcuaD4KPiAgI2lu
Y2x1ZGUgPHhlbi90cmFjZS5oPgo+ICAjaW5jbHVkZSA8eGVuL3ZtX2V2ZW50Lmg+Cj4gKyNpbmNs
dWRlIDx4ZW4vbW9uaXRvci5oPgo+ICAjaW5jbHVkZSA8YXNtL2V2ZW50Lmg+Cj4gICNpbmNsdWRl
IDxhc20vaTM4Ny5oPgo+ICAjaW5jbHVkZSA8YXNtL3hzdGF0ZS5oPgo+IEBAIC0yNiw2ICsyNyw3
IEBACj4gICNpbmNsdWRlIDxhc20vaHZtL3N1cHBvcnQuaD4KPiAgI2luY2x1ZGUgPGFzbS9odm0v
c3ZtL3N2bS5oPgo+ICAjaW5jbHVkZSA8YXNtL3ZtX2V2ZW50Lmg+Cj4gKyNpbmNsdWRlIDxhc20v
YWx0cDJtLmg+CgpJbiBib3RoIGNhc2VzIHBsZWFzZSB0cnkgdG8gaW5zZXJ0IGF0IGxlYXN0IGhh
bGYgd2F5IGFscGhhYmV0aWNhbGx5CihJIGRpZG4ndCBjaGVjayBpZiB0aGUgZGlyZWN0aXZlcyBh
cmUgZnVsbHkgc29ydGVkIGFscmVhZHkpLCByYXRoZXIKdGhhbiBibGluZGx5IGF0IHRoZSBlbmQu
Cgo+IEBAIC02MTksNiArNjIxLDY4IEBAIHN0YXRpYyBpbnQgaHZtZW11bF9saW5lYXJfdG9fcGh5
cygKPiAgICAgIHJldHVybiBYODZFTVVMX09LQVk7Cj4gIH0KPiAgCj4gK3N0YXRpYyBib29sIGh2
bWVtdWxfc2VuZF92bV9ldmVudCh1bnNpZ25lZCBsb25nIGdsYSwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IHBmZWMsIHVuc2lnbmVkIGludCBieXRlcywKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBodm1fZW11bGF0ZV9jdHh0
IGN0eHQpCj4gK3sKPiArICAgIHhlbm1lbV9hY2Nlc3NfdCBhY2Nlc3M7Cj4gKyAgICB2bV9ldmVu
dF9yZXF1ZXN0X3QgcmVxID0ge307Cj4gKyAgICBnZm5fdCBnZm47Cj4gKyAgICBwYWRkcl90IGdw
YTsKPiArICAgIHVuc2lnbmVkIGxvbmcgcmVwcyA9IDE7Cj4gKyAgICBpbnQgcmM7Cj4gKwo+ICsg
ICAgaWYgKCAhY3R4dC5zZW5kX2V2ZW50IHx8ICFwZmVjICkKCldoeSB0aGUgIXBmZWMgcGFydCBv
ZiB0aGUgY29uZGl0aW9uPwoKPiArICAgICAgICByZXR1cm4gZmFsc2U7Cj4gKwo+ICsgICAgcmMg
PSBodm1lbXVsX2xpbmVhcl90b19waHlzKGdsYSwgJmdwYSwgYnl0ZXMsICZyZXBzLCBwZmVjLCAm
Y3R4dCk7CgpBcyBzYWlkIGJlZm9yZSAtIEkgZG9uJ3QgdGhpbmsgaXQncyBhIGdvb2QgaWRlYSB0
byBkbyB0aGUgcGFnZSB3YWxrCnR3aWNlOiBUaGlzIGFuZCB0aGUgcHJlLWV4aXN0aW5nIG9uZSBj
YW4gZWFzaWx5IHJldHVybiBkaWZmZXJlbnQKcmVzdWx0cy4KCkFkZGl0aW9uYWxseSwgYXMgYWxz
byBzYWlkIGJlZm9yZSAoSSB0aGluayksIHRoZSBmdW5jdGlvbiBtYXkgcmFpc2UKI1BGLCB3aGlj
aCB5b3UgZG9uJ3Qgc2VlbSB0byBkZWFsIHdpdGggZGVzcGl0ZSBkaXNjYXJkaW5nIHRoZQpYODZF
TVVMX0VYQ0VQVElPTiByZXR1cm4gdmFsdWUgLi4uCgo+ICsgICAgaWYgKCByYyAhPSBYODZFTVVM
X09LQVkgKQo+ICsgICAgICAgIHJldHVybiBmYWxzZTsKCi4uLiBoZXJlLgoKPiArICAgIGdmbiA9
IGdhZGRyX3RvX2dmbihncGEpOwo+ICsKPiArICAgIGlmICggcDJtX2dldF9tZW1fYWNjZXNzKGN1
cnJlbnQtPmRvbWFpbiwgZ2ZuLCAmYWNjZXNzLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgYWx0cDJtX3ZjcHVfaWR4KGN1cnJlbnQpKSAhPSAwICkKPiArICAgICAgICByZXR1cm4gZmFs
c2U7Cj4gKwo+ICsgICAgc3dpdGNoICggYWNjZXNzICkgewo+ICsgICAgY2FzZSBYRU5NRU1fYWNj
ZXNzX3g6Cj4gKyAgICBjYXNlIFhFTk1FTV9hY2Nlc3Nfcng6Cj4gKyAgICAgICAgaWYgKCBwZmVj
ICYgUEZFQ193cml0ZV9hY2Nlc3MgKQo+ICsgICAgICAgICAgICByZXEudS5tZW1fYWNjZXNzLmZs
YWdzID0gTUVNX0FDQ0VTU19SIHwgTUVNX0FDQ0VTU19XOwo+ICsgICAgICAgIGJyZWFrOwo+ICsK
PiArICAgIGNhc2UgWEVOTUVNX2FjY2Vzc193Ogo+ICsgICAgY2FzZSBYRU5NRU1fYWNjZXNzX3J3
Ogo+ICsgICAgICAgIGlmICggcGZlYyAmIFBGRUNfaW5zbl9mZXRjaCApCj4gKyAgICAgICAgICAg
IHJlcS51Lm1lbV9hY2Nlc3MuZmxhZ3MgPSBNRU1fQUNDRVNTX1g7Cj4gKyAgICAgICAgYnJlYWs7
Cj4gKwo+ICsgICAgY2FzZSBYRU5NRU1fYWNjZXNzX3I6Cj4gKyAgICBjYXNlIFhFTk1FTV9hY2Nl
c3NfbjoKPiArICAgICAgICBpZiAoIHBmZWMgJiBQRkVDX3dyaXRlX2FjY2VzcyApCj4gKyAgICAg
ICAgICAgIHJlcS51Lm1lbV9hY2Nlc3MuZmxhZ3MgfD0gTUVNX0FDQ0VTU19SIHwgTUVNX0FDQ0VT
U19XOwo+ICsgICAgICAgIGlmICggcGZlYyAmIFBGRUNfaW5zbl9mZXRjaCApCj4gKyAgICAgICAg
ICAgIHJlcS51Lm1lbV9hY2Nlc3MuZmxhZ3MgfD0gTUVNX0FDQ0VTU19YOwo+ICsgICAgICAgIGJy
ZWFrOwo+ICsKPiArICAgIGRlZmF1bHQ6Cj4gKyAgICAgICAgcmV0dXJuIGZhbHNlOwo+ICsgICAg
fQoKQXJlbid0IHlvdSBsb29raW5nIGF0IHRoZSBsZWFmIHBhZ2UgaGVyZSwgcmF0aGVyIHRoYW4g
YXQgYW55IG9mIHRoZQppbnZvbHZlZCBwYWdlIHRhYmxlcz8gT3IgYW0gSSBtaXN1bmRlcnN0YW5k
aW5nIHRoZSBkZXNjcmlwdGlvbgpzYXlpbmcgInBhZ2Utd2Fsa3Mgb24gYWNjZXNzIHByb3RlY3Rl
ZCBwYWdlcyI/Cgo+IEBAIC02MzYsNiArNzAwLDcgQEAgc3RhdGljIHZvaWQgKmh2bWVtdWxfbWFw
X2xpbmVhcl9hZGRyKAo+ICAgICAgdW5zaWduZWQgaW50IG5yX2ZyYW1lcyA9ICgobGluZWFyICsg
Ynl0ZXMgLSAhIWJ5dGVzKSA+PiBQQUdFX1NISUZUKSAtCj4gICAgICAgICAgKGxpbmVhciA+PiBQ
QUdFX1NISUZUKSArIDE7Cj4gICAgICB1bnNpZ25lZCBpbnQgaTsKPiArICAgIGdmbl90IGdmbjsK
PiAgCj4gICAgICAvKgo+ICAgICAgICogbWZuIHBvaW50cyB0byB0aGUgbmV4dCBmcmVlIHNsb3Qu
ICBBbGwgdXNlZCBzbG90cyBoYXZlIGEgcGFnZSByZWZlcmVuY2UKPiBAQCAtNjc0LDcgKzczOSw3
IEBAIHN0YXRpYyB2b2lkICpodm1lbXVsX21hcF9saW5lYXJfYWRkcigKPiAgICAgICAgICBBU1NF
UlQobWZuX3goKm1mbikgPT0gMCk7Cj4gIAo+ICAgICAgICAgIHJlcyA9IGh2bV90cmFuc2xhdGVf
Z2V0X3BhZ2UoY3VyciwgYWRkciwgdHJ1ZSwgcGZlYywKPiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICZwZmluZm8sICZwYWdlLCBOVUxMLCAmcDJtdCk7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmcGZpbmZvLCAmcGFnZSwgJmdmbiwgJnAybXQp
Owo+ICAKPiAgICAgICAgICBzd2l0Y2ggKCByZXMgKQo+ICAgICAgICAgIHsKCkFyZSB0aGVzZSB0
d28gaHVua3MgbGVmdG92ZXJzPyBZb3UgZG9uJ3QgdXNlICJnZm4iIGFueXdoZXJlLgoKPiBAQCAt
MTI0OCw3ICsxMzE4LDIxIEBAIGludCBodm1lbXVsX2luc25fZmV0Y2goCj4gICAgICAgICAgY29u
dGFpbmVyX29mKGN0eHQsIHN0cnVjdCBodm1fZW11bGF0ZV9jdHh0LCBjdHh0KTsKPiAgICAgIC8q
IENhcmVmdWwsIGFzIG9mZnNldCBjYW4gd3JhcCBvciB0cnVuY2F0ZSBXUlQgaW5zbl9idWZfZWlw
LiAqLwo+ICAgICAgdWludDhfdCBpbnNuX29mZiA9IG9mZnNldCAtIGh2bWVtdWxfY3R4dC0+aW5z
bl9idWZfZWlwOwo+ICsgICAgdWludDMyX3QgcGZlYyA9IFBGRUNfcGFnZV9wcmVzZW50IHwgUEZF
Q19pbnNuX2ZldGNoOwo+ICsgICAgdW5zaWduZWQgbG9uZyBhZGRyLCByZXBzID0gMTsKPiArICAg
IGludCByYyA9IDA7Cj4gKwo+ICsgICAgcmMgPSBodm1lbXVsX3ZpcnR1YWxfdG9fbGluZWFyKAo+
ICsgICAgICAgIHNlZywgb2Zmc2V0LCBieXRlcywgJnJlcHMsIGh2bV9hY2Nlc3NfaW5zbl9mZXRj
aCwgaHZtZW11bF9jdHh0LCAmYWRkcik7Cj4gKwo+ICsgICAgaWYgKCByYyAhPSBYODZFTVVMX09L
QVkgfHwgIWJ5dGVzICkKPiArICAgICAgICByZXR1cm4gcmM7Cj4gKwo+ICsgICAgaWYgKCBodm1l
bXVsX2N0eHQtPnNlZ19yZWdbeDg2X3NlZ19zc10uZHBsID09IDMgKQo+ICsgICAgICAgIHBmZWMg
fD0gUEZFQ191c2VyX21vZGU7Cj4gIAo+ICsgICAgaWYgKCBodm1lbXVsX3NlbmRfdm1fZXZlbnQo
YWRkciwgcGZlYywgYnl0ZXMsICpodm1lbXVsX2N0eHQpICkKPiArICAgICAgICByZXR1cm4gWDg2
RU1VTF9BQ0NFU1NfRVhDRVBUSU9OOwo+ICAgICAgLyoKPiAgICAgICAqIEZhbGwgYmFjayBpZiBy
ZXF1ZXN0ZWQgYnl0ZXMgYXJlIG5vdCBpbiB0aGUgcHJlZmV0Y2ggY2FjaGUuCj4gICAgICAgKiBC
dXQgYWx3YXlzIHBlcmZvcm0gdGhlIChmYWtlKSByZWFkIHdoZW4gYnl0ZXMgPT0gMC4KCkRlc3Bp
dGUgd2hhdCB3YXMgc2FpZCBiZWZvcmUgeW91J3JlIHN0aWxsIGRvaW5nIHRoaW5ncyBhIDJuZCB0
aW1lCmhlcmUganVzdCBiZWNhdXNlIG9mIGh2bWVtdWxfc2VuZF92bV9ldmVudCgpJ3MgbmVlZHMs
IGV2ZW4KaWYgdGhhdCBmdW5jdGlvbiBlbmRzIHVwIGJhaWxpbmcgcmlnaHQgYXdheS4KCkFsc28g
cGxlYXNlIGRvbid0IGxvc2UgdGhlIGJsYW5rIGxpbmUgYWhlYWQgb2YgdGhlIGNvbW1lbnQgeW91
CmFkZCBjb2RlIGFoZWFkIG9mLgoKPiAtLS0gYS94ZW4vYXJjaC94ODYveDg2X2VtdWxhdGUveDg2
X2VtdWxhdGUuaAo+ICsrKyBiL3hlbi9hcmNoL3g4Ni94ODZfZW11bGF0ZS94ODZfZW11bGF0ZS5o
Cj4gQEAgLTE2Miw2ICsxNjIsOCBAQCBzdHJ1Y3QgeDg2X2VtdWxfZnB1X2F1eCB7Cj4gICNkZWZp
bmUgWDg2RU1VTF9VTlJFQ09HTklaRUQgICBYODZFTVVMX1VOSU1QTEVNRU5URUQKPiAgIC8qIChj
bXB4Y2hnIGFjY2Vzc29yKTogQ01QWENIRyBmYWlsZWQuICovCj4gICNkZWZpbmUgWDg2RU1VTF9D
TVBYQ0hHX0ZBSUxFRCA3Cj4gKy8qIEVtdWxhdG9yIHRyaWVkIHRvIGFjY2VzcyBhIHByb3RlY3Rl
ZCBwYWdlLiAqLwo+ICsjZGVmaW5lIFg4NkVNVUxfQUNDRVNTX0VYQ0VQVElPTiA4CgpUaGlzIHN0
aWxsIGRvZXNuJ3QgbWFrZSBjbGVhciB3aGF0IHRoZSBkaWZmZXJlbmNlIGlzIHRvClg4NkVNVUxf
RVhDRVBUSU9OLgoKSmFuCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVj
dC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1k
ZXZlbA==

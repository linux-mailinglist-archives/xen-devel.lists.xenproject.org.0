Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id D75808F7A9
	for <lists+xen-devel@lfdr.de>; Fri, 16 Aug 2019 01:38:27 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hyPI9-0004Wz-4H; Thu, 15 Aug 2019 23:36:25 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=HmHk=WL=kernel.org=sstabellini@srs-us1.protection.inumbo.net>)
 id 1hyPI8-0004WZ-5k
 for xen-devel@lists.xenproject.org; Thu, 15 Aug 2019 23:36:24 +0000
X-Inumbo-ID: 7dac2528-bfb5-11e9-8baa-12813bfff9fa
Received: from mail.kernel.org (unknown [198.145.29.99])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 7dac2528-bfb5-11e9-8baa-12813bfff9fa;
 Thu, 15 Aug 2019 23:36:23 +0000 (UTC)
Received: from sstabellini-ThinkPad-T480s.xilinx.com
 (c-67-164-102-47.hsd1.ca.comcast.net [67.164.102.47])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 73F3B2089E;
 Thu, 15 Aug 2019 23:36:22 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=default; t=1565912182;
 bh=G3p5I60qpfIGdbFvY5MV5Azxe4+cOeULECZc45oO4YQ=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=k4Xelb54yMw4wpC8qLnZ6+IK7PMyX7hzoeEvE07VJEYDklan1hDxgLqSFxcKqfz+a
 THE+WbdSYGbS+f5UeRzX3mtDBWadUqX03nFMvy4Qp5qgpLVcjvaV6KMpyYr5wQtiZh
 YbEpbvixyV2iqK07AEVastBmLiHcocQAzXmM/rHw=
From: Stefano Stabellini <sstabellini@kernel.org>
To: xen-devel@lists.xenproject.org
Date: Thu, 15 Aug 2019 16:36:12 -0700
Message-Id: <20190815233618.31630-2-sstabellini@kernel.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <alpine.DEB.2.21.1908151634170.8737@sstabellini-ThinkPad-T480s>
References: <alpine.DEB.2.21.1908151634170.8737@sstabellini-ThinkPad-T480s>
Subject: [Xen-devel] [PATCH v6 2/8] xen/arm: make process_memory_node a
 device_tree_node_func
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <stefanos@xilinx.com>, julien.grall@arm.com,
 sstabellini@kernel.org, Volodymyr_Babchuk@epam.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Q2hhbmdlIHRoZSBzaWduYXR1cmUgb2YgcHJvY2Vzc19tZW1vcnlfbm9kZSB0byBtYXRjaApkZXZp
Y2VfdHJlZV9ub2RlX2Z1bmMuIFRoYW5rcyB0byB0aGlzIGNoYW5nZSwgdGhlIG5leHQgcGF0Y2gg
d2lsbCBiZQphYmxlIHRvIHVzZSBkZXZpY2VfdHJlZV9mb3JfZWFjaF9ub2RlIHRvIGNhbGwgcHJv
Y2Vzc19tZW1vcnlfbm9kZSBvbiBhbGwKdGhlIGNoaWxkcmVuIG9mIGEgcHJvdmlkZWQgbm9kZS4K
ClJldHVybiBlcnJvciBpZiB0aGVyZSBpcyBubyByZWcgcHJvcGVydHkgb3IgaWYgbnJfYmFua3Mg
aXMgcmVhY2hlZC4gTGV0CnRoZSBjYWxsZXIgZGVhbCB3aXRoIHRoZSBlcnJvci4KCkFkZCBhIHBy
aW50ayB3aGVuIGRldmljZSB0cmVlIHBhcnNpbmcgZmFpbHMuCgpTaWduZWQtb2ZmLWJ5OiBTdGVm
YW5vIFN0YWJlbGxpbmkgPHN0ZWZhbm9zQHhpbGlueC5jb20+Ci0tLQpDaGFuZ2VzIGluIHY2Ogot
IGZpeCBvdXQgb2Ygc3BhY2UgY2hlY2sKLSBicmluZyBiYWNrIHByaW50ayB3aGVuIGFkZHJlc3Nf
Y2VsbHMgb3Igc2l6ZV9jZWxscyBhcmUgbm90IHByb3Blcmx5IHNldAotIHJldHVybiAtRUlOVkFM
IGluIHRoYXQgY2FzZSAoZGlmZmVyZW50IGZyb20gcmVnIG1pc3NpbmcpCi0gYWRkIHByaW50ayB3
aGVuIHBhcnNpbmcgZmFpbHMKLSByZXR1cm4gLUVOT0VOVCB3aGVuIG1lbW9yeSBzaXplIGlzIDAK
CkNoYW5nZXMgaW4gdjU6Ci0gcmV0dXJuIC1FTk9FTlQgaWYgYWRkcmVzc19jZWxscyBvciBzaXpl
X2NlbGxzIGFyZSBub3QgcHJvcGVybHkgc2V0CgpDaGFuZ2VzIGluIHY0OgotIHJldHVybiBlcnJv
ciBpZiB0aGVyZSBpcyBubyByZWcgcHJvcGVyeSwgcmVtb3ZlIHByaW50awotIHJldHVybiBlcnJv
ciBpZiBucl9iYW5rcyBpcyByZWFjaGVkCgpDaGFuZ2VzIGluIHYzOgotIGltcHJvdmUgY29tbWl0
IG1lc3NhZ2UKLSBjaGVjayByZXR1cm4gdmFsdWUgb2YgcHJvY2Vzc19tZW1vcnlfbm9kZQoKQ2hh
bmdlcyBpbiB2MjoKLSBuZXcKLS0tCiB4ZW4vYXJjaC9hcm0vYm9vdGZkdC5jIHwgMjkgKysrKysr
KysrKysrKysrKysrLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAxOCBpbnNlcnRpb25zKCsp
LCAxMSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS94ZW4vYXJjaC9hcm0vYm9vdGZkdC5jIGIv
eGVuL2FyY2gvYXJtL2Jvb3RmZHQuYwppbmRleCBmMTYxNGVmN2ZjLi45ZGMyYzEzNTJkIDEwMDY0
NAotLS0gYS94ZW4vYXJjaC9hcm0vYm9vdGZkdC5jCisrKyBiL3hlbi9hcmNoL2FybS9ib290ZmR0
LmMKQEAgLTEzMCw5ICsxMzAsMTAgQEAgaW50IF9faW5pdCBkZXZpY2VfdHJlZV9mb3JfZWFjaF9u
b2RlKGNvbnN0IHZvaWQgKmZkdCwgaW50IG5vZGUsCiAgICAgcmV0dXJuIDA7CiB9CiAKLXN0YXRp
YyB2b2lkIF9faW5pdCBwcm9jZXNzX21lbW9yeV9ub2RlKGNvbnN0IHZvaWQgKmZkdCwgaW50IG5v
ZGUsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyICpu
YW1lLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdTMyIGFkZHJlc3Nf
Y2VsbHMsIHUzMiBzaXplX2NlbGxzKQorc3RhdGljIGludCBfX2luaXQgcHJvY2Vzc19tZW1vcnlf
bm9kZShjb25zdCB2b2lkICpmZHQsIGludCBub2RlLAorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjb25zdCBjaGFyICpuYW1lLCBpbnQgZGVwdGgsCisgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHUzMiBhZGRyZXNzX2NlbGxzLCB1MzIgc2l6ZV9jZWxs
cywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAqZGF0YSkKIHsK
ICAgICBjb25zdCBzdHJ1Y3QgZmR0X3Byb3BlcnR5ICpwcm9wOwogICAgIGludCBpOwpAQCAtMTQ1
LDE1ICsxNDYsMTIgQEAgc3RhdGljIHZvaWQgX19pbml0IHByb2Nlc3NfbWVtb3J5X25vZGUoY29u
c3Qgdm9pZCAqZmR0LCBpbnQgbm9kZSwKICAgICB7CiAgICAgICAgIHByaW50aygiZmR0OiBub2Rl
IGAlcyc6IGludmFsaWQgI2FkZHJlc3MtY2VsbHMgb3IgI3NpemUtY2VsbHMiLAogICAgICAgICAg
ICAgICAgbmFtZSk7Ci0gICAgICAgIHJldHVybjsKKyAgICAgICAgcmV0dXJuIC1FSU5WQUw7CiAg
ICAgfQogCiAgICAgcHJvcCA9IGZkdF9nZXRfcHJvcGVydHkoZmR0LCBub2RlLCAicmVnIiwgTlVM
TCk7CiAgICAgaWYgKCAhcHJvcCApCi0gICAgewotICAgICAgICBwcmludGsoImZkdDogbm9kZSBg
JXMnOiBtaXNzaW5nIGByZWcnIHByb3BlcnR5XG4iLCBuYW1lKTsKLSAgICAgICAgcmV0dXJuOwot
ICAgIH0KKyAgICAgICAgcmV0dXJuIC1FTk9FTlQ7CiAKICAgICBjZWxsID0gKGNvbnN0IF9fYmUz
MiAqKXByb3AtPmRhdGE7CiAgICAgYmFua3MgPSBmZHQzMl90b19jcHUocHJvcC0+bGVuKSAvIChy
ZWdfY2VsbHMgKiBzaXplb2YgKHUzMikpOwpAQCAtMTYyLDExICsxNjAsMTUgQEAgc3RhdGljIHZv
aWQgX19pbml0IHByb2Nlc3NfbWVtb3J5X25vZGUoY29uc3Qgdm9pZCAqZmR0LCBpbnQgbm9kZSwK
ICAgICB7CiAgICAgICAgIGRldmljZV90cmVlX2dldF9yZWcoJmNlbGwsIGFkZHJlc3NfY2VsbHMs
IHNpemVfY2VsbHMsICZzdGFydCwgJnNpemUpOwogICAgICAgICBpZiAoICFzaXplICkKLSAgICAg
ICAgICAgIGNvbnRpbnVlOworICAgICAgICAgICAgcmV0dXJuIC1FTk9FTlQ7CiAgICAgICAgIGJv
b3RpbmZvLm1lbS5iYW5rW2Jvb3RpbmZvLm1lbS5ucl9iYW5rc10uc3RhcnQgPSBzdGFydDsKICAg
ICAgICAgYm9vdGluZm8ubWVtLmJhbmtbYm9vdGluZm8ubWVtLm5yX2JhbmtzXS5zaXplID0gc2l6
ZTsKICAgICAgICAgYm9vdGluZm8ubWVtLm5yX2JhbmtzKys7CiAgICAgfQorCisgICAgaWYgKCBp
IDwgYmFua3MgKQorICAgICAgICByZXR1cm4gLUVOT1NQQzsKKyAgICByZXR1cm4gMDsKIH0KIAog
c3RhdGljIHZvaWQgX19pbml0IHByb2Nlc3NfbXVsdGlib290X25vZGUoY29uc3Qgdm9pZCAqZmR0
LCBpbnQgbm9kZSwKQEAgLTI5OCwxNSArMzAwLDIwIEBAIHN0YXRpYyBpbnQgX19pbml0IGVhcmx5
X3NjYW5fbm9kZShjb25zdCB2b2lkICpmZHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdTMyIGFkZHJlc3NfY2VsbHMsIHUzMiBzaXplX2NlbGxzLAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHZvaWQgKmRhdGEpCiB7CisgICAgaW50IHJjID0gMDsKKwogICAg
IGlmICggZGV2aWNlX3RyZWVfbm9kZV9tYXRjaGVzKGZkdCwgbm9kZSwgIm1lbW9yeSIpICkKLSAg
ICAgICAgcHJvY2Vzc19tZW1vcnlfbm9kZShmZHQsIG5vZGUsIG5hbWUsIGFkZHJlc3NfY2VsbHMs
IHNpemVfY2VsbHMpOworICAgICAgICByYyA9IHByb2Nlc3NfbWVtb3J5X25vZGUoZmR0LCBub2Rl
LCBuYW1lLCBkZXB0aCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3Nf
Y2VsbHMsIHNpemVfY2VsbHMsIE5VTEwpOwogICAgIGVsc2UgaWYgKCBkZXB0aCA8PSAzICYmIChk
ZXZpY2VfdHJlZV9ub2RlX2NvbXBhdGlibGUoZmR0LCBub2RlLCAieGVuLG11bHRpYm9vdC1tb2R1
bGUiICkgfHwKICAgICAgICAgICAgICAgZGV2aWNlX3RyZWVfbm9kZV9jb21wYXRpYmxlKGZkdCwg
bm9kZSwgIm11bHRpYm9vdCxtb2R1bGUiICkpKQogICAgICAgICBwcm9jZXNzX211bHRpYm9vdF9u
b2RlKGZkdCwgbm9kZSwgbmFtZSwgYWRkcmVzc19jZWxscywgc2l6ZV9jZWxscyk7CiAgICAgZWxz
ZSBpZiAoIGRlcHRoID09IDEgJiYgZGV2aWNlX3RyZWVfbm9kZV9tYXRjaGVzKGZkdCwgbm9kZSwg
ImNob3NlbiIpICkKICAgICAgICAgcHJvY2Vzc19jaG9zZW5fbm9kZShmZHQsIG5vZGUsIG5hbWUs
IGFkZHJlc3NfY2VsbHMsIHNpemVfY2VsbHMpOwogCi0gICAgcmV0dXJuIDA7CisgICAgaWYgKCBy
YyA8IDAgKQorICAgICAgICBwcmludGsoImZkdDogbm9kZSBgJXMnOiBwYXJzaW5nIGZhaWxlZFxu
IiwgbmFtZSk7CisgICAgcmV0dXJuIHJjOwogfQogCiBzdGF0aWMgdm9pZCBfX2luaXQgZWFybHlf
cHJpbnRfaW5mbyh2b2lkKQotLSAKMi4xNy4xCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlz
dHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xp
c3RpbmZvL3hlbi1kZXZlbA==

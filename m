Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id E5D694E032
	for <lists+xen-devel@lfdr.de>; Fri, 21 Jun 2019 08:02:28 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1heCaX-0005CQ-Bm; Fri, 21 Jun 2019 05:59:53 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=V6W2=UU=intel.com=chen.zhang@srs-us1.protection.inumbo.net>)
 id 1heCaV-0005Bt-OM
 for xen-devel@lists.xenproject.org; Fri, 21 Jun 2019 05:59:51 +0000
X-Inumbo-ID: c7e8c2b6-93e9-11e9-8980-bc764e045a96
Received: from mga04.intel.com (unknown [192.55.52.120])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id c7e8c2b6-93e9-11e9-8980-bc764e045a96;
 Fri, 21 Jun 2019 05:59:50 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by fmsmga104.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 20 Jun 2019 22:59:49 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.63,399,1557212400"; d="scan'208";a="311898778"
Received: from fmsmsx103.amr.corp.intel.com ([10.18.124.201])
 by orsmga004.jf.intel.com with ESMTP; 20 Jun 2019 22:59:49 -0700
Received: from fmsmsx603.amr.corp.intel.com (10.18.126.83) by
 FMSMSX103.amr.corp.intel.com (10.18.124.201) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Thu, 20 Jun 2019 22:59:48 -0700
Received: from fmsmsx603.amr.corp.intel.com (10.18.126.83) by
 fmsmsx603.amr.corp.intel.com (10.18.126.83) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id
 15.1.1713.5; Thu, 20 Jun 2019 22:59:48 -0700
Received: from shsmsx107.ccr.corp.intel.com (10.239.4.96) by
 fmsmsx603.amr.corp.intel.com (10.18.126.83) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256) id 15.1.1713.5
 via Frontend Transport; Thu, 20 Jun 2019 22:59:48 -0700
Received: from shsmsx102.ccr.corp.intel.com ([169.254.2.33]) by
 SHSMSX107.ccr.corp.intel.com ([169.254.9.173]) with mapi id 14.03.0439.000;
 Fri, 21 Jun 2019 13:59:46 +0800
From: "Zhang, Chen" <chen.zhang@intel.com>
To: Ian Jackson <ian.jackson@eu.citrix.com>, Wei Liu <wl@xen.org>,
 "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH] tools/libxl: Add iothread support for COLO
Thread-Index: AQHVH2ftNWbTjPTRrUqcQu5k5egqwqalrbNw
Date: Fri, 21 Jun 2019 05:59:45 +0000
Message-ID: <9CFF81C0F6B98A43A459C9EDAD400D780618ABAD@shsmsx102.ccr.corp.intel.com>
References: <20190610083336.18235-1-chen.zhang@intel.com>
In-Reply-To: <20190610083336.18235-1-chen.zhang@intel.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
dlp-product: dlpe-windows
dlp-version: 11.0.600.7
dlp-reaction: no-action
x-ctpclassification: CTP_NT
x-titus-metadata-40: eyJDYXRlZ29yeUxhYmVscyI6IiIsIk1ldGFkYXRhIjp7Im5zIjoiaHR0cDpcL1wvd3d3LnRpdHVzLmNvbVwvbnNcL0ludGVsMyIsImlkIjoiZGE3NWRiODYtZDY5Ny00MTlhLWJmMzAtYWMxODYzYWNhMzA2IiwicHJvcHMiOlt7Im4iOiJDVFBDbGFzc2lmaWNhdGlvbiIsInZhbHMiOlt7InZhbHVlIjoiQ1RQX05UIn1dfV19LCJTdWJqZWN0TGFiZWxzIjpbXSwiVE1DVmVyc2lvbiI6IjE3LjEwLjE4MDQuNDkiLCJUcnVzdGVkTGFiZWxIYXNoIjoiRkNCVm8wMk42Q2hRMm1OTWYxZHF1ZjZPTmFJS21pY0xwVFwvMnNPTHRvVElpSmErWmdGemdCbGVvdUtVMjlVWVMifQ==
x-originating-ip: [10.239.127.40]
MIME-Version: 1.0
Subject: Re: [Xen-devel] [PATCH] tools/libxl: Add iothread support for COLO
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Zhang Chen <zhangckid@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGkgQWxsLAoKUGxlYXNlIGdpdmUgbWUgc29tZSBjb21tZW50cyBvbiB0aGlzIHBhdGNoLgpUaGlz
IHBhdGNoIGp1c3QgYWRkIHNvbWUgbWlzc2VkIHBhcmFtZXRlciBpbiBxZW11IHNpZGUuCgpUaGFu
a3MKWmhhbmcgQ2hlbgoKPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQo+IEZyb206IFpoYW5n
LCBDaGVuCj4gU2VudDogTW9uZGF5LCBKdW5lIDEwLCAyMDE5IDQ6MzQgUE0KPiBUbzogSWFuIEph
Y2tzb24gPGlhbi5qYWNrc29uQGV1LmNpdHJpeC5jb20+OyBXZWkgTGl1IDx3bEB4ZW4ub3JnPjsg
eGVuLQo+IGRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCj4gQ2M6IFpoYW5nIENoZW4gPHpoYW5n
Y2tpZEBnbWFpbC5jb20+OyBaaGFuZywgQ2hlbiA8Y2hlbi56aGFuZ0BpbnRlbC5jb20+Cj4gU3Vi
amVjdDogW1BBVENIXSB0b29scy9saWJ4bDogQWRkIGlvdGhyZWFkIHN1cHBvcnQgZm9yIENPTE8K
PiAKPiBGcm9tOiBaaGFuZyBDaGVuIDxjaGVuLnpoYW5nQGludGVsLmNvbT4KPiAKPiBYZW4gQ09M
TyBhbmQgS1ZNIENPTE8gc2hhcmVkIGxvdHMgb2YgY29kZSBpbiBRZW11Lgo+IEtWTSBDT0xPIGhh
cyBhZGRlZCB0aGUgaW90aHJlYWQgc3VwcG9ydCwgc28gd2UgYWRkIGl0IG9uIFhlbi4KPiAKPiBE
ZXRhaWw6Cj4gaHR0cHM6Ly93aWtpLnFlbXUub3JnL0ZlYXR1cmVzL0NPTE8KPiAKPiBTaWduZWQt
b2ZmLWJ5OiBaaGFuZyBDaGVuIDxjaGVuLnpoYW5nQGludGVsLmNvbT4KPiAtLS0KPiAgdG9vbHMv
bGlieGwvbGlieGxfZG0uYyAgICAgIHwgMTQgKysrKysrKysrKystLS0KPiAgdG9vbHMvbGlieGwv
bGlieGxfdHlwZXMuaWRsIHwgIDIgKysKPiAgdG9vbHMveGwveGxfcGFyc2UuYyAgICAgICAgIHwg
IDQgKysrKwo+ICAzIGZpbGVzIGNoYW5nZWQsIDE3IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25z
KC0pCj4gCj4gZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhsL2xpYnhsX2RtLmMgYi90b29scy9saWJ4
bC9saWJ4bF9kbS5jIGluZGV4Cj4gZjRmYzk2NDE1ZC4uNmJiNDAwZWZkZiAxMDA2NDQKPiAtLS0g
YS90b29scy9saWJ4bC9saWJ4bF9kbS5jCj4gKysrIGIvdG9vbHMvbGlieGwvbGlieGxfZG0uYwo+
IEBAIC0xNjI5LDE3ICsxNjI5LDI1IEBAIHN0YXRpYyBpbnQKPiBsaWJ4bF9fYnVpbGRfZGV2aWNl
X21vZGVsX2FyZ3NfbmV3KGxpYnhsX19nYyAqZ2MsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9fZmlsdGVyX3JlZGlyZWN0b3IxX3F1ZXVlLAo+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmljc1tpXS5jb2xvX2ZpbHRlcl9y
ZWRpcmVjdG9yMV9vdXRkZXYpKTsKPiAgICAgICAgICAgICAgICAgICAgICB9Cj4gKyAgICAgICAg
ICAgICAgICAgICAgaWYgKG5pY3NbaV0uY29sb19pb3RocmVhZCkgewo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICBmbGV4YXJyYXlfYXBwZW5kKGRtX2FyZ3MsICItb2JqZWN0Iik7Cj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgIGZsZXhhcnJheV9hcHBlbmQoZG1fYXJncywKPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgR0NTUFJJTlRGKCJpb3RocmVhZCxpZD0lcyIsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9faW90aHJlYWQpKTsKPiAr
ICAgICAgICAgICAgICAgICAgICB9Cj4gICAgICAgICAgICAgICAgICAgICAgaWYgKG5pY3NbaV0u
Y29sb19jb21wYXJlX3ByaV9pbiAmJgo+ICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ld
LmNvbG9fY29tcGFyZV9zZWNfaW4gJiYKPiAgICAgICAgICAgICAgICAgICAgICAgICAgbmljc1tp
XS5jb2xvX2NvbXBhcmVfb3V0ICYmCj4gLSAgICAgICAgICAgICAgICAgICAgICAgIG5pY3NbaV0u
Y29sb19jb21wYXJlX25vdGlmeV9kZXYpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICAgbmlj
c1tpXS5jb2xvX2NvbXBhcmVfbm90aWZ5X2RldiAmJgo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICBuaWNzW2ldLmNvbG9fY29tcGFyZV9pb3RocmVhZCkgewo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICBmbGV4YXJyYXlfYXBwZW5kKGRtX2FyZ3MsICItb2JqZWN0Iik7Cj4gICAgICAgICAgICAg
ICAgICAgICAgICAgIGZsZXhhcnJheV9hcHBlbmQoZG1fYXJncywKPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgR0NTUFJJTlRGKCJjb2xvLQo+IGNvbXBhcmUsaWQ9YzEscHJpbWFyeV9pbj0l
cyxzZWNvbmRhcnlfaW49JXMsb3V0ZGV2PSVzLG5vdGlmeV9kZXY9JXMiLAo+ICsKPiArIEdDU1BS
SU5URigiY29sby1jb21wYXJlLGlkPWMxLHByaW1hcnlfaW49JXMsc2Vjb25kYXJ5X2luPSVzLG91
dGRldj0lcywKPiArIG5vdGlmeV9kZXY9JXMsaW90aHJlYWQ9JXMiLAo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgbmljc1tpXS5jb2xvX2NvbXBhcmVfcHJpX2luLAo+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmljc1tpXS5jb2xvX2NvbXBhcmVf
c2VjX2luLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmljc1tpXS5j
b2xvX2NvbXBhcmVfb3V0LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
bmljc1tpXS5jb2xvX2NvbXBhcmVfbm90aWZ5X2RldikpOwo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgbmljc1tpXS5jb2xvX2NvbXBhcmVfbm90aWZ5X2RldiwKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pY3NbaV0uY29sb19jb21wYXJlX2lv
dGhyZWFkKSk7Cj4gICAgICAgICAgICAgICAgICAgICAgfQo+ICAgICAgICAgICAgICAgICAgfQo+
ICAgICAgICAgICAgICAgICAgaW9lbXVfbmljcysrOwo+IGRpZmYgLS1naXQgYS90b29scy9saWJ4
bC9saWJ4bF90eXBlcy5pZGwgYi90b29scy9saWJ4bC9saWJ4bF90eXBlcy5pZGwgaW5kZXgKPiBi
NjEzOTljZTM2Li5mMDQzNWE1MTc3IDEwMDY0NAo+IC0tLSBhL3Rvb2xzL2xpYnhsL2xpYnhsX3R5
cGVzLmlkbAo+ICsrKyBiL3Rvb2xzL2xpYnhsL2xpYnhsX3R5cGVzLmlkbAo+IEBAIC03MjcsMTAg
KzcyNywxMiBAQCBsaWJ4bF9kZXZpY2VfbmljID0gU3RydWN0KCJkZXZpY2VfbmljIiwgWwo+ICAg
ICAgKCJjb2xvX2ZpbHRlcl9yZWRpcmVjdG9yMV9xdWV1ZSIsIHN0cmluZyksCj4gICAgICAoImNv
bG9fZmlsdGVyX3JlZGlyZWN0b3IxX2luZGV2Iiwgc3RyaW5nKSwKPiAgICAgICgiY29sb19maWx0
ZXJfcmVkaXJlY3RvcjFfb3V0ZGV2Iiwgc3RyaW5nKSwKPiArICAgICgiY29sb19pb3RocmVhZCIs
IHN0cmluZyksCj4gICAgICAoImNvbG9fY29tcGFyZV9wcmlfaW4iLCBzdHJpbmcpLAo+ICAgICAg
KCJjb2xvX2NvbXBhcmVfc2VjX2luIiwgc3RyaW5nKSwKPiAgICAgICgiY29sb19jb21wYXJlX291
dCIsIHN0cmluZyksCj4gICAgICAoImNvbG9fY29tcGFyZV9ub3RpZnlfZGV2Iiwgc3RyaW5nKSwK
PiArICAgICgiY29sb19jb21wYXJlX2lvdGhyZWFkIiwgc3RyaW5nKSwKPiAgICAgICgiY29sb19z
b2NrX3NlY19yZWRpcmVjdG9yMF9pZCIsIHN0cmluZyksCj4gICAgICAoImNvbG9fc29ja19zZWNf
cmVkaXJlY3RvcjBfaXAiLCBzdHJpbmcpLAo+ICAgICAgKCJjb2xvX3NvY2tfc2VjX3JlZGlyZWN0
b3IwX3BvcnQiLCBzdHJpbmcpLCBkaWZmIC0tZ2l0IGEvdG9vbHMveGwveGxfcGFyc2UuYwo+IGIv
dG9vbHMveGwveGxfcGFyc2UuYyBpbmRleCBlMTA1YmRhMmJiLi5jZDE2ODU2OTEwIDEwMDY0NAo+
IC0tLSBhL3Rvb2xzL3hsL3hsX3BhcnNlLmMKPiArKysgYi90b29scy94bC94bF9wYXJzZS5jCj4g
QEAgLTUyMSw2ICs1MjEsOCBAQCBpbnQgcGFyc2VfbmljX2NvbmZpZyhsaWJ4bF9kZXZpY2Vfbmlj
ICpuaWMsIFhMVV9Db25maWcKPiAqKmNvbmZpZywgY2hhciAqdG9rZW4pCj4gICAgICAgICAgcmVw
bGFjZV9zdHJpbmcoJm5pYy0+Y29sb19maWx0ZXJfcmVkaXJlY3RvcjFfaW5kZXYsIG9wYXJnKTsK
PiAgICAgIH0gZWxzZSBpZiAoTUFUQ0hfT1BUSU9OKCJjb2xvX2ZpbHRlcl9yZWRpcmVjdG9yMV9v
dXRkZXYiLCB0b2tlbiwgb3BhcmcpKSB7Cj4gICAgICAgICAgcmVwbGFjZV9zdHJpbmcoJm5pYy0+
Y29sb19maWx0ZXJfcmVkaXJlY3RvcjFfb3V0ZGV2LCBvcGFyZyk7Cj4gKyAgICB9IGVsc2UgaWYg
KE1BVENIX09QVElPTigiY29sb19pb3RocmVhZCIsIHRva2VuLCBvcGFyZykpIHsKPiArICAgICAg
ICByZXBsYWNlX3N0cmluZygmbmljLT5jb2xvX2lvdGhyZWFkLCBvcGFyZyk7Cj4gICAgICB9IGVs
c2UgaWYgKE1BVENIX09QVElPTigiY29sb19jb21wYXJlX3ByaV9pbiIsIHRva2VuLCBvcGFyZykp
IHsKPiAgICAgICAgICByZXBsYWNlX3N0cmluZygmbmljLT5jb2xvX2NvbXBhcmVfcHJpX2luLCBv
cGFyZyk7Cj4gICAgICB9IGVsc2UgaWYgKE1BVENIX09QVElPTigiY29sb19jb21wYXJlX3NlY19p
biIsIHRva2VuLCBvcGFyZykpIHsgQEAgLQo+IDUyOSw2ICs1MzEsOCBAQCBpbnQgcGFyc2Vfbmlj
X2NvbmZpZyhsaWJ4bF9kZXZpY2VfbmljICpuaWMsIFhMVV9Db25maWcKPiAqKmNvbmZpZywgY2hh
ciAqdG9rZW4pCj4gICAgICAgICAgcmVwbGFjZV9zdHJpbmcoJm5pYy0+Y29sb19jb21wYXJlX291
dCwgb3BhcmcpOwo+ICAgICAgfSBlbHNlIGlmIChNQVRDSF9PUFRJT04oImNvbG9fY29tcGFyZV9u
b3RpZnlfZGV2IiwgdG9rZW4sIG9wYXJnKSkgewo+ICAgICAgICAgIHJlcGxhY2Vfc3RyaW5nKCZu
aWMtPmNvbG9fY29tcGFyZV9ub3RpZnlfZGV2LCBvcGFyZyk7Cj4gKyAgICB9IGVsc2UgaWYgKE1B
VENIX09QVElPTigiY29sb19jb21wYXJlX2lvdGhyZWFkIiwgdG9rZW4sIG9wYXJnKSkgewo+ICsg
ICAgICAgIHJlcGxhY2Vfc3RyaW5nKCZuaWMtPmNvbG9fY29tcGFyZV9pb3RocmVhZCwgb3Bhcmcp
Owo+ICAgICAgfSBlbHNlIGlmIChNQVRDSF9PUFRJT04oImNvbG9fc29ja19zZWNfcmVkaXJlY3Rv
cjBfaWQiLCB0b2tlbiwgb3BhcmcpKSB7Cj4gICAgICAgICAgcmVwbGFjZV9zdHJpbmcoJm5pYy0+
Y29sb19zb2NrX3NlY19yZWRpcmVjdG9yMF9pZCwgb3BhcmcpOwo+ICAgICAgfSBlbHNlIGlmIChN
QVRDSF9PUFRJT04oImNvbG9fc29ja19zZWNfcmVkaXJlY3RvcjBfaXAiLCB0b2tlbiwgb3Bhcmcp
KSB7Cj4gLS0KPiAyLjE3LkdJVAoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnBy
b2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94
ZW4tZGV2ZWw=

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 08B19A1A95
	for <lists+xen-devel@lfdr.de>; Thu, 29 Aug 2019 14:59:21 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i3Jyp-0001hW-8G; Thu, 29 Aug 2019 12:56:47 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=C/xl=WZ=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1i3Jyo-0001hR-Fc
 for xen-devel@lists.xenproject.org; Thu, 29 Aug 2019 12:56:46 +0000
X-Inumbo-ID: 7407e9e2-ca5c-11e9-8980-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 7407e9e2-ca5c-11e9-8980-bc764e2007e4;
 Thu, 29 Aug 2019 12:56:44 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id D96F0ADD9;
 Thu, 29 Aug 2019 12:56:43 +0000 (UTC)
To: Andrew Cooper <andrew.cooper3@citrix.com>
References: <20190819182612.16706-1-andrew.cooper3@citrix.com>
 <20190819182612.16706-3-andrew.cooper3@citrix.com>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <e9de2d38-3266-b4c1-de73-cf9d0aef95c7@suse.com>
Date: Thu, 29 Aug 2019 14:56:44 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190819182612.16706-3-andrew.cooper3@citrix.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH 2/2] x86/AMD: Fix handling of x87 exception
 pointers on Fam17h hardware
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Xen-devel <xen-devel@lists.xenproject.org>, Wei Liu <wei.liu2@citrix.com>,
 =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMTkuMDguMjAxOSAyMDoyNiwgQW5kcmV3IENvb3BlciB3cm90ZToKPiBBTUQgUHJlLUZhbTE3
aCBDUFVzICJvcHRpbWlzZSIge0YsfVh7U0FWRSxSU1RPUn0gYnkgbm90IHNhdmluZy9yZXN0b3Jp
bmcKPiBGT1AvRklQL0ZEUCBpZiBhbiB4ODcgZXhjZXB0aW9uIGlzbid0IHBlbmRpbmcuICBUaGlz
IGNhdXNlcyBhbiBpbmZvcm1hdGlvbgo+IGxlYWssIENWRS0yMDA2LTEwNTYsIGFuZCB3b3JrZWQg
YXJvdW5kIGJ5IHNldmVyYWwgT1NlcywgaW5jbHVkaW5nIFhlbi4gIEFNRAo+IEZhbTE3aCBDUFVz
IG5vIGxvbmdlciBoYXZlIHRoaXMgbGVhaywgYW5kIGFkdmVydGlzZSBzbyBpbiBhIENQVUlEIGJp
dC4KPiAKPiBJbnRyb2R1Y2UgdGhlIFJTVFJfRlBfRVJSX1BUUlMgZmVhdHVyZSwgYXMgc3BlY2lm
aWVkIGJ5IEFNRCwgYW5kIGV4cG9zZSB0byBhbGwKPiBndWVzdHMgYnkgZGVmYXVsdC4gIFdoaWxl
IGFkanVzdGluZyBsaWJ4bCdzIGNwdWlkIHRhYmxlLCBhZGQgQ0xaRVJPIHdoaWNoCj4gbG9va3Mg
dG8gaGF2ZSBiZWVuIG9taXR0ZWQgcHJldmlvdXNseS4KPiAKPiBBbHNvIGludHJvZHVjZSBhbiBY
ODZfQlVHIGJpdCB0byB0cmlnZ2VyIHRoZSAoRilYUlNUT1Igd29ya2Fyb3VuZCwgYW5kIHNldCBp
dAo+IG9uIEFNRCBoYXJkd2FyZSB3aGVyZSBSU1RSX0ZQX0VSUl9QVFJTIGlzIG5vdCBhZHZlcnRp
c2VkLiAgT3B0aW1pc2UgdGhlCj4gd29ya2Fyb3VuZCBwYXRoIGJ5IGRyb3BwaW5nIHRoZSBkYXRh
LWRlcGVuZGVudCB1bnByZWRpY3RhYmxlIGNvbmRpdGlvbnMgd2hpY2gKPiB3aWxsIGV2YWx1dGUg
dG8gdHJ1ZSBmb3IgYWxsIDY0Yml0IE9TZXMgYW5kIG1vc3QgMzJiaXQgb25lcy4KCkkgZGVmaW5p
dGVseSBkb24ndCBidXkgdGhlICJhbGwgNjRiaXQgT1NlcyIgcGFydCBoZXJlOiBBbnlvbmUgZG9p
bmcKZnVsbCA4MC1iaXQgRlAgb3BlcmF0aW9ucyB3aWxsIGhhdmUgdG8gdXNlIHRoZSBGUFUsIGFu
ZCBoZW5jZSBtYXkKd2FudCB0byBoYXZlIHNvbWUgdW5tYXNrZWQgZXhjZXB0aW9ucy4gSSdtIGFs
c28gbm90IHN1cmUgd2h5IHlvdQpjYWxsIHRoZW0gInVucHJlZGljdGFibGUiOiBJZiBhbGwgKG9y
IG1vc3QpIGNhc2VzIG1hdGNoLCB0aGUgYnJhbmNoCnRoZXJlIGNvdWxkIGJlIHByZXR0eSB3ZWxs
IHByZWRpY3RlZCAoc3ViamVjdCBvZiBjb3Vyc2UgdG8gY2FwYWNpdHkpLgoKQWxsIGluIGFsbCBJ
J2QgcHJlZmVyIGlmIHRoZSBjb25kaXRpb25zIHJlbWFpbmVkIGluIHBsYWNlOyBteSBtaW5pbWFs
CnJlcXVlc3Qgd291bGQgYmUgZm9yIHRoZXJlIHRvIGJlIGEgY29tbWVudCB3aHkgdGhlcmUncyBu
byBldmFsdWF0aW9uCm9mIEZTVy9GQ1cuCgo+IC0tLSBhL3hlbi9hcmNoL3g4Ni9pMzg3LmMKPiAr
KysgYi94ZW4vYXJjaC94ODYvaTM4Ny5jCj4gQEAgLTQzLDIwICs0MywxNyBAQCBzdGF0aWMgaW5s
aW5lIHZvaWQgZnB1X2Z4cnN0b3Ioc3RydWN0IHZjcHUgKnYpCj4gICAgICBjb25zdCB0eXBlb2Yo
di0+YXJjaC54c2F2ZV9hcmVhLT5mcHVfc3NlKSAqZnB1X2N0eHQgPSB2LT5hcmNoLmZwdV9jdHh0
Owo+ICAKPiAgICAgIC8qCj4gLSAgICAgKiBBTUQgQ1BVcyBkb24ndCBzYXZlL3Jlc3RvcmUgRkRQ
L0ZJUC9GT1AgdW5sZXNzIGFuIGV4Y2VwdGlvbgo+ICsgICAgICogU29tZSBDUFVzIGRvbid0IHNh
dmUvcmVzdG9yZSBGRFAvRklQL0ZPUCB1bmxlc3MgYW4gZXhjZXB0aW9uCgpBcmUgdGhlcmUgYW55
IG5vbi1BTUQgQ1BVcyBrbm93biB0byBoYXZlIHRoaXMgaXNzdWU/IElmIG5vdCwgaXMKdGhlcmUg
YSBwYXJ0aWN1bGFyIHJlYXNvbiB5b3UgZG9uJ3Qgc2F5ICJTb21lIEFNRCBDUFVzIC4uLiI/Cgo+
ICAgICAgICogaXMgcGVuZGluZy4gQ2xlYXIgdGhlIHg4NyBzdGF0ZSBoZXJlIGJ5IHNldHRpbmcg
aXQgdG8gZml4ZWQKPiAgICAgICAqIHZhbHVlcy4gVGhlIGh5cGVydmlzb3IgZGF0YSBzZWdtZW50
IGNhbiBiZSBzb21ldGltZXMgMCBhbmQKPiAgICAgICAqIHNvbWV0aW1lcyBuZXcgdXNlciB2YWx1
ZS4gQm90aCBzaG91bGQgYmUgb2suIFVzZSB0aGUgRlBVIHNhdmVkCj4gICAgICAgKiBkYXRhIGJs
b2NrIGFzIGEgc2FmZSBhZGRyZXNzIGJlY2F1c2UgaXQgc2hvdWxkIGJlIGluIEwxLgo+ICAgICAg
ICovCj4gLSAgICBpZiAoICEoZnB1X2N0eHQtPmZzdyAmIH5mcHVfY3R4dC0+ZmN3ICYgMHgwMDNm
KSAmJgo+IC0gICAgICAgICBib290X2NwdV9kYXRhLng4Nl92ZW5kb3IgPT0gWDg2X1ZFTkRPUl9B
TUQgKQo+IC0gICAgewo+ICsgICAgaWYgKCBjcHVfYnVnX2ZwdV9wdHJfbGVhayApCj4gICAgICAg
ICAgYXNtIHZvbGF0aWxlICggImZuY2xleFxuXHQiCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ImZmcmVlICUlc3QoNylcblx0IiAvKiBjbGVhciBzdGFjayB0YWcgKi8KPiAgICAgICAgICAgICAg
ICAgICAgICAgICAiZmlsZGwgJTAiICAgICAgICAgIC8qIGxvYWQgdG8gY2xlYXIgc3RhdGUgKi8K
PiAgICAgICAgICAgICAgICAgICAgICAgICA6IDogIm0iICgqZnB1X2N0eHQpICk7CgpJZiBoZXJl
IGFuZCBpbiB0aGUgcmVzcGVjdGl2ZSB4c2F2ZSBpbnN0YW5jZSB5b3UnZCB1c2UgYWx0ZXJuYXRp
dmVzCnBhdGNoaW5nLCBJIHdvdWxkbid0IG1pbmQgdGhlIHVzZSBvZiBhIFg4Nl9CVUdfKiBmb3Ig
dGhpcyAoYXMgbWFkZQpwb3NzaWJsZSBieSBwYXRjaCAxKS4gQnV0IGFzIHNhaWQgYmVmb3JlLCBq
dXN0IGxpa2UgZm9yIHN5bnRoZXRpYwpmZWF0dXJlcyBJIHN0cm9uZ2x5IHRoaW5rIHdlIHNob3Vs
ZCB1c2Ugc2ltcGxlIGJvb2xlYW4gdmFyaWFibGVzCndoZW4gdXNpbmcgdGhlbSBvbmx5IGluIGlm
KCktcy4gVXNlIG9mIHRoZSBmZWF0dXJlKC9idWcpIG1hY2hpbmVyeQppcyBuZWVkZWQgb25seSB0
byBub3QgZnVydGhlciBjb21wbGljYXRlIGFsdGVybmF0aXZlcyBwYXRjaGluZy4KCj4gQEAgLTE2
OSwxMSArMTY2LDEwIEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBmcHVfZnhzYXZlKHN0cnVjdCB2Y3B1
ICp2KQo+ICAgICAgICAgICAgICAgICAgICAgICAgIDogIj1tIiAoKmZwdV9jdHh0KSA6ICJSIiAo
ZnB1X2N0eHQpICk7Cj4gIAo+ICAgICAgICAgIC8qCj4gLSAgICAgICAgICogQU1EIENQVXMgZG9u
J3Qgc2F2ZS9yZXN0b3JlIEZEUC9GSVAvRk9QIHVubGVzcyBhbiBleGNlcHRpb24KPiAtICAgICAg
ICAgKiBpcyBwZW5kaW5nLgo+ICsgICAgICAgICAqIFNvbWUgQ1BVcyBkb24ndCBzYXZlL3Jlc3Rv
cmUgRkRQL0ZJUC9GT1AgdW5sZXNzIGFuIGV4Y2VwdGlvbiBpcwo+ICsgICAgICAgICAqIHBlbmRp
bmcuICBUaGUgcmVzdG9yZSBjb2RlIGZpbGxzIGluIHN1aXRhYmxlIGRlZmF1bHRzLgo+ICAgICAg
ICAgICAqLwo+IC0gICAgICAgIGlmICggIShmcHVfY3R4dC0+ZnN3ICYgMHgwMDgwKSAmJgo+IC0g
ICAgICAgICAgICAgYm9vdF9jcHVfZGF0YS54ODZfdmVuZG9yID09IFg4Nl9WRU5ET1JfQU1EICkK
PiArICAgICAgICBpZiAoIGNwdV9idWdfZnB1X3B0cl9sZWFrICYmICEoZnB1X2N0eHQtPmZzdyAm
IDB4MDA4MCkgKQo+ICAgICAgICAgICAgICByZXR1cm47CgpUaGUgY29tbWVudCBhZGRpdGlvbiBz
ZWVtcyBhIGxpdHRsZSB1bm1vdGl2YXRlZDogVGhlIGNvZGUgaGVyZSBpc24ndAphYm91dCBsZWFr
aW5nIGRhdGEsIGJ1dCBhYm91dCBoYXZpbmcgdmFsaWQgZGF0YSB0byBjb25zdW1lIChkb3duCmZy
b20gaGVyZSkuIFdpdGggdGhpcywga2V5aW5nIHRoZSByZXR1cm4gdG8gY3B1X2J1Z18qIGFsc28g
ZG9lc24ndApsb29rIHZlcnkgbmljZSwgYnV0IEkgYWRtaXQgSSBjYW4ndCBzdWdnZXN0IGEgYmV0
dGVyIGFsdGVybmF0aXZlCihvdGhlciB0aGFuIGxlYXZpbmcgdGhlIHZlbmRvciBjaGVjayBpbiBw
bGFjZSBhbmQgY2hlY2tpbmcgdGhlClg4Nl9GRUFUVVJFX1JTVFJfRlBfRVJSX1BUUlMgYml0KS4K
CkFuIG9wdGlvbiBtaWdodCBiZSB0byBnaXZlIHRoZSBjb25zdHJ1Y3QgYSBkaWZmZXJlbnQgbmFt
ZSwgd2l0aG91dAoibGVhayIgaW4gaXQgKE5PX0ZQX0VSUl9QVFJTPykuCgpKYW4KCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5n
IGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJv
amVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 616B86AD0B
	for <lists+xen-devel@lfdr.de>; Tue, 16 Jul 2019 18:44:26 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hnQVk-0003bs-Sk; Tue, 16 Jul 2019 16:41:04 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=LiPz=VN=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hnQVj-0003bQ-7c
 for xen-devel@lists.xenproject.org; Tue, 16 Jul 2019 16:41:03 +0000
X-Inumbo-ID: 7e9e3c1c-a7e8-11e9-9ac1-9339b4caf630
Received: from m4a0041g.houston.softwaregrp.com (unknown [15.124.2.87])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 7e9e3c1c-a7e8-11e9-9ac1-9339b4caf630;
 Tue, 16 Jul 2019 16:41:01 +0000 (UTC)
Received: FROM m4a0041g.houston.softwaregrp.com (15.120.17.147) BY
 m4a0041g.houston.softwaregrp.com WITH ESMTP; 
 Tue, 16 Jul 2019 16:41:00 +0000
Received: from M9W0067.microfocus.com (2002:f79:be::f79:be) by
 M4W0335.microfocus.com (2002:f78:1193::f78:1193) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10; Tue, 16 Jul 2019 16:39:59 +0000
Received: from NAM03-DM3-obe.outbound.protection.outlook.com (15.124.72.10) by
 M9W0067.microfocus.com (15.121.0.190) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10 via Frontend Transport; Tue, 16 Jul 2019 16:39:59 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=BNf3i9N+SI8QDLAS6pbnRRQm//OV5GHFBU3yY5W/Oe/+PLNrRMLrBaFgOrKKCS/CFfWq/V1A/bz1yGVXvXaYhPD8yCLax7M9cs8qPEu39dg4/kbrAW+UMYQT3b+hMkPjnFOS01tY5qupgYSvFmhrLPF3WDcT3jiHg8qdWevsiqjFcwEPZCydBh/V6psqy86E7qAzp+RUIJV4lyTJCUHp6I3h0Qmr5g/oNxCsxi+WuY4b/9n5Pl4coUX83E4H6OTknTgUHx37sZOpt/UIDl4vaAyCkeVdODBFqzDsb8o0M86SDp6ZYMFqSGjFLjmhkEHCE04xHjxQiuOip1VYS7KQ5A==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=+FpjzFgnH89hCbol5muwzXo/Sz0mgGqtb2ALbxb4glo=;
 b=hK1wvbSkAI1X2CYVzg3uPVDUssJUuGlTKX4LRlQNBnBASt1pd2axut9suRRh0sQLDy2JFfBGTfoBNvU2/xKcM4wFDQUeMuv6rGV4GkX0ugGI+1TSehlJMPCbzBDopgHHUBcWd78/jBM5K91FZIJqz0qyP8516PpKyxvQd+LO8KYy1JliBhXE+9OpFmGkgkDuOvwkbDbBs46EQpbdMehZ1SAfw6FxkKZOxLa9wb2AZFTjiTEmePRETCTAhj5ZPbc7Nl31sGNoNXtdLClObIY+atVlzn77RoFYc648MB7nodYnXgds2zB/7E85qXcQfZ++m+hZP5fyvPxzGC+m5fM0KQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=pass
 smtp.mailfrom=suse.com;dmarc=pass action=none header.from=suse.com;dkim=pass
 header.d=suse.com;arc=none
Received: from DM6PR18MB3401.namprd18.prod.outlook.com (10.255.174.218) by
 DM6PR18MB2764.namprd18.prod.outlook.com (20.179.49.145) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2073.14; Tue, 16 Jul 2019 16:39:58 +0000
Received: from DM6PR18MB3401.namprd18.prod.outlook.com
 ([fe80::1fe:35f6:faf3:78c7]) by DM6PR18MB3401.namprd18.prod.outlook.com
 ([fe80::1fe:35f6:faf3:78c7%7]) with mapi id 15.20.2073.012; Tue, 16 Jul 2019
 16:39:58 +0000
From: Jan Beulich <JBeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH v3 11/14] AMD/IOMMU: adjust setup of internal interrupt
 for x2APIC mode
Thread-Index: AQHVO/UbJkaZtm8uukmP929dCLxvuQ==
Date: Tue, 16 Jul 2019 16:39:58 +0000
Message-ID: <f8421e6c-3553-7f98-ab20-a26f4dcf8ee1@suse.com>
References: <6272c301-a905-38cf-dd1a-645f3d703241@suse.com>
In-Reply-To: <6272c301-a905-38cf-dd1a-645f3d703241@suse.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: DB6P192CA0022.EURP192.PROD.OUTLOOK.COM (2603:10a6:4:b8::32)
 To DM6PR18MB3401.namprd18.prod.outlook.com
 (2603:10b6:5:1cc::26)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=JBeulich@suse.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [87.234.252.170]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: cf8432ce-8df0-4559-bd65-08d70a0c3d80
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328)(7193020);
 SRVR:DM6PR18MB2764; 
x-ms-traffictypediagnostic: DM6PR18MB2764:
x-microsoft-antispam-prvs: <DM6PR18MB2764B4A33495380C4BAD2839B3CE0@DM6PR18MB2764.namprd18.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:4502;
x-forefront-prvs: 0100732B76
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(4636009)(346002)(366004)(376002)(396003)(39860400002)(136003)(199004)(189003)(80792005)(76176011)(478600001)(14454004)(66066001)(2906002)(31696002)(2501003)(52116002)(7736002)(2616005)(25786009)(186003)(68736007)(11346002)(446003)(386003)(14444005)(6506007)(36756003)(8676002)(6512007)(476003)(305945005)(26005)(31686004)(8936002)(3846002)(4326008)(2351001)(6486002)(81166006)(81156014)(486006)(316002)(53936002)(54906003)(5640700003)(256004)(102836004)(86362001)(71200400001)(6116002)(66946007)(66476007)(66556008)(64756008)(66446008)(5660300002)(99286004)(6916009)(6436002)(71190400001);
 DIR:OUT; SFP:1102; SCL:1; SRVR:DM6PR18MB2764;
 H:DM6PR18MB3401.namprd18.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: suse.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: CSHcEktW+0PfVsgIDZiXWYBLThqGMa0dIPteoeapuOnU3hgXHFQ1YA/QmDPE2Ky7LJ27Yse10MR/1P3JJ8XaUxOwugKtnH/r+II4iM4Z9WiaA5ozZdT2cbfMFWj3qYV6QLFQVlwbvWlqbPpkLkh00rEgLBfAX9Ozy/fYzdMEj6dMIKPzWCDKchb+jbZs9MjW5VQnr7rT1pJxTryNZVr1RrScwY0+rAwcCQQ3FVaTPt1paveKlIWtdF9HP2Q4QY5rdljb3eKcqT9D3oqg4FKK/pnDAJWpgiZFo6FhgTNAC5eYuOp+7U4s2LqGtGSArxWSfrNLXo86MXBziyDrJGLj5b2Ftp/YY4GoPSgV7I2ziXaDmQeEGBozpiZWabVUQQLh+QqQ8kzsPs7l2m21E1bSxj6Um/LtNTkcYwnpJLHzyf8=
Content-ID: <6D33622E868FC14C90BE61A905CC7F5E@namprd18.prod.outlook.com>
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-Network-Message-Id: cf8432ce-8df0-4559-bd65-08d70a0c3d80
X-MS-Exchange-CrossTenant-originalarrivaltime: 16 Jul 2019 16:39:58.4776 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 856b813c-16e5-49a5-85ec-6f081e13b527
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: JBeulich@suse.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR18MB2764
X-OriginatorOrg: suse.com
Subject: [Xen-devel] [PATCH v3 11/14] AMD/IOMMU: adjust setup of internal
 interrupt for x2APIC mode
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 Brian Woods <brian.woods@amd.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SW4gb3JkZXIgdG8gYmUgYWJsZSB0byBleHByZXNzIGFsbCBwb3NzaWJsZSBkZXN0aW5hdGlvbnMg
d2UgbmVlZCB0byBtYWtlDQp1c2Ugb2YgdGhpcyBub24tTVNJLWNhcGFiaWxpdHkgYmFzZWQgbWVj
aGFuaXNtLiBUaGUgbmV3IElSUSBjb250cm9sbGVyDQpzdHJ1Y3R1cmUgY2FuIHJlLXVzZSBjZXJ0
YWluIE1TSSBmdW5jdGlvbnMsIHRob3VnaC4NCg0KRm9yIG5vdyBnZW5lcmFsIGFuZCBQUFIgaW50
ZXJydXB0cyBzdGlsbCBzaGFyZSBhIHNpbmdsZSB2ZWN0b3IsIElSUSwgYW5kDQpoZW5jZSBoYW5k
bGVyLg0KDQpTaWduZWQtb2ZmLWJ5OiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+DQpS
ZXZpZXdlZC1ieTogQW5kcmV3IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4NCi0t
LQ0KdjM6IFJlLWJhc2UuDQoNCi0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21t
dV9pbml0LmMNCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0LmMN
CkBAIC00NzIsNiArNDcyLDQ0IEBAIHN0YXRpYyBod19pcnFfY29udHJvbGxlciBpb21tdV9tYXNr
YWJsZV8NCiAgICAgIC5zZXRfYWZmaW5pdHkgPSBzZXRfbXNpX2FmZmluaXR5LA0KICB9Ow0KICAN
CitzdGF0aWMgdm9pZCBzZXRfeDJhcGljX2FmZmluaXR5KHN0cnVjdCBpcnFfZGVzYyAqZGVzYywg
Y29uc3QgY3B1bWFza190ICptYXNrKQ0KK3sNCisgICAgc3RydWN0IGFtZF9pb21tdSAqaW9tbXUg
PSBkZXNjLT5hY3Rpb24tPmRldl9pZDsNCisgICAgdW5zaWduZWQgaW50IGRlc3QgPSBzZXRfZGVz
Y19hZmZpbml0eShkZXNjLCBtYXNrKTsNCisgICAgdW5pb24gYW1kX2lvbW11X3gyYXBpY19jb250
cm9sIGN0cmwgPSB7fTsNCisgICAgdW5zaWduZWQgbG9uZyBmbGFnczsNCisNCisgICAgaWYgKCBk
ZXN0ID09IEJBRF9BUElDSUQgKQ0KKyAgICAgICAgcmV0dXJuOw0KKw0KKyAgICBtc2lfY29tcG9z
ZV9tc2coZGVzYy0+YXJjaC52ZWN0b3IsIE5VTEwsICZpb21tdS0+bXNpLm1zZyk7DQorICAgIGlv
bW11LT5tc2kubXNnLmRlc3QzMiA9IGRlc3Q7DQorDQorICAgIGN0cmwuZGVzdF9tb2RlID0gTUFT
S19FWFRSKGlvbW11LT5tc2kubXNnLmFkZHJlc3NfbG8sDQorICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIE1TSV9BRERSX0RFU1RNT0RFX01BU0spOw0KKyAgICBjdHJsLmludF90eXBlID0g
TUFTS19FWFRSKGlvbW11LT5tc2kubXNnLmRhdGEsDQorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgTVNJX0RBVEFfREVMSVZFUllfTU9ERV9NQVNLKTsNCisgICAgY3RybC52ZWN0b3IgPSBk
ZXNjLT5hcmNoLnZlY3RvcjsNCisgICAgY3RybC5kZXN0X2xvID0gZGVzdDsNCisgICAgY3RybC5k
ZXN0X2hpID0gZGVzdCA+PiAyNDsNCisNCisgICAgc3Bpbl9sb2NrX2lycXNhdmUoJmlvbW11LT5s
b2NrLCBmbGFncyk7DQorICAgIHdyaXRlcShjdHJsLnJhdywgaW9tbXUtPm1taW9fYmFzZSArIElP
TU1VX1hUX0lOVF9DVFJMX01NSU9fT0ZGU0VUKTsNCisgICAgd3JpdGVxKGN0cmwucmF3LCBpb21t
dS0+bW1pb19iYXNlICsgSU9NTVVfWFRfUFBSX0lOVF9DVFJMX01NSU9fT0ZGU0VUKTsNCisgICAg
c3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmaW9tbXUtPmxvY2ssIGZsYWdzKTsNCit9DQorDQorc3Rh
dGljIGh3X2lycV9jb250cm9sbGVyIGlvbW11X3gyYXBpY190eXBlID0gew0KKyAgICAudHlwZW5h
bWUgICAgID0gIklPTU1VLXgyQVBJQyIsDQorICAgIC5zdGFydHVwICAgICAgPSBpcnFfc3RhcnR1
cF9ub25lLA0KKyAgICAuc2h1dGRvd24gICAgID0gaXJxX3NodXRkb3duX25vbmUsDQorICAgIC5l
bmFibGUgICAgICAgPSBpcnFfZW5hYmxlX25vbmUsDQorICAgIC5kaXNhYmxlICAgICAgPSBpcnFf
ZGlzYWJsZV9ub25lLA0KKyAgICAuYWNrICAgICAgICAgID0gYWNrX25vbm1hc2thYmxlX21zaV9p
cnEsDQorICAgIC5lbmQgICAgICAgICAgPSBlbmRfbm9ubWFza2FibGVfbXNpX2lycSwNCisgICAg
LnNldF9hZmZpbml0eSA9IHNldF94MmFwaWNfYWZmaW5pdHksDQorfTsNCisNCiAgc3RhdGljIHZv
aWQgcGFyc2VfZXZlbnRfbG9nX2VudHJ5KHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11LCB1MzIgZW50
cnlbXSkNCiAgew0KICAgICAgdTE2IGRvbWFpbl9pZCwgZGV2aWNlX2lkLCBmbGFnczsNCkBAIC03
MjYsOCArNzY0LDYgQEAgc3RhdGljIHZvaWQgaW9tbXVfaW50ZXJydXB0X2hhbmRsZXIoaW50DQog
IHN0YXRpYyBib29sX3QgX19pbml0IHNldF9pb21tdV9pbnRlcnJ1cHRfaGFuZGxlcihzdHJ1Y3Qg
YW1kX2lvbW11ICppb21tdSkNCiAgew0KICAgICAgaW50IGlycSwgcmV0Ow0KLSAgICBod19pcnFf
Y29udHJvbGxlciAqaGFuZGxlcjsNCi0gICAgdTE2IGNvbnRyb2w7DQogIA0KICAgICAgaXJxID0g
Y3JlYXRlX2lycShOVU1BX05PX05PREUpOw0KICAgICAgaWYgKCBpcnEgPD0gMCApDQpAQCAtNzQ3
LDIwICs3ODMsNDMgQEAgc3RhdGljIGJvb2xfdCBfX2luaXQgc2V0X2lvbW11X2ludGVycnVwdA0K
ICAgICAgICAgICAgICAgICAgICAgICAgICBQQ0lfU0xPVChpb21tdS0+YmRmKSwgUENJX0ZVTkMo
aW9tbXUtPmJkZikpOw0KICAgICAgICAgIHJldHVybiAwOw0KICAgICAgfQ0KLSAgICBjb250cm9s
ID0gcGNpX2NvbmZfcmVhZDE2KGlvbW11LT5zZWcsIFBDSV9CVVMoaW9tbXUtPmJkZiksDQotICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgUENJX1NMT1QoaW9tbXUtPmJkZiksIFBDSV9GVU5D
KGlvbW11LT5iZGYpLA0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlvbW11LT5tc2ku
bXNpX2F0dHJpYi5wb3MgKyBQQ0lfTVNJX0ZMQUdTKTsNCi0gICAgaW9tbXUtPm1zaS5tc2kubnZl
YyA9IDE7DQotICAgIGlmICggaXNfbWFza19iaXRfc3VwcG9ydChjb250cm9sKSApDQotICAgIHsN
Ci0gICAgICAgIGlvbW11LT5tc2kubXNpX2F0dHJpYi5tYXNrYml0ID0gMTsNCi0gICAgICAgIGlv
bW11LT5tc2kubXNpLm1wb3MgPSBtc2lfbWFza19iaXRzX3JlZyhpb21tdS0+bXNpLm1zaV9hdHRy
aWIucG9zLA0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGlzXzY0Yml0X2FkZHJlc3MoY29udHJvbCkpOw0KLSAgICAgICAgaGFuZGxlciA9ICZpb21tdV9t
YXNrYWJsZV9tc2lfdHlwZTsNCisNCisgICAgaWYgKCBpb21tdS0+Y3RybC5pbnRfY2FwX3h0X2Vu
ICkNCisgICAgew0KKyAgICAgICAgc3RydWN0IGlycV9kZXNjICpkZXNjID0gaXJxX3RvX2Rlc2Mo
aXJxKTsNCisNCisgICAgICAgIGlvbW11LT5tc2kubXNpX2F0dHJpYi5wb3MgPSBNU0lfVFlQRV9J
T01NVTsNCisgICAgICAgIGlvbW11LT5tc2kubXNpX2F0dHJpYi5tYXNrYml0ID0gMDsNCisgICAg
ICAgIGlvbW11LT5tc2kubXNpX2F0dHJpYi5pc182NCA9IDE7DQorDQorICAgICAgICBkZXNjLT5t
c2lfZGVzYyA9ICZpb21tdS0+bXNpOw0KKyAgICAgICAgZGVzYy0+aGFuZGxlciA9ICZpb21tdV94
MmFwaWNfdHlwZTsNCisNCisgICAgICAgIHJldCA9IDA7DQogICAgICB9DQogICAgICBlbHNlDQot
ICAgICAgICBoYW5kbGVyID0gJmlvbW11X21zaV90eXBlOw0KLSAgICByZXQgPSBfX3NldHVwX21z
aV9pcnEoaXJxX3RvX2Rlc2MoaXJxKSwgJmlvbW11LT5tc2ksIGhhbmRsZXIpOw0KKyAgICB7DQor
ICAgICAgICBod19pcnFfY29udHJvbGxlciAqaGFuZGxlcjsNCisgICAgICAgIHUxNiBjb250cm9s
Ow0KKw0KKyAgICAgICAgY29udHJvbCA9IHBjaV9jb25mX3JlYWQxNihpb21tdS0+c2VnLCBQQ0lf
QlVTKGlvbW11LT5iZGYpLA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQ0lf
U0xPVChpb21tdS0+YmRmKSwgUENJX0ZVTkMoaW9tbXUtPmJkZiksDQorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGlvbW11LT5tc2kubXNpX2F0dHJpYi5wb3MgKyBQQ0lfTVNJX0ZM
QUdTKTsNCisNCisgICAgICAgIGlvbW11LT5tc2kubXNpLm52ZWMgPSAxOw0KKyAgICAgICAgaWYg
KCBpc19tYXNrX2JpdF9zdXBwb3J0KGNvbnRyb2wpICkNCisgICAgICAgIHsNCisgICAgICAgICAg
ICBpb21tdS0+bXNpLm1zaV9hdHRyaWIubWFza2JpdCA9IDE7DQorICAgICAgICAgICAgaW9tbXUt
Pm1zaS5tc2kubXBvcyA9IG1zaV9tYXNrX2JpdHNfcmVnKGlvbW11LT5tc2kubXNpX2F0dHJpYi5w
b3MsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGlzXzY0Yml0X2FkZHJlc3MoY29udHJvbCkpOw0KKyAgICAgICAgICAgIGhhbmRsZXIgPSAmaW9t
bXVfbWFza2FibGVfbXNpX3R5cGU7DQorICAgICAgICB9DQorICAgICAgICBlbHNlDQorICAgICAg
ICAgICAgaGFuZGxlciA9ICZpb21tdV9tc2lfdHlwZTsNCisNCisgICAgICAgIHJldCA9IF9fc2V0
dXBfbXNpX2lycShpcnFfdG9fZGVzYyhpcnEpLCAmaW9tbXUtPm1zaSwgaGFuZGxlcik7DQorICAg
IH0NCisNCiAgICAgIGlmICggIXJldCApDQogICAgICAgICAgcmV0ID0gcmVxdWVzdF9pcnEoaXJx
LCAwLCBpb21tdV9pbnRlcnJ1cHRfaGFuZGxlciwgImFtZF9pb21tdSIsIGlvbW11KTsNCiAgICAg
IGlmICggcmV0ICkNCkBAIC04MzgsOCArODk3LDE5IEBAIHN0YXRpYyB2b2lkIGVuYWJsZV9pb21t
dShzdHJ1Y3QgYW1kX2lvbW0NCiAgICAgICAgICBzdHJ1Y3QgaXJxX2Rlc2MgKmRlc2MgPSBpcnFf
dG9fZGVzYyhpb21tdS0+bXNpLmlycSk7DQogIA0KICAgICAgICAgIHNwaW5fbG9jaygmZGVzYy0+
bG9jayk7DQotICAgICAgICBzZXRfbXNpX2FmZmluaXR5KGRlc2MsIE5VTEwpOw0KLSAgICAgICAg
c3Bpbl91bmxvY2soJmRlc2MtPmxvY2spOw0KKw0KKyAgICAgICAgaWYgKCBpb21tdS0+Y3RybC5p
bnRfY2FwX3h0X2VuICkNCisgICAgICAgIHsNCisgICAgICAgICAgICBzZXRfeDJhcGljX2FmZmlu
aXR5KGRlc2MsIE5VTEwpOw0KKyAgICAgICAgICAgIHNwaW5fdW5sb2NrKCZkZXNjLT5sb2NrKTsN
CisgICAgICAgIH0NCisgICAgICAgIGVsc2UNCisgICAgICAgIHsNCisgICAgICAgICAgICBzZXRf
bXNpX2FmZmluaXR5KGRlc2MsIE5VTEwpOw0KKyAgICAgICAgICAgIHNwaW5fdW5sb2NrKCZkZXNj
LT5sb2NrKTsNCisNCisgICAgICAgICAgICBhbWRfaW9tbXVfbXNpX2VuYWJsZShpb21tdSwgSU9N
TVVfQ09OVFJPTF9FTkFCTEVEKTsNCisgICAgICAgIH0NCiAgICAgIH0NCiAgDQogICAgICBhbWRf
aW9tbXVfbXNpX2VuYWJsZShpb21tdSwgSU9NTVVfQ09OVFJPTF9FTkFCTEVEKTsNCkBAIC04Nzks
NyArOTQ5LDkgQEAgc3RhdGljIHZvaWQgZGlzYWJsZV9pb21tdShzdHJ1Y3QgYW1kX2lvbQ0KICAg
ICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgDQotICAgIGFtZF9pb21tdV9tc2lfZW5hYmxlKGlv
bW11LCBJT01NVV9DT05UUk9MX0RJU0FCTEVEKTsNCisgICAgaWYgKCAhaW9tbXUtPmN0cmwuaW50
X2NhcF94dF9lbiApDQorICAgICAgICBhbWRfaW9tbXVfbXNpX2VuYWJsZShpb21tdSwgSU9NTVVf
Q09OVFJPTF9ESVNBQkxFRCk7DQorDQogICAgICBzZXRfaW9tbXVfY29tbWFuZF9idWZmZXJfY29u
dHJvbChpb21tdSwgSU9NTVVfQ09OVFJPTF9ESVNBQkxFRCk7DQogICAgICBzZXRfaW9tbXVfZXZl
bnRfbG9nX2NvbnRyb2woaW9tbXUsIElPTU1VX0NPTlRST0xfRElTQUJMRUQpOw0KICANCi0tLSBh
L3hlbi9pbmNsdWRlL2FzbS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtZGVmcy5oDQorKysgYi94ZW4v
aW5jbHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LWRlZnMuaA0KQEAgLTQxNiw2ICs0MTYs
MjUgQEAgdW5pb24gYW1kX2lvbW11X2V4dF9mZWF0dXJlcyB7DQogICAgICB9IGZsZHM7DQogIH07
DQogIA0KKy8qIHgyQVBJQyBDb250cm9sIFJlZ2lzdGVycyAqLw0KKyNkZWZpbmUgSU9NTVVfWFRf
SU5UX0NUUkxfTU1JT19PRkZTRVQJCTB4MDE3MA0KKyNkZWZpbmUgSU9NTVVfWFRfUFBSX0lOVF9D
VFJMX01NSU9fT0ZGU0VUCTB4MDE3OA0KKyNkZWZpbmUgSU9NTVVfWFRfR0FfSU5UX0NUUkxfTU1J
T19PRkZTRVQJMHgwMTgwDQorDQordW5pb24gYW1kX2lvbW11X3gyYXBpY19jb250cm9sIHsNCisg
ICAgdWludDY0X3QgcmF3Ow0KKyAgICBzdHJ1Y3Qgew0KKyAgICAgICAgdW5zaWduZWQgaW50IDoy
Ow0KKyAgICAgICAgdW5zaWduZWQgaW50IGRlc3RfbW9kZToxOw0KKyAgICAgICAgdW5zaWduZWQg
aW50IDo1Ow0KKyAgICAgICAgdW5zaWduZWQgaW50IGRlc3RfbG86MjQ7DQorICAgICAgICB1bnNp
Z25lZCBpbnQgdmVjdG9yOjg7DQorICAgICAgICB1bnNpZ25lZCBpbnQgaW50X3R5cGU6MTsgLyog
RE0gaW4gSU9NTVUgc3BlYyAzLjA0ICovDQorICAgICAgICB1bnNpZ25lZCBpbnQgOjE1Ow0KKyAg
ICAgICAgdW5zaWduZWQgaW50IGRlc3RfaGk6ODsNCisgICAgfTsNCit9Ow0KKw0KICAvKiBTdGF0
dXMgUmVnaXN0ZXIqLw0KICAjZGVmaW5lIElPTU1VX1NUQVRVU19NTUlPX09GRlNFVAkJMHgyMDIw
DQogICNkZWZpbmUgSU9NTVVfU1RBVFVTX0VWRU5UX09WRVJGTE9XX01BU0sJMHgwMDAwMDAwMQ0K
DQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2
ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xp
c3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

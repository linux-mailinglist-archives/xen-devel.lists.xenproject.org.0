Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2A63FC1130
	for <lists+xen-devel@lfdr.de>; Sat, 28 Sep 2019 17:18:09 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iEES7-0001Le-BS; Sat, 28 Sep 2019 15:16:07 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=eHhM=XX=amazon.de=prvs=1678a297b=wipawel@srs-us1.protection.inumbo.net>)
 id 1iEES6-0001LW-BZ
 for xen-devel@lists.xenproject.org; Sat, 28 Sep 2019 15:16:06 +0000
X-Inumbo-ID: e3c4541a-e202-11e9-bf31-bc764e2007e4
Received: from smtp-fw-9102.amazon.com (unknown [207.171.184.29])
 by localhost (Halon) with ESMTPS
 id e3c4541a-e202-11e9-bf31-bc764e2007e4;
 Sat, 28 Sep 2019 15:16:05 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.de; i=@amazon.de; q=dns/txt; s=amazon201209;
 t=1569683765; x=1601219765;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=uyUlFf7xBNliOStU2jzLRhSDkBvhQAQrvvIwim3KOIM=;
 b=NA4q3WcC7oRmWHWztBPs5vR9hPKVTqYi6UQ76pq0JVwHmACmpLhIHgou
 T4QeGeB9kgMYSjrM8PLasx04di3MkkfOK14gnYjnabJ2K2JaRD+FoNY7C
 wRtmgdVsZG3+M7qL4JF8tLUyrNcNhy1MQz6BgrBK9bmBBbsIPJL4A+9E5 M=;
X-IronPort-AV: E=Sophos;i="5.64,559,1559520000"; d="scan'208";a="705176577"
Received: from sea3-co-svc-lb6-vlan3.sea.amazon.com (HELO
 email-inbound-relay-1d-37fd6b3d.us-east-1.amazon.com) ([10.47.22.38])
 by smtp-border-fw-out-9102.sea19.amazon.com with ESMTP;
 28 Sep 2019 15:14:56 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan2.iad.amazon.com [10.40.159.162])
 by email-inbound-relay-1d-37fd6b3d.us-east-1.amazon.com (Postfix) with ESMTPS
 id 2BF0328203B; Sat, 28 Sep 2019 15:14:37 +0000 (UTC)
Received: from EX13D05EUB001.ant.amazon.com (10.43.166.87) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.243) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Sat, 28 Sep 2019 15:14:07 +0000
Received: from EX13MTAUWB001.ant.amazon.com (10.43.161.207) by
 EX13D05EUB001.ant.amazon.com (10.43.166.87) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Sat, 28 Sep 2019 15:14:06 +0000
Received: from dev-dsk-wipawel-1a-0c4e6d58.eu-west-1.amazon.com (10.4.134.33)
 by mail-relay.amazon.com (10.43.161.249) with Microsoft SMTP Server
 id
 15.0.1367.3 via Frontend Transport; Sat, 28 Sep 2019 15:14:04 +0000
From: Pawel Wieczorkiewicz <wipawel@amazon.de>
To: <xen-devel@lists.xenproject.org>
Date: Sat, 28 Sep 2019 15:13:05 +0000
Message-ID: <20190928151305.127380-13-wipawel@amazon.de>
X-Mailer: git-send-email 2.16.5
In-Reply-To: <20190928151305.127380-1-wipawel@amazon.de>
References: <20190928151305.127380-1-wipawel@amazon.de>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH v4 12/12] livepatch: Add python bindings for
 livepatch operations
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: wipawel@amazon.com, Wei Liu <wl@xen.org>,
 Ian Jackson <ian.jackson@eu.citrix.com>, mpohlack@amazon.com,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Pawel Wieczorkiewicz <wipawel@amazon.de>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RXh0ZW5kIHRoZSBYQyBweXRob24gYmluZGluZ3MgbGlicmFyeSB0byBzdXBwb3J0IGFsc28gYWxs
IGNvbW1vbgpsaXZlcGF0Y2ggb3BlcmF0aW9ucyBhbmQgYWN0aW9ucy4KCkFkZCB0aGUgcHl0aG9u
IGJpbmRpbmdzIGZvciB0aGUgZm9sbG93aW5nIG9wZXJhdGlvbnM6Ci0gc3RhdHVzIChweXhjX2xp
dmVwYXRjaF9zdGF0dXMpOgogIFJlcXVpcmVzIGEgcGF5bG9hZCBuYW1lIGFzIGFuIGlucHV0Lgog
IFJldHVybnMgYSBzdGF0dXMgZGljdCBjb250YWluaW5nIGEgc3RhdGUgc3RyaW5nIGFuZCBhIHJl
dHVybiBjb2RlCiAgaW50ZWdlci4KLSBhY3Rpb24gKHB5eGNfbGl2ZXBhdGNoX2FjdGlvbik6CiAg
UmVxdWlyZXMgYSBwYXlsb2FkIG5hbWUgYW5kIGFuIGFjdGlvbiBpZCBhcyBhbiBpbnB1dC4gVGlt
ZW91dCBhbmQKICBmbGFncyBhcmUgb3B0aW9uYWwgcGFyYW1ldGVycy4KICBSZXR1cm5zIE5vbmUg
b3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi4KLSB1cGxvYWQgKHB5eGNfbGl2ZXBhdGNoX3VwbG9hZCk6
CiAgUmVxdWlyZXMgYSBwYXlsb2FkIG5hbWUgYW5kIGEgbW9kdWxlJ3MgZmlsZW5hbWUgYXMgYW4g
aW5wdXQuCiAgUmV0dXJucyBOb25lIG9yIHRocm93cyBhbiBleGNlcHRpb24uCi0gbGlzdCAocHl4
Y19saXZlcGF0Y2hfbGlzdCk6CiAgVGFrZXMgbm8gcGFyYW1ldGVycy4KICBSZXR1cm5zIGEgbGlz
dCBvZiBkaWN0cyBjb250YWluaW5nIGVhY2ggcGF5bG9hZCdzOgogICogbmFtZSBhcyBhIHN0cmlu
ZwogICogc3RhdGUgYXMgYSBzdHJpbmcKICAqIHJldHVybiBjb2RlIGFzIGFuIGludGVnZXIKICAq
IGxpc3Qgb2YgbWV0YWRhdGEga2V5PXZhbHVlIHN0cmluZ3MKCkVhY2ggZnVuY3Rpb25zIHRocm93
cyBhbiBleGNlcHRpb24gZXJyb3IgYmFzZWQgb24gdGhlIGVycm5vIHZhbHVlCnJlY2VpdmVkIGZy
b20gaXRzIGNvcnJlc3BvbmRpbmcgbGlieGMgZnVuY3Rpb24gY2FsbC4KClNpZ25lZC1vZmYtYnk6
IFBhd2VsIFdpZWN6b3JraWV3aWN6IDx3aXBhd2VsQGFtYXpvbi5kZT4KUmV2aWV3ZWQtYnk6IE1h
cnRpbiBNYXplaW4gPGFtYXplaW5AYW1hem9uLmRlPgpSZXZpZXdlZC1ieTogQW5kcmEtSXJpbmEg
UGFyYXNjaGl2IDxhbmRyYXByc0BhbWF6b24uY29tPgpSZXZpZXdlZC1ieTogTGVvbmFyZCBGb2Vy
c3RlciA8Zm9lcnNsZW9AYW1hem9uLmRlPgpSZXZpZXdlZC1ieTogTm9yYmVydCBNYW50aGV5IDxu
bWFudGhleUBhbWF6b24uZGU+CkFja2VkLWJ5OiBNYXJlayBNYXJjenlrb3dza2ktR8OzcmVja2kg
PG1hcm1hcmVrQGludmlzaWJsZXRoaW5nc2xhYi5jb20+Ci0tLQpDaGFuZ2VkIHNpbmNlIHYzOgog
ICogcmV0dXJuIE5vbmUgaW5zdGVhZCBvZiBpbnRlZ2VyIDAgZnJvbSBweXhjX2xpdmVwYXRjaF9h
Y3Rpb24oKQogICAgYW5kIHB5eGNfbGl2ZXBhdGNoX3VwbG9hZCgpCiAgKiB1c2UgZnN0YXQoKSBp
bnN0ZWFkIG9mIHN0YXQoKQogICogc2ltcGxpZnkgZXJyb3IgY29uZGl0aW9uIGhhbmRsaW5nIGNv
ZGUgZm9yIHB5eGNfbGl2ZXBhdGNoX3VwbG9hZAogICAgYW5kIGFsc28gc2F2ZSBhbmQgcmVzdG9y
ZSBlcnJubyB2YWx1ZQogICogY2hlY2sgZG9uZSBhbmQgbGVmdCB2YWx1ZXMgdG8gaGFuZGxlIGVy
cm9ycyBpbgogICAgcHl4Y19saXZlcGF0Y2hfbGlzdCgpCiAgKiB1c2UgUHlMaXN0X1NFVF9JVEVN
KCkgdG8gYXZvaWQgdGhlIG5lZWQgZm9yIFB5REVDUkVGCgpDaGFuZ2VkIHNpbmNlIHYxOgogICog
Y2hhbmdlZCBQeUxpc3RfQXBwZW5kKCkgd2l0aCBQeUxpc3RfU2V0SXRlbSgpIGFzIHJlcXVlc3Rl
ZCBieQogICAgTWFyZWsKCiB0b29scy9weXRob24veGVuL2xvd2xldmVsL3hjL3hjLmMgfCAyNjcg
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIDEgZmlsZSBjaGFuZ2VkLCAy
NjcgaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL3Rvb2xzL3B5dGhvbi94ZW4vbG93bGV2ZWwv
eGMveGMuYyBiL3Rvb2xzL3B5dGhvbi94ZW4vbG93bGV2ZWwveGMveGMuYwppbmRleCA5ZDUzYzRj
ZjM3Li42MzEyNDlmOWExIDEwMDY0NAotLS0gYS90b29scy9weXRob24veGVuL2xvd2xldmVsL3hj
L3hjLmMKKysrIGIvdG9vbHMvcHl0aG9uL3hlbi9sb3dsZXZlbC94Yy94Yy5jCkBAIC0xOTc5LDYg
KzE5NzksMjI0IEBAIHN0YXRpYyBQeU9iamVjdCAqcHlmbGFza19hY2Nlc3MoUHlPYmplY3QgKnNl
bGYsIFB5T2JqZWN0ICphcmdzLAogICAgIHJldHVybiBQeV9CdWlsZFZhbHVlKCJpIixyZXQpOwog
fQogCitzdGF0aWMgUHlPYmplY3QgKnB5eGNfbGl2ZXBhdGNoX3N0YXR1cyhYY09iamVjdCAqc2Vs
ZiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFB5T2JqZWN0ICphcmdz
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHlPYmplY3QgKmt3ZHMp
Cit7CisgICAgeGVuX2xpdmVwYXRjaF9zdGF0dXNfdCBzdGF0dXM7CisgICAgUHlPYmplY3QgKmlu
Zm9fZGljdCA9IE5VTEw7CisgICAgY2hhciAqbmFtZTsKKyAgICBpbnQgcmM7CisKKyAgICBzdGF0
aWMgY2hhciAqa3dkX2xpc3RbXSA9IHsgIm5hbWUiLCBOVUxMIH07CisKKyAgICBpZiAoICFQeUFy
Z19QYXJzZVR1cGxlQW5kS2V5d29yZHMoYXJncywga3dkcywgInMiLCBrd2RfbGlzdCwgJm5hbWUp
ICkKKyAgICAgICAgZ290byBlcnJvcjsKKworICAgIHJjID0geGNfbGl2ZXBhdGNoX2dldChzZWxm
LT54Y19oYW5kbGUsIG5hbWUsICZzdGF0dXMpOworICAgIGlmICggcmMgKQorICAgICAgICBnb3Rv
IGVycm9yOworCisgICAgaW5mb19kaWN0ID0gUHlfQnVpbGRWYWx1ZSgKKyAgICAgICAgICAgICJ7
czppLHM6aX0iLAorICAgICAgICAgICAgInN0YXRlIiwgICAgc3RhdHVzLnN0YXRlLAorICAgICAg
ICAgICAgInJjIiwgICAgICAgc3RhdHVzLnJjKTsKKworZXJyb3I6CisgICAgcmV0dXJuIGluZm9f
ZGljdCA/OiBweXhjX2Vycm9yX3RvX2V4Y2VwdGlvbihzZWxmLT54Y19oYW5kbGUpOworfQorCitz
dGF0aWMgUHlPYmplY3QgKnB5eGNfbGl2ZXBhdGNoX2FjdGlvbihYY09iamVjdCAqc2VsZiwKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFB5T2JqZWN0ICphcmdzLAorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHlPYmplY3QgKmt3ZHMpCit7Cisg
ICAgaW50ICgqYWN0aW9uX2Z1bmMpKHhjX2ludGVyZmFjZSAqeGNoLCBjaGFyICpuYW1lLCB1aW50
MzJfdCB0aW1lb3V0LCB1aW50NjRfdCBmbGFncyk7CisgICAgY2hhciAqbmFtZTsKKyAgICB1bnNp
Z25lZCBpbnQgYWN0aW9uOworICAgIHVpbnQzMl90IHRpbWVvdXQ7CisgICAgdWludDY0X3QgZmxh
Z3M7CisgICAgaW50IHJjID0gLTE7CisKKyAgICBzdGF0aWMgY2hhciAqa3dkX2xpc3RbXSA9IHsg
Im5hbWUiLCAiYWN0aW9uIiwgInRpbWVvdXQiLCAiZmxhZ3MiLCBOVUxMIH07CisKKyAgICBpZiAo
ICFQeUFyZ19QYXJzZVR1cGxlQW5kS2V5d29yZHMoYXJncywga3dkcywgInNJfElrIiwga3dkX2xp
c3QsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYW1lLCAmYWN0aW9u
LCAmdGltZW91dCwgJmZsYWdzKSApCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAgICBzd2l0Y2gg
KGFjdGlvbikKKyAgICB7CisgICAgY2FzZSBMSVZFUEFUQ0hfQUNUSU9OX1VOTE9BRDoKKyAgICAg
ICAgYWN0aW9uX2Z1bmMgPSB4Y19saXZlcGF0Y2hfdW5sb2FkOworICAgICAgICBicmVhazsKKyAg
ICBjYXNlIExJVkVQQVRDSF9BQ1RJT05fUkVWRVJUOgorICAgICAgICBhY3Rpb25fZnVuYyA9IHhj
X2xpdmVwYXRjaF9yZXZlcnQ7CisgICAgICAgIGJyZWFrOworICAgIGNhc2UgTElWRVBBVENIX0FD
VElPTl9BUFBMWToKKyAgICAgICAgYWN0aW9uX2Z1bmMgPSB4Y19saXZlcGF0Y2hfYXBwbHk7Cisg
ICAgICAgIGJyZWFrOworICAgIGNhc2UgTElWRVBBVENIX0FDVElPTl9SRVBMQUNFOgorICAgICAg
ICBhY3Rpb25fZnVuYyA9IHhjX2xpdmVwYXRjaF9yZXBsYWNlOworICAgICAgICBicmVhazsKKyAg
ICBkZWZhdWx0OgorICAgICAgICBnb3RvIGVycm9yOworICAgIH0KKworICAgIHJjID0gYWN0aW9u
X2Z1bmMoc2VsZi0+eGNfaGFuZGxlLCBuYW1lLCB0aW1lb3V0LCBmbGFncyk7CisKK2Vycm9yOgor
ICAgIHJldHVybiByYyA/IHB5eGNfZXJyb3JfdG9fZXhjZXB0aW9uKHNlbGYtPnhjX2hhbmRsZSkg
OiBQeV9Ob25lOworfQorCitzdGF0aWMgUHlPYmplY3QgKnB5eGNfbGl2ZXBhdGNoX3VwbG9hZChY
Y09iamVjdCAqc2VsZiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFB5
T2JqZWN0ICphcmdzLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHlP
YmplY3QgKmt3ZHMpCit7CisgICAgdW5zaWduZWQgY2hhciAqZmJ1ZiA9IE1BUF9GQUlMRUQ7Cisg
ICAgY2hhciAqbmFtZSwgKmZpbGVuYW1lOworICAgIHN0cnVjdCBzdGF0IGJ1ZjsKKyAgICBpbnQg
ZmQgPSAwLCByYyA9IC0xLCBzYXZlZF9lcnJubzsKKyAgICBzc2l6ZV90IGxlbjsKKworICAgIHN0
YXRpYyBjaGFyICprd2RfbGlzdFtdID0geyAibmFtZSIsICJmaWxlbmFtZSIsIE5VTEwgfTsKKwor
ICAgIGlmICggIVB5QXJnX1BhcnNlVHVwbGVBbmRLZXl3b3JkcyhhcmdzLCBrd2RzLCAic3MiLCBr
d2RfbGlzdCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5hbWUsICZm
aWxlbmFtZSkpCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAgICBmZCA9IG9wZW4oZmlsZW5hbWUs
IE9fUkRPTkxZKTsKKyAgICBpZiAoIGZkIDwgMCApCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAg
ICBpZiAoIGZzdGF0KGZkLCAmYnVmKSAhPSAwICkKKyAgICAgICAgZ290byBlcnJvcjsKKworICAg
IGxlbiA9IGJ1Zi5zdF9zaXplOworICAgIGZidWYgPSBtbWFwKDAsIGxlbiwgUFJPVF9SRUFELCBN
QVBfUFJJVkFURSwgZmQsIDApOworICAgIGlmICggZmJ1ZiA9PSBNQVBfRkFJTEVEICkKKyAgICAg
ICAgZ290byBlcnJvcjsKKworICAgIHJjID0geGNfbGl2ZXBhdGNoX3VwbG9hZChzZWxmLT54Y19o
YW5kbGUsIG5hbWUsIGZidWYsIGxlbik7CisKKyAgICBzYXZlZF9lcnJubyA9IGVycm5vOworICAg
IG11bm1hcChmYnVmLCBsZW4pOworICAgIGNsb3NlKGZkKTsKKyAgICBlcnJubyA9IHNhdmVkX2Vy
cm5vOworCitlcnJvcjoKKyAgICByZXR1cm4gcmMgPyBweXhjX2Vycm9yX3RvX2V4Y2VwdGlvbihz
ZWxmLT54Y19oYW5kbGUpIDogUHlfTm9uZTsKK30KKworc3RhdGljIFB5T2JqZWN0ICpweXhjX2xp
dmVwYXRjaF9saXN0KFhjT2JqZWN0ICpzZWxmKQoreworICAgIFB5T2JqZWN0ICpsaXN0ID0gUHlf
Tm9uZTsKKyAgICB1bnNpZ25lZCBpbnQgbnIsIGRvbmUsIGxlZnQsIGk7CisgICAgeGVuX2xpdmVw
YXRjaF9zdGF0dXNfdCAqaW5mbyA9IE5VTEw7CisgICAgY2hhciAqbmFtZSA9IE5VTEw7CisgICAg
Y2hhciAqbWV0YWRhdGEgPSBOVUxMOworICAgIHVpbnQzMl90ICpsZW4gPSBOVUxMOworICAgIHVp
bnQzMl90ICptZXRhZGF0YV9sZW4gPSBOVUxMOworICAgIHVpbnQzMl90IG5hbWVfdG90YWxfc2l6
ZSwgbWV0YWRhdGFfdG90YWxfc2l6ZTsKKyAgICB1aW50MzJfdCBuYW1lX29mZiwgbWV0YWRhdGFf
b2ZmOworICAgIGludCByYzsKKworICAgIGRvbmUgPSBsZWZ0ID0gMDsKKyAgICByYyA9IHhjX2xp
dmVwYXRjaF9saXN0X2dldF9zaXplcyhzZWxmLT54Y19oYW5kbGUsICZuciwKKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAmbmFtZV90b3RhbF9zaXplLCAmbWV0YWRhdGFfdG90
YWxfc2l6ZSk7CisgICAgaWYgKCByYyApCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAgICBpZiAo
IG5yID09IDAgKQorICAgICAgICByZXR1cm4gUHlMaXN0X05ldygwKTsKKworICAgIHJjID0gRU5P
TUVNOworICAgIGluZm8gPSBtYWxsb2MobnIgKiBzaXplb2YoKmluZm8pKTsKKyAgICBpZiAoICFp
bmZvICkKKyAgICAgICAgZ290byBlcnJvcjsKKworICAgIG5hbWUgPSBtYWxsb2MobmFtZV90b3Rh
bF9zaXplICogc2l6ZW9mKCpuYW1lKSk7CisgICAgaWYgKCAhbmFtZSApCisgICAgICAgIGdvdG8g
ZXJyb3I7CisKKyAgICBsZW4gPSBtYWxsb2MobnIgKiBzaXplb2YoKmxlbikpOworICAgIGlmICgg
IWxlbiApCisgICAgICAgIGdvdG8gZXJyb3I7CisKKyAgICBtZXRhZGF0YSA9IG1hbGxvYyhtZXRh
ZGF0YV90b3RhbF9zaXplICogc2l6ZW9mKCptZXRhZGF0YSkpOworICAgIGlmICggIW1ldGFkYXRh
ICkKKyAgICAgICAgZ290byBlcnJvcjsKKworICAgIG1ldGFkYXRhX2xlbiA9IG1hbGxvYyhuciAq
IHNpemVvZigqbWV0YWRhdGFfbGVuKSk7CisgICAgaWYgKCAhbWV0YWRhdGFfbGVuICkKKyAgICAg
ICAgZ290byBlcnJvcjsKKworICAgIHJjID0geGNfbGl2ZXBhdGNoX2xpc3Qoc2VsZi0+eGNfaGFu
ZGxlLCBuciwgMCwgaW5mbywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsIGxlbiwg
bmFtZV90b3RhbF9zaXplLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEsIG1l
dGFkYXRhX2xlbiwgbWV0YWRhdGFfdG90YWxfc2l6ZSwKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICZkb25lLCAmbGVmdCk7CisgICAgaWYgKCByYyApCisgICAgICAgIGdvdG8gZXJyb3I7CisK
KyAgICBpZiAoIGRvbmUgIT0gbnIgfHwgbGVmdCA+IDAgKQorICAgIHsKKyAgICAgICAgcmMgPSBF
RkFVTFQ7CisgICAgICAgIGdvdG8gZXJyb3I7CisgICAgfQorCisgICAgbGlzdCA9IFB5TGlzdF9O
ZXcoZG9uZSk7CisgICAgbmFtZV9vZmYgPSBtZXRhZGF0YV9vZmYgPSAwOworICAgIGZvciAoIGkg
PSAwOyBpIDwgZG9uZTsgaSsrICkKKyAgICB7CisgICAgICAgIFB5T2JqZWN0ICppbmZvX2RpY3Qs
ICptZXRhZGF0YV9saXN0OworICAgICAgICBjaGFyICpuYW1lX3N0ciwgKm1ldGFkYXRhX3N0cjsK
KworICAgICAgICBuYW1lX3N0ciA9IG5hbWUgKyBuYW1lX29mZjsKKyAgICAgICAgbWV0YWRhdGFf
c3RyID0gbWV0YWRhdGEgKyBtZXRhZGF0YV9vZmY7CisKKyAgICAgICAgbWV0YWRhdGFfbGlzdCA9
IFB5TGlzdF9OZXcoMCk7CisgICAgICAgIGZvciAoIGNoYXIgKnMgPSBtZXRhZGF0YV9zdHI7IHMg
PCBtZXRhZGF0YV9zdHIgKyBtZXRhZGF0YV9sZW5baV07IHMgKz0gc3RybGVuKHMpICsgMSApCisg
ICAgICAgIHsKKyAgICAgICAgICAgIFB5T2JqZWN0ICpmaWVsZCA9IFB5X0J1aWxkVmFsdWUoInMi
LCBzKTsKKyAgICAgICAgICAgIGlmICggZmllbGQgPT0gTlVMTCApCisgICAgICAgICAgICB7Cisg
ICAgICAgICAgICAgICAgUHlfREVDUkVGKGxpc3QpOworICAgICAgICAgICAgICAgIFB5X0RFQ1JF
RihtZXRhZGF0YV9saXN0KTsKKyAgICAgICAgICAgICAgICByYyA9IEVGQVVMVDsKKyAgICAgICAg
ICAgICAgICBnb3RvIGVycm9yOworICAgICAgICAgICAgfQorCisgICAgICAgICAgICBQeUxpc3Rf
QXBwZW5kKG1ldGFkYXRhX2xpc3QsIGZpZWxkKTsKKyAgICAgICAgICAgIFB5X0RFQ1JFRihmaWVs
ZCk7CisgICAgICAgIH0KKworICAgICAgICBpbmZvX2RpY3QgPSBQeV9CdWlsZFZhbHVlKAorICAg
ICAgICAgICAgIntzOnMsczppLHM6aSxzOk59IiwKKyAgICAgICAgICAgICJuYW1lIiwgICAgIG5h
bWVfc3RyLAorICAgICAgICAgICAgInN0YXRlIiwgICAgaW5mb1tpXS5zdGF0ZSwKKyAgICAgICAg
ICAgICJyYyIsICAgICAgIGluZm9baV0ucmMsCisgICAgICAgICAgICAibWV0YWRhdGEiLCBtZXRh
ZGF0YV9saXN0KTsKKworICAgICAgICBpZiAoIGluZm9fZGljdCA9PSBOVUxMICkKKyAgICAgICAg
eworICAgICAgICAgICAgUHlfREVDUkVGKGxpc3QpOworICAgICAgICAgICAgUHlfREVDUkVGKG1l
dGFkYXRhX2xpc3QpOworICAgICAgICAgICAgcmMgPSBFRkFVTFQ7CisgICAgICAgICAgICBnb3Rv
IGVycm9yOworICAgICAgICB9CisgICAgICAgIFB5TGlzdF9TRVRfSVRFTShsaXN0LCBpLCBpbmZv
X2RpY3QpOworCisgICAgICAgIG5hbWVfb2ZmICs9IGxlbltpXTsKKyAgICAgICAgbWV0YWRhdGFf
b2ZmICs9IG1ldGFkYXRhX2xlbltpXTsKKyAgICB9CisKK2Vycm9yOgorICAgIGZyZWUoaW5mbyk7
CisgICAgZnJlZShuYW1lKTsKKyAgICBmcmVlKGxlbik7CisgICAgZnJlZShtZXRhZGF0YSk7Cisg
ICAgZnJlZShtZXRhZGF0YV9sZW4pOworICAgIHJldHVybiByYyA/IHB5eGNfZXJyb3JfdG9fZXhj
ZXB0aW9uKHNlbGYtPnhjX2hhbmRsZSkgOiBsaXN0OworfQorCiBzdGF0aWMgUHlNZXRob2REZWYg
cHl4Y19tZXRob2RzW10gPSB7CiAgICAgeyAiZG9tYWluX2NyZWF0ZSIsIAogICAgICAgKFB5Q0Z1
bmN0aW9uKXB5eGNfZG9tYWluX2NyZWF0ZSwgCkBAIC0yNTQyLDYgKzI3NjAsNDQgQEAgc3RhdGlj
IFB5TWV0aG9kRGVmIHB5eGNfbWV0aG9kc1tdID0gewogICAgICAgIlJldHVybnM6IFtpbnRdOiAw
IG9uIGFsbCBwZXJtaXNzaW9uIGdyYW50ZWQ7IC0xIGlmIGFueSBwZXJtaXNzaW9ucyBhcmUgXAog
ICAgICAgIGRlbmllZFxuIiB9LCAKIAorICAgIHsgImxpdmVwYXRjaF9zdGF0dXMiLAorICAgICAg
KFB5Q0Z1bmN0aW9uKXB5eGNfbGl2ZXBhdGNoX3N0YXR1cywKKyAgICAgIE1FVEhfS0VZV09SRFMs
ICJcbiIKKyAgICAgICJHZXRzIGN1cnJlbnQgc3RhdGUgYW5kIHJldHVybiBjb2RlIGZvciBhIHNw
ZWNpZmllZCBtb2R1bGUuXG4iCisgICAgICAiIG5hbWUgICAgIFtzdHJdOiBNb2R1bGUgbmFtZSB0
byBiZSB1c2VkXG4iCisgICAgICAiUmV0dXJuczogW2RpY3RdIG9uIHN1Y2Nlc3M7IHRocm93aW5n
IGFuIGV4Y2VwdGlvbiBvbiBlcnJvclxuIgorICAgICAgIiBzdGF0ZSAgICBbaW50XTogTW9kdWxl
IGN1cnJlbnQgc3RhdGU6IENIRUNLRUQgb3IgQVBQTElFRFxuIgorICAgICAgIiByYyAgICAgICBb
aW50XTogUmV0dXJuIGNvZGUgb2YgbGFzdCBtb2R1bGUncyBvcGVyYXRpb25cbiIgfSwKKworICAg
IHsgImxpdmVwYXRjaF91cGxvYWQiLAorICAgICAgKFB5Q0Z1bmN0aW9uKXB5eGNfbGl2ZXBhdGNo
X3VwbG9hZCwKKyAgICAgIE1FVEhfS0VZV09SRFMsICJcbiIKKyAgICAgICJVcGxvYWRzIGEgbW9k
dWxlIHdpdGggc3BlY2lmaWVkIG5hbWUgZnJvbSBmaWxlbmFtZS5cbiIKKyAgICAgICIgbmFtZSAg
ICAgW3N0cl06IE1vZHVsZSBuYW1lIHRvIGJlIHVzZWRcbiIKKyAgICAgICIgZmlsZW5hbWUgW3N0
cl06IEZpbGVuYW1lIG9mIGEgbW9kdWxlIHRvIGJlIHVwbG9hZGVkXG4iCisgICAgICAiUmV0dXJu
czogTm9uZSBvbiBzdWNjZXNzOyB0aHJvd2luZyBhbiBleGNlcHRpb24gb24gZXJyb3JcbiIgfSwK
KworICAgIHsgImxpdmVwYXRjaF9hY3Rpb24iLAorICAgICAgKFB5Q0Z1bmN0aW9uKXB5eGNfbGl2
ZXBhdGNoX2FjdGlvbiwKKyAgICAgIE1FVEhfS0VZV09SRFMsICJcbiIKKyAgICAgICJQZXJmb3Jt
cyBhbiBhY3Rpb24gKHVubG9hZCwgcmV2ZXJ0LCBhcHBseSBvciByZXBsYWNlKSBvbiBhIHNwZWNp
ZmllZCBcCisgICAgICAgbW9kdWxlLlxuIgorICAgICAgIiBuYW1lICAgICAgW3N0cl06IE1vZHVs
ZSBuYW1lIHRvIGJlIHVzZWRcbiIKKyAgICAgICIgYWN0aW9uICAgW3VpbnRdOiBBY3Rpb24gZW51
bSBpZFxuIgorICAgICAgIiB0aW1lb3V0ICBbdWludF06IEFjdGlvbiBzY2hlZHVsZWQgZXhlY3V0
aW9uIHRpbWVvdXRcbiIKKyAgICAgICIgZmxhZ3MgICBbdWxvbmddOiBGbGFncyBzcGVjaWZ5aW5n
IGFjdGlvbidzIGV4dHJhIHBhcmFtZXRlcnNcbiIKKyAgICAgICJSZXR1cm5zOiBOb25lIG9uIHN1
Y2Nlc3M7IHRocm93aW5nIGFuIGV4Y2VwdGlvbiBvbiBlcnJvclxuIiB9LAorCisgICAgeyAibGl2
ZXBhdGNoX2xpc3QiLAorICAgICAgKFB5Q0Z1bmN0aW9uKXB5eGNfbGl2ZXBhdGNoX2xpc3QsCisg
ICAgICBNRVRIX05PQVJHUywgIlxuIgorICAgICAgIkxpc3QgYWxsIHVwbG9hZGVkIGxpdmVwYXRj
aCBtb2R1bGVzIHdpdGggdGhlaXIgY3VycmVudCBzdGF0ZSBhbmQgbWV0YWRhdGEuXG4iCisgICAg
ICAiUmV0dXJuczogW2xpc3Qgb2YgZGljdHNdIG9uIHN1Y2Nlc3M7IHRocm93aW5nIGFuIGV4Y2Vw
dGlvbiBvbiBlcnJvclxuIgorICAgICAgIiBuYW1lICAgICBbc3RyXTogTW9kdWxlIG5hbWVcbiIK
KyAgICAgICIgc3RhdGUgICAgW2ludF06IE1vZHVsZSBjdXJyZW50IHN0YXRlOiBDSEVDS0VEIG9y
IEFQUExJRURcbiIKKyAgICAgICIgcmMgICAgICAgW2ludF06IFJldHVybiBjb2RlIG9mIGxhc3Qg
bW9kdWxlJ3Mgb3BlcmF0aW9uXG4iCisgICAgICAiIG1ldGFkYXRhIFtsaXN0XTogTGlzdCBvZiBt
b2R1bGUncyBtZXRhZGF0YSAna2V5PXZhbHVlJyBzdHJpbmdzXG4iIH0sCisKICAgICB7IE5VTEws
IE5VTEwsIDAsIE5VTEwgfQogfTsKIApAQCAtMjY1Myw2ICsyOTA5LDE3IEBAIFB5TU9ESU5JVF9G
VU5DIGluaXR4Yyh2b2lkKQogICAgIFB5TW9kdWxlX0FkZEludENvbnN0YW50KG0sICJYRU5fU0NI
RURVTEVSX0NSRURJVCIsIFhFTl9TQ0hFRFVMRVJfQ1JFRElUKTsKICAgICBQeU1vZHVsZV9BZGRJ
bnRDb25zdGFudChtLCAiWEVOX1NDSEVEVUxFUl9DUkVESVQyIiwgWEVOX1NDSEVEVUxFUl9DUkVE
SVQyKTsKIAorICAgIC8qIEV4cG9zZSBsaXZlcGF0Y2ggY29uc3RhbnRzIHRvIFB5dGhvbiAqLwor
ICAgIFB5TW9kdWxlX0FkZEludENvbnN0YW50KG0sICJMSVZFUEFUQ0hfQUNUSU9OX1VOTE9BRCIs
IExJVkVQQVRDSF9BQ1RJT05fVU5MT0FEKTsKKyAgICBQeU1vZHVsZV9BZGRJbnRDb25zdGFudCht
LCAiTElWRVBBVENIX0FDVElPTl9SRVZFUlQiLCBMSVZFUEFUQ0hfQUNUSU9OX1JFVkVSVCk7Cisg
ICAgUHlNb2R1bGVfQWRkSW50Q29uc3RhbnQobSwgIkxJVkVQQVRDSF9BQ1RJT05fQVBQTFkiLCBM
SVZFUEFUQ0hfQUNUSU9OX0FQUExZKTsKKyAgICBQeU1vZHVsZV9BZGRJbnRDb25zdGFudChtLCAi
TElWRVBBVENIX0FDVElPTl9SRVBMQUNFIiwgTElWRVBBVENIX0FDVElPTl9SRVBMQUNFKTsKKwor
ICAgIFB5TW9kdWxlX0FkZEludENvbnN0YW50KG0sICJMSVZFUEFUQ0hfQUNUSU9OX0FQUExZX05P
REVQUyIsIExJVkVQQVRDSF9BQ1RJT05fQVBQTFlfTk9ERVBTKTsKKworICAgIFB5TW9kdWxlX0Fk
ZEludENvbnN0YW50KG0sICJMSVZFUEFUQ0hfU1RBVEVfQVBQTElFRCIsIExJVkVQQVRDSF9TVEFU
RV9BUFBMSUVEKTsKKyAgICBQeU1vZHVsZV9BZGRJbnRDb25zdGFudChtLCAiTElWRVBBVENIX1NU
QVRFX0NIRUNLRUQiLCBMSVZFUEFUQ0hfU1RBVEVfQ0hFQ0tFRCk7CisKICNpZiBQWV9NQUpPUl9W
RVJTSU9OID49IDMKICAgICByZXR1cm4gbTsKICNlbmRpZgotLSAKMi4xNi41CgoKCgpBbWF6b24g
RGV2ZWxvcG1lbnQgQ2VudGVyIEdlcm1hbnkgR21iSApLcmF1c2Vuc3RyLiAzOAoxMDExNyBCZXJs
aW4KR2VzY2hhZWZ0c2Z1ZWhydW5nOiBDaHJpc3RpYW4gU2NobGFlZ2VyLCBSYWxmIEhlcmJyaWNo
CkVpbmdldHJhZ2VuIGFtIEFtdHNnZXJpY2h0IENoYXJsb3R0ZW5idXJnIHVudGVyIEhSQiAxNDkx
NzMgQgpTaXR6OiBCZXJsaW4KVXN0LUlEOiBERSAyODkgMjM3IDg3OQoKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QK
WGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5v
cmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

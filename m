Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id AD0921C89F
	for <lists+xen-devel@lfdr.de>; Tue, 14 May 2019 14:27:05 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hQWUp-0002vG-Ql; Tue, 14 May 2019 12:25:27 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=zxYt=TO=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hQWUn-0002ry-MV
 for xen-devel@lists.xenproject.org; Tue, 14 May 2019 12:25:25 +0000
X-Inumbo-ID: 597634ac-7643-11e9-abeb-07f7ac8ed8f0
Received: from foss.arm.com (unknown [217.140.101.70])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTP
 id 597634ac-7643-11e9-abeb-07f7ac8ed8f0;
 Tue, 14 May 2019 12:25:24 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.72.51.249])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 865E7341;
 Tue, 14 May 2019 05:25:24 -0700 (PDT)
Received: from e108454-lin.cambridge.arm.com (e108454-lin.cambridge.arm.com
 [10.1.196.50])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 769D33F71E;
 Tue, 14 May 2019 05:25:23 -0700 (PDT)
From: Julien Grall <julien.grall@arm.com>
To: xen-devel@lists.xenproject.org
Date: Tue, 14 May 2019 13:24:52 +0100
Message-Id: <20190514122456.28559-16-julien.grall@arm.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20190514122456.28559-1-julien.grall@arm.com>
References: <20190514122456.28559-1-julien.grall@arm.com>
Subject: [Xen-devel] [PATCH MM-PART2 RESEND v2 15/19] xen/arm: mm: Introduce
 DEFINE_PAGE_TABLE{, S} and use it
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Oleksandr_Tyshchenko@epam.com, Julien Grall <julien.grall@arm.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Andrii_Anisov@epam.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

V2UgaGF2ZSBtdWx0aXBsZSBzdGF0aWMgcGFnZS10YWJsZXMgZGVmaW5lZCBpbiBhcmNoL2FybS9t
bS5jLiBUaGUKY3VycmVudCB3YXkgdG8gZGVmaW5lIHRoZW0gaXMgZGlmZmljdWx0IHRvIHJlYWQg
YW5kIGRvZXMgbm90IGhlbHAgd2hlbgptYWtpbmcgbW9kaWZpY2F0aW9uLgoKVHdvIG5ldyBoZWxw
ZXJzIERFRklORV9QQUdFX1RBQkxFUyAodG8gZGVmaW5lIG11bHRpcGxlIHBhZ2UtdGFibGVzKSBh
bmQKREVGSU5FX1BBR0VfVEFCTEUgKGFsaWFzIG9mIERFRklORV9QQUdFX1RBQkxFUyguLi4sIDEp
KSBhcmUgaW50cm9kdWNlZAphbmQgbm93IHVzZWQgdG8gZGVmaW5lIHN0YXRpYyBwYWdlLXRhYmxl
cy4KCk5vdGUgdGhhdCBERUZJTkVfUEFHRV9UQUJMRVMoKSBhbGlnbm1lbnQgZGlmZmVycyBmcm9t
IHdoYXQgaXMgY3VycmVudGx5CnVzZWQgZm9yIGFsbG9jYXRpbmcgcGFnZS10YWJsZXMuIFRoaXMg
aXMgZmluZSBiZWNhdXNlIHBhZ2UtdGFibGVzIGFyZQpvbmx5IHJlcXVpcmVkIHRvIGJlIGFsaWdu
ZWQgdG8gYSBwYWdlLXNpemUuCgpTaWduZWQtb2ZmLWJ5OiBKdWxpZW4gR3JhbGwgPGp1bGllbi5n
cmFsbEBhcm0uY29tPgoKLS0tCiAgICBDaGFuZ2VzIGluIHYyOgogICAgICAgIC0gUGF0Y2ggaW4g
cmVwbGFjZW1lbnQgb2YgIlVzZSB0aGUgc2hvcnRlciB2ZXJzaW9uCiAgICAgICAgX19hbGlnbmVk
KFBBR0VfU0laRSkgdG8gYWxpZ24gcGFnZS10YWJsZXMiLgotLS0KIHhlbi9hcmNoL2FybS9tbS5j
IHwgMzIgKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAx
OCBpbnNlcnRpb25zKCspLCAxNCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS94ZW4vYXJjaC9h
cm0vbW0uYyBiL3hlbi9hcmNoL2FybS9tbS5jCmluZGV4IDZkYjdkZGEwZGEuLjlhNWYyZTFjM2Yg
MTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL2FybS9tbS5jCisrKyBiL3hlbi9hcmNoL2FybS9tbS5jCkBA
IC01MCw2ICs1MCwxMSBAQCBzdHJ1Y3QgZG9tYWluICpkb21feGVuLCAqZG9tX2lvLCAqZG9tX2Nv
dzsKICN1bmRlZiBtZm5fdG9fdmlydAogI2RlZmluZSBtZm5fdG9fdmlydChtZm4pIF9fbWZuX3Rv
X3ZpcnQobWZuX3gobWZuKSkKIAorI2RlZmluZSBERUZJTkVfUEFHRV9UQUJMRVMobmFtZSwgbnIp
ICAgICAgICAgICAgICAgICAgICBcCitscGFlX3QgX19hbGlnbmVkKFBBR0VfU0laRSkgbmFtZVtM
UEFFX0VOVFJJRVMgKiAobnIpXQorCisjZGVmaW5lIERFRklORV9QQUdFX1RBQkxFKG5hbWUpIERF
RklORV9QQUdFX1RBQkxFUyhuYW1lLCAxKQorCiAvKiBTdGF0aWMgc3RhcnQtb2YtZGF5IHBhZ2V0
YWJsZXMgdGhhdCB3ZSB1c2UgYmVmb3JlIHRoZSBhbGxvY2F0b3JzCiAgKiBhcmUgdXAuIFRoZXNl
IGFyZSB1c2VkIGJ5IGFsbCBDUFVzIGR1cmluZyBicmluZ3VwIGJlZm9yZSBzd2l0Y2hpbmcKICAq
IHRvIHRoZSBDUFVzIG93biBwYWdldGFibGVzLgpAQCAtNzMsMTMgKzc4LDEzIEBAIHN0cnVjdCBk
b21haW4gKmRvbV94ZW4sICpkb21faW8sICpkb21fY293OwogICogRmluYWxseSwgaWYgRUFSTFlf
UFJJTlRLIGlzIGVuYWJsZWQgdGhlbiB4ZW5fZml4bWFwIHdpbGwgYmUgbWFwcGVkCiAgKiBieSB0
aGUgQ1BVIG9uY2UgaXQgaGFzIG1vdmVkIG9mZiB0aGUgMToxIG1hcHBpbmcuCiAgKi8KLWxwYWVf
dCBib290X3BndGFibGVbTFBBRV9FTlRSSUVTXSBfX2F0dHJpYnV0ZV9fKChfX2FsaWduZWRfXyg0
MDk2KSkpOworREVGSU5FX1BBR0VfVEFCTEUoYm9vdF9wZ3RhYmxlKTsKICNpZmRlZiBDT05GSUdf
QVJNXzY0Ci1scGFlX3QgYm9vdF9maXJzdFtMUEFFX0VOVFJJRVNdIF9fYXR0cmlidXRlX18oKF9f
YWxpZ25lZF9fKDQwOTYpKSk7Ci1scGFlX3QgYm9vdF9maXJzdF9pZFtMUEFFX0VOVFJJRVNdIF9f
YXR0cmlidXRlX18oKF9fYWxpZ25lZF9fKDQwOTYpKSk7CitERUZJTkVfUEFHRV9UQUJMRShib290
X2ZpcnN0KTsKK0RFRklORV9QQUdFX1RBQkxFKGJvb3RfZmlyc3RfaWQpOwogI2VuZGlmCi1scGFl
X3QgYm9vdF9zZWNvbmRbTFBBRV9FTlRSSUVTXSAgX19hdHRyaWJ1dGVfXygoX19hbGlnbmVkX18o
NDA5NikpKTsKLWxwYWVfdCBib290X3RoaXJkW0xQQUVfRU5UUklFU10gIF9fYXR0cmlidXRlX18o
KF9fYWxpZ25lZF9fKDQwOTYpKSk7CitERUZJTkVfUEFHRV9UQUJMRShib290X3NlY29uZCk7CitE
RUZJTkVfUEFHRV9UQUJMRShib290X3RoaXJkKTsKIAogLyogTWFpbiBydW50aW1lIHBhZ2UgdGFi
bGVzICovCiAKQEAgLTkzLDggKzk4LDggQEAgbHBhZV90IGJvb3RfdGhpcmRbTFBBRV9FTlRSSUVT
XSAgX19hdHRyaWJ1dGVfXygoX19hbGlnbmVkX18oNDA5NikpKTsKIAogI2lmZGVmIENPTkZJR19B
Uk1fNjQKICNkZWZpbmUgSFlQX1BUX1JPT1RfTEVWRUwgMAotbHBhZV90IHhlbl9wZ3RhYmxlW0xQ
QUVfRU5UUklFU10gX19hdHRyaWJ1dGVfXygoX19hbGlnbmVkX18oNDA5NikpKTsKLWxwYWVfdCB4
ZW5fZmlyc3RbTFBBRV9FTlRSSUVTXSBfX2F0dHJpYnV0ZV9fKChfX2FsaWduZWRfXyg0MDk2KSkp
Oworc3RhdGljIERFRklORV9QQUdFX1RBQkxFKHhlbl9wZ3RhYmxlKTsKK3N0YXRpYyBERUZJTkVf
UEFHRV9UQUJMRSh4ZW5fZmlyc3QpOwogI2RlZmluZSBUSElTX0NQVV9QR1RBQkxFIHhlbl9wZ3Rh
YmxlCiAjZWxzZQogI2RlZmluZSBIWVBfUFRfUk9PVF9MRVZFTCAxCkBAIC0xMDcsMTcgKzExMiwx
NiBAQCBzdGF0aWMgREVGSU5FX1BFUl9DUFUobHBhZV90ICosIHhlbl9wZ3RhYmxlKTsKICAqIERP
TUhFQVBfVklSVF9TVEFSVC4uLkRPTUhFQVBfVklSVF9FTkQgaW4gMk1CIGNodW5rcy4gKi8KIHN0
YXRpYyBERUZJTkVfUEVSX0NQVShscGFlX3QgKiwgeGVuX2RvbW1hcCk7CiAvKiBSb290IG9mIHRo
ZSB0cmllIGZvciBjcHUwLCBvdGhlciBDUFUncyBQVHMgYXJlIGR5bmFtaWNhbGx5IGFsbG9jYXRl
ZCAqLwotbHBhZV90IGNwdTBfcGd0YWJsZVtMUEFFX0VOVFJJRVNdIF9fYXR0cmlidXRlX18oKF9f
YWxpZ25lZF9fKDQwOTYpKSk7CitzdGF0aWMgREVGSU5FX1BBR0VfVEFCTEUoY3B1MF9wZ3RhYmxl
KTsKIC8qIGNwdTAncyBkb21oZWFwIHBhZ2UgdGFibGVzICovCi1scGFlX3QgY3B1MF9kb21tYXBb
TFBBRV9FTlRSSUVTKkRPTUhFQVBfU0VDT05EX1BBR0VTXQotICAgIF9fYXR0cmlidXRlX18oKF9f
YWxpZ25lZF9fKDQwOTYqRE9NSEVBUF9TRUNPTkRfUEFHRVMpKSk7CitzdGF0aWMgREVGSU5FX1BB
R0VfVEFCTEVTKGNwdTBfZG9tbWFwLCBET01IRUFQX1NFQ09ORF9QQUdFUyk7CiAjZW5kaWYKIAog
I2lmZGVmIENPTkZJR19BUk1fNjQKIC8qIFRoZSBmaXJzdCBwYWdlIG9mIHRoZSBmaXJzdCBsZXZl
bCBtYXBwaW5nIG9mIHRoZSB4ZW5oZWFwLiBUaGUKICAqIHN1YnNlcXVlbnQgeGVuaGVhcCBmaXJz
dCBsZXZlbCBwYWdlcyBhcmUgZHluYW1pY2FsbHkgYWxsb2NhdGVkLCBidXQKICAqIHdlIG5lZWQg
dGhpcyBvbmUgdG8gYm9vdHN0cmFwIG91cnNlbHZlcy4gKi8KLWxwYWVfdCB4ZW5oZWFwX2ZpcnN0
X2ZpcnN0W0xQQUVfRU5UUklFU10gX19hdHRyaWJ1dGVfXygoX19hbGlnbmVkX18oNDA5NikpKTsK
K3N0YXRpYyBERUZJTkVfUEFHRV9UQUJMRSh4ZW5oZWFwX2ZpcnN0X2ZpcnN0KTsKIC8qIFRoZSB6
ZXJvZXRoIGxldmVsIHNsb3Qgd2hpY2ggdXNlcyB4ZW5oZWFwX2ZpcnN0X2ZpcnN0LiBVc2VkIGJl
Y2F1c2UKICAqIHNldHVwX3hlbmhlYXBfbWFwcGluZ3Mgb3RoZXJ3aXNlIHJlbGllcyBvbiBtZm5f
dG9fdmlydCB3aGljaCBpc24ndAogICogdmFsaWQgZm9yIGEgbm9uLXhlbmhlYXAgbWFwcGluZy4g
Ki8KQEAgLTEzMSwxMiArMTM1LDEyIEBAIHN0YXRpYyBfX2luaXRkYXRhIGludCB4ZW5oZWFwX2Zp
cnN0X2ZpcnN0X3Nsb3QgPSAtMTsKICAqIGFkZHJlc3NlcyBmcm9tIDAgdG8gMHg3ZmZmZmZmZi4g
T2Zmc2V0cyBpbnRvIGl0IGFyZSBjYWxjdWxhdGVkCiAgKiB3aXRoIHNlY29uZF9saW5lYXJfb2Zm
c2V0KCksIG5vdCBzZWNvbmRfdGFibGVfb2Zmc2V0KCkuCiAgKi8KLWxwYWVfdCB4ZW5fc2Vjb25k
W0xQQUVfRU5UUklFUyoyXSBfX2F0dHJpYnV0ZV9fKChfX2FsaWduZWRfXyg0MDk2KjIpKSk7Citz
dGF0aWMgREVGSU5FX1BBR0VfVEFCTEVTKHhlbl9zZWNvbmQsIDIpOwogLyogRmlyc3QgbGV2ZWwg
cGFnZSB0YWJsZSB1c2VkIGZvciBmaXhtYXAgKi8KLWxwYWVfdCB4ZW5fZml4bWFwW0xQQUVfRU5U
UklFU10gX19hdHRyaWJ1dGVfXygoX19hbGlnbmVkX18oNDA5NikpKTsKK0RFRklORV9QQUdFX1RB
QkxFKHhlbl9maXhtYXApOwogLyogRmlyc3QgbGV2ZWwgcGFnZSB0YWJsZSB1c2VkIHRvIG1hcCBY
ZW4gaXRzZWxmIHdpdGggdGhlIFhOIGJpdCBzZXQKICAqIGFzIGFwcHJvcHJpYXRlLiAqLwotc3Rh
dGljIGxwYWVfdCB4ZW5feGVubWFwW0xQQUVfRU5UUklFU10gX19hdHRyaWJ1dGVfXygoX19hbGln
bmVkX18oNDA5NikpKTsKK3N0YXRpYyBERUZJTkVfUEFHRV9UQUJMRSh4ZW5feGVubWFwKTsKIAog
LyogTm9uLWJvb3QgQ1BVcyB1c2UgdGhpcyB0byBmaW5kIHRoZSBjb3JyZWN0IHBhZ2V0YWJsZXMu
ICovCiB1aW50NjRfdCBpbml0X3R0YnI7Ci0tIAoyLjExLjAKCgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1k
ZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21h
aWxtYW4vbGlzdGluZm8veGVuLWRldmVs

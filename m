Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 65CFA12A196
	for <lists+xen-devel@lfdr.de>; Tue, 24 Dec 2019 14:07:00 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1ijjrr-0005Rf-3T; Tue, 24 Dec 2019 13:04:55 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=ZIBU=2O=amazon.com=prvs=254c36092=pdurrant@srs-us1.protection.inumbo.net>)
 id 1ijjrp-0005RC-R6
 for xen-devel@lists.xenproject.org; Tue, 24 Dec 2019 13:04:53 +0000
X-Inumbo-ID: f2fa4996-264d-11ea-97ba-12813bfff9fa
Received: from smtp-fw-9101.amazon.com (unknown [207.171.184.25])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id f2fa4996-264d-11ea-97ba-12813bfff9fa;
 Tue, 24 Dec 2019 13:04:42 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.com; i=@amazon.com; q=dns/txt; s=amazon201209;
 t=1577192682; x=1608728682;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=IWsVAHop5oyMO7byAxcdLSEtCdjNCgcaEGP+huet7Ug=;
 b=E2Eb21oVv0MwB30HDUllN+IIDJuZ0UfJ2LUIBd2zxzruaexCWWb5S4Cb
 epu2q1ASseRKG4vyseuo0eC13ulJkiWpOU0WGPkrMPSHWbjcstsBXW4sk
 012BDmTfcLNC7ggdun1KhB0FKj4mJhA7VTyk+TrD8aNSvsEt3a7lxSpFM g=;
IronPort-SDR: qfAa3dF+v3UoLs36aZIvKP9odL+2QrLQMYGHU6pyzymPIPduaJXbDLw8jf5kbTWQl09n1ogT1K
 jjisJYwYP2CA==
X-IronPort-AV: E=Sophos;i="5.69,351,1571702400"; 
   d="scan'208";a="6955900"
Received: from sea32-co-svc-lb4-vlan3.sea.corp.amazon.com (HELO
 email-inbound-relay-1a-7d76a15f.us-east-1.amazon.com) ([10.47.23.38])
 by smtp-border-fw-out-9101.sea19.amazon.com with ESMTP;
 24 Dec 2019 13:04:41 +0000
Received: from EX13MTAUEA002.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan2.iad.amazon.com [10.40.159.162])
 by email-inbound-relay-1a-7d76a15f.us-east-1.amazon.com (Postfix) with ESMTPS
 id 56C59A2B82; Tue, 24 Dec 2019 13:04:40 +0000 (UTC)
Received: from EX13D32EUC001.ant.amazon.com (10.43.164.159) by
 EX13MTAUEA002.ant.amazon.com (10.43.61.77) with Microsoft SMTP Server (TLS)
 id 15.0.1236.3; Tue, 24 Dec 2019 13:04:39 +0000
Received: from EX13MTAUWB001.ant.amazon.com (10.43.161.207) by
 EX13D32EUC001.ant.amazon.com (10.43.164.159) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Tue, 24 Dec 2019 13:04:38 +0000
Received: from u2f063a87eabd5f.cbg10.amazon.com (10.125.106.135) by
 mail-relay.amazon.com (10.43.161.249) with Microsoft SMTP Server id
 15.0.1367.3 via Frontend Transport; Tue, 24 Dec 2019 13:04:36 +0000
From: Paul Durrant <pdurrant@amazon.com>
To: <xen-devel@lists.xenproject.org>
Date: Tue, 24 Dec 2019 13:04:16 +0000
Message-ID: <20191224130416.3570-7-pdurrant@amazon.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20191224130416.3570-1-pdurrant@amazon.com>
References: <20191224130416.3570-1-pdurrant@amazon.com>
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH 6/6] xl: allow specified domain id to be used
 for create, restore and migrate
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Paul Durrant <pdurrant@amazon.com>, Ian Jackson <ian.jackson@eu.citrix.com>,
 Wei Liu <wl@xen.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBwYXRjaCBhZGRzIHRoZSBvcHRpb24gdG8gdXNlIGEgc3BlY2lmaWVkIGRvbWFpbiBpZCB0
byBiZSB1c2VkIGZvcgp0aGUgY3JlYXRlLCByZXN0b3JlIGFuZCBtaWdyYXRlIGxpZmVjeWNsZSBv
cGVyYXRpb25zIGFuZCBkb2N1bWVudGF0aW9uCnRoZXJlb2YuCgpUaGUgc3BlY2lmaWVkIGlkIG1h
eSBiZSBudW1lcmljIG9yLCBpbiBhbGwgY2FzZXMsIG9uZSBvZiB0d28gc3BlY2lhbAp2YWx1ZXMu
IFRoZSB2YWx1ZSAncmFuZG9tJyB3aWxsIGNhdXNlIGxpYnhsIHRvIHVzZSBhIHJhbmRvbWx5IGNo
b3Nlbgpkb21haW4gaWQgYW5kIHRoZSB2YWx1ZSAnbmV4dCcgd2lsbCBjYXVzZSBYZW4gdG8gYXV0
b21hdGljYWxseSBjaG9vc2UKdGhlIG5leHQgYXZhaWxhYmxlIGRvbWFpbiBpZCAod2hpY2ggaXMg
dGhlIGRlZmF1bHQgYW5kIGxlZ2FjeSBiZWhhdmlvdXIpLgpJbiB0aGUgY2FzZSBvZiB0aGUgbWln
cmF0ZSBvcGVyYXRpb24gYSB0aGlyZCBzcGVjaWFsIHZhbHVlIG1heSBiZQpzcGVjaWZpZWQ6ICdw
cmVzZXJ2ZScuIElmIHRoaXMgdmFsdWUgaXMgY2hvc2VuIHRoZW4gdGhlIGN1cnJlbnQgaWQgb2YK
dGhlIGRvbWFpbiBiZWluZyBtaWdyYXRlZCB3aWxsIGJlIHVzZWQgdG8gcmVzdG9yZSB0aGUgZG9t
YWluIG9uIHRoZQpkZXN0aW5hdGlvbiBob3N0ICh3aGljaCBjbGVhcmx5IHByZWNsdWRlcyAnbG9j
YWxob3N0JyBtaWdyYXRpb25zKS4KCk5PVEU6IFdoaWxzdCBtb2RpZmluZyB4bF9jbWR0YWJsZS5j
LCBzZXZlcmFsIGZvcm1hdHRpbmcgZXJyb3JzIHdlcmUKICAgICAgY29ycmVjdGVkLiBBbHNvIGVy
cm9uZW91cyBkb2N1bWVudGF0aW9uIG9mIHRoZSAnLWYnIG9wdGlvbiBpbgogICAgICB4bC4xLnBv
ZC5pbiB3YXMgY29ycmVjdGVkICh0byByZW1vdmUgdGhlICc9JykuCgpTaWduZWQtb2ZmLWJ5OiBQ
YXVsIER1cnJhbnQgPHBkdXJyYW50QGFtYXpvbi5jb20+Ci0tLQpDYzogSWFuIEphY2tzb24gPGlh
bi5qYWNrc29uQGV1LmNpdHJpeC5jb20+CkNjOiBXZWkgTGl1IDx3bEB4ZW4ub3JnPgotLS0KIGRv
Y3MvbWFuL3hsLjEucG9kLmluICAgICAgfCAzNCArKysrKysrKysrKysrKysrKysrKysrKysrKyst
LS0tCiB0b29scy94bC94bC5oICAgICAgICAgICAgIHwgIDEgKwogdG9vbHMveGwveGxfY21kdGFi
bGUuYyAgICB8IDIyICsrKysrKysrKysrKysrKy0tLS0tCiB0b29scy94bC94bF9taWdyYXRlLmMg
ICAgIHwgNDIgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tCiB0b29scy94
bC94bF9wYXJzZS5jICAgICAgIHwgMzMgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiB0
b29scy94bC94bF9wYXJzZS5oICAgICAgIHwgIDIgKysKIHRvb2xzL3hsL3hsX3NhdmVyZXN0b3Jl
LmMgfCAgOSArKysrKysrKy0KIHRvb2xzL3hsL3hsX3ZtY29udHJvbC5jICAgfCAyMyArKysrKysr
KysrKysrKystLS0tLS0KIDggZmlsZXMgY2hhbmdlZCwgMTQxIGluc2VydGlvbnMoKyksIDI1IGRl
bGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RvY3MvbWFuL3hsLjEucG9kLmluIGIvZG9jcy9tYW4v
eGwuMS5wb2QuaW4KaW5kZXggZDRiNWU4ZTM2Mi4uMmRlZjMyNjY0YiAxMDA2NDQKLS0tIGEvZG9j
cy9tYW4veGwuMS5wb2QuaW4KKysrIGIvZG9jcy9tYW4veGwuMS5wb2QuaW4KQEAgLTEyMiwxMSAr
MTIyLDE5IEBAIEI8T1BUSU9OUz4KIAogPW92ZXIgNAogCis9aXRlbSBCPC1EIERPTUlEPiwgQjwt
LWRvbWlkPURPTUlEPgorCitJZiBET01JRCBpcyBudW1lcmljIHRoZW4gY3JlYXRlIHRoZSBuZXcg
ZG9tYWluIHdpdGggdGhpcyBkb21haW4gaWQuIElmCitET01JRCBpcyBJPHJhbmRvbT4gdGhlbiB1
c2UgYSByYW5kb21seSBnZW5lcmF0ZWQgdmFsdWUgZm9yIGRvbWFpbiBpZAorb3RoZXJ3aXNlLCBp
ZiBET01JRCBpcyBJPG5leHQ+ICh0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhpcyBvcHRpb24pIHRo
ZW4KK3VzZSB0aGUgbmV4dCBhdmFpbGFibGUgZG9tYWluIGlkIGZvbGxvd2luZyBvbiBmcm9tIHRo
ZSBwcmV2aW91cyBkb21haW4gdG8KK2JlIGNyZWF0ZWQsIHJlc3RvcmVkIG9yIG1pZ3JhdGVkIGlu
LgorCiA9aXRlbSBCPC1xPiwgQjwtLXF1aWV0PgogCiBObyBjb25zb2xlIG91dHB1dC4KIAotPWl0
ZW0gQjwtZj1GSUxFPiwgQjwtLWRlZmNvbmZpZz1GSUxFPgorPWl0ZW0gQjwtZiBGSUxFPiwgQjwt
LWRlZmNvbmZpZz1GSUxFPgogCiBVc2UgdGhlIGdpdmVuIGNvbmZpZ3VyYXRpb24gZmlsZS4KIApA
QCAtMjA1LDggKzIxMyw3IEBAIEI8T1BUSU9OUz4KIAogPW92ZXIgNAogCi09aXRlbSBCPC1mPUZJ
TEU+LCBCPC0tZGVmY29uZmlnPUZJTEU+Ci0KKz1pdGVtIEI8LWYgRklMRT4sIEI8LS1kZWZjb25m
aWc9RklMRT4KIFVzZSB0aGUgZ2l2ZW4gY29uZmlndXJhdGlvbiBmaWxlLgogCiA9aXRlbSBCPGtl
eT12YWx1ZT4KQEAgLTQ2Nyw2ICs0NzQsMTcgQEAgQjxPUFRJT05TPgogCiA9b3ZlciA0CiAKKz1p
dGVtIEI8LUQgRE9NSUQ+LCBCPC0tZG9taWQ9RE9NSUQ+CisKK0lmIERPTUlEIGlzIG51bWVyaWMg
dGhlbiBjcmVhdGUgdGhlIG1pZ3JhdGVkIGRvbWFpbiB3aXRoIHRoaXMgZG9tYWluIGlkLiBJZgor
RE9NSUQgaXMgSTxwcmVzZXJ2ZT4gdGhlbiB1c2UgdGhlIHNhbWUgbnVtZXJpYyBkb21haW4gaWQg
YXMgdGhlIGRvbWFpbgorYmVpbmcgbWlncmF0ZWQgaGFzIG9uIHRoZSBjdXJyZW50IGhvc3QuIE5v
dGUgdGhhdCBtaWdyYXRpb24gd2lsbCBmYWlsIGluCit0aGUgY2FzZSB0aGF0IGEgc3BlY2lmaWVk
IG9yIHByZXNlcnZlZCBkb21haW4gaWQgaXMgYWxyZWFkeSBpbiB1c2Ugb24gdGhlCitkZXN0aW5h
dGlvbiBob3N0LiBJZiBET01JRCBpcyBJPHJhbmRvbT4gdGhlbiB1c2UgYSByYW5kb21seSBnZW5l
cmF0ZWQKK3ZhbHVlIGZvciBkb21haW4gaWQgb3RoZXJ3aXNlLCBpZiBET01JRCBpcyBJPG5leHQ+
ICh0aGUgZGVmYXVsdCB2YWx1ZSBmb3IKK3RoaXMgb3B0aW9uKSB0aGVuIHVzZSB0aGUgbmV4dCBh
dmFpbGFibGUgZG9tYWluIGlkIGZvbGxvd2luZyBvbiBmcm9tIHRoZQorcHJldmlvdXMgZG9tYWlu
IHRvIGJlIGNyZWF0ZWQsIHJlc3RvcmVkIG9yIG1pZ3JhdGVkIGluLgorCiA9aXRlbSBCPC1zPiBJ
PHNzaGNvbW1hbmQ+CiAKIFVzZSA8c3NoY29tbWFuZD4gaW5zdGVhZCBvZiBzc2guICBTdHJpbmcg
d2lsbCBiZSBwYXNzZWQgdG8gc2guIElmIGVtcHR5LCBydW4KQEAgLTY0OCw2ICs2NjYsMTQgQEAg
QjxPUFRJT05TPgogCiA9b3ZlciA0CiAKKz1pdGVtIEI8LUQgRE9NSUQ+LCBCPC0tZG9taWQ9RE9N
SUQ+CisKK0lmIERPTUlEIGlzIG51bWVyaWMgdGhlbiBjcmVhdGUgdGhlIHJlc3RvcmVkIGRvbWFp
biB3aXRoIHRoaXMgZG9tYWluIGlkLiBJZgorRE9NSUQgaXMgSTxyYW5kb20+IHRoZW4gdXNlIGEg
cmFuZG9tbHkgZ2VuZXJhdGVkIHZhbHVlIGZvciBkb21haW4gaWQKK290aGVyd2lzZSwgaWYgRE9N
SUQgaXMgSTxuZXh0PiAodGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoaXMgb3B0aW9uKSB0aGVuCit1
c2UgdGhlIG5leHQgYXZhaWxhYmxlIGRvbWFpbiBpZCBmb2xsb3dpbmcgb24gZnJvbSB0aGUgcHJl
dmlvdXMgZG9tYWluIHRvCitiZSBjcmVhdGVkLCByZXN0b3JlZCBvciBtaWdyYXRlZCBpbi4KKwog
PWl0ZW0gQjwtcD4KIAogRG8gbm90IHVucGF1c2UgdGhlIGRvbWFpbiBhZnRlciByZXN0b3Jpbmcg
aXQuCkBAIC0xMjg3LDcgKzEzMTMsNyBAQCBCPE9QVElPTlM+CiAKID1vdmVyIDQKIAotPWl0ZW0g
QjwtZj1GSUxFPiwgQjwtLWRlZmNvbmZpZz1GSUxFPgorPWl0ZW0gQjwtZiBGSUxFPiwgQjwtLWRl
ZmNvbmZpZz1GSUxFPgogCiBVc2UgdGhlIGdpdmVuIGNvbmZpZ3VyYXRpb24gZmlsZS4KIApkaWZm
IC0tZ2l0IGEvdG9vbHMveGwveGwuaCBiL3Rvb2xzL3hsL3hsLmgKaW5kZXggNjBiZGFkOGZmYi4u
ZjI1MDBmMzZlMCAxMDA2NDQKLS0tIGEvdG9vbHMveGwveGwuaAorKysgYi90b29scy94bC94bC5o
CkBAIC0zMSw2ICszMSw3IEBAIHN0cnVjdCBjbWRfc3BlYyB7CiB9OwogCiBzdHJ1Y3QgZG9tYWlu
X2NyZWF0ZSB7CisgICAgaW50IGRvbWlkOwogICAgIGludCBkZWJ1ZzsKICAgICBpbnQgZGFlbW9u
aXplOwogICAgIGludCBtb25pdG9yOyAvKiBoYW5kbGUgZ3Vlc3QgcmVib290cyBldGMgKi8KZGlm
ZiAtLWdpdCBhL3Rvb2xzL3hsL3hsX2NtZHRhYmxlLmMgYi90b29scy94bC94bF9jbWR0YWJsZS5j
CmluZGV4IDViYWE2MDIzYWEuLmIyNDRiNmEyNDMgMTAwNjQ0Ci0tLSBhL3Rvb2xzL3hsL3hsX2Nt
ZHRhYmxlLmMKKysrIGIvdG9vbHMveGwveGxfY21kdGFibGUuYwpAQCAtMjYsMTcgKzI2LDIyIEBA
IHN0cnVjdCBjbWRfc3BlYyBjbWRfdGFibGVbXSA9IHsKICAgICAgICItaCAgICAgICAgICAgICAg
ICAgICAgICBQcmludCB0aGlzIGhlbHAuXG4iCiAgICAgICAiLXAgICAgICAgICAgICAgICAgICAg
ICAgTGVhdmUgdGhlIGRvbWFpbiBwYXVzZWQgYWZ0ZXIgaXQgaXMgY3JlYXRlZC5cbiIKICAgICAg
ICItYyAgICAgICAgICAgICAgICAgICAgICBDb25uZWN0IHRvIHRoZSBjb25zb2xlIGFmdGVyIHRo
ZSBkb21haW4gaXMgY3JlYXRlZC5cbiIKLSAgICAgICItZiBGSUxFLCAtLWRlZmNvbmZpZz1GSUxF
XG4gICAgICAgICAgICAgICAgICAgICBVc2UgdGhlIGdpdmVuIGNvbmZpZ3VyYXRpb24gZmlsZS5c
biIKKyAgICAgICItZiBGSUxFLCAtLWRlZmNvbmZpZz1GSUxFXG4iCisgICAgICAiICAgICAgICAg
ICAgICAgICAgICAgICAgVXNlIHRoZSBnaXZlbiBjb25maWd1cmF0aW9uIGZpbGUuXG4iCiAgICAg
ICAiLXEsIC0tcXVpZXQgICAgICAgICAgICAgUXVpZXQuXG4iCiAgICAgICAiLW4sIC0tZHJ5cnVu
ICAgICAgICAgICAgRHJ5IHJ1biAtIHByaW50cyB0aGUgcmVzdWx0aW5nIGNvbmZpZ3VyYXRpb25c
biIKLSAgICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgKGRlcHJlY2F0ZWQgaW4gZmF2b3Vy
IG9mIGdsb2JhbCAtTiBvcHRpb24pLlxuIgorICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAg
IChkZXByZWNhdGVkIGluIGZhdm91ciBvZiBnbG9iYWwgLU4gb3B0aW9uKS5cbiIKICAgICAgICIt
ZCAgICAgICAgICAgICAgICAgICAgICBFbmFibGUgZGVidWcgbWVzc2FnZXMuXG4iCiAgICAgICAi
LUYgICAgICAgICAgICAgICAgICAgICAgUnVuIGluIGZvcmVncm91bmQgdW50aWwgZGVhdGggb2Yg
dGhlIGRvbWFpbi5cbiIKICAgICAgICItZSAgICAgICAgICAgICAgICAgICAgICBEbyBub3Qgd2Fp
dCBpbiB0aGUgYmFja2dyb3VuZCBmb3IgdGhlIGRlYXRoIG9mIHRoZSBkb21haW4uXG4iCiAgICAg
ICAiLVYsIC0tdm5jdmlld2VyICAgICAgICAgQ29ubmVjdCB0byB0aGUgVk5DIGRpc3BsYXkgYWZ0
ZXIgdGhlIGRvbWFpbiBpcyBjcmVhdGVkLlxuIgogICAgICAgIi1BLCAtLXZuY3ZpZXdlci1hdXRv
cGFzc1xuIgogICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgIFBhc3MgVk5DIHBhc3N3b3Jk
IHRvIHZpZXdlciB2aWEgc3RkaW4uXG4iCi0gICAgICAiLS1pZ25vcmUtZ2xvYmFsLWFmZmluaXR5
LW1hc2tzIElnbm9yZSBnbG9iYWwgbWFza3MgaW4geGwuY29uZi4iCisgICAgICAiLS1pZ25vcmUt
Z2xvYmFsLWFmZmluaXR5LW1hc2tzXG4iCisgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAg
SWdub3JlIGdsb2JhbCBtYXNrcyBpbiB4bC5jb25mLlxuIgorICAgICAgIi1ELCAtLWRvbWlkPURP
TUlEfG5leHR8cmFuZG9tXG4iCisgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgVXNlIHRo
ZSBzcGVjaWZpZWQgZG9tYWluIGlkLCB0aGUgbmV4dCBhdmFpbGFibGUgKGRlZmF1bHQpXG4iCisg
ICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgb3IgY2hvb3NlIG9uZSBhdCByYW5kb20uIgog
ICAgIH0sCiAgICAgeyAiY29uZmlnLXVwZGF0ZSIsCiAgICAgICAmbWFpbl9jb25maWdfdXBkYXRl
LCAxLCAxLApAQCAtMTY3LDcgKzE3MiwxMSBAQCBzdHJ1Y3QgY21kX3NwZWMgY21kX3RhYmxlW10g
PSB7CiAgICAgICAiLWUgICAgICAgICAgICAgIERvIG5vdCB3YWl0IGluIHRoZSBiYWNrZ3JvdW5k
IChvbiA8aG9zdD4pIGZvciB0aGUgZGVhdGhcbiIKICAgICAgICIgICAgICAgICAgICAgICAgb2Yg
dGhlIGRvbWFpbi5cbiIKICAgICAgICItLWRlYnVnICAgICAgICAgUHJpbnQgaHVnZSAoISkgYW1v
dW50IG9mIGRlYnVnIGR1cmluZyB0aGUgbWlncmF0aW9uIHByb2Nlc3MuXG4iCi0gICAgICAiLXAg
ICAgICAgICAgICAgIERvIG5vdCB1bnBhdXNlIGRvbWFpbiBhZnRlciBtaWdyYXRpbmcgaXQuIgor
ICAgICAgIi1wICAgICAgICAgICAgICBEbyBub3QgdW5wYXVzZSBkb21haW4gYWZ0ZXIgbWlncmF0
aW5nIGl0LlxuIgorICAgICAgIi1ELCAtLWRvbWlkPURPTUlEfG5leHR8cmFuZG9tfHByZXNlcnZl
XG4iCisgICAgICAiICAgICAgICAgICAgICAgIFVzZSB0aGUgc3BlY2lmaWVkIGRvbWFpbiBpZCwg
dGhlIG5leHQgYXZhaWxhYmxlIChkZWZhdWx0KSxcbiIKKyAgICAgICIgICAgICAgICAgICAgICAg
Y2hvb3NlIG9uZSBhdCByYW5kb20sIG9yIHByZXNlcnZlIHRoZSBleGlzdGluZyBkb21haW4ncyBp
ZFxuIgorICAgICAgIiAgICAgICAgICAgICAgICAoaGVuY2UgcHJlY2x1ZGluZyBsb2NhbGhvc3Qg
bWlncmF0ZSkuIgogICAgIH0sCiAgICAgeyAicmVzdG9yZSIsCiAgICAgICAmbWFpbl9yZXN0b3Jl
LCAwLCAxLApAQCAtMTc4LDcgKzE4NywxMCBAQCBzdHJ1Y3QgY21kX3NwZWMgY21kX3RhYmxlW10g
PSB7CiAgICAgICAiLWUgICAgICAgICAgICAgICAgICAgICAgIERvIG5vdCB3YWl0IGluIHRoZSBi
YWNrZ3JvdW5kIGZvciB0aGUgZGVhdGggb2YgdGhlIGRvbWFpbi5cbiIKICAgICAgICItZCAgICAg
ICAgICAgICAgICAgICAgICAgRW5hYmxlIGRlYnVnIG1lc3NhZ2VzLlxuIgogICAgICAgIi1WLCAt
LXZuY3ZpZXdlciAgICAgICAgICBDb25uZWN0IHRvIHRoZSBWTkMgZGlzcGxheSBhZnRlciB0aGUg
ZG9tYWluIGlzIGNyZWF0ZWQuXG4iCi0gICAgICAiLUEsIC0tdm5jdmlld2VyLWF1dG9wYXNzIFBh
c3MgVk5DIHBhc3N3b3JkIHRvIHZpZXdlciB2aWEgc3RkaW4uIgorICAgICAgIi1BLCAtLXZuY3Zp
ZXdlci1hdXRvcGFzcyBQYXNzIFZOQyBwYXNzd29yZCB0byB2aWV3ZXIgdmlhIHN0ZGluLlxuIgor
ICAgICAgIi1ELCAtLWRvbWlkPURPTUlEfG5leHR8cmFuZG9tXG4iCisgICAgICAiICAgICAgICAg
ICAgICAgICAgICAgICAgIFVzZSB0aGUgc3BlY2lmaWVkIGRvbWFpbiBpZCwgdGhlIG5leHQgYXZh
aWxhYmxlIChkZWZhdWx0KVxuIgorICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgICBvciBj
aG9vc2Ugb25lIGF0IHJhbmRvbS4iCiAgICAgfSwKICAgICB7ICJtaWdyYXRlLXJlY2VpdmUiLAog
ICAgICAgJm1haW5fbWlncmF0ZV9yZWNlaXZlLCAwLCAxLApkaWZmIC0tZ2l0IGEvdG9vbHMveGwv
eGxfbWlncmF0ZS5jIGIvdG9vbHMveGwveGxfbWlncmF0ZS5jCmluZGV4IDIyZjA0MjliODQuLmIw
ZDhmMTJkOTUgMTAwNjQ0Ci0tLSBhL3Rvb2xzL3hsL3hsX21pZ3JhdGUuYworKysgYi90b29scy94
bC94bF9taWdyYXRlLmMKQEAgLTMxNSwxNCArMzE1LDEzIEBAIHN0YXRpYyB2b2lkIG1pZ3JhdGVf
ZG9tYWluKHVpbnQzMl90IGRvbWlkLCBjb25zdCBjaGFyICpydW5lLCBpbnQgZGVidWcsCiAgICAg
ZXhpdChFWElUX0ZBSUxVUkUpOwogfQogCi1zdGF0aWMgdm9pZCBtaWdyYXRlX3JlY2VpdmUoaW50
IGRlYnVnLCBpbnQgZGFlbW9uaXplLCBpbnQgbW9uaXRvciwKLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpbnQgcGF1c2VfYWZ0ZXJfbWlncmF0aW9uLAorc3RhdGljIHZvaWQgbWlncmF0ZV9y
ZWNlaXZlKGludCBkb21pZCwgaW50IGRlYnVnLCBpbnQgZGFlbW9uaXplLAorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGludCBtb25pdG9yLCBpbnQgcGF1c2VfYWZ0ZXJfbWlncmF0aW9uLAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBzZW5kX2ZkLCBpbnQgcmVjdl9mZCwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJ4bF9jaGVja3BvaW50ZWRfc3RyZWFtIGNoZWNr
cG9pbnRlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyICpjb2xvX3Byb3h5X3Nj
cmlwdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHVzZXJzcGFjZV9jb2xvX3By
b3h5KQogewotICAgIHVpbnQzMl90IGRvbWlkOwogICAgIGludCByYywgcmMyOwogICAgIGNoYXIg
cmNfYnVmOwogICAgIGNoYXIgKm1pZ3JhdGlvbl9kb21uYW1lOwpAQCAtMzM5LDYgKzMzOCw3IEBA
IHN0YXRpYyB2b2lkIG1pZ3JhdGVfcmVjZWl2ZShpbnQgZGVidWcsIGludCBkYWVtb25pemUsIGlu
dCBtb25pdG9yLAogICAgICAgICAgICAgICAgICAgICAgIm1pZ3JhdGlvbiBhY2sgc3RyZWFtIiwg
ImJhbm5lciIpICk7CiAKICAgICBtZW1zZXQoJmRvbV9pbmZvLCAwLCBzaXplb2YoZG9tX2luZm8p
KTsKKyAgICBkb21faW5mby5kb21pZCA9IGRvbWlkOwogICAgIGRvbV9pbmZvLmRlYnVnID0gZGVi
dWc7CiAgICAgZG9tX2luZm8uZGFlbW9uaXplID0gZGFlbW9uaXplOwogICAgIGRvbV9pbmZvLm1v
bml0b3IgPSBtb25pdG9yOwpAQCAtNDc3LDYgKzQ3Nyw3IEBAIHN0YXRpYyB2b2lkIG1pZ3JhdGVf
cmVjZWl2ZShpbnQgZGVidWcsIGludCBkYWVtb25pemUsIGludCBtb25pdG9yLAogCiBpbnQgbWFp
bl9taWdyYXRlX3JlY2VpdmUoaW50IGFyZ2MsIGNoYXIgKiphcmd2KQogeworICAgIGNvbnN0IGNo
YXIgKmRvbWlkID0gTlVMTDsKICAgICBpbnQgZGVidWcgPSAwLCBkYWVtb25pemUgPSAxLCBtb25p
dG9yID0gMSwgcGF1c2VfYWZ0ZXJfbWlncmF0aW9uID0gMDsKICAgICBsaWJ4bF9jaGVja3BvaW50
ZWRfc3RyZWFtIGNoZWNrcG9pbnRlZCA9IExJQlhMX0NIRUNLUE9JTlRFRF9TVFJFQU1fTk9ORTsK
ICAgICBpbnQgb3B0OwpAQCAtNDkwLDcgKzQ5MSwxMCBAQCBpbnQgbWFpbl9taWdyYXRlX3JlY2Vp
dmUoaW50IGFyZ2MsIGNoYXIgKiphcmd2KQogICAgICAgICBDT01NT05fTE9OR19PUFRTCiAgICAg
fTsKIAotICAgIFNXSVRDSF9GT1JFQUNIX09QVChvcHQsICJGZWRycCIsIG9wdHMsICJtaWdyYXRl
LXJlY2VpdmUiLCAwKSB7CisgICAgU1dJVENIX0ZPUkVBQ0hfT1BUKG9wdCwgIkQ6RmVkcnAiLCBv
cHRzLCAibWlncmF0ZS1yZWNlaXZlIiwgMCkgeworICAgIGNhc2UgJ0QnOgorICAgICAgICBkb21p
ZCA9IG9wdGFyZzsKKyAgICAgICAgYnJlYWs7CiAgICAgY2FzZSAnRic6CiAgICAgICAgIGRhZW1v
bml6ZSA9IDA7CiAgICAgICAgIGJyZWFrOwpAQCAtNTIyLDcgKzUyNiw5IEBAIGludCBtYWluX21p
Z3JhdGVfcmVjZWl2ZShpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAgICAgICAgIGhlbHAoIm1pZ3Jh
dGUtcmVjZWl2ZSIpOwogICAgICAgICByZXR1cm4gRVhJVF9GQUlMVVJFOwogICAgIH0KLSAgICBt
aWdyYXRlX3JlY2VpdmUoZGVidWcsIGRhZW1vbml6ZSwgbW9uaXRvciwgcGF1c2VfYWZ0ZXJfbWln
cmF0aW9uLAorCisgICAgbWlncmF0ZV9yZWNlaXZlKHBhcnNlX2RvbWlkKGRvbWlkKSwgZGVidWcs
IGRhZW1vbml6ZSwKKyAgICAgICAgICAgICAgICAgICAgbW9uaXRvciwgcGF1c2VfYWZ0ZXJfbWln
cmF0aW9uLAogICAgICAgICAgICAgICAgICAgICBTVERPVVRfRklMRU5PLCBTVERJTl9GSUxFTk8s
CiAgICAgICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRlZCwgc2NyaXB0LCB1c2Vyc3BhY2VfY29s
b19wcm94eSk7CiAKQEAgLTUzMSw3ICs1MzcsOCBAQCBpbnQgbWFpbl9taWdyYXRlX3JlY2VpdmUo
aW50IGFyZ2MsIGNoYXIgKiphcmd2KQogCiBpbnQgbWFpbl9taWdyYXRlKGludCBhcmdjLCBjaGFy
ICoqYXJndikKIHsKLSAgICB1aW50MzJfdCBkb21pZDsKKyAgICB1aW50MzJfdCBzcmNfZG9taWQ7
CisgICAgY29uc3QgY2hhciAqZHN0X2RvbWlkID0gTlVMTDsKICAgICBjb25zdCBjaGFyICpjb25m
aWdfZmlsZW5hbWUgPSBOVUxMOwogICAgIGNvbnN0IGNoYXIgKnNzaF9jb21tYW5kID0gInNzaCI7
CiAgICAgY2hhciAqcnVuZSA9IE5VTEw7CkBAIC01NDAsMTAgKzU0NywxNCBAQCBpbnQgbWFpbl9t
aWdyYXRlKGludCBhcmdjLCBjaGFyICoqYXJndikKICAgICBzdGF0aWMgc3RydWN0IG9wdGlvbiBv
cHRzW10gPSB7CiAgICAgICAgIHsiZGVidWciLCAwLCAwLCAweDEwMH0sCiAgICAgICAgIHsibGl2
ZSIsIDAsIDAsIDB4MjAwfSwKKyAgICAgICAgeyJkb21pZCIsIDEsIDAsICdEJ30sCiAgICAgICAg
IENPTU1PTl9MT05HX09QVFMKICAgICB9OwogCi0gICAgU1dJVENIX0ZPUkVBQ0hfT1BUKG9wdCwg
IkZDOnM6ZXAiLCBvcHRzLCAibWlncmF0ZSIsIDIpIHsKKyAgICBTV0lUQ0hfRk9SRUFDSF9PUFQo
b3B0LCAiRDpGQzpzOmVwIiwgb3B0cywgIm1pZ3JhdGUiLCAyKSB7CisgICAgY2FzZSAnRCc6Cisg
ICAgICAgIGRzdF9kb21pZCA9IG9wdGFyZzsKKyAgICAgICAgYnJlYWs7CiAgICAgY2FzZSAnQyc6
CiAgICAgICAgIGNvbmZpZ19maWxlbmFtZSA9IG9wdGFyZzsKICAgICAgICAgYnJlYWs7CkBAIC01
NjgsNyArNTc5LDcgQEAgaW50IG1haW5fbWlncmF0ZShpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAg
ICAgICAgIGJyZWFrOwogICAgIH0KIAotICAgIGRvbWlkID0gZmluZF9kb21haW4oYXJndltvcHRp
bmRdKTsKKyAgICBzcmNfZG9taWQgPSBmaW5kX2RvbWFpbihhcmd2W29wdGluZF0pOwogICAgIGhv
c3QgPSBhcmd2W29wdGluZCArIDFdOwogCiAgICAgYm9vbCBwYXNzX3R0eV9hcmcgPSBwcm9ncmVz
c191c2VfY3IgfHwgKGlzYXR0eSgyKSA+IDApOwpAQCAtNTc4LDYgKzU4OSw4IEBAIGludCBtYWlu
X21pZ3JhdGUoaW50IGFyZ2MsIGNoYXIgKiphcmd2KQogICAgIH0gZWxzZSB7CiAgICAgICAgIGNo
YXIgdmVyYm9zZV9idWZbbWlubXNnbGV2ZWxfZGVmYXVsdCszXTsKICAgICAgICAgaW50IHZlcmJv
c2VfbGVuOworICAgICAgICBjaGFyICpleHRyYSA9IE5VTEw7CisKICAgICAgICAgdmVyYm9zZV9i
dWZbMF0gPSAnICc7CiAgICAgICAgIHZlcmJvc2VfYnVmWzFdID0gJy0nOwogICAgICAgICBtZW1z
ZXQodmVyYm9zZV9idWYrMiwgJ3YnLCBtaW5tc2dsZXZlbF9kZWZhdWx0KTsKQEAgLTU5NCw5ICs2
MDcsMjAgQEAgaW50IG1haW5fbWlncmF0ZShpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAgICAgICAg
ICAgICAgICAgICBkYWVtb25pemUgPyAiIiA6ICIgLWUiLAogICAgICAgICAgICAgICAgICAgZGVi
dWcgPyAiIC1kIiA6ICIiLAogICAgICAgICAgICAgICAgICAgcGF1c2VfYWZ0ZXJfbWlncmF0aW9u
ID8gIiAtcCIgOiAiIik7CisKKyAgICAgICAgaWYgKGRzdF9kb21pZCkgeworICAgICAgICAgICAg
aWYgKCFzdHJjbXAoZHN0X2RvbWlkLCAicHJlc2VydmUiKSkKKyAgICAgICAgICAgICAgICB4YXNw
cmludGYoJmV4dHJhLCAiIC1EICV1Iiwgc3JjX2RvbWlkKTsKKyAgICAgICAgICAgIGVsc2UKKyAg
ICAgICAgICAgICAgICB4YXNwcmludGYoJmV4dHJhLCAiIC1EICVzIiwgZHN0X2RvbWlkKTsKKyAg
ICAgICAgfQorICAgICAgICBpZiAoZXh0cmEpIHsKKyAgICAgICAgICAgIHN0cmluZ19yZWFsbG9j
X2FwcGVuZCgmcnVuZSwgZXh0cmEpOworICAgICAgICAgICAgZnJlZShleHRyYSk7CisgICAgICAg
IH0KICAgICB9CiAKLSAgICBtaWdyYXRlX2RvbWFpbihkb21pZCwgcnVuZSwgZGVidWcsIGNvbmZp
Z19maWxlbmFtZSk7CisgICAgbWlncmF0ZV9kb21haW4oc3JjX2RvbWlkLCBydW5lLCBkZWJ1Zywg
Y29uZmlnX2ZpbGVuYW1lKTsKICAgICByZXR1cm4gRVhJVF9TVUNDRVNTOwogfQogCmRpZmYgLS1n
aXQgYS90b29scy94bC94bF9wYXJzZS5jIGIvdG9vbHMveGwveGxfcGFyc2UuYwppbmRleCBiODgx
MTg0ODA0Li41OGIxYWVlYThjIDEwMDY0NAotLS0gYS90b29scy94bC94bF9wYXJzZS5jCisrKyBi
L3Rvb2xzL3hsL3hsX3BhcnNlLmMKQEAgLTM5OSw2ICszOTksMzAgQEAgc3RhdGljIHVuc2lnbmVk
IGxvbmcgcGFyc2VfdWxvbmcoY29uc3QgY2hhciAqc3RyKQogICAgIHJldHVybiB2YWw7CiB9CiAK
K3N0YXRpYyB1bnNpZ25lZCBsb25nIHBhcnNlX2xvbmcoY29uc3QgY2hhciAqc3RyKQoreworICAg
IGNoYXIgKmVuZHB0cjsKKyAgICBsb25nIHZhbDsKKworICAgIHZhbCA9IHN0cnRvbChzdHIsICZl
bmRwdHIsIDEwKTsKKyAgICBpZiAoZW5kcHRyID09IHN0ciB8fCB2YWwgPT0gTE9OR19NSU4gfHwg
dmFsID09IExPTkdfTUFYKSB7CisgICAgICAgIGZwcmludGYoc3RkZXJyLCAieGw6IGZhaWxlZCB0
byBjb252ZXJ0IFwiJXNcIiB0byBudW1iZXJcbiIsIHN0cik7CisgICAgICAgIGV4aXQoRVhJVF9G
QUlMVVJFKTsKKyAgICB9CisgICAgcmV0dXJuIHZhbDsKK30KKworc3RhdGljIGludCBwYXJzZV9p
bnQoY29uc3QgY2hhciAqc3RyKQoreworICAgIGxvbmcgdmFsID0gcGFyc2VfbG9uZyhzdHIpOwor
CisgICAgaWYgKHZhbCA8IElOVF9NSU4gfHwgdmFsID4gSU5UX01BWCkgeworICAgICAgICBmcHJp
bnRmKHN0ZGVyciwgInhsOiBcIiVzXCIgaXMgb3V0IG9mIHJhbmdlXG4iLCBzdHIpOworICAgICAg
ICBleGl0KEVYSVRfRkFJTFVSRSk7CisgICAgfQorICAgIHJldHVybiB2YWw7Cit9CisKIHZvaWQg
cmVwbGFjZV9zdHJpbmcoY2hhciAqKnN0ciwgY29uc3QgY2hhciAqdmFsKQogewogICAgIGZyZWUo
KnN0cik7CkBAIC0yODY1LDYgKzI4ODksMTUgQEAgb3V0OgogICAgIHJldHVybiByYzsKIH0KIAor
aW50IHBhcnNlX2RvbWlkKGNvbnN0IGNoYXIgKmFyZykKK3sKKyAgICBpZiAoIWFyZyB8fCAhc3Ry
Y21wKGFyZywgIm5leHQiKSkKKyAgICAgICAgcmV0dXJuIElOVkFMSURfRE9NSUQ7IC8qIFhlbiB3
aWxsIHVzZSB0aGUgbmV4dCBhdmFpbGFibGUgKi8KKyAgICBlbHNlIGlmICghc3RyY21wKGFyZywg
InJhbmRvbSIpKQorICAgICAgICByZXR1cm4gUkFORE9NX0RPTUlEOyAvKiBsaWJ4bCB3aWxsIGNo
b29zZSBhIHJhbmRvbSB2YWx1ZSAqLworCisgICAgcmV0dXJuIHBhcnNlX2ludChhcmcpOworfQog
CiAvKgogICogTG9jYWwgdmFyaWFibGVzOgpkaWZmIC0tZ2l0IGEvdG9vbHMveGwveGxfcGFyc2Uu
aCBiL3Rvb2xzL3hsL3hsX3BhcnNlLmgKaW5kZXggYmFiMjg2MWY4Yy4uM2E4MjcyMmY5MiAxMDA2
NDQKLS0tIGEvdG9vbHMveGwveGxfcGFyc2UuaAorKysgYi90b29scy94bC94bF9wYXJzZS5oCkBA
IC01Niw2ICs1Niw4IEBAIHZvaWQgdHJpbShjaGFyX3ByZWRpY2F0ZV90IHByZWRpY2F0ZSwgY29u
c3QgY2hhciAqaW5wdXQsIGNoYXIgKipvdXRwdXQpOwogCiBjb25zdCBjaGFyICpnZXRfYWN0aW9u
X29uX3NodXRkb3duX25hbWUobGlieGxfYWN0aW9uX29uX3NodXRkb3duIGEpOwogCitpbnQgcGFy
c2VfZG9taWQoY29uc3QgY2hhciAqc3RyKTsKKwogI2VuZGlmCS8qIFhMX1BBUlNFX0ggKi8KIAog
LyoKZGlmZiAtLWdpdCBhL3Rvb2xzL3hsL3hsX3NhdmVyZXN0b3JlLmMgYi90b29scy94bC94bF9z
YXZlcmVzdG9yZS5jCmluZGV4IDliZTAzM2ZlNjUuLjRiZTBhZmEwNGMgMTAwNjQ0Ci0tLSBhL3Rv
b2xzL3hsL3hsX3NhdmVyZXN0b3JlLmMKKysrIGIvdG9vbHMveGwveGxfc2F2ZXJlc3RvcmUuYwpA
QCAtMTY0LDE3ICsxNjQsMjIgQEAgaW50IG1haW5fcmVzdG9yZShpbnQgYXJnYywgY2hhciAqKmFy
Z3YpCiB7CiAgICAgY29uc3QgY2hhciAqY2hlY2twb2ludF9maWxlID0gTlVMTDsKICAgICBjb25z
dCBjaGFyICpjb25maWdfZmlsZSA9IE5VTEw7CisgICAgY29uc3QgY2hhciAqZG9taWQgPSBOVUxM
OwogICAgIHN0cnVjdCBkb21haW5fY3JlYXRlIGRvbV9pbmZvOwogICAgIGludCBwYXVzZWQgPSAw
LCBkZWJ1ZyA9IDAsIGRhZW1vbml6ZSA9IDEsIG1vbml0b3IgPSAxLAogICAgICAgICBjb25zb2xl
X2F1dG9jb25uZWN0ID0gMCwgdm5jID0gMCwgdm5jYXV0b3Bhc3MgPSAwOwogICAgIGludCBvcHQs
IHJjOwogICAgIHN0YXRpYyBzdHJ1Y3Qgb3B0aW9uIG9wdHNbXSA9IHsKKyAgICAgICAgeyJkb21p
ZCIsIDEsIDAsICdEJ30sCiAgICAgICAgIHsidm5jdmlld2VyIiwgMCwgMCwgJ1YnfSwKICAgICAg
ICAgeyJ2bmN2aWV3ZXItYXV0b3Bhc3MiLCAwLCAwLCAnQSd9LAogICAgICAgICBDT01NT05fTE9O
R19PUFRTCiAgICAgfTsKIAotICAgIFNXSVRDSF9GT1JFQUNIX09QVChvcHQsICJGY3BkZVZBIiwg
b3B0cywgInJlc3RvcmUiLCAxKSB7CisgICAgU1dJVENIX0ZPUkVBQ0hfT1BUKG9wdCwgIkQ6RmNw
ZGVWQSIsIG9wdHMsICJyZXN0b3JlIiwgMSkgeworICAgIGNhc2UgJ0QnOgorICAgICAgICBkb21p
ZCA9IG9wdGFyZzsKKyAgICAgICAgYnJlYWs7CiAgICAgY2FzZSAnYyc6CiAgICAgICAgIGNvbnNv
bGVfYXV0b2Nvbm5lY3QgPSAxOwogICAgICAgICBicmVhazsKQEAgLTIxMCw2ICsyMTUsOCBAQCBp
bnQgbWFpbl9yZXN0b3JlKGludCBhcmdjLCBjaGFyICoqYXJndikKICAgICB9CiAKICAgICBtZW1z
ZXQoJmRvbV9pbmZvLCAwLCBzaXplb2YoZG9tX2luZm8pKTsKKworICAgIGRvbV9pbmZvLmRvbWlk
ID0gcGFyc2VfZG9taWQoZG9taWQpOwogICAgIGRvbV9pbmZvLmRlYnVnID0gZGVidWc7CiAgICAg
ZG9tX2luZm8uZGFlbW9uaXplID0gZGFlbW9uaXplOwogICAgIGRvbV9pbmZvLm1vbml0b3IgPSBt
b25pdG9yOwpkaWZmIC0tZ2l0IGEvdG9vbHMveGwveGxfdm1jb250cm9sLmMgYi90b29scy94bC94
bF92bWNvbnRyb2wuYwppbmRleCBlNTIwYjFkYTc5Li5kODFhNjI5YTVhIDEwMDY0NAotLS0gYS90
b29scy94bC94bF92bWNvbnRyb2wuYworKysgYi90b29scy94bC94bF92bWNvbnRyb2wuYwpAQCAt
NjQxLDcgKzY0MSw3IEBAIHN0YXRpYyB2b2lkIGF1dG9jb25uZWN0X2NvbnNvbGUobGlieGxfY3R4
ICpjdHhfaWdub3JlZCwKIAogaW50IGNyZWF0ZV9kb21haW4oc3RydWN0IGRvbWFpbl9jcmVhdGUg
KmRvbV9pbmZvKQogewotICAgIHVpbnQzMl90IGRvbWlkID0gSU5WQUxJRF9ET01JRDsKKyAgICB1
aW50MzJfdCBkb21pZCA9IGRvbV9pbmZvLT5kb21pZDsKIAogICAgIGxpYnhsX2RvbWFpbl9jb25m
aWcgZF9jb25maWc7CiAKQEAgLTY2MCw2ICs2NjAsNyBAQCBpbnQgY3JlYXRlX2RvbWFpbihzdHJ1
Y3QgZG9tYWluX2NyZWF0ZSAqZG9tX2luZm8pCiAKICAgICBpbnQgaTsKICAgICBpbnQgbmVlZF9k
YWVtb24gPSBkYWVtb25pemU7CisgICAgY29uc3QgY2hhciAqb3A7CiAgICAgaW50IHJldCwgcmM7
CiAgICAgbGlieGxfZXZnZW5fZG9tYWluX2RlYXRoICpkZWF0aHcgPSBOVUxMOwogICAgIGxpYnhs
X2V2Z2VuX2Rpc2tfZWplY3QgKipkaXNrd3MgPSBOVUxMOyAvKiBvbmUgcGVyIGRpc2sgKi8KQEAg
LTg3Miw4ICs4NzMsNiBAQCBpbnQgY3JlYXRlX2RvbWFpbihzdHJ1Y3QgZG9tYWluX2NyZWF0ZSAq
ZG9tX2luZm8pCiAgICAgICAgIGdvdG8gb3V0OwogCiBzdGFydDoKLSAgICBhc3NlcnQoZG9taWQg
PT0gSU5WQUxJRF9ET01JRCk7Ci0KICAgICByYyA9IGFjcXVpcmVfbG9jaygpOwogICAgIGlmIChy
YyA8IDApCiAgICAgICAgIGdvdG8gZXJyb3Jfb3V0OwpAQCAtOTExLDYgKzkxMCw3IEBAIHN0YXJ0
OgogICAgICAgICBsaWJ4bF9kZWZib29sX3NldCgmcGFyYW1zLnVzZXJzcGFjZV9jb2xvX3Byb3h5
LAogICAgICAgICAgICAgICAgICAgICAgICAgICBkb21faW5mby0+dXNlcnNwYWNlX2NvbG9fcHJv
eHkpOwogCisgICAgICAgIG9wID0gInJlc3RvcmUiOwogICAgICAgICByZXQgPSBsaWJ4bF9kb21h
aW5fY3JlYXRlX3Jlc3RvcmUoY3R4LCAmZF9jb25maWcsCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAmZG9taWQsIHJlc3RvcmVfZmQsCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kX2JhY2tfZmQsICZwYXJhbXMsCkBAIC05MjUs
MTYgKzkyNSwyMSBAQCBzdGFydDoKICAgICAgICAgcmVzdG9yaW5nID0gMDsKICAgICB9IGVsc2Ug
aWYgKGRvbWlkX3NvZnRfcmVzZXQgIT0gSU5WQUxJRF9ET01JRCkgewogICAgICAgICAvKiBEbyBz
b2Z0IHJlc2V0LiAqLworICAgICAgICBvcCA9ICJzb2Z0IHJlc2V0IjsKICAgICAgICAgcmV0ID0g
bGlieGxfZG9tYWluX3NvZnRfcmVzZXQoY3R4LCAmZF9jb25maWcsIGRvbWlkX3NvZnRfcmVzZXQs
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIGF1dG9jb25uZWN0X2Nv
bnNvbGVfaG93KTsKICAgICAgICAgZG9taWQgPSBkb21pZF9zb2Z0X3Jlc2V0OwogICAgICAgICBk
b21pZF9zb2Z0X3Jlc2V0ID0gSU5WQUxJRF9ET01JRDsKICAgICB9IGVsc2UgeworICAgICAgICBv
cCA9ICJjcmVhdGUiOwogICAgICAgICByZXQgPSBsaWJ4bF9kb21haW5fY3JlYXRlX25ldyhjdHgs
ICZkX2NvbmZpZywgJmRvbWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAwLCBhdXRvY29ubmVjdF9jb25zb2xlX2hvdyk7CiAgICAgfQotICAgIGlmICggcmV0ICkKKyAg
ICBpZiAocmV0KSB7CisgICAgICAgIGZwcmludGYoc3RkZXJyLCAiJXMgb3BlcmF0aW9uIGZhaWxl
ZDogJXNcbiIsIG9wLAorICAgICAgICAgICAgICAgIGxpYnhsX2Vycm9yX3RvX3N0cmluZyhyZXQp
KTsKICAgICAgICAgZ290byBlcnJvcl9vdXQ7CisgICAgfQogCiAgICAgcmVsZWFzZV9sb2NrKCk7
CiAKQEAgLTExMTEsNyArMTExNiw3IEBAIHN0YXJ0OgogCiBlcnJvcl9vdXQ6CiAgICAgcmVsZWFz
ZV9sb2NrKCk7Ci0gICAgaWYgKGxpYnhsX2RvbWlkX3ZhbGlkX2d1ZXN0KGRvbWlkKSkgeworICAg
IGlmIChyZXQgIT0gRVJST1JfREVWSUNFX0VYSVNUUyAmJiBsaWJ4bF9kb21pZF92YWxpZF9ndWVz
dChkb21pZCkpIHsKICAgICAgICAgbGlieGxfZG9tYWluX2Rlc3Ryb3koY3R4LCBkb21pZCwgMCk7
CiAgICAgICAgIGRvbWlkID0gSU5WQUxJRF9ET01JRDsKICAgICB9CkBAIC0xMTUzLDExICsxMTU4
LDEzIEBAIG91dDoKIGludCBtYWluX2NyZWF0ZShpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiB7CiAg
ICAgY29uc3QgY2hhciAqZmlsZW5hbWUgPSBOVUxMOworICAgIGNvbnN0IGNoYXIgKmRvbWlkID0g
TlVMTDsKICAgICBzdHJ1Y3QgZG9tYWluX2NyZWF0ZSBkb21faW5mbzsKICAgICBpbnQgcGF1c2Vk
ID0gMCwgZGVidWcgPSAwLCBkYWVtb25pemUgPSAxLCBjb25zb2xlX2F1dG9jb25uZWN0ID0gMCwK
ICAgICAgICAgcXVpZXQgPSAwLCBtb25pdG9yID0gMSwgdm5jID0gMCwgdm5jYXV0b3Bhc3MgPSAw
LCBpZ25vcmVfbWFza3MgPSAwOwogICAgIGludCBvcHQsIHJjOwogICAgIHN0YXRpYyBzdHJ1Y3Qg
b3B0aW9uIG9wdHNbXSA9IHsKKyAgICAgICAgeyJkb21pZCIsIDEsIDAsICdEJ30sCiAgICAgICAg
IHsiZHJ5cnVuIiwgMCwgMCwgJ24nfSwKICAgICAgICAgeyJxdWlldCIsIDAsIDAsICdxJ30sCiAg
ICAgICAgIHsiZGVmY29uZmlnIiwgMSwgMCwgJ2YnfSwKQEAgLTExNzQsNyArMTE4MSwxMCBAQCBp
bnQgbWFpbl9jcmVhdGUoaW50IGFyZ2MsIGNoYXIgKiphcmd2KQogICAgICAgICBhcmdjLS07IGFy
Z3YrKzsKICAgICB9CiAKLSAgICBTV0lUQ0hfRk9SRUFDSF9PUFQob3B0LCAiRm5xZjpwY2RlVkFp
Iiwgb3B0cywgImNyZWF0ZSIsIDApIHsKKyAgICBTV0lUQ0hfRk9SRUFDSF9PUFQob3B0LCAiRDpG
bnFmOnBjZGVWQWkiLCBvcHRzLCAiY3JlYXRlIiwgMCkgeworICAgIGNhc2UgJ0QnOgorICAgICAg
ICBkb21pZCA9IG9wdGFyZzsKKyAgICAgICAgYnJlYWs7CiAgICAgY2FzZSAnZic6CiAgICAgICAg
IGZpbGVuYW1lID0gb3B0YXJnOwogICAgICAgICBicmVhazsKQEAgLTEyMjYsNiArMTIzNiw3IEBA
IGludCBtYWluX2NyZWF0ZShpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAgICAgICAgIH0KICAgICB9
CiAKKyAgICBkb21faW5mby5kb21pZCA9IHBhcnNlX2RvbWlkKGRvbWlkKTsKICAgICBkb21faW5m
by5kZWJ1ZyA9IGRlYnVnOwogICAgIGRvbV9pbmZvLmRhZW1vbml6ZSA9IGRhZW1vbml6ZTsKICAg
ICBkb21faW5mby5tb25pdG9yID0gbW9uaXRvcjsKLS0gCjIuMjAuMQoKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QK
WGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5v
cmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

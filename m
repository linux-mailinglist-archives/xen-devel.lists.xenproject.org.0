Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 41CB87FECD
	for <lists+xen-devel@lfdr.de>; Fri,  2 Aug 2019 18:41:58 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1htab8-0004EO-Df; Fri, 02 Aug 2019 16:40:06 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=/l75=V6=gmail.com=olekstysh@srs-us1.protection.inumbo.net>)
 id 1htab6-00045a-K6
 for xen-devel@lists.xenproject.org; Fri, 02 Aug 2019 16:40:04 +0000
X-Inumbo-ID: 2ce3f0c6-b544-11e9-8980-bc764e045a96
Received: from mail-lj1-x242.google.com (unknown [2a00:1450:4864:20::242])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 2ce3f0c6-b544-11e9-8980-bc764e045a96;
 Fri, 02 Aug 2019 16:40:03 +0000 (UTC)
Received: by mail-lj1-x242.google.com with SMTP id m8so39844750lji.7
 for <xen-devel@lists.xenproject.org>; Fri, 02 Aug 2019 09:40:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=lrPG3Jo0g8IN2TUDjww3PLkkrQlh1VPumDr3dhWVCkk=;
 b=AzXW2EXtSUupxXxNaZI/YiFCMQp5KsnR3CSGBrX0/FWxjqteAg/NJcHGoV39p22wEK
 ZD1MTM7ntirqrOURfmnyLK9VYfVZ4QjVVWA3GSZixvoqzQluRbL5NDAcZfI4533z/yg6
 nwC16orac8Zixl0zqjfcbcoTuTGHcqiW2M+/bGQ0VwczyuHcclR58k/nq4Ue1ksvM9Di
 s7JdMSCJ5Snb+aRGsVS6+OIY6AfP+260RktlLTWmLcWEZDzrBCc5dcSm7SjaQCbCjprn
 k2NSSPQjJy50L5qCLDT9CnZF3wye4TN6MAUkpTxKuFORVDnXAQnoIjFIp4kcS1t7/vmA
 Ye9w==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=lrPG3Jo0g8IN2TUDjww3PLkkrQlh1VPumDr3dhWVCkk=;
 b=OTo5/2hgjgku6DmcOp+j96Ad9FqErIQQuXLHTRoTaXk1dWDwbqnKRTUpWkvISGb6fb
 oyh51n3UNAjx7iYRV6bmqWB5ZzXqhpejHLqZPnHaQ/5cZC35h29Z8/8OB2eneQxMvE3i
 JLMe0m3AjiYhWaMe7bvA43593pKk5P/ZBZm9daB1CQolhvqmjstMdOBmvLCF9VTyB6tA
 Fdr/0SgIe1mFZuAiWDngwiBilySxdbcfao1iw0ZwFXdPg7mEzV1RpkHbWac413ajsHMY
 Cu1VGAxBp7V0Ex4mank0xXZlqFD53GG1zdTtgQg3SIOGbn0g+7Gwk9XnNmHvfOiia+PM
 HaoA==
X-Gm-Message-State: APjAAAUZ4QfG5/bV3K5zHsp1JLpgFoafHxCXMVlPDXRrO0LqfyOLw/HZ
 HKJ+cHRdE/Lq6CQmH5YV4PN6FQkpii8=
X-Google-Smtp-Source: APXvYqxE60L7NqElsqqOOQetv4stCpru4Ah77SbcciphJ2rp20lCkcoA+xv/WPHXFPa78agvCxlCuA==
X-Received: by 2002:a2e:9f0d:: with SMTP id u13mr25560786ljk.186.1564764002116; 
 Fri, 02 Aug 2019 09:40:02 -0700 (PDT)
Received: from otyshchenko.kyiv.epam.com (ll-22.209.223.85.sovam.net.ua.
 [85.223.209.22])
 by smtp.gmail.com with ESMTPSA id q6sm15378998lji.70.2019.08.02.09.40.01
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
 Fri, 02 Aug 2019 09:40:01 -0700 (PDT)
From: Oleksandr Tyshchenko <olekstysh@gmail.com>
To: xen-devel@lists.xenproject.org
Date: Fri,  2 Aug 2019 19:39:44 +0300
Message-Id: <1564763985-20312-6-git-send-email-olekstysh@gmail.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1564763985-20312-1-git-send-email-olekstysh@gmail.com>
References: <1564763985-20312-1-git-send-email-olekstysh@gmail.com>
Subject: [Xen-devel] [PATCH V2 5/6] iommu/arm: Introduce iommu_add_dt_device
 API
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Oleksandr Tyshchenko <oleksandr_tyshchenko@epam.com>, julien.grall@arm.com,
 sstabellini@kernel.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogT2xla3NhbmRyIFR5c2hjaGVua28gPG9sZWtzYW5kcl90eXNoY2hlbmtvQGVwYW0uY29t
PgoKVGhpcyBwYXRjaCBhZGRzIG5ldyBpb21tdV9hZGRfZHRfZGV2aWNlIEFQSSBmb3IgYWRkaW5n
IERUIGRldmljZQp0byB0aGUgSU9NTVUgdXNpbmcgZ2VuZXJpYyBJT01NVSBEVCBiaW5kaW5nIFsx
XSBhbmQgcHJldmlvdXNseQphZGRlZCAiaW9tbXVfZndzcGVjIiBzdXBwb3J0LgoKTmV3IGZ1bmN0
aW9uIHBhcnNlcyB0aGUgRFQgYmluZGluZywgcHJlcGFyZXMgImRldi0+aW9tbXVfZndzcGVjIgp3
aXRoIGNvcnJlY3QgaW5mb3JtYXRpb24gYW5kIGNhbGxzIHRoZSBJT01NVSBkcml2ZXIgdXNpbmcg
ImFkZF9kZXZpY2UiCmNhbGxiYWNrIHRvIHJlZ2lzdGVyIG5ldyBEVCBkZXZpY2UuClRoZSBJT01N
VSBkcml2ZXIncyByZXNwb25zaWJpbGl0eSBpcyB0byBjaGVjayB3aGV0aGVyICJkZXYtPmlvbW11
X2Z3c3BlYyIKaXMgaW5pdGlhbGl6ZWQgYW5kIG1hcmsgdGhhdCBkZXZpY2UgYXMgcHJvdGVjdGVk
LgoKVGhlIGFkZGl0aW9uYWwgYmVuZWZpdCBoZXJlIGlzIHRvIGF2b2lkIHRvIGdvIHRocm91Z2gg
dGhlIHdob2xlIERUCm11bHRpcGxlIHRpbWVzIGluIElPTU1VIGRyaXZlciB0cnlpbmcgdG8gbG9j
YXRlIG1hc3RlciBkZXZpY2VzIHdoaWNoCmJlbG9uZyB0byBlYWNoIElPTU1VIGRldmljZSBiZWlu
ZyBwcm9iZWQuCgpUaGUgdXBjb21pbmcgSVBNTVUgZHJpdmVyIHdpbGwgaGF2ZSAiYWRkX2Rldmlj
ZSIgY2FsbGJhY2sgaW1wbGVtZW50ZWQuCgpJIGhvcGUsIHRoaXMgcGF0Y2ggd29uJ3QgYnJlYWsg
U01NVSBkcml2ZXIncyBmdW5jdGlvbmFsaXR5LAp3aGljaCBkb2Vzbid0IGhhdmUgdGhpcyBjYWxs
YmFjayBpbXBsZW1lbnRlZC4KClsxXSBodHRwczovL3d3dy5rZXJuZWwub3JnL2RvYy9Eb2N1bWVu
dGF0aW9uL2RldmljZXRyZWUvYmluZGluZ3MvaW9tbXUvaW9tbXUudHh0CgpTaWduZWQtb2ZmLWJ5
OiBPbGVrc2FuZHIgVHlzaGNoZW5rbyA8b2xla3NhbmRyX3R5c2hjaGVua29AZXBhbS5jb20+Ci0t
LQogeGVuL2FyY2gvYXJtL2RvbWFpbl9idWlsZC5jICAgICAgICAgfCAxMiArKysrKysrKysrCiB4
ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hcm0vaW9tbXUuYyB8IDQ1ICsrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysKIHhlbi9pbmNsdWRlL2FzbS1hcm0vaW9tbXUuaCAgICAgICAg
IHwgIDMgKysrCiAzIGZpbGVzIGNoYW5nZWQsIDYwIGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQg
YS94ZW4vYXJjaC9hcm0vZG9tYWluX2J1aWxkLmMgYi94ZW4vYXJjaC9hcm0vZG9tYWluX2J1aWxk
LmMKaW5kZXggZDk4MzY3Ny4uZDY3ZjdkNCAxMDA2NDQKLS0tIGEveGVuL2FyY2gvYXJtL2RvbWFp
bl9idWlsZC5jCisrKyBiL3hlbi9hcmNoL2FybS9kb21haW5fYnVpbGQuYwpAQCAtMTI0MSw2ICsx
MjQxLDE4IEBAIHN0YXRpYyBpbnQgX19pbml0IGhhbmRsZV9kZXZpY2Uoc3RydWN0IGRvbWFpbiAq
ZCwgc3RydWN0IGR0X2RldmljZV9ub2RlICpkZXYsCiAgICAgdTY0IGFkZHIsIHNpemU7CiAgICAg
Ym9vbCBuZWVkX21hcHBpbmcgPSAhZHRfZGV2aWNlX2Zvcl9wYXNzdGhyb3VnaChkZXYpOwogCisg
ICAgaWYgKCBkdF9wYXJzZV9waGFuZGxlKGRldiwgImlvbW11cyIsIDApICkKKyAgICB7CisgICAg
ICAgIGR0X2RwcmludGsoIiVzIGFkZCB0byBpb21tdVxuIiwgZHRfbm9kZV9mdWxsX25hbWUoZGV2
KSk7CisgICAgICAgIHJlcyA9IGlvbW11X2FkZF9kdF9kZXZpY2UoZGV2KTsKKyAgICAgICAgaWYg
KCByZXMgKQorICAgICAgICB7CisgICAgICAgICAgICBwcmludGsoWEVOTE9HX0VSUiAiRmFpbGVk
IHRvIGFkZCAlcyB0byB0aGUgSU9NTVVcbiIsCisgICAgICAgICAgICAgICAgICAgZHRfbm9kZV9m
dWxsX25hbWUoZGV2KSk7CisgICAgICAgICAgICByZXR1cm4gcmVzOworICAgICAgICB9CisgICAg
fQorCiAgICAgbmlycSA9IGR0X251bWJlcl9vZl9pcnEoZGV2KTsKICAgICBuYWRkciA9IGR0X251
bWJlcl9vZl9hZGRyZXNzKGRldik7CiAKZGlmZiAtLWdpdCBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL2FybS9pb21tdS5jIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYXJtL2lvbW11LmMKaW5k
ZXggMzE5NTkxOS4uMTk1MTZhZiAxMDA2NDQKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gv
YXJtL2lvbW11LmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYXJtL2lvbW11LmMKQEAg
LTExMywzICsxMTMsNDggQEAgaW50IGFyY2hfaW9tbXVfcG9wdWxhdGVfcGFnZV90YWJsZShzdHJ1
Y3QgZG9tYWluICpkKQogdm9pZCBfX2h3ZG9tX2luaXQgYXJjaF9pb21tdV9od2RvbV9pbml0KHN0
cnVjdCBkb21haW4gKmQpCiB7CiB9CisKK2ludCBfX2luaXQgaW9tbXVfYWRkX2R0X2RldmljZShz
dHJ1Y3QgZHRfZGV2aWNlX25vZGUgKm5wKQoreworICAgIGNvbnN0IHN0cnVjdCBpb21tdV9vcHMg
Km9wcyA9IGlvbW11X2dldF9vcHMoKTsKKyAgICBzdHJ1Y3QgZHRfcGhhbmRsZV9hcmdzIGlvbW11
X3NwZWM7CisgICAgc3RydWN0IGRldmljZSAqZGV2ID0gZHRfdG9fZGV2KG5wKTsKKyAgICBpbnQg
cmMgPSAxLCBpbmRleCA9IDA7CisKKyAgICBpZiAoICFpb21tdV9lbmFibGVkIHx8ICFvcHMgfHwg
IW9wcy0+YWRkX2RldmljZSApCisgICAgICAgIHJldHVybiAwOworCisgICAgaWYgKCBkZXZfaW9t
bXVfZndzcGVjX2dldChkZXYpICkKKyAgICAgICAgcmV0dXJuIC1FRVhJU1Q7CisKKyAgICAvKiBB
Y2NvcmRpbmcgdG8gdGhlIERvY3VtZW50YXRpb24vZGV2aWNldHJlZS9iaW5kaW5ncy9pb21tdS9p
b21tdS50eHQgKi8KKyAgICB3aGlsZSAoICFkdF9wYXJzZV9waGFuZGxlX3dpdGhfYXJncyhucCwg
ImlvbW11cyIsICIjaW9tbXUtY2VsbHMiLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGluZGV4LCAmaW9tbXVfc3BlYykgKQorICAgIHsKKyAgICAgICAgaWYgKCAhZHRf
ZGV2aWNlX2lzX2F2YWlsYWJsZShpb21tdV9zcGVjLm5wKSApCisgICAgICAgICAgICBicmVhazsK
KworICAgICAgICByYyA9IGlvbW11X2Z3c3BlY19pbml0KGRldiwgJmlvbW11X3NwZWMubnAtPmRl
dik7CisgICAgICAgIGlmICggcmMgKQorICAgICAgICAgICAgYnJlYWs7CisKKyAgICAgICAgcmMg
PSBpb21tdV9md3NwZWNfYWRkX2lkcyhkZXYsIGlvbW11X3NwZWMuYXJncywgMSk7CisgICAgICAg
IGlmICggcmMgKQorICAgICAgICAgICAgYnJlYWs7CisKKyAgICAgICAgaW5kZXgrKzsKKyAgICB9
CisKKyAgICAvKgorICAgICAqIEFkZCBEVCBkZXZpY2UgdG8gdGhlIElPTU1VIGlmIGxhdHRlciBp
cyBwcmVzZW50IGFuZCBhdmFpbGFibGUuCisgICAgICogVGhlIElPTU1VIGRyaXZlcidzIHJlc3Bv
bnNpYmlsaXR5IGlzIHRvIGNoZWNrIHdoZXRoZXIgZGV2LT5pb21tdV9md3NwZWMKKyAgICAgKiBm
aWVsZCBpcyBpbml0aWFsaXplZCBhbmQgbWFyayB0aGF0IGRldmljZSBhcyBwcm90ZWN0ZWQuCisg
ICAgICovCisgICAgaWYgKCAhcmMgKQorICAgICAgICByYyA9IG9wcy0+YWRkX2RldmljZSgwLCBk
ZXYpOworCisgICAgaWYgKCByYyA8IDAgKQorICAgICAgICBpb21tdV9md3NwZWNfZnJlZShkZXYp
OworCisgICAgcmV0dXJuIHJjIDwgMCA/IHJjIDogMDsKK30KZGlmZiAtLWdpdCBhL3hlbi9pbmNs
dWRlL2FzbS1hcm0vaW9tbXUuaCBiL3hlbi9pbmNsdWRlL2FzbS1hcm0vaW9tbXUuaAppbmRleCAx
ODUzYmQ5Li4wNmIwN2ZhIDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9hc20tYXJtL2lvbW11LmgK
KysrIGIveGVuL2luY2x1ZGUvYXNtLWFybS9pb21tdS5oCkBAIC0yOCw2ICsyOCw5IEBAIHN0cnVj
dCBhcmNoX2lvbW11CiBjb25zdCBzdHJ1Y3QgaW9tbXVfb3BzICppb21tdV9nZXRfb3BzKHZvaWQp
Owogdm9pZCBpb21tdV9zZXRfb3BzKGNvbnN0IHN0cnVjdCBpb21tdV9vcHMgKm9wcyk7CiAKKy8q
IGhlbHBlciB0byBhZGQgRFQgZGV2aWNlIHRvIHRoZSBJT01NVSAqLworaW50IGlvbW11X2FkZF9k
dF9kZXZpY2Uoc3RydWN0IGR0X2RldmljZV9ub2RlICpucCk7CisKIC8qIG1hcHBpbmcgaGVscGVy
cyAqLwogaW50IF9fbXVzdF9jaGVjayBhcm1faW9tbXVfbWFwX3BhZ2Uoc3RydWN0IGRvbWFpbiAq
ZCwgZGZuX3QgZGZuLCBtZm5fdCBtZm4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB1bnNpZ25lZCBpbnQgZmxhZ3MsCi0tIAoyLjcuNAoKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRl
dmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFp
bG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

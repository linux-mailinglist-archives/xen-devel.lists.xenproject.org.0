Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 949734AEAF
	for <lists+xen-devel@lfdr.de>; Wed, 19 Jun 2019 01:23:08 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hdNOu-0004sL-4K; Tue, 18 Jun 2019 23:20:28 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=PyOf=UR=kernel.org=sstabellini@srs-us1.protection.inumbo.net>)
 id 1hdNOr-0004rb-PF
 for xen-devel@lists.xenproject.org; Tue, 18 Jun 2019 23:20:25 +0000
X-Inumbo-ID: a6a40978-921f-11e9-a5e4-f7cb9184a011
Received: from mail.kernel.org (unknown [198.145.29.99])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id a6a40978-921f-11e9-a5e4-f7cb9184a011;
 Tue, 18 Jun 2019 23:20:25 +0000 (UTC)
Received: from sstabellini-ThinkPad-T480s.hsd1.ca.comcast.net
 (c-67-164-102-47.hsd1.ca.comcast.net [67.164.102.47])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 6A4B721479;
 Tue, 18 Jun 2019 23:20:24 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=default; t=1560900024;
 bh=2DrpelDctcvXkXSvHa1gX5/UiYIw+GVWWZ3Km79MV/0=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=ESGcy4hAbHSqng2VDwVDoszRU8vDRorkt/bESRqeqVzbXB7Htm3JLvFlRQ3snD6Gl
 kAsCkwQN+kJ2PmHkFt9CRpoRKXV88Jd4jIo4EjflVqU+oIoDPAlQKTQJzjYKVV5dzK
 +gElHPY/nhJhw78Dw8XfevJbVXxsjUgI0luNleQQ=
From: Stefano Stabellini <sstabellini@kernel.org>
To: xen-devel@lists.xenproject.org
Date: Tue, 18 Jun 2019 16:20:16 -0700
Message-Id: <20190618232019.26425-2-sstabellini@kernel.org>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <alpine.DEB.2.21.1906181618130.2072@sstabellini-ThinkPad-T480s>
References: <alpine.DEB.2.21.1906181618130.2072@sstabellini-ThinkPad-T480s>
Subject: [Xen-devel] [PATCH v3 2/5] xen: extend XEN_DOMCTL_memory_mapping to
 handle memory policy
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <stefanos@xilinx.com>, julien.grall@arm.com,
 sstabellini@kernel.org, JBeulich@suse.com, andrew.cooper3@citrix.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

UmV1c2UgdGhlIGV4aXN0aW5nIHBhZGRpbmcgZmllbGQgdG8gcGFzcyBtZW1vcnkgcG9saWN5IGlu
Zm9ybWF0aW9uLiBPbgpBcm0sIHRoZSBjYWxsZXIgY2FuIHNwZWNpZnkgd2hldGhlciB0aGUgbWVt
b3J5IHNob3VsZCBiZSBtYXBwZWQgYXMKRGV2aWNlLW5HblJFIChEZXZpY2UgTWVtb3J5IG9uIEFy
bXY3KSBhdCBzdGFnZS0yLCB3aGljaCBpcyB0aGUgZGVmYXVsdAphbmQgdGhlIG9ubHkgcG9zc2li
aWxpdHkgdG9kYXksIG9yIGNhY2hlYWJsZSBtZW1vcnkgd3JpdGUtYmFjay4gVGhlCnJlc3VsdGlu
ZyBtZW1vcnkgYXR0cmlidXRlcyB3aWxsIGJlIGEgY29tYmluYXRpb24gb2Ygc3RhZ2UtMiBhbmQg
c3RhZ2UtMQptZW1vcnkgYXR0cmlidXRlczogaXQgd2lsbCBhY3R1YWxseSBiZSB0aGUgc3Ryb25n
ZXN0IGJldHdlZW4gdGhlIDIKc3RhZ2VzIGF0dHJpYnV0ZXMuCgpPbiB4ODYsIHRoZSBvbmx5IG9w
dGlvbiBpcyB1bmNhY2hhYmxlLiBUaGUgY3VycmVudCBiZWhhdmlvciBiZWNvbWVzIHRoZQpkZWZh
dWx0IChudW1lcmljYWxseSAnMCcpLiBBbHNvIGV4cGxpY2l0ZWx5IHNldCB0aGUgbWVtb3J5X3Bv
bGljeSBmaWVsZAp0byAwIGluIGxpYnhjLgoKT24gQVJNLCBtYXAgRGV2aWNlLW5HblJFIGFzIHAy
bV9tbWlvX2RpcmVjdF9kZXYgKGFzIGl0IGlzIGFscmVhZHkgZG9uZQp0b2RheSkgYW5kIFdCIGNh
Y2hlYWJsZSBtZW1vcnkgYXMgcDJtX21taW9fZGlyZWN0X2MuCgpPbiB4ODYsIHJldHVybiBlcnJv
ciBpZiB0aGUgbWVtb3J5IHBvbGljeSByZXF1ZXN0ZWQgaXMgbm90Ck1FTU9SWV9QT0xJQ1lfWDg2
X1VDX01JTlVTLgoKU2lnbmVkLW9mZi1ieTogU3RlZmFubyBTdGFiZWxsaW5pIDxzdGVmYW5vc0B4
aWxpbnguY29tPgpDQzogSkJldWxpY2hAc3VzZS5jb20KQ0M6IGFuZHJldy5jb29wZXIzQGNpdHJp
eC5jb20KCi0tLQoKQW5kcmV3IHN1Z2dlc3RlZCB0byByZW1vdmUgTUVNT1JZX1BPTElDWV9YODZf
VUNfTUlOVVMgY29tcGxldGVseS4KSWYgdGhhdCdzIHRoZSBjb25zZW5zdXMgSSBhbSBoYXBweSB0
byByZXNwaW4gdGhlIHNlcmllcyByZW1vdmluZyBjb2RlLgoKCkNoYW5nZXMgaW4gdjM6Ci0gZXJy
b3IgaGFuZGxpbmcgaW4gZGVmYXVsdCBsYWJlbCBvZiB0aGUgc3dpdGNoCi0gc2V0IG1lbW9yeV9w
b2xpY3kgdG8gMCBpbiBsaWJ4YwotIGltcHJvdmUgY29tbWl0IG1lc3NhZ2UKLSBpbXByb3ZlIGNv
bW1lbnRzCi0gcy9EZXZpY2UtbkdSRS9EZXZpY2UtbkduUkUvZwotIGFkZCBpbi1jb2RlIGNvbW1l
bnQKLSBzL01FTU9SWV9QT0xJQ1lfWDg2X1VDL01FTU9SWV9QT0xJQ1lfWDg2X1VDX01JTlVTL2cK
LSAjaWZkZWYgaHlwZXJjYWxsIGRlZmluZXMgYWNjb3JkaW5nIHRvIGFyY2gKCkNoYW5nZXMgaW4g
djI6Ci0gcmViYXNlCi0gdXNlIHAybV9tbWlvX2RpcmVjdF9jCi0gdXNlIEVPUE5PVFNVUFAKLSBy
ZW5hbWUgY2FjaGVfcG9saWN5IHRvIG1lbW9yeSBwb2xpY3kKLSByZW5hbWUgTUVNT1JZX1BPTElD
WV9ERVZNRU0gdG8gTUVNT1JZX1BPTElDWV9BUk1fREVWX25HUkUKLSByZW5hbWUgTUVNT1JZX1BP
TElDWV9NRU1PUlkgdG8gTUVNT1JZX1BPTElDWV9BUk1fTUVNX1dCCi0gYWRkIE1FTU9SWV9QT0xJ
Q1lfWDg2X1VDCi0gYWRkIE1FTU9SWV9QT0xJQ1lfREVGQVVMVCBhbmQgdXNlIGl0Ci0tLQogdG9v
bHMvbGlieGMveGNfZG9tYWluLmMgICAgIHwgIDEgKwogeGVuL2NvbW1vbi9kb21jdGwuYyAgICAg
ICAgIHwgMjQgKysrKysrKysrKysrKysrKysrKysrKy0tCiB4ZW4vaW5jbHVkZS9wdWJsaWMvZG9t
Y3RsLmggfCAyMyArKysrKysrKysrKysrKysrKysrKysrLQogMyBmaWxlcyBjaGFuZ2VkLCA0NSBp
bnNlcnRpb25zKCspLCAzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhjL3hj
X2RvbWFpbi5jIGIvdG9vbHMvbGlieGMveGNfZG9tYWluLmMKaW5kZXggMDVkNzcxZjJjZS4uODUz
MTI5ODU2MyAxMDA2NDQKLS0tIGEvdG9vbHMvbGlieGMveGNfZG9tYWluLmMKKysrIGIvdG9vbHMv
bGlieGMveGNfZG9tYWluLmMKQEAgLTIwNzAsNiArMjA3MCw3IEBAIGludCB4Y19kb21haW5fbWVt
b3J5X21hcHBpbmcoCiAgICAgZG9tY3RsLmNtZCA9IFhFTl9ET01DVExfbWVtb3J5X21hcHBpbmc7
CiAgICAgZG9tY3RsLmRvbWFpbiA9IGRvbWlkOwogICAgIGRvbWN0bC51Lm1lbW9yeV9tYXBwaW5n
LmFkZF9tYXBwaW5nID0gYWRkX21hcHBpbmc7CisgICAgZG9tY3RsLnUubWVtb3J5X21hcHBpbmcu
bWVtb3J5X3BvbGljeSA9IDA7CiAgICAgbWF4X2JhdGNoX3N6ID0gbnJfbWZuczsKICAgICBkbwog
ICAgIHsKZGlmZiAtLWdpdCBhL3hlbi9jb21tb24vZG9tY3RsLmMgYi94ZW4vY29tbW9uL2RvbWN0
bC5jCmluZGV4IGM2ZmQ4OGQyODUuLmYyMWY2OTU3YjAgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24v
ZG9tY3RsLmMKKysrIGIveGVuL2NvbW1vbi9kb21jdGwuYwpAQCAtOTI4LDYgKzkyOCw3IEBAIGxv
bmcgZG9fZG9tY3RsKFhFTl9HVUVTVF9IQU5ETEVfUEFSQU0oeGVuX2RvbWN0bF90KSB1X2RvbWN0
bCkKICAgICAgICAgdW5zaWduZWQgbG9uZyBtZm5fZW5kID0gbWZuICsgbnJfbWZucyAtIDE7CiAg
ICAgICAgIGludCBhZGQgPSBvcC0+dS5tZW1vcnlfbWFwcGluZy5hZGRfbWFwcGluZzsKICAgICAg
ICAgcDJtX3R5cGVfdCBwMm10OworICAgICAgICB1aW50MzJfdCBtZW1vcnlfcG9saWN5ID0gb3At
PnUubWVtb3J5X21hcHBpbmcubWVtb3J5X3BvbGljeTsKIAogICAgICAgICByZXQgPSAtRUlOVkFM
OwogICAgICAgICBpZiAoIG1mbl9lbmQgPCBtZm4gfHwgLyogd3JhcD8gKi8KQEAgLTk1OCw5ICs5
NTksMjggQEAgbG9uZyBkb19kb21jdGwoWEVOX0dVRVNUX0hBTkRMRV9QQVJBTSh4ZW5fZG9tY3Rs
X3QpIHVfZG9tY3RsKQogICAgICAgICBpZiAoIGFkZCApCiAgICAgICAgIHsKICAgICAgICAgICAg
IHByaW50ayhYRU5MT0dfR19ERUJVRwotICAgICAgICAgICAgICAgICAgICJtZW1vcnlfbWFwOmFk
ZDogZG9tJWQgZ2ZuPSVseCBtZm49JWx4IG5yPSVseFxuIiwKLSAgICAgICAgICAgICAgICAgICBk
LT5kb21haW5faWQsIGdmbiwgbWZuLCBucl9tZm5zKTsKKyAgICAgICAgICAgICAgICAgICAibWVt
b3J5X21hcDphZGQ6IGRvbSVkIGdmbj0lbHggbWZuPSVseCBucj0lbHggY2FjaGU9JXVcbiIsCisg
ICAgICAgICAgICAgICAgICAgZC0+ZG9tYWluX2lkLCBnZm4sIG1mbiwgbnJfbWZucywgbWVtb3J5
X3BvbGljeSk7CiAKKyAgICAgICAgICAgIHN3aXRjaCAoIG1lbW9yeV9wb2xpY3kgKQorICAgICAg
ICAgICAgeworI2lmZGVmIENPTkZJR19BUk0KKyAgICAgICAgICAgICAgICBjYXNlIE1FTU9SWV9Q
T0xJQ1lfQVJNX01FTV9XQjoKKyAgICAgICAgICAgICAgICAgICAgcDJtdCA9IHAybV9tbWlvX2Rp
cmVjdF9jOworICAgICAgICAgICAgICAgICAgICBicmVhazsKKyAgICAgICAgICAgICAgICBjYXNl
IE1FTU9SWV9QT0xJQ1lfQVJNX0RFVl9uR25SRToKKyAgICAgICAgICAgICAgICAgICAgcDJtdCA9
IHAybV9tbWlvX2RpcmVjdF9kZXY7CisgICAgICAgICAgICAgICAgICAgIGJyZWFrOworI2VuZGlm
CisjaWZkZWYgQ09ORklHX1g4NgorICAgICAgICAgICAgICAgIGNhc2UgTUVNT1JZX1BPTElDWV9Y
ODZfVUNfTUlOVVM6CisgICAgICAgICAgICAgICAgICAgIHAybXQgPSBwMm1fbW1pb19kaXJlY3Q7
CisgICAgICAgICAgICAgICAgICAgIGJyZWFrOworI2VuZGlmCisgICAgICAgICAgICAgICAgZGVm
YXVsdDoKKyAgICAgICAgICAgICAgICAgICAgZG9tY3RsX2xvY2tfcmVsZWFzZSgpOworICAgICAg
ICAgICAgICAgICAgICBnb3RvIGRvbWN0bF9vdXRfdW5sb2NrX2RvbW9ubHk7CisgICAgICAgICAg
ICB9CiAgICAgICAgICAgICByZXQgPSBtYXBfbW1pb19yZWdpb25zKGQsIF9nZm4oZ2ZuKSwgbnJf
bWZucywgX21mbihtZm4pLCBwMm10KTsKICAgICAgICAgICAgIGlmICggcmV0IDwgMCApCiAgICAg
ICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19HX1dBUk5JTkcKZGlmZiAtLWdpdCBhL3hlbi9pbmNs
dWRlL3B1YmxpYy9kb21jdGwuaCBiL3hlbi9pbmNsdWRlL3B1YmxpYy9kb21jdGwuaAppbmRleCAx
OTQ4NmQ1ZTMyLi5lNTFjYWFkYTM1IDEwMDY0NAotLS0gYS94ZW4vaW5jbHVkZS9wdWJsaWMvZG9t
Y3RsLmgKKysrIGIveGVuL2luY2x1ZGUvcHVibGljL2RvbWN0bC5oCkBAIC01NzEsMTIgKzU3MSwz
MyBAQCBzdHJ1Y3QgeGVuX2RvbWN0bF9iaW5kX3B0X2lycSB7CiAqLwogI2RlZmluZSBEUENJX0FE
RF9NQVBQSU5HICAgICAgICAgMQogI2RlZmluZSBEUENJX1JFTU9WRV9NQVBQSU5HICAgICAgMAor
LyoKKyAqIERlZmF1bHQgbWVtb3J5IHBvbGljeS4gQ29ycmVzcG9uZHMgdG86CisgKiBBcm06IE1F
TU9SWV9QT0xJQ1lfQVJNX0RFVl9uR25SRQorICogeDg2OiBNRU1PUllfUE9MSUNZX1g4Nl9VQ19N
SU5VUworICovCisjZGVmaW5lIE1FTU9SWV9QT0xJQ1lfREVGQVVMVCAgICAgICAgIDAKKyNpZiBk
ZWZpbmVkKF9faTM4Nl9fKSB8fCBkZWZpbmVkKF9feDg2XzY0X18pCisvKiB4ODYgb25seS4gTWVt
b3J5IHR5cGUgVU5DQUNIQUJMRSAqLworIyBkZWZpbmUgTUVNT1JZX1BPTElDWV9YODZfVUNfTUlO
VVMgICAgMAorI2VsaWYgZGVmaW5lZChfX2FybV9fKSB8fCBkZWZpbmVkIChfX2FhcmNoNjRfXykK
Ky8qIEFybSBvbmx5LiBPdXRlciBTaGFyZWFibGUsIERldmljZS1uR25SRSBtZW1vcnkgKERldmlj
ZSBNZW1vcnkgb24gQXJtdjcpICovCisjIGRlZmluZSBNRU1PUllfUE9MSUNZX0FSTV9ERVZfbkdu
UkUgICAgICAwCisvKiBBcm0gb25seS4gT3V0ZXIgU2hhcmVhYmxlLCBPdXRlci9Jbm5lciBXcml0
ZS1CYWNrIENhY2hlYWJsZSBtZW1vcnkgKi8KKyMgZGVmaW5lIE1FTU9SWV9QT0xJQ1lfQVJNX01F
TV9XQiAgICAgICAgIDEKKy8qCisgKiBPbiBBUk0sIE1FTU9SWV9QT0xJQ1kgc2VsZWN0cyB0aGUg
c3RhZ2UtMiBtZW1vcnkgYXR0cmlidXRlcywgYnV0IG5vdGUKKyAqIHRoYXQgdGhlIHJlc3VsdGlu
ZyBtZW1vcnkgYXR0cmlidXRlcyB3aWxsIGJlIGEgY29tYmluYXRpb24gb2Ygc3RhZ2UtMgorICog
YW5kIHN0YWdlLTEgbWVtb3J5IGF0dHJpYnV0ZXM6IGl0IHdpbGwgYmUgdGhlIHN0cm9uZ2VzdCBi
ZXR3ZWVuIHRoZSAyCisgKiBzdGFnZXMgYXR0cmlidXRlcy4KKyAqLworI2VuZGlmCiBzdHJ1Y3Qg
eGVuX2RvbWN0bF9tZW1vcnlfbWFwcGluZyB7CiAgICAgdWludDY0X2FsaWduZWRfdCBmaXJzdF9n
Zm47IC8qIGZpcnN0IHBhZ2UgKGh2bSBndWVzdCBwaHlzIHBhZ2UpIGluIHJhbmdlICovCiAgICAg
dWludDY0X2FsaWduZWRfdCBmaXJzdF9tZm47IC8qIGZpcnN0IHBhZ2UgKG1hY2hpbmUgcGFnZSkg
aW4gcmFuZ2UgKi8KICAgICB1aW50NjRfYWxpZ25lZF90IG5yX21mbnM7ICAgLyogbnVtYmVyIG9m
IHBhZ2VzIGluIHJhbmdlICg+MCkgKi8KICAgICB1aW50MzJfdCBhZGRfbWFwcGluZzsgICAgICAg
LyogYWRkIG9yIHJlbW92ZSBtYXBwaW5nICovCi0gICAgdWludDMyX3QgcGFkZGluZzsgICAgICAg
ICAgIC8qIHBhZGRpbmcgZm9yIDY0LWJpdCBhbGlnbmVkIHN0cnVjdHVyZSAqLworICAgIHVpbnQz
Ml90IG1lbW9yeV9wb2xpY3k7ICAgICAgLyogY2FjaGVhYmlsaXR5IG9mIHRoZSBtZW1vcnkgbWFw
cGluZyAqLwogfTsKIAogCi0tIAoyLjE3LjEKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0
cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlz
dGluZm8veGVuLWRldmVs

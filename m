Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id BED0418A8E
	for <lists+xen-devel@lfdr.de>; Thu,  9 May 2019 15:28:01 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hOj2y-0004Hx-87; Thu, 09 May 2019 13:25:16 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=1wQJ=TJ=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hOj2w-0004Hp-SF
 for xen-devel@lists.xenproject.org; Thu, 09 May 2019 13:25:14 +0000
X-Inumbo-ID: df5798fc-725d-11e9-a333-af669c5c420c
Received: from prv1-mh.provo.novell.com (unknown [137.65.248.33])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id df5798fc-725d-11e9-a333-af669c5c420c;
 Thu, 09 May 2019 13:25:12 +0000 (UTC)
Received: from INET-PRV1-MTA by prv1-mh.provo.novell.com
 with Novell_GroupWise; Thu, 09 May 2019 07:25:11 -0600
Message-Id: <5CD42A36020000780022D2D5@prv1-mh.provo.novell.com>
X-Mailer: Novell GroupWise Internet Agent 18.1.0 
Date: Thu, 09 May 2019 07:25:10 -0600
From: "Jan Beulich" <JBeulich@suse.com>
To: "Andrew Cooper" <andrew.cooper3@citrix.com>
References: <5CD41EA1020000780022D25D@prv1-mh.provo.novell.com>
 <ab00c7c5-4b1d-f608-e531-5c9922fb2f23@citrix.com>
In-Reply-To: <ab00c7c5-4b1d-f608-e531-5c9922fb2f23@citrix.com>
Mime-Version: 1.0
Content-Disposition: inline
Subject: Re: [Xen-devel] [PATCH] page-alloc: detect double free earlier
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wei.liu2@citrix.com>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Ian Jackson <Ian.Jackson@eu.citrix.com>, Julien Grall <julien.grall@arm.com>,
 xen-devel <xen-devel@lists.xenproject.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Pj4+IE9uIDA5LjA1LjE5IGF0IDE0OjUwLCA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4gd3Jv
dGU6Cj4gT24gMDkvMDUvMjAxOSAxMzozNSwgSmFuIEJldWxpY2ggd3JvdGU6Cj4+IFJpZ2h0IG5v
dyB0aGlzIGdvZXMgdW5ub3RpY2VkIHVudGlsIHNvbWUgc3Vic2VxdWVudCBwYWdlIGFsbG9jYXRv
cgo+PiBvcGVyYXRpb24gc3R1bWJsZXMgYWNyb3NzIHRoZSB0aHVzIGNvcnJ1cHRlZCBsaXN0LiBX
ZSBjYW4gZG8gYmV0dGVyOgo+PiBPbmx5IFBHQ19zdGF0ZV9pbnVzZSBhbmQgUEdDX3N0YXRlX29m
ZmxpbmluZyBwYWdlcyBjYW4gbGVnaXRpbWF0ZWx5IGJlCj4+IHBhc3NlZCB0byBmcmVlX2hlYXBf
cGFnZXMoKS4KPj4KPj4gVGFrZSB0aGUgb3Bwb3J0dW5pdHkgYW5kIGFsc28gcmVzdHJpY3QgdGhl
IFBHQ19icm9rZW4gY2hlY2sgdG8gdGhlCj4+IFBHQ19zdGF0ZV9vZmZsaW5pbmcgY2FzZSwgYXMg
b25seSBwYWdlcyBvZiB0aGF0IHR5cGUgb3IKPj4gUEdDX3N0YXRlX29mZmxpbmVkIG1heSBoYXZl
IHRoaXMgZmxhZyBzZXQgb24gdGhlbS4gU2ltaWxhcmx5LCBzaW5jZQo+PiBQR0Nfc3RhdGVfb2Zm
bGluZWQgaXMgbm90IGEgdmFsaWQgaW5wdXQgc3RhdGUsIHRoZSBzZXR0aW5nIG9mICJ0YWludGVk
Igo+PiBjYW4gYmUgcmVzdHJpY3RlZCB0byBqdXN0IHRoaXMgY2FzZS4KPj4KPj4gU2lnbmVkLW9m
Zi1ieTogSmFuIEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgo+IAo+IEFja2VkLWJ5OiBBbmRy
ZXcgQ29vcGVyIDxhbmRyZXcuY29vcGVyM0BjaXRyaXguY29tPiwgd2l0aCBhIHN1Z2dlc3Rpb24u
CgpUaGFua3MuCgo+PiAtLS0gYS94ZW4vY29tbW9uL3BhZ2VfYWxsb2MuYwo+PiArKysgYi94ZW4v
Y29tbW9uL3BhZ2VfYWxsb2MuYwo+PiBAQCAtMTQwOSwxMyArMTQwOSwyMiBAQCBzdGF0aWMgdm9p
ZCBmcmVlX2hlYXBfcGFnZXMoCj4+ICAgICAgICAgICAqICAgICBpbiBpdHMgcHNldWRvcGh5c2lj
YWwgYWRkcmVzcyBzcGFjZSkuCj4+ICAgICAgICAgICAqIEluIGFsbCB0aGUgYWJvdmUgY2FzZXMg
dGhlcmUgY2FuIGJlIG5vIGd1ZXN0IG1hcHBpbmdzIG9mIHRoaXMgcGFnZS4KPj4gICAgICAgICAg
ICovCj4+IC0gICAgICAgIEFTU0VSVCghcGFnZV9zdGF0ZV9pcygmcGdbaV0sIG9mZmxpbmVkKSk7
Cj4+IC0gICAgICAgIHBnW2ldLmNvdW50X2luZm8gPQo+PiAtICAgICAgICAgICAgKChwZ1tpXS5j
b3VudF9pbmZvICYgUEdDX2Jyb2tlbikgfAo+PiAtICAgICAgICAgICAgIChwYWdlX3N0YXRlX2lz
KCZwZ1tpXSwgb2ZmbGluaW5nKQo+PiAtICAgICAgICAgICAgICA/IFBHQ19zdGF0ZV9vZmZsaW5l
ZCA6IFBHQ19zdGF0ZV9mcmVlKSk7Cj4+IC0gICAgICAgIGlmICggcGFnZV9zdGF0ZV9pcygmcGdb
aV0sIG9mZmxpbmVkKSApCj4+ICsgICAgICAgIHN3aXRjaCAoIHBnW2ldLmNvdW50X2luZm8gJiBQ
R0Nfc3RhdGUgKQo+PiArICAgICAgICB7Cj4+ICsgICAgICAgIGNhc2UgUEdDX3N0YXRlX2ludXNl
Ogo+PiArICAgICAgICAgICAgQlVHX09OKHBnW2ldLmNvdW50X2luZm8gJiBQR0NfYnJva2VuKTsK
Pj4gKyAgICAgICAgICAgIHBnW2ldLmNvdW50X2luZm8gPSBQR0Nfc3RhdGVfZnJlZTsKPj4gKyAg
ICAgICAgICAgIGJyZWFrOwo+PiArCj4+ICsgICAgICAgIGNhc2UgUEdDX3N0YXRlX29mZmxpbmlu
ZzoKPj4gKyAgICAgICAgICAgIHBnW2ldLmNvdW50X2luZm8gPSAocGdbaV0uY291bnRfaW5mbyAm
IFBHQ19icm9rZW4pIHwKPj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQR0Nfc3Rh
dGVfb2ZmbGluZWQ7Cj4+ICAgICAgICAgICAgICB0YWludGVkID0gMTsKPj4gKyAgICAgICAgICAg
IGJyZWFrOwo+PiArCj4+ICsgICAgICAgIGRlZmF1bHQ6Cj4gCj4gR2l2ZW4gdGhhdCB0aGlzIGlz
IGEgZnVsbHkgZmF0YWwgY29uZGl0aW9uLCBpdCB3b3VsZCBiZSBoZWxwZnVsIHRvIGF0Cj4gbGVh
c3QgcHJpbnQgdGhlIHN0YXRlIHdlIGZvdW5kIGhlcmUuICBGb3IgY2FzZXMgb3RoZXIgdGhhbgo+
IFBHQ19zdGF0ZV9mcmVlLCBpdCB3b3VsZCBwcm9iYWJseSBiZSBhIHZlcnkgdXNlZnVsIHBpZWNl
IG9mIGluZm9ybWF0aW9uCj4gZm9yIGRpYWdub3Npbmcgd2hhdCB3ZW50IHdyb25nLgoKRnVubnkg
eW91IHNob3VsZCBzYXkgdGhpcyAtIEkgaGF2ZSB0aGUgZGVidWdnaW5nIHBhdGNoIGJlbG93IG9u
IHRvcAppbiBteSB0cmVlLiBJIGNvdWxkIGVhc2lseSBzdWJtaXQgdGhpcyBhcyBhIHN0YW5kYWxv
bmUgZm9sbG93LW9uIHBhdGNoLgoKSmFuCgotLS0gdW5zdGFibGUub3JpZy94ZW4vY29tbW9uL3Bh
Z2VfYWxsb2MuYworKysgdW5zdGFibGUveGVuL2NvbW1vbi9wYWdlX2FsbG9jLmMKQEAgLTEwMTQs
NyArMTAxNCwxNCBAQCBzdGF0aWMgc3RydWN0IHBhZ2VfaW5mbyAqYWxsb2NfaGVhcF9wYWdlCiAg
ICAgZm9yICggaSA9IDA7IGkgPCAoMSA8PCBvcmRlcik7IGkrKyApCiAgICAgewogICAgICAgICAv
KiBSZWZlcmVuY2UgY291bnQgbXVzdCBjb250aW51b3VzbHkgYmUgemVybyBmb3IgZnJlZSBwYWdl
cy4gKi8KLSAgICAgICAgQlVHX09OKChwZ1tpXS5jb3VudF9pbmZvICYgflBHQ19uZWVkX3NjcnVi
KSAhPSBQR0Nfc3RhdGVfZnJlZSk7CisgICAgICAgIGlmICggKHBnW2ldLmNvdW50X2luZm8gJiB+
UEdDX25lZWRfc2NydWIpICE9IFBHQ19zdGF0ZV9mcmVlICkKKyAgICAgICAgeworICAgICAgICAg
ICAgcHJpbnRrKFhFTkxPR19FUlIgInBnWyV4XSBtPSVseCBjPSVseCBvPSV4IHY9JWx4IHQ9JXhc
biIsCisgICAgICAgICAgICAgICAgICAgaSwgbWZuX3gocGFnZV90b19tZm4ocGcgKyBpKSksCisg
ICAgICAgICAgICAgICAgICAgcGdbaV0uY291bnRfaW5mbywgcGdbaV0udi5mcmVlLm9yZGVyLAor
ICAgICAgICAgICAgICAgICAgIHBnW2ldLnUuZnJlZS52YWwsIHBnW2ldLnRsYmZsdXNoX3RpbWVz
dGFtcCk7CisgICAgICAgICAgICBCVUcoKTsKKyAgICAgICAgfQogCiAgICAgICAgIC8qIFBHQ19u
ZWVkX3NjcnViIGNhbiBvbmx5IGJlIHNldCBpZiBmaXJzdF9kaXJ0eSBpcyB2YWxpZCAqLwogICAg
ICAgICBBU1NFUlQoZmlyc3RfZGlydHkgIT0gSU5WQUxJRF9ESVJUWV9JRFggfHwgIShwZ1tpXS5j
b3VudF9pbmZvICYgUEdDX25lZWRfc2NydWIpKTsKQEAgLTE0MjMsNiArMTQzMCwxMCBAQCBzdGF0
aWMgdm9pZCBmcmVlX2hlYXBfcGFnZXMoCiAgICAgICAgICAgICBicmVhazsKIAogICAgICAgICBk
ZWZhdWx0OgorICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19FUlIgInBnWyV4XSBtPSVseCBjPSVs
eCBvPSV4IHY9JWx4IHQ9JXhcbiIsCisgICAgICAgICAgICAgICAgICAgaSwgbWZuX3gocGFnZV90
b19tZm4ocGcgKyBpKSksCisgICAgICAgICAgICAgICAgICAgcGdbaV0uY291bnRfaW5mbywgcGdb
aV0udi5mcmVlLm9yZGVyLAorICAgICAgICAgICAgICAgICAgIHBnW2ldLnUuZnJlZS52YWwsIHBn
W2ldLnRsYmZsdXNoX3RpbWVzdGFtcCk7CiAgICAgICAgICAgICBCVUcoKTsKICAgICAgICAgfQog
CgoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1k
ZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8v
bGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

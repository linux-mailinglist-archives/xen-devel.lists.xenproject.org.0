Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id CC95F165E47
	for <lists+xen-devel@lfdr.de>; Thu, 20 Feb 2020 14:08:35 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j4lXD-0001FZ-Bm; Thu, 20 Feb 2020 13:06:31 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=OTtJ=4I=redhat.com=philmd@srs-us1.protection.inumbo.net>)
 id 1j4lXB-0001ER-Hj
 for xen-devel@lists.xenproject.org; Thu, 20 Feb 2020 13:06:29 +0000
X-Inumbo-ID: ce7a4475-53e1-11ea-8526-12813bfff9fa
Received: from us-smtp-1.mimecast.com (unknown [205.139.110.61])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTP
 id ce7a4475-53e1-11ea-8526-12813bfff9fa;
 Thu, 20 Feb 2020 13:06:28 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1582203988;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=ZaiDtobx6mVoSJLPslKoq8Z9oQIRl9Tgzgi3Bg/RxQM=;
 b=LRP6RTIMehH7tWVxkQY2smpfsk5IOsq9rBwjxGB3FP8KPmFGcPtzK9LuClJ5BvD6hdQMHj
 rH/FzTwMNnsSqsPs0PbxDda/Ak/OQGkg47+OHC4SuliJM8r4d0xCtOJ1lqmR+MCJLM+jg+
 jt/lLvHytJtouovAMk4ZF5h0oBFoJoo=
Received: from mail-wr1-f70.google.com (mail-wr1-f70.google.com
 [209.85.221.70]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-272-ljFMzuFRM5GMBdUQOErtVw-1; Thu, 20 Feb 2020 08:06:26 -0500
Received: by mail-wr1-f70.google.com with SMTP id u8so1712054wrp.10
 for <xen-devel@lists.xenproject.org>; Thu, 20 Feb 2020 05:06:26 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=8pJhUP9usprCLN78RzoD9uhnYc7r5iBRfDww4Tsum+4=;
 b=Z/m/NE46U6Dl4NGx0uN3RBxhcqKcPw/Vg0tgBYlVY7RpI1JUAJf1zsfoM/PwHxfYl8
 CBeTuYvDgmZ+KSlV/Vnp44MnsSufQuTX8bSpe/1rjOUG4rO8gvn3OKRFICB9LADE6GQ1
 fyUHGVz83aMNl4pPDYao9y/O09iYL8SMTJcufc5o6hfwlgFawW8Tyw9gxWEMOZ7PYQLt
 1qkH59vwyFGKXdi8iCRs4dxGMQopmIfa9LjVzRxUIQlgoJMhIUW6MMQhvzS1GIf7uN7f
 OBVvAgW/maw3PGf8zhtA2yOUd4UPorAsTUQtC+3sqCz/xqzeIARwN4q3itdwh+OEzvZK
 Y17A==
X-Gm-Message-State: APjAAAXZIUhUurp+O5PfOEUFunGF+BxHaFbDL7V0DMwfIE/MADxTBKFj
 vGHOf+cGEyA8YIOp4uzflqzrREWaN0J3BFnx6uMGjAq8FX+6wzW6YUSKhBeeZAQDKRr3Z1t+qgY
 X9fOBi56tqh1A5llbAKKaN2TFwlg=
X-Received: by 2002:a1c:3b09:: with SMTP id i9mr4474239wma.31.1582203984884;
 Thu, 20 Feb 2020 05:06:24 -0800 (PST)
X-Google-Smtp-Source: APXvYqyueDTuvmLdILlFBUAI1KMTYLdx1fyD4hDWZ7aWgHEWsecyRbWCT1Cjdoc3TPZaC5AcngMlzg==
X-Received: by 2002:a1c:3b09:: with SMTP id i9mr4474140wma.31.1582203984067;
 Thu, 20 Feb 2020 05:06:24 -0800 (PST)
Received: from localhost.localdomain (78.red-88-21-202.staticip.rima-tde.net.
 [88.21.202.78])
 by smtp.gmail.com with ESMTPSA id b67sm4594690wmc.38.2020.02.20.05.06.20
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 20 Feb 2020 05:06:23 -0800 (PST)
From: =?UTF-8?q?Philippe=20Mathieu-Daud=C3=A9?= <philmd@redhat.com>
To: Peter Maydell <peter.maydell@linaro.org>,
	qemu-devel@nongnu.org
Date: Thu, 20 Feb 2020 14:05:36 +0100
Message-Id: <20200220130548.29974-9-philmd@redhat.com>
X-Mailer: git-send-email 2.21.1
In-Reply-To: <20200220130548.29974-1-philmd@redhat.com>
References: <20200220130548.29974-1-philmd@redhat.com>
MIME-Version: 1.0
X-MC-Unique: ljFMzuFRM5GMBdUQOErtVw-1
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Subject: [Xen-devel] [PATCH v3 08/20] Remove unnecessary cast when using the
 address_space API
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Fam Zheng <fam@euphon.net>, Dmitry Fleytman <dmitry.fleytman@gmail.com>,
 kvm@vger.kernel.org, "Michael S. Tsirkin" <mst@redhat.com>,
 Jason Wang <jasowang@redhat.com>, Gerd Hoffmann <kraxel@redhat.com>,
 "Edgar E. Iglesias" <edgar.iglesias@gmail.com>,
 Stefano Stabellini <sstabellini@kernel.org>,
 Matthew Rosato <mjrosato@linux.ibm.com>, qemu-block@nongnu.org,
 David Hildenbrand <david@redhat.com>, Halil Pasic <pasic@linux.ibm.com>,
 Christian Borntraeger <borntraeger@de.ibm.com>,
 =?UTF-8?q?Herv=C3=A9=20Poussineau?= <hpoussin@reactos.org>,
 Marcel Apfelbaum <marcel.apfelbaum@gmail.com>,
 Anthony Perard <anthony.perard@citrix.com>, xen-devel@lists.xenproject.org,
 Aleksandar Rikalo <aleksandar.rikalo@rt-rk.com>,
 Richard Henderson <rth@twiddle.net>,
 =?UTF-8?q?Philippe=20Mathieu-Daud=C3=A9?= <philmd@redhat.com>,
 Laurent Vivier <lvivier@redhat.com>, Thomas Huth <thuth@redhat.com>,
 Eduardo Habkost <ehabkost@redhat.com>, Stefan Weil <sw@weilnetz.de>,
 Alistair Francis <alistair@alistair23.me>,
 Richard Henderson <richard.henderson@linaro.org>, Paul Durrant <paul@xen.org>,
 Eric Auger <eric.auger@redhat.com>, qemu-s390x@nongnu.org, qemu-arm@nongnu.org,
 =?UTF-8?q?C=C3=A9dric=20Le=20Goater?= <clg@kaod.org>,
 John Snow <jsnow@redhat.com>, David Gibson <david@gibson.dropbear.id.au>,
 Igor Mitsyanko <i.mitsyanko@gmail.com>, Cornelia Huck <cohuck@redhat.com>,
 Michael Walle <michael@walle.cc>, qemu-ppc@nongnu.org,
 Paolo Bonzini <pbonzini@redhat.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBjb21taXQgd2FzIHByb2R1Y2VkIHdpdGggdGhlIGluY2x1ZGVkIENvY2NpbmVsbGUgc2Ny
aXB0CnNjcmlwdHMvY29jY2luZWxsZS9leGVjX3J3X2NvbnN0LgoKVHdvIGxpbmVzIGluIGh3L25l
dC9kcDgzOTN4LmMgdGhhdCBDb2NjaW5lbGxlIHByb2R1Y2VkIHRoYXQKd2VyZSBvdmVyIDgwIGNo
YXJhY3RlcnMgd2VyZSByZS13cmFwcGVkIGJ5IGhhbmQuCgpTdWdnZXN0ZWQtYnk6IFN0ZWZhbiBX
ZWlsIDxzd0B3ZWlsbmV0ei5kZT4KU2lnbmVkLW9mZi1ieTogUGhpbGlwcGUgTWF0aGlldS1EYXVk
w6kgPHBoaWxtZEByZWRoYXQuY29tPgotLS0KIHNjcmlwdHMvY29jY2luZWxsZS9leGVjX3J3X2Nv
bnN0LmNvY2NpIHwgMTUgKysrKysrKysrKysrKy0KIHRhcmdldC9pMzg2L2h2Zi92bXguaCAgICAg
ICAgICAgICAgICAgIHwgIDIgKy0KIGh3L2FybS9ib290LmMgICAgICAgICAgICAgICAgICAgICAg
ICAgIHwgIDYgKystLS0tCiBody9kbWEvcmM0MDMwLmMgICAgICAgICAgICAgICAgICAgICAgICB8
ICA0ICsrLS0KIGh3L2RtYS94bG54LXpkbWEuYyAgICAgICAgICAgICAgICAgICAgIHwgIDIgKy0K
IGh3L25ldC9jYWRlbmNlX2dlbS5jICAgICAgICAgICAgICAgICAgIHwgMjEgKysrKysrKysrLS0t
LS0tLS0tLQogaHcvbmV0L2RwODM5M3guYyAgICAgICAgICAgICAgICAgICAgICAgfCAyOCArKysr
KysrKysrKysrLS0tLS0tLS0tLS0tLQogaHcvczM5MHgvY3NzLmMgICAgICAgICAgICAgICAgICAg
ICAgICAgfCAgNCArKy0tCiBxdGVzdC5jICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8
IDEyICsrKysrLS0tLS0tCiB0YXJnZXQvaTM4Ni9odmYveDg2X21tdS5jICAgICAgICAgICAgICB8
ICAyICstCiB0YXJnZXQvaTM4Ni93aHB4LWFsbC5jICAgICAgICAgICAgICAgICB8ICAyICstCiB0
YXJnZXQvczM5MHgvbW11X2hlbHBlci5jICAgICAgICAgICAgICB8ICAyICstCiAxMiBmaWxlcyBj
aGFuZ2VkLCA1NCBpbnNlcnRpb25zKCspLCA0NiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9z
Y3JpcHRzL2NvY2NpbmVsbGUvZXhlY19yd19jb25zdC5jb2NjaSBiL3NjcmlwdHMvY29jY2luZWxs
ZS9leGVjX3J3X2NvbnN0LmNvY2NpCmluZGV4IDRlNDU5ZDkxNWIuLjVlZDk1NmE4MzQgMTAwNjQ0
Ci0tLSBhL3NjcmlwdHMvY29jY2luZWxsZS9leGVjX3J3X2NvbnN0LmNvY2NpCisrKyBiL3Njcmlw
dHMvY29jY2luZWxsZS9leGVjX3J3X2NvbnN0LmNvY2NpCkBAIC0xNywxMCArMTcsMjMgQEAgZXhw
cmVzc2lvbiBFMSwgRTIsIEUzLCBFNDsKIAogLy8gUmVtb3ZlIHVzZWxlc3MgY2FzdAogQEAKLWV4
cHJlc3Npb24gRTEsIEUyLCBFMywgRTQ7CitleHByZXNzaW9uIEUxLCBFMiwgRTMsIEU0LCBFNSwg
RTY7CiB0eXBlIFQ7CiBAQAogKAorLSBhZGRyZXNzX3NwYWNlX3J3KEUxLCBFMiwgRTMsIChUICop
RTQsIEU1LCBFNikKKysgYWRkcmVzc19zcGFjZV9ydyhFMSwgRTIsIEUzLCBFNCwgRTUsIEU2KQor
fAorLSBhZGRyZXNzX3NwYWNlX3JlYWQoRTEsIEUyLCBFMywgKFQgKilFNCwgRTUpCisrIGFkZHJl
c3Nfc3BhY2VfcmVhZChFMSwgRTIsIEUzLCBFNCwgRTUpCit8CistIGFkZHJlc3Nfc3BhY2Vfd3Jp
dGUoRTEsIEUyLCBFMywgKFQgKilFNCwgRTUpCisrIGFkZHJlc3Nfc3BhY2Vfd3JpdGUoRTEsIEUy
LCBFMywgRTQsIEU1KQorfAorLSBhZGRyZXNzX3NwYWNlX3dyaXRlX3JvbShFMSwgRTIsIEUzLCAo
VCAqKUU0LCBFNSkKKysgYWRkcmVzc19zcGFjZV93cml0ZV9yb20oRTEsIEUyLCBFMywgRTQsIEU1
KQorfAorCiAtIGRtYV9tZW1vcnlfcmVhZChFMSwgRTIsIChUICopRTMsIEU0KQogKyBkbWFfbWVt
b3J5X3JlYWQoRTEsIEUyLCBFMywgRTQpCiB8CmRpZmYgLS1naXQgYS90YXJnZXQvaTM4Ni9odmYv
dm14LmggYi90YXJnZXQvaTM4Ni9odmYvdm14LmgKaW5kZXggZWI4ODk0Y2Q1OC4uYTExNWNhMTc4
MiAxMDA2NDQKLS0tIGEvdGFyZ2V0L2kzODYvaHZmL3ZteC5oCisrKyBiL3RhcmdldC9pMzg2L2h2
Zi92bXguaApAQCAtMTI4LDcgKzEyOCw3IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBtYWN2bV9zZXRf
Y3IwKGh2X3ZjcHVpZF90IHZjcHUsIHVpbnQ2NF90IGNyMCkKICAgICAgICAgYWRkcmVzc19zcGFj
ZV9ydygmYWRkcmVzc19zcGFjZV9tZW1vcnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgcnZt
Y3ModmNwdSwgVk1DU19HVUVTVF9DUjMpICYgfjB4MWYsCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAodWlu
dDhfdCAqKXBkcHRlLCAzMiwgMCk7CisgICAgICAgICAgICAgICAgICAgICAgICAgcGRwdGUsIDMy
LCAwKTsKICAgICAgICAgLyogT25seSBzZXQgUERQVEUgd2hlbiBhcHByb3ByaWF0ZS4gKi8KICAg
ICAgICAgZm9yIChpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICAgICAgICAgd3ZtY3ModmNwdSwg
Vk1DU19HVUVTVF9QRFBURTAgKyBpICogMiwgcGRwdGVbaV0pOwpkaWZmIC0tZ2l0IGEvaHcvYXJt
L2Jvb3QuYyBiL2h3L2FybS9ib290LmMKaW5kZXggMGMyMTNjYTYyNy4uZmVmNDA3MmRiMSAxMDA2
NDQKLS0tIGEvaHcvYXJtL2Jvb3QuYworKysgYi9ody9hcm0vYm9vdC5jCkBAIC0zMjcsOCArMzI3
LDcgQEAgc3RhdGljIHZvaWQgc2V0X2tlcm5lbF9hcmdzKGNvbnN0IHN0cnVjdCBhcm1fYm9vdF9p
bmZvICppbmZvLCBBZGRyZXNzU3BhY2UgKmFzKQogCiAgICAgICAgIGNtZGxpbmVfc2l6ZSA9IHN0
cmxlbihpbmZvLT5rZXJuZWxfY21kbGluZSk7CiAgICAgICAgIGFkZHJlc3Nfc3BhY2Vfd3JpdGUo
YXMsIHAgKyA4LCBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELAotICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIChjb25zdCB1aW50OF90ICopaW5mby0+a2VybmVsX2NtZGxpbmUsCi0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY21kbGluZV9zaXplICsgMSk7CisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaW5mby0+a2VybmVsX2NtZGxpbmUsIGNtZGxpbmVfc2l6ZSArIDEpOwogICAgICAg
ICBjbWRsaW5lX3NpemUgPSAoY21kbGluZV9zaXplID4+IDIpICsgMTsKICAgICAgICAgV1JJVEVf
V09SRChwLCBjbWRsaW5lX3NpemUgKyAyKTsKICAgICAgICAgV1JJVEVfV09SRChwLCAweDU0NDEw
MDA5KTsKQEAgLTQyMCw4ICs0MTksNyBAQCBzdGF0aWMgdm9pZCBzZXRfa2VybmVsX2FyZ3Nfb2xk
KGNvbnN0IHN0cnVjdCBhcm1fYm9vdF9pbmZvICppbmZvLAogICAgIH0KICAgICBzID0gaW5mby0+
a2VybmVsX2NtZGxpbmU7CiAgICAgaWYgKHMpIHsKLSAgICAgICAgYWRkcmVzc19zcGFjZV93cml0
ZShhcywgcCwgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwKLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAoY29uc3QgdWludDhfdCAqKXMsIHN0cmxlbihzKSArIDEpOworICAgICAgICBhZGRyZXNz
X3NwYWNlX3dyaXRlKGFzLCBwLCBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELCBzLCBzdHJsZW4ocykg
KyAxKTsKICAgICB9IGVsc2UgewogICAgICAgICBXUklURV9XT1JEKHAsIDApOwogICAgIH0KZGlm
ZiAtLWdpdCBhL2h3L2RtYS9yYzQwMzAuYyBiL2h3L2RtYS9yYzQwMzAuYwppbmRleCBjNGNmODIz
NmY0Li5jYTBiZWNkNzU2IDEwMDY0NAotLS0gYS9ody9kbWEvcmM0MDMwLmMKKysrIGIvaHcvZG1h
L3JjNDAzMC5jCkBAIC01MTMsOCArNTEzLDggQEAgc3RhdGljIElPTU1VVExCRW50cnkgcmM0MDMw
X2RtYV90cmFuc2xhdGUoSU9NTVVNZW1vcnlSZWdpb24gKmlvbW11LCBod2FkZHIgYWRkciwKICAg
ICBpZiAoaSA8IHMtPmRtYV90bF9saW1pdCAvIHNpemVvZihlbnRyeSkpIHsKICAgICAgICAgZW50
cnlfYWRkcmVzcyA9IChzLT5kbWFfdGxfYmFzZSAmIDB4N2ZmZmZmZmYpICsgaSAqIHNpemVvZihl
bnRyeSk7CiAgICAgICAgIGlmIChhZGRyZXNzX3NwYWNlX3JlYWQocmV0LnRhcmdldF9hcywgZW50
cnlfYWRkcmVzcywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNRU1UWEFUVFJTX1VO
U1BFQ0lGSUVELCAodW5zaWduZWQgY2hhciAqKSZlbnRyeSwKLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzaXplb2YoZW50cnkpKSA9PSBNRU1UWF9PSykgeworICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIE1FTVRYQVRUUlNfVU5TUEVDSUZJRUQsICZlbnRyeSwgc2l6ZW9mKGVu
dHJ5KSkKKyAgICAgICAgICAgICAgICA9PSBNRU1UWF9PSykgewogICAgICAgICAgICAgcmV0LnRy
YW5zbGF0ZWRfYWRkciA9IGVudHJ5LmZyYW1lICYgfihETUFfUEFHRVNJWkUgLSAxKTsKICAgICAg
ICAgICAgIHJldC5wZXJtID0gSU9NTVVfUlc7CiAgICAgICAgIH0KZGlmZiAtLWdpdCBhL2h3L2Rt
YS94bG54LXpkbWEuYyBiL2h3L2RtYS94bG54LXpkbWEuYwppbmRleCA4ZmI4M2Y1YjA3Li42ODNh
YmJlNTNmIDEwMDY0NAotLS0gYS9ody9kbWEveGxueC16ZG1hLmMKKysrIGIvaHcvZG1hL3hsbngt
emRtYS5jCkBAIC0zNjQsNyArMzY0LDcgQEAgc3RhdGljIHVpbnQ2NF90IHpkbWFfdXBkYXRlX2Rl
c2NyX2FkZHIoWGxueFpETUEgKnMsIGJvb2wgdHlwZSwKICAgICB9IGVsc2UgewogICAgICAgICBh
ZGRyID0gemRtYV9nZXRfcmVnYWRkcjY0KHMsIGJhc2VyZWcpOwogICAgICAgICBhZGRyICs9IHNp
emVvZihzLT5kc2NfZHN0KTsKLSAgICAgICAgYWRkcmVzc19zcGFjZV9ydyhzLT5kbWFfYXMsIGFk
ZHIsIHMtPmF0dHIsICh2b2lkICopICZuZXh0LCA4LCBmYWxzZSk7CisgICAgICAgIGFkZHJlc3Nf
c3BhY2Vfcncocy0+ZG1hX2FzLCBhZGRyLCBzLT5hdHRyLCAmbmV4dCwgOCwgZmFsc2UpOwogICAg
ICAgICB6ZG1hX3B1dF9yZWdhZGRyNjQocywgYmFzZXJlZywgbmV4dCk7CiAgICAgfQogICAgIHJl
dHVybiBuZXh0OwpkaWZmIC0tZ2l0IGEvaHcvbmV0L2NhZGVuY2VfZ2VtLmMgYi9ody9uZXQvY2Fk
ZW5jZV9nZW0uYwppbmRleCA4NzFmY2YyMDMxLi5kZGFiZGIzZjkwIDEwMDY0NAotLS0gYS9ody9u
ZXQvY2FkZW5jZV9nZW0uYworKysgYi9ody9uZXQvY2FkZW5jZV9nZW0uYwpAQCAtODcxLDcgKzg3
MSw3IEBAIHN0YXRpYyB2b2lkIGdlbV9nZXRfcnhfZGVzYyhDYWRlbmNlR0VNU3RhdGUgKnMsIGlu
dCBxKQogCiAgICAgLyogcmVhZCBjdXJyZW50IGRlc2NyaXB0b3IgKi8KICAgICBhZGRyZXNzX3Nw
YWNlX3JlYWQoJnMtPmRtYV9hcywgZGVzY19hZGRyLCBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELAot
ICAgICAgICAgICAgICAgICAgICAgICAodWludDhfdCAqKXMtPnJ4X2Rlc2NbcV0sCisgICAgICAg
ICAgICAgICAgICAgICAgIHMtPnJ4X2Rlc2NbcV0sCiAgICAgICAgICAgICAgICAgICAgICAgIHNp
emVvZih1aW50MzJfdCkgKiBnZW1fZ2V0X2Rlc2NfbGVuKHMsIHRydWUpKTsKIAogICAgIC8qIERl
c2NyaXB0b3Igb3duZWQgYnkgc29mdHdhcmUgPyAqLwpAQCAtMTAyOSw5ICsxMDI5LDggQEAgc3Rh
dGljIHNzaXplX3QgZ2VtX3JlY2VpdmUoTmV0Q2xpZW50U3RhdGUgKm5jLCBjb25zdCB1aW50OF90
ICpidWYsIHNpemVfdCBzaXplKQogCiAgICAgICAgIC8qIERlc2NyaXB0b3Igd3JpdGUtYmFjay4g
ICovCiAgICAgICAgIGRlc2NfYWRkciA9IGdlbV9nZXRfcnhfZGVzY19hZGRyKHMsIHEpOwotICAg
ICAgICBhZGRyZXNzX3NwYWNlX3dyaXRlKCZzLT5kbWFfYXMsIGRlc2NfYWRkciwKLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELAotICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICh1aW50OF90ICopcy0+cnhfZGVzY1txXSwKKyAgICAgICAgYWRkcmVz
c19zcGFjZV93cml0ZSgmcy0+ZG1hX2FzLCBkZXNjX2FkZHIsIE1FTVRYQVRUUlNfVU5TUEVDSUZJ
RUQsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy0+cnhfZGVzY1txXSwKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzaXplb2YodWludDMyX3QpICogZ2VtX2dldF9kZXNjX2xlbihz
LCB0cnVlKSk7CiAKICAgICAgICAgLyogTmV4dCBkZXNjcmlwdG9yICovCkBAIC0xMTM3LDcgKzEx
MzYsNyBAQCBzdGF0aWMgdm9pZCBnZW1fdHJhbnNtaXQoQ2FkZW5jZUdFTVN0YXRlICpzKQogCiAg
ICAgICAgIERCX1BSSU5UKCJyZWFkIGRlc2NyaXB0b3IgMHglIiBIV0FERFJfUFJJeCAiXG4iLCBw
YWNrZXRfZGVzY19hZGRyKTsKICAgICAgICAgYWRkcmVzc19zcGFjZV9yZWFkKCZzLT5kbWFfYXMs
IHBhY2tldF9kZXNjX2FkZHIsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICBNRU1UWEFUVFJT
X1VOU1BFQ0lGSUVELCAodWludDhfdCAqKWRlc2MsCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELCBkZXNjLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2l6ZW9mKHVpbnQzMl90KSAqIGdlbV9nZXRfZGVzY19sZW4ocywgZmFsc2UpKTsKICAgICAg
ICAgLyogSGFuZGxlIGFsbCBkZXNjcmlwdG9ycyBvd25lZCBieSBoYXJkd2FyZSAqLwogICAgICAg
ICB3aGlsZSAodHhfZGVzY19nZXRfdXNlZChkZXNjKSA9PSAwKSB7CkBAIC0xMTg1LDE0ICsxMTg0
LDEyIEBAIHN0YXRpYyB2b2lkIGdlbV90cmFuc21pdChDYWRlbmNlR0VNU3RhdGUgKnMpCiAgICAg
ICAgICAgICAgICAgICogdGhlIHByb2Nlc3Nvci4KICAgICAgICAgICAgICAgICAgKi8KICAgICAg
ICAgICAgICAgICBhZGRyZXNzX3NwYWNlX3JlYWQoJnMtPmRtYV9hcywgZGVzY19hZGRyLAotICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELAot
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodWludDhfdCAqKWRlc2NfZmlyc3Qs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1FTVRYQVRUUlNfVU5TUEVDSUZJ
RUQsIGRlc2NfZmlyc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVv
ZihkZXNjX2ZpcnN0KSk7CiAgICAgICAgICAgICAgICAgdHhfZGVzY19zZXRfdXNlZChkZXNjX2Zp
cnN0KTsKICAgICAgICAgICAgICAgICBhZGRyZXNzX3NwYWNlX3dyaXRlKCZzLT5kbWFfYXMsIGRl
c2NfYWRkciwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNRU1UWEFUVFJTX1VO
U1BFQ0lGSUVELAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1aW50OF90ICop
ZGVzY19maXJzdCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKGRl
c2NfZmlyc3QpKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1FTVRYQVRU
UlNfVU5TUEVDSUZJRUQsIGRlc2NfZmlyc3QsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzaXplb2YoZGVzY19maXJzdCkpOwogICAgICAgICAgICAgICAgIC8qIEFkdmFuY2Ug
dGhlIGhhcmR3YXJlIGN1cnJlbnQgZGVzY3JpcHRvciBwYXN0IHRoaXMgcGFja2V0ICovCiAgICAg
ICAgICAgICAgICAgaWYgKHR4X2Rlc2NfZ2V0X3dyYXAoZGVzYykpIHsKICAgICAgICAgICAgICAg
ICAgICAgcy0+dHhfZGVzY19hZGRyW3FdID0gcy0+cmVnc1tHRU1fVFhRQkFTRV07CkBAIC0xMjQ2
LDggKzEyNDMsOCBAQCBzdGF0aWMgdm9pZCBnZW1fdHJhbnNtaXQoQ2FkZW5jZUdFTVN0YXRlICpz
KQogICAgICAgICAgICAgfQogICAgICAgICAgICAgREJfUFJJTlQoInJlYWQgZGVzY3JpcHRvciAw
eCUiIEhXQUREUl9QUkl4ICJcbiIsIHBhY2tldF9kZXNjX2FkZHIpOwogICAgICAgICAgICAgYWRk
cmVzc19zcGFjZV9yZWFkKCZzLT5kbWFfYXMsIHBhY2tldF9kZXNjX2FkZHIsCi0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELCAodWludDhfdCAqKWRl
c2MsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YodWludDMyX3QpICogZ2Vt
X2dldF9kZXNjX2xlbihzLCBmYWxzZSkpOworICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IE1FTVRYQVRUUlNfVU5TUEVDSUZJRUQsIGRlc2MsCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2l6ZW9mKHVpbnQzMl90KSAqIGdlbV9nZXRfZGVzY19sZW4ocywgZmFsc2UpKTsKICAg
ICAgICAgfQogCiAgICAgICAgIGlmICh0eF9kZXNjX2dldF91c2VkKGRlc2MpKSB7CmRpZmYgLS1n
aXQgYS9ody9uZXQvZHA4MzkzeC5jIGIvaHcvbmV0L2RwODM5M3guYwppbmRleCA1ODBhZTQ0Mzdl
Li5iNDYxMTAxY2ViIDEwMDY0NAotLS0gYS9ody9uZXQvZHA4MzkzeC5jCisrKyBiL2h3L25ldC9k
cDgzOTN4LmMKQEAgLTI3Niw3ICsyNzYsNyBAQCBzdGF0aWMgdm9pZCBkcDgzOTN4X2RvX2xvYWRf
Y2FtKGRwODM5M3hTdGF0ZSAqcykKICAgICB3aGlsZSAocy0+cmVnc1tTT05JQ19DRENdICYgMHgx
ZikgewogICAgICAgICAvKiBGaWxsIGN1cnJlbnQgZW50cnkgKi8KICAgICAgICAgYWRkcmVzc19z
cGFjZV9ydygmcy0+YXMsIGRwODM5M3hfY2RwKHMpLAotICAgICAgICAgICAgTUVNVFhBVFRSU19V
TlNQRUNJRklFRCwgKHVpbnQ4X3QgKilzLT5kYXRhLCBzaXplLCAwKTsKKyAgICAgICAgICAgICAg
ICAgICAgICAgICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELCBzLT5kYXRhLCBzaXplLCAwKTsKICAg
ICAgICAgcy0+Y2FtW2luZGV4XVswXSA9IGRwODM5M3hfZ2V0KHMsIHdpZHRoLCAxKSAmIDB4ZmY7
CiAgICAgICAgIHMtPmNhbVtpbmRleF1bMV0gPSBkcDgzOTN4X2dldChzLCB3aWR0aCwgMSkgPj4g
ODsKICAgICAgICAgcy0+Y2FtW2luZGV4XVsyXSA9IGRwODM5M3hfZ2V0KHMsIHdpZHRoLCAyKSAm
IDB4ZmY7CkBAIC0yOTQsNyArMjk0LDcgQEAgc3RhdGljIHZvaWQgZHA4MzkzeF9kb19sb2FkX2Nh
bShkcDgzOTN4U3RhdGUgKnMpCiAKICAgICAvKiBSZWFkIENBTSBlbmFibGUgKi8KICAgICBhZGRy
ZXNzX3NwYWNlX3J3KCZzLT5hcywgZHA4MzkzeF9jZHAocyksCi0gICAgICAgIE1FTVRYQVRUUlNf
VU5TUEVDSUZJRUQsICh1aW50OF90ICopcy0+ZGF0YSwgc2l6ZSwgMCk7CisgICAgICAgICAgICAg
ICAgICAgICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELCBzLT5kYXRhLCBzaXplLCAwKTsKICAgICBz
LT5yZWdzW1NPTklDX0NFXSA9IGRwODM5M3hfZ2V0KHMsIHdpZHRoLCAwKTsKICAgICBEUFJJTlRG
KCJsb2FkIGNhbSBkb25lLiBjYW0gZW5hYmxlIG1hc2sgMHglMDR4XG4iLCBzLT5yZWdzW1NPTklD
X0NFXSk7CiAKQEAgLTMxMiw3ICszMTIsNyBAQCBzdGF0aWMgdm9pZCBkcDgzOTN4X2RvX3JlYWRf
cnJhKGRwODM5M3hTdGF0ZSAqcykKICAgICB3aWR0aCA9IChzLT5yZWdzW1NPTklDX0RDUl0gJiBT
T05JQ19EQ1JfRFcpID8gMiA6IDE7CiAgICAgc2l6ZSA9IHNpemVvZih1aW50MTZfdCkgKiA0ICog
d2lkdGg7CiAgICAgYWRkcmVzc19zcGFjZV9ydygmcy0+YXMsIGRwODM5M3hfcnJwKHMpLAotICAg
ICAgICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELCAodWludDhfdCAqKXMtPmRhdGEsIHNpemUsIDAp
OworICAgICAgICAgICAgICAgICAgICAgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwgcy0+ZGF0YSwg
c2l6ZSwgMCk7CiAKICAgICAvKiBVcGRhdGUgU09OSUMgcmVnaXN0ZXJzICovCiAgICAgcy0+cmVn
c1tTT05JQ19DUkJBMF0gPSBkcDgzOTN4X2dldChzLCB3aWR0aCwgMCk7CkBAIC00MjcsNyArNDI3
LDcgQEAgc3RhdGljIHZvaWQgZHA4MzkzeF9kb190cmFuc21pdF9wYWNrZXRzKGRwODM5M3hTdGF0
ZSAqcykKICAgICAgICAgcy0+cmVnc1tTT05JQ19UVERBXSA9IHMtPnJlZ3NbU09OSUNfQ1REQV07
CiAgICAgICAgIERQUklOVEYoIlRyYW5zbWl0IHBhY2tldCBhdCAlMDh4XG4iLCBkcDgzOTN4X3R0
ZGEocykpOwogICAgICAgICBhZGRyZXNzX3NwYWNlX3J3KCZzLT5hcywgZHA4MzkzeF90dGRhKHMp
ICsgc2l6ZW9mKHVpbnQxNl90KSAqIHdpZHRoLAotICAgICAgICAgICAgTUVNVFhBVFRSU19VTlNQ
RUNJRklFRCwgKHVpbnQ4X3QgKilzLT5kYXRhLCBzaXplLCAwKTsKKyAgICAgICAgICAgICAgICAg
ICAgICAgICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELCBzLT5kYXRhLCBzaXplLCAwKTsKICAgICAg
ICAgdHhfbGVuID0gMDsKIAogICAgICAgICAvKiBVcGRhdGUgcmVnaXN0ZXJzICovCkBAIC00NjEs
NyArNDYxLDcgQEAgc3RhdGljIHZvaWQgZHA4MzkzeF9kb190cmFuc21pdF9wYWNrZXRzKGRwODM5
M3hTdGF0ZSAqcykKICAgICAgICAgICAgICAgICBzaXplID0gc2l6ZW9mKHVpbnQxNl90KSAqIDMg
KiB3aWR0aDsKICAgICAgICAgICAgICAgICBhZGRyZXNzX3NwYWNlX3J3KCZzLT5hcywKICAgICAg
ICAgICAgICAgICAgICAgZHA4MzkzeF90dGRhKHMpICsgc2l6ZW9mKHVpbnQxNl90KSAqICg0ICsg
MyAqIGkpICogd2lkdGgsCi0gICAgICAgICAgICAgICAgICAgIE1FTVRYQVRUUlNfVU5TUEVDSUZJ
RUQsICh1aW50OF90ICopcy0+ZGF0YSwgc2l6ZSwgMCk7CisgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELCBzLT5kYXRhLCBzaXplLCAwKTsKICAg
ICAgICAgICAgICAgICBzLT5yZWdzW1NPTklDX1RTQTBdID0gZHA4MzkzeF9nZXQocywgd2lkdGgs
IDApOwogICAgICAgICAgICAgICAgIHMtPnJlZ3NbU09OSUNfVFNBMV0gPSBkcDgzOTN4X2dldChz
LCB3aWR0aCwgMSk7CiAgICAgICAgICAgICAgICAgcy0+cmVnc1tTT05JQ19URlNdID0gZHA4Mzkz
eF9nZXQocywgd2lkdGgsIDIpOwpAQCAtNDk1LDE3ICs0OTUsMTcgQEAgc3RhdGljIHZvaWQgZHA4
MzkzeF9kb190cmFuc21pdF9wYWNrZXRzKGRwODM5M3hTdGF0ZSAqcykKICAgICAgICAgICAgICAg
ICAgICAgcy0+cmVnc1tTT05JQ19UQ1JdICYgMHgwZmZmKTsgLyogc3RhdHVzICovCiAgICAgICAg
IHNpemUgPSBzaXplb2YodWludDE2X3QpICogd2lkdGg7CiAgICAgICAgIGFkZHJlc3Nfc3BhY2Vf
cncoJnMtPmFzLAotICAgICAgICAgICAgZHA4MzkzeF90dGRhKHMpLAotICAgICAgICAgICAgTUVN
VFhBVFRSU19VTlNQRUNJRklFRCwgKHVpbnQ4X3QgKilzLT5kYXRhLCBzaXplLCAxKTsKKyAgICAg
ICAgICAgICAgICAgICAgICAgICBkcDgzOTN4X3R0ZGEocyksCisgICAgICAgICAgICAgICAgICAg
ICAgICAgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwgcy0+ZGF0YSwgc2l6ZSwgMSk7CiAKICAgICAg
ICAgaWYgKCEocy0+cmVnc1tTT05JQ19DUl0gJiBTT05JQ19DUl9IVFgpKSB7CiAgICAgICAgICAg
ICAvKiBSZWFkIGZvb3RlciBvZiBwYWNrZXQgKi8KICAgICAgICAgICAgIHNpemUgPSBzaXplb2Yo
dWludDE2X3QpICogd2lkdGg7CiAgICAgICAgICAgICBhZGRyZXNzX3NwYWNlX3J3KCZzLT5hcywK
LSAgICAgICAgICAgICAgICBkcDgzOTN4X3R0ZGEocykgKworICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBkcDgzOTN4X3R0ZGEocykgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
aXplb2YodWludDE2X3QpICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDQgKyAzICog
cy0+cmVnc1tTT05JQ19URkNdKSAqIHdpZHRoLAotICAgICAgICAgICAgICAgIE1FTVRYQVRUUlNf
VU5TUEVDSUZJRUQsICh1aW50OF90ICopcy0+ZGF0YSwgc2l6ZSwgMCk7CisgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIE1FTVRYQVRUUlNfVU5TUEVDSUZJRUQsIHMtPmRhdGEsIHNpemUsIDAp
OwogICAgICAgICAgICAgcy0+cmVnc1tTT05JQ19DVERBXSA9IGRwODM5M3hfZ2V0KHMsIHdpZHRo
LCAwKSAmIH4weDE7CiAgICAgICAgICAgICBpZiAoZHA4MzkzeF9nZXQocywgd2lkdGgsIDApICYg
MHgxKSB7CiAgICAgICAgICAgICAgICAgLyogRU9MIGRldGVjdGVkICovCkBAIC03NjgsNyArNzY4
LDcgQEAgc3RhdGljIHNzaXplX3QgZHA4MzkzeF9yZWNlaXZlKE5ldENsaWVudFN0YXRlICpuYywg
Y29uc3QgdWludDhfdCAqIGJ1ZiwKICAgICAgICAgc2l6ZSA9IHNpemVvZih1aW50MTZfdCkgKiAx
ICogd2lkdGg7CiAgICAgICAgIGFkZHJlc3MgPSBkcDgzOTN4X2NyZGEocykgKyBzaXplb2YodWlu
dDE2X3QpICogNSAqIHdpZHRoOwogICAgICAgICBhZGRyZXNzX3NwYWNlX3J3KCZzLT5hcywgYWRk
cmVzcywgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAo
dWludDhfdCAqKXMtPmRhdGEsIHNpemUsIDApOworICAgICAgICAgICAgICAgICAgICAgICAgIHMt
PmRhdGEsIHNpemUsIDApOwogICAgICAgICBpZiAoZHA4MzkzeF9nZXQocywgd2lkdGgsIDApICYg
MHgxKSB7CiAgICAgICAgICAgICAvKiBTdGlsbCBFT0wgOyBzdG9wIHJlY2VwdGlvbiAqLwogICAg
ICAgICAgICAgcmV0dXJuIC0xOwpAQCAtNzkwLDcgKzc5MCw3IEBAIHN0YXRpYyBzc2l6ZV90IGRw
ODM5M3hfcmVjZWl2ZShOZXRDbGllbnRTdGF0ZSAqbmMsIGNvbnN0IHVpbnQ4X3QgKiBidWYsCiAg
ICAgYWRkcmVzc19zcGFjZV93cml0ZSgmcy0+YXMsIGFkZHJlc3MsIE1FTVRYQVRUUlNfVU5TUEVD
SUZJRUQsIGJ1ZiwgcnhfbGVuKTsKICAgICBhZGRyZXNzICs9IHJ4X2xlbjsKICAgICBhZGRyZXNz
X3NwYWNlX3J3KCZzLT5hcywgYWRkcmVzcywKLSAgICAgICAgTUVNVFhBVFRSU19VTlNQRUNJRklF
RCwgKHVpbnQ4X3QgKikmY2hlY2tzdW0sIDQsIDEpOworICAgICAgICAgICAgICAgICAgICAgTUVN
VFhBVFRSU19VTlNQRUNJRklFRCwgJmNoZWNrc3VtLCA0LCAxKTsKICAgICByeF9sZW4gKz0gNDsK
ICAgICBzLT5yZWdzW1NPTklDX0NSQkExXSA9IGFkZHJlc3MgPj4gMTY7CiAgICAgcy0+cmVnc1tT
T05JQ19DUkJBMF0gPSBhZGRyZXNzICYgMHhmZmZmOwpAQCAtODE5LDEyICs4MTksMTIgQEAgc3Rh
dGljIHNzaXplX3QgZHA4MzkzeF9yZWNlaXZlKE5ldENsaWVudFN0YXRlICpuYywgY29uc3QgdWlu
dDhfdCAqIGJ1ZiwKICAgICBkcDgzOTN4X3B1dChzLCB3aWR0aCwgNCwgcy0+cmVnc1tTT05JQ19S
U0NdKTsgLyogc2VxX25vICovCiAgICAgc2l6ZSA9IHNpemVvZih1aW50MTZfdCkgKiA1ICogd2lk
dGg7CiAgICAgYWRkcmVzc19zcGFjZV9ydygmcy0+YXMsIGRwODM5M3hfY3JkYShzKSwKLSAgICAg
ICAgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwgKHVpbnQ4X3QgKilzLT5kYXRhLCBzaXplLCAxKTsK
KyAgICAgICAgICAgICAgICAgICAgIE1FTVRYQVRUUlNfVU5TUEVDSUZJRUQsIHMtPmRhdGEsIHNp
emUsIDEpOwogCiAgICAgLyogTW92ZSB0byBuZXh0IGRlc2NyaXB0b3IgKi8KICAgICBzaXplID0g
c2l6ZW9mKHVpbnQxNl90KSAqIHdpZHRoOwogICAgIGFkZHJlc3Nfc3BhY2VfcncoJnMtPmFzLCBk
cDgzOTN4X2NyZGEocykgKyBzaXplb2YodWludDE2X3QpICogNSAqIHdpZHRoLAotICAgICAgICBN
RU1UWEFUVFJTX1VOU1BFQ0lGSUVELCAodWludDhfdCAqKXMtPmRhdGEsIHNpemUsIDApOworICAg
ICAgICAgICAgICAgICAgICAgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwgcy0+ZGF0YSwgc2l6ZSwg
MCk7CiAgICAgcy0+cmVnc1tTT05JQ19MTEZBXSA9IGRwODM5M3hfZ2V0KHMsIHdpZHRoLCAwKTsK
ICAgICBpZiAocy0+cmVnc1tTT05JQ19MTEZBXSAmIDB4MSkgewogICAgICAgICAvKiBFT0wgZGV0
ZWN0ZWQgKi8KQEAgLTgzOCw3ICs4MzgsNyBAQCBzdGF0aWMgc3NpemVfdCBkcDgzOTN4X3JlY2Vp
dmUoTmV0Q2xpZW50U3RhdGUgKm5jLCBjb25zdCB1aW50OF90ICogYnVmLAogICAgICAgICB9CiAg
ICAgICAgIHMtPmRhdGFbMF0gPSAwOwogICAgICAgICBhZGRyZXNzX3NwYWNlX3J3KCZzLT5hcywg
b2Zmc2V0LCBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELAotICAgICAgICAgICAgICAgICAgICAgICAg
ICh1aW50OF90ICopcy0+ZGF0YSwgc2l6ZW9mKHVpbnQxNl90KSwgMSk7CisgICAgICAgICAgICAg
ICAgICAgICAgICAgcy0+ZGF0YSwgc2l6ZW9mKHVpbnQxNl90KSwgMSk7CiAgICAgICAgIHMtPnJl
Z3NbU09OSUNfQ1JEQV0gPSBzLT5yZWdzW1NPTklDX0xMRkFdOwogICAgICAgICBzLT5yZWdzW1NP
TklDX0lTUl0gfD0gU09OSUNfSVNSX1BLVFJYOwogICAgICAgICBzLT5yZWdzW1NPTklDX1JTQ10g
PSAocy0+cmVnc1tTT05JQ19SU0NdICYgMHhmZjAwKSB8ICgoKHMtPnJlZ3NbU09OSUNfUlNDXSAm
IDB4MDBmZikgKyAxKSAmIDB4MDBmZik7CmRpZmYgLS1naXQgYS9ody9zMzkweC9jc3MuYyBiL2h3
L3MzOTB4L2Nzcy5jCmluZGV4IDg0NGNhYWI0MDguLmYyN2Y4YzQ1YTUgMTAwNjQ0Ci0tLSBhL2h3
L3MzOTB4L2Nzcy5jCisrKyBiL2h3L3MzOTB4L2Nzcy5jCkBAIC04NzUsNyArODc1LDcgQEAgc3Rh
dGljIGlubGluZSBpbnQgaWRhX3JlYWRfbmV4dF9pZGF3KENjd0RhdGFTdHJlYW0gKmNkcykKICAg
ICAgICAgICAgIHJldHVybiAtRUlOVkFMOyAvKiBjaGFubmVsIHByb2dyYW0gY2hlY2sgKi8KICAg
ICAgICAgfQogICAgICAgICByZXQgPSBhZGRyZXNzX3NwYWNlX3J3KCZhZGRyZXNzX3NwYWNlX21l
bW9yeSwgaWRhd19hZGRyLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1FTVRYQVRU
UlNfVU5TUEVDSUZJRUQsICh2b2lkICopICZpZGF3LmZtdDIsCisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwgJmlkYXcuZm10MiwKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YoaWRhdy5mbXQyKSwgZmFsc2UpOwogICAgICAg
ICBjZHMtPmNkYSA9IGJlNjRfdG9fY3B1KGlkYXcuZm10Mik7CiAgICAgfSBlbHNlIHsKQEAgLTg4
NCw3ICs4ODQsNyBAQCBzdGF0aWMgaW5saW5lIGludCBpZGFfcmVhZF9uZXh0X2lkYXcoQ2N3RGF0
YVN0cmVhbSAqY2RzKQogICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7IC8qIGNoYW5uZWwgcHJv
Z3JhbSBjaGVjayAqLwogICAgICAgICB9CiAgICAgICAgIHJldCA9IGFkZHJlc3Nfc3BhY2Vfcnco
JmFkZHJlc3Nfc3BhY2VfbWVtb3J5LCBpZGF3X2FkZHIsCi0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwgKHZvaWQgKikgJmlkYXcuZm10MSwKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELCAmaWRh
dy5mbXQxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVvZihpZGF3LmZtdDEp
LCBmYWxzZSk7CiAgICAgICAgIGNkcy0+Y2RhID0gYmU2NF90b19jcHUoaWRhdy5mbXQxKTsKICAg
ICAgICAgaWYgKGNkcy0+Y2RhICYgMHg4MDAwMDAwMCkgewpkaWZmIC0tZ2l0IGEvcXRlc3QuYyBi
L3F0ZXN0LmMKaW5kZXggMTI0MzJmOTljZi4uNjVlMzNiODBlMyAxMDA2NDQKLS0tIGEvcXRlc3Qu
YworKysgYi9xdGVzdC5jCkBAIC00MzUsMTcgKzQzNSwxNyBAQCBzdGF0aWMgdm9pZCBxdGVzdF9w
cm9jZXNzX2NvbW1hbmQoQ2hhckJhY2tlbmQgKmNociwgZ2NoYXIgKip3b3JkcykKICAgICAgICAg
ICAgIHVpbnQxNl90IGRhdGEgPSB2YWx1ZTsKICAgICAgICAgICAgIHRzd2FwMTZzKCZkYXRhKTsK
ICAgICAgICAgICAgIGFkZHJlc3Nfc3BhY2VfcncoZmlyc3RfY3B1LT5hcywgYWRkciwgTUVNVFhB
VFRSU19VTlNQRUNJRklFRCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHVpbnQ4X3Qg
KikgJmRhdGEsIDIsIHRydWUpOworICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmZGF0YSwg
MiwgdHJ1ZSk7CiAgICAgICAgIH0gZWxzZSBpZiAod29yZHNbMF1bNV0gPT0gJ2wnKSB7CiAgICAg
ICAgICAgICB1aW50MzJfdCBkYXRhID0gdmFsdWU7CiAgICAgICAgICAgICB0c3dhcDMycygmZGF0
YSk7CiAgICAgICAgICAgICBhZGRyZXNzX3NwYWNlX3J3KGZpcnN0X2NwdS0+YXMsIGFkZHIsIE1F
TVRYQVRUUlNfVU5TUEVDSUZJRUQsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1aW50
OF90ICopICZkYXRhLCA0LCB0cnVlKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmRh
dGEsIDQsIHRydWUpOwogICAgICAgICB9IGVsc2UgaWYgKHdvcmRzWzBdWzVdID09ICdxJykgewog
ICAgICAgICAgICAgdWludDY0X3QgZGF0YSA9IHZhbHVlOwogICAgICAgICAgICAgdHN3YXA2NHMo
JmRhdGEpOwogICAgICAgICAgICAgYWRkcmVzc19zcGFjZV9ydyhmaXJzdF9jcHUtPmFzLCBhZGRy
LCBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAo
dWludDhfdCAqKSAmZGF0YSwgOCwgdHJ1ZSk7CisgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICZkYXRhLCA4LCB0cnVlKTsKICAgICAgICAgfQogICAgICAgICBxdGVzdF9zZW5kX3ByZWZpeChj
aHIpOwogICAgICAgICBxdGVzdF9zZW5kKGNociwgIk9LXG4iKTsKQEAgLTQ2OSwxNiArNDY5LDE2
IEBAIHN0YXRpYyB2b2lkIHF0ZXN0X3Byb2Nlc3NfY29tbWFuZChDaGFyQmFja2VuZCAqY2hyLCBn
Y2hhciAqKndvcmRzKQogICAgICAgICB9IGVsc2UgaWYgKHdvcmRzWzBdWzRdID09ICd3Jykgewog
ICAgICAgICAgICAgdWludDE2X3QgZGF0YTsKICAgICAgICAgICAgIGFkZHJlc3Nfc3BhY2Vfcnco
Zmlyc3RfY3B1LT5hcywgYWRkciwgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwKLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgKHVpbnQ4X3QgKikgJmRhdGEsIDIsIGZhbHNlKTsKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgJmRhdGEsIDIsIGZhbHNlKTsKICAgICAgICAgICAgIHZhbHVl
ID0gdHN3YXAxNihkYXRhKTsKICAgICAgICAgfSBlbHNlIGlmICh3b3Jkc1swXVs0XSA9PSAnbCcp
IHsKICAgICAgICAgICAgIHVpbnQzMl90IGRhdGE7CiAgICAgICAgICAgICBhZGRyZXNzX3NwYWNl
X3J3KGZpcnN0X2NwdS0+YXMsIGFkZHIsIE1FTVRYQVRUUlNfVU5TUEVDSUZJRUQsCi0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICh1aW50OF90ICopICZkYXRhLCA0LCBmYWxzZSk7CisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICZkYXRhLCA0LCBmYWxzZSk7CiAgICAgICAgICAgICB2
YWx1ZSA9IHRzd2FwMzIoZGF0YSk7CiAgICAgICAgIH0gZWxzZSBpZiAod29yZHNbMF1bNF0gPT0g
J3EnKSB7CiAgICAgICAgICAgICBhZGRyZXNzX3NwYWNlX3J3KGZpcnN0X2NwdS0+YXMsIGFkZHIs
IE1FTVRYQVRUUlNfVU5TUEVDSUZJRUQsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1
aW50OF90ICopICZ2YWx1ZSwgOCwgZmFsc2UpOworICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAmdmFsdWUsIDgsIGZhbHNlKTsKICAgICAgICAgICAgIHRzd2FwNjRzKCZ2YWx1ZSk7CiAgICAg
ICAgIH0KICAgICAgICAgcXRlc3Rfc2VuZF9wcmVmaXgoY2hyKTsKZGlmZiAtLWdpdCBhL3Rhcmdl
dC9pMzg2L2h2Zi94ODZfbW11LmMgYi90YXJnZXQvaTM4Ni9odmYveDg2X21tdS5jCmluZGV4IGQ1
YTBlZmU3MTguLjZhNjIwNjQzYzEgMTAwNjQ0Ci0tLSBhL3RhcmdldC9pMzg2L2h2Zi94ODZfbW11
LmMKKysrIGIvdGFyZ2V0L2kzODYvaHZmL3g4Nl9tbXUuYwpAQCAtODksNyArODksNyBAQCBzdGF0
aWMgYm9vbCBnZXRfcHRfZW50cnkoc3RydWN0IENQVVN0YXRlICpjcHUsIHN0cnVjdCBncHRfdHJh
bnNsYXRpb24gKnB0LAogCiAgICAgaW5kZXggPSBncHRfZW50cnkocHQtPmd2YSwgbGV2ZWwsIHBh
ZSk7CiAgICAgYWRkcmVzc19zcGFjZV9ydygmYWRkcmVzc19zcGFjZV9tZW1vcnksIGdwYSArIGlu
ZGV4ICogcHRlX3NpemUocGFlKSwKLSAgICAgICAgICAgICAgICAgICAgIE1FTVRYQVRUUlNfVU5T
UEVDSUZJRUQsICh1aW50OF90ICopJnB0ZSwgcHRlX3NpemUocGFlKSwgMCk7CisgICAgICAgICAg
ICAgICAgICAgICBNRU1UWEFUVFJTX1VOU1BFQ0lGSUVELCAmcHRlLCBwdGVfc2l6ZShwYWUpLCAw
KTsKIAogICAgIHB0LT5wdGVbbGV2ZWwgLSAxXSA9IHB0ZTsKIApkaWZmIC0tZ2l0IGEvdGFyZ2V0
L2kzODYvd2hweC1hbGwuYyBiL3RhcmdldC9pMzg2L3docHgtYWxsLmMKaW5kZXggM2VkMmFhMTg5
Mi4uMGExZjI0NDc1MSAxMDA2NDQKLS0tIGEvdGFyZ2V0L2kzODYvd2hweC1hbGwuYworKysgYi90
YXJnZXQvaTM4Ni93aHB4LWFsbC5jCkBAIC01NDAsNyArNTQwLDcgQEAgc3RhdGljIEhSRVNVTFQg
Q0FMTEJBQ0sgd2hweF9lbXVfaW9wb3J0X2NhbGxiYWNrKAogewogICAgIE1lbVR4QXR0cnMgYXR0
cnMgPSB7IDAgfTsKICAgICBhZGRyZXNzX3NwYWNlX3J3KCZhZGRyZXNzX3NwYWNlX2lvLCBJb0Fj
Y2Vzcy0+UG9ydCwgYXR0cnMsCi0gICAgICAgICAgICAgICAgICAgICAodWludDhfdCAqKSZJb0Fj
Y2Vzcy0+RGF0YSwgSW9BY2Nlc3MtPkFjY2Vzc1NpemUsCisgICAgICAgICAgICAgICAgICAgICAm
SW9BY2Nlc3MtPkRhdGEsIElvQWNjZXNzLT5BY2Nlc3NTaXplLAogICAgICAgICAgICAgICAgICAg
ICAgSW9BY2Nlc3MtPkRpcmVjdGlvbik7CiAgICAgcmV0dXJuIFNfT0s7CiB9CmRpZmYgLS1naXQg
YS90YXJnZXQvczM5MHgvbW11X2hlbHBlci5jIGIvdGFyZ2V0L3MzOTB4L21tdV9oZWxwZXIuYwpp
bmRleCBjOWYzZjM0NzUwLi4wYmUyZjMwMGJiIDEwMDY0NAotLS0gYS90YXJnZXQvczM5MHgvbW11
X2hlbHBlci5jCisrKyBiL3RhcmdldC9zMzkweC9tbXVfaGVscGVyLmMKQEAgLTEwNiw3ICsxMDYs
NyBAQCBzdGF0aWMgaW5saW5lIGJvb2wgcmVhZF90YWJsZV9lbnRyeShDUFVTMzkwWFN0YXRlICpl
bnYsIGh3YWRkciBnYWRkciwKICAgICAgKiBXZSB0cmVhdCB0aGVtIGFzIGFic29sdXRlIGFkZHJl
c3NlcyBhbmQgZG9uJ3Qgd3JhcCB0aGVtLgogICAgICAqLwogICAgIGlmICh1bmxpa2VseShhZGRy
ZXNzX3NwYWNlX3JlYWQoY3MtPmFzLCBnYWRkciwgTUVNVFhBVFRSU19VTlNQRUNJRklFRCwKLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1aW50OF90ICopZW50cnksIHNpemVv
ZigqZW50cnkpKSAhPQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnks
IHNpemVvZigqZW50cnkpKSAhPQogICAgICAgICAgICAgICAgICBNRU1UWF9PSykpIHsKICAgICAg
ICAgcmV0dXJuIGZhbHNlOwogICAgIH0KLS0gCjIuMjEuMQoKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRl
dmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFp
bG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

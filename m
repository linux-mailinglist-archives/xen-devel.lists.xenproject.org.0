Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id EEAA1A66D9
	for <lists+xen-devel@lfdr.de>; Tue,  3 Sep 2019 12:54:34 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1i56Oy-00059a-Gp; Tue, 03 Sep 2019 10:51:08 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=CRa/=W6=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1i56Ox-00059V-I4
 for xen-devel@lists.xenproject.org; Tue, 03 Sep 2019 10:51:07 +0000
X-Inumbo-ID: baaa2bdc-ce38-11e9-ac23-bc764e2007e4
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id baaa2bdc-ce38-11e9-ac23-bc764e2007e4;
 Tue, 03 Sep 2019 10:51:06 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id E001BAE4B;
 Tue,  3 Sep 2019 10:51:04 +0000 (UTC)
To: Juergen Gross <jgross@suse.com>, Julien Grall <julien.grall@arm.com>
References: <20190828080028.18205-1-jgross@suse.com>
 <20190828080028.18205-5-jgross@suse.com>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <1c59fe9b-299f-61b9-bd9c-35930a759728@suse.com>
Date: Tue, 3 Sep 2019 12:51:08 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190828080028.18205-5-jgross@suse.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v3 4/4] xen: add per-cpu buffer option to
 debugtrace
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 xen-devel@lists.xenproject.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMjguMDguMjAxOSAxMDowMCwgSnVlcmdlbiBHcm9zcyB3cm90ZToKPiBAQCAtMjQsMzIgKzI1
LDYyIEBAIHN0cnVjdCBkZWJ1Z3RyYWNlX2RhdGFfcyB7Cj4gIH07Cj4gIAo+ICBzdGF0aWMgc3Ry
dWN0IGRlYnVndHJhY2VfZGF0YV9zICpkZWJ0cl9kYXRhOwo+ICtzdGF0aWMgREVGSU5FX1BFUl9D
UFUoc3RydWN0IGRlYnVndHJhY2VfZGF0YV9zICosIGRlYnRyX2NwdV9kYXRhKTsKPiAgCj4gLXN0
YXRpYyB1bnNpZ25lZCBpbnQgZGVidWd0cmFjZV9raWxvYnl0ZXMgPSAxMjg7Cj4gK3N0YXRpYyB1
bnNpZ25lZCBpbnQgZGVidWd0cmFjZV9ieXRlcyA9IDEyOCA8PCAxMDsKCkFuZCBhZnRlciBwYXRj
aCAzIHRoaXMgaXMgbm93IGxlZnQgYXMgInVuc2lnbmVkIGludCI/Cgo+ICtzdGF0aWMgYm9vbCBk
ZWJ1Z3RyYWNlX3Blcl9jcHU7Cj4gIHN0YXRpYyBib29sIGRlYnVndHJhY2VfdXNlZDsKPiAgc3Rh
dGljIERFRklORV9TUElOTE9DSyhkZWJ1Z3RyYWNlX2xvY2spOwo+IC1pbnRlZ2VyX3BhcmFtKCJk
ZWJ1Z3RyYWNlIiwgZGVidWd0cmFjZV9raWxvYnl0ZXMpOwo+ICAKPiAtc3RhdGljIHZvaWQgZGVi
dWd0cmFjZV9kdW1wX3dvcmtlcih2b2lkKQo+ICtzdGF0aWMgaW50IF9faW5pdCBkZWJ1Z3RyYWNl
X3BhcnNlX3BhcmFtKGNvbnN0IGNoYXIgKnMpCj4gK3sKPiArICAgIGlmICggIXN0cm5jbXAocywg
ImNwdToiLCA0KSApCj4gKyAgICB7Cj4gKyAgICAgICAgZGVidWd0cmFjZV9wZXJfY3B1ID0gdHJ1
ZTsKPiArICAgICAgICBzICs9IDQ7Cj4gKyAgICB9Cj4gKyAgICBkZWJ1Z3RyYWNlX2J5dGVzID0g
IHBhcnNlX3NpemVfYW5kX3VuaXQocywgTlVMTCk7CgpTdHJheSBkb3VibGUgYmxhbmsuCgo+ICsg
ICAgcmV0dXJuIDA7Cj4gK30KPiArY3VzdG9tX3BhcmFtKCJkZWJ1Z3RyYWNlIiwgZGVidWd0cmFj
ZV9wYXJzZV9wYXJhbSk7Cj4gKwo+ICtzdGF0aWMgdm9pZCBkZWJ1Z3RyYWNlX2R1bXBfYnVmZmVy
KHN0cnVjdCBkZWJ1Z3RyYWNlX2RhdGFfcyAqZGF0YSwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjb25zdCBjaGFyICp3aGljaCkKPiAgewo+IC0gICAgaWYgKCAhZGVidHJf
ZGF0YSB8fCAhZGVidWd0cmFjZV91c2VkICkKPiArICAgIGlmICggIWRhdGEgKQo+ICAgICAgICAg
IHJldHVybjsKPiAgCj4gLSAgICBwcmludGsoImRlYnVndHJhY2VfZHVtcCgpIHN0YXJ0aW5nXG4i
KTsKPiArICAgIHByaW50aygiZGVidWd0cmFjZV9kdW1wKCkgJXMgYnVmZmVyIHN0YXJ0aW5nXG4i
LCB3aGljaCk7Cj4gIAo+ICAgICAgLyogUHJpbnQgb2xkZXN0IHBvcnRpb24gb2YgdGhlIHJpbmcu
ICovCj4gLSAgICBBU1NFUlQoZGVidHJfZGF0YS0+YnVmW2RlYnRyX2RhdGEtPmJ5dGVzIC0gMV0g
PT0gMCk7Cj4gLSAgICBpZiAoIGRlYnRyX2RhdGEtPmJ1ZltkZWJ0cl9kYXRhLT5wcmRdICE9ICdc
MCcgKQo+IC0gICAgICAgIGNvbnNvbGVfc2VyaWFsX3B1dHMoJmRlYnRyX2RhdGEtPmJ1ZltkZWJ0
cl9kYXRhLT5wcmRdLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidHJfZGF0YS0+
Ynl0ZXMgLSBkZWJ0cl9kYXRhLT5wcmQgLSAxKTsKPiArICAgIEFTU0VSVChkYXRhLT5idWZbZGF0
YS0+Ynl0ZXMgLSAxXSA9PSAwKTsKPiArICAgIGlmICggZGF0YS0+YnVmW2RhdGEtPnByZF0gIT0g
J1wwJyApCj4gKyAgICAgICAgY29uc29sZV9zZXJpYWxfcHV0cygmZGF0YS0+YnVmW2RhdGEtPnBy
ZF0sIGRhdGEtPmJ5dGVzIC0gZGF0YS0+cHJkIC0gMSk7CgpTZWVpbmcgdGhpcyBnZXR0aW5nIGNo
YW5nZWQgeWV0IGFub3RoZXIgdGltZSBJIG5vdyByZWFsbHkgd29uZGVyIGlmCnRoaXMgbnVsIHRl
cm1pbmF0aW9uIGlzIHJlYWxseSBzdGlsbCBuZWVkZWQgbm93IHRoYXQgYSBzaXplIGlzIGJlaW5n
CnBhc3NlZCBpbnRvIHRoZSBhY3R1YWwgb3V0cHV0IGZ1bmN0aW9uLiBJZiB5b3UgZ290IHJpZCBv
ZiB0aGlzIGluIGFuCmVhcmx5IHByZXJlcSBwYXRjaCwgdGhlIHN1YnNlcXVlbnQgKHRvIHRoYXQg
b25lKSBvbmVzIHdvdWxkIHNocmluay4KCkZ1cnRoZXJtb3JlIEkgY2FuJ3QgaGVscCB0aGlua2lu
ZyB0aGF0IHNhaWQgY2hhbmdlIHRvIHBhc3MgdGhlIHNpemUKaW50byB0aGUgYWN0dWFsIG91dHB1
dCBmdW5jdGlvbnMgYWN0dWFsbHkgYnJva2UgdGhlIGxvZ2ljIGhlcmU6IEJ5Cm1lbXNldCgpLWlu
ZyB0aGUgYnVmZmVyIHRvIHplcm8sIG91dHB1dCBvbiBhIHN1YnNlcXVlbnQgaW52b2NhdGlvbgp3
b3VsZCBoYXZlIGJlZW4gc3VpdGFibHkgdHJ1bmNhdGVkIChpbiBmYWN0LCB1bnRpbCBwcmQgaGFk
IHdyYXBwZWQsCkkgdGhpbmsgaXQgd291bGQgaGF2ZSBnb3QgdHJ1bmNhdGVkIG1vcmUgdGhhbiBp
bnRlbmRlZCkuIEp1bGllbiwKY2FuIHlvdSBwbGVhc2UgbG9vayBpbnRvIHRoaXMgYXBwYXJlbnQg
cmVncmVzc2lvbj8KCj4gQEAgLTE1NiwzMyArMTk1LDcwIEBAIHN0YXRpYyB2b2lkIGRlYnVndHJh
Y2Vfa2V5KHVuc2lnbmVkIGNoYXIga2V5KQo+ICAgICAgZGVidWd0cmFjZV90b2dnbGUoKTsKPiAg
fQo+ICAKPiAtc3RhdGljIGludCBfX2luaXQgZGVidWd0cmFjZV9pbml0KHZvaWQpCj4gK3N0YXRp
YyB2b2lkIGRlYnVndHJhY2VfYWxsb2NfYnVmZmVyKHN0cnVjdCBkZWJ1Z3RyYWNlX2RhdGFfcyAq
KnB0cikKPiAgewo+ICAgICAgaW50IG9yZGVyOwo+IC0gICAgdW5zaWduZWQgbG9uZyBrYnl0ZXMs
IGJ5dGVzOwo+ICAgICAgc3RydWN0IGRlYnVndHJhY2VfZGF0YV9zICpkYXRhOwo+ICAKPiAtICAg
IC8qIFJvdW5kIHNpemUgZG93biB0byBuZXh0IHBvd2VyIG9mIHR3by4gKi8KPiAtICAgIHdoaWxl
ICggKGtieXRlcyA9IChkZWJ1Z3RyYWNlX2tpbG9ieXRlcyAmIChkZWJ1Z3RyYWNlX2tpbG9ieXRl
cy0xKSkpICE9IDAgKQo+IC0gICAgICAgIGRlYnVndHJhY2Vfa2lsb2J5dGVzID0ga2J5dGVzOwo+
IC0KPiAtICAgIGJ5dGVzID0gZGVidWd0cmFjZV9raWxvYnl0ZXMgPDwgMTA7Cj4gLSAgICBpZiAo
IGJ5dGVzID09IDAgKQo+IC0gICAgICAgIHJldHVybiAwOwo+ICsgICAgaWYgKCBkZWJ1Z3RyYWNl
X2J5dGVzIDwgUEFHRV9TSVpFIHx8ICpwdHIgKQoKV2h5IHRoZSBjaGVjayBhZ2FpbnN0IFBBR0Vf
U0laRT8KCj4gKyAgICAgICAgcmV0dXJuOwo+ICAKPiAtICAgIG9yZGVyID0gZ2V0X29yZGVyX2Zy
b21fYnl0ZXMoYnl0ZXMpOwo+ICsgICAgb3JkZXIgPSBnZXRfb3JkZXJfZnJvbV9ieXRlcyhkZWJ1
Z3RyYWNlX2J5dGVzKTsKPiAgICAgIGRhdGEgPSBhbGxvY194ZW5oZWFwX3BhZ2VzKG9yZGVyLCAw
KTsKPiAgICAgIGlmICggIWRhdGEgKQo+IC0gICAgICAgIHJldHVybiAtRU5PTUVNOwo+ICsgICAg
ewo+ICsgICAgICAgIHByaW50aygiZmFpbGVkIHRvIGFsbG9jYXRlIGRlYnVndHJhY2UgYnVmZmVy
XG4iKTsKClBlcmhhcHMgYmV0dGVyIHRvIGFsc28gaW5kaWNhdGUgd2hpY2gvd2hvc2UgYnVmZmVy
PwoKPiArICAgICAgICByZXR1cm47Cj4gKyAgICB9Cj4gKwo+ICsgICAgbWVtc2V0KGRhdGEsICdc
MCcsIGRlYnVndHJhY2VfYnl0ZXMpOwo+ICsgICAgZGF0YS0+Ynl0ZXMgPSBkZWJ1Z3RyYWNlX2J5
dGVzIC0gc2l6ZW9mKCpkYXRhKTsKPiArCj4gKyAgICAqcHRyID0gZGF0YTsKPiArfQo+ICsKPiAr
c3RhdGljIGludCBkZWJ1Z3RyYWNlX2NwdV9jYWxsYmFjayhzdHJ1Y3Qgbm90aWZpZXJfYmxvY2sg
Km5mYiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25n
IGFjdGlvbiwgdm9pZCAqaGNwdSkKPiArewo+ICsgICAgdW5zaWduZWQgaW50IGNwdSA9ICh1bnNp
Z25lZCBsb25nKWhjcHU7Cj4gKwo+ICsgICAgLyogQnVmZmVycyBhcmUgb25seSBldmVyIGFsbG9j
YXRlZCwgbmV2ZXIgZnJlZWQuICovCj4gKyAgICBzd2l0Y2ggKCBhY3Rpb24gKQo+ICsgICAgewo+
ICsgICAgY2FzZSBDUFVfVVBfUFJFUEFSRToKPiArICAgICAgICBkZWJ1Z3RyYWNlX2FsbG9jX2J1
ZmZlcigmcGVyX2NwdShkZWJ0cl9jcHVfZGF0YSwgY3B1KSk7Cj4gKyAgICAgICAgYnJlYWs7Cj4g
KyAgICBkZWZhdWx0Ogo+ICsgICAgICAgIGJyZWFrOwoKVGhlcmUgbm8gYXBwYXJlbnQgbmVlZCBm
b3IgImRlZmF1bHQ6IiBoZXJlOyBxdWl0ZSBwb3NzaWJseSB0aGlzCmNvdWxkIGJlIGlmKCkgaW5z
dGVhZCBvZiBzd2l0Y2goKSBhbnl3YXkuCgpKYW4KCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxp
c3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9s
aXN0aW5mby94ZW4tZGV2ZWw=

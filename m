Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 95E5C6ACE8
	for <lists+xen-devel@lfdr.de>; Tue, 16 Jul 2019 18:39:29 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hnQSD-0002C4-Ir; Tue, 16 Jul 2019 16:37:25 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=LiPz=VN=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hnQSB-0002Bb-5b
 for xen-devel@lists.xenproject.org; Tue, 16 Jul 2019 16:37:23 +0000
X-Inumbo-ID: fbbfd5cf-a7e7-11e9-8980-bc764e045a96
Received: from m4a0039g.houston.softwaregrp.com (unknown [15.124.2.85])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id fbbfd5cf-a7e7-11e9-8980-bc764e045a96;
 Tue, 16 Jul 2019 16:37:22 +0000 (UTC)
Received: FROM m4a0039g.houston.softwaregrp.com (15.120.17.147) BY
 m4a0039g.houston.softwaregrp.com WITH ESMTP; 
 Tue, 16 Jul 2019 16:37:21 +0000
Received: from M4W0335.microfocus.com (2002:f78:1193::f78:1193) by
 M4W0335.microfocus.com (2002:f78:1193::f78:1193) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10; Tue, 16 Jul 2019 16:36:35 +0000
Received: from NAM02-CY1-obe.outbound.protection.outlook.com (15.124.8.12) by
 M4W0335.microfocus.com (15.120.17.147) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.1591.10 via Frontend Transport; Tue, 16 Jul 2019 16:36:35 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=YgytomWb4SYlmCxab7rO7SFehNRnqRzJoOuldovt8FRjUv18aSJGqLgodY51P/YT1VAEbVa0SwtjZaFGdy8cIX8DVZyDZqCjl1C9g8X/D1kW0z8QGhLtULVmzGAoR5v5mUS2wS3GP+1OGSkzV+CcMCjD+2dgfdRfNcbdfS0V1w0MXhKEXhnEt4ym0gQ4NVBByb5yzFM8Cq/Fdtn+c6fGKDwCxox534Cuz4jOfHXgZ46BEraKS7zBwTJY5Ph97nbdkZUmqsAkGykZnJyIzElL9UVqS5KTOFO2jpUnqyVF/G0mn1P6wKQh0hJ0ClaSeX3ZQyJEsFh/Hll7cStNg0ENMA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=u0I0LMVk8WpUY6CJ10J/PERhlWEx3YZ60P7O0SQ9eJE=;
 b=mnpyxr/OWksMQ+i2Ns6UUcHxmVXc4jm4/JohDvrm+85YfkMZaGOlK11XfO7vatQl8iCUuIOvpH0DWeuhZdrQtcaT/E5XfT6Oyb+PP5vs00O8yTitmBp+5nuY1lOnZVGjqb+3kgB/Xpn5mLi7zre8lCqk97x1zEdnVh9WgUdaQ09SJUnkPFWFu/wKLtNQRwm4rlk/UXN3bd4zfw/HGBeSWjRQyMzVv3HTV0fDyd5W3yoEXlAYjE98QTxNUz27d9kAZL44nmEU9ZPEcB4OOADt5zH5gfuQldaNHUP2oaYrLCXKeBIksTyfrnTtI8jrf3RQagZDH9mNpGQ8ozDi2MLx7w==
ARC-Authentication-Results: i=1; mx.microsoft.com 1;spf=pass
 smtp.mailfrom=suse.com;dmarc=pass action=none header.from=suse.com;dkim=pass
 header.d=suse.com;arc=none
Received: from DM6PR18MB3401.namprd18.prod.outlook.com (10.255.174.218) by
 DM6PR18MB3164.namprd18.prod.outlook.com (10.255.172.93) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2073.14; Tue, 16 Jul 2019 16:36:34 +0000
Received: from DM6PR18MB3401.namprd18.prod.outlook.com
 ([fe80::1fe:35f6:faf3:78c7]) by DM6PR18MB3401.namprd18.prod.outlook.com
 ([fe80::1fe:35f6:faf3:78c7%7]) with mapi id 15.20.2073.012; Tue, 16 Jul 2019
 16:36:34 +0000
From: Jan Beulich <JBeulich@suse.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH v3 04/14] AMD/IOMMU: use bit field for IRTE
Thread-Index: AQHVO/ShZ1XycBFTpEyE5AJFB9blPQ==
Date: Tue, 16 Jul 2019 16:36:34 +0000
Message-ID: <7eb213ad-94f1-6092-c670-3296aedf3f0e@suse.com>
References: <6272c301-a905-38cf-dd1a-645f3d703241@suse.com>
In-Reply-To: <6272c301-a905-38cf-dd1a-645f3d703241@suse.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: DB6PR0801CA0060.eurprd08.prod.outlook.com
 (2603:10a6:4:2b::28) To DM6PR18MB3401.namprd18.prod.outlook.com
 (2603:10b6:5:1cc::26)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=JBeulich@suse.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [87.234.252.170]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: ce29a20e-7419-44be-6953-08d70a0bc427
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328)(7193020);
 SRVR:DM6PR18MB3164; 
x-ms-traffictypediagnostic: DM6PR18MB3164:
x-microsoft-antispam-prvs: <DM6PR18MB316413ED0BDA4FE75C732DECB3CE0@DM6PR18MB3164.namprd18.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:5797;
x-forefront-prvs: 0100732B76
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(4636009)(346002)(39860400002)(136003)(376002)(396003)(366004)(199004)(189003)(31696002)(14444005)(256004)(6512007)(36756003)(86362001)(53936002)(8676002)(6436002)(486006)(6486002)(66556008)(66946007)(66476007)(64756008)(5640700003)(66446008)(6506007)(66066001)(2906002)(446003)(6916009)(31686004)(2616005)(476003)(81156014)(386003)(11346002)(81166006)(3846002)(2351001)(71190400001)(80792005)(2501003)(186003)(4326008)(26005)(8936002)(52116002)(305945005)(25786009)(68736007)(54906003)(14454004)(316002)(478600001)(7736002)(102836004)(99286004)(76176011)(71200400001)(5660300002)(6116002);
 DIR:OUT; SFP:1102; SCL:1; SRVR:DM6PR18MB3164;
 H:DM6PR18MB3401.namprd18.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: suse.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: gQGmqbCTx1vMEGh+j3GxVlCzJa+5HlzfSuETxnnoaukHlUmoIXvK2Wmyxz1ZM7l3GMvjVEk6nWAmomYVHau1oJiC5tGc4CMV0TQAinLEqBcQSwGDr+6LDAJt7r/1XpkIu7m1Qa4an9T5KiB1ABPhsPneUfWJkY4AC/FgpuUOZ67mGGoxk2dBDUejUzjLbe/L4ZkAB0DLKneFKV6j7tClIFQcu+SZqMTduY9JqYA0NQcI3PD/8jvcvVk9+GPBokBjj55J8/+m3oLJ+AYOq+PM3Za2d74H+c4SMnspUn/9P/+OwYUvMHhF/xHZLQVfp5OC+DVRqaSq5r2lgMNQeAURpm5IZb0JF2TKk32GpsL6E+7ls01uaKvur7e56+m4TOOw1OhvPPSbUenRMFwCkKN/s9PH4tIscV+Ch7UOZUHmWNA=
Content-ID: <4E351E68C5F9014D95E4DC03D2305608@namprd18.prod.outlook.com>
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-Network-Message-Id: ce29a20e-7419-44be-6953-08d70a0bc427
X-MS-Exchange-CrossTenant-originalarrivaltime: 16 Jul 2019 16:36:34.8899 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 856b813c-16e5-49a5-85ec-6f081e13b527
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: JBeulich@suse.com
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DM6PR18MB3164
X-OriginatorOrg: suse.com
Subject: [Xen-devel] [PATCH v3 04/14] AMD/IOMMU: use bit field for IRTE
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>,
 Brian Woods <brian.woods@amd.com>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QXQgdGhlIHNhbWUgdGltZSByZXN0cmljdCBpdHMgc2NvcGUgdG8ganVzdCB0aGUgc2luZ2xlIHNv
dXJjZSBmaWxlDQphY3R1YWxseSB1c2luZyBpdCwgYW5kIGFic3RyYWN0IGFjY2Vzc2VzIGJ5IGlu
dHJvZHVjaW5nIGEgdW5pb24gb2YNCnBvaW50ZXJzLiAoQSB1bmlvbiBvZiB0aGUgYWN0dWFsIHRh
YmxlIGVudHJpZXMgaXMgbm90IHVzZWQgdG8gbWFrZSBpdA0KaW1wb3NzaWJsZSB0byBbd3Jvbmds
eSwgb25jZSB0aGUgMTI4LWJpdCBmb3JtIGdldHMgYWRkZWRdIHBlcmZvcm0NCnBvaW50ZXIgYXJp
dGhtZXRpYyAvIGFycmF5IGFjY2Vzc2VzIG9uIGRlcml2ZWQgdHlwZXMuKQ0KDQpBbHNvIG1vdmUg
YXdheSBmcm9tIHVwZGF0aW5nIHRoZSBlbnRyaWVzIHBpZWNlbWVhbDogQ29uc3RydWN0IGEgZnVs
bCBuZXcNCmVudHJ5LCBhbmQgd3JpdGUgaXQgb3V0Lg0KDQpTaWduZWQtb2ZmLWJ5OiBKYW4gQmV1
bGljaCA8amJldWxpY2hAc3VzZS5jb20+DQotLS0NCnYzOiBTd2l0Y2ggYm9vbGVhbiBiaXRmaWVs
ZHMgdG8gYm9vbC4NCnYyOiBuYW1lIHtnZXQsZnJlZX1faW50cmVtYXBfZW50cnkoKSdzIGxhc3Qg
cGFyYW1ldGVyICJpbmRleCIgaW5zdGVhZCBvZg0KICAgICAib2Zmc2V0Ii4gSW50cm9kdWNlIHVu
aW9uIGlydGUzMi4NCg0KLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2lu
dHIuYw0KKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2ludHIuYw0KQEAg
LTIzLDYgKzIzLDI4IEBADQogICNpbmNsdWRlIDxhc20vaW9fYXBpYy5oPg0KICAjaW5jbHVkZSA8
eGVuL2tleWhhbmRsZXIuaD4NCiAgDQorc3RydWN0IGlydGVfYmFzaWMgew0KKyAgICBib29sIHJl
bWFwX2VuOjE7DQorICAgIGJvb2wgc3VwX2lvX3BmOjE7DQorICAgIHVuc2lnbmVkIGludCBpbnRf
dHlwZTozOw0KKyAgICBib29sIHJxX2VvaToxOw0KKyAgICBib29sIGRtOjE7DQorICAgIGJvb2wg
Z3Vlc3RfbW9kZToxOyAvKiBNQlogKi8NCisgICAgdW5zaWduZWQgaW50IGRlc3Q6ODsNCisgICAg
dW5zaWduZWQgaW50IHZlY3Rvcjo4Ow0KKyAgICB1bnNpZ25lZCBpbnQgOjg7DQorfTsNCisNCit1
bmlvbiBpcnRlMzIgew0KKyAgICB1aW50MzJfdCByYXdbMV07DQorICAgIHN0cnVjdCBpcnRlX2Jh
c2ljIGJhc2ljOw0KK307DQorDQordW5pb24gaXJ0ZV9wdHIgew0KKyAgICB2b2lkICpwdHI7DQor
ICAgIHVuaW9uIGlydGUzMiAqcHRyMzI7DQorfTsNCisNCiAgI2RlZmluZSBJTlRSRU1BUF9UQUJM
RV9PUkRFUiAgICAxDQogICNkZWZpbmUgSU5UUkVNQVBfTEVOR1RIIDB4Qg0KICAjZGVmaW5lIElO
VFJFTUFQX0VOVFJJRVMgKDEgPDwgSU5UUkVNQVBfTEVOR1RIKQ0KQEAgLTEwMSw0NyArMTIzLDQ0
IEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgYWxsb2NfaW50cmVtYXBfZW50cnkNCiAgICAgIHJldHVy
biBzbG90Ow0KICB9DQogIA0KLXN0YXRpYyB1MzIgKmdldF9pbnRyZW1hcF9lbnRyeShpbnQgc2Vn
LCBpbnQgYmRmLCBpbnQgb2Zmc2V0KQ0KK3N0YXRpYyB1bmlvbiBpcnRlX3B0ciBnZXRfaW50cmVt
YXBfZW50cnkodW5zaWduZWQgaW50IHNlZywgdW5zaWduZWQgaW50IGJkZiwNCisgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBpbmRleCkNCiAgew0K
LSAgICB1MzIgKnRhYmxlID0gZ2V0X2l2cnNfbWFwcGluZ3Moc2VnKVtiZGZdLmludHJlbWFwX3Rh
YmxlOw0KKyAgICB1bmlvbiBpcnRlX3B0ciB0YWJsZSA9IHsNCisgICAgICAgIC5wdHIgPSBnZXRf
aXZyc19tYXBwaW5ncyhzZWcpW2JkZl0uaW50cmVtYXBfdGFibGUNCisgICAgfTsNCisNCisgICAg
QVNTRVJUKHRhYmxlLnB0ciAmJiAoaW5kZXggPCBJTlRSRU1BUF9FTlRSSUVTKSk7DQogIA0KLSAg
ICBBU1NFUlQoICh0YWJsZSAhPSBOVUxMKSAmJiAob2Zmc2V0IDwgSU5UUkVNQVBfRU5UUklFUykg
KTsNCisgICAgdGFibGUucHRyMzIgKz0gaW5kZXg7DQogIA0KLSAgICByZXR1cm4gdGFibGUgKyBv
ZmZzZXQ7DQorICAgIHJldHVybiB0YWJsZTsNCiAgfQ0KICANCi1zdGF0aWMgdm9pZCBmcmVlX2lu
dHJlbWFwX2VudHJ5KGludCBzZWcsIGludCBiZGYsIGludCBvZmZzZXQpDQotew0KLSAgICB1MzIg
KmVudHJ5ID0gZ2V0X2ludHJlbWFwX2VudHJ5KHNlZywgYmRmLCBvZmZzZXQpOw0KLQ0KLSAgICBt
ZW1zZXQoZW50cnksIDAsIHNpemVvZih1MzIpKTsNCi0gICAgX19jbGVhcl9iaXQob2Zmc2V0LCBn
ZXRfaXZyc19tYXBwaW5ncyhzZWcpW2JkZl0uaW50cmVtYXBfaW51c2UpOw0KLX0NCi0NCi1zdGF0
aWMgdm9pZCB1cGRhdGVfaW50cmVtYXBfZW50cnkodTMyKiBlbnRyeSwgdTggdmVjdG9yLCB1OCBp
bnRfdHlwZSwNCi0gICAgdTggZGVzdF9tb2RlLCB1OCBkZXN0KQ0KLXsNCi0gICAgc2V0X2ZpZWxk
X2luX3JlZ191MzIoSU9NTVVfQ09OVFJPTF9FTkFCTEVELCAwLA0KLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBJTlRfUkVNQVBfRU5UUllfUkVNQVBFTl9NQVNLLA0KLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBJTlRfUkVNQVBfRU5UUllfUkVNQVBFTl9TSElGVCwgZW50cnkpOw0KLSAg
ICBzZXRfZmllbGRfaW5fcmVnX3UzMihJT01NVV9DT05UUk9MX0RJU0FCTEVELCAqZW50cnksDQot
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9TVVBJT1BGX01BU0ss
DQotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9TVVBJT1BGX1NI
SUZULCBlbnRyeSk7DQotICAgIHNldF9maWVsZF9pbl9yZWdfdTMyKGludF90eXBlLCAqZW50cnks
DQotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9JTlRUWVBFX01B
U0ssDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1BUF9FTlRSWV9JTlRUWVBF
X1NISUZULCBlbnRyeSk7DQotICAgIHNldF9maWVsZF9pbl9yZWdfdTMyKElPTU1VX0NPTlRST0xf
RElTQUJMRUQsICplbnRyeSwNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgSU5UX1JFTUFQ
X0VOVFJZX1JFUUVPSV9NQVNLLA0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfUkVN
QVBfRU5UUllfUkVRRU9JX1NISUZULCBlbnRyeSk7DQotICAgIHNldF9maWVsZF9pbl9yZWdfdTMy
KCh1MzIpZGVzdF9tb2RlLCAqZW50cnksDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElO
VF9SRU1BUF9FTlRSWV9ETV9NQVNLLA0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRf
UkVNQVBfRU5UUllfRE1fU0hJRlQsIGVudHJ5KTsNCi0gICAgc2V0X2ZpZWxkX2luX3JlZ191MzIo
KHUzMilkZXN0LCAqZW50cnksDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1B
UF9FTlRSWV9ERVNUX01BU1QsDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1B
UF9FTlRSWV9ERVNUX1NISUZULCBlbnRyeSk7DQotICAgIHNldF9maWVsZF9pbl9yZWdfdTMyKCh1
MzIpdmVjdG9yLCAqZW50cnksDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9SRU1B
UF9FTlRSWV9WRUNUT1JfTUFTSywNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgSU5UX1JF
TUFQX0VOVFJZX1ZFQ1RPUl9TSElGVCwgZW50cnkpOw0KK3N0YXRpYyB2b2lkIGZyZWVfaW50cmVt
YXBfZW50cnkodW5zaWduZWQgaW50IHNlZywgdW5zaWduZWQgaW50IGJkZiwNCisgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBpbmRleCkNCit7DQorICAgIHVuaW9u
IGlydGVfcHRyIGVudHJ5ID0gZ2V0X2ludHJlbWFwX2VudHJ5KHNlZywgYmRmLCBpbmRleCk7DQor
DQorICAgIEFDQ0VTU19PTkNFKGVudHJ5LnB0cjMyLT5yYXdbMF0pID0gMDsNCisNCisgICAgX19j
bGVhcl9iaXQoaW5kZXgsIGdldF9pdnJzX21hcHBpbmdzKHNlZylbYmRmXS5pbnRyZW1hcF9pbnVz
ZSk7DQorfQ0KKw0KK3N0YXRpYyB2b2lkIHVwZGF0ZV9pbnRyZW1hcF9lbnRyeSh1bmlvbiBpcnRl
X3B0ciBlbnRyeSwgdW5zaWduZWQgaW50IHZlY3RvciwNCisgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdW5zaWduZWQgaW50IGludF90eXBlLA0KKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgZGVzdF9tb2RlLCB1bnNpZ25lZCBpbnQgZGVzdCkN
Cit7DQorICAgIHN0cnVjdCBpcnRlX2Jhc2ljIGJhc2ljID0gew0KKyAgICAgICAgLnJlbWFwX2Vu
ID0gdHJ1ZSwNCisgICAgICAgIC5pbnRfdHlwZSA9IGludF90eXBlLA0KKyAgICAgICAgLmRtID0g
ZGVzdF9tb2RlLA0KKyAgICAgICAgLmRlc3QgPSBkZXN0LA0KKyAgICAgICAgLnZlY3RvciA9IHZl
Y3RvciwNCisgICAgfTsNCisNCisgICAgQUNDRVNTX09OQ0UoZW50cnkucHRyMzItPnJhd1swXSkg
PQ0KKyAgICAgICAgY29udGFpbmVyX29mKCZiYXNpYywgdW5pb24gaXJ0ZTMyLCBiYXNpYyktPnJh
d1swXTsNCiAgfQ0KICANCiAgc3RhdGljIGlubGluZSBpbnQgZ2V0X3J0ZV9pbmRleChjb25zdCBz
dHJ1Y3QgSU9fQVBJQ19yb3V0ZV9lbnRyeSAqcnRlKQ0KQEAgLTE2Myw3ICsxODIsNyBAQCBzdGF0
aWMgaW50IHVwZGF0ZV9pbnRyZW1hcF9lbnRyeV9mcm9tX2lvDQogICAgICB1MTYgKmluZGV4KQ0K
ICB7DQogICAgICB1bnNpZ25lZCBsb25nIGZsYWdzOw0KLSAgICB1MzIqIGVudHJ5Ow0KKyAgICB1
bmlvbiBpcnRlX3B0ciBlbnRyeTsNCiAgICAgIHU4IGRlbGl2ZXJ5X21vZGUsIGRlc3QsIHZlY3Rv
ciwgZGVzdF9tb2RlOw0KICAgICAgaW50IHJlcV9pZDsNCiAgICAgIHNwaW5sb2NrX3QgKmxvY2s7
DQpAQCAtMjAxLDEyICsyMjAsOCBAQCBzdGF0aWMgaW50IHVwZGF0ZV9pbnRyZW1hcF9lbnRyeV9m
cm9tX2lvDQogICAgICAgICAgICogc28gbmVlZCB0byByZWNvdmVyIHZlY3RvciBhbmQgZGVsaXZl
cnkgbW9kZSBmcm9tIElSVEUuDQogICAgICAgICAgICovDQogICAgICAgICAgQVNTRVJUKGdldF9y
dGVfaW5kZXgocnRlKSA9PSBvZmZzZXQpOw0KLSAgICAgICAgdmVjdG9yID0gZ2V0X2ZpZWxkX2Zy
b21fcmVnX3UzMigqZW50cnksDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIElOVF9SRU1BUF9FTlRSWV9WRUNUT1JfTUFTSywNCi0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgSU5UX1JFTUFQX0VOVFJZX1ZFQ1RPUl9TSElGVCk7DQotICAgICAg
ICBkZWxpdmVyeV9tb2RlID0gZ2V0X2ZpZWxkX2Zyb21fcmVnX3UzMigqZW50cnksDQotICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfUkVNQVBfRU5UUllf
SU5UVFlQRV9NQVNLLA0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgSU5UX1JFTUFQX0VOVFJZX0lOVFRZUEVfU0hJRlQpOw0KKyAgICAgICAgdmVjdG9yID0g
ZW50cnkucHRyMzItPmJhc2ljLnZlY3RvcjsNCisgICAgICAgIGRlbGl2ZXJ5X21vZGUgPSBlbnRy
eS5wdHIzMi0+YmFzaWMuaW50X3R5cGU7DQogICAgICB9DQogICAgICB1cGRhdGVfaW50cmVtYXBf
ZW50cnkoZW50cnksIHZlY3RvciwgZGVsaXZlcnlfbW9kZSwgZGVzdF9tb2RlLCBkZXN0KTsNCiAg
DQpAQCAtMjI4LDcgKzI0Myw3IEBAIGludCBfX2luaXQgYW1kX2lvbW11X3NldHVwX2lvYXBpY19y
ZW1hcHANCiAgew0KICAgICAgc3RydWN0IElPX0FQSUNfcm91dGVfZW50cnkgcnRlOw0KICAgICAg
dW5zaWduZWQgbG9uZyBmbGFnczsNCi0gICAgdTMyKiBlbnRyeTsNCisgICAgdW5pb24gaXJ0ZV9w
dHIgZW50cnk7DQogICAgICBpbnQgYXBpYywgcGluOw0KICAgICAgdTggZGVsaXZlcnlfbW9kZSwg
ZGVzdCwgdmVjdG9yLCBkZXN0X21vZGU7DQogICAgICB1MTYgc2VnLCBiZGYsIHJlcV9pZDsNCkBA
IC00MDcsMTYgKzQyMiwxNCBAQCB1bnNpZ25lZCBpbnQgYW1kX2lvbW11X3JlYWRfaW9hcGljX2Zy
b21fDQogICAgICAgICAgdTE2IGJkZiA9IGlvYXBpY19zYmRmW2lkeF0uYmRmOw0KICAgICAgICAg
IHUxNiBzZWcgPSBpb2FwaWNfc2JkZltpZHhdLnNlZzsNCiAgICAgICAgICB1MTYgcmVxX2lkID0g
Z2V0X2ludHJlbWFwX3JlcXVlc3Rvcl9pZChzZWcsIGJkZik7DQotICAgICAgICBjb25zdCB1MzIg
KmVudHJ5ID0gZ2V0X2ludHJlbWFwX2VudHJ5KHNlZywgcmVxX2lkLCBvZmZzZXQpOw0KKyAgICAg
ICAgdW5pb24gaXJ0ZV9wdHIgZW50cnkgPSBnZXRfaW50cmVtYXBfZW50cnkoc2VnLCByZXFfaWQs
IG9mZnNldCk7DQogIA0KICAgICAgICAgIEFTU0VSVChvZmZzZXQgPT0gKHZhbCAmIChJTlRSRU1B
UF9FTlRSSUVTIC0gMSkpKTsNCiAgICAgICAgICB2YWwgJj0gfihJTlRSRU1BUF9FTlRSSUVTIC0g
MSk7DQotICAgICAgICB2YWwgfD0gZ2V0X2ZpZWxkX2Zyb21fcmVnX3UzMigqZW50cnksDQotICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfUkVNQVBfRU5UUllfSU5UVFlQ
RV9NQVNLLA0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSU5UX1JFTUFQ
X0VOVFJZX0lOVFRZUEVfU0hJRlQpIDw8IDg7DQotICAgICAgICB2YWwgfD0gZ2V0X2ZpZWxkX2Zy
b21fcmVnX3UzMigqZW50cnksDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBJTlRfUkVNQVBfRU5UUllfVkVDVE9SX01BU0ssDQotICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBJTlRfUkVNQVBfRU5UUllfVkVDVE9SX1NISUZUKTsNCisgICAgICAgIHZh
bCB8PSBNQVNLX0lOU1IoZW50cnkucHRyMzItPmJhc2ljLmludF90eXBlLA0KKyAgICAgICAgICAg
ICAgICAgICAgICAgICBJT19BUElDX1JFRElSX0RFTElWX01PREVfTUFTSyk7DQorICAgICAgICB2
YWwgfD0gTUFTS19JTlNSKGVudHJ5LnB0cjMyLT5iYXNpYy52ZWN0b3IsDQorICAgICAgICAgICAg
ICAgICAgICAgICAgIElPX0FQSUNfUkVESVJfVkVDVE9SX01BU0spOw0KICAgICAgfQ0KICANCiAg
ICAgIHJldHVybiB2YWw7DQpAQCAtNDI3LDcgKzQ0MCw3IEBAIHN0YXRpYyBpbnQgdXBkYXRlX2lu
dHJlbWFwX2VudHJ5X2Zyb21fbXMNCiAgICAgIGludCAqcmVtYXBfaW5kZXgsIGNvbnN0IHN0cnVj
dCBtc2lfbXNnICptc2csIHUzMiAqZGF0YSkNCiAgew0KICAgICAgdW5zaWduZWQgbG9uZyBmbGFn
czsNCi0gICAgdTMyKiBlbnRyeTsNCisgICAgdW5pb24gaXJ0ZV9wdHIgZW50cnk7DQogICAgICB1
MTYgcmVxX2lkLCBhbGlhc19pZDsNCiAgICAgIHU4IGRlbGl2ZXJ5X21vZGUsIGRlc3QsIHZlY3Rv
ciwgZGVzdF9tb2RlOw0KICAgICAgc3BpbmxvY2tfdCAqbG9jazsNCkBAIC01ODEsNyArNTk0LDcg
QEAgdm9pZCBhbWRfaW9tbXVfcmVhZF9tc2lfZnJvbV9pcmUoDQogICAgICBjb25zdCBzdHJ1Y3Qg
cGNpX2RldiAqcGRldiA9IG1zaV9kZXNjLT5kZXY7DQogICAgICB1MTYgYmRmID0gcGRldiA/IFBD
SV9CREYyKHBkZXYtPmJ1cywgcGRldi0+ZGV2Zm4pIDogaHBldF9zYmRmLmJkZjsNCiAgICAgIHUx
NiBzZWcgPSBwZGV2ID8gcGRldi0+c2VnIDogaHBldF9zYmRmLnNlZzsNCi0gICAgY29uc3QgdTMy
ICplbnRyeTsNCisgICAgdW5pb24gaXJ0ZV9wdHIgZW50cnk7DQogIA0KICAgICAgaWYgKCBJU19F
UlJfT1JfTlVMTChfZmluZF9pb21tdV9mb3JfZGV2aWNlKHNlZywgYmRmKSkgKQ0KICAgICAgICAg
IHJldHVybjsNCkBAIC01OTcsMTIgKzYxMCwxMCBAQCB2b2lkIGFtZF9pb21tdV9yZWFkX21zaV9m
cm9tX2lyZSgNCiAgICAgIH0NCiAgDQogICAgICBtc2ctPmRhdGEgJj0gfihJTlRSRU1BUF9FTlRS
SUVTIC0gMSk7DQotICAgIG1zZy0+ZGF0YSB8PSBnZXRfZmllbGRfZnJvbV9yZWdfdTMyKCplbnRy
eSwNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSU5UX1JFTUFQX0VO
VFJZX0lOVFRZUEVfTUFTSywNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgSU5UX1JFTUFQX0VOVFJZX0lOVFRZUEVfU0hJRlQpIDw8IDg7DQotICAgIG1zZy0+ZGF0YSB8
PSBnZXRfZmllbGRfZnJvbV9yZWdfdTMyKCplbnRyeSwNCi0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgSU5UX1JFTUFQX0VOVFJZX1ZFQ1RPUl9NQVNLLA0KLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfUkVNQVBfRU5UUllfVkVDVE9SX1NI
SUZUKTsNCisgICAgbXNnLT5kYXRhIHw9IE1BU0tfSU5TUihlbnRyeS5wdHIzMi0+YmFzaWMuaW50
X3R5cGUsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgTVNJX0RBVEFfREVMSVZFUllfTU9E
RV9NQVNLKTsNCisgICAgbXNnLT5kYXRhIHw9IE1BU0tfSU5TUihlbnRyeS5wdHIzMi0+YmFzaWMu
dmVjdG9yLA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TSV9EQVRBX1ZFQ1RPUl9NQVNL
KTsNCiAgfQ0KICANCiAgaW50IF9faW5pdCBhbWRfaW9tbXVfZnJlZV9pbnRyZW1hcF90YWJsZSgN
Ci0tLSBhL3hlbi9pbmNsdWRlL2FzbS14ODYvaHZtL3N2bS9hbWQtaW9tbXUtZGVmcy5oDQorKysg
Yi94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdm0vYW1kLWlvbW11LWRlZnMuaA0KQEAgLTQ2OSwy
MiArNDY5LDYgQEAgc3RydWN0IGFtZF9pb21tdV9wdGUgew0KICAjZGVmaW5lIElPTU1VX0NPTlRS
T0xfRElTQUJMRUQJMA0KICAjZGVmaW5lIElPTU1VX0NPTlRST0xfRU5BQkxFRAkxDQogIA0KLS8q
IGludGVycnVwdCByZW1hcHBpbmcgdGFibGUgKi8NCi0jZGVmaW5lIElOVF9SRU1BUF9FTlRSWV9S
RU1BUEVOX01BU0sgICAgMHgwMDAwMDAwMQ0KLSNkZWZpbmUgSU5UX1JFTUFQX0VOVFJZX1JFTUFQ
RU5fU0hJRlQgICAwDQotI2RlZmluZSBJTlRfUkVNQVBfRU5UUllfU1VQSU9QRl9NQVNLICAgIDB4
MDAwMDAwMDINCi0jZGVmaW5lIElOVF9SRU1BUF9FTlRSWV9TVVBJT1BGX1NISUZUICAgMQ0KLSNk
ZWZpbmUgSU5UX1JFTUFQX0VOVFJZX0lOVFRZUEVfTUFTSyAgICAweDAwMDAwMDFDDQotI2RlZmlu
ZSBJTlRfUkVNQVBfRU5UUllfSU5UVFlQRV9TSElGVCAgIDINCi0jZGVmaW5lIElOVF9SRU1BUF9F
TlRSWV9SRVFFT0lfTUFTSyAgICAgMHgwMDAwMDAyMA0KLSNkZWZpbmUgSU5UX1JFTUFQX0VOVFJZ
X1JFUUVPSV9TSElGVCAgICA1DQotI2RlZmluZSBJTlRfUkVNQVBfRU5UUllfRE1fTUFTSyAgICAg
ICAgIDB4MDAwMDAwNDANCi0jZGVmaW5lIElOVF9SRU1BUF9FTlRSWV9ETV9TSElGVCAgICAgICAg
Ng0KLSNkZWZpbmUgSU5UX1JFTUFQX0VOVFJZX0RFU1RfTUFTVCAgICAgICAweDAwMDBGRjAwDQot
I2RlZmluZSBJTlRfUkVNQVBfRU5UUllfREVTVF9TSElGVCAgICAgIDgNCi0jZGVmaW5lIElOVF9S
RU1BUF9FTlRSWV9WRUNUT1JfTUFTSyAgICAgMHgwMEZGMDAwMA0KLSNkZWZpbmUgSU5UX1JFTUFQ
X0VOVFJZX1ZFQ1RPUl9TSElGVCAgICAxNg0KLQ0KICAjZGVmaW5lIElOVl9JT01NVV9BTExfUEFH
RVNfQUREUkVTUyAgICAgICgoMVVMTCA8PCA2MykgLSAxKQ0KICANCiAgI2RlZmluZSBJT01NVV9S
SU5HX0JVRkZFUl9QVFJfTUFTSyAgICAgICAgICAgICAgICAgIDB4MDAwN0ZGRjANCg0KX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxp
bmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5w
cm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

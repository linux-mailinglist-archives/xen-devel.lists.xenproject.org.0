Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id ABB3417F10C
	for <lists+xen-devel@lfdr.de>; Tue, 10 Mar 2020 08:33:04 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1jBZKG-0001dl-U6; Tue, 10 Mar 2020 07:29:16 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=WGVw=43=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1jBZKF-0001dA-Pp
 for xen-devel@lists.xenproject.org; Tue, 10 Mar 2020 07:29:15 +0000
X-Inumbo-ID: cfbf8984-62a0-11ea-ad1e-12813bfff9fa
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id cfbf8984-62a0-11ea-ad1e-12813bfff9fa;
 Tue, 10 Mar 2020 07:29:01 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id 43CC0AE34;
 Tue, 10 Mar 2020 07:28:59 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Tue, 10 Mar 2020 08:28:52 +0100
Message-Id: <20200310072853.27567-6-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20200310072853.27567-1-jgross@suse.com>
References: <20200310072853.27567-1-jgross@suse.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v4 5/6] xen/rcu: add assertions to debug build
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 George Dunlap <george.dunlap@citrix.com>, Jan Beulich <jbeulich@suse.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

WGVuJ3MgUkNVIGltcGxlbWVudGF0aW9uIHJlbGllcyBvbiBubyBzb2Z0aXJxIGhhbmRsaW5nIHRh
a2luZyBwbGFjZQp3aGlsZSBiZWluZyBpbiBhIFJDVSBjcml0aWNhbCBzZWN0aW9uLiBBZGQgQVNT
RVJUKClzIGluIGRlYnVnIGJ1aWxkcwppbiBvcmRlciB0byBjYXRjaCBhbnkgdmlvbGF0aW9ucy4K
CkZvciB0aGF0IHB1cnBvc2UgbW9kaWZ5IHJjdV9yZWFkX1t1bl1sb2NrKCkgdG8gdXNlIGEgZGVk
aWNhdGVkIHBlcmNwdQpjb3VudGVyIGluc3RlYWQgb2YgcHJlZW1wdF9bZW58ZGlzXWFibGUoKSBh
cyB0aGlzIGVuYWJsZXMgdG8gdGVzdAp0aGF0IGNvbmRpdGlvbiBpbiBfX2RvX3NvZnRpcnEoKSAo
QVNTRVJUX05PVF9JTl9BVE9NSUMoKSBpcyBub3QKdXNhYmxlIHRoZXJlIGR1ZSB0byBfX2NwdV91
cCgpIGNhbGxpbmcgcHJvY2Vzc19wZW5kaW5nX3NvZnRpcnFzKCkKd2hpbGUgaG9sZGluZyB0aGUg
Y3B1IGhvdHBsdWcgbG9jaykuCgpEcm9wcGluZyB0aGUgbm93IG5vIGxvbmdlciBuZWVkZWQgI2lu
Y2x1ZGUgb2YgcHJlZW1wdC5oIGluIHJjdXBkYXRlLmgKcmVxdWlyZXMgYWRkaW5nIGl0IGluIHNv
bWUgc291cmNlcy4KCldoaWxlIGF0IGl0IHN3aXRjaCB0aGUgcmN1X3JlYWRfW3VuXWxvY2soKSBp
bXBsZW1lbnRhdGlvbiB0byBzdGF0aWMKaW5saW5lIGZ1bmN0aW9ucyBpbnN0ZWFkIG9mIG1hY3Jv
cy4KClNpZ25lZC1vZmYtYnk6IEp1ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNvbT4KLS0tClYz
OgotIGFkZCBiYXJyaWVycyB0byByY3VfW2VufGRpc11hYmxlKCkgKFJvZ2VyIFBhdSBNb25uw6kp
Ci0gYWRkIHJjdV9xdWllc2NlX2FsbG93ZWQoKSB0byBBU1NFUlRfTk9UX0lOX0FUT01JQyAoUm9n
ZXIgUGF1IE1vbm7DqSkKLSBjb252ZXJ0IG1hY3JvcyB0byBzdGF0aWMgaW5saW5lIGZ1bmN0aW9u
cwotIGFkZCBzYW5pdHkgY2hlY2sgaW4gcmN1X3JlYWRfdW5sb2NrKCkKClY0OgotIHVzZSBiYXJy
aWVyKCkgaW4gcmN1X1tlbnxkaXNdYWJsZSgpIChKdWxpZW4gR3JhbGwpCi0tLQogeGVuL2NvbW1v
bi9tdWx0aWNhbGwuYyAgICAgfCAgMSArCiB4ZW4vY29tbW9uL3ByZWVtcHQuYyAgICAgICB8ICA1
ICsrKystCiB4ZW4vY29tbW9uL3JjdXBkYXRlLmMgICAgICB8ICA0ICsrKysKIHhlbi9jb21tb24v
c29mdGlycS5jICAgICAgIHwgIDIgKysKIHhlbi9jb21tb24vd2FpdC5jICAgICAgICAgIHwgIDEg
KwogeGVuL2luY2x1ZGUveGVuL3JjdXBkYXRlLmggfCA0NSArKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKy0tLS0KIDYgZmlsZXMgY2hhbmdlZCwgNTMgaW5zZXJ0aW9ucygr
KSwgNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL211bHRpY2FsbC5jIGIv
eGVuL2NvbW1vbi9tdWx0aWNhbGwuYwppbmRleCA1YTE5OWViZjhmLi42N2YxYTIzNDg1IDEwMDY0
NAotLS0gYS94ZW4vY29tbW9uL211bHRpY2FsbC5jCisrKyBiL3hlbi9jb21tb24vbXVsdGljYWxs
LmMKQEAgLTEwLDYgKzEwLDcgQEAKICNpbmNsdWRlIDx4ZW4vbXVsdGljYWxsLmg+CiAjaW5jbHVk
ZSA8eGVuL2d1ZXN0X2FjY2Vzcy5oPgogI2luY2x1ZGUgPHhlbi9wZXJmYy5oPgorI2luY2x1ZGUg
PHhlbi9wcmVlbXB0Lmg+CiAjaW5jbHVkZSA8eGVuL3RyYWNlLmg+CiAjaW5jbHVkZSA8YXNtL2N1
cnJlbnQuaD4KICNpbmNsdWRlIDxhc20vaGFyZGlycS5oPgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1v
bi9wcmVlbXB0LmMgYi94ZW4vY29tbW9uL3ByZWVtcHQuYwppbmRleCAzYjQxNzhmZDQ0Li44YTM1
MWU2NDRiIDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3ByZWVtcHQuYworKysgYi94ZW4vY29tbW9u
L3ByZWVtcHQuYwpAQCAtMjEsMTMgKzIxLDE1IEBACiAKICNpbmNsdWRlIDx4ZW4vcHJlZW1wdC5o
PgogI2luY2x1ZGUgPHhlbi9pcnEuaD4KKyNpbmNsdWRlIDx4ZW4vcmN1cGRhdGUuaD4KICNpbmNs
dWRlIDxhc20vc3lzdGVtLmg+CiAKIERFRklORV9QRVJfQ1BVKHVuc2lnbmVkIGludCwgX19wcmVl
bXB0X2NvdW50KTsKIAogYm9vbF90IGluX2F0b21pYyh2b2lkKQogewotICAgIHJldHVybiBwcmVl
bXB0X2NvdW50KCkgfHwgaW5faXJxKCkgfHwgIWxvY2FsX2lycV9pc19lbmFibGVkKCk7CisgICAg
cmV0dXJuIHByZWVtcHRfY291bnQoKSB8fCBpbl9pcnEoKSB8fCAhbG9jYWxfaXJxX2lzX2VuYWJs
ZWQoKSB8fAorICAgICAgICAgICAhcmN1X3F1aWVzY2VfYWxsb3dlZCgpOwogfQogCiAjaWZuZGVm
IE5ERUJVRwpAQCAtMzYsNSArMzgsNiBAQCB2b2lkIEFTU0VSVF9OT1RfSU5fQVRPTUlDKHZvaWQp
CiAgICAgQVNTRVJUKCFwcmVlbXB0X2NvdW50KCkpOwogICAgIEFTU0VSVCghaW5faXJxKCkpOwog
ICAgIEFTU0VSVChsb2NhbF9pcnFfaXNfZW5hYmxlZCgpKTsKKyAgICBBU1NFUlQocmN1X3F1aWVz
Y2VfYWxsb3dlZCgpKTsKIH0KICNlbmRpZgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9yY3VwZGF0
ZS5jIGIveGVuL2NvbW1vbi9yY3VwZGF0ZS5jCmluZGV4IDI3ZDU5N2JiZWIuLmQxY2MyZjBhOTgg
MTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vcmN1cGRhdGUuYworKysgYi94ZW4vY29tbW9uL3JjdXBk
YXRlLmMKQEAgLTQ2LDYgKzQ2LDEwIEBACiAjaW5jbHVkZSA8eGVuL2NwdS5oPgogI2luY2x1ZGUg
PHhlbi9zdG9wX21hY2hpbmUuaD4KIAorI2lmbmRlZiBOREVCVUcKK0RFRklORV9QRVJfQ1BVKHVu
c2lnbmVkIGludCwgcmN1X2xvY2tfY250KTsKKyNlbmRpZgorCiAvKiBHbG9iYWwgY29udHJvbCB2
YXJpYWJsZXMgZm9yIHJjdXBkYXRlIGNhbGxiYWNrIG1lY2hhbmlzbS4gKi8KIHN0YXRpYyBzdHJ1
Y3QgcmN1X2N0cmxibGsgewogICAgIGxvbmcgY3VyOyAgICAgICAgICAgLyogQ3VycmVudCBiYXRj
aCBudW1iZXIuICAgICAgICAgICAgICAgICAgICAgICovCmRpZmYgLS1naXQgYS94ZW4vY29tbW9u
L3NvZnRpcnEuYyBiL3hlbi9jb21tb24vc29mdGlycS5jCmluZGV4IDMwYmViMjdhZTkuLmZkOTBi
ODUxMWQgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vc29mdGlycS5jCisrKyBiL3hlbi9jb21tb24v
c29mdGlycS5jCkBAIC0zMCw2ICszMCw4IEBAIHN0YXRpYyB2b2lkIF9fZG9fc29mdGlycSh1bnNp
Z25lZCBsb25nIGlnbm9yZV9tYXNrLCBib29sIHJjdV9hbGxvd2VkKQogICAgIHVuc2lnbmVkIGlu
dCBpLCBjcHU7CiAgICAgdW5zaWduZWQgbG9uZyBwZW5kaW5nOwogCisgICAgQVNTRVJUKCFyY3Vf
YWxsb3dlZCB8fCByY3VfcXVpZXNjZV9hbGxvd2VkKCkpOworCiAgICAgZm9yICggOyA7ICkKICAg
ICB7CiAgICAgICAgIC8qCmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3dhaXQuYyBiL3hlbi9jb21t
b24vd2FpdC5jCmluZGV4IDI0NzE2ZTc2NzYuLjljZGIxNzQwMzYgMTAwNjQ0Ci0tLSBhL3hlbi9j
b21tb24vd2FpdC5jCisrKyBiL3hlbi9jb21tb24vd2FpdC5jCkBAIC0xOSw2ICsxOSw3IEBACiAg
KiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbTsgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9y
Zy9saWNlbnNlcy8+LgogICovCiAKKyNpbmNsdWRlIDx4ZW4vcHJlZW1wdC5oPgogI2luY2x1ZGUg
PHhlbi9zY2hlZC5oPgogI2luY2x1ZGUgPHhlbi9zb2Z0aXJxLmg+CiAjaW5jbHVkZSA8eGVuL3dh
aXQuaD4KZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9yY3VwZGF0ZS5oIGIveGVuL2luY2x1
ZGUveGVuL3JjdXBkYXRlLmgKaW5kZXggMzFjOGI4NmQxMy4uMGYzMmIzYzdkOCAxMDA2NDQKLS0t
IGEveGVuL2luY2x1ZGUveGVuL3JjdXBkYXRlLmgKKysrIGIveGVuL2luY2x1ZGUveGVuL3JjdXBk
YXRlLmgKQEAgLTMyLDEyICszMiw0MiBAQAogI2RlZmluZSBfX1hFTl9SQ1VQREFURV9ICiAKICNp
bmNsdWRlIDx4ZW4vY2FjaGUuaD4KKyNpbmNsdWRlIDx4ZW4vY29tcGlsZXIuaD4KICNpbmNsdWRl
IDx4ZW4vc3BpbmxvY2suaD4KICNpbmNsdWRlIDx4ZW4vY3B1bWFzay5oPgotI2luY2x1ZGUgPHhl
bi9wcmVlbXB0Lmg+CisjaW5jbHVkZSA8eGVuL3BlcmNwdS5oPgogCiAjZGVmaW5lIF9fcmN1CiAK
KyNpZm5kZWYgTkRFQlVHCitERUNMQVJFX1BFUl9DUFUodW5zaWduZWQgaW50LCByY3VfbG9ja19j
bnQpOworCitzdGF0aWMgaW5saW5lIHZvaWQgcmN1X3F1aWVzY2VfZGlzYWJsZSh2b2lkKQorewor
ICAgIHRoaXNfY3B1KHJjdV9sb2NrX2NudCkrKzsKKyAgICBiYXJyaWVyKCk7Cit9CisKK3N0YXRp
YyBpbmxpbmUgdm9pZCByY3VfcXVpZXNjZV9lbmFibGUodm9pZCkKK3sKKyAgICBiYXJyaWVyKCk7
CisgICAgdGhpc19jcHUocmN1X2xvY2tfY250KS0tOworfQorCitzdGF0aWMgaW5saW5lIGJvb2wg
cmN1X3F1aWVzY2VfYWxsb3dlZCh2b2lkKQoreworICAgIHJldHVybiAhdGhpc19jcHUocmN1X2xv
Y2tfY250KTsKK30KKworI2Vsc2UKK3N0YXRpYyBpbmxpbmUgdm9pZCByY3VfcXVpZXNjZV9kaXNh
YmxlKHZvaWQpIHsgfQorc3RhdGljIGlubGluZSB2b2lkIHJjdV9xdWllc2NlX2VuYWJsZSh2b2lk
KSB7IH0KK3N0YXRpYyBpbmxpbmUgYm9vbCByY3VfcXVpZXNjZV9hbGxvd2VkKHZvaWQpCit7Cisg
ICAgcmV0dXJuIHRydWU7Cit9CisjZW5kaWYKKwogLyoqCiAgKiBzdHJ1Y3QgcmN1X2hlYWQgLSBj
YWxsYmFjayBzdHJ1Y3R1cmUgZm9yIHVzZSB3aXRoIFJDVQogICogQG5leHQ6IG5leHQgdXBkYXRl
IHJlcXVlc3RzIGluIGEgbGlzdApAQCAtOTEsMTYgKzEyMSwyMyBAQCB0eXBlZGVmIHN0cnVjdCBf
cmN1X3JlYWRfbG9jayByY3VfcmVhZF9sb2NrX3Q7CiAgKiB3aWxsIGJlIGRlZmVycmVkIHVudGls
IHRoZSBvdXRlcm1vc3QgUkNVIHJlYWQtc2lkZSBjcml0aWNhbCBzZWN0aW9uCiAgKiBjb21wbGV0
ZXMuCiAgKgotICogSXQgaXMgaWxsZWdhbCB0byBibG9jayB3aGlsZSBpbiBhbiBSQ1UgcmVhZC1z
aWRlIGNyaXRpY2FsIHNlY3Rpb24uCisgKiBJdCBpcyBpbGxlZ2FsIHRvIHByb2Nlc3Mgc29mdGly
cXMgd2hpbGUgaW4gYW4gUkNVIHJlYWQtc2lkZSBjcml0aWNhbCBzZWN0aW9uLgogICovCi0jZGVm
aW5lIHJjdV9yZWFkX2xvY2soeCkgICAgICAgKHsgKCh2b2lkKSh4KSk7IHByZWVtcHRfZGlzYWJs
ZSgpOyB9KQorc3RhdGljIGlubGluZSB2b2lkIHJjdV9yZWFkX2xvY2socmN1X3JlYWRfbG9ja190
ICpsb2NrKQoreworICAgIHJjdV9xdWllc2NlX2Rpc2FibGUoKTsKK30KIAogLyoqCiAgKiByY3Vf
cmVhZF91bmxvY2sgLSBtYXJrcyB0aGUgZW5kIG9mIGFuIFJDVSByZWFkLXNpZGUgY3JpdGljYWwg
c2VjdGlvbi4KICAqCiAgKiBTZWUgcmN1X3JlYWRfbG9jaygpIGZvciBtb3JlIGluZm9ybWF0aW9u
LgogICovCi0jZGVmaW5lIHJjdV9yZWFkX3VubG9jayh4KSAgICAgKHsgKCh2b2lkKSh4KSk7IHBy
ZWVtcHRfZW5hYmxlKCk7IH0pCitzdGF0aWMgaW5saW5lIHZvaWQgcmN1X3JlYWRfdW5sb2NrKHJj
dV9yZWFkX2xvY2tfdCAqbG9jaykKK3sKKyAgICBBU1NFUlQoIXJjdV9xdWllc2NlX2FsbG93ZWQo
KSk7CisgICAgcmN1X3F1aWVzY2VfZW5hYmxlKCk7Cit9CiAKIC8qCiAgKiBTbyB3aGVyZSBpcyBy
Y3Vfd3JpdGVfbG9jaygpPyAgSXQgZG9lcyBub3QgZXhpc3QsIGFzIHRoZXJlIGlzIG5vCi0tIAoy
LjE2LjQKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpY
ZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRw
czovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

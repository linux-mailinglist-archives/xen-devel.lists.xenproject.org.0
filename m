Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id E209F68909
	for <lists+xen-devel@lfdr.de>; Mon, 15 Jul 2019 14:40:00 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hn0EI-0003hR-KK; Mon, 15 Jul 2019 12:37:18 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=gpPh=VM=citrix.com=paul.durrant@srs-us1.protection.inumbo.net>)
 id 1hn0EG-0003gq-Kz
 for xen-devel@lists.xenproject.org; Mon, 15 Jul 2019 12:37:16 +0000
X-Inumbo-ID: 467b248b-a6fd-11e9-8980-bc764e045a96
Received: from esa3.hc3370-68.iphmx.com (unknown [216.71.145.155])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 467b248b-a6fd-11e9-8980-bc764e045a96;
 Mon, 15 Jul 2019 12:37:15 +0000 (UTC)
Authentication-Results: esa3.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=paul.durrant@citrix.com;
 spf=Pass smtp.mailfrom=Paul.Durrant@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa3.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 paul.durrant@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa3.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="paul.durrant@citrix.com"; x-conformance=sidf_compatible
Received-SPF: Pass (esa3.hc3370-68.iphmx.com: domain of
 Paul.Durrant@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa3.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="Paul.Durrant@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83 ~all"
Received-SPF: None (esa3.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa3.hc3370-68.iphmx.com;
 envelope-from="Paul.Durrant@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: hlLGvKfAlyewjq6Ue+1g/F14wVpAsiuJ1ZMUopG9NWwoOaf4XRhAbJ2QMvZoT2FcZaFZMCj3Ue
 OZoF39clBG5cPszRK/XqWx04dvC7qYUsNzT7FAD31kZxKrBAzC1/n2NX2k5Etd0I2cN5E9S4BG
 SLlKe2+5B0tw/vr5CSHiBSa6CS/nfkZ5uTpEadgCPXTLzwL5lfa4uM35bzMFRNkKsHcNUqD46e
 SuoCAFCUTcSHLy+oSdLLOSaf8ty5H6zsJX/aOaJY5LPBrHSc90GV0dAxKeiVUQAHqt9cdn9juS
 kyI=
X-SBRS: 2.7
X-MesageID: 2978067
X-Ironport-Server: esa3.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.63,493,1557201600"; 
   d="scan'208";a="2978067"
From: Paul Durrant <paul.durrant@citrix.com>
To: <xen-devel@lists.xenproject.org>
Date: Mon, 15 Jul 2019 13:37:08 +0100
Message-ID: <20190715123710.1780-3-paul.durrant@citrix.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20190715123710.1780-1-paul.durrant@citrix.com>
References: <20190715123710.1780-1-paul.durrant@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v2 2/4] pci: add all-device iterator function...
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim
 Deegan <tim@xen.org>, Julien Grall <julien.grall@arm.com>,
 Paul Durrant <paul.durrant@citrix.com>, Jan Beulich <jbeulich@suse.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Li4uYW5kIHVzZSBpdCBmb3Igc2V0dXBfaHdkb21fcGNpX2RldmljZXMoKSBhbmQgZHVtcF9wY2lf
ZGV2aWNlcygpLgoKVGhlIHVubG9jay9wcm9jZXNzLXBlbmRpbmctc29mdGlycXMvbG9jayBzZXF1
ZW5jZSB0aGF0IHdhcyBpbgpfc2V0dXBfaHdkb21fcGNpX2RldmljZXMoKSBpcyBub3cgZG9uZSBp
biB0aGUgZ2VuZXJpYyBpdGVyYXRvciBmdW5jdGlvbiwKd2hpY2ggZG9lcyBtZWFuIGl0IGlzIGFs
c28gZG9uZSAodW5uZWNlc3NhcmlseSkgaW4gdGhlIGNhc2Ugb2YKZHVtcF9wY2lfZGV2aWNlcygp
LCBzaW5jZSBydW5fYWxsX25vbmlycV9rZXloYW5kbGVycygpIHdpbGwgY2FsbApwcm9jZXNzX3Bl
bmRpbmdfc29mdGlycXMoKSBiZWZvcmUgaW52b2tpbmcgZWFjaCBrZXkgaGFuZGxlciBhbnl3YXks
IGJ1dAp0aGlzIGlzIG5vdCBwZXJmb3JtYW5jZSBjcml0aWNhbCBjb2RlLgoKVGhlICI9PT09IHNl
Z21lbnQgWFhYWCA9PT09IiBoZWFkbGluZSB0aGF0IHdhcyBpbiBfZHVtcF9wY2lfZGV2aWNlcygp
IGhhcwpiZWVuIGRyb3BwZWQgYmVjYXVzZSBpdCBpcyBub24tdHJpdmlhbCB0byBkZWFsIHdpdGgg
aXQgd2hlbiB1c2luZyBhCmdlbmVyaWMgYWxsLWRldmljZSBpdGVyYXRvciBhbmQsIHNpbmNlIHRo
ZSBzZWdtZW50IG51bWJlciBpcyBpbmNsdWRlZAppbiBldmVyeSBsb2cgbGluZSBhbnl3YXksIGl0
IGRpZG4ndCBhZGQgbXVjaCB2YWx1ZSBhbnl3YXkuCgpTaWduZWQtb2ZmLWJ5OiBQYXVsIER1cnJh
bnQgPHBhdWwuZHVycmFudEBjaXRyaXguY29tPgotLS0KQ2M6IEphbiBCZXVsaWNoIDxqYmV1bGlj
aEBzdXNlLmNvbT4KQ2M6IEFuZHJldyBDb29wZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+
CkNjOiBHZW9yZ2UgRHVubGFwIDxHZW9yZ2UuRHVubGFwQGV1LmNpdHJpeC5jb20+CkNjOiBJYW4g
SmFja3NvbiA8aWFuLmphY2tzb25AZXUuY2l0cml4LmNvbT4KQ2M6IEp1bGllbiBHcmFsbCA8anVs
aWVuLmdyYWxsQGFybS5jb20+CkNjOiBLb25yYWQgUnplc3p1dGVrIFdpbGsgPGtvbnJhZC53aWxr
QG9yYWNsZS5jb20+CkNjOiBTdGVmYW5vIFN0YWJlbGxpbmkgPHNzdGFiZWxsaW5pQGtlcm5lbC5v
cmc+CkNjOiBUaW0gRGVlZ2FuIDx0aW1AeGVuLm9yZz4KQ2M6IFdlaSBMaXUgPHdsQHhlbi5vcmc+
Cgp2MjoKIC0gTmV3IGluIHYyLgotLS0KIHhlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3BjaS5jIHwg
MTIwICsrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLS0tLQogeGVuL2luY2x1
ZGUveGVuL3BjaS5oICAgICAgICAgfCAgIDEgKwogMiBmaWxlcyBjaGFuZ2VkLCA2OCBpbnNlcnRp
b25zKCspLCA1MyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS94ZW4vZHJpdmVycy9wYXNzdGhy
b3VnaC9wY2kuYyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3BjaS5jCmluZGV4IGU4ODY4OTQy
NWQuLjE3OWNiN2UxN2UgMTAwNjQ0Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3BjaS5j
CisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3BjaS5jCkBAIC0xMTM0LDU0ICsxMTM0LDc4
IEBAIHN0YXRpYyB2b2lkIF9faHdkb21faW5pdCBzZXR1cF9vbmVfaHdkb21fZGV2aWNlKGNvbnN0
IHN0cnVjdCBzZXR1cF9od2RvbSAqY3R4dCwKICAgICAgICAgICAgICAgIGN0eHQtPmQtPmRvbWFp
bl9pZCwgZXJyKTsKIH0KIAotc3RhdGljIGludCBfX2h3ZG9tX2luaXQgX3NldHVwX2h3ZG9tX3Bj
aV9kZXZpY2VzKHN0cnVjdCBwY2lfc2VnICpwc2VnLCB2b2lkICphcmcpCitzdGF0aWMgaW50IF9f
aHdkb21faW5pdCBzZXR1cF9od2RvbV9wY2lfZGV2aWNlKHN0cnVjdCBwY2lfZGV2ICpwZGV2LCB2
b2lkICphcmcpCiB7CiAgICAgc3RydWN0IHNldHVwX2h3ZG9tICpjdHh0ID0gYXJnOwotICAgIGlu
dCBidXMsIGRldmZuOworICAgIHN0cnVjdCBkb21haW4gKmQgPSBjdHh0LT5kOwogCi0gICAgZm9y
ICggYnVzID0gMDsgYnVzIDwgMjU2OyBidXMrKyApCisgICAgaWYgKCAhcGRldi0+ZG9tYWluICkK
ICAgICB7Ci0gICAgICAgIGZvciAoIGRldmZuID0gMDsgZGV2Zm4gPCAyNTY7IGRldmZuKysgKQor
ICAgICAgICBwZGV2LT5kb21haW4gPSBkOworICAgICAgICBsaXN0X2FkZCgmcGRldi0+ZG9tYWlu
X2xpc3QsICZkLT5wZGV2X2xpc3QpOworICAgICAgICBzZXR1cF9vbmVfaHdkb21fZGV2aWNlKGN0
eHQsIHBkZXYpOworICAgIH0KKyAgICBlbHNlIGlmICggcGRldi0+ZG9tYWluID09IGRvbV94ZW4g
KQorICAgIHsKKyAgICAgICAgcGRldi0+ZG9tYWluID0gZDsKKyAgICAgICAgc2V0dXBfb25lX2h3
ZG9tX2RldmljZShjdHh0LCBwZGV2KTsKKyAgICAgICAgcGRldi0+ZG9tYWluID0gZG9tX3hlbjsK
KyAgICB9CisgICAgZWxzZSBpZiAoIHBkZXYtPmRvbWFpbiAhPSBkICkKKyAgICAgICAgcHJpbnRr
KFhFTkxPR19XQVJOSU5HICJEb20lZCBvd25pbmcgJTA0eDolMDJ4OiUwMnguJXU/XG4iLAorICAg
ICAgICAgICAgICAgcGRldi0+ZG9tYWluLT5kb21haW5faWQsIHBkZXYtPnNlZywgcGRldi0+YnVz
LAorICAgICAgICAgICAgICAgUENJX1NMT1QocGRldi0+ZGV2Zm4pLCBQQ0lfRlVOQyhwZGV2LT5k
ZXZmbikpOworCisgICAgcmV0dXJuIDA7Cit9CisKK3N0cnVjdCBwc2RpX2N0eHQgeworICAgIGlu
dCAoKmNiKShzdHJ1Y3QgcGNpX2RldiAqLCB2b2lkICopOworICAgIHZvaWQgKmFyZzsKK307CisK
K3N0YXRpYyBpbnQgcGNpX3NlZ21lbnRfZGV2aWNlc19pdGVyYXRlKHN0cnVjdCBwY2lfc2VnICpw
c2VnLCB2b2lkICphcmcpCit7CisgICAgc3RydWN0IHBzZGlfY3R4dCAqY3R4dCA9IGFyZzsKKyAg
ICBpbnQgYnVzLCBkZXZmbjsKKyAgICBpbnQgcmMgPSAwOworCisgICAgLyoKKyAgICAgKiBXZSBk
b24ndCBpdGVyYXRlIGJ5IHdhbGtpbmcgcHNlZy0+YWxsZGV2c19saXN0IGhlcmUgYmVjYXVzZSB0
aGF0CisgICAgICogd291bGQgbWFrZSB0aGUgcGNpZGV2c191bmxvY2soKS9sb2NrKCkgc2VxdWVu
Y2UgYmVsb3cgdW5zYWZlLgorICAgICAqLworICAgIGZvciAoIGJ1cyA9IDA7ICFyYyAmJiBidXMg
PCAyNTY7IGJ1cysrICkKKyAgICAgICAgZm9yICggZGV2Zm4gPSAwOyAhcmMgJiYgZGV2Zm4gPCAy
NTY7IGRldmZuKysgKQogICAgICAgICB7CiAgICAgICAgICAgICBzdHJ1Y3QgcGNpX2RldiAqcGRl
diA9IHBjaV9nZXRfcGRldihwc2VnLT5uciwgYnVzLCBkZXZmbik7CiAKICAgICAgICAgICAgIGlm
ICggIXBkZXYgKQogICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogCi0gICAgICAgICAgICBpZiAo
ICFwZGV2LT5kb21haW4gKQotICAgICAgICAgICAgewotICAgICAgICAgICAgICAgIHBkZXYtPmRv
bWFpbiA9IGN0eHQtPmQ7Ci0gICAgICAgICAgICAgICAgbGlzdF9hZGQoJnBkZXYtPmRvbWFpbl9s
aXN0LCAmY3R4dC0+ZC0+cGRldl9saXN0KTsKLSAgICAgICAgICAgICAgICBzZXR1cF9vbmVfaHdk
b21fZGV2aWNlKGN0eHQsIHBkZXYpOwotICAgICAgICAgICAgfQotICAgICAgICAgICAgZWxzZSBp
ZiAoIHBkZXYtPmRvbWFpbiA9PSBkb21feGVuICkKLSAgICAgICAgICAgIHsKLSAgICAgICAgICAg
ICAgICBwZGV2LT5kb21haW4gPSBjdHh0LT5kOwotICAgICAgICAgICAgICAgIHNldHVwX29uZV9o
d2RvbV9kZXZpY2UoY3R4dCwgcGRldik7Ci0gICAgICAgICAgICAgICAgcGRldi0+ZG9tYWluID0g
ZG9tX3hlbjsKLSAgICAgICAgICAgIH0KLSAgICAgICAgICAgIGVsc2UgaWYgKCBwZGV2LT5kb21h
aW4gIT0gY3R4dC0+ZCApCi0gICAgICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19XQVJOSU5HICJE
b20lZCBvd25pbmcgJTA0eDolMDJ4OiUwMnguJXU/XG4iLAotICAgICAgICAgICAgICAgICAgICAg
ICBwZGV2LT5kb21haW4tPmRvbWFpbl9pZCwgcHNlZy0+bnIsIGJ1cywKLSAgICAgICAgICAgICAg
ICAgICAgICAgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbikpOworICAgICAgICAgICAg
cmMgPSBjdHh0LT5jYihwZGV2LCBjdHh0LT5hcmcpOwogCi0gICAgICAgICAgICBpZiAoIGlvbW11
X3ZlcmJvc2UgKQotICAgICAgICAgICAgewotICAgICAgICAgICAgICAgIHBjaWRldnNfdW5sb2Nr
KCk7Ci0gICAgICAgICAgICAgICAgcHJvY2Vzc19wZW5kaW5nX3NvZnRpcnFzKCk7Ci0gICAgICAg
ICAgICAgICAgcGNpZGV2c19sb2NrKCk7Ci0gICAgICAgICAgICB9Ci0gICAgICAgIH0KLQotICAg
ICAgICBpZiAoICFpb21tdV92ZXJib3NlICkKLSAgICAgICAgeworICAgICAgICAgICAgLyoKKyAg
ICAgICAgICAgICAqIEVyciBvbiB0aGUgc2FmZSBzaWRlIGFuZCBhc3N1bWUgdGhlIGNhbGxiYWNr
IGhhcyB0YWtlbgorICAgICAgICAgICAgICogYSBzaWduaWZpY2FudCBhbW91bnQgb2YgdGltZS4K
KyAgICAgICAgICAgICAqLwogICAgICAgICAgICAgcGNpZGV2c191bmxvY2soKTsKICAgICAgICAg
ICAgIHByb2Nlc3NfcGVuZGluZ19zb2Z0aXJxcygpOwogICAgICAgICAgICAgcGNpZGV2c19sb2Nr
KCk7CiAgICAgICAgIH0KLSAgICB9CiAKLSAgICByZXR1cm4gMDsKKyAgICByZXR1cm4gcmM7Cit9
CisKK2ludCBwY2lfcGRldnNfaXRlcmF0ZShpbnQgKCpjYikoc3RydWN0IHBjaV9kZXYgKiwgdm9p
ZCAqKSwgdm9pZCAqYXJnKQoreworICAgIHN0cnVjdCBwc2RpX2N0eHQgY3R4dCA9IHsgLmNiID0g
Y2IsIC5hcmcgPSBhcmcgfTsKKyAgICBpbnQgcmM7CisKKyAgICBwY2lkZXZzX2xvY2soKTsKKyAg
ICByYyA9IHBjaV9zZWdtZW50c19pdGVyYXRlKHBjaV9zZWdtZW50X2RldmljZXNfaXRlcmF0ZSwg
JmN0eHQpOworICAgIHBjaWRldnNfdW5sb2NrKCk7CisKKyAgICByZXR1cm4gcmM7CiB9CiAKIHZv
aWQgX19od2RvbV9pbml0IHNldHVwX2h3ZG9tX3BjaV9kZXZpY2VzKApAQCAtMTE4OSw5ICsxMjEz
LDcgQEAgdm9pZCBfX2h3ZG9tX2luaXQgc2V0dXBfaHdkb21fcGNpX2RldmljZXMoCiB7CiAgICAg
c3RydWN0IHNldHVwX2h3ZG9tIGN0eHQgPSB7IC5kID0gZCwgLmhhbmRsZXIgPSBoYW5kbGVyIH07
CiAKLSAgICBwY2lkZXZzX2xvY2soKTsKLSAgICBwY2lfc2VnbWVudHNfaXRlcmF0ZShfc2V0dXBf
aHdkb21fcGNpX2RldmljZXMsICZjdHh0KTsKLSAgICBwY2lkZXZzX3VubG9jaygpOworICAgIHBj
aV9wZGV2c19pdGVyYXRlKHNldHVwX2h3ZG9tX3BjaV9kZXZpY2UsICZjdHh0KTsKIH0KIAogI2lm
ZGVmIENPTkZJR19BQ1BJCkBAIC0xMjk0LDI0ICsxMzE2LDE4IEBAIGJvb2xfdCBwY2llX2Flcl9n
ZXRfZmlybXdhcmVfZmlyc3QoY29uc3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYpCiB9CiAjZW5kaWYK
IAotc3RhdGljIGludCBfZHVtcF9wY2lfZGV2aWNlcyhzdHJ1Y3QgcGNpX3NlZyAqcHNlZywgdm9p
ZCAqYXJnKQorc3RhdGljIGludCBkdW1wX3BjaV9kZXZpY2Uoc3RydWN0IHBjaV9kZXYgKnBkZXYs
IHZvaWQgKmFyZykKIHsKLSAgICBzdHJ1Y3QgcGNpX2RldiAqcGRldjsKICAgICBzdHJ1Y3QgbXNp
X2Rlc2MgKm1zaTsKIAotICAgIHByaW50aygiPT09PSBzZWdtZW50ICUwNHggPT09PVxuIiwgcHNl
Zy0+bnIpOwotCi0gICAgbGlzdF9mb3JfZWFjaF9lbnRyeSAoIHBkZXYsICZwc2VnLT5hbGxkZXZz
X2xpc3QsIGFsbGRldnNfbGlzdCApCi0gICAgewotICAgICAgICBwcmludGsoIiUwNHg6JTAyeDol
MDJ4LiV1IC0gZG9tICUtM2QgLSBub2RlICUtM2QgLSBNU0lzIDwgIiwKLSAgICAgICAgICAgICAg
IHBzZWctPm5yLCBwZGV2LT5idXMsCi0gICAgICAgICAgICAgICBQQ0lfU0xPVChwZGV2LT5kZXZm
biksIFBDSV9GVU5DKHBkZXYtPmRldmZuKSwKLSAgICAgICAgICAgICAgIHBkZXYtPmRvbWFpbiA/
IHBkZXYtPmRvbWFpbi0+ZG9tYWluX2lkIDogLTEsCi0gICAgICAgICAgICAgICAocGRldi0+bm9k
ZSAhPSBOVU1BX05PX05PREUpID8gcGRldi0+bm9kZSA6IC0xKTsKLSAgICAgICAgbGlzdF9mb3Jf
ZWFjaF9lbnRyeSAoIG1zaSwgJnBkZXYtPm1zaV9saXN0LCBsaXN0ICkKLSAgICAgICAgICAgICAg
IHByaW50aygiJWQgIiwgbXNpLT5pcnEpOwotICAgICAgICBwcmludGsoIj5cbiIpOwotICAgIH0K
KyAgICBwcmludGsoIiUwNHg6JTAyeDolMDJ4LiV1IC0gZG9tICUtM2QgLSBub2RlICUtM2QgLSBN
U0lzIDwgIiwKKyAgICAgICAgICAgcGRldi0+c2VnLCBwZGV2LT5idXMsIFBDSV9TTE9UKHBkZXYt
PmRldmZuKSwKKyAgICAgICAgICAgUENJX0ZVTkMocGRldi0+ZGV2Zm4pLAorICAgICAgICAgICBw
ZGV2LT5kb21haW4gPyBwZGV2LT5kb21haW4tPmRvbWFpbl9pZCA6IC0xLAorICAgICAgICAgICAo
cGRldi0+bm9kZSAhPSBOVU1BX05PX05PREUpID8gcGRldi0+bm9kZSA6IC0xKTsKKyAgICBsaXN0
X2Zvcl9lYWNoX2VudHJ5ICggbXNpLCAmcGRldi0+bXNpX2xpc3QsIGxpc3QgKQorICAgICAgICBw
cmludGsoIiVkICIsIG1zaS0+aXJxKTsKKyAgICBwcmludGsoIj5cbiIpOwogCiAgICAgcmV0dXJu
IDA7CiB9CkBAIC0xMzE5LDkgKzEzMzUsNyBAQCBzdGF0aWMgaW50IF9kdW1wX3BjaV9kZXZpY2Vz
KHN0cnVjdCBwY2lfc2VnICpwc2VnLCB2b2lkICphcmcpCiBzdGF0aWMgdm9pZCBkdW1wX3BjaV9k
ZXZpY2VzKHVuc2lnbmVkIGNoYXIgY2gpCiB7CiAgICAgcHJpbnRrKCI9PT09IFBDSSBkZXZpY2Vz
ID09PT1cbiIpOwotICAgIHBjaWRldnNfbG9jaygpOwotICAgIHBjaV9zZWdtZW50c19pdGVyYXRl
KF9kdW1wX3BjaV9kZXZpY2VzLCBOVUxMKTsKLSAgICBwY2lkZXZzX3VubG9jaygpOworICAgIHBj
aV9wZGV2c19pdGVyYXRlKGR1bXBfcGNpX2RldmljZSwgTlVMTCk7CiB9CiAKIHN0YXRpYyBpbnQg
X19pbml0IHNldHVwX2R1bXBfcGNpZGV2cyh2b2lkKQpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUv
eGVuL3BjaS5oIGIveGVuL2luY2x1ZGUveGVuL3BjaS5oCmluZGV4IDA0YTlmNDZjYzMuLjc5ZWIy
NTQxN2IgMTAwNjQ0Ci0tLSBhL3hlbi9pbmNsdWRlL3hlbi9wY2kuaAorKysgYi94ZW4vaW5jbHVk
ZS94ZW4vcGNpLmgKQEAgLTE1NCw2ICsxNTQsNyBAQCBpbnQgZmluZF91cHN0cmVhbV9icmlkZ2Uo
dTE2IHNlZywgdTggKmJ1cywgdTggKmRldmZuLCB1OCAqc2VjYnVzKTsKIHN0cnVjdCBwY2lfZGV2
ICpwY2lfbG9ja19wZGV2KGludCBzZWcsIGludCBidXMsIGludCBkZXZmbik7CiBzdHJ1Y3QgcGNp
X2RldiAqcGNpX2xvY2tfZG9tYWluX3BkZXYoCiAgICAgc3RydWN0IGRvbWFpbiAqLCBpbnQgc2Vn
LCBpbnQgYnVzLCBpbnQgZGV2Zm4pOworaW50IHBjaV9wZGV2c19pdGVyYXRlKGludCAoKmNiKShz
dHJ1Y3QgcGNpX2RldiAqLCB2b2lkICopLCB2b2lkICphcmcpOwogCiB2b2lkIHNldHVwX2h3ZG9t
X3BjaV9kZXZpY2VzKHN0cnVjdCBkb21haW4gKiwKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpbnQgKCopKHU4IGRldmZuLCBzdHJ1Y3QgcGNpX2RldiAqKSk7Ci0tIAoyLjExLjAKCgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFp
bGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhl
bnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

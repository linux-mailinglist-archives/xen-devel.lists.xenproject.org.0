Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 5AA1F16FDEB
	for <lists+xen-devel@lfdr.de>; Wed, 26 Feb 2020 12:37:08 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j6uw9-0000zE-UH; Wed, 26 Feb 2020 11:33:09 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=TmNR=4O=gmail.com=julien.grall.oss@srs-us1.protection.inumbo.net>)
 id 1j6uw8-0000z9-AV
 for xen-devel@lists.xenproject.org; Wed, 26 Feb 2020 11:33:08 +0000
X-Inumbo-ID: c27b8396-588b-11ea-a490-bc764e2007e4
Received: from mail-ed1-f66.google.com (unknown [209.85.208.66])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id c27b8396-588b-11ea-a490-bc764e2007e4;
 Wed, 26 Feb 2020 11:33:08 +0000 (UTC)
Received: by mail-ed1-f66.google.com with SMTP id e10so3322938edv.9
 for <xen-devel@lists.xenproject.org>; Wed, 26 Feb 2020 03:33:07 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-language
 :content-transfer-encoding;
 bh=l/zRm9Eeia+LEr20eJBBoIbXakk7Ila19HdjIxrBVGQ=;
 b=SoZIVIA2vNg/ctXriB9nOWXK/TmucMQ4P+ymEvp9AaPERK21sM/nc45KmJFCaSKXeg
 VMnBjxUdQKsLpXoKwtWqUUFGksnlW90Qte74WE067DckysYiZVLt5r0JkICFpUbPKIfm
 xigH90fMWkvwp5Mye3Q/pjFv6EC+zKV7eg1um7qzSX2bRsLpgxZfpWBRgS7gcZvWCPF6
 h9HQ8dNxxyyp/ycf8CxpMBzhUwwufhGVFMNoIy9QsCCjMgu2C2uVM056yrooP2QGOSGi
 M6VEb87ppRq3tHWinvcqBzpIDtTWBCkr+1OGPy2GPLsoWBFZ7mn4lOvFzQvhiWsETkKq
 WzAw==
X-Gm-Message-State: APjAAAVM8LbjmqlYm9LWXduaM7vqMPDdnRivLnm4rULJL7/C7gcKOyr8
 5ZOV9vYAlo1wsU8gV905eqJahOuqQhSeZw==
X-Google-Smtp-Source: APXvYqyv3mTNyIxDwmhaTR+fGYfePtaP3eSieKqHiSeEQQPyvku3EGYEBEb17GqcCox5OpkXcVJJLw==
X-Received: by 2002:a05:6402:1426:: with SMTP id
 c6mr4117936edx.49.1582716787016; 
 Wed, 26 Feb 2020 03:33:07 -0800 (PST)
Received: from a483e7b01a66.ant.amazon.com (54-240-197-234.amazon.com.
 [54.240.197.234])
 by smtp.gmail.com with ESMTPSA id x6sm61040ejw.84.2020.02.26.03.33.05
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Wed, 26 Feb 2020 03:33:06 -0800 (PST)
To: Paul Durrant <pdurrant@amazon.com>, xen-devel@lists.xenproject.org
References: <20200225095357.3923-1-pdurrant@amazon.com>
 <20200225095357.3923-3-pdurrant@amazon.com>
From: Julien Grall <julien@xen.org>
Message-ID: <9a5742f9-7533-d9b1-b93d-a3a85e5d8c9f@xen.org>
Date: Wed, 26 Feb 2020 11:33:05 +0000
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:68.0)
 Gecko/20100101 Thunderbird/68.5.0
MIME-Version: 1.0
In-Reply-To: <20200225095357.3923-3-pdurrant@amazon.com>
Content-Language: en-GB
Subject: Re: [Xen-devel] [PATCH 2/2] domain: use PGC_extra domheap page for
 shared_info
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 George Dunlap <george.dunlap@citrix.com>, Jan Beulich <jbeulich@suse.com>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGkgUGF1bCwKCk9uIDI1LzAyLzIwMjAgMDk6NTMsIFBhdWwgRHVycmFudCB3cm90ZToKPiBUaGVy
ZSdzIG5vIHBhcnRpY3VsYXIgcmVhc29uIHNoYXJlZF9pbmZvIG5lZWQgdXNlIGEgeGVuaGVhcCBw
YWdlLgoKQUZBSUNULCBhIHNpZGUtZWZmZWN0IG9mIHRoaXMgY2hhbmdlIGlzIHRoZSBzaGFyZWRf
aW5mbyBpcyBub3cgZ29pbmcgdG8gCmJlIHBhcnQgb2YgdGhlIG1pZ3JhdGlvbiBzdHJlYW0uIE9u
ZSBpc3N1ZSB3aXRoIHRoaXMgaXMgb24gdGhlIHJlc3RvcmUgCnNpZGUsIHRoZXkgd2lsbCBiZSBh
Y2NvdW50ZWQgaW4gbnVtYmVyIG9mIHBhZ2VzIGFsbG9jYXRlZCB0byB0aGUgZG9tYWluLgoKSSBh
bSBmYWlybHkgY2VydGFpbiBkaXJ0eSBsb2dnaW5nIG9uIHBhZ2Ugd2l0aCBQR0NfZXh0cmEgc2V0
IHdvdWxkIG5vdCAKd29yayBwcm9wZXJseSBhcyB3ZWxsLgoKQXMgdGhlIHBhZ2VzIHdpbGwgYmUg
cmVjcmVhdGVkIGluIHRoZSByZXN0b3JlIHNpZGUsIEkgd291bGQgc3VnZ2VzdCB0byAKc2tpcCB0
aGVtIGluIFhFTl9ET01DVExfZ2V0cGFnZWZyYW1laW5mbzMuCgo+IEl0J3MKPiBvbmx5IHB1cnBv
c2UgaXMgdG8gYmUgbWFwcGVkIGJ5IHRoZSBndWVzdCBzbyB1c2UgYSBQR0NfZXh0cmEgZG9taGVh
cCBwYWdlCj4gaW5zdGVhZC4gVGhpcyBkb2VzIGVudGFpbCBmcmVlaW5nIHNoYXJlZF9pbmZvIGR1
cmluZwo+IGRvbWFpbl9yZWxpbnF1aXNoX3Jlc291cmNlcygpIHJhdGhlciB0aGFuIGRvbWFpbl9k
ZXN0cm95KCkgc28gY2FyZSBpcwo+IG5lZWRlZCB0byBhdm9pZCBkZS1yZWZlcmVuY2luZyBhIE5V
TEwgc2hhcmVkX2luZm8gcG9pbnRlciBoZW5jZSBzb21lCj4gZXh0cmEgY2hlY2tzIG9mICdpc19k
eWluZycgYXJlIG5lZWRlZC4KPiBBU1NFUlRpb25zIGFyZSBhZGRlZCBiZWZvcmUgYXBwYXJlbnRs
eSB2dWxuZXJhYmxlIGRlcmVmZXJlbmNlcyBpbiB0aGUKPiBldmVudCBjaGFubmVsIGNvZGUuIFRo
ZXNlIHNob3VsZCBub3QgYmUgaGl0IGJlY2F1c2UgZG9tYWluX2tpbGwoKSBjYWxscwo+IGV2dGNo
bl9kZXN0cm95KCkgYmVmb3JlIGNhbGxpbmcgZG9tYWluX3JlbGlucXVpc2hfcmVzb3VyY2VzKCkg
YnV0IGFyZQo+IGFkZGVkIHRvIGNhdGNoIGFueSBmdXR1cmUgcmUtb3JkZXJpbmcuCgpJSE1PLCB0
aGUgQVNTRVJUaW9ucyBpbiB0aGUgZXZlbnQgY2hhbm5lbCBwZW5kaW5nL21hc2svLi4uIGhlbHBl
cnMgd2lsbCAKbm90IHByb3RlY3QgYWdhaW5zdCByZS1vcmRlcmluZy4gWW91IG1heSBuZXZlciBo
aXQgdGhlbSBldmVuIGlmIHRoZXJlIGlzIAphIHJlLW9yZGVyaW5nLiBJdCB3b3VsZCBiZSBiZXR0
ZXIgdG8gYWRkIGFuIEFTU0VSVCgpL0JVR19PTigpIGluIApldnRjaG5fZGVzdHJveSgpIGFuZCBw
b3NzaWJseSBhIGNvbW1lbnQgaW4gZG9tYWluX2tpbGwoKSB0byBtZW50aW9uIApvcmRlcmluZy4K
Cj4gRm9yIEFybSwgdGhlIGNhbGwgdG8gZnJlZV9zaGFyZWRfaW5mbygpIGluIGFyY2hfZG9tYWlu
X2Rlc3Ryb3koKSBpcyBsZWZ0Cj4gaW4gcGxhY2Ugc2luY2UgaXQgY2FsbGVkIGluIHRoZSBlcnJv
ciBwYXRoIGZvciBhcmNoX2RvbWFpbl9jcmVhdGUoKS4KPiAKPiBOT1RFOiBBIG1vZGlmaWNhdGlv
biBpbiBwMm1fYWxsb2NfdGFibGUoKSBpcyByZXF1aXJlZCB0byBhdm9pZCBhIGZhbHNlCj4gICAg
ICAgIHBvc2l0aXZlIHdoZW4gY2hlY2tpbmcgZm9yIGRvbWFpbiBtZW1vcnkuCj4gICAgICAgIEEg
Zml4IGlzIGFsc28gbmVlZGVkIGluIGRvbTBfY29uc3RydWN0X3B2KCkgdG8gYXZvaWQgYXV0b21h
dGljYWxseQo+ICAgICAgICBhZGRpbmcgUEdDX2V4dHJhIHBhZ2VzIHRvIHRoZSBwaHlzbWFwLgoK
SSBhbSBub3QgZW50aXJlbHkgc3VyZSBob3cgdGhpcyBpcyByZWxhdGVkIHRvIHRoaXMgcGF0Y2gu
IFdhcyBpdCBhIApsYXRlbnQgYnVnPyBJZiBzbywgSSB0aGluayBpdCB3b3VsZCBtYWtlIHNlbnNl
IHRvIHNwbGl0IGl0IGZyb20gdGhpcyBwYXRjaC4KCj4gCj4gU2lnbmVkLW9mZi1ieTogUGF1bCBE
dXJyYW50IDxwZHVycmFudEBhbWF6b24uY29tPgo+IC0tLQo+IENjOiBTdGVmYW5vIFN0YWJlbGxp
bmkgPHNzdGFiZWxsaW5pQGtlcm5lbC5vcmc+Cj4gQ2M6IEp1bGllbiBHcmFsbCA8anVsaWVuQHhl
bi5vcmc+Cj4gQ2M6IFZvbG9keW15ciBCYWJjaHVrIDxWb2xvZHlteXJfQmFiY2h1a0BlcGFtLmNv
bT4KPiBDYzogQW5kcmV3IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KPiBDYzog
R2VvcmdlIER1bmxhcCA8Z2VvcmdlLmR1bmxhcEBjaXRyaXguY29tPgo+IENjOiBJYW4gSmFja3Nv
biA8aWFuLmphY2tzb25AZXUuY2l0cml4LmNvbT4KPiBDYzogSmFuIEJldWxpY2ggPGpiZXVsaWNo
QHN1c2UuY29tPgo+IENjOiBLb25yYWQgUnplc3p1dGVrIFdpbGsgPGtvbnJhZC53aWxrQG9yYWNs
ZS5jb20+Cj4gQ2M6IFdlaSBMaXUgPHdsQHhlbi5vcmc+Cj4gLS0tCj4gICB4ZW4vYXJjaC9hcm0v
ZG9tYWluLmMgICAgICAgIHwgIDIgKysKPiAgIHhlbi9hcmNoL3g4Ni9kb21haW4uYyAgICAgICAg
fCAgMyArKy0KPiAgIHhlbi9hcmNoL3g4Ni9tbS9wMm0uYyAgICAgICAgfCAgMyArLS0KPiAgIHhl
bi9hcmNoL3g4Ni9wdi9kb20wX2J1aWxkLmMgfCAgNCArKysrCj4gICB4ZW4vY29tbW9uL2RvbWFp
bi5jICAgICAgICAgIHwgMjUgKysrKysrKysrKysrKysrKysrKy0tLS0tLQo+ICAgeGVuL2NvbW1v
bi9ldmVudF8ybC5jICAgICAgICB8ICA0ICsrKysKPiAgIHhlbi9jb21tb24vZXZlbnRfZmlmby5j
ICAgICAgfCAgMSArCj4gICB4ZW4vY29tbW9uL3RpbWUuYyAgICAgICAgICAgIHwgIDMgKysrCj4g
ICA4IGZpbGVzIGNoYW5nZWQsIDM2IGluc2VydGlvbnMoKyksIDkgZGVsZXRpb25zKC0pCj4gCj4g
ZGlmZiAtLWdpdCBhL3hlbi9hcmNoL2FybS9kb21haW4uYyBiL3hlbi9hcmNoL2FybS9kb21haW4u
Ywo+IGluZGV4IDJjYmNkYWFjMDguLjM5MDQ1MTkyNTYgMTAwNjQ0Cj4gLS0tIGEveGVuL2FyY2gv
YXJtL2RvbWFpbi5jCj4gKysrIGIveGVuL2FyY2gvYXJtL2RvbWFpbi5jCj4gQEAgLTEwMDYsNiAr
MTAwNiw4IEBAIGludCBkb21haW5fcmVsaW5xdWlzaF9yZXNvdXJjZXMoc3RydWN0IGRvbWFpbiAq
ZCkKPiAgICAgICAgICAgQlVHKCk7Cj4gICAgICAgfQo+ICAgCj4gKyAgICBmcmVlX3NoYXJlZF9p
bmZvKGQpOwo+ICsKPiAgICAgICByZXR1cm4gMDsKPiAgIH0KPiAgIAo+IGRpZmYgLS1naXQgYS94
ZW4vYXJjaC94ODYvZG9tYWluLmMgYi94ZW4vYXJjaC94ODYvZG9tYWluLmMKPiBpbmRleCBlYjdi
MGZjNTFjLi4zYWQ1MzJlY2NmIDEwMDY0NAo+IC0tLSBhL3hlbi9hcmNoL3g4Ni9kb21haW4uYwo+
ICsrKyBiL3hlbi9hcmNoL3g4Ni9kb21haW4uYwo+IEBAIC02OTEsNyArNjkxLDYgQEAgdm9pZCBh
cmNoX2RvbWFpbl9kZXN0cm95KHN0cnVjdCBkb21haW4gKmQpCj4gICAgICAgICAgIHB2X2RvbWFp
bl9kZXN0cm95KGQpOwo+ICAgICAgIGZyZWVfcGVyZG9tYWluX21hcHBpbmdzKGQpOwo+ICAgCj4g
LSAgICBmcmVlX3NoYXJlZF9pbmZvKGQpOwo+ICAgICAgIGNsZWFudXBfZG9tYWluX2lycV9tYXBw
aW5nKGQpOwo+ICAgCj4gICAgICAgcHNyX2RvbWFpbl9mcmVlKGQpOwo+IEBAIC0yMjQ2LDYgKzIy
NDUsOCBAQCBpbnQgZG9tYWluX3JlbGlucXVpc2hfcmVzb3VyY2VzKHN0cnVjdCBkb21haW4gKmQp
Cj4gICAgICAgaWYgKCBpc19odm1fZG9tYWluKGQpICkKPiAgICAgICAgICAgaHZtX2RvbWFpbl9y
ZWxpbnF1aXNoX3Jlc291cmNlcyhkKTsKPiAgIAo+ICsgICAgZnJlZV9zaGFyZWRfaW5mbyhkKTsK
PiArCj4gICAgICAgcmV0dXJuIDA7Cj4gICB9Cj4gICAKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gv
eDg2L21tL3AybS5jIGIveGVuL2FyY2gveDg2L21tL3AybS5jCj4gaW5kZXggYzVmNDI4ZDY3Yy4u
Nzg3ZDk3ZDg1ZSAxMDA2NDQKPiAtLS0gYS94ZW4vYXJjaC94ODYvbW0vcDJtLmMKPiArKysgYi94
ZW4vYXJjaC94ODYvbW0vcDJtLmMKPiBAQCAtNjk1LDggKzY5NSw3IEBAIGludCBwMm1fYWxsb2Nf
dGFibGUoc3RydWN0IHAybV9kb21haW4gKnAybSkKPiAgIAo+ICAgICAgIHAybV9sb2NrKHAybSk7
Cj4gICAKPiAtICAgIGlmICggcDJtX2lzX2hvc3RwMm0ocDJtKQo+IC0gICAgICAgICAmJiAhcGFn
ZV9saXN0X2VtcHR5KCZkLT5wYWdlX2xpc3QpICkKPiArICAgIGlmICggcDJtX2lzX2hvc3RwMm0o
cDJtKSAmJiBkb21haW5fdG90X3BhZ2VzKGQpICkKPiAgICAgICB7Cj4gICAgICAgICAgIFAyTV9F
UlJPUigiZG9tICVkIGFscmVhZHkgaGFzIG1lbW9yeSBhbGxvY2F0ZWRcbiIsIGQtPmRvbWFpbl9p
ZCk7Cj4gICAgICAgICAgIHAybV91bmxvY2socDJtKTsKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gv
eDg2L3B2L2RvbTBfYnVpbGQuYyBiL3hlbi9hcmNoL3g4Ni9wdi9kb20wX2J1aWxkLmMKPiBpbmRl
eCBkYzE2ZWYyZTc5Li5mOGYxYmJlMmY0IDEwMDY0NAo+IC0tLSBhL3hlbi9hcmNoL3g4Ni9wdi9k
b20wX2J1aWxkLmMKPiArKysgYi94ZW4vYXJjaC94ODYvcHYvZG9tMF9idWlsZC5jCj4gQEAgLTc5
Miw2ICs3OTIsMTAgQEAgaW50IF9faW5pdCBkb20wX2NvbnN0cnVjdF9wdihzdHJ1Y3QgZG9tYWlu
ICpkLAo+ICAgICAgIHsKPiAgICAgICAgICAgbWZuID0gbWZuX3gocGFnZV90b19tZm4ocGFnZSkp
Owo+ICAgICAgICAgICBCVUdfT04oU0hBUkVEX00yUChnZXRfZ3Bmbl9mcm9tX21mbihtZm4pKSk7
Cj4gKwo+ICsgICAgICAgIGlmICggcGFnZS0+Y291bnRfaW5mbyAmIFBHQ19leHRyYSApCj4gKyAg
ICAgICAgICAgIGNvbnRpbnVlOwoKSSB3b3VsZCBhZGQgYSBjb21tZW50IGV4cGxhaW5pbmcgd2h5
IHdlIHNraXAgcGFnZSB3aXRoIFBHQ19leHRyYSBzZXQuCgo+ICsKPiAgICAgICAgICAgaWYgKCBn
ZXRfZ3Bmbl9mcm9tX21mbihtZm4pID49IGNvdW50ICkKPiAgICAgICAgICAgewo+ICAgICAgICAg
ICAgICAgQlVHX09OKGlzX3B2XzMyYml0X2RvbWFpbihkKSk7Cj4gZGlmZiAtLWdpdCBhL3hlbi9j
b21tb24vZG9tYWluLmMgYi94ZW4vY29tbW9uL2RvbWFpbi5jCj4gaW5kZXggYmE3YTkwNTI1OC4u
MWQ0MmZiY2MwZiAxMDA2NDQKPiAtLS0gYS94ZW4vY29tbW9uL2RvbWFpbi5jCj4gKysrIGIveGVu
L2NvbW1vbi9kb21haW4uYwo+IEBAIC0xMjgsOSArMTI4LDkgQEAgc3RhdGljIHZvaWQgdmNwdV9p
bmZvX3Jlc2V0KHN0cnVjdCB2Y3B1ICp2KQo+ICAgewo+ICAgICAgIHN0cnVjdCBkb21haW4gKmQg
PSB2LT5kb21haW47Cj4gICAKPiAtICAgIHYtPnZjcHVfaW5mbyA9ICgodi0+dmNwdV9pZCA8IFhF
Tl9MRUdBQ1lfTUFYX1ZDUFVTKQo+ICsgICAgdi0+dmNwdV9pbmZvID0gKCFkLT5pc19keWluZyAm
JiB2LT52Y3B1X2lkIDwgWEVOX0xFR0FDWV9NQVhfVkNQVVMpCj4gICAgICAgICAgICAgICAgICAg
ICAgID8gKHZjcHVfaW5mb190ICopJnNoYXJlZF9pbmZvKGQsIHZjcHVfaW5mb1t2LT52Y3B1X2lk
XSkKPiAtICAgICAgICAgICAgICAgICAgICA6ICZkdW1teV92Y3B1X2luZm8pOwo+ICsgICAgICAg
ICAgICAgICAgICAgIDogJmR1bW15X3ZjcHVfaW5mbzsKCldpdGhvdXQgaG9sZGluZyBkb21haW5f
bG9jaygpLCBJIGRvbid0IHRoaW5rIHRoZXJlIGlzIGEgZ3VhcmFudGVlIHRoYXQgCmlzX2R5aW5n
IChhbmQgdGhlcmVmb3JlIHRoZSBzaGFyZWRfaW5mbykgaXMgbm90IGdvaW5nIHRvIGNoYW5nZSBi
ZWhpbmQgCnlvdXIgYmFjay4gU28gdi0+dmNwdV9pbmZvIG1heSBwb2ludCB0byBnYXJiYWdnZS4K
Ckxvb2tpbmcgYXQgdGhlIGNhbGxlcnMsIFhFTl9ET01DVExfc29mdF9yZXNldCB3aWxsIG5vdCBo
b2xkIHRoZSBsb2NrLgoKQXMgYW4gYXNpZGUsIGl0IHdvdWxkIGJlIGdvb2QgdG8gZXhwbGFpbiBp
biBhIGNvbW1lbnQgd2h5IHdlIGFyZSB1c2luZyAKZHVtbXlfdmNwdV9pbmZvIHdoZW4gdGhlIGRv
bWFpbiBpcyBkeWluZy4KCj4gICAgICAgdi0+dmNwdV9pbmZvX21mbiA9IElOVkFMSURfTUZOOwo+
ICAgfQo+ICAgCj4gQEAgLTE2NTAsMjQgKzE2NTAsMzcgQEAgaW50IGNvbnRpbnVlX2h5cGVyY2Fs
bF9vbl9jcHUoCj4gICAKPiAgIGludCBhbGxvY19zaGFyZWRfaW5mbyhzdHJ1Y3QgZG9tYWluICpk
LCB1bnNpZ25lZCBpbnQgbWVtZmxhZ3MpCj4gICB7Cj4gLSAgICBpZiAoIChkLT5zaGFyZWRfaW5m
by52aXJ0ID0gYWxsb2NfeGVuaGVhcF9wYWdlcygwLCBtZW1mbGFncykpID09IE5VTEwgKQo+ICsg
ICAgc3RydWN0IHBhZ2VfaW5mbyAqcGc7Cj4gKwo+ICsgICAgcGcgPSBhbGxvY19kb21oZWFwX3Bh
Z2UoZCwgTUVNRl9ub19yZWZjb3VudCB8IG1lbWZsYWdzKTsKPiArICAgIGlmICggIXBnICkKPiAg
ICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gICAKPiAtICAgIGQtPnNoYXJlZF9pbmZvLm1mbiA9
IHZpcnRfdG9fbWZuKGQtPnNoYXJlZF9pbmZvLnZpcnQpOwo+ICsgICAgaWYgKCAhZ2V0X3BhZ2Vf
YW5kX3R5cGUocGcsIGQsIFBHVF93cml0YWJsZV9wYWdlKSApCj4gKyAgICAgICAgcmV0dXJuIC1F
Tk9EQVRBOwoKSSB0aGluayB0aGUgcGFnZSB3aWxsIG5ldmVyIGJlIGZyZWVkIGlmIHRoaXMgZmFp
bHMuCgo+ICsKPiArICAgIGQtPnNoYXJlZF9pbmZvLm1mbiA9IHBhZ2VfdG9fbWZuKHBnKTsKPiAr
ICAgIGQtPnNoYXJlZF9pbmZvLnZpcnQgPSBfX21hcF9kb21haW5fcGFnZV9nbG9iYWwocGcpOwo+
ICAgCj4gICAgICAgY2xlYXJfcGFnZShkLT5zaGFyZWRfaW5mby52aXJ0KTsKPiAtICAgIHNoYXJl
X3hlbl9wYWdlX3dpdGhfZ3Vlc3QobWZuX3RvX3BhZ2UoZC0+c2hhcmVkX2luZm8ubWZuKSwgZCwg
U0hBUkVfcncpOwo+ICAgCj4gICAgICAgcmV0dXJuIDA7Cj4gICB9Cj4gICAKPiAgIHZvaWQgZnJl
ZV9zaGFyZWRfaW5mbyhzdHJ1Y3QgZG9tYWluICpkKQo+ICAgewo+ICsgICAgc3RydWN0IHBhZ2Vf
aW5mbyAqcGc7Cj4gKwo+ICAgICAgIGlmICggIWQtPnNoYXJlZF9pbmZvLnZpcnQgKQo+ICAgICAg
ICAgICByZXR1cm47Cj4gICAKPiAtICAgIGZyZWVfeGVuaGVhcF9wYWdlKGQtPnNoYXJlZF9pbmZv
LnZpcnQpOwo+ICsgICAgdW5tYXBfZG9tYWluX3BhZ2VfZ2xvYmFsKGQtPnNoYXJlZF9pbmZvLnZp
cnQpOwo+ICAgICAgIGQtPnNoYXJlZF9pbmZvLnZpcnQgPSBOVUxMOwo+ICsKPiArICAgIHBnID0g
bWZuX3RvX3BhZ2UoZC0+c2hhcmVkX2luZm8ubWZuKTsKPiArCj4gKyAgICBwdXRfcGFnZV9hbGxv
Y19yZWYocGcpOwo+ICsgICAgcHV0X3BhZ2VfYW5kX3R5cGUocGcpOwo+ICAgfQo+ICAgCj4gICAv
Kgo+IGRpZmYgLS1naXQgYS94ZW4vY29tbW9uL2V2ZW50XzJsLmMgYi94ZW4vY29tbW9uL2V2ZW50
XzJsLmMKPiBpbmRleCBlMWRiYjg2MGY0Li5hNzJmZTAyMzJiIDEwMDY0NAo+IC0tLSBhL3hlbi9j
b21tb24vZXZlbnRfMmwuYwo+ICsrKyBiL3hlbi9jb21tb24vZXZlbnRfMmwuYwo+IEBAIC0yNyw2
ICsyNyw3IEBAIHN0YXRpYyB2b2lkIGV2dGNobl8ybF9zZXRfcGVuZGluZyhzdHJ1Y3QgdmNwdSAq
diwgc3RydWN0IGV2dGNobiAqZXZ0Y2huKQo+ICAgICAgICAqIG90aGVycyBtYXkgcmVxdWlyZSBl
eHBsaWNpdCBtZW1vcnkgYmFycmllcnMuCj4gICAgICAgICovCj4gICAKPiArICAgIEFTU0VSVChk
LT5zaGFyZWRfaW5mby52aXJ0KTsKPiAgICAgICBpZiAoIGd1ZXN0X3Rlc3RfYW5kX3NldF9iaXQo
ZCwgcG9ydCwgJnNoYXJlZF9pbmZvKGQsIGV2dGNobl9wZW5kaW5nKSkgKQo+ICAgICAgICAgICBy
ZXR1cm47Cj4gICAKPiBAQCAtNTQsNiArNTUsNyBAQCBzdGF0aWMgdm9pZCBldnRjaG5fMmxfdW5t
YXNrKHN0cnVjdCBkb21haW4gKmQsIHN0cnVjdCBldnRjaG4gKmV2dGNobikKPiAgICAgICAgKiBU
aGVzZSBvcGVyYXRpb25zIG11c3QgaGFwcGVuIGluIHN0cmljdCBvcmRlci4gQmFzZWQgb24KPiAg
ICAgICAgKiBldnRjaG5fMmxfc2V0X3BlbmRpbmcoKSBhYm92ZS4KPiAgICAgICAgKi8KPiArICAg
IEFTU0VSVChkLT5zaGFyZWRfaW5mby52aXJ0KTsKPiAgICAgICBpZiAoIGd1ZXN0X3Rlc3RfYW5k
X2NsZWFyX2JpdChkLCBwb3J0LCAmc2hhcmVkX2luZm8oZCwgZXZ0Y2huX21hc2spKSAmJgo+ICAg
ICAgICAgICAgZ3Vlc3RfdGVzdF9iaXQoZCwgcG9ydCwgJnNoYXJlZF9pbmZvKGQsIGV2dGNobl9w
ZW5kaW5nKSkgJiYKPiAgICAgICAgICAgICFndWVzdF90ZXN0X2FuZF9zZXRfYml0KGQsIHBvcnQg
LyBCSVRTX1BFUl9FVlRDSE5fV09SRChkKSwKPiBAQCAtNjcsNiArNjksNyBAQCBzdGF0aWMgYm9v
bCBldnRjaG5fMmxfaXNfcGVuZGluZyhjb25zdCBzdHJ1Y3QgZG9tYWluICpkLCBldnRjaG5fcG9y
dF90IHBvcnQpCj4gICB7Cj4gICAgICAgdW5zaWduZWQgaW50IG1heF9wb3J0cyA9IEJJVFNfUEVS
X0VWVENITl9XT1JEKGQpICogQklUU19QRVJfRVZUQ0hOX1dPUkQoZCk7Cj4gICAKPiArICAgIEFT
U0VSVChkLT5zaGFyZWRfaW5mby52aXJ0KTsKPiAgICAgICBBU1NFUlQocG9ydCA8IG1heF9wb3J0
cyk7Cj4gICAgICAgcmV0dXJuIChwb3J0IDwgbWF4X3BvcnRzICYmCj4gICAgICAgICAgICAgICBn
dWVzdF90ZXN0X2JpdChkLCBwb3J0LCAmc2hhcmVkX2luZm8oZCwgZXZ0Y2huX3BlbmRpbmcpKSk7
Cj4gQEAgLTc2LDYgKzc5LDcgQEAgc3RhdGljIGJvb2wgZXZ0Y2huXzJsX2lzX21hc2tlZChjb25z
dCBzdHJ1Y3QgZG9tYWluICpkLCBldnRjaG5fcG9ydF90IHBvcnQpCj4gICB7Cj4gICAgICAgdW5z
aWduZWQgaW50IG1heF9wb3J0cyA9IEJJVFNfUEVSX0VWVENITl9XT1JEKGQpICogQklUU19QRVJf
RVZUQ0hOX1dPUkQoZCk7Cj4gICAKPiArICAgIEFTU0VSVChkLT5zaGFyZWRfaW5mby52aXJ0KTsK
PiAgICAgICBBU1NFUlQocG9ydCA8IG1heF9wb3J0cyk7Cj4gICAgICAgcmV0dXJuIChwb3J0ID49
IG1heF9wb3J0cyB8fAo+ICAgICAgICAgICAgICAgZ3Vlc3RfdGVzdF9iaXQoZCwgcG9ydCwgJnNo
YXJlZF9pbmZvKGQsIGV2dGNobl9tYXNrKSkpOwo+IGRpZmYgLS1naXQgYS94ZW4vY29tbW9uL2V2
ZW50X2ZpZm8uYyBiL3hlbi9jb21tb24vZXZlbnRfZmlmby5jCj4gaW5kZXggMjMwZjQ0MGYxNC4u
ZThjNjA0NWQ3MiAxMDA2NDQKPiAtLS0gYS94ZW4vY29tbW9uL2V2ZW50X2ZpZm8uYwo+ICsrKyBi
L3hlbi9jb21tb24vZXZlbnRfZmlmby5jCj4gQEAgLTQ5Nyw2ICs0OTcsNyBAQCBzdGF0aWMgdm9p
ZCBzZXR1cF9wb3J0cyhzdHJ1Y3QgZG9tYWluICpkKQo+ICAgCj4gICAgICAgICAgIGV2dGNobiA9
IGV2dGNobl9mcm9tX3BvcnQoZCwgcG9ydCk7Cj4gICAKPiArICAgICAgICBBU1NFUlQoZC0+c2hh
cmVkX2luZm8udmlydCk7Cj4gICAgICAgICAgIGlmICggZ3Vlc3RfdGVzdF9iaXQoZCwgcG9ydCwg
JnNoYXJlZF9pbmZvKGQsIGV2dGNobl9wZW5kaW5nKSkgKQo+ICAgICAgICAgICAgICAgZXZ0Y2hu
LT5wZW5kaW5nID0gMTsKPiAgIAo+IGRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3RpbWUuYyBiL3hl
bi9jb21tb24vdGltZS5jCj4gaW5kZXggNThmYTlhYmM0MC4uOTM4MjI2YzdiMSAxMDA2NDQKPiAt
LS0gYS94ZW4vY29tbW9uL3RpbWUuYwo+ICsrKyBiL3hlbi9jb21tb24vdGltZS5jCj4gQEAgLTk5
LDYgKzk5LDkgQEAgdm9pZCB1cGRhdGVfZG9tYWluX3dhbGxjbG9ja190aW1lKHN0cnVjdCBkb21h
aW4gKmQpCj4gICAgICAgdWludDMyX3QgKndjX3ZlcnNpb247Cj4gICAgICAgdWludDY0X3Qgc2Vj
Owo+ICAgCj4gKyAgICBpZiAoIGQtPmlzX2R5aW5nICkKPiArICAgICAgICByZXR1cm47CgpUaGlz
IGlzIGFub3RoZXIgaW5zdGFuY2Ugd2hlcmUgSSB0aGluayB0aGUgdXNlIG9mIGQtPmlzX2R5aW5n
IGlzIG5vdCAKc2FmZS4gSSBsb29rZWQgYXQgaG93IG90aGVyIHBsYWNlcyBpbiBYZW4gZGVhbHQg
d2l0aCBkLT5pc19keWluZy4KCldlIGRvbid0IHNlZW0gdG8gaGF2ZSBhIGNvbW1vbiB3YXkgdG8g
ZGVhbCB3aXRoIGl0OgogICAgMSkgSXQgbWF5IGJlIGNoZWNrZWQgdW5kZXIgZG9tYWluX2xvY2so
KSAtPiBObyBpc3N1ZSB3aXRoIHRoYXQKICAgIDIpIEl0IG1heSBiZSBjaGVja2VkIHVuZGVyIGQt
PnBhZ2VfYWxsb2NfbG9jayAoZS5nIGFzc2lnbl9wYWdlcygpKS4gClRoZSBhc3NpZ25fcGFnZXMo
KSBjYXNlIGlzIGZpbmUgYmVjYXVzZSBpdCB3aWxsIGFjdCBhcyBhIGZ1bGwgYmFycmllci4gClNv
IGlmIHdlIGNhbGwgaGFwcGVuIGFmdGVyIHJlbGlucXVpc2hfbWVtb3J5KCkgdGhlbiB3ZSB3aWxs
IHN1cmVseSBoYXZlIApvYnNlcnZlZCBkLT5pc19keWluZy4gSSBoYXZlbid0IGNoZWNrZWQgdGhl
IG90aGVycy4KClNvbWUgb2YgdGhlIGluc3RhbmNlcyB1c2VyIG5laXRoZXIgdGhlIDIgbG9ja3Mg
YWJvdmUuIFdlIHByb2JhYmx5IG91Z2h0IAp0byBpbnZlc3RpZ2F0ZSB0aGVtIChJIHdpbGwgYWRk
IGEgVE9ETyBpbiBteSBsaXN0KS4KClJlZ2FyZGluZyB0aGUgdHdvIGNhc2VzIGhlcmUsIGRvbWFp
bl9sb2NrKCkgbWlnaHQgYmUgdGhlIHNvbHV0aW9uLiBJZiB3ZSAKYXJlIGNvbmNlcm4gYWJvdXQg
dGhlIGNvbnRlbnRpb24gKGl0IGlzIGEgc3BpbmxvY2spLCB0aGVuIHdlIGNvdWxkIApzd2l0Y2gg
dGhlIGRvbWFpbl9sb2NrKCkgZnJvbSBzcGlubG9jayB0byByd2xvY2suCgpDaGVlcnMsCgotLSAK
SnVsaWVuIEdyYWxsCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9y
ZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

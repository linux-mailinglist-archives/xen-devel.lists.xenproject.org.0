Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 823A219D51
	for <lists+xen-devel@lfdr.de>; Fri, 10 May 2019 14:33:58 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hP4g9-0006yD-Ij; Fri, 10 May 2019 12:31:09 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=5pb9=TK=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1hP4g7-0006y8-O4
 for xen-devel@lists.xenproject.org; Fri, 10 May 2019 12:31:07 +0000
X-Inumbo-ID: 79194ed8-731f-11e9-8c8a-8b39e67659e8
Received: from prv1-mh.provo.novell.com (unknown [137.65.248.33])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 79194ed8-731f-11e9-8c8a-8b39e67659e8;
 Fri, 10 May 2019 12:31:03 +0000 (UTC)
Received: from INET-PRV1-MTA by prv1-mh.provo.novell.com
 with Novell_GroupWise; Fri, 10 May 2019 06:31:01 -0600
Message-Id: <5CD56F04020000780022D80B@prv1-mh.provo.novell.com>
X-Mailer: Novell GroupWise Internet Agent 18.1.0 
Date: Fri, 10 May 2019 06:31:00 -0600
From: "Jan Beulich" <JBeulich@suse.com>
To: "Julien Grall" <julien.grall@arm.com>
References: <20190507151458.29350-1-julien.grall@arm.com>
 <20190507151458.29350-10-julien.grall@arm.com>
In-Reply-To: <20190507151458.29350-10-julien.grall@arm.com>
Mime-Version: 1.0
Content-Disposition: inline
Subject: Re: [Xen-devel] [PATCH 09/14] xen: Introduce HAS_M2P config and use
 to protect mfn_to_gmfn call
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wei.liu2@citrix.com>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <Ian.Jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 oleksandr_tyshchenko@epam.com, xen-devel <xen-devel@lists.xenproject.org>,
 "andrii_anisov@epam.com" <andrii_anisov@epam.com>,
 Roger Pau Monne <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Pj4+IE9uIDA3LjA1LjE5IGF0IDE3OjE0LCA8anVsaWVuLmdyYWxsQGFybS5jb20+IHdyb3RlOgo+
IFRoaXMgcGF0Y2ggaW50cm9kdWNlcyBhIGNvbmZpZyBvcHRpb24gSEFTX00yUCB0byB0ZWxsIHdo
ZXRoZXIgYW4KPiBhcmNoaXRlY3R1cmUgaW1wbGVtZW50cyB0aGUgTTJQLgo+ICAgICAtIGlvbW11
X2h3ZG9tX2luaXQ6IEZvciBub3csIHdlIHJlcXVpcmUgdGhlIE0yUCBzdXBwb3J0IHdoZW4gdGhl
IElPTU1VCj4gICAgIGlzIG5vdCBzaGFyaW5nIHRoZSBQMk0uCj4gICAgIC0gbWVtb3J5X2V4Y2hh
bmdlOiBUaGUgaHlwZXJjYWxsIGlzIG1hcmtlZCBhcyBub3Qgc3VwcG9ydGVkIHdoZW4gdGhlCj4g
ICAgIE0yUCBkb2VzIG5vdCBleGlzdC4KCldhcyBpdCB5b3Ugb3Igc29tZW9uZSBlbHNlIHRvIHN1
Z2dlc3QgaXQgYmUgcmVzdHJpY3RlZCB0byBub24tdHJhbnNsYXRlZApndWVzdHMgaW4gdGhlIGZp
cnN0IHBsYWNlPyBJJ2QgcHJlZmVyIHRoaXMgb3ZlciB0aGUgI2lmZGVmLWFyeSB5b3UgYWRkLgoK
PiAgICAgLSBnZXRkb21haW5pbmZvOiBBIG5ldyBoZWxwZXIgaXMgaW50cm9kdWNlZCB0byB3cmFw
IHRoZSBjYWxsIHRvCj4gICAgIG1mbl90b19nZm4vbWZuX3RvX2dtZm4uIEZvciBBcm0sIGl0IHJl
dHVybnMgYW4gaW52YWxpZCBHRk4gc28gdGhlIG1hcHBpbmcKPiAgICAgd2lsbCBmYWlsLgoKVGhl
cmUncyBubyB1c2Ugb2YgbWZuX3RvX2dtZm4oKSBpbiBlaXRoZXIgb2YgdGhlIHdyYXBwZXJzLCBz
byB3aHkKbWVudGlvbiB0aGlzIHRvLWJlLXJlbW92ZWQgb25lPwoKPiAtLS0gYS94ZW4vY29tbW9u
L2RvbWN0bC5jCj4gKysrIGIveGVuL2NvbW1vbi9kb21jdGwuYwo+IEBAIC0yMDUsNyArMjA1LDcg
QEAgdm9pZCBnZXRkb21haW5pbmZvKHN0cnVjdCBkb21haW4gKmQsIHN0cnVjdCAKPiB4ZW5fZG9t
Y3RsX2dldGRvbWFpbmluZm8gKmluZm8pCj4gICAgICBpbmZvLT5vdXRzdGFuZGluZ19wYWdlcyA9
IGQtPm91dHN0YW5kaW5nX3BhZ2VzOwo+ICAgICAgaW5mby0+c2hyX3BhZ2VzICAgICAgICAgPSBh
dG9taWNfcmVhZCgmZC0+c2hyX3BhZ2VzKTsKPiAgICAgIGluZm8tPnBhZ2VkX3BhZ2VzICAgICAg
ID0gYXRvbWljX3JlYWQoJmQtPnBhZ2VkX3BhZ2VzKTsKPiAtICAgIGluZm8tPnNoYXJlZF9pbmZv
X2ZyYW1lID0gbWZuX3RvX2dtZm4oZCwgdmlydF90b19tZm4oZC0+c2hhcmVkX2luZm8pKTsKPiAr
ICAgIGluZm8tPnNoYXJlZF9pbmZvX2ZyYW1lID0gZ2ZuX3goZG9tYWluX3NoYXJlZF9pbmZvX2dm
bihkKSk7CgpXaGF0IGlzIHRoZSBpbnRlbmRlZCBiZWhhdmlvciBvbiAzMi1iaXQgQXJtIGhlcmU/
IERvIHlvdSByZWFsbHkKbWVhbiB0byByZXR1cm4gYSB2YWx1ZSB3aXRoIDMyIGJpdHMgb2Ygb25l
cyAoaW5zdGVhZCBvZiA2NCBiaXRzIG9mCnRoZW0pIGluIHRoaXMgNjQtYml0IGZpZWxkPwoKPiAt
LS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9pb21tdS5jCj4gKysrIGIveGVuL2RyaXZlcnMv
cGFzc3Rocm91Z2gvaW9tbXUuYwo+IEBAIC0xODgsOSArMTg4LDEwIEBAIHZvaWQgX19od2RvbV9p
bml0IGlvbW11X2h3ZG9tX2luaXQoc3RydWN0IGRvbWFpbiAqZCkKPiAgICAgIGhkLT5uZWVkX3N5
bmMgPSBpb21tdV9od2RvbV9zdHJpY3QgJiYgIWlvbW11X3VzZV9oYXBfcHQoZCk7Cj4gICAgICBp
ZiAoIG5lZWRfaW9tbXVfcHRfc3luYyhkKSApCj4gICAgICB7Cj4gKyAgICAgICAgaW50IHJjID0g
MDsKPiArI2lmZGVmIENPTkZJR19IQVNfTTJQCj4gICAgICAgICAgc3RydWN0IHBhZ2VfaW5mbyAq
cGFnZTsKPiAgICAgICAgICB1bnNpZ25lZCBpbnQgaSA9IDAsIGZsdXNoX2ZsYWdzID0gMDsKPiAt
ICAgICAgICBpbnQgcmMgPSAwOwo+ICAKPiAgICAgICAgICBwYWdlX2xpc3RfZm9yX2VhY2ggKCBw
YWdlLCAmZC0+cGFnZV9saXN0ICkKPiAgICAgICAgICB7Cj4gQEAgLTIxNyw2ICsyMTgsOSBAQCB2
b2lkIF9faHdkb21faW5pdCBpb21tdV9od2RvbV9pbml0KHN0cnVjdCBkb21haW4gKmQpCj4gICAg
ICAgICAgLyogVXNlIHdoaWxlLWJyZWFrIHRvIGF2b2lkIGNvbXBpbGVyIHdhcm5pbmcgKi8KPiAg
ICAgICAgICB3aGlsZSAoIGlvbW11X2lvdGxiX2ZsdXNoX2FsbChkLCBmbHVzaF9mbGFncykgKQo+
ICAgICAgICAgICAgICBicmVhazsKPiArI2Vsc2UKPiArICAgICAgICByYyA9IC1FT1BOT1RTVVBQ
Owo+ICsjZW5kaWYKPiAgCj4gICAgICAgICAgaWYgKCByYyApCj4gICAgICAgICAgICAgIHByaW50
ayhYRU5MT0dfV0FSTklORyAiZCVkOiBJT01NVSBtYXBwaW5nIGZhaWxlZDogJWRcbiIsCgpXb3Vs
ZCB5b3UgbWluZCBleHRlbmRpbmcgdGhlIHNjb3BlIG9mIHRoZSAjaWZkZWYgYmV5b25kIHRoaXMg
cHJpbnRrKCk/Ckl0IHNlZW1zIHByZXR0eSBwb2ludGxlc3MgdG8gbWUgdG8gdW5jb25kaXRpb25h
bGx5IGVtaXQgYSBsb2cgbWVzc2FnZQpoZXJlLgoKPiAtLS0gYS94ZW4vaW5jbHVkZS9wdWJsaWMv
ZG9tY3RsLmgKPiArKysgYi94ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmgKPiBAQCAtMTE4LDYg
KzExOCwxMCBAQCBzdHJ1Y3QgeGVuX2RvbWN0bF9nZXRkb21haW5pbmZvIHsKPiAgICAgIHVpbnQ2
NF9hbGlnbmVkX3Qgb3V0c3RhbmRpbmdfcGFnZXM7Cj4gICAgICB1aW50NjRfYWxpZ25lZF90IHNo
cl9wYWdlczsKPiAgICAgIHVpbnQ2NF9hbGlnbmVkX3QgcGFnZWRfcGFnZXM7Cj4gKyAgICAvKgo+
ICsgICAgICogR0ZOIG9mIHNoYXJlZF9pbmZvIHN0cnVjdC4gU29tZSBhcmNoaXRlY3R1cmVzIChl
LmcgQXJtKSBtYXkgbm90Cj4gKyAgICAgKiBwcm92aWRlIGEgdmFsaWQgR0ZOLgo+ICsgICAgICov
CgpBbG9uZyB0aGUgbGluZXMgb2Ygd2hhdCBJJ3ZlIHNhaWQgYWJvdmUsIEkgdGhpbmsgeW91IHdh
bnQgdG8gc3BlbGwgb3V0CmhlcmUgd2hhdCB0aGUgdmFsdWUgaXMgZ29pbmcgdG8gYmUgaW4gdGhp
cyBjYXNlLgoKPiAtLS0gYS94ZW4vaW5jbHVkZS94ZW4vZG9tYWluLmgKPiArKysgYi94ZW4vaW5j
bHVkZS94ZW4vZG9tYWluLmgKPiBAQCAtMTE4LDQgKzExOCwxMiBAQCBzdHJ1Y3Qgdm51bWFfaW5m
byB7Cj4gIAo+ICB2b2lkIHZudW1hX2Rlc3Ryb3koc3RydWN0IHZudW1hX2luZm8gKnZudW1hKTsK
PiAgCj4gKyNpZmRlZiBDT05GSUdfSEFTX00yUAo+ICsjZGVmaW5lIGRvbWFpbl9zaGFyZWRfaW5m
b19nZm4oZCkgKHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAo+ICsgICAgY29uc3Qgc3Ry
dWN0IGRvbWFpbiAqZF8gPSAoZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgXAo+ICsgICAgbWZuX3RvX2dmbihkXywgX21mbihfX3ZpcnRfdG9fbWZuKGRfLT5zaGFy
ZWRfaW5mbykpKTsgICAgICAgXAo+ICt9KQo+ICsjZW5kaWYKCkFuZCBhbiBpbmxpbmUgZnVuY3Rp
b24gZG9lc24ndCB3b3JrIGhlcmU/CgpKYW4KCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlz
dHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xp
c3RpbmZvL3hlbi1kZXZlbA==

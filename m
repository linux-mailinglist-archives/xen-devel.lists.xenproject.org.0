Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 1F82F164A09
	for <lists+xen-devel@lfdr.de>; Wed, 19 Feb 2020 17:21:14 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j4S43-0000SG-E9; Wed, 19 Feb 2020 16:19:07 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=AltG=4H=invisiblethingslab.com=pawel@srs-us1.protection.inumbo.net>)
 id 1j4S42-0000Rg-5n
 for xen-devel@lists.xenproject.org; Wed, 19 Feb 2020 16:19:06 +0000
X-Inumbo-ID: 8c8cfe48-5333-11ea-ade5-bc764e2007e4
Received: from out5-smtp.messagingengine.com (unknown [66.111.4.29])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 8c8cfe48-5333-11ea-ade5-bc764e2007e4;
 Wed, 19 Feb 2020 16:19:05 +0000 (UTC)
Received: from compute1.internal (compute1.nyi.internal [10.202.2.41])
 by mailout.nyi.internal (Postfix) with ESMTP id 5C10822128;
 Wed, 19 Feb 2020 11:19:05 -0500 (EST)
Received: from mailfrontend1 ([10.202.2.162])
 by compute1.internal (MEProxy); Wed, 19 Feb 2020 11:19:05 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=
 messagingengine.com; h=cc:content-transfer-encoding:content-type
 :date:from:message-id:mime-version:subject:to:x-me-proxy
 :x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s=fm2; bh=17BvhT
 MFYZGqzieiHllO64rBxU1HSLAcIGalUWK0M9w=; b=APj6aq9wzljs8Nk1Stxh9O
 QFt7WUwDiN5R2icK8hB51MlXoyx6oJV9bgu2w7ev0onx1fB4shtGLytn0z+oxuGU
 x8O0B9qrD3CUe1alEh4hp/P/1BSMVpFJ99aYHmsOrIsWTAWpxttybIF8FFSXsMjQ
 F/anBpMjanM0YSFlycBVxWKCNncv68cOFavYTBLeJCVX12TWy4t8NxHaIeZwhAHS
 SEjbXDwEZsBdIIP/azeiMYVGNyzVVratfmEQl3zYB+InSxhdwMqfEt4HV7FvFlzT
 9T+sjaj2AiCT40almj2iEmVRTjHXDiuVaasQ2/edAYZqoREVxjcsD8S9Ahn1ZkeA
 ==
X-ME-Sender: <xms:-V9NXi78J4Idc4rMx9Ux-6ldoa9ylGBm0ipbBYcgB34DqYpeSK-5mw>
X-ME-Proxy-Cause: gggruggvucftvghtrhhoucdtuddrgedugedrkedtgdekjecutefuodetggdotefrodftvf
 curfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfghnecu
 uegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenuc
 fjughrpefhvffufffkofggtgfgsehtkeertdertdejnecuhfhrohhmpefrrgifvghlucfo
 rghrtgiivgifshhkihcuoehprgifvghlsehinhhvihhsihgslhgvthhhihhnghhslhgrsg
 drtghomheqnecukfhppeekfedrleejrddvfedrvdelnecuvehluhhsthgvrhfuihiivgep
 tdenucfrrghrrghmpehmrghilhhfrhhomhepphgrfigvlhesihhnvhhishhisghlvghthh
 hinhhgshhlrggsrdgtohhm
X-ME-Proxy: <xmx:-V9NXs9qsJ1zVC_9Oi489ZDIYHNoCiVxPkeJxb5yo1Y5ROqzaErhPw>
 <xmx:-V9NXkZJb9N2w5uRx79mu74YVvPpE5tNNrFENbxc2EiFavUpOwiitw>
 <xmx:-V9NXs1cmZXNv5irkHKG7P-0rdR4m-3ThI4-4XX73tk6J8rPYzgkbQ>
 <xmx:-V9NXlPBMNeCUOEfKJMMk8_mplUdETIRaFbYiQMGQAhn-_M_JM02CA>
Received: from localhost.localdomain (unknown [83.97.23.29])
 by mail.messagingengine.com (Postfix) with ESMTPA id 1DF7C328005A;
 Wed, 19 Feb 2020 11:19:04 -0500 (EST)
From: =?UTF-8?q?Pawe=C5=82=20Marczewski?= <pawel@invisiblethingslab.com>
To: xen-devel@lists.xenproject.org
Date: Wed, 19 Feb 2020 17:19:00 +0100
Message-Id: <7586792df0070ceeba874ba8f430dd7addb53305.1582128348.git.pawel@invisiblethingslab.com>
X-Mailer: git-send-email 2.21.1
MIME-Version: 1.0
Subject: [Xen-devel] [XEN PATCH] libxl: wait for console path before firing
 console_available
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Anthony PERARD <anthony.perard@citrix.com>,
 =?UTF-8?q?Pawe=C5=82=20Marczewski?= <pawel@invisiblethingslab.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Wei Liu <wl@xen.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SWYgd2Ugc2tpcCB0aGUgYm9vdGxvYWRlciwgdGhlIFRUWSBwYXRoIHdpbGwgYmUgc2V0IGZvciB4
ZW5jb25zb2xlZC4KSG93ZXZlciwgdGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgdGhpcyB3aWxs
IGhhcHBlbiBieSB0aGUgdGltZSB3ZQp3YW50IHRvIGNhbGwgdGhlIGNvbnNvbGVfYXZhaWxhYmxl
IGNhbGxiYWNrLCBzbyB3ZSBoYXZlIHRvIHdhaXQuCgpTaWduZWQtb2ZmLWJ5OiBQYXdlxYIgTWFy
Y3pld3NraSA8cGF3ZWxAaW52aXNpYmxldGhpbmdzbGFiLmNvbT4KLS0tCiB0b29scy9saWJ4bC9s
aWJ4bF9jcmVhdGUuYyAgIHwgMzMgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tCiB0
b29scy9saWJ4bC9saWJ4bF9pbnRlcm5hbC5oIHwgIDEgKwogMiBmaWxlcyBjaGFuZ2VkLCAzMSBp
bnNlcnRpb25zKCspLCAzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhsL2xp
YnhsX2NyZWF0ZS5jIGIvdG9vbHMvbGlieGwvbGlieGxfY3JlYXRlLmMKaW5kZXggM2E3MzY0ZTJh
Yy4uNTNmMjg4NjU0NCAxMDA2NDQKLS0tIGEvdG9vbHMvbGlieGwvbGlieGxfY3JlYXRlLmMKKysr
IGIvdG9vbHMvbGlieGwvbGlieGxfY3JlYXRlLmMKQEAgLTExOTAsNiArMTE5MCwyMSBAQCBzdGF0
aWMgdm9pZCBkb21jcmVhdGVfY29uc29sZV9hdmFpbGFibGUobGlieGxfX2VnYyAqZWdjLAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRjcy0+YW9wX2NvbnNvbGVfaG93
LmZvcl9ldmVudCkpOwogfQogCitzdGF0aWMgdm9pZCBjb25zb2xlX3dhdGNoX2NhbGxiYWNrKGxp
YnhsX19lZ2MgKmVnYywgbGlieGxfX2V2X3hzd2F0Y2ggKndhdGNoLAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyICp3YXRjaF9wYXRoLAorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyICpldmVudF9wYXRoKSB7CisgICAgRUdD
X0dDOworICAgIGxpYnhsX19kb21haW5fY3JlYXRlX3N0YXRlICpkY3MgPSBDT05UQUlORVJfT0Yo
d2F0Y2gsICpkY3MsIGNvbnNvbGVfd2F0Y2gpOworICAgIGNoYXIgKmRvbXBhdGggPSBsaWJ4bF9f
eHNfZ2V0X2RvbXBhdGgoZ2MsIGRjcy0+Z3Vlc3RfZG9taWQpOworICAgIGNoYXIgKnR0eV9wYXRo
ID0gR0NTUFJJTlRGKCIlcy9jb25zb2xlL3R0eSIsIGRvbXBhdGgpOworICAgIGNoYXIgKnR0eSA9
IGxpYnhsX194c19yZWFkKGdjLCBYQlRfTlVMTCwgdHR5X3BhdGgpOworCisgICAgaWYgKHR0eSAm
JiB0dHlbMF0gIT0gJ1wwJykgeworICAgICAgICBkb21jcmVhdGVfY29uc29sZV9hdmFpbGFibGUo
ZWdjLCBkY3MpOworICAgICAgICBkb21jcmVhdGVfY29tcGxldGUoZWdjLCBkY3MsIDApOworICAg
IH0KK30KKwogc3RhdGljIHZvaWQgZG9tY3JlYXRlX2Jvb3Rsb2FkZXJfZG9uZShsaWJ4bF9fZWdj
ICplZ2MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnhsX19ib290
bG9hZGVyX3N0YXRlICpibCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
aW50IHJjKQpAQCAtMTcwNSw2ICsxNzIwLDggQEAgc3RhdGljIHZvaWQgZG9tY3JlYXRlX2F0dGFj
aF9kZXZpY2VzKGxpYnhsX19lZ2MgKmVnYywKICAgICBpbnQgZG9taWQgPSBkY3MtPmd1ZXN0X2Rv
bWlkOwogICAgIGxpYnhsX2RvbWFpbl9jb25maWcgKmNvbnN0IGRfY29uZmlnID0gZGNzLT5ndWVz
dF9jb25maWc7CiAgICAgY29uc3QgbGlieGxfX2RldmljZV90eXBlICpkdDsKKyAgICBjaGFyICp0
dHlfcGF0aDsKKyAgICBpbnQgcmM7CiAKICAgICBpZiAocmV0KSB7CiAgICAgICAgIExPR0QoRVJS
T1IsIGRvbWlkLCAidW5hYmxlIHRvIGFkZCAlcyBkZXZpY2VzIiwKQEAgLTE3MjgsOSArMTc0NSwx
NSBAQCBzdGF0aWMgdm9pZCBkb21jcmVhdGVfYXR0YWNoX2RldmljZXMobGlieGxfX2VnYyAqZWdj
LAogICAgICAgICByZXR1cm47CiAgICAgfQogCi0gICAgZG9tY3JlYXRlX2NvbnNvbGVfYXZhaWxh
YmxlKGVnYywgZGNzKTsKLQotICAgIGRvbWNyZWF0ZV9jb21wbGV0ZShlZ2MsIGRjcywgMCk7Cisg
ICAgdHR5X3BhdGggPSBHQ1NQUklOVEYoIiVzL2NvbnNvbGUvdHR5IiwgbGlieGxfX3hzX2dldF9k
b21wYXRoKGdjLCBkb21pZCkpOworICAgIHJjID0gbGlieGxfX2V2X3hzd2F0Y2hfcmVnaXN0ZXIo
Z2MsICZkY3MtPmNvbnNvbGVfd2F0Y2gsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjb25zb2xlX3dhdGNoX2NhbGxiYWNrLAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdHR5X3BhdGgpOworICAgIGlmIChyYykgeworICAgICAgICBMT0coRVJST1IsICJ1
bmFibGUgdG8gc2V0IHVwIHdhdGNoIGZvciBjb25zb2xlIHBhdGg6ICVzIiwKKyAgICAgICAgICAg
IHR0eV9wYXRoKTsKKyAgICAgICAgZ290byBlcnJvcl9vdXQ7CisgICAgfQogCiAgICAgcmV0dXJu
OwogCkBAIC0xNzQ3LDYgKzE3NzAsOSBAQCBzdGF0aWMgdm9pZCBkb21jcmVhdGVfY29tcGxldGUo
bGlieGxfX2VnYyAqZWdjLAogICAgIGxpYnhsX2RvbWFpbl9jb25maWcgKmNvbnN0IGRfY29uZmln
ID0gZGNzLT5ndWVzdF9jb25maWc7CiAgICAgbGlieGxfZG9tYWluX2NvbmZpZyAqZF9jb25maWdf
c2F2ZWQgPSAmZGNzLT5ndWVzdF9jb25maWdfc2F2ZWQ7CiAKKyAgICBpZiAobGlieGxfX2V2X3hz
d2F0Y2hfaXNyZWdpc3RlcmVkKCZkY3MtPmNvbnNvbGVfd2F0Y2gpKQorICAgICAgICBsaWJ4bF9f
ZXZfeHN3YXRjaF9kZXJlZ2lzdGVyKGdjLCAmZGNzLT5jb25zb2xlX3dhdGNoKTsKKwogICAgIGxp
YnhsX19kb21haW5fYnVpbGRfc3RhdGVfZGlzcG9zZSgmZGNzLT5idWlsZF9zdGF0ZSk7CiAKICAg
ICBpZiAoIXJjICYmIGRfY29uZmlnLT5iX2luZm8uZXhlY19zc2lkcmVmKQpAQCAtMTg2MSw2ICsx
ODg3LDcgQEAgc3RhdGljIGludCBkb19kb21haW5fY3JlYXRlKGxpYnhsX2N0eCAqY3R4LCBsaWJ4
bF9kb21haW5fY29uZmlnICpkX2NvbmZpZywKIAogICAgIGxpYnhsX19hb19wcm9ncmVzc19nZXRo
b3coJmNkY3MtPmRjcy5hb3BfY29uc29sZV9ob3csIGFvcF9jb25zb2xlX2hvdyk7CiAgICAgY2Rj
cy0+ZG9taWRfb3V0ID0gZG9taWQ7CisgICAgbGlieGxfX2V2X3hzd2F0Y2hfaW5pdCgmY2Rjcy0+
ZGNzLmNvbnNvbGVfd2F0Y2gpOwogCiAgICAgaW5pdGlhdGVfZG9tYWluX2NyZWF0ZShlZ2MsICZj
ZGNzLT5kY3MpOwogCmRpZmYgLS1naXQgYS90b29scy9saWJ4bC9saWJ4bF9pbnRlcm5hbC5oIGIv
dG9vbHMvbGlieGwvbGlieGxfaW50ZXJuYWwuaAppbmRleCBkZDNjMDhiYzE0Li5mYTY2NmNiZTBj
IDEwMDY0NAotLS0gYS90b29scy9saWJ4bC9saWJ4bF9pbnRlcm5hbC5oCisrKyBiL3Rvb2xzL2xp
YnhsL2xpYnhsX2ludGVybmFsLmgKQEAgLTQxNzcsNiArNDE3Nyw3IEBAIHN0cnVjdCBsaWJ4bF9f
ZG9tYWluX2NyZWF0ZV9zdGF0ZSB7CiAgICAgLyogbmVjZXNzYXJ5IGlmIHRoZSBkb21haW4gY3Jl
YXRpb24gZmFpbGVkIGFuZCB3ZSBoYXZlIHRvIGRlc3Ryb3kgaXQgKi8KICAgICBsaWJ4bF9fZG9t
YWluX2Rlc3Ryb3lfc3RhdGUgZGRzOwogICAgIGxpYnhsX19tdWx0aWRldiBtdWx0aWRldjsKKyAg
ICBsaWJ4bF9fZXZfeHN3YXRjaCBjb25zb2xlX3dhdGNoOwogfTsKIAogX2hpZGRlbiBpbnQgbGli
eGxfX2RldmljZV9uaWNfc2V0X2RldmlkcyhsaWJ4bF9fZ2MgKmdjLAotLSAKMi4yMS4xCgoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1h
aWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54
ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

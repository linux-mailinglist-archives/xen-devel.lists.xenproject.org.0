Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 0B41B1215F
	for <lists+xen-devel@lfdr.de>; Thu,  2 May 2019 19:57:16 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hMFtR-0006gs-8k; Thu, 02 May 2019 17:53:13 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=yl7K=TC=citrix.com=prvs=018ff06f8=ian.jackson@srs-us1.protection.inumbo.net>)
 id 1hMFtP-0006gL-QD
 for xen-devel@lists.xenproject.org; Thu, 02 May 2019 17:53:11 +0000
X-Inumbo-ID: 26231b66-6d03-11e9-843c-bc764e045a96
Received: from SMTP03.CITRIX.COM (unknown [162.221.156.55])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 26231b66-6d03-11e9-843c-bc764e045a96;
 Thu, 02 May 2019 17:53:10 +0000 (UTC)
X-IronPort-AV: E=Sophos;i="5.60,422,1549929600"; d="scan'208";a="84983427"
From: Ian Jackson <ian.jackson@eu.citrix.com>
To: <xen-devel@lists.xenproject.org>
Date: Thu, 2 May 2019 18:42:32 +0100
Message-ID: <20190502174238.23848-4-ian.jackson@eu.citrix.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20190502174238.23848-1-ian.jackson@eu.citrix.com>
References: <20190502174238.23848-1-ian.jackson@eu.citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [OSSTEST PATCH 3/9] cs-adjust-flight: Use db_prepare
 and honour -D -D for sql dumps
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Ian Jackson <ian.jackson@eu.citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBtYWtlcyBkZWJ1Z2dpbmcgaXQgZWFzaWVyLiAgTm8gZnVuY3Rpb25hbCBjaGFuZ2Ugd2l0
aCB6ZXJvIG9yIG9uZQpvY2N1cnJlbmNlcyBvZiAtRC4KClNpZ25lZC1vZmYtYnk6IElhbiBKYWNr
c29uIDxpYW4uamFja3NvbkBldS5jaXRyaXguY29tPgotLS0KIGNzLWFkanVzdC1mbGlnaHQgfCAy
NiArKysrKysrKysrKysrKy0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5nZWQsIDE0IGluc2VydGlv
bnMoKyksIDEyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2NzLWFkanVzdC1mbGlnaHQgYi9j
cy1hZGp1c3QtZmxpZ2h0CmluZGV4IGJhZGFiZWZmLi5jYzE2ODRiNCAxMDA3NTUKLS0tIGEvY3Mt
YWRqdXN0LWZsaWdodAorKysgYi9jcy1hZGp1c3QtZmxpZ2h0CkBAIC03NSw2ICs3NSw3IEBAIGNz
cmVhZGNvbmZpZygpOwogb3VyICRkZWJ1ZyA9IDA7CiAKIG9wZW4gVkVSQk9TRSwgIj4vZGV2L251
bGwiIG9yIGRpZSAkITsKK29wZW4gREVCVUcsICI+L2Rldi9udWxsIiBvciBkaWUgJCE7CiBvdXIg
JHZlcmJvc2VfYnVmZmVyOwogCiB3aGlsZSAoQEFSR1YgJiYgJEFSR1ZbMF0gPX4gbS9eXC0vKSB7
CkBAIC04Myw2ICs4NCw3IEBAIHdoaWxlIChAQVJHViAmJiAkQVJHVlswXSA9fiBtL15cLS8pIHsK
ICAgICBpZiAobS9eLXYkLykgewogCW9wZW4gVkVSQk9TRSwgIj4mU1RERVJSIiBvciBkaWUgJCE7
CiAgICAgfSBlbHNpZiAobS9eLUQkLykgeworICAgICAgICBvcGVuIERFQlVHLCAiPiZTVERFUlIi
IGlmICRkZWJ1ZzsKICAgICAgICAgJGRlYnVnID0gMTsKICAgICB9IGVsc2UgewogICAgICAgICBk
aWUgIiRfID8iOwpAQCAtMTM4LDkgKzE0MCw5IEBAIHN1YiBmb3JfdGhpbmdzICgkJCQkJCQkKSB7
CiAgICAgbXkgKCRzcGVjLCAkZm4sICRpZm5vbmUsCiAgICAgICAgICR0YWJsZSwgJGtleWNvbCwg
JGJhc2Vjb25kLCAkYmFzZWNvbmR2YWxzKSA9IEBfOwogCi0gICAgbXkgJHRoaW5nX3EgPSAkZGJo
X3Rlc3RzLT5wcmVwYXJlCisgICAgbXkgJHRoaW5nX3EgPSBkYl9wcmVwYXJlCiAgICAgICAgICgi
U0VMRUNUICogRlJPTSAkdGFibGUgV0hFUkUgJGJhc2Vjb25kIEFORCAka2V5Y29sID0gPyIpOwot
ICAgIG15ICR0aGluZ3NfcSA9ICRkYmhfdGVzdHMtPnByZXBhcmUKKyAgICBteSAkdGhpbmdzX3Eg
PSBkYl9wcmVwYXJlCiAgICAgICAgICgiU0VMRUNUICogRlJPTSAkdGFibGUgV0hFUkUgJGJhc2Vj
b25kIik7CiAKICAgICBteSAoJHNwZWNmbiwkZXhhY3QpID0gbm90c3BlY19leGZuKCJGT1JfVEhJ
TkdTICR0YWJsZS4ka2V5Y29sIiwkc3BlYyk7CkBAIC0xODIsNyArMTg0LDcgQEAgb3VyIEBqb2Jf
cm1fcXM7CiAKIHN1YiBwcmVwX3JtX2pvYnMgKCkgewogICAgIHJldHVybiBpZiBAam9iX3JtX3Fz
OwotICAgIEBqb2Jfcm1fcXMgPSBtYXAgeyAkZGJoX3Rlc3RzLT5wcmVwYXJlKCRfKSB9CisgICAg
QGpvYl9ybV9xcyA9IG1hcCB7IGRiX3ByZXBhcmUoJF8pIH0KICAgICAgICAgKCJERUxFVEUgRlJP
TSBydW52YXJzIFdIRVJFIGZsaWdodCA9ID8gQU5EIGpvYiA9ID8iLAogICAgICAgICAgIkRFTEVU
RSBGUk9NIGpvYnMgV0hFUkUgZmxpZ2h0ID0gPyBBTkQgam9iID0gPyIpOwogfQpAQCAtMTk1LDcg
KzE5Nyw3IEBAIHN1YiBkb19ybV9qb2IgKCQpIHsKIH0KIAogc3ViIGNvcHlfam9ic19xcyAoKSB7
Ci0gICAgbWFwIHsgJGRiaF90ZXN0cy0+cHJlcGFyZSgkXykgfQorICAgIG1hcCB7IGRiX3ByZXBh
cmUoJF8pIH0KICAgICAgICAgKCJJTlNFUlQgSU5UTyBqb2JzIChmbGlnaHQsIGpvYiwgcmVjaXBl
LCBzdGF0dXMpIi4KICAgICAgICAgICIgICAgIFNFTEVDVCA/LCBqb2IsIHJlY2lwZSwgJ3F1ZXVl
ZCciLgogICAgICAgICAgIiAgICAgICBGUk9NIGpvYnMiLgpAQCAtMjA1LDggKzIwNyw4IEBAIHN1
YiBjb3B5X2pvYnNfcXMgKCkgewogICAgICAgICAgIiAgICAgICBGUk9NIHJ1bnZhcnMiLgogICAg
ICAgICAgIiAgICAgIFdIRVJFIGZsaWdodCA9ID8gQU5EIGpvYiA9ID8gQU5EIE5PVCBzeW50aCIp
OwogfQotc3ViIGNvcHlfam9ic19kbyAoJCQpIHsKLSAgICBteSAoJHFzLCAkc3JjZmxpZ2h0LCAk
c3Jjam9iKSA9IEBfOworc3ViIGNvcHlfam9ic19kbyAoJCQkKSB7CisgICAgbXkgKCRxcywgJHNy
Y2ZsaWdodCwgJGpvYikgPSBAXzsKICAgICAkXy0+ZXhlY3V0ZSgkZHN0ZmxpZ2h0LCAkc3JjZmxp
Z2h0LCAkam9iKSBmb3JlYWNoIEAkcXM7CiAgICAgdmVyYm9zZSAiJGRzdGZsaWdodC4kam9iIGpv
YiBjcmVhdGVkIGZyb20gJHNyY2ZsaWdodC4kam9iXG4iOwogfQpAQCAtMjUzLDkgKzI1NSw5IEBA
IHN1YiBjaGFuZ2VfX2NvcHlfam9icyB7CiAgICAgY29weV9qb2JzKCRzcmNmbGlnaHQsICRqb2Jz
KTsKIH0KIAotb3VyICRydW52YXJfcm1fcSA9ICRkYmhfdGVzdHMtPnByZXBhcmUKK291ciAkcnVu
dmFyX3JtX3EgPSBkYl9wcmVwYXJlCiAgICAgKCJERUxFVEUgRlJPTSBydW52YXJzIFdIRVJFIGZs
aWdodCA9ID8gQU5EIGpvYiA9ID8gQU5EIG5hbWUgPSA/Iik7Ci1vdXIgJHJ1bnZhcl9pbnNlcnRf
cSA9ICRkYmhfdGVzdHMtPnByZXBhcmUKK291ciAkcnVudmFyX2luc2VydF9xID0gZGJfcHJlcGFy
ZQogICAgICgiSU5TRVJUIElOVE8gcnVudmFycyAoZmxpZ2h0LCBqb2IsIG5hbWUsIHZhbCwgc3lu
dGgpIi4KICAgICAgIiBWQUxVRVMgKD8sID8sID8sID8sICdmJykiKTsKIApAQCAtNDMwLDcgKzQz
Miw3IEBAIHN1YiBjaGFuZ2VfX2pvYl9zdGF0dXMgewogICAgIGRpZSB1bmxlc3MgQGNoYW5nZXMg
Pj0gMTsKICAgICBteSAkam9icyA9IHNoaWZ0IEBjaGFuZ2VzOwogCi0gICAgbXkgJHEgPSAkZGJo
X3Rlc3RzLT5wcmVwYXJlKDw8RU5EKTsKKyAgICBteSAkcSA9IGRiX3ByZXBhcmUoPDxFTkQpOwog
ICAgICAgICBTRUxFQ1Qgc3RhdHVzCiAgICAgICAgICAgRlJPTSBqb2JzCiAgICAgICAgICBXSEVS
RSBmbGlnaHQgPSA/IEFORCBqb2IgPSA/CkBAIC00NDksMTIgKzQ1MSwxMiBAQCBzdWIgY2hhbmdl
X19qb2JzX3JlbmFtZSB7CiAgICAgbXkgJGpvYnMgPSBzaGlmdCBAY2hhbmdlczsKICAgICBteSAk
cGVybG9wID0gc2hpZnQgQGNoYW5nZXM7CiAKLSAgICBteSAkam9icSA9ICRkYmhfdGVzdHMtPnBy
ZXBhcmUoPDxFTkQpOworICAgIG15ICRqb2JxID0gZGJfcHJlcGFyZSg8PEVORCk7CiAgICAgVVBE
QVRFIGpvYnMKICAgICAgICBTRVQgam9iID0gPwogICAgICBXSEVSRSBmbGlnaHQgPSA/IEFORCBq
b2IgPSA/CiBFTkQKLSAgICBteSAkcnVudmFycSA9ICRkYmhfdGVzdHMtPnByZXBhcmUoPDxFTkQp
OworICAgIG15ICRydW52YXJxID0gZGJfcHJlcGFyZSg8PEVORCk7CiAgICAgVVBEQVRFIHJ1bnZh
cnMKICAgICAgICBTRVQgam9iID0gPwogICAgICBXSEVSRSBmbGlnaHQgPSA/IEFORCBqb2IgPSA/
CkBAIC00NzIsNyArNDc0LDcgQEAgc3ViIGNoYW5nZXMgKCkgewogCiAgICAgaWYgKCRkc3RmbGln
aHQgPX4gbS9eXGQrJC8pIHsKIAlteSAkc3RlcHNfcSA9Ci0JICAgICRkYmhfdGVzdHMtPnByZXBh
cmUoIlNFTEVDVCAqIEZST00gc3RlcHMgV0hFUkUgZmxpZ2h0ID0gPyIpOworCSAgICBkYl9wcmVw
YXJlKCJTRUxFQ1QgKiBGUk9NIHN0ZXBzIFdIRVJFIGZsaWdodCA9ID8iKTsKIAkkc3RlcHNfcS0+
ZXhlY3V0ZSgkZHN0ZmxpZ2h0KTsKIAlteSAkc3RlcCA9ICRzdGVwc19xLT5mZXRjaHJvd19oYXNo
cmVmKCk7CiAJaWYgKCRzdGVwKSB7Ci0tIAoyLjExLjAKCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZl
bEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxt
YW4vbGlzdGluZm8veGVuLWRldmVs

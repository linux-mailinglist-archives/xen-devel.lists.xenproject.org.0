Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 86B3816911
	for <lists+xen-devel@lfdr.de>; Tue,  7 May 2019 19:24:12 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hO3m8-0005vD-0o; Tue, 07 May 2019 17:21:08 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=qCYz=TH=arm.com=julien.grall@srs-us1.protection.inumbo.net>)
 id 1hO3m6-0005v8-RX
 for xen-devel@lists.xenproject.org; Tue, 07 May 2019 17:21:06 +0000
X-Inumbo-ID: 7ec72f7c-70ec-11e9-843c-bc764e045a96
Received: from foss.arm.com (unknown [217.140.101.70])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTP
 id 7ec72f7c-70ec-11e9-843c-bc764e045a96;
 Tue, 07 May 2019 17:21:05 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.72.51.249])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 2858AA78;
 Tue,  7 May 2019 10:21:05 -0700 (PDT)
Received: from [10.37.8.6] (unknown [10.37.8.6])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id E51723F5AF;
 Tue,  7 May 2019 10:21:03 -0700 (PDT)
To: Stefano Stabellini <sstabellini@kernel.org>, xen-devel@lists.xenproject.org
References: <alpine.DEB.2.10.1904301358560.13269@sstabellini-ThinkPad-X260>
 <1556658172-8824-8-git-send-email-sstabellini@kernel.org>
From: Julien Grall <julien.grall@arm.com>
Message-ID: <64029b1d-73dd-82de-a83e-0116c991606b@arm.com>
Date: Tue, 7 May 2019 18:21:02 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <1556658172-8824-8-git-send-email-sstabellini@kernel.org>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v2 08/10] xen/arm: keep track of
 reserved-memory regions
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <stefanos@xilinx.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

SGksCgpTb21lIG1vcmUgcmV2aWV3IG9uIHRoaXMgcGF0Y2guCgpPbiA0LzMwLzE5IDEwOjAyIFBN
LCBTdGVmYW5vIFN0YWJlbGxpbmkgd3JvdGU6Cj4gQXMgd2UgcGFyc2UgdGhlIGRldmljZSB0cmVl
IGluIFhlbiwga2VlcCB0cmFjayBvZiB0aGUgcmVzZXJ2ZWQtbWVtb3J5Cj4gcmVnaW9ucyBhcyB0
aGV5IG5lZWQgc3BlY2lhbCB0cmVhdG1lbnQgKGZvbGxvdy11cCBwYXRjaGVzIHdpbGwgbWFrZSB1
c2UKPiBvZiB0aGUgc3RvcmVkIGluZm9ybWF0aW9uLikKPiAKPiBSZXVzZSBwcm9jZXNzX21lbW9y
eV9ub2RlIHRvIGFkZCByZXNlcnZlZC1tZW1vcnkgcmVnaW9ucyB0byB0aGUKPiBib290aW5mby5y
ZXNlcnZlZF9tZW0gYXJyYXkuIFJlbW92ZSB0aGUgd2FybmluZyBpZiB0aGVyZSBpcyBubyByZWcg
aW4KPiBwcm9jZXNzX21lbW9yeV9ub2RlIGJlY2F1c2UgaXQgaXMgYSBub3JtYWwgY29uZGl0aW9u
IGZvcgo+IHJlc2VydmVkLW1lbW9yeS4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBTdGVmYW5vIFN0YWJl
bGxpbmkgPHN0ZWZhbm9zQHhpbGlueC5jb20+Cj4gCj4gLS0tCj4gCj4gTm90IGRvbmU6IGNyZWF0
ZSBhbiBlODIwLWxpa2Ugc3RydWN0dXJlIG9uIEFSTS4KPiAKPiBDaGFuZ2VzIGluIHYyOgo+IC0g
Y2FsbCBwcm9jZXNzX21lbW9yeV9ub2RlIGZyb20gcHJvY2Vzc19yZXNlcnZlZF9tZW1vcnlfbm9k
ZSB0byBhdm9pZAo+ICAgIGR1cGxpY2F0aW9uCj4gLS0tCj4gICB4ZW4vYXJjaC9hcm0vYm9vdGZk
dC5jICAgICAgfCAzMCArKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0KPiAgIHhlbi9pbmNs
dWRlL2FzbS1hcm0vc2V0dXAuaCB8ICAxICsKPiAgIDIgZmlsZXMgY2hhbmdlZCwgMjMgaW5zZXJ0
aW9ucygrKSwgOCBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL2Jv
b3RmZHQuYyBiL3hlbi9hcmNoL2FybS9ib290ZmR0LmMKPiBpbmRleCBiNjYwMGFiLi45MzU1YTZl
IDEwMDY0NAo+IC0tLSBhL3hlbi9hcmNoL2FybS9ib290ZmR0LmMKPiArKysgYi94ZW4vYXJjaC9h
cm0vYm9vdGZkdC5jCj4gQEAgLTEzNSw2ICsxMzUsOCBAQCBzdGF0aWMgaW50IF9faW5pdCBwcm9j
ZXNzX21lbW9yeV9ub2RlKGNvbnN0IHZvaWQgKmZkdCwgaW50IG5vZGUsCj4gICAgICAgY29uc3Qg
X19iZTMyICpjZWxsOwo+ICAgICAgIHBhZGRyX3Qgc3RhcnQsIHNpemU7Cj4gICAgICAgdTMyIHJl
Z19jZWxscyA9IGFkZHJlc3NfY2VsbHMgKyBzaXplX2NlbGxzOwo+ICsgICAgc3RydWN0IG1lbWlu
Zm8gKm1lbTsKPiArICAgIGJvb2wgcmVzZXJ2ZWQgPSAoYm9vbClkYXRhOwo+ICAgCj4gICAgICAg
aWYgKCBhZGRyZXNzX2NlbGxzIDwgMSB8fCBzaXplX2NlbGxzIDwgMSApCj4gICAgICAgewo+IEBA
IC0xNDMsMjkgKzE0NSwzOSBAQCBzdGF0aWMgaW50IF9faW5pdCBwcm9jZXNzX21lbW9yeV9ub2Rl
KGNvbnN0IHZvaWQgKmZkdCwgaW50IG5vZGUsCj4gICAgICAgICAgIHJldHVybiAwOwo+ICAgICAg
IH0KPiAgIAo+ICsgICAgaWYgKCByZXNlcnZlZCApCj4gKyAgICAgICAgbWVtID0gJmJvb3RpbmZv
LnJlc2VydmVkX21lbTsKPiArICAgIGVsc2UKPiArICAgICAgICBtZW0gPSAmYm9vdGluZm8ubWVt
Owo+ICsKPiAgICAgICBwcm9wID0gZmR0X2dldF9wcm9wZXJ0eShmZHQsIG5vZGUsICJyZWciLCBO
VUxMKTsKPiAgICAgICBpZiAoICFwcm9wICkKPiAtICAgIHsKPiAtICAgICAgICBwcmludGsoImZk
dDogbm9kZSBgJXMnOiBtaXNzaW5nIGByZWcnIHByb3BlcnR5XG4iLCBuYW1lKTsKPiAgICAgICAg
ICAgcmV0dXJuIDA7Cj4gLSAgICB9Cj4gICAKPiAgICAgICBjZWxsID0gKGNvbnN0IF9fYmUzMiAq
KXByb3AtPmRhdGE7Cj4gICAgICAgYmFua3MgPSBmZHQzMl90b19jcHUocHJvcC0+bGVuKSAvIChy
ZWdfY2VsbHMgKiBzaXplb2YgKHUzMikpOwo+ICAgCj4gLSAgICBmb3IgKCBpID0gMDsgaSA8IGJh
bmtzICYmIGJvb3RpbmZvLm1lbS5ucl9iYW5rcyA8IE5SX01FTV9CQU5LUzsgaSsrICkKPiArICAg
IGZvciAoIGkgPSAwOyBpIDwgYmFua3MgJiYgbWVtLT5ucl9iYW5rcyA8IE5SX01FTV9CQU5LUzsg
aSsrICkKPiAgICAgICB7Cj4gICAgICAgICAgIGRldmljZV90cmVlX2dldF9yZWcoJmNlbGwsIGFk
ZHJlc3NfY2VsbHMsIHNpemVfY2VsbHMsICZzdGFydCwgJnNpemUpOwo+ICAgICAgICAgICBpZiAo
ICFzaXplICkKPiAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+IC0gICAgICAgIGJvb3RpbmZvLm1l
bS5iYW5rW2Jvb3RpbmZvLm1lbS5ucl9iYW5rc10uc3RhcnQgPSBzdGFydDsKPiAtICAgICAgICBi
b290aW5mby5tZW0uYmFua1tib290aW5mby5tZW0ubnJfYmFua3NdLnNpemUgPSBzaXplOwo+IC0g
ICAgICAgIGJvb3RpbmZvLm1lbS5ucl9iYW5rcysrOwo+ICsgICAgICAgIG1lbS0+YmFua1ttZW0t
Pm5yX2JhbmtzXS5zdGFydCA9IHN0YXJ0Owo+ICsgICAgICAgIG1lbS0+YmFua1ttZW0tPm5yX2Jh
bmtzXS5zaXplID0gc2l6ZTsKPiArICAgICAgICBtZW0tPm5yX2JhbmtzKys7Cj4gICAgICAgfQo+
ICAgCj4gICAgICAgcmV0dXJuIDA7Cj4gICB9Cj4gICAKPiArc3RhdGljIGludCBfX2luaXQgcHJv
Y2Vzc19yZXNlcnZlZF9tZW1vcnlfbm9kZShjb25zdCB2b2lkICpmZHQsIGludCBub2RlLAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIg
Km5hbWUsIGludCBkZXB0aCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB1MzIgYWRkcmVzc19jZWxscywgdTMyIHNpemVfY2VsbHMpCj4gK3sKPiArICAg
IGRldmljZV90cmVlX2Zvcl9lYWNoX25vZGUoZmR0LCBub2RlLCBkZXB0aCwgcHJvY2Vzc19tZW1v
cnlfbm9kZSwgKHZvaWQqKXRydWUpOwo+ICsgICAgcmV0dXJuIDA7Cj4gK30KPiArCj4gICBzdGF0
aWMgdm9pZCBfX2luaXQgcHJvY2Vzc19tdWx0aWJvb3Rfbm9kZShjb25zdCB2b2lkICpmZHQsIGlu
dCBub2RlLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29u
c3QgY2hhciAqbmFtZSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHUzMiBhZGRyZXNzX2NlbGxzLCB1MzIgc2l6ZV9jZWxscykKPiBAQCAtMjk3LDcgKzMwOSw5
IEBAIHN0YXRpYyBpbnQgX19pbml0IGVhcmx5X3NjYW5fbm9kZShjb25zdCB2b2lkICpmZHQsCj4g
ICB7Cj4gICAgICAgaWYgKCBkZXZpY2VfdHJlZV9ub2RlX21hdGNoZXMoZmR0LCBub2RlLCAibWVt
b3J5IikgKQo+ICAgICAgICAgICBwcm9jZXNzX21lbW9yeV9ub2RlKGZkdCwgbm9kZSwgbmFtZSwg
ZGVwdGgsIGFkZHJlc3NfY2VsbHMsIHNpemVfY2VsbHMsCj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBOVUxMKTsKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICh2b2lkKilmYWxz
ZSk7Cj4gKyAgICBlbHNlIGlmICggZGV2aWNlX3RyZWVfbm9kZV9tYXRjaGVzKGZkdCwgbm9kZSwg
InJlc2VydmVkLW1lbW9yeSIpICkKPiArICAgICAgICBwcm9jZXNzX3Jlc2VydmVkX21lbW9yeV9u
b2RlKGZkdCwgbm9kZSwgbmFtZSwgZGVwdGgsIGFkZHJlc3NfY2VsbHMsIHNpemVfY2VsbHMpOwoK
VGhpcyB3aWxsIG1hdGNoIHJlc2VydmVkLW1lbW9yeUAuLi4gb3IgZXZlbiAvZm9vL3Jlc2VydmVk
LW1lbW9yeS4gSGVyZSwgCndlIG9ubHkgd2FudCB0byBtYXRjaCAvcmVzZXJ2ZWQtbWVtb3J5LgoK
PiAgICAgICBlbHNlIGlmICggZGVwdGggPD0gMyAmJiAoZGV2aWNlX3RyZWVfbm9kZV9jb21wYXRp
YmxlKGZkdCwgbm9kZSwgInhlbixtdWx0aWJvb3QtbW9kdWxlIiApIHx8Cj4gICAgICAgICAgICAg
ICAgIGRldmljZV90cmVlX25vZGVfY29tcGF0aWJsZShmZHQsIG5vZGUsICJtdWx0aWJvb3QsbW9k
dWxlIiApKSkKPiAgICAgICAgICAgcHJvY2Vzc19tdWx0aWJvb3Rfbm9kZShmZHQsIG5vZGUsIG5h
bWUsIGFkZHJlc3NfY2VsbHMsIHNpemVfY2VsbHMpOwo+IGRpZmYgLS1naXQgYS94ZW4vaW5jbHVk
ZS9hc20tYXJtL3NldHVwLmggYi94ZW4vaW5jbHVkZS9hc20tYXJtL3NldHVwLmgKPiBpbmRleCA0
ODE4N2UxLi41YzNmYzJkIDEwMDY0NAo+IC0tLSBhL3hlbi9pbmNsdWRlL2FzbS1hcm0vc2V0dXAu
aAo+ICsrKyBiL3hlbi9pbmNsdWRlL2FzbS1hcm0vc2V0dXAuaAo+IEBAIC02Niw2ICs2Niw3IEBA
IHN0cnVjdCBib290Y21kbGluZXMgewo+ICAgCj4gICBzdHJ1Y3QgYm9vdGluZm8gewo+ICAgICAg
IHN0cnVjdCBtZW1pbmZvIG1lbTsKPiArICAgIHN0cnVjdCBtZW1pbmZvIHJlc2VydmVkX21lbTsK
PiAgICAgICBzdHJ1Y3QgYm9vdG1vZHVsZXMgbW9kdWxlczsKPiAgICAgICBzdHJ1Y3QgYm9vdGNt
ZGxpbmVzIGNtZGxpbmVzOwo+ICAgI2lmZGVmIENPTkZJR19BQ1BJCj4gCgpDaGVlcnMsCgotLSAK
SnVsaWVuIEdyYWxsCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9y
ZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

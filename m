Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id A29C6177ABB
	for <lists+xen-devel@lfdr.de>; Tue,  3 Mar 2020 16:42:58 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j99ez-00063T-8e; Tue, 03 Mar 2020 15:40:41 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=TLdZ=4U=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1j99ex-00063O-St
 for xen-devel@lists.xenproject.org; Tue, 03 Mar 2020 15:40:39 +0000
X-Inumbo-ID: 54f577e4-5d65-11ea-8efe-bc764e2007e4
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 54f577e4-5d65-11ea-8efe-bc764e2007e4;
 Tue, 03 Mar 2020 15:40:39 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id 2DD3FAD10;
 Tue,  3 Mar 2020 15:40:38 +0000 (UTC)
To: Roger Pau Monne <roger.pau@citrix.com>
References: <20200303115253.47449-1-roger.pau@citrix.com>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <9cc580b5-f7e1-16d1-02f8-f847d10f70dc@suse.com>
Date: Tue, 3 Mar 2020 16:40:36 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.5.0
MIME-Version: 1.0
In-Reply-To: <20200303115253.47449-1-roger.pau@citrix.com>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v2] x86/dom0: improve PVH initrd and
 metadata placement
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: xen-devel@lists.xenproject.org, Wei Liu <wl@xen.org>,
 Andrew Cooper <andrew.cooper3@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMDMuMDMuMjAyMCAxMjo1MiwgUm9nZXIgUGF1IE1vbm5lIHdyb3RlOgo+IC0tLSBhL3hlbi9h
cmNoL3g4Ni9odm0vZG9tMF9idWlsZC5jCj4gKysrIGIveGVuL2FyY2gveDg2L2h2bS9kb20wX2J1
aWxkLmMKPiBAQCAtNDkwLDYgKzQ5MCw0NSBAQCBzdGF0aWMgaW50IF9faW5pdCBwdmhfcG9wdWxh
dGVfcDJtKHN0cnVjdCBkb21haW4gKmQpCj4gICN1bmRlZiBNQjFfUEFHRVMKPiAgfQo+ICAKPiAr
c3RhdGljIHBhZGRyX3QgZmluZF9tZW1vcnkoY29uc3Qgc3RydWN0IGRvbWFpbiAqZCwgY29uc3Qg
c3RydWN0IGVsZl9iaW5hcnkgKmVsZiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6
ZV90IHNpemUpCj4gK3sKPiArICAgIHBhZGRyX3Qga2VybmVsX3N0YXJ0ID0gKHBhZGRyX3QpZWxm
LT5kZXN0X2Jhc2U7Cj4gKyAgICBwYWRkcl90IGtlcm5lbF9lbmQgPSAocGFkZHJfdCkoZWxmLT5k
ZXN0X2Jhc2UgKyBlbGYtPmRlc3Rfc2l6ZSk7Cj4gKyAgICB1bnNpZ25lZCBpbnQgaTsKPiArCj4g
KyAgICBmb3IgKCBpID0gMDsgaSA8IGQtPmFyY2gubnJfZTgyMDsgaSsrICkKPiArICAgIHsKPiAr
ICAgICAgICBwYWRkcl90IHN0YXJ0LCBlbmQgPSBkLT5hcmNoLmU4MjBbaV0uYWRkciArIGQtPmFy
Y2guZTgyMFtpXS5zaXplOwo+ICsKPiArICAgICAgICAvKiBEb24ndCB1c2UgbWVtb3J5IGJlbG93
IDFNQiwgYXMgaXQgY291bGQgb3ZlcndyaXRlIHRoZSBCREEvRUJEQS4gKi8KPiArICAgICAgICBp
ZiAoIGVuZCA8PSBNQigxKSB8fCBkLT5hcmNoLmU4MjBbaV0udHlwZSAhPSBFODIwX1JBTSApCj4g
KyAgICAgICAgICAgIGNvbnRpbnVlOwo+ICsKPiArICAgICAgICBzdGFydCA9IE1BWChST1VORFVQ
KGQtPmFyY2guZTgyMFtpXS5hZGRyLCBQQUdFX1NJWkUpLCBNQigxKSk7Cj4gKwo+ICsgICAgICAg
IGlmICggZW5kIDw9IGtlcm5lbF9zdGFydCB8fCBzdGFydCA+PSBrZXJuZWxfZW5kICkKPiArICAg
ICAgICAgICAgOyAvKiBObyBvdmVybGFwLCBub3RoaW5nIHRvIGRvLiAqLwo+ICsgICAgICAgIC8q
IERlYWwgd2l0aCB0aGUga2VybmVsIGFscmVhZHkgYmVpbmcgbG9hZGVkIGluIHRoZSByZWdpb24u
ICovCj4gKyAgICAgICAgZWxzZSBpZiAoIGtlcm5lbF9zdGFydCA8PSBzdGFydCAmJiBrZXJuZWxf
ZW5kID4gc3RhcnQgKQoKU2luY2UsIGFjY29yZGluZyB0byB5b3VyIHJlcGx5IG9uIHYxLCBba2Vy
bmVsX3N0YXJ0LGtlcm5lbF9lbmQpIGlzCmEgc3Vic2V0IG9mIFtzdGFydCxlbmQpLCBJIHVuZGVy
c3RhbmQgdGhhdCB0aGUgPD0gY291bGQgZXF1YWxseQp3ZWxsIGJlID09IC0gZG8geW91IGFncmVl
PyBGcm9tIHRoaXMgdGhlbiAuLi4KCj4gKyAgICAgICAgICAgIC8qIFRydW5jYXRlIHRoZSBzdGFy
dCBvZiB0aGUgcmVnaW9uLiAqLwo+ICsgICAgICAgICAgICBzdGFydCA9IFJPVU5EVVAoa2VybmVs
X2VuZCwgUEFHRV9TSVpFKTsKPiArICAgICAgICBlbHNlIGlmICgga2VybmVsX3N0YXJ0IDw9IGVu
ZCAmJiBrZXJuZWxfZW5kID4gZW5kICkKCi4uLiBpdCBmb2xsb3dzIHRoYXQgeW91IG5vdyBoYXZl
IHR3byBvZmYtYnktMXMgaGVyZSwgYXMgeW91IGNoYW5nZWQKdGhlIHJpZ2h0IHNpZGUgb2YgdGhl
ICYmIGluc3RlYWQgb2YgdGhlIGxlZnQgb25lICh0aGUgcmlnaHQgc2lkZQpjb3VsZCwgYXMgcGVy
IGFib3ZlLCB1c2UgPT0gYWdhaW4pLiBVc2luZyA9PSBpbiBib3RoIHBsYWNlcyB3b3VsZCwKaW4g
bGlldSBvZiBhIGNvbW1lbnQsIGltbyBtYWtlIG1vcmUgdmlzaWJsZSB0byB0aGUgcmVhZGVyIHRo
YXQKdGhlcmUgaXMgdGhpcyBzdWItcmFuZ2UgcmVsYXRpb25zaGlwIGJldHdlZW4gYm90aCByYW5n
ZXMuCgo+ICsgICAgICAgICAgICAvKiBUcnVuY2F0ZSB0aGUgZW5kIG9mIHRoZSByZWdpb24uICov
Cj4gKyAgICAgICAgICAgIGVuZCA9IGtlcm5lbF9zdGFydDsKPiArICAgICAgICAvKiBQaWNrIHRo
ZSBiaWdnZXN0IG9mIHRoZSBzcGxpdCByZWdpb25zLiAqLwoKVGhlbiBhZ2FpbiAtIHdvdWxkbid0
IHRoaXMgcGFydCBzdWZmaWNlPyBpZiBzdGFydCA9PSBrZXJuZWxfc3RhcnQKb3IgZW5kID09IGtl
cm5lbF9lbmQsIG9uZSBzaWRlIG9mIHRoZSAic3BsaXQiIHJlZ2lvbiB3b3VsZCBzaW1wbHkKYmUg
ZW1wdHkuCgo+ICsgICAgICAgIGVsc2UgaWYgKCBrZXJuZWxfc3RhcnQgLSBzdGFydCA+IGVuZCAt
IGtlcm5lbF9lbmQgKQo+ICsgICAgICAgICAgICBlbmQgPSBrZXJuZWxfc3RhcnQ7Cj4gKyAgICAg
ICAgZWxzZQo+ICsgICAgICAgICAgICBzdGFydCA9IFJPVU5EVVAoa2VybmVsX2VuZCwgUEFHRV9T
SVpFKTsKPiArCj4gKyAgICAgICAgaWYgKCBlbmQgLSBzdGFydCA+PSBzaXplICkKPiArICAgICAg
ICAgICAgcmV0dXJuIHN0YXJ0Owo+ICsgICAgfQo+ICsKPiArICAgIHJldHVybiBJTlZBTElEX1BB
RERSOwo+ICt9Cj4gKwo+ICBzdGF0aWMgaW50IF9faW5pdCBwdmhfbG9hZF9rZXJuZWwoc3RydWN0
IGRvbWFpbiAqZCwgY29uc3QgbW9kdWxlX3QgKmltYWdlLAo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBpbWFnZV9oZWFkcm9vbSwKPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZV90ICppbml0cmQsIHZvaWQgKmltYWdlX2Jh
c2UsCj4gQEAgLTU0Niw3ICs1ODUsMjQgQEAgc3RhdGljIGludCBfX2luaXQgcHZoX2xvYWRfa2Vy
bmVsKHN0cnVjdCBkb21haW4gKmQsIGNvbnN0IG1vZHVsZV90ICppbWFnZSwKPiAgICAgICAgICBy
ZXR1cm4gcmM7Cj4gICAgICB9Cj4gIAo+IC0gICAgbGFzdF9hZGRyID0gUk9VTkRVUChwYXJtcy52
aXJ0X2tlbmQgLSBwYXJtcy52aXJ0X2Jhc2UsIFBBR0VfU0laRSk7Cj4gKyAgICAvKgo+ICsgICAg
ICogRmluZCBhIFJBTSByZWdpb24gYmlnIGVub3VnaCAoYW5kIHRoYXQgZG9lc24ndCBvdmVybGFw
IHdpdGggdGhlIGxvYWRlZAo+ICsgICAgICoga2VybmVsKSBpbiBvcmRlciB0byBsb2FkIHRoZSBp
bml0cmQgYW5kIHRoZSBtZXRhZGF0YS4gTm90ZSBpdCBjb3VsZCBiZQo+ICsgICAgICogc3BsaXQg
aW50byBzbWFsbGVyIGFsbG9jYXRpb25zLCBkb25lIGl0IGFzIGEgc2luZ2xlIHJlZ2lvbiBpbiBv
cmRlciB0bwo+ICsgICAgICogc2ltcGxpZnkgaXQuCgpJIGd1ZXNzIGVpdGhlciAiZG9uZSIgd2l0
aG91dCAiaXQiIG9yICJkb2luZyBpdCI/CgpKYW4KCl9fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxp
c3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9s
aXN0aW5mby94ZW4tZGV2ZWw=

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id BC2C510D717
	for <lists+xen-devel@lfdr.de>; Fri, 29 Nov 2019 15:35:20 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iahK8-0002Ww-85; Fri, 29 Nov 2019 14:32:44 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=3pi/=ZV=amazon.com=prvs=22965b742=pdurrant@srs-us1.protection.inumbo.net>)
 id 1iahK6-0002Wo-Oq
 for xen-devel@lists.xenproject.org; Fri, 29 Nov 2019 14:32:42 +0000
X-Inumbo-ID: 19b8ea80-12b5-11ea-9db0-bc764e2007e4
Received: from smtp-fw-9101.amazon.com (unknown [207.171.184.25])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 19b8ea80-12b5-11ea-9db0-bc764e2007e4;
 Fri, 29 Nov 2019 14:32:42 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.com; i=@amazon.com; q=dns/txt; s=amazon201209;
 t=1575037963; x=1606573963;
 h=from:to:cc:subject:date:message-id:mime-version:
 content-transfer-encoding;
 bh=ygAHswZ1xcqJSzp4WCJ6AaoZbuYZiSUXn7cDbJPgkdk=;
 b=XLRes0U7QbQe4dtwNeCWnIGCs815GG8Hrl57Y+9icXuHFLi907j9yR2G
 xmEWJOpmyiaWZfzTw5CC1VVFqEIm4z2fNMISjrsq/c3s8YHrTEttbZIrS
 C6D5jtkd1Yo9WRjA43t2YPZDX3It2BcuCv9ILuAvhk9vPAYd2yoa5rU9P 8=;
IronPort-SDR: z9W/7SYVNE4M4SBwnFXNTDwOZOVK1uStkYhV1PvKOOGI+4Jkrc9lWNph+rsM+k3wcKVIqjSmom
 2QxV7ed4pvOA==
X-IronPort-AV: E=Sophos;i="5.69,257,1571702400"; 
   d="scan'208";a="2180830"
Received: from sea32-co-svc-lb4-vlan3.sea.corp.amazon.com (HELO
 email-inbound-relay-2c-168cbb73.us-west-2.amazon.com) ([10.47.23.38])
 by smtp-border-fw-out-9101.sea19.amazon.com with ESMTP;
 29 Nov 2019 14:32:31 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (pdx4-ws-svc-p6-lb7-vlan2.pdx.amazon.com [10.170.41.162])
 by email-inbound-relay-2c-168cbb73.us-west-2.amazon.com (Postfix) with ESMTPS
 id 741A0A1C24; Fri, 29 Nov 2019 14:32:29 +0000 (UTC)
Received: from EX13D32EUB004.ant.amazon.com (10.43.166.212) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.243) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Fri, 29 Nov 2019 14:32:28 +0000
Received: from EX13MTAUWC001.ant.amazon.com (10.43.162.135) by
 EX13D32EUB004.ant.amazon.com (10.43.166.212) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Fri, 29 Nov 2019 14:32:27 +0000
Received: from u2f063a87eabd5f.cbg10.amazon.com (10.125.106.135) by
 mail-relay.amazon.com (10.43.162.232) with Microsoft SMTP Server id
 15.0.1367.3 via Frontend Transport; Fri, 29 Nov 2019 14:32:23 +0000
From: Paul Durrant <pdurrant@amazon.com>
To: <xen-devel@lists.xenproject.org>
Date: Fri, 29 Nov 2019 14:32:21 +0000
Message-ID: <20191129143221.31850-1-pdurrant@amazon.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH-for-4.13 v6] Rationalize max_grant_frames and
 max_maptrack_frames handling
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>,
 Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Paul Durrant <pdurrant@amazon.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 George Dunlap <george.dunlap@citrix.com>,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Jan Beulich <jbeulich@suse.com>,
 Anthony PERARD <anthony.perard@citrix.com>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogR2VvcmdlIER1bmxhcCA8Z2VvcmdlLmR1bmxhcEBjaXRyaXguY29tPgoKWGVuIHVzZWQg
dG8gaGF2ZSBzaW5nbGUsIHN5c3RlbS13aWRlIGxpbWl0cyBmb3IgdGhlIG51bWJlciBvZiBncmFu
dApmcmFtZXMgYW5kIG1hcHRyYWNrIGZyYW1lcyBhIGd1ZXN0IHdhcyBhbGxvd2VkIHRvIGNyZWF0
ZS4gSW5jcmVhc2luZwpvciBkZWNyZWFzaW5nIHRoaXMgc2luZ2xlIGxpbWl0IG9uIHRoZSBYZW4g
Y29tbWFuZC1saW5lIHdvdWxkIGNoYW5nZQp0aGUgbGltaXQgZm9yIGFsbCBndWVzdHMgb24gdGhl
IHN5c3RlbS4KCkxhdGVyLCBwZXItZG9tYWluIGxpbWl0cyBmb3IgdGhlc2UgdmFsdWVzIHdhcyBj
cmVhdGVkLiBUaGUgc3lzdGVtLXdpZGUKbGltaXRzIGJlY2FtZSBzdHJpY3QgbGltaXRzOiBkb21h
aW5zIGNvdWxkIG5vdCBiZSBjcmVhdGVkIHdpdGggaGlnaGVyCmxpbWl0cywgYnV0IGNvdWxkIGJl
IGNyZWF0ZWQgd2l0aCBsb3dlciBsaW1pdHMuIEhvd2V2ZXIsIHRoYXQgY2hhbmdlCmFsc28gaW50
cm9kdWNlZCBhIHJhbmdlIG9mIGRpZmZlcmVudCAiZGVmYXVsdCIgdmFsdWVzIGludG8gdmFyaW91
cwpwbGFjZXMgaW4gdGhlIHRvb2xzdGFjazoKCi0gVGhlIHB5dGhvbiBsaWJ4YyBiaW5kaW5ncyBo
YXJkLWNvZGVkIHRoZXNlIHZhbHVlcyB0byAzMiBhbmQgMTAyNCwKICByZXNwZWN0aXZlbHkKLSBU
aGUgbGlieGwgZGVmYXVsdCB2YWx1ZXMgYXJlIDMyIGFuZCAxMDI0IHJlc3BlY3RpdmVseS4KLSB4
bCB3aWxsIHVzZSB0aGUgbGlieGwgZGVmYXVsdCBmb3IgbWFwdHJhY2ssIGJ1dCBkb2VzIGl0cyBv
d24gZGVmYXVsdAogIGNhbGN1bGF0aW9uIGZvciBncmFudCBmcmFtZXM6IGVpdGhlciAzMiBvciA2
NCwgYmFzZWQgb24gdGhlIG1heAogIHBvc3NpYmxlIG1mbi4KClRoZXNlIGRlZmF1bHRzIGludGVy
YWN0IHBvb3JseSB3aXRoIHRoZSBoeXBlcnZpc29yIGNvbW1hbmQtbGluZSBsaW1pdDoKCi0gVGhl
IGh5cGVydmlzb3IgY29tbWFuZC1saW5lIGxpbWl0IGNhbm5vdCBiZSB1c2VkIHRvIHJhaXNlIHRo
ZSBsaW1pdAogIGZvciBhbGwgZ3Vlc3RzIGFueW1vcmUsIGFzIHRoZSBkZWZhdWx0IGluIHRoZSB0
b29sc3RhY2sgd2lsbAogIGVmZmVjdGl2ZWx5IG92ZXJyaWRlIHRoaXMuCi0gSWYgeW91IHVzZSB0
aGUgaHlwZXJ2aXNvciBjb21tYW5kLWxpbmUgbGltaXQgdG8gKnJlZHVjZSogdGhlIGxpbWl0LAog
IHRoZW4gdGhlICJkZWZhdWx0IiB2YWx1ZXMgZ2VuZXJhdGVkIGJ5IHRoZSB0b29sc3RhY2sgYXJl
IHRvbyBoaWdoLAogIGFuZCBhbGwgZ3Vlc3QgY3JlYXRpb25zIHdpbGwgZmFpbC4KCkluIG90aGVy
IHdvcmRzLCB0aGUgdG9vbHN0YWNrIGRlZmF1bHRzIHJlcXVpcmUgYW55IGNoYW5nZSB0byBiZQpl
ZmZlY3RlZCBieSBoYXZpbmcgdGhlIGFkbWluIGV4cGxpY2l0bHkgc3BlY2lmeSBhIG5ldyB2YWx1
ZSBpbiBldmVyeQpndWVzdC4KCkluIG9yZGVyIHRvIGFkZHJlc3MgdGhpcywgaGF2ZSBncmFudF90
YWJsZV9pbml0IHRyZWF0IG5lZ2F0aXZlIHZhbHVlcwpmb3IgbWF4X2dyYW50X2ZyYW1lcyBhbmQg
bWF4X21hcHRyYWNrX2ZyYW1lcyBhcyBpbnN0cnVjdGlvbnMgdG8gdXNlIHRoZQpzeXN0ZW0td2lk
ZSBkZWZhdWx0LCBhbmQgaGF2ZSBhbGwgdGhlIGFib3ZlIHRvb2xzdGFja3MgZGVmYXVsdCB0byBw
YXNzaW5nCi0xIHVubGVzcyBhIGRpZmZlcmVudCB2YWx1ZSBpcyBleHBsaWNpdGx5IGNvbmZpZ3Vy
ZWQuCgpUaGlzIHJlc3RvcmVzIHRoZSBvbGQgYmVoYXZpb3IgaW4gdGhhdCBjaGFuZ2luZyB0aGUg
aHlwZXJ2aXNvciBjb21tYW5kLWxpbmUKb3B0aW9uIGNhbiBjaGFuZ2UgdGhlIGJlaGF2aW9yIGZv
ciBhbGwgZ3Vlc3RzLCB3aGlsZSByZXRhaW5pbmcgdGhlIGFiaWxpdHkKdG8gc2V0IHBlci1ndWVz
dCB2YWx1ZXMuICBJdCBhbHNvIHJlbW92ZXMgdGhlIGJ1ZyB0aGF0IHJlZHVjaW5nIHRoZQpzeXN0
ZW0td2lkZSBtYXggd2lsbCBjYXVzZSBhbGwgZG9tYWlucyB3aXRob3V0IGV4cGxpY2l0IGxpbWl0
cyB0byBmYWlsLgoKTk9URTogLSBUaGUgT2NhbWwgYmluZGluZ3MgcmVxdWlyZSB0aGUgY2FsbGVy
IHRvIGFsd2F5cyBzcGVjaWZ5IGEgdmFsdWUsCiAgICAgICAgYW5kIHRoZSBjb2RlIHRvIHN0YXJ0
IGEgeGVuc3RvcmVkIHN0dWJkb21haW4gaGFyZC1jb2RlcyB0aGVzZSB0byA0CglhbmQgMTI4IHJl
c3BlY3RpdmVseTsgdGhpcyBiZWhhdm91ciB3aWxsIG5vdCBiZSBtb2RpZmllZC4KClNpZ25lZC1v
ZmYtYnk6IEdlb3JnZSBEdW5sYXAgPGdlb3JnZS5kdW5sYXBAY2l0cml4LmNvbT4KU2lnbmVkLW9m
Zi1ieTogUGF1bCBEdXJyYW50IDxwZHVycmFudEBhbWF6b24uY29tPgpSZXZpZXdlZC1ieTogSmFu
IEJldWxpY2ggPGpiZXVsaWNoQHN1c2UuY29tPgpSZWxlYXNlLWFja2VkLWJ5OiBKdWVyZ2VuIEdy
b3NzIDxqZ3Jvc3NAc3VzZS5jb20+Ci0tLQpDYzogSWFuIEphY2tzb24gPGlhbi5qYWNrc29uQGV1
LmNpdHJpeC5jb20+CkNjOiBXZWkgTGl1IDx3bEB4ZW4ub3JnPgpDYzogQW5kcmV3IENvb3BlciA8
YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KQ2M6IEdlb3JnZSBEdW5sYXAgPEdlb3JnZS5EdW5s
YXBAZXUuY2l0cml4LmNvbT4KQ2M6IEp1bGllbiBHcmFsbCA8anVsaWVuQHhlbi5vcmc+CkNjOiBL
b25yYWQgUnplc3p1dGVrIFdpbGsgPGtvbnJhZC53aWxrQG9yYWNsZS5jb20+CkNjOiBTdGVmYW5v
IFN0YWJlbGxpbmkgPHNzdGFiZWxsaW5pQGtlcm5lbC5vcmc+CkNjOiBBbnRob255IFBFUkFSRCA8
YW50aG9ueS5wZXJhcmRAY2l0cml4LmNvbT4KQ2M6ICJNYXJlayBNYXJjenlrb3dza2ktR8OzcmVj
a2kiIDxtYXJtYXJla0BpbnZpc2libGV0aGluZ3NsYWIuY29tPgpDYzogVm9sb2R5bXlyIEJhYmNo
dWsgPFZvbG9keW15cl9CYWJjaHVrQGVwYW0uY29tPgpDYzogIlJvZ2VyIFBhdSBNb25uw6kiIDxy
b2dlci5wYXVAY2l0cml4LmNvbT4KCnY2OgogLSBBZGQgbWlzc2luZyBhc3NpZ25tZW50IGluIHBh
cnNlX2dudHRhYl9saW1pdCgpCiAtIERlYWwgd2l0aCBFSU5WQUwgcmV0dXJuIGZyb20geGx1X2Nm
Z19nZXRfYm91bmRlZF9sb25nKCkKIC0gQWRkIExJQlhMX0hBVkVfQlVJTERJTkZPX1NJR05FRF9H
UkFOVF9MSU1JVFMKCnY1OgogLSBSZW1vdmUgZXJyb25lb3VzIF9faW5pdCBhbm5vdGF0aW9ucwog
LSBGYWlsIG91dCBvZiByYW5nZSBjb21tYW5kIGxpbmUgdmFsdWVzIHdpdGggRVJBTkdFCiAtIE1h
a2Ugb3B0X21heF9tYXB0cmFja19mcmFtZXMgc3RhdGljCgp2NDoKIC0gQWRkIG1pc3NpbmcgYnJh
Y2VzIGluIHhsdV9jZmdfZ2V0X2JvdW5kZWRfbG9uZygpCgp2MzoKIC0gTWFrZSBzdXJlIHRoYXQg
c3BlY2lmaWVkIHZhbHVlcyBjYW5ub3QgYmUgbmVnYXRpdmUgb3Igb3ZlcmZsb3cgYQogICBzaWdu
ZWQgaW50Cgp2MjoKIC0gcmUtd29ya2VkIEdlb3JnZSdzIG9yaWdpbmFsIGNvbW1pdCBtYXNzYWdl
IGEgbGl0dGxlCiAtIGZpeGVkIHRoZSB0ZXh0IGluIHhsLmNvbmYuNS5wb2QKIC0gdXNlIC0xIGFz
IHRoZSBzZW50aW5lbCB2YWx1ZSBmb3IgJ2RlZmF1bHQnIGFuZCA8IDAgZm9yIGNoZWNraW5nIGl0
Ci0tLQogZG9jcy9tYW4veGwuY29uZi41LnBvZCAgICAgICAgICAgIHwgIDYgKystLQogdG9vbHMv
bGlieGwvbGlieGwuaCAgICAgICAgICAgICAgIHwgMTEgKysrKysrLS0KIHRvb2xzL2xpYnhsL2xp
YnhsX3R5cGVzLmlkbCAgICAgICB8ICA0ICstLQogdG9vbHMvbGlieGwvbGlieGx1X2NmZy5jICAg
ICAgICAgIHwgMjYgKysrKysrKysrKysrKysrLS0KIHRvb2xzL2xpYnhsL2xpYnhsdXRpbC5oICAg
ICAgICAgICB8ICAyICsrCiB0b29scy9weXRob24veGVuL2xvd2xldmVsL3hjL3hjLmMgfCAgNCAr
LS0KIHRvb2xzL3hsL3hsLmMgICAgICAgICAgICAgICAgICAgICB8IDIyICsrKysrKysrLS0tLS0t
LQogdG9vbHMveGwveGxfcGFyc2UuYyAgICAgICAgICAgICAgIHwgMTkgKysrKysrKysrLS0tLQog
eGVuL2FyY2gvYXJtL3NldHVwLmMgICAgICAgICAgICAgIHwgIDIgKy0KIHhlbi9hcmNoL3g4Ni9z
ZXR1cC5jICAgICAgICAgICAgICB8ICA0ICstLQogeGVuL2NvbW1vbi9ncmFudF90YWJsZS5jICAg
ICAgICAgIHwgNDcgKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLQogeGVuL2luY2x1ZGUv
cHVibGljL2RvbWN0bC5oICAgICAgIHwgMTAgKysrKy0tLQogeGVuL2luY2x1ZGUveGVuL2dyYW50
X3RhYmxlLmggICAgIHwgMTAgKysrLS0tLQogMTMgZmlsZXMgY2hhbmdlZCwgMTI0IGluc2VydGlv
bnMoKyksIDQzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RvY3MvbWFuL3hsLmNvbmYuNS5w
b2QgYi9kb2NzL21hbi94bC5jb25mLjUucG9kCmluZGV4IDk2MjE0NGUzOGUuLjIwN2FiM2U3N2Eg
MTAwNjQ0Ci0tLSBhL2RvY3MvbWFuL3hsLmNvbmYuNS5wb2QKKysrIGIvZG9jcy9tYW4veGwuY29u
Zi41LnBvZApAQCAtODEsMTMgKzgxLDE1IEBAIERlZmF1bHQ6IEM8L3Zhci9sb2NrL3hsPgogCiBT
ZXRzIHRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGUgQzxtYXhfZ3JhbnRfZnJhbWVzPiBkb21haW4g
Y29uZmlnIHZhbHVlLgogCi1EZWZhdWx0OiBDPDMyPiBvbiBob3N0cyB1cCB0byAxNlRCIG9mIG1l
bW9yeSwgQzw2ND4gb24gaG9zdHMgbGFyZ2VyIHRoYW4gMTZUQgorRGVmYXVsdDogdmFsdWUgb2Yg
WGVuIGNvbW1hbmQgbGluZSBCPGdudHRhYl9tYXhfZnJhbWVzPiBwYXJhbWV0ZXIgKG9yIGl0cwor
ZGVmYXVsdCB2YWx1ZSBpZiB1bnNwZWNpZmllZCkuCiAKID1pdGVtIEI8bWF4X21hcHRyYWNrX2Zy
YW1lcz1OVU1CRVI+CiAKIFNldHMgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBDPG1heF9tYXB0
cmFja19mcmFtZXM+IGRvbWFpbiBjb25maWcgdmFsdWUuCiAKLURlZmF1bHQ6IEM8MTAyND4KK0Rl
ZmF1bHQ6IHZhbHVlIG9mIFhlbiBjb21tYW5kIGxpbmUgQjxnbnR0YWJfbWF4X21hcHRyYWNrX2Zy
YW1lcz4KK3BhcmFtZXRlciAob3IgaXRzIGRlZmF1bHQgdmFsdWUgaWYgdW5zcGVjaWZpZWQpLgog
CiA9aXRlbSBCPHZpZi5kZWZhdWx0LnNjcmlwdD0iUEFUSCI+CiAKZGlmZiAtLWdpdCBhL3Rvb2xz
L2xpYnhsL2xpYnhsLmggYi90b29scy9saWJ4bC9saWJ4bC5oCmluZGV4IDQ5YjU2ZmExYTMuLmI4
MjljMWJiY2UgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhsL2xpYnhsLmgKKysrIGIvdG9vbHMvbGli
eGwvbGlieGwuaApAQCAtMzY0LDggKzM2NCwxNSBAQAogICovCiAjZGVmaW5lIExJQlhMX0hBVkVf
QlVJTERJTkZPX0dSQU5UX0xJTUlUUyAxCiAKLSNkZWZpbmUgTElCWExfTUFYX0dSQU5UX0ZSQU1F
U19ERUZBVUxUIDMyCi0jZGVmaW5lIExJQlhMX01BWF9NQVBUUkFDS19GUkFNRVNfREVGQVVMVCAx
MDI0CisvKgorICogTElCWExfSEFWRV9CVUlMRElORk9fU0lHTkVEX0dSQU5UX0xJTUlUUyBpbmRp
Y2F0ZXMgdGhhdCB0aGUKKyAqIHNpZ25lZCBtYXhfZ3JhbnRfZnJhbWVzIGFuZCBtYXhfbWFwdHJh
Y2tfZnJhbWVzIGZpZWxkcyBpbgorICogbGlieGxfZG9tYWluX2J1aWxkX2luZm8gYXJlIHNpZ25l
ZCBxdWFudGl0aWVzLgorICovCisjZGVmaW5lIExJQlhMX0hBVkVfQlVJTERJTkZPX1NJR05FRF9H
UkFOVF9MSU1JVFMgMQorCisjZGVmaW5lIExJQlhMX01BWF9HUkFOVF9GUkFNRVNfREVGQVVMVCAt
MQorI2RlZmluZSBMSUJYTF9NQVhfTUFQVFJBQ0tfRlJBTUVTX0RFRkFVTFQgLTEKIAogLyoKICAq
IExJQlhMX0hBVkVfQlVJTERJTkZPXyogaW5kaWNhdGVzIHRoYXQgbGlieGxfZG9tYWluX2J1aWxk
X2luZm8gaGFzCmRpZmYgLS1naXQgYS90b29scy9saWJ4bC9saWJ4bF90eXBlcy5pZGwgYi90b29s
cy9saWJ4bC9saWJ4bF90eXBlcy5pZGwKaW5kZXggMDU0NmQ3ODY1YS4uNjNlMjliYjJmYiAxMDA2
NDQKLS0tIGEvdG9vbHMvbGlieGwvbGlieGxfdHlwZXMuaWRsCisrKyBiL3Rvb2xzL2xpYnhsL2xp
YnhsX3R5cGVzLmlkbApAQCAtNTExLDggKzUxMSw4IEBAIGxpYnhsX2RvbWFpbl9idWlsZF9pbmZv
ID0gU3RydWN0KCJkb21haW5fYnVpbGRfaW5mbyIsWwogCiAgICAgKCJ2bnVtYV9ub2RlcyIsIEFy
cmF5KGxpYnhsX3Zub2RlX2luZm8sICJudW1fdm51bWFfbm9kZXMiKSksCiAKLSAgICAoIm1heF9n
cmFudF9mcmFtZXMiLCAgICB1aW50MzIsIHsnaW5pdF92YWwnOiAnTElCWExfTUFYX0dSQU5UX0ZS
QU1FU19ERUZBVUxUJ30pLAotICAgICgibWF4X21hcHRyYWNrX2ZyYW1lcyIsIHVpbnQzMiwgeydp
bml0X3ZhbCc6ICdMSUJYTF9NQVhfTUFQVFJBQ0tfRlJBTUVTX0RFRkFVTFQnfSksCisgICAgKCJt
YXhfZ3JhbnRfZnJhbWVzIiwgICAgaW50ZWdlciwgeydpbml0X3ZhbCc6ICdMSUJYTF9NQVhfR1JB
TlRfRlJBTUVTX0RFRkFVTFQnfSksCisgICAgKCJtYXhfbWFwdHJhY2tfZnJhbWVzIiwgaW50ZWdl
ciwgeydpbml0X3ZhbCc6ICdMSUJYTF9NQVhfTUFQVFJBQ0tfRlJBTUVTX0RFRkFVTFQnfSksCiAg
ICAgCiAgICAgKCJkZXZpY2VfbW9kZWxfdmVyc2lvbiIsIGxpYnhsX2RldmljZV9tb2RlbF92ZXJz
aW9uKSwKICAgICAoImRldmljZV9tb2RlbF9zdHViZG9tYWluIiwgbGlieGxfZGVmYm9vbCksCmRp
ZmYgLS1naXQgYS90b29scy9saWJ4bC9saWJ4bHVfY2ZnLmMgYi90b29scy9saWJ4bC9saWJ4bHVf
Y2ZnLmMKaW5kZXggNzI4MTVkMjVkZC4uY2FmYzYzMmZjMSAxMDA2NDQKLS0tIGEvdG9vbHMvbGli
eGwvbGlieGx1X2NmZy5jCisrKyBiL3Rvb2xzL2xpYnhsL2xpYnhsdV9jZmcuYwpAQCAtMjY4LDgg
KzI2OCw5IEBAIGludCB4bHVfY2ZnX3JlcGxhY2Vfc3RyaW5nKGNvbnN0IFhMVV9Db25maWcgKmNm
ZywgY29uc3QgY2hhciAqbiwKICAgICByZXR1cm4gMDsKIH0KIAotaW50IHhsdV9jZmdfZ2V0X2xv
bmcoY29uc3QgWExVX0NvbmZpZyAqY2ZnLCBjb25zdCBjaGFyICpuLAotICAgICAgICAgICAgICAg
ICAgICAgbG9uZyAqdmFsdWVfciwgaW50IGRvbnRfd2FybikgeworaW50IHhsdV9jZmdfZ2V0X2Jv
dW5kZWRfbG9uZyhjb25zdCBYTFVfQ29uZmlnICpjZmcsIGNvbnN0IGNoYXIgKm4sCisgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGxvbmcgbWluLCBsb25nIG1heCwgbG9uZyAqdmFsdWVfciwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGRvbnRfd2FybikgewogICAgIGxvbmcg
bDsKICAgICBYTFVfQ29uZmlnU2V0dGluZyAqc2V0OwogICAgIGludCBlOwpAQCAtMzAzLDEwICsz
MDQsMzEgQEAgaW50IHhsdV9jZmdfZ2V0X2xvbmcoY29uc3QgWExVX0NvbmZpZyAqY2ZnLCBjb25z
dCBjaGFyICpuLAogICAgICAgICAgICAgICAgICAgICBjZmctPmNvbmZpZ19zb3VyY2UsIHNldC0+
bGluZW5vLCBuKTsKICAgICAgICAgcmV0dXJuIEVJTlZBTDsKICAgICB9CisgICAgaWYgKGwgPCBt
aW4pIHsKKyAgICAgICAgaWYgKCFkb250X3dhcm4pCisgICAgICAgICAgICBmcHJpbnRmKGNmZy0+
cmVwb3J0LAorICAgICAgICAgICAgICAgICAgICAiJXM6JWQ6IHdhcm5pbmc6IHZhbHVlIGAlbGQn
IGlzIHNtYWxsZXIgdGhhbiBtaW5pbXVtIGJvdW5kICclbGQnXG4iLAorICAgICAgICAgICAgICAg
ICAgICBjZmctPmNvbmZpZ19zb3VyY2UsIHNldC0+bGluZW5vLCBsLCBtaW4pOworICAgICAgICBy
ZXR1cm4gRUlOVkFMOworICAgIH0KKyAgICBpZiAobCA+IG1heCkgeworICAgICAgICBpZiAoIWRv
bnRfd2FybikKKyAgICAgICAgICAgIGZwcmludGYoY2ZnLT5yZXBvcnQsCisgICAgICAgICAgICAg
ICAgICAgICIlczolZDogd2FybmluZzogdmFsdWUgYCVsZCcgaXMgZ3JlYXRlciB0aGFuIG1heGlt
dW0gYm91bmQgJyVsZCdcbiIsCisgICAgICAgICAgICAgICAgICAgIGNmZy0+Y29uZmlnX3NvdXJj
ZSwgc2V0LT5saW5lbm8sIGwsIG1heCk7CisgICAgICAgIHJldHVybiBFSU5WQUw7CisgICAgfQor
CiAgICAgKnZhbHVlX3I9IGw7CiAgICAgcmV0dXJuIDA7CiB9CiAKK2ludCB4bHVfY2ZnX2dldF9s
b25nKGNvbnN0IFhMVV9Db25maWcgKmNmZywgY29uc3QgY2hhciAqbiwKKyAgICAgICAgICAgICAg
ICAgICAgIGxvbmcgKnZhbHVlX3IsIGludCBkb250X3dhcm4pIHsKKyAgICByZXR1cm4geGx1X2Nm
Z19nZXRfYm91bmRlZF9sb25nKGNmZywgbiwgTE9OR19NSU4sIExPTkdfTUFYLCB2YWx1ZV9yLAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9udF93YXJuKTsKK30KKwogaW50
IHhsdV9jZmdfZ2V0X2RlZmJvb2woY29uc3QgWExVX0NvbmZpZyAqY2ZnLCBjb25zdCBjaGFyICpu
LCBsaWJ4bF9kZWZib29sICpiLAogICAgICAgICAgICAgICAgICAgICAgaW50IGRvbnRfd2FybikK
IHsKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhsL2xpYnhsdXRpbC5oIGIvdG9vbHMvbGlieGwvbGli
eGx1dGlsLmgKaW5kZXggMDU3Y2MyNWNiMi4uOTJlMzVjNTQ2MiAxMDA2NDQKLS0tIGEvdG9vbHMv
bGlieGwvbGlieGx1dGlsLmgKKysrIGIvdG9vbHMvbGlieGwvbGlieGx1dGlsLmgKQEAgLTYzLDYg
KzYzLDggQEAgaW50IHhsdV9jZmdfcmVwbGFjZV9zdHJpbmcoY29uc3QgWExVX0NvbmZpZyAqY2Zn
LCBjb25zdCBjaGFyICpuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhciAqKnZhbHVl
X3IsIGludCBkb250X3dhcm4pOwogaW50IHhsdV9jZmdfZ2V0X2xvbmcoY29uc3QgWExVX0NvbmZp
ZyosIGNvbnN0IGNoYXIgKm4sIGxvbmcgKnZhbHVlX3IsCiAgICAgICAgICAgICAgICAgICAgICBp
bnQgZG9udF93YXJuKTsKK2ludCB4bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmcoY29uc3QgWExVX0Nv
bmZpZyosIGNvbnN0IGNoYXIgKm4sIGxvbmcgbWluLAorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBsb25nIG1heCwgbG9uZyAqdmFsdWVfciwgaW50IGRvbnRfd2Fybik7CiBpbnQgeGx1X2Nm
Z19nZXRfZGVmYm9vbChjb25zdCBYTFVfQ29uZmlnKiwgY29uc3QgY2hhciAqbiwgbGlieGxfZGVm
Ym9vbCAqYiwKICAgICAgICAgICAgICAgICAgICAgIGludCBkb250X3dhcm4pOwogCmRpZmYgLS1n
aXQgYS90b29scy9weXRob24veGVuL2xvd2xldmVsL3hjL3hjLmMgYi90b29scy9weXRob24veGVu
L2xvd2xldmVsL3hjL3hjLmMKaW5kZXggNDRkMzYwNjE0MS4uYTc1MWU4NTkxMCAxMDA2NDQKLS0t
IGEvdG9vbHMvcHl0aG9uL3hlbi9sb3dsZXZlbC94Yy94Yy5jCisrKyBiL3Rvb2xzL3B5dGhvbi94
ZW4vbG93bGV2ZWwveGMveGMuYwpAQCAtMTI3LDggKzEyNyw4IEBAIHN0YXRpYyBQeU9iamVjdCAq
cHl4Y19kb21haW5fY3JlYXRlKFhjT2JqZWN0ICpzZWxmLAogICAgICAgICB9LAogICAgICAgICAu
bWF4X3ZjcHVzID0gMSwKICAgICAgICAgLm1heF9ldnRjaG5fcG9ydCA9IC0xLCAvKiBObyBsaW1p
dC4gKi8KLSAgICAgICAgLm1heF9ncmFudF9mcmFtZXMgPSAzMiwKLSAgICAgICAgLm1heF9tYXB0
cmFja19mcmFtZXMgPSAxMDI0LAorICAgICAgICAubWF4X2dyYW50X2ZyYW1lcyA9IC0xLAorICAg
ICAgICAubWF4X21hcHRyYWNrX2ZyYW1lcyA9IC0xLAogICAgIH07CiAKICAgICBzdGF0aWMgY2hh
ciAqa3dkX2xpc3RbXSA9IHsgImRvbWlkIiwgInNzaWRyZWYiLCAiaGFuZGxlIiwgImZsYWdzIiwK
ZGlmZiAtLWdpdCBhL3Rvb2xzL3hsL3hsLmMgYi90b29scy94bC94bC5jCmluZGV4IGRkZDI5YjNm
MWIuLjNkNDM5MGE0NmQgMTAwNjQ0Ci0tLSBhL3Rvb2xzL3hsL3hsLmMKKysrIGIvdG9vbHMveGwv
eGwuYwpAQCAtMjMsNiArMjMsNyBAQAogI2luY2x1ZGUgPGN0eXBlLmg+CiAjaW5jbHVkZSA8aW50
dHlwZXMuaD4KICNpbmNsdWRlIDxyZWdleC5oPgorI2luY2x1ZGUgPGxpbWl0cy5oPgogCiAjaW5j
bHVkZSA8bGlieGwuaD4KICNpbmNsdWRlIDxsaWJ4bF91dGlscy5oPgpAQCAtOTYsNyArOTcsNiBA
QCBzdGF0aWMgdm9pZCBwYXJzZV9nbG9iYWxfY29uZmlnKGNvbnN0IGNoYXIgKmNvbmZpZ2ZpbGUs
CiAgICAgWExVX0NvbmZpZyAqY29uZmlnOwogICAgIGludCBlOwogICAgIGNvbnN0IGNoYXIgKmJ1
ZjsKLSAgICBsaWJ4bF9waHlzaW5mbyBwaHlzaW5mbzsKIAogICAgIGNvbmZpZyA9IHhsdV9jZmdf
aW5pdChzdGRlcnIsIGNvbmZpZ2ZpbGUpOwogICAgIGlmICghY29uZmlnKSB7CkBAIC0xOTcsMTcg
KzE5NywxOSBAQCBzdGF0aWMgdm9pZCBwYXJzZV9nbG9iYWxfY29uZmlnKGNvbnN0IGNoYXIgKmNv
bmZpZ2ZpbGUsCiAgICAgeGx1X2NmZ19yZXBsYWNlX3N0cmluZyAoY29uZmlnLCAiY29sby5kZWZh
dWx0LnByb3h5c2NyaXB0IiwKICAgICAgICAgJmRlZmF1bHRfY29sb19wcm94eV9zY3JpcHQsIDAp
OwogCi0gICAgaWYgKCF4bHVfY2ZnX2dldF9sb25nIChjb25maWcsICJtYXhfZ3JhbnRfZnJhbWVz
IiwgJmwsIDApKQorICAgIGUgPSB4bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmcgKGNvbmZpZywgIm1h
eF9ncmFudF9mcmFtZXMiLCAwLCBJTlRfTUFYLAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICZsLCAxKTsKKyAgICBpZiAoIWUpCiAgICAgICAgIG1heF9ncmFudF9mcmFtZXMgPSBs
OwotICAgIGVsc2UgewotICAgICAgICBsaWJ4bF9waHlzaW5mb19pbml0KCZwaHlzaW5mbyk7Ci0g
ICAgICAgIG1heF9ncmFudF9mcmFtZXMgPSAobGlieGxfZ2V0X3BoeXNpbmZvKGN0eCwgJnBoeXNp
bmZvKSAhPSAwIHx8Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIShwaHlzaW5mby5tYXhf
cG9zc2libGVfbWZuID4+IDMyKSkKLSAgICAgICAgICAgICAgICAgICAgICAgICAgID8gMzIgOiA2
NDsKLSAgICAgICAgbGlieGxfcGh5c2luZm9fZGlzcG9zZSgmcGh5c2luZm8pOwotICAgIH0KLSAg
ICBpZiAoIXhsdV9jZmdfZ2V0X2xvbmcgKGNvbmZpZywgIm1heF9tYXB0cmFja19mcmFtZXMiLCAm
bCwgMCkpCisgICAgZWxzZSBpZiAoZSAhPSBFU1JDSCkKKyAgICAgICAgZXhpdCgxKTsKKworICAg
IGUgPSB4bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmcgKGNvbmZpZywgIm1heF9tYXB0cmFja19mcmFt
ZXMiLCAwLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVF9NQVgsICZsLCAx
KTsKKyAgICBpZiAoIWUpCiAgICAgICAgIG1heF9tYXB0cmFja19mcmFtZXMgPSBsOworICAgIGVs
c2UgaWYgKGUgIT0gRVNSQ0gpCisgICAgICAgIGV4aXQoMSk7CiAKICAgICBsaWJ4bF9jcHVfYml0
bWFwX2FsbG9jKGN0eCwgJmdsb2JhbF92bV9hZmZpbml0eV9tYXNrLCAwKTsKICAgICBsaWJ4bF9j
cHVfYml0bWFwX2FsbG9jKGN0eCwgJmdsb2JhbF9odm1fYWZmaW5pdHlfbWFzaywgMCk7CmRpZmYg
LS1naXQgYS90b29scy94bC94bF9wYXJzZS5jIGIvdG9vbHMveGwveGxfcGFyc2UuYwppbmRleCAx
MTJmOGVlMDI2Li5iODgxMTg0ODA0IDEwMDY0NAotLS0gYS90b29scy94bC94bF9wYXJzZS5jCisr
KyBiL3Rvb2xzL3hsL3hsX3BhcnNlLmMKQEAgLTE0MTEsMTQgKzE0MTEsMjMgQEAgdm9pZCBwYXJz
ZV9jb25maWdfZGF0YShjb25zdCBjaGFyICpjb25maWdfc291cmNlLAogICAgICAgICAheGx1X2Nm
Z19nZXRfc3RyaW5nIChjb25maWcsICJjcHVzX3NvZnQiLCAmYnVmLCAwKSkKICAgICAgICAgcGFy
c2VfdmNwdV9hZmZpbml0eShiX2luZm8sIGNwdXMsIGJ1ZiwgbnVtX2NwdXMsIGZhbHNlKTsKIAot
ICAgIGlmICgheGx1X2NmZ19nZXRfbG9uZyAoY29uZmlnLCAibWF4X2dyYW50X2ZyYW1lcyIsICZs
LCAwKSkKKyAgICBlID0geGx1X2NmZ19nZXRfYm91bmRlZF9sb25nIChjb25maWcsICJtYXhfZ3Jh
bnRfZnJhbWVzIiwgMCwgSU5UX01BWCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAmbCwgMSk7CisgICAgaWYgKGUgPT0gRVNSQ0gpIC8qIG5vdCBzcGVjaWZpZWQgKi8KKyAgICAg
ICAgYl9pbmZvLT5tYXhfZ3JhbnRfZnJhbWVzID0gbWF4X2dyYW50X2ZyYW1lczsKKyAgICBlbHNl
IGlmICghZSkKICAgICAgICAgYl9pbmZvLT5tYXhfZ3JhbnRfZnJhbWVzID0gbDsKICAgICBlbHNl
Ci0gICAgICAgIGJfaW5mby0+bWF4X2dyYW50X2ZyYW1lcyA9IG1heF9ncmFudF9mcmFtZXM7Ci0g
ICAgaWYgKCF4bHVfY2ZnX2dldF9sb25nIChjb25maWcsICJtYXhfbWFwdHJhY2tfZnJhbWVzIiwg
JmwsIDApKQotICAgICAgICBiX2luZm8tPm1heF9tYXB0cmFja19mcmFtZXMgPSBsOwotICAgIGVs
c2UgaWYgKG1heF9tYXB0cmFja19mcmFtZXMgIT0gLTEpCisgICAgICAgIGV4aXQoMSk7CisKKyAg
ICBlID0geGx1X2NmZ19nZXRfYm91bmRlZF9sb25nIChjb25maWcsICJtYXhfbWFwdHJhY2tfZnJh
bWVzIiwgMCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfTUFYLCAmbCwg
MSk7CisgICAgaWYgKGUgPT0gRVNSQ0gpIC8qIG5vdCBzcGVjaWZpZWQgKi8KICAgICAgICAgYl9p
bmZvLT5tYXhfbWFwdHJhY2tfZnJhbWVzID0gbWF4X21hcHRyYWNrX2ZyYW1lczsKKyAgICBlbHNl
IGlmICghZSkKKyAgICAgICAgYl9pbmZvLT5tYXhfbWFwdHJhY2tfZnJhbWVzID0gbDsKKyAgICBl
bHNlCisgICAgICAgIGV4aXQoMSk7CiAKICAgICBsaWJ4bF9kZWZib29sX3NldCgmYl9pbmZvLT5j
bGFpbV9tb2RlLCBjbGFpbV9tb2RlKTsKIApkaWZmIC0tZ2l0IGEveGVuL2FyY2gvYXJtL3NldHVw
LmMgYi94ZW4vYXJjaC9hcm0vc2V0dXAuYwppbmRleCA1MWQzMjEwNmI3Li4zYzg5OWNkNGEwIDEw
MDY0NAotLS0gYS94ZW4vYXJjaC9hcm0vc2V0dXAuYworKysgYi94ZW4vYXJjaC9hcm0vc2V0dXAu
YwpAQCAtNzg5LDcgKzc4OSw3IEBAIHZvaWQgX19pbml0IHN0YXJ0X3hlbih1bnNpZ25lZCBsb25n
IGJvb3RfcGh5c19vZmZzZXQsCiAgICAgICAgIC5mbGFncyA9IFhFTl9ET01DVExfQ0RGX2h2bSB8
IFhFTl9ET01DVExfQ0RGX2hhcCwKICAgICAgICAgLm1heF9ldnRjaG5fcG9ydCA9IC0xLAogICAg
ICAgICAubWF4X2dyYW50X2ZyYW1lcyA9IGdudHRhYl9kb20wX2ZyYW1lcygpLAotICAgICAgICAu
bWF4X21hcHRyYWNrX2ZyYW1lcyA9IG9wdF9tYXhfbWFwdHJhY2tfZnJhbWVzLAorICAgICAgICAu
bWF4X21hcHRyYWNrX2ZyYW1lcyA9IC0xLAogICAgIH07CiAgICAgaW50IHJjOwogCmRpZmYgLS1n
aXQgYS94ZW4vYXJjaC94ODYvc2V0dXAuYyBiL3hlbi9hcmNoL3g4Ni9zZXR1cC5jCmluZGV4IDAw
ZWU4N2JkZTUuLjdkMjdmMzYwNTMgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9zZXR1cC5jCisr
KyBiL3hlbi9hcmNoL3g4Ni9zZXR1cC5jCkBAIC02OTcsOCArNjk3LDggQEAgdm9pZCBfX2luaXQg
bm9yZXR1cm4gX19zdGFydF94ZW4odW5zaWduZWQgbG9uZyBtYmlfcCkKICAgICBzdHJ1Y3QgeGVu
X2RvbWN0bF9jcmVhdGVkb21haW4gZG9tMF9jZmcgPSB7CiAgICAgICAgIC5mbGFncyA9IElTX0VO
QUJMRUQoQ09ORklHX1RCT09UKSA/IFhFTl9ET01DVExfQ0RGX3MzX2ludGVncml0eSA6IDAsCiAg
ICAgICAgIC5tYXhfZXZ0Y2huX3BvcnQgPSAtMSwKLSAgICAgICAgLm1heF9ncmFudF9mcmFtZXMg
PSBvcHRfbWF4X2dyYW50X2ZyYW1lcywKLSAgICAgICAgLm1heF9tYXB0cmFja19mcmFtZXMgPSBv
cHRfbWF4X21hcHRyYWNrX2ZyYW1lcywKKyAgICAgICAgLm1heF9ncmFudF9mcmFtZXMgPSAtMSwK
KyAgICAgICAgLm1heF9tYXB0cmFja19mcmFtZXMgPSAtMSwKICAgICB9OwogCiAgICAgLyogQ3Jp
dGljYWwgcmVnaW9uIHdpdGhvdXQgSURUIG9yIFRTUy4gIEFueSBmYXVsdCBpcyBkZWFkbHkhICov
CmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL2dyYW50X3RhYmxlLmMgYi94ZW4vY29tbW9uL2dyYW50
X3RhYmxlLmMKaW5kZXggYjM0ZDUyMGY2ZC4uNzI5ZjM2MmVhOCAxMDA2NDQKLS0tIGEveGVuL2Nv
bW1vbi9ncmFudF90YWJsZS5jCisrKyBiL3hlbi9jb21tb24vZ3JhbnRfdGFibGUuYwpAQCAtODQs
MTEgKzg0LDQyIEBAIHN0cnVjdCBncmFudF90YWJsZSB7CiAgICAgc3RydWN0IGdyYW50X3RhYmxl
X2FyY2ggYXJjaDsKIH07CiAKK3N0YXRpYyBpbnQgcGFyc2VfZ250dGFiX2xpbWl0KGNvbnN0IGNo
YXIgKnBhcmFtLCBjb25zdCBjaGFyICphcmcsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1bnNpZ25lZCBpbnQgKnZhbHApCit7CisgICAgY29uc3QgY2hhciAqZTsKKyAgICB1bnNpZ25l
ZCBsb25nIHZhbDsKKworICAgIHZhbCA9IHNpbXBsZV9zdHJ0b3VsKGFyZywgJmUsIDApOworICAg
IGlmICggKmUgKQorICAgICAgICByZXR1cm4gLUVJTlZBTDsKKworICAgIGlmICggdmFsID4gSU5U
X01BWCApCisgICAgICAgIHJldHVybiAtRVJBTkdFOworCisgICAgKnZhbHAgPSB2YWw7CisKKyAg
ICByZXR1cm4gMDsKK30KKwogdW5zaWduZWQgaW50IF9fcmVhZF9tb3N0bHkgb3B0X21heF9ncmFu
dF9mcmFtZXMgPSA2NDsKLWludGVnZXJfcnVudGltZV9wYXJhbSgiZ250dGFiX21heF9mcmFtZXMi
LCBvcHRfbWF4X2dyYW50X2ZyYW1lcyk7CiAKLXVuc2lnbmVkIGludCBfX3JlYWRfbW9zdGx5IG9w
dF9tYXhfbWFwdHJhY2tfZnJhbWVzID0gMTAyNDsKLWludGVnZXJfcnVudGltZV9wYXJhbSgiZ250
dGFiX21heF9tYXB0cmFja19mcmFtZXMiLCBvcHRfbWF4X21hcHRyYWNrX2ZyYW1lcyk7CitzdGF0
aWMgaW50IHBhcnNlX2dudHRhYl9tYXhfZnJhbWVzKGNvbnN0IGNoYXIgKmFyZykKK3sKKyAgICBy
ZXR1cm4gcGFyc2VfZ250dGFiX2xpbWl0KCJnbnR0YWJfbWF4X2ZyYW1lcyIsIGFyZywKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICZvcHRfbWF4X2dyYW50X2ZyYW1lcyk7Cit9CitjdXN0
b21fcnVudGltZV9wYXJhbSgiZ250dGFiX21heF9mcmFtZXMiLCBwYXJzZV9nbnR0YWJfbWF4X2Zy
YW1lcyk7CisKK3N0YXRpYyB1bnNpZ25lZCBpbnQgX19yZWFkX21vc3RseSBvcHRfbWF4X21hcHRy
YWNrX2ZyYW1lcyA9IDEwMjQ7CisKK3N0YXRpYyBpbnQgcGFyc2VfZ250dGFiX21heF9tYXB0cmFj
a19mcmFtZXMoY29uc3QgY2hhciAqYXJnKQoreworICAgIHJldHVybiBwYXJzZV9nbnR0YWJfbGlt
aXQoImdudHRhYl9tYXhfbWFwdHJhY2tfZnJhbWVzIiwgYXJnLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgJm9wdF9tYXhfbWFwdHJhY2tfZnJhbWVzKTsKK30KK2N1c3RvbV9ydW50aW1l
X3BhcmFtKCJnbnR0YWJfbWF4X21hcHRyYWNrX2ZyYW1lcyIsCisgICAgICAgICAgICAgICAgICAg
ICBwYXJzZV9nbnR0YWJfbWF4X21hcHRyYWNrX2ZyYW1lcyk7CiAKICNpZm5kZWYgR05UVEFCX01B
WF9WRVJTSU9OCiAjZGVmaW5lIEdOVFRBQl9NQVhfVkVSU0lPTiAyCkBAIC0xODM3LDEyICsxODY4
LDE4IEBAIGFjdGl2ZV9hbGxvY19mYWlsZWQ6CiAgICAgcmV0dXJuIC1FTk9NRU07CiB9CiAKLWlu
dCBncmFudF90YWJsZV9pbml0KHN0cnVjdCBkb21haW4gKmQsIHVuc2lnbmVkIGludCBtYXhfZ3Jh
bnRfZnJhbWVzLAotICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IG1heF9tYXB0cmFj
a19mcmFtZXMpCitpbnQgZ3JhbnRfdGFibGVfaW5pdChzdHJ1Y3QgZG9tYWluICpkLCBpbnQgbWF4
X2dyYW50X2ZyYW1lcywKKyAgICAgICAgICAgICAgICAgICAgIGludCBtYXhfbWFwdHJhY2tfZnJh
bWVzKQogewogICAgIHN0cnVjdCBncmFudF90YWJsZSAqZ3Q7CiAgICAgaW50IHJldCA9IC1FTk9N
RU07CiAKKyAgICAvKiBEZWZhdWx0IHRvIG1heGltdW0gdmFsdWUgaWYgbm8gdmFsdWUgd2FzIHNw
ZWNpZmllZCAqLworICAgIGlmICggbWF4X2dyYW50X2ZyYW1lcyA8IDAgKQorICAgICAgICBtYXhf
Z3JhbnRfZnJhbWVzID0gb3B0X21heF9ncmFudF9mcmFtZXM7CisgICAgaWYgKCBtYXhfbWFwdHJh
Y2tfZnJhbWVzIDwgMCApCisgICAgICAgIG1heF9tYXB0cmFja19mcmFtZXMgPSBvcHRfbWF4X21h
cHRyYWNrX2ZyYW1lczsKKwogICAgIGlmICggbWF4X2dyYW50X2ZyYW1lcyA8IElOSVRJQUxfTlJf
R1JBTlRfRlJBTUVTIHx8CiAgICAgICAgICBtYXhfZ3JhbnRfZnJhbWVzID4gb3B0X21heF9ncmFu
dF9mcmFtZXMgfHwKICAgICAgICAgIG1heF9tYXB0cmFja19mcmFtZXMgPiBvcHRfbWF4X21hcHRy
YWNrX2ZyYW1lcyApCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmggYi94
ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmgKaW5kZXggOWYyY2ZkNjAyYy4uZTMxM2RhNDk5ZiAx
MDA2NDQKLS0tIGEveGVuL2luY2x1ZGUvcHVibGljL2RvbWN0bC5oCisrKyBiL3hlbi9pbmNsdWRl
L3B1YmxpYy9kb21jdGwuaApAQCAtODIsMTMgKzgyLDE1IEBAIHN0cnVjdCB4ZW5fZG9tY3RsX2Ny
ZWF0ZWRvbWFpbiB7CiAgICAgdWludDMyX3QgaW9tbXVfb3B0czsKIAogICAgIC8qCi0gICAgICog
VmFyaW91cyBkb21haW4gbGltaXRzLCB3aGljaCBpbXBhY3QgdGhlIHF1YW50aXR5IG9mIHJlc291
cmNlcyAoZ2xvYmFsCi0gICAgICogbWFwcGluZyBzcGFjZSwgeGVuaGVhcCwgZXRjKSBhIGd1ZXN0
IG1heSBjb25zdW1lLgorICAgICAqIFZhcmlvdXMgZG9tYWluIGxpbWl0cywgd2hpY2ggaW1wYWN0
IHRoZSBxdWFudGl0eSBvZiByZXNvdXJjZXMKKyAgICAgKiAoZ2xvYmFsIG1hcHBpbmcgc3BhY2Us
IHhlbmhlYXAsIGV0YykgYSBndWVzdCBtYXkgY29uc3VtZS4gIEZvcgorICAgICAqIG1heF9ncmFu
dF9mcmFtZXMgYW5kIG1heF9tYXB0cmFja19mcmFtZXMsIDwgMCBtZWFucyAidXNlIHRoZQorICAg
ICAqIGRlZmF1bHQgbWF4aW11bSB2YWx1ZSBpbiB0aGUgaHlwZXJ2aXNvciIuCiAgICAgICovCiAg
ICAgdWludDMyX3QgbWF4X3ZjcHVzOwogICAgIHVpbnQzMl90IG1heF9ldnRjaG5fcG9ydDsKLSAg
ICB1aW50MzJfdCBtYXhfZ3JhbnRfZnJhbWVzOwotICAgIHVpbnQzMl90IG1heF9tYXB0cmFja19m
cmFtZXM7CisgICAgaW50MzJfdCBtYXhfZ3JhbnRfZnJhbWVzOworICAgIGludDMyX3QgbWF4X21h
cHRyYWNrX2ZyYW1lczsKIAogICAgIHN0cnVjdCB4ZW5fYXJjaF9kb21haW5jb25maWcgYXJjaDsK
IH07CmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS94ZW4vZ3JhbnRfdGFibGUuaCBiL3hlbi9pbmNs
dWRlL3hlbi9ncmFudF90YWJsZS5oCmluZGV4IDZmOTM0NWQ5ZWYuLjk4NjAzNjA0YjggMTAwNjQ0
Ci0tLSBhL3hlbi9pbmNsdWRlL3hlbi9ncmFudF90YWJsZS5oCisrKyBiL3hlbi9pbmNsdWRlL3hl
bi9ncmFudF90YWJsZS5oCkBAIC0zMywxMSArMzMsMTAgQEAKIHN0cnVjdCBncmFudF90YWJsZTsK
IAogZXh0ZXJuIHVuc2lnbmVkIGludCBvcHRfbWF4X2dyYW50X2ZyYW1lczsKLWV4dGVybiB1bnNp
Z25lZCBpbnQgb3B0X21heF9tYXB0cmFja19mcmFtZXM7CiAKIC8qIENyZWF0ZS9kZXN0cm95IHBl
ci1kb21haW4gZ3JhbnQgdGFibGUgY29udGV4dC4gKi8KLWludCBncmFudF90YWJsZV9pbml0KHN0
cnVjdCBkb21haW4gKmQsIHVuc2lnbmVkIGludCBtYXhfZ3JhbnRfZnJhbWVzLAotICAgICAgICAg
ICAgICAgICAgICAgdW5zaWduZWQgaW50IG1heF9tYXB0cmFja19mcmFtZXMpOworaW50IGdyYW50
X3RhYmxlX2luaXQoc3RydWN0IGRvbWFpbiAqZCwgaW50IG1heF9ncmFudF9mcmFtZXMsCisgICAg
ICAgICAgICAgICAgICAgICBpbnQgbWF4X21hcHRyYWNrX2ZyYW1lcyk7CiB2b2lkIGdyYW50X3Rh
YmxlX2Rlc3Ryb3koCiAgICAgc3RydWN0IGRvbWFpbiAqZCk7CiB2b2lkIGdyYW50X3RhYmxlX2lu
aXRfdmNwdShzdHJ1Y3QgdmNwdSAqdik7CkBAIC02NSwxMSArNjQsMTAgQEAgaW50IGdudHRhYl9n
ZXRfc3RhdHVzX2ZyYW1lKHN0cnVjdCBkb21haW4gKmQsIHVuc2lnbmVkIGxvbmcgaWR4LAogI2Vs
c2UKIAogI2RlZmluZSBvcHRfbWF4X2dyYW50X2ZyYW1lcyAwCi0jZGVmaW5lIG9wdF9tYXhfbWFw
dHJhY2tfZnJhbWVzIDAKIAogc3RhdGljIGlubGluZSBpbnQgZ3JhbnRfdGFibGVfaW5pdChzdHJ1
Y3QgZG9tYWluICpkLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25l
ZCBpbnQgbWF4X2dyYW50X2ZyYW1lcywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdW5zaWduZWQgaW50IG1heF9tYXB0cmFja19mcmFtZXMpCisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGludCBtYXhfZ3JhbnRfZnJhbWVzLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpbnQgbWF4X21hcHRyYWNrX2ZyYW1lcykKIHsKICAgICByZXR1cm4g
MDsKIH0KLS0gCjIuMjAuMQoKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRldmVsQGxpc3RzLnhlbnByb2pl
Y3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFpbG1hbi9saXN0aW5mby94ZW4t
ZGV2ZWw=

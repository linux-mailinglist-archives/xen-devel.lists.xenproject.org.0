Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 324AE14A642
	for <lists+xen-devel@lfdr.de>; Mon, 27 Jan 2020 15:36:59 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iw5Tr-0001hL-V3; Mon, 27 Jan 2020 14:35:11 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=x5IB=3Q=citrix.com=andrew.cooper3@srs-us1.protection.inumbo.net>)
 id 1iw5Tq-0001gT-Jq
 for xen-devel@lists.xenproject.org; Mon, 27 Jan 2020 14:35:10 +0000
X-Inumbo-ID: 2e842890-4112-11ea-9fd7-bc764e2007e4
Received: from esa1.hc3370-68.iphmx.com (unknown [216.71.145.142])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 2e842890-4112-11ea-9fd7-bc764e2007e4;
 Mon, 27 Jan 2020 14:34:53 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1580135694;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version;
 bh=3aA35RPqKDDf+uy1cNRXZI2JByEnYCgfR73vgRu/cwM=;
 b=Klu6LyiGAtZRTtwTsLsEK6yMu+/yMEJa6ZFrHppmR64aiDS/wJq9VWCK
 /vdANxUuGsuro/j9wS8Np5PPf6vQWK3Dh9IrSWve88AxasVPDvZRvTltH
 +268EmAZr9Yz4S1z5MxyjZOuWB9tjFHF2Vj0TxaI6PTTlWrdldKQgyRk1 U=;
Authentication-Results: esa1.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=andrew.cooper3@citrix.com;
 spf=Pass smtp.mailfrom=Andrew.Cooper3@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa1.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 andrew.cooper3@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="andrew.cooper3@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: Pass (esa1.hc3370-68.iphmx.com: domain of
 Andrew.Cooper3@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="Andrew.Cooper3@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83
 ip4:168.245.78.127 ~all"
Received-SPF: None (esa1.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa1.hc3370-68.iphmx.com;
 envelope-from="Andrew.Cooper3@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: hN8RMHMSB/9WP5mdJJGQBtL2+bJyjDXKroHxQxi9IrOStzwOZuxBG2xo7d94xGWN7+I9r3Ix1V
 HuMTKGC/iw0OKEZ3Qinf0Q7xEfEHfkqr99MLUuU7hsVW89mstaL9qNcOPjWrFkNY5EcUshIX3E
 WiCHFsT6OgiiL1JG3GU+N0cCKgUHh06ae2Q7bnwTBPrTiHARrqSjYhFkl6PrQAbn098Utc6JbN
 zzw5sY7cktzK8g4OQs+7pqAvNFKEP//CECZJiPXyztFNMoToYRkim1Z3EAZ330ZoxEmyVFvi4D
 fWw=
X-SBRS: 2.7
X-MesageID: 11664979
X-Ironport-Server: esa1.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.70,370,1574139600"; d="scan'208";a="11664979"
From: Andrew Cooper <andrew.cooper3@citrix.com>
To: Xen-devel <xen-devel@lists.xenproject.org>
Date: Mon, 27 Jan 2020 14:34:34 +0000
Message-ID: <20200127143444.25538-8-andrew.cooper3@citrix.com>
X-Mailer: git-send-email 2.11.0
In-Reply-To: <20200127143444.25538-1-andrew.cooper3@citrix.com>
References: <20200127143444.25538-1-andrew.cooper3@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v2 07/17] libxc/restore: STATIC_DATA_END
 inference for v2 compatibility
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Andrew Cooper <andrew.cooper3@citrix.com>, Wei Liu <wl@xen.org>,
 Ian Jackson <Ian.Jackson@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QSB2MyBzdHJlYW0gY2FuIGNvbXBhdGlibHkgcmVhZCBhIHYyIHN0cmVhbSBieSBpbmZlcnJpbmcg
dGhlIHBvc2l0aW9uIG9mIHRoZQpTVEFUSUNfREFUQV9FTkQgcmVjb3JkLgoKdjIgY29tcGF0aWJp
bGl0eSBpcyBvbmx5IG5lZWRlZCBmb3IgeDg2LiAgTm8gb3RoZXIgYXJjaGl0ZWN0dXJlcyBleGlz
dCB5ZXQsCmJ1dCB0aGV5IHdpbGwgaGF2ZSBhIG1pbmltdW0gb2YgdjMgd2hlbiBpbnRyb2R1Y2Vk
LgoKVGhlIHg4NiBIVk0gY29tcGF0aWJpbGl0eSBwb2ludCBiZWluZyBpbiBoYW5kbGVfcGFnZV9k
YXRhKCkgKHdoaWNoIGlzIGNvbW1vbgpjb2RlKSBpcyBhIGJpdCBhd2t3YXJkLiAgSG93ZXZlciwg
YXMgdGhlIHR3byBjb21wYXRpYmlsaXR5IHBvaW50cyBhcmUgc3VidGx5CmRpZmZlcmVudCwgYW5k
IGl0IGlzIChpbnRlbnRpb25hbGx5KSBub3QgcG9zc2libGUgdG8gY2FsbCBpbnRvIGFyY2ggc3Bl
Y2lmaWMKY29kZSBmcm9tIGNvbW1vbiBjb2RlIChleGNlcHQgdmlhIHRoZSBvcHMgaG9va3MpLCB1
c2Ugc29tZSAjaWZkZWYtYXJ5IGFuZApvcGVuY29kZSB0aGUgY2hlY2ssIHJhdGhlciB0aGFuIG1h
a2UgaGFuZGxlX3BhZ2VfZGF0YSgpIGEgcGVyLWFyY2ggaGVscGVyLgoKU2lnbmVkLW9mZi1ieTog
QW5kcmV3IENvb3BlciA8YW5kcmV3LmNvb3BlcjNAY2l0cml4LmNvbT4KLS0tCkNDOiBJYW4gSmFj
a3NvbiA8SWFuLkphY2tzb25AY2l0cml4LmNvbT4KQ0M6IFdlaSBMaXUgPHdsQHhlbi5vcmc+Cgp2
MjoKICogU3BsaXQvcmVhcnJhbmdlZCBmcm9tIHYxCiAqIFJld3JpdGUgdGhlIGNvbW1pdCBtZXNz
YWdlIHRvIGV4cGxhaW4gd2h5IGNvbXBhdGliaWxpdHkgaXMgZG9uZSB0aGlzIHdheS4KLS0tCiB0
b29scy9saWJ4Yy9pbmNsdWRlL3hlbmd1ZXN0LmggICAgIHwgIDIgKy0KIHRvb2xzL2xpYnhjL3hj
X3NyX2NvbW1vbi5oICAgICAgICAgfCAgNSArKysrLQogdG9vbHMvbGlieGMveGNfc3JfcmVzdG9y
ZS5jICAgICAgICB8IDI3ICsrKysrKysrKysrKysrKysrKysrKysrKysrLQogdG9vbHMvbGlieGMv
eGNfc3JfcmVzdG9yZV94ODZfcHYuYyB8IDE3ICsrKysrKysrKysrKysrKysrCiA0IGZpbGVzIGNo
YW5nZWQsIDQ4IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvdG9v
bHMvbGlieGMvaW5jbHVkZS94ZW5ndWVzdC5oIGIvdG9vbHMvbGlieGMvaW5jbHVkZS94ZW5ndWVz
dC5oCmluZGV4IGVmZDkwYjBkNDIuLmI0ZGY4ZDBmZmUgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhj
L2luY2x1ZGUveGVuZ3Vlc3QuaAorKysgYi90b29scy9saWJ4Yy9pbmNsdWRlL3hlbmd1ZXN0LmgK
QEAgLTEzOSw3ICsxMzksNyBAQCBpbnQgeGNfZG9tYWluX3NhdmUoeGNfaW50ZXJmYWNlICp4Y2gs
IGludCBpb19mZCwgdWludDMyX3QgZG9tLAogCiAvKiBjYWxsYmFja3MgcHJvdmlkZWQgYnkgeGNf
ZG9tYWluX3Jlc3RvcmUgKi8KIHN0cnVjdCByZXN0b3JlX2NhbGxiYWNrcyB7Ci0gICAgLyogQ2Fs
bGVkIG9uY2UgdGhlIFNUQVRJQ19EQVRBX0VORCByZWNvcmQgaGFzIGJlZW4gcmVjZWl2ZWQuICov
CisgICAgLyogQ2FsbGVkIG9uY2UgdGhlIFNUQVRJQ19EQVRBX0VORCByZWNvcmQgaGFzIGJlZW4g
cmVjZWl2ZWQvaW5mZXJyZWQuICovCiAgICAgaW50ICgqc3RhdGljX2RhdGFfZG9uZSkodm9pZCAq
ZGF0YSk7CiAKICAgICAvKiBDYWxsZWQgYWZ0ZXIgYSBuZXcgY2hlY2twb2ludCB0byBzdXNwZW5k
IHRoZSBndWVzdC4gKi8KZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhjL3hjX3NyX2NvbW1vbi5oIGIv
dG9vbHMvbGlieGMveGNfc3JfY29tbW9uLmgKaW5kZXggYWUwYWI3MGY3Ni4uNTFlM2QzZWUzYiAx
MDA2NDQKLS0tIGEvdG9vbHMvbGlieGMveGNfc3JfY29tbW9uLmgKKysrIGIvdG9vbHMvbGlieGMv
eGNfc3JfY29tbW9uLmgKQEAgLTI1Myw3ICsyNTMsNyBAQCBzdHJ1Y3QgeGNfc3JfY29udGV4dAog
ICAgICAgICAgICAgLyogQ3VycmVudGx5IGJ1ZmZlcmluZyByZWNvcmRzIGJldHdlZW4gYSBjaGVj
a3BvaW50ICovCiAgICAgICAgICAgICBib29sIGJ1ZmZlcl9hbGxfcmVjb3JkczsKIAotICAgICAg
ICAgICAgLyogV2hldGhlciBhIFNUQVRJQ19EQVRBX0VORCByZWNvcmQgaGFzIGJlZW4gc2Vlbi4g
Ki8KKyAgICAgICAgICAgIC8qIFdoZXRoZXIgYSBTVEFUSUNfREFUQV9FTkQgcmVjb3JkIGhhcyBi
ZWVuIHNlZW4vaW5mZXJyZWQuICovCiAgICAgICAgICAgICBib29sIHNlZW5fc3RhdGljX2RhdGFf
ZW5kOwogCiAvKgpAQCAtNDI4LDYgKzQyOCw5IEBAIGludCByZWFkX3JlY29yZChzdHJ1Y3QgeGNf
c3JfY29udGV4dCAqY3R4LCBpbnQgZmQsIHN0cnVjdCB4Y19zcl9yZWNvcmQgKnJlYyk7CiBpbnQg
cG9wdWxhdGVfcGZucyhzdHJ1Y3QgeGNfc3JfY29udGV4dCAqY3R4LCB1bnNpZ25lZCBpbnQgY291
bnQsCiAgICAgICAgICAgICAgICAgICBjb25zdCB4ZW5fcGZuX3QgKm9yaWdpbmFsX3BmbnMsIGNv
bnN0IHVpbnQzMl90ICp0eXBlcyk7CiAKKy8qIEhhbmRsZSBhIFNUQVRJQ19EQVRBX0VORCByZWNv
cmQuICovCitpbnQgaGFuZGxlX3N0YXRpY19kYXRhX2VuZChzdHJ1Y3QgeGNfc3JfY29udGV4dCAq
Y3R4KTsKKwogI2VuZGlmCiAvKgogICogTG9jYWwgdmFyaWFibGVzOgpkaWZmIC0tZ2l0IGEvdG9v
bHMvbGlieGMveGNfc3JfcmVzdG9yZS5jIGIvdG9vbHMvbGlieGMveGNfc3JfcmVzdG9yZS5jCmlu
ZGV4IDljOTI0Mzg3YWUuLmJiOTRjZDg3OWQgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhjL3hjX3Ny
X3Jlc3RvcmUuYworKysgYi90b29scy9saWJ4Yy94Y19zcl9yZXN0b3JlLmMKQEAgLTM0Miw2ICsz
NDIsMzEgQEAgc3RhdGljIGludCBoYW5kbGVfcGFnZV9kYXRhKHN0cnVjdCB4Y19zcl9jb250ZXh0
ICpjdHgsIHN0cnVjdCB4Y19zcl9yZWNvcmQgKnJlYykKICAgICB4ZW5fcGZuX3QgKnBmbnMgPSBO
VUxMLCBwZm47CiAgICAgdWludDMyX3QgKnR5cGVzID0gTlVMTCwgdHlwZTsKIAorICAgIC8qCisg
ICAgICogdjIgY29tcGF0aWJpbGl0eSBvbmx5IGV4aXN0cyBmb3IgeDg2IHN0cmVhbXMuICBUaGlz
IGlzIGEgYml0IG9mIGEKKyAgICAgKiBib2RnZSwgYnV0IGl0IGlzIGxlc3MgYmFkIHRoYW4gZHVw
bGljYXRpbmcgaGFuZGxlX3BhZ2VfZGF0YSgpIGJldHdlZW4KKyAgICAgKiBkaWZmZXJlbnQgYXJj
aGl0ZWN0dXJlcy4KKyAgICAgKi8KKyNpZiBkZWZpbmVkKF9faTM4Nl9fKSB8fCBkZWZpbmVkKF9f
eDg2XzY0X18pCisgICAgLyogdjIgY29tcGF0LiAgSW5mZXIgdGhlIHBvc2l0aW9uIG9mIFNUQVRJ
Q19EQVRBX0VORC4gKi8KKyAgICBpZiAoIGN0eC0+cmVzdG9yZS5mb3JtYXRfdmVyc2lvbiA8IDMg
JiYgIWN0eC0+cmVzdG9yZS5zZWVuX3N0YXRpY19kYXRhX2VuZCApCisgICAgeworICAgICAgICBy
YyA9IGhhbmRsZV9zdGF0aWNfZGF0YV9lbmQoY3R4KTsKKyAgICAgICAgaWYgKCByYyApCisgICAg
ICAgIHsKKyAgICAgICAgICAgIEVSUk9SKCJJbmZlcnJlZCBTVEFUSUNfREFUQV9FTkQgcmVjb3Jk
IGZhaWxlZCIpOworICAgICAgICAgICAgZ290byBlcnI7CisgICAgICAgIH0KKyAgICAgICAgcmMg
PSAtMTsKKyAgICB9CisKKyAgICBpZiAoICFjdHgtPnJlc3RvcmUuc2Vlbl9zdGF0aWNfZGF0YV9l
bmQgKQorICAgIHsKKyAgICAgICAgRVJST1IoIk5vIFNUQVRJQ19EQVRBX0VORCBzZWVuIik7Cisg
ICAgICAgIGdvdG8gZXJyOworICAgIH0KKyNlbmRpZgorCiAgICAgaWYgKCByZWMtPmxlbmd0aCA8
IHNpemVvZigqcGFnZXMpICkKICAgICB7CiAgICAgICAgIEVSUk9SKCJQQUdFX0RBVEEgcmVjb3Jk
IHRydW5jYXRlZDogbGVuZ3RoICV1LCBtaW4gJXp1IiwKQEAgLTYzMSw3ICs2NTYsNyBAQCBzdGF0
aWMgaW50IGJ1ZmZlcl9yZWNvcmQoc3RydWN0IHhjX3NyX2NvbnRleHQgKmN0eCwgc3RydWN0IHhj
X3NyX3JlY29yZCAqcmVjKQogICAgIHJldHVybiAwOwogfQogCi1zdGF0aWMgaW50IGhhbmRsZV9z
dGF0aWNfZGF0YV9lbmQoc3RydWN0IHhjX3NyX2NvbnRleHQgKmN0eCkKK2ludCBoYW5kbGVfc3Rh
dGljX2RhdGFfZW5kKHN0cnVjdCB4Y19zcl9jb250ZXh0ICpjdHgpCiB7CiAgICAgeGNfaW50ZXJm
YWNlICp4Y2ggPSBjdHgtPnhjaDsKICAgICBpbnQgcmMgPSAwOwpkaWZmIC0tZ2l0IGEvdG9vbHMv
bGlieGMveGNfc3JfcmVzdG9yZV94ODZfcHYuYyBiL3Rvb2xzL2xpYnhjL3hjX3NyX3Jlc3RvcmVf
eDg2X3B2LmMKaW5kZXggMTZlNzM4ODg0ZS4uMzc1NjIyNWJlNiAxMDA2NDQKLS0tIGEvdG9vbHMv
bGlieGMveGNfc3JfcmVzdG9yZV94ODZfcHYuYworKysgYi90b29scy9saWJ4Yy94Y19zcl9yZXN0
b3JlX3g4Nl9wdi5jCkBAIC02NzksNiArNjc5LDIzIEBAIHN0YXRpYyBpbnQgaGFuZGxlX3g4Nl9w
dl9wMm1fZnJhbWVzKHN0cnVjdCB4Y19zcl9jb250ZXh0ICpjdHgsCiAgICAgdW5zaWduZWQgaW50
IHN0YXJ0LCBlbmQsIHgsIGZwcCA9IFBBR0VfU0laRSAvIGN0eC0+eDg2LnB2LndpZHRoOwogICAg
IGludCByYzsKIAorICAgIC8qIHYyIGNvbXBhdC4gIEluZmVyIHRoZSBwb3NpdGlvbiBvZiBTVEFU
SUNfREFUQV9FTkQuICovCisgICAgaWYgKCBjdHgtPnJlc3RvcmUuZm9ybWF0X3ZlcnNpb24gPCAz
ICYmICFjdHgtPnJlc3RvcmUuc2Vlbl9zdGF0aWNfZGF0YV9lbmQgKQorICAgIHsKKyAgICAgICAg
cmMgPSBoYW5kbGVfc3RhdGljX2RhdGFfZW5kKGN0eCk7CisgICAgICAgIGlmICggcmMgKQorICAg
ICAgICB7CisgICAgICAgICAgICBFUlJPUigiSW5mZXJyZWQgU1RBVElDX0RBVEFfRU5EIHJlY29y
ZCBmYWlsZWQiKTsKKyAgICAgICAgICAgIHJldHVybiByYzsKKyAgICAgICAgfQorICAgIH0KKwor
ICAgIGlmICggIWN0eC0+cmVzdG9yZS5zZWVuX3N0YXRpY19kYXRhX2VuZCApCisgICAgeworICAg
ICAgICBFUlJPUigiTm8gU1RBVElDX0RBVEFfRU5EIHNlZW4iKTsKKyAgICAgICAgcmV0dXJuIC0x
OworICAgIH0KKwogICAgIGlmICggIWN0eC0+eDg2LnB2LnJlc3RvcmUuc2Vlbl9wdl9pbmZvICkK
ICAgICB7CiAgICAgICAgIEVSUk9SKCJOb3QgeWV0IHJlY2VpdmVkIFg4Nl9QVl9JTkZPIHJlY29y
ZCIpOwotLSAKMi4xMS4wCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVj
dC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1k
ZXZlbA==

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id D15D6144B4
	for <lists+xen-devel@lfdr.de>; Mon,  6 May 2019 08:59:27 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hNXYd-0001yI-Gj; Mon, 06 May 2019 06:57:03 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=XZcu=TG=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1hNXYb-0001wq-Nd
 for xen-devel@lists.xenproject.org; Mon, 06 May 2019 06:57:01 +0000
X-Inumbo-ID: 20443224-6fcc-11e9-a7f1-eb0466932004
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 20443224-6fcc-11e9-a7f1-eb0466932004;
 Mon, 06 May 2019 06:56:52 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 09644AEAE;
 Mon,  6 May 2019 06:56:50 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Mon,  6 May 2019 08:56:05 +0200
Message-Id: <20190506065644.7415-7-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190506065644.7415-1-jgross@suse.com>
References: <20190506065644.7415-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH RFC V2 06/45] xen/sched: introduce struct
 sched_resource
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Tim Deegan <tim@xen.org>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wei.liu2@citrix.com>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Dario Faggioli <dfaggioli@suse.com>,
 Julien Grall <julien.grall@arm.com>, Meng Xu <mengxu@cis.upenn.edu>,
 Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

QWRkIGEgc2NoZWR1bGluZyBhYnN0cmFjdGlvbiBsYXllciBiZXR3ZWVuIHBoeXNpY2FsIHByb2Nl
c3NvcnMgYW5kIHRoZQpzY2hlZHVsZXJzIGJ5IGludHJvZHVjaW5nIGEgc3RydWN0IHNjaGVkX3Jl
c291cmNlLiBFYWNoIHNjaGVkdWxlciBpdGVtCnJ1bm5pbmcgaXMgYWN0aXZlIG9uIHN1Y2ggYSBz
Y2hlZHVsZXIgcmVzb3VyY2UuIEZvciB0aGUgdGltZSBiZWluZwp0aGVyZSBpcyBvbmUgc3RydWN0
IHNjaGVkX3Jlc291cmNlIHBlciBjcHUsIGJ1dCBpbiBmdXR1cmUgdGhlcmUgbWlnaHQKYmUgb25l
IGZvciBlYWNoIGNvcmUgb3Igc29ja2V0IG9ubHkuCgpTaWduZWQtb2ZmLWJ5OiBKdWVyZ2VuIEdy
b3NzIDxqZ3Jvc3NAc3VzZS5jb20+Ci0tLQogeGVuL2NvbW1vbi9zY2hlZF9jcmVkaXQuYyAgfCAg
MiArKwogeGVuL2NvbW1vbi9zY2hlZF9jcmVkaXQyLmMgfCAgNyArKysrKysrCiB4ZW4vY29tbW9u
L3NjaGVkX251bGwuYyAgICB8ICAzICsrKwogeGVuL2NvbW1vbi9zY2hlZF9ydC5jICAgICAgfCAg
MiArKwogeGVuL2NvbW1vbi9zY2hlZHVsZS5jICAgICAgfCAxNSArKysrKysrKysrKysrKysKIHhl
bi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oIHwgIDggKysrKysrKysKIHhlbi9pbmNsdWRlL3hlbi9z
Y2hlZC5oICAgIHwgIDMgKysrCiA3IGZpbGVzIGNoYW5nZWQsIDQwIGluc2VydGlvbnMoKykKCmRp
ZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdC5jIGIveGVuL2NvbW1vbi9zY2hlZF9j
cmVkaXQuYwppbmRleCBjYjhlMTY3ZmM5Li5mYzA2OGExYzVmIDEwMDY0NAotLS0gYS94ZW4vY29t
bW9uL3NjaGVkX2NyZWRpdC5jCisrKyBiL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0LmMKQEAgLTEw
NDAsNiArMTA0MCw3IEBAIGNzY2hlZF9pdGVtX2luc2VydChjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVy
ICpvcHMsIHN0cnVjdCBzY2hlZF9pdGVtICppdGVtKQogICAgIGxvY2sgPSB2Y3B1X3NjaGVkdWxl
X2xvY2tfaXJxKHZjKTsKIAogICAgIHZjLT5wcm9jZXNzb3IgPSBjc2NoZWRfY3B1X3BpY2sob3Bz
LCBpdGVtKTsKKyAgICBpdGVtLT5yZXMgPSBwZXJfY3B1KHNjaGVkX3JlcywgdmMtPnByb2Nlc3Nv
cik7CiAKICAgICBzcGluX3VubG9ja19pcnEobG9jayk7CiAKQEAgLTE2NzUsNiArMTY3Niw3IEBA
IGNzY2hlZF9ydW5xX3N0ZWFsKGludCBwZWVyX2NwdSwgaW50IGNwdSwgaW50IHByaSwgaW50IGJh
bGFuY2Vfc3RlcCkKICAgICAgICAgICAgIFdBUk5fT04odmMtPmlzX3VyZ2VudCk7CiAgICAgICAg
ICAgICBydW5xX3JlbW92ZShzcGVlcik7CiAgICAgICAgICAgICB2Yy0+cHJvY2Vzc29yID0gY3B1
OworICAgICAgICAgICAgdmMtPnNjaGVkX2l0ZW0tPnJlcyA9IHBlcl9jcHUoc2NoZWRfcmVzLCBj
cHUpOwogICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAqIHNwZWVyIHdpbGwgc3RhcnQgZXhl
Y3V0aW5nIGRpcmVjdGx5IG9uIGNwdSwgd2l0aG91dCBoYXZpbmcgdG8KICAgICAgICAgICAgICAq
IGdvIHRocm91Z2ggcnVucV9pbnNlcnQoKS4gU28gd2UgbXVzdCB1cGRhdGUgdGhlIHJ1bm5hYmxl
IGNvdW50CmRpZmYgLS1naXQgYS94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdDIuYyBiL3hlbi9jb21t
b24vc2NoZWRfY3JlZGl0Mi5jCmluZGV4IDljMDUyYzI0YTcuLjYxNGQ3MWQ5NDggMTAwNjQ0Ci0t
LSBhL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0Mi5jCisrKyBiL3hlbi9jb21tb24vc2NoZWRfY3Jl
ZGl0Mi5jCkBAIC0yNTE5LDYgKzI1MTksNyBAQCBzdGF0aWMgdm9pZCBtaWdyYXRlKGNvbnN0IHN0
cnVjdCBzY2hlZHVsZXIgKm9wcywKICAgICAgICAgICAgICAgICAgICAgJnRycWQtPmFjdGl2ZSk7
CiAgICAgICAgIHN2Yy0+dmNwdS0+cHJvY2Vzc29yID0gY3B1bWFza19jeWNsZSh0cnFkLT5waWNr
X2JpYXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHVt
YXNrX3NjcmF0Y2hfY3B1KGNwdSkpOworICAgICAgICBzdmMtPnZjcHUtPnNjaGVkX2l0ZW0tPnJl
cyA9IHBlcl9jcHUoc2NoZWRfcmVzLCBzdmMtPnZjcHUtPnByb2Nlc3Nvcik7CiAgICAgICAgIHRy
cWQtPnBpY2tfYmlhcyA9IHN2Yy0+dmNwdS0+cHJvY2Vzc29yOwogICAgICAgICBBU1NFUlQoc3Zj
LT52Y3B1LT5wcm9jZXNzb3IgPCBucl9jcHVfaWRzKTsKIApAQCAtMjc3NCw2ICsyNzc1LDcgQEAg
Y3NjaGVkMl9pdGVtX21pZ3JhdGUoCiAgICAgICAgIH0KICAgICAgICAgX3J1bnFfZGVhc3NpZ24o
c3ZjKTsKICAgICAgICAgdmMtPnByb2Nlc3NvciA9IG5ld19jcHU7CisgICAgICAgIGl0ZW0tPnJl
cyA9IHBlcl9jcHUoc2NoZWRfcmVzLCBuZXdfY3B1KTsKICAgICAgICAgcmV0dXJuOwogICAgIH0K
IApAQCAtMjc5NCw3ICsyNzk2LDEwIEBAIGNzY2hlZDJfaXRlbV9taWdyYXRlKAogICAgIGlmICgg
dHJxZCAhPSBzdmMtPnJxZCApCiAgICAgICAgIG1pZ3JhdGUob3BzLCBzdmMsIHRycWQsIG5vdyk7
CiAgICAgZWxzZQorICAgIHsKICAgICAgICAgdmMtPnByb2Nlc3NvciA9IG5ld19jcHU7CisgICAg
ICAgIGl0ZW0tPnJlcyA9IHBlcl9jcHUoc2NoZWRfcmVzLCBuZXdfY3B1KTsKKyAgICB9CiB9CiAK
IHN0YXRpYyBpbnQKQEAgLTMxMTksNiArMzEyNCw3IEBAIGNzY2hlZDJfaXRlbV9pbnNlcnQoY29u
c3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzdHJ1Y3Qgc2NoZWRfaXRlbSAqaXRlbSkKICAgICBs
b2NrID0gdmNwdV9zY2hlZHVsZV9sb2NrX2lycSh2Yyk7CiAKICAgICB2Yy0+cHJvY2Vzc29yID0g
Y3NjaGVkMl9jcHVfcGljayhvcHMsIGl0ZW0pOworICAgIGl0ZW0tPnJlcyA9IHBlcl9jcHUoc2No
ZWRfcmVzLCB2Yy0+cHJvY2Vzc29yKTsKIAogICAgIHNwaW5fdW5sb2NrX2lycShsb2NrKTsKIApA
QCAtMzU5Niw2ICszNjAyLDcgQEAgY3NjaGVkMl9zY2hlZHVsZSgKICAgICAgICAgewogICAgICAg
ICAgICAgc25leHQtPmNyZWRpdCArPSBDU0NIRUQyX01JR1JBVEVfQ09NUEVOU0FUSU9OOwogICAg
ICAgICAgICAgc25leHQtPnZjcHUtPnByb2Nlc3NvciA9IGNwdTsKKyAgICAgICAgICAgIHNuZXh0
LT52Y3B1LT5zY2hlZF9pdGVtLT5yZXMgPSBwZXJfY3B1KHNjaGVkX3JlcywgY3B1KTsKICAgICAg
ICAgICAgIFNDSEVEX1NUQVRfQ1JBTksobWlncmF0ZWQpOwogICAgICAgICAgICAgcmV0Lm1pZ3Jh
dGVkID0gMTsKICAgICAgICAgfQpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZF9udWxsLmMg
Yi94ZW4vY29tbW9uL3NjaGVkX251bGwuYwppbmRleCBlYjUxZGRiY2NiLi4xMTRiMzJlMmUxIDEw
MDY0NAotLS0gYS94ZW4vY29tbW9uL3NjaGVkX251bGwuYworKysgYi94ZW4vY29tbW9uL3NjaGVk
X251bGwuYwpAQCAtMzQzLDYgKzM0Myw3IEBAIHN0YXRpYyB2b2lkIHZjcHVfYXNzaWduKHN0cnVj
dCBudWxsX3ByaXZhdGUgKnBydiwgc3RydWN0IHZjcHUgKnYsCiB7CiAgICAgcGVyX2NwdShucGMs
IGNwdSkudmNwdSA9IHY7CiAgICAgdi0+cHJvY2Vzc29yID0gY3B1OworICAgIHYtPnNjaGVkX2l0
ZW0tPnJlcyA9IHBlcl9jcHUoc2NoZWRfcmVzLCBjcHUpOwogICAgIGNwdW1hc2tfY2xlYXJfY3B1
KGNwdSwgJnBydi0+Y3B1c19mcmVlKTsKIAogICAgIGRwcmludGsoWEVOTE9HX0dfSU5GTywgIiVk
IDwtLSAlcHZcbiIsIGNwdSwgdik7CkBAIC00MjksNiArNDMwLDcgQEAgc3RhdGljIHZvaWQgbnVs
bF9pdGVtX2luc2VydChjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsCiAgcmV0cnk6CiAKICAg
ICBjcHUgPSB2LT5wcm9jZXNzb3IgPSBwaWNrX2NwdShwcnYsIHYpOworICAgIGl0ZW0tPnJlcyA9
IHBlcl9jcHUoc2NoZWRfcmVzLCBjcHUpOwogCiAgICAgc3Bpbl91bmxvY2sobG9jayk7CiAKQEAg
LTY3NSw2ICs2NzcsNyBAQCBzdGF0aWMgdm9pZCBudWxsX2l0ZW1fbWlncmF0ZShjb25zdCBzdHJ1
Y3Qgc2NoZWR1bGVyICpvcHMsCiAgICAgICogYnkgdGhpcywgd2lsbCBiZSBmaXhlZC11cCBkdXJp
bmcgcmVzdW1lLgogICAgICAqLwogICAgIHYtPnByb2Nlc3NvciA9IG5ld19jcHU7CisgICAgaXRl
bS0+cmVzID0gcGVyX2NwdShzY2hlZF9yZXMsIG5ld19jcHUpOwogfQogCiAjaWZuZGVmIE5ERUJV
RwpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZF9ydC5jIGIveGVuL2NvbW1vbi9zY2hlZF9y
dC5jCmluZGV4IGM4MzBhYWM5MmYuLjQ0Yjg2ZmMwOGQgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24v
c2NoZWRfcnQuYworKysgYi94ZW4vY29tbW9uL3NjaGVkX3J0LmMKQEAgLTkwMiw2ICs5MDIsNyBA
QCBydF9pdGVtX2luc2VydChjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIHN0cnVjdCBzY2hl
ZF9pdGVtICppdGVtKQogCiAgICAgLyogVGhpcyBpcyBzYWZlIGJlY2F1c2UgdmMgaXNuJ3QgeWV0
IGJlaW5nIHNjaGVkdWxlZCAqLwogICAgIHZjLT5wcm9jZXNzb3IgPSBydF9jcHVfcGljayhvcHMs
IGl0ZW0pOworICAgIGl0ZW0tPnJlcyA9IHBlcl9jcHUoc2NoZWRfcmVzLCB2Yy0+cHJvY2Vzc29y
KTsKIAogICAgIGxvY2sgPSB2Y3B1X3NjaGVkdWxlX2xvY2tfaXJxKHZjKTsKIApAQCAtMTEzMiw2
ICsxMTMzLDcgQEAgcnRfc2NoZWR1bGUoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzX3Rp
bWVfdCBub3csIGJvb2xfdCB0YXNrbGV0X3dvcmtfc2NoZWQKICAgICAgICAgaWYgKCBzbmV4dC0+
dmNwdS0+cHJvY2Vzc29yICE9IGNwdSApCiAgICAgICAgIHsKICAgICAgICAgICAgIHNuZXh0LT52
Y3B1LT5wcm9jZXNzb3IgPSBjcHU7CisgICAgICAgICAgICBzbmV4dC0+dmNwdS0+c2NoZWRfaXRl
bS0+cmVzID0gcGVyX2NwdShzY2hlZF9yZXMsIGNwdSk7CiAgICAgICAgICAgICByZXQubWlncmF0
ZWQgPSAxOwogICAgICAgICB9CiAgICAgICAgIHJldC50aW1lID0gc25leHQtPmN1cl9idWRnZXQ7
IC8qIGludm9rZSB0aGUgc2NoZWR1bGVyIG5leHQgdGltZSAqLwpkaWZmIC0tZ2l0IGEveGVuL2Nv
bW1vbi9zY2hlZHVsZS5jIGIveGVuL2NvbW1vbi9zY2hlZHVsZS5jCmluZGV4IDJkNzE5YTZhY2Mu
LmUzZDlhYjVhM2EgMTAwNjQ0Ci0tLSBhL3hlbi9jb21tb24vc2NoZWR1bGUuYworKysgYi94ZW4v
Y29tbW9uL3NjaGVkdWxlLmMKQEAgLTYzLDYgKzYzLDcgQEAgc3RhdGljIHZvaWQgcG9sbF90aW1l
cl9mbih2b2lkICpkYXRhKTsKIC8qIFRoaXMgaXMgZ2xvYmFsIGZvciBub3cgc28gdGhhdCBwcml2
YXRlIGltcGxlbWVudGF0aW9ucyBjYW4gcmVhY2ggaXQgKi8KIERFRklORV9QRVJfQ1BVKHN0cnVj
dCBzY2hlZHVsZV9kYXRhLCBzY2hlZHVsZV9kYXRhKTsKIERFRklORV9QRVJfQ1BVKHN0cnVjdCBz
Y2hlZHVsZXIgKiwgc2NoZWR1bGVyKTsKK0RFRklORV9QRVJfQ1BVKHN0cnVjdCBzY2hlZF9yZXNv
dXJjZSAqLCBzY2hlZF9yZXMpOwogCiAvKiBTY3JhdGNoIHNwYWNlIGZvciBjcHVtYXNrcy4gKi8K
IERFRklORV9QRVJfQ1BVKGNwdW1hc2tfdCwgY3B1bWFza19zY3JhdGNoKTsKQEAgLTMwNSw2ICsz
MDYsNyBAQCBpbnQgc2NoZWRfaW5pdF92Y3B1KHN0cnVjdCB2Y3B1ICp2LCB1bnNpZ25lZCBpbnQg
cHJvY2Vzc29yKQogICAgIGlmICggKGl0ZW0gPSBzY2hlZF9hbGxvY19pdGVtKHYpKSA9PSBOVUxM
ICkKICAgICAgICAgcmV0dXJuIDE7CiAKKyAgICBpdGVtLT5yZXMgPSBwZXJfY3B1KHNjaGVkX3Jl
cywgcHJvY2Vzc29yKTsKICAgICAvKiBJbml0aWFsaXNlIHRoZSBwZXItdmNwdSB0aW1lcnMuICov
CiAgICAgaW5pdF90aW1lcigmdi0+cGVyaW9kaWNfdGltZXIsIHZjcHVfcGVyaW9kaWNfdGltZXJf
Zm4sCiAgICAgICAgICAgICAgICB2LCB2LT5wcm9jZXNzb3IpOwpAQCAtNDE5LDYgKzQyMSw3IEBA
IGludCBzY2hlZF9tb3ZlX2RvbWFpbihzdHJ1Y3QgZG9tYWluICpkLCBzdHJ1Y3QgY3B1cG9vbCAq
YykKICAgICAgICAgc2NoZWRfc2V0X2FmZmluaXR5KHYsICZjcHVtYXNrX2FsbCwgJmNwdW1hc2tf
YWxsKTsKIAogICAgICAgICB2LT5wcm9jZXNzb3IgPSBuZXdfcDsKKwl2LT5zY2hlZF9pdGVtLT5y
ZXMgPSBwZXJfY3B1KHNjaGVkX3JlcywgbmV3X3ApOwogICAgICAgICAvKgogICAgICAgICAgKiBX
aXRoIHYtPnByb2Nlc3NvciBtb2RpZmllZCB3ZSBtdXN0IG5vdAogICAgICAgICAgKiAtIG1ha2Ug
YW55IGZ1cnRoZXIgY2hhbmdlcyBhc3N1bWluZyB3ZSBob2xkIHRoZSBzY2hlZHVsZXIgbG9jaywK
QEAgLTc4Nyw5ICs3OTAsMTEgQEAgdm9pZCByZXN0b3JlX3ZjcHVfYWZmaW5pdHkoc3RydWN0IGRv
bWFpbiAqZCkKICAgICAgICAgfQogCiAgICAgICAgIHYtPnByb2Nlc3NvciA9IGNwdW1hc2tfYW55
KGNwdW1hc2tfc2NyYXRjaF9jcHUoY3B1KSk7CisgICAgICAgIHYtPnNjaGVkX2l0ZW0tPnJlcyA9
IHBlcl9jcHUoc2NoZWRfcmVzLCB2LT5wcm9jZXNzb3IpOwogCiAgICAgICAgIGxvY2sgPSB2Y3B1
X3NjaGVkdWxlX2xvY2tfaXJxKHYpOwogICAgICAgICB2LT5wcm9jZXNzb3IgPSBzY2hlZF9waWNr
X2NwdSh2Y3B1X3NjaGVkdWxlcih2KSwgdi0+c2NoZWRfaXRlbSk7CisgICAgICAgIHYtPnNjaGVk
X2l0ZW0tPnJlcyA9IHBlcl9jcHUoc2NoZWRfcmVzLCB2LT5wcm9jZXNzb3IpOwogICAgICAgICBz
cGluX3VubG9ja19pcnEobG9jayk7CiAKICAgICAgICAgaWYgKCBvbGRfY3B1ICE9IHYtPnByb2Nl
c3NvciApCkBAIC0xNjE4LDYgKzE2MjMsMTMgQEAgc3RhdGljIGludCBjcHVfc2NoZWR1bGVfdXAo
dW5zaWduZWQgaW50IGNwdSkKIHsKICAgICBzdHJ1Y3Qgc2NoZWR1bGVfZGF0YSAqc2QgPSAmcGVy
X2NwdShzY2hlZHVsZV9kYXRhLCBjcHUpOwogICAgIHZvaWQgKnNjaGVkX3ByaXY7CisgICAgc3Ry
dWN0IHNjaGVkX3Jlc291cmNlICpyZXM7CisKKyAgICByZXMgPSB4emFsbG9jKHN0cnVjdCBzY2hl
ZF9yZXNvdXJjZSk7CisgICAgaWYgKCByZXMgPT0gTlVMTCApCisgICAgICAgIHJldHVybiAtRU5P
TUVNOworICAgIHJlcy0+cHJvY2Vzc29yID0gY3B1OworICAgIHBlcl9jcHUoc2NoZWRfcmVzLCBj
cHUpID0gcmVzOwogCiAgICAgcGVyX2NwdShzY2hlZHVsZXIsIGNwdSkgPSAmb3BzOwogICAgIHNw
aW5fbG9ja19pbml0KCZzZC0+X2xvY2spOwpAQCAtMTY4Miw2ICsxNjk0LDkgQEAgc3RhdGljIHZv
aWQgY3B1X3NjaGVkdWxlX2Rvd24odW5zaWduZWQgaW50IGNwdSkKICAgICBzZC0+c2NoZWRfcHJp
diA9IE5VTEw7CiAKICAgICBraWxsX3RpbWVyKCZzZC0+c190aW1lcik7CisKKyAgICB4ZnJlZShw
ZXJfY3B1KHNjaGVkX3JlcywgY3B1KSk7CisgICAgcGVyX2NwdShzY2hlZF9yZXMsIGNwdSkgPSBO
VUxMOwogfQogCiBzdGF0aWMgaW50IGNwdV9zY2hlZHVsZV9jYWxsYmFjaygKZGlmZiAtLWdpdCBh
L3hlbi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oIGIveGVuL2luY2x1ZGUveGVuL3NjaGVkLWlmLmgK
aW5kZXggYjRhOTNiYjc2Yi4uMTA1NzBjOWY2ZSAxMDA2NDQKLS0tIGEveGVuL2luY2x1ZGUveGVu
L3NjaGVkLWlmLmgKKysrIGIveGVuL2luY2x1ZGUveGVuL3NjaGVkLWlmLmgKQEAgLTQ0LDkgKzQ0
LDE0IEBAIHN0cnVjdCBzY2hlZHVsZV9kYXRhIHsKIAogI2RlZmluZSBjdXJyX29uX2NwdShjKSAg
ICAocGVyX2NwdShzY2hlZHVsZV9kYXRhLCBjKS5jdXJyKQogCitzdHJ1Y3Qgc2NoZWRfcmVzb3Vy
Y2UgeworICAgIHVuc2lnbmVkICAgICBwcm9jZXNzb3I7Cit9OworCiBERUNMQVJFX1BFUl9DUFUo
c3RydWN0IHNjaGVkdWxlX2RhdGEsIHNjaGVkdWxlX2RhdGEpOwogREVDTEFSRV9QRVJfQ1BVKHN0
cnVjdCBzY2hlZHVsZXIgKiwgc2NoZWR1bGVyKTsKIERFQ0xBUkVfUEVSX0NQVShzdHJ1Y3QgY3B1
cG9vbCAqLCBjcHVwb29sKTsKK0RFQ0xBUkVfUEVSX0NQVShzdHJ1Y3Qgc2NoZWRfcmVzb3VyY2Ug
Kiwgc2NoZWRfcmVzKTsKIAogLyoKICAqIFNjcmF0Y2ggc3BhY2UsIGZvciBhdm9pZGluZyBoYXZp
bmcgdG9vIG1hbnkgY3B1bWFza190IG9uIHRoZSBzdGFjay4KQEAgLTM2Miw3ICszNjcsMTAgQEAg
c3RhdGljIGlubGluZSB2b2lkIHNjaGVkX21pZ3JhdGUoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAq
cywKICAgICBpZiAoIHMtPm1pZ3JhdGUgKQogICAgICAgICBzLT5taWdyYXRlKHMsIGl0ZW0sIGNw
dSk7CiAgICAgZWxzZQorICAgIHsKICAgICAgICAgaXRlbS0+dmNwdS0+cHJvY2Vzc29yID0gY3B1
OworICAgICAgICBpdGVtLT5yZXMgPSBwZXJfY3B1KHNjaGVkX3JlcywgY3B1KTsKKyAgICB9CiB9
CiAKIHN0YXRpYyBpbmxpbmUgaW50IHNjaGVkX3BpY2tfY3B1KGNvbnN0IHN0cnVjdCBzY2hlZHVs
ZXIgKnMsCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS94ZW4vc2NoZWQuaCBiL3hlbi9pbmNsdWRl
L3hlbi9zY2hlZC5oCmluZGV4IGJkNjQ4OWEzM2QuLmFhNGZmMjVmNzYgMTAwNjQ0Ci0tLSBhL3hl
bi9pbmNsdWRlL3hlbi9zY2hlZC5oCisrKyBiL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC5oCkBAIC0y
NzYsMTAgKzI3NiwxMyBAQCBzdHJ1Y3QgdmNwdQogICAgIHN0cnVjdCBhcmNoX3ZjcHUgYXJjaDsK
IH07CiAKK3N0cnVjdCBzY2hlZF9yZXNvdXJjZTsKKwogc3RydWN0IHNjaGVkX2l0ZW0gewogICAg
IHN0cnVjdCB2Y3B1ICAgICAgICAgICAqdmNwdTsKICAgICB2b2lkICAgICAgICAgICAgICAgICAg
KnByaXY7ICAgICAgLyogc2NoZWR1bGVyIHByaXZhdGUgZGF0YSAqLwogICAgIHN0cnVjdCBzY2hl
ZF9pdGVtICAgICAqbmV4dF9pbl9saXN0OworICAgIHN0cnVjdCBzY2hlZF9yZXNvdXJjZSAqcmVz
OwogfTsKIAogI2RlZmluZSBmb3JfZWFjaF9zY2hlZF9pdGVtKGQsIGUpICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBcCi0tIAoyLjE2LjQKCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhl
bi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2plY3Qub3Jn
L21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

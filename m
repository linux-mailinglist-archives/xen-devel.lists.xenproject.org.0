Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 2FFE81629D5
	for <lists+xen-devel@lfdr.de>; Tue, 18 Feb 2020 16:51:21 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j455j-0000dJ-Th; Tue, 18 Feb 2020 15:47:19 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=LnEJ=4G=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1j455i-0000cv-28
 for xen-devel@lists.xenproject.org; Tue, 18 Feb 2020 15:47:18 +0000
X-Inumbo-ID: f07bff22-5265-11ea-ade5-bc764e2007e4
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id f07bff22-5265-11ea-ade5-bc764e2007e4;
 Tue, 18 Feb 2020 15:47:17 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id C13E1AE2A;
 Tue, 18 Feb 2020 15:47:15 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org, x86@kernel.org,
 linux-kernel@vger.kernel.org, virtualization@lists.linux-foundation.org
Date: Tue, 18 Feb 2020 16:47:12 +0100
Message-Id: <20200218154712.25490-1-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
Subject: [Xen-devel] [PATCH] x86/ioperm: add new paravirt function
 update_io_bitmap
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Thomas Hellstrom <thellstrom@vmware.com>,
 Stefano Stabellini <sstabellini@kernel.org>, "VMware,
 Inc." <pv-drivers@vmware.com>, stable@vger.kernel.org,
 Ingo Molnar <mingo@redhat.com>, Borislav Petkov <bp@alien8.de>,
 "H. Peter Anvin" <hpa@zytor.com>, Thomas Gleixner <tglx@linutronix.de>,
 Boris Ostrovsky <boris.ostrovsky@oracle.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

Q29tbWl0IDExMWU3YjE1Y2YxMGY2ICgieDg2L2lvcGVybTogRXh0ZW5kIElPUEwgY29uZmlnIHRv
IGNvbnRyb2wKaW9wZXJtKCkgYXMgd2VsbCIpIHJld29ya2VkIHRoZSBpb3BsIHN5c2NhbGwgdG8g
dXNlIEkvTyBiaXRtYXBzLgoKVW5mb3J0dW5hdGVseSB0aGlzIGJyb2tlIFhlbiBQViBkb21haW5z
IHVzaW5nIHRoYXQgc3lzY2FsbCBhcyB0aGVyZQppcyBjdXJyZW50bHkgbm8gSS9PIGJpdG1hcCBz
dXBwb3J0IGluIFBWIGRvbWFpbnMuCgpBZGQgSS9PIGJpdG1hcCBzdXBwb3J0IHZpYSBhIG5ldyBw
YXJhdmlydCBmdW5jdGlvbiB1cGRhdGVfaW9fYml0bWFwCndoaWNoIFhlbiBQViBkb21haW5zIGNh
biB1c2UgdG8gdXBkYXRlIHRoZWlyIEkvTyBiaXRtYXBzIHZpYSBhCmh5cGVyY2FsbC4KCkZpeGVz
OiAxMTFlN2IxNWNmMTBmNiAoIng4Ni9pb3Blcm06IEV4dGVuZCBJT1BMIGNvbmZpZyB0byBjb250
cm9sIGlvcGVybSgpIGFzIHdlbGwiKQpSZXBvcnRlZC1ieTogSmFuIEJldWxpY2ggPGpiZXVsaWNo
QHN1c2UuY29tPgpDYzogPHN0YWJsZUB2Z2VyLmtlcm5lbC5vcmc+ICMgNS41ClNpZ25lZC1vZmYt
Ynk6IEp1ZXJnZW4gR3Jvc3MgPGpncm9zc0BzdXNlLmNvbT4KUmV2aWV3ZWQtYnk6IEphbiBCZXVs
aWNoIDxqYmV1bGljaEBzdXNlLmNvbT4KVGVzdGVkLWJ5OiBKYW4gQmV1bGljaCA8amJldWxpY2hA
c3VzZS5jb20+Ci0tLQogYXJjaC94ODYvaW5jbHVkZS9hc20vaW9fYml0bWFwLmggICAgICB8ICA5
ICsrKysrKysrLQogYXJjaC94ODYvaW5jbHVkZS9hc20vcGFyYXZpcnQuaCAgICAgICB8ICA3ICsr
KysrKysKIGFyY2gveDg2L2luY2x1ZGUvYXNtL3BhcmF2aXJ0X3R5cGVzLmggfCAgNCArKysrCiBh
cmNoL3g4Ni9rZXJuZWwvcGFyYXZpcnQuYyAgICAgICAgICAgIHwgIDUgKysrKysKIGFyY2gveDg2
L2tlcm5lbC9wcm9jZXNzLmMgICAgICAgICAgICAgfCAgMiArLQogYXJjaC94ODYveGVuL2VubGln
aHRlbl9wdi5jICAgICAgICAgICB8IDI1ICsrKysrKysrKysrKysrKysrKysrKysrKysKIDYgZmls
ZXMgY2hhbmdlZCwgNTAgaW5zZXJ0aW9ucygrKSwgMiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9pb19iaXRtYXAuaCBiL2FyY2gveDg2L2luY2x1ZGUvYXNt
L2lvX2JpdG1hcC5oCmluZGV4IDAyYzZlZjhmNzY2Ny4uMDczNDRkODJlODhlIDEwMDY0NAotLS0g
YS9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9pb19iaXRtYXAuaAorKysgYi9hcmNoL3g4Ni9pbmNsdWRl
L2FzbS9pb19iaXRtYXAuaApAQCAtMTksNyArMTksMTQgQEAgc3RydWN0IHRhc2tfc3RydWN0Owog
dm9pZCBpb19iaXRtYXBfc2hhcmUoc3RydWN0IHRhc2tfc3RydWN0ICp0c2spOwogdm9pZCBpb19i
aXRtYXBfZXhpdCh2b2lkKTsKIAotdm9pZCB0c3NfdXBkYXRlX2lvX2JpdG1hcCh2b2lkKTsKK3Zv
aWQgbmF0aXZlX3Rzc191cGRhdGVfaW9fYml0bWFwKHZvaWQpOworCisjaWZkZWYgQ09ORklHX1BB
UkFWSVJUX1hYTAorI2luY2x1ZGUgPGFzbS9wYXJhdmlydC5oPgorI2Vsc2UKKyNkZWZpbmUgdHNz
X3VwZGF0ZV9pb19iaXRtYXAgbmF0aXZlX3Rzc191cGRhdGVfaW9fYml0bWFwCisjZW5kaWYKKwog
I2Vsc2UKIHN0YXRpYyBpbmxpbmUgdm9pZCBpb19iaXRtYXBfc2hhcmUoc3RydWN0IHRhc2tfc3Ry
dWN0ICp0c2spIHsgfQogc3RhdGljIGlubGluZSB2b2lkIGlvX2JpdG1hcF9leGl0KHZvaWQpIHsg
fQpkaWZmIC0tZ2l0IGEvYXJjaC94ODYvaW5jbHVkZS9hc20vcGFyYXZpcnQuaCBiL2FyY2gveDg2
L2luY2x1ZGUvYXNtL3BhcmF2aXJ0LmgKaW5kZXggODZlNzMxN2ViMzFmLi42OTRkOGRhZjQ5ODMg
MTAwNjQ0Ci0tLSBhL2FyY2gveDg2L2luY2x1ZGUvYXNtL3BhcmF2aXJ0LmgKKysrIGIvYXJjaC94
ODYvaW5jbHVkZS9hc20vcGFyYXZpcnQuaApAQCAtMjk1LDYgKzI5NSwxMyBAQCBzdGF0aWMgaW5s
aW5lIHZvaWQgd3JpdGVfaWR0X2VudHJ5KGdhdGVfZGVzYyAqZHQsIGludCBlbnRyeSwgY29uc3Qg
Z2F0ZV9kZXNjICpnKQogCVBWT1BfVkNBTEwzKGNwdS53cml0ZV9pZHRfZW50cnksIGR0LCBlbnRy
eSwgZyk7CiB9CiAKKyNpZmRlZiBDT05GSUdfWDg2X0lPUExfSU9QRVJNCitzdGF0aWMgaW5saW5l
IHZvaWQgdHNzX3VwZGF0ZV9pb19iaXRtYXAodm9pZCkKK3sKKwlQVk9QX1ZDQUxMMChjcHUudXBk
YXRlX2lvX2JpdG1hcCk7Cit9CisjZW5kaWYKKwogc3RhdGljIGlubGluZSB2b2lkIHBhcmF2aXJ0
X2FjdGl2YXRlX21tKHN0cnVjdCBtbV9zdHJ1Y3QgKnByZXYsCiAJCQkJCXN0cnVjdCBtbV9zdHJ1
Y3QgKm5leHQpCiB7CmRpZmYgLS1naXQgYS9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9wYXJhdmlydF90
eXBlcy5oIGIvYXJjaC94ODYvaW5jbHVkZS9hc20vcGFyYXZpcnRfdHlwZXMuaAppbmRleCA4NDgx
Mjk2NGQzZGQuLjczMmY2MmUwNGRkYiAxMDA2NDQKLS0tIGEvYXJjaC94ODYvaW5jbHVkZS9hc20v
cGFyYXZpcnRfdHlwZXMuaAorKysgYi9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9wYXJhdmlydF90eXBl
cy5oCkBAIC0xNDAsNiArMTQwLDEwIEBAIHN0cnVjdCBwdl9jcHVfb3BzIHsKIAogCXZvaWQgKCps
b2FkX3NwMCkodW5zaWduZWQgbG9uZyBzcDApOwogCisjaWZkZWYgQ09ORklHX1g4Nl9JT1BMX0lP
UEVSTQorCXZvaWQgKCp1cGRhdGVfaW9fYml0bWFwKSh2b2lkKTsKKyNlbmRpZgorCiAJdm9pZCAo
KndiaW52ZCkodm9pZCk7CiAKIAkvKiBjcHVpZCBlbXVsYXRpb24sIG1vc3RseSBzbyB0aGF0IGNh
cHMgYml0cyBjYW4gYmUgZGlzYWJsZWQgKi8KZGlmZiAtLWdpdCBhL2FyY2gveDg2L2tlcm5lbC9w
YXJhdmlydC5jIGIvYXJjaC94ODYva2VybmVsL3BhcmF2aXJ0LmMKaW5kZXggNzg5ZjVlNGY4OWRl
Li5jMTMxYmE0ZTcwZWYgMTAwNjQ0Ci0tLSBhL2FyY2gveDg2L2tlcm5lbC9wYXJhdmlydC5jCisr
KyBiL2FyY2gveDg2L2tlcm5lbC9wYXJhdmlydC5jCkBAIC0zMCw2ICszMCw3IEBACiAjaW5jbHVk
ZSA8YXNtL3RpbWVyLmg+CiAjaW5jbHVkZSA8YXNtL3NwZWNpYWxfaW5zbnMuaD4KICNpbmNsdWRl
IDxhc20vdGxiLmg+CisjaW5jbHVkZSA8YXNtL2lvX2JpdG1hcC5oPgogCiAvKgogICogbm9wIHN0
dWIsIHdoaWNoIG11c3Qgbm90IGNsb2JiZXIgYW55dGhpbmcgKmluY2x1ZGluZyB0aGUgc3RhY2sq
IHRvCkBAIC0zNDEsNiArMzQyLDEwIEBAIHN0cnVjdCBwYXJhdmlydF9wYXRjaF90ZW1wbGF0ZSBw
dl9vcHMgPSB7CiAJLmNwdS5pcmV0CQk9IG5hdGl2ZV9pcmV0LAogCS5jcHUuc3dhcGdzCQk9IG5h
dGl2ZV9zd2FwZ3MsCiAKKyNpZmRlZiBDT05GSUdfWDg2X0lPUExfSU9QRVJNCisJLmNwdS51cGRh
dGVfaW9fYml0bWFwCT0gbmF0aXZlX3Rzc191cGRhdGVfaW9fYml0bWFwLAorI2VuZGlmCisKIAku
Y3B1LnN0YXJ0X2NvbnRleHRfc3dpdGNoCT0gcGFyYXZpcnRfbm9wLAogCS5jcHUuZW5kX2NvbnRl
eHRfc3dpdGNoCQk9IHBhcmF2aXJ0X25vcCwKIApkaWZmIC0tZ2l0IGEvYXJjaC94ODYva2VybmVs
L3Byb2Nlc3MuYyBiL2FyY2gveDg2L2tlcm5lbC9wcm9jZXNzLmMKaW5kZXggODM5YjUyNDRlM2I3
Li4zMDUzYzg1ZTBlNDIgMTAwNjQ0Ci0tLSBhL2FyY2gveDg2L2tlcm5lbC9wcm9jZXNzLmMKKysr
IGIvYXJjaC94ODYva2VybmVsL3Byb2Nlc3MuYwpAQCAtMzc0LDcgKzM3NCw3IEBAIHN0YXRpYyB2
b2lkIHRzc19jb3B5X2lvX2JpdG1hcChzdHJ1Y3QgdHNzX3N0cnVjdCAqdHNzLCBzdHJ1Y3QgaW9f
Yml0bWFwICppb2JtKQogLyoqCiAgKiB0c3NfdXBkYXRlX2lvX2JpdG1hcCAtIFVwZGF0ZSBJL08g
Yml0bWFwIGJlZm9yZSBleGl0aW5nIHRvIHVzZXJtb2RlCiAgKi8KLXZvaWQgdHNzX3VwZGF0ZV9p
b19iaXRtYXAodm9pZCkKK3ZvaWQgbmF0aXZlX3Rzc191cGRhdGVfaW9fYml0bWFwKHZvaWQpCiB7
CiAJc3RydWN0IHRzc19zdHJ1Y3QgKnRzcyA9IHRoaXNfY3B1X3B0cigmY3B1X3Rzc19ydyk7CiAJ
c3RydWN0IHRocmVhZF9zdHJ1Y3QgKnQgPSAmY3VycmVudC0+dGhyZWFkOwpkaWZmIC0tZ2l0IGEv
YXJjaC94ODYveGVuL2VubGlnaHRlbl9wdi5jIGIvYXJjaC94ODYveGVuL2VubGlnaHRlbl9wdi5j
CmluZGV4IDFmNzU2ZmZmZmU4Yi4uZmVhZjJlNjhlZTVjIDEwMDY0NAotLS0gYS9hcmNoL3g4Ni94
ZW4vZW5saWdodGVuX3B2LmMKKysrIGIvYXJjaC94ODYveGVuL2VubGlnaHRlbl9wdi5jCkBAIC03
Miw2ICs3Miw5IEBACiAjaW5jbHVkZSA8YXNtL213YWl0Lmg+CiAjaW5jbHVkZSA8YXNtL3BjaV94
ODYuaD4KICNpbmNsdWRlIDxhc20vY3B1Lmg+CisjaWZkZWYgQ09ORklHX1g4Nl9JT1BMX0lPUEVS
TQorI2luY2x1ZGUgPGFzbS9pb19iaXRtYXAuaD4KKyNlbmRpZgogCiAjaWZkZWYgQ09ORklHX0FD
UEkKICNpbmNsdWRlIDxsaW51eC9hY3BpLmg+CkBAIC04MzcsNiArODQwLDI1IEBAIHN0YXRpYyB2
b2lkIHhlbl9sb2FkX3NwMCh1bnNpZ25lZCBsb25nIHNwMCkKIAl0aGlzX2NwdV93cml0ZShjcHVf
dHNzX3J3Lng4Nl90c3Muc3AwLCBzcDApOwogfQogCisjaWZkZWYgQ09ORklHX1g4Nl9JT1BMX0lP
UEVSTQorc3RhdGljIHZvaWQgeGVuX3VwZGF0ZV9pb19iaXRtYXAodm9pZCkKK3sKKwlzdHJ1Y3Qg
cGh5c2Rldl9zZXRfaW9iaXRtYXAgaW9iaXRtYXA7CisJc3RydWN0IHRzc19zdHJ1Y3QgKnRzcyA9
IHRoaXNfY3B1X3B0cigmY3B1X3Rzc19ydyk7CisKKwluYXRpdmVfdHNzX3VwZGF0ZV9pb19iaXRt
YXAoKTsKKworCWlvYml0bWFwLmJpdG1hcCA9ICh1aW50OF90ICopKCZ0c3MtPng4Nl90c3MpICsK
KwkJCSAgdHNzLT54ODZfdHNzLmlvX2JpdG1hcF9iYXNlOworCWlmICh0c3MtPng4Nl90c3MuaW9f
Yml0bWFwX2Jhc2UgPT0gSU9fQklUTUFQX09GRlNFVF9JTlZBTElEKQorCQlpb2JpdG1hcC5ucl9w
b3J0cyA9IDA7CisJZWxzZQorCQlpb2JpdG1hcC5ucl9wb3J0cyA9IElPX0JJVE1BUF9CSVRTOwor
CisJSFlQRVJWSVNPUl9waHlzZGV2X29wKFBIWVNERVZPUF9zZXRfaW9iaXRtYXAsICZpb2JpdG1h
cCk7Cit9CisjZW5kaWYKKwogc3RhdGljIHZvaWQgeGVuX2lvX2RlbGF5KHZvaWQpCiB7CiB9CkBA
IC0xMDQ2LDYgKzEwNjgsOSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHB2X2NwdV9vcHMgeGVuX2Nw
dV9vcHMgX19pbml0Y29uc3QgPSB7CiAJLndyaXRlX2lkdF9lbnRyeSA9IHhlbl93cml0ZV9pZHRf
ZW50cnksCiAJLmxvYWRfc3AwID0geGVuX2xvYWRfc3AwLAogCisjaWZkZWYgQ09ORklHX1g4Nl9J
T1BMX0lPUEVSTQorCS51cGRhdGVfaW9fYml0bWFwID0geGVuX3VwZGF0ZV9pb19iaXRtYXAsCisj
ZW5kaWYKIAkuaW9fZGVsYXkgPSB4ZW5faW9fZGVsYXksCiAKIAkvKiBYZW4gdGFrZXMgY2FyZSBv
ZiAlZ3Mgd2hlbiBzd2l0Y2hpbmcgdG8gdXNlcm1vZGUgZm9yIHVzICovCi0tIAoyLjE2LjQKCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwg
bWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3Rz
LnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

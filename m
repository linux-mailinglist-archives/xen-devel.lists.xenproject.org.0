Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id F08165BC72
	for <lists+xen-devel@lfdr.de>; Mon,  1 Jul 2019 15:12:18 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hhw3M-0004CZ-Jp; Mon, 01 Jul 2019 13:09:04 +0000
Received: from us1-rack-dfw2.inumbo.com ([104.130.134.6])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=QKbV=U6=bitdefender.com=aisaila@srs-us1.protection.inumbo.net>)
 id 1hhw3K-0004CU-NO
 for xen-devel@lists.xenproject.org; Mon, 01 Jul 2019 13:09:02 +0000
X-Inumbo-ID: 63dd2427-9c01-11e9-8980-bc764e045a96
Received: from EUR03-AM5-obe.outbound.protection.outlook.com (unknown
 [2a01:111:f400:fe08::71c])
 by us1-rack-dfw2.inumbo.com (Halon) with ESMTPS
 id 63dd2427-9c01-11e9-8980-bc764e045a96;
 Mon, 01 Jul 2019 13:09:00 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=bitdefender.onmicrosoft.com; s=selector1-bitdefender-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=2tG5/5RLyMf/H6JYNx7hojiAFpjzn7TnKrWsuGmTzvA=;
 b=P2/4J7mtE2e7QSVpthdAsmBZTtvEIqDkb7weNh0ufe1K6Wwt8y2GXY5g2Qu/1s9xHO+2EPOASzJ0Wt9rbAMfrtS0ZxLkYZGCCIQmU0XaH6Up/Wod2PthZYJVQlP+nqbMi/VFPI7xa9pnqFqMnjds8/Jfv0nTmdmldM6ejhmsAzI=
Received: from VI1PR0202MB2928.eurprd02.prod.outlook.com (10.171.106.11) by
 VI1PR0202MB3565.eurprd02.prod.outlook.com (52.134.19.11) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.2032.20; Mon, 1 Jul 2019 13:08:56 +0000
Received: from VI1PR0202MB2928.eurprd02.prod.outlook.com
 ([fe80::dd50:3e97:1d64:5aa3]) by VI1PR0202MB2928.eurprd02.prod.outlook.com
 ([fe80::dd50:3e97:1d64:5aa3%4]) with mapi id 15.20.2032.019; Mon, 1 Jul 2019
 13:08:56 +0000
From: Alexandru Stefan ISAILA <aisaila@bitdefender.com>
To: "xen-devel@lists.xenproject.org" <xen-devel@lists.xenproject.org>
Thread-Topic: [PATCH v6] x86/emulate: Send vm_event from emulate
Thread-Index: AQHVMA4j13UMveyTxkGnqnnoRM3Jzw==
Date: Mon, 1 Jul 2019 13:08:55 +0000
Message-ID: <20190701130837.14278-1-aisaila@bitdefender.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: PR0P264CA0142.FRAP264.PROD.OUTLOOK.COM
 (2603:10a6:100:1a::34) To VI1PR0202MB2928.eurprd02.prod.outlook.com
 (2603:10a6:800:e3::11)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=aisaila@bitdefender.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [91.199.104.6]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: c30ece24-2be1-4dcb-5a7a-08d6fe254594
x-microsoft-antispam: BCL:0; PCL:0;
 RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600148)(711020)(4605104)(1401327)(2017052603328)(7193020);
 SRVR:VI1PR0202MB3565; 
x-ms-traffictypediagnostic: VI1PR0202MB3565:|VI1PR0202MB3565:
x-microsoft-antispam-prvs: <VI1PR0202MB35657C44779C3F229C0176ECABF90@VI1PR0202MB3565.eurprd02.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:256;
x-forefront-prvs: 00851CA28B
x-forefront-antispam-report: SFV:NSPM;
 SFS:(10019020)(366004)(396003)(346002)(39860400002)(376002)(136003)(199004)(189003)(68736007)(5640700003)(52116002)(99286004)(26005)(6436002)(2351001)(14454004)(3846002)(6116002)(186003)(102836004)(25786009)(6486002)(53936002)(36756003)(4326008)(66066001)(53946003)(14444005)(256004)(30864003)(6506007)(386003)(6512007)(5660300002)(73956011)(6916009)(54906003)(2501003)(8936002)(66946007)(316002)(66556008)(66476007)(7416002)(50226002)(486006)(71190400001)(71200400001)(478600001)(8676002)(1076003)(66446008)(64756008)(81166006)(81156014)(476003)(2616005)(2906002)(86362001)(305945005)(7736002)(309714004);
 DIR:OUT; SFP:1102; SCL:1; SRVR:VI1PR0202MB3565;
 H:VI1PR0202MB2928.eurprd02.prod.outlook.com; FPR:; SPF:None; LANG:en;
 PTR:InfoNoRecords; A:1; MX:1; 
received-spf: None (protection.outlook.com: bitdefender.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: YB1qURL1CHpxpyiqXCRSJScnmbMXtVww0rnjHdv35mbA9EmZPdiTdhPzprUhACUcue5JDP6jgZgRJWbDOCmYJjuo5svbDGxc4Gh2vHn8w6QCuO0764UG2DmSIXVliVxfTkrHYsG7mXzqfE79uotyfhOSMH/aCwTZXVYg5tMe5qPEJkLpT399btoJ7aVzAsevTfmsKg8USZL53Z97RIxOKSBAjtFbr258dKKLuxjfiPcYyHAirVVjAvu140Kxn/QQ+q0xx9c8clOf/xwi02Cz1SSmIHItJrpM2tHvlzD01BTszL+3F3iuIcnc0RT/s5BSub5EkhHnuaUM/rZ4SbV6Alo1GdBY3MzVP8poDQv7XpwiPoF5D5Zz1pR6x5wBEXQ/DcIWE0r7Fjq16oA1G1dH4LBmpW6FFPuJL5EnaQ2WFvA=
MIME-Version: 1.0
X-OriginatorOrg: bitdefender.com
X-MS-Exchange-CrossTenant-Network-Message-Id: c30ece24-2be1-4dcb-5a7a-08d6fe254594
X-MS-Exchange-CrossTenant-originalarrivaltime: 01 Jul 2019 13:08:55.9153 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 487baf29-f1da-469a-9221-243f830c36f3
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: aisaila@bbu.bitdefender.biz
X-MS-Exchange-Transport-CrossTenantHeadersStamped: VI1PR0202MB3565
Subject: [Xen-devel] [PATCH v6] x86/emulate: Send vm_event from emulate
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Petre Ovidiu PIRCALABU <ppircalabu@bitdefender.com>,
 "kevin.tian@intel.com" <kevin.tian@intel.com>,
 "tamas@tklengyel.com" <tamas@tklengyel.com>,
 "suravee.suthikulpanit@amd.com" <suravee.suthikulpanit@amd.com>,
 "wl@xen.org" <wl@xen.org>, "jun.nakajima@intel.com" <jun.nakajima@intel.com>,
 "andrew.cooper3@citrix.com" <andrew.cooper3@citrix.com>,
 "rcojocaru@bitdefender.com" <rcojocaru@bitdefender.com>,
 "tim@xen.org" <tim@xen.org>,
 "george.dunlap@eu.citrix.com" <george.dunlap@eu.citrix.com>,
 "paul.durrant@citrix.com" <paul.durrant@citrix.com>,
 "jbeulich@suse.com" <jbeulich@suse.com>,
 Alexandru Stefan ISAILA <aisaila@bitdefender.com>,
 "boris.ostrovsky@oracle.com" <boris.ostrovsky@oracle.com>,
 "brian.woods@amd.com" <brian.woods@amd.com>,
 "roger.pau@citrix.com" <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhpcyBwYXRjaCBhaW1zIHRvIGhhdmUgbWVtIGFjY2VzcyB2bSBldmVudHMgc2VudCBmcm9tIHRo
ZSBlbXVsYXRvci4NClRoaXMgaXMgdXNlZnVsIHdoZXJlIHdlIHdhbnQgdG8gb25seSBlbXVsYXRl
IGEgcGFnZSB3YWxrIHdpdGhvdXQNCmNoZWNraW5nIHRoZSBFUFQsIGJ1dCB3ZSBzdGlsbCB3YW50
IHRvIGNoZWNrIHRoZSBFUFQgd2hlbiBlbXVsYXRpbmcNCnRoZSBpbnN0cnVjdGlvbiB0aGF0IGNh
dXNlZCB0aGUgcGFnZSB3YWxrLiBJbiB0aGlzIGNhc2UsIHRoZSBvcmlnaW5hbA0KRVBUIGZhdWx0
IGlzIGNhdXNlZCBieSB0aGUgd2FsayB0cnlpbmcgdG8gc2V0IHRoZSBhY2Nlc3NlZCBvciBkaXJ0
eQ0KYml0cywgYnV0IGV4ZWN1dGluZyB0aGUgaW5zdHJ1Y3Rpb24gaXRzZWxmIG1pZ2h0IGFsc28g
Y2F1c2UgYW4gRVBUDQpmYXVsdCBpZiBwZXJtaXR0ZWQgdG8gcnVuLCBhbmQgdGhpcyBzZWNvbmQg
ZmF1bHQgc2hvdWxkIG5vdCBiZSBsb3N0Lg0KDQpXZSB1c2UgaHZtZW11bF9tYXBfbGluZWFyX2Fk
ZHIoKSB0byBpbnRlcmNlcHQgci93IGFjY2VzcyBhbmQNCl9faHZtX2NvcHkoKSB0byBpbnRlcmNl
cHQgZXhlYyBhY2Nlc3MuDQoNCkZpcnN0IHdlIHRyeSB0byBzZW5kIGEgdm0gZXZlbnQgYW5kIGlm
IHRoZSBldmVudCBpcyBzZW50IHRoZW4gZW11bGF0aW9uDQpyZXR1cm5zIFg4NkVNVUxfUkVUUlkg
aW4gb3JkZXIgdG8gc3RvcCBlbXVsYXRpb24gb24gaW5zdHJ1Y3Rpb25zIHRoYXQNCnVzZSBhY2Nl
c3MgcHJvdGVjdGVkIHBhZ2VzLiBJZiB0aGUgZXZlbnQgaXMgbm90IHNlbnQgdGhlbiB0aGUNCmVt
dWxhdGlvbiBnb2VzIG9uIGFzIGV4cGVjdGVkLg0KDQpTaWduZWQtb2ZmLWJ5OiBBbGV4YW5kcnUg
SXNhaWxhIDxhaXNhaWxhQGJpdGRlZmVuZGVyLmNvbT4NClJldmlld2VkLWJ5OiBQYXVsIER1cnJh
bnQgPHBhdWwuZHVycmFudEBjaXRyaXguY29tPg0KDQotLS0NCkNoYW5nZXMgc2luY2UgVjU6DQoJ
LSBDaGFuZ2Ugb2Zmc2V0IHRvIGdwYSAmIH5QQUdFX01BU0suDQotLS0NCiB4ZW4vYXJjaC94ODYv
aHZtL2VtdWxhdGUuYyAgICAgICAgfCA3MSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0t
DQogeGVuL2FyY2gveDg2L2h2bS9odm0uYyAgICAgICAgICAgIHwgMjcgKysrKysrKy0tLS0tDQog
eGVuL2FyY2gveDg2L2h2bS9zdm0vc3ZtLmMgICAgICAgIHwgIDIgKy0NCiB4ZW4vYXJjaC94ODYv
aHZtL3ZtX2V2ZW50LmMgICAgICAgfCAgMiArLQ0KIHhlbi9hcmNoL3g4Ni9odm0vdm14L3Z2bXgu
YyAgICAgICB8ICAyICstDQogeGVuL2FyY2gveDg2L21tL21lbV9hY2Nlc3MuYyAgICAgIHwgIDMg
Ky0NCiB4ZW4vYXJjaC94ODYvbW0vc2hhZG93L2NvbW1vbi5jICAgfCAgNCArLQ0KIHhlbi9hcmNo
L3g4Ni9tbS9zaGFkb3cvaHZtLmMgICAgICB8ICAyICstDQogeGVuL2luY2x1ZGUvYXNtLXg4Ni9o
dm0vZW11bGF0ZS5oIHwgIDkgKysrLQ0KIHhlbi9pbmNsdWRlL2FzbS14ODYvaHZtL3N1cHBvcnQu
aCB8ICAyICstDQogMTAgZmlsZXMgY2hhbmdlZCwgMTAxIGluc2VydGlvbnMoKyksIDIzIGRlbGV0
aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L2h2bS9lbXVsYXRlLmMgYi94ZW4v
YXJjaC94ODYvaHZtL2VtdWxhdGUuYw0KaW5kZXggODY1OWM4OTg2Mi4uMTI5YzdlYTYwNCAxMDA2
NDQNCi0tLSBhL3hlbi9hcmNoL3g4Ni9odm0vZW11bGF0ZS5jDQorKysgYi94ZW4vYXJjaC94ODYv
aHZtL2VtdWxhdGUuYw0KQEAgLTEyLDkgKzEyLDExIEBADQogI2luY2x1ZGUgPHhlbi9pbml0Lmg+
DQogI2luY2x1ZGUgPHhlbi9saWIuaD4NCiAjaW5jbHVkZSA8eGVuL3NjaGVkLmg+DQorI2luY2x1
ZGUgPHhlbi9tb25pdG9yLmg+DQogI2luY2x1ZGUgPHhlbi9wYWdpbmcuaD4NCiAjaW5jbHVkZSA8
eGVuL3RyYWNlLmg+DQogI2luY2x1ZGUgPHhlbi92bV9ldmVudC5oPg0KKyNpbmNsdWRlIDxhc20v
YWx0cDJtLmg+DQogI2luY2x1ZGUgPGFzbS9ldmVudC5oPg0KICNpbmNsdWRlIDxhc20vaTM4Ny5o
Pg0KICNpbmNsdWRlIDxhc20veHN0YXRlLmg+DQpAQCAtNTMwLDYgKzUzMiw1NyBAQCBzdGF0aWMg
aW50IGh2bWVtdWxfZG9fbW1pb19hZGRyKHBhZGRyX3QgbW1pb19ncGEsDQogICAgIHJldHVybiBo
dm1lbXVsX2RvX2lvX2FkZHIoMSwgbW1pb19ncGEsIHJlcHMsIHNpemUsIGRpciwgZGYsIHJhbV9n
cGEpOw0KIH0NCiANCitib29sIGh2bV9lbXVsYXRlX3NlbmRfdm1fZXZlbnQodW5zaWduZWQgbG9u
ZyBnbGEsIGdmbl90IGdmbiwNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMy
X3QgcGZlYywgYm9vbCBzZW5kX2V2ZW50KQ0KK3sNCisgICAgeGVubWVtX2FjY2Vzc190IGFjY2Vz
czsNCisgICAgdm1fZXZlbnRfcmVxdWVzdF90IHJlcSA9IHt9Ow0KKyAgICBwYWRkcl90IGdwYSA9
ICgoZ2ZuX3goZ2ZuKSA8PCBQQUdFX1NISUZUKSB8IChnbGEgJiB+UEFHRV9NQVNLKSk7DQorDQor
ICAgIGlmICggIXNlbmRfZXZlbnQgfHwgIXBmZWMgKQ0KKyAgICAgICAgcmV0dXJuIGZhbHNlOw0K
Kw0KKyAgICBpZiAoIHAybV9nZXRfbWVtX2FjY2VzcyhjdXJyZW50LT5kb21haW4sIGdmbiwgJmFj
Y2VzcywNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0cDJtX3ZjcHVfaWR4KGN1cnJl
bnQpKSAhPSAwICkNCisgICAgICAgIHJldHVybiBmYWxzZTsNCisNCisgICAgc3dpdGNoICggYWNj
ZXNzICkgew0KKyAgICBjYXNlIFhFTk1FTV9hY2Nlc3NfeDoNCisgICAgY2FzZSBYRU5NRU1fYWNj
ZXNzX3J4Og0KKyAgICAgICAgaWYgKCBwZmVjICYgUEZFQ193cml0ZV9hY2Nlc3MgKQ0KKyAgICAg
ICAgICAgIHJlcS51Lm1lbV9hY2Nlc3MuZmxhZ3MgPSBNRU1fQUNDRVNTX1IgfCBNRU1fQUNDRVNT
X1c7DQorICAgICAgICBicmVhazsNCisNCisgICAgY2FzZSBYRU5NRU1fYWNjZXNzX3c6DQorICAg
IGNhc2UgWEVOTUVNX2FjY2Vzc19ydzoNCisgICAgICAgIGlmICggcGZlYyAmIFBGRUNfaW5zbl9m
ZXRjaCApDQorICAgICAgICAgICAgcmVxLnUubWVtX2FjY2Vzcy5mbGFncyA9IE1FTV9BQ0NFU1Nf
WDsNCisgICAgICAgIGJyZWFrOw0KKw0KKyAgICBjYXNlIFhFTk1FTV9hY2Nlc3NfcjoNCisgICAg
Y2FzZSBYRU5NRU1fYWNjZXNzX246DQorICAgICAgICBpZiAoIHBmZWMgJiBQRkVDX3dyaXRlX2Fj
Y2VzcyApDQorICAgICAgICAgICAgcmVxLnUubWVtX2FjY2Vzcy5mbGFncyB8PSBNRU1fQUNDRVNT
X1IgfCBNRU1fQUNDRVNTX1c7DQorICAgICAgICBpZiAoIHBmZWMgJiBQRkVDX2luc25fZmV0Y2gg
KQ0KKyAgICAgICAgICAgIHJlcS51Lm1lbV9hY2Nlc3MuZmxhZ3MgfD0gTUVNX0FDQ0VTU19YOw0K
KyAgICAgICAgYnJlYWs7DQorDQorICAgIGRlZmF1bHQ6DQorICAgICAgICByZXR1cm4gZmFsc2U7
DQorICAgIH0NCisNCisgICAgaWYgKCAhcmVxLnUubWVtX2FjY2Vzcy5mbGFncyApDQorICAgICAg
ICByZXR1cm4gZmFsc2U7IC8qIG5vIHZpb2xhdGlvbiAqLw0KKw0KKyAgICByZXEucmVhc29uID0g
Vk1fRVZFTlRfUkVBU09OX01FTV9BQ0NFU1M7DQorICAgIHJlcS51Lm1lbV9hY2Nlc3MuZ2ZuID0g
Z2ZuX3goZ2ZuKTsNCisgICAgcmVxLnUubWVtX2FjY2Vzcy5mbGFncyB8PSBNRU1fQUNDRVNTX0ZB
VUxUX1dJVEhfR0xBIHwgTUVNX0FDQ0VTU19HTEFfVkFMSUQ7DQorICAgIHJlcS51Lm1lbV9hY2Nl
c3MuZ2xhID0gZ2xhOw0KKyAgICByZXEudS5tZW1fYWNjZXNzLm9mZnNldCA9IGdwYSAmIH5QQUdF
X01BU0s7DQorDQorICAgIHJldHVybiBtb25pdG9yX3RyYXBzKGN1cnJlbnQsIHRydWUsICZyZXEp
ID49IDA7DQorfQ0KKw0KIC8qDQogICogTWFwIHRoZSBmcmFtZShzKSBjb3ZlcmluZyBhbiBpbmRp
dmlkdWFsIGxpbmVhciBhY2Nlc3MsIGZvciB3cml0ZWFibGUNCiAgKiBhY2Nlc3MuICBNYXkgcmV0
dXJuIE5VTEwgZm9yIE1NSU8sIG9yIEVSUl9QVFIoflg4NkVNVUxfKikgZm9yIG90aGVyIGVycm9y
cw0KQEAgLTU0Nyw2ICs2MDAsNyBAQCBzdGF0aWMgdm9pZCAqaHZtZW11bF9tYXBfbGluZWFyX2Fk
ZHIoDQogICAgIHVuc2lnbmVkIGludCBucl9mcmFtZXMgPSAoKGxpbmVhciArIGJ5dGVzIC0gISFi
eXRlcykgPj4gUEFHRV9TSElGVCkgLQ0KICAgICAgICAgKGxpbmVhciA+PiBQQUdFX1NISUZUKSAr
IDE7DQogICAgIHVuc2lnbmVkIGludCBpOw0KKyAgICBnZm5fdCBnZm47DQogDQogICAgIC8qDQog
ICAgICAqIG1mbiBwb2ludHMgdG8gdGhlIG5leHQgZnJlZSBzbG90LiAgQWxsIHVzZWQgc2xvdHMg
aGF2ZSBhIHBhZ2UgcmVmZXJlbmNlDQpAQCAtNTg1LDcgKzYzOSw3IEBAIHN0YXRpYyB2b2lkICpo
dm1lbXVsX21hcF9saW5lYXJfYWRkcigNCiAgICAgICAgIEFTU0VSVChtZm5feCgqbWZuKSA9PSAw
KTsNCiANCiAgICAgICAgIHJlcyA9IGh2bV90cmFuc2xhdGVfZ2V0X3BhZ2UoY3VyciwgYWRkciwg
dHJ1ZSwgcGZlYywNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnBmaW5m
bywgJnBhZ2UsIE5VTEwsICZwMm10KTsNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgJnBmaW5mbywgJnBhZ2UsICZnZm4sICZwMm10KTsNCiANCiAgICAgICAgIHN3aXRjaCAo
IHJlcyApDQogICAgICAgICB7DQpAQCAtNjE1LDYgKzY2OSwxMyBAQCBzdGF0aWMgdm9pZCAqaHZt
ZW11bF9tYXBfbGluZWFyX2FkZHIoDQogDQogICAgICAgICBpZiAoIHBmZWMgJiBQRkVDX3dyaXRl
X2FjY2VzcyApDQogICAgICAgICB7DQorICAgICAgICAgICAgaWYgKCBodm1fZW11bGF0ZV9zZW5k
X3ZtX2V2ZW50KGFkZHIsIGdmbiwgcGZlYywNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaHZtZW11bF9jdHh0LT5zZW5kX2V2ZW50KSApDQorICAgICAgICAgICAg
ew0KKyAgICAgICAgICAgICAgICBlcnIgPSBFUlJfUFRSKH5YODZFTVVMX1JFVFJZKTsNCisgICAg
ICAgICAgICAgICAgZ290byBvdXQ7DQorICAgICAgICAgICAgfQ0KKw0KICAgICAgICAgICAgIGlm
ICggcDJtX2lzX2Rpc2NhcmRfd3JpdGUocDJtdCkgKQ0KICAgICAgICAgICAgIHsNCiAgICAgICAg
ICAgICAgICAgZXJyID0gRVJSX1BUUih+WDg2RU1VTF9PS0FZKTsNCkBAIC0xMTE1LDcgKzExNzYs
OCBAQCBzdGF0aWMgaW50IGxpbmVhcl9yZWFkKHVuc2lnbmVkIGxvbmcgYWRkciwgdW5zaWduZWQg
aW50IGJ5dGVzLCB2b2lkICpwX2RhdGEsDQogICAgICAqIGNsZWFuIHVwIGFueSBpbnRlcmltIHN0
YXRlLg0KICAgICAgKi8NCiAgICAgaWYgKCAhaHZtZW11bF9maW5kX21taW9fY2FjaGUodmlvLCBh
ZGRyLCBJT1JFUV9SRUFELCBmYWxzZSkgKQ0KLSAgICAgICAgcmMgPSBodm1fY29weV9mcm9tX2d1
ZXN0X2xpbmVhcihwX2RhdGEsIGFkZHIsIGJ5dGVzLCBwZmVjLCAmcGZpbmZvKTsNCisgICAgICAg
IHJjID0gaHZtX2NvcHlfZnJvbV9ndWVzdF9saW5lYXIocF9kYXRhLCBhZGRyLCBieXRlcywgcGZl
YywgJnBmaW5mbywNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHZt
ZW11bF9jdHh0LT5zZW5kX2V2ZW50KTsNCiANCiAgICAgc3dpdGNoICggcmMgKQ0KICAgICB7DQpA
QCAtMjUwOSwxMiArMjU3MSwxMyBAQCBpbnQgaHZtX2VtdWxhdGVfb25lX21taW8odW5zaWduZWQg
bG9uZyBtZm4sIHVuc2lnbmVkIGxvbmcgZ2xhKQ0KIH0NCiANCiB2b2lkIGh2bV9lbXVsYXRlX29u
ZV92bV9ldmVudChlbnVtIGVtdWxfa2luZCBraW5kLCB1bnNpZ25lZCBpbnQgdHJhcG5yLA0KLSAg
ICB1bnNpZ25lZCBpbnQgZXJyY29kZSkNCisgICAgdW5zaWduZWQgaW50IGVycmNvZGUsIGJvb2wg
c2VuZF9ldmVudCkNCiB7DQogICAgIHN0cnVjdCBodm1fZW11bGF0ZV9jdHh0IGN0eCA9IHt7IDAg
fX07DQogICAgIGludCByYzsNCiANCiAgICAgaHZtX2VtdWxhdGVfaW5pdF9vbmNlKCZjdHgsIE5V
TEwsIGd1ZXN0X2NwdV91c2VyX3JlZ3MoKSk7DQorICAgIGN0eC5zZW5kX2V2ZW50ID0gc2VuZF9l
dmVudDsNCiANCiAgICAgc3dpdGNoICgga2luZCApDQogICAgIHsNCkBAIC0yNjI5LDcgKzI2OTIs
NyBAQCB2b2lkIGh2bV9lbXVsYXRlX2luaXRfcGVyX2luc24oDQogICAgICAgICAgICAgIGh2bV9j
b3B5X2Zyb21fZ3Vlc3RfbGluZWFyKGh2bWVtdWxfY3R4dC0+aW5zbl9idWYsIGFkZHIsDQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVvZihodm1lbXVsX2N0eHQt
Pmluc25fYnVmKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGZl
YyB8IFBGRUNfaW5zbl9mZXRjaCwNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgTlVMTCkgPT0gSFZNVFJBTlNfb2theSkgPw0KKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBOVUxMLCBmYWxzZSkgPT0gSFZNVFJBTlNfb2theSkgPw0KICAgICAg
ICAgICAgIHNpemVvZihodm1lbXVsX2N0eHQtPmluc25fYnVmKSA6IDA7DQogICAgIH0NCiAgICAg
ZWxzZQ0KZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9odm0vaHZtLmMgYi94ZW4vYXJjaC94ODYv
aHZtL2h2bS5jDQppbmRleCAwMjllZWEzYjg1Li5mNmRmNTdiNDQyIDEwMDY0NA0KLS0tIGEveGVu
L2FyY2gveDg2L2h2bS9odm0uYw0KKysrIGIveGVuL2FyY2gveDg2L2h2bS9odm0uYw0KQEAgLTI5
NDIsNyArMjk0Miw3IEBAIHZvaWQgaHZtX3Rhc2tfc3dpdGNoKA0KICAgICB9DQogDQogICAgIHJj
ID0gaHZtX2NvcHlfZnJvbV9ndWVzdF9saW5lYXIoDQotICAgICAgICAmdHNzLCBwcmV2X3RyLmJh
c2UsIHNpemVvZih0c3MpLCBQRkVDX3BhZ2VfcHJlc2VudCwgJnBmaW5mbyk7DQorICAgICAgICAm
dHNzLCBwcmV2X3RyLmJhc2UsIHNpemVvZih0c3MpLCBQRkVDX3BhZ2VfcHJlc2VudCwgJnBmaW5m
bywgZmFsc2UpOw0KICAgICBpZiAoIHJjID09IEhWTVRSQU5TX2JhZF9saW5lYXJfdG9fZ2ZuICkN
CiAgICAgICAgIGh2bV9pbmplY3RfcGFnZV9mYXVsdChwZmluZm8uZWMsIHBmaW5mby5saW5lYXIp
Ow0KICAgICBpZiAoIHJjICE9IEhWTVRSQU5TX29rYXkgKQ0KQEAgLTI5ODksNyArMjk4OSw3IEBA
IHZvaWQgaHZtX3Rhc2tfc3dpdGNoKA0KICAgICAgICAgZ290byBvdXQ7DQogDQogICAgIHJjID0g
aHZtX2NvcHlfZnJvbV9ndWVzdF9saW5lYXIoDQotICAgICAgICAmdHNzLCB0ci5iYXNlLCBzaXpl
b2YodHNzKSwgUEZFQ19wYWdlX3ByZXNlbnQsICZwZmluZm8pOw0KKyAgICAgICAgJnRzcywgdHIu
YmFzZSwgc2l6ZW9mKHRzcyksIFBGRUNfcGFnZV9wcmVzZW50LCAmcGZpbmZvLCBmYWxzZSk7DQog
ICAgIGlmICggcmMgPT0gSFZNVFJBTlNfYmFkX2xpbmVhcl90b19nZm4gKQ0KICAgICAgICAgaHZt
X2luamVjdF9wYWdlX2ZhdWx0KHBmaW5mby5lYywgcGZpbmZvLmxpbmVhcik7DQogICAgIC8qDQpA
QCAtMzE4MCw3ICszMTgwLDcgQEAgZW51bSBodm1fdHJhbnNsYXRpb25fcmVzdWx0IGh2bV90cmFu
c2xhdGVfZ2V0X3BhZ2UoDQogI2RlZmluZSBIVk1DT1BZX2xpbmVhciAgICAgKDF1PDwyKQ0KIHN0
YXRpYyBlbnVtIGh2bV90cmFuc2xhdGlvbl9yZXN1bHQgX19odm1fY29weSgNCiAgICAgdm9pZCAq
YnVmLCBwYWRkcl90IGFkZHIsIGludCBzaXplLCBzdHJ1Y3QgdmNwdSAqdiwgdW5zaWduZWQgaW50
IGZsYWdzLA0KLSAgICB1aW50MzJfdCBwZmVjLCBwYWdlZmF1bHRfaW5mb190ICpwZmluZm8pDQor
ICAgIHVpbnQzMl90IHBmZWMsIHBhZ2VmYXVsdF9pbmZvX3QgKnBmaW5mbywgYm9vbCBzZW5kX2V2
ZW50KQ0KIHsNCiAgICAgZ2ZuX3QgZ2ZuOw0KICAgICBzdHJ1Y3QgcGFnZV9pbmZvICpwYWdlOw0K
QEAgLTMyMjQsNiArMzIyNCwxMiBAQCBzdGF0aWMgZW51bSBodm1fdHJhbnNsYXRpb25fcmVzdWx0
IF9faHZtX2NvcHkoDQogICAgICAgICAgICAgcmV0dXJuIEhWTVRSQU5TX2JhZF9nZm5fdG9fbWZu
Ow0KICAgICAgICAgfQ0KIA0KKyAgICAgICAgaWYgKCBodm1fZW11bGF0ZV9zZW5kX3ZtX2V2ZW50
KGFkZHIsIGdmbiwgcGZlYywgc2VuZF9ldmVudCkgKQ0KKyAgICAgICAgew0KKyAgICAgICAgICAg
IHB1dF9wYWdlKHBhZ2UpOw0KKyAgICAgICAgICAgIHJldHVybiBIVk1UUkFOU19nZm5fcGFnZWRf
b3V0Ow0KKyAgICAgICAgfQ0KKw0KICAgICAgICAgcCA9IChjaGFyICopX19tYXBfZG9tYWluX3Bh
Z2UocGFnZSkgKyAoYWRkciAmIH5QQUdFX01BU0spOw0KIA0KICAgICAgICAgaWYgKCBmbGFncyAm
IEhWTUNPUFlfdG9fZ3Vlc3QgKQ0KQEAgLTMyNjcsMTQgKzMyNzMsMTQgQEAgZW51bSBodm1fdHJh
bnNsYXRpb25fcmVzdWx0IGh2bV9jb3B5X3RvX2d1ZXN0X3BoeXMoDQogICAgIHBhZGRyX3QgcGFk
ZHIsIHZvaWQgKmJ1ZiwgaW50IHNpemUsIHN0cnVjdCB2Y3B1ICp2KQ0KIHsNCiAgICAgcmV0dXJu
IF9faHZtX2NvcHkoYnVmLCBwYWRkciwgc2l6ZSwgdiwNCi0gICAgICAgICAgICAgICAgICAgICAg
SFZNQ09QWV90b19ndWVzdCB8IEhWTUNPUFlfcGh5cywgMCwgTlVMTCk7DQorICAgICAgICAgICAg
ICAgICAgICAgIEhWTUNPUFlfdG9fZ3Vlc3QgfCBIVk1DT1BZX3BoeXMsIDAsIE5VTEwsIGZhbHNl
KTsNCiB9DQogDQogZW51bSBodm1fdHJhbnNsYXRpb25fcmVzdWx0IGh2bV9jb3B5X2Zyb21fZ3Vl
c3RfcGh5cygNCiAgICAgdm9pZCAqYnVmLCBwYWRkcl90IHBhZGRyLCBpbnQgc2l6ZSkNCiB7DQog
ICAgIHJldHVybiBfX2h2bV9jb3B5KGJ1ZiwgcGFkZHIsIHNpemUsIGN1cnJlbnQsDQotICAgICAg
ICAgICAgICAgICAgICAgIEhWTUNPUFlfZnJvbV9ndWVzdCB8IEhWTUNPUFlfcGh5cywgMCwgTlVM
TCk7DQorICAgICAgICAgICAgICAgICAgICAgIEhWTUNPUFlfZnJvbV9ndWVzdCB8IEhWTUNPUFlf
cGh5cywgMCwgTlVMTCwgZmFsc2UpOw0KIH0NCiANCiBlbnVtIGh2bV90cmFuc2xhdGlvbl9yZXN1
bHQgaHZtX2NvcHlfdG9fZ3Vlc3RfbGluZWFyKA0KQEAgLTMyODMsMTYgKzMyODksMTcgQEAgZW51
bSBodm1fdHJhbnNsYXRpb25fcmVzdWx0IGh2bV9jb3B5X3RvX2d1ZXN0X2xpbmVhcigNCiB7DQog
ICAgIHJldHVybiBfX2h2bV9jb3B5KGJ1ZiwgYWRkciwgc2l6ZSwgY3VycmVudCwNCiAgICAgICAg
ICAgICAgICAgICAgICAgSFZNQ09QWV90b19ndWVzdCB8IEhWTUNPUFlfbGluZWFyLA0KLSAgICAg
ICAgICAgICAgICAgICAgICBQRkVDX3BhZ2VfcHJlc2VudCB8IFBGRUNfd3JpdGVfYWNjZXNzIHwg
cGZlYywgcGZpbmZvKTsNCisgICAgICAgICAgICAgICAgICAgICAgUEZFQ19wYWdlX3ByZXNlbnQg
fCBQRkVDX3dyaXRlX2FjY2VzcyB8IHBmZWMsIHBmaW5mbywNCisgICAgICAgICAgICAgICAgICAg
ICAgZmFsc2UpOw0KIH0NCiANCiBlbnVtIGh2bV90cmFuc2xhdGlvbl9yZXN1bHQgaHZtX2NvcHlf
ZnJvbV9ndWVzdF9saW5lYXIoDQogICAgIHZvaWQgKmJ1ZiwgdW5zaWduZWQgbG9uZyBhZGRyLCBp
bnQgc2l6ZSwgdWludDMyX3QgcGZlYywNCi0gICAgcGFnZWZhdWx0X2luZm9fdCAqcGZpbmZvKQ0K
KyAgICBwYWdlZmF1bHRfaW5mb190ICpwZmluZm8sIGJvb2wgc2VuZF9ldmVudCkNCiB7DQogICAg
IHJldHVybiBfX2h2bV9jb3B5KGJ1ZiwgYWRkciwgc2l6ZSwgY3VycmVudCwNCiAgICAgICAgICAg
ICAgICAgICAgICAgSFZNQ09QWV9mcm9tX2d1ZXN0IHwgSFZNQ09QWV9saW5lYXIsDQotICAgICAg
ICAgICAgICAgICAgICAgIFBGRUNfcGFnZV9wcmVzZW50IHwgcGZlYywgcGZpbmZvKTsNCisgICAg
ICAgICAgICAgICAgICAgICAgUEZFQ19wYWdlX3ByZXNlbnQgfCBwZmVjLCBwZmluZm8sIHNlbmRf
ZXZlbnQpOw0KIH0NCiANCiB1bnNpZ25lZCBsb25nIGNvcHlfdG9fdXNlcl9odm0odm9pZCAqdG8s
IGNvbnN0IHZvaWQgKmZyb20sIHVuc2lnbmVkIGludCBsZW4pDQpAQCAtMzMzMyw3ICszMzQwLDcg
QEAgdW5zaWduZWQgbG9uZyBjb3B5X2Zyb21fdXNlcl9odm0odm9pZCAqdG8sIGNvbnN0IHZvaWQg
KmZyb20sIHVuc2lnbmVkIGxlbikNCiAgICAgICAgIHJldHVybiAwOw0KICAgICB9DQogDQotICAg
IHJjID0gaHZtX2NvcHlfZnJvbV9ndWVzdF9saW5lYXIodG8sICh1bnNpZ25lZCBsb25nKWZyb20s
IGxlbiwgMCwgTlVMTCk7DQorICAgIHJjID0gaHZtX2NvcHlfZnJvbV9ndWVzdF9saW5lYXIodG8s
ICh1bnNpZ25lZCBsb25nKWZyb20sIGxlbiwgMCwgTlVMTCwgZmFsc2UpOw0KICAgICByZXR1cm4g
cmMgPyBsZW4gOiAwOyAvKiBmYWtlIGEgY29weV9mcm9tX3VzZXIoKSByZXR1cm4gY29kZSAqLw0K
IH0NCiANCkBAIC0zNzA3LDcgKzM3MTQsNyBAQCB2b2lkIGh2bV91ZF9pbnRlcmNlcHQoc3RydWN0
IGNwdV91c2VyX3JlZ3MgKnJlZ3MpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHNpemVvZihzaWcpLCBodm1fYWNjZXNzX2luc25fZmV0Y2gsDQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzLCAmYWRkcikgJiYNCiAgICAgICAgICAgICAg
KGh2bV9jb3B5X2Zyb21fZ3Vlc3RfbGluZWFyKHNpZywgYWRkciwgc2l6ZW9mKHNpZyksDQotICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWxrLCBOVUxMKSA9PSBIVk1U
UkFOU19va2F5KSAmJg0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
d2FsaywgTlVMTCwgZmFsc2UpID09IEhWTVRSQU5TX29rYXkpICYmDQogICAgICAgICAgICAgICht
ZW1jbXAoc2lnLCAiXHhmXHhieGVuIiwgc2l6ZW9mKHNpZykpID09IDApICkNCiAgICAgICAgIHsN
CiAgICAgICAgICAgICByZWdzLT5yaXAgKz0gc2l6ZW9mKHNpZyk7DQpkaWZmIC0tZ2l0IGEveGVu
L2FyY2gveDg2L2h2bS9zdm0vc3ZtLmMgYi94ZW4vYXJjaC94ODYvaHZtL3N2bS9zdm0uYw0KaW5k
ZXggZDgxNDAxZGJjMC4uNWRmYWFiMjZkYiAxMDA2NDQNCi0tLSBhL3hlbi9hcmNoL3g4Ni9odm0v
c3ZtL3N2bS5jDQorKysgYi94ZW4vYXJjaC94ODYvaHZtL3N2bS9zdm0uYw0KQEAgLTEyNTUsNyAr
MTI1NSw3IEBAIHN0YXRpYyB2b2lkIHN2bV9lbXVsX3N3aW50X2luamVjdGlvbihzdHJ1Y3QgeDg2
X2V2ZW50ICpldmVudCkNCiAgICAgICAgIGdvdG8gcmFpc2VfZXhjZXB0aW9uOw0KIA0KICAgICBy
YyA9IGh2bV9jb3B5X2Zyb21fZ3Vlc3RfbGluZWFyKCZpZHRlLCBpZHRlX2xpbmVhcl9hZGRyLCBp
ZHRlX3NpemUsDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUEZFQ19pbXBs
aWNpdCwgJnBmaW5mbyk7DQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUEZF
Q19pbXBsaWNpdCwgJnBmaW5mbywgZmFsc2UpOw0KICAgICBpZiAoIHJjICkNCiAgICAgew0KICAg
ICAgICAgaWYgKCByYyA9PSBIVk1UUkFOU19iYWRfbGluZWFyX3RvX2dmbiApDQpkaWZmIC0tZ2l0
IGEveGVuL2FyY2gveDg2L2h2bS92bV9ldmVudC5jIGIveGVuL2FyY2gveDg2L2h2bS92bV9ldmVu
dC5jDQppbmRleCAxMjFkZTIzMDcxLi42ZDIwM2U4ZGI1IDEwMDY0NA0KLS0tIGEveGVuL2FyY2gv
eDg2L2h2bS92bV9ldmVudC5jDQorKysgYi94ZW4vYXJjaC94ODYvaHZtL3ZtX2V2ZW50LmMNCkBA
IC04Nyw3ICs4Nyw3IEBAIHZvaWQgaHZtX3ZtX2V2ZW50X2RvX3Jlc3VtZShzdHJ1Y3QgdmNwdSAq
dikNCiAgICAgICAgICAgICBraW5kID0gRU1VTF9LSU5EX1NFVF9DT05URVhUX0lOU047DQogDQog
ICAgICAgICBodm1fZW11bGF0ZV9vbmVfdm1fZXZlbnQoa2luZCwgVFJBUF9pbnZhbGlkX29wLA0K
LSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFg4Nl9FVkVOVF9OT19FQyk7DQorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWDg2X0VWRU5UX05PX0VDLCBmYWxzZSk7DQog
DQogICAgICAgICB2LT5hcmNoLnZtX2V2ZW50LT5lbXVsYXRlX2ZsYWdzID0gMDsNCiAgICAgfQ0K
ZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9odm0vdm14L3Z2bXguYyBiL3hlbi9hcmNoL3g4Ni9o
dm0vdm14L3Z2bXguYw0KaW5kZXggMzMyNjIzZDAwNi4uNWE4NDBhMjYyMSAxMDA2NDQNCi0tLSBh
L3hlbi9hcmNoL3g4Ni9odm0vdm14L3Z2bXguYw0KKysrIGIveGVuL2FyY2gveDg2L2h2bS92bXgv
dnZteC5jDQpAQCAtNDI2LDcgKzQyNiw3IEBAIHN0YXRpYyBpbnQgZGVjb2RlX3ZteF9pbnN0KHN0
cnVjdCBjcHVfdXNlcl9yZWdzICpyZWdzLA0KICAgICAgICAgew0KICAgICAgICAgICAgIHBhZ2Vm
YXVsdF9pbmZvX3QgcGZpbmZvOw0KICAgICAgICAgICAgIGludCByYyA9IGh2bV9jb3B5X2Zyb21f
Z3Vlc3RfbGluZWFyKHBvcGVyYW5kUywgYmFzZSwgc2l6ZSwNCi0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAmcGZpbmZvKTsNCisgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAmcGZpbmZvLCBmYWxzZSk7DQog
DQogICAgICAgICAgICAgaWYgKCByYyA9PSBIVk1UUkFOU19iYWRfbGluZWFyX3RvX2dmbiApDQog
ICAgICAgICAgICAgICAgIGh2bV9pbmplY3RfcGFnZV9mYXVsdChwZmluZm8uZWMsIHBmaW5mby5s
aW5lYXIpOw0KZGlmZiAtLWdpdCBhL3hlbi9hcmNoL3g4Ni9tbS9tZW1fYWNjZXNzLmMgYi94ZW4v
YXJjaC94ODYvbW0vbWVtX2FjY2Vzcy5jDQppbmRleCAwMTQ0ZjkyYjk4Li5jOTk3MmJhYjhjIDEw
MDY0NA0KLS0tIGEveGVuL2FyY2gveDg2L21tL21lbV9hY2Nlc3MuYw0KKysrIGIveGVuL2FyY2gv
eDg2L21tL21lbV9hY2Nlc3MuYw0KQEAgLTIxNCw3ICsyMTQsOCBAQCBib29sIHAybV9tZW1fYWNj
ZXNzX2NoZWNrKHBhZGRyX3QgZ3BhLCB1bnNpZ25lZCBsb25nIGdsYSwNCiAgICAgICAgICBkLT5h
cmNoLm1vbml0b3IuaW5ndWVzdF9wYWdlZmF1bHRfZGlzYWJsZWQgJiYNCiAgICAgICAgICBucGZl
Yy5raW5kICE9IG5wZmVjX2tpbmRfd2l0aF9nbGEgKSAvKiBkb24ndCBzZW5kIGEgbWVtX2V2ZW50
ICovDQogICAgIHsNCi0gICAgICAgIGh2bV9lbXVsYXRlX29uZV92bV9ldmVudChFTVVMX0tJTkRf
Tk9STUFMLCBUUkFQX2ludmFsaWRfb3AsIFg4Nl9FVkVOVF9OT19FQyk7DQorICAgICAgICBodm1f
ZW11bGF0ZV9vbmVfdm1fZXZlbnQoRU1VTF9LSU5EX05PUk1BTCwgVFJBUF9pbnZhbGlkX29wLA0K
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFg4Nl9FVkVOVF9OT19FQywgdHJ1ZSk7
DQogDQogICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgfQ0KZGlmZiAtLWdpdCBhL3hlbi9hcmNo
L3g4Ni9tbS9zaGFkb3cvY29tbW9uLmMgYi94ZW4vYXJjaC94ODYvbW0vc2hhZG93L2NvbW1vbi5j
DQppbmRleCA3OTUyMDFkYzgyLi4yYmI4MGFjY2YwIDEwMDY0NA0KLS0tIGEveGVuL2FyY2gveDg2
L21tL3NoYWRvdy9jb21tb24uYw0KKysrIGIveGVuL2FyY2gveDg2L21tL3NoYWRvdy9jb21tb24u
Yw0KQEAgLTE2Niw3ICsxNjYsNyBAQCBjb25zdCBzdHJ1Y3QgeDg2X2VtdWxhdGVfb3BzICpzaGFk
b3dfaW5pdF9lbXVsYXRpb24oDQogICAgICAgICAgICAgaHZtX2FjY2Vzc19pbnNuX2ZldGNoLCBz
aF9jdHh0LCAmYWRkcikgJiYNCiAgICAgICAgICAhaHZtX2NvcHlfZnJvbV9ndWVzdF9saW5lYXIo
DQogICAgICAgICAgICAgIHNoX2N0eHQtPmluc25fYnVmLCBhZGRyLCBzaXplb2Yoc2hfY3R4dC0+
aW5zbl9idWYpLA0KLSAgICAgICAgICAgICBQRkVDX2luc25fZmV0Y2gsIE5VTEwpKQ0KKyAgICAg
ICAgICAgICBQRkVDX2luc25fZmV0Y2gsIE5VTEwsIGZhbHNlKSkNCiAgICAgICAgID8gc2l6ZW9m
KHNoX2N0eHQtPmluc25fYnVmKSA6IDA7DQogDQogICAgIHJldHVybiAmaHZtX3NoYWRvd19lbXVs
YXRvcl9vcHM7DQpAQCAtMjAxLDcgKzIwMSw3IEBAIHZvaWQgc2hhZG93X2NvbnRpbnVlX2VtdWxh
dGlvbihzdHJ1Y3Qgc2hfZW11bGF0ZV9jdHh0ICpzaF9jdHh0LA0KICAgICAgICAgICAgICAgICBo
dm1fYWNjZXNzX2luc25fZmV0Y2gsIHNoX2N0eHQsICZhZGRyKSAmJg0KICAgICAgICAgICAgICAh
aHZtX2NvcHlfZnJvbV9ndWVzdF9saW5lYXIoDQogICAgICAgICAgICAgICAgICBzaF9jdHh0LT5p
bnNuX2J1ZiwgYWRkciwgc2l6ZW9mKHNoX2N0eHQtPmluc25fYnVmKSwNCi0gICAgICAgICAgICAg
ICAgIFBGRUNfaW5zbl9mZXRjaCwgTlVMTCkpDQorICAgICAgICAgICAgICAgICBQRkVDX2luc25f
ZmV0Y2gsIE5VTEwsIGZhbHNlKSkNCiAgICAgICAgICAgICA/IHNpemVvZihzaF9jdHh0LT5pbnNu
X2J1ZikgOiAwOw0KICAgICAgICAgc2hfY3R4dC0+aW5zbl9idWZfZWlwID0gcmVncy0+cmlwOw0K
ICAgICB9DQpkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L21tL3NoYWRvdy9odm0uYyBiL3hlbi9h
cmNoL3g4Ni9tbS9zaGFkb3cvaHZtLmMNCmluZGV4IGM2NDY5Yzg0NmMuLjM4NDFkMGNlYjcgMTAw
NjQ0DQotLS0gYS94ZW4vYXJjaC94ODYvbW0vc2hhZG93L2h2bS5jDQorKysgYi94ZW4vYXJjaC94
ODYvbW0vc2hhZG93L2h2bS5jDQpAQCAtMTI1LDcgKzEyNSw3IEBAIGh2bV9yZWFkKGVudW0geDg2
X3NlZ21lbnQgc2VnLA0KICAgICByYyA9IGh2bV9jb3B5X2Zyb21fZ3Vlc3RfbGluZWFyKHBfZGF0
YSwgYWRkciwgYnl0ZXMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFj
Y2Vzc190eXBlID09IGh2bV9hY2Nlc3NfaW5zbl9mZXRjaA0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICA/IFBGRUNfaW5zbl9mZXRjaCA6IDApLA0KLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZwZmluZm8pOw0KKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICZwZmluZm8sIGZhbHNlKTsNCiANCiAgICAgc3dpdGNoICggcmMgKQ0KICAg
ICB7DQpkaWZmIC0tZ2l0IGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9odm0vZW11bGF0ZS5oIGIveGVu
L2luY2x1ZGUvYXNtLXg4Ni9odm0vZW11bGF0ZS5oDQppbmRleCBiMzlhMWEwMzMxLi45YmVkMGFh
ODNlIDEwMDY0NA0KLS0tIGEveGVuL2luY2x1ZGUvYXNtLXg4Ni9odm0vZW11bGF0ZS5oDQorKysg
Yi94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9lbXVsYXRlLmgNCkBAIC00Nyw2ICs0Nyw3IEBAIHN0
cnVjdCBodm1fZW11bGF0ZV9jdHh0IHsNCiAgICAgdWludDMyX3QgaW50cl9zaGFkb3c7DQogDQog
ICAgIGJvb2xfdCBzZXRfY29udGV4dDsNCisgICAgYm9vbCBzZW5kX2V2ZW50Ow0KIH07DQogDQog
ZW51bSBlbXVsX2tpbmQgew0KQEAgLTYzLDcgKzY0LDggQEAgaW50IGh2bV9lbXVsYXRlX29uZSgN
CiAgICAgc3RydWN0IGh2bV9lbXVsYXRlX2N0eHQgKmh2bWVtdWxfY3R4dCk7DQogdm9pZCBodm1f
ZW11bGF0ZV9vbmVfdm1fZXZlbnQoZW51bSBlbXVsX2tpbmQga2luZCwNCiAgICAgdW5zaWduZWQg
aW50IHRyYXBuciwNCi0gICAgdW5zaWduZWQgaW50IGVycmNvZGUpOw0KKyAgICB1bnNpZ25lZCBp
bnQgZXJyY29kZSwNCisgICAgYm9vbCBzZW5kX2V2ZW50KTsNCiAvKiBNdXN0IGJlIGNhbGxlZCBv
bmNlIHRvIHNldCB1cCBodm1lbXVsIHN0YXRlLiAqLw0KIHZvaWQgaHZtX2VtdWxhdGVfaW5pdF9v
bmNlKA0KICAgICBzdHJ1Y3QgaHZtX2VtdWxhdGVfY3R4dCAqaHZtZW11bF9jdHh0LA0KQEAgLTgw
LDYgKzgyLDExIEBAIHN0cnVjdCBzZWdtZW50X3JlZ2lzdGVyICpodm1lbXVsX2dldF9zZWdfcmVn
KA0KICAgICBlbnVtIHg4Nl9zZWdtZW50IHNlZywNCiAgICAgc3RydWN0IGh2bV9lbXVsYXRlX2N0
eHQgKmh2bWVtdWxfY3R4dCk7DQogaW50IGh2bV9lbXVsYXRlX29uZV9tbWlvKHVuc2lnbmVkIGxv
bmcgbWZuLCB1bnNpZ25lZCBsb25nIGdsYSk7DQorYm9vbCBodm1fZW11bGF0ZV9zZW5kX3ZtX2V2
ZW50KA0KKyAgICB1bnNpZ25lZCBsb25nIGdsYSwNCisgICAgZ2ZuX3QgZ2ZuLA0KKyAgICB1aW50
MzJfdCBwZmVjLA0KKyAgICBib29sIHNlbmRfZXZlbnQpOw0KIA0KIHN0YXRpYyBpbmxpbmUgYm9v
bCBoYW5kbGVfbW1pbyh2b2lkKQ0KIHsNCmRpZmYgLS1naXQgYS94ZW4vaW5jbHVkZS9hc20teDg2
L2h2bS9zdXBwb3J0LmggYi94ZW4vaW5jbHVkZS9hc20teDg2L2h2bS9zdXBwb3J0LmgNCmluZGV4
IGU5ODlhYTczNDkuLjkxNGYzODg5MjEgMTAwNjQ0DQotLS0gYS94ZW4vaW5jbHVkZS9hc20teDg2
L2h2bS9zdXBwb3J0LmgNCisrKyBiL3hlbi9pbmNsdWRlL2FzbS14ODYvaHZtL3N1cHBvcnQuaA0K
QEAgLTk5LDcgKzk5LDcgQEAgZW51bSBodm1fdHJhbnNsYXRpb25fcmVzdWx0IGh2bV9jb3B5X3Rv
X2d1ZXN0X2xpbmVhcigNCiAgICAgcGFnZWZhdWx0X2luZm9fdCAqcGZpbmZvKTsNCiBlbnVtIGh2
bV90cmFuc2xhdGlvbl9yZXN1bHQgaHZtX2NvcHlfZnJvbV9ndWVzdF9saW5lYXIoDQogICAgIHZv
aWQgKmJ1ZiwgdW5zaWduZWQgbG9uZyBhZGRyLCBpbnQgc2l6ZSwgdWludDMyX3QgcGZlYywNCi0g
ICAgcGFnZWZhdWx0X2luZm9fdCAqcGZpbmZvKTsNCisgICAgcGFnZWZhdWx0X2luZm9fdCAqcGZp
bmZvLCBib29sIHNlbmRfZXZlbnQpOw0KIA0KIC8qDQogICogR2V0IGEgcmVmZXJlbmNlIG9uIHRo
ZSBwYWdlIHVuZGVyIGFuIEhWTSBwaHlzaWNhbCBvciBsaW5lYXIgYWRkcmVzcy4gIElmDQotLSAN
CjIuMTcuMQ0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpYZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpo
dHRwczovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

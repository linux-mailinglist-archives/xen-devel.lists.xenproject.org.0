Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id ED3DB1758BF
	for <lists+xen-devel@lfdr.de>; Mon,  2 Mar 2020 11:56:23 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1j8igg-0003OB-Dy; Mon, 02 Mar 2020 10:52:38 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=GA0H=4T=suse.com=jbeulich@srs-us1.protection.inumbo.net>)
 id 1j8igf-0003O6-CB
 for xen-devel@lists.xenproject.org; Mon, 02 Mar 2020 10:52:37 +0000
X-Inumbo-ID: ecc72e8f-5c73-11ea-9f39-12813bfff9fa
Received: from mx2.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id ecc72e8f-5c73-11ea-9f39-12813bfff9fa;
 Mon, 02 Mar 2020 10:52:35 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id A90A3B29E;
 Mon,  2 Mar 2020 10:52:34 +0000 (UTC)
To: =?UTF-8?Q?Roger_Pau_Monn=c3=a9?= <roger.pau@citrix.com>
References: <20200219174354.84726-1-roger.pau@citrix.com>
 <20200219174354.84726-8-roger.pau@citrix.com>
 <aa482834-7454-9fcb-2aed-86f4c01b134e@suse.com>
 <20200228172351.GH24458@Air-de-Roger.citrite.net>
From: Jan Beulich <jbeulich@suse.com>
Message-ID: <937e9136-f8d6-23fe-d514-f34716b1b99b@suse.com>
Date: Mon, 2 Mar 2020 11:52:33 +0100
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.5.0
MIME-Version: 1.0
In-Reply-To: <20200228172351.GH24458@Air-de-Roger.citrite.net>
Content-Language: en-US
Subject: Re: [Xen-devel] [PATCH v5 7/7] x86/tlb: use Xen L0 assisted TLB
 flush when available
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: xen-devel@lists.xenproject.org, Wei Liu <wl@xen.org>,
 Andrew Cooper <andrew.cooper3@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

T24gMjguMDIuMjAyMCAxODoyMywgUm9nZXIgUGF1IE1vbm7DqSB3cm90ZToKPiBPbiBGcmksIEZl
YiAyOCwgMjAyMCBhdCAwNjowMDo0NFBNICswMTAwLCBKYW4gQmV1bGljaCB3cm90ZToKPj4gT24g
MTkuMDIuMjAyMCAxODo0MywgUm9nZXIgUGF1IE1vbm5lIHdyb3RlOgo+Pj4gVXNlIFhlbidzIEww
IEhWTU9QX2ZsdXNoX3RsYnMgaHlwZXJjYWxsIGluIG9yZGVyIHRvIHBlcmZvcm0gZmx1c2hlcy4K
Pj4+IFRoaXMgZ3JlYXRseSBpbmNyZWFzZXMgdGhlIHBlcmZvcm1hbmNlIG9mIFRMQiBmbHVzaGVz
IHdoZW4gcnVubmluZwo+Pj4gd2l0aCBhIGhpZ2ggYW1vdW50IG9mIHZDUFVzIGFzIGEgWGVuIGd1
ZXN0LCBhbmQgaXMgc3BlY2lhbGx5IGltcG9ydGFudAo+Pj4gd2hlbiBydW5uaW5nIGluIHNoaW0g
bW9kZS4KPj4+Cj4+PiBUaGUgZm9sbG93aW5nIGZpZ3VyZXMgYXJlIGZyb20gYSBQViBndWVzdCBy
dW5uaW5nIGBtYWtlIC1qMzIgeGVuYCBpbgo+Pj4gc2hpbSBtb2RlIHdpdGggMzIgdkNQVXMgYW5k
IEhBUC4KPj4+Cj4+PiBVc2luZyB4MkFQSUMgYW5kIEFMTEJVVCBzaG9ydGhhbmQ6Cj4+PiByZWFs
CTRtMzUuOTczcwo+Pj4gdXNlcgk0bTM1LjExMHMKPj4+IHN5cwkzNm0yNC4xMTdzCj4+Pgo+Pj4g
VXNpbmcgTDAgYXNzaXN0ZWQgZmx1c2g6Cj4+PiByZWFsICAgIDFtMi41OTZzCj4+PiB1c2VyICAg
IDRtMzQuODE4cwo+Pj4gc3lzICAgICA1bTE2LjM3NHMKPj4+Cj4+PiBUaGUgaW1wbGVtZW50YXRp
b24gYWRkcyBhIG5ldyBob29rIHRvIGh5cGVydmlzb3Jfb3BzIHNvIG90aGVyCj4+PiBlbmxpZ2h0
ZW5tZW50cyBjYW4gYWxzbyBpbXBsZW1lbnQgc3VjaCBhc3Npc3RlZCBmbHVzaCBqdXN0IGJ5IGZp
bGxpbmcKPj4+IHRoZSBob29rLiBOb3RlIHRoYXQgdGhlIFhlbiBpbXBsZW1lbnRhdGlvbiBjb21w
bGV0ZWx5IGlnbm9yZXMgdGhlCj4+PiBkaXJ0eSBDUFUgbWFzayBhbmQgdGhlIGxpbmVhciBhZGRy
ZXNzIHBhc3NlZCBpbiwgYW5kIGFsd2F5cyBwZXJmb3JtcyBhCj4+PiBnbG9iYWwgVExCIGZsdXNo
IG9uIGFsbCB2Q1BVcy4KPj4KPj4gVGhpcyBpc24ndCBiZWNhdXNlIG9mIGFuIGltcGxlbWVudGF0
aW9uIGNob2ljZSBvZiB5b3VycywgYnV0IGJlY2F1c2UKPj4gb2YgaG93IEhWTU9QX2ZsdXNoX3Rs
YnMgd29ya3MuIEkgdGhpbmsgdGhlIHN0YXRlbWVudCBzaG91bGQgc29tZWhvdwo+PiBleHByZXNz
IHRoaXMuIEkgYWxzbyB0aGluayBpdCB3YW50cyBjbGFyaWZ5aW5nIHRoYXQgdXNpbmcgdGhlCj4+
IGh5cGVyY2FsbCBpcyBpbmRlZWQgZmFzdGVyIGV2ZW4gaW4gdGhlIGNhc2Ugb2Ygc2luZ2xlLXBh
Z2UsIHNpbmdsZS0KPj4gQ1BVIGZsdXNoCj4gCj4gQXJlIHlvdSBzdXJlIGFib3V0IHRoaXM/IEkg
dGhpbmsgdGFraW5nIGEgdm1leGl0IGlzIGdvaW5nIHRvIGJlIG1vcmUKPiBjb3N0bHkgdGhhbiBl
eGVjdXRpbmcgYSBsb2NhbCBpbnZscGc/CgpUaGUgYW5zd2VyIHRvIHRoaXMgd2FzIGFscmVhZHkg
Li4uCgo+PiAod2hpY2ggSSBzdXNwZWN0IG1heSBub3QgYmUgdGhlIGNhc2UgZXNwZWNpYWxseSBh
cyB2Q1BVCj4+IGNvdW50IGdyb3dzKS4KCi4uLiBoZXJlIChvciBhdCBsZWFzdCBpdCB3YXMgbWVh
bnQgdG8gYWRkcmVzcyBxdWVzdGlvbnMgYmFjawpsaWtlIHRoaXMgb25lKS4KCj4+IFRoZSBzdGF0
cyBhYm92ZSBwcm92ZSBhIHBvc2l0aXZlIG92ZXJhbGwgZWZmZWN0LCBidXQKPj4gdGhleSBkb24n
dCBzYXkgd2hldGhlciB0aGUgZWZmZWN0IGNvdWxkIGJlIGV2ZW4gYmlnZ2VyIGJ5IGJlaW5nIGF0
Cj4+IGxlYXN0IGEgbGl0dGxlIHNlbGVjdGl2ZS4KPiAKPiBJIGFzc3VtZSB0aGF0IGJlaW5nIGFi
bGUgdG8gcHJvdmlkZSBhIGJpdG1hcCB3aXRoIHRoZSB2Q1BVcyBvbiB3aGV0aGVyCj4gdGhlIFRM
QiBmbHVzaCBzaG91bGQgYmUgcGVyZm9ybWVkIHdvdWxkIGdpdmUgdXMgc29tZSBtb3JlIHBlcmZv
cm1hbmNlLAo+IGJ1dCBJIGhhdmVuJ3QgbG9va2VkIGludG8gaXQgeWV0Lgo+IAo+Pj4gQEAgLTcz
LDYgKzc0LDE1IEBAIHZvaWQgX19pbml0IGh5cGVydmlzb3JfZTgyMF9maXh1cChzdHJ1Y3QgZTgy
MG1hcCAqZTgyMCkKPj4+ICAgICAgICAgIG9wcy5lODIwX2ZpeHVwKGU4MjApOwo+Pj4gIH0KPj4+
ICAKPj4+ICtpbnQgaHlwZXJ2aXNvcl9mbHVzaF90bGIoY29uc3QgY3B1bWFza190ICptYXNrLCBj
b25zdCB2b2lkICp2YSwKPj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50
IG9yZGVyKQo+Pj4gK3sKPj4+ICsgICAgaWYgKCBvcHMuZmx1c2hfdGxiICkKPj4+ICsgICAgICAg
IHJldHVybiBhbHRlcm5hdGl2ZV9jYWxsKG9wcy5mbHVzaF90bGIsIG1hc2ssIHZhLCBvcmRlcik7
Cj4+PiArCj4+PiArICAgIHJldHVybiAtRU5PU1lTOwo+Pj4gK30KPj4KPj4gUGxlYXNlIG5vIG5l
dyAtRU5PU1lTIGFueXdoZXJlIChleGNlcHQgaW4gbmV3IHBvcnRzJyB0b3AgbGV2ZWwKPj4gaHlw
ZXJjYWxsIGhhbmRsZXJzKS4KPiAKPiBBY2suIElzIEVPUE5PVFNVUFAgT0s/CgpTdXJlLgoKPj4+
IEBAIC0yNTYsNiArMjU3LDE2IEBAIHZvaWQgZmx1c2hfYXJlYV9tYXNrKGNvbnN0IGNwdW1hc2tf
dCAqbWFzaywgY29uc3Qgdm9pZCAqdmEsIHVuc2lnbmVkIGludCBmbGFncykKPj4+ICAgICAgaWYg
KCAoZmxhZ3MgJiB+RkxVU0hfT1JERVJfTUFTSykgJiYKPj4+ICAgICAgICAgICAhY3B1bWFza19z
dWJzZXQobWFzaywgY3B1bWFza19vZihjcHUpKSApCj4+PiAgICAgIHsKPj4+ICsgICAgICAgIGlm
ICggY3B1X2hhc19oeXBlcnZpc29yICYmCj4+PiArICAgICAgICAgICAgICEoZmxhZ3MgJiB+KEZM
VVNIX1RMQiB8IEZMVVNIX1RMQl9HTE9CQUwgfCBGTFVTSF9WQV9WQUxJRCB8Cj4+PiArICAgICAg
ICAgICAgICAgICAgICAgICAgIEZMVVNIX09SREVSX01BU0spKSAmJgo+Pj4gKyAgICAgICAgICAg
ICAhaHlwZXJ2aXNvcl9mbHVzaF90bGIobWFzaywgdmEsIChmbGFncyAtIDEpICYgRkxVU0hfT1JE
RVJfTUFTSykgKQo+Pj4gKyAgICAgICAgewo+Pj4gKyAgICAgICAgICAgIGlmICggdGxiX2Nsa19l
bmFibGVkICkKPj4+ICsgICAgICAgICAgICAgICAgdGxiX2Nsa19lbmFibGVkID0gZmFsc2U7Cj4+
Cj4+IFdoeSBkb2VzIHRoaXMgbmVlZCBkb2luZyBoZXJlPyBDb3VsZG4ndCBYZW4gZ3Vlc3Qgc2V0
dXAgY29kZQo+PiBjbGVhciB0aGUgZmxhZz8KPiAKPiBCZWNhdXNlIGl0J3MgcG9zc2libGUgdGhh
dCB0aGUgaHlwZXJjYWxscyBmYWlscywgYW5kIGhlbmNlIHRoZSB0bGIKPiBjbG9jayBzaG91bGQg
YmUga2VwdCBlbmFibGVkLiBUaGVyZSdzIG5vIHJlYXNvbiB0byBkaXNhYmxlIGl0IHVudGlsCj4g
WGVuIGtub3dzIHRoZSBhc3Npc3RlZCBmbHVzaCBpcyBpbmRlZWQgYXZhaWxhYmxlLgo+IAo+IEkg
ZG9uJ3QgbWluZCBtb3ZpbmcgaXQgdG8gWGVuIGd1ZXN0IHNldHVwIGNvZGUsIGJ1dCBJJ20gbm90
IHN1cmUgSSBzZWUKPiB3aHkgaXQgd291bGQgYmUgYW55IGJldHRlciB0aGFuIGRvaW5nIGl0IGhl
cmUuIFRoZSBvbmx5IHJlYXNvbiBJIGd1ZXNzCj4gaXMgdG8gYXZvaWQgY2hlY2tpbmcgdGxiX2Ns
a19lbmFibGVkIG9uIGV2ZXJ5IHN1Y2Nlc3NmdWwgYXNzaXN0ZWQKPiBmbHVzaD8KCldlbGwsIGlp
cmMgdGhlcmUgaGFkIGFscmVhZHkgYmVlbiBhIHF1ZXN0aW9uIG9uIHdoeSB0aGUgaWYoKSBoZXJl
CmlzIG5lZWRlZC4gSSBzZWNvbmQgdGhlIHJlYXNvbiwgYnV0IHRoZSB3aG9sZSBjb25zdHJ1Y3Qg
bG9va3MKbWlzcGxhY2VkLCBpLmUuIGlzIHByb25lIHRvIGNhdXNlIGZ1cnRoZXIgcXVlc3Rpb25z
IGRvd24gdGhlIHJvYWQuCkkgdGhpbmsgaWYgaXQgd2FzIHRvIHN0YXkgaGVyZSwgYSBjb21tZW50
IHdvdWxkIGJlIG5lZWRlZCB0bwphZGRyZXNzIGFueSBzdWNoIHBvc3NpYmxlIHF1ZXN0aW9ucy4g
QnV0IEkgc3RpbGwgdGhpbmsgaXQgc2hvdWxkCmxpdmUgaW4gdGhlIGluaXQgY29kZS4gVGhpcyBp
c24ndCBhIGZlYXR1cmUgdGhhdCBzaW1wbHkgbGFja3MgYQpDUFVJRCBiaXQgKG9yIGFsaWtlKSBh
bmQgaGVuY2UgbmVlZHMgcHJvYmluZyAodW5sZXNzIG9mIGNvdXJzZQp3ZSBleHBlY3QgcGVvcGxl
IHRvIHdhbnQgdG8gcHV0IGEgbW9kZXJuIFhlbiBbc2hpbV0gb24gdG9wIG9mIGEKcHJlLTMuPHdo
YXRldmVyPiBYZW47IGFuZCBldmVuIHRoZW4geW91IGNvdWxkIHByb2JlIHRoZQp1bmRlcmx5aW5n
IGh5cGVyY2FsbCBvbmNlIGF0IGJvb3QgdGltZSkuCgpKYW4KCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fClhlbi1kZXZlbCBtYWlsaW5nIGxpc3QKWGVuLWRl
dmVsQGxpc3RzLnhlbnByb2plY3Qub3JnCmh0dHBzOi8vbGlzdHMueGVucHJvamVjdC5vcmcvbWFp
bG1hbi9saXN0aW5mby94ZW4tZGV2ZWw=

Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 595E02C48D
	for <lists+xen-devel@lfdr.de>; Tue, 28 May 2019 12:38:26 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hVZRm-0008Fm-Ca; Tue, 28 May 2019 10:35:10 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89)
 (envelope-from <SRS0=31/0=T4=suse.com=jgross@srs-us1.protection.inumbo.net>)
 id 1hVZQR-0005KJ-33
 for xen-devel@lists.xenproject.org; Tue, 28 May 2019 10:33:47 +0000
X-Inumbo-ID: 05d334de-8134-11e9-8b5d-332403fe6749
Received: from mx1.suse.de (unknown [195.135.220.15])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 05d334de-8134-11e9-8b5d-332403fe6749;
 Tue, 28 May 2019 10:33:40 +0000 (UTC)
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 98A89B049;
 Tue, 28 May 2019 10:33:23 +0000 (UTC)
From: Juergen Gross <jgross@suse.com>
To: xen-devel@lists.xenproject.org
Date: Tue, 28 May 2019 12:32:40 +0200
Message-Id: <20190528103313.1343-28-jgross@suse.com>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20190528103313.1343-1-jgross@suse.com>
References: <20190528103313.1343-1-jgross@suse.com>
Subject: [Xen-devel] [PATCH 27/60] xen/sched: use sched_resource cpu instead
 smp_processor_id in schedulers
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Juergen Gross <jgross@suse.com>, Tim Deegan <tim@xen.org>,
 Stefano Stabellini <sstabellini@kernel.org>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <george.dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 Robert VanVossen <robert.vanvossen@dornerworks.com>,
 Dario Faggioli <dfaggioli@suse.com>, Julien Grall <julien.grall@arm.com>,
 Josh Whitehead <josh.whitehead@dornerworks.com>,
 Meng Xu <mengxu@cis.upenn.edu>, Jan Beulich <jbeulich@suse.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RXNwZWNpYWxseSBpbiB0aGUgZG9fc2NoZWR1bGUoKSBmdW5jdGlvbnMgb2YgdGhlIGRpZmZlcmVu
dCBzY2hlZHVsZXJzCnVzaW5nIHNtcF9wcm9jZXNzb3JfaWQoKSBmb3IgdGhlIGxvY2FsIGNwdSBu
dW1iZXIgaXMgY29ycmVjdCBvbmx5IGlmCnRoZSBzY2hlZF91bml0IGlzIGEgc2luZ2xlIHZjcHUu
IEFzIHNvb24gYXMgbGFyZ2VyIHNjaGVkX3VuaXRzIGFyZQp1c2VkIG1vc3QgdXNlcyBzaG91bGQg
YmUgcmVwbGFjZWQgYnkgdGhlIGNwdSBudW1iZXIgb2YgdGhlIGxvY2FsCnNjaGVkX3Jlc291cmNl
IGluc3RlYWQuCgpBZGQgYSBoZWxwZXIgdG8gZ2V0IHRoYXQgc2NoZWRfcmVzb3VyY2UgY3B1IGFu
ZCBtb2RpZnkgdGhlIHNjaGVkdWxlcnMKdG8gdXNlIGl0IGluIGEgY29ycmVjdCB3YXkuCgpTaWdu
ZWQtb2ZmLWJ5OiBKdWVyZ2VuIEdyb3NzIDxqZ3Jvc3NAc3VzZS5jb20+Ci0tLQogeGVuL2NvbW1v
bi9zY2hlZF9hcmluYzY1My5jIHwgIDIgKy0KIHhlbi9jb21tb24vc2NoZWRfY3JlZGl0LmMgICB8
IDIxICsrKysrKysrKy0tLS0tLS0tLQogeGVuL2NvbW1vbi9zY2hlZF9jcmVkaXQyLmMgIHwgNTMg
KysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiB4ZW4vY29tbW9u
L3NjaGVkX251bGwuYyAgICAgfCAxNyArKysrKysrKy0tLS0tLS0KIHhlbi9jb21tb24vc2NoZWRf
cnQuYyAgICAgICB8IDE3ICsrKysrKysrLS0tLS0tLQogeGVuL2luY2x1ZGUveGVuL3NjaGVkLWlm
LmggIHwgIDUgKysrKysKIDYgZmlsZXMgY2hhbmdlZCwgNjIgaW5zZXJ0aW9ucygrKSwgNTMgZGVs
ZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZF9hcmluYzY1My5jIGIveGVu
L2NvbW1vbi9zY2hlZF9hcmluYzY1My5jCmluZGV4IDIxM2JjOTYwZWYuLmU0OGYyYjJlYjkgMTAw
NjQ0Ci0tLSBhL3hlbi9jb21tb24vc2NoZWRfYXJpbmM2NTMuYworKysgYi94ZW4vY29tbW9uL3Nj
aGVkX2FyaW5jNjUzLmMKQEAgLTUxMyw3ICs1MTMsNyBAQCBhNjUzc2NoZWRfZG9fc2NoZWR1bGUo
CiAgICAgc3RhdGljIHVuc2lnbmVkIGludCBzY2hlZF9pbmRleCA9IDA7CiAgICAgc3RhdGljIHNf
dGltZV90IG5leHRfc3dpdGNoX3RpbWU7CiAgICAgYTY1M3NjaGVkX3ByaXZfdCAqc2NoZWRfcHJp
diA9IFNDSEVEX1BSSVYob3BzKTsKLSAgICBjb25zdCB1bnNpZ25lZCBpbnQgY3B1ID0gc21wX3By
b2Nlc3Nvcl9pZCgpOworICAgIGNvbnN0IHVuc2lnbmVkIGludCBjcHUgPSBzY2hlZF9nZXRfcmVz
b3VyY2VfY3B1KHNtcF9wcm9jZXNzb3JfaWQoKSk7CiAgICAgdW5zaWduZWQgbG9uZyBmbGFnczsK
IAogICAgIHNwaW5fbG9ja19pcnFzYXZlKCZzY2hlZF9wcml2LT5sb2NrLCBmbGFncyk7CmRpZmYg
LS1naXQgYS94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdC5jIGIveGVuL2NvbW1vbi9zY2hlZF9jcmVk
aXQuYwppbmRleCAwNWRmOWU1NGFjLi5lNjdiOWJiMjNlIDEwMDY0NAotLS0gYS94ZW4vY29tbW9u
L3NjaGVkX2NyZWRpdC5jCisrKyBiL3hlbi9jb21tb24vc2NoZWRfY3JlZGl0LmMKQEAgLTE2OTAs
NyArMTY5MCw3IEBAIGNzY2hlZF9sb2FkX2JhbGFuY2Uoc3RydWN0IGNzY2hlZF9wcml2YXRlICpw
cnYsIGludCBjcHUsCiAgICAgaW50IHBlZXJfY3B1LCBmaXJzdF9jcHUsIHBlZXJfbm9kZSwgYnN0
ZXA7CiAgICAgaW50IG5vZGUgPSBjcHVfdG9fbm9kZShjcHUpOwogCi0gICAgQlVHX09OKCBjcHUg
IT0gc2NoZWRfdW5pdF9jcHUoc25leHQtPnVuaXQpICk7CisgICAgQlVHX09OKCBzY2hlZF9nZXRf
cmVzb3VyY2VfY3B1KGNwdSkgIT0gc2NoZWRfdW5pdF9jcHUoc25leHQtPnVuaXQpICk7CiAgICAg
b25saW5lID0gY3B1cG9vbF9vbmxpbmVfY3B1bWFzayhjKTsKIAogICAgIC8qCkBAIC0xODMxLDgg
KzE4MzEsOSBAQCBzdGF0aWMgc3RydWN0IHRhc2tfc2xpY2UKIGNzY2hlZF9zY2hlZHVsZSgKICAg
ICBjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIHNfdGltZV90IG5vdywgYm9vbF90IHRhc2ts
ZXRfd29ya19zY2hlZHVsZWQpCiB7Ci0gICAgY29uc3QgaW50IGNwdSA9IHNtcF9wcm9jZXNzb3Jf
aWQoKTsKLSAgICBzdHJ1Y3QgbGlzdF9oZWFkICogY29uc3QgcnVucSA9IFJVTlEoY3B1KTsKKyAg
ICBjb25zdCB1bnNpZ25lZCBpbnQgY3B1ID0gc21wX3Byb2Nlc3Nvcl9pZCgpOworICAgIGNvbnN0
IHVuc2lnbmVkIGludCBzY2hlZF9jcHUgPSBzY2hlZF9nZXRfcmVzb3VyY2VfY3B1KGNwdSk7Cisg
ICAgc3RydWN0IGxpc3RfaGVhZCAqIGNvbnN0IHJ1bnEgPSBSVU5RKHNjaGVkX2NwdSk7CiAgICAg
c3RydWN0IHNjaGVkX3VuaXQgKnVuaXQgPSBjdXJyZW50LT5zY2hlZF91bml0OwogICAgIHN0cnVj
dCBjc2NoZWRfdW5pdCAqIGNvbnN0IHNjdXJyID0gQ1NDSEVEX1VOSVQodW5pdCk7CiAgICAgc3Ry
dWN0IGNzY2hlZF9wcml2YXRlICpwcnYgPSBDU0NIRURfUFJJVihvcHMpOwpAQCAtMTk0Miw3ICsx
OTQzLDcgQEAgY3NjaGVkX3NjaGVkdWxlKAogICAgIHsKICAgICAgICAgQlVHX09OKCBpc19pZGxl
X3VuaXQodW5pdCkgfHwgbGlzdF9lbXB0eShydW5xKSApOwogICAgICAgICAvKiBDdXJyZW50IGhh
cyBibG9ja2VkLiBVcGRhdGUgdGhlIHJ1bm5hYmxlIGNvdW50ZXIgZm9yIHRoaXMgY3B1LiAqLwot
ICAgICAgICBkZWNfbnJfcnVubmFibGUoY3B1KTsKKyAgICAgICAgZGVjX25yX3J1bm5hYmxlKHNj
aGVkX2NwdSk7CiAgICAgfQogCiAgICAgc25leHQgPSBfX3J1bnFfZWxlbShydW5xLT5uZXh0KTsK
QEAgLTE5NTIsNyArMTk1Myw3IEBAIGNzY2hlZF9zY2hlZHVsZSgKICAgICBpZiAoIHRhc2tsZXRf
d29ya19zY2hlZHVsZWQgKQogICAgIHsKICAgICAgICAgVFJBQ0VfMEQoVFJDX0NTQ0hFRF9TQ0hF
RF9UQVNLTEVUKTsKLSAgICAgICAgc25leHQgPSBDU0NIRURfVU5JVChzY2hlZF9pZGxlX3VuaXQo
Y3B1KSk7CisgICAgICAgIHNuZXh0ID0gQ1NDSEVEX1VOSVQoc2NoZWRfaWRsZV91bml0KHNjaGVk
X2NwdSkpOwogICAgICAgICBzbmV4dC0+cHJpID0gQ1NDSEVEX1BSSV9UU19CT09TVDsKICAgICB9
CiAKQEAgLTE5NzIsNyArMTk3Myw3IEBAIGNzY2hlZF9zY2hlZHVsZSgKICAgICBpZiAoIHNuZXh0
LT5wcmkgPiBDU0NIRURfUFJJX1RTX09WRVIgKQogICAgICAgICBfX3J1bnFfcmVtb3ZlKHNuZXh0
KTsKICAgICBlbHNlCi0gICAgICAgIHNuZXh0ID0gY3NjaGVkX2xvYWRfYmFsYW5jZShwcnYsIGNw
dSwgc25leHQsICZyZXQubWlncmF0ZWQpOworICAgICAgICBzbmV4dCA9IGNzY2hlZF9sb2FkX2Jh
bGFuY2UocHJ2LCBzY2hlZF9jcHUsIHNuZXh0LCAmcmV0Lm1pZ3JhdGVkKTsKIAogICAgIC8qCiAg
ICAgICogVXBkYXRlIGlkbGVycyBtYXNrIGlmIG5lY2Vzc2FyeS4gV2hlbiB3ZSdyZSBpZGxpbmcs
IG90aGVyIENQVXMKQEAgLTE5ODAsMTIgKzE5ODEsMTIgQEAgY3NjaGVkX3NjaGVkdWxlKAogICAg
ICAqLwogICAgIGlmICggIXRhc2tsZXRfd29ya19zY2hlZHVsZWQgJiYgc25leHQtPnByaSA9PSBD
U0NIRURfUFJJX0lETEUgKQogICAgIHsKLSAgICAgICAgaWYgKCAhY3B1bWFza190ZXN0X2NwdShj
cHUsIHBydi0+aWRsZXJzKSApCi0gICAgICAgICAgICBjcHVtYXNrX3NldF9jcHUoY3B1LCBwcnYt
PmlkbGVycyk7CisgICAgICAgIGlmICggIWNwdW1hc2tfdGVzdF9jcHUoc2NoZWRfY3B1LCBwcnYt
PmlkbGVycykgKQorICAgICAgICAgICAgY3B1bWFza19zZXRfY3B1KHNjaGVkX2NwdSwgcHJ2LT5p
ZGxlcnMpOwogICAgIH0KLSAgICBlbHNlIGlmICggY3B1bWFza190ZXN0X2NwdShjcHUsIHBydi0+
aWRsZXJzKSApCisgICAgZWxzZSBpZiAoIGNwdW1hc2tfdGVzdF9jcHUoc2NoZWRfY3B1LCBwcnYt
PmlkbGVycykgKQogICAgIHsKLSAgICAgICAgY3B1bWFza19jbGVhcl9jcHUoY3B1LCBwcnYtPmlk
bGVycyk7CisgICAgICAgIGNwdW1hc2tfY2xlYXJfY3B1KHNjaGVkX2NwdSwgcHJ2LT5pZGxlcnMp
OwogICAgIH0KIAogICAgIGlmICggIWlzX2lkbGVfdW5pdChzbmV4dC0+dW5pdCkgKQpkaWZmIC0t
Z2l0IGEveGVuL2NvbW1vbi9zY2hlZF9jcmVkaXQyLmMgYi94ZW4vY29tbW9uL3NjaGVkX2NyZWRp
dDIuYwppbmRleCAwZjU3MTM1ZTgxLi5jZjUwMmIzY2JjIDEwMDY0NAotLS0gYS94ZW4vY29tbW9u
L3NjaGVkX2NyZWRpdDIuYworKysgYi94ZW4vY29tbW9uL3NjaGVkX2NyZWRpdDIuYwpAQCAtMzQ0
Nyw3ICszNDQ3LDggQEAgc3RhdGljIHN0cnVjdCB0YXNrX3NsaWNlCiBjc2NoZWQyX3NjaGVkdWxl
KAogICAgIGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywgc190aW1lX3Qgbm93LCBib29sIHRh
c2tsZXRfd29ya19zY2hlZHVsZWQpCiB7Ci0gICAgY29uc3QgaW50IGNwdSA9IHNtcF9wcm9jZXNz
b3JfaWQoKTsKKyAgICBjb25zdCB1bnNpZ25lZCBpbnQgY3B1ID0gc21wX3Byb2Nlc3Nvcl9pZCgp
OworICAgIGNvbnN0IHVuc2lnbmVkIGludCBzY2hlZF9jcHUgPSBzY2hlZF9nZXRfcmVzb3VyY2Vf
Y3B1KGNwdSk7CiAgICAgc3RydWN0IGNzY2hlZDJfcnVucXVldWVfZGF0YSAqcnFkOwogICAgIHN0
cnVjdCBzY2hlZF91bml0ICpjdXJydW5pdCA9IGN1cnJlbnQtPnNjaGVkX3VuaXQ7CiAgICAgc3Ry
dWN0IGNzY2hlZDJfdW5pdCAqIGNvbnN0IHNjdXJyID0gY3NjaGVkMl91bml0KGN1cnJ1bml0KTsK
QEAgLTM0NTksMjIgKzM0NjAsMjIgQEAgY3NjaGVkMl9zY2hlZHVsZSgKICAgICBTQ0hFRF9TVEFU
X0NSQU5LKHNjaGVkdWxlKTsKICAgICBDU0NIRUQyX1VOSVRfQ0hFQ0soY3VycnVuaXQpOwogCi0g
ICAgQlVHX09OKCFjcHVtYXNrX3Rlc3RfY3B1KGNwdSwgJmNzY2hlZDJfcHJpdihvcHMpLT5pbml0
aWFsaXplZCkpOworICAgIEJVR19PTighY3B1bWFza190ZXN0X2NwdShzY2hlZF9jcHUsICZjc2No
ZWQyX3ByaXYob3BzKS0+aW5pdGlhbGl6ZWQpKTsKIAotICAgIHJxZCA9IGMycnFkKG9wcywgY3B1
KTsKLSAgICBCVUdfT04oIWNwdW1hc2tfdGVzdF9jcHUoY3B1LCAmcnFkLT5hY3RpdmUpKTsKKyAg
ICBycWQgPSBjMnJxZChvcHMsIHNjaGVkX2NwdSk7CisgICAgQlVHX09OKCFjcHVtYXNrX3Rlc3Rf
Y3B1KHNjaGVkX2NwdSwgJnJxZC0+YWN0aXZlKSk7CiAKLSAgICBBU1NFUlQoc3Bpbl9pc19sb2Nr
ZWQoZ2V0X3NjaGVkX3JlcyhjcHUpLT5zY2hlZHVsZV9sb2NrKSk7CisgICAgQVNTRVJUKHNwaW5f
aXNfbG9ja2VkKGdldF9zY2hlZF9yZXMoc2NoZWRfY3B1KS0+c2NoZWR1bGVfbG9jaykpOwogCiAg
ICAgQlVHX09OKCFpc19pZGxlX3VuaXQoY3VycnVuaXQpICYmIHNjdXJyLT5ycWQgIT0gcnFkKTsK
IAogICAgIC8qIENsZWFyICJ0aWNrbGVkIiBiaXQgbm93IHRoYXQgd2UndmUgYmVlbiBzY2hlZHVs
ZWQgKi8KLSAgICB0aWNrbGVkID0gY3B1bWFza190ZXN0X2NwdShjcHUsICZycWQtPnRpY2tsZWQp
OworICAgIHRpY2tsZWQgPSBjcHVtYXNrX3Rlc3RfY3B1KHNjaGVkX2NwdSwgJnJxZC0+dGlja2xl
ZCk7CiAgICAgaWYgKCB0aWNrbGVkICkKICAgICB7Ci0gICAgICAgIF9fY3B1bWFza19jbGVhcl9j
cHUoY3B1LCAmcnFkLT50aWNrbGVkKTsKKyAgICAgICAgX19jcHVtYXNrX2NsZWFyX2NwdShzY2hl
ZF9jcHUsICZycWQtPnRpY2tsZWQpOwogICAgICAgICBjcHVtYXNrX2FuZG5vdChjcHVtYXNrX3Nj
cmF0Y2gsICZycWQtPmlkbGUsICZycWQtPnRpY2tsZWQpOwotICAgICAgICBzbXRfaWRsZV9tYXNr
X3NldChjcHUsIGNwdW1hc2tfc2NyYXRjaCwgJnJxZC0+c210X2lkbGUpOworICAgICAgICBzbXRf
aWRsZV9tYXNrX3NldChzY2hlZF9jcHUsIGNwdW1hc2tfc2NyYXRjaCwgJnJxZC0+c210X2lkbGUp
OwogICAgIH0KIAogICAgIGlmICggdW5saWtlbHkodGJfaW5pdF9kb25lKSApCkBAIC0zNDg0LDEw
ICszNDg1LDEwIEBAIGNzY2hlZDJfc2NoZWR1bGUoCiAgICAgICAgICAgICB1bnNpZ25lZCB0YXNr
bGV0OjgsIGlkbGU6OCwgc210X2lkbGU6OCwgdGlja2xlZDo4OwogICAgICAgICB9IGQ7CiAgICAg
ICAgIGQuY3B1ID0gY3B1OwotICAgICAgICBkLnJxX2lkID0gYzJyKGNwdSk7CisgICAgICAgIGQu
cnFfaWQgPSBjMnIoc2NoZWRfY3B1KTsKICAgICAgICAgZC50YXNrbGV0ID0gdGFza2xldF93b3Jr
X3NjaGVkdWxlZDsKICAgICAgICAgZC5pZGxlID0gaXNfaWRsZV91bml0KGN1cnJ1bml0KTsKLSAg
ICAgICAgZC5zbXRfaWRsZSA9IGNwdW1hc2tfdGVzdF9jcHUoY3B1LCAmcnFkLT5zbXRfaWRsZSk7
CisgICAgICAgIGQuc210X2lkbGUgPSBjcHVtYXNrX3Rlc3RfY3B1KHNjaGVkX2NwdSwgJnJxZC0+
c210X2lkbGUpOwogICAgICAgICBkLnRpY2tsZWQgPSB0aWNrbGVkOwogICAgICAgICBfX3RyYWNl
X3ZhcihUUkNfQ1NDSEVEMl9TQ0hFRFVMRSwgMSwKICAgICAgICAgICAgICAgICAgICAgc2l6ZW9m
KGQpLApAQCAtMzUyNywxMCArMzUyOCwxMCBAQCBjc2NoZWQyX3NjaGVkdWxlKAogICAgIHsKICAg
ICAgICAgX19jbGVhcl9iaXQoX19DU0ZMQUdfdW5pdF95aWVsZCwgJnNjdXJyLT5mbGFncyk7CiAg
ICAgICAgIHRyYWNlX3ZhcihUUkNfQ1NDSEVEMl9TQ0hFRF9UQVNLTEVULCAxLCAwLCBOVUxMKTsK
LSAgICAgICAgc25leHQgPSBjc2NoZWQyX3VuaXQoc2NoZWRfaWRsZV91bml0KGNwdSkpOworICAg
ICAgICBzbmV4dCA9IGNzY2hlZDJfdW5pdChzY2hlZF9pZGxlX3VuaXQoc2NoZWRfY3B1KSk7CiAg
ICAgfQogICAgIGVsc2UKLSAgICAgICAgc25leHQgPSBydW5xX2NhbmRpZGF0ZShycWQsIHNjdXJy
LCBjcHUsIG5vdywgJnNraXBwZWRfdW5pdHMpOworICAgICAgICBzbmV4dCA9IHJ1bnFfY2FuZGlk
YXRlKHJxZCwgc2N1cnIsIHNjaGVkX2NwdSwgbm93LCAmc2tpcHBlZF91bml0cyk7CiAKICAgICAv
KiBJZiBzd2l0Y2hpbmcgZnJvbSBhIG5vbi1pZGxlIHJ1bm5hYmxlIHVuaXQsIHB1dCBpdAogICAg
ICAqIGJhY2sgb24gdGhlIHJ1bnF1ZXVlLiAqLwpAQCAtMzU1NSwxMCArMzU1NiwxMCBAQCBjc2No
ZWQyX3NjaGVkdWxlKAogICAgICAgICB9CiAKICAgICAgICAgLyogQ2xlYXIgdGhlIGlkbGUgbWFz
ayBpZiBuZWNlc3NhcnkgKi8KLSAgICAgICAgaWYgKCBjcHVtYXNrX3Rlc3RfY3B1KGNwdSwgJnJx
ZC0+aWRsZSkgKQorICAgICAgICBpZiAoIGNwdW1hc2tfdGVzdF9jcHUoc2NoZWRfY3B1LCAmcnFk
LT5pZGxlKSApCiAgICAgICAgIHsKLSAgICAgICAgICAgIF9fY3B1bWFza19jbGVhcl9jcHUoY3B1
LCAmcnFkLT5pZGxlKTsKLSAgICAgICAgICAgIHNtdF9pZGxlX21hc2tfY2xlYXIoY3B1LCAmcnFk
LT5zbXRfaWRsZSk7CisgICAgICAgICAgICBfX2NwdW1hc2tfY2xlYXJfY3B1KHNjaGVkX2NwdSwg
JnJxZC0+aWRsZSk7CisgICAgICAgICAgICBzbXRfaWRsZV9tYXNrX2NsZWFyKHNjaGVkX2NwdSwg
JnJxZC0+c210X2lkbGUpOwogICAgICAgICB9CiAKICAgICAgICAgLyoKQEAgLTM1NzcsMTggKzM1
NzgsMTggQEAgY3NjaGVkMl9zY2hlZHVsZSgKICAgICAgICAgICovCiAgICAgICAgIGlmICggc2tp
cHBlZF91bml0cyA9PSAwICYmIHNuZXh0LT5jcmVkaXQgPD0gQ1NDSEVEMl9DUkVESVRfUkVTRVQg
KQogICAgICAgICB7Ci0gICAgICAgICAgICByZXNldF9jcmVkaXQob3BzLCBjcHUsIG5vdywgc25l
eHQpOwotICAgICAgICAgICAgYmFsYW5jZV9sb2FkKG9wcywgY3B1LCBub3cpOworICAgICAgICAg
ICAgcmVzZXRfY3JlZGl0KG9wcywgc2NoZWRfY3B1LCBub3csIHNuZXh0KTsKKyAgICAgICAgICAg
IGJhbGFuY2VfbG9hZChvcHMsIHNjaGVkX2NwdSwgbm93KTsKICAgICAgICAgfQogCiAgICAgICAg
IHNuZXh0LT5zdGFydF90aW1lID0gbm93OwogICAgICAgICBzbmV4dC0+dGlja2xlZF9jcHUgPSAt
MTsKIAogICAgICAgICAvKiBTYWZlIGJlY2F1c2UgbG9jayBmb3Igb2xkIHByb2Nlc3NvciBpcyBo
ZWxkICovCi0gICAgICAgIGlmICggc2NoZWRfdW5pdF9jcHUoc25leHQtPnVuaXQpICE9IGNwdSAp
CisgICAgICAgIGlmICggc2NoZWRfdW5pdF9jcHUoc25leHQtPnVuaXQpICE9IHNjaGVkX2NwdSAp
CiAgICAgICAgIHsKICAgICAgICAgICAgIHNuZXh0LT5jcmVkaXQgKz0gQ1NDSEVEMl9NSUdSQVRF
X0NPTVBFTlNBVElPTjsKLSAgICAgICAgICAgIHNjaGVkX3NldF9yZXMoc25leHQtPnVuaXQsIGdl
dF9zY2hlZF9yZXMoY3B1KSk7CisgICAgICAgICAgICBzY2hlZF9zZXRfcmVzKHNuZXh0LT51bml0
LCBnZXRfc2NoZWRfcmVzKHNjaGVkX2NwdSkpOwogICAgICAgICAgICAgU0NIRURfU1RBVF9DUkFO
SyhtaWdyYXRlZCk7CiAgICAgICAgICAgICByZXQubWlncmF0ZWQgPSAxOwogICAgICAgICB9CkBA
IC0zNjAxLDE3ICszNjAyLDE3IEBAIGNzY2hlZDJfc2NoZWR1bGUoCiAgICAgICAgICAqLwogICAg
ICAgICBpZiAoIHRhc2tsZXRfd29ya19zY2hlZHVsZWQgKQogICAgICAgICB7Ci0gICAgICAgICAg
ICBpZiAoIGNwdW1hc2tfdGVzdF9jcHUoY3B1LCAmcnFkLT5pZGxlKSApCisgICAgICAgICAgICBp
ZiAoIGNwdW1hc2tfdGVzdF9jcHUoc2NoZWRfY3B1LCAmcnFkLT5pZGxlKSApCiAgICAgICAgICAg
ICB7Ci0gICAgICAgICAgICAgICAgX19jcHVtYXNrX2NsZWFyX2NwdShjcHUsICZycWQtPmlkbGUp
OwotICAgICAgICAgICAgICAgIHNtdF9pZGxlX21hc2tfY2xlYXIoY3B1LCAmcnFkLT5zbXRfaWRs
ZSk7CisgICAgICAgICAgICAgICAgX19jcHVtYXNrX2NsZWFyX2NwdShzY2hlZF9jcHUsICZycWQt
PmlkbGUpOworICAgICAgICAgICAgICAgIHNtdF9pZGxlX21hc2tfY2xlYXIoc2NoZWRfY3B1LCAm
cnFkLT5zbXRfaWRsZSk7CiAgICAgICAgICAgICB9CiAgICAgICAgIH0KLSAgICAgICAgZWxzZSBp
ZiAoICFjcHVtYXNrX3Rlc3RfY3B1KGNwdSwgJnJxZC0+aWRsZSkgKQorICAgICAgICBlbHNlIGlm
ICggIWNwdW1hc2tfdGVzdF9jcHUoc2NoZWRfY3B1LCAmcnFkLT5pZGxlKSApCiAgICAgICAgIHsK
LSAgICAgICAgICAgIF9fY3B1bWFza19zZXRfY3B1KGNwdSwgJnJxZC0+aWRsZSk7CisgICAgICAg
ICAgICBfX2NwdW1hc2tfc2V0X2NwdShzY2hlZF9jcHUsICZycWQtPmlkbGUpOwogICAgICAgICAg
ICAgY3B1bWFza19hbmRub3QoY3B1bWFza19zY3JhdGNoLCAmcnFkLT5pZGxlLCAmcnFkLT50aWNr
bGVkKTsKLSAgICAgICAgICAgIHNtdF9pZGxlX21hc2tfc2V0KGNwdSwgY3B1bWFza19zY3JhdGNo
LCAmcnFkLT5zbXRfaWRsZSk7CisgICAgICAgICAgICBzbXRfaWRsZV9tYXNrX3NldChzY2hlZF9j
cHUsIGNwdW1hc2tfc2NyYXRjaCwgJnJxZC0+c210X2lkbGUpOwogICAgICAgICB9CiAgICAgICAg
IC8qIE1ha2Ugc3VyZSBhdmdsb2FkIGdldHMgdXBkYXRlZCBwZXJpb2RpY2FsbHkgZXZlbgogICAg
ICAgICAgKiBpZiB0aGVyZSdzIG5vIGFjdGl2aXR5ICovCkBAIC0zNjIxLDcgKzM2MjIsNyBAQCBj
c2NoZWQyX3NjaGVkdWxlKAogICAgIC8qCiAgICAgICogUmV0dXJuIHRhc2sgdG8gcnVuIG5leHQu
Li4KICAgICAgKi8KLSAgICByZXQudGltZSA9IGNzY2hlZDJfcnVudGltZShvcHMsIGNwdSwgc25l
eHQsIG5vdyk7CisgICAgcmV0LnRpbWUgPSBjc2NoZWQyX3J1bnRpbWUob3BzLCBzY2hlZF9jcHUs
IHNuZXh0LCBub3cpOwogICAgIHJldC50YXNrID0gc25leHQtPnVuaXQ7CiAKICAgICBDU0NIRUQy
X1VOSVRfQ0hFQ0socmV0LnRhc2spOwpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9zY2hlZF9udWxs
LmMgYi94ZW4vY29tbW9uL3NjaGVkX251bGwuYwppbmRleCA1M2EyMGQ3M2FhLi42YzM1MGEzNDJi
IDEwMDY0NAotLS0gYS94ZW4vY29tbW9uL3NjaGVkX251bGwuYworKysgYi94ZW4vY29tbW9uL3Nj
aGVkX251bGwuYwpAQCAtNzAxLDYgKzcwMSw3IEBAIHN0YXRpYyBzdHJ1Y3QgdGFza19zbGljZSBu
dWxsX3NjaGVkdWxlKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywKIHsKICAgICB1bnNpZ25l
ZCBpbnQgYnM7CiAgICAgY29uc3QgdW5zaWduZWQgaW50IGNwdSA9IHNtcF9wcm9jZXNzb3JfaWQo
KTsKKyAgICBjb25zdCB1bnNpZ25lZCBpbnQgc2NoZWRfY3B1ID0gc2NoZWRfZ2V0X3Jlc291cmNl
X2NwdShjcHUpOwogICAgIHN0cnVjdCBudWxsX3ByaXZhdGUgKnBydiA9IG51bGxfcHJpdihvcHMp
OwogICAgIHN0cnVjdCBudWxsX3VuaXQgKnd2YzsKICAgICBzdHJ1Y3QgdGFza19zbGljZSByZXQ7
CkBAIC03MTYsMTQgKzcxNywxNCBAQCBzdGF0aWMgc3RydWN0IHRhc2tfc2xpY2UgbnVsbF9zY2hl
ZHVsZShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsCiAgICAgICAgIH0gZDsKICAgICAgICAg
ZC5jcHUgPSBjcHU7CiAgICAgICAgIGQudGFza2xldCA9IHRhc2tsZXRfd29ya19zY2hlZHVsZWQ7
Ci0gICAgICAgIGlmICggcGVyX2NwdShucGMsIGNwdSkudW5pdCA9PSBOVUxMICkKKyAgICAgICAg
aWYgKCBwZXJfY3B1KG5wYywgc2NoZWRfY3B1KS51bml0ID09IE5VTEwgKQogICAgICAgICB7CiAg
ICAgICAgICAgICBkLnVuaXQgPSBkLmRvbSA9IC0xOwogICAgICAgICB9CiAgICAgICAgIGVsc2UK
ICAgICAgICAgewotICAgICAgICAgICAgZC51bml0ID0gcGVyX2NwdShucGMsIGNwdSkudW5pdC0+
dW5pdF9pZDsKLSAgICAgICAgICAgIGQuZG9tID0gcGVyX2NwdShucGMsIGNwdSkudW5pdC0+ZG9t
YWluLT5kb21haW5faWQ7CisgICAgICAgICAgICBkLnVuaXQgPSBwZXJfY3B1KG5wYywgc2NoZWRf
Y3B1KS51bml0LT51bml0X2lkOworICAgICAgICAgICAgZC5kb20gPSBwZXJfY3B1KG5wYywgc2No
ZWRfY3B1KS51bml0LT5kb21haW4tPmRvbWFpbl9pZDsKICAgICAgICAgfQogICAgICAgICBfX3Ry
YWNlX3ZhcihUUkNfU05VTExfU0NIRURVTEUsIDEsIHNpemVvZihkKSwgJmQpOwogICAgIH0KQEAg
LTczMSwxMCArNzMyLDEwIEBAIHN0YXRpYyBzdHJ1Y3QgdGFza19zbGljZSBudWxsX3NjaGVkdWxl
KGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywKICAgICBpZiAoIHRhc2tsZXRfd29ya19zY2hl
ZHVsZWQgKQogICAgIHsKICAgICAgICAgdHJhY2VfdmFyKFRSQ19TTlVMTF9UQVNLTEVULCAxLCAw
LCBOVUxMKTsKLSAgICAgICAgcmV0LnRhc2sgPSBzY2hlZF9pZGxlX3VuaXQoY3B1KTsKKyAgICAg
ICAgcmV0LnRhc2sgPSBzY2hlZF9pZGxlX3VuaXQoc2NoZWRfY3B1KTsKICAgICB9CiAgICAgZWxz
ZQotICAgICAgICByZXQudGFzayA9IHBlcl9jcHUobnBjLCBjcHUpLnVuaXQ7CisgICAgICAgIHJl
dC50YXNrID0gcGVyX2NwdShucGMsIHNjaGVkX2NwdSkudW5pdDsKICAgICByZXQubWlncmF0ZWQg
PSAwOwogICAgIHJldC50aW1lID0gLTE7CiAKQEAgLTc2NSw5ICs3NjYsOSBAQCBzdGF0aWMgc3Ry
dWN0IHRhc2tfc2xpY2UgbnVsbF9zY2hlZHVsZShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMs
CiAgICAgICAgICAgICAgICAgICAgICAhaGFzX3NvZnRfYWZmaW5pdHkod3ZjLT51bml0KSApCiAg
ICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogCi0gICAgICAgICAgICAgICAgaWYgKCB1bml0
X2NoZWNrX2FmZmluaXR5KHd2Yy0+dW5pdCwgY3B1LCBicykgKQorICAgICAgICAgICAgICAgIGlm
ICggdW5pdF9jaGVja19hZmZpbml0eSh3dmMtPnVuaXQsIHNjaGVkX2NwdSwgYnMpICkKICAgICAg
ICAgICAgICAgICB7Ci0gICAgICAgICAgICAgICAgICAgIHVuaXRfYXNzaWduKHBydiwgd3ZjLT51
bml0LCBjcHUpOworICAgICAgICAgICAgICAgICAgICB1bml0X2Fzc2lnbihwcnYsIHd2Yy0+dW5p
dCwgc2NoZWRfY3B1KTsKICAgICAgICAgICAgICAgICAgICAgbGlzdF9kZWxfaW5pdCgmd3ZjLT53
YWl0cV9lbGVtKTsKICAgICAgICAgICAgICAgICAgICAgcmV0LnRhc2sgPSB3dmMtPnVuaXQ7CiAg
ICAgICAgICAgICAgICAgICAgIGdvdG8gdW5sb2NrOwpAQCAtNzc5LDcgKzc4MCw3IEBAIHN0YXRp
YyBzdHJ1Y3QgdGFza19zbGljZSBudWxsX3NjaGVkdWxlKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIg
Km9wcywKICAgICB9CiAKICAgICBpZiAoIHVubGlrZWx5KHJldC50YXNrID09IE5VTEwgfHwgIXVu
aXRfcnVubmFibGUocmV0LnRhc2spKSApCi0gICAgICAgIHJldC50YXNrID0gc2NoZWRfaWRsZV91
bml0KGNwdSk7CisgICAgICAgIHJldC50YXNrID0gc2NoZWRfaWRsZV91bml0KHNjaGVkX2NwdSk7
CiAKICAgICBOVUxMX1VOSVRfQ0hFQ0socmV0LnRhc2spOwogICAgIHJldHVybiByZXQ7CmRpZmYg
LS1naXQgYS94ZW4vY29tbW9uL3NjaGVkX3J0LmMgYi94ZW4vY29tbW9uL3NjaGVkX3J0LmMKaW5k
ZXggNTc4ODNiZDBhMC4uZGRkMWJhZGQzOCAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi9zY2hlZF9y
dC5jCisrKyBiL3hlbi9jb21tb24vc2NoZWRfcnQuYwpAQCAtMTA1OCw3ICsxMDU4LDggQEAgcnVu
cV9waWNrKGNvbnN0IHN0cnVjdCBzY2hlZHVsZXIgKm9wcywgY29uc3QgY3B1bWFza190ICptYXNr
KQogc3RhdGljIHN0cnVjdCB0YXNrX3NsaWNlCiBydF9zY2hlZHVsZShjb25zdCBzdHJ1Y3Qgc2No
ZWR1bGVyICpvcHMsIHNfdGltZV90IG5vdywgYm9vbF90IHRhc2tsZXRfd29ya19zY2hlZHVsZWQp
CiB7Ci0gICAgY29uc3QgaW50IGNwdSA9IHNtcF9wcm9jZXNzb3JfaWQoKTsKKyAgICBjb25zdCB1
bnNpZ25lZCBpbnQgY3B1ID0gc21wX3Byb2Nlc3Nvcl9pZCgpOworICAgIGNvbnN0IHVuc2lnbmVk
IGludCBzY2hlZF9jcHUgPSBzY2hlZF9nZXRfcmVzb3VyY2VfY3B1KGNwdSk7CiAgICAgc3RydWN0
IHJ0X3ByaXZhdGUgKnBydiA9IHJ0X3ByaXYob3BzKTsKICAgICBzdHJ1Y3QgcnRfdW5pdCAqY29u
c3Qgc2N1cnIgPSBydF91bml0KGN1cnJlbnQtPnNjaGVkX3VuaXQpOwogICAgIHN0cnVjdCBydF91
bml0ICpzbmV4dCA9IE5VTEw7CkBAIC0xMDcyLDcgKzEwNzMsNyBAQCBydF9zY2hlZHVsZShjb25z
dCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMsIHNfdGltZV90IG5vdywgYm9vbF90IHRhc2tsZXRfd29y
a19zY2hlZAogICAgICAgICB9IGQ7CiAgICAgICAgIGQuY3B1ID0gY3B1OwogICAgICAgICBkLnRh
c2tsZXQgPSB0YXNrbGV0X3dvcmtfc2NoZWR1bGVkOwotICAgICAgICBkLnRpY2tsZWQgPSBjcHVt
YXNrX3Rlc3RfY3B1KGNwdSwgJnBydi0+dGlja2xlZCk7CisgICAgICAgIGQudGlja2xlZCA9IGNw
dW1hc2tfdGVzdF9jcHUoc2NoZWRfY3B1LCAmcHJ2LT50aWNrbGVkKTsKICAgICAgICAgZC5pZGxl
ID0gaXNfaWRsZV91bml0KGN1cnJ1bml0KTsKICAgICAgICAgdHJhY2VfdmFyKFRSQ19SVERTX1ND
SEVEVUxFLCAxLAogICAgICAgICAgICAgICAgICAgc2l6ZW9mKGQpLApAQCAtMTA4MCw3ICsxMDgx
LDcgQEAgcnRfc2NoZWR1bGUoY29uc3Qgc3RydWN0IHNjaGVkdWxlciAqb3BzLCBzX3RpbWVfdCBu
b3csIGJvb2xfdCB0YXNrbGV0X3dvcmtfc2NoZWQKICAgICB9CiAKICAgICAvKiBjbGVhciB0aWNr
ZWQgYml0IG5vdyB0aGF0IHdlJ3ZlIGJlZW4gc2NoZWR1bGVkICovCi0gICAgY3B1bWFza19jbGVh
cl9jcHUoY3B1LCAmcHJ2LT50aWNrbGVkKTsKKyAgICBjcHVtYXNrX2NsZWFyX2NwdShzY2hlZF9j
cHUsICZwcnYtPnRpY2tsZWQpOwogCiAgICAgLyogYnVybl9idWRnZXQgd291bGQgcmV0dXJuIGZv
ciBJRExFIFVOSVQgKi8KICAgICBidXJuX2J1ZGdldChvcHMsIHNjdXJyLCBub3cpOwpAQCAtMTA4
OCwxMyArMTA4OSwxMyBAQCBydF9zY2hlZHVsZShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVyICpvcHMs
IHNfdGltZV90IG5vdywgYm9vbF90IHRhc2tsZXRfd29ya19zY2hlZAogICAgIGlmICggdGFza2xl
dF93b3JrX3NjaGVkdWxlZCApCiAgICAgewogICAgICAgICB0cmFjZV92YXIoVFJDX1JURFNfU0NI
RURfVEFTS0xFVCwgMSwgMCwgIE5VTEwpOwotICAgICAgICBzbmV4dCA9IHJ0X3VuaXQoc2NoZWRf
aWRsZV91bml0KGNwdSkpOworICAgICAgICBzbmV4dCA9IHJ0X3VuaXQoc2NoZWRfaWRsZV91bml0
KHNjaGVkX2NwdSkpOwogICAgIH0KICAgICBlbHNlCiAgICAgewotICAgICAgICBzbmV4dCA9IHJ1
bnFfcGljayhvcHMsIGNwdW1hc2tfb2YoY3B1KSk7CisgICAgICAgIHNuZXh0ID0gcnVucV9waWNr
KG9wcywgY3B1bWFza19vZihzY2hlZF9jcHUpKTsKICAgICAgICAgaWYgKCBzbmV4dCA9PSBOVUxM
ICkKLSAgICAgICAgICAgIHNuZXh0ID0gcnRfdW5pdChzY2hlZF9pZGxlX3VuaXQoY3B1KSk7Cisg
ICAgICAgICAgICBzbmV4dCA9IHJ0X3VuaXQoc2NoZWRfaWRsZV91bml0KHNjaGVkX2NwdSkpOwog
CiAgICAgICAgIC8qIGlmIHNjdXJyIGhhcyBoaWdoZXIgcHJpb3JpdHkgYW5kIGJ1ZGdldCwgc3Rp
bGwgcGljayBzY3VyciAqLwogICAgICAgICBpZiAoICFpc19pZGxlX3VuaXQoY3VycnVuaXQpICYm
CkBAIC0xMTE5LDkgKzExMjAsOSBAQCBydF9zY2hlZHVsZShjb25zdCBzdHJ1Y3Qgc2NoZWR1bGVy
ICpvcHMsIHNfdGltZV90IG5vdywgYm9vbF90IHRhc2tsZXRfd29ya19zY2hlZAogICAgICAgICAg
ICAgcV9yZW1vdmUoc25leHQpOwogICAgICAgICAgICAgX19zZXRfYml0KF9fUlREU19zY2hlZHVs
ZWQsICZzbmV4dC0+ZmxhZ3MpOwogICAgICAgICB9Ci0gICAgICAgIGlmICggc2NoZWRfdW5pdF9j
cHUoc25leHQtPnVuaXQpICE9IGNwdSApCisgICAgICAgIGlmICggc2NoZWRfdW5pdF9jcHUoc25l
eHQtPnVuaXQpICE9IHNjaGVkX2NwdSApCiAgICAgICAgIHsKLSAgICAgICAgICAgIHNjaGVkX3Nl
dF9yZXMoc25leHQtPnVuaXQsIGdldF9zY2hlZF9yZXMoY3B1KSk7CisgICAgICAgICAgICBzY2hl
ZF9zZXRfcmVzKHNuZXh0LT51bml0LCBnZXRfc2NoZWRfcmVzKHNjaGVkX2NwdSkpOwogICAgICAg
ICAgICAgcmV0Lm1pZ3JhdGVkID0gMTsKICAgICAgICAgfQogICAgICAgICByZXQudGltZSA9IHNu
ZXh0LT5jdXJfYnVkZ2V0OyAvKiBpbnZva2UgdGhlIHNjaGVkdWxlciBuZXh0IHRpbWUgKi8KZGlm
ZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9zY2hlZC1pZi5oIGIveGVuL2luY2x1ZGUveGVuL3Nj
aGVkLWlmLmgKaW5kZXggMmE4Nzg5YjQzOC4uOGIzNDkwNjlkYiAxMDA2NDQKLS0tIGEveGVuL2lu
Y2x1ZGUveGVuL3NjaGVkLWlmLmgKKysrIGIveGVuL2luY2x1ZGUveGVuL3NjaGVkLWlmLmgKQEAg
LTExMCw2ICsxMTAsMTEgQEAgc3RhdGljIGlubGluZSBzdHJ1Y3Qgc2NoZWRfdW5pdCAqc2NoZWRf
aWRsZV91bml0KHVuc2lnbmVkIGludCBjcHUpCiAgICAgcmV0dXJuIGlkbGVfdmNwdVtjcHVdLT5z
Y2hlZF91bml0OwogfQogCitzdGF0aWMgaW5saW5lIHVuc2lnbmVkIGludCBzY2hlZF9nZXRfcmVz
b3VyY2VfY3B1KHVuc2lnbmVkIGludCBjcHUpCit7CisgICAgcmV0dXJuIGdldF9zY2hlZF9yZXMo
Y3B1KS0+cHJvY2Vzc29yOworfQorCiAvKgogICogU2NyYXRjaCBzcGFjZSwgZm9yIGF2b2lkaW5n
IGhhdmluZyB0b28gbWFueSBjcHVtYXNrX3Qgb24gdGhlIHN0YWNrLgogICogV2l0aGluIGVhY2gg
c2NoZWR1bGVyLCB3aGVuIHVzaW5nIHRoZSBzY3JhdGNoIG1hc2sgb2Ygb25lIHBDUFU6Ci0tIAoy
LjE2LjQKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpY
ZW4tZGV2ZWwgbWFpbGluZyBsaXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRw
czovL2xpc3RzLnhlbnByb2plY3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

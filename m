Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 1761F100A0D
	for <lists+xen-devel@lfdr.de>; Mon, 18 Nov 2019 18:16:35 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iWkal-00066r-J4; Mon, 18 Nov 2019 17:13:35 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=vqm6=ZK=citrix.com=anthony.perard@srs-us1.protection.inumbo.net>)
 id 1iWkaj-000664-EA
 for xen-devel@lists.xenproject.org; Mon, 18 Nov 2019 17:13:33 +0000
X-Inumbo-ID: b3ddfcfc-0a26-11ea-a2db-12813bfff9fa
Received: from esa5.hc3370-68.iphmx.com (unknown [216.71.155.168])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id b3ddfcfc-0a26-11ea-a2db-12813bfff9fa;
 Mon, 18 Nov 2019 17:13:14 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
 d=citrix.com; s=securemail; t=1574097194;
 h=from:to:cc:subject:date:message-id:in-reply-to:
 references:mime-version:content-transfer-encoding;
 bh=/ouj6bW0SGvRR2QWjz+CdUL7YluiHlGCFzA8U5WHgLc=;
 b=aJWdz8PQnimTLQulwZrKvpYQEtcSW7z7p+Z1TM5ix/EuW2xWJCLZpsMp
 VPg541CLtPK8T1LawkbA0PIS4tiQQBUr3tdA1FOVIGy54Wwr2qj/Mc9eH
 MYyeX/kst4eSu6Vowajk7S39qYGmLoT9k09mP+jpSuOFRFXz5zQH4Lcb1 s=;
Authentication-Results: esa5.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=anthony.perard@citrix.com;
 spf=Pass smtp.mailfrom=anthony.perard@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 anthony.perard@citrix.com) identity=pra;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="anthony.perard@citrix.com";
 x-sender="anthony.perard@citrix.com";
 x-conformance=sidf_compatible
Received-SPF: Pass (esa5.hc3370-68.iphmx.com: domain of
 anthony.perard@citrix.com designates 162.221.158.21 as
 permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="anthony.perard@citrix.com";
 x-sender="anthony.perard@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 ip4:209.167.231.154 ip4:178.63.86.133
 ip4:195.66.111.40/30 ip4:85.115.9.32/28 ip4:199.102.83.4
 ip4:192.28.146.160 ip4:192.28.146.107 ip4:216.52.6.88
 ip4:216.52.6.188 ip4:162.221.158.21 ip4:162.221.156.83
 ip4:168.245.78.127 ~all"
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="anthony.perard@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: R0jceBMNmZHKyfQqjewQaY9bBBhIWVKWLpxmoqBgJaZwIcXfFV1CT0ABmX2igFfBuO5IVaNIJC
 s1M3CrHsgDf1Ojb3eu6axmvGBMPDOhg+r/Bic3jG4bYaD5tt2DiwBYIpWAKlbJO5cKF+R81KUz
 g1DRB1jBPwGV4tpf2dltW9UEt+Yw2ZOSxmgHFYzifmA2exN4y5gxpHfVpG8/rclMQa+ESpQndS
 XqxV5TsLLYPbaszJl8P303l1hLtbS16ofJUZyakAILTYRf1cq8r6vfOhIsKwP2+uA8ZPn9dELi
 RqI=
X-SBRS: 2.7
X-MesageID: 8833205
X-Ironport-Server: esa5.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.68,320,1569297600"; 
   d="scan'208";a="8833205"
From: Anthony PERARD <anthony.perard@citrix.com>
To: <xen-devel@lists.xenproject.org>
Date: Mon, 18 Nov 2019 17:13:04 +0000
Message-ID: <20191118171309.1459302-4-anthony.perard@citrix.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191118171309.1459302-1-anthony.perard@citrix.com>
References: <20191118171309.1459302-1-anthony.perard@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [XEN PATCH for-4.13 v3 3/7] libxl: Rename ev_devlock to
 ev_slowlock
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Anthony PERARD <anthony.perard@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Wei Liu <wl@xen.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

V2UgYXJlIGdvaW5nIHRvIGludHJvZHVjZSBhIGRpZmZlcmVudCBsb2NrIGJhc2VkIG9uIHRoZSBz
YW1lCmltcGxlbWVudGF0aW9uIGFzIHRoZSBldl9kZXZsb2NrIGJ1dCB3aXRoIGEgZGlmZmVyZW50
IHBhdGguIFRoZQpkaWZmZXJlbnQgc2xvd2xvY2sgd2lsbCBiZSBkaWZmZXJlbnRpYXRlZCBieSBj
YWxsaW5nIGRpZmZlcmVudCBfaW5pdCgpCmZ1bmN0aW9ucy4KClNvIHdlIHJlbmFtZSBsaWJ4bF9f
ZXZfZGV2bG9jayB0byBsaWJfX2V2X3Nsb3dsb2NrLCBidXQga2VlcApsaWJ4bF9fZXZfZGV2bG9j
a19pbml0KCkuCgpTb21lIGxvZyBtZXNzYWdlcyBwcm9kdWNlZCBldl9zbG93bG9jayBhcmUgY2hh
bmdlZCB0byBwcmludCB0aGUKbmFtZSBvZiB0aGUgbG9jayBmaWxlICh1c2VyZGF0YV91c2VyaWQp
LgoKU2lnbmVkLW9mZi1ieTogQW50aG9ueSBQRVJBUkQgPGFudGhvbnkucGVyYXJkQGNpdHJpeC5j
b20+CkFja2VkLWJ5OiBJYW4gSmFja3NvbiA8aWFuLmphY2tzb25AZXUuY2l0cml4LmNvbT4KLS0t
CgpOb3RlczoKICAgIE5ldyBwYXRjaCBpbiB2Mi4KICAgICAgICBJbnN0ZWFkIG9mIGludHJvZHVj
aW5nIG1hbnkgbGlieGxfX2V2X3FtcGxvY2sqLgoKIHRvb2xzL2xpYnhsL2xpYnhsX2Rpc2suYyAg
ICAgfCAxMCArKysrKy0tLS0tCiB0b29scy9saWJ4bC9saWJ4bF9kb21haW4uYyAgIHwgMTAgKysr
KystLS0tLQogdG9vbHMvbGlieGwvbGlieGxfaW50ZXJuYWwuYyB8IDMwICsrKysrKysrKysrKysr
KysrKystLS0tLS0tLS0tLQogdG9vbHMvbGlieGwvbGlieGxfaW50ZXJuYWwuaCB8IDMzICsrKysr
KysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLQogNCBmaWxlcyBjaGFuZ2VkLCA0NiBpbnNlcnRp
b25zKCspLCAzNyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS90b29scy9saWJ4bC9saWJ4bF9k
aXNrLmMgYi90b29scy9saWJ4bC9saWJ4bF9kaXNrLmMKaW5kZXggNzMzYWQyODRjODY2Li43N2Fl
M2E1OWJmYjYgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhsL2xpYnhsX2Rpc2suYworKysgYi90b29s
cy9saWJ4bC9saWJ4bF9kaXNrLmMKQEAgLTY0OCwxMyArNjQ4LDEzIEBAIHR5cGVkZWYgc3RydWN0
IHsKICAgICBsaWJ4bF9kb21pZCBkb21pZDsKICAgICBsaWJ4bF9kZXZpY2VfZGlzayAqZGlzazsK
ICAgICBsaWJ4bF9kZXZpY2VfZGlzayBkaXNrX3NhdmVkOwotICAgIGxpYnhsX19ldl9kZXZsb2Nr
IHFtcF9sb2NrOworICAgIGxpYnhsX19ldl9zbG93bG9jayBxbXBfbG9jazsKICAgICBpbnQgZG1f
dmVyOwogICAgIGxpYnhsX19ldl90aW1lIHRpbWU7CiAgICAgbGlieGxfX2V2X3FtcCBxbXA7CiB9
IGxpYnhsX19jZHJvbV9pbnNlcnRfc3RhdGU7CiAKLXN0YXRpYyB2b2lkIGNkcm9tX2luc2VydF9s
b2NrX2FjcXVpcmVkKGxpYnhsX19lZ2MgKiwgbGlieGxfX2V2X2RldmxvY2sgKiwKK3N0YXRpYyB2
b2lkIGNkcm9tX2luc2VydF9sb2NrX2FjcXVpcmVkKGxpYnhsX19lZ2MgKiwgbGlieGxfX2V2X3Ns
b3dsb2NrICosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgcmMp
Owogc3RhdGljIHZvaWQgY2Ryb21faW5zZXJ0X2VqZWN0ZWQobGlieGxfX2VnYyAqZWdjLCBsaWJ4
bF9fZXZfcW1wICosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaWJ4
bF9fanNvbl9vYmplY3QgKiwgaW50IHJjKTsKQEAgLTc0NiwxMyArNzQ2LDEzIEBAIGludCBsaWJ4
bF9jZHJvbV9pbnNlcnQobGlieGxfY3R4ICpjdHgsIHVpbnQzMl90IGRvbWlkLCBsaWJ4bF9kZXZp
Y2VfZGlzayAqZGlzaywKICAgICAgICAgY2Ryb21faW5zZXJ0X2RvbmUoZWdjLCBjaXMsIHJjKTsg
LyogbXVzdCBiZSBsYXN0ICovCiAgICAgfSBlbHNlIHsKICAgICAgICAgY2lzLT5xbXBfbG9jay5j
YWxsYmFjayA9IGNkcm9tX2luc2VydF9sb2NrX2FjcXVpcmVkOwotICAgICAgICBsaWJ4bF9fZXZf
ZGV2bG9ja19sb2NrKGVnYywgJmNpcy0+cW1wX2xvY2spOyAvKiBtdXN0IGJlIGxhc3QgKi8KKyAg
ICAgICAgbGlieGxfX2V2X3Nsb3dsb2NrX2xvY2soZWdjLCAmY2lzLT5xbXBfbG9jayk7IC8qIG11
c3QgYmUgbGFzdCAqLwogICAgIH0KICAgICByZXR1cm4gQU9fSU5QUk9HUkVTUzsKIH0KIAogc3Rh
dGljIHZvaWQgY2Ryb21faW5zZXJ0X2xvY2tfYWNxdWlyZWQobGlieGxfX2VnYyAqZWdjLAotICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlieGxfX2V2X2RldmxvY2sgKmxv
Y2ssCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJ4bF9fZXZfc2xv
d2xvY2sgKmxvY2ssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQg
cmMpCiB7CiAgICAgbGlieGxfX2Nkcm9tX2luc2VydF9zdGF0ZSAqY2lzID0gQ09OVEFJTkVSX09G
KGxvY2ssICpjaXMsIHFtcF9sb2NrKTsKQEAgLTEwNTIsNyArMTA1Miw3IEBAIHN0YXRpYyB2b2lk
IGNkcm9tX2luc2VydF9kb25lKGxpYnhsX19lZ2MgKmVnYywKICAgICBsaWJ4bF9fZXZfdGltZV9k
ZXJlZ2lzdGVyKGdjLCAmY2lzLT50aW1lKTsKICAgICBsaWJ4bF9fZXZfcW1wX2Rpc3Bvc2UoZ2Ms
ICZjaXMtPnFtcCk7CiAgICAgaWYgKGNpcy0+cW1wLnBheWxvYWRfZmQgPj0gMCkgY2xvc2UoY2lz
LT5xbXAucGF5bG9hZF9mZCk7Ci0gICAgbGlieGxfX2V2X2RldmxvY2tfdW5sb2NrKGdjLCAmY2lz
LT5xbXBfbG9jayk7CisgICAgbGlieGxfX2V2X3Nsb3dsb2NrX3VubG9jayhnYywgJmNpcy0+cW1w
X2xvY2spOwogICAgIGxpYnhsX2RldmljZV9kaXNrX2Rpc3Bvc2UoJmNpcy0+ZGlza19zYXZlZCk7
CiAgICAgbGlieGxfX2FvX2NvbXBsZXRlKGVnYywgY2lzLT5hbywgcmMpOwogfQpkaWZmIC0tZ2l0
IGEvdG9vbHMvbGlieGwvbGlieGxfZG9tYWluLmMgYi90b29scy9saWJ4bC9saWJ4bF9kb21haW4u
YwppbmRleCAzM2Y5ZDllYWE0ODEuLjdjYTdhMjI0ZjlhNCAxMDA2NDQKLS0tIGEvdG9vbHMvbGli
eGwvbGlieGxfZG9tYWluLmMKKysrIGIvdG9vbHMvbGlieGwvbGlieGxfZG9tYWluLmMKQEAgLTE4
NzQsMTIgKzE4NzQsMTIgQEAgdHlwZWRlZiBzdHJ1Y3QgewogICAgIGxpYnhsX19ldl9xbXAgcW1w
OwogICAgIGxpYnhsX19ldl90aW1lIHRpbWVvdXQ7CiAgICAgbGlieGxfZG9tYWluX2NvbmZpZyAq
ZF9jb25maWc7IC8qIHVzZXIgcG9pbnRlciAqLwotICAgIGxpYnhsX19ldl9kZXZsb2NrIGRldmxv
Y2s7CisgICAgbGlieGxfX2V2X3Nsb3dsb2NrIGRldmxvY2s7CiAgICAgbGlieGxfYml0bWFwIHFl
bXV1X2NwdXM7CiB9IHJldHJpZXZlX2RvbWFpbl9jb25maWd1cmF0aW9uX3N0YXRlOwogCiBzdGF0
aWMgdm9pZCByZXRyaWV2ZV9kb21haW5fY29uZmlndXJhdGlvbl9sb2NrX2FjcXVpcmVkKAotICAg
IGxpYnhsX19lZ2MgKmVnYywgbGlieGxfX2V2X2RldmxvY2sgKiwgaW50IHJjKTsKKyAgICBsaWJ4
bF9fZWdjICplZ2MsIGxpYnhsX19ldl9zbG93bG9jayAqLCBpbnQgcmMpOwogc3RhdGljIHZvaWQg
cmV0cmlldmVfZG9tYWluX2NvbmZpZ3VyYXRpb25fY3B1X3F1ZXJpZWQoCiAgICAgbGlieGxfX2Vn
YyAqZWdjLCBsaWJ4bF9fZXZfcW1wICpxbXAsCiAgICAgY29uc3QgbGlieGxfX2pzb25fb2JqZWN0
ICpyZXNwb25zZSwgaW50IHJjKTsKQEAgLTE5MDcsMTIgKzE5MDcsMTIgQEAgaW50IGxpYnhsX3Jl
dHJpZXZlX2RvbWFpbl9jb25maWd1cmF0aW9uKGxpYnhsX2N0eCAqY3R4LCB1aW50MzJfdCBkb21p
ZCwKICAgICByZGNzLT5kZXZsb2NrLmFvID0gYW87CiAgICAgcmRjcy0+ZGV2bG9jay5kb21pZCA9
IGRvbWlkOwogICAgIHJkY3MtPmRldmxvY2suY2FsbGJhY2sgPSByZXRyaWV2ZV9kb21haW5fY29u
ZmlndXJhdGlvbl9sb2NrX2FjcXVpcmVkOwotICAgIGxpYnhsX19ldl9kZXZsb2NrX2xvY2soZWdj
LCAmcmRjcy0+ZGV2bG9jayk7CisgICAgbGlieGxfX2V2X3Nsb3dsb2NrX2xvY2soZWdjLCAmcmRj
cy0+ZGV2bG9jayk7CiAgICAgcmV0dXJuIEFPX0lOUFJPR1JFU1M7CiB9CiAKIHN0YXRpYyB2b2lk
IHJldHJpZXZlX2RvbWFpbl9jb25maWd1cmF0aW9uX2xvY2tfYWNxdWlyZWQoCi0gICAgbGlieGxf
X2VnYyAqZWdjLCBsaWJ4bF9fZXZfZGV2bG9jayAqZGV2bG9jaywgaW50IHJjKQorICAgIGxpYnhs
X19lZ2MgKmVnYywgbGlieGxfX2V2X3Nsb3dsb2NrICpkZXZsb2NrLCBpbnQgcmMpCiB7CiAgICAg
cmV0cmlldmVfZG9tYWluX2NvbmZpZ3VyYXRpb25fc3RhdGUgKnJkY3MgPQogICAgICAgICBDT05U
QUlORVJfT0YoZGV2bG9jaywgKnJkY3MsIGRldmxvY2spOwpAQCAtMjIwNCw3ICsyMjA0LDcgQEAg
c3RhdGljIHZvaWQgcmV0cmlldmVfZG9tYWluX2NvbmZpZ3VyYXRpb25fZW5kKGxpYnhsX19lZ2Mg
KmVnYywKICAgICB9CiAKIG91dDoKLSAgICBsaWJ4bF9fZXZfZGV2bG9ja191bmxvY2soZ2MsICZy
ZGNzLT5kZXZsb2NrKTsKKyAgICBsaWJ4bF9fZXZfc2xvd2xvY2tfdW5sb2NrKGdjLCAmcmRjcy0+
ZGV2bG9jayk7CiAgICAgaWYgKGxvY2spIGxpYnhsX191bmxvY2tfZG9tYWluX3VzZXJkYXRhKGxv
Y2spOwogICAgIGxpYnhsX2JpdG1hcF9kaXNwb3NlKCZyZGNzLT5xZW11dV9jcHVzKTsKICAgICBs
aWJ4bF9fZXZfcW1wX2Rpc3Bvc2UoZ2MsICZyZGNzLT5xbXApOwpkaWZmIC0tZ2l0IGEvdG9vbHMv
bGlieGwvbGlieGxfaW50ZXJuYWwuYyBiL3Rvb2xzL2xpYnhsL2xpYnhsX2ludGVybmFsLmMKaW5k
ZXggMDc1MGI2OWNiYTYxLi45NTIwYWMzNjE0OWUgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhsL2xp
YnhsX2ludGVybmFsLmMKKysrIGIvdG9vbHMvbGlieGwvbGlieGxfaW50ZXJuYWwuYwpAQCAtNTc1
LDI1ICs1NzUsMzIgQEAgdm9pZCBsaWJ4bF9fdXBkYXRlX2RvbWFpbl9jb25maWd1cmF0aW9uKGxp
YnhsX19nYyAqZ2MsCiAgICAgZHN0LT5iX2luZm8udmlkZW9fbWVta2IgPSBzcmMtPmJfaW5mby52
aWRlb19tZW1rYjsKIH0KIAotdm9pZCBsaWJ4bF9fZXZfZGV2bG9ja19pbml0KGxpYnhsX19ldl9k
ZXZsb2NrICpsb2NrKQorc3RhdGljIHZvaWQgZXZfc2xvd2xvY2tfaW5pdF9pbnRlcm5hbChsaWJ4
bF9fZXZfc2xvd2xvY2sgKmxvY2ssCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGNvbnN0IGNoYXIgKnVzZXJkYXRhX3VzZXJpZCkKIHsKICAgICBsaWJ4bF9fZXZfY2hpbGRf
aW5pdCgmbG9jay0+Y2hpbGQpOworICAgIGxvY2stPnVzZXJkYXRhX3VzZXJpZCA9IHVzZXJkYXRh
X3VzZXJpZDsKICAgICBsb2NrLT5wYXRoID0gTlVMTDsKICAgICBsb2NrLT5mZCA9IC0xOwogICAg
IGxvY2stPmhlbGQgPSBmYWxzZTsKIH0KIAotc3RhdGljIHZvaWQgZXZfbG9ja19wcmVwYXJlX2Zv
cmsobGlieGxfX2VnYyAqZWdjLCBsaWJ4bF9fZXZfZGV2bG9jayAqbG9jayk7Cit2b2lkIGxpYnhs
X19ldl9kZXZsb2NrX2luaXQobGlieGxfX2V2X3Nsb3dsb2NrICpsb2NrKQoreworICAgIGV2X3Ns
b3dsb2NrX2luaXRfaW50ZXJuYWwobG9jaywgImxpYnhsLWRldmljZS1jaGFuZ2VzLWxvY2siKTsK
K30KKworc3RhdGljIHZvaWQgZXZfbG9ja19wcmVwYXJlX2ZvcmsobGlieGxfX2VnYyAqZWdjLCBs
aWJ4bF9fZXZfc2xvd2xvY2sgKmxvY2spOwogc3RhdGljIHZvaWQgZXZfbG9ja19jaGlsZF9jYWxs
YmFjayhsaWJ4bF9fZWdjICplZ2MsIGxpYnhsX19ldl9jaGlsZCAqY2hpbGQsCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHBpZF90IHBpZCwgaW50IHN0YXR1cyk7CiAKLXZvaWQg
bGlieGxfX2V2X2RldmxvY2tfbG9jayhsaWJ4bF9fZWdjICplZ2MsIGxpYnhsX19ldl9kZXZsb2Nr
ICpsb2NrKQordm9pZCBsaWJ4bF9fZXZfc2xvd2xvY2tfbG9jayhsaWJ4bF9fZWdjICplZ2MsIGxp
YnhsX19ldl9zbG93bG9jayAqbG9jaykKIHsKICAgICBTVEFURV9BT19HQyhsb2NrLT5hbyk7CiAg
ICAgY29uc3QgY2hhciAqbG9ja2ZpbGU7CiAKICAgICBsb2NrZmlsZSA9IGxpYnhsX191c2VyZGF0
YV9wYXRoKGdjLCBsb2NrLT5kb21pZCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJsaWJ4bC1kZXZpY2UtY2hhbmdlcy1sb2NrIiwgImwiKTsKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGxvY2stPnVzZXJkYXRhX3VzZXJpZCwgImwiKTsKICAgICBpZiAo
IWxvY2tmaWxlKSBnb3RvIG91dDsKICAgICBsb2NrLT5wYXRoID0gbGlieGxfX3N0cmR1cChOT0dD
LCBsb2NrZmlsZSk7CiAKQEAgLTYwMyw3ICs2MTAsNyBAQCB2b2lkIGxpYnhsX19ldl9kZXZsb2Nr
X2xvY2sobGlieGxfX2VnYyAqZWdjLCBsaWJ4bF9fZXZfZGV2bG9jayAqbG9jaykKICAgICBsb2Nr
LT5jYWxsYmFjayhlZ2MsIGxvY2ssIEVSUk9SX0xPQ0tfRkFJTCk7CiB9CiAKLXN0YXRpYyB2b2lk
IGV2X2xvY2tfcHJlcGFyZV9mb3JrKGxpYnhsX19lZ2MgKmVnYywgbGlieGxfX2V2X2RldmxvY2sg
KmxvY2spCitzdGF0aWMgdm9pZCBldl9sb2NrX3ByZXBhcmVfZm9yayhsaWJ4bF9fZWdjICplZ2Ms
IGxpYnhsX19ldl9zbG93bG9jayAqbG9jaykKIHsKICAgICBTVEFURV9BT19HQyhsb2NrLT5hbyk7
CiAgICAgcGlkX3QgcGlkOwpAQCAtNjcwLDcgKzY3Nyw3IEBAIHN0YXRpYyB2b2lkIGV2X2xvY2tf
cHJlcGFyZV9mb3JrKGxpYnhsX19lZ2MgKmVnYywgbGlieGxfX2V2X2RldmxvY2sgKmxvY2spCiAg
ICAgbGlieGxfZmRfc2V0X2Nsb2V4ZWMoQ1RYLCBmZCwgMSk7CiAgICAgcmV0dXJuOwogb3V0Ogot
ICAgIGxpYnhsX19ldl9kZXZsb2NrX3VubG9jayhnYywgbG9jayk7CisgICAgbGlieGxfX2V2X3Ns
b3dsb2NrX3VubG9jayhnYywgbG9jayk7CiAgICAgbG9jay0+Y2FsbGJhY2soZWdjLCBsb2NrLCBF
UlJPUl9MT0NLX0ZBSUwpOwogfQogCkBAIC02NzgsNyArNjg1LDcgQEAgc3RhdGljIHZvaWQgZXZf
bG9ja19jaGlsZF9jYWxsYmFjayhsaWJ4bF9fZWdjICplZ2MsIGxpYnhsX19ldl9jaGlsZCAqY2hp
bGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpZF90IHBpZCwgaW50IHN0
YXR1cykKIHsKICAgICBFR0NfR0M7Ci0gICAgbGlieGxfX2V2X2RldmxvY2sgKmxvY2sgPSBDT05U
QUlORVJfT0YoY2hpbGQsICpsb2NrLCBjaGlsZCk7CisgICAgbGlieGxfX2V2X3Nsb3dsb2NrICps
b2NrID0gQ09OVEFJTkVSX09GKGNoaWxkLCAqbG9jaywgY2hpbGQpOwogICAgIHN0cnVjdCBzdGF0
IHN0YWIsIGZzdGFiOwogICAgIGludCByYyA9IEVSUk9SX0xPQ0tfRkFJTDsKIApAQCAtNzI2LDEz
ICs3MzMsMTQgQEAgc3RhdGljIHZvaWQgZXZfbG9ja19jaGlsZF9jYWxsYmFjayhsaWJ4bF9fZWdj
ICplZ2MsIGxpYnhsX19ldl9jaGlsZCAqY2hpbGQsCiAgICAgICAgICAgICByYyA9IEVSUk9SX0xP
Q0tfRkFJTDsKICAgICB9CiAgICAgaWYgKHJjKSB7Ci0gICAgICAgIExPR0QoRVJST1IsIGRvbWlk
LCAiRmFpbGVkIHRvIGdyYWIgcW1wLWxvY2siKTsKLSAgICAgICAgbGlieGxfX2V2X2RldmxvY2tf
dW5sb2NrKGdjLCBsb2NrKTsKKyAgICAgICAgTE9HRChFUlJPUiwgZG9taWQsICJGYWlsZWQgdG8g
Z3JhYiBsb2NrIGZvciAlcyIsCisgICAgICAgICAgICAgbG9jay0+dXNlcmRhdGFfdXNlcmlkKTsK
KyAgICAgICAgbGlieGxfX2V2X3Nsb3dsb2NrX3VubG9jayhnYywgbG9jayk7CiAgICAgfQogICAg
IGxvY2stPmNhbGxiYWNrKGVnYywgbG9jaywgcmMpOwogfQogCi12b2lkIGxpYnhsX19ldl9kZXZs
b2NrX3VubG9jayhsaWJ4bF9fZ2MgKmdjLCBsaWJ4bF9fZXZfZGV2bG9jayAqbG9jaykKK3ZvaWQg
bGlieGxfX2V2X3Nsb3dsb2NrX3VubG9jayhsaWJ4bF9fZ2MgKmdjLCBsaWJ4bF9fZXZfc2xvd2xv
Y2sgKmxvY2spCiB7CiAgICAgaW50IHI7CiAKQEAgLTc1NCw3ICs3NjIsNyBAQCB2b2lkIGxpYnhs
X19ldl9kZXZsb2NrX3VubG9jayhsaWJ4bF9fZ2MgKmdjLCBsaWJ4bF9fZXZfZGV2bG9jayAqbG9j
aykKICAgICAgICAgY2xvc2UobG9jay0+ZmQpOwogICAgIH0KICAgICBmcmVlKGxvY2stPnBhdGgp
OwotICAgIGxpYnhsX19ldl9kZXZsb2NrX2luaXQobG9jayk7CisgICAgZXZfc2xvd2xvY2tfaW5p
dF9pbnRlcm5hbChsb2NrLCBsb2NrLT51c2VyZGF0YV91c2VyaWQpOwogfQogCiAvKgpkaWZmIC0t
Z2l0IGEvdG9vbHMvbGlieGwvbGlieGxfaW50ZXJuYWwuaCBiL3Rvb2xzL2xpYnhsL2xpYnhsX2lu
dGVybmFsLmgKaW5kZXggNjlkNTcyYzE4NjZhLi5hMGY5OTI1MmMzOWMgMTAwNjQ0Ci0tLSBhL3Rv
b2xzL2xpYnhsL2xpYnhsX2ludGVybmFsLmgKKysrIGIvdG9vbHMvbGlieGwvbGlieGxfaW50ZXJu
YWwuaApAQCAtMTk2LDcgKzE5Niw3IEBAIHR5cGVkZWYgc3RydWN0IGxpYnhsX19vc2V2ZW50X2hv
b2tfbmV4aSBsaWJ4bF9fb3NldmVudF9ob29rX25leGk7CiB0eXBlZGVmIHN0cnVjdCBsaWJ4bF9f
ZGV2aWNlX3R5cGUgbGlieGxfX2RldmljZV90eXBlOwogdHlwZWRlZiBzdHJ1Y3QgbGlieGxfX2pz
b25fb2JqZWN0IGxpYnhsX19qc29uX29iamVjdDsKIHR5cGVkZWYgc3RydWN0IGxpYnhsX19jYXJl
ZmQgbGlieGxfX2NhcmVmZDsKLXR5cGVkZWYgc3RydWN0IGxpYnhsX19ldl9kZXZsb2NrIGxpYnhs
X19ldl9kZXZsb2NrOwordHlwZWRlZiBzdHJ1Y3QgbGlieGxfX2V2X3Nsb3dsb2NrIGxpYnhsX19l
dl9zbG93bG9jazsKIHR5cGVkZWYgc3RydWN0IGxpYnhsX19kbV9yZXN1bWVfc3RhdGUgbGlieGxf
X2RtX3Jlc3VtZV9zdGF0ZTsKIHR5cGVkZWYgc3RydWN0IGxpYnhsX19hb19kZXZpY2UgbGlieGxf
X2FvX2RldmljZTsKIHR5cGVkZWYgc3RydWN0IGxpYnhsX19tdWx0aWRldiBsaWJ4bF9fbXVsdGlk
ZXY7CkBAIC0zNjYsNyArMzY2LDcgQEAgc3RydWN0IGxpYnhsX19ldl9jaGlsZCB7CiAvKgogICog
TG9jayBmb3IgZGV2aWNlIGhvdHBsdWcsIHFtcF9sb2NrLgogICoKLSAqIGxpYnhsX19ldl9kZXZs
b2NrIGltcGxlbWVudCBhIGxvY2sgdGhhdCBpcyBvdXRzaWRlIG9mIENUWF9MT0NLIGluIHRoZQor
ICogbGlieGxfX2V2X3Nsb3dsb2NrIGltcGxlbWVudCBhIGxvY2sgdGhhdCBpcyBvdXRzaWRlIG9m
IENUWF9MT0NLIGluIHRoZQogICogbG9jayBoaWVyYXJjaHkuIEl0IGNhbiBiZSB1c2VkIHdoZW4g
b25lIHdhbnQgdG8gbWFrZSBRTVAgY2FsbHMgdG8gUUVNVSwKICAqIHdoaWNoIG1heSB0YWtlIGEg
c2lnbmlmaWNhbnQgYW1vdW50IHRpbWUuCiAgKiBJdCBpcyB0byBiZSBhY3F1aXJlZCBieSBhbiBh
byBldmVudCBjYWxsYmFjay4KQEAgLTM3NCw0MiArMzc0LDQzIEBAIHN0cnVjdCBsaWJ4bF9fZXZf
Y2hpbGQgewogICogSXQgaXMgdG8gYmUgYWNxdWlyZWQgd2hlbiBhZGRpbmcvcmVtb3ZpbmcgZGV2
aWNlcyBvciBtYWtpbmcgY2hhbmdlcwogICogdG8gdGhlbSB3aGVuIHRoaXMgaXMgYSBzbG93IG9w
ZXJhdGlvbiBhbmQganNvbl9sb2NrIGlzbid0IGFwcHJvcHJpYXRlLgogICoKLSAqIFBvc3NpYmxl
IHN0YXRlcyBvZiBsaWJ4bF9fZXZfZGV2bG9jazoKKyAqIFBvc3NpYmxlIHN0YXRlcyBvZiBsaWJ4
bF9fZXZfc2xvd2xvY2s6CiAgKiAgIFVuZGVmaW5lZAogICogICAgTWlnaHQgY29udGFpbiBhbnl0
aGluZy4KICAqICBJZGxlCiAgKiAgICBTdHJ1Y3QgY29udGVudHMgYXJlIGRlZmluZWQgZW5vdWdo
IHRvIHBhc3MgdG8gYW55Ci0gKiAgICBsaWJ4bF9fZXZfZGV2bG9ja18qIGZ1bmN0aW9uLgorICog
ICAgbGlieGxfX2V2X3Nsb3dsb2NrXyogZnVuY3Rpb24uCiAgKiAgICBUaGUgc3RydWN0IGRvZXMg
bm90IGNvbnRhaW4gcmVmZXJlbmNlcyB0byBhbnkgYWxsb2NhdGVkIHByaXZhdGUKICAqICAgIHJl
c291cmNlcyBzbyBjYW4gYmUgdGhyb3duIGF3YXkuCiAgKiAgQWN0aXZlCiAgKiAgICBXYWl0aW5n
IHRvIGdldCBhIGxvY2suCiAgKiAgICBOZWVkcyB0byB3YWl0IHVudGlsIHRoZSBjYWxsYmFjayBp
cyBjYWxsZWQuCiAgKiAgTG9ja0FjcXVpcmVkCi0gKiAgICBsaWJ4bF9fZXZfZGV2bG9ja191bmxv
Y2sgd2lsbCBuZWVkIHRvIGJlIGNhbGxlZCB0byByZWxlYXNlIHRoZSBsb2NrCi0gKiAgICBhbmQg
dGhlIHJlc291cmNlcyBvZiBsaWJ4bF9fZXZfZGV2bG9jay4KKyAqICAgIGxpYnhsX19ldl9zbG93
bG9ja191bmxvY2sgd2lsbCBuZWVkIHRvIGJlIGNhbGxlZCB0byByZWxlYXNlIHRoZSBsb2NrCisg
KiAgICBhbmQgdGhlIHJlc291cmNlcyBvZiBsaWJ4bF9fZXZfc2xvd2xvY2suCiAgKgotICogIGxp
YnhsX19ldl9kZXZsb2NrX2luaXQ6IFVuZGVmaW5lZC9JZGxlIC0+IElkbGUKLSAqICBsaWJ4bF9f
ZXZfZGV2bG9ja19sb2NrOiBJZGxlIC0+IEFjdGl2ZQorICogIGxpYnhsX19ldl8qbG9ja19pbml0
OiBVbmRlZmluZWQvSWRsZSAtPiBJZGxlCisgKiAgbGlieGxfX2V2X3Nsb3dsb2NrX2xvY2s6IElk
bGUgLT4gQWN0aXZlCiAgKiAgICBNYXkgY2FsbCBjYWxsYmFjayBzeW5jaHJvbm91c2x5LgotICog
IGxpYnhsX19ldl9kZXZsb2NrX3VubG9jazogTG9ja0FjcXVpcmVkL0lkbGUgLT4gSWRsZQorICog
IGxpYnhsX19ldl9zbG93bG9ja191bmxvY2s6IExvY2tBY3F1aXJlZC9JZGxlIC0+IElkbGUKICAq
ICBjYWxsYmFjazogICAgIFdoZW4gY2FsbGVkOiBBY3RpdmUgLT4gTG9ja0FjcXVpcmVkIChvbiBl
cnJvcjogSWRsZSkKICAqICAgIFRoZSBjYWxsYmFjayBpcyBvbmx5IGNhbGxlZCBvbmNlLgogICov
Ci1zdHJ1Y3QgbGlieGxfX2V2X2RldmxvY2sgeworc3RydWN0IGxpYnhsX19ldl9zbG93bG9jayB7
CiAgICAgLyogZmlsbGVkIGJ5IHVzZXIgKi8KICAgICBsaWJ4bF9fYW8gKmFvOwogICAgIGxpYnhs
X2RvbWlkIGRvbWlkOwotICAgIHZvaWQgKCpjYWxsYmFjaykobGlieGxfX2VnYyAqLCBsaWJ4bF9f
ZXZfZGV2bG9jayAqLCBpbnQgcmMpOwotICAgIC8qIHByaXZhdGUgdG8gbGlieGxfX2V2X2Rldmxv
Y2sqICovCisgICAgdm9pZCAoKmNhbGxiYWNrKShsaWJ4bF9fZWdjICosIGxpYnhsX19ldl9zbG93
bG9jayAqLCBpbnQgcmMpOworICAgIC8qIHByaXZhdGUgdG8gbGlieGxfX2V2X3Nsb3dsb2NrKiAq
LwogICAgIGxpYnhsX19ldl9jaGlsZCBjaGlsZDsKKyAgICBjb25zdCBjaGFyICp1c2VyZGF0YV91
c2VyaWQ7CiAgICAgY2hhciAqcGF0aDsgLyogcGF0aCBvZiB0aGUgbG9jayBmaWxlIGl0c2VsZiAq
LwogICAgIGludCBmZDsKICAgICBib29sIGhlbGQ7CiB9OwotX2hpZGRlbiB2b2lkIGxpYnhsX19l
dl9kZXZsb2NrX2luaXQobGlieGxfX2V2X2RldmxvY2sgKik7Ci1faGlkZGVuIHZvaWQgbGlieGxf
X2V2X2RldmxvY2tfbG9jayhsaWJ4bF9fZWdjICosIGxpYnhsX19ldl9kZXZsb2NrICopOwotX2hp
ZGRlbiB2b2lkIGxpYnhsX19ldl9kZXZsb2NrX3VubG9jayhsaWJ4bF9fZ2MgKiwgbGlieGxfX2V2
X2RldmxvY2sgKik7CitfaGlkZGVuIHZvaWQgbGlieGxfX2V2X2RldmxvY2tfaW5pdChsaWJ4bF9f
ZXZfc2xvd2xvY2sgKik7CitfaGlkZGVuIHZvaWQgbGlieGxfX2V2X3Nsb3dsb2NrX2xvY2sobGli
eGxfX2VnYyAqLCBsaWJ4bF9fZXZfc2xvd2xvY2sgKik7CitfaGlkZGVuIHZvaWQgbGlieGxfX2V2
X3Nsb3dsb2NrX3VubG9jayhsaWJ4bF9fZ2MgKiwgbGlieGxfX2V2X3Nsb3dsb2NrICopOwogCiAv
KgogICogUU1QIGFzeW5jaHJvbm91cyBjYWxscwpAQCAtMjg1Myw3ICsyODU0LDcgQEAgc3RydWN0
IGxpYnhsX19tdWx0aWRldiB7CiAgKiAgIHVubG9jayBqc29uIGNvbmZpZwogICoKICAqIE9yIGlu
IGNhc2UgUUVNVSBpcyB0aGUgcHJpbWFyeSBjb25maWcsIHRoaXMgcGF0dGVybiBjYW4gYmUgdXNl
OgotICogICBxbXBfbG9jayAobGlieGxfX2V2X2RldmxvY2spCisgKiAgIHFtcF9sb2NrIChsaWJ4
bF9fZXZfZGV2bG9ja19pbml0KQogICogICAgICBsb2NrIGpzb24gY29uZmlnIChqc29uX2xvY2sp
CiAgKiAgICAgICAgICByZWFkIGpzb24gY29uZmlnCiAgKiAgICAgICAgICB1cGRhdGUgaW4tbWVt
b3J5IGpzb24gY29uZmlnIHdpdGggbmV3IGVudHJ5LCByZXBsYWNpbmcKLS0gCkFudGhvbnkgUEVS
QVJECgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVu
LWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6
Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

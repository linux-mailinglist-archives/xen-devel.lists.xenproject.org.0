Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id CAB9E10CD51
	for <lists+xen-devel@lfdr.de>; Thu, 28 Nov 2019 17:55:04 +0100 (CET)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1iaN29-0004B3-O7; Thu, 28 Nov 2019 16:52:49 +0000
Received: from us1-rack-iad1.inumbo.com ([172.99.69.81])
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=XtxL=ZU=amazon.com=prvs=228fc64b1=pdurrant@srs-us1.protection.inumbo.net>)
 id 1iaN28-0004AU-4Q
 for xen-devel@lists.xenproject.org; Thu, 28 Nov 2019 16:52:48 +0000
X-Inumbo-ID: 813b3c78-11ff-11ea-83b8-bc764e2007e4
Received: from smtp-fw-9102.amazon.com (unknown [207.171.184.29])
 by us1-rack-iad1.inumbo.com (Halon) with ESMTPS
 id 813b3c78-11ff-11ea-83b8-bc764e2007e4;
 Thu, 28 Nov 2019 16:52:47 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=amazon.com; i=@amazon.com; q=dns/txt; s=amazon201209;
 t=1574959967; x=1606495967;
 h=from:to:cc:subject:date:message-id:mime-version:
 content-transfer-encoding;
 bh=OtJBbbbrUnymb8ZyBtW8fat7PYqQQp9XCPkQhJQ9k38=;
 b=bQYkLvAybOFbq5cd6kX5u3zflW3HKCxGy79O2KrnIlim+IzRQfgPYszD
 K+tVQPAEGXBOOegP3NmnChlPkpd4TCKhdXx28UHPyM8ekZ83obULBHe4l
 p9D/qWV1eZoZGnXnveS8BAWzIwP+/tNfZ/kwbyceufbxl8jkMXXXPZuiI U=;
IronPort-SDR: qkTGEXo0kf1WsJDwbzDkHmHn2YABH7d2aOJszVLA3d4iDlmQxwNNtyBPCRINiAZkxZnbrM5aa+
 ZwwGNR4SeaGw==
X-IronPort-AV: E=Sophos;i="5.69,253,1571702400"; d="scan'208";a="10449072"
Received: from sea32-co-svc-lb4-vlan3.sea.corp.amazon.com (HELO
 email-inbound-relay-1a-16acd5e0.us-east-1.amazon.com) ([10.47.23.38])
 by smtp-border-fw-out-9102.sea19.amazon.com with ESMTP;
 28 Nov 2019 16:52:34 +0000
Received: from EX13MTAUEA001.ant.amazon.com
 (iad55-ws-svc-p15-lb9-vlan2.iad.amazon.com [10.40.159.162])
 by email-inbound-relay-1a-16acd5e0.us-east-1.amazon.com (Postfix) with ESMTPS
 id 93342A2868; Thu, 28 Nov 2019 16:52:30 +0000 (UTC)
Received: from EX13D32EUB003.ant.amazon.com (10.43.166.165) by
 EX13MTAUEA001.ant.amazon.com (10.43.61.243) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Thu, 28 Nov 2019 16:52:29 +0000
Received: from EX13MTAUEE001.ant.amazon.com (10.43.62.200) by
 EX13D32EUB003.ant.amazon.com (10.43.166.165) with Microsoft SMTP Server (TLS)
 id 15.0.1367.3; Thu, 28 Nov 2019 16:52:29 +0000
Received: from u2f063a87eabd5f.cbg10.amazon.com (10.125.106.135) by
 mail-relay.amazon.com (10.43.62.226) with Microsoft SMTP Server id
 15.0.1367.3 via Frontend Transport; Thu, 28 Nov 2019 16:52:26 +0000
From: Paul Durrant <pdurrant@amazon.com>
To: <xen-devel@lists.xenproject.org>
Date: Thu, 28 Nov 2019 16:52:24 +0000
Message-ID: <20191128165224.2959-1-pdurrant@amazon.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Precedence: Bulk
Subject: [Xen-devel] [PATCH-for-4.13 v5] Rationalize max_grant_frames and
 max_maptrack_frames handling
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Stefano Stabellini <sstabellini@kernel.org>, Julien Grall <julien@xen.org>,
 Wei Liu <wl@xen.org>, Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>, Paul Durrant <pdurrant@amazon.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>,
 George Dunlap <george.dunlap@citrix.com>,
 =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>, Jan Beulich <jbeulich@suse.com>,
 Anthony PERARD <anthony.perard@citrix.com>,
 Volodymyr Babchuk <Volodymyr_Babchuk@epam.com>,
 =?UTF-8?q?Roger=20Pau=20Monn=C3=A9?= <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogR2VvcmdlIER1bmxhcCA8Z2VvcmdlLmR1bmxhcEBjaXRyaXguY29tPgoKWGVuIHVzZWQg
dG8gaGF2ZSBzaW5nbGUsIHN5c3RlbS13aWRlIGxpbWl0cyBmb3IgdGhlIG51bWJlciBvZiBncmFu
dApmcmFtZXMgYW5kIG1hcHRyYWNrIGZyYW1lcyBhIGd1ZXN0IHdhcyBhbGxvd2VkIHRvIGNyZWF0
ZS4gSW5jcmVhc2luZwpvciBkZWNyZWFzaW5nIHRoaXMgc2luZ2xlIGxpbWl0IG9uIHRoZSBYZW4g
Y29tbWFuZC1saW5lIHdvdWxkIGNoYW5nZQp0aGUgbGltaXQgZm9yIGFsbCBndWVzdHMgb24gdGhl
IHN5c3RlbS4KCkxhdGVyLCBwZXItZG9tYWluIGxpbWl0cyBmb3IgdGhlc2UgdmFsdWVzIHdhcyBj
cmVhdGVkLiBUaGUgc3lzdGVtLXdpZGUKbGltaXRzIGJlY2FtZSBzdHJpY3QgbGltaXRzOiBkb21h
aW5zIGNvdWxkIG5vdCBiZSBjcmVhdGVkIHdpdGggaGlnaGVyCmxpbWl0cywgYnV0IGNvdWxkIGJl
IGNyZWF0ZWQgd2l0aCBsb3dlciBsaW1pdHMuIEhvd2V2ZXIsIHRoYXQgY2hhbmdlCmFsc28gaW50
cm9kdWNlZCBhIHJhbmdlIG9mIGRpZmZlcmVudCAiZGVmYXVsdCIgdmFsdWVzIGludG8gdmFyaW91
cwpwbGFjZXMgaW4gdGhlIHRvb2xzdGFjazoKCi0gVGhlIHB5dGhvbiBsaWJ4YyBiaW5kaW5ncyBo
YXJkLWNvZGVkIHRoZXNlIHZhbHVlcyB0byAzMiBhbmQgMTAyNCwKICByZXNwZWN0aXZlbHkKLSBU
aGUgbGlieGwgZGVmYXVsdCB2YWx1ZXMgYXJlIDMyIGFuZCAxMDI0IHJlc3BlY3RpdmVseS4KLSB4
bCB3aWxsIHVzZSB0aGUgbGlieGwgZGVmYXVsdCBmb3IgbWFwdHJhY2ssIGJ1dCBkb2VzIGl0cyBv
d24gZGVmYXVsdAogIGNhbGN1bGF0aW9uIGZvciBncmFudCBmcmFtZXM6IGVpdGhlciAzMiBvciA2
NCwgYmFzZWQgb24gdGhlIG1heAogIHBvc3NpYmxlIG1mbi4KClRoZXNlIGRlZmF1bHRzIGludGVy
YWN0IHBvb3JseSB3aXRoIHRoZSBoeXBlcnZpc29yIGNvbW1hbmQtbGluZSBsaW1pdDoKCi0gVGhl
IGh5cGVydmlzb3IgY29tbWFuZC1saW5lIGxpbWl0IGNhbm5vdCBiZSB1c2VkIHRvIHJhaXNlIHRo
ZSBsaW1pdAogIGZvciBhbGwgZ3Vlc3RzIGFueW1vcmUsIGFzIHRoZSBkZWZhdWx0IGluIHRoZSB0
b29sc3RhY2sgd2lsbAogIGVmZmVjdGl2ZWx5IG92ZXJyaWRlIHRoaXMuCi0gSWYgeW91IHVzZSB0
aGUgaHlwZXJ2aXNvciBjb21tYW5kLWxpbmUgbGltaXQgdG8gKnJlZHVjZSogdGhlIGxpbWl0LAog
IHRoZW4gdGhlICJkZWZhdWx0IiB2YWx1ZXMgZ2VuZXJhdGVkIGJ5IHRoZSB0b29sc3RhY2sgYXJl
IHRvbyBoaWdoLAogIGFuZCBhbGwgZ3Vlc3QgY3JlYXRpb25zIHdpbGwgZmFpbC4KCkluIG90aGVy
IHdvcmRzLCB0aGUgdG9vbHN0YWNrIGRlZmF1bHRzIHJlcXVpcmUgYW55IGNoYW5nZSB0byBiZQpl
ZmZlY3RlZCBieSBoYXZpbmcgdGhlIGFkbWluIGV4cGxpY2l0bHkgc3BlY2lmeSBhIG5ldyB2YWx1
ZSBpbiBldmVyeQpndWVzdC4KCkluIG9yZGVyIHRvIGFkZHJlc3MgdGhpcywgaGF2ZSBncmFudF90
YWJsZV9pbml0IHRyZWF0IG5lZ2F0aXZlIHZhbHVlcwpmb3IgbWF4X2dyYW50X2ZyYW1lcyBhbmQg
bWF4X21hcHRyYWNrX2ZyYW1lcyBhcyBpbnN0cnVjdGlvbnMgdG8gdXNlIHRoZQpzeXN0ZW0td2lk
ZSBkZWZhdWx0LCBhbmQgaGF2ZSBhbGwgdGhlIGFib3ZlIHRvb2xzdGFja3MgZGVmYXVsdCB0byBw
YXNzaW5nCi0xIHVubGVzcyBhIGRpZmZlcmVudCB2YWx1ZSBpcyBleHBsaWNpdGx5IGNvbmZpZ3Vy
ZWQuCgpUaGlzIHJlc3RvcmVzIHRoZSBvbGQgYmVoYXZpb3IgaW4gdGhhdCBjaGFuZ2luZyB0aGUg
aHlwZXJ2aXNvciBjb21tYW5kLWxpbmUKb3B0aW9uIGNhbiBjaGFuZ2UgdGhlIGJlaGF2aW9yIGZv
ciBhbGwgZ3Vlc3RzLCB3aGlsZSByZXRhaW5pbmcgdGhlIGFiaWxpdHkKdG8gc2V0IHBlci1ndWVz
dCB2YWx1ZXMuICBJdCBhbHNvIHJlbW92ZXMgdGhlIGJ1ZyB0aGF0IHJlZHVjaW5nIHRoZQpzeXN0
ZW0td2lkZSBtYXggd2lsbCBjYXVzZSBhbGwgZG9tYWlucyB3aXRob3V0IGV4cGxpY2l0IGxpbWl0
cyB0byBmYWlsLgoKTk9URTogLSBUaGUgT2NhbWwgYmluZGluZ3MgcmVxdWlyZSB0aGUgY2FsbGVy
IHRvIGFsd2F5cyBzcGVjaWZ5IGEgdmFsdWUsCiAgICAgICAgYW5kIHRoZSBjb2RlIHRvIHN0YXJ0
IGEgeGVuc3RvcmVkIHN0dWJkb21haW4gaGFyZC1jb2RlcyB0aGVzZSB0byA0CglhbmQgMTI4IHJl
c3BlY3RpdmVseTsgdGhpcyBiZWhhdm91ciB3aWxsIG5vdCBiZSBtb2RpZmllZC4KClNpZ25lZC1v
ZmYtYnk6IEdlb3JnZSBEdW5sYXAgPGdlb3JnZS5kdW5sYXBAY2l0cml4LmNvbT4KU2lnbmVkLW9m
Zi1ieTogUGF1bCBEdXJyYW50IDxwZHVycmFudEBhbWF6b24uY29tPgotLS0KQ2M6IElhbiBKYWNr
c29uIDxpYW4uamFja3NvbkBldS5jaXRyaXguY29tPgpDYzogV2VpIExpdSA8d2xAeGVuLm9yZz4K
Q2M6IEFuZHJldyBDb29wZXIgPGFuZHJldy5jb29wZXIzQGNpdHJpeC5jb20+CkNjOiBHZW9yZ2Ug
RHVubGFwIDxHZW9yZ2UuRHVubGFwQGV1LmNpdHJpeC5jb20+CkNjOiBKYW4gQmV1bGljaCA8amJl
dWxpY2hAc3VzZS5jb20+CkNjOiBKdWxpZW4gR3JhbGwgPGp1bGllbkB4ZW4ub3JnPgpDYzogS29u
cmFkIFJ6ZXN6dXRlayBXaWxrIDxrb25yYWQud2lsa0BvcmFjbGUuY29tPgpDYzogU3RlZmFubyBT
dGFiZWxsaW5pIDxzc3RhYmVsbGluaUBrZXJuZWwub3JnPgpDYzogQW50aG9ueSBQRVJBUkQgPGFu
dGhvbnkucGVyYXJkQGNpdHJpeC5jb20+CkNjOiAiTWFyZWsgTWFyY3p5a293c2tpLUfDs3JlY2tp
IiA8bWFybWFyZWtAaW52aXNpYmxldGhpbmdzbGFiLmNvbT4KQ2M6IFZvbG9keW15ciBCYWJjaHVr
IDxWb2xvZHlteXJfQmFiY2h1a0BlcGFtLmNvbT4KQ2M6ICJSb2dlciBQYXUgTW9ubsOpIiA8cm9n
ZXIucGF1QGNpdHJpeC5jb20+Cgp2NToKIC0gUmVtb3ZlIGVycm9uZW91cyBfX2luaXQgYW5ub3Rh
dGlvbnMKIC0gRmFpbCBvdXQgb2YgcmFuZ2UgY29tbWFuZCBsaW5lIHZhbHVlcyB3aXRoIEVSQU5H
RQogLSBNYWtlIG9wdF9tYXhfbWFwdHJhY2tfZnJhbWVzIHN0YXRpYwoKdjQ6CiAtIEFkZCBtaXNz
aW5nIGJyYWNlcyBpbiB4bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmcoKQoKdjM6CiAtIE1ha2Ugc3Vy
ZSB0aGF0IHNwZWNpZmllZCB2YWx1ZXMgY2Fubm90IGJlIG5lZ2F0aXZlIG9yIG92ZXJmbG93IGEK
ICAgc2lnbmVkIGludAoKdjI6CiAtIHJlLXdvcmtlZCBHZW9yZ2UncyBvcmlnaW5hbCBjb21taXQg
bWFzc2FnZSBhIGxpdHRsZQogLSBmaXhlZCB0aGUgdGV4dCBpbiB4bC5jb25mLjUucG9kCiAtIHVz
ZSAtMSBhcyB0aGUgc2VudGluZWwgdmFsdWUgZm9yICdkZWZhdWx0JyBhbmQgPCAwIGZvciBjaGVj
a2luZyBpdAotLS0KIGRvY3MvbWFuL3hsLmNvbmYuNS5wb2QgICAgICAgICAgICB8ICA2ICsrKy0t
CiB0b29scy9saWJ4bC9saWJ4bC5oICAgICAgICAgICAgICAgfCAgNCArLS0KIHRvb2xzL2xpYnhs
L2xpYnhsX3R5cGVzLmlkbCAgICAgICB8ICA0ICstLQogdG9vbHMvbGlieGwvbGlieGx1X2NmZy5j
ICAgICAgICAgIHwgMjYgKysrKysrKysrKysrKysrKy0tCiB0b29scy9saWJ4bC9saWJ4bHV0aWwu
aCAgICAgICAgICAgfCAgMiArKwogdG9vbHMvcHl0aG9uL3hlbi9sb3dsZXZlbC94Yy94Yy5jIHwg
IDQgKy0tCiB0b29scy94bC94bC5jICAgICAgICAgICAgICAgICAgICAgfCAxNSArKysrLS0tLS0t
LQogdG9vbHMveGwveGxfcGFyc2UuYyAgICAgICAgICAgICAgIHwgIDkgKysrKy0tLQogeGVuL2Fy
Y2gvYXJtL3NldHVwLmMgICAgICAgICAgICAgIHwgIDIgKy0KIHhlbi9hcmNoL3g4Ni9zZXR1cC5j
ICAgICAgICAgICAgICB8ICA0ICstLQogeGVuL2NvbW1vbi9ncmFudF90YWJsZS5jICAgICAgICAg
IHwgNDUgKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLQogeGVuL2luY2x1ZGUvcHVibGlj
L2RvbWN0bC5oICAgICAgIHwgMTAgKysrKy0tLQogeGVuL2luY2x1ZGUveGVuL2dyYW50X3RhYmxl
LmggICAgIHwgMTAgKysrLS0tLQogMTMgZmlsZXMgY2hhbmdlZCwgMTAwIGluc2VydGlvbnMoKyks
IDQxIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RvY3MvbWFuL3hsLmNvbmYuNS5wb2QgYi9k
b2NzL21hbi94bC5jb25mLjUucG9kCmluZGV4IDk2MjE0NGUzOGUuLjIwN2FiM2U3N2EgMTAwNjQ0
Ci0tLSBhL2RvY3MvbWFuL3hsLmNvbmYuNS5wb2QKKysrIGIvZG9jcy9tYW4veGwuY29uZi41LnBv
ZApAQCAtODEsMTMgKzgxLDE1IEBAIERlZmF1bHQ6IEM8L3Zhci9sb2NrL3hsPgogCiBTZXRzIHRo
ZSBkZWZhdWx0IHZhbHVlIGZvciB0aGUgQzxtYXhfZ3JhbnRfZnJhbWVzPiBkb21haW4gY29uZmln
IHZhbHVlLgogCi1EZWZhdWx0OiBDPDMyPiBvbiBob3N0cyB1cCB0byAxNlRCIG9mIG1lbW9yeSwg
Qzw2ND4gb24gaG9zdHMgbGFyZ2VyIHRoYW4gMTZUQgorRGVmYXVsdDogdmFsdWUgb2YgWGVuIGNv
bW1hbmQgbGluZSBCPGdudHRhYl9tYXhfZnJhbWVzPiBwYXJhbWV0ZXIgKG9yIGl0cworZGVmYXVs
dCB2YWx1ZSBpZiB1bnNwZWNpZmllZCkuCiAKID1pdGVtIEI8bWF4X21hcHRyYWNrX2ZyYW1lcz1O
VU1CRVI+CiAKIFNldHMgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBDPG1heF9tYXB0cmFja19m
cmFtZXM+IGRvbWFpbiBjb25maWcgdmFsdWUuCiAKLURlZmF1bHQ6IEM8MTAyND4KK0RlZmF1bHQ6
IHZhbHVlIG9mIFhlbiBjb21tYW5kIGxpbmUgQjxnbnR0YWJfbWF4X21hcHRyYWNrX2ZyYW1lcz4K
K3BhcmFtZXRlciAob3IgaXRzIGRlZmF1bHQgdmFsdWUgaWYgdW5zcGVjaWZpZWQpLgogCiA9aXRl
bSBCPHZpZi5kZWZhdWx0LnNjcmlwdD0iUEFUSCI+CiAKZGlmZiAtLWdpdCBhL3Rvb2xzL2xpYnhs
L2xpYnhsLmggYi90b29scy9saWJ4bC9saWJ4bC5oCmluZGV4IDQ5YjU2ZmExYTMuLmEyYTVkMzIx
YzUgMTAwNjQ0Ci0tLSBhL3Rvb2xzL2xpYnhsL2xpYnhsLmgKKysrIGIvdG9vbHMvbGlieGwvbGli
eGwuaApAQCAtMzY0LDggKzM2NCw4IEBACiAgKi8KICNkZWZpbmUgTElCWExfSEFWRV9CVUlMRElO
Rk9fR1JBTlRfTElNSVRTIDEKIAotI2RlZmluZSBMSUJYTF9NQVhfR1JBTlRfRlJBTUVTX0RFRkFV
TFQgMzIKLSNkZWZpbmUgTElCWExfTUFYX01BUFRSQUNLX0ZSQU1FU19ERUZBVUxUIDEwMjQKKyNk
ZWZpbmUgTElCWExfTUFYX0dSQU5UX0ZSQU1FU19ERUZBVUxUIC0xCisjZGVmaW5lIExJQlhMX01B
WF9NQVBUUkFDS19GUkFNRVNfREVGQVVMVCAtMQogCiAvKgogICogTElCWExfSEFWRV9CVUlMRElO
Rk9fKiBpbmRpY2F0ZXMgdGhhdCBsaWJ4bF9kb21haW5fYnVpbGRfaW5mbyBoYXMKZGlmZiAtLWdp
dCBhL3Rvb2xzL2xpYnhsL2xpYnhsX3R5cGVzLmlkbCBiL3Rvb2xzL2xpYnhsL2xpYnhsX3R5cGVz
LmlkbAppbmRleCAwNTQ2ZDc4NjVhLi42M2UyOWJiMmZiIDEwMDY0NAotLS0gYS90b29scy9saWJ4
bC9saWJ4bF90eXBlcy5pZGwKKysrIGIvdG9vbHMvbGlieGwvbGlieGxfdHlwZXMuaWRsCkBAIC01
MTEsOCArNTExLDggQEAgbGlieGxfZG9tYWluX2J1aWxkX2luZm8gPSBTdHJ1Y3QoImRvbWFpbl9i
dWlsZF9pbmZvIixbCiAKICAgICAoInZudW1hX25vZGVzIiwgQXJyYXkobGlieGxfdm5vZGVfaW5m
bywgIm51bV92bnVtYV9ub2RlcyIpKSwKIAotICAgICgibWF4X2dyYW50X2ZyYW1lcyIsICAgIHVp
bnQzMiwgeydpbml0X3ZhbCc6ICdMSUJYTF9NQVhfR1JBTlRfRlJBTUVTX0RFRkFVTFQnfSksCi0g
ICAgKCJtYXhfbWFwdHJhY2tfZnJhbWVzIiwgdWludDMyLCB7J2luaXRfdmFsJzogJ0xJQlhMX01B
WF9NQVBUUkFDS19GUkFNRVNfREVGQVVMVCd9KSwKKyAgICAoIm1heF9ncmFudF9mcmFtZXMiLCAg
ICBpbnRlZ2VyLCB7J2luaXRfdmFsJzogJ0xJQlhMX01BWF9HUkFOVF9GUkFNRVNfREVGQVVMVCd9
KSwKKyAgICAoIm1heF9tYXB0cmFja19mcmFtZXMiLCBpbnRlZ2VyLCB7J2luaXRfdmFsJzogJ0xJ
QlhMX01BWF9NQVBUUkFDS19GUkFNRVNfREVGQVVMVCd9KSwKICAgICAKICAgICAoImRldmljZV9t
b2RlbF92ZXJzaW9uIiwgbGlieGxfZGV2aWNlX21vZGVsX3ZlcnNpb24pLAogICAgICgiZGV2aWNl
X21vZGVsX3N0dWJkb21haW4iLCBsaWJ4bF9kZWZib29sKSwKZGlmZiAtLWdpdCBhL3Rvb2xzL2xp
YnhsL2xpYnhsdV9jZmcuYyBiL3Rvb2xzL2xpYnhsL2xpYnhsdV9jZmcuYwppbmRleCA3MjgxNWQy
NWRkLi5jYWZjNjMyZmMxIDEwMDY0NAotLS0gYS90b29scy9saWJ4bC9saWJ4bHVfY2ZnLmMKKysr
IGIvdG9vbHMvbGlieGwvbGlieGx1X2NmZy5jCkBAIC0yNjgsOCArMjY4LDkgQEAgaW50IHhsdV9j
ZmdfcmVwbGFjZV9zdHJpbmcoY29uc3QgWExVX0NvbmZpZyAqY2ZnLCBjb25zdCBjaGFyICpuLAog
ICAgIHJldHVybiAwOwogfQogCi1pbnQgeGx1X2NmZ19nZXRfbG9uZyhjb25zdCBYTFVfQ29uZmln
ICpjZmcsIGNvbnN0IGNoYXIgKm4sCi0gICAgICAgICAgICAgICAgICAgICBsb25nICp2YWx1ZV9y
LCBpbnQgZG9udF93YXJuKSB7CitpbnQgeGx1X2NmZ19nZXRfYm91bmRlZF9sb25nKGNvbnN0IFhM
VV9Db25maWcgKmNmZywgY29uc3QgY2hhciAqbiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgbG9uZyBtaW4sIGxvbmcgbWF4LCBsb25nICp2YWx1ZV9yLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBpbnQgZG9udF93YXJuKSB7CiAgICAgbG9uZyBsOwogICAgIFhMVV9Db25maWdT
ZXR0aW5nICpzZXQ7CiAgICAgaW50IGU7CkBAIC0zMDMsMTAgKzMwNCwzMSBAQCBpbnQgeGx1X2Nm
Z19nZXRfbG9uZyhjb25zdCBYTFVfQ29uZmlnICpjZmcsIGNvbnN0IGNoYXIgKm4sCiAgICAgICAg
ICAgICAgICAgICAgIGNmZy0+Y29uZmlnX3NvdXJjZSwgc2V0LT5saW5lbm8sIG4pOwogICAgICAg
ICByZXR1cm4gRUlOVkFMOwogICAgIH0KKyAgICBpZiAobCA8IG1pbikgeworICAgICAgICBpZiAo
IWRvbnRfd2FybikKKyAgICAgICAgICAgIGZwcmludGYoY2ZnLT5yZXBvcnQsCisgICAgICAgICAg
ICAgICAgICAgICIlczolZDogd2FybmluZzogdmFsdWUgYCVsZCcgaXMgc21hbGxlciB0aGFuIG1p
bmltdW0gYm91bmQgJyVsZCdcbiIsCisgICAgICAgICAgICAgICAgICAgIGNmZy0+Y29uZmlnX3Nv
dXJjZSwgc2V0LT5saW5lbm8sIGwsIG1pbik7CisgICAgICAgIHJldHVybiBFSU5WQUw7CisgICAg
fQorICAgIGlmIChsID4gbWF4KSB7CisgICAgICAgIGlmICghZG9udF93YXJuKQorICAgICAgICAg
ICAgZnByaW50ZihjZmctPnJlcG9ydCwKKyAgICAgICAgICAgICAgICAgICAgIiVzOiVkOiB3YXJu
aW5nOiB2YWx1ZSBgJWxkJyBpcyBncmVhdGVyIHRoYW4gbWF4aW11bSBib3VuZCAnJWxkJ1xuIiwK
KyAgICAgICAgICAgICAgICAgICAgY2ZnLT5jb25maWdfc291cmNlLCBzZXQtPmxpbmVubywgbCwg
bWF4KTsKKyAgICAgICAgcmV0dXJuIEVJTlZBTDsKKyAgICB9CisKICAgICAqdmFsdWVfcj0gbDsK
ICAgICByZXR1cm4gMDsKIH0KIAoraW50IHhsdV9jZmdfZ2V0X2xvbmcoY29uc3QgWExVX0NvbmZp
ZyAqY2ZnLCBjb25zdCBjaGFyICpuLAorICAgICAgICAgICAgICAgICAgICAgbG9uZyAqdmFsdWVf
ciwgaW50IGRvbnRfd2FybikgeworICAgIHJldHVybiB4bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmco
Y2ZnLCBuLCBMT05HX01JTiwgTE9OR19NQVgsIHZhbHVlX3IsCisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBkb250X3dhcm4pOworfQorCiBpbnQgeGx1X2NmZ19nZXRfZGVmYm9v
bChjb25zdCBYTFVfQ29uZmlnICpjZmcsIGNvbnN0IGNoYXIgKm4sIGxpYnhsX2RlZmJvb2wgKmIs
CiAgICAgICAgICAgICAgICAgICAgICBpbnQgZG9udF93YXJuKQogewpkaWZmIC0tZ2l0IGEvdG9v
bHMvbGlieGwvbGlieGx1dGlsLmggYi90b29scy9saWJ4bC9saWJ4bHV0aWwuaAppbmRleCAwNTdj
YzI1Y2IyLi45MmUzNWM1NDYyIDEwMDY0NAotLS0gYS90b29scy9saWJ4bC9saWJ4bHV0aWwuaAor
KysgYi90b29scy9saWJ4bC9saWJ4bHV0aWwuaApAQCAtNjMsNiArNjMsOCBAQCBpbnQgeGx1X2Nm
Z19yZXBsYWNlX3N0cmluZyhjb25zdCBYTFVfQ29uZmlnICpjZmcsIGNvbnN0IGNoYXIgKm4sCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyICoqdmFsdWVfciwgaW50IGRvbnRfd2Fybik7
CiBpbnQgeGx1X2NmZ19nZXRfbG9uZyhjb25zdCBYTFVfQ29uZmlnKiwgY29uc3QgY2hhciAqbiwg
bG9uZyAqdmFsdWVfciwKICAgICAgICAgICAgICAgICAgICAgIGludCBkb250X3dhcm4pOworaW50
IHhsdV9jZmdfZ2V0X2JvdW5kZWRfbG9uZyhjb25zdCBYTFVfQ29uZmlnKiwgY29uc3QgY2hhciAq
biwgbG9uZyBtaW4sCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmcgbWF4LCBsb25n
ICp2YWx1ZV9yLCBpbnQgZG9udF93YXJuKTsKIGludCB4bHVfY2ZnX2dldF9kZWZib29sKGNvbnN0
IFhMVV9Db25maWcqLCBjb25zdCBjaGFyICpuLCBsaWJ4bF9kZWZib29sICpiLAogICAgICAgICAg
ICAgICAgICAgICAgaW50IGRvbnRfd2Fybik7CiAKZGlmZiAtLWdpdCBhL3Rvb2xzL3B5dGhvbi94
ZW4vbG93bGV2ZWwveGMveGMuYyBiL3Rvb2xzL3B5dGhvbi94ZW4vbG93bGV2ZWwveGMveGMuYwpp
bmRleCA0NGQzNjA2MTQxLi5hNzUxZTg1OTEwIDEwMDY0NAotLS0gYS90b29scy9weXRob24veGVu
L2xvd2xldmVsL3hjL3hjLmMKKysrIGIvdG9vbHMvcHl0aG9uL3hlbi9sb3dsZXZlbC94Yy94Yy5j
CkBAIC0xMjcsOCArMTI3LDggQEAgc3RhdGljIFB5T2JqZWN0ICpweXhjX2RvbWFpbl9jcmVhdGUo
WGNPYmplY3QgKnNlbGYsCiAgICAgICAgIH0sCiAgICAgICAgIC5tYXhfdmNwdXMgPSAxLAogICAg
ICAgICAubWF4X2V2dGNobl9wb3J0ID0gLTEsIC8qIE5vIGxpbWl0LiAqLwotICAgICAgICAubWF4
X2dyYW50X2ZyYW1lcyA9IDMyLAotICAgICAgICAubWF4X21hcHRyYWNrX2ZyYW1lcyA9IDEwMjQs
CisgICAgICAgIC5tYXhfZ3JhbnRfZnJhbWVzID0gLTEsCisgICAgICAgIC5tYXhfbWFwdHJhY2tf
ZnJhbWVzID0gLTEsCiAgICAgfTsKIAogICAgIHN0YXRpYyBjaGFyICprd2RfbGlzdFtdID0geyAi
ZG9taWQiLCAic3NpZHJlZiIsICJoYW5kbGUiLCAiZmxhZ3MiLApkaWZmIC0tZ2l0IGEvdG9vbHMv
eGwveGwuYyBiL3Rvb2xzL3hsL3hsLmMKaW5kZXggZGRkMjliM2YxYi4uOTIxYzY0ZjVlZCAxMDA2
NDQKLS0tIGEvdG9vbHMveGwveGwuYworKysgYi90b29scy94bC94bC5jCkBAIC0yMyw2ICsyMyw3
IEBACiAjaW5jbHVkZSA8Y3R5cGUuaD4KICNpbmNsdWRlIDxpbnR0eXBlcy5oPgogI2luY2x1ZGUg
PHJlZ2V4Lmg+CisjaW5jbHVkZSA8bGltaXRzLmg+CiAKICNpbmNsdWRlIDxsaWJ4bC5oPgogI2lu
Y2x1ZGUgPGxpYnhsX3V0aWxzLmg+CkBAIC05Niw3ICs5Nyw2IEBAIHN0YXRpYyB2b2lkIHBhcnNl
X2dsb2JhbF9jb25maWcoY29uc3QgY2hhciAqY29uZmlnZmlsZSwKICAgICBYTFVfQ29uZmlnICpj
b25maWc7CiAgICAgaW50IGU7CiAgICAgY29uc3QgY2hhciAqYnVmOwotICAgIGxpYnhsX3BoeXNp
bmZvIHBoeXNpbmZvOwogCiAgICAgY29uZmlnID0geGx1X2NmZ19pbml0KHN0ZGVyciwgY29uZmln
ZmlsZSk7CiAgICAgaWYgKCFjb25maWcpIHsKQEAgLTE5NywxNiArMTk3LDExIEBAIHN0YXRpYyB2
b2lkIHBhcnNlX2dsb2JhbF9jb25maWcoY29uc3QgY2hhciAqY29uZmlnZmlsZSwKICAgICB4bHVf
Y2ZnX3JlcGxhY2Vfc3RyaW5nIChjb25maWcsICJjb2xvLmRlZmF1bHQucHJveHlzY3JpcHQiLAog
ICAgICAgICAmZGVmYXVsdF9jb2xvX3Byb3h5X3NjcmlwdCwgMCk7CiAKLSAgICBpZiAoIXhsdV9j
ZmdfZ2V0X2xvbmcgKGNvbmZpZywgIm1heF9ncmFudF9mcmFtZXMiLCAmbCwgMCkpCisgICAgaWYg
KCF4bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmcgKGNvbmZpZywgIm1heF9ncmFudF9mcmFtZXMiLCAw
LCBJTlRfTUFYLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbCwgMCkpCiAg
ICAgICAgIG1heF9ncmFudF9mcmFtZXMgPSBsOwotICAgIGVsc2UgewotICAgICAgICBsaWJ4bF9w
aHlzaW5mb19pbml0KCZwaHlzaW5mbyk7Ci0gICAgICAgIG1heF9ncmFudF9mcmFtZXMgPSAobGli
eGxfZ2V0X3BoeXNpbmZvKGN0eCwgJnBoeXNpbmZvKSAhPSAwIHx8Ci0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIShwaHlzaW5mby5tYXhfcG9zc2libGVfbWZuID4+IDMyKSkKLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgID8gMzIgOiA2NDsKLSAgICAgICAgbGlieGxfcGh5c2luZm9fZGlz
cG9zZSgmcGh5c2luZm8pOwotICAgIH0KLSAgICBpZiAoIXhsdV9jZmdfZ2V0X2xvbmcgKGNvbmZp
ZywgIm1heF9tYXB0cmFja19mcmFtZXMiLCAmbCwgMCkpCisgICAgaWYgKCF4bHVfY2ZnX2dldF9i
b3VuZGVkX2xvbmcgKGNvbmZpZywgIm1heF9tYXB0cmFja19mcmFtZXMiLCAwLAorICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfTUFYLCAmbCwgMCkpCiAgICAgICAgIG1heF9t
YXB0cmFja19mcmFtZXMgPSBsOwogCiAgICAgbGlieGxfY3B1X2JpdG1hcF9hbGxvYyhjdHgsICZn
bG9iYWxfdm1fYWZmaW5pdHlfbWFzaywgMCk7CmRpZmYgLS1naXQgYS90b29scy94bC94bF9wYXJz
ZS5jIGIvdG9vbHMveGwveGxfcGFyc2UuYwppbmRleCAxMTJmOGVlMDI2Li41NTU5OTFkYWUzIDEw
MDY0NAotLS0gYS90b29scy94bC94bF9wYXJzZS5jCisrKyBiL3Rvb2xzL3hsL3hsX3BhcnNlLmMK
QEAgLTE0MTEsMTMgKzE0MTEsMTYgQEAgdm9pZCBwYXJzZV9jb25maWdfZGF0YShjb25zdCBjaGFy
ICpjb25maWdfc291cmNlLAogICAgICAgICAheGx1X2NmZ19nZXRfc3RyaW5nIChjb25maWcsICJj
cHVzX3NvZnQiLCAmYnVmLCAwKSkKICAgICAgICAgcGFyc2VfdmNwdV9hZmZpbml0eShiX2luZm8s
IGNwdXMsIGJ1ZiwgbnVtX2NwdXMsIGZhbHNlKTsKIAotICAgIGlmICgheGx1X2NmZ19nZXRfbG9u
ZyAoY29uZmlnLCAibWF4X2dyYW50X2ZyYW1lcyIsICZsLCAwKSkKKyAgICBpZiAoIXhsdV9jZmdf
Z2V0X2JvdW5kZWRfbG9uZyAoY29uZmlnLCAibWF4X2dyYW50X2ZyYW1lcyIsIDAsIElOVF9NQVgs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZsLCAwKSkKICAgICAgICAgYl9p
bmZvLT5tYXhfZ3JhbnRfZnJhbWVzID0gbDsKICAgICBlbHNlCiAgICAgICAgIGJfaW5mby0+bWF4
X2dyYW50X2ZyYW1lcyA9IG1heF9ncmFudF9mcmFtZXM7Ci0gICAgaWYgKCF4bHVfY2ZnX2dldF9s
b25nIChjb25maWcsICJtYXhfbWFwdHJhY2tfZnJhbWVzIiwgJmwsIDApKQorCisgICAgaWYgKCF4
bHVfY2ZnX2dldF9ib3VuZGVkX2xvbmcgKGNvbmZpZywgIm1heF9tYXB0cmFja19mcmFtZXMiLCAw
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRfTUFYLCAmbCwgMCkpCiAg
ICAgICAgIGJfaW5mby0+bWF4X21hcHRyYWNrX2ZyYW1lcyA9IGw7Ci0gICAgZWxzZSBpZiAobWF4
X21hcHRyYWNrX2ZyYW1lcyAhPSAtMSkKKyAgICBlbHNlCiAgICAgICAgIGJfaW5mby0+bWF4X21h
cHRyYWNrX2ZyYW1lcyA9IG1heF9tYXB0cmFja19mcmFtZXM7CiAKICAgICBsaWJ4bF9kZWZib29s
X3NldCgmYl9pbmZvLT5jbGFpbV9tb2RlLCBjbGFpbV9tb2RlKTsKZGlmZiAtLWdpdCBhL3hlbi9h
cmNoL2FybS9zZXR1cC5jIGIveGVuL2FyY2gvYXJtL3NldHVwLmMKaW5kZXggNTFkMzIxMDZiNy4u
M2M4OTljZDRhMCAxMDA2NDQKLS0tIGEveGVuL2FyY2gvYXJtL3NldHVwLmMKKysrIGIveGVuL2Fy
Y2gvYXJtL3NldHVwLmMKQEAgLTc4OSw3ICs3ODksNyBAQCB2b2lkIF9faW5pdCBzdGFydF94ZW4o
dW5zaWduZWQgbG9uZyBib290X3BoeXNfb2Zmc2V0LAogICAgICAgICAuZmxhZ3MgPSBYRU5fRE9N
Q1RMX0NERl9odm0gfCBYRU5fRE9NQ1RMX0NERl9oYXAsCiAgICAgICAgIC5tYXhfZXZ0Y2huX3Bv
cnQgPSAtMSwKICAgICAgICAgLm1heF9ncmFudF9mcmFtZXMgPSBnbnR0YWJfZG9tMF9mcmFtZXMo
KSwKLSAgICAgICAgLm1heF9tYXB0cmFja19mcmFtZXMgPSBvcHRfbWF4X21hcHRyYWNrX2ZyYW1l
cywKKyAgICAgICAgLm1heF9tYXB0cmFja19mcmFtZXMgPSAtMSwKICAgICB9OwogICAgIGludCBy
YzsKIApkaWZmIC0tZ2l0IGEveGVuL2FyY2gveDg2L3NldHVwLmMgYi94ZW4vYXJjaC94ODYvc2V0
dXAuYwppbmRleCAwMGVlODdiZGU1Li43ZDI3ZjM2MDUzIDEwMDY0NAotLS0gYS94ZW4vYXJjaC94
ODYvc2V0dXAuYworKysgYi94ZW4vYXJjaC94ODYvc2V0dXAuYwpAQCAtNjk3LDggKzY5Nyw4IEBA
IHZvaWQgX19pbml0IG5vcmV0dXJuIF9fc3RhcnRfeGVuKHVuc2lnbmVkIGxvbmcgbWJpX3ApCiAg
ICAgc3RydWN0IHhlbl9kb21jdGxfY3JlYXRlZG9tYWluIGRvbTBfY2ZnID0gewogICAgICAgICAu
ZmxhZ3MgPSBJU19FTkFCTEVEKENPTkZJR19UQk9PVCkgPyBYRU5fRE9NQ1RMX0NERl9zM19pbnRl
Z3JpdHkgOiAwLAogICAgICAgICAubWF4X2V2dGNobl9wb3J0ID0gLTEsCi0gICAgICAgIC5tYXhf
Z3JhbnRfZnJhbWVzID0gb3B0X21heF9ncmFudF9mcmFtZXMsCi0gICAgICAgIC5tYXhfbWFwdHJh
Y2tfZnJhbWVzID0gb3B0X21heF9tYXB0cmFja19mcmFtZXMsCisgICAgICAgIC5tYXhfZ3JhbnRf
ZnJhbWVzID0gLTEsCisgICAgICAgIC5tYXhfbWFwdHJhY2tfZnJhbWVzID0gLTEsCiAgICAgfTsK
IAogICAgIC8qIENyaXRpY2FsIHJlZ2lvbiB3aXRob3V0IElEVCBvciBUU1MuICBBbnkgZmF1bHQg
aXMgZGVhZGx5ISAqLwpkaWZmIC0tZ2l0IGEveGVuL2NvbW1vbi9ncmFudF90YWJsZS5jIGIveGVu
L2NvbW1vbi9ncmFudF90YWJsZS5jCmluZGV4IGIzNGQ1MjBmNmQuLjI4MzU4ZDMzYjkgMTAwNjQ0
Ci0tLSBhL3hlbi9jb21tb24vZ3JhbnRfdGFibGUuYworKysgYi94ZW4vY29tbW9uL2dyYW50X3Rh
YmxlLmMKQEAgLTg0LDExICs4NCw0MCBAQCBzdHJ1Y3QgZ3JhbnRfdGFibGUgewogICAgIHN0cnVj
dCBncmFudF90YWJsZV9hcmNoIGFyY2g7CiB9OwogCitzdGF0aWMgaW50IHBhcnNlX2dudHRhYl9s
aW1pdChjb25zdCBjaGFyICpwYXJhbSwgY29uc3QgY2hhciAqYXJnLAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdW5zaWduZWQgaW50ICp2YWxwKQoreworICAgIGNvbnN0IGNoYXIgKmU7
CisgICAgdW5zaWduZWQgbG9uZyB2YWw7CisKKyAgICB2YWwgPSBzaW1wbGVfc3RydG91bChhcmcs
ICZlLCAwKTsKKyAgICBpZiAoICplICkKKyAgICAgICAgcmV0dXJuIC1FSU5WQUw7CisKKyAgICBp
ZiAoIHZhbCA+IElOVF9NQVggKQorICAgICAgICByZXR1cm4gLUVSQU5HRTsKKworICAgIHJldHVy
biAwOworfQorCiB1bnNpZ25lZCBpbnQgX19yZWFkX21vc3RseSBvcHRfbWF4X2dyYW50X2ZyYW1l
cyA9IDY0OwotaW50ZWdlcl9ydW50aW1lX3BhcmFtKCJnbnR0YWJfbWF4X2ZyYW1lcyIsIG9wdF9t
YXhfZ3JhbnRfZnJhbWVzKTsKIAotdW5zaWduZWQgaW50IF9fcmVhZF9tb3N0bHkgb3B0X21heF9t
YXB0cmFja19mcmFtZXMgPSAxMDI0OwotaW50ZWdlcl9ydW50aW1lX3BhcmFtKCJnbnR0YWJfbWF4
X21hcHRyYWNrX2ZyYW1lcyIsIG9wdF9tYXhfbWFwdHJhY2tfZnJhbWVzKTsKK3N0YXRpYyBpbnQg
cGFyc2VfZ250dGFiX21heF9mcmFtZXMoY29uc3QgY2hhciAqYXJnKQoreworICAgIHJldHVybiBw
YXJzZV9nbnR0YWJfbGltaXQoImdudHRhYl9tYXhfZnJhbWVzIiwgYXJnLAorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgJm9wdF9tYXhfZ3JhbnRfZnJhbWVzKTsKK30KK2N1c3RvbV9ydW50
aW1lX3BhcmFtKCJnbnR0YWJfbWF4X2ZyYW1lcyIsIHBhcnNlX2dudHRhYl9tYXhfZnJhbWVzKTsK
Kworc3RhdGljIHVuc2lnbmVkIGludCBfX3JlYWRfbW9zdGx5IG9wdF9tYXhfbWFwdHJhY2tfZnJh
bWVzID0gMTAyNDsKKworc3RhdGljIGludCBwYXJzZV9nbnR0YWJfbWF4X21hcHRyYWNrX2ZyYW1l
cyhjb25zdCBjaGFyICphcmcpCit7CisgICAgcmV0dXJuIHBhcnNlX2dudHRhYl9saW1pdCgiZ250
dGFiX21heF9tYXB0cmFja19mcmFtZXMiLCBhcmcsCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAmb3B0X21heF9tYXB0cmFja19mcmFtZXMpOworfQorY3VzdG9tX3J1bnRpbWVfcGFyYW0o
ImdudHRhYl9tYXhfbWFwdHJhY2tfZnJhbWVzIiwKKyAgICAgICAgICAgICAgICAgICAgIHBhcnNl
X2dudHRhYl9tYXhfbWFwdHJhY2tfZnJhbWVzKTsKIAogI2lmbmRlZiBHTlRUQUJfTUFYX1ZFUlNJ
T04KICNkZWZpbmUgR05UVEFCX01BWF9WRVJTSU9OIDIKQEAgLTE4MzcsMTIgKzE4NjYsMTggQEAg
YWN0aXZlX2FsbG9jX2ZhaWxlZDoKICAgICByZXR1cm4gLUVOT01FTTsKIH0KIAotaW50IGdyYW50
X3RhYmxlX2luaXQoc3RydWN0IGRvbWFpbiAqZCwgdW5zaWduZWQgaW50IG1heF9ncmFudF9mcmFt
ZXMsCi0gICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgbWF4X21hcHRyYWNrX2ZyYW1l
cykKK2ludCBncmFudF90YWJsZV9pbml0KHN0cnVjdCBkb21haW4gKmQsIGludCBtYXhfZ3JhbnRf
ZnJhbWVzLAorICAgICAgICAgICAgICAgICAgICAgaW50IG1heF9tYXB0cmFja19mcmFtZXMpCiB7
CiAgICAgc3RydWN0IGdyYW50X3RhYmxlICpndDsKICAgICBpbnQgcmV0ID0gLUVOT01FTTsKIAor
ICAgIC8qIERlZmF1bHQgdG8gbWF4aW11bSB2YWx1ZSBpZiBubyB2YWx1ZSB3YXMgc3BlY2lmaWVk
ICovCisgICAgaWYgKCBtYXhfZ3JhbnRfZnJhbWVzIDwgMCApCisgICAgICAgIG1heF9ncmFudF9m
cmFtZXMgPSBvcHRfbWF4X2dyYW50X2ZyYW1lczsKKyAgICBpZiAoIG1heF9tYXB0cmFja19mcmFt
ZXMgPCAwICkKKyAgICAgICAgbWF4X21hcHRyYWNrX2ZyYW1lcyA9IG9wdF9tYXhfbWFwdHJhY2tf
ZnJhbWVzOworCiAgICAgaWYgKCBtYXhfZ3JhbnRfZnJhbWVzIDwgSU5JVElBTF9OUl9HUkFOVF9G
UkFNRVMgfHwKICAgICAgICAgIG1heF9ncmFudF9mcmFtZXMgPiBvcHRfbWF4X2dyYW50X2ZyYW1l
cyB8fAogICAgICAgICAgbWF4X21hcHRyYWNrX2ZyYW1lcyA+IG9wdF9tYXhfbWFwdHJhY2tfZnJh
bWVzICkKZGlmZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3B1YmxpYy9kb21jdGwuaCBiL3hlbi9pbmNs
dWRlL3B1YmxpYy9kb21jdGwuaAppbmRleCA5ZjJjZmQ2MDJjLi5lMzEzZGE0OTlmIDEwMDY0NAot
LS0gYS94ZW4vaW5jbHVkZS9wdWJsaWMvZG9tY3RsLmgKKysrIGIveGVuL2luY2x1ZGUvcHVibGlj
L2RvbWN0bC5oCkBAIC04MiwxMyArODIsMTUgQEAgc3RydWN0IHhlbl9kb21jdGxfY3JlYXRlZG9t
YWluIHsKICAgICB1aW50MzJfdCBpb21tdV9vcHRzOwogCiAgICAgLyoKLSAgICAgKiBWYXJpb3Vz
IGRvbWFpbiBsaW1pdHMsIHdoaWNoIGltcGFjdCB0aGUgcXVhbnRpdHkgb2YgcmVzb3VyY2VzIChn
bG9iYWwKLSAgICAgKiBtYXBwaW5nIHNwYWNlLCB4ZW5oZWFwLCBldGMpIGEgZ3Vlc3QgbWF5IGNv
bnN1bWUuCisgICAgICogVmFyaW91cyBkb21haW4gbGltaXRzLCB3aGljaCBpbXBhY3QgdGhlIHF1
YW50aXR5IG9mIHJlc291cmNlcworICAgICAqIChnbG9iYWwgbWFwcGluZyBzcGFjZSwgeGVuaGVh
cCwgZXRjKSBhIGd1ZXN0IG1heSBjb25zdW1lLiAgRm9yCisgICAgICogbWF4X2dyYW50X2ZyYW1l
cyBhbmQgbWF4X21hcHRyYWNrX2ZyYW1lcywgPCAwIG1lYW5zICJ1c2UgdGhlCisgICAgICogZGVm
YXVsdCBtYXhpbXVtIHZhbHVlIGluIHRoZSBoeXBlcnZpc29yIi4KICAgICAgKi8KICAgICB1aW50
MzJfdCBtYXhfdmNwdXM7CiAgICAgdWludDMyX3QgbWF4X2V2dGNobl9wb3J0OwotICAgIHVpbnQz
Ml90IG1heF9ncmFudF9mcmFtZXM7Ci0gICAgdWludDMyX3QgbWF4X21hcHRyYWNrX2ZyYW1lczsK
KyAgICBpbnQzMl90IG1heF9ncmFudF9mcmFtZXM7CisgICAgaW50MzJfdCBtYXhfbWFwdHJhY2tf
ZnJhbWVzOwogCiAgICAgc3RydWN0IHhlbl9hcmNoX2RvbWFpbmNvbmZpZyBhcmNoOwogfTsKZGlm
ZiAtLWdpdCBhL3hlbi9pbmNsdWRlL3hlbi9ncmFudF90YWJsZS5oIGIveGVuL2luY2x1ZGUveGVu
L2dyYW50X3RhYmxlLmgKaW5kZXggNmY5MzQ1ZDllZi4uOTg2MDM2MDRiOCAxMDA2NDQKLS0tIGEv
eGVuL2luY2x1ZGUveGVuL2dyYW50X3RhYmxlLmgKKysrIGIveGVuL2luY2x1ZGUveGVuL2dyYW50
X3RhYmxlLmgKQEAgLTMzLDExICszMywxMCBAQAogc3RydWN0IGdyYW50X3RhYmxlOwogCiBleHRl
cm4gdW5zaWduZWQgaW50IG9wdF9tYXhfZ3JhbnRfZnJhbWVzOwotZXh0ZXJuIHVuc2lnbmVkIGlu
dCBvcHRfbWF4X21hcHRyYWNrX2ZyYW1lczsKIAogLyogQ3JlYXRlL2Rlc3Ryb3kgcGVyLWRvbWFp
biBncmFudCB0YWJsZSBjb250ZXh0LiAqLwotaW50IGdyYW50X3RhYmxlX2luaXQoc3RydWN0IGRv
bWFpbiAqZCwgdW5zaWduZWQgaW50IG1heF9ncmFudF9mcmFtZXMsCi0gICAgICAgICAgICAgICAg
ICAgICB1bnNpZ25lZCBpbnQgbWF4X21hcHRyYWNrX2ZyYW1lcyk7CitpbnQgZ3JhbnRfdGFibGVf
aW5pdChzdHJ1Y3QgZG9tYWluICpkLCBpbnQgbWF4X2dyYW50X2ZyYW1lcywKKyAgICAgICAgICAg
ICAgICAgICAgIGludCBtYXhfbWFwdHJhY2tfZnJhbWVzKTsKIHZvaWQgZ3JhbnRfdGFibGVfZGVz
dHJveSgKICAgICBzdHJ1Y3QgZG9tYWluICpkKTsKIHZvaWQgZ3JhbnRfdGFibGVfaW5pdF92Y3B1
KHN0cnVjdCB2Y3B1ICp2KTsKQEAgLTY1LDExICs2NCwxMCBAQCBpbnQgZ250dGFiX2dldF9zdGF0
dXNfZnJhbWUoc3RydWN0IGRvbWFpbiAqZCwgdW5zaWduZWQgbG9uZyBpZHgsCiAjZWxzZQogCiAj
ZGVmaW5lIG9wdF9tYXhfZ3JhbnRfZnJhbWVzIDAKLSNkZWZpbmUgb3B0X21heF9tYXB0cmFja19m
cmFtZXMgMAogCiBzdGF0aWMgaW5saW5lIGludCBncmFudF90YWJsZV9pbml0KHN0cnVjdCBkb21h
aW4gKmQsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBt
YXhfZ3JhbnRfZnJhbWVzLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNp
Z25lZCBpbnQgbWF4X21hcHRyYWNrX2ZyYW1lcykKKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaW50IG1heF9ncmFudF9mcmFtZXMsCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGludCBtYXhfbWFwdHJhY2tfZnJhbWVzKQogewogICAgIHJldHVybiAwOwogfQot
LSAKMi4yMC4xCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApYZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcK
aHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==

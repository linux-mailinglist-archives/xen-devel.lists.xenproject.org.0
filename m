Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 9635238711
	for <lists+xen-devel@lfdr.de>; Fri,  7 Jun 2019 11:27:41 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hZB6d-0003BS-P6; Fri, 07 Jun 2019 09:24:15 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=GsDR=UG=citrix.com=roger.pau@srs-us1.protection.inumbo.net>)
 id 1hZB6b-0003Ai-Bb
 for xen-devel@lists.xenproject.org; Fri, 07 Jun 2019 09:24:13 +0000
X-Inumbo-ID: 00937716-8906-11e9-8da5-43477a13ae6d
Received: from esa5.hc3370-68.iphmx.com (unknown [216.71.155.168])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 00937716-8906-11e9-8da5-43477a13ae6d;
 Fri, 07 Jun 2019 09:24:09 +0000 (UTC)
Authentication-Results: esa5.hc3370-68.iphmx.com;
 dkim=none (message not signed) header.i=none;
 spf=None smtp.pra=roger.pau@citrix.com;
 spf=SoftFail smtp.mailfrom=roger.pau@citrix.com;
 spf=None smtp.helo=postmaster@mail.citrix.com
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 roger.pau@citrix.com) identity=pra; client-ip=162.221.158.21;
 receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="roger.pau@citrix.com";
 x-sender="roger.pau@citrix.com"; x-conformance=sidf_compatible
Received-SPF: SoftFail (esa5.hc3370-68.iphmx.com: domain of
 roger.pau@citrix.com is inclined to not designate
 162.221.158.21 as permitted sender) identity=mailfrom;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="roger.pau@citrix.com";
 x-sender="roger.pau@citrix.com";
 x-conformance=sidf_compatible; x-record-type="v=spf1";
 x-record-text="v=spf1 include:spf.citrix.com
 include:spf2.citrix.com include:ironport.citrix.com
 exists:%{i}._spf.mta.salesforce.com ~all"
Received-SPF: None (esa5.hc3370-68.iphmx.com: no sender
 authenticity information available from domain of
 postmaster@mail.citrix.com) identity=helo;
 client-ip=162.221.158.21; receiver=esa5.hc3370-68.iphmx.com;
 envelope-from="roger.pau@citrix.com";
 x-sender="postmaster@mail.citrix.com";
 x-conformance=sidf_compatible
IronPort-SDR: Lwgfby1p1+2brdqxLlVmr60f2bcvCkYiavQDwzHOXnSMiLrnfLWV9gcxKwgraj+G7xBOKapmi3
 f36KBPefOH0yq9RgtCby3fCHul3l7VqePhFnIrpklOZ5k16fxAILPnnGmE5qMSvCWUVkDDKAJg
 rw7MUJf55m8kZjOisahzb370KkxD9HtGo8gzRrxHgGY8Ewn4vQ98DEsu2LN2iHcbL5doFqpVp6
 so9OYK06wY6kAdF5lGmgOv2aOFXZ8zZbjYivn0sHNvBMxyEv3yBtAqvFDX/z4ceUcBL32ACeBu
 xTA=
X-SBRS: -0.9
X-MesageID: 1419228
X-Ironport-Server: esa5.hc3370-68.iphmx.com
X-Remote-IP: 162.221.158.21
X-Policy: $RELAYED
X-IronPort-AV: E=Sophos;i="5.63,562,1557201600"; 
   d="scan'208";a="1419228"
From: Roger Pau Monne <roger.pau@citrix.com>
To: <xen-devel@lists.xenproject.org>
Date: Fri, 7 Jun 2019 11:22:32 +0200
Message-ID: <20190607092232.83179-14-roger.pau@citrix.com>
X-Mailer: git-send-email 2.20.1 (Apple Git-117)
In-Reply-To: <20190607092232.83179-1-roger.pau@citrix.com>
References: <20190607092232.83179-1-roger.pau@citrix.com>
MIME-Version: 1.0
Subject: [Xen-devel] [PATCH v3 13/13] print: introduce a format specifier
 for pci_sbdf_t
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Kevin Tian <kevin.tian@intel.com>,
 Stefano Stabellini <sstabellini@kernel.org>,
 Suravee Suthikulpanit <suravee.suthikulpanit@amd.com>, Wei Liu <wl@xen.org>,
 Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>,
 George Dunlap <George.Dunlap@eu.citrix.com>,
 Andrew Cooper <andrew.cooper3@citrix.com>,
 Ian Jackson <ian.jackson@eu.citrix.com>, Tim Deegan <tim@xen.org>,
 Julien Grall <julien.grall@arm.com>, Jan Beulich <jbeulich@suse.com>,
 Brian Woods <brian.woods@amd.com>, Roger Pau Monne <roger.pau@citrix.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

VGhlIG5ldyBmb3JtYXQgc3BlY2lmaWVyIGlzICclcHAnLCBhbmQgcHJpbnRzIGEgcGNpX3NiZGZf
dCB1c2luZyB0aGUKc2VnOmJ1czpkZXYuZnVuYyBmb3JtYXQuIFJlcGxhY2UgYWxsIFNCREZzIHBy
aW50ZWQgdXNpbmcKJyUwNHg6JTAyeDolMDJ4LiV1JyB0byB1c2UgdGhlIG5ldyBmb3JtYXQgc3Bl
Y2lmaWVyLgoKTm8gZnVuY3Rpb25hbCBjaGFuZ2UgaW50ZW5kZWQuCgpTaWduZWQtb2ZmLWJ5OiBS
b2dlciBQYXUgTW9ubsOpIDxyb2dlci5wYXVAY2l0cml4LmNvbT4KLS0tCkNjOiBBbmRyZXcgQ29v
cGVyIDxhbmRyZXcuY29vcGVyM0BjaXRyaXguY29tPgpDYzogR2VvcmdlIER1bmxhcCA8R2Vvcmdl
LkR1bmxhcEBldS5jaXRyaXguY29tPgpDYzogSWFuIEphY2tzb24gPGlhbi5qYWNrc29uQGV1LmNp
dHJpeC5jb20+CkNjOiBKYW4gQmV1bGljaCA8amJldWxpY2hAc3VzZS5jb20+CkNjOiBKdWxpZW4g
R3JhbGwgPGp1bGllbi5ncmFsbEBhcm0uY29tPgpDYzogS29ucmFkIFJ6ZXN6dXRlayBXaWxrIDxr
b25yYWQud2lsa0BvcmFjbGUuY29tPgpDYzogU3RlZmFubyBTdGFiZWxsaW5pIDxzc3RhYmVsbGlu
aUBrZXJuZWwub3JnPgpDYzogVGltIERlZWdhbiA8dGltQHhlbi5vcmc+CkNjOiBXZWkgTGl1IDx3
bEB4ZW4ub3JnPgpDYzogU3VyYXZlZSBTdXRoaWt1bHBhbml0IDxzdXJhdmVlLnN1dGhpa3VscGFu
aXRAYW1kLmNvbT4KQ2M6IEJyaWFuIFdvb2RzIDxicmlhbi53b29kc0BhbWQuY29tPgpDYzogS2V2
aW4gVGlhbiA8a2V2aW4udGlhbkBpbnRlbC5jb20+Ci0tLQpDaGFuZ2VzIHNpbmNlIHYxOgogLSBV
c2UgYmFzZSA4IHRvIHByaW50IHRoZSBmdW5jdGlvbiBudW1iZXIuCiAtIFNvcnQgdGhlIGFkZGl0
aW9uIGluIHRoZSBwb2ludGVyIGZ1bmN0aW9uIGFscGhhYmV0aWNhbGx5LgotLS0KIGRvY3MvbWlz
Yy9wcmludGstZm9ybWF0cy50eHQgICAgICAgICAgICAgICAgfCAgIDUgKwogeGVuL2FyY2gveDg2
L2h2bS92bXNpLmMgICAgICAgICAgICAgICAgICAgICB8ICAxMCArLQogeGVuL2FyY2gveDg2L21z
aS5jICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAzNSArKystLS0KIHhlbi9jb21tb24vdnNw
cmludGYuYyAgICAgICAgICAgICAgICAgICAgICAgfCAgMTggKysrKwogeGVuL2RyaXZlcnMvcGFz
c3Rocm91Z2gvYW1kL2lvbW11X2FjcGkuYyAgICB8ICAxNyArKy0KIHhlbi9kcml2ZXJzL3Bhc3N0
aHJvdWdoL2FtZC9pb21tdV9jbWQuYyAgICAgfCAgIDUgKy0KIHhlbi9kcml2ZXJzL3Bhc3N0aHJv
dWdoL2FtZC9pb21tdV9kZXRlY3QuYyAgfCAgIDUgKy0KIHhlbi9kcml2ZXJzL3Bhc3N0aHJvdWdo
L2FtZC9pb21tdV9pbml0LmMgICAgfCAgMTIgKy0tCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9h
bWQvaW9tbXVfaW50ci5jICAgIHwgICA4ICstCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQv
cGNpX2FtZF9pb21tdS5jIHwgIDI1ICsrLS0tCiB4ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9wY2ku
YyAgICAgICAgICAgICAgIHwgMTE0ICsrKysrKysrLS0tLS0tLS0tLS0tCiB4ZW4vZHJpdmVycy9w
YXNzdGhyb3VnaC92dGQvZG1hci5jICAgICAgICAgIHwgIDI1ICsrKy0tCiB4ZW4vZHJpdmVycy9w
YXNzdGhyb3VnaC92dGQvaW50cmVtYXAuYyAgICAgIHwgIDExICstCiB4ZW4vZHJpdmVycy9wYXNz
dGhyb3VnaC92dGQvaW9tbXUuYyAgICAgICAgIHwgIDgwICsrKysrKy0tLS0tLS0tCiB4ZW4vZHJp
dmVycy9wYXNzdGhyb3VnaC92dGQvcXVpcmtzLmMgICAgICAgIHwgIDIyICsrLS0KIHhlbi9kcml2
ZXJzL3Bhc3N0aHJvdWdoL3Z0ZC91dGlscy5jICAgICAgICAgfCAgIDYgKy0KIHhlbi9kcml2ZXJz
L3Bhc3N0aHJvdWdoL3g4Ni9hdHMuYyAgICAgICAgICAgfCAgMTMgKy0tCiB4ZW4vZHJpdmVycy92
cGNpL2hlYWRlci5jICAgICAgICAgICAgICAgICAgIHwgIDExICstCiB4ZW4vZHJpdmVycy92cGNp
L21zaS5jICAgICAgICAgICAgICAgICAgICAgIHwgICA2ICstCiB4ZW4vZHJpdmVycy92cGNpL21z
aXguYyAgICAgICAgICAgICAgICAgICAgIHwgIDI0ICsrLS0tCiAyMCBmaWxlcyBjaGFuZ2VkLCAx
OTAgaW5zZXJ0aW9ucygrKSwgMjYyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RvY3MvbWlz
Yy9wcmludGstZm9ybWF0cy50eHQgYi9kb2NzL21pc2MvcHJpbnRrLWZvcm1hdHMudHh0CmluZGV4
IDA4MGY0OThmNjUuLjhmNjY2ZjY5NmEgMTAwNjQ0Ci0tLSBhL2RvY3MvbWlzYy9wcmludGstZm9y
bWF0cy50eHQKKysrIGIvZG9jcy9taXNjL3ByaW50ay1mb3JtYXRzLnR4dApAQCAtNDgsMyArNDgs
OCBAQCBEb21haW4gYW5kIHZDUFUgaW5mb3JtYXRpb246CiAgICAgICAgICAgICAgICBUaGUgZG9t
YWluIHBhcnQgYXMgYWJvdmUsIHdpdGggdGhlIHZjcHVfaWQgcHJpbnRlZCBpbiBkZWNpbWFsLgog
ICAgICAgICAgICAgICAgICBlLmcuICBkMHYxCiAgICAgICAgICAgICAgICAgICAgICAgIGRbSURM
RV12MAorCitQQ0k6CisKKyAgICAgICAlcHAgICAgIFBDSSBkZXZpY2UgYWRkcmVzcyBpbiBTOkI6
RC5GIGZvcm1hdCBmcm9tIGEgcGNpX3NiZGZfdC4KKyAgICAgICAgICAgICAgICAgZS5nLiAgMDAw
NDowMjowMC4wCmRpZmYgLS1naXQgYS94ZW4vYXJjaC94ODYvaHZtL3Ztc2kuYyBiL3hlbi9hcmNo
L3g4Ni9odm0vdm1zaS5jCmluZGV4IGFlYjVhNzAxMDQuLjcyOTBiZDU1M2QgMTAwNjQ0Ci0tLSBh
L3hlbi9hcmNoL3g4Ni9odm0vdm1zaS5jCisrKyBiL3hlbi9hcmNoL3g4Ni9odm0vdm1zaS5jCkBA
IC02ODYsMTAgKzY4Niw4IEBAIHN0YXRpYyBpbnQgdnBjaV9tc2lfdXBkYXRlKGNvbnN0IHN0cnVj
dCBwY2lfZGV2ICpwZGV2LCB1aW50MzJfdCBkYXRhLAogCiAgICAgICAgIGlmICggcmMgKQogICAg
ICAgICB7Ci0gICAgICAgICAgICBnZHByaW50ayhYRU5MT0dfRVJSLAotICAgICAgICAgICAgICAg
ICAgICAgIiUwNHg6JTAyeDolMDJ4LiV1OiBmYWlsZWQgdG8gYmluZCBQSVJRICV1OiAlZFxuIiwK
LSAgICAgICAgICAgICAgICAgICAgIHBkZXYtPnNlZywgcGRldi0+YnVzLCBQQ0lfU0xPVChwZGV2
LT5kZXZmbiksCi0gICAgICAgICAgICAgICAgICAgICBQQ0lfRlVOQyhwZGV2LT5kZXZmbiksIHBp
cnEgKyBpLCByYyk7CisgICAgICAgICAgICBnZHByaW50ayhYRU5MT0dfRVJSLCAiJXBwOiBmYWls
ZWQgdG8gYmluZCBQSVJRICV1OiAlZFxuIiwKKyAgICAgICAgICAgICAgICAgICAgICZwZGV2LT5z
YmRmLCBwaXJxICsgaSwgcmMpOwogICAgICAgICAgICAgd2hpbGUgKCBiaW5kLm1hY2hpbmVfaXJx
LS0gPiBwaXJxICkKICAgICAgICAgICAgICAgICBwdF9pcnFfZGVzdHJveV9iaW5kKHBkZXYtPmRv
bWFpbiwgJmJpbmQpOwogICAgICAgICAgICAgcmV0dXJuIHJjOwpAQCAtNzQzLDkgKzc0MSw3IEBA
IHN0YXRpYyBpbnQgdnBjaV9tc2lfZW5hYmxlKGNvbnN0IHN0cnVjdCBwY2lfZGV2ICpwZGV2LCB1
aW50MzJfdCBkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbXNpX2lu
Zm8pOwogICAgIGlmICggcmMgKQogICAgIHsKLSAgICAgICAgZ2RwcmludGsoWEVOTE9HX0VSUiwg
IiUwNHg6JTAyeDolMDJ4LiV1OiBmYWlsZWQgdG8gbWFwIFBJUlE6ICVkXG4iLAotICAgICAgICAg
ICAgICAgICBwZGV2LT5zZWcsIHBkZXYtPmJ1cywgUENJX1NMT1QocGRldi0+ZGV2Zm4pLAotICAg
ICAgICAgICAgICAgICBQQ0lfRlVOQyhwZGV2LT5kZXZmbiksIHJjKTsKKyAgICAgICAgZ2Rwcmlu
dGsoWEVOTE9HX0VSUiwgIiVwcDogZmFpbGVkIHRvIG1hcCBQSVJROiAlZFxuIiwgJnBkZXYtPnNi
ZGYsIHJjKTsKICAgICAgICAgcmV0dXJuIHJjOwogICAgIH0KIApkaWZmIC0tZ2l0IGEveGVuL2Fy
Y2gveDg2L21zaS5jIGIveGVuL2FyY2gveDg2L21zaS5jCmluZGV4IDlhMWNlMzNiNDIuLjM3MjYz
OTRmMDIgMTAwNjQ0Ci0tLSBhL3hlbi9hcmNoL3g4Ni9tc2kuYworKysgYi94ZW4vYXJjaC94ODYv
bXNpLmMKQEAgLTQyOCw4ICs0MjgsOCBAQCBzdGF0aWMgYm9vbCBtc2lfc2V0X21hc2tfYml0KHN0
cnVjdCBpcnFfZGVzYyAqZGVzYywgYm9vbCBob3N0LCBib29sIGd1ZXN0KQogICAgICAgICAgICAg
ewogICAgICAgICAgICAgICAgIHBkZXYtPm1zaXgtPndhcm5lZCA9IGRvbWlkOwogICAgICAgICAg
ICAgICAgIHByaW50ayhYRU5MT0dfR19XQVJOSU5HCi0gICAgICAgICAgICAgICAgICAgICAgICJj
YW5ub3QgbWFzayBJUlEgJWQ6IG1hc2tpbmcgTVNJLVggb24gRG9tJWQncyAlMDR4OiUwMng6JTAy
eC4ldVxuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgZGVzYy0+aXJxLCBkb21pZCwgc2VnLCBi
dXMsIHNsb3QsIGZ1bmMpOworICAgICAgICAgICAgICAgICAgICAgICAiY2Fubm90IG1hc2sgSVJR
ICVkOiBtYXNraW5nIE1TSS1YIG9uIERvbSVkJ3MgJXBwXG4iLAorICAgICAgICAgICAgICAgICAg
ICAgICBkZXNjLT5pcnEsIGRvbWlkLCAmcGRldi0+c2JkZik7CiAgICAgICAgICAgICB9CiAgICAg
ICAgIH0KICAgICAgICAgcGRldi0+bXNpeC0+aG9zdF9tYXNrYWxsID0gbWFza2FsbDsKQEAgLTk4
NywxMSArOTg3LDExIEBAIHN0YXRpYyBpbnQgbXNpeF9jYXBhYmlsaXR5X2luaXQoc3RydWN0IHBj
aV9kZXYgKmRldiwKICAgICAgICAgICAgIHN0cnVjdCBkb21haW4gKmQgPSBkZXYtPmRvbWFpbiA/
OiBjdXJyZDsKIAogICAgICAgICAgICAgaWYgKCAhaXNfaGFyZHdhcmVfZG9tYWluKGN1cnJkKSB8
fCBkICE9IGN1cnJkICkKLSAgICAgICAgICAgICAgICBwcmludGsoIiVzIHVzZSBvZiBNU0ktWCBv
biAlMDR4OiUwMng6JTAyeC4ldSBieSBEb20lZFxuIiwKKyAgICAgICAgICAgICAgICBwcmludGso
IiVzIHVzZSBvZiBNU0ktWCBvbiAlcHAgYnkgJXBkXG4iLAogICAgICAgICAgICAgICAgICAgICAg
ICBpc19oYXJkd2FyZV9kb21haW4oY3VycmQpCiAgICAgICAgICAgICAgICAgICAgICAgID8gWEVO
TE9HX1dBUk5JTkcgIlBvdGVudGlhbGx5IGluc2VjdXJlIgogICAgICAgICAgICAgICAgICAgICAg
ICA6IFhFTkxPR19FUlIgIkluc2VjdXJlIiwKLSAgICAgICAgICAgICAgICAgICAgICAgc2VnLCBi
dXMsIHNsb3QsIGZ1bmMsIGQtPmRvbWFpbl9pZCk7CisgICAgICAgICAgICAgICAgICAgICAgICZk
ZXYtPnNiZGYsIGQpOwogICAgICAgICAgICAgaWYgKCAhaXNfaGFyZHdhcmVfZG9tYWluKGQpICYm
CiAgICAgICAgICAgICAgICAgIC8qIEFzc3VtZSBhIGRvbWFpbiB3aXRob3V0IG1lbW9yeSBoYXMg
bm8gbWFwcGluZ3MgeWV0LiAqLwogICAgICAgICAgICAgICAgICAoIWlzX2hhcmR3YXJlX2RvbWFp
bihjdXJyZCkgfHwgZC0+dG90X3BhZ2VzKSApCkBAIC0xMDQ2LDE4ICsxMDQ2LDE1IEBAIHN0YXRp
YyBpbnQgX19wY2lfZW5hYmxlX21zaShzdHJ1Y3QgbXNpX2luZm8gKm1zaSwgc3RydWN0IG1zaV9k
ZXNjICoqZGVzYykKICAgICBvbGRfZGVzYyA9IGZpbmRfbXNpX2VudHJ5KHBkZXYsIG1zaS0+aXJx
LCBQQ0lfQ0FQX0lEX01TSSk7CiAgICAgaWYgKCBvbGRfZGVzYyApCiAgICAgewotICAgICAgICBw
cmludGsoWEVOTE9HX0VSUiAiaXJxICVkIGFscmVhZHkgbWFwcGVkIHRvIE1TSSBvbiAlMDR4OiUw
Mng6JTAyeC4ldVxuIiwKLSAgICAgICAgICAgICAgIG1zaS0+aXJxLCBtc2ktPnNlZywgbXNpLT5i
dXMsCi0gICAgICAgICAgICAgICBQQ0lfU0xPVChtc2ktPmRldmZuKSwgUENJX0ZVTkMobXNpLT5k
ZXZmbikpOworICAgICAgICBwcmludGsoWEVOTE9HX0VSUiAiaXJxICVkIGFscmVhZHkgbWFwcGVk
IHRvIE1TSSBvbiAlcHBcbiIsCisgICAgICAgICAgICAgICBtc2ktPmlycSwgJnBkZXYtPnNiZGYp
OwogICAgICAgICByZXR1cm4gLUVFWElTVDsKICAgICB9CiAKICAgICBvbGRfZGVzYyA9IGZpbmRf
bXNpX2VudHJ5KHBkZXYsIC0xLCBQQ0lfQ0FQX0lEX01TSVgpOwogICAgIGlmICggb2xkX2Rlc2Mg
KQogICAgIHsKLSAgICAgICAgcHJpbnRrKFhFTkxPR19XQVJOSU5HICJNU0ktWCBhbHJlYWR5IGlu
IHVzZSBvbiAlMDR4OiUwMng6JTAyeC4ldVxuIiwKLSAgICAgICAgICAgICAgIG1zaS0+c2VnLCBt
c2ktPmJ1cywKLSAgICAgICAgICAgICAgIFBDSV9TTE9UKG1zaS0+ZGV2Zm4pLCBQQ0lfRlVOQyht
c2ktPmRldmZuKSk7CisgICAgICAgIHByaW50ayhYRU5MT0dfV0FSTklORyAiTVNJLVggYWxyZWFk
eSBpbiB1c2Ugb24gJXBwXG4iLCAmcGRldi0+c2JkZik7CiAgICAgICAgIF9fcGNpX2Rpc2FibGVf
bXNpeChvbGRfZGVzYyk7CiAgICAgfQogCkBAIC0xMTE0LDE2ICsxMTExLDE1IEBAIHN0YXRpYyBp
bnQgX19wY2lfZW5hYmxlX21zaXgoc3RydWN0IG1zaV9pbmZvICptc2ksIHN0cnVjdCBtc2lfZGVz
YyAqKmRlc2MpCiAgICAgb2xkX2Rlc2MgPSBmaW5kX21zaV9lbnRyeShwZGV2LCBtc2ktPmlycSwg
UENJX0NBUF9JRF9NU0lYKTsKICAgICBpZiAoIG9sZF9kZXNjICkKICAgICB7Ci0gICAgICAgIHBy
aW50ayhYRU5MT0dfRVJSICJpcnEgJWQgYWxyZWFkeSBtYXBwZWQgdG8gTVNJLVggb24gJTA0eDol
MDJ4OiUwMnguJXVcbiIsCi0gICAgICAgICAgICAgICBtc2ktPmlycSwgbXNpLT5zZWcsIG1zaS0+
YnVzLCBzbG90LCBmdW5jKTsKKyAgICAgICAgcHJpbnRrKFhFTkxPR19FUlIgImlycSAlZCBhbHJl
YWR5IG1hcHBlZCB0byBNU0ktWCBvbiAlcHBcbiIsCisgICAgICAgICAgICAgICBtc2ktPmlycSwg
JnBkZXYtPnNiZGYpOwogICAgICAgICByZXR1cm4gLUVFWElTVDsKICAgICB9CiAKICAgICBvbGRf
ZGVzYyA9IGZpbmRfbXNpX2VudHJ5KHBkZXYsIC0xLCBQQ0lfQ0FQX0lEX01TSSk7CiAgICAgaWYg
KCBvbGRfZGVzYyApCiAgICAgewotICAgICAgICBwcmludGsoWEVOTE9HX1dBUk5JTkcgIk1TSSBh
bHJlYWR5IGluIHVzZSBvbiAlMDR4OiUwMng6JTAyeC4ldVxuIiwKLSAgICAgICAgICAgICAgIG1z
aS0+c2VnLCBtc2ktPmJ1cywgc2xvdCwgZnVuYyk7CisgICAgICAgIHByaW50ayhYRU5MT0dfV0FS
TklORyAiTVNJIGFscmVhZHkgaW4gdXNlIG9uICVwcFxuIiwgJnBkZXYtPnNiZGYpOwogICAgICAg
ICBfX3BjaV9kaXNhYmxlX21zaShvbGRfZGVzYyk7CiAgICAgfQogCkBAIC0xMTcwLDkgKzExNjYs
OCBAQCBzdGF0aWMgdm9pZCBfX3BjaV9kaXNhYmxlX21zaXgoc3RydWN0IG1zaV9kZXNjICplbnRy
eSkKICAgICAgICAgd3JpdGVsKDEsIGVudHJ5LT5tYXNrX2Jhc2UgKyBQQ0lfTVNJWF9FTlRSWV9W
RUNUT1JfQ1RSTF9PRkZTRVQpOwogICAgIGVsc2UgaWYgKCAhKGNvbnRyb2wgJiBQQ0lfTVNJWF9G
TEFHU19NQVNLQUxMKSApCiAgICAgewotICAgICAgICBwcmludGsoWEVOTE9HX1dBUk5JTkcKLSAg
ICAgICAgICAgICAgICJjYW5ub3QgZGlzYWJsZSBJUlEgJWQ6IG1hc2tpbmcgTVNJLVggb24gJTA0
eDolMDJ4OiUwMnguJXVcbiIsCi0gICAgICAgICAgICAgICBlbnRyeS0+aXJxLCBzZWcsIGJ1cywg
c2xvdCwgZnVuYyk7CisgICAgICAgIHByaW50ayhYRU5MT0dfV0FSTklORyAiY2Fubm90IGRpc2Fi
bGUgSVJRICVkOiBtYXNraW5nIE1TSS1YIG9uICVwcFxuIiwKKyAgICAgICAgICAgICAgIGVudHJ5
LT5pcnEsICZkZXYtPnNiZGYpOwogICAgICAgICBtYXNrYWxsID0gdHJ1ZTsKICAgICB9CiAgICAg
ZGV2LT5tc2l4LT5ob3N0X21hc2thbGwgPSBtYXNrYWxsOwpAQCAtMTMzOSw3ICsxMzM0LDYgQEAg
aW50IHBjaV9yZXN0b3JlX21zaV9zdGF0ZShzdHJ1Y3QgcGNpX2RldiAqcGRldikKICAgICBzdHJ1
Y3QgbXNpX2Rlc2MgKmVudHJ5LCAqdG1wOwogICAgIHN0cnVjdCBpcnFfZGVzYyAqZGVzYzsKICAg
ICBzdHJ1Y3QgbXNpX21zZyBtc2c7Ci0gICAgdTggc2xvdCA9IFBDSV9TTE9UKHBkZXYtPmRldmZu
KSwgZnVuYyA9IFBDSV9GVU5DKHBkZXYtPmRldmZuKTsKICAgICB1bnNpZ25lZCBpbnQgdHlwZSA9
IDAsIHBvcyA9IDA7CiAgICAgdTE2IGNvbnRyb2wgPSAwOwogCkBAIC0xMzY4LDkgKzEzNjIsOCBA
QCBpbnQgcGNpX3Jlc3RvcmVfbXNpX3N0YXRlKHN0cnVjdCBwY2lfZGV2ICpwZGV2KQogICAgICAg
ICBpZiAoZGVzYy0+bXNpX2Rlc2MgIT0gZW50cnkpCiAgICAgICAgIHsKICAgICBib2d1czoKLSAg
ICAgICAgICAgIGRwcmludGsoWEVOTE9HX0VSUiwKLSAgICAgICAgICAgICAgICAgICAgIlJlc3Rv
cmUgTVNJIGZvciAlMDR4OiUwMng6JTAyeDoldSBlbnRyeSAldSBub3Qgc2V0P1xuIiwKLSAgICAg
ICAgICAgICAgICAgICAgcGRldi0+c2VnLCBwZGV2LT5idXMsIHNsb3QsIGZ1bmMsIGkpOworICAg
ICAgICAgICAgZHByaW50ayhYRU5MT0dfRVJSLCAiUmVzdG9yZSBNU0kgZm9yICVwcCBlbnRyeSAl
dSBub3Qgc2V0P1xuIiwKKyAgICAgICAgICAgICAgICAgICAgJnBkZXYtPnNiZGYsIGkpOwogICAg
ICAgICAgICAgc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmZGVzYy0+bG9jaywgZmxhZ3MpOwogICAg
ICAgICAgICAgaWYgKCB0eXBlID09IFBDSV9DQVBfSURfTVNJWCApCiAgICAgICAgICAgICAgICAg
cGNpX2NvbmZfd3JpdGUxNihwZGV2LT5zYmRmLCBtc2l4X2NvbnRyb2xfcmVnKHBvcyksCmRpZmYg
LS1naXQgYS94ZW4vY29tbW9uL3ZzcHJpbnRmLmMgYi94ZW4vY29tbW9uL3ZzcHJpbnRmLmMKaW5k
ZXggMTgzZDNlZDRiYi4uMTg1YTRiZDU2MSAxMDA2NDQKLS0tIGEveGVuL2NvbW1vbi92c3ByaW50
Zi5jCisrKyBiL3hlbi9jb21tb24vdnNwcmludGYuYwpAQCAtMzk0LDYgKzM5NCwyMCBAQCBzdGF0
aWMgY2hhciAqcHJpbnRfdmNwdShjaGFyICpzdHIsIGNvbnN0IGNoYXIgKmVuZCwgY29uc3Qgc3Ry
dWN0IHZjcHUgKnYpCiAgICAgcmV0dXJuIG51bWJlcihzdHIgKyAxLCBlbmQsIHYtPnZjcHVfaWQs
IDEwLCAtMSwgLTEsIDApOwogfQogCitzdGF0aWMgY2hhciAqcHJpbnRfcGNpX2FkZHIoY2hhciAq
c3RyLCBjb25zdCBjaGFyICplbmQsIGNvbnN0IHBjaV9zYmRmX3QgKnNiZGYpCit7CisgICAgc3Ry
ID0gbnVtYmVyKHN0ciwgZW5kLCBzYmRmLT5zZWcsIDE2LCA0LCAtMSwgWkVST1BBRCk7CisgICAg
aWYgKCBzdHIgPCBlbmQgKQorICAgICAgICAqc3RyID0gJzonOworICAgIHN0ciA9IG51bWJlcihz
dHIgKyAxLCBlbmQsIHNiZGYtPmJ1cywgMTYsIDIsIC0xLCBaRVJPUEFEKTsKKyAgICBpZiAoIHN0
ciA8IGVuZCApCisgICAgICAgICpzdHIgPSAnOic7CisgICAgc3RyID0gbnVtYmVyKHN0ciArIDEs
IGVuZCwgc2JkZi0+ZGV2LCAxNiwgMiwgLTEsIFpFUk9QQUQpOworICAgIGlmICggc3RyIDwgZW5k
ICkKKyAgICAgICAgKnN0ciA9ICcuJzsKKyAgICByZXR1cm4gbnVtYmVyKHN0ciArIDEsIGVuZCwg
c2JkZi0+Zm4sIDgsIC0xLCAtMSwgMCk7Cit9CisKIHN0YXRpYyBjaGFyICpwb2ludGVyKGNoYXIg
KnN0ciwgY29uc3QgY2hhciAqZW5kLCBjb25zdCBjaGFyICoqZm10X3B0ciwKICAgICAgICAgICAg
ICAgICAgICAgIGNvbnN0IHZvaWQgKmFyZywgaW50IGZpZWxkX3dpZHRoLCBpbnQgcHJlY2lzaW9u
LAogICAgICAgICAgICAgICAgICAgICAgaW50IGZsYWdzKQpAQCAtNDc2LDYgKzQ5MCwxMCBAQCBz
dGF0aWMgY2hhciAqcG9pbnRlcihjaGFyICpzdHIsIGNvbnN0IGNoYXIgKmVuZCwgY29uc3QgY2hh
ciAqKmZtdF9wdHIsCiAgICAgICAgIH0KICAgICB9CiAKKyAgICBjYXNlICdwJzogLyogUENJIFNC
REYuICovCisgICAgICAgICsrKmZtdF9wdHI7CisgICAgICAgIHJldHVybiBwcmludF9wY2lfYWRk
cihzdHIsIGVuZCwgYXJnKTsKKwogICAgIGNhc2UgJ3MnOiAvKiBTeW1ib2wgbmFtZSB3aXRoIG9m
ZnNldCBhbmQgc2l6ZSAoaWZmIG9mZnNldCAhPSAwKSAqLwogICAgIGNhc2UgJ1MnOiAvKiBTeW1i
b2wgbmFtZSB1bmNvbmRpdGlvbmFsbHkgd2l0aCBvZmZzZXQgYW5kIHNpemUgKi8KICAgICB7CmRp
ZmYgLS1naXQgYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfYWNwaS5jIGIveGVu
L2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2FjcGkuYwppbmRleCA2NGQxMDQ4MWQ3Li41
ZGUyYmZhN2YzIDEwMDY0NAotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVf
YWNwaS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9hY3BpLmMKQEAg
LTcxNyw5ICs3MTcsOCBAQCBzdGF0aWMgdTE2IF9faW5pdCBwYXJzZV9pdmhkX2RldmljZV9zcGVj
aWFsKAogICAgICAgICByZXR1cm4gMDsKICAgICB9CiAKLSAgICBBTURfSU9NTVVfREVCVUcoIklW
SEQgU3BlY2lhbDogJTA0eDolMDJ4OiUwMnguJXUgdmFyaWV0eSAlI3ggaGFuZGxlICUjeFxuIiwK
LSAgICAgICAgICAgICAgICAgICAgc2VnLCBQQ0lfQlVTKGJkZiksIFBDSV9TTE9UKGJkZiksIFBD
SV9GVU5DKGJkZiksCi0gICAgICAgICAgICAgICAgICAgIHNwZWNpYWwtPnZhcmlldHksIHNwZWNp
YWwtPmhhbmRsZSk7CisgICAgQU1EX0lPTU1VX0RFQlVHKCJJVkhEIFNwZWNpYWw6ICVwcCB2YXJp
ZXR5ICUjeCBoYW5kbGUgJSN4XG4iLAorICAgICAgICAgICAgICAgICAgICAmUENJX1NCREYyKHNl
ZywgYmRmKSwgc3BlY2lhbC0+dmFyaWV0eSwgc3BlY2lhbC0+aGFuZGxlKTsKICAgICBhZGRfaXZy
c19tYXBwaW5nX2VudHJ5KGJkZiwgYmRmLCBzcGVjaWFsLT5oZWFkZXIuZGF0YV9zZXR0aW5nLCBp
b21tdSk7CiAKICAgICBzd2l0Y2ggKCBzcGVjaWFsLT52YXJpZXR5ICkKQEAgLTc0Miw5ICs3NDEs
OSBAQCBzdGF0aWMgdTE2IF9faW5pdCBwYXJzZV9pdmhkX2RldmljZV9zcGVjaWFsKAogICAgICAg
ICBpZiAoIGlkeCA8IG5yX2lvYXBpY19zYmRmICkKICAgICAgICAgewogICAgICAgICAgICAgQU1E
X0lPTU1VX0RFQlVHKCJJVkhEOiBDb21tYW5kIGxpbmUgb3ZlcnJpZGUgcHJlc2VudCBmb3IgSU8t
QVBJQyAlI3giCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIihJVlJTOiAlI3ggZGV2SUQg
JTA0eDolMDJ4OiUwMnguJXUpXG4iLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlvYXBp
Y19zYmRmW2lkeF0uaWQsIHNwZWNpYWwtPmhhbmRsZSwgc2VnLAotICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFBDSV9CVVMoYmRmKSwgUENJX1NMT1QoYmRmKSwgUENJX0ZVTkMoYmRmKSk7Cisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIihJVlJTOiAlI3ggZGV2SUQgJXBwKVxuIiwKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBpb2FwaWNfc2JkZltpZHhdLmlkLCBzcGVjaWFsLT5o
YW5kbGUsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgJlBDSV9TQkRGMihzZWcsIGJkZikp
OwogICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgIH0KIApAQCAtODE0LDkgKzgxMyw5IEBAIHN0
YXRpYyB1MTYgX19pbml0IHBhcnNlX2l2aGRfZGV2aWNlX3NwZWNpYWwoCiAgICAgICAgICAgICBi
cmVhazsKICAgICAgICAgY2FzZSBIUEVUX0NNREw6CiAgICAgICAgICAgICBBTURfSU9NTVVfREVC
VUcoIklWSEQ6IENvbW1hbmQgbGluZSBvdmVycmlkZSBwcmVzZW50IGZvciBIUEVUICUjeCAiCi0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIihJVlJTOiAlI3ggZGV2SUQgJTA0eDolMDJ4OiUw
MnguJXUpXG4iLAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhwZXRfc2JkZi5pZCwgc3Bl
Y2lhbC0+aGFuZGxlLCBzZWcsIFBDSV9CVVMoYmRmKSwKLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBQQ0lfU0xPVChiZGYpLCBQQ0lfRlVOQyhiZGYpKTsKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAiKElWUlM6ICUjeCBkZXZJRCAlcHApXG4iLAorICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGhwZXRfc2JkZi5pZCwgc3BlY2lhbC0+aGFuZGxlLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICZQQ0lfU0JERjIoc2VnLCBiZGYpKTsKICAgICAgICAgICAgIGJyZWFrOwogICAg
ICAgICBjYXNlIEhQRVRfTk9ORToKICAgICAgICAgICAgIC8qIHNldCBkZXZpY2UgaWQgb2YgaHBl
dCAqLwpkaWZmIC0tZ2l0IGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2NtZC5j
IGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2NtZC5jCmluZGV4IGFmM2ExZmI4
NjUuLjNlZWIyMTRiYTMgMTAwNjQ0Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9p
b21tdV9jbWQuYworKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfY21kLmMK
QEAgLTI5Niw5ICsyOTYsOCBAQCB2b2lkIGFtZF9pb21tdV9mbHVzaF9pb3RsYih1OCBkZXZmbiwg
Y29uc3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYsCiAKICAgICBpZiAoICFpb21tdSApCiAgICAgewot
ICAgICAgICBBTURfSU9NTVVfREVCVUcoIiVzOiBDYW4ndCBmaW5kIGlvbW11IGZvciAlMDR4OiUw
Mng6JTAyeC4ldVxuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgIF9fZnVuY19fLCBwZGV2LT5z
ZWcsIHBkZXYtPmJ1cywKLSAgICAgICAgICAgICAgICAgICAgICAgIFBDSV9TTE9UKHBkZXYtPmRl
dmZuKSwgUENJX0ZVTkMocGRldi0+ZGV2Zm4pKTsKKyAgICAgICAgQU1EX0lPTU1VX0RFQlVHKCIl
czogQ2FuJ3QgZmluZCBpb21tdSBmb3IgJXBwXG4iLAorICAgICAgICAgICAgICAgICAgICAgICAg
X19mdW5jX18sICZwZGV2LT5zYmRmKTsKICAgICAgICAgcmV0dXJuOwogICAgIH0KIApkaWZmIC0t
Z2l0IGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2RldGVjdC5jIGIveGVuL2Ry
aXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2RldGVjdC5jCmluZGV4IDA2OWRmMTU2ZGUuLjhi
YmQwZWRkMjIgMTAwNjQ0Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9k
ZXRlY3QuYworKysgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfZGV0ZWN0LmMK
QEAgLTE1Miw5ICsxNTIsOCBAQCBpbnQgX19pbml0IGFtZF9pb21tdV9kZXRlY3Rfb25lX2FjcGko
CiAKICAgICBydCA9IHBjaV9yb19kZXZpY2UoaW9tbXUtPnNlZywgYnVzLCBQQ0lfREVWRk4oZGV2
LCBmdW5jKSk7CiAgICAgaWYgKCBydCApCi0gICAgICAgIHByaW50ayhYRU5MT0dfRVJSCi0gICAg
ICAgICAgICAgICAiQ291bGQgbm90IG1hcmsgY29uZmlnIHNwYWNlIG9mICUwNHg6JTAyeDolMDJ4
LiV1IHJlYWQtb25seSAoJWQpXG4iLAotICAgICAgICAgICAgICAgaW9tbXUtPnNlZywgYnVzLCBk
ZXYsIGZ1bmMsIHJ0KTsKKyAgICAgICAgcHJpbnRrKFhFTkxPR19FUlIgIkNvdWxkIG5vdCBtYXJr
IGNvbmZpZyBzcGFjZSBvZiAlcHAgcmVhZC1vbmx5ICglZClcbiIsCisgICAgICAgICAgICAgICAm
UENJX1NCREYyKGlvbW11LT5zZWcsIGlvbW11LT5iZGYpLCBydCk7CiAKICAgICBsaXN0X2FkZF90
YWlsKCZpb21tdS0+bGlzdCwgJmFtZF9pb21tdV9oZWFkKTsKICAgICBydCA9IDA7CmRpZmYgLS1n
aXQgYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfaW5pdC5jIGIveGVuL2RyaXZl
cnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2luaXQuYwppbmRleCBkMTk1MzE0OTNiLi5mYTc5N2Nm
OTk3IDEwMDY0NAotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfaW5pdC5j
CisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbml0LmMKQEAgLTc5Myw5
ICs3OTMsOCBAQCBzdGF0aWMgYm9vbF90IF9faW5pdCBzZXRfaW9tbXVfaW50ZXJydXB0X2hhbmRs
ZXIoc3RydWN0IGFtZF9pb21tdSAqaW9tbXUpCiAgICAgcGNpZGV2c191bmxvY2soKTsKICAgICBp
ZiAoICFpb21tdS0+bXNpLmRldiApCiAgICAgewotICAgICAgICBBTURfSU9NTVVfREVCVUcoIklP
TU1VOiBubyBwZGV2IGZvciAlMDR4OiUwMng6JTAyeC4ldVxuIiwKLSAgICAgICAgICAgICAgICAg
ICAgICAgIGlvbW11LT5zZWcsIFBDSV9CVVMoaW9tbXUtPmJkZiksCi0gICAgICAgICAgICAgICAg
ICAgICAgICBQQ0lfU0xPVChpb21tdS0+YmRmKSwgUENJX0ZVTkMoaW9tbXUtPmJkZikpOworICAg
ICAgICBBTURfSU9NTVVfREVCVUcoIklPTU1VOiBubyBwZGV2IGZvciAlcHBcbiIsCisgICAgICAg
ICAgICAgICAgICAgICAgICAmUENJX1NCREYyKGlvbW11LT5zZWcsIGlvbW11LT5iZGYpKTsKICAg
ICAgICAgcmV0dXJuIDA7CiAgICAgfQogICAgIGNvbnRyb2wgPSBwY2lfY29uZl9yZWFkMTYoUENJ
X1NCREYyKGlvbW11LT5zZWcsIGlvbW11LT5iZGYpLApAQCAtODM0LDkgKzgzMyw2IEBAIHN0YXRp
YyBib29sX3QgX19pbml0IHNldF9pb21tdV9pbnRlcnJ1cHRfaGFuZGxlcihzdHJ1Y3QgYW1kX2lv
bW11ICppb21tdSkKIHN0YXRpYyB2b2lkIGFtZF9pb21tdV9lcnJhdHVtXzc0Nl93b3JrYXJvdW5k
KHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11KQogewogICAgIHUzMiB2YWx1ZTsKLSAgICB1OCBidXMg
PSBQQ0lfQlVTKGlvbW11LT5iZGYpOwotICAgIHU4IGRldiA9IFBDSV9TTE9UKGlvbW11LT5iZGYp
OwotICAgIHU4IGZ1bmMgPSBQQ0lfRlVOQyhpb21tdS0+YmRmKTsKIAogICAgIGlmICggKGJvb3Rf
Y3B1X2RhdGEueDg2ICE9IDB4MTUpIHx8CiAgICAgICAgICAoYm9vdF9jcHVfZGF0YS54ODZfbW9k
ZWwgPCAweDEwKSB8fApAQCAtODU0LDggKzg1MCw4IEBAIHN0YXRpYyB2b2lkIGFtZF9pb21tdV9l
cnJhdHVtXzc0Nl93b3JrYXJvdW5kKHN0cnVjdCBhbWRfaW9tbXUgKmlvbW11KQogCiAgICAgcGNp
X2NvbmZfd3JpdGUzMihQQ0lfU0JERjIoaW9tbXUtPnNlZywgaW9tbXUtPmJkZiksIDB4ZjQsIHZh
bHVlIHwgKDEgPDwgMikpOwogICAgIHByaW50ayhYRU5MT0dfSU5GTwotICAgICAgICAgICAiQU1E
LVZpOiBBcHBseWluZyBlcnJhdHVtIDc0NiB3b3JrYXJvdW5kIGZvciBJT01NVSBhdCAlMDR4OiUw
Mng6JTAyeC4ldVxuIiwKLSAgICAgICAgICAgaW9tbXUtPnNlZywgYnVzLCBkZXYsIGZ1bmMpOwor
ICAgICAgICAgICAiQU1ELVZpOiBBcHBseWluZyBlcnJhdHVtIDc0NiB3b3JrYXJvdW5kIGZvciBJ
T01NVSBhdCAlcHBcbiIsCisgICAgICAgICAgICZQQ0lfU0JERjIoaW9tbXUtPnNlZywgaW9tbXUt
PmJkZikpOwogCiAgICAgLyogQ2xlYXIgdGhlIGVuYWJsZSB3cml0aW5nIGJpdCAqLwogICAgIHBj
aV9jb25mX3dyaXRlMzIoUENJX1NCREYyKGlvbW11LT5zZWcsIGlvbW11LT5iZGYpLCAweGYwLCAw
eDkwKTsKZGlmZiAtLWdpdCBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9pb21tdV9pbnRy
LmMgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC9hbWQvaW9tbXVfaW50ci5jCmluZGV4IGRhM2Mz
YzFhNDQuLjRkNjNkM2ZhZDUgMTAwNjQ0Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2Ft
ZC9pb21tdV9pbnRyLmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1kL2lvbW11X2lu
dHIuYwpAQCAtNTExLDggKzUxMSw3IEBAIHN0YXRpYyBzdHJ1Y3QgYW1kX2lvbW11ICpfZmluZF9p
b21tdV9mb3JfZGV2aWNlKGludCBzZWcsIGludCBiZGYpCiAgICAgaWYgKCBpb21tdSApCiAgICAg
ICAgIHJldHVybiBpb21tdTsKIAotICAgIEFNRF9JT01NVV9ERUJVRygiTm8gSU9NTVUgZm9yIE1T
SSBkZXYgPSAlMDR4OiUwMng6JTAyeC4ldVxuIiwKLSAgICAgICAgICAgICAgICAgICAgc2VnLCBQ
Q0lfQlVTKGJkZiksIFBDSV9TTE9UKGJkZiksIFBDSV9GVU5DKGJkZikpOworICAgIEFNRF9JT01N
VV9ERUJVRygiTm8gSU9NTVUgZm9yIE1TSSBkZXYgPSAlcHBcbiIsICZQQ0lfU0JERjIoc2VnLCBi
ZGYpKTsKICAgICByZXR1cm4gRVJSX1BUUigtRUlOVkFMKTsKIH0KIApAQCAtNjg3LDEwICs2ODYs
NyBAQCBzdGF0aWMgaW50IGR1bXBfaW50cmVtYXBfbWFwcGluZyh1MTYgc2VnLCBzdHJ1Y3QgaXZy
c19tYXBwaW5ncyAqaXZyc19tYXBwaW5nKQogICAgIGlmICggIWl2cnNfbWFwcGluZyApCiAgICAg
ICAgIHJldHVybiAwOwogCi0gICAgcHJpbnRrKCIgICUwNHg6JTAyeDolMDJ4OiV1OlxuIiwgc2Vn
LAotICAgICAgICAgICBQQ0lfQlVTKGl2cnNfbWFwcGluZy0+ZHRlX3JlcXVlc3Rvcl9pZCksCi0g
ICAgICAgICAgIFBDSV9TTE9UKGl2cnNfbWFwcGluZy0+ZHRlX3JlcXVlc3Rvcl9pZCksCi0gICAg
ICAgICAgIFBDSV9GVU5DKGl2cnNfbWFwcGluZy0+ZHRlX3JlcXVlc3Rvcl9pZCkpOworICAgIHBy
aW50aygiICAlcHA6XG4iLCAmUENJX1NCREYyKHNlZywgaXZyc19tYXBwaW5nLT5kdGVfcmVxdWVz
dG9yX2lkKSk7CiAKICAgICBzcGluX2xvY2tfaXJxc2F2ZSgmKGl2cnNfbWFwcGluZy0+aW50cmVt
YXBfbG9jayksIGZsYWdzKTsKICAgICBkdW1wX2ludHJlbWFwX3RhYmxlKGl2cnNfbWFwcGluZy0+
aW50cmVtYXBfdGFibGUpOwpkaWZmIC0tZ2l0IGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvYW1k
L3BjaV9hbWRfaW9tbXUuYyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL2FtZC9wY2lfYW1kX2lv
bW11LmMKaW5kZXggZGM1MWQ2Njc2OS4uZjc4MzEyNjJmOCAxMDA2NDQKLS0tIGEveGVuL2RyaXZl
cnMvcGFzc3Rocm91Z2gvYW1kL3BjaV9hbWRfaW9tbXUuYworKysgYi94ZW4vZHJpdmVycy9wYXNz
dGhyb3VnaC9hbWQvcGNpX2FtZF9pb21tdS5jCkBAIC01Miw5ICs1Miw4IEBAIHN0cnVjdCBhbWRf
aW9tbXUgKmZpbmRfaW9tbXVfZm9yX2RldmljZShpbnQgc2VnLCBpbnQgYmRmKQogICAgICAgICAg
ICAgICAgIHRtcC5kdGVfcmVxdWVzdG9yX2lkID0gYmRmOwogICAgICAgICAgICAgaXZyc19tYXBw
aW5nc1tiZGZdID0gdG1wOwogCi0gICAgICAgICAgICBwcmludGsoWEVOTE9HX1dBUk5JTkcgIiUw
NHg6JTAyeDolMDJ4LiV1IG5vdCBmb3VuZCBpbiBBQ1BJIHRhYmxlczsiCi0gICAgICAgICAgICAg
ICAgICAgIiB1c2luZyBzYW1lIElPTU1VIGFzIGZ1bmN0aW9uIDBcbiIsCi0gICAgICAgICAgICAg
ICAgICAgc2VnLCBQQ0lfQlVTKGJkZiksIFBDSV9TTE9UKGJkZiksIFBDSV9GVU5DKGJkZikpOwor
ICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19XQVJOSU5HICIlcHAgbm90IGZvdW5kIGluIEFDUEkg
dGFibGVzOyIKKyAgICAgICAgICAgICAgICAgICAiIHVzaW5nIHNhbWUgSU9NTVUgYXMgZnVuY3Rp
b24gMFxuIiwgJlBDSV9TQkRGMihzZWcsIGJkZikpOwogCiAgICAgICAgICAgICAvKiB3cml0ZSBp
b21tdSBmaWVsZCBsYXN0ICovCiAgICAgICAgICAgICBpdnJzX21hcHBpbmdzW2JkZl0uaW9tbXUg
PSBpdnJzX21hcHBpbmdzW2JkMF0uaW9tbXU7CkBAIC0zMjQsOSArMzIzLDggQEAgc3RhdGljIGlu
dCByZWFzc2lnbl9kZXZpY2Uoc3RydWN0IGRvbWFpbiAqc291cmNlLCBzdHJ1Y3QgZG9tYWluICp0
YXJnZXQsCiAgICAgICAgIHJldHVybiByYzsKIAogICAgIGFtZF9pb21tdV9zZXR1cF9kb21haW5f
ZGV2aWNlKHRhcmdldCwgaW9tbXUsIGRldmZuLCBwZGV2KTsKLSAgICBBTURfSU9NTVVfREVCVUco
IlJlLWFzc2lnbiAlMDR4OiUwMng6JTAyeC4ldSBmcm9tIGRvbSVkIHRvIGRvbSVkXG4iLAotICAg
ICAgICAgICAgICAgICAgICBwZGV2LT5zZWcsIHBkZXYtPmJ1cywgUENJX1NMT1QoZGV2Zm4pLCBQ
Q0lfRlVOQyhkZXZmbiksCi0gICAgICAgICAgICAgICAgICAgIHNvdXJjZS0+ZG9tYWluX2lkLCB0
YXJnZXQtPmRvbWFpbl9pZCk7CisgICAgQU1EX0lPTU1VX0RFQlVHKCJSZS1hc3NpZ24gJXBwIGZy
b20gZG9tJWQgdG8gZG9tJWRcbiIsCisgICAgICAgICAgICAgICAgICAgICZwZGV2LT5zYmRmLCBz
b3VyY2UtPmRvbWFpbl9pZCwgdGFyZ2V0LT5kb21haW5faWQpOwogCiAgICAgcmV0dXJuIDA7CiB9
CkBAIC00MzEsMTUgKzQyOSwxMiBAQCBzdGF0aWMgaW50IGFtZF9pb21tdV9hZGRfZGV2aWNlKHU4
IGRldmZuLCBzdHJ1Y3QgcGNpX2RldiAqcGRldikKICAgICAgICAgaWYgKCBwZGV2LT50eXBlID09
IERFVl9UWVBFX1BDSV9IT1NUX0JSSURHRSAmJgogICAgICAgICAgICAgIGlzX2hhcmR3YXJlX2Rv
bWFpbihwZGV2LT5kb21haW4pICkKICAgICAgICAgewotICAgICAgICAgICAgQU1EX0lPTU1VX0RF
QlVHKCJTa2lwcGluZyBob3N0IGJyaWRnZSAlMDR4OiUwMng6JTAyeC4ldVxuIiwKLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBwZGV2LT5zZWcsIHBkZXYtPmJ1cywgUENJX1NMT1QoZGV2Zm4p
LAotICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBDSV9GVU5DKGRldmZuKSk7CisgICAgICAg
ICAgICBBTURfSU9NTVVfREVCVUcoIlNraXBwaW5nIGhvc3QgYnJpZGdlICVwcFxuIiwgJnBkZXYt
PnNiZGYpOwogICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgIH0KIAotICAgICAgICBBTURf
SU9NTVVfREVCVUcoIk5vIGlvbW11IGZvciAlMDR4OiUwMng6JTAyeC4ldTsgY2Fubm90IGJlIGhh
bmRlZCB0byBkJWRcbiIsCi0gICAgICAgICAgICAgICAgICAgICAgICBwZGV2LT5zZWcsIHBkZXYt
PmJ1cywgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbiksCi0gICAgICAgICAgICAgICAg
ICAgICAgICBwZGV2LT5kb21haW4tPmRvbWFpbl9pZCk7CisgICAgICAgIEFNRF9JT01NVV9ERUJV
RygiTm8gaW9tbXUgZm9yICVwcDsgY2Fubm90IGJlIGhhbmRlZCB0byBkJWRcbiIsCisgICAgICAg
ICAgICAgICAgICAgICAgICAmcGRldi0+c2JkZiwgcGRldi0+ZG9tYWluLT5kb21haW5faWQpOwog
ICAgICAgICByZXR1cm4gLUVOT0RFVjsKICAgICB9CiAKQEAgLTQ1OCwxMCArNDUzLDggQEAgc3Rh
dGljIGludCBhbWRfaW9tbXVfcmVtb3ZlX2RldmljZSh1OCBkZXZmbiwgc3RydWN0IHBjaV9kZXYg
KnBkZXYpCiAgICAgaW9tbXUgPSBmaW5kX2lvbW11X2Zvcl9kZXZpY2UocGRldi0+c2VnLCBiZGYp
OwogICAgIGlmICggIWlvbW11ICkKICAgICB7Ci0gICAgICAgIEFNRF9JT01NVV9ERUJVRygiRmFp
bCB0byBmaW5kIGlvbW11LiIKLSAgICAgICAgICAgICAgICAgICAgICAgICIgJTA0eDolMDJ4OiUw
MnguJXUgY2Fubm90IGJlIHJlbW92ZWQgZnJvbSBkb20lZFxuIiwKLSAgICAgICAgICAgICAgICAg
ICAgICAgIHBkZXYtPnNlZywgcGRldi0+YnVzLCBQQ0lfU0xPVChkZXZmbiksIFBDSV9GVU5DKGRl
dmZuKSwKLSAgICAgICAgICAgICAgICAgICAgICAgIHBkZXYtPmRvbWFpbi0+ZG9tYWluX2lkKTsK
KyAgICAgICAgQU1EX0lPTU1VX0RFQlVHKCJGYWlsIHRvIGZpbmQgaW9tbXUuICVwcCBjYW5ub3Qg
YmUgcmVtb3ZlZCBmcm9tICVwZFxuIiwKKyAgICAgICAgICAgICAgICAgICAgICAgICZwZGV2LT5z
YmRmLCBwZGV2LT5kb21haW4pOwogICAgICAgICByZXR1cm4gLUVOT0RFVjsKICAgICB9CiAKZGlm
ZiAtLWdpdCBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3BjaS5jIGIveGVuL2RyaXZlcnMvcGFz
c3Rocm91Z2gvcGNpLmMKaW5kZXggNTI3MWY4ZDY5Yy4uM2Y4MDA5N2Y1MyAxMDA2NDQKLS0tIGEv
eGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvcGNpLmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91
Z2gvcGNpLmMKQEAgLTIzOCwxMSArMjM4LDcgQEAgc3RhdGljIHZvaWQgY2hlY2tfcGRldihjb25z
dCBzdHJ1Y3QgcGNpX2RldiAqcGRldikKICAgICAoUENJX1NUQVRVU19QQVJJVFkgfCBQQ0lfU1RB
VFVTX1NJR19UQVJHRVRfQUJPUlQgfCBcCiAgICAgIFBDSV9TVEFUVVNfUkVDX1RBUkdFVF9BQk9S
VCB8IFBDSV9TVEFUVVNfUkVDX01BU1RFUl9BQk9SVCB8IFwKICAgICAgUENJX1NUQVRVU19TSUdf
U1lTVEVNX0VSUk9SIHwgUENJX1NUQVRVU19ERVRFQ1RFRF9QQVJJVFkpCi0gICAgdTE2IHNlZyA9
IHBkZXYtPnNlZzsKLSAgICB1OCBidXMgPSBwZGV2LT5idXM7Ci0gICAgdTggZGV2ID0gUENJX1NM
T1QocGRldi0+ZGV2Zm4pOwotICAgIHU4IGZ1bmMgPSBQQ0lfRlVOQyhwZGV2LT5kZXZmbik7Ci0g
ICAgdTE2IHZhbDsKKyAgICAgdTE2IHZhbDsKIAogICAgIGlmICggY29tbWFuZF9tYXNrICkKICAg
ICB7CkBAIC0yNTIsOCArMjQ4LDggQEAgc3RhdGljIHZvaWQgY2hlY2tfcGRldihjb25zdCBzdHJ1
Y3QgcGNpX2RldiAqcGRldikKICAgICAgICAgdmFsID0gcGNpX2NvbmZfcmVhZDE2KHBkZXYtPnNi
ZGYsIFBDSV9TVEFUVVMpOwogICAgICAgICBpZiAoIHZhbCAmIFBDSV9TVEFUVVNfQ0hFQ0sgKQog
ICAgICAgICB7Ci0gICAgICAgICAgICBwcmludGsoWEVOTE9HX0lORk8gIiUwNHg6JTAyeDolMDJ4
LiV1IHN0YXR1cyAlMDR4IC0+ICUwNHhcbiIsCi0gICAgICAgICAgICAgICAgICAgc2VnLCBidXMs
IGRldiwgZnVuYywgdmFsLCB2YWwgJiB+UENJX1NUQVRVU19DSEVDSyk7CisgICAgICAgICAgICBw
cmludGsoWEVOTE9HX0lORk8gIiVwcCBzdGF0dXMgJTA0eCAtPiAlMDR4XG4iLAorICAgICAgICAg
ICAgICAgICAgICZwZGV2LT5zYmRmLCB2YWwsIHZhbCAmIH5QQ0lfU1RBVFVTX0NIRUNLKTsKICAg
ICAgICAgICAgIHBjaV9jb25mX3dyaXRlMTYocGRldi0+c2JkZiwgUENJX1NUQVRVUywgdmFsICYg
UENJX1NUQVRVU19DSEVDSyk7CiAgICAgICAgIH0KICAgICB9CkBAIC0yNzAsOSArMjY2LDggQEAg
c3RhdGljIHZvaWQgY2hlY2tfcGRldihjb25zdCBzdHJ1Y3QgcGNpX2RldiAqcGRldikKICAgICAg
ICAgdmFsID0gcGNpX2NvbmZfcmVhZDE2KHBkZXYtPnNiZGYsIFBDSV9TRUNfU1RBVFVTKTsKICAg
ICAgICAgaWYgKCB2YWwgJiBQQ0lfU1RBVFVTX0NIRUNLICkKICAgICAgICAgewotICAgICAgICAg
ICAgcHJpbnRrKFhFTkxPR19JTkZPCi0gICAgICAgICAgICAgICAgICAgIiUwNHg6JTAyeDolMDJ4
LiV1IHNlY29uZGFyeSBzdGF0dXMgJTA0eCAtPiAlMDR4XG4iLAotICAgICAgICAgICAgICAgICAg
IHNlZywgYnVzLCBkZXYsIGZ1bmMsIHZhbCwgdmFsICYgflBDSV9TVEFUVVNfQ0hFQ0spOworICAg
ICAgICAgICAgcHJpbnRrKFhFTkxPR19JTkZPICIlcHAgc2Vjb25kYXJ5IHN0YXR1cyAlMDR4IC0+
ICUwNHhcbiIsCisgICAgICAgICAgICAgICAgICAgJnBkZXYtPnNiZGYsIHZhbCwgdmFsICYgflBD
SV9TVEFUVVNfQ0hFQ0spOwogICAgICAgICAgICAgcGNpX2NvbmZfd3JpdGUxNihwZGV2LT5zYmRm
LCBQQ0lfU0VDX1NUQVRVUywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsICYgUENJ
X1NUQVRVU19DSEVDSyk7CiAgICAgICAgIH0KQEAgLTQxMSw4ICs0MDYsOCBAQCBzdGF0aWMgc3Ry
dWN0IHBjaV9kZXYgKmFsbG9jX3BkZXYoc3RydWN0IHBjaV9zZWcgKnBzZWcsIHU4IGJ1cywgdTgg
ZGV2Zm4pCiAgICAgICAgICAgICBicmVhazsKIAogICAgICAgICBkZWZhdWx0OgotICAgICAgICAg
ICAgcHJpbnRrKFhFTkxPR19XQVJOSU5HICIlMDR4OiUwMng6JTAyeC4ldTogdW5rbm93biB0eXBl
ICVkXG4iLAotICAgICAgICAgICAgICAgICAgIHBzZWctPm5yLCBidXMsIFBDSV9TTE9UKGRldmZu
KSwgUENJX0ZVTkMoZGV2Zm4pLCBwZGV2LT50eXBlKTsKKyAgICAgICAgICAgIHByaW50ayhYRU5M
T0dfV0FSTklORyAiJXBwOiB1bmtub3duIHR5cGUgJWRcbiIsCisgICAgICAgICAgICAgICAgICAg
JnBkZXYtPnNiZGYsIHBkZXYtPnR5cGUpOwogICAgICAgICAgICAgYnJlYWs7CiAgICAgfQogCkBA
IC02NDQsOSArNjM5LDkgQEAgdW5zaWduZWQgaW50IHBjaV9zaXplX21lbV9iYXIocGNpX3NiZGZf
dCBzYmRmLCB1bnNpZ25lZCBpbnQgcG9zLAogICAgICAgICBpZiAoIGZsYWdzICYgUENJX0JBUl9M
QVNUICkKICAgICAgICAgewogICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19XQVJOSU5HCi0gICAg
ICAgICAgICAgICAgICAgIiVzZGV2aWNlICUwNHg6JTAyeDolMDJ4LiV1IHdpdGggNjQtYml0ICVz
QkFSIGluIGxhc3Qgc2xvdFxuIiwKLSAgICAgICAgICAgICAgICAgICAoZmxhZ3MgJiBQQ0lfQkFS
X1ZGKSA/ICJTUi1JT1YgIiA6ICIiLCBzYmRmLnNlZywgc2JkZi5idXMsCi0gICAgICAgICAgICAg
ICAgICAgc2JkZi5kZXYsIHNiZGYuZm4sIChmbGFncyAmIFBDSV9CQVJfVkYpID8gInZmICIgOiAi
Iik7CisgICAgICAgICAgICAgICAgICAgIiVzZGV2aWNlICVwcCB3aXRoIDY0LWJpdCAlc0JBUiBp
biBsYXN0IHNsb3RcbiIsCisgICAgICAgICAgICAgICAgICAgKGZsYWdzICYgUENJX0JBUl9WRikg
PyAiU1ItSU9WICIgOiAiIiwgJnNiZGYsCisgICAgICAgICAgICAgICAgICAgKGZsYWdzICYgUENJ
X0JBUl9WRikgPyAidmYgIiA6ICIiKTsKICAgICAgICAgICAgICpwc2l6ZSA9IDA7CiAgICAgICAg
ICAgICByZXR1cm4gMTsKICAgICAgICAgfQpAQCAtNzUwLDkgKzc0NSw4IEBAIGludCBwY2lfYWRk
X2RldmljZSh1MTYgc2VnLCB1OCBidXMsIHU4IGRldmZuLAogICAgICAgICAgICAgICAgICAgICAg
UENJX0JBU0VfQUREUkVTU19TUEFDRV9JTyApCiAgICAgICAgICAgICAgICAgewogICAgICAgICAg
ICAgICAgICAgICBwcmludGsoWEVOTE9HX1dBUk5JTkcKLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJTUi1JT1YgZGV2aWNlICUwNHg6JTAyeDolMDJ4LiV1IHdpdGggdmYgQkFSJXUiCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAiIGluIElPIHNwYWNlXG4iLAotICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2VnLCBidXMsIHNsb3QsIGZ1bmMsIGkpOworICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIlNSLUlPViBkZXZpY2UgJXBwIHdpdGggdmYgQkFSJXUgaW4gSU8gc3BhY2VcbiIs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAmcGRldi0+c2JkZiwgaSk7CiAgICAgICAgICAg
ICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICBy
ZXQgPSBwY2lfc2l6ZV9tZW1fYmFyKHNiZGYsIGlkeCwgTlVMTCwgJnBkZXYtPnZmX3JsZW5baV0s
CkBAIC03NjQsMTAgKzc1OCw4IEBAIGludCBwY2lfYWRkX2RldmljZSh1MTYgc2VnLCB1OCBidXMs
IHU4IGRldmZuLAogICAgICAgICAgICAgfQogICAgICAgICB9CiAgICAgICAgIGVsc2UKLSAgICAg
ICAgICAgIHByaW50ayhYRU5MT0dfV0FSTklORwotICAgICAgICAgICAgICAgICAgICJTUi1JT1Yg
ZGV2aWNlICUwNHg6JTAyeDolMDJ4LiV1IGhhcyBpdHMgdmlydHVhbCIKLSAgICAgICAgICAgICAg
ICAgICAiIGZ1bmN0aW9ucyBhbHJlYWR5IGVuYWJsZWQgKCUwNHgpXG4iLAotICAgICAgICAgICAg
ICAgICAgIHNlZywgYnVzLCBzbG90LCBmdW5jLCBjdHJsKTsKKyAgICAgICAgICAgIHByaW50ayhY
RU5MT0dfV0FSTklORyAiU1ItSU9WIGRldmljZSAlcHAgaGFzIGl0cyB2aXJ0dWFsIgorICAgICAg
ICAgICAgICAgICAgICIgZnVuY3Rpb25zIGFscmVhZHkgZW5hYmxlZCAoJTA0eClcbiIsICZwZGV2
LT5zYmRmLCBjdHJsKTsKICAgICB9CiAKICAgICBjaGVja19wZGV2KHBkZXYpOwpAQCAtNzk0LDE1
ICs3ODYsMTQgQEAgb3V0OgogICAgIHBjaWRldnNfdW5sb2NrKCk7CiAgICAgaWYgKCAhcmV0ICkK
ICAgICB7Ci0gICAgICAgIHByaW50ayhYRU5MT0dfREVCVUcgIlBDSSBhZGQgJXMgJTA0eDolMDJ4
OiUwMnguJXVcbiIsIHBkZXZfdHlwZSwKLSAgICAgICAgICAgICAgIHNlZywgYnVzLCBzbG90LCBm
dW5jKTsKKyAgICAgICAgcHJpbnRrKFhFTkxPR19ERUJVRyAiUENJIGFkZCAlcyAlcHBcbiIsIHBk
ZXZfdHlwZSwgICZwZGV2LT5zYmRmKTsKICAgICAgICAgd2hpbGUgKCBwZGV2LT5waGFudG9tX3N0
cmlkZSApCiAgICAgICAgIHsKICAgICAgICAgICAgIGZ1bmMgKz0gcGRldi0+cGhhbnRvbV9zdHJp
ZGU7CiAgICAgICAgICAgICBpZiAoIFBDSV9TTE9UKGZ1bmMpICkKICAgICAgICAgICAgICAgICBi
cmVhazsKLSAgICAgICAgICAgIHByaW50ayhYRU5MT0dfREVCVUcgIlBDSSBwaGFudG9tICUwNHg6
JTAyeDolMDJ4LiV1XG4iLAotICAgICAgICAgICAgICAgICAgIHNlZywgYnVzLCBzbG90LCBmdW5j
KTsKKyAgICAgICAgICAgIHByaW50ayhYRU5MT0dfREVCVUcgIlBDSSBwaGFudG9tICVwcFxuIiwK
KyAgICAgICAgICAgICAgICAgICAmUENJX1NCREYoc2VnLCBidXMsIHNsb3QsIGZ1bmMpKTsKICAg
ICAgICAgfQogICAgIH0KICAgICByZXR1cm4gcmV0OwpAQCAtODMxLDkgKzgyMiw4IEBAIGludCBw
Y2lfcmVtb3ZlX2RldmljZSh1MTYgc2VnLCB1OCBidXMsIHU4IGRldmZuKQogICAgICAgICAgICAg
aWYgKCBwZGV2LT5kb21haW4gKQogICAgICAgICAgICAgICAgIGxpc3RfZGVsKCZwZGV2LT5kb21h
aW5fbGlzdCk7CiAgICAgICAgICAgICBwY2lfY2xlYW51cF9tc2kocGRldik7CisgICAgICAgICAg
ICBwcmludGsoWEVOTE9HX0RFQlVHICJQQ0kgcmVtb3ZlIGRldmljZSAlcHBcbiIsICZwZGV2LT5z
YmRmKTsKICAgICAgICAgICAgIGZyZWVfcGRldihwc2VnLCBwZGV2KTsKLSAgICAgICAgICAgIHBy
aW50ayhYRU5MT0dfREVCVUcgIlBDSSByZW1vdmUgZGV2aWNlICUwNHg6JTAyeDolMDJ4LiV1XG4i
LAotICAgICAgICAgICAgICAgICAgIHNlZywgYnVzLCBQQ0lfU0xPVChkZXZmbiksIFBDSV9GVU5D
KGRldmZuKSk7CiAgICAgICAgICAgICBicmVhazsKICAgICAgICAgfQogCkBAIC05MDcsOSArODk3
LDggQEAgaW50IHBjaV9yZWxlYXNlX2RldmljZXMoc3RydWN0IGRvbWFpbiAqZCkKICAgICAgICAg
YnVzID0gcGRldi0+YnVzOwogICAgICAgICBkZXZmbiA9IHBkZXYtPmRldmZuOwogICAgICAgICBp
ZiAoIGRlYXNzaWduX2RldmljZShkLCBwZGV2LT5zZWcsIGJ1cywgZGV2Zm4pICkKLSAgICAgICAg
ICAgIHByaW50aygiZG9tYWluICVkOiBkZWFzc2lnbiBkZXZpY2UgKCUwNHg6JTAyeDolMDJ4LiV1
KSBmYWlsZWQhXG4iLAotICAgICAgICAgICAgICAgICAgIGQtPmRvbWFpbl9pZCwgcGRldi0+c2Vn
LCBidXMsCi0gICAgICAgICAgICAgICAgICAgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZm
bikpOworICAgICAgICAgICAgcHJpbnRrKCJkb21haW4gJWQ6IGRlYXNzaWduIGRldmljZSAoJXBw
KSBmYWlsZWQhXG4iLAorICAgICAgICAgICAgICAgICAgIGQtPmRvbWFpbl9pZCwgJnBkZXYtPnNi
ZGYpOwogICAgIH0KICAgICBwY2lkZXZzX3VubG9jaygpOwogCkBAIC0xMDU2LDggKzEwNDUsOCBA
QCBzdGF0aWMgaW50IF9faW5pdCBfc2Nhbl9wY2lfZGV2aWNlcyhzdHJ1Y3QgcGNpX3NlZyAqcHNl
Zywgdm9pZCAqYXJnKQogICAgICAgICAgICAgICAgIHBkZXYgPSBhbGxvY19wZGV2KHBzZWcsIGJ1
cywgUENJX0RFVkZOKGRldiwgZnVuYykpOwogICAgICAgICAgICAgICAgIGlmICggIXBkZXYgKQog
ICAgICAgICAgICAgICAgIHsKLSAgICAgICAgICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19XQVJO
SU5HICIlMDR4OiUwMng6JTAyeC4ldTogYWxsb2NfcGRldiBmYWlsZWRcbiIsCi0gICAgICAgICAg
ICAgICAgICAgICAgICAgICBwc2VnLT5uciwgYnVzLCBkZXYsIGZ1bmMpOworICAgICAgICAgICAg
ICAgICAgICBwcmludGsoWEVOTE9HX1dBUk5JTkcgIiVwcDogYWxsb2NfcGRldiBmYWlsZWRcbiIs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAmUENJX1NCREYocHNlZy0+bnIsIGJ1cywgZGV2
LCBmdW5jKSk7CiAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtRU5PTUVNOwogICAgICAgICAg
ICAgICAgIH0KIApAQCAtMTA5OCw5ICsxMDg3LDggQEAgc3RhdGljIHZvaWQgX19od2RvbV9pbml0
IHNldHVwX29uZV9od2RvbV9kZXZpY2UoY29uc3Qgc3RydWN0IHNldHVwX2h3ZG9tICpjdHh0LAog
ICAgICAgICBlcnIgPSBjdHh0LT5oYW5kbGVyKGRldmZuLCBwZGV2KTsKICAgICAgICAgaWYgKCBl
cnIgKQogICAgICAgICB7Ci0gICAgICAgICAgICBwcmludGsoWEVOTE9HX0VSUiAic2V0dXAgJTA0
eDolMDJ4OiUwMnguJXUgZm9yIGQlZCBmYWlsZWQgKCVkKVxuIiwKLSAgICAgICAgICAgICAgICAg
ICBwZGV2LT5zZWcsIHBkZXYtPmJ1cywgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbiks
Ci0gICAgICAgICAgICAgICAgICAgY3R4dC0+ZC0+ZG9tYWluX2lkLCBlcnIpOworICAgICAgICAg
ICAgcHJpbnRrKFhFTkxPR19FUlIgInNldHVwICVwcCBmb3IgZCVkIGZhaWxlZCAoJWQpXG4iLAor
ICAgICAgICAgICAgICAgICAgICZwZGV2LT5zYmRmLCBjdHh0LT5kLT5kb21haW5faWQsIGVycik7
CiAgICAgICAgICAgICBpZiAoIGRldmZuID09IHBkZXYtPmRldmZuICkKICAgICAgICAgICAgICAg
ICByZXR1cm47CiAgICAgICAgIH0KQEAgLTExNDEsOSArMTEyOSw4IEBAIHN0YXRpYyBpbnQgX19o
d2RvbV9pbml0IF9zZXR1cF9od2RvbV9wY2lfZGV2aWNlcyhzdHJ1Y3QgcGNpX3NlZyAqcHNlZywg
dm9pZCAqYXJnCiAgICAgICAgICAgICAgICAgcGRldi0+ZG9tYWluID0gZG9tX3hlbjsKICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgIGVsc2UgaWYgKCBwZGV2LT5kb21haW4gIT0gY3R4dC0+ZCAp
Ci0gICAgICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19XQVJOSU5HICJEb20lZCBvd25pbmcgJTA0
eDolMDJ4OiUwMnguJXU/XG4iLAotICAgICAgICAgICAgICAgICAgICAgICBwZGV2LT5kb21haW4t
PmRvbWFpbl9pZCwgcHNlZy0+bnIsIGJ1cywKLSAgICAgICAgICAgICAgICAgICAgICAgUENJX1NM
T1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbikpOworICAgICAgICAgICAgICAgIHByaW50ayhYRU5M
T0dfV0FSTklORyAiRG9tJWQgb3duaW5nICVwcD9cbiIsCisgICAgICAgICAgICAgICAgICAgICAg
IHBkZXYtPmRvbWFpbi0+ZG9tYWluX2lkLCAmcGRldi0+c2JkZik7CiAKICAgICAgICAgICAgIGlm
ICggaW9tbXVfdmVyYm9zZSApCiAgICAgICAgICAgICB7CkBAIC0xMjc5LDEwICsxMjY2LDggQEAg
c3RhdGljIGludCBfZHVtcF9wY2lfZGV2aWNlcyhzdHJ1Y3QgcGNpX3NlZyAqcHNlZywgdm9pZCAq
YXJnKQogCiAgICAgbGlzdF9mb3JfZWFjaF9lbnRyeSAoIHBkZXYsICZwc2VnLT5hbGxkZXZzX2xp
c3QsIGFsbGRldnNfbGlzdCApCiAgICAgewotICAgICAgICBwcmludGsoIiUwNHg6JTAyeDolMDJ4
LiV1IC0gZG9tICUtM2QgLSBub2RlICUtM2QgLSBNU0lzIDwgIiwKLSAgICAgICAgICAgICAgIHBz
ZWctPm5yLCBwZGV2LT5idXMsCi0gICAgICAgICAgICAgICBQQ0lfU0xPVChwZGV2LT5kZXZmbiks
IFBDSV9GVU5DKHBkZXYtPmRldmZuKSwKLSAgICAgICAgICAgICAgIHBkZXYtPmRvbWFpbiA/IHBk
ZXYtPmRvbWFpbi0+ZG9tYWluX2lkIDogLTEsCisgICAgICAgIHByaW50aygiJXBwIC0gZG9tICUt
M2QgLSBub2RlICUtM2QgLSBNU0lzIDwgIiwKKyAgICAgICAgICAgICAgICZwZGV2LT5zYmRmLCBw
ZGV2LT5kb21haW4gPyBwZGV2LT5kb21haW4tPmRvbWFpbl9pZCA6IC0xLAogICAgICAgICAgICAg
ICAgKHBkZXYtPm5vZGUgIT0gTlVNQV9OT19OT0RFKSA/IHBkZXYtPm5vZGUgOiAtMSk7CiAgICAg
ICAgIGxpc3RfZm9yX2VhY2hfZW50cnkgKCBtc2ksICZwZGV2LT5tc2lfbGlzdCwgbGlzdCApCiAg
ICAgICAgICAgICAgICBwcmludGsoIiVkICIsIG1zaS0+aXJxKTsKQEAgLTEzNDcsOCArMTMzMiw4
IEBAIHN0YXRpYyBpbnQgaW9tbXVfYWRkX2RldmljZShzdHJ1Y3QgcGNpX2RldiAqcGRldikKICAg
ICAgICAgICAgIHJldHVybiAwOwogICAgICAgICByYyA9IGhkLT5wbGF0Zm9ybV9vcHMtPmFkZF9k
ZXZpY2UoZGV2Zm4sIHBjaV90b19kZXYocGRldikpOwogICAgICAgICBpZiAoIHJjICkKLSAgICAg
ICAgICAgIHByaW50ayhYRU5MT0dfV0FSTklORyAiSU9NTVU6IGFkZCAlMDR4OiUwMng6JTAyeC4l
dSBmYWlsZWQgKCVkKVxuIiwKLSAgICAgICAgICAgICAgICAgICBwZGV2LT5zZWcsIHBkZXYtPmJ1
cywgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbiksIHJjKTsKKyAgICAgICAgICAgIHBy
aW50ayhYRU5MT0dfV0FSTklORyAiSU9NTVU6IGFkZCAlcHAgZmFpbGVkICglZClcbiIsCisgICAg
ICAgICAgICAgICAgICAgJnBkZXYtPnNiZGYsIHJjKTsKICAgICB9CiB9CiAKQEAgLTEzOTIsOCAr
MTM3Nyw3IEBAIHN0YXRpYyBpbnQgaW9tbXVfcmVtb3ZlX2RldmljZShzdHJ1Y3QgcGNpX2RldiAq
cGRldikKICAgICAgICAgaWYgKCAhcmMgKQogICAgICAgICAgICAgY29udGludWU7CiAKLSAgICAg
ICAgcHJpbnRrKFhFTkxPR19FUlIgIklPTU1VOiByZW1vdmUgJTA0eDolMDJ4OiUwMnguJXUgZmFp
bGVkICglZClcbiIsCi0gICAgICAgICAgICAgICBwZGV2LT5zZWcsIHBkZXYtPmJ1cywgUENJX1NM
T1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbiksIHJjKTsKKyAgICAgICAgcHJpbnRrKFhFTkxPR19F
UlIgIklPTU1VOiByZW1vdmUgJXBwIGZhaWxlZCAoJWQpXG4iLCAmcGRldi0+c2JkZiwgcmMpOwog
ICAgICAgICByZXR1cm4gcmM7CiAgICAgfQogCkBAIC0xNDYzLDkgKzE0NDcsOCBAQCBzdGF0aWMg
aW50IGFzc2lnbl9kZXZpY2Uoc3RydWN0IGRvbWFpbiAqZCwgdTE2IHNlZywgdTggYnVzLCB1OCBk
ZXZmbiwgdTMyIGZsYWcpCiAgICAgICAgICAgICBicmVhazsKICAgICAgICAgcmMgPSBoZC0+cGxh
dGZvcm1fb3BzLT5hc3NpZ25fZGV2aWNlKGQsIGRldmZuLCBwY2lfdG9fZGV2KHBkZXYpLCBmbGFn
KTsKICAgICAgICAgaWYgKCByYyApCi0gICAgICAgICAgICBwcmludGsoWEVOTE9HX0dfV0FSTklO
RyAiZCVkOiBhc3NpZ24gJTA0eDolMDJ4OiUwMnguJXUgZmFpbGVkICglZClcbiIsCi0gICAgICAg
ICAgICAgICAgICAgZC0+ZG9tYWluX2lkLCBzZWcsIGJ1cywgUENJX1NMT1QoZGV2Zm4pLCBQQ0lf
RlVOQyhkZXZmbiksCi0gICAgICAgICAgICAgICAgICAgcmMpOworICAgICAgICAgICAgcHJpbnRr
KFhFTkxPR19HX1dBUk5JTkcgImQlZDogYXNzaWduICVwcCBmYWlsZWQgKCVkKVxuIiwKKyAgICAg
ICAgICAgICAgICAgICBkLT5kb21haW5faWQsICZQQ0lfU0JERjMoc2VnLCBidXMsIGRldmZuKSwg
cmMpOwogICAgIH0KIAogIGRvbmU6CkBAIC0xNTAxLDggKzE0ODQsOCBAQCBpbnQgZGVhc3NpZ25f
ZGV2aWNlKHN0cnVjdCBkb21haW4gKmQsIHUxNiBzZWcsIHU4IGJ1cywgdTggZGV2Zm4pCiAgICAg
ICAgIGlmICggIXJldCApCiAgICAgICAgICAgICBjb250aW51ZTsKIAotICAgICAgICBwcmludGso
WEVOTE9HX0dfRVJSICJkJWQ6IGRlYXNzaWduICUwNHg6JTAyeDolMDJ4LiV1IGZhaWxlZCAoJWQp
XG4iLAotICAgICAgICAgICAgICAgZC0+ZG9tYWluX2lkLCBzZWcsIGJ1cywgUENJX1NMT1QoZGV2
Zm4pLCBQQ0lfRlVOQyhkZXZmbiksIHJldCk7CisgICAgICAgIHByaW50ayhYRU5MT0dfR19FUlIg
ImQlZDogZGVhc3NpZ24gJXBwIGZhaWxlZCAoJWQpXG4iLAorICAgICAgICAgICAgICAgZC0+ZG9t
YWluX2lkLCAmUENJX1NCREYzKHNlZywgYnVzLCBkZXZmbiksIHJldCk7CiAgICAgICAgIHJldHVy
biByZXQ7CiAgICAgfQogCkBAIC0xNTExLDkgKzE0OTQsOCBAQCBpbnQgZGVhc3NpZ25fZGV2aWNl
KHN0cnVjdCBkb21haW4gKmQsIHUxNiBzZWcsIHU4IGJ1cywgdTggZGV2Zm4pCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjaV90b19kZXYocGRldikpOwogICAg
IGlmICggcmV0ICkKICAgICB7Ci0gICAgICAgIGRwcmludGsoWEVOTE9HX0dfRVJSLAotICAgICAg
ICAgICAgICAgICJkJWQ6IGRlYXNzaWduIGRldmljZSAoJTA0eDolMDJ4OiUwMnguJXUpIGZhaWxl
ZFxuIiwKLSAgICAgICAgICAgICAgICBkLT5kb21haW5faWQsIHNlZywgYnVzLCBQQ0lfU0xPVChk
ZXZmbiksIFBDSV9GVU5DKGRldmZuKSk7CisgICAgICAgIGRwcmludGsoWEVOTE9HX0dfRVJSLCAi
ZCVkOiBkZWFzc2lnbiBkZXZpY2UgKCVwcCkgZmFpbGVkXG4iLAorICAgICAgICAgICAgICAgIGQt
PmRvbWFpbl9pZCwgJnBkZXYtPnNiZGYpOwogICAgICAgICByZXR1cm4gcmV0OwogICAgIH0KIApA
QCAtMTU5MCwxMCArMTU3Miw4IEBAIHZvaWQgaW9tbXVfZGV2X2lvdGxiX2ZsdXNoX3RpbWVvdXQo
c3RydWN0IGRvbWFpbiAqZCwgc3RydWN0IHBjaV9kZXYgKnBkZXYpCiAgICAgX3BjaV9oaWRlX2Rl
dmljZShwZGV2KTsKIAogICAgIGlmICggIWQtPmlzX3NodXR0aW5nX2Rvd24gJiYgcHJpbnRrX3Jh
dGVsaW1pdCgpICkKLSAgICAgICAgcHJpbnRrKFhFTkxPR19FUlIKLSAgICAgICAgICAgICAgICJk
b20lZDogQVRTIGRldmljZSAlMDR4OiUwMng6JTAyeC4ldSBmbHVzaCBmYWlsZWRcbiIsCi0gICAg
ICAgICAgICAgICBkLT5kb21haW5faWQsIHBkZXYtPnNlZywgcGRldi0+YnVzLCBQQ0lfU0xPVChw
ZGV2LT5kZXZmbiksCi0gICAgICAgICAgICAgICBQQ0lfRlVOQyhwZGV2LT5kZXZmbikpOworICAg
ICAgICBwcmludGsoWEVOTE9HX0VSUiAiZG9tJWQ6IEFUUyBkZXZpY2UgJXBwIGZsdXNoIGZhaWxl
ZFxuIiwKKyAgICAgICAgICAgICAgIGQtPmRvbWFpbl9pZCwgJnBkZXYtPnNiZGYpOwogICAgIGlm
ICggIWlzX2hhcmR3YXJlX2RvbWFpbihkKSApCiAgICAgICAgIGRvbWFpbl9jcmFzaChkKTsKIApA
QCAtMTY4Miw5ICsxNjYyLDggQEAgaW50IGlvbW11X2RvX3BjaV9kb21jdGwoCiAgICAgICAgIHsK
ICAgICAgICAgICAgIGlmICggcmV0ICkKICAgICAgICAgICAgIHsKLSAgICAgICAgICAgICAgICBw
cmludGsoWEVOTE9HX0dfSU5GTwotICAgICAgICAgICAgICAgICAgICAgICAiJTA0eDolMDJ4OiUw
MnguJXUgYWxyZWFkeSBhc3NpZ25lZCwgb3Igbm9uLWV4aXN0ZW50XG4iLAotICAgICAgICAgICAg
ICAgICAgICAgICBzZWcsIGJ1cywgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbikpOwor
ICAgICAgICAgICAgICAgIHByaW50ayhYRU5MT0dfR19JTkZPICIlcHAgYWxyZWFkeSBhc3NpZ25l
ZCwgb3Igbm9uLWV4aXN0ZW50XG4iLAorICAgICAgICAgICAgICAgICAgICAgICAmUENJX1NCREYz
KHNlZywgYnVzLCBkZXZmbikpOwogICAgICAgICAgICAgICAgIHJldCA9IC1FSU5WQUw7CiAgICAg
ICAgICAgICB9CiAgICAgICAgICAgICBicmVhazsKQEAgLTE2OTYsOSArMTY3NSw4IEBAIGludCBp
b21tdV9kb19wY2lfZG9tY3RsKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgImgiLCB1X2RvbWN0bCk7CiAgICAgICAgIGVsc2UgaWYgKCByZXQgKQogICAg
ICAgICAgICAgcHJpbnRrKFhFTkxPR19HX0VSUiAiWEVOX0RPTUNUTF9hc3NpZ25fZGV2aWNlOiAi
Ci0gICAgICAgICAgICAgICAgICAgImFzc2lnbiAlMDR4OiUwMng6JTAyeC4ldSB0byBkb20lZCBm
YWlsZWQgKCVkKVxuIiwKLSAgICAgICAgICAgICAgICAgICBzZWcsIGJ1cywgUENJX1NMT1QoZGV2
Zm4pLCBQQ0lfRlVOQyhkZXZmbiksCi0gICAgICAgICAgICAgICAgICAgZC0+ZG9tYWluX2lkLCBy
ZXQpOworICAgICAgICAgICAgICAgICAgICJhc3NpZ24gJXBwIHRvIGRvbSVkIGZhaWxlZCAoJWQp
XG4iLAorICAgICAgICAgICAgICAgICAgICZQQ0lfU0JERjMoc2VnLCBidXMsIGRldmZuKSwgZC0+
ZG9tYWluX2lkLCByZXQpOwogCiAgICAgICAgIGJyZWFrOwogCkBAIC0xNzMyLDEwICsxNzEwLDgg
QEAgaW50IGlvbW11X2RvX3BjaV9kb21jdGwoCiAgICAgICAgIHJldCA9IGRlYXNzaWduX2Rldmlj
ZShkLCBzZWcsIGJ1cywgZGV2Zm4pOwogICAgICAgICBwY2lkZXZzX3VubG9jaygpOwogICAgICAg
ICBpZiAoIHJldCApCi0gICAgICAgICAgICBwcmludGsoWEVOTE9HX0dfRVJSCi0gICAgICAgICAg
ICAgICAgICAgImRlYXNzaWduICUwNHg6JTAyeDolMDJ4LiV1IGZyb20gZG9tJWQgZmFpbGVkICgl
ZClcbiIsCi0gICAgICAgICAgICAgICAgICAgc2VnLCBidXMsIFBDSV9TTE9UKGRldmZuKSwgUENJ
X0ZVTkMoZGV2Zm4pLAotICAgICAgICAgICAgICAgICAgIGQtPmRvbWFpbl9pZCwgcmV0KTsKKyAg
ICAgICAgICAgIHByaW50ayhYRU5MT0dfR19FUlIgImRlYXNzaWduICVwcCBmcm9tIGRvbSVkIGZh
aWxlZCAoJWQpXG4iLAorICAgICAgICAgICAgICAgICAgICZQQ0lfU0JERjMoc2VnLCBidXMsIGRl
dmZuKSwgZC0+ZG9tYWluX2lkLCByZXQpOwogCiAgICAgICAgIGJyZWFrOwogCmRpZmYgLS1naXQg
YS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC92dGQvZG1hci5jIGIveGVuL2RyaXZlcnMvcGFzc3Ro
cm91Z2gvdnRkL2RtYXIuYwppbmRleCA5Yzk0ZGVhYzBiLi40YzBkMmY2NjcyIDEwMDY0NAotLS0g
YS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC92dGQvZG1hci5jCisrKyBiL3hlbi9kcml2ZXJzL3Bh
c3N0aHJvdWdoL3Z0ZC9kbWFyLmMKQEAgLTM2MSw5ICszNjEsOCBAQCBzdGF0aWMgaW50IF9faW5p
dCBhY3BpX3BhcnNlX2Rldl9zY29wZSgKICAgICAgICAgICAgIHN1Yl9idXMgPSBwY2lfY29uZl9y
ZWFkOChQQ0lfU0JERihzZWcsIGJ1cywgcGF0aC0+ZGV2LCBwYXRoLT5mbiksCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgUENJX1NVQk9SRElOQVRFX0JVUyk7CiAgICAgICAg
ICAgICBpZiAoIGlvbW11X3ZlcmJvc2UgKQotICAgICAgICAgICAgICAgIHByaW50ayhWVERQUkVG
SVgKLSAgICAgICAgICAgICAgICAgICAgICAgIiBicmlkZ2U6ICUwNHg6JTAyeDolMDJ4LiV1IHN0
YXJ0PSV4IHNlYz0leCBzdWI9JXhcbiIsCi0gICAgICAgICAgICAgICAgICAgICAgIHNlZywgYnVz
LCBwYXRoLT5kZXYsIHBhdGgtPmZuLAorICAgICAgICAgICAgICAgIHByaW50ayhWVERQUkVGSVgg
IiBicmlkZ2U6ICVwcCBzdGFydD0leCBzZWM9JXggc3ViPSV4XG4iLAorICAgICAgICAgICAgICAg
ICAgICAgICAmUENJX1NCREYoc2VnLCBidXMsIHBhdGgtPmRldiwgcGF0aC0+Zm4pLAogICAgICAg
ICAgICAgICAgICAgICAgICBhY3BpX3Njb3BlLT5idXMsIHNlY19idXMsIHN1Yl9idXMpOwogCiAg
ICAgICAgICAgICBkbWFyX3Njb3BlX2FkZF9idXNlcyhzY29wZSwgc2VjX2J1cywgc3ViX2J1cyk7
CkBAIC0zNzEsOCArMzcwLDggQEAgc3RhdGljIGludCBfX2luaXQgYWNwaV9wYXJzZV9kZXZfc2Nv
cGUoCiAKICAgICAgICAgY2FzZSBBQ1BJX0RNQVJfU0NPUEVfVFlQRV9IUEVUOgogICAgICAgICAg
ICAgaWYgKCBpb21tdV92ZXJib3NlICkKLSAgICAgICAgICAgICAgICBwcmludGsoVlREUFJFRklY
ICIgTVNJIEhQRVQ6ICUwNHg6JTAyeDolMDJ4LiV1XG4iLAotICAgICAgICAgICAgICAgICAgICAg
ICBzZWcsIGJ1cywgcGF0aC0+ZGV2LCBwYXRoLT5mbik7CisgICAgICAgICAgICAgICAgcHJpbnRr
KFZURFBSRUZJWCAiIE1TSSBIUEVUOiAlcHBcbiIsCisgICAgICAgICAgICAgICAgICAgICAgICZQ
Q0lfU0JERihzZWcsIGJ1cywgcGF0aC0+ZGV2LCBwYXRoLT5mbikpOwogCiAgICAgICAgICAgICBp
ZiAoIGRyaGQgKQogICAgICAgICAgICAgewpAQCAtMzkzLDggKzM5Miw4IEBAIHN0YXRpYyBpbnQg
X19pbml0IGFjcGlfcGFyc2VfZGV2X3Njb3BlKAogCiAgICAgICAgIGNhc2UgQUNQSV9ETUFSX1ND
T1BFX1RZUEVfRU5EUE9JTlQ6CiAgICAgICAgICAgICBpZiAoIGlvbW11X3ZlcmJvc2UgKQotICAg
ICAgICAgICAgICAgIHByaW50ayhWVERQUkVGSVggIiBlbmRwb2ludDogJTA0eDolMDJ4OiUwMngu
JXVcbiIsCi0gICAgICAgICAgICAgICAgICAgICAgIHNlZywgYnVzLCBwYXRoLT5kZXYsIHBhdGgt
PmZuKTsKKyAgICAgICAgICAgICAgICBwcmludGsoVlREUFJFRklYICIgZW5kcG9pbnQ6ICVwcFxu
IiwKKyAgICAgICAgICAgICAgICAgICAgICAgJlBDSV9TQkRGKHNlZywgYnVzLCBwYXRoLT5kZXYs
IHBhdGgtPmZuKSk7CiAKICAgICAgICAgICAgIGlmICggZHJoZCApCiAgICAgICAgICAgICB7CkBA
IC00MDcsOCArNDA2LDggQEAgc3RhdGljIGludCBfX2luaXQgYWNwaV9wYXJzZV9kZXZfc2NvcGUo
CiAKICAgICAgICAgY2FzZSBBQ1BJX0RNQVJfU0NPUEVfVFlQRV9JT0FQSUM6CiAgICAgICAgICAg
ICBpZiAoIGlvbW11X3ZlcmJvc2UgKQotICAgICAgICAgICAgICAgIHByaW50ayhWVERQUkVGSVgg
IiBJT0FQSUM6ICUwNHg6JTAyeDolMDJ4LiV1XG4iLAotICAgICAgICAgICAgICAgICAgICAgICBz
ZWcsIGJ1cywgcGF0aC0+ZGV2LCBwYXRoLT5mbik7CisgICAgICAgICAgICAgICAgcHJpbnRrKFZU
RFBSRUZJWCAiIElPQVBJQzogJXBwXG4iLAorICAgICAgICAgICAgICAgICAgICAgICAmUENJX1NC
REYoc2VnLCBidXMsIHBhdGgtPmRldiwgcGF0aC0+Zm4pKTsKIAogICAgICAgICAgICAgaWYgKCBk
cmhkICkKICAgICAgICAgICAgIHsKQEAgLTUzNyw4ICs1MzYsOCBAQCBhY3BpX3BhcnNlX29uZV9k
cmhkKHN0cnVjdCBhY3BpX2RtYXJfaGVhZGVyICpoZWFkZXIpCiAKICAgICAgICAgICAgIGlmICgg
IXBjaV9kZXZpY2VfZGV0ZWN0KGRyaGQtPnNlZ21lbnQsIGIsIGQsIGYpICkKICAgICAgICAgICAg
ICAgICBwcmludGsoWEVOTE9HX1dBUk5JTkcgVlREUFJFRklYCi0gICAgICAgICAgICAgICAgICAg
ICAgICIgTm9uLWV4aXN0ZW50IGRldmljZSAoJTA0eDolMDJ4OiUwMnguJXUpIGluIHRoaXMgRFJI
RCdzIHNjb3BlIVxuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgZHJoZC0+c2VnbWVudCwgYiwg
ZCwgZik7CisgICAgICAgICAgICAgICAgICAgICAgICIgTm9uLWV4aXN0ZW50IGRldmljZSAoJXBw
KSBpbiB0aGlzIERSSEQncyBzY29wZSFcbiIsCisgICAgICAgICAgICAgICAgICAgICAgICZQQ0lf
U0JERihkcmhkLT5zZWdtZW50LCBiLCBkLCBmKSk7CiAgICAgICAgIH0KIAogICAgICAgICBhY3Bp
X3JlZ2lzdGVyX2RyaGRfdW5pdChkbWFydSk7CkBAIC01NzQsOSArNTczLDkgQEAgc3RhdGljIGlu
dCByZWdpc3Rlcl9vbmVfcm1ycihzdHJ1Y3QgYWNwaV9ybXJyX3VuaXQgKnJtcnJ1KQogICAgICAg
ICBpZiAoIHBjaV9kZXZpY2VfZGV0ZWN0KHJtcnJ1LT5zZWdtZW50LCBiLCBkLCBmKSA9PSAwICkK
ICAgICAgICAgewogICAgICAgICAgICAgZHByaW50ayhYRU5MT0dfV0FSTklORyBWVERQUkVGSVgs
Ci0gICAgICAgICAgICAgICAgICAgICIgTm9uLWV4aXN0ZW50IGRldmljZSAoJTA0eDolMDJ4OiUw
MnguJXUpIGlzIHJlcG9ydGVkIgorICAgICAgICAgICAgICAgICAgICAiIE5vbi1leGlzdGVudCBk
ZXZpY2UgKCVwcCkgaXMgcmVwb3J0ZWQiCiAgICAgICAgICAgICAgICAgICAgICIgaW4gUk1SUiAo
JSJQUkl4NjQiLCAlIlBSSXg2NCIpJ3Mgc2NvcGUhXG4iLAotICAgICAgICAgICAgICAgICAgICBy
bXJydS0+c2VnbWVudCwgYiwgZCwgZiwKKyAgICAgICAgICAgICAgICAgICAgJlBDSV9TQkRGKHJt
cnJ1LT5zZWdtZW50LCBiLCBkLCBmKSwKICAgICAgICAgICAgICAgICAgICAgcm1ycnUtPmJhc2Vf
YWRkcmVzcywgcm1ycnUtPmVuZF9hZGRyZXNzKTsKICAgICAgICAgICAgIGlnbm9yZSA9IHRydWU7
CiAgICAgICAgIH0KZGlmZiAtLWdpdCBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3Z0ZC9pbnRy
ZW1hcC5jIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvdnRkL2ludHJlbWFwLmMKaW5kZXggZGYw
ZThhYzVjYi4uOWI4NmZhOGJiNyAxMDA2NDQKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gv
dnRkL2ludHJlbWFwLmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvdnRkL2ludHJlbWFw
LmMKQEAgLTUyNCwxNiArNTI0LDEzIEBAIHN0YXRpYyB2b2lkIHNldF9tc2lfc291cmNlX2lkKHN0
cnVjdCBwY2lfZGV2ICpwZGV2LCBzdHJ1Y3QgaXJlbWFwX2VudHJ5ICppcmUpCiAgICAgICAgIH0K
ICAgICAgICAgZWxzZQogICAgICAgICAgICAgZHByaW50ayhYRU5MT0dfV0FSTklORyBWVERQUkVG
SVgsCi0gICAgICAgICAgICAgICAgICAgICJkJWQ6IG5vIHVwc3RyZWFtIGJyaWRnZSBmb3IgJTA0
eDolMDJ4OiUwMnguJXVcbiIsCi0gICAgICAgICAgICAgICAgICAgIHBkZXYtPmRvbWFpbi0+ZG9t
YWluX2lkLAotICAgICAgICAgICAgICAgICAgICBzZWcsIGJ1cywgUENJX1NMT1QoZGV2Zm4pLCBQ
Q0lfRlVOQyhkZXZmbikpOworICAgICAgICAgICAgICAgICAgICAiZCVkOiBubyB1cHN0cmVhbSBi
cmlkZ2UgZm9yICVwcFxuIiwKKyAgICAgICAgICAgICAgICAgICAgcGRldi0+ZG9tYWluLT5kb21h
aW5faWQsICZwZGV2LT5zYmRmKTsKICAgICAgICAgYnJlYWs7CiAKICAgICBkZWZhdWx0OgotICAg
ICAgICBkcHJpbnRrKFhFTkxPR19XQVJOSU5HIFZURFBSRUZJWCwKLSAgICAgICAgICAgICAgICAi
ZCVkOiB1bmtub3duKCV1KTogJTA0eDolMDJ4OiUwMnguJXVcbiIsCi0gICAgICAgICAgICAgICAg
cGRldi0+ZG9tYWluLT5kb21haW5faWQsIHBkZXYtPnR5cGUsCi0gICAgICAgICAgICAgICAgc2Vn
LCBidXMsIFBDSV9TTE9UKGRldmZuKSwgUENJX0ZVTkMoZGV2Zm4pKTsKKyAgICAgICAgZHByaW50
ayhYRU5MT0dfV0FSTklORyBWVERQUkVGSVgsICJkJWQ6IHVua25vd24oJXUpOiAlcHBcbiIsCisg
ICAgICAgICAgICAgICAgcGRldi0+ZG9tYWluLT5kb21haW5faWQsIHBkZXYtPnR5cGUsICZwZGV2
LT5zYmRmKTsKICAgICAgICAgYnJlYWs7CiAgICB9CiB9CmRpZmYgLS1naXQgYS94ZW4vZHJpdmVy
cy9wYXNzdGhyb3VnaC92dGQvaW9tbXUuYyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3Z0ZC9p
b21tdS5jCmluZGV4IDhiMjdkN2U3NzUuLjE4OGZmNDM3ZDggMTAwNjQ0Ci0tLSBhL3hlbi9kcml2
ZXJzL3Bhc3N0aHJvdWdoL3Z0ZC9pb21tdS5jCisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdo
L3Z0ZC9pb21tdS5jCkBAIC04ODIsMjcgKzg4MiwyNCBAQCBzdGF0aWMgaW50IGlvbW11X3BhZ2Vf
ZmF1bHRfZG9fb25lKHN0cnVjdCBpb21tdSAqaW9tbXUsIGludCB0eXBlLAogICAgIHsKICAgICBj
YXNlIERNQV9SRU1BUDoKICAgICAgICAgcHJpbnRrKFhFTkxPR19HX1dBUk5JTkcgVlREUFJFRklY
Ci0gICAgICAgICAgICAgICAiRE1BUjpbJXNdIFJlcXVlc3QgZGV2aWNlIFslMDR4OiUwMng6JTAy
eC4ldV0gIgorICAgICAgICAgICAgICAgIkRNQVI6WyVzXSBSZXF1ZXN0IGRldmljZSBbJXBwXSAi
CiAgICAgICAgICAgICAgICAiZmF1bHQgYWRkciAlIlBSSXg2NCIsIGlvbW11IHJlZyA9ICVwXG4i
LAogICAgICAgICAgICAgICAgKHR5cGUgPyAiRE1BIFJlYWQiIDogIkRNQSBXcml0ZSIpLAotICAg
ICAgICAgICAgICAgc2VnLCBQQ0lfQlVTKHNvdXJjZV9pZCksIFBDSV9TTE9UKHNvdXJjZV9pZCks
Ci0gICAgICAgICAgICAgICBQQ0lfRlVOQyhzb3VyY2VfaWQpLCBhZGRyLCBpb21tdS0+cmVnKTsK
KyAgICAgICAgICAgICAgICZQQ0lfU0JERjIoc2VnLCBzb3VyY2VfaWQpLCBhZGRyLCBpb21tdS0+
cmVnKTsKICAgICAgICAga2luZCA9ICJETUFSIjsKICAgICAgICAgYnJlYWs7CiAgICAgY2FzZSBJ
TlRSX1JFTUFQOgogICAgICAgICBwcmludGsoWEVOTE9HX0dfV0FSTklORyBWVERQUkVGSVgKLSAg
ICAgICAgICAgICAgICJJTlRSLVJFTUFQOiBSZXF1ZXN0IGRldmljZSBbJTA0eDolMDJ4OiUwMngu
JXVdICIKKyAgICAgICAgICAgICAgICJJTlRSLVJFTUFQOiBSZXF1ZXN0IGRldmljZSBbJXBwXSAi
CiAgICAgICAgICAgICAgICAiZmF1bHQgaW5kZXggJSJQUkl4NjQiLCBpb21tdSByZWcgPSAlcFxu
IiwKLSAgICAgICAgICAgICAgIHNlZywgUENJX0JVUyhzb3VyY2VfaWQpLCBQQ0lfU0xPVChzb3Vy
Y2VfaWQpLAotICAgICAgICAgICAgICAgUENJX0ZVTkMoc291cmNlX2lkKSwgYWRkciA+PiA0OCwg
aW9tbXUtPnJlZyk7CisgICAgICAgICAgICAgICAmUENJX1NCREYyKHNlZywgc291cmNlX2lkKSwg
YWRkciA+PiA0OCwgaW9tbXUtPnJlZyk7CiAgICAgICAgIGtpbmQgPSAiSU5UUi1SRU1BUCI7CiAg
ICAgICAgIGJyZWFrOwogICAgIGRlZmF1bHQ6CiAgICAgICAgIHByaW50ayhYRU5MT0dfR19XQVJO
SU5HIFZURFBSRUZJWAotICAgICAgICAgICAgICAgIlVOS05PV046IFJlcXVlc3QgZGV2aWNlIFsl
MDR4OiUwMng6JTAyeC4ldV0gIgorICAgICAgICAgICAgICAgIlVOS05PV046IFJlcXVlc3QgZGV2
aWNlIFslcHBdICIKICAgICAgICAgICAgICAgICJmYXVsdCBhZGRyICUiUFJJeDY0IiwgaW9tbXUg
cmVnID0gJXBcbiIsCi0gICAgICAgICAgICAgICBzZWcsIFBDSV9CVVMoc291cmNlX2lkKSwgUENJ
X1NMT1Qoc291cmNlX2lkKSwKLSAgICAgICAgICAgICAgIFBDSV9GVU5DKHNvdXJjZV9pZCksIGFk
ZHIsIGlvbW11LT5yZWcpOworICAgICAgICAgICAgICAgJlBDSV9TQkRGMihzZWcsIHNvdXJjZV9p
ZCksIGFkZHIsIGlvbW11LT5yZWcpOwogICAgICAgICBraW5kID0gIlVOS05PV04iOwogICAgICAg
ICBicmVhazsKICAgICB9CkBAIC0xMzU0LDExICsxMzUxLDkgQEAgaW50IGRvbWFpbl9jb250ZXh0
X21hcHBpbmdfb25lKAogICAgICAgICB7CiAgICAgICAgICAgICBpZiAoIHBkZXYtPmRvbWFpbiAh
PSBkb21haW4gKQogICAgICAgICAgICAgewotICAgICAgICAgICAgICAgIHByaW50ayhYRU5MT0df
R19JTkZPIFZURFBSRUZJWAotICAgICAgICAgICAgICAgICAgICAgICAiZCVkOiAlMDR4OiUwMng6
JTAyeC4ldSBvd25lZCBieSBkJWQhIiwKLSAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluLT5k
b21haW5faWQsCi0gICAgICAgICAgICAgICAgICAgICAgIHNlZywgYnVzLCBQQ0lfU0xPVChkZXZm
biksIFBDSV9GVU5DKGRldmZuKSwKLSAgICAgICAgICAgICAgICAgICAgICAgcGRldi0+ZG9tYWlu
ID8gcGRldi0+ZG9tYWluLT5kb21haW5faWQgOiAtMSk7CisgICAgICAgICAgICAgICAgcHJpbnRr
KFhFTkxPR19HX0lORk8gVlREUFJFRklYICIlcGQ6ICVwcCBvd25lZCBieSAlcGQhIiwKKyAgICAg
ICAgICAgICAgICAgICAgICAgZG9tYWluLCAmUENJX1NCREYzKHNlZywgYnVzLCBkZXZmbiksCisg
ICAgICAgICAgICAgICAgICAgICAgIHBkZXYtPmRvbWFpbiA/OiBOVUxMKTsKICAgICAgICAgICAg
ICAgICByZXMgPSAtRUlOVkFMOwogICAgICAgICAgICAgfQogICAgICAgICB9CkBAIC0xMzcwLDE4
ICsxMzY1LDE1IEBAIGludCBkb21haW5fY29udGV4dF9tYXBwaW5nX29uZSgKICAgICAgICAgICAg
IGlmICggY2RvbWFpbiA8IDAgKQogICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIHByaW50
ayhYRU5MT0dfR19XQVJOSU5HIFZURFBSRUZJWAotICAgICAgICAgICAgICAgICAgICAgICAiZCVk
OiAlMDR4OiUwMng6JTAyeC4ldSBtYXBwZWQsIGJ1dCBjYW4ndCBmaW5kIG93bmVyIVxuIiwKLSAg
ICAgICAgICAgICAgICAgICAgICAgZG9tYWluLT5kb21haW5faWQsCi0gICAgICAgICAgICAgICAg
ICAgICAgIHNlZywgYnVzLCBQQ0lfU0xPVChkZXZmbiksIFBDSV9GVU5DKGRldmZuKSk7CisgICAg
ICAgICAgICAgICAgICAgICAgICIlcGQ6ICVwcCBtYXBwZWQsIGJ1dCBjYW4ndCBmaW5kIG93bmVy
IVxuIiwKKyAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluLCAmUENJX1NCREYzKHNlZywgYnVz
LCBkZXZmbikpOwogICAgICAgICAgICAgICAgIHJlcyA9IC1FSU5WQUw7CiAgICAgICAgICAgICB9
CiAgICAgICAgICAgICBlbHNlIGlmICggY2RvbWFpbiAhPSBkb21haW4tPmRvbWFpbl9pZCApCiAg
ICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19HX0lORk8gVlREUFJF
RklYCi0gICAgICAgICAgICAgICAgICAgICAgICJkJWQ6ICUwNHg6JTAyeDolMDJ4LiV1IGFscmVh
ZHkgbWFwcGVkIHRvIGQlZCEiLAotICAgICAgICAgICAgICAgICAgICAgICBkb21haW4tPmRvbWFp
bl9pZCwKLSAgICAgICAgICAgICAgICAgICAgICAgc2VnLCBidXMsIFBDSV9TTE9UKGRldmZuKSwg
UENJX0ZVTkMoZGV2Zm4pLAotICAgICAgICAgICAgICAgICAgICAgICBjZG9tYWluKTsKKyAgICAg
ICAgICAgICAgICAgICAgICAgIiVwZDogJXBwIGFscmVhZHkgbWFwcGVkIHRvIGQlZCEiLAorICAg
ICAgICAgICAgICAgICAgICAgICBkb21haW4sICZQQ0lfU0JERjMoc2VnLCBidXMsIGRldmZuKSwg
Y2RvbWFpbik7CiAgICAgICAgICAgICAgICAgcmVzID0gLUVJTlZBTDsKICAgICAgICAgICAgIH0K
ICAgICAgICAgfQpAQCAtMTQ5Niw5ICsxNDg4LDggQEAgc3RhdGljIGludCBkb21haW5fY29udGV4
dF9tYXBwaW5nKHN0cnVjdCBkb21haW4gKmRvbWFpbiwgdTggZGV2Zm4sCiAgICAgewogICAgIGNh
c2UgREVWX1RZUEVfUENJX0hPU1RfQlJJREdFOgogICAgICAgICBpZiAoIGlvbW11X2RlYnVnICkK
LSAgICAgICAgICAgIHByaW50ayhWVERQUkVGSVggImQlZDpIb3N0YnJpZGdlOiBza2lwICUwNHg6
JTAyeDolMDJ4LiV1IG1hcFxuIiwKLSAgICAgICAgICAgICAgICAgICBkb21haW4tPmRvbWFpbl9p
ZCwgc2VnLCBidXMsCi0gICAgICAgICAgICAgICAgICAgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVO
QyhkZXZmbikpOworICAgICAgICAgICAgcHJpbnRrKFZURFBSRUZJWCAiJXBkOkhvc3RicmlkZ2U6
IHNraXAgJXBwIG1hcFxuIiwKKyAgICAgICAgICAgICAgICAgICBkb21haW4sICZQQ0lfU0JERjMo
c2VnLCBidXMsIGRldmZuKSk7CiAgICAgICAgIGlmICggIWlzX2hhcmR3YXJlX2RvbWFpbihkb21h
aW4pICkKICAgICAgICAgICAgIHJldHVybiAtRVBFUk07CiAgICAgICAgIGJyZWFrOwpAQCAtMTUx
MCw5ICsxNTAxLDggQEAgc3RhdGljIGludCBkb21haW5fY29udGV4dF9tYXBwaW5nKHN0cnVjdCBk
b21haW4gKmRvbWFpbiwgdTggZGV2Zm4sCiAKICAgICBjYXNlIERFVl9UWVBFX1BDSWVfRU5EUE9J
TlQ6CiAgICAgICAgIGlmICggaW9tbXVfZGVidWcgKQotICAgICAgICAgICAgcHJpbnRrKFZURFBS
RUZJWCAiZCVkOlBDSWU6IG1hcCAlMDR4OiUwMng6JTAyeC4ldVxuIiwKLSAgICAgICAgICAgICAg
ICAgICBkb21haW4tPmRvbWFpbl9pZCwgc2VnLCBidXMsCi0gICAgICAgICAgICAgICAgICAgUENJ
X1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbikpOworICAgICAgICAgICAgcHJpbnRrKFZURFBS
RUZJWCAiJXBkOlBDSWU6IG1hcCAlcHBcbiIsCisgICAgICAgICAgICAgICAgICAgZG9tYWluLCAm
UENJX1NCREYzKHNlZywgYnVzLCBkZXZmbikpOwogICAgICAgICByZXQgPSBkb21haW5fY29udGV4
dF9tYXBwaW5nX29uZShkb21haW4sIGRyaGQtPmlvbW11LCBidXMsIGRldmZuLAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZGV2KTsKICAgICAgICAgaWYgKCAhcmV0
ICYmIGRldmZuID09IHBkZXYtPmRldmZuICYmIGF0c19kZXZpY2UocGRldiwgZHJoZCkgPiAwICkK
QEAgLTE1MjIsOSArMTUxMiw4IEBAIHN0YXRpYyBpbnQgZG9tYWluX2NvbnRleHRfbWFwcGluZyhz
dHJ1Y3QgZG9tYWluICpkb21haW4sIHU4IGRldmZuLAogCiAgICAgY2FzZSBERVZfVFlQRV9QQ0k6
CiAgICAgICAgIGlmICggaW9tbXVfZGVidWcgKQotICAgICAgICAgICAgcHJpbnRrKFZURFBSRUZJ
WCAiZCVkOlBDSTogbWFwICUwNHg6JTAyeDolMDJ4LiV1XG4iLAotICAgICAgICAgICAgICAgICAg
IGRvbWFpbi0+ZG9tYWluX2lkLCBzZWcsIGJ1cywKLSAgICAgICAgICAgICAgICAgICBQQ0lfU0xP
VChkZXZmbiksIFBDSV9GVU5DKGRldmZuKSk7CisgICAgICAgICAgICBwcmludGsoVlREUFJFRklY
ICIlcGQ6UENJOiBtYXAgJXBwXG4iLAorICAgICAgICAgICAgICAgICAgIGRvbWFpbiwgJlBDSV9T
QkRGMyhzZWcsIGJ1cywgZGV2Zm4pKTsKIAogICAgICAgICByZXQgPSBkb21haW5fY29udGV4dF9t
YXBwaW5nX29uZShkb21haW4sIGRyaGQtPmlvbW11LCBidXMsIGRldmZuLAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZGV2KTsKQEAgLTE1NTAsOSArMTUzOSw4IEBA
IHN0YXRpYyBpbnQgZG9tYWluX2NvbnRleHRfbWFwcGluZyhzdHJ1Y3QgZG9tYWluICpkb21haW4s
IHU4IGRldmZuLAogICAgICAgICBicmVhazsKIAogICAgIGRlZmF1bHQ6Ci0gICAgICAgIGRwcmlu
dGsoWEVOTE9HX0VSUiBWVERQUkVGSVgsICJkJWQ6dW5rbm93bigldSk6ICUwNHg6JTAyeDolMDJ4
LiV1XG4iLAotICAgICAgICAgICAgICAgIGRvbWFpbi0+ZG9tYWluX2lkLCBwZGV2LT50eXBlLAot
ICAgICAgICAgICAgICAgIHNlZywgYnVzLCBQQ0lfU0xPVChkZXZmbiksIFBDSV9GVU5DKGRldmZu
KSk7CisgICAgICAgIGRwcmludGsoWEVOTE9HX0VSUiBWVERQUkVGSVgsICIlcGQ6dW5rbm93bigl
dSk6ICVwcFxuIiwKKyAgICAgICAgICAgICAgICBkb21haW4sIHBkZXYtPnR5cGUsICZQQ0lfU0JE
RjMoc2VnLCBidXMsIGRldmZuKSk7CiAgICAgICAgIHJldCA9IC1FSU5WQUw7CiAgICAgICAgIGJy
ZWFrOwogICAgIH0KQEAgLTE2NDcsOSArMTYzNSw4IEBAIHN0YXRpYyBpbnQgZG9tYWluX2NvbnRl
eHRfdW5tYXAoc3RydWN0IGRvbWFpbiAqZG9tYWluLCB1OCBkZXZmbiwKICAgICB7CiAgICAgY2Fz
ZSBERVZfVFlQRV9QQ0lfSE9TVF9CUklER0U6CiAgICAgICAgIGlmICggaW9tbXVfZGVidWcgKQot
ICAgICAgICAgICAgcHJpbnRrKFZURFBSRUZJWCAiZCVkOkhvc3RicmlkZ2U6IHNraXAgJTA0eDol
MDJ4OiUwMnguJXUgdW5tYXBcbiIsCi0gICAgICAgICAgICAgICAgICAgZG9tYWluLT5kb21haW5f
aWQsIHNlZywgYnVzLAotICAgICAgICAgICAgICAgICAgIFBDSV9TTE9UKGRldmZuKSwgUENJX0ZV
TkMoZGV2Zm4pKTsKKyAgICAgICAgICAgIHByaW50ayhWVERQUkVGSVggIiVwZDpIb3N0YnJpZGdl
OiBza2lwICVwcCB1bm1hcFxuIiwKKyAgICAgICAgICAgICAgICAgICBkb21haW4sICZQQ0lfU0JE
RjMoc2VnLCBidXMsIGRldmZuKSk7CiAgICAgICAgIGlmICggIWlzX2hhcmR3YXJlX2RvbWFpbihk
b21haW4pICkKICAgICAgICAgICAgIHJldHVybiAtRVBFUk07CiAgICAgICAgIGdvdG8gb3V0OwpA
QCAtMTY2MSw5ICsxNjQ4LDggQEAgc3RhdGljIGludCBkb21haW5fY29udGV4dF91bm1hcChzdHJ1
Y3QgZG9tYWluICpkb21haW4sIHU4IGRldmZuLAogCiAgICAgY2FzZSBERVZfVFlQRV9QQ0llX0VO
RFBPSU5UOgogICAgICAgICBpZiAoIGlvbW11X2RlYnVnICkKLSAgICAgICAgICAgIHByaW50ayhW
VERQUkVGSVggImQlZDpQQ0llOiB1bm1hcCAlMDR4OiUwMng6JTAyeC4ldVxuIiwKLSAgICAgICAg
ICAgICAgICAgICBkb21haW4tPmRvbWFpbl9pZCwgc2VnLCBidXMsCi0gICAgICAgICAgICAgICAg
ICAgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbikpOworICAgICAgICAgICAgcHJpbnRr
KFZURFBSRUZJWCAiJXBkOlBDSWU6IHVubWFwICVwcFxuIiwKKyAgICAgICAgICAgICAgICAgICBk
b21haW4sICZQQ0lfU0JERjMoc2VnLCBidXMsIGRldmZuKSk7CiAgICAgICAgIHJldCA9IGRvbWFp
bl9jb250ZXh0X3VubWFwX29uZShkb21haW4sIGlvbW11LCBidXMsIGRldmZuKTsKICAgICAgICAg
aWYgKCAhcmV0ICYmIGRldmZuID09IHBkZXYtPmRldmZuICYmIGF0c19kZXZpY2UocGRldiwgZHJo
ZCkgPiAwICkKICAgICAgICAgICAgIGRpc2FibGVfYXRzX2RldmljZShwZGV2KTsKQEAgLTE2NzIs
OCArMTY1OCw4IEBAIHN0YXRpYyBpbnQgZG9tYWluX2NvbnRleHRfdW5tYXAoc3RydWN0IGRvbWFp
biAqZG9tYWluLCB1OCBkZXZmbiwKIAogICAgIGNhc2UgREVWX1RZUEVfUENJOgogICAgICAgICBp
ZiAoIGlvbW11X2RlYnVnICkKLSAgICAgICAgICAgIHByaW50ayhWVERQUkVGSVggImQlZDpQQ0k6
IHVubWFwICUwNHg6JTAyeDolMDJ4LiV1XG4iLAotICAgICAgICAgICAgICAgICAgIGRvbWFpbi0+
ZG9tYWluX2lkLCBzZWcsIGJ1cywgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbikpOwor
ICAgICAgICAgICAgcHJpbnRrKFZURFBSRUZJWCAiJXBkOlBDSTogdW5tYXAgJXBwXG4iLAorICAg
ICAgICAgICAgICAgICAgIGRvbWFpbiwgJlBDSV9TQkRGMyhzZWcsIGJ1cywgZGV2Zm4pKTsKICAg
ICAgICAgcmV0ID0gZG9tYWluX2NvbnRleHRfdW5tYXBfb25lKGRvbWFpbiwgaW9tbXUsIGJ1cywg
ZGV2Zm4pOwogICAgICAgICBpZiAoIHJldCApCiAgICAgICAgICAgICBicmVhazsKQEAgLTE2OTgs
OSArMTY4NCw4IEBAIHN0YXRpYyBpbnQgZG9tYWluX2NvbnRleHRfdW5tYXAoc3RydWN0IGRvbWFp
biAqZG9tYWluLCB1OCBkZXZmbiwKICAgICAgICAgYnJlYWs7CiAKICAgICBkZWZhdWx0OgotICAg
ICAgICBkcHJpbnRrKFhFTkxPR19FUlIgVlREUFJFRklYLCAiZCVkOnVua25vd24oJXUpOiAlMDR4
OiUwMng6JTAyeC4ldVxuIiwKLSAgICAgICAgICAgICAgICBkb21haW4tPmRvbWFpbl9pZCwgcGRl
di0+dHlwZSwKLSAgICAgICAgICAgICAgICBzZWcsIGJ1cywgUENJX1NMT1QoZGV2Zm4pLCBQQ0lf
RlVOQyhkZXZmbikpOworICAgICAgICBkcHJpbnRrKFhFTkxPR19FUlIgVlREUFJFRklYLCAiJXBk
OnVua25vd24oJXUpOiAlcHBcbiIsCisgICAgICAgICAgICAgICAgZG9tYWluLCBwZGV2LT50eXBl
LCAmUENJX1NCREYzKHNlZywgYnVzLCBkZXZmbikpOwogICAgICAgICByZXQgPSAtRUlOVkFMOwog
ICAgICAgICBnb3RvIG91dDsKICAgICB9CkBAIC0yNDk3LDEyICsyNDgyLDExIEBAIHN0YXRpYyBp
bnQgaW50ZWxfaW9tbXVfYXNzaWduX2RldmljZSgKICAgICAgICAgICAgIGJvb2xfdCByZWxheGVk
ID0gISEoZmxhZyAmIFhFTl9ET01DVExfREVWX1JETV9SRUxBWEVEKTsKIAogICAgICAgICAgICAg
cHJpbnRrKFhFTkxPR19HVUVTVCAiJXMiIFZURFBSRUZJWAotICAgICAgICAgICAgICAgICAgICIg
SXQncyAlcyB0byBhc3NpZ24gJTA0eDolMDJ4OiUwMnguJXUiCi0gICAgICAgICAgICAgICAgICAg
IiB3aXRoIHNoYXJlZCBSTVJSIGF0ICUiUFJJeDY0IiBmb3IgRG9tJWQuXG4iLAorICAgICAgICAg
ICAgICAgICAgICIgSXQncyAlcyB0byBhc3NpZ24gJXBwIgorICAgICAgICAgICAgICAgICAgICIg
d2l0aCBzaGFyZWQgUk1SUiBhdCAlIlBSSXg2NCIgZm9yICVwZC5cbiIsCiAgICAgICAgICAgICAg
ICAgICAgcmVsYXhlZCA/IFhFTkxPR19XQVJOSU5HIDogWEVOTE9HX0VSUiwKICAgICAgICAgICAg
ICAgICAgICByZWxheGVkID8gInJpc2t5IiA6ICJkaXNhbGxvd2VkIiwKLSAgICAgICAgICAgICAg
ICAgICBzZWcsIGJ1cywgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbiksCi0gICAgICAg
ICAgICAgICAgICAgcm1yci0+YmFzZV9hZGRyZXNzLCBkLT5kb21haW5faWQpOworICAgICAgICAg
ICAgICAgICAgICZQQ0lfU0JERjMoc2VnLCBidXMsIGRldmZuKSwgcm1yci0+YmFzZV9hZGRyZXNz
LCBkKTsKICAgICAgICAgICAgIGlmICggIXJlbGF4ZWQgKQogICAgICAgICAgICAgICAgIHJldHVy
biAtRVBFUk07CiAgICAgICAgIH0KZGlmZiAtLWdpdCBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdo
L3Z0ZC9xdWlya3MuYyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3Z0ZC9xdWlya3MuYwppbmRl
eCBiNmUyZDMxM2YwLi40NTgwMjM5YWE2IDEwMDY0NAotLS0gYS94ZW4vZHJpdmVycy9wYXNzdGhy
b3VnaC92dGQvcXVpcmtzLmMKKysrIGIveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gvdnRkL3F1aXJr
cy5jCkBAIC00MTcsOCArNDE3LDYgQEAgdm9pZCBwY2lfdnRkX3F1aXJrKGNvbnN0IHN0cnVjdCBw
Y2lfZGV2ICpwZGV2KQogewogICAgIGludCBzZWcgPSBwZGV2LT5zZWc7CiAgICAgaW50IGJ1cyA9
IHBkZXYtPmJ1czsKLSAgICBpbnQgZGV2ID0gUENJX1NMT1QocGRldi0+ZGV2Zm4pOwotICAgIGlu
dCBmdW5jID0gUENJX0ZVTkMocGRldi0+ZGV2Zm4pOwogICAgIGludCBwb3M7CiAgICAgYm9vbF90
IGZmOwogICAgIHUzMiB2YWwsIHZhbDI7CkBAIC00NDIsOCArNDQwLDcgQEAgdm9pZCBwY2lfdnRk
X3F1aXJrKGNvbnN0IHN0cnVjdCBwY2lfZGV2ICpwZGV2KQogICAgIGNhc2UgMHgzYzI4OiAvKiBT
YW5keWJyaWRnZSAqLwogICAgICAgICB2YWwgPSBwY2lfY29uZl9yZWFkMzIocGRldi0+c2JkZiwg
MHgxQUMpOwogICAgICAgICBwY2lfY29uZl93cml0ZTMyKHBkZXYtPnNiZGYsIDB4MUFDLCB2YWwg
fCAoMSA8PCAzMSkpOwotICAgICAgICBwcmludGsoWEVOTE9HX0lORk8gIk1hc2tlZCBWVC1kIGVy
cm9yIHNpZ25hbGluZyBvbiAlMDR4OiUwMng6JTAyeC4ldVxuIiwKLSAgICAgICAgICAgICAgIHNl
ZywgYnVzLCBkZXYsIGZ1bmMpOworICAgICAgICBwcmludGsoWEVOTE9HX0lORk8gIk1hc2tlZCBW
VC1kIGVycm9yIHNpZ25hbGluZyBvbiAlcHBcbiIsICZwZGV2LT5zYmRmKTsKICAgICAgICAgYnJl
YWs7CiAKICAgICAvKiBUeWxlcnNidXJnIChFUCkvQm94Ym9ybyAoTVApIGNoaXBzZXRzIChOSE0t
RVAvRVgsIFdTTS1FUC9FWCkgKi8KQEAgLTQ3OCw4ICs0NzUsNyBAQCB2b2lkIHBjaV92dGRfcXVp
cmsoY29uc3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYpCiAgICAgICAgICAgICBmZiA9IHBjaWVfYWVy
X2dldF9maXJtd2FyZV9maXJzdChwZGV2KTsKICAgICAgICAgaWYgKCAhcG9zICkKICAgICAgICAg
ewotICAgICAgICAgICAgcHJpbnRrKFhFTkxPR19XQVJOSU5HICIlMDR4OiUwMng6JTAyeC4ldSB3
aXRob3V0IEFFUiBjYXBhYmlsaXR5P1xuIiwKLSAgICAgICAgICAgICAgICAgICBzZWcsIGJ1cywg
ZGV2LCBmdW5jKTsKKyAgICAgICAgICAgIHByaW50ayhYRU5MT0dfV0FSTklORyAiJXBwIHdpdGhv
dXQgQUVSIGNhcGFiaWxpdHk/XG4iLCAmcGRldi0+c2JkZik7CiAgICAgICAgICAgICBicmVhazsK
ICAgICAgICAgfQogCkBAIC01MDIsOCArNDk4LDcgQEAgdm9pZCBwY2lfdnRkX3F1aXJrKGNvbnN0
IHN0cnVjdCBwY2lfZGV2ICpwZGV2KQogICAgICAgICB2YWwgPSBwY2lfY29uZl9yZWFkMzIocGRl
di0+c2JkZiwgMHgyMGMpOwogICAgICAgICBwY2lfY29uZl93cml0ZTMyKHBkZXYtPnNiZGYsIDB4
MjBjLCB2YWwgfCAoMSA8PCA0KSk7CiAKLSAgICAgICAgcHJpbnRrKFhFTkxPR19JTkZPICIlcyBV
UiBzaWduYWxpbmcgb24gJTA0eDolMDJ4OiUwMnguJXVcbiIsCi0gICAgICAgICAgICAgICBhY3Rp
b24sIHNlZywgYnVzLCBkZXYsIGZ1bmMpOworICAgICAgICBwcmludGsoWEVOTE9HX0lORk8gIiVz
IFVSIHNpZ25hbGluZyBvbiAlcHBcbiIsIGFjdGlvbiwgJnBkZXYtPnNiZGYpOwogICAgICAgICBi
cmVhazsKIAogICAgIGNhc2UgMHgwMDQwOiBjYXNlIDB4MDA0NDogY2FzZSAweDAwNDg6IC8qIE5l
aGFsZW0vV2VzdG1lcmUgKi8KQEAgLTUyOCwxNiArNTIzLDE1IEBAIHZvaWQgcGNpX3Z0ZF9xdWly
ayhjb25zdCBzdHJ1Y3QgcGNpX2RldiAqcGRldikKICAgICAgICAgICAgIHsKICAgICAgICAgICAg
ICAgICBfX3NldF9iaXQoMHgxYzggKiA4ICsgMjAsIHZhKTsKICAgICAgICAgICAgICAgICBpb3Vu
bWFwKHZhKTsKLSAgICAgICAgICAgICAgICBwcmludGsoWEVOTE9HX0lORk8gIk1hc2tlZCBVUiBz
aWduYWxpbmcgb24gJTA0eDolMDJ4OiUwMnguJXVcbiIsCi0gICAgICAgICAgICAgICAgICAgICAg
IHNlZywgYnVzLCBkZXYsIGZ1bmMpOworICAgICAgICAgICAgICAgIHByaW50ayhYRU5MT0dfSU5G
TyAiTWFza2VkIFVSIHNpZ25hbGluZyBvbiAlcHBcbiIsICZwZGV2LT5zYmRmKTsKICAgICAgICAg
ICAgIH0KICAgICAgICAgICAgIGVsc2UKLSAgICAgICAgICAgICAgICBwcmludGsoWEVOTE9HX0VS
UiAiQ291bGQgbm90IG1hcCAlIlBSSXBhZGRyIiBmb3IgJTA0eDolMDJ4OiUwMnguJXVcbiIsCi0g
ICAgICAgICAgICAgICAgICAgICAgIHBhLCBzZWcsIGJ1cywgZGV2LCBmdW5jKTsKKyAgICAgICAg
ICAgICAgICBwcmludGsoWEVOTE9HX0VSUiAiQ291bGQgbm90IG1hcCAlIlBSSXBhZGRyIiBmb3Ig
JXBwXG4iLAorICAgICAgICAgICAgICAgICAgICAgICBwYSwgJnBkZXYtPnNiZGYpOwogICAgICAg
ICB9CiAgICAgICAgIGVsc2UKLSAgICAgICAgICAgIHByaW50ayhYRU5MT0dfV0FSTklORyAiQm9n
dXMgRE1JQkFSICUjIlBSSXg2NCIgb24gJTA0eDolMDJ4OiUwMnguJXVcbiIsCi0gICAgICAgICAg
ICAgICAgICAgYmFyLCBzZWcsIGJ1cywgZGV2LCBmdW5jKTsKKyAgICAgICAgICAgIHByaW50ayhY
RU5MT0dfV0FSTklORyAiQm9ndXMgRE1JQkFSICUjIlBSSXg2NCIgb24gJXBwXG4iLAorICAgICAg
ICAgICAgICAgICAgIGJhciwgJnBkZXYtPnNiZGYpOwogICAgICAgICBicmVhazsKICAgICB9CiB9
CmRpZmYgLS1naXQgYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC92dGQvdXRpbHMuYyBiL3hlbi9k
cml2ZXJzL3Bhc3N0aHJvdWdoL3Z0ZC91dGlscy5jCmluZGV4IDk0YTZlNGVlYzkuLjY4MzA0YTYx
ZTggMTAwNjQ0Ci0tLSBhL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3Z0ZC91dGlscy5jCisrKyBi
L3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3Z0ZC91dGlscy5jCkBAIC05NSw5ICs5NSw5IEBAIHZv
aWQgcHJpbnRfdnRkX2VudHJpZXMoc3RydWN0IGlvbW11ICppb21tdSwgaW50IGJ1cywgaW50IGRl
dmZuLCB1NjQgZ21mbikKICAgICB1NjQgKmwsIHZhbDsKICAgICB1MzIgbF9pbmRleCwgbGV2ZWw7
CiAKLSAgICBwcmludGsoInByaW50X3Z0ZF9lbnRyaWVzOiBpb21tdSAjJXUgZGV2ICUwNHg6JTAy
eDolMDJ4LiV1IGdtZm4gJSJQUklfZ2ZuIlxuIiwKLSAgICAgICAgICAgaW9tbXUtPmluZGV4LCBp
b21tdS0+aW50ZWwtPmRyaGQtPnNlZ21lbnQsIGJ1cywKLSAgICAgICAgICAgUENJX1NMT1QoZGV2
Zm4pLCBQQ0lfRlVOQyhkZXZmbiksIGdtZm4pOworICAgIHByaW50aygicHJpbnRfdnRkX2VudHJp
ZXM6IGlvbW11ICMldSBkZXYgJXBwIGdtZm4gJSJQUklfZ2ZuIlxuIiwKKyAgICAgICAgICAgaW9t
bXUtPmluZGV4LCAmUENJX1NCREYzKGlvbW11LT5pbnRlbC0+ZHJoZC0+c2VnbWVudCwgYnVzLCBk
ZXZmbiksCisgICAgICAgICAgIGdtZm4pOwogCiAgICAgaWYgKCBpb21tdS0+cm9vdF9tYWRkciA9
PSAwICkKICAgICB7CmRpZmYgLS1naXQgYS94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC94ODYvYXRz
LmMgYi94ZW4vZHJpdmVycy9wYXNzdGhyb3VnaC94ODYvYXRzLmMKaW5kZXggM2VlYTdmODlmYy4u
ZGMwNTg0YjQyMyAxMDA2NDQKLS0tIGEveGVuL2RyaXZlcnMvcGFzc3Rocm91Z2gveDg2L2F0cy5j
CisrKyBiL3hlbi9kcml2ZXJzL3Bhc3N0aHJvdWdoL3g4Ni9hdHMuYwpAQCAtMzEsOCArMzEsNyBA
QCBpbnQgZW5hYmxlX2F0c19kZXZpY2Uoc3RydWN0IHBjaV9kZXYgKnBkZXYsIHN0cnVjdCBsaXN0
X2hlYWQgKmF0c19saXN0KQogICAgIEJVR19PTighcG9zKTsKIAogICAgIGlmICggaW9tbXVfdmVy
Ym9zZSApCi0gICAgICAgIGRwcmludGsoWEVOTE9HX0lORk8sICIlMDR4OiUwMng6JTAyeC4ldTog
QVRTIGNhcGFiaWxpdHkgZm91bmRcbiIsCi0gICAgICAgICAgICAgICAgc2VnLCBidXMsIFBDSV9T
TE9UKGRldmZuKSwgUENJX0ZVTkMoZGV2Zm4pKTsKKyAgICAgICAgZHByaW50ayhYRU5MT0dfSU5G
TywgIiVwcDogQVRTIGNhcGFiaWxpdHkgZm91bmRcbiIsICZwZGV2LT5zYmRmKTsKIAogICAgIHZh
bHVlID0gcGNpX2NvbmZfcmVhZDE2KHBkZXYtPnNiZGYsIHBvcyArIEFUU19SRUdfQ1RMKTsKICAg
ICBpZiAoIHZhbHVlICYgQVRTX0VOQUJMRSApCkBAIC02Myw5ICs2Miw4IEBAIGludCBlbmFibGVf
YXRzX2RldmljZShzdHJ1Y3QgcGNpX2RldiAqcGRldiwgc3RydWN0IGxpc3RfaGVhZCAqYXRzX2xp
c3QpCiAgICAgfQogCiAgICAgaWYgKCBpb21tdV92ZXJib3NlICkKLSAgICAgICAgZHByaW50ayhY
RU5MT0dfSU5GTywgIiUwNHg6JTAyeDolMDJ4LiV1OiBBVFMgJXMgZW5hYmxlZFxuIiwKLSAgICAg
ICAgICAgICAgICBzZWcsIGJ1cywgUENJX1NMT1QoZGV2Zm4pLCBQQ0lfRlVOQyhkZXZmbiksCi0g
ICAgICAgICAgICAgICAgcG9zID8gImlzIiA6ICJ3YXMiKTsKKyAgICAgICAgZHByaW50ayhYRU5M
T0dfSU5GTywgIiVwcDogQVRTICVzIGVuYWJsZWRcbiIsCisgICAgICAgICAgICAgICAgJnBkZXYt
PnNiZGYsIHBvcyA/ICJpcyIgOiAid2FzIik7CiAKICAgICByZXR1cm4gcG9zOwogfQpAQCAtNzMs
OCArNzEsNiBAQCBpbnQgZW5hYmxlX2F0c19kZXZpY2Uoc3RydWN0IHBjaV9kZXYgKnBkZXYsIHN0
cnVjdCBsaXN0X2hlYWQgKmF0c19saXN0KQogdm9pZCBkaXNhYmxlX2F0c19kZXZpY2Uoc3RydWN0
IHBjaV9kZXYgKnBkZXYpCiB7CiAgICAgdTMyIHZhbHVlOwotICAgIHUxNiBzZWcgPSBwZGV2LT5z
ZWc7Ci0gICAgdTggYnVzID0gcGRldi0+YnVzLCBkZXZmbiA9IHBkZXYtPmRldmZuOwogCiAgICAg
QlVHX09OKCFwZGV2LT5hdHMuY2FwX3Bvcyk7CiAKQEAgLTg1LDYgKzgxLDUgQEAgdm9pZCBkaXNh
YmxlX2F0c19kZXZpY2Uoc3RydWN0IHBjaV9kZXYgKnBkZXYpCiAgICAgbGlzdF9kZWwoJnBkZXYt
PmF0cy5saXN0KTsKIAogICAgIGlmICggaW9tbXVfdmVyYm9zZSApCi0gICAgICAgIGRwcmludGso
WEVOTE9HX0lORk8sICIlMDR4OiUwMng6JTAyeC4ldTogQVRTIGlzIGRpc2FibGVkXG4iLAotICAg
ICAgICAgICAgICAgIHNlZywgYnVzLCBQQ0lfU0xPVChkZXZmbiksIFBDSV9GVU5DKGRldmZuKSk7
CisgICAgICAgIGRwcmludGsoWEVOTE9HX0lORk8sICIlcHA6IEFUUyBpcyBkaXNhYmxlZFxuIiwg
JnBkZXYtPnNiZGYpOwogfQpkaWZmIC0tZ2l0IGEveGVuL2RyaXZlcnMvdnBjaS9oZWFkZXIuYyBi
L3hlbi9kcml2ZXJzL3ZwY2kvaGVhZGVyLmMKaW5kZXggM2M3OTRmNDg2ZC4uYmE5YTAzNjIwMiAx
MDA2NDQKLS0tIGEveGVuL2RyaXZlcnMvdnBjaS9oZWFkZXIuYworKysgYi94ZW4vZHJpdmVycy92
cGNpL2hlYWRlci5jCkBAIC0zNTUsNyArMzU1LDYgQEAgc3RhdGljIHZvaWQgYmFyX3dyaXRlKGNv
bnN0IHN0cnVjdCBwY2lfZGV2ICpwZGV2LCB1bnNpZ25lZCBpbnQgcmVnLAogICAgICAgICAgICAg
ICAgICAgICAgIHVpbnQzMl90IHZhbCwgdm9pZCAqZGF0YSkKIHsKICAgICBzdHJ1Y3QgdnBjaV9i
YXIgKmJhciA9IGRhdGE7Ci0gICAgdWludDhfdCBzbG90ID0gUENJX1NMT1QocGRldi0+ZGV2Zm4p
LCBmdW5jID0gUENJX0ZVTkMocGRldi0+ZGV2Zm4pOwogICAgIGJvb2wgaGkgPSBmYWxzZTsKIAog
ICAgIGlmICggYmFyLT50eXBlID09IFZQQ0lfQkFSX01FTTY0X0hJICkKQEAgLTM3Miw5ICszNzEs
OCBAQCBzdGF0aWMgdm9pZCBiYXJfd3JpdGUoY29uc3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYsIHVu
c2lnbmVkIGludCByZWcsCiAgICAgICAgIC8qIElmIHRoZSB2YWx1ZSB3cml0dGVuIGlzIHRoZSBj
dXJyZW50IG9uZSBhdm9pZCBwcmludGluZyBhIHdhcm5pbmcuICovCiAgICAgICAgIGlmICggdmFs
ICE9ICh1aW50MzJfdCkoYmFyLT5hZGRyID4+IChoaSA/IDMyIDogMCkpICkKICAgICAgICAgICAg
IGdwcmludGsoWEVOTE9HX1dBUk5JTkcsCi0gICAgICAgICAgICAgICAgICAgICIlMDR4OiUwMng6
JTAyeC4ldTogaWdub3JlZCBCQVIgJWx1IHdyaXRlIHdpdGggbWVtb3J5IGRlY29kaW5nIGVuYWJs
ZWRcbiIsCi0gICAgICAgICAgICAgICAgICAgIHBkZXYtPnNlZywgcGRldi0+YnVzLCBzbG90LCBm
dW5jLAotICAgICAgICAgICAgICAgICAgICBiYXIgLSBwZGV2LT52cGNpLT5oZWFkZXIuYmFycyAr
IGhpKTsKKyAgICAgICAgICAgICAgICAgICAgIiVwcDogaWdub3JlZCBCQVIgJWx1IHdyaXRlIHdp
dGggbWVtb3J5IGRlY29kaW5nIGVuYWJsZWRcbiIsCisgICAgICAgICAgICAgICAgICAgICZwZGV2
LT5zYmRmLCBiYXIgLSBwZGV2LT52cGNpLT5oZWFkZXIuYmFycyArIGhpKTsKICAgICAgICAgcmV0
dXJuOwogICAgIH0KIApAQCAtNDAyLDE1ICs0MDAsMTQgQEAgc3RhdGljIHZvaWQgcm9tX3dyaXRl
KGNvbnN0IHN0cnVjdCBwY2lfZGV2ICpwZGV2LCB1bnNpZ25lZCBpbnQgcmVnLAogewogICAgIHN0
cnVjdCB2cGNpX2hlYWRlciAqaGVhZGVyID0gJnBkZXYtPnZwY2ktPmhlYWRlcjsKICAgICBzdHJ1
Y3QgdnBjaV9iYXIgKnJvbSA9IGRhdGE7Ci0gICAgdWludDhfdCBzbG90ID0gUENJX1NMT1QocGRl
di0+ZGV2Zm4pLCBmdW5jID0gUENJX0ZVTkMocGRldi0+ZGV2Zm4pOwogICAgIHVpbnQxNl90IGNt
ZCA9IHBjaV9jb25mX3JlYWQxNihwZGV2LT5zYmRmLCBQQ0lfQ09NTUFORCk7CiAgICAgYm9vbCBu
ZXdfZW5hYmxlZCA9IHZhbCAmIFBDSV9ST01fQUREUkVTU19FTkFCTEU7CiAKICAgICBpZiAoIChj
bWQgJiBQQ0lfQ09NTUFORF9NRU1PUlkpICYmIGhlYWRlci0+cm9tX2VuYWJsZWQgJiYgbmV3X2Vu
YWJsZWQgKQogICAgIHsKICAgICAgICAgZ3ByaW50ayhYRU5MT0dfV0FSTklORywKLSAgICAgICAg
ICAgICAgICAiJTA0eDolMDJ4OiUwMnguJXU6IGlnbm9yZWQgUk9NIEJBUiB3cml0ZSB3aXRoIG1l
bW9yeSBkZWNvZGluZyBlbmFibGVkXG4iLAotICAgICAgICAgICAgICAgIHBkZXYtPnNlZywgcGRl
di0+YnVzLCBzbG90LCBmdW5jKTsKKyAgICAgICAgICAgICAgICAiJXBwOiBpZ25vcmVkIFJPTSBC
QVIgd3JpdGUgd2l0aCBtZW1vcnkgZGVjb2RpbmcgZW5hYmxlZFxuIiwKKyAgICAgICAgICAgICAg
ICAmcGRldi0+c2JkZik7CiAgICAgICAgIHJldHVybjsKICAgICB9CiAKZGlmZiAtLWdpdCBhL3hl
bi9kcml2ZXJzL3ZwY2kvbXNpLmMgYi94ZW4vZHJpdmVycy92cGNpL21zaS5jCmluZGV4IDViNjYw
MmYzYzIuLjQwZTRmY2ExMzIgMTAwNjQ0Ci0tLSBhL3hlbi9kcml2ZXJzL3ZwY2kvbXNpLmMKKysr
IGIveGVuL2RyaXZlcnMvdnBjaS9tc2kuYwpAQCAtMjkwLDggKzI5MCw3IEBAIHZvaWQgdnBjaV9k
dW1wX21zaSh2b2lkKQogICAgICAgICAgICAgbXNpID0gcGRldi0+dnBjaS0+bXNpOwogICAgICAg
ICAgICAgaWYgKCBtc2kgJiYgbXNpLT5lbmFibGVkICkKICAgICAgICAgICAgIHsKLSAgICAgICAg
ICAgICAgICBwcmludGsoIiUwNHg6JTAyeDolMDJ4LiV1IE1TSVxuIiwgcGRldi0+c2VnLCBwZGV2
LT5idXMsCi0gICAgICAgICAgICAgICAgICAgICAgIFBDSV9TTE9UKHBkZXYtPmRldmZuKSwgUENJ
X0ZVTkMocGRldi0+ZGV2Zm4pKTsKKyAgICAgICAgICAgICAgICBwcmludGsoIiVwcCBNU0lcbiIs
ICZwZGV2LT5zYmRmKTsKIAogICAgICAgICAgICAgICAgIHByaW50aygiICBlbmFibGVkOiAlZCA2
NC1iaXQ6ICVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgbXNpLT5lbmFibGVkLCBtc2ktPmFk
ZHJlc3M2NCk7CkBAIC0zMDgsOCArMzA3LDcgQEAgdm9pZCB2cGNpX2R1bXBfbXNpKHZvaWQpCiAg
ICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgaW50IHJjOwogCi0gICAgICAgICAgICAgICAg
cHJpbnRrKCIlMDR4OiUwMng6JTAyeC4ldSBNU0ktWFxuIiwgcGRldi0+c2VnLCBwZGV2LT5idXMs
Ci0gICAgICAgICAgICAgICAgICAgICAgIFBDSV9TTE9UKHBkZXYtPmRldmZuKSwgUENJX0ZVTkMo
cGRldi0+ZGV2Zm4pKTsKKyAgICAgICAgICAgICAgICBwcmludGsoIiVwcCBNU0ktWFxuIiwgJnBk
ZXYtPnNiZGYpOwogCiAgICAgICAgICAgICAgICAgcHJpbnRrKCIgIGVudHJpZXM6ICV1IG1hc2th
bGw6ICVkIGVuYWJsZWQ6ICVkXG4iLAogICAgICAgICAgICAgICAgICAgICAgICBtc2l4LT5tYXhf
ZW50cmllcywgbXNpeC0+bWFza2VkLCBtc2l4LT5lbmFibGVkKTsKZGlmZiAtLWdpdCBhL3hlbi9k
cml2ZXJzL3ZwY2kvbXNpeC5jIGIveGVuL2RyaXZlcnMvdnBjaS9tc2l4LmMKaW5kZXggMzhjMWU3
ZTVkZC4uNjRkZDBhOTI5YyAxMDA2NDQKLS0tIGEveGVuL2RyaXZlcnMvdnBjaS9tc2l4LmMKKysr
IGIveGVuL2RyaXZlcnMvdnBjaS9tc2l4LmMKQEAgLTQyLDE1ICs0MiwxNCBAQCBzdGF0aWMgdWlu
dDMyX3QgY29udHJvbF9yZWFkKGNvbnN0IHN0cnVjdCBwY2lfZGV2ICpwZGV2LCB1bnNpZ25lZCBp
bnQgcmVnLAogc3RhdGljIGludCB1cGRhdGVfZW50cnkoc3RydWN0IHZwY2lfbXNpeF9lbnRyeSAq
ZW50cnksCiAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgcGNpX2RldiAqcGRl
diwgdW5zaWduZWQgaW50IG5yKQogewotICAgIHVpbnQ4X3Qgc2xvdCA9IFBDSV9TTE9UKHBkZXYt
PmRldmZuKSwgZnVuYyA9IFBDSV9GVU5DKHBkZXYtPmRldmZuKTsKICAgICBpbnQgcmMgPSB2cGNp
X21zaXhfYXJjaF9kaXNhYmxlX2VudHJ5KGVudHJ5LCBwZGV2KTsKIAogICAgIC8qIElnbm9yZSBF
Tk9FTlQsIGl0IG1lYW5zIHRoZSBlbnRyeSB3YXNuJ3Qgc2V0dXAuICovCiAgICAgaWYgKCByYyAm
JiByYyAhPSAtRU5PRU5UICkKICAgICB7CiAgICAgICAgIGdwcmludGsoWEVOTE9HX1dBUk5JTkcs
Ci0gICAgICAgICAgICAgICAgIiUwNHg6JTAyeDolMDJ4LiV1OiB1bmFibGUgdG8gZGlzYWJsZSBl
bnRyeSAldSBmb3IgdXBkYXRlOiAlZFxuIiwKLSAgICAgICAgICAgICAgICBwZGV2LT5zZWcsIHBk
ZXYtPmJ1cywgc2xvdCwgZnVuYywgbnIsIHJjKTsKKyAgICAgICAgICAgICAgICAiJXBwOiB1bmFi
bGUgdG8gZGlzYWJsZSBlbnRyeSAldSBmb3IgdXBkYXRlOiAlZFxuIiwKKyAgICAgICAgICAgICAg
ICAmcGRldi0+c2JkZiwgbnIsIHJjKTsKICAgICAgICAgcmV0dXJuIHJjOwogICAgIH0KIApAQCAt
NTksOSArNTgsOCBAQCBzdGF0aWMgaW50IHVwZGF0ZV9lbnRyeShzdHJ1Y3QgdnBjaV9tc2l4X2Vu
dHJ5ICplbnRyeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFZQQ0lfTVNJWF9UQUJMRSkpOwogICAgIGlmICggcmMgKQogICAgIHsKLSAgICAg
ICAgZ3ByaW50ayhYRU5MT0dfV0FSTklORywKLSAgICAgICAgICAgICAgICAiJTA0eDolMDJ4OiUw
MnguJXU6IHVuYWJsZSB0byBlbmFibGUgZW50cnkgJXU6ICVkXG4iLAotICAgICAgICAgICAgICAg
IHBkZXYtPnNlZywgcGRldi0+YnVzLCBzbG90LCBmdW5jLCBuciwgcmMpOworICAgICAgICBncHJp
bnRrKFhFTkxPR19XQVJOSU5HLCAiJXBwOiB1bmFibGUgdG8gZW5hYmxlIGVudHJ5ICV1OiAlZFxu
IiwKKyAgICAgICAgICAgICAgICAmcGRldi0+c2JkZiwgbnIsIHJjKTsKICAgICAgICAgLyogRW50
cnkgaXMgbGlrZWx5IG5vdCBwcm9wZXJseSBjb25maWd1cmVkLiAqLwogICAgICAgICByZXR1cm4g
cmM7CiAgICAgfQpAQCAtNzIsNyArNzAsNiBAQCBzdGF0aWMgaW50IHVwZGF0ZV9lbnRyeShzdHJ1
Y3QgdnBjaV9tc2l4X2VudHJ5ICplbnRyeSwKIHN0YXRpYyB2b2lkIGNvbnRyb2xfd3JpdGUoY29u
c3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYsIHVuc2lnbmVkIGludCByZWcsCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHVpbnQzMl90IHZhbCwgdm9pZCAqZGF0YSkKIHsKLSAgICB1aW50OF90IHNs
b3QgPSBQQ0lfU0xPVChwZGV2LT5kZXZmbiksIGZ1bmMgPSBQQ0lfRlVOQyhwZGV2LT5kZXZmbik7
CiAgICAgc3RydWN0IHZwY2lfbXNpeCAqbXNpeCA9IGRhdGE7CiAgICAgYm9vbCBuZXdfbWFza2Vk
ID0gdmFsICYgUENJX01TSVhfRkxBR1NfTUFTS0FMTDsKICAgICBib29sIG5ld19lbmFibGVkID0g
dmFsICYgUENJX01TSVhfRkxBR1NfRU5BQkxFOwpAQCAtMTMzLDkgKzEzMCw4IEBAIHN0YXRpYyB2
b2lkIGNvbnRyb2xfd3JpdGUoY29uc3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYsIHVuc2lnbmVkIGlu
dCByZWcsCiAgICAgICAgICAgICAgICAgLyogSWdub3JlIG5vbi1wcmVzZW50IGVudHJ5LiAqLwog
ICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgZGVmYXVsdDoKLSAgICAgICAgICAg
ICAgICBncHJpbnRrKFhFTkxPR19XQVJOSU5HLAotICAgICAgICAgICAgICAgICAgICAgICAgIiUw
NHg6JTAyeDolMDJ4LiV1OiB1bmFibGUgdG8gZGlzYWJsZSBlbnRyeSAldTogJWRcbiIsCi0gICAg
ICAgICAgICAgICAgICAgICAgICBwZGV2LT5zZWcsIHBkZXYtPmJ1cywgc2xvdCwgZnVuYywgaSwg
cmMpOworICAgICAgICAgICAgICAgIGdwcmludGsoWEVOTE9HX1dBUk5JTkcsICIlcHA6IHVuYWJs
ZSB0byBkaXNhYmxlIGVudHJ5ICV1OiAlZFxuIiwKKyAgICAgICAgICAgICAgICAgICAgICAgICZw
ZGV2LT5zYmRmLCBpLCByYyk7CiAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAg
fQogICAgICAgICB9CkBAIC0xODAsOCArMTc2LDcgQEAgc3RhdGljIGJvb2wgYWNjZXNzX2FsbG93
ZWQoY29uc3Qgc3RydWN0IHBjaV9kZXYgKnBkZXYsIHVuc2lnbmVkIGxvbmcgYWRkciwKICAgICAg
ICAgcmV0dXJuIHRydWU7CiAKICAgICBncHJpbnRrKFhFTkxPR19XQVJOSU5HLAotICAgICAgICAg
ICAgIiUwNHg6JTAyeDolMDJ4LiV1OiB1bmFsaWduZWQgb3IgaW52YWxpZCBzaXplIE1TSS1YIHRh
YmxlIGFjY2Vzc1xuIiwKLSAgICAgICAgICAgIHBkZXYtPnNlZywgcGRldi0+YnVzLCBQQ0lfU0xP
VChwZGV2LT5kZXZmbiksIFBDSV9GVU5DKHBkZXYtPmRldmZuKSk7CisgICAgICAgICAgICAiJXBw
OiB1bmFsaWduZWQgb3IgaW52YWxpZCBzaXplIE1TSS1YIHRhYmxlIGFjY2Vzc1xuIiwgJnBkZXYt
PnNiZGYpOwogCiAgICAgcmV0dXJuIGZhbHNlOwogfQpAQCAtNDMxLDEwICs0MjYsOSBAQCBpbnQg
dnBjaV9tYWtlX21zaXhfaG9sZShjb25zdCBzdHJ1Y3QgcGNpX2RldiAqcGRldikKICAgICAgICAg
ICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgcHV0X2dmbihkLCBzdGFydCk7CiAgICAgICAg
ICAgICAgICAgZ3ByaW50ayhYRU5MT0dfV0FSTklORywKLSAgICAgICAgICAgICAgICAgICAgICAg
ICIlMDR4OiUwMng6JTAyeC4ldTogZXhpc3RpbmcgbWFwcGluZyAobWZuOiAlIiBQUklfbWZuCisg
ICAgICAgICAgICAgICAgICAgICAgICAiJXBwOiBleGlzdGluZyBtYXBwaW5nIChtZm46ICUiIFBS
SV9tZm4KICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlOiAlZCkgYXQgJSNseCBjbG9iYmVy
cyBNU0lYIE1NSU8gYXJlYVxuIiwKLSAgICAgICAgICAgICAgICAgICAgICAgIHBkZXYtPnNlZywg
cGRldi0+YnVzLCBQQ0lfU0xPVChwZGV2LT5kZXZmbiksCi0gICAgICAgICAgICAgICAgICAgICAg
ICBQQ0lfRlVOQyhwZGV2LT5kZXZmbiksIG1mbl94KG1mbiksIHQsIHN0YXJ0KTsKKyAgICAgICAg
ICAgICAgICAgICAgICAgICZwZGV2LT5zYmRmLCBtZm5feChtZm4pLCB0LCBzdGFydCk7CiAgICAg
ICAgICAgICAgICAgcmV0dXJuIC1FRVhJU1Q7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBw
dXRfZ2ZuKGQsIHN0YXJ0KTsKLS0gCjIuMjAuMSAoQXBwbGUgR2l0LTExNykKCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpYZW4tZGV2ZWwgbWFpbGluZyBs
aXN0Clhlbi1kZXZlbEBsaXN0cy54ZW5wcm9qZWN0Lm9yZwpodHRwczovL2xpc3RzLnhlbnByb2pl
Y3Qub3JnL21haWxtYW4vbGlzdGluZm8veGVuLWRldmVs

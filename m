Return-Path: <xen-devel-bounces@lists.xenproject.org>
X-Original-To: lists+xen-devel@lfdr.de
Delivered-To: lists+xen-devel@lfdr.de
Received: from lists.xenproject.org (lists.xenproject.org [192.237.175.120])
	by mail.lfdr.de (Postfix) with ESMTPS id 5335675F4C
	for <lists+xen-devel@lfdr.de>; Fri, 26 Jul 2019 08:52:21 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=lists.xenproject.org)
	by lists.xenproject.org with esmtp (Exim 4.89)
	(envelope-from <xen-devel-bounces@lists.xenproject.org>)
	id 1hqu1p-0004tj-DH; Fri, 26 Jul 2019 06:48:33 +0000
Received: from all-amaz-eas1.inumbo.com ([34.197.232.57]
 helo=us1-amaz-eas2.inumbo.com)
 by lists.xenproject.org with esmtp (Exim 4.89) (envelope-from
 <SRS0=wloi=VX=intel.com=chen.zhang@srs-us1.protection.inumbo.net>)
 id 1hqu1n-0004te-Nr
 for xen-devel@lists.xenproject.org; Fri, 26 Jul 2019 06:48:31 +0000
X-Inumbo-ID: 60645d5e-af71-11e9-808a-dbaa9afa509b
Received: from mga11.intel.com (unknown [192.55.52.93])
 by us1-amaz-eas2.inumbo.com (Halon) with ESMTPS
 id 60645d5e-af71-11e9-808a-dbaa9afa509b;
 Fri, 26 Jul 2019 06:48:30 +0000 (UTC)
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga006.jf.intel.com ([10.7.209.51])
 by fmsmga102.fm.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
 25 Jul 2019 23:48:28 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,309,1559545200"; d="scan'208";a="175510243"
Received: from unknown (HELO localhost.localdomain) ([10.239.13.19])
 by orsmga006.jf.intel.com with ESMTP; 25 Jul 2019 23:48:27 -0700
From: Zhang Chen <chen.zhang@intel.com >
To: Ian Jackson <ian.jackson@eu.citrix.com>, Wei Liu <wl@xen.org>,
 Anthony PERARD <anthony.perard@citrix.com>, xen-devel@lists.xenproject.org
Date: Fri, 26 Jul 2019 14:43:00 +0800
Message-Id: <20190726064300.27530-1-chen.zhang@intel.com>
X-Mailer: git-send-email 2.17.GIT
Subject: [Xen-devel] [PATCH V2] tools/libxl: Add iothread support for COLO
X-BeenThere: xen-devel@lists.xenproject.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Xen developer discussion <xen-devel.lists.xenproject.org>
List-Unsubscribe: <https://lists.xenproject.org/mailman/options/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=unsubscribe>
List-Post: <mailto:xen-devel@lists.xenproject.org>
List-Help: <mailto:xen-devel-request@lists.xenproject.org?subject=help>
List-Subscribe: <https://lists.xenproject.org/mailman/listinfo/xen-devel>,
 <mailto:xen-devel-request@lists.xenproject.org?subject=subscribe>
Cc: Zhang Chen <chen.zhang@intel.com>, Zhang Chen <zhangckid@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: xen-devel-bounces@lists.xenproject.org
Sender: "Xen-devel" <xen-devel-bounces@lists.xenproject.org>

RnJvbTogWmhhbmcgQ2hlbiA8Y2hlbi56aGFuZ0BpbnRlbC5jb20+CgpYZW4gQ09MTyBhbmQgS1ZN
IENPTE8gc2hhcmVkIGxvdHMgb2YgY29kZSBpbiBRZW11LgpLVk0gQ09MTyBoYXMgYWRkZWQgdGhl
IGlvdGhyZWFkIHN1cHBvcnQsIHNvIHdlIGFkZCBpdCBvbiBYZW4uCgpEZXRhaWw6Cmh0dHBzOi8v
d2lraS5xZW11Lm9yZy9GZWF0dXJlcy9DT0xPCgpTaWduZWQtb2ZmLWJ5OiBaaGFuZyBDaGVuIDxj
aGVuLnpoYW5nQGludGVsLmNvbT4KLS0tCiB0b29scy9saWJ4bC9saWJ4bF9kbS5jICAgICAgfCAx
NCArKysrKysrKysrKy0tLQogdG9vbHMvbGlieGwvbGlieGxfdHlwZXMuaWRsIHwgIDEgKwogdG9v
bHMveGwveGxfcGFyc2UuYyAgICAgICAgIHwgIDIgKysKIDMgZmlsZXMgY2hhbmdlZCwgMTQgaW5z
ZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS90b29scy9saWJ4bC9saWJ4
bF9kbS5jIGIvdG9vbHMvbGlieGwvbGlieGxfZG0uYwppbmRleCBmNGZjOTY0MTVkLi45NWNiMzBm
OWU2IDEwMDY0NAotLS0gYS90b29scy9saWJ4bC9saWJ4bF9kbS5jCisrKyBiL3Rvb2xzL2xpYnhs
L2xpYnhsX2RtLmMKQEAgLTE2MjksMTcgKzE2MjksMjUgQEAgc3RhdGljIGludCBsaWJ4bF9fYnVp
bGRfZGV2aWNlX21vZGVsX2FyZ3NfbmV3KGxpYnhsX19nYyAqZ2MsCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgbmljc1tpXS5jb2xvX2ZpbHRlcl9yZWRpcmVjdG9yMV9xdWV1
ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9fZmls
dGVyX3JlZGlyZWN0b3IxX291dGRldikpOwogICAgICAgICAgICAgICAgICAgICB9CisgICAgICAg
ICAgICAgICAgICAgIGlmIChuaWNzW2ldLmNvbG9faW90aHJlYWQpIHsKKyAgICAgICAgICAgICAg
ICAgICAgICAgIGZsZXhhcnJheV9hcHBlbmQoZG1fYXJncywgIi1vYmplY3QiKTsKKyAgICAgICAg
ICAgICAgICAgICAgICAgIGZsZXhhcnJheV9hcHBlbmQoZG1fYXJncywKKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgIEdDU1BSSU5URigiaW90aHJlYWQsaWQ9JXMiLAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIG5pY3NbaV0uY29sb19pb3RocmVhZCkpOworICAgICAgICAg
ICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIGlmIChuaWNzW2ldLmNvbG9fY29tcGFy
ZV9wcmlfaW4gJiYKICAgICAgICAgICAgICAgICAgICAgICAgIG5pY3NbaV0uY29sb19jb21wYXJl
X3NlY19pbiAmJgogICAgICAgICAgICAgICAgICAgICAgICAgbmljc1tpXS5jb2xvX2NvbXBhcmVf
b3V0ICYmCi0gICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9fY29tcGFyZV9ub3Rp
ZnlfZGV2KSB7CisgICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9fY29tcGFyZV9u
b3RpZnlfZGV2ICYmCisgICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9faW90aHJl
YWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXhhcnJheV9hcHBlbmQoZG1fYXJncywg
Ii1vYmplY3QiKTsKICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXhhcnJheV9hcHBlbmQoZG1f
YXJncywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgIEdDU1BSSU5URigiY29sby1jb21wYXJl
LGlkPWMxLHByaW1hcnlfaW49JXMsc2Vjb25kYXJ5X2luPSVzLG91dGRldj0lcyxub3RpZnlfZGV2
PSVzIiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgIEdDU1BSSU5URigiY29sby1jb21wYXJl
LGlkPWMxLHByaW1hcnlfaW49JXMsc2Vjb25kYXJ5X2luPSVzLG91dGRldj0lcyxub3RpZnlfZGV2
PSVzLGlvdGhyZWFkPSVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBu
aWNzW2ldLmNvbG9fY29tcGFyZV9wcmlfaW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgbmljc1tpXS5jb2xvX2NvbXBhcmVfc2VjX2luLAogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIG5pY3NbaV0uY29sb19jb21wYXJlX291dCwKLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNzW2ldLmNvbG9fY29tcGFyZV9ub3RpZnlfZGV2
KSk7CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmljc1tpXS5jb2xvX2Nv
bXBhcmVfbm90aWZ5X2RldiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBu
aWNzW2ldLmNvbG9faW90aHJlYWQpKTsKICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgICAgICBpb2VtdV9uaWNzKys7CmRpZmYgLS1naXQgYS90b29s
cy9saWJ4bC9saWJ4bF90eXBlcy5pZGwgYi90b29scy9saWJ4bC9saWJ4bF90eXBlcy5pZGwKaW5k
ZXggYjYxMzk5Y2UzNi4uZWRhOTU4ZWI0YiAxMDA2NDQKLS0tIGEvdG9vbHMvbGlieGwvbGlieGxf
dHlwZXMuaWRsCisrKyBiL3Rvb2xzL2xpYnhsL2xpYnhsX3R5cGVzLmlkbApAQCAtNzI3LDYgKzcy
Nyw3IEBAIGxpYnhsX2RldmljZV9uaWMgPSBTdHJ1Y3QoImRldmljZV9uaWMiLCBbCiAgICAgKCJj
b2xvX2ZpbHRlcl9yZWRpcmVjdG9yMV9xdWV1ZSIsIHN0cmluZyksCiAgICAgKCJjb2xvX2ZpbHRl
cl9yZWRpcmVjdG9yMV9pbmRldiIsIHN0cmluZyksCiAgICAgKCJjb2xvX2ZpbHRlcl9yZWRpcmVj
dG9yMV9vdXRkZXYiLCBzdHJpbmcpLAorICAgICgiY29sb19pb3RocmVhZCIsIHN0cmluZyksCiAg
ICAgKCJjb2xvX2NvbXBhcmVfcHJpX2luIiwgc3RyaW5nKSwKICAgICAoImNvbG9fY29tcGFyZV9z
ZWNfaW4iLCBzdHJpbmcpLAogICAgICgiY29sb19jb21wYXJlX291dCIsIHN0cmluZyksCmRpZmYg
LS1naXQgYS90b29scy94bC94bF9wYXJzZS5jIGIvdG9vbHMveGwveGxfcGFyc2UuYwppbmRleCBl
MTA1YmRhMmJiLi4wYjgxODlmMzc1IDEwMDY0NAotLS0gYS90b29scy94bC94bF9wYXJzZS5jCisr
KyBiL3Rvb2xzL3hsL3hsX3BhcnNlLmMKQEAgLTUyMSw2ICs1MjEsOCBAQCBpbnQgcGFyc2Vfbmlj
X2NvbmZpZyhsaWJ4bF9kZXZpY2VfbmljICpuaWMsIFhMVV9Db25maWcgKipjb25maWcsIGNoYXIg
KnRva2VuKQogICAgICAgICByZXBsYWNlX3N0cmluZygmbmljLT5jb2xvX2ZpbHRlcl9yZWRpcmVj
dG9yMV9pbmRldiwgb3BhcmcpOwogICAgIH0gZWxzZSBpZiAoTUFUQ0hfT1BUSU9OKCJjb2xvX2Zp
bHRlcl9yZWRpcmVjdG9yMV9vdXRkZXYiLCB0b2tlbiwgb3BhcmcpKSB7CiAgICAgICAgIHJlcGxh
Y2Vfc3RyaW5nKCZuaWMtPmNvbG9fZmlsdGVyX3JlZGlyZWN0b3IxX291dGRldiwgb3BhcmcpOwor
ICAgIH0gZWxzZSBpZiAoTUFUQ0hfT1BUSU9OKCJjb2xvX2lvdGhyZWFkIiwgdG9rZW4sIG9wYXJn
KSkgeworICAgICAgICByZXBsYWNlX3N0cmluZygmbmljLT5jb2xvX2lvdGhyZWFkLCBvcGFyZyk7
CiAgICAgfSBlbHNlIGlmIChNQVRDSF9PUFRJT04oImNvbG9fY29tcGFyZV9wcmlfaW4iLCB0b2tl
biwgb3BhcmcpKSB7CiAgICAgICAgIHJlcGxhY2Vfc3RyaW5nKCZuaWMtPmNvbG9fY29tcGFyZV9w
cmlfaW4sIG9wYXJnKTsKICAgICB9IGVsc2UgaWYgKE1BVENIX09QVElPTigiY29sb19jb21wYXJl
X3NlY19pbiIsIHRva2VuLCBvcGFyZykpIHsKLS0gCjIuMTcuR0lUCgoKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KWGVuLWRldmVsIG1haWxpbmcgbGlzdApY
ZW4tZGV2ZWxAbGlzdHMueGVucHJvamVjdC5vcmcKaHR0cHM6Ly9saXN0cy54ZW5wcm9qZWN0Lm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL3hlbi1kZXZlbA==
